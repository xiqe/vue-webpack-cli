!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n(1);var o=n(4),i=r(o),a=n(7),s=r(a),u=n(8),c=r(u),f=n(34),l=r(f),p=n(36),d=r(p),h=n(49),v=r(h);i.default.use(s.default),i.default.prototype.$http=c.default;var m=[{path:"/index",name:"index",component:v.default},{path:"*",redirect:"/index"}],y=new s.default({routes:m});new i.default({el:"#app",router:y,store:l.default,render:function(t){return t(d.default)}}).$mount("#app")},function(t,e,n){"use strict";t.exports=n(2).polyfill()},function(t,e,n){(function(e,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   v4.2.4+314e4831
	 */
!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function r(t){return"function"==typeof t}function o(t){z=t}function i(t){J=t}function a(){return function(){return e.nextTick(l)}}function s(){return"undefined"!=typeof q?function(){q(l)}:f()}function u(){var t=0,e=new W(l),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=l,function(){return t.port2.postMessage(0)}}function f(){var t=setTimeout;return function(){return t(l,1)}}function l(){for(var t=0;t<H;t+=2){var e=Z[t],n=Z[t+1];e(n),Z[t]=void 0,Z[t+1]=void 0}H=0}function p(){try{var t=Function("return this")().require("vertx");return q=t.runOnLoop||t.runOnContext,s()}catch(t){return f()}}function d(t,e){var n=this,r=new this.constructor(v);void 0===r[tt]&&M(r);var o=n._state;if(o){var i=arguments[o-1];J(function(){return T(o,r,i,n._result)})}else O(n,r,t,e);return r}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return $(n,t),n}function v(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(t){return ot.error=t,ot}}function _(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function b(t,e,n){J(function(t){var r=!1,o=_(n,e,function(n){r||(r=!0,e!==n?$(t,n):C(t,n))},function(e){r||(r=!0,A(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,A(t,o))},t)}function w(t,e){e._state===nt?C(t,e._result):e._state===rt?A(t,e._result):O(e,void 0,function(e){return $(t,e)},function(e){return A(t,e)})}function x(t,e,n){e.constructor===t.constructor&&n===d&&e.constructor.resolve===h?w(t,e):n===ot?(A(t,ot.error),ot.error=null):void 0===n?C(t,e):r(n)?b(t,e,n):C(t,e)}function $(e,n){e===n?A(e,m()):t(n)?x(e,n,g(n)):C(e,n)}function k(t){t._onerror&&t._onerror(t._result),E(t)}function C(t,e){t._state===et&&(t._result=e,t._state=nt,0!==t._subscribers.length&&J(E,t))}function A(t,e){t._state===et&&(t._state=rt,t._result=e,J(k,t))}function O(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+nt]=n,o[i+rt]=r,0===i&&t._state&&J(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?T(n,r,o,i):o(i);t._subscribers.length=0}}function S(t,e){try{return t(e)}catch(t){return ot.error=t,ot}}function T(t,e,n,o){var i=r(n),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=S(n,o),a===ot?(c=!0,s=a.error,a.error=null):u=!0,e===a)return void A(e,y())}else a=o,u=!0;e._state!==et||(i&&u?$(e,a):c?A(e,s):t===nt?C(e,a):t===rt&&A(e,a))}function j(t,e){try{e(function(e){$(t,e)},function(e){A(t,e)})}catch(e){A(t,e)}}function N(){return it++}function M(t){t[tt]=it++,t._state=void 0,t._result=void 0,t._subscribers=[]}function R(){return new Error("Array Methods must be provided an Array")}function L(t){return new at(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function I(t){var e=this,n=new e(v);return A(n,t),n}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(){var t=void 0;if("undefined"!=typeof n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=st}var U=void 0;U=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=U,H=0,q=void 0,z=void 0,J=function(t,e){Z[H]=t,Z[H+1]=e,H+=2,2===H&&(z?z(l):Q())},K="undefined"!=typeof window?window:void 0,G=K||{},W=G.MutationObserver||G.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),Y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),Q=void 0;Q=X?a():W?u():Y?c():void 0===K?p():f();var tt=Math.random().toString(36).substring(2),et=void 0,nt=1,rt=2,ot={error:null},it=0,at=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(v),this.promise[tt]||M(this.promise),B(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&C(this.promise,this._result))):A(this.promise,R())}return t.prototype._enumerate=function(t){for(var e=0;this._state===et&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=g(t);if(o===d&&t._state!==et)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===st){var i=new n(v);x(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===et&&(this._remaining--,t===rt?A(r,n):this._result[e]=n),0===this._remaining&&C(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;O(t,void 0,function(t){return n._settledAt(nt,e,t)},function(t){return n._settledAt(rt,e,t)})},t}(),st=function(){function t(e){this[tt]=N(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&P(),this instanceof t?j(this,e):F())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,n=e.constructor;return e.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},t}();return st.prototype.then=d,st.all=L,st.race=D,st.resolve=h,st.reject=I,st._setScheduler=o,st._setAsap=i,st._asap=J,st.polyfill=V,st.Promise=st,st})}).call(e,n(3),function(){return this}())},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function a(){v&&d&&(v=!1,d.length?h=d.concat(h):m=-1,h.length&&s())}function s(){if(!v){var t=o(a);v=!0;for(var e=h.length;e;){for(d=h,h=[];++m<e;)d&&d[m].run();m=-1,e=h.length}d=null,v=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var f,l,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var d,h=[],v=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new u(t,e)),1!==h.length||v||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){(function(e,n){/*!
	 * Vue.js v2.5.15
	 * (c) 2014-2018 Evan You
	 * Released under the MIT License.
	 */
!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t){return void 0===t||null===t}function r(t){return void 0!==t&&null!==t}function o(t){return t===!0}function i(t){return t===!1}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function s(t){return null!==t&&"object"==typeof t}function u(t){return ji.call(t).slice(8,-1)}function c(t){return"[object Object]"===ji.call(t)}function f(t){return"[object RegExp]"===ji.call(t)}function l(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function h(t,e){for(var n=Object.create(null),r=t.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}function v(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function m(t,e){return Ri.call(t,e)}function y(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}function g(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function _(t,e){return t.bind(e)}function b(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function w(t,e){for(var n in e)t[n]=e[n];return t}function x(t){for(var e={},n=0;n<t.length;n++)t[n]&&w(e,t[n]);return e}function $(t,e,n){}function k(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}function C(t,e){if(t===e)return!0;var n=s(t),r=s(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var o=Array.isArray(t),i=Array.isArray(e);if(o&&i)return t.length===e.length&&t.every(function(t,n){return C(t,e[n])});if(o||i)return!1;var a=Object.keys(t),u=Object.keys(e);return a.length===u.length&&a.every(function(n){return C(t[n],e[n])})}catch(t){return!1}}function A(t,e){for(var n=0;n<t.length;n++)if(C(t[n],e))return n;return-1}function O(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function E(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function S(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function T(t){if(!Ki.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}function j(t){return"function"==typeof t&&/native code/.test(t.toString())}function N(t){wa.target&&xa.push(wa.target),wa.target=t}function M(){wa.target=xa.pop()}function R(t){return new $a(void 0,void 0,void 0,String(t))}function L(t){var e=new $a(t.tag,t.data,t.children,t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.isCloned=!0,e}function D(t){Ta=t}function I(t,e,n){t.__proto__=e}function P(t,e,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];S(t,i,e[i])}}function F(t,e){if(s(t)&&!(t instanceof $a)){var n;return m(t,"__ob__")&&t.__ob__ instanceof ja?n=t.__ob__:Ta&&!ca()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new ja(t)),e&&n&&n.vmCount++,n}}function V(t,e,n,r,o){var i=new wa,a=Object.getOwnPropertyDescriptor(t,e);if(!a||a.configurable!==!1){var s=a&&a.get;s||2!==arguments.length||(n=t[e]);var u=a&&a.set,c=!o&&F(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return wa.target&&(i.depend(),c&&(c.dep.depend(),Array.isArray(e)&&H(e))),e},set:function(e){var a=s?s.call(t):n;e===a||e!==e&&a!==a||(r&&r(),u?u.call(t,e):n=e,c=!o&&F(e),i.notify())}})}}function U(t,e,n){if(Array.isArray(t)||s(t)||pa("Cannot set reactive property on non-object/array value: "+t),Array.isArray(t)&&l(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?(pa("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),n):r?(V(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function B(t,e){if(Array.isArray(t)||s(t)||pa("Cannot delete reactive property on non-object/array value: "+t),Array.isArray(t)&&l(e))return void t.splice(e,1);var n=t.__ob__;return t._isVue||n&&n.vmCount?void pa("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):void(m(t,e)&&(delete t[e],n&&n.dep.notify()))}function H(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&H(e)}function q(t,e){if(!e)return t;for(var n,r,o,i=Object.keys(e),a=0;a<i.length;a++)n=i[a],r=t[n],o=e[n],m(t,n)?c(r)&&c(o)&&q(r,o):U(t,n,o);return t}function z(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,o="function"==typeof t?t.call(n,n):t;return r?q(r,o):o}:e?t?function(){return q("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function J(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function K(t,e,n,r){var o=Object.create(t||null);return e?(Q(r,e,n),w(o,e)):o}function G(t){for(var e in t.components)W(e)}function W(t){/^[a-zA-Z][\w-]*$/.test(t)||pa('Invalid component name: "'+t+'". Component names can only contain alphanumeric characters and the hyphen, and must start with a letter.'),(Ni(t)||Ji.isReservedTag(t))&&pa("Do not use built-in or reserved HTML elements as component id: "+t)}function X(t,e){var n=t.props;if(n){var r,o,i,a={};if(Array.isArray(n))for(r=n.length;r--;)o=n[r],"string"==typeof o?(i=Di(o),a[i]={type:null}):pa("props must be strings when using array syntax.");else if(c(n))for(var s in n)o=n[s],i=Di(s),a[i]=c(o)?o:{type:o};else pa('Invalid value for option "props": expected an Array or an Object, but got '+u(n)+".",e);t.props=a}}function Y(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(c(n))for(var i in n){var a=n[i];r[i]=c(a)?w({from:i},a):{from:a}}else pa('Invalid value for option "inject": expected an Array or an Object, but got '+u(n)+".",e)}}function Z(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}function Q(t,e,n){c(e)||pa('Invalid value for option "'+t+'": expected an Object, but got '+u(e)+".",n)}function tt(t,e,n){function r(r){var o=Na[r]||La;u[r]=o(t[r],e[r],n,r)}G(e),"function"==typeof e&&(e=e.options),X(e,n),Y(e,n),Z(e);var o=e.extends;if(o&&(t=tt(t,o,n)),e.mixins)for(var i=0,a=e.mixins.length;i<a;i++)t=tt(t,e.mixins[i],n);var s,u={};for(s in t)r(s);for(s in e)m(t,s)||r(s);return u}function et(t,e,n,r){if("string"==typeof n){var o=t[e];if(m(o,n))return o[n];var i=Di(n);if(m(o,i))return o[i];var a=Ii(i);if(m(o,a))return o[a];var s=o[n]||o[i]||o[a];return r&&!s&&pa("Failed to resolve "+e.slice(0,-1)+": "+n,t),s}}function nt(t,e,n,r){var o=e[t],i=!m(n,t),a=n[t],s=ut(Boolean,o.type);if(s>-1)if(i&&!m(o,"default"))a=!1;else if(""===a||a===Fi(t)){var u=ut(String,o.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=rt(r,o,t);var c=Ta;D(!0),F(a),D(c)}return ot(o,t,a,r,i),a}function rt(t,e,n){if(m(e,"default")){var r=e.default;return s(r)&&pa('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',t),t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"==typeof r&&"Function"!==at(e.type)?r.call(t):r}}function ot(t,e,n,r,o){if(t.required&&o)return void pa('Missing required prop: "'+e+'"',r);if(null!=n||t.required){var i=t.type,a=!i||i===!0,s=[];if(i){Array.isArray(i)||(i=[i]);for(var c=0;c<i.length&&!a;c++){var f=it(n,i[c]);s.push(f.expectedType||""),a=f.valid}}if(!a)return void pa('Invalid prop: type check failed for prop "'+e+'". Expected '+s.map(Ii).join(", ")+", got "+u(n)+".",r);var l=t.validator;l&&(l(n)||pa('Invalid prop: custom validator check failed for prop "'+e+'".',r))}}function it(t,e){var n,r=at(e);if(Da.test(r)){var o=typeof t;n=o===r.toLowerCase(),n||"object"!==o||(n=t instanceof e)}else n="Object"===r?c(t):"Array"===r?Array.isArray(t):t instanceof e;return{valid:n,expectedType:r}}function at(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function st(t,e){return at(t)===at(e)}function ut(t,e){if(!Array.isArray(e))return st(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(st(e[n],t))return n;return-1}function ct(t,e,n){if(e)for(var r=e;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{var a=o[i].call(r,t,e,n)===!1;if(a)return}catch(t){ft(t,r,"errorCaptured hook")}}ft(t,e,n)}function ft(t,e,n){if(Ji.errorHandler)try{return Ji.errorHandler.call(null,t,e,n)}catch(t){lt(t,null,"config.errorHandler")}lt(t,e,n)}function lt(t,e,n){if(pa("Error in "+n+': "'+t.toString()+'"',e),!Wi&&!Xi||"undefined"==typeof console)throw t;console.error(t)}function pt(){Pa=!1;var t=Ia.slice(0);Ia.length=0;for(var e=0;e<t.length;e++)t[e]()}function dt(t){return t._withTask||(t._withTask=function(){Fa=!0;var e=t.apply(null,arguments);return Fa=!1,e})}function ht(t,e){var n;if(Ia.push(function(){if(t)try{t.call(e)}catch(t){ct(t,e,"nextTick")}else n&&n(e)}),Pa||(Pa=!0,Fa?Ra():Ma()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}function vt(t){mt(t,ts),ts.clear()}function mt(t,e){var n,r,o=Array.isArray(t);if(!(!o&&!s(t)||Object.isFrozen(t)||t instanceof $a)){if(t.__ob__){var i=t.__ob__.dep.id;if(e.has(i))return;e.add(i)}if(o)for(n=t.length;n--;)mt(t[n],e);else for(r=Object.keys(t),n=r.length;n--;)mt(t[r[n]],e)}}function yt(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),o=0;o<r.length;o++)r[o].apply(null,t)}return e.fns=t,e}function gt(e,n,r,o,i){var a,s,u,c,f;for(a in e)s=u=e[a],c=n[a],f=es(a),t(u)?pa('Invalid handler for event "'+f.name+'": got '+String(u),i):t(c)?(t(u.fns)&&(u=e[a]=yt(u)),r(f.name,u,f.once,f.capture,f.passive,f.params)):u!==c&&(c.fns=u,e[a]=c);for(a in n)t(e[a])&&(f=es(a),o(f.name,n[a],f.capture))}function _t(e,n,i){function a(){i.apply(this,arguments),v(s.fns,a)}e instanceof $a&&(e=e.data.hook||(e.data.hook={}));var s,u=e[n];t(u)?s=yt([a]):r(u.fns)&&o(u.merged)?(s=u,s.fns.push(a)):s=yt([u,a]),s.merged=!0,e[n]=s}function bt(e,n,o){var i=n.options.props;if(!t(i)){var a={},s=e.attrs,u=e.props;if(r(s)||r(u))for(var c in i){var f=Fi(c),l=c.toLowerCase();c!==l&&s&&m(s,l)&&da('Prop "'+l+'" is passed to component '+va(o||n)+', but the declared prop name is "'+c+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+f+'" instead of "'+c+'".'),wt(a,u,c,f,!0)||wt(a,s,c,f,!1)}return a}}function wt(t,e,n,o,i){if(r(e)){if(m(e,n))return t[n]=e[n],i||delete e[n],!0;if(m(e,o))return t[n]=e[o],i||delete e[o],!0}return!1}function xt(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function $t(t){return a(t)?[R(t)]:Array.isArray(t)?Ct(t):void 0}function kt(t){return r(t)&&r(t.text)&&i(t.isComment)}function Ct(e,n){var i,s,u,c,f=[];for(i=0;i<e.length;i++)s=e[i],t(s)||"boolean"==typeof s||(u=f.length-1,c=f[u],Array.isArray(s)?s.length>0&&(s=Ct(s,(n||"")+"_"+i),kt(s[0])&&kt(c)&&(f[u]=R(c.text+s[0].text),s.shift()),f.push.apply(f,s)):a(s)?kt(c)?f[u]=R(c.text+s):""!==s&&f.push(R(s)):kt(s)&&kt(c)?f[u]=R(c.text+s.text):(o(e._isVList)&&r(s.tag)&&t(s.key)&&r(n)&&(s.key="__vlist"+n+"_"+i+"__"),f.push(s)));return f}function At(t,e){return(t.__esModule||la&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function Ot(t,e,n,r,o){var i=Ca();return i.asyncFactory=t,i.asyncMeta={data:e,context:n,children:r,tag:o},i}function Et(e,n,i){if(o(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;if(o(e.loading)&&r(e.loadingComp))return e.loadingComp;if(!r(e.contexts)){var a=e.contexts=[i],u=!0,c=function(){for(var t=0,e=a.length;t<e;t++)a[t].$forceUpdate()},f=O(function(t){e.resolved=At(t,n),u||c()}),l=O(function(t){pa("Failed to resolve async component: "+String(e)+(t?"\nReason: "+t:"")),r(e.errorComp)&&(e.error=!0,c())}),p=e(f,l);return s(p)&&("function"==typeof p.then?t(e.resolved)&&p.then(f,l):r(p.component)&&"function"==typeof p.component.then&&(p.component.then(f,l),r(p.error)&&(e.errorComp=At(p.error,n)),r(p.loading)&&(e.loadingComp=At(p.loading,n),0===p.delay?e.loading=!0:setTimeout(function(){t(e.resolved)&&t(e.error)&&(e.loading=!0,c())},p.delay||200)),r(p.timeout)&&setTimeout(function(){t(e.resolved)&&l("timeout ("+p.timeout+"ms)")},p.timeout))),u=!1,e.loading?e.loadingComp:e.resolved}e.contexts.push(i)}function St(t){return t.isComment&&t.asyncFactory}function Tt(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||St(n)))return n}}function jt(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Rt(t,e)}function Nt(t,e,n){n?Qa.$once(t,e):Qa.$on(t,e)}function Mt(t,e){Qa.$off(t,e)}function Rt(t,e,n){Qa=t,gt(e,n||{},Nt,Mt,t),Qa=void 0}function Lt(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this,o=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.$on(t[i],n);else(o._events[t]||(o._events[t]=[])).push(n),e.test(t)&&(o._hasHookEvent=!0);return o},t.prototype.$once=function(t,e){function n(){r.$off(t,n),e.apply(r,arguments)}var r=this;return n.fn=e,r.$on(t,n),r},t.prototype.$off=function(t,e){var n=this,r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(t)){for(var o=0,i=t.length;o<i;o++)n.$off(t[o],e);return r}var a=r._events[t];if(!a)return r;if(!e)return r._events[t]=null,r;if(e)for(var s,u=a.length;u--;)if(s=a[u],s===e||s.fn===e){a.splice(u,1);break}return r},t.prototype.$emit=function(t){var e=this,n=t.toLowerCase();n!==t&&e._events[n]&&da('Event "'+n+'" is emitted in component '+va(e)+' but the handler is registered for "'+t+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+Fi(t)+'" instead of "'+t+'".');var r=e._events[t];if(r){r=r.length>1?b(r):r;for(var o=b(arguments,1),i=0,a=r.length;i<a;i++)try{r[i].apply(e,o)}catch(n){ct(n,e,'event handler for "'+t+'"')}}return e}}function Dt(t,e){var n={};if(!t)return n;for(var r=0,o=t.length;r<o;r++){var i=t[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==e&&i.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(i);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===i.tag?u.push.apply(u,i.children||[]):u.push(i)}}for(var c in n)n[c].every(It)&&delete n[c];return n}function It(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Pt(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?Pt(t[n],e):e[t[n].key]=t[n].fn;return e}function Ft(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Vt(t){t.prototype._update=function(t,e){var n=this;n._isMounted&&Jt(n,"beforeUpdate");var r=n.$el,o=n._vnode,i=ns;ns=n,n._vnode=t,o?n.$el=n.__patch__(o,t):(n.$el=n.__patch__(n.$el,t,e,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),ns=i,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Jt(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||v(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Jt(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Ut(t,e,n){t.$el=e,t.$options.render||(t.$options.render=Ca,t.$options.template&&"#"!==t.$options.template.charAt(0)||t.$options.el||e?pa("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",t):pa("Failed to mount component: template or render function not defined.",t)),Jt(t,"beforeMount");var r;return r=Ji.performance&&Ha?function(){var e=t._name,r=t._uid,o="vue-perf-start:"+r,i="vue-perf-end:"+r;Ha(o);var a=t._render();Ha(i),qa("vue "+e+" render",o,i),Ha(o),t._update(a,n),Ha(i),qa("vue "+e+" patch",o,i)}:function(){t._update(t._render(),n)},new ds(t,r,$,null,!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Jt(t,"mounted")),t}function Bt(t,e,n,r,o){rs=!0;var i=!!(o||t.$options._renderChildren||r.data.scopedSlots||t.$scopedSlots!==Ti);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=o,t.$attrs=r.data.attrs||Ti,t.$listeners=n||Ti,e&&t.$options.props){D(!1);for(var a=t._props,s=t.$options._propKeys||[],u=0;u<s.length;u++){var c=s[u],f=t.$options.props;a[c]=nt(c,f,e,t)}D(!0),t.$options.propsData=e}n=n||Ti;var l=t.$options._parentListeners;t.$options._parentListeners=n,Rt(t,n,l),i&&(t.$slots=Dt(o,r.context),t.$forceUpdate()),rs=!1}function Ht(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function qt(t,e){if(e){if(t._directInactive=!1,Ht(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)qt(t.$children[n]);Jt(t,"activated")}}function zt(t,e){if(!(e&&(t._directInactive=!0,Ht(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)zt(t.$children[n]);Jt(t,"deactivated")}}function Jt(t,e){N();var n=t.$options[e];if(n)for(var r=0,o=n.length;r<o;r++)try{n[r].call(t)}catch(n){ct(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),M()}function Kt(){ls=is.length=as.length=0,ss={},us={},cs=fs=!1}function Gt(){fs=!0;var t,e;for(is.sort(function(t,e){return t.id-e.id}),ls=0;ls<is.length;ls++)if(t=is[ls],e=t.id,ss[e]=null,t.run(),null!=ss[e]&&(us[e]=(us[e]||0)+1,us[e]>os)){pa("You may have an infinite update loop "+(t.user?'in watcher with expression "'+t.expression+'"':"in a component render function."),t.vm);break}var n=as.slice(),r=is.slice();Kt(),Yt(n),Wt(r),fa&&Ji.devtools&&fa.emit("flush")}function Wt(t){for(var e=t.length;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&Jt(r,"updated")}}function Xt(t){t._inactive=!1,as.push(t)}function Yt(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,qt(t[e],!0)}function Zt(t){var e=t.id;if(null==ss[e]){if(ss[e]=!0,fs){for(var n=is.length-1;n>ls&&is[n].id>t.id;)n--;is.splice(n+1,0,t)}else is.push(t);cs||(cs=!0,ht(Gt))}}function Qt(t,e,n){hs.get=function(){return this[e][n]},hs.set=function(t){this[e][n]=t},Object.defineProperty(t,n,hs)}function te(t){t._watchers=[];var e=t.$options;e.props&&ee(t,e.props),e.methods&&se(t,e.methods),e.data?ne(t):F(t._data={},!0),e.computed&&oe(t,e.computed),e.watch&&e.watch!==oa&&ue(t,e.watch)}function ee(t,e){var n=t.$options.propsData||{},r=t._props={},o=t.$options._propKeys=[],i=!t.$parent;i||D(!1);var a=function(i){o.push(i);var a=nt(i,e,n,t),s=Fi(i);(Mi(s)||Ji.isReservedAttr(s))&&pa('"'+s+'" is a reserved attribute and cannot be used as component prop.',t),V(r,i,a,function(){t.$parent&&!rs&&pa("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+i+'"',t)}),i in t||Qt(t,"_props",i)};for(var s in e)a(s);D(!0)}function ne(t){var e=t.$options.data;e=t._data="function"==typeof e?re(e,t):e||{},c(e)||(e={},pa("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",t));for(var n=Object.keys(e),r=t.$options.props,o=t.$options.methods,i=n.length;i--;){var a=n[i];o&&m(o,a)&&pa('Method "'+a+'" has already been defined as a data property.',t),r&&m(r,a)?pa('The data property "'+a+'" is already declared as a prop. Use prop default value instead.',t):E(a)||Qt(t,"_data",a)}F(e,!0)}function re(t,e){N();try{return t.call(e,e)}catch(t){return ct(t,e,"data()"),{}}finally{M()}}function oe(t,e){var n=t._computedWatchers=Object.create(null),r=ca();for(var o in e){var i=e[o],a="function"==typeof i?i:i.get;null==a&&pa('Getter is missing for computed property "'+o+'".',t),r||(n[o]=new ds(t,a||$,$,vs)),o in t?o in t.$data?pa('The computed property "'+o+'" is already defined in data.',t):t.$options.props&&o in t.$options.props&&pa('The computed property "'+o+'" is already defined as a prop.',t):ie(t,o,i)}}function ie(t,e,n){var r=!ca();"function"==typeof n?(hs.get=r?ae(e):n,hs.set=$):(hs.get=n.get?r&&n.cache!==!1?ae(e):n.get:$,hs.set=n.set?n.set:$),hs.set===$&&(hs.set=function(){pa('Computed property "'+e+'" was assigned to but it has no setter.',this)}),Object.defineProperty(t,e,hs)}function ae(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),wa.target&&e.depend(),e.value}}function se(t,e){var n=t.$options.props;for(var r in e)null==e[r]&&pa('Method "'+r+'" has an undefined value in the component definition. Did you reference the function correctly?',t),n&&m(n,r)&&pa('Method "'+r+'" has already been defined as a prop.',t),r in t&&E(r)&&pa('Method "'+r+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),t[r]=null==e[r]?$:Vi(e[r],t)}function ue(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)ce(t,n,r[o]);else ce(t,n,r)}}function ce(t,e,n,r){return c(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function fe(t){var e={};e.get=function(){return this._data};var n={};n.get=function(){return this._props},e.set=function(t){pa("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){pa("$props is readonly.",this)},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=U,t.prototype.$delete=B,t.prototype.$watch=function(t,e,n){var r=this;if(c(e))return ce(r,t,e,n);n=n||{},n.user=!0;var o=new ds(r,t,e,n);return n.immediate&&e.call(r,o.value),function(){o.teardown()}}}function le(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}function pe(t){var e=de(t.$options.inject,t);e&&(D(!1),Object.keys(e).forEach(function(n){V(t,n,e[n],function(){pa('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+n+'"',t)})}),D(!0))}function de(t,e){if(t){for(var n=Object.create(null),r=la?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),o=0;o<r.length;o++){for(var i=r[o],a=t[i].from,s=e;s;){if(s._provided&&m(s._provided,a)){n[i]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[i]){var u=t[i].default;n[i]="function"==typeof u?u.call(e):u}else pa('Injection "'+i+'" not found',e)}return n}}function he(t,e){var n,o,i,a,u;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),o=0,i=t.length;o<i;o++)n[o]=e(t[o],o);else if("number"==typeof t)for(n=new Array(t),o=0;o<t;o++)n[o]=e(o+1,o);else if(s(t))for(a=Object.keys(t),n=new Array(a.length),o=0,i=a.length;o<i;o++)u=a[o],n[o]=e(t[u],u,o);return r(n)&&(n._isVList=!0),n}function ve(t,e,n,r){var o,i=this.$scopedSlots[t];if(i)n=n||{},r&&(s(r)||pa("slot v-bind without argument expects an Object",this),n=w(w({},r),n)),o=i(n)||e;else{var a=this.$slots[t];a&&(a._rendered&&pa('Duplicate presence of slot "'+t+'" found in the same render tree - this will likely cause render errors.',this),a._rendered=!0),o=a||e}var u=n&&n.slot;return u?this.$createElement("template",{slot:u},o):o}function me(t){return et(this.$options,"filters",t,!0)||Bi}function ye(t,e){return Array.isArray(t)?t.indexOf(e)===-1:t!==e}function ge(t,e,n,r,o){var i=Ji.keyCodes[e]||n;return o&&r&&!Ji.keyCodes[e]?ye(o,r):i?ye(i,t):r?Fi(r)!==e:void 0}function _e(t,e,n,r,o){if(n)if(s(n)){Array.isArray(n)&&(n=x(n));var i,a=function(a){if("class"===a||"style"===a||Mi(a))i=t;else{var s=t.attrs&&t.attrs.type;i=r||Ji.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}if(!(a in i)&&(i[a]=n[a],o)){var u=t.on||(t.on={});u["update:"+a]=function(t){n[a]=t}}};for(var u in n)a(u)}else pa("v-bind without argument expects an Object or Array value",this);return t}function be(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?r:(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),xe(r,"__static__"+t,!1),r)}function we(t,e,n){return xe(t,"__once__"+e+(n?"_"+n:""),!0),t}function xe(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&$e(t[r],e+"_"+r,n);else $e(t,e,n)}function $e(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function ke(t,e){if(e)if(c(e)){var n=t.on=t.on?w({},t.on):{};for(var r in e){var o=n[r],i=e[r];n[r]=o?[].concat(o,i):i}}else pa("v-on without argument expects an Object value",this);return t}function Ce(t){t._o=we,t._n=d,t._s=p,t._l=he,t._t=ve,t._q=C,t._i=A,t._m=be,t._f=me,t._k=ge,t._b=_e,t._v=R,t._e=Ca,t._u=Pt,t._g=ke}function Ae(t,e,n,r,i){var a=i.options;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||Ti,this.injections=de(a.inject,r),this.slots=function(){return Dt(n,r)};var s=Object.create(r),u=o(a._compiled),c=!u;u&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||Ti),a._scopeId?this._c=function(t,e,n,o){var i=Le(s,t,e,n,o,c);return i&&!Array.isArray(i)&&(i.fnScopeId=a._scopeId,i.fnContext=r),i}:this._c=function(t,e,n,r){return Le(s,t,e,n,r,c)}}function Oe(t,e,n,o,i){var a=t.options,s={},u=a.props;if(r(u))for(var c in u)s[c]=nt(c,u,e||Ti);else r(n.attrs)&&Se(s,n.attrs),r(n.props)&&Se(s,n.props);var f=new Ae(n,s,i,o,t),l=a.render.call(null,f._c,f);if(l instanceof $a)return Ee(l,n,o,a),l;if(Array.isArray(l)){for(var p=$t(l)||[],d=0;d<p.length;d++)Ee(p[d],n,o,a);return p}}function Ee(t,e,n,r){t.fnContext=n,t.fnOptions=r,e.slot&&((t.data||(t.data={})).slot=e.slot)}function Se(t,e){for(var n in e)t[Di(n)]=e[n]}function Te(e,n,i,a,u){if(!t(e)){var c=i.$options._base;if(s(e)&&(e=c.extend(e)),"function"!=typeof e)return void pa("Invalid Component definition: "+String(e),i);var f;if(t(e.cid)&&(f=e,e=Et(f,c,i),void 0===e))return Ot(f,n,i,a,u);n=n||{},He(e),r(n.model)&&Re(e.options,n);var l=bt(n,e,u);if(o(e.options.functional))return Oe(e,l,n,i,a);var p=n.on;if(n.on=n.nativeOn,o(e.options.abstract)){var d=n.slot;n={},d&&(n.slot=d)}Ne(n);var h=e.options.name||u,v=new $a("vue-component-"+e.cid+(h?"-"+h:""),n,void 0,void 0,void 0,i,{Ctor:e,propsData:l,listeners:p,tag:u,children:a},f);return v}}function je(t,e,n,o){var i={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:n||null,_refElm:o||null},a=t.data.inlineTemplate;return r(a)&&(i.render=a.render,i.staticRenderFns=a.staticRenderFns),new t.componentOptions.Ctor(i)}function Ne(t){t.hook||(t.hook={});for(var e=0;e<ys.length;e++){var n=ys[e],r=t.hook[n],o=ms[n];t.hook[n]=r?Me(o,r):o}}function Me(t,e){return function(n,r,o,i){t(n,r,o,i),e(n,r,o,i)}}function Re(t,e){var n=t.model&&t.model.prop||"value",o=t.model&&t.model.event||"input";(e.props||(e.props={}))[n]=e.model.value;var i=e.on||(e.on={});r(i[o])?i[o]=[e.model.callback].concat(i[o]):i[o]=e.model.callback}function Le(t,e,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=_s),De(t,e,n,r,i)}function De(t,e,n,o,i){if(r(n)&&r(n.__ob__))return pa("Avoid using observed data object as vnode data: "+JSON.stringify(n)+"\nAlways create fresh vnode data objects in each render!",t),Ca();if(r(n)&&r(n.is)&&(e=n.is),!e)return Ca();r(n)&&r(n.key)&&!a(n.key)&&pa("Avoid using non-primitive value as key, use string/number value instead.",t),Array.isArray(o)&&"function"==typeof o[0]&&(n=n||{},n.scopedSlots={default:o[0]},o.length=0),i===_s?o=$t(o):i===gs&&(o=xt(o));var s,u;if("string"==typeof e){var c;u=t.$vnode&&t.$vnode.ns||Ji.getTagNamespace(e),s=Ji.isReservedTag(e)?new $a(Ji.parsePlatformTagName(e),n,o,void 0,void 0,t):r(c=et(t.$options,"components",e))?Te(c,n,t,o,e):new $a(e,n,o,void 0,void 0,t)}else s=Te(e,n,t,o);return Array.isArray(s)?s:r(s)?(r(u)&&Ie(s,u),r(n)&&Pe(n),s):Ca()}function Ie(e,n,i){if(e.ns=n,"foreignObject"===e.tag&&(n=void 0,i=!0),r(e.children))for(var a=0,s=e.children.length;a<s;a++){var u=e.children[a];r(u.tag)&&(t(u.ns)||o(i)&&"svg"!==u.tag)&&Ie(u,n,i)}}function Pe(t){s(t.style)&&vt(t.style),s(t.class)&&vt(t.class)}function Fe(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=Dt(e._renderChildren,r),t.$scopedSlots=Ti,t._c=function(e,n,r,o){return Le(t,e,n,r,o,!1)},t.$createElement=function(e,n,r,o){return Le(t,e,n,r,o,!0)};var o=n&&n.data;V(t,"$attrs",o&&o.attrs||Ti,function(){!rs&&pa("$attrs is readonly.",t)},!0),V(t,"$listeners",e._parentListeners||Ti,function(){!rs&&pa("$listeners is readonly.",t)},!0)}function Ve(t){Ce(t.prototype),t.prototype.$nextTick=function(t){return ht(t,this)},t.prototype._render=function(){var t=this,e=t.$options,n=e.render,r=e._parentVnode;for(var o in t.$slots)t.$slots[o]._rendered=!1;r&&(t.$scopedSlots=r.data.scopedSlots||Ti),t.$vnode=r;var i;try{i=n.call(t._renderProxy,t.$createElement)}catch(e){if(ct(e,t,"render"),t.$options.renderError)try{i=t.$options.renderError.call(t._renderProxy,t.$createElement,e)}catch(e){ct(e,t,"renderError"),i=t._vnode}else i=t._vnode}return i instanceof $a||(Array.isArray(i)&&pa("Multiple root nodes returned from render function. Render function should return a single root node.",t),i=Ca()),i.parent=r,i}}function Ue(t){t.prototype._init=function(t){var e=this;e._uid=bs++;var n,r;Ji.performance&&Ha&&(n="vue-perf-start:"+e._uid,r="vue-perf-end:"+e._uid,Ha(n)),e._isVue=!0,t&&t._isComponent?Be(e,t):e.$options=tt(He(e.constructor),t||{},e),Ja(e),e._self=e,Ft(e),jt(e),Fe(e),Jt(e,"beforeCreate"),pe(e),te(e),le(e),Jt(e,"created"),Ji.performance&&Ha&&(e._name=va(e,!1),Ha(r),qa("vue "+e._name+" init",n,r)),e.$options.el&&e.$mount(e.$options.el)}}function Be(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r,n._parentElm=e._parentElm,n._refElm=e._refElm;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function He(t){var e=t.options;if(t.super){var n=He(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var o=qe(t);o&&w(t.extendOptions,o),e=t.options=tt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function qe(t){var e,n=t.options,r=t.extendOptions,o=t.sealedOptions;for(var i in n)n[i]!==o[i]&&(e||(e={}),e[i]=ze(n[i],r[i],o[i]));return e}function ze(t,e,n){if(Array.isArray(t)){var r=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var o=0;o<t.length;o++)(e.indexOf(t[o])>=0||n.indexOf(t[o])<0)&&r.push(t[o]);return r}return t}function Je(t){this instanceof Je||pa("Vue is a constructor and should be called with the `new` keyword"),this._init(t)}function Ke(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=b(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}function Ge(t){t.mixin=function(t){return this.options=tt(this.options,t),this}}function We(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,o=t._Ctor||(t._Ctor={});if(o[r])return o[r];var i=t.name||n.options.name;i&&W(i);var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),
a.prototype.constructor=a,a.cid=e++,a.options=tt(n.options,t),a.super=n,a.options.props&&Xe(a),a.options.computed&&Ye(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,qi.forEach(function(t){a[t]=n[t]}),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=w({},a.options),o[r]=a,a}}function Xe(t){var e=t.options.props;for(var n in e)Qt(t.prototype,"_props",n)}function Ye(t){var e=t.options.computed;for(var n in e)ie(t.prototype,n,e[n])}function Ze(t){qi.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&W(t),"component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}function Qe(t){return t&&(t.Ctor.options.name||t.tag)}function tn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!f(t)&&t.test(e)}function en(t,e){var n=t.cache,r=t.keys,o=t._vnode;for(var i in n){var a=n[i];if(a){var s=Qe(a.componentOptions);s&&!e(s)&&nn(n,i,r,o)}}}function nn(t,e,n,r){var o=t[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),t[e]=null,v(n,e)}function rn(t){var e={};e.get=function(){return Ji},e.set=function(){pa("Do not replace the Vue.config object, set individual fields instead.")},Object.defineProperty(t,"config",e),t.util={warn:pa,extend:w,mergeOptions:tt,defineReactive:V},t.set=U,t.delete=B,t.nextTick=ht,t.options=Object.create(null),qi.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,w(t.options.components,$s),Ke(t),Ge(t),We(t),Ze(t)}function on(t){for(var e=t.data,n=t,o=t;r(o.componentInstance);)o=o.componentInstance._vnode,o&&o.data&&(e=an(o.data,e));for(;r(n=n.parent);)n&&n.data&&(e=an(e,n.data));return sn(e.staticClass,e.class)}function an(t,e){return{staticClass:un(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function sn(t,e){return r(t)||r(e)?un(t,cn(e)):""}function un(t,e){return t?e?t+" "+e:t:e||""}function cn(t){return Array.isArray(t)?fn(t):s(t)?ln(t):"string"==typeof t?t:""}function fn(t){for(var e,n="",o=0,i=t.length;o<i;o++)r(e=cn(t[o]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function ln(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function pn(t){return qs(t)?"svg":"math"===t?"math":void 0}function dn(t){if(!Wi)return!0;if(Js(t))return!1;if(t=t.toLowerCase(),null!=Ks[t])return Ks[t];var e=document.createElement(t);return t.indexOf("-")>-1?Ks[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Ks[t]=/HTMLUnknownElement/.test(e.toString())}function hn(t){if("string"==typeof t){var e=document.querySelector(t);return e?e:(pa("Cannot find element: "+t),document.createElement("div"))}return t}function vn(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function mn(t,e){return document.createElementNS(Bs[t],e)}function yn(t){return document.createTextNode(t)}function gn(t){return document.createComment(t)}function _n(t,e,n){t.insertBefore(e,n)}function bn(t,e){t.removeChild(e)}function wn(t,e){t.appendChild(e)}function xn(t){return t.parentNode}function $n(t){return t.nextSibling}function kn(t){return t.tagName}function Cn(t,e){t.textContent=e}function An(t,e){t.setAttribute(e,"")}function On(t,e){var n=t.data.ref;if(r(n)){var o=t.context,i=t.componentInstance||t.elm,a=o.$refs;e?Array.isArray(a[n])?v(a[n],i):a[n]===i&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}function En(e,n){return e.key===n.key&&(e.tag===n.tag&&e.isComment===n.isComment&&r(e.data)===r(n.data)&&Sn(e,n)||o(e.isAsyncPlaceholder)&&e.asyncFactory===n.asyncFactory&&t(n.asyncFactory.error))}function Sn(t,e){if("input"!==t.tag)return!0;var n,o=r(n=t.data)&&r(n=n.attrs)&&n.type,i=r(n=e.data)&&r(n=n.attrs)&&n.type;return o===i||Gs(o)&&Gs(i)}function Tn(t,e,n){var o,i,a={};for(o=e;o<=n;++o)i=t[o].key,r(i)&&(a[i]=o);return a}function jn(e){function n(t){return new $a(D.tagName(t).toLowerCase(),{},[],void 0,t)}function i(t,e){function n(){0===--n.listeners&&s(t)}return n.listeners=e,n}function s(t){var e=D.parentNode(t);r(e)&&D.removeChild(e,t)}function u(t,e){return!e&&!t.ns&&!(Ji.ignoredElements.length&&Ji.ignoredElements.some(function(e){return f(e)?e.test(t.tag):e===t.tag}))&&Ji.isUnknownElement(t.tag)}function c(t,e,n,i,a,s,c){if(r(t.elm)&&r(s)&&(t=s[c]=L(t)),t.isRootInsert=!a,!l(t,e,n,i)){var f=t.data,p=t.children,d=t.tag;r(d)?(f&&f.pre&&I++,u(t,I)&&pa("Unknown custom element: <"+d+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',t.context),t.elm=t.ns?D.createElementNS(t.ns,d):D.createElement(d,t),_(t),m(t,p,e),r(f)&&g(t,e),v(n,t.elm,i),f&&f.pre&&I--):o(t.isComment)?(t.elm=D.createComment(t.text),v(n,t.elm,i)):(t.elm=D.createTextNode(t.text),v(n,t.elm,i))}}function l(t,e,n,i){var a=t.data;if(r(a)){var s=r(t.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(t,!1,n,i),r(t.componentInstance))return p(t,e),o(s)&&d(t,e,n,i),!0}}function p(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,y(t)?(g(t,e),_(t)):(On(t),e.push(t))}function d(t,e,n,o){for(var i,a=t;a.componentInstance;)if(a=a.componentInstance._vnode,r(i=a.data)&&r(i=i.transition)){for(i=0;i<M.activate.length;++i)M.activate[i](Ys,a);e.push(a);break}v(n,t.elm,o)}function v(t,e,n){r(t)&&(r(n)?n.parentNode===t&&D.insertBefore(t,e,n):D.appendChild(t,e))}function m(t,e,n){if(Array.isArray(e)){C(e);for(var r=0;r<e.length;++r)c(e[r],n,t.elm,null,!0,e,r)}else a(t.text)&&D.appendChild(t.elm,D.createTextNode(String(t.text)))}function y(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function g(t,e){for(var n=0;n<M.create.length;++n)M.create[n](Ys,t);j=t.data.hook,r(j)&&(r(j.create)&&j.create(Ys,t),r(j.insert)&&e.push(t))}function _(t){var e;if(r(e=t.fnScopeId))D.setStyleScope(t.elm,e);else for(var n=t;n;)r(e=n.context)&&r(e=e.$options._scopeId)&&D.setStyleScope(t.elm,e),n=n.parent;r(e=ns)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&D.setStyleScope(t.elm,e)}function b(t,e,n,r,o,i){for(;r<=o;++r)c(n[r],i,t,e,!1,n,r)}function w(t){var e,n,o=t.data;if(r(o))for(r(e=o.hook)&&r(e=e.destroy)&&e(t),e=0;e<M.destroy.length;++e)M.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)w(t.children[n])}function x(t,e,n,o){for(;n<=o;++n){var i=e[n];r(i)&&(r(i.tag)?($(i),w(i)):s(i.elm))}}function $(t,e){if(r(e)||r(t.data)){var n,o=M.remove.length+1;for(r(e)?e.listeners+=o:e=i(t.elm,o),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&$(n,e),n=0;n<M.remove.length;++n)M.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else s(t.elm)}function k(e,n,o,i,a){var s,u,f,l,p=0,d=0,h=n.length-1,v=n[0],m=n[h],y=o.length-1,g=o[0],_=o[y],w=!a;for(C(o);p<=h&&d<=y;)t(v)?v=n[++p]:t(m)?m=n[--h]:En(v,g)?(O(v,g,i),v=n[++p],g=o[++d]):En(m,_)?(O(m,_,i),m=n[--h],_=o[--y]):En(v,_)?(O(v,_,i),w&&D.insertBefore(e,v.elm,D.nextSibling(m.elm)),v=n[++p],_=o[--y]):En(m,g)?(O(m,g,i),w&&D.insertBefore(e,m.elm,v.elm),m=n[--h],g=o[++d]):(t(s)&&(s=Tn(n,p,h)),u=r(g.key)?s[g.key]:A(g,n,p,h),t(u)?c(g,i,e,v.elm,!1,o,d):(f=n[u],En(f,g)?(O(f,g,i),n[u]=void 0,w&&D.insertBefore(e,f.elm,v.elm)):c(g,i,e,v.elm,!1,o,d)),g=o[++d]);p>h?(l=t(o[y+1])?null:o[y+1].elm,b(e,l,o,d,y,i)):d>y&&x(e,n,p,h)}function C(t){for(var e={},n=0;n<t.length;n++){var o=t[n],i=o.key;r(i)&&(e[i]?pa("Duplicate keys detected: '"+i+"'. This may cause an update error.",o.context):e[i]=!0)}}function A(t,e,n,o){for(var i=n;i<o;i++){var a=e[i];if(r(a)&&En(t,a))return i}}function O(e,n,i,a){if(e!==n){var s=n.elm=e.elm;if(o(e.isAsyncPlaceholder))return void(r(n.asyncFactory.resolved)?S(e.elm,n,i):n.isAsyncPlaceholder=!0);if(o(n.isStatic)&&o(e.isStatic)&&n.key===e.key&&(o(n.isCloned)||o(n.isOnce)))return void(n.componentInstance=e.componentInstance);var u,c=n.data;r(c)&&r(u=c.hook)&&r(u=u.prepatch)&&u(e,n);var f=e.children,l=n.children;if(r(c)&&y(n)){for(u=0;u<M.update.length;++u)M.update[u](e,n);r(u=c.hook)&&r(u=u.update)&&u(e,n)}t(n.text)?r(f)&&r(l)?f!==l&&k(s,f,l,i,a):r(l)?(r(e.text)&&D.setTextContent(s,""),b(s,null,l,0,l.length-1,i)):r(f)?x(s,f,0,f.length-1):r(e.text)&&D.setTextContent(s,""):e.text!==n.text&&D.setTextContent(s,n.text),r(c)&&r(u=c.hook)&&r(u=u.postpatch)&&u(e,n)}}function E(t,e,n){if(o(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}function S(t,e,n,i){var a,s=e.tag,u=e.data,c=e.children;if(i=i||u&&u.pre,e.elm=t,o(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(!T(t,e,i))return!1;if(r(u)&&(r(a=u.hook)&&r(a=a.init)&&a(e,!0),r(a=e.componentInstance)))return p(e,n),!0;if(r(s)){if(r(c))if(t.hasChildNodes())if(r(a=u)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==t.innerHTML)return"undefined"==typeof console||P||(P=!0,console.warn("Parent: ",t),console.warn("server innerHTML: ",a),console.warn("client innerHTML: ",t.innerHTML)),!1}else{for(var f=!0,l=t.firstChild,d=0;d<c.length;d++){if(!l||!S(l,c[d],n,i)){f=!1;break}l=l.nextSibling}if(!f||l)return"undefined"==typeof console||P||(P=!0,console.warn("Parent: ",t),console.warn("Mismatching childNodes vs. VNodes: ",t.childNodes,c)),!1}else m(e,c,n);if(r(u)){var h=!1;for(var v in u)if(!F(v)){h=!0,g(e,n);break}!h&&u.class&&vt(u.class)}}else t.data!==e.text&&(t.data=e.text);return!0}function T(t,e,n){return r(e.tag)?0===e.tag.indexOf("vue-component")||!u(e,n)&&e.tag.toLowerCase()===(t.tagName&&t.tagName.toLowerCase()):t.nodeType===(e.isComment?8:3)}var j,N,M={},R=e.modules,D=e.nodeOps;for(j=0;j<Zs.length;++j)for(M[Zs[j]]=[],N=0;N<R.length;++N)r(R[N][Zs[j]])&&M[Zs[j]].push(R[N][Zs[j]]);var I=0,P=!1,F=h("attrs,class,staticClass,staticStyle,key");return function(e,i,a,s,u,f){if(t(i))return void(r(e)&&w(e));var l=!1,p=[];if(t(e))l=!0,c(i,p,u,f);else{var d=r(e.nodeType);if(!d&&En(e,i))O(e,i,p,s);else{if(d){if(1===e.nodeType&&e.hasAttribute(Hi)&&(e.removeAttribute(Hi),a=!0),o(a)){if(S(e,i,p))return E(i,p,!0),e;pa("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}e=n(e)}var h=e.elm,v=D.parentNode(h);if(c(i,p,h._leaveCb?null:v,D.nextSibling(h)),r(i.parent))for(var m=i.parent,g=y(i);m;){for(var _=0;_<M.destroy.length;++_)M.destroy[_](m);if(m.elm=i.elm,g){for(var b=0;b<M.create.length;++b)M.create[b](Ys,m);var $=m.data.hook.insert;if($.merged)for(var k=1;k<$.fns.length;k++)$.fns[k]()}else On(m);m=m.parent}r(v)?x(v,[e],0,0):r(e.tag)&&w(e)}}return E(i,p,l),i.elm}}function Nn(t,e){(t.data.directives||e.data.directives)&&Mn(t,e)}function Mn(t,e){var n,r,o,i=t===Ys,a=e===Ys,s=Rn(t.data.directives,t.context),u=Rn(e.data.directives,e.context),c=[],f=[];for(n in u)r=s[n],o=u[n],r?(o.oldValue=r.value,Dn(o,"update",e,t),o.def&&o.def.componentUpdated&&f.push(o)):(Dn(o,"bind",e,t),o.def&&o.def.inserted&&c.push(o));if(c.length){var l=function(){for(var n=0;n<c.length;n++)Dn(c[n],"inserted",e,t)};i?_t(e,"insert",l):l()}if(f.length&&_t(e,"postpatch",function(){for(var n=0;n<f.length;n++)Dn(f[n],"componentUpdated",e,t)}),!i)for(n in s)u[n]||Dn(s[n],"unbind",t,t,a)}function Rn(t,e){var n=Object.create(null);if(!t)return n;var r,o;for(r=0;r<t.length;r++)o=t[r],o.modifiers||(o.modifiers=tu),n[Ln(o)]=o,o.def=et(e.$options,"directives",o.name,!0);return n}function Ln(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Dn(t,e,n,r,o){var i=t.def&&t.def[e];if(i)try{i(n.elm,t,n,r,o)}catch(r){ct(r,n.context,"directive "+t.name+" "+e+" hook")}}function In(e,n){var o=n.componentOptions;if(!(r(o)&&o.Ctor.options.inheritAttrs===!1||t(e.data.attrs)&&t(n.data.attrs))){var i,a,s,u=n.elm,c=e.data.attrs||{},f=n.data.attrs||{};r(f.__ob__)&&(f=n.data.attrs=w({},f));for(i in f)a=f[i],s=c[i],s!==a&&Pn(u,i,a);(Qi||ea)&&f.value!==c.value&&Pn(u,"value",f.value);for(i in c)t(f[i])&&(Fs(i)?u.removeAttributeNS(Ps,Vs(i)):Ds(i)||u.removeAttribute(i))}}function Pn(t,e,n){t.tagName.indexOf("-")>-1?Fn(t,e,n):Is(e)?Us(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Ds(e)?t.setAttribute(e,Us(n)||"false"===n?"false":"true"):Fs(e)?Us(n)?t.removeAttributeNS(Ps,Vs(e)):t.setAttributeNS(Ps,e,n):Fn(t,e,n)}function Fn(t,e,n){if(Us(n))t.removeAttribute(e);else{if(Qi&&!ta&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}function Vn(e,n){var o=n.elm,i=n.data,a=e.data;if(!(t(i.staticClass)&&t(i.class)&&(t(a)||t(a.staticClass)&&t(a.class)))){var s=on(n),u=o._transitionClasses;r(u)&&(s=un(s,cn(u))),s!==o._prevClass&&(o.setAttribute("class",s),o._prevClass=s)}}function Un(t){function e(){(a||(a=[])).push(t.slice(h,o).trim()),h=o+1}var n,r,o,i,a,s=!1,u=!1,c=!1,f=!1,l=0,p=0,d=0,h=0;for(o=0;o<t.length;o++)if(r=n,n=t.charCodeAt(o),s)39===n&&92!==r&&(s=!1);else if(u)34===n&&92!==r&&(u=!1);else if(c)96===n&&92!==r&&(c=!1);else if(f)47===n&&92!==r&&(f=!1);else if(124!==n||124===t.charCodeAt(o+1)||124===t.charCodeAt(o-1)||l||p||d){switch(n){case 34:u=!0;break;case 39:s=!0;break;case 96:c=!0;break;case 40:d++;break;case 41:d--;break;case 91:p++;break;case 93:p--;break;case 123:l++;break;case 125:l--}if(47===n){for(var v=o-1,m=void 0;v>=0&&(m=t.charAt(v)," "===m);v--);m&&ou.test(m)||(f=!0)}}else void 0===i?(h=o+1,i=t.slice(0,o).trim()):e();if(void 0===i?i=t.slice(0,o).trim():0!==h&&e(),a)for(o=0;o<a.length;o++)i=Bn(i,a[o]);return i}function Bn(t,e){var n=e.indexOf("(");if(n<0)return'_f("'+e+'")('+t+")";var r=e.slice(0,n),o=e.slice(n+1);return'_f("'+r+'")('+t+(")"!==o?","+o:o)}function Hn(t){console.error("[Vue compiler]: "+t)}function qn(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function zn(t,e,n){(t.props||(t.props=[])).push({name:e,value:n}),t.plain=!1}function Jn(t,e,n){(t.attrs||(t.attrs=[])).push({name:e,value:n}),t.plain=!1}function Kn(t,e,n){t.attrsMap[e]=n,t.attrsList.push({name:e,value:n})}function Gn(t,e,n,r,o,i){(t.directives||(t.directives=[])).push({name:e,rawName:n,value:r,arg:o,modifiers:i}),t.plain=!1}function Wn(t,e,n,r,o,i){r=r||Ti,i&&r.prevent&&r.passive&&i("passive and prevent can't be used together. Passive handler can't prevent default event."),r.capture&&(delete r.capture,e="!"+e),r.once&&(delete r.once,e="~"+e),r.passive&&(delete r.passive,e="&"+e),"click"===e&&(r.right?(e="contextmenu",delete r.right):r.middle&&(e="mouseup"));var a;r.native?(delete r.native,a=t.nativeEvents||(t.nativeEvents={})):a=t.events||(t.events={});var s={value:n.trim()};r!==Ti&&(s.modifiers=r);var u=a[e];Array.isArray(u)?o?u.unshift(s):u.push(s):u?a[e]=o?[s,u]:[u,s]:a[e]=s,t.plain=!1}function Xn(t,e,n){var r=Yn(t,":"+e)||Yn(t,"v-bind:"+e);if(null!=r)return Un(r);if(n!==!1){var o=Yn(t,e);if(null!=o)return JSON.stringify(o)}}function Yn(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var o=t.attrsList,i=0,a=o.length;i<a;i++)if(o[i].name===e){o.splice(i,1);break}return n&&delete t.attrsMap[e],r}function Zn(t,e,n){var r=n||{},o=r.number,i=r.trim,a="$$v",s=a;i&&(s="(typeof "+a+" === 'string'? "+a+".trim(): "+a+")"),o&&(s="_n("+s+")");var u=Qn(e,s);t.model={value:"("+e+")",expression:'"'+e+'"',callback:"function ("+a+") {"+u+"}"}}function Qn(t,e){var n=tr(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function tr(t){if(t=t.trim(),ks=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<ks-1)return Os=t.lastIndexOf("."),Os>-1?{exp:t.slice(0,Os),key:'"'+t.slice(Os+1)+'"'}:{exp:t,key:null};for(Cs=t,Os=Es=Ss=0;!nr();)As=er(),rr(As)?ir(As):91===As&&or(As);return{exp:t.slice(0,Es),key:t.slice(Es+1,Ss)}}function er(){return Cs.charCodeAt(++Os)}function nr(){return Os>=ks}function rr(t){return 34===t||39===t}function or(t){var e=1;for(Es=Os;!nr();)if(t=er(),rr(t))ir(t);else if(91===t&&e++,93===t&&e--,0===e){Ss=Os;break}}function ir(t){for(var e=t;!nr()&&(t=er(),t!==e););}function ar(t,e,n){Ts=n;var r=e.value,o=e.modifiers,i=t.tag,a=t.attrsMap.type;if("input"===i&&"file"===a&&Ts("<"+t.tag+' v-model="'+r+'" type="file">:\nFile inputs are read only. Use a v-on:change listener instead.'),t.component)return Zn(t,r,o),!1;if("select"===i)cr(t,r,o);else if("input"===i&&"checkbox"===a)sr(t,r,o);else if("input"===i&&"radio"===a)ur(t,r,o);else if("input"===i||"textarea"===i)fr(t,r,o);else{if(!Ji.isReservedTag(i))return Zn(t,r,o),!1;Ts("<"+t.tag+' v-model="'+r+"\">: v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.")}return!0}function sr(t,e,n){var r=n&&n.number,o=Xn(t,"value")||"null",i=Xn(t,"true-value")||"true",a=Xn(t,"false-value")||"false";zn(t,"checked","Array.isArray("+e+")?_i("+e+","+o+")>-1"+("true"===i?":("+e+")":":_q("+e+","+i+")")),Wn(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+i+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+o+")":o)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Qn(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Qn(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Qn(e,"$$c")+"}",null,!0)}function ur(t,e,n){var r=n&&n.number,o=Xn(t,"value")||"null";o=r?"_n("+o+")":o,zn(t,"checked","_q("+e+","+o+")"),Wn(t,"change",Qn(e,o),null,!0)}function cr(t,e,n){var r=n&&n.number,o='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(r?"_n(val)":"val")+"})",i="$event.target.multiple ? $$selectedVal : $$selectedVal[0]",a="var $$selectedVal = "+o+";";a=a+" "+Qn(e,i),Wn(t,"change",a,null,!0)}function fr(t,e,n){var r=t.attrsMap.type,o=t.attrsMap["v-bind:value"]||t.attrsMap[":value"],i=t.attrsMap["v-bind:type"]||t.attrsMap[":type"];if(o&&!i){var a=t.attrsMap["v-bind:value"]?"v-bind:value":":value";Ts(a+'="'+o+'" conflicts with v-model on the same element because the latter already expands to a value binding internally')}var s=n||{},u=s.lazy,c=s.number,f=s.trim,l=!u&&"range"!==r,p=u?"change":"range"===r?iu:"input",d="$event.target.value";f&&(d="$event.target.value.trim()"),c&&(d="_n("+d+")");var h=Qn(e,d);l&&(h="if($event.target.composing)return;"+h),zn(t,"value","("+e+")"),Wn(t,p,h,null,!0),(f||c)&&Wn(t,"blur","$forceUpdate()")}function lr(t){if(r(t[iu])){var e=Qi?"change":"input";t[e]=[].concat(t[iu],t[e]||[]),delete t[iu]}r(t[au])&&(t.change=[].concat(t[au],t.change||[]),delete t[au])}function pr(t,e,n){var r=js;return function o(){var i=t.apply(null,arguments);null!==i&&hr(e,o,n,r)}}function dr(t,e,n,r,o){e=dt(e),n&&(e=pr(e,t,r)),js.addEventListener(t,e,ia?{capture:r,passive:o}:r)}function hr(t,e,n,r){(r||js).removeEventListener(t,e._withTask||e,n)}function vr(e,n){if(!t(e.data.on)||!t(n.data.on)){var r=n.data.on||{},o=e.data.on||{};js=n.elm,lr(r),gt(r,o,dr,hr,n.context),js=void 0}}function mr(e,n){if(!t(e.data.domProps)||!t(n.data.domProps)){var o,i,a=n.elm,s=e.data.domProps||{},u=n.data.domProps||{};r(u.__ob__)&&(u=n.data.domProps=w({},u));for(o in s)t(u[o])&&(a[o]="");for(o in u){if(i=u[o],"textContent"===o||"innerHTML"===o){if(n.children&&(n.children.length=0),i===s[o])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===o){a._value=i;var c=t(i)?"":String(i);yr(a,c)&&(a.value=c)}else a[o]=i}}}function yr(t,e){return!t.composing&&("OPTION"===t.tagName||gr(t,e)||_r(t,e))}function gr(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}function _r(t,e){var n=t.value,o=t._vModifiers;if(r(o)){if(o.lazy)return!1;if(o.number)return d(n)!==d(e);if(o.trim)return n.trim()!==e.trim()}return n!==e}function br(t){var e=wr(t.style);return t.staticStyle?w(t.staticStyle,e):e}function wr(t){return Array.isArray(t)?x(t):"string"==typeof t?cu(t):t}function xr(t,e){var n,r={};if(e)for(var o=t;o.componentInstance;)o=o.componentInstance._vnode,o&&o.data&&(n=br(o.data))&&w(r,n);(n=br(t.data))&&w(r,n);for(var i=t;i=i.parent;)i.data&&(n=br(i.data))&&w(r,n);return r}function $r(e,n){var o=n.data,i=e.data;if(!(t(o.staticStyle)&&t(o.style)&&t(i.staticStyle)&&t(i.style))){var a,s,u=n.elm,c=i.staticStyle,f=i.normalizedStyle||i.style||{},l=c||f,p=wr(n.data.style)||{};n.data.normalizedStyle=r(p.__ob__)?w({},p):p;var d=xr(n,!0);for(s in l)t(d[s])&&pu(u,s,"");for(s in d)a=d[s],a!==l[s]&&pu(u,s,null==a?"":a)}}function kr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Cr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Ar(t){if(t){if("object"==typeof t){var e={};return t.css!==!1&&w(e,mu(t.name||"v")),w(e,t),e}return"string"==typeof t?mu(t):void 0}}function Or(t){ku(function(){ku(t)})}function Er(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),kr(t,e))}function Sr(t,e){t._transitionClasses&&v(t._transitionClasses,e),Cr(t,e)}function Tr(t,e,n){var r=jr(t,e),o=r.type,i=r.timeout,a=r.propCount;if(!o)return n();var s=o===gu?wu:$u,u=0,c=function(){t.removeEventListener(s,f),n()},f=function(e){e.target===t&&++u>=a&&c()};setTimeout(function(){u<a&&c()},i+1),t.addEventListener(s,f)}function jr(t,e){var n,r=window.getComputedStyle(t),o=r[bu+"Delay"].split(", "),i=r[bu+"Duration"].split(", "),a=Nr(o,i),s=r[xu+"Delay"].split(", "),u=r[xu+"Duration"].split(", "),c=Nr(s,u),f=0,l=0;e===gu?a>0&&(n=gu,f=a,l=i.length):e===_u?c>0&&(n=_u,f=c,l=u.length):(f=Math.max(a,c),n=f>0?a>c?gu:_u:null,l=n?n===gu?i.length:u.length:0);var p=n===gu&&Cu.test(r[bu+"Property"]);return{type:n,timeout:f,propCount:l,hasTransform:p}}function Nr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return Mr(e)+Mr(t[n])}))}function Mr(t){return 1e3*Number(t.slice(0,-1))}function Rr(e,n){var o=e.elm;r(o._leaveCb)&&(o._leaveCb.cancelled=!0,o._leaveCb());var i=Ar(e.data.transition);if(!t(i)&&!r(o._enterCb)&&1===o.nodeType){for(var a=i.css,u=i.type,c=i.enterClass,f=i.enterToClass,l=i.enterActiveClass,p=i.appearClass,h=i.appearToClass,v=i.appearActiveClass,m=i.beforeEnter,y=i.enter,g=i.afterEnter,_=i.enterCancelled,b=i.beforeAppear,w=i.appear,x=i.afterAppear,$=i.appearCancelled,k=i.duration,C=ns,A=ns.$vnode;A&&A.parent;)A=A.parent,C=A.context;var E=!C._isMounted||!e.isRootInsert;if(!E||w||""===w){var S=E&&p?p:c,T=E&&v?v:l,j=E&&h?h:f,N=E?b||m:m,M=E&&"function"==typeof w?w:y,R=E?x||g:g,L=E?$||_:_,D=d(s(k)?k.enter:k);null!=D&&Dr(D,"enter",e);var I=a!==!1&&!ta,P=Pr(M),F=o._enterCb=O(function(){I&&(Sr(o,j),Sr(o,T)),F.cancelled?(I&&Sr(o,S),L&&L(o)):R&&R(o),o._enterCb=null});e.data.show||_t(e,"insert",function(){var t=o.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),M&&M(o,F)}),N&&N(o),I&&(Er(o,S),Er(o,T),Or(function(){Sr(o,S),F.cancelled||(Er(o,j),P||(Ir(D)?setTimeout(F,D):Tr(o,u,F)))})),e.data.show&&(n&&n(),M&&M(o,F)),I||P||F()}}}function Lr(e,n){function o(){$.cancelled||(e.data.show||((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),h&&h(i),b&&(Er(i,f),Er(i,p),Or(function(){Sr(i,f),$.cancelled||(Er(i,l),w||(Ir(x)?setTimeout($,x):Tr(i,c,$)))})),v&&v(i,$),b||w||$())}var i=e.elm;r(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var a=Ar(e.data.transition);if(t(a)||1!==i.nodeType)return n();if(!r(i._leaveCb)){var u=a.css,c=a.type,f=a.leaveClass,l=a.leaveToClass,p=a.leaveActiveClass,h=a.beforeLeave,v=a.leave,m=a.afterLeave,y=a.leaveCancelled,g=a.delayLeave,_=a.duration,b=u!==!1&&!ta,w=Pr(v),x=d(s(_)?_.leave:_);r(x)&&Dr(x,"leave",e);var $=i._leaveCb=O(function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),b&&(Sr(i,l),Sr(i,p)),$.cancelled?(b&&Sr(i,f),y&&y(i)):(n(),m&&m(i)),i._leaveCb=null});g?g(o):o()}}function Dr(t,e,n){"number"!=typeof t?pa("<transition> explicit "+e+" duration is not a valid number - got "+JSON.stringify(t)+".",n.context):isNaN(t)&&pa("<transition> explicit "+e+" duration is NaN - the duration expression might be incorrect.",n.context)}function Ir(t){return"number"==typeof t&&!isNaN(t)}function Pr(e){if(t(e))return!1;var n=e.fns;return r(n)?Pr(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function Fr(t,e){e.data.show!==!0&&Rr(e)}function Vr(t,e,n){Ur(t,e,n),(Qi||ea)&&setTimeout(function(){Ur(t,e,n)},0)}function Ur(t,e,n){var r=e.value,o=t.multiple;if(o&&!Array.isArray(r))return void pa('<select multiple v-model="'+e.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(r).slice(8,-1),n);for(var i,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],o)i=A(r,Hr(a))>-1,a.selected!==i&&(a.selected=i);else if(C(Hr(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));o||(t.selectedIndex=-1)}function Br(t,e){return e.every(function(e){return!C(e,t)})}function Hr(t){return"_value"in t?t._value:t.value}function qr(t){t.target.composing=!0}function zr(t){t.target.composing&&(t.target.composing=!1,Jr(t.target,"input"))}function Jr(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Kr(t){return!t.componentInstance||t.data&&t.data.transition?t:Kr(t.componentInstance._vnode)}function Gr(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Gr(Tt(e.children)):t}function Wr(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var o=n._parentListeners;for(var i in o)e[Di(i)]=o[i];return e}function Xr(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Yr(t){for(;t=t.parent;)if(t.data.transition)return!0}function Zr(t,e){return e.key===t.key&&e.tag===t.tag}function Qr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function to(t){t.data.newPos=t.elm.getBoundingClientRect()}function eo(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,o=e.top-n.top;if(r||o){t.data.moved=!0;var i=t.elm.style;i.transform=i.WebkitTransform="translate("+r+"px,"+o+"px)",i.transitionDuration="0s"}}function no(t,e){var n=e?Uu(e):Fu;if(n.test(t)){for(var r,o,i,a=[],s=[],u=n.lastIndex=0;r=n.exec(t);){o=r.index,o>u&&(s.push(i=t.slice(u,o)),a.push(JSON.stringify(i)));var c=Un(r[1].trim());a.push("_s("+c+")"),s.push({"@binding":c}),u=o+r[0].length}return u<t.length&&(s.push(i=t.slice(u)),a.push(JSON.stringify(i))),{expression:a.join("+"),tokens:s}}}function ro(t,e){var n=e.warn||Hn,r=Yn(t,"class");if(r){var o=no(r,e.delimiters);o&&n('class="'+r+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.')}r&&(t.staticClass=JSON.stringify(r));var i=Xn(t,"class",!1);i&&(t.classBinding=i)}function oo(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}function io(t,e){var n=e.warn||Hn,r=Yn(t,"style");if(r){var o=no(r,e.delimiters);o&&n('style="'+r+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.'),t.staticStyle=JSON.stringify(cu(r))}var i=Xn(t,"style",!1);i&&(t.styleBinding=i)}function ao(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}function so(t,e){var n=e?_c:gc;return t.replace(n,function(t){return yc[t]})}function uo(t,e){function n(e){p+=e,t=t.substring(e)}function r(){var e=t.match(Yu);if(e){var r={tagName:e[1],attrs:[],start:p};n(e[0].length);for(var o,i;!(o=t.match(Zu))&&(i=t.match(Gu));)n(i[0].length),r.attrs.push(i);if(o)return r.unarySlash=o[1],n(o[0].length),r.end=p,r}}function o(t){var n=t.tagName,r=t.unarySlash;c&&("p"===s&&Ku(n)&&i(s),l(n)&&s===n&&i(n));for(var o=f(n)||!!r,a=t.attrs.length,p=new Array(a),d=0;d<a;d++){var h=t.attrs[d];rc&&h[0].indexOf('""')===-1&&(""===h[3]&&delete h[3],""===h[4]&&delete h[4],""===h[5]&&delete h[5]);var v=h[3]||h[4]||h[5]||"",m="a"===n&&"href"===h[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;p[d]={name:h[1],value:so(v,m)}}o||(u.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:p}),s=n),e.start&&e.start(n,p,o,t.start,t.end)}function i(t,n,r){var o,i;if(null==n&&(n=p),null==r&&(r=p),t&&(i=t.toLowerCase()),t)for(o=u.length-1;o>=0&&u[o].lowerCasedTag!==i;o--);else o=0;if(o>=0){for(var a=u.length-1;a>=o;a--)(a>o||!t)&&e.warn&&e.warn("tag <"+u[a].tag+"> has no matching end tag."),e.end&&e.end(u[a].tag,n,r);u.length=o,s=o&&u[o-1].tag}else"br"===i?e.start&&e.start(t,[],!0,n,r):"p"===i&&(e.start&&e.start(t,[],!1,n,r),e.end&&e.end(t,n,r))}for(var a,s,u=[],c=e.expectHTML,f=e.isUnaryTag||Ui,l=e.canBeLeftOpenTag||Ui,p=0;t;){if(a=t,s&&vc(s)){var d=0,h=s.toLowerCase(),v=mc[h]||(mc[h]=new RegExp("([\\s\\S]*?)(</"+h+"[^>]*>)","i")),m=t.replace(v,function(t,n,r){return d=r.length,vc(h)||"noscript"===h||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),wc(h,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});p+=t.length-m.length,t=m,i(h,p-d,p)}else{var y=t.indexOf("<");if(0===y){if(ec.test(t)){var g=t.indexOf("-->");if(g>=0){e.shouldKeepComment&&e.comment(t.substring(4,g)),n(g+3);continue}}if(nc.test(t)){var _=t.indexOf("]>");if(_>=0){n(_+2);continue}}var b=t.match(tc);if(b){n(b[0].length);continue}var w=t.match(Qu);if(w){var x=p;n(w[0].length),i(w[1],x,p);continue}var $=r();if($){o($),wc(s,t)&&n(1);continue}}var k=void 0,C=void 0,A=void 0;if(y>=0){for(C=t.slice(y);!(Qu.test(C)||Yu.test(C)||ec.test(C)||nc.test(C)||(A=C.indexOf("<",1),A<0));)y+=A,C=t.slice(y);k=t.substring(0,y),n(y)}y<0&&(k=t,t=""),e.chars&&k&&e.chars(k)}if(t===a){e.chars&&e.chars(t),!u.length&&e.warn&&e.warn('Mal-formatted tag at end of template: "'+t+'"');break}}i()}function co(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:So(e),parent:n,children:[]}}function fo(t,e){function n(t){f||(f=!0,oc(t))}function r(t){t.pre&&(u=!1),cc(t.tag)&&(c=!1);for(var n=0;n<uc.length;n++)uc[n](t,e)}oc=e.warn||Hn,cc=e.isPreTag||Ui,fc=e.mustUseProp||Ui,lc=e.getTagNamespace||Ui,ac=qn(e.modules,"transformNode"),sc=qn(e.modules,"preTransformNode"),uc=qn(e.modules,"postTransformNode"),ic=e.delimiters;var o,i,a=[],s=e.preserveWhitespace!==!1,u=!1,c=!1,f=!1;return uo(t,{warn:oc,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,start:function(t,s,f){function l(t){"slot"!==t.tag&&"template"!==t.tag||n("Cannot use <"+t.tag+"> as component root element because it may contain multiple nodes."),t.attrsMap.hasOwnProperty("v-for")&&n("Cannot use v-for on stateful component root element because it renders multiple elements.")}var p=i&&i.ns||lc(t);Qi&&"svg"===p&&(s=No(s));var d=co(t,s,i);p&&(d.ns=p),jo(d)&&!ca()&&(d.forbidden=!0,oc("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <"+t+">, as they will not be parsed."));for(var h=0;h<sc.length;h++)d=sc[h](d,e)||d;if(u||(lo(d),d.pre&&(u=!0)),cc(d.tag)&&(c=!0),u?po(d):d.processed||(yo(d),_o(d),$o(d),ho(d,e)),o?a.length||(o.if&&(d.elseif||d.else)?(l(d),xo(o,{exp:d.elseif,block:d})):n("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.")):(o=d,l(o)),i&&!d.forbidden)if(d.elseif||d.else)bo(d,i);else if(d.slotScope){
i.plain=!1;var v=d.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[v]=d}else i.children.push(d),d.parent=i;f?r(d):(i=d,a.push(d))},end:function(){var t=a[a.length-1],e=t.children[t.children.length-1];e&&3===e.type&&" "===e.text&&!c&&t.children.pop(),a.length-=1,i=a[a.length-1],r(t)},chars:function(e){if(!i)return void(e===t?n("Component template requires a root element, rather than just text."):(e=e.trim())&&n('text "'+e+'" outside root element will be ignored.'));if(!Qi||"textarea"!==i.tag||i.attrsMap.placeholder!==e){var r=i.children;if(e=c||e.trim()?To(i)?e:Tc(e):s&&r.length?" ":""){var o;!u&&" "!==e&&(o=no(e,ic))?r.push({type:2,expression:o.expression,tokens:o.tokens,text:e}):" "===e&&r.length&&" "===r[r.length-1].text||r.push({type:3,text:e})}}},comment:function(t){i.children.push({type:3,text:t,isComment:!0})}}),o}function lo(t){null!=Yn(t,"v-pre")&&(t.pre=!0)}function po(t){var e=t.attrsList.length;if(e)for(var n=t.attrs=new Array(e),r=0;r<e;r++)n[r]={name:t.attrsList[r].name,value:JSON.stringify(t.attrsList[r].value)};else t.pre||(t.plain=!0)}function ho(t,e){vo(t),t.plain=!t.key&&!t.attrsList.length,mo(t),ko(t),Co(t);for(var n=0;n<ac.length;n++)t=ac[n](t,e)||t;Ao(t)}function vo(t){var e=Xn(t,"key");e&&("template"===t.tag&&oc("<template> cannot be keyed. Place the key on real elements instead."),t.key=e)}function mo(t){var e=Xn(t,"ref");e&&(t.ref=e,t.refInFor=Oo(t))}function yo(t){var e;if(e=Yn(t,"v-for")){var n=go(e);n?w(t,n):oc("Invalid v-for expression: "+e)}}function go(t){var e=t.match(kc);if(e){var n={};n.for=e[2].trim();var r=e[1].trim().replace(Ac,""),o=r.match(Cc);return o?(n.alias=r.replace(Cc,""),n.iterator1=o[1].trim(),o[2]&&(n.iterator2=o[2].trim())):n.alias=r,n}}function _o(t){var e=Yn(t,"v-if");if(e)t.if=e,xo(t,{exp:e,block:t});else{null!=Yn(t,"v-else")&&(t.else=!0);var n=Yn(t,"v-else-if");n&&(t.elseif=n)}}function bo(t,e){var n=wo(e.children);n&&n.if?xo(n,{exp:t.elseif,block:t}):oc("v-"+(t.elseif?'else-if="'+t.elseif+'"':"else")+" used on element <"+t.tag+"> without corresponding v-if.")}function wo(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];" "!==t[e].text&&oc('text "'+t[e].text.trim()+'" between v-if and v-else(-if) will be ignored.'),t.pop()}}function xo(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function $o(t){var e=Yn(t,"v-once");null!=e&&(t.once=!0)}function ko(t){if("slot"===t.tag)t.slotName=Xn(t,"name"),t.key&&oc("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.");else{var e;"template"===t.tag?(e=Yn(t,"scope"),e&&oc('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',!0),t.slotScope=e||Yn(t,"slot-scope")):(e=Yn(t,"slot-scope"))&&(t.attrsMap["v-for"]&&oc("Ambiguous combined usage of slot-scope and v-for on <"+t.tag+"> (v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",!0),t.slotScope=e);var n=Xn(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,"template"===t.tag||t.slotScope||Jn(t,"slot",n))}}function Co(t){var e;(e=Xn(t,"is"))&&(t.component=e),null!=Yn(t,"inline-template")&&(t.inlineTemplate=!0)}function Ao(t){var e,n,r,o,i,a,s,u=t.attrsList;for(e=0,n=u.length;e<n;e++)if(r=o=u[e].name,i=u[e].value,$c.test(r))if(t.hasBindings=!0,a=Eo(r),a&&(r=r.replace(Sc,"")),Ec.test(r))r=r.replace(Ec,""),i=Un(i),s=!1,a&&(a.prop&&(s=!0,r=Di(r),"innerHtml"===r&&(r="innerHTML")),a.camel&&(r=Di(r)),a.sync&&Wn(t,"update:"+Di(r),Qn(i,"$event"))),s||!t.component&&fc(t.tag,t.attrsMap.type,r)?zn(t,r,i):Jn(t,r,i);else if(xc.test(r))r=r.replace(xc,""),Wn(t,r,i,a,!1,oc);else{r=r.replace($c,"");var c=r.match(Oc),f=c&&c[1];f&&(r=r.slice(0,-(f.length+1))),Gn(t,r,o,i,f,a),"model"===r&&Mo(t,i)}else{var l=no(i,ic);l&&oc(r+'="'+i+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.'),Jn(t,r,JSON.stringify(i)),!t.component&&"muted"===r&&fc(t.tag,t.attrsMap.type,r)&&zn(t,r,"true")}}function Oo(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}function Eo(t){var e=t.match(Sc);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}function So(t){for(var e={},n=0,r=t.length;n<r;n++)!e[t[n].name]||Qi||ea||oc("duplicate attribute: "+t[n].name),e[t[n].name]=t[n].value;return e}function To(t){return"script"===t.tag||"style"===t.tag}function jo(t){return"style"===t.tag||"script"===t.tag&&(!t.attrsMap.type||"text/javascript"===t.attrsMap.type)}function No(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];jc.test(r.name)||(r.name=r.name.replace(Nc,""),e.push(r))}return e}function Mo(t,e){for(var n=t;n;)n.for&&n.alias===e&&oc("<"+t.tag+' v-model="'+e+'">: You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.'),n=n.parent}function Ro(t,e){if("input"===t.tag){var n=t.attrsMap;if(!n["v-model"])return;var r;if((n[":type"]||n["v-bind:type"])&&(r=Xn(t,"type")),!r&&n["v-bind"]&&(r="("+n["v-bind"]+").type"),r){var o=Yn(t,"v-if",!0),i=o?"&&("+o+")":"",a=null!=Yn(t,"v-else",!0),s=Yn(t,"v-else-if",!0),u=Lo(t);yo(u),Kn(u,"type","checkbox"),ho(u,e),u.processed=!0,u.if="("+r+")==='checkbox'"+i,xo(u,{exp:u.if,block:u});var c=Lo(t);Yn(c,"v-for",!0),Kn(c,"type","radio"),ho(c,e),xo(u,{exp:"("+r+")==='radio'"+i,block:c});var f=Lo(t);return Yn(f,"v-for",!0),Kn(f,":type",r),ho(f,e),xo(u,{exp:o,block:f}),a?u.else=!0:s&&(u.elseif=s),u}}}function Lo(t){return co(t.tag,t.attrsList.slice(),t.parent)}function Do(t,e){e.value&&zn(t,"textContent","_s("+e.value+")")}function Io(t,e){e.value&&zn(t,"innerHTML","_s("+e.value+")")}function Po(t,e){t&&(pc=Ic(e.staticKeys||""),dc=e.isReservedTag||Ui,Vo(t),Uo(t,!1))}function Fo(t){return h("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(t?","+t:""))}function Vo(t){if(t.static=Bo(t),1===t.type){if(!dc(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var e=0,n=t.children.length;e<n;e++){var r=t.children[e];Vo(r),r.static||(t.static=!1)}if(t.ifConditions)for(var o=1,i=t.ifConditions.length;o<i;o++){var a=t.ifConditions[o].block;Vo(a),a.static||(t.static=!1)}}}function Uo(t,e){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=e),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var n=0,r=t.children.length;n<r;n++)Uo(t.children[n],e||!!t.for);if(t.ifConditions)for(var o=1,i=t.ifConditions.length;o<i;o++)Uo(t.ifConditions[o].block,e)}}function Bo(t){return 2!==t.type&&(3===t.type||!(!t.pre&&(t.hasBindings||t.if||t.for||Ni(t.tag)||!dc(t.tag)||Ho(t)||!Object.keys(t).every(pc))))}function Ho(t){for(;t.parent;){if(t=t.parent,"template"!==t.tag)return!1;if(t.for)return!0}return!1}function qo(t,e,n){var r=e?"nativeOn:{":"on:{";for(var o in t)r+='"'+o+'":'+zo(o,t[o])+",";return r.slice(0,-1)+"}"}function zo(t,e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map(function(e){return zo(t,e)}).join(",")+"]";var n=Fc.test(e.value),r=Pc.test(e.value);if(e.modifiers){var o="",i="",a=[];for(var s in e.modifiers)if(Hc[s])i+=Hc[s],Vc[s]&&a.push(s);else if("exact"===s){var u=e.modifiers;i+=Bc(["ctrl","shift","alt","meta"].filter(function(t){return!u[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else a.push(s);a.length&&(o+=Jo(a)),i&&(o+=i);var c=n?"return "+e.value+"($event)":r?"return ("+e.value+")($event)":e.value;return"function($event){"+o+c+"}"}return n||r?e.value:"function($event){"+e.value+"}"}function Jo(t){return"if(!('button' in $event)&&"+t.map(Ko).join("&&")+")return null;"}function Ko(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=Vc[t],r=Uc[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}function Go(t,e){e.modifiers&&pa("v-on without argument does not support modifiers."),t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}}function Wo(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}}function Xo(t,e){var n=new zc(e),r=t?Yo(t,n):'_c("div")';return{render:"with(this){return "+r+"}",staticRenderFns:n.staticRenderFns}}function Yo(t,e){if(t.staticRoot&&!t.staticProcessed)return Zo(t,e);if(t.once&&!t.onceProcessed)return Qo(t,e);if(t.for&&!t.forProcessed)return ni(t,e);if(t.if&&!t.ifProcessed)return ti(t,e);if("template"!==t.tag||t.slotTarget){if("slot"===t.tag)return vi(t,e);var n;if(t.component)n=mi(t.component,t,e);else{var r=t.plain?void 0:ri(t,e),o=t.inlineTemplate?null:ci(t,e,!0);n="_c('"+t.tag+"'"+(r?","+r:"")+(o?","+o:"")+")"}for(var i=0;i<e.transforms.length;i++)n=e.transforms[i](t,n);return n}return ci(t,e)||"void 0"}function Zo(t,e){return t.staticProcessed=!0,e.staticRenderFns.push("with(this){return "+Yo(t,e)+"}"),"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function Qo(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return ti(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+Yo(t,e)+","+e.onceId++ +","+n+")":(e.warn("v-once can only be used inside v-for that is keyed. "),Yo(t,e))}return Zo(t,e)}function ti(t,e,n,r){return t.ifProcessed=!0,ei(t.ifConditions.slice(),e,n,r)}function ei(t,e,n,r){function o(t){return n?n(t,e):t.once?Qo(t,e):Yo(t,e)}if(!t.length)return r||"_e()";var i=t.shift();return i.exp?"("+i.exp+")?"+o(i.block)+":"+ei(t,e,n,r):""+o(i.block)}function ni(t,e,n,r){var o=t.for,i=t.alias,a=t.iterator1?","+t.iterator1:"",s=t.iterator2?","+t.iterator2:"";return e.maybeComponent(t)&&"slot"!==t.tag&&"template"!==t.tag&&!t.key&&e.warn("<"+t.tag+' v-for="'+i+" in "+o+'">: component lists rendered with v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.',!0),t.forProcessed=!0,(r||"_l")+"(("+o+"),function("+i+a+s+"){return "+(n||Yo)(t,e)+"})"}function ri(t,e){var n="{",r=oi(t,e);r&&(n+=r+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var o=0;o<e.dataGenFns.length;o++)n+=e.dataGenFns[o](t);if(t.attrs&&(n+="attrs:{"+yi(t.attrs)+"},"),t.props&&(n+="domProps:{"+yi(t.props)+"},"),t.events&&(n+=qo(t.events,!1,e.warn)+","),t.nativeEvents&&(n+=qo(t.nativeEvents,!0,e.warn)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=ai(t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var i=ii(t,e);i&&(n+=i+",")}return n=n.replace(/,$/,"")+"}",t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function oi(t,e){var n=t.directives;if(n){var r,o,i,a,s="directives:[",u=!1;for(r=0,o=n.length;r<o;r++){i=n[r],a=!0;var c=e.directives[i.name];c&&(a=!!c(t,i,e.warn)),a&&(u=!0,s+='{name:"'+i.name+'",rawName:"'+i.rawName+'"'+(i.value?",value:("+i.value+"),expression:"+JSON.stringify(i.value):"")+(i.arg?',arg:"'+i.arg+'"':"")+(i.modifiers?",modifiers:"+JSON.stringify(i.modifiers):"")+"},")}return u?s.slice(0,-1)+"]":void 0}}function ii(t,e){var n=t.children[0];if(1===t.children.length&&1===n.type||e.warn("Inline-template components must have exactly one child element."),1===n.type){var r=Xo(n,e.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}function ai(t,e){return"scopedSlots:_u(["+Object.keys(t).map(function(n){return si(n,t[n],e)}).join(",")+"])"}function si(t,e,n){if(e.for&&!e.forProcessed)return ui(t,e,n);var r="function("+String(e.slotScope)+"){return "+("template"===e.tag?e.if?e.if+"?"+(ci(e,n)||"undefined")+":undefined":ci(e,n)||"undefined":Yo(e,n))+"}";return"{key:"+t+",fn:"+r+"}"}function ui(t,e,n){var r=e.for,o=e.alias,i=e.iterator1?","+e.iterator1:"",a=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+r+"),function("+o+i+a+"){return "+si(t,e,n)+"})"}function ci(t,e,n,r,o){var i=t.children;if(i.length){var a=i[0];if(1===i.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag)return(r||Yo)(a,e);var s=n?fi(i,e.maybeComponent):0,u=o||pi;return"["+i.map(function(t){return u(t,e)}).join(",")+"]"+(s?","+s:"")}}function fi(t,e){for(var n=0,r=0;r<t.length;r++){var o=t[r];if(1===o.type){if(li(o)||o.ifConditions&&o.ifConditions.some(function(t){return li(t.block)})){n=2;break}(e(o)||o.ifConditions&&o.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}function li(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function pi(t,e){return 1===t.type?Yo(t,e):3===t.type&&t.isComment?hi(t):di(t)}function di(t){return"_v("+(2===t.type?t.expression:gi(JSON.stringify(t.text)))+")"}function hi(t){return"_e("+JSON.stringify(t.text)+")"}function vi(t,e){var n=t.slotName||'"default"',r=ci(t,e),o="_t("+n+(r?","+r:""),i=t.attrs&&"{"+t.attrs.map(function(t){return Di(t.name)+":"+t.value}).join(",")+"}",a=t.attrsMap["v-bind"];return!i&&!a||r||(o+=",null"),i&&(o+=","+i),a&&(o+=(i?"":",null")+","+a),o+")"}function mi(t,e,n){var r=e.inlineTemplate?null:ci(e,n,!0);return"_c("+t+","+ri(e,n)+(r?","+r:"")+")"}function yi(t){for(var e="",n=0;n<t.length;n++){var r=t[n];e+='"'+r.name+'":'+gi(r.value)+","}return e.slice(0,-1)}function gi(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function _i(t){var e=[];return t&&bi(t,e),e}function bi(t,e){if(1===t.type){for(var n in t.attrsMap)if($c.test(n)){var r=t.attrsMap[n];r&&("v-for"===n?xi(t,'v-for="'+r+'"',e):xc.test(n)?wi(r,n+'="'+r+'"',e):ki(r,n+'="'+r+'"',e))}if(t.children)for(var o=0;o<t.children.length;o++)bi(t.children[o],e)}else 2===t.type&&ki(t.expression,t.text,e)}function wi(t,e,n){var r=t.replace(Gc,""),o=r.match(Kc);o&&"$"!==r.charAt(o.index-1)&&n.push('avoid using JavaScript unary operator as property name: "'+o[0]+'" in expression '+e.trim()),ki(t,e,n)}function xi(t,e,n){ki(t.for||"",e,n),$i(t.alias,"v-for alias",e,n),$i(t.iterator1,"v-for iterator",e,n),$i(t.iterator2,"v-for iterator",e,n)}function $i(t,e,n,r){if("string"==typeof t)try{new Function("var "+t+"=_")}catch(o){r.push("invalid "+e+' "'+t+'" in expression: '+n.trim())}}function ki(t,e,n){try{new Function("return "+t)}catch(o){var r=t.replace(Gc,"").match(Jc);r?n.push('avoid using JavaScript keyword as property name: "'+r[0]+'"\n  Raw expression: '+e.trim()):n.push("invalid expression: "+o.message+" in\n\n    "+t+"\n\n  Raw expression: "+e.trim()+"\n")}}function Ci(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),$}}function Ai(t){var e=Object.create(null);return function(n,r,o){r=w({},r);var i=r.warn||pa;delete r.warn;try{new Function("return 1")}catch(t){t.toString().match(/unsafe-eval|CSP/)&&i("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var a=r.delimiters?String(r.delimiters)+n:n;if(e[a])return e[a];var s=t(n,r);s.errors&&s.errors.length&&i("Error compiling template:\n\n"+n+"\n\n"+s.errors.map(function(t){return"- "+t}).join("\n")+"\n",o),s.tips&&s.tips.length&&s.tips.forEach(function(t){return da(t,o)});var u={},c=[];return u.render=Ci(s.render,c),u.staticRenderFns=s.staticRenderFns.map(function(t){return Ci(t,c)}),s.errors&&s.errors.length||!c.length||i("Failed to generate render function:\n\n"+c.map(function(t){var e=t.err,n=t.code;return e.toString()+" in\n\n"+n+"\n"}).join("\n"),o),e[a]=u}}function Oi(t){return function(e){function n(n,r){var o=Object.create(e),i=[],a=[];if(o.warn=function(t,e){(e?a:i).push(t)},r){r.modules&&(o.modules=(e.modules||[]).concat(r.modules)),r.directives&&(o.directives=w(Object.create(e.directives||null),r.directives));for(var s in r)"modules"!==s&&"directives"!==s&&(o[s]=r[s])}var u=t(n,o);return i.push.apply(i,_i(u.ast)),u.errors=i,u.tips=a,u}return{compile:n,compileToFunctions:Ai(n)}}}function Ei(t){return hc=hc||document.createElement("div"),hc.innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',hc.innerHTML.indexOf("&#10;")>0}function Si(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}var Ti=Object.freeze({}),ji=Object.prototype.toString,Ni=h("slot,component",!0),Mi=h("key,ref,slot,slot-scope,is"),Ri=Object.prototype.hasOwnProperty,Li=/-(\w)/g,Di=y(function(t){return t.replace(Li,function(t,e){return e?e.toUpperCase():""})}),Ii=y(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),Pi=/\B([A-Z])/g,Fi=y(function(t){return t.replace(Pi,"-$1").toLowerCase()}),Vi=Function.prototype.bind?_:g,Ui=function(t,e,n){return!1},Bi=function(t){return t},Hi="data-server-rendered",qi=["component","directive","filter"],zi=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],Ji={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Ui,isReservedAttr:Ui,isUnknownElement:Ui,getTagNamespace:$,parsePlatformTagName:Bi,mustUseProp:Ui,_lifecycleHooks:zi},Ki=/[^\w.$]/,Gi="__proto__"in{},Wi="undefined"!=typeof window,Xi="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Yi=Xi&&WXEnvironment.platform.toLowerCase(),Zi=Wi&&window.navigator.userAgent.toLowerCase(),Qi=Zi&&/msie|trident/.test(Zi),ta=Zi&&Zi.indexOf("msie 9.0")>0,ea=Zi&&Zi.indexOf("edge/")>0,na=(Zi&&Zi.indexOf("android")>0||"android"===Yi,Zi&&/iphone|ipad|ipod|ios/.test(Zi)||"ios"===Yi),ra=Zi&&/chrome\/\d+/.test(Zi)&&!ea,oa={}.watch,ia=!1;if(Wi)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){ia=!0}}),window.addEventListener("test-passive",null,aa)}catch(t){}var sa,ua,ca=function(){return void 0===sa&&(sa=!Wi&&!Xi&&"undefined"!=typeof e&&"server"===e.process.env.VUE_ENV),sa},fa=Wi&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,la="undefined"!=typeof Symbol&&j(Symbol)&&"undefined"!=typeof Reflect&&j(Reflect.ownKeys);ua="undefined"!=typeof Set&&j(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return this.set[t]===!0},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var pa=$,da=$,ha=$,va=$,ma="undefined"!=typeof console,ya=/(?:^|[-_])(\w)/g,ga=function(t){return t.replace(ya,function(t){return t.toUpperCase()}).replace(/[-_]/g,"")};pa=function(t,e){var n=e?ha(e):"";Ji.warnHandler?Ji.warnHandler.call(null,t,e,n):ma&&!Ji.silent&&console.error("[Vue warn]: "+t+n)},da=function(t,e){ma&&!Ji.silent&&console.warn("[Vue tip]: "+t+(e?ha(e):""))},va=function(t,e){if(t.$root===t)return"<Root>";var n="function"==typeof t&&null!=t.cid?t.options:t._isVue?t.$options||t.constructor.options:t||{},r=n.name||n._componentTag,o=n.__file;if(!r&&o){var i=o.match(/([^\/\\]+)\.vue$/);r=i&&i[1]}return(r?"<"+ga(r)+">":"<Anonymous>")+(o&&e!==!1?" at "+o:"")};var _a=function(t,e){for(var n="";e;)e%2===1&&(n+=t),e>1&&(t+=t),e>>=1;return n};ha=function(t){if(t._isVue&&t.$parent){for(var e=[],n=0;t;){if(e.length>0){var r=e[e.length-1];if(r.constructor===t.constructor){n++,t=t.$parent;continue}n>0&&(e[e.length-1]=[r,n],n=0)}e.push(t),t=t.$parent}return"\n\nfound in\n\n"+e.map(function(t,e){return""+(0===e?"---> ":_a(" ",5+2*e))+(Array.isArray(t)?va(t[0])+"... ("+t[1]+" recursive calls)":va(t))}).join("\n")}return"\n\n(found in "+va(t)+")"};var ba=0,wa=function(){this.id=ba++,this.subs=[]};wa.prototype.addSub=function(t){this.subs.push(t)},wa.prototype.removeSub=function(t){v(this.subs,t)},wa.prototype.depend=function(){wa.target&&wa.target.addDep(this)},wa.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},wa.target=null;var xa=[],$a=function(t,e,n,r,o,i,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ka={child:{configurable:!0}};ka.child.get=function(){return this.componentInstance},Object.defineProperties($a.prototype,ka);var Ca=function(t){void 0===t&&(t="");var e=new $a;return e.text=t,e.isComment=!0,e},Aa=Array.prototype,Oa=Object.create(Aa),Ea=["push","pop","shift","unshift","splice","sort","reverse"];Ea.forEach(function(t){var e=Aa[t];S(Oa,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var o,i=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2)}return o&&a.observeArray(o),a.dep.notify(),i})});var Sa=Object.getOwnPropertyNames(Oa),Ta=!0,ja=function(t){if(this.value=t,this.dep=new wa,this.vmCount=0,S(t,"__ob__",this),Array.isArray(t)){var e=Gi?I:P;e(t,Oa,Sa),this.observeArray(t)}else this.walk(t)};ja.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)V(t,e[n])},ja.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)F(t[e])};var Na=Ji.optionMergeStrategies;Na.el=Na.propsData=function(t,e,n,r){return n||pa('option "'+r+'" can only be used during instance creation with the `new` keyword.'),La(t,e)},Na.data=function(t,e,n){return n?z(t,e,n):e&&"function"!=typeof e?(pa('The "data" option should be a function that returns a per-instance value in component definitions.',n),t):z(t,e)},zi.forEach(function(t){Na[t]=J}),qi.forEach(function(t){Na[t+"s"]=K}),Na.watch=function(t,e,n,r){if(t===oa&&(t=void 0),e===oa&&(e=void 0),!e)return Object.create(t||null);if(Q(r,e,n),!t)return e;var o={};w(o,t);for(var i in e){var a=o[i],s=e[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},Na.props=Na.methods=Na.inject=Na.computed=function(t,e,n,r){if(e&&Q(r,e,n),!t)return e;var o=Object.create(null);return w(o,t),e&&w(o,e),o},Na.provide=z;var Ma,Ra,La=function(t,e){return void 0===e?t:e},Da=/^(String|Number|Boolean|Function|Symbol)$/,Ia=[],Pa=!1,Fa=!1;if("undefined"!=typeof n&&j(n))Ra=function(){n(pt)};else if("undefined"==typeof MessageChannel||!j(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Ra=function(){setTimeout(pt,0)};else{var Va=new MessageChannel,Ua=Va.port2;Va.port1.onmessage=pt,Ra=function(){Ua.postMessage(1)}}if("undefined"!=typeof Promise&&j(Promise)){var Ba=Promise.resolve();Ma=function(){Ba.then(pt),na&&setTimeout($)}}else Ma=Ra;var Ha,qa,za=Wi&&window.performance;za&&za.mark&&za.measure&&za.clearMarks&&za.clearMeasures&&(Ha=function(t){return za.mark(t)},qa=function(t,e,n){za.measure(t,e,n),za.clearMarks(e),za.clearMarks(n),za.clearMeasures(t)});var Ja,Ka=h("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),Ga=function(t,e){pa('Property or method "'+e+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',t)},Wa="undefined"!=typeof Proxy&&j(Proxy);if(Wa){var Xa=h("stop,prevent,self,ctrl,shift,alt,meta,exact");Ji.keyCodes=new Proxy(Ji.keyCodes,{set:function(t,e,n){return Xa(e)?(pa("Avoid overwriting built-in modifier in config.keyCodes: ."+e),!1):(t[e]=n,!0)}})}var Ya={has:function t(e,n){var t=n in e,r=Ka(n)||"_"===n.charAt(0);return t||r||Ga(e,n),t||!r}},Za={get:function(t,e){return"string"!=typeof e||e in t||Ga(t,e),t[e]}};Ja=function(t){if(Wa){var e=t.$options,n=e.render&&e.render._withStripped?Za:Ya;t._renderProxy=new Proxy(t,n)}else t._renderProxy=t};var Qa,ts=new ua,es=y(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}),ns=null,rs=!1,os=100,is=[],as=[],ss={},us={},cs=!1,fs=!1,ls=0,ps=0,ds=function(t,e,n,r,o){this.vm=t,o&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++ps,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ua,this.newDepIds=new ua,this.expression=e.toString(),"function"==typeof e?this.getter=e:(this.getter=T(e),this.getter||(this.getter=function(){},pa('Failed watching path: "'+e+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',t))),this.value=this.lazy?void 0:this.get()};ds.prototype.get=function(){N(this);var t,e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;ct(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&vt(t),M(),this.cleanupDeps()}return t},ds.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},ds.prototype.cleanupDeps=function(){for(var t=this,e=this.deps.length;e--;){var n=t.deps[e];t.newDepIds.has(n.id)||n.removeSub(t)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},ds.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Zt(this)},ds.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){ct(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},ds.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ds.prototype.depend=function(){for(var t=this,e=this.deps.length;e--;)t.deps[e].depend()},ds.prototype.teardown=function(){var t=this;if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);for(var e=this.deps.length;e--;)t.deps[e].removeSub(t);this.active=!1}};var hs={enumerable:!0,configurable:!0,get:$,set:$},vs={lazy:!0};Ce(Ae.prototype);var ms={init:function(t,e,n,r){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var o=t;ms.prepatch(o,o)}else{var i=t.componentInstance=je(t,ns,n,r);i.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;Bt(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Jt(n,"mounted")),t.data.keepAlive&&(e._isMounted?Xt(n):qt(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?zt(e,!0):e.$destroy())}},ys=Object.keys(ms),gs=1,_s=2,bs=0;Ue(Je),fe(Je),Lt(Je),Vt(Je),Ve(Je);var ws=[String,RegExp,Array],xs={name:"keep-alive",abstract:!0,props:{include:ws,exclude:ws,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){var t=this;for(var e in t.cache)nn(t.cache,e,t.keys)},watch:{include:function(t){en(this,function(e){return tn(t,e)})},exclude:function(t){en(this,function(e){return!tn(t,e)})}},render:function(){var t=this.$slots.default,e=Tt(t),n=e&&e.componentOptions;if(n){var r=Qe(n),o=this,i=o.include,a=o.exclude;if(i&&(!r||!tn(i,r))||a&&r&&tn(a,r))return e;var s=this,u=s.cache,c=s.keys,f=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[f]?(e.componentInstance=u[f].componentInstance,v(c,f),c.push(f)):(u[f]=e,c.push(f),this.max&&c.length>parseInt(this.max)&&nn(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},$s={KeepAlive:xs};rn(Je),Object.defineProperty(Je.prototype,"$isServer",{get:ca}),Object.defineProperty(Je.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Je,"FunctionalRenderContext",{value:Ae}),Je.version="2.5.15";var ks,Cs,As,Os,Es,Ss,Ts,js,Ns,Ms=h("style,class"),Rs=h("input,textarea,option,select,progress"),Ls=function(t,e,n){return"value"===n&&Rs(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Ds=h("contenteditable,draggable,spellcheck"),Is=h("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Ps="http://www.w3.org/1999/xlink",Fs=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Vs=function(t){return Fs(t)?t.slice(6,t.length):""},Us=function(t){return null==t||t===!1},Bs={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Hs=h("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),qs=h("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),zs=function(t){return"pre"===t},Js=function(t){return Hs(t)||qs(t)},Ks=Object.create(null),Gs=h("text,number,password,search,email,tel,url"),Ws=Object.freeze({createElement:vn,createElementNS:mn,createTextNode:yn,createComment:gn,insertBefore:_n,removeChild:bn,appendChild:wn,parentNode:xn,nextSibling:$n,tagName:kn,setTextContent:Cn,setStyleScope:An}),Xs={create:function(t,e){On(e)},update:function(t,e){t.data.ref!==e.data.ref&&(On(t,!0),On(e))},destroy:function(t){On(t,!0)}},Ys=new $a("",{},[]),Zs=["create","activate","update","remove","destroy"],Qs={create:Nn,update:Nn,destroy:function(t){Nn(t,Ys)}},tu=Object.create(null),eu=[Xs,Qs],nu={create:In,update:In},ru={create:Vn,update:Vn},ou=/[\w).+\-_$\]]/,iu="__r",au="__c",su={create:vr,update:vr},uu={create:mr,update:mr},cu=y(function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach(function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}),fu=/^--/,lu=/\s*!important$/,pu=function(t,e,n){if(fu.test(e))t.style.setProperty(e,n);else if(lu.test(n))t.style.setProperty(e,n.replace(lu,""),"important");else{var r=hu(e);if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)t.style[r]=n[o];else t.style[r]=n}},du=["Webkit","Moz","ms"],hu=y(function(t){if(Ns=Ns||document.createElement("div").style,t=Di(t),"filter"!==t&&t in Ns)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<du.length;n++){var r=du[n]+e;if(r in Ns)return r}}),vu={create:$r,update:$r},mu=y(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),yu=Wi&&!ta,gu="transition",_u="animation",bu="transition",wu="transitionend",xu="animation",$u="animationend";
yu&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(bu="WebkitTransition",wu="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(xu="WebkitAnimation",$u="webkitAnimationEnd"));var ku=Wi?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()},Cu=/\b(transform|all)(,|$)/,Au=Wi?{create:Fr,activate:Fr,remove:function(t,e){t.data.show!==!0?Lr(t,e):e()}}:{},Ou=[nu,ru,su,uu,vu,Au],Eu=Ou.concat(eu),Su=jn({nodeOps:Ws,modules:Eu});ta&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Jr(t,"input")});var Tu={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?_t(n,"postpatch",function(){Tu.componentUpdated(t,e,n)}):Vr(t,e,n.context),t._vOptions=[].map.call(t.options,Hr)):("textarea"===n.tag||Gs(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",qr),t.addEventListener("compositionend",zr),t.addEventListener("change",zr),ta&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Vr(t,e,n.context);var r=t._vOptions,o=t._vOptions=[].map.call(t.options,Hr);if(o.some(function(t,e){return!C(t,r[e])})){var i=t.multiple?e.value.some(function(t){return Br(t,o)}):e.value!==e.oldValue&&Br(e.value,o);i&&Jr(t,"change")}}}},ju={bind:function(t,e,n){var r=e.value;n=Kr(n);var o=n.data&&n.data.transition,i=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&o?(n.data.show=!0,Rr(n,function(){t.style.display=i})):t.style.display=r?i:"none"},update:function(t,e,n){var r=e.value,o=e.oldValue;if(!r!=!o){n=Kr(n);var i=n.data&&n.data.transition;i?(n.data.show=!0,r?Rr(n,function(){t.style.display=t.__vOriginalDisplay}):Lr(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,o){o||(t.style.display=t.__vOriginalDisplay)}},Nu={model:Tu,show:ju},Mu={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},Ru={name:"transition",props:Mu,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(function(t){return t.tag||St(t)}),n.length)){n.length>1&&pa("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var r=this.mode;r&&"in-out"!==r&&"out-in"!==r&&pa("invalid <transition> mode: "+r,this.$parent);var o=n[0];if(Yr(this.$vnode))return o;var i=Gr(o);if(!i)return o;if(this._leaving)return Xr(t,o);var s="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?s+"comment":s+i.tag:a(i.key)?0===String(i.key).indexOf(s)?i.key:s+i.key:i.key;var u=(i.data||(i.data={})).transition=Wr(this),c=this._vnode,f=Gr(c);if(i.data.directives&&i.data.directives.some(function(t){return"show"===t.name})&&(i.data.show=!0),f&&f.data&&!Zr(i,f)&&!St(f)&&(!f.componentInstance||!f.componentInstance._vnode.isComment)){var l=f.data.transition=w({},u);if("out-in"===r)return this._leaving=!0,_t(l,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Xr(t,o);if("in-out"===r){if(St(i))return c;var p,d=function(){p()};_t(u,"afterEnter",d),_t(u,"enterCancelled",d),_t(l,"delayLeave",function(t){p=t})}}return o}}},Lu=w({tag:String,moveClass:String},Mu);delete Lu.mode;var Du={props:Lu,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=Wr(this),s=0;s<o.length;s++){var u=o[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))i.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else{var c=u.componentOptions,f=c?c.Ctor.options.name||c.tag||"":u.tag;pa("<transition-group> children must be keyed: <"+f+">")}}if(r){for(var l=[],p=[],d=0;d<r.length;d++){var h=r[d];h.data.transition=a,h.data.pos=h.elm.getBoundingClientRect(),n[h.key]?l.push(h):p.push(h)}this.kept=t(e,null,l),this.removed=p}return t(e,null,i)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Qr),t.forEach(to),t.forEach(eo),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;Er(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(wu,n._moveCb=function t(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(wu,t),n._moveCb=null,Sr(n,e))})}}))},methods:{hasMove:function(t,e){if(!yu)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Cr(n,t)}),kr(n,e),n.style.display="none",this.$el.appendChild(n);var r=jr(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}},Iu={Transition:Ru,TransitionGroup:Du};Je.config.mustUseProp=Ls,Je.config.isReservedTag=Js,Je.config.isReservedAttr=Ms,Je.config.getTagNamespace=pn,Je.config.isUnknownElement=dn,w(Je.options.directives,Nu),w(Je.options.components,Iu),Je.prototype.__patch__=Wi?Su:$,Je.prototype.$mount=function(t,e){return t=t&&Wi?hn(t):void 0,Ut(this,t,e)},Wi&&setTimeout(function(){Ji.devtools&&(fa?fa.emit("init",Je):ra&&console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),Ji.productionTip!==!1&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")},0);var Pu,Fu=/\{\{((?:.|\n)+?)\}\}/g,Vu=/[-.*+?^${}()|[\]\/\\]/g,Uu=y(function(t){var e=t[0].replace(Vu,"\\$&"),n=t[1].replace(Vu,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")}),Bu={staticKeys:["staticClass"],transformNode:ro,genData:oo},Hu={staticKeys:["staticStyle"],transformNode:io,genData:ao},qu={decode:function(t){return Pu=Pu||document.createElement("div"),Pu.innerHTML=t,Pu.textContent}},zu=h("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Ju=h("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Ku=h("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Gu=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Wu="[a-zA-Z_][\\w\\-\\.]*",Xu="((?:"+Wu+"\\:)?"+Wu+")",Yu=new RegExp("^<"+Xu),Zu=/^\s*(\/?)>/,Qu=new RegExp("^<\\/"+Xu+"[^>]*>"),tc=/^<!DOCTYPE [^>]+>/i,ec=/^<!\--/,nc=/^<!\[/,rc=!1;"x".replace(/x(.)?/g,function(t,e){rc=""===e});var oc,ic,ac,sc,uc,cc,fc,lc,pc,dc,hc,vc=h("script,style,textarea",!0),mc={},yc={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},gc=/&(?:lt|gt|quot|amp);/g,_c=/&(?:lt|gt|quot|amp|#10|#9);/g,bc=h("pre,textarea",!0),wc=function(t,e){return t&&bc(t)&&"\n"===e[0]},xc=/^@|^v-on:/,$c=/^v-|^@|^:/,kc=/(.*?)\s+(?:in|of)\s+(.*)/,Cc=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Ac=/^\(|\)$/g,Oc=/:(.*)$/,Ec=/^:|^v-bind:/,Sc=/\.[^.]+/g,Tc=y(qu.decode),jc=/^xmlns:NS\d+/,Nc=/^NS\d+:/,Mc={preTransformNode:Ro},Rc=[Bu,Hu,Mc],Lc={model:ar,text:Do,html:Io},Dc={expectHTML:!0,modules:Rc,directives:Lc,isPreTag:zs,isUnaryTag:zu,mustUseProp:Ls,canBeLeftOpenTag:Ju,isReservedTag:Js,getTagNamespace:pn,staticKeys:k(Rc)},Ic=y(Fo),Pc=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,Fc=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Vc={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Uc={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:"ArrowUp",left:"ArrowLeft",right:"ArrowRight",down:"ArrowDown",delete:["Backspace","Delete"]},Bc=function(t){return"if("+t+")return null;"},Hc={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Bc("$event.target !== $event.currentTarget"),ctrl:Bc("!$event.ctrlKey"),shift:Bc("!$event.shiftKey"),alt:Bc("!$event.altKey"),meta:Bc("!$event.metaKey"),left:Bc("'button' in $event && $event.button !== 0"),middle:Bc("'button' in $event && $event.button !== 1"),right:Bc("'button' in $event && $event.button !== 2")},qc={on:Go,bind:Wo,cloak:$},zc=function(t){this.options=t,this.warn=t.warn||Hn,this.transforms=qn(t.modules,"transformCode"),this.dataGenFns=qn(t.modules,"genData"),this.directives=w(w({},qc),t.directives);var e=t.isReservedTag||Ui;this.maybeComponent=function(t){return!e(t.tag)},this.onceId=0,this.staticRenderFns=[]},Jc=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),Kc=new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),Gc=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g,Wc=Oi(function(t,e){var n=fo(t.trim(),e);e.optimize!==!1&&Po(n,e);var r=Xo(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}}),Xc=Wc(Dc),Yc=Xc.compileToFunctions,Zc=!!Wi&&Ei(!1),Qc=!!Wi&&Ei(!0),tf=y(function(t){var e=hn(t);return e&&e.innerHTML}),ef=Je.prototype.$mount;return Je.prototype.$mount=function(t,e){if(t=t&&hn(t),t===document.body||t===document.documentElement)return pa("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=tf(r),r||pa("Template element not found or is empty: "+n.template,this));else{if(!r.nodeType)return pa("invalid template option:"+r,this),this;r=r.innerHTML}else t&&(r=Si(t));if(r){Ji.performance&&Ha&&Ha("compile");var o=Yc(r,{shouldDecodeNewlines:Zc,shouldDecodeNewlinesForHref:Qc,delimiters:n.delimiters,comments:n.comments},this),i=o.render,a=o.staticRenderFns;n.render=i,n.staticRenderFns=a,Ji.performance&&Ha&&(Ha("compile end"),qa("vue "+this._name+" compile","compile","compile end"))}}return ef.call(this,t,e)},Je.compile=Yc,Je})}).call(e,function(){return this}(),n(5).setImmediate)},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(6),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return v[h]=r,d(h),h++}function o(t){delete v[t]}function i(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(m)setTimeout(a,0,t);else{var e=v[t];if(e){m=!0;try{i(e)}finally{o(t),m=!1}}}}function s(){d=function(t){e.nextTick(function(){a(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),d=function(n){t.postMessage(e+n,"*")}}function f(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;a(e)},d=function(e){t.port2.postMessage(e)}}function l(){var t=y.documentElement;d=function(e){var n=y.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function p(){d=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var d,h=1,v={},m=!1,y=t.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(t);g=g&&g.setTimeout?g:t,"[object process]"==={}.toString.call(t.process)?s():u()?c():t.MessageChannel?f():y&&"onreadystatechange"in y.createElement("script")?l():p(),g.setImmediate=r,g.clearImmediate=o}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(3))},function(t,e,n){(function(e){/**
	  * vue-router v3.0.1
	  * (c) 2017 Evan You
	  * @license MIT
	  */
"use strict";function n(t,e){if(!t)throw new Error("[vue-router] "+e)}function r(t,n){"production"===e.env.NODE_ENV||t||"undefined"!=typeof console&&console.warn("[vue-router] "+n)}function o(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function i(t,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(t);case"boolean":return n?t.params:void 0;default:"production"!==e.env.NODE_ENV&&r(!1,'props in "'+t.path+'" is a '+typeof n+", expecting an object, function or boolean.")}}function a(t,e){for(var n in e)t[n]=e[n];return t}function s(t,n,o){void 0===n&&(n={});var i,a=o||u;try{i=a(t||"")}catch(t){"production"!==e.env.NODE_ENV&&r(!1,t.message),i={}}for(var s in n)i[s]=n[s];return i}function u(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var n=t.replace(/\+/g," ").split("="),r=Vt(n.shift()),o=n.length>0?Vt(n.join("=")):null;void 0===e[r]?e[r]=o:Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]}),e):e}function c(t){var e=t?Object.keys(t).map(function(e){var n=t[e];if(void 0===n)return"";if(null===n)return Ft(e);if(Array.isArray(n)){var r=[];return n.forEach(function(t){void 0!==t&&(null===t?r.push(Ft(e)):r.push(Ft(e)+"="+Ft(t)))}),r.join("&")}return Ft(e)+"="+Ft(n)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}function f(t,e,n,r){var o=r&&r.options.stringifyQuery,i=e.query||{};try{i=l(i)}catch(t){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:i,params:e.params||{},fullPath:d(e,o),matched:t?p(t):[]};return n&&(a.redirectedFrom=d(n,o)),Object.freeze(a)}function l(t){if(Array.isArray(t))return t.map(l);if(t&&"object"==typeof t){var e={};for(var n in t)e[n]=l(t[n]);return e}return t}function p(t){for(var e=[];t;)e.unshift(t),t=t.parent;return e}function d(t,e){var n=t.path,r=t.query;void 0===r&&(r={});var o=t.hash;void 0===o&&(o="");var i=e||c;return(n||"/")+i(r)+o}function h(t,e){return e===Bt?t===e:!!e&&(t.path&&e.path?t.path.replace(Ut,"")===e.path.replace(Ut,"")&&t.hash===e.hash&&v(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&v(t.query,e.query)&&v(t.params,e.params)))}function v(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(n){var r=t[n],o=e[n];return"object"==typeof r&&"object"==typeof o?v(r,o):String(r)===String(o)})}function m(t,e){return 0===t.path.replace(Ut,"/").indexOf(e.path.replace(Ut,"/"))&&(!e.hash||t.hash===e.hash)&&y(t.query,e.query)}function y(t,e){for(var n in e)if(!(n in t))return!1;return!0}function g(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function _(t){if(t)for(var e,n=0;n<t.length;n++){if(e=t[n],"a"===e.tag)return e;if(e.children&&(e=_(e.children)))return e}}function b(t){if(!b.installed||Rt!==t){b.installed=!0,Rt=t;var e=function(t){return void 0!==t},n=function(t,n){var r=t.$options._parentVnode;e(r)&&e(r=r.data)&&e(r=r.registerRouteInstance)&&r(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("router-view",Lt),t.component("router-link",zt);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}function w(t,e,n){var r=t.charAt(0);if("/"===r)return t;if("?"===r||"#"===r)return e+t;var o=e.split("/");n&&o[o.length-1]||o.pop();for(var i=t.replace(/^\//,"").split("/"),a=0;a<i.length;a++){var s=i[a];".."===s?o.pop():"."!==s&&o.push(s)}return""!==o[0]&&o.unshift(""),o.join("/")}function x(t){var e="",n="",r=t.indexOf("#");r>=0&&(e=t.slice(r),t=t.slice(0,r));var o=t.indexOf("?");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{path:t,query:n,hash:e}}function $(t){return t.replace(/\/\//g,"/")}function k(t,e){for(var n,r=[],o=0,i=0,a="",s=e&&e.delimiter||"/";null!=(n=Qt.exec(t));){var u=n[0],c=n[1],f=n.index;if(a+=t.slice(i,f),i=f+u.length,c)a+=c[1];else{var l=t[i],p=n[2],d=n[3],h=n[4],v=n[5],m=n[6],y=n[7];a&&(r.push(a),a="");var g=null!=p&&null!=l&&l!==p,_="+"===m||"*"===m,b="?"===m||"*"===m,w=n[2]||s,x=h||v;r.push({name:d||o++,prefix:p||"",delimiter:w,optional:b,repeat:_,partial:g,asterisk:!!y,pattern:x?T(x):y?".*":"[^"+S(w)+"]+?"})}}return i<t.length&&(a+=t.substr(i)),a&&r.push(a),r}function C(t,e){return E(k(t,e))}function A(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function O(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function E(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",i=n||{},a=r||{},s=a.pretty?A:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!=typeof c){var f,l=i[c.name];if(null==l){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(Kt(l)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<l.length;p++){if(f=s(l[p]),!e[u].test(f))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(f)+"`");o+=(0===p?c.prefix:c.delimiter)+f}}else{if(f=c.asterisk?O(l):s(l),!e[u].test(f))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+f+'"');o+=c.prefix+f}}else o+=c}return o}}function S(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function T(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function j(t,e){return t.keys=e,t}function N(t){return t.sensitive?"":"i"}function M(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return j(t,e)}function R(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(I(t[o],e,n).source);var i=new RegExp("(?:"+r.join("|")+")",N(n));return j(i,e)}function L(t,e,n){return D(k(t,n),e,n)}function D(t,e,n){Kt(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,o=n.end!==!1,i="",a=0;a<t.length;a++){var s=t[a];if("string"==typeof s)i+=S(s);else{var u=S(s.prefix),c="(?:"+s.pattern+")";e.push(s),s.repeat&&(c+="(?:"+u+c+")*"),c=s.optional?s.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")",i+=c}}var f=S(n.delimiter||"/"),l=i.slice(-f.length)===f;return r||(i=(l?i.slice(0,-f.length):i)+"(?:"+f+"(?=$))?"),i+=o?"$":r&&l?"":"(?="+f+"|$)",j(new RegExp("^"+i,N(n)),e)}function I(t,e,n){return Kt(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?M(t,e):Kt(t)?R(t,e,n):L(t,e,n)}function P(t,n,o){try{var i=te[t]||(te[t]=Gt.compile(t));return i(n||{},{pretty:!0})}catch(t){return"production"!==e.env.NODE_ENV&&r(!1,"missing param for "+o+": "+t.message),""}}function F(t,e,n,r){var o=e||[],i=n||Object.create(null),a=r||Object.create(null);t.forEach(function(t){V(o,i,a,t)});for(var s=0,u=o.length;s<u;s++)"*"===o[s]&&(o.push(o.splice(s,1)[0]),u--,s--);return{pathList:o,pathMap:i,nameMap:a}}function V(t,o,i,a,s,u){var c=a.path,f=a.name;"production"!==e.env.NODE_ENV&&(n(null!=c,'"path" is required in a route configuration.'),n("string"!=typeof a.component,'route config "component" for path: '+String(c||f)+" cannot be a string id. Use an actual component instead."));var l=a.pathToRegexpOptions||{},p=B(c,s,l.strict);"boolean"==typeof a.caseSensitive&&(l.sensitive=a.caseSensitive);var d={path:p,regex:U(p,l),components:a.components||{default:a.component},instances:{},name:f,parent:s,matchAs:u,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};if(a.children&&("production"!==e.env.NODE_ENV&&a.name&&!a.redirect&&a.children.some(function(t){return/^\/?$/.test(t.path)})&&r(!1,"Named Route '"+a.name+"' has a default child route. When navigating to this named route (:to=\"{name: '"+a.name+"'\"), the default child route will not be rendered. Remove the name from this route and use the name of the default child route for named links instead."),a.children.forEach(function(e){var n=u?$(u+"/"+e.path):void 0;V(t,o,i,e,d,n)})),void 0!==a.alias){var h=Array.isArray(a.alias)?a.alias:[a.alias];h.forEach(function(e){var n={path:e,children:a.children};V(t,o,i,n,s,d.path||"/")})}o[d.path]||(t.push(d.path),o[d.path]=d),f&&(i[f]?"production"===e.env.NODE_ENV||u||r(!1,'Duplicate named routes definition: { name: "'+f+'", path: "'+d.path+'" }'):i[f]=d)}function U(t,n){var o=Gt(t,[],n);if("production"!==e.env.NODE_ENV){var i=Object.create(null);o.keys.forEach(function(e){r(!i[e.name],'Duplicate param keys in route with path: "'+t+'"'),i[e.name]=!0})}return o}function B(t,e,n){return n||(t=t.replace(/\/$/,"")),"/"===t[0]?t:null==e?t:$(e.path+"/"+t)}function H(t,n,o,i){var a="string"==typeof t?{path:t}:t;if(a.name||a._normalized)return a;if(!a.path&&a.params&&n){a=q({},a),a._normalized=!0;var u=q(q({},n.params),a.params);if(n.name)a.name=n.name,a.params=u;else if(n.matched.length){var c=n.matched[n.matched.length-1].path;a.path=P(c,u,"path "+n.path)}else"production"!==e.env.NODE_ENV&&r(!1,"relative params navigation requires a current route.");return a}var f=x(a.path||""),l=n&&n.path||"/",p=f.path?w(f.path,l,o||a.append):l,d=s(f.query,a.query,i&&i.options.parseQuery),h=a.hash||f.hash;return h&&"#"!==h.charAt(0)&&(h="#"+h),{_normalized:!0,path:p,query:d,hash:h}}function q(t,e){for(var n in e)t[n]=e[n];return t}function z(t,o){function i(t){F(t,p,d,h)}function a(t,n,i){var a=H(t,n,!1,o),s=a.name;if(s){var u=h[s];if("production"!==e.env.NODE_ENV&&r(u,"Route with name '"+s+"' does not exist"),!u)return c(null,a);var f=u.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof a.params&&(a.params={}),n&&"object"==typeof n.params)for(var l in n.params)!(l in a.params)&&f.indexOf(l)>-1&&(a.params[l]=n.params[l]);if(u)return a.path=P(u.path,a.params,'named route "'+s+'"'),c(u,a,i)}else if(a.path){a.params={};for(var v=0;v<p.length;v++){var m=p[v],y=d[m];if(J(y.regex,a.path,a.params))return c(y,a,i)}}return c(null,a)}function s(t,i){var s=t.redirect,u="function"==typeof s?s(f(t,i,null,o)):s;if("string"==typeof u&&(u={path:u}),!u||"object"!=typeof u)return"production"!==e.env.NODE_ENV&&r(!1,"invalid redirect option: "+JSON.stringify(u)),c(null,i);var l=u,p=l.name,d=l.path,v=i.query,m=i.hash,y=i.params;if(v=l.hasOwnProperty("query")?l.query:v,m=l.hasOwnProperty("hash")?l.hash:m,y=l.hasOwnProperty("params")?l.params:y,p){var g=h[p];return"production"!==e.env.NODE_ENV&&n(g,'redirect failed: named route "'+p+'" not found.'),a({_normalized:!0,name:p,query:v,hash:m,params:y},void 0,i)}if(d){var _=K(d,t),b=P(_,y,'redirect route with path "'+_+'"');return a({_normalized:!0,path:b,query:v,hash:m},void 0,i)}return"production"!==e.env.NODE_ENV&&r(!1,"invalid redirect option: "+JSON.stringify(u)),c(null,i)}function u(t,e,n){var r=P(n,e.params,'aliased route with path "'+n+'"'),o=a({_normalized:!0,path:r});if(o){var i=o.matched,s=i[i.length-1];return e.params=o.params,c(s,e)}return c(null,e)}function c(t,e,n){return t&&t.redirect?s(t,n||e):t&&t.matchAs?u(t,e,t.matchAs):f(t,e,n,o)}var l=F(t),p=l.pathList,d=l.pathMap,h=l.nameMap;return{match:a,addRoutes:i}}function J(t,e,n){var r=e.match(t);if(!r)return!1;if(!n)return!0;for(var o=1,i=r.length;o<i;++o){var a=t.keys[o-1],s="string"==typeof r[o]?decodeURIComponent(r[o]):r[o];a&&(n[a.name]=s)}return!0}function K(t,e){return w(t,e.parent?e.parent.path:"/",!0)}function G(){window.history.replaceState({key:it()},""),window.addEventListener("popstate",function(t){X(),t.state&&t.state.key&&at(t.state.key)})}function W(t,r,o,i){if(t.app){var a=t.options.scrollBehavior;a&&("production"!==e.env.NODE_ENV&&n("function"==typeof a,"scrollBehavior must be a function"),t.app.$nextTick(function(){var t=Y(),s=a(r,o,i?t:null);s&&("function"==typeof s.then?s.then(function(e){rt(e,t)}).catch(function(t){"production"!==e.env.NODE_ENV&&n(!1,t.toString())}):rt(s,t))}))}}function X(){var t=it();t&&(ee[t]={x:window.pageXOffset,y:window.pageYOffset})}function Y(){var t=it();if(t)return ee[t]}function Z(t,e){var n=document.documentElement,r=n.getBoundingClientRect(),o=t.getBoundingClientRect();return{x:o.left-r.left-e.x,y:o.top-r.top-e.y}}function Q(t){return nt(t.x)||nt(t.y)}function tt(t){return{x:nt(t.x)?t.x:window.pageXOffset,y:nt(t.y)?t.y:window.pageYOffset}}function et(t){return{x:nt(t.x)?t.x:0,y:nt(t.y)?t.y:0}}function nt(t){return"number"==typeof t}function rt(t,e){var n="object"==typeof t;if(n&&"string"==typeof t.selector){var r=document.querySelector(t.selector);if(r){var o=t.offset&&"object"==typeof t.offset?t.offset:{};o=et(o),e=Z(r,o)}else Q(t)&&(e=tt(t))}else n&&Q(t)&&(e=tt(t));e&&window.scrollTo(e.x,e.y)}function ot(){return re.now().toFixed(3)}function it(){return oe}function at(t){oe=t}function st(t,e){X();var n=window.history;try{e?n.replaceState({key:oe},"",t):(oe=ot(),n.pushState({key:oe},"",t))}catch(n){window.location[e?"replace":"assign"](t)}}function ut(t){st(t,!0)}function ct(t,e,n){var r=function(o){o>=t.length?n():t[o]?e(t[o],function(){r(o+1)}):r(o+1)};r(0)}function ft(t){return function(n,i,a){var s=!1,u=0,c=null;lt(t,function(t,n,i,f){if("function"==typeof t&&void 0===t.cid){s=!0,u++;var l,p=ht(function(e){dt(e)&&(e=e.default),t.resolved="function"==typeof e?e:Rt.extend(e),i.components[f]=e,u--,u<=0&&a()}),d=ht(function(t){var n="Failed to resolve async component "+f+": "+t;"production"!==e.env.NODE_ENV&&r(!1,n),c||(c=o(t)?t:new Error(n),a(c))});try{l=t(p,d)}catch(t){d(t)}if(l)if("function"==typeof l.then)l.then(p,d);else{var h=l.component;h&&"function"==typeof h.then&&h.then(p,d)}}}),s||a()}}function lt(t,e){return pt(t.map(function(t){return Object.keys(t.components).map(function(n){return e(t.components[n],t.instances[n],t,n)})}))}function pt(t){return Array.prototype.concat.apply([],t)}function dt(t){return t.__esModule||ie&&"Module"===t[Symbol.toStringTag]}function ht(t){var e=!1;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(!e)return e=!0,t.apply(this,n)}}function vt(t){if(!t)if(Jt){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function mt(t,e){var n,r=Math.max(t.length,e.length);for(n=0;n<r&&t[n]===e[n];n++);return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}function yt(t,e,n,r){var o=lt(t,function(t,r,o,i){var a=gt(t,e);if(a)return Array.isArray(a)?a.map(function(t){return n(t,r,o,i)}):n(a,r,o,i)});return pt(r?o.reverse():o)}function gt(t,e){return"function"!=typeof t&&(t=Rt.extend(t)),t.options[e]}function _t(t){return yt(t,"beforeRouteLeave",wt,!0)}function bt(t){return yt(t,"beforeRouteUpdate",wt)}function wt(t,e){if(e)return function(){return t.apply(e,arguments)}}function xt(t,e,n){return yt(t,"beforeRouteEnter",function(t,r,o,i){return $t(t,o,i,e,n)})}function $t(t,e,n,r,o){return function(i,a,s){return t(i,a,function(t){s(t),"function"==typeof t&&r.push(function(){kt(t,e.instances,n,o)})})}}function kt(t,e,n,r){e[n]?t(e[n]):r()&&setTimeout(function(){kt(t,e,n,r)},16)}function Ct(t){var e=window.location.pathname;return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}function At(t){var e=Ct(t);if(!/^\/#/.test(e))return window.location.replace($(t+"/#"+e)),!0}function Ot(){var t=Et();return"/"===t.charAt(0)||(jt("/"+t),!1)}function Et(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.slice(e+1)}function St(t){var e=window.location.href,n=e.indexOf("#"),r=n>=0?e.slice(0,n):e;return r+"#"+t}function Tt(t){ne?st(St(t)):window.location.hash=t}function jt(t){ne?ut(St(t)):window.location.replace(St(t))}function Nt(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Mt(t,e,n){var r="hash"===n?"#"+e:e;return t?$(t+"/"+r):r}var Rt,Lt={name:"router-view",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,r=e.children,o=e.parent,s=e.data;s.routerView=!0;for(var u=o.$createElement,c=n.name,f=o.$route,l=o._routerViewCache||(o._routerViewCache={}),p=0,d=!1;o&&o._routerRoot!==o;)o.$vnode&&o.$vnode.data.routerView&&p++,o._inactive&&(d=!0),o=o.$parent;if(s.routerViewDepth=p,d)return u(l[c],s,r);var h=f.matched[p];if(!h)return l[c]=null,u();var v=l[c]=h.components[c];s.registerRouteInstance=function(t,e){var n=h.instances[c];(e&&n!==t||!e&&n===t)&&(h.instances[c]=e)},(s.hook||(s.hook={})).prepatch=function(t,e){h.instances[c]=e.componentInstance};var m=s.props=i(f,h.props&&h.props[c]);if(m){m=s.props=a({},m);var y=s.attrs=s.attrs||{};for(var g in m)v.props&&g in v.props||(y[g]=m[g],delete m[g])}return u(v,s,r)}},Dt=/[!'()*]/g,It=function(t){return"%"+t.charCodeAt(0).toString(16)},Pt=/%2C/g,Ft=function(t){return encodeURIComponent(t).replace(Dt,It).replace(Pt,",")},Vt=decodeURIComponent,Ut=/\/?$/,Bt=f(null,{path:"/"}),Ht=[String,Object],qt=[String,Array],zt={name:"router-link",props:{to:{type:Ht,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:qt,default:"click"}},render:function(t){var e=this,n=this.$router,r=this.$route,o=n.resolve(this.to,r,this.append),i=o.location,a=o.route,s=o.href,u={},c=n.options.linkActiveClass,l=n.options.linkExactActiveClass,p=null==c?"router-link-active":c,d=null==l?"router-link-exact-active":l,v=null==this.activeClass?p:this.activeClass,y=null==this.exactActiveClass?d:this.exactActiveClass,b=i.path?f(null,i,null,n):a;u[y]=h(r,b),u[v]=this.exact?u[y]:m(r,b);var w=function(t){g(t)&&(e.replace?n.replace(i):n.push(i))},x={click:g};Array.isArray(this.event)?this.event.forEach(function(t){x[t]=w}):x[this.event]=w;var $={class:u};if("a"===this.tag)$.on=x,$.attrs={href:s};else{var k=_(this.$slots.default);if(k){k.isStatic=!1;var C=Rt.util.extend,A=k.data=C({},k.data);A.on=x;var O=k.data.attrs=C({},k.data.attrs);O.href=s}else $.on=x}return t(this.tag,$,this.$slots.default)}},Jt="undefined"!=typeof window,Kt=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Gt=I,Wt=k,Xt=C,Yt=E,Zt=D,Qt=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Gt.parse=Wt,Gt.compile=Xt,Gt.tokensToFunction=Yt,Gt.tokensToRegExp=Zt;var te=Object.create(null),ee=Object.create(null),ne=Jt&&function(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")===-1&&t.indexOf("Android 4.0")===-1||t.indexOf("Mobile Safari")===-1||t.indexOf("Chrome")!==-1||t.indexOf("Windows Phone")!==-1)&&(window.history&&"pushState"in window.history)}(),re=Jt&&window.performance&&window.performance.now?window.performance:Date,oe=ot(),ie="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ae=function(t,e){this.router=t,this.base=vt(e),this.current=Bt,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};ae.prototype.listen=function(t){this.cb=t},ae.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},ae.prototype.onError=function(t){this.errorCbs.push(t)},ae.prototype.transitionTo=function(t,e,n){var r=this,o=this.router.match(t,this.current);this.confirmTransition(o,function(){r.updateRoute(o),e&&e(o),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach(function(t){t(o)}))},function(t){n&&n(t),t&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach(function(e){e(t)}))})},ae.prototype.confirmTransition=function(t,e,n){var i=this,a=this.current,s=function(t){o(t)&&(i.errorCbs.length?i.errorCbs.forEach(function(e){e(t)}):(r(!1,"uncaught error during route navigation:"),console.error(t))),n&&n(t)};if(h(t,a)&&t.matched.length===a.matched.length)return this.ensureURL(),s();var u=mt(this.current.matched,t.matched),c=u.updated,f=u.deactivated,l=u.activated,p=[].concat(_t(f),this.router.beforeHooks,bt(c),l.map(function(t){return t.beforeEnter}),ft(l));this.pending=t;var d=function(e,n){if(i.pending!==t)return s();try{e(t,a,function(t){t===!1||o(t)?(i.ensureURL(!0),s(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(s(),"object"==typeof t&&t.replace?i.replace(t):i.push(t)):n(t)})}catch(t){s(t)}};ct(p,d,function(){var n=[],r=function(){return i.current===t},o=xt(l,n,r),a=o.concat(i.router.resolveHooks);ct(a,d,function(){return i.pending!==t?s():(i.pending=null,e(t),void(i.router.app&&i.router.app.$nextTick(function(){n.forEach(function(t){t()})})))})})},ae.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(n){n&&n(t,e)})};var se=function(t){function e(e,n){var r=this;t.call(this,e,n);var o=e.options.scrollBehavior;o&&G();var i=Ct(this.base);window.addEventListener("popstate",function(t){var n=r.current,a=Ct(r.base);r.current===Bt&&a===i||r.transitionTo(a,function(t){o&&W(e,t,n,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var r=this,o=this,i=o.current;this.transitionTo(t,function(t){st($(r.base+t.fullPath)),W(r.router,t,i,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this,o=this,i=o.current;this.transitionTo(t,function(t){ut($(r.base+t.fullPath)),W(r.router,t,i,!1),e&&e(t)},n)},e.prototype.ensureURL=function(t){if(Ct(this.base)!==this.current.fullPath){var e=$(this.base+this.current.fullPath);t?st(e):ut(e)}},e.prototype.getCurrentLocation=function(){return Ct(this.base)},e}(ae),ue=function(t){function e(e,n,r){t.call(this,e,n),r&&At(this.base)||Ot()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router,n=e.options.scrollBehavior,r=ne&&n;r&&G(),window.addEventListener(ne?"popstate":"hashchange",function(){var e=t.current;Ot()&&t.transitionTo(Et(),function(n){r&&W(t.router,n,e,!0),ne||jt(n.fullPath)})})},e.prototype.push=function(t,e,n){var r=this,o=this,i=o.current;this.transitionTo(t,function(t){Tt(t.fullPath),W(r.router,t,i,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this,o=this,i=o.current;this.transitionTo(t,function(t){jt(t.fullPath),W(r.router,t,i,!1),e&&e(t)},n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;Et()!==e&&(t?Tt(e):jt(e))},e.prototype.getCurrentLocation=function(){return Et()},e}(ae),ce=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var r=this;this.transitionTo(t,function(t){r.stack=r.stack.slice(0,r.index+1).concat(t),r.index++,e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this;this.transitionTo(t,function(t){r.stack=r.stack.slice(0,r.index).concat(t),e&&e(t)},n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,function(){e.index=n,e.updateRoute(r)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(ae),fe=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=z(t.routes||[],this);var r=t.mode||"hash";switch(this.fallback="history"===r&&!ne&&t.fallback!==!1,this.fallback&&(r="hash"),Jt||(r="abstract"),this.mode=r,r){case"history":this.history=new se(this,t.base);break;case"hash":this.history=new ue(this,t.base,this.fallback);break;case"abstract":this.history=new ce(this,t.base);break;default:"production"!==e.env.NODE_ENV&&n(!1,"invalid mode: "+r)}},le={currentRoute:{configurable:!0}};fe.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},le.currentRoute.get=function(){return this.history&&this.history.current},fe.prototype.init=function(t){var r=this;if("production"!==e.env.NODE_ENV&&n(b.installed,"not installed. Make sure to call `Vue.use(VueRouter)` before creating root instance."),this.apps.push(t),!this.app){this.app=t;var o=this.history;if(o instanceof se)o.transitionTo(o.getCurrentLocation());else if(o instanceof ue){var i=function(){o.setupListeners()};o.transitionTo(o.getCurrentLocation(),i,i)}o.listen(function(t){r.apps.forEach(function(e){e._route=t})})}},fe.prototype.beforeEach=function(t){return Nt(this.beforeHooks,t)},fe.prototype.beforeResolve=function(t){return Nt(this.resolveHooks,t)},fe.prototype.afterEach=function(t){return Nt(this.afterHooks,t)},fe.prototype.onReady=function(t,e){this.history.onReady(t,e)},fe.prototype.onError=function(t){this.history.onError(t)},fe.prototype.push=function(t,e,n){this.history.push(t,e,n)},fe.prototype.replace=function(t,e,n){this.history.replace(t,e,n)},fe.prototype.go=function(t){this.history.go(t)},fe.prototype.back=function(){this.go(-1)},fe.prototype.forward=function(){this.go(1)},fe.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},fe.prototype.resolve=function(t,e,n){var r=H(t,e||this.history.current,n,this),o=this.match(r,e),i=o.redirectedFrom||o.fullPath,a=this.history.base,s=Mt(a,i,this.mode);return{location:r,route:o,href:s,normalizedTo:r,resolved:o}},fe.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==Bt&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(fe.prototype,le),fe.install=b,fe.version="3.0.1",Jt&&window.Vue&&window.Vue.use(fe),t.exports=fe}).call(e,n(3))},function(t,e,n){t.exports=n(9)},function(t,e,n){"use strict";function r(t){var e=new a(t),n=i(a.prototype.request,e);return o.extend(n,a.prototype,e),o.extend(n,e),n}var o=n(10),i=n(11),a=n(13),s=n(14),u=r(s);u.Axios=a,u.create=function(t){return r(o.merge(s,t))},u.Cancel=n(31),u.CancelToken=n(32),u.isCancel=n(28),u.all=function(t){return Promise.all(t)},u.spread=n(33),t.exports=u,t.exports.default=u},function(t,e,n){"use strict";function r(t){return"[object Array]"===k.call(t)}function o(t){return"[object ArrayBuffer]"===k.call(t)}function i(t){return"undefined"!=typeof FormData&&t instanceof FormData}function a(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function s(t){return"string"==typeof t}function u(t){return"number"==typeof t}function c(t){return"undefined"==typeof t}function f(t){return null!==t&&"object"==typeof t}function l(t){return"[object Date]"===k.call(t)}function p(t){return"[object File]"===k.call(t)}function d(t){return"[object Blob]"===k.call(t)}function h(t){return"[object Function]"===k.call(t)}function v(t){return f(t)&&h(t.pipe)}function m(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function y(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function _(t,e){if(null!==t&&"undefined"!=typeof t)if("object"!=typeof t&&(t=[t]),r(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function b(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=b(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)_(arguments[n],t);return e}function w(t,e,n){return _(e,function(e,r){n&&"function"==typeof e?t[r]=x(e,n):t[r]=e}),t}var x=n(11),$=n(12),k=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:o,isBuffer:$,isFormData:i,isArrayBufferView:a,isString:s,isNumber:u,isObject:f,isUndefined:c,isDate:l,isFile:p,isBlob:d,isFunction:h,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:g,forEach:_,merge:b,extend:w,trim:y}},function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */
t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function r(t){this.defaults=t,this.interceptors={request:new a,response:new a}}var o=n(14),i=n(10),a=n(25),s=n(26);r.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),t=i.merge(o,{method:"get"},this.defaults,t),t.method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head","options"],function(t){r.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function o(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(16):"undefined"!=typeof e&&(t=n(16)),t}var i=n(10),a=n(15),s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:o(),transformRequest:[function(t,e){return a(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){u.headers[t]={}}),i.forEach(["post","put","patch"],function(t){u.headers[t]=i.merge(s)}),t.exports=u}).call(e,n(3))},function(t,e,n){"use strict";var r=n(10);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){(function(e){"use strict";var r=n(10),o=n(17),i=n(20),a=n(21),s=n(22),u=n(18),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(23);t.exports=function(t){return new Promise(function(f,l){var p=t.data,d=t.headers;r.isFormData(p)&&delete d["Content-Type"];var h=new XMLHttpRequest,v="onreadystatechange",m=!1;if("test"===e.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(t.url)||(h=new window.XDomainRequest,v="onload",m=!0,h.onprogress=function(){},h.ontimeout=function(){}),t.auth){var y=t.auth.username||"",g=t.auth.password||"";d.Authorization="Basic "+c(y+":"+g)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h[v]=function(){if(h&&(4===h.readyState||m)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?h.response:h.responseText,r={data:n,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:e,config:t,request:h};o(f,l,r),h=null}},h.onerror=function(){l(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var _=n(24),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?_.read(t.xsrfCookieName):void 0;b&&(d[t.xsrfHeaderName]=b)}if("setRequestHeader"in h&&r.forEach(d,function(t,e){"undefined"==typeof p&&"content-type"===e.toLowerCase()?delete d[e]:h.setRequestHeader(e,t)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){h&&(h.abort(),l(t),h=null)}),void 0===p&&(p=null),h.send(p)})}}).call(e,n(3))},function(t,e,n){"use strict";var r=n(18);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";var r=n(19);t.exports=function(t,e,n,o,i){var a=new Error(t);return r(a,e,n,o,i)}},function(t,e){"use strict";t.exports=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(10);t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(o.isURLSearchParams(e))i=e.toString();else{var a=[];o.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(o.isArray(t)?e+="[]":t=[t],o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),i=a.join("&")}return i&&(t+=(t.indexOf("?")===-1?"?":"&")+i),t}},function(t,e,n){"use strict";var r=n(10),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,a={};return t?(r.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;"set-cookie"===e?a[e]=(a[e]?a[e]:[]).concat([n]):a[e]=a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var r=n(10);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return e=t(window.location.href),function(n){var o=r.isString(n)?t(n):n;return o.protocol===e.protocol&&o.host===e.host}}():function(){return function(){return!0}}()},function(t,e){"use strict";function n(){this.message="String contains an invalid character"}function r(t){for(var e,r,i=String(t),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&e>>8-s%1*8)){if(r=i.charCodeAt(s+=.75),r>255)throw new n;e=e<<8|r}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=r},function(t,e,n){"use strict";var r=n(10);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var o=n(10);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";function r(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var o=n(10),i=n(27),a=n(28),s=n(14),u=n(29),c=n(30);t.exports=function(t){r(t),t.baseURL&&!u(t.url)&&(t.url=c(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=t.adapter||s.adapter;return e(t).then(function(e){return r(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(r(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(10);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,n){"use strict";function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new o(t),e(n.reason))})}var o=n(31);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t,e=new r(function(e){t=e});return{token:e,cancel:t}},t.exports=r},function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=r(o),a=n(35),s=r(a);i.default.use(s.default);var u={loadStatus:!1},c={LOAD_STATUS:function(t,e){t.loadStatus=e}};e.default=new s.default.Store({state:u,mutations:c})},function(t,e,n){(function(e){/**
	 * vuex v3.0.1
	 * (c) 2017 Evan You
	 * @license MIT
	 */
"use strict";function n(t){O&&(t._devtoolHook=O,O.emit("vuex:init",t),O.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(t,e){O.emit("vuex:mutation",t,e)}))}function r(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function o(t){return null!==t&&"object"==typeof t}function i(t){return t&&"function"==typeof t.then}function a(t,e){if(!t)throw new Error("[vuex] "+e)}function s(t,n,r){if("production"!==e.env.NODE_ENV&&u(t,r),n.update(r),r.modules)for(var o in r.modules){if(!n.getChild(o))return void("production"!==e.env.NODE_ENV&&console.warn("[vuex] trying to add a new module '"+o+"' on hot reloading, manual reload is needed"));s(t.concat(o),n.getChild(o),r.modules[o])}}function u(t,e){Object.keys(R).forEach(function(n){if(e[n]){var o=R[n];r(e[n],function(e,r){a(o.assert(e),c(t,n,r,e,o.expected))})}})}function c(t,e,n,r,o){var i=e+" should be "+o+' but "'+e+"."+n+'"';return t.length>0&&(i+=' in module "'+t.join(".")+'"'),i+=" is "+JSON.stringify(r)+"."}function f(t,e){return e.indexOf(t)<0&&e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function l(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;d(t,n,[],t._modules.root,!0),p(t,n,e)}function p(t,e,n){var o=t._vm;t.getters={};var i=t._wrappedGetters,a={};r(i,function(e,n){a[n]=function(){return e(t)},Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})});var s=j.config.silent;j.config.silent=!0,t._vm=new j({data:{$$state:e},computed:a}),j.config.silent=s,t.strict&&_(t),o&&(n&&t._withCommit(function(){o._data.$$state=null}),j.nextTick(function(){return o.$destroy()}))}function d(t,e,n,r,o){var i=!n.length,a=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[a]=r),!i&&!o){var s=b(e,n.slice(0,-1)),u=n[n.length-1];t._withCommit(function(){j.set(s,u,r.state)})}var c=r.context=h(t,a,n);r.forEachMutation(function(e,n){var r=a+n;m(t,r,e,c)}),r.forEachAction(function(e,n){var r=e.root?n:a+n,o=e.handler||e;y(t,r,o,c)}),r.forEachGetter(function(e,n){var r=a+n;g(t,r,e,c)}),r.forEachChild(function(r,i){d(t,e,n.concat(i),r,o)})}function h(t,n,r){var o=""===n,i={dispatch:o?t.dispatch:function(r,o,i){var a=w(r,o,i),s=a.payload,u=a.options,c=a.type;return u&&u.root||(c=n+c,"production"===e.env.NODE_ENV||t._actions[c])?t.dispatch(c,s):void console.error("[vuex] unknown local action type: "+a.type+", global type: "+c)},commit:o?t.commit:function(r,o,i){var a=w(r,o,i),s=a.payload,u=a.options,c=a.type;return u&&u.root||(c=n+c,"production"===e.env.NODE_ENV||t._mutations[c])?void t.commit(c,s,u):void console.error("[vuex] unknown local mutation type: "+a.type+", global type: "+c)}};return Object.defineProperties(i,{getters:{get:o?function(){return t.getters}:function(){return v(t,n)}},state:{get:function(){return b(t.state,r)}}}),i}function v(t,e){var n={},r=e.length;return Object.keys(t.getters).forEach(function(o){if(o.slice(0,r)===e){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[o]},enumerable:!0})}}),n}function m(t,e,n,r){var o=t._mutations[e]||(t._mutations[e]=[]);o.push(function(e){n.call(t,r.state,e)})}function y(t,e,n,r){var o=t._actions[e]||(t._actions[e]=[]);o.push(function(e,o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e,o);return i(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(e){throw t._devtoolHook.emit("vuex:error",e),e}):a})}function g(t,n,r,o){return t._wrappedGetters[n]?void("production"!==e.env.NODE_ENV&&console.error("[vuex] duplicate getter key: "+n)):void(t._wrappedGetters[n]=function(t){return r(o.state,o.getters,t.state,t.getters)})}function _(t){t._vm.$watch(function(){return this._data.$$state},function(){"production"!==e.env.NODE_ENV&&a(t._committing,"Do not mutate vuex store state outside mutation handlers.")},{deep:!0,sync:!0})}function b(t,e){return e.length?e.reduce(function(t,e){return t[e]},t):t}function w(t,n,r){return o(t)&&t.type&&(r=n,n=t,t=t.type),"production"!==e.env.NODE_ENV&&a("string"==typeof t,"Expects string as the type, but found "+typeof t+"."),{type:t,payload:n,options:r}}function x(t){return j&&t===j?void("production"!==e.env.NODE_ENV&&console.error("[vuex] already installed. Vue.use(Vuex) should be called only once.")):(j=t,void A(j))}function $(t){return Array.isArray(t)?t.map(function(t){return{key:t,val:t}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}})}function k(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function C(t,n,r){var o=t._modulesNamespaceMap[r];return"production"===e.env.NODE_ENV||o||console.error("[vuex] module namespace not found in "+n+"(): "+r),o}var A=function(t){function e(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}var n=Number(t.version.split(".")[0]);if(n>=2)t.mixin({beforeCreate:e});else{var r=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[e].concat(t.init):e,r.call(this,t)}}},O="undefined"!=typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,E=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},S={namespaced:{configurable:!0}};S.namespaced.get=function(){return!!this._rawModule.namespaced},E.prototype.addChild=function(t,e){this._children[t]=e},E.prototype.removeChild=function(t){delete this._children[t]},E.prototype.getChild=function(t){return this._children[t]},E.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},E.prototype.forEachChild=function(t){r(this._children,t)},E.prototype.forEachGetter=function(t){this._rawModule.getters&&r(this._rawModule.getters,t)},E.prototype.forEachAction=function(t){this._rawModule.actions&&r(this._rawModule.actions,t)},E.prototype.forEachMutation=function(t){this._rawModule.mutations&&r(this._rawModule.mutations,t)},Object.defineProperties(E.prototype,S);var T=function(t){this.register([],t,!1)};T.prototype.get=function(t){return t.reduce(function(t,e){return t.getChild(e)},this.root)},T.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")},"")},T.prototype.update=function(t){s([],this.root,t)},T.prototype.register=function(t,n,o){var i=this;void 0===o&&(o=!0),"production"!==e.env.NODE_ENV&&u(t,n);var a=new E(n,o);if(0===t.length)this.root=a;else{var s=this.get(t.slice(0,-1));s.addChild(t[t.length-1],a)}n.modules&&r(n.modules,function(e,n){i.register(t.concat(n),e,o)})},T.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];e.getChild(n).runtime&&e.removeChild(n)};var j,N={assert:function(t){return"function"==typeof t},expected:"function"},M={assert:function(t){return"function"==typeof t||"object"==typeof t&&"function"==typeof t.handler},expected:'function or object with "handler" function'},R={getters:N,mutations:N,actions:M},L=function t(r){var o=this;void 0===r&&(r={}),!j&&"undefined"!=typeof window&&window.Vue&&x(window.Vue),"production"!==e.env.NODE_ENV&&(a(j,"must call Vue.use(Vuex) before creating a store instance."),a("undefined"!=typeof Promise,"vuex requires a Promise polyfill in this browser."),a(this instanceof t,"Store must be called with the new operator."));var i=r.plugins;void 0===i&&(i=[]);var s=r.strict;void 0===s&&(s=!1);var u=r.state;void 0===u&&(u={}),"function"==typeof u&&(u=u()||{}),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new T(r),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new j;var c=this,f=this,l=f.dispatch,h=f.commit;this.dispatch=function(t,e){return l.call(c,t,e)},this.commit=function(t,e,n){return h.call(c,t,e,n)},this.strict=s,d(this,u,[],this._modules.root),p(this,u),i.forEach(function(t){return t(o)}),j.config.devtools&&n(this)},D={state:{configurable:!0}};D.state.get=function(){return this._vm._data.$$state},D.state.set=function(t){"production"!==e.env.NODE_ENV&&a(!1,"Use store.replaceState() to explicit replace store state.")},L.prototype.commit=function(t,n,r){var o=this,i=w(t,n,r),a=i.type,s=i.payload,u=i.options,c={type:a,payload:s},f=this._mutations[a];return f?(this._withCommit(function(){f.forEach(function(t){t(s)})}),this._subscribers.forEach(function(t){return t(c,o.state)}),void("production"!==e.env.NODE_ENV&&u&&u.silent&&console.warn("[vuex] mutation type: "+a+". Silent option has been removed. Use the filter functionality in the vue-devtools"))):void("production"!==e.env.NODE_ENV&&console.error("[vuex] unknown mutation type: "+a))},L.prototype.dispatch=function(t,n){var r=this,o=w(t,n),i=o.type,a=o.payload,s={type:i,payload:a},u=this._actions[i];return u?(this._actionSubscribers.forEach(function(t){return t(s,r.state)}),u.length>1?Promise.all(u.map(function(t){return t(a)})):u[0](a)):void("production"!==e.env.NODE_ENV&&console.error("[vuex] unknown action type: "+i))},L.prototype.subscribe=function(t){return f(t,this._subscribers)},L.prototype.subscribeAction=function(t){return f(t,this._actionSubscribers)},L.prototype.watch=function(t,n,r){var o=this;return"production"!==e.env.NODE_ENV&&a("function"==typeof t,"store.watch only accepts a function."),this._watcherVM.$watch(function(){return t(o.state,o.getters)},n,r)},L.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._vm._data.$$state=t})},L.prototype.registerModule=function(t,n,r){void 0===r&&(r={}),"string"==typeof t&&(t=[t]),"production"!==e.env.NODE_ENV&&(a(Array.isArray(t),"module path must be a string or an Array."),a(t.length>0,"cannot register the root module by using registerModule.")),this._modules.register(t,n),d(this,this.state,t,this._modules.get(t),r.preserveState),p(this,this.state)},L.prototype.unregisterModule=function(t){var n=this;"string"==typeof t&&(t=[t]),"production"!==e.env.NODE_ENV&&a(Array.isArray(t),"module path must be a string or an Array."),this._modules.unregister(t),this._withCommit(function(){var e=b(n.state,t.slice(0,-1));j.delete(e,t[t.length-1])}),l(this)},L.prototype.hotUpdate=function(t){this._modules.update(t),l(this,!0)},L.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(L.prototype,D);var I=k(function(t,e){var n={};return $(e).forEach(function(e){var r=e.key,o=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=C(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"==typeof o?o.call(this,e,n):e[o]},n[r].vuex=!0}),n}),P=k(function(t,e){var n={};return $(e).forEach(function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.commit;if(t){var i=C(this.$store,"mapMutations",t);if(!i)return;r=i.context.commit}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}}),n}),F=k(function(t,n){var r={};return $(n).forEach(function(n){var o=n.key,i=n.val;i=t+i,r[o]=function(){if(!t||C(this.$store,"mapGetters",t))return"production"===e.env.NODE_ENV||i in this.$store.getters?this.$store.getters[i]:void console.error("[vuex] unknown getter: "+i)},r[o].vuex=!0}),r}),V=k(function(t,e){var n={};return $(e).forEach(function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var i=C(this.$store,"mapActions",t);if(!i)return;r=i.context.dispatch}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}}),n}),U=function(t){return{mapState:I.bind(null,t),mapGetters:F.bind(null,t),mapMutations:P.bind(null,t),mapActions:V.bind(null,t)}},B={Store:L,install:x,version:"3.0.1",mapState:I,mapMutations:P,mapGetters:F,mapActions:V,createNamespacedHelpers:U};t.exports=B}).call(e,n(3))},function(t,e,n){var r,o;r=n(37);var i=n(48);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(38);var o=n(4),i=r(o),a=n(42),s=r(a);i.default.component("loading",s.default),e.default={data:function(){return{title:"Hello World"}}}},function(t,e){},,,,function(t,e,n){var r,o;r=n(43);var i=n(47);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(44);var o=n(34),i=r(o);e.default={computed:{loadStatus:function(){return i.default.state.loadStatus}}}},function(t,e){},,,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loadStatus?n("div",{staticClass:"loading"}):t._e()},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("h1",[t._v(t._s(t.title))]),t._v(" "),n("router-view",{attrs:{"keep-alive":""}}),t._v(" "),n("loading")],1)},staticRenderFns:[]}},function(t,e,n){var r,o;r=n(50);var i=n(53);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(51);var o=n(34),i=r(o);e.default={methods:{showLoading:function(){i.default.commit("LOAD_STATUS",!0)}}}},function(t,e){},,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showLoading()}}},[t._v("loading")])])},staticRenderFns:[]}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGE4NWI0OTk2N2Y5ZDRmNDRjOTYyIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2VzNi1wcm9taXNlL2F1dG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9lczYtcHJvbWlzZS9kaXN0L2VzNi1wcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vdnVlL2Rpc3QvdnVlLmpzIiwid2VicGFjazovLy8uL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi92dWUtcm91dGVyL2Rpc3QvdnVlLXJvdXRlci5jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9heGlvcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9pcy1idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9BeGlvcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9lbmhhbmNlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2J0b2EuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9pc0Fic29sdXRlVVJMLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Z1ZXgvc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi92dWV4L2Rpc3QvdnVleC5jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC52dWUiLCJ3ZWJwYWNrOi8vL2FwcC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbG9hZGluZy52dWUiLCJ3ZWJwYWNrOi8vL2xvYWRpbmcudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xvYWRpbmcudnVlPzY0MDQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC52dWU/YTk5MSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9pbmRleC9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9pbmRleC9pbmRleC52dWU/MmEwNCJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfdnVlIiwiX3Z1ZTIiLCJfdnVlUm91dGVyIiwiX3Z1ZVJvdXRlcjIiLCJfYXhpb3MiLCJfYXhpb3MyIiwiX3N0b3JlIiwiX3N0b3JlMiIsIl9hcHAiLCJfYXBwMiIsIl9pbmRleCIsIl9pbmRleDIiLCJ1c2UiLCJwcm90b3R5cGUiLCIkaHR0cCIsIl9yb3V0ZXMiLCJwYXRoIiwibmFtZSIsImNvbXBvbmVudCIsInJlZGlyZWN0Iiwicm91dGVyIiwicm91dGVzIiwiZWwiLCJzdG9yZSIsInJlbmRlciIsImgiLCIkbW91bnQiLCJwb2x5ZmlsbCIsInByb2Nlc3MiLCJnbG9iYWwiLCJmYWN0b3J5IiwidGhpcyIsIm9iamVjdE9yRnVuY3Rpb24iLCJ4IiwidHlwZSIsImlzRnVuY3Rpb24iLCJzZXRTY2hlZHVsZXIiLCJzY2hlZHVsZUZuIiwiY3VzdG9tU2NoZWR1bGVyRm4iLCJzZXRBc2FwIiwiYXNhcEZuIiwiYXNhcCIsInVzZU5leHRUaWNrIiwibmV4dFRpY2siLCJmbHVzaCIsInVzZVZlcnR4VGltZXIiLCJ2ZXJ0eE5leHQiLCJ1c2VTZXRUaW1lb3V0IiwidXNlTXV0YXRpb25PYnNlcnZlciIsIml0ZXJhdGlvbnMiLCJvYnNlcnZlciIsIkJyb3dzZXJNdXRhdGlvbk9ic2VydmVyIiwibm9kZSIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJvYnNlcnZlIiwiY2hhcmFjdGVyRGF0YSIsImRhdGEiLCJ1c2VNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwib25tZXNzYWdlIiwicG9ydDIiLCJwb3N0TWVzc2FnZSIsImdsb2JhbFNldFRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaSIsImxlbiIsImNhbGxiYWNrIiwicXVldWUiLCJhcmciLCJ1bmRlZmluZWQiLCJhdHRlbXB0VmVydHgiLCJ2ZXJ0eCIsIkZ1bmN0aW9uIiwicmVxdWlyZSIsInJ1bk9uTG9vcCIsInJ1bk9uQ29udGV4dCIsImUiLCJ0aGVuIiwib25GdWxmaWxsbWVudCIsIm9uUmVqZWN0aW9uIiwicGFyZW50IiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsIm5vb3AiLCJQUk9NSVNFX0lEIiwibWFrZVByb21pc2UiLCJfc3RhdGUiLCJhcmd1bWVudHMiLCJpbnZva2VDYWxsYmFjayIsIl9yZXN1bHQiLCJzdWJzY3JpYmUiLCJyZXNvbHZlJDEiLCJvYmplY3QiLCJDb25zdHJ1Y3RvciIsInByb21pc2UiLCJyZXNvbHZlIiwic2VsZkZ1bGZpbGxtZW50IiwiVHlwZUVycm9yIiwiY2Fubm90UmV0dXJuT3duIiwiZ2V0VGhlbiIsImVycm9yIiwiVFJZX0NBVENIX0VSUk9SIiwidHJ5VGhlbiIsInRoZW4kJDEiLCJ2YWx1ZSIsImZ1bGZpbGxtZW50SGFuZGxlciIsInJlamVjdGlvbkhhbmRsZXIiLCJoYW5kbGVGb3JlaWduVGhlbmFibGUiLCJ0aGVuYWJsZSIsInNlYWxlZCIsImZ1bGZpbGwiLCJyZWFzb24iLCJyZWplY3QiLCJfbGFiZWwiLCJoYW5kbGVPd25UaGVuYWJsZSIsIkZVTEZJTExFRCIsIlJFSkVDVEVEIiwiaGFuZGxlTWF5YmVUaGVuYWJsZSIsIm1heWJlVGhlbmFibGUiLCJwdWJsaXNoUmVqZWN0aW9uIiwiX29uZXJyb3IiLCJwdWJsaXNoIiwiUEVORElORyIsIl9zdWJzY3JpYmVycyIsImxlbmd0aCIsInN1YnNjcmliZXJzIiwic2V0dGxlZCIsImRldGFpbCIsInRyeUNhdGNoIiwiaGFzQ2FsbGJhY2siLCJzdWNjZWVkZWQiLCJmYWlsZWQiLCJpbml0aWFsaXplUHJvbWlzZSIsInJlc29sdmVyIiwibmV4dElkIiwidmFsaWRhdGlvbkVycm9yIiwiRXJyb3IiLCJhbGwiLCJlbnRyaWVzIiwiRW51bWVyYXRvciIsInJhY2UiLCJpc0FycmF5IiwiXyIsInJlamVjdCQxIiwibmVlZHNSZXNvbHZlciIsIm5lZWRzTmV3IiwibG9jYWwiLCJzZWxmIiwiUCIsIlByb21pc2UiLCJwcm9taXNlVG9TdHJpbmciLCJPYmplY3QiLCJ0b1N0cmluZyIsImNhc3QiLCJQcm9taXNlJDEiLCJfaXNBcnJheSIsIkFycmF5Iiwic2NoZWR1bGVGbHVzaCIsImJyb3dzZXJXaW5kb3ciLCJ3aW5kb3ciLCJicm93c2VyR2xvYmFsIiwiTXV0YXRpb25PYnNlcnZlciIsIldlYktpdE11dGF0aW9uT2JzZXJ2ZXIiLCJpc05vZGUiLCJpc1dvcmtlciIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiaW1wb3J0U2NyaXB0cyIsIk1hdGgiLCJyYW5kb20iLCJzdWJzdHJpbmciLCJpbnB1dCIsIl9pbnN0YW5jZUNvbnN0cnVjdG9yIiwiX3JlbWFpbmluZyIsIl9lbnVtZXJhdGUiLCJfZWFjaEVudHJ5IiwiZW50cnkiLCJyZXNvbHZlJCQxIiwiX3RoZW4iLCJfc2V0dGxlZEF0IiwiX3dpbGxTZXR0bGVBdCIsInN0YXRlIiwiZW51bWVyYXRvciIsImNhdGNoIiwiZmluYWxseSIsIl9zZXRTY2hlZHVsZXIiLCJfc2V0QXNhcCIsIl9hc2FwIiwiZGVmYXVsdFNldFRpbW91dCIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwiY29uY2F0IiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwicnVuIiwiSXRlbSIsImFycmF5IiwiYXJncyIsInB1c2giLCJhcHBseSIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsInNldEltbWVkaWF0ZSIsImlzVW5kZWYiLCJ2IiwiaXNEZWYiLCJpc1RydWUiLCJpc0ZhbHNlIiwiaXNQcmltaXRpdmUiLCJpc09iamVjdCIsInRvUmF3VHlwZSIsIl90b1N0cmluZyIsInNsaWNlIiwiaXNQbGFpbk9iamVjdCIsImlzUmVnRXhwIiwiaXNWYWxpZEFycmF5SW5kZXgiLCJ2YWwiLCJuIiwicGFyc2VGbG9hdCIsIlN0cmluZyIsImZsb29yIiwiaXNGaW5pdGUiLCJKU09OIiwic3RyaW5naWZ5IiwidG9OdW1iZXIiLCJpc05hTiIsIm1ha2VNYXAiLCJzdHIiLCJleHBlY3RzTG93ZXJDYXNlIiwibWFwIiwiY3JlYXRlIiwibGlzdCIsInNwbGl0IiwidG9Mb3dlckNhc2UiLCJyZW1vdmUiLCJhcnIiLCJpdGVtIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiaGFzT3duIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJjYWNoZWQiLCJmbiIsImNhY2hlIiwiaGl0IiwicG9seWZpbGxCaW5kIiwiY3R4IiwiYm91bmRGbiIsImEiLCJsIiwiX2xlbmd0aCIsIm5hdGl2ZUJpbmQiLCJiaW5kIiwidG9BcnJheSIsInN0YXJ0IiwicmV0IiwiZXh0ZW5kIiwidG8iLCJfZnJvbSIsInRvT2JqZWN0IiwicmVzIiwiYiIsImdlblN0YXRpY0tleXMiLCJyZWR1Y2UiLCJrZXlzIiwic3RhdGljS2V5cyIsImpvaW4iLCJsb29zZUVxdWFsIiwiaXNPYmplY3RBIiwiaXNPYmplY3RCIiwiaXNBcnJheUEiLCJpc0FycmF5QiIsImV2ZXJ5Iiwia2V5c0EiLCJrZXlzQiIsImxvb3NlSW5kZXhPZiIsImNhbGxlZCIsImlzUmVzZXJ2ZWQiLCJjaGFyQ29kZUF0IiwiZGVmIiwiZW51bWVyYWJsZSIsImRlZmluZVByb3BlcnR5Iiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJwYXJzZVBhdGgiLCJiYWlsUkUiLCJ0ZXN0Iiwic2VnbWVudHMiLCJpc05hdGl2ZSIsIkN0b3IiLCJwdXNoVGFyZ2V0IiwiX3RhcmdldCIsIkRlcCIsInRhcmdldCIsInRhcmdldFN0YWNrIiwicG9wVGFyZ2V0IiwicG9wIiwiY3JlYXRlVGV4dFZOb2RlIiwiVk5vZGUiLCJjbG9uZVZOb2RlIiwidm5vZGUiLCJjbG9uZWQiLCJ0YWciLCJjaGlsZHJlbiIsInRleHQiLCJlbG0iLCJjb250ZXh0IiwiY29tcG9uZW50T3B0aW9ucyIsImFzeW5jRmFjdG9yeSIsIm5zIiwiaXNTdGF0aWMiLCJpc0NvbW1lbnQiLCJmbkNvbnRleHQiLCJmbk9wdGlvbnMiLCJmblNjb3BlSWQiLCJpc0Nsb25lZCIsInRvZ2dsZU9ic2VydmluZyIsInNob3VsZE9ic2VydmUiLCJwcm90b0F1Z21lbnQiLCJzcmMiLCJfX3Byb3RvX18iLCJjb3B5QXVnbWVudCIsImFzUm9vdERhdGEiLCJvYiIsIl9fb2JfXyIsIk9ic2VydmVyIiwiaXNTZXJ2ZXJSZW5kZXJpbmciLCJpc0V4dGVuc2libGUiLCJfaXNWdWUiLCJ2bUNvdW50IiwiZGVmaW5lUmVhY3RpdmUiLCJjdXN0b21TZXR0ZXIiLCJzaGFsbG93IiwiZGVwIiwicHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXR0ZXIiLCJnZXQiLCJzZXR0ZXIiLCJzZXQiLCJjaGlsZE9iIiwiZGVwZW5kIiwiZGVwZW5kQXJyYXkiLCJuZXdWYWwiLCJub3RpZnkiLCJ3YXJuIiwibWF4IiwiZGVsIiwibWVyZ2VEYXRhIiwiZnJvbSIsInRvVmFsIiwiZnJvbVZhbCIsIm1lcmdlRGF0YU9yRm4iLCJwYXJlbnRWYWwiLCJjaGlsZFZhbCIsInZtIiwiaW5zdGFuY2VEYXRhIiwiZGVmYXVsdERhdGEiLCJtZXJnZUhvb2siLCJtZXJnZUFzc2V0cyIsImFzc2VydE9iamVjdFR5cGUiLCJjaGVja0NvbXBvbmVudHMiLCJvcHRpb25zIiwiY29tcG9uZW50cyIsInZhbGlkYXRlQ29tcG9uZW50TmFtZSIsImlzQnVpbHRJblRhZyIsImNvbmZpZyIsImlzUmVzZXJ2ZWRUYWciLCJub3JtYWxpemVQcm9wcyIsInByb3BzIiwiY2FtZWxpemUiLCJub3JtYWxpemVJbmplY3QiLCJpbmplY3QiLCJub3JtYWxpemVkIiwibm9ybWFsaXplRGlyZWN0aXZlcyIsImRpcnMiLCJkaXJlY3RpdmVzIiwidXBkYXRlIiwibWVyZ2VPcHRpb25zIiwibWVyZ2VGaWVsZCIsInN0cmF0Iiwic3RyYXRzIiwiZGVmYXVsdFN0cmF0IiwiZXh0ZW5kc0Zyb20iLCJleHRlbmRzIiwibWl4aW5zIiwicmVzb2x2ZUFzc2V0Iiwid2Fybk1pc3NpbmciLCJhc3NldHMiLCJjYW1lbGl6ZWRJZCIsIlBhc2NhbENhc2VJZCIsImNhcGl0YWxpemUiLCJ2YWxpZGF0ZVByb3AiLCJwcm9wT3B0aW9ucyIsInByb3BzRGF0YSIsInByb3AiLCJhYnNlbnQiLCJib29sZWFuSW5kZXgiLCJnZXRUeXBlSW5kZXgiLCJCb29sZWFuIiwiaHlwaGVuYXRlIiwic3RyaW5nSW5kZXgiLCJnZXRQcm9wRGVmYXVsdFZhbHVlIiwicHJldlNob3VsZE9ic2VydmUiLCJhc3NlcnRQcm9wIiwiJG9wdGlvbnMiLCJfcHJvcHMiLCJnZXRUeXBlIiwicmVxdWlyZWQiLCJ2YWxpZCIsImV4cGVjdGVkVHlwZXMiLCJhc3NlcnRlZFR5cGUiLCJhc3NlcnRUeXBlIiwiZXhwZWN0ZWRUeXBlIiwidmFsaWRhdG9yIiwic2ltcGxlQ2hlY2tSRSIsInQiLCJtYXRjaCIsImlzU2FtZVR5cGUiLCJoYW5kbGVFcnJvciIsImVyciIsImluZm8iLCJjdXIiLCIkcGFyZW50IiwiaG9va3MiLCJlcnJvckNhcHR1cmVkIiwiY2FwdHVyZSIsImdsb2JhbEhhbmRsZUVycm9yIiwiZXJyb3JIYW5kbGVyIiwibG9nRXJyb3IiLCJpbkJyb3dzZXIiLCJpbldlZXgiLCJjb25zb2xlIiwiZmx1c2hDYWxsYmFja3MiLCJwZW5kaW5nIiwiY29waWVzIiwiY2FsbGJhY2tzIiwid2l0aE1hY3JvVGFzayIsIl93aXRoVGFzayIsInVzZU1hY3JvVGFzayIsImNiIiwiX3Jlc29sdmUiLCJtYWNyb1RpbWVyRnVuYyIsIm1pY3JvVGltZXJGdW5jIiwidHJhdmVyc2UiLCJfdHJhdmVyc2UiLCJzZWVuT2JqZWN0cyIsImNsZWFyIiwic2VlbiIsImlzQSIsImlzRnJvemVuIiwiZGVwSWQiLCJoYXMiLCJhZGQiLCJjcmVhdGVGbkludm9rZXIiLCJmbnMiLCJpbnZva2VyIiwiYXJndW1lbnRzJDEiLCJ1cGRhdGVMaXN0ZW5lcnMiLCJvbGRPbiIsInJlbW92ZSQkMSIsIm9sZCIsImV2ZW50Iiwibm9ybWFsaXplRXZlbnQiLCJwYXNzaXZlIiwicGFyYW1zIiwibWVyZ2VWTm9kZUhvb2siLCJob29rS2V5IiwiaG9vayIsIndyYXBwZWRIb29rIiwib2xkSG9vayIsIm1lcmdlZCIsImV4dHJhY3RQcm9wc0Zyb21WTm9kZURhdGEiLCJhdHRycyIsImFsdEtleSIsImtleUluTG93ZXJDYXNlIiwidGlwIiwiZm9ybWF0Q29tcG9uZW50TmFtZSIsImNoZWNrUHJvcCIsImhhc2giLCJwcmVzZXJ2ZSIsInNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuIiwibm9ybWFsaXplQ2hpbGRyZW4iLCJub3JtYWxpemVBcnJheUNoaWxkcmVuIiwiaXNUZXh0Tm9kZSIsIm5lc3RlZEluZGV4IiwibGFzdEluZGV4IiwibGFzdCIsInNoaWZ0IiwiX2lzVkxpc3QiLCJlbnN1cmVDdG9yIiwiY29tcCIsImJhc2UiLCJoYXNTeW1ib2wiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImNyZWF0ZUFzeW5jUGxhY2Vob2xkZXIiLCJjcmVhdGVFbXB0eVZOb2RlIiwiYXN5bmNNZXRhIiwicmVzb2x2ZUFzeW5jQ29tcG9uZW50IiwiYmFzZUN0b3IiLCJlcnJvckNvbXAiLCJyZXNvbHZlZCIsImxvYWRpbmciLCJsb2FkaW5nQ29tcCIsImNvbnRleHRzIiwic3luYyIsImZvcmNlUmVuZGVyIiwiJGZvcmNlVXBkYXRlIiwiZGVsYXkiLCJpc0FzeW5jUGxhY2Vob2xkZXIiLCJnZXRGaXJzdENvbXBvbmVudENoaWxkIiwiaW5pdEV2ZW50cyIsIl9ldmVudHMiLCJfaGFzSG9va0V2ZW50IiwiX3BhcmVudExpc3RlbmVycyIsInVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyIsIiRvbmNlIiwiJG9uIiwicmVtb3ZlJDEiLCIkb2ZmIiwib2xkTGlzdGVuZXJzIiwiZXZlbnRzTWl4aW4iLCJWdWUiLCJob29rUkUiLCJ0aGlzJDEiLCJjYnMiLCJpJDEiLCIkZW1pdCIsImxvd2VyQ2FzZUV2ZW50IiwicmVzb2x2ZVNsb3RzIiwic2xvdHMiLCJzbG90IiwibmFtZSQxIiwiaXNXaGl0ZXNwYWNlIiwicmVzb2x2ZVNjb3BlZFNsb3RzIiwiaW5pdExpZmVjeWNsZSIsImFic3RyYWN0IiwiJGNoaWxkcmVuIiwiJHJvb3QiLCIkcmVmcyIsIl93YXRjaGVyIiwiX2luYWN0aXZlIiwiX2RpcmVjdEluYWN0aXZlIiwiX2lzTW91bnRlZCIsIl9pc0Rlc3Ryb3llZCIsIl9pc0JlaW5nRGVzdHJveWVkIiwibGlmZWN5Y2xlTWl4aW4iLCJfdXBkYXRlIiwiaHlkcmF0aW5nIiwiY2FsbEhvb2siLCJwcmV2RWwiLCIkZWwiLCJwcmV2Vm5vZGUiLCJfdm5vZGUiLCJwcmV2QWN0aXZlSW5zdGFuY2UiLCJhY3RpdmVJbnN0YW5jZSIsIl9fcGF0Y2hfXyIsIl9wYXJlbnRFbG0iLCJfcmVmRWxtIiwiX192dWVfXyIsIiR2bm9kZSIsIiRkZXN0cm95IiwidGVhcmRvd24iLCJfd2F0Y2hlcnMiLCJfZGF0YSIsIm1vdW50Q29tcG9uZW50IiwidGVtcGxhdGUiLCJjaGFyQXQiLCJ1cGRhdGVDb21wb25lbnQiLCJwZXJmb3JtYW5jZSIsIm1hcmsiLCJfbmFtZSIsIl91aWQiLCJzdGFydFRhZyIsImVuZFRhZyIsIl9yZW5kZXIiLCJtZWFzdXJlIiwiV2F0Y2hlciIsInVwZGF0ZUNoaWxkQ29tcG9uZW50IiwicGFyZW50Vm5vZGUiLCJyZW5kZXJDaGlsZHJlbiIsImlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCIsImhhc0NoaWxkcmVuIiwiX3JlbmRlckNoaWxkcmVuIiwic2NvcGVkU2xvdHMiLCIkc2NvcGVkU2xvdHMiLCJlbXB0eU9iamVjdCIsIl9wYXJlbnRWbm9kZSIsIiRhdHRycyIsIiRsaXN0ZW5lcnMiLCJwcm9wS2V5cyIsIl9wcm9wS2V5cyIsIiRzbG90cyIsImlzSW5JbmFjdGl2ZVRyZWUiLCJhY3RpdmF0ZUNoaWxkQ29tcG9uZW50IiwiZGlyZWN0IiwiZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50IiwiaGFuZGxlcnMiLCJqIiwicmVzZXRTY2hlZHVsZXJTdGF0ZSIsImFjdGl2YXRlZENoaWxkcmVuIiwiY2lyY3VsYXIiLCJ3YWl0aW5nIiwiZmx1c2hpbmciLCJmbHVzaFNjaGVkdWxlclF1ZXVlIiwid2F0Y2hlciIsInNvcnQiLCJNQVhfVVBEQVRFX0NPVU5UIiwidXNlciIsImFjdGl2YXRlZFF1ZXVlIiwidXBkYXRlZFF1ZXVlIiwiY2FsbEFjdGl2YXRlZEhvb2tzIiwiY2FsbFVwZGF0ZWRIb29rcyIsImRldnRvb2xzIiwicXVldWVBY3RpdmF0ZWRDb21wb25lbnQiLCJxdWV1ZVdhdGNoZXIiLCJwcm94eSIsInNvdXJjZUtleSIsInNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbiIsImluaXRTdGF0ZSIsIm9wdHMiLCJpbml0UHJvcHMiLCJtZXRob2RzIiwiaW5pdE1ldGhvZHMiLCJpbml0RGF0YSIsImNvbXB1dGVkIiwiaW5pdENvbXB1dGVkIiwid2F0Y2giLCJuYXRpdmVXYXRjaCIsImluaXRXYXRjaCIsInByb3BzT3B0aW9ucyIsImlzUm9vdCIsImxvb3AiLCJoeXBoZW5hdGVkS2V5IiwiaXNSZXNlcnZlZEF0dHJpYnV0ZSIsImlzUmVzZXJ2ZWRBdHRyIiwiZ2V0RGF0YSIsIndhdGNoZXJzIiwiX2NvbXB1dGVkV2F0Y2hlcnMiLCJpc1NTUiIsInVzZXJEZWYiLCJjb21wdXRlZFdhdGNoZXJPcHRpb25zIiwiJGRhdGEiLCJkZWZpbmVDb21wdXRlZCIsInNob3VsZENhY2hlIiwiY3JlYXRlQ29tcHV0ZWRHZXR0ZXIiLCJkaXJ0eSIsImV2YWx1YXRlIiwiaGFuZGxlciIsImNyZWF0ZVdhdGNoZXIiLCJleHBPckZuIiwiJHdhdGNoIiwic3RhdGVNaXhpbiIsImRhdGFEZWYiLCJwcm9wc0RlZiIsIm5ld0RhdGEiLCIkc2V0IiwiJGRlbGV0ZSIsImltbWVkaWF0ZSIsImluaXRQcm92aWRlIiwicHJvdmlkZSIsIl9wcm92aWRlZCIsImluaXRJbmplY3Rpb25zIiwicmVzdWx0IiwicmVzb2x2ZUluamVjdCIsImZvckVhY2giLCJSZWZsZWN0Iiwib3duS2V5cyIsImZpbHRlciIsInByb3ZpZGVLZXkiLCJzb3VyY2UiLCJwcm92aWRlRGVmYXVsdCIsInJlbmRlckxpc3QiLCJyZW5kZXJTbG90IiwiZmFsbGJhY2siLCJiaW5kT2JqZWN0Iiwibm9kZXMiLCJzY29wZWRTbG90Rm4iLCJzbG90Tm9kZXMiLCJfcmVuZGVyZWQiLCIkY3JlYXRlRWxlbWVudCIsInJlc29sdmVGaWx0ZXIiLCJpZGVudGl0eSIsImlzS2V5Tm90TWF0Y2giLCJleHBlY3QiLCJhY3R1YWwiLCJjaGVja0tleUNvZGVzIiwiZXZlbnRLZXlDb2RlIiwiYnVpbHRJbktleUNvZGUiLCJldmVudEtleU5hbWUiLCJidWlsdEluS2V5TmFtZSIsIm1hcHBlZEtleUNvZGUiLCJrZXlDb2RlcyIsImJpbmRPYmplY3RQcm9wcyIsImFzUHJvcCIsImlzU3luYyIsIm11c3RVc2VQcm9wIiwiZG9tUHJvcHMiLCIkZXZlbnQiLCJyZW5kZXJTdGF0aWMiLCJpc0luRm9yIiwiX3N0YXRpY1RyZWVzIiwidHJlZSIsInN0YXRpY1JlbmRlckZucyIsIl9yZW5kZXJQcm94eSIsIm1hcmtTdGF0aWMiLCJtYXJrT25jZSIsImlzT25jZSIsIm1hcmtTdGF0aWNOb2RlIiwiYmluZE9iamVjdExpc3RlbmVycyIsImV4aXN0aW5nIiwib3VycyIsImluc3RhbGxSZW5kZXJIZWxwZXJzIiwiX28iLCJfbiIsIl9zIiwiX2wiLCJfdCIsIl9xIiwiX2kiLCJfbSIsIl9mIiwiX2siLCJfYiIsIl92IiwiX2UiLCJfdSIsIl9nIiwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLCJpbmplY3Rpb25zIiwiY29udGV4dFZtIiwiaXNDb21waWxlZCIsIl9jb21waWxlZCIsIm5lZWROb3JtYWxpemF0aW9uIiwiX3Njb3BlSWQiLCJfYyIsImQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRnVuY3Rpb25hbENvbXBvbmVudCIsIm1lcmdlUHJvcHMiLCJyZW5kZXJDb250ZXh0Iiwic2V0RnVuY3Rpb25hbENvbnRleHRGb3JWTm9kZSIsInZub2RlcyIsImNyZWF0ZUNvbXBvbmVudCIsIl9iYXNlIiwiY2lkIiwicmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyIsIm1vZGVsIiwidHJhbnNmb3JtTW9kZWwiLCJmdW5jdGlvbmFsIiwibmF0aXZlT24iLCJtZXJnZUhvb2tzIiwiY3JlYXRlQ29tcG9uZW50SW5zdGFuY2VGb3JWbm9kZSIsInBhcmVudEVsbSIsInJlZkVsbSIsIl9pc0NvbXBvbmVudCIsImlubGluZVRlbXBsYXRlIiwiaG9va3NUb01lcmdlIiwiZnJvbVBhcmVudCIsImNvbXBvbmVudFZOb2RlSG9va3MiLCJtZXJnZUhvb2skMSIsIm9uZSIsInR3byIsIm5vcm1hbGl6YXRpb25UeXBlIiwiYWx3YXlzTm9ybWFsaXplIiwiQUxXQVlTX05PUk1BTElaRSIsIl9jcmVhdGVFbGVtZW50IiwiaXMiLCJTSU1QTEVfTk9STUFMSVpFIiwiZ2V0VGFnTmFtZXNwYWNlIiwicGFyc2VQbGF0Zm9ybVRhZ05hbWUiLCJhcHBseU5TIiwicmVnaXN0ZXJEZWVwQmluZGluZ3MiLCJmb3JjZSIsInN0eWxlIiwiY2xhc3MiLCJpbml0UmVuZGVyIiwicGFyZW50RGF0YSIsInJlbmRlck1peGluIiwiJG5leHRUaWNrIiwicmVmIiwicmVuZGVyRXJyb3IiLCJpbml0TWl4aW4iLCJfaW5pdCIsInVpZCQzIiwiaW5pdEludGVybmFsQ29tcG9uZW50IiwiaW5pdFByb3h5IiwiX3NlbGYiLCJ2bm9kZUNvbXBvbmVudE9wdGlvbnMiLCJfY29tcG9uZW50VGFnIiwic3VwZXIiLCJzdXBlck9wdGlvbnMiLCJjYWNoZWRTdXBlck9wdGlvbnMiLCJtb2RpZmllZE9wdGlvbnMiLCJyZXNvbHZlTW9kaWZpZWRPcHRpb25zIiwiZXh0ZW5kT3B0aW9ucyIsIm1vZGlmaWVkIiwibGF0ZXN0IiwiZXh0ZW5kZWQiLCJzZWFsZWRPcHRpb25zIiwiZGVkdXBlIiwiaW5pdFVzZSIsInBsdWdpbiIsImluc3RhbGxlZFBsdWdpbnMiLCJfaW5zdGFsbGVkUGx1Z2lucyIsInVuc2hpZnQiLCJpbnN0YWxsIiwiaW5pdE1peGluJDEiLCJtaXhpbiIsImluaXRFeHRlbmQiLCJTdXBlciIsIlN1cGVySWQiLCJjYWNoZWRDdG9ycyIsIl9DdG9yIiwiU3ViIiwiaW5pdFByb3BzJDEiLCJpbml0Q29tcHV0ZWQkMSIsIkFTU0VUX1RZUEVTIiwiQ29tcCIsImluaXRBc3NldFJlZ2lzdGVycyIsImRlZmluaXRpb24iLCJnZXRDb21wb25lbnROYW1lIiwibWF0Y2hlcyIsInBhdHRlcm4iLCJwcnVuZUNhY2hlIiwia2VlcEFsaXZlSW5zdGFuY2UiLCJjYWNoZWROb2RlIiwicHJ1bmVDYWNoZUVudHJ5IiwiY3VycmVudCIsImNhY2hlZCQkMSIsImNvbXBvbmVudEluc3RhbmNlIiwiaW5pdEdsb2JhbEFQSSIsImNvbmZpZ0RlZiIsInV0aWwiLCJkZWxldGUiLCJidWlsdEluQ29tcG9uZW50cyIsImdlbkNsYXNzRm9yVm5vZGUiLCJwYXJlbnROb2RlIiwiY2hpbGROb2RlIiwibWVyZ2VDbGFzc0RhdGEiLCJyZW5kZXJDbGFzcyIsInN0YXRpY0NsYXNzIiwiZHluYW1pY0NsYXNzIiwic3RyaW5naWZ5Q2xhc3MiLCJzdHJpbmdpZnlBcnJheSIsInN0cmluZ2lmeU9iamVjdCIsInN0cmluZ2lmaWVkIiwiaXNTVkciLCJpc1Vua25vd25FbGVtZW50IiwidW5rbm93bkVsZW1lbnRDYWNoZSIsIkhUTUxVbmtub3duRWxlbWVudCIsIkhUTUxFbGVtZW50IiwicXVlcnkiLCJzZWxlY3RlZCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50JDEiLCJ0YWdOYW1lIiwibXVsdGlwbGUiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVFbGVtZW50TlMiLCJuYW1lc3BhY2UiLCJuYW1lc3BhY2VNYXAiLCJjcmVhdGVDb21tZW50IiwiaW5zZXJ0QmVmb3JlIiwibmV3Tm9kZSIsInJlZmVyZW5jZU5vZGUiLCJyZW1vdmVDaGlsZCIsImFwcGVuZENoaWxkIiwibmV4dFNpYmxpbmciLCJzZXRUZXh0Q29udGVudCIsInRleHRDb250ZW50Iiwic2V0U3R5bGVTY29wZSIsInNjb3BlSWQiLCJyZWdpc3RlclJlZiIsImlzUmVtb3ZhbCIsInJlZnMiLCJyZWZJbkZvciIsInNhbWVWbm9kZSIsInNhbWVJbnB1dFR5cGUiLCJ0eXBlQSIsInR5cGVCIiwiaXNUZXh0SW5wdXRUeXBlIiwiY3JlYXRlS2V5VG9PbGRJZHgiLCJiZWdpbklkeCIsImVuZElkeCIsImNyZWF0ZVBhdGNoRnVuY3Rpb24iLCJiYWNrZW5kIiwiZW1wdHlOb2RlQXQiLCJub2RlT3BzIiwiY3JlYXRlUm1DYiIsImNoaWxkRWxtIiwicmVtb3ZlTm9kZSIsImlzVW5rbm93bkVsZW1lbnQkJDEiLCJpblZQcmUiLCJpZ25vcmVkRWxlbWVudHMiLCJzb21lIiwiaWdub3JlIiwiY3JlYXRlRWxtIiwiaW5zZXJ0ZWRWbm9kZVF1ZXVlIiwibmVzdGVkIiwib3duZXJBcnJheSIsImlzUm9vdEluc2VydCIsInByZSIsImNyZWF0aW5nRWxtSW5WUHJlIiwic2V0U2NvcGUiLCJjcmVhdGVDaGlsZHJlbiIsImludm9rZUNyZWF0ZUhvb2tzIiwiaW5zZXJ0IiwiaXNSZWFjdGl2YXRlZCIsImtlZXBBbGl2ZSIsImluaXQiLCJpbml0Q29tcG9uZW50IiwicmVhY3RpdmF0ZUNvbXBvbmVudCIsInBlbmRpbmdJbnNlcnQiLCJpc1BhdGNoYWJsZSIsImlubmVyTm9kZSIsInRyYW5zaXRpb24iLCJhY3RpdmF0ZSIsImVtcHR5Tm9kZSIsInJlZiQkMSIsImNoZWNrRHVwbGljYXRlS2V5cyIsImFuY2VzdG9yIiwiYWRkVm5vZGVzIiwic3RhcnRJZHgiLCJpbnZva2VEZXN0cm95SG9vayIsImRlc3Ryb3kiLCJyZW1vdmVWbm9kZXMiLCJjaCIsInJlbW92ZUFuZEludm9rZVJlbW92ZUhvb2siLCJybSIsInVwZGF0ZUNoaWxkcmVuIiwib2xkQ2giLCJuZXdDaCIsInJlbW92ZU9ubHkiLCJvbGRLZXlUb0lkeCIsImlkeEluT2xkIiwidm5vZGVUb01vdmUiLCJvbGRTdGFydElkeCIsIm5ld1N0YXJ0SWR4Iiwib2xkRW5kSWR4Iiwib2xkU3RhcnRWbm9kZSIsIm9sZEVuZFZub2RlIiwibmV3RW5kSWR4IiwibmV3U3RhcnRWbm9kZSIsIm5ld0VuZFZub2RlIiwiY2FuTW92ZSIsInBhdGNoVm5vZGUiLCJmaW5kSWR4SW5PbGQiLCJzZWVuS2V5cyIsImVuZCIsIm9sZFZub2RlIiwiaHlkcmF0ZSIsInByZXBhdGNoIiwicG9zdHBhdGNoIiwiaW52b2tlSW5zZXJ0SG9vayIsImluaXRpYWwiLCJhc3NlcnROb2RlTWF0Y2giLCJoYXNDaGlsZE5vZGVzIiwiaW5uZXJIVE1MIiwiaHlkcmF0aW9uQmFpbGVkIiwiY2hpbGRyZW5NYXRjaCIsImZpcnN0Q2hpbGQiLCJjaGlsZE5vZGVzIiwiZnVsbEludm9rZSIsImlzUmVuZGVyZWRNb2R1bGUiLCJub2RlVHlwZSIsImlzSW5pdGlhbFBhdGNoIiwiaXNSZWFsRWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsIlNTUl9BVFRSIiwicmVtb3ZlQXR0cmlidXRlIiwib2xkRWxtIiwicGFyZW50RWxtJDEiLCJfbGVhdmVDYiIsInBhdGNoYWJsZSIsImkkMiIsInVwZGF0ZURpcmVjdGl2ZXMiLCJvbGREaXIiLCJpc0NyZWF0ZSIsImlzRGVzdHJveSIsIm9sZERpcnMiLCJub3JtYWxpemVEaXJlY3RpdmVzJDEiLCJuZXdEaXJzIiwiZGlyc1dpdGhJbnNlcnQiLCJkaXJzV2l0aFBvc3RwYXRjaCIsIm9sZFZhbHVlIiwiY2FsbEhvb2skMSIsImNvbXBvbmVudFVwZGF0ZWQiLCJpbnNlcnRlZCIsImNhbGxJbnNlcnQiLCJtb2RpZmllcnMiLCJlbXB0eU1vZGlmaWVycyIsImdldFJhd0Rpck5hbWUiLCJyYXdOYW1lIiwidXBkYXRlQXR0cnMiLCJpbmhlcml0QXR0cnMiLCJvbGRBdHRycyIsInNldEF0dHIiLCJpc0lFIiwiaXNFZGdlIiwiaXNYbGluayIsInJlbW92ZUF0dHJpYnV0ZU5TIiwieGxpbmtOUyIsImdldFhsaW5rUHJvcCIsImlzRW51bWVyYXRlZEF0dHIiLCJiYXNlU2V0QXR0ciIsImlzQm9vbGVhbkF0dHIiLCJpc0ZhbHN5QXR0clZhbHVlIiwic2V0QXR0cmlidXRlTlMiLCJpc0lFOSIsIl9faWVwaCIsImJsb2NrZXIiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVwZGF0ZUNsYXNzIiwib2xkRGF0YSIsImNscyIsInRyYW5zaXRpb25DbGFzcyIsIl90cmFuc2l0aW9uQ2xhc3NlcyIsIl9wcmV2Q2xhc3MiLCJwYXJzZUZpbHRlcnMiLCJleHAiLCJwdXNoRmlsdGVyIiwiZmlsdGVycyIsImxhc3RGaWx0ZXJJbmRleCIsInRyaW0iLCJwcmV2IiwiZXhwcmVzc2lvbiIsImluU2luZ2xlIiwiaW5Eb3VibGUiLCJpblRlbXBsYXRlU3RyaW5nIiwiaW5SZWdleCIsImN1cmx5Iiwic3F1YXJlIiwicGFyZW4iLCJ2YWxpZERpdmlzaW9uQ2hhclJFIiwid3JhcEZpbHRlciIsImJhc2VXYXJuIiwibXNnIiwicGx1Y2tNb2R1bGVGdW5jdGlvbiIsImFkZFByb3AiLCJwbGFpbiIsImFkZEF0dHIiLCJhZGRSYXdBdHRyIiwiYXR0cnNNYXAiLCJhdHRyc0xpc3QiLCJhZGREaXJlY3RpdmUiLCJhZGRIYW5kbGVyIiwiaW1wb3J0YW50IiwicHJldmVudCIsInJpZ2h0IiwibWlkZGxlIiwiZXZlbnRzIiwibmF0aXZlIiwibmF0aXZlRXZlbnRzIiwibmV3SGFuZGxlciIsImdldEJpbmRpbmdBdHRyIiwiZ2V0U3RhdGljIiwiZHluYW1pY1ZhbHVlIiwiZ2V0QW5kUmVtb3ZlQXR0ciIsInN0YXRpY1ZhbHVlIiwicmVtb3ZlRnJvbU1hcCIsImdlbkNvbXBvbmVudE1vZGVsIiwibnVtYmVyIiwiYmFzZVZhbHVlRXhwcmVzc2lvbiIsInZhbHVlRXhwcmVzc2lvbiIsImFzc2lnbm1lbnQiLCJnZW5Bc3NpZ25tZW50Q29kZSIsInBhcnNlTW9kZWwiLCJsYXN0SW5kZXhPZiIsImluZGV4JDEiLCJleHByZXNzaW9uUG9zIiwiZXhwcmVzc2lvbkVuZFBvcyIsImVvZiIsImNociIsIm5leHQiLCJpc1N0cmluZ1N0YXJ0IiwicGFyc2VTdHJpbmciLCJwYXJzZUJyYWNrZXQiLCJpbkJyYWNrZXQiLCJzdHJpbmdRdW90ZSIsIl93YXJuIiwid2FybiQxIiwiZ2VuU2VsZWN0IiwiZ2VuQ2hlY2tib3hNb2RlbCIsImdlblJhZGlvTW9kZWwiLCJnZW5EZWZhdWx0TW9kZWwiLCJ2YWx1ZUJpbmRpbmciLCJ0cnVlVmFsdWVCaW5kaW5nIiwiZmFsc2VWYWx1ZUJpbmRpbmciLCJzZWxlY3RlZFZhbCIsImNvZGUiLCJ2YWx1ZSQxIiwidHlwZUJpbmRpbmciLCJsYXp5IiwibmVlZENvbXBvc2l0aW9uR3VhcmQiLCJSQU5HRV9UT0tFTiIsIm5vcm1hbGl6ZUV2ZW50cyIsIkNIRUNLQk9YX1JBRElPX1RPS0VOIiwiY2hhbmdlIiwiY3JlYXRlT25jZUhhbmRsZXIiLCJ0YXJnZXQkMSIsIm9uY2VIYW5kbGVyIiwicmVtb3ZlJDIiLCJhZGQkMSIsIm9uY2UkJDEiLCJzdXBwb3J0c1Bhc3NpdmUiLCJ1cGRhdGVET01MaXN0ZW5lcnMiLCJ1cGRhdGVET01Qcm9wcyIsIm9sZFByb3BzIiwiX3ZhbHVlIiwic3RyQ3VyIiwic2hvdWxkVXBkYXRlVmFsdWUiLCJjaGVja1ZhbCIsImNvbXBvc2luZyIsImlzTm90SW5Gb2N1c0FuZERpcnR5IiwiaXNEaXJ0eVdpdGhNb2RpZmllcnMiLCJub3RJbkZvY3VzIiwiYWN0aXZlRWxlbWVudCIsIl92TW9kaWZpZXJzIiwibm9ybWFsaXplU3R5bGVEYXRhIiwibm9ybWFsaXplU3R5bGVCaW5kaW5nIiwic3RhdGljU3R5bGUiLCJiaW5kaW5nU3R5bGUiLCJwYXJzZVN0eWxlVGV4dCIsImdldFN0eWxlIiwiY2hlY2tDaGlsZCIsInN0eWxlRGF0YSIsInVwZGF0ZVN0eWxlIiwib2xkU3RhdGljU3R5bGUiLCJvbGRTdHlsZUJpbmRpbmciLCJub3JtYWxpemVkU3R5bGUiLCJvbGRTdHlsZSIsIm5ld1N0eWxlIiwic2V0UHJvcCIsImFkZENsYXNzIiwiY2xhc3NMaXN0IiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQ2xhc3MiLCJ0YXIiLCJyZXBsYWNlIiwicmVzb2x2ZVRyYW5zaXRpb24iLCJjc3MiLCJhdXRvQ3NzVHJhbnNpdGlvbiIsIm5leHRGcmFtZSIsInJhZiIsImFkZFRyYW5zaXRpb25DbGFzcyIsInRyYW5zaXRpb25DbGFzc2VzIiwicmVtb3ZlVHJhbnNpdGlvbkNsYXNzIiwid2hlblRyYW5zaXRpb25FbmRzIiwiZ2V0VHJhbnNpdGlvbkluZm8iLCJwcm9wQ291bnQiLCJUUkFOU0lUSU9OIiwidHJhbnNpdGlvbkVuZEV2ZW50IiwiYW5pbWF0aW9uRW5kRXZlbnQiLCJlbmRlZCIsIm9uRW5kIiwic3R5bGVzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInRyYW5zaXRpb25EZWxheXMiLCJ0cmFuc2l0aW9uUHJvcCIsInRyYW5zaXRpb25EdXJhdGlvbnMiLCJ0cmFuc2l0aW9uVGltZW91dCIsImdldFRpbWVvdXQiLCJhbmltYXRpb25EZWxheXMiLCJhbmltYXRpb25Qcm9wIiwiYW5pbWF0aW9uRHVyYXRpb25zIiwiYW5pbWF0aW9uVGltZW91dCIsIkFOSU1BVElPTiIsImhhc1RyYW5zZm9ybSIsInRyYW5zZm9ybVJFIiwiZGVsYXlzIiwiZHVyYXRpb25zIiwidG9NcyIsInMiLCJOdW1iZXIiLCJlbnRlciIsInRvZ2dsZURpc3BsYXkiLCJjYW5jZWxsZWQiLCJfZW50ZXJDYiIsImVudGVyQ2xhc3MiLCJlbnRlclRvQ2xhc3MiLCJlbnRlckFjdGl2ZUNsYXNzIiwiYXBwZWFyQ2xhc3MiLCJhcHBlYXJUb0NsYXNzIiwiYXBwZWFyQWN0aXZlQ2xhc3MiLCJiZWZvcmVFbnRlciIsImFmdGVyRW50ZXIiLCJlbnRlckNhbmNlbGxlZCIsImJlZm9yZUFwcGVhciIsImFwcGVhciIsImFmdGVyQXBwZWFyIiwiYXBwZWFyQ2FuY2VsbGVkIiwiZHVyYXRpb24iLCJ0cmFuc2l0aW9uTm9kZSIsImlzQXBwZWFyIiwic3RhcnRDbGFzcyIsImFjdGl2ZUNsYXNzIiwidG9DbGFzcyIsImJlZm9yZUVudGVySG9vayIsImVudGVySG9vayIsImFmdGVyRW50ZXJIb29rIiwiZW50ZXJDYW5jZWxsZWRIb29rIiwiZXhwbGljaXRFbnRlckR1cmF0aW9uIiwiY2hlY2tEdXJhdGlvbiIsImV4cGVjdHNDU1MiLCJ1c2VyV2FudHNDb250cm9sIiwiZ2V0SG9va0FyZ3VtZW50c0xlbmd0aCIsInNob3ciLCJwZW5kaW5nTm9kZSIsIl9wZW5kaW5nIiwiaXNWYWxpZER1cmF0aW9uIiwibGVhdmUiLCJwZXJmb3JtTGVhdmUiLCJiZWZvcmVMZWF2ZSIsImxlYXZlQ2xhc3MiLCJsZWF2ZUFjdGl2ZUNsYXNzIiwibGVhdmVUb0NsYXNzIiwiZXhwbGljaXRMZWF2ZUR1cmF0aW9uIiwiYWZ0ZXJMZWF2ZSIsImxlYXZlQ2FuY2VsbGVkIiwiZGVsYXlMZWF2ZSIsImludm9rZXJGbnMiLCJfZW50ZXIiLCJzZXRTZWxlY3RlZCIsImFjdHVhbGx5U2V0U2VsZWN0ZWQiLCJpc011bHRpcGxlIiwib3B0aW9uIiwiZ2V0VmFsdWUiLCJzZWxlY3RlZEluZGV4IiwiaGFzTm9NYXRjaGluZ09wdGlvbiIsIm8iLCJvbkNvbXBvc2l0aW9uU3RhcnQiLCJvbkNvbXBvc2l0aW9uRW5kIiwidHJpZ2dlciIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImxvY2F0ZU5vZGUiLCJnZXRSZWFsQ2hpbGQiLCJjb21wT3B0aW9ucyIsImV4dHJhY3RUcmFuc2l0aW9uRGF0YSIsImtleSQxIiwicGxhY2Vob2xkZXIiLCJyYXdDaGlsZCIsImhhc1BhcmVudFRyYW5zaXRpb24iLCJpc1NhbWVDaGlsZCIsIm9sZENoaWxkIiwiY2FsbFBlbmRpbmdDYnMiLCJfbW92ZUNiIiwicmVjb3JkUG9zaXRpb24iLCJuZXdQb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhcHBseVRyYW5zbGF0aW9uIiwib2xkUG9zIiwicG9zIiwiZHgiLCJsZWZ0IiwiZHkiLCJ0b3AiLCJtb3ZlZCIsInRyYW5zZm9ybSIsIldlYmtpdFRyYW5zZm9ybSIsInRyYW5zaXRpb25EdXJhdGlvbiIsInBhcnNlVGV4dCIsImRlbGltaXRlcnMiLCJ0YWdSRSIsImJ1aWxkUmVnZXgiLCJkZWZhdWx0VGFnUkUiLCJ0b2tlblZhbHVlIiwidG9rZW5zIiwicmF3VG9rZW5zIiwiZXhlYyIsIkBiaW5kaW5nIiwidHJhbnNmb3JtTm9kZSIsImNsYXNzQmluZGluZyIsImdlbkRhdGEiLCJ0cmFuc2Zvcm1Ob2RlJDEiLCJzdHlsZUJpbmRpbmciLCJnZW5EYXRhJDEiLCJkZWNvZGVBdHRyIiwic2hvdWxkRGVjb2RlTmV3bGluZXMiLCJyZSIsImVuY29kZWRBdHRyV2l0aE5ld0xpbmVzIiwiZW5jb2RlZEF0dHIiLCJkZWNvZGluZ01hcCIsInBhcnNlSFRNTCIsImh0bWwiLCJhZHZhbmNlIiwicGFyc2VTdGFydFRhZyIsInN0YXJ0VGFnT3BlbiIsImF0dHIiLCJzdGFydFRhZ0Nsb3NlIiwiYXR0cmlidXRlIiwidW5hcnlTbGFzaCIsImhhbmRsZVN0YXJ0VGFnIiwiZXhwZWN0SFRNTCIsImxhc3RUYWciLCJpc05vblBocmFzaW5nVGFnIiwicGFyc2VFbmRUYWciLCJjYW5CZUxlZnRPcGVuVGFnJCQxIiwidW5hcnkiLCJpc1VuYXJ5VGFnJCQxIiwiSVNfUkVHRVhfQ0FQVFVSSU5HX0JST0tFTiIsInNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiIsInN0YWNrIiwibG93ZXJDYXNlZFRhZyIsImxvd2VyQ2FzZWRUYWdOYW1lIiwiaXNVbmFyeVRhZyIsIm5vIiwiY2FuQmVMZWZ0T3BlblRhZyIsImlzUGxhaW5UZXh0RWxlbWVudCIsImVuZFRhZ0xlbmd0aCIsInN0YWNrZWRUYWciLCJyZVN0YWNrZWRUYWciLCJyZUNhY2hlIiwiUmVnRXhwIiwicmVzdCQxIiwic2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lIiwiY2hhcnMiLCJ0ZXh0RW5kIiwiY29tbWVudCIsImNvbW1lbnRFbmQiLCJzaG91bGRLZWVwQ29tbWVudCIsImNvbmRpdGlvbmFsQ29tbWVudCIsImNvbmRpdGlvbmFsRW5kIiwiZG9jdHlwZU1hdGNoIiwiZG9jdHlwZSIsImVuZFRhZ01hdGNoIiwiY3VySW5kZXgiLCJzdGFydFRhZ01hdGNoIiwicmVzdCIsImNyZWF0ZUFTVEVsZW1lbnQiLCJtYWtlQXR0cnNNYXAiLCJwYXJzZSIsIndhcm5PbmNlIiwid2FybmVkIiwid2FybiQyIiwiY2xvc2VFbGVtZW50IiwiZWxlbWVudCIsInBsYXRmb3JtSXNQcmVUYWciLCJpblByZSIsInBvc3RUcmFuc2Zvcm1zIiwiaXNQcmVUYWciLCJwbGF0Zm9ybU11c3RVc2VQcm9wIiwicGxhdGZvcm1HZXRUYWdOYW1lc3BhY2UiLCJ0cmFuc2Zvcm1zIiwicHJlVHJhbnNmb3JtcyIsInJvb3QiLCJjdXJyZW50UGFyZW50IiwicHJlc2VydmVXaGl0ZXNwYWNlIiwiY29tbWVudHMiLCJjaGVja1Jvb3RDb25zdHJhaW50cyIsImd1YXJkSUVTVkdCdWciLCJpc0ZvcmJpZGRlblRhZyIsImZvcmJpZGRlbiIsInByb2Nlc3NQcmUiLCJwcm9jZXNzUmF3QXR0cnMiLCJwcm9jZXNzZWQiLCJwcm9jZXNzRm9yIiwicHJvY2Vzc0lmIiwicHJvY2Vzc09uY2UiLCJwcm9jZXNzRWxlbWVudCIsImlmIiwiZWxzZWlmIiwiZWxzZSIsImFkZElmQ29uZGl0aW9uIiwiYmxvY2siLCJwcm9jZXNzSWZDb25kaXRpb25zIiwic2xvdFNjb3BlIiwic2xvdFRhcmdldCIsImxhc3ROb2RlIiwiaXNUZXh0VGFnIiwiZGVjb2RlSFRNTENhY2hlZCIsInByb2Nlc3NLZXkiLCJwcm9jZXNzUmVmIiwicHJvY2Vzc1Nsb3QiLCJwcm9jZXNzQ29tcG9uZW50IiwicHJvY2Vzc0F0dHJzIiwiY2hlY2tJbkZvciIsInBhcnNlRm9yIiwiaW5NYXRjaCIsImZvckFsaWFzUkUiLCJmb3IiLCJhbGlhcyIsInN0cmlwUGFyZW5zUkUiLCJpdGVyYXRvck1hdGNoIiwiZm9ySXRlcmF0b3JSRSIsIml0ZXJhdG9yMSIsIml0ZXJhdG9yMiIsImZpbmRQcmV2RWxlbWVudCIsImNvbmRpdGlvbiIsImlmQ29uZGl0aW9ucyIsInNsb3ROYW1lIiwiaXNQcm9wIiwiZGlyUkUiLCJoYXNCaW5kaW5ncyIsInBhcnNlTW9kaWZpZXJzIiwibW9kaWZpZXJSRSIsImJpbmRSRSIsImNhbWVsIiwib25SRSIsImFyZ01hdGNoIiwiYXJnUkUiLCJjaGVja0ZvckFsaWFzTW9kZWwiLCJpZU5TQnVnIiwiaWVOU1ByZWZpeCIsIl9lbCIsInByZVRyYW5zZm9ybU5vZGUiLCJpZkNvbmRpdGlvbiIsImlmQ29uZGl0aW9uRXh0cmEiLCJoYXNFbHNlIiwiZWxzZUlmQ29uZGl0aW9uIiwiYnJhbmNoMCIsImNsb25lQVNURWxlbWVudCIsImJyYW5jaDEiLCJicmFuY2gyIiwib3B0aW1pemUiLCJpc1N0YXRpY0tleSIsImdlblN0YXRpY0tleXNDYWNoZWQiLCJpc1BsYXRmb3JtUmVzZXJ2ZWRUYWciLCJtYXJrU3RhdGljJDEiLCJtYXJrU3RhdGljUm9vdHMiLCJnZW5TdGF0aWNLZXlzJDEiLCJzdGF0aWMiLCJsJDEiLCJzdGF0aWNJbkZvciIsInN0YXRpY1Jvb3QiLCJpc0RpcmVjdENoaWxkT2ZUZW1wbGF0ZUZvciIsImdlbkhhbmRsZXJzIiwiZ2VuSGFuZGxlciIsImlzTWV0aG9kUGF0aCIsInNpbXBsZVBhdGhSRSIsImlzRnVuY3Rpb25FeHByZXNzaW9uIiwiZm5FeHBSRSIsImdlbk1vZGlmaWVyQ29kZSIsIm1vZGlmaWVyQ29kZSIsImdlbkd1YXJkIiwia2V5TW9kaWZpZXIiLCJnZW5LZXlGaWx0ZXIiLCJoYW5kbGVyQ29kZSIsImdlbkZpbHRlckNvZGUiLCJrZXlWYWwiLCJwYXJzZUludCIsImtleUNvZGUiLCJrZXlOYW1lIiwia2V5TmFtZXMiLCJ3cmFwTGlzdGVuZXJzIiwiYmluZCQxIiwid3JhcERhdGEiLCJnZW5lcmF0ZSIsImFzdCIsIkNvZGVnZW5TdGF0ZSIsImdlbkVsZW1lbnQiLCJzdGF0aWNQcm9jZXNzZWQiLCJnZW5TdGF0aWMiLCJvbmNlUHJvY2Vzc2VkIiwiZ2VuT25jZSIsImZvclByb2Nlc3NlZCIsImdlbkZvciIsImlmUHJvY2Vzc2VkIiwiZ2VuSWYiLCJnZW5TbG90IiwiZ2VuQ29tcG9uZW50IiwiZ2VuRGF0YSQyIiwiZ2VuQ2hpbGRyZW4iLCJvbmNlSWQiLCJhbHRHZW4iLCJhbHRFbXB0eSIsImdlbklmQ29uZGl0aW9ucyIsImNvbmRpdGlvbnMiLCJnZW5UZXJuYXJ5RXhwIiwiYWx0SGVscGVyIiwibWF5YmVDb21wb25lbnQiLCJnZW5EaXJlY3RpdmVzIiwiZGF0YUdlbkZucyIsImdlblByb3BzIiwiZ2VuU2NvcGVkU2xvdHMiLCJnZW5JbmxpbmVUZW1wbGF0ZSIsIm5lZWRSdW50aW1lIiwiaGFzUnVudGltZSIsImdlbiIsImlubGluZVJlbmRlckZucyIsImdlblNjb3BlZFNsb3QiLCJnZW5Gb3JTY29wZWRTbG90IiwiY2hlY2tTa2lwIiwiYWx0R2VuRWxlbWVudCIsImFsdEdlbk5vZGUiLCJlbCQxIiwiZ2V0Tm9ybWFsaXphdGlvblR5cGUiLCJnZW5Ob2RlIiwibmVlZHNOb3JtYWxpemF0aW9uIiwiZ2VuQ29tbWVudCIsImdlblRleHQiLCJ0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMiLCJiaW5kJCQxIiwiY29tcG9uZW50TmFtZSIsImRldGVjdEVycm9ycyIsImVycm9ycyIsImNoZWNrTm9kZSIsImNoZWNrRm9yIiwiY2hlY2tFdmVudCIsImNoZWNrRXhwcmVzc2lvbiIsInN0aXBwZWQiLCJzdHJpcFN0cmluZ1JFIiwia2V5d29yZE1hdGNoIiwidW5hcnlPcGVyYXRvcnNSRSIsImNoZWNrSWRlbnRpZmllciIsImlkZW50IiwicHJvaGliaXRlZEtleXdvcmRSRSIsImNyZWF0ZUZ1bmN0aW9uIiwiY3JlYXRlQ29tcGlsZVRvRnVuY3Rpb25GbiIsImNvbXBpbGUiLCJ3YXJuJCQxIiwiY29tcGlsZWQiLCJ0aXBzIiwiZm5HZW5FcnJvcnMiLCJjcmVhdGVDb21waWxlckNyZWF0b3IiLCJiYXNlQ29tcGlsZSIsImJhc2VPcHRpb25zIiwiZmluYWxPcHRpb25zIiwiY29tcGlsZVRvRnVuY3Rpb25zIiwiZ2V0U2hvdWxkRGVjb2RlIiwiaHJlZiIsImRpdiIsImdldE91dGVySFRNTCIsIm91dGVySFRNTCIsImNvbnRhaW5lciIsImNsb25lTm9kZSIsImZyZWV6ZSIsImNhbWVsaXplUkUiLCJ0b1VwcGVyQ2FzZSIsImh5cGhlbmF0ZVJFIiwiTElGRUNZQ0xFX0hPT0tTIiwib3B0aW9uTWVyZ2VTdHJhdGVnaWVzIiwic2lsZW50IiwicHJvZHVjdGlvblRpcCIsIndhcm5IYW5kbGVyIiwiX2xpZmVjeWNsZUhvb2tzIiwiaGFzUHJvdG8iLCJXWEVudmlyb25tZW50IiwicGxhdGZvcm0iLCJ3ZWV4UGxhdGZvcm0iLCJVQSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlzSU9TIiwiaXNDaHJvbWUiLCJfaXNTZXJ2ZXIiLCJfU2V0IiwiVlVFX0VOViIsIl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18iLCJTZXQiLCJnZW5lcmF0ZUNvbXBvbmVudFRyYWNlIiwiaGFzQ29uc29sZSIsImNsYXNzaWZ5UkUiLCJjbGFzc2lmeSIsInRyYWNlIiwiaW5jbHVkZUZpbGUiLCJmaWxlIiwiX19maWxlIiwicmVwZWF0IiwiY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlIiwidWlkIiwic3VicyIsImFkZFN1YiIsInN1YiIsInJlbW92ZVN1YiIsImFkZERlcCIsInJhdyIsInByb3RvdHlwZUFjY2Vzc29ycyIsImRlZmluZVByb3BlcnRpZXMiLCJhcnJheVByb3RvIiwiYXJyYXlNZXRob2RzIiwibWV0aG9kc1RvUGF0Y2giLCJtZXRob2QiLCJvcmlnaW5hbCIsIm9ic2VydmVBcnJheSIsImFycmF5S2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJhdWdtZW50Iiwid2FsayIsIml0ZW1zIiwicG9ydCIsInBlcmYiLCJjbGVhck1hcmtzIiwiY2xlYXJNZWFzdXJlcyIsImFsbG93ZWRHbG9iYWxzIiwid2Fybk5vblByZXNlbnQiLCJoYXNQcm94eSIsIlByb3h5IiwiaXNCdWlsdEluTW9kaWZpZXIiLCJoYXNIYW5kbGVyIiwiaXNBbGxvd2VkIiwiZ2V0SGFuZGxlciIsIl93aXRoU3RyaXBwZWQiLCJ1aWQkMSIsImlzUmVuZGVyV2F0Y2hlciIsImRlZXAiLCJhY3RpdmUiLCJkZXBzIiwibmV3RGVwcyIsImRlcElkcyIsIm5ld0RlcElkcyIsImNsZWFudXBEZXBzIiwidG1wIiwibW91bnRlZE5vZGUiLCJwYXR0ZXJuVHlwZXMiLCJLZWVwQWxpdmUiLCJpbmNsdWRlIiwiZXhjbHVkZSIsImNyZWF0ZWQiLCJkZXN0cm95ZWQiLCJyZWYkMSIsInNzckNvbnRleHQiLCJlbXB0eVN0eWxlIiwiYWNjZXB0VmFsdWUiLCJzdmciLCJtYXRoIiwiaXNIVE1MVGFnIiwiYmFzZU1vZHVsZXMiLCJrbGFzcyIsImNzc1RleHQiLCJsaXN0RGVsaW1pdGVyIiwicHJvcGVydHlEZWxpbWl0ZXIiLCJjc3NWYXJSRSIsImltcG9ydGFudFJFIiwic2V0UHJvcGVydHkiLCJub3JtYWxpemVkTmFtZSIsIm5vcm1hbGl6ZSIsInZlbmRvck5hbWVzIiwiY2FwTmFtZSIsImhhc1RyYW5zaXRpb24iLCJvbnRyYW5zaXRpb25lbmQiLCJvbndlYmtpdHRyYW5zaXRpb25lbmQiLCJvbmFuaW1hdGlvbmVuZCIsIm9ud2Via2l0YW5pbWF0aW9uZW5kIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicGxhdGZvcm1Nb2R1bGVzIiwicGF0Y2giLCJ2bW9kZWwiLCJkaXJlY3RpdmUiLCJfdk9wdGlvbnMiLCJwcmV2T3B0aW9ucyIsImN1ck9wdGlvbnMiLCJuZWVkUmVzZXQiLCJ0cmFuc2l0aW9uJCQxIiwib3JpZ2luYWxEaXNwbGF5IiwiX192T3JpZ2luYWxEaXNwbGF5IiwiZGlzcGxheSIsInVuYmluZCIsInBsYXRmb3JtRGlyZWN0aXZlcyIsInRyYW5zaXRpb25Qcm9wcyIsIm1vZGUiLCJUcmFuc2l0aW9uIiwiX2xlYXZpbmciLCJvbGRSYXdDaGlsZCIsImRlbGF5ZWRMZWF2ZSIsIm1vdmVDbGFzcyIsIlRyYW5zaXRpb25Hcm91cCIsInByZXZDaGlsZHJlbiIsInJhd0NoaWxkcmVuIiwidHJhbnNpdGlvbkRhdGEiLCJrZXB0IiwicmVtb3ZlZCIsImMkMSIsImJlZm9yZVVwZGF0ZSIsInVwZGF0ZWQiLCJoYXNNb3ZlIiwiX3JlZmxvdyIsImJvZHkiLCJvZmZzZXRIZWlnaHQiLCJwcm9wZXJ0eU5hbWUiLCJfaGFzTW92ZSIsImNsb25lIiwicGxhdGZvcm1Db21wb25lbnRzIiwiZGVjb2RlciIsInJlZ2V4RXNjYXBlUkUiLCJvcGVuIiwiY2xvc2UiLCJrbGFzcyQxIiwic3R5bGUkMSIsImhlIiwiZGVjb2RlIiwibmNuYW1lIiwicW5hbWVDYXB0dXJlIiwiZyIsIiZsdDsiLCImZ3Q7IiwiJnF1b3Q7IiwiJmFtcDsiLCImIzEwOyIsIiYjOTsiLCJpc0lnbm9yZU5ld2xpbmVUYWciLCJtb2RlbCQyIiwibW9kdWxlcyQxIiwiZGlyZWN0aXZlcyQxIiwiZXNjIiwidGFiIiwic3BhY2UiLCJ1cCIsImRvd24iLCJzdG9wIiwiY3RybCIsImFsdCIsIm1ldGEiLCJiYXNlRGlyZWN0aXZlcyIsImNsb2FrIiwiY3JlYXRlQ29tcGlsZXIiLCJpZFRvVGVtcGxhdGUiLCJtb3VudCIsImRvY3VtZW50RWxlbWVudCIsIlRpbWVvdXQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJ1bnJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsIl9vblRpbWVvdXQiLCJjbGVhckltbWVkaWF0ZSIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwiaGFuZGxlIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24iLCJjYW5Vc2VQb3N0TWVzc2FnZSIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMiLCJvbGRPbk1lc3NhZ2UiLCJpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbiIsIm1lc3NhZ2VQcmVmaXgiLCJvbkdsb2JhbE1lc3NhZ2UiLCJhdHRhY2hFdmVudCIsImluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uIiwiaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbiIsImRvYyIsInNjcmlwdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsImluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24iLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwiYXNzZXJ0IiwibWVzc2FnZSIsIk5PREVfRU5WIiwiaXNFcnJvciIsInJlc29sdmVQcm9wcyIsInJvdXRlIiwicmVzb2x2ZVF1ZXJ5IiwiZXh0cmFRdWVyeSIsIl9wYXJzZVF1ZXJ5IiwicGFyc2VkUXVlcnkiLCJwYXJzZVF1ZXJ5IiwicGFyYW0iLCJwYXJ0cyIsInN0cmluZ2lmeVF1ZXJ5IiwiZW5jb2RlIiwidmFsMiIsImNyZWF0ZVJvdXRlIiwicmVjb3JkIiwibG9jYXRpb24iLCJyZWRpcmVjdGVkRnJvbSIsInN0cmluZ2lmeVF1ZXJ5JCQxIiwiZnVsbFBhdGgiLCJnZXRGdWxsUGF0aCIsIm1hdGNoZWQiLCJmb3JtYXRNYXRjaCIsIl9zdHJpbmdpZnlRdWVyeSIsImlzU2FtZVJvdXRlIiwiU1RBUlQiLCJ0cmFpbGluZ1NsYXNoUkUiLCJpc09iamVjdEVxdWFsIiwiYUtleXMiLCJiS2V5cyIsImFWYWwiLCJiVmFsIiwiaXNJbmNsdWRlZFJvdXRlIiwicXVlcnlJbmNsdWRlcyIsImd1YXJkRXZlbnQiLCJtZXRhS2V5IiwiY3RybEtleSIsInNoaWZ0S2V5IiwiZGVmYXVsdFByZXZlbnRlZCIsImJ1dHRvbiIsImN1cnJlbnRUYXJnZXQiLCJwcmV2ZW50RGVmYXVsdCIsImZpbmRBbmNob3IiLCJpbnN0YWxsZWQiLCJfVnVlIiwicmVnaXN0ZXJJbnN0YW5jZSIsImNhbGxWYWwiLCJyZWdpc3RlclJvdXRlSW5zdGFuY2UiLCJiZWZvcmVDcmVhdGUiLCJfcm91dGVyUm9vdCIsIl9yb3V0ZXIiLCJoaXN0b3J5IiwiX3JvdXRlIiwiVmlldyIsIkxpbmsiLCJiZWZvcmVSb3V0ZUVudGVyIiwiYmVmb3JlUm91dGVMZWF2ZSIsImJlZm9yZVJvdXRlVXBkYXRlIiwicmVzb2x2ZVBhdGgiLCJyZWxhdGl2ZSIsImFwcGVuZCIsImZpcnN0Q2hhciIsInNlZ21lbnQiLCJoYXNoSW5kZXgiLCJxdWVyeUluZGV4IiwiY2xlYW5QYXRoIiwiZGVmYXVsdERlbGltaXRlciIsImRlbGltaXRlciIsIlBBVEhfUkVHRVhQIiwiZXNjYXBlZCIsIm9mZnNldCIsInByZWZpeCIsImdyb3VwIiwibW9kaWZpZXIiLCJhc3RlcmlzayIsInBhcnRpYWwiLCJvcHRpb25hbCIsImVzY2FwZUdyb3VwIiwiZXNjYXBlU3RyaW5nIiwic3Vic3RyIiwidG9rZW5zVG9GdW5jdGlvbiIsImVuY29kZVVSSUNvbXBvbmVudFByZXR0eSIsImVuY29kZVVSSSIsImVuY29kZUFzdGVyaXNrIiwicHJldHR5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidG9rZW4iLCJpc2FycmF5IiwiYXR0YWNoS2V5cyIsImZsYWdzIiwic2Vuc2l0aXZlIiwicmVnZXhwVG9SZWdleHAiLCJncm91cHMiLCJhcnJheVRvUmVnZXhwIiwicGF0aFRvUmVnZXhwIiwicmVnZXhwIiwic3RyaW5nVG9SZWdleHAiLCJ0b2tlbnNUb1JlZ0V4cCIsInN0cmljdCIsImVuZHNXaXRoRGVsaW1pdGVyIiwiZmlsbFBhcmFtcyIsInJvdXRlTXNnIiwiZmlsbGVyIiwicmVnZXhwQ29tcGlsZUNhY2hlIiwicGF0aFRvUmVnZXhwXzEiLCJjcmVhdGVSb3V0ZU1hcCIsIm9sZFBhdGhMaXN0Iiwib2xkUGF0aE1hcCIsIm9sZE5hbWVNYXAiLCJwYXRoTGlzdCIsInBhdGhNYXAiLCJuYW1lTWFwIiwiYWRkUm91dGVSZWNvcmQiLCJtYXRjaEFzIiwicGF0aFRvUmVnZXhwT3B0aW9ucyIsIm5vcm1hbGl6ZWRQYXRoIiwibm9ybWFsaXplUGF0aCIsImNhc2VTZW5zaXRpdmUiLCJyZWdleCIsImNvbXBpbGVSb3V0ZVJlZ2V4IiwiaW5zdGFuY2VzIiwiY2hpbGRNYXRjaEFzIiwiYWxpYXNlcyIsImFsaWFzUm91dGUiLCJub3JtYWxpemVMb2NhdGlvbiIsIl9ub3JtYWxpemVkIiwiYXNzaWduIiwicmF3UGF0aCIsInBhcnNlZFBhdGgiLCJiYXNlUGF0aCIsImNyZWF0ZU1hdGNoZXIiLCJhZGRSb3V0ZXMiLCJjdXJyZW50Um91dGUiLCJfY3JlYXRlUm91dGUiLCJwYXJhbU5hbWVzIiwicmVjb3JkJDEiLCJtYXRjaFJvdXRlIiwib3JpZ2luYWxSZWRpcmVjdCIsInRhcmdldFJlY29yZCIsInJlc29sdmVSZWNvcmRQYXRoIiwicmVzb2x2ZWRQYXRoIiwiYWxpYXNlZFBhdGgiLCJhbGlhc2VkTWF0Y2giLCJhbGlhc2VkUmVjb3JkIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic2V0dXBTY3JvbGwiLCJyZXBsYWNlU3RhdGUiLCJnZXRTdGF0ZUtleSIsInNhdmVTY3JvbGxQb3NpdGlvbiIsInNldFN0YXRlS2V5IiwiaGFuZGxlU2Nyb2xsIiwiaXNQb3AiLCJhcHAiLCJiZWhhdmlvciIsInNjcm9sbEJlaGF2aW9yIiwicG9zaXRpb24iLCJnZXRTY3JvbGxQb3NpdGlvbiIsInNob3VsZFNjcm9sbCIsInNjcm9sbFRvUG9zaXRpb24iLCJwb3NpdGlvblN0b3JlIiwicGFnZVhPZmZzZXQiLCJ5IiwicGFnZVlPZmZzZXQiLCJnZXRFbGVtZW50UG9zaXRpb24iLCJkb2NFbCIsImRvY1JlY3QiLCJlbFJlY3QiLCJpc1ZhbGlkUG9zaXRpb24iLCJpc051bWJlciIsIm5vcm1hbGl6ZVBvc2l0aW9uIiwibm9ybWFsaXplT2Zmc2V0Iiwic2VsZWN0b3IiLCJzY3JvbGxUbyIsImdlbktleSIsIlRpbWUiLCJub3ciLCJ0b0ZpeGVkIiwiX2tleSIsInB1c2hTdGF0ZSIsInVybCIsInJ1blF1ZXVlIiwic3RlcCIsInJlc29sdmVBc3luY0NvbXBvbmVudHMiLCJoYXNBc3luYyIsImZsYXRNYXBDb21wb25lbnRzIiwicmVzb2x2ZWREZWYiLCJpc0VTTW9kdWxlIiwiZmxhdHRlbiIsIm5vcm1hbGl6ZUJhc2UiLCJiYXNlRWwiLCJyZXNvbHZlUXVldWUiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImV4dHJhY3RHdWFyZHMiLCJyZWNvcmRzIiwicmV2ZXJzZSIsImd1YXJkcyIsImluc3RhbmNlIiwiZ3VhcmQiLCJleHRyYWN0R3VhcmQiLCJleHRyYWN0TGVhdmVHdWFyZHMiLCJiaW5kR3VhcmQiLCJleHRyYWN0VXBkYXRlSG9va3MiLCJleHRyYWN0RW50ZXJHdWFyZHMiLCJpc1ZhbGlkIiwiYmluZEVudGVyR3VhcmQiLCJwb2xsIiwiZ2V0TG9jYXRpb24iLCJwYXRobmFtZSIsInNlYXJjaCIsImNoZWNrRmFsbGJhY2siLCJlbnN1cmVTbGFzaCIsImdldEhhc2giLCJyZXBsYWNlSGFzaCIsImdldFVybCIsInB1c2hIYXNoIiwic3VwcG9ydHNQdXNoU3RhdGUiLCJyZWdpc3Rlckhvb2siLCJjcmVhdGVIcmVmIiwicm91dGVyVmlldyIsIiRyb3V0ZSIsIl9yb3V0ZXJWaWV3Q2FjaGUiLCJkZXB0aCIsImluYWN0aXZlIiwicm91dGVyVmlld0RlcHRoIiwicHJvcHNUb1Bhc3MiLCJlbmNvZGVSZXNlcnZlUkUiLCJlbmNvZGVSZXNlcnZlUmVwbGFjZXIiLCJjb21tYVJFIiwidG9UeXBlcyIsImV2ZW50VHlwZXMiLCJleGFjdCIsImV4YWN0QWN0aXZlQ2xhc3MiLCIkcm91dGVyIiwiY2xhc3NlcyIsImdsb2JhbEFjdGl2ZUNsYXNzIiwibGlua0FjdGl2ZUNsYXNzIiwiZ2xvYmFsRXhhY3RBY3RpdmVDbGFzcyIsImxpbmtFeGFjdEFjdGl2ZUNsYXNzIiwiYWN0aXZlQ2xhc3NGYWxsYmFjayIsImV4YWN0QWN0aXZlQ2xhc3NGYWxsYmFjayIsImNvbXBhcmVUYXJnZXQiLCJjbGljayIsImFEYXRhIiwiYUF0dHJzIiwicGFyc2VfMSIsImNvbXBpbGVfMSIsInRva2Vuc1RvRnVuY3Rpb25fMSIsInRva2Vuc1RvUmVnRXhwXzEiLCJ1YSIsIkRhdGUiLCJIaXN0b3J5IiwicmVhZHkiLCJyZWFkeUNicyIsInJlYWR5RXJyb3JDYnMiLCJlcnJvckNicyIsImxpc3RlbiIsIm9uUmVhZHkiLCJlcnJvckNiIiwib25FcnJvciIsInRyYW5zaXRpb25UbyIsIm9uQ29tcGxldGUiLCJvbkFib3J0IiwiY29uZmlybVRyYW5zaXRpb24iLCJ1cGRhdGVSb3V0ZSIsImVuc3VyZVVSTCIsImFib3J0IiwiYmVmb3JlSG9va3MiLCJpdGVyYXRvciIsInBvc3RFbnRlckNicyIsImVudGVyR3VhcmRzIiwicmVzb2x2ZUhvb2tzIiwiYWZ0ZXJIb29rcyIsIkhUTUw1SGlzdG9yeSIsIkhpc3RvcnkkJDEiLCJleHBlY3RTY3JvbGwiLCJpbml0TG9jYXRpb24iLCJnbyIsImZyb21Sb3V0ZSIsImdldEN1cnJlbnRMb2NhdGlvbiIsIkhhc2hIaXN0b3J5Iiwic2V0dXBMaXN0ZW5lcnMiLCJzdXBwb3J0c1Njcm9sbCIsIkFic3RyYWN0SGlzdG9yeSIsInRhcmdldEluZGV4IiwiVnVlUm91dGVyIiwiYXBwcyIsIm1hdGNoZXIiLCJzZXR1cEhhc2hMaXN0ZW5lciIsImJlZm9yZUVhY2giLCJiZWZvcmVSZXNvbHZlIiwiYWZ0ZXJFYWNoIiwiYmFjayIsImZvcndhcmQiLCJnZXRNYXRjaGVkQ29tcG9uZW50cyIsIm5vcm1hbGl6ZWRUbyIsImNyZWF0ZUluc3RhbmNlIiwiZGVmYXVsdENvbmZpZyIsIkF4aW9zIiwicmVxdWVzdCIsInV0aWxzIiwiZGVmYXVsdHMiLCJheGlvcyIsImluc3RhbmNlQ29uZmlnIiwibWVyZ2UiLCJDYW5jZWwiLCJDYW5jZWxUb2tlbiIsImlzQ2FuY2VsIiwicHJvbWlzZXMiLCJzcHJlYWQiLCJpc0FycmF5QnVmZmVyIiwiaXNGb3JtRGF0YSIsIkZvcm1EYXRhIiwiaXNBcnJheUJ1ZmZlclZpZXciLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsImJ1ZmZlciIsImlzU3RyaW5nIiwiaXNVbmRlZmluZWQiLCJpc0RhdGUiLCJpc0ZpbGUiLCJpc0Jsb2IiLCJpc1N0cmVhbSIsInBpcGUiLCJpc1VSTFNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImlzU3RhbmRhcmRCcm93c2VyRW52IiwicHJvZHVjdCIsImFzc2lnblZhbHVlIiwidGhpc0FyZyIsImlzQnVmZmVyIiwiaXNTbG93QnVmZmVyIiwicmVhZEZsb2F0TEUiLCJfaXNCdWZmZXIiLCJpbnRlcmNlcHRvcnMiLCJJbnRlcmNlcHRvck1hbmFnZXIiLCJyZXNwb25zZSIsImRpc3BhdGNoUmVxdWVzdCIsImNoYWluIiwiaW50ZXJjZXB0b3IiLCJmdWxmaWxsZWQiLCJyZWplY3RlZCIsInNldENvbnRlbnRUeXBlSWZVbnNldCIsImhlYWRlcnMiLCJnZXREZWZhdWx0QWRhcHRlciIsImFkYXB0ZXIiLCJYTUxIdHRwUmVxdWVzdCIsIm5vcm1hbGl6ZUhlYWRlck5hbWUiLCJERUZBVUxUX0NPTlRFTlRfVFlQRSIsIkNvbnRlbnQtVHlwZSIsInRyYW5zZm9ybVJlcXVlc3QiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInhzcmZDb29raWVOYW1lIiwieHNyZkhlYWRlck5hbWUiLCJtYXhDb250ZW50TGVuZ3RoIiwidmFsaWRhdGVTdGF0dXMiLCJzdGF0dXMiLCJjb21tb24iLCJBY2NlcHQiLCJzZXR0bGUiLCJidWlsZFVSTCIsInBhcnNlSGVhZGVycyIsImlzVVJMU2FtZU9yaWdpbiIsImNyZWF0ZUVycm9yIiwiYnRvYSIsInJlcXVlc3REYXRhIiwicmVxdWVzdEhlYWRlcnMiLCJsb2FkRXZlbnQiLCJ4RG9tYWluIiwiWERvbWFpblJlcXVlc3QiLCJvbnByb2dyZXNzIiwib250aW1lb3V0IiwiYXV0aCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJBdXRob3JpemF0aW9uIiwicGFyYW1zU2VyaWFsaXplciIsInJlYWR5U3RhdGUiLCJyZXNwb25zZVVSTCIsInJlc3BvbnNlSGVhZGVycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInJlc3BvbnNlRGF0YSIsInJlc3BvbnNlVHlwZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1c1RleHQiLCJvbmVycm9yIiwiY29va2llcyIsInhzcmZWYWx1ZSIsIndpdGhDcmVkZW50aWFscyIsInJlYWQiLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25Eb3dubG9hZFByb2dyZXNzIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbFRva2VuIiwiY2FuY2VsIiwic2VuZCIsImVuaGFuY2VFcnJvciIsInNlcmlhbGl6ZWRQYXJhbXMiLCJ0b0lTT1N0cmluZyIsImlnbm9yZUR1cGxpY2F0ZU9mIiwicGFyc2VkIiwibGluZSIsInJlc29sdmVVUkwiLCJtc2llIiwidXJsUGFyc2luZ05vZGUiLCJwcm90b2NvbCIsImhvc3QiLCJob3N0bmFtZSIsIm9yaWdpblVSTCIsInJlcXVlc3RVUkwiLCJFIiwiY2hhckNvZGUiLCJvdXRwdXQiLCJpZHgiLCJ3cml0ZSIsImV4cGlyZXMiLCJkb21haW4iLCJzZWN1cmUiLCJjb29raWUiLCJ0b0dNVFN0cmluZyIsImVqZWN0IiwidGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZCIsInRocm93SWZSZXF1ZXN0ZWQiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNBYnNvbHV0ZVVSTCIsImNvbWJpbmVVUkxzIiwiYmFzZVVSTCIsIl9fQ0FOQ0VMX18iLCJyZWxhdGl2ZVVSTCIsImV4ZWN1dG9yIiwicmVzb2x2ZVByb21pc2UiLCJfdnVleCIsIl92dWV4MiIsImxvYWRTdGF0dXMiLCJtdXRhdGlvbnMiLCJMT0FEX1NUQVRVUyIsIlN0b3JlIiwiZGV2dG9vbFBsdWdpbiIsImRldnRvb2xIb29rIiwiX2RldnRvb2xIb29rIiwidGFyZ2V0U3RhdGUiLCJtdXRhdGlvbiIsImZvckVhY2hWYWx1ZSIsImlzUHJvbWlzZSIsInRhcmdldE1vZHVsZSIsIm5ld01vZHVsZSIsImFzc2VydFJhd01vZHVsZSIsImdldENoaWxkIiwicmF3TW9kdWxlIiwiYXNzZXJ0VHlwZXMiLCJhc3NlcnRPcHRpb25zIiwibWFrZUFzc2VydGlvbk1lc3NhZ2UiLCJleHBlY3RlZCIsImJ1ZiIsImdlbmVyaWNTdWJzY3JpYmUiLCJyZXNldFN0b3JlIiwiaG90IiwiX2FjdGlvbnMiLCJfbXV0YXRpb25zIiwiX3dyYXBwZWRHZXR0ZXJzIiwiX21vZHVsZXNOYW1lc3BhY2VNYXAiLCJpbnN0YWxsTW9kdWxlIiwiX21vZHVsZXMiLCJyZXNldFN0b3JlVk0iLCJvbGRWbSIsIl92bSIsImdldHRlcnMiLCJ3cmFwcGVkR2V0dGVycyIsIiQkc3RhdGUiLCJlbmFibGVTdHJpY3RNb2RlIiwiX3dpdGhDb21taXQiLCJyb290U3RhdGUiLCJnZXROYW1lc3BhY2UiLCJuYW1lc3BhY2VkIiwicGFyZW50U3RhdGUiLCJnZXROZXN0ZWRTdGF0ZSIsIm1vZHVsZU5hbWUiLCJtYWtlTG9jYWxDb250ZXh0IiwiZm9yRWFjaE11dGF0aW9uIiwibmFtZXNwYWNlZFR5cGUiLCJyZWdpc3Rlck11dGF0aW9uIiwiZm9yRWFjaEFjdGlvbiIsImFjdGlvbiIsInJlZ2lzdGVyQWN0aW9uIiwiZm9yRWFjaEdldHRlciIsInJlZ2lzdGVyR2V0dGVyIiwiZm9yRWFjaENoaWxkIiwibm9OYW1lc3BhY2UiLCJkaXNwYXRjaCIsIl90eXBlIiwiX3BheWxvYWQiLCJfb3B0aW9ucyIsInVuaWZ5T2JqZWN0U3R5bGUiLCJwYXlsb2FkIiwiY29tbWl0IiwibWFrZUxvY2FsR2V0dGVycyIsImdldHRlcnNQcm94eSIsInNwbGl0UG9zIiwibG9jYWxUeXBlIiwicm9vdEdldHRlcnMiLCJyYXdHZXR0ZXIiLCJfY29tbWl0dGluZyIsImFwcGx5TWl4aW4iLCJub3JtYWxpemVNYXAiLCJub3JtYWxpemVOYW1lc3BhY2UiLCJnZXRNb2R1bGVCeU5hbWVzcGFjZSIsImhlbHBlciIsInZ1ZXhJbml0IiwiJHN0b3JlIiwiTW9kdWxlIiwicnVudGltZSIsIl9jaGlsZHJlbiIsIl9yYXdNb2R1bGUiLCJyYXdTdGF0ZSIsInByb3RvdHlwZUFjY2Vzc29ycyQxIiwiYWRkQ2hpbGQiLCJhY3Rpb25zIiwiTW9kdWxlQ29sbGVjdGlvbiIsInJhd1Jvb3RNb2R1bGUiLCJyZWdpc3RlciIsInJhd0NoaWxkTW9kdWxlIiwidW5yZWdpc3RlciIsImZ1bmN0aW9uQXNzZXJ0Iiwib2JqZWN0QXNzZXJ0IiwicGx1Z2lucyIsIl9hY3Rpb25TdWJzY3JpYmVycyIsIl93YXRjaGVyVk0iLCJzdWJzY3JpYmVBY3Rpb24iLCJyZWdpc3Rlck1vZHVsZSIsInByZXNlcnZlU3RhdGUiLCJ1bnJlZ2lzdGVyTW9kdWxlIiwiaG90VXBkYXRlIiwibmV3T3B0aW9ucyIsImNvbW1pdHRpbmciLCJtYXBTdGF0ZSIsInN0YXRlcyIsInZ1ZXgiLCJtYXBNdXRhdGlvbnMiLCJtYXBHZXR0ZXJzIiwibWFwQWN0aW9ucyIsImNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIiwiX192dWVfZXhwb3J0c19fIiwiX192dWVfb3B0aW9uc19fIiwiX192dWVfdGVtcGxh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R0FBQXh5RSxFQUFBLEdBR0EsSUFBQTB5RSxHQUFBMXlFLEVBQUEsR0FDQXl5RSxHQUFBRCxRQUVBLGdCQUFBQSxHQUFBMXhFLFNBQ0Esa0JBQUEweEUsR0FBQTF4RSxVQUVBMnhFLEVBQUFELElBQUExeEUsU0FFQSxrQkFBQTJ4RSxLQUNBQSxJQUFBLzRELFNBR0ErNEQsRUFBQWx3RSxPQUFBbXdFLEVBQUFud0UsT0FDQWt3RSxFQUFBempELGdCQUFBMGpELEVBQUExakQsZ0JBRUE1dUIsRUFBQUQsUUFBQXF5RSxHNUNnbmpCTSxTQUFVcHlFLEVBQVFELEVBQVNILEdBRWhDLFlBWUEsU0FBU1csR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FWdkY2SixPQUFPZ0ssZUFBZXRVLEVBQVMsY0FDM0J1SCxPQUFPLEk2Q3BvakJaMUgsRUFBQSxHQUdBLElBQUFxQixHQUFBckIsRUFBQSxJN0N3b2pCS3NCLEVBQVVYLEVBQXVCVSxFQVdyQ2xCLEdBQVFXLFNBQ0ppcEIsU0FDSWdwRCxZQUFhLFdBQ1R6eEUsRUFBUVIsUUFBUTJ1RSxPQUFPLGU2Q2xwakJwQyxPN0N5cGpCTSxTQUFVcnZFLEVBQVFELEtBS2hCLENBRUYsU0FBVUMsRUFBUUQsRzhDOXFqQnhCQyxFQUFBRCxTQUFnQm9DLE9BQUEsV0FBbUIsR0FBQXFyRSxHQUFBOXFFLEtBQWErdkUsRUFBQWpGLEVBQUFuZ0QsZUFBMEJ1RCxFQUFBNDhDLEVBQUF4NUMsTUFBQXBELElBQUE2aEQsQ0FDMUUsT0FBQTdoRCxHQUFBLE9BQ0EwRyxZQUFBLFFBQ0cxRyxFQUFBLEtBQ0h2USxPQUNBNGhDLEtBQUEsc0JBRUE1ekMsSUFDQW14RCxNQUFBLFNBQUFqeEMsR0FDQWkvQyxFQUFBbUYsa0JBR0duRixFQUFBdjlDLEdBQUEsa0JBQ0ZyQiIsImZpbGUiOiJqcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF92dWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF92dWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdnVlKTtcblx0XG5cdHZhciBfdnVlUm91dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfdnVlUm91dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZVJvdXRlcik7XG5cdFxuXHR2YXIgX2F4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpO1xuXHRcblx0dmFyIF9zdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0dmFyIF9zdG9yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdG9yZSk7XG5cdFxuXHR2YXIgX2FwcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHRcblx0dmFyIF9hcHAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBwKTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdF92dWUyLmRlZmF1bHQudXNlKF92dWVSb3V0ZXIyLmRlZmF1bHQpO1xuXHRfdnVlMi5kZWZhdWx0LnByb3RvdHlwZS4kaHR0cCA9IF9heGlvczIuZGVmYXVsdDtcblx0XG5cdHZhciBfcm91dGVzID0gW3tcblx0ICAgIHBhdGg6ICcvaW5kZXgnLFxuXHQgICAgbmFtZTogJ2luZGV4Jyxcblx0ICAgIGNvbXBvbmVudDogX2luZGV4Mi5kZWZhdWx0XG5cdH0sIHtcblx0ICAgIHBhdGg6ICcqJyxcblx0ICAgIHJlZGlyZWN0OiAnL2luZGV4J1xuXHR9XTtcblx0XG5cdHZhciByb3V0ZXIgPSBuZXcgX3Z1ZVJvdXRlcjIuZGVmYXVsdCh7XG5cdCAgICByb3V0ZXM6IF9yb3V0ZXNcblx0fSk7XG5cdFxuXHR2YXIgYXBwID0gbmV3IF92dWUyLmRlZmF1bHQoe1xuXHQgICAgZWw6ICcjYXBwJyxcblx0ICAgIHJvdXRlcjogcm91dGVyLFxuXHQgICAgc3RvcmU6IF9zdG9yZTIuZGVmYXVsdCxcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgpIHtcblx0ICAgICAgICByZXR1cm4gaChfYXBwMi5kZWZhdWx0KTtcblx0ICAgIH1cblx0fSkuJG1vdW50KCcjYXBwJyk7XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIFRoaXMgZmlsZSBjYW4gYmUgcmVxdWlyZWQgaW4gQnJvd3NlcmlmeSBhbmQgTm9kZS5qcyBmb3IgYXV0b21hdGljIHBvbHlmaWxsXG5cdC8vIFRvIHVzZSBpdDogIHJlcXVpcmUoJ2VzNi1wcm9taXNlL2F1dG8nKTtcblx0J3VzZSBzdHJpY3QnO1xuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMikucG9seWZpbGwoKTtcblxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2VzcywgZ2xvYmFsKSB7LyohXG5cdCAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cblx0ICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcblx0ICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuXHQgKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG5cdCAqIEB2ZXJzaW9uICAgdjQuMi40KzMxNGU0ODMxXG5cdCAqL1xuXHRcblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0XHQgdHJ1ZSA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0XHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHRcdChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG5cdH0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgeDtcblx0ICByZXR1cm4geCAhPT0gbnVsbCAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuXHQgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRcblx0XG5cdFxuXHR2YXIgX2lzQXJyYXkgPSB2b2lkIDA7XG5cdGlmIChBcnJheS5pc0FycmF5KSB7XG5cdCAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHR9IGVsc2Uge1xuXHQgIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblx0XG5cdHZhciBsZW4gPSAwO1xuXHR2YXIgdmVydHhOZXh0ID0gdm9pZCAwO1xuXHR2YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB2b2lkIDA7XG5cdFxuXHR2YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuXHQgIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcblx0ICBxdWV1ZVtsZW4gKyAxXSA9IGFyZztcblx0ICBsZW4gKz0gMjtcblx0ICBpZiAobGVuID09PSAyKSB7XG5cdCAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG5cdCAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuXHQgICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuXHQgICAgaWYgKGN1c3RvbVNjaGVkdWxlckZuKSB7XG5cdCAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHNjaGVkdWxlRmx1c2goKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuXHQgIGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHtcblx0ICBhc2FwID0gYXNhcEZuO1xuXHR9XG5cdFxuXHR2YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xuXHR2YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG5cdHZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cdHZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblx0XG5cdC8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG5cdHZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cdFxuXHQvLyBub2RlXG5cdGZ1bmN0aW9uIHVzZU5leHRUaWNrKCkge1xuXHQgIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuXHQgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG5cdCAgfTtcblx0fVxuXHRcblx0Ly8gdmVydHhcblx0ZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHtcblx0ICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZlcnR4TmV4dChmbHVzaCk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcblx0ICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcblx0ICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcblx0ICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xuXHQgIH07XG5cdH1cblx0XG5cdC8vIHdlYiB3b3JrZXJcblx0ZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG5cdCAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcblx0ICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuXHQgIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuXHQgIC8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxuXHQgIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGdsb2JhbFNldFRpbWVvdXQoZmx1c2gsIDEpO1xuXHQgIH07XG5cdH1cblx0XG5cdHZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcblx0ZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuXHQgICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG5cdCAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXHRcblx0ICAgIGNhbGxiYWNrKGFyZyk7XG5cdFxuXHQgICAgcXVldWVbaV0gPSB1bmRlZmluZWQ7XG5cdCAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBsZW4gPSAwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB2ZXJ0eCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCkucmVxdWlyZSgndmVydHgnKTtcblx0ICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG5cdCAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgc2NoZWR1bGVGbHVzaCA9IHZvaWQgMDtcblx0Ly8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcblx0aWYgKGlzTm9kZSkge1xuXHQgIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xuXHR9IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG5cdCAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcblx0fSBlbHNlIGlmIChpc1dvcmtlcikge1xuXHQgIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xuXHR9IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiBcImZ1bmN0aW9uXCIgPT09ICdmdW5jdGlvbicpIHtcblx0ICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7XG5cdH0gZWxzZSB7XG5cdCAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuXHQgIHZhciBwYXJlbnQgPSB0aGlzO1xuXHRcblx0ICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblx0XG5cdCAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcblx0ICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcblx0ICB9XG5cdFxuXHQgIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXHRcblx0XG5cdCAgaWYgKF9zdGF0ZSkge1xuXHQgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW19zdGF0ZSAtIDFdO1xuXHQgICAgYXNhcChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBpbnZva2VDYWxsYmFjayhfc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcGFyZW50Ll9yZXN1bHQpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY2hpbGQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcblx0ICBwYXNzZWQgYHZhbHVlYC4gSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgcmVzb2x2ZSgxKTtcblx0ICB9KTtcblx0XG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIHZhbHVlID09PSAxXG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKDEpO1xuXHRcblx0ICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuXHQgICAgLy8gdmFsdWUgPT09IDFcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgQG1ldGhvZCByZXNvbHZlXG5cdCAgQHN0YXRpY1xuXHQgIEBwYXJhbSB7QW55fSB2YWx1ZSB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aFxuXHQgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cblx0ICBgdmFsdWVgXG5cdCovXG5cdGZ1bmN0aW9uIHJlc29sdmUkMShvYmplY3QpIHtcblx0ICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuXHQgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdFxuXHQgIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuXHQgICAgcmV0dXJuIG9iamVjdDtcblx0ICB9XG5cdFxuXHQgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXHQgIHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcblx0ICByZXR1cm4gcHJvbWlzZTtcblx0fVxuXHRcblx0dmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMik7XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHZhciBQRU5ESU5HID0gdm9pZCAwO1xuXHR2YXIgRlVMRklMTEVEID0gMTtcblx0dmFyIFJFSkVDVEVEID0gMjtcblx0XG5cdHZhciBUUllfQ0FUQ0hfRVJST1IgPSB7IGVycm9yOiBudWxsIH07XG5cdFxuXHRmdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XG5cdCAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7XG5cdCAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiBwcm9taXNlLnRoZW47XG5cdCAgfSBjYXRjaCAoZXJyb3IpIHtcblx0ICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGVycm9yO1xuXHQgICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRyeVRoZW4odGhlbiQkMSwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuXHQgIHRyeSB7XG5cdCAgICB0aGVuJCQxLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHtcblx0ICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG5cdCAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG5cdCAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgaWYgKHNlYWxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBzZWFsZWQgPSB0cnVlO1xuXHQgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG5cdCAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgaWYgKHNlYWxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBzZWFsZWQgPSB0cnVlO1xuXHRcblx0ICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXHRcblx0ICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG5cdCAgICAgIHNlYWxlZCA9IHRydWU7XG5cdCAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG5cdCAgICB9XG5cdCAgfSwgcHJvbWlzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG5cdCAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG5cdCAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuXHQgICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpIHtcblx0ICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQxID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSQxKSB7XG5cdCAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKHRoZW4kJDEgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuXHQgICAgICByZWplY3QocHJvbWlzZSwgVFJZX0NBVENIX0VSUk9SLmVycm9yKTtcblx0ICAgICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gbnVsbDtcblx0ICAgIH0gZWxzZSBpZiAodGhlbiQkMSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG5cdCAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkMSkpIHtcblx0ICAgICAgaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcblx0ICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcblx0ICAgIHJlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XG5cdCAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuXHQgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuXHQgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG5cdCAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG5cdCAgfVxuXHRcblx0ICBwdWJsaXNoKHByb21pc2UpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG5cdCAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcblx0ICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblx0XG5cdCAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuXHQgICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcblx0ICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcblx0ICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cdFxuXHQgIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuXHQgIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuXHQgIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xuXHRcblx0XG5cdCAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblx0XG5cdCAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcblx0ICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG5cdCAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xuXHRcblx0ICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcblx0ICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuXHQgIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuXHQgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cdFxuXHQgIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIHZhciBjaGlsZCA9IHZvaWQgMCxcblx0ICAgICAgY2FsbGJhY2sgPSB2b2lkIDAsXG5cdCAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuXHQgICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcblx0ICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXHRcblx0ICAgIGlmIChjaGlsZCkge1xuXHQgICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjYWxsYmFjayhkZXRhaWwpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuXHQgICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcblx0ICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcblx0ICAgICAgdmFsdWUgPSB2b2lkIDAsXG5cdCAgICAgIGVycm9yID0gdm9pZCAwLFxuXHQgICAgICBzdWNjZWVkZWQgPSB2b2lkIDAsXG5cdCAgICAgIGZhaWxlZCA9IHZvaWQgMDtcblx0XG5cdCAgaWYgKGhhc0NhbGxiYWNrKSB7XG5cdCAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXHRcblx0ICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG5cdCAgICAgIGZhaWxlZCA9IHRydWU7XG5cdCAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG5cdCAgICAgIHZhbHVlLmVycm9yID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICAgIHJlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFsdWUgPSBkZXRhaWw7XG5cdCAgICBzdWNjZWVkZWQgPSB0cnVlO1xuXHQgIH1cblx0XG5cdCAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG5cdCAgICAvLyBub29wXG5cdCAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcblx0ICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG5cdCAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuXHQgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XG5cdCAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcblx0ICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG5cdCAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcblx0ICB0cnkge1xuXHQgICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcblx0ICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuXHQgICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJlamVjdChwcm9taXNlLCBlKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBpZCA9IDA7XG5cdGZ1bmN0aW9uIG5leHRJZCgpIHtcblx0ICByZXR1cm4gaWQrKztcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkge1xuXHQgIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuXHQgIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuXHQgIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcblx0ICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG5cdCAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG5cdH1cblx0XG5cdHZhciBFbnVtZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG5cdCAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG5cdCAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cdFxuXHQgICAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHtcblx0ICAgICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoaXNBcnJheShpbnB1dCkpIHtcblx0ICAgICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cdCAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblx0XG5cdCAgICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cdFxuXHQgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG5cdCAgICAgICAgdGhpcy5fZW51bWVyYXRlKGlucHV0KTtcblx0ICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIEVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiBfZW51bWVyYXRlKGlucHV0KSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHRoaXMuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIF9lYWNoRW50cnkoZW50cnksIGkpIHtcblx0ICAgIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3Rvcjtcblx0ICAgIHZhciByZXNvbHZlJCQxID0gYy5yZXNvbHZlO1xuXHRcblx0XG5cdCAgICBpZiAocmVzb2x2ZSQkMSA9PT0gcmVzb2x2ZSQxKSB7XG5cdCAgICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXHRcblx0ICAgICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuXHQgICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXHQgICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuXHQgICAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UkMSkge1xuXHQgICAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG5cdCAgICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuXHQgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJDEpIHtcblx0ICAgICAgICAgIHJldHVybiByZXNvbHZlJCQxKGVudHJ5KTtcblx0ICAgICAgICB9KSwgaSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQxKGVudHJ5KSwgaSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIF9zZXR0bGVkQXQoc3RhdGUsIGksIHZhbHVlKSB7XG5cdCAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblx0XG5cdFxuXHQgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XG5cdCAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXHRcblx0ICAgICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuXHQgICAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKSB7XG5cdCAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cdFxuXHQgICAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG5cdCAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gRW51bWVyYXRvcjtcblx0fSgpO1xuXHRcblx0LyoqXG5cdCAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG5cdCAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuXHQgIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuXHQgIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblx0XG5cdCAgRXhhbXBsZTpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG5cdCAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTtcblx0ICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuXHQgIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXHRcblx0ICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG5cdCAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2Vcblx0ICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3Ncblx0ICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cdFxuXHQgIEV4YW1wbGU6XG5cdFxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuXHQgIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcblx0ICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XG5cdCAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cdFxuXHQgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcblx0ICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuXHQgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdCAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBAbWV0aG9kIGFsbFxuXHQgIEBzdGF0aWNcblx0ICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXG5cdCAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG5cdCAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cblx0ICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cblx0ICBAc3RhdGljXG5cdCovXG5cdGZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XG5cdCAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcblx0ICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cdFxuXHQgIEV4YW1wbGU6XG5cdFxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcblx0ICAgIH0sIDIwMCk7XG5cdCAgfSk7XG5cdFxuXHQgIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuXHQgICAgfSwgMTAwKTtcblx0ICB9KTtcblx0XG5cdCAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdCAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuXHQgICAgLy8gd2FzIHJlc29sdmVkLlxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG5cdCAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuXHQgIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcblx0ICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcblx0ICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG5cdCAgICB9LCAyMDApO1xuXHQgIH0pO1xuXHRcblx0ICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XG5cdCAgICB9LCAxMDApO1xuXHQgIH0pO1xuXHRcblx0ICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG5cdCAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG5cdCAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcblx0ICBgYGBcblx0XG5cdCAgQG1ldGhvZCByYWNlXG5cdCAgQHN0YXRpY1xuXHQgIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcblx0ICBwcm9taXNlIHRvIHNldHRsZS5cblx0Ki9cblx0ZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XG5cdCAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHRcblx0ICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcblx0ICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuXHQgICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuXHQgIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblx0ICB9KTtcblx0XG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblx0XG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgQG1ldGhvZCByZWplY3Rcblx0ICBAc3RhdGljXG5cdCAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxuXHQqL1xuXHRmdW5jdGlvbiByZWplY3QkMShyZWFzb24pIHtcblx0ICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuXHQgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdCAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cdCAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgcmV0dXJuIHByb21pc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5lZWRzUmVzb2x2ZXIoKSB7XG5cdCAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBuZWVkc05ldygpIHtcblx0ICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xuXHR9XG5cdFxuXHQvKipcblx0ICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG5cdCAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcblx0ICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cblx0ICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblx0XG5cdCAgVGVybWlub2xvZ3lcblx0ICAtLS0tLS0tLS0tLVxuXHRcblx0ICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuXHQgIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cblx0ICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG5cdCAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG5cdCAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuXHQgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXHRcblx0ICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cdFxuXHQgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG5cdCAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxuXHQgIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXHRcblx0ICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcblx0ICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG5cdCAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG5cdCAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuXHQgIGl0c2VsZiBmdWxmaWxsLlxuXHRcblx0XG5cdCAgQmFzaWMgVXNhZ2U6XG5cdCAgLS0tLS0tLS0tLS0tXG5cdFxuXHQgIGBgYGpzXG5cdCAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgIC8vIG9uIHN1Y2Nlc3Ncblx0ICAgIHJlc29sdmUodmFsdWUpO1xuXHRcblx0ICAgIC8vIG9uIGZhaWx1cmVcblx0ICAgIHJlamVjdChyZWFzb24pO1xuXHQgIH0pO1xuXHRcblx0ICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIC8vIG9uIGZ1bGZpbGxtZW50XG5cdCAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAvLyBvbiByZWplY3Rpb25cblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgQWR2YW5jZWQgVXNhZ2U6XG5cdCAgLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcblx0ICBgWE1MSHR0cFJlcXVlc3Rgcy5cblx0XG5cdCAgYGBganNcblx0ICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XG5cdCAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuXHQgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcblx0ICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcblx0ICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cdCAgICAgIHhoci5zZW5kKCk7XG5cdFxuXHQgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuXHQgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuXHQgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcblx0ICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuXHQgICAgLy8gb24gZnVsZmlsbG1lbnRcblx0ICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgIC8vIG9uIHJlamVjdGlvblxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXHRcblx0ICBgYGBqc1xuXHQgIFByb21pc2UuYWxsKFtcblx0ICAgIGdldEpTT04oJy9wb3N0cycpLFxuXHQgICAgZ2V0SlNPTignL2NvbW1lbnRzJylcblx0ICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG5cdCAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG5cdCAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cdFxuXHQgICAgcmV0dXJuIHZhbHVlcztcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgQGNsYXNzIFByb21pc2Vcblx0ICBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlclxuXHQgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICBAY29uc3RydWN0b3Jcblx0Ki9cblx0XG5cdHZhciBQcm9taXNlJDEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuXHQgICAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuXHQgICAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXHRcblx0ICAgIGlmIChub29wICE9PSByZXNvbHZlcikge1xuXHQgICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuXHQgICAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcblx0ICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuXHQgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblx0ICAgYGBganNcblx0ICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG5cdCAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuXHQgIH0pO1xuXHQgIGBgYFxuXHQgICBDaGFpbmluZ1xuXHQgIC0tLS0tLS0tXG5cdCAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG5cdCAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuXHQgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXHQgICBgYGBqc1xuXHQgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgcmV0dXJuIHVzZXIubmFtZTtcblx0ICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG5cdCAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcblx0ICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcblx0ICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuXHQgIH0pO1xuXHQgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcblx0ICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcblx0ICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG5cdCAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cblx0ICB9KTtcblx0ICBgYGBcblx0ICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cblx0ICAgYGBganNcblx0ICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcblx0ICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAvLyBuZXZlciByZWFjaGVkXG5cdCAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcblx0ICB9KTtcblx0ICBgYGBcblx0ICAgQXNzaW1pbGF0aW9uXG5cdCAgLS0tLS0tLS0tLS0tXG5cdCAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG5cdCAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuXHQgIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG5cdCAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cdCAgIGBgYGpzXG5cdCAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG5cdCAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcblx0ICB9KTtcblx0ICBgYGBcblx0ICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG5cdCAgIGBgYGpzXG5cdCAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG5cdCAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcblx0ICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG5cdCAgfSk7XG5cdCAgYGBgXG5cdCAgIFNpbXBsZSBFeGFtcGxlXG5cdCAgLS0tLS0tLS0tLS0tLS1cblx0ICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXHQgICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHJlc3VsdDtcblx0ICAgdHJ5IHtcblx0ICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcblx0ICAgIC8vIHN1Y2Nlc3Ncblx0ICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgLy8gZmFpbHVyZVxuXHQgIH1cblx0ICBgYGBcblx0ICAgRXJyYmFjayBFeGFtcGxlXG5cdCAgIGBgYGpzXG5cdCAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG5cdCAgICBpZiAoZXJyKSB7XG5cdCAgICAgIC8vIGZhaWx1cmVcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgIH1cblx0ICB9KTtcblx0ICBgYGBcblx0ICAgUHJvbWlzZSBFeGFtcGxlO1xuXHQgICBgYGBqYXZhc2NyaXB0XG5cdCAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgIC8vIHN1Y2Nlc3Ncblx0ICB9LCBmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgLy8gZmFpbHVyZVxuXHQgIH0pO1xuXHQgIGBgYFxuXHQgICBBZHZhbmNlZCBFeGFtcGxlXG5cdCAgLS0tLS0tLS0tLS0tLS1cblx0ICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXHQgICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IGF1dGhvciwgYm9va3M7XG5cdCAgIHRyeSB7XG5cdCAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG5cdCAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuXHQgICAgLy8gc3VjY2Vzc1xuXHQgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAvLyBmYWlsdXJlXG5cdCAgfVxuXHQgIGBgYFxuXHQgICBFcnJiYWNrIEV4YW1wbGVcblx0ICAgYGBganNcblx0ICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXHQgICB9XG5cdCAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG5cdCAgIH1cblx0ICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG5cdCAgICBpZiAoZXJyKSB7XG5cdCAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgLy8gZmFpbHVyZVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG5cdCAgICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gY2F0Y2goZXJyb3IpIHtcblx0ICAgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIGBgYFxuXHQgICBQcm9taXNlIEV4YW1wbGU7XG5cdCAgIGBgYGphdmFzY3JpcHRcblx0ICBmaW5kQXV0aG9yKCkuXG5cdCAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cblx0ICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuXHQgICAgICAvLyBmb3VuZCBib29rc1xuXHQgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgIH0pO1xuXHQgIGBgYFxuXHQgICBAbWV0aG9kIHRoZW5cblx0ICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuXHQgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAqL1xuXHRcblx0ICAvKipcblx0ICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG5cdCAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cblx0ICBgYGBqc1xuXHQgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcblx0ICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcblx0ICB9XG5cdCAgLy8gc3luY2hyb25vdXNcblx0ICB0cnkge1xuXHQgIGZpbmRBdXRob3IoKTtcblx0ICB9IGNhdGNoKHJlYXNvbikge1xuXHQgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgfVxuXHQgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcblx0ICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcblx0ICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgIH0pO1xuXHQgIGBgYFxuXHQgIEBtZXRob2QgY2F0Y2hcblx0ICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuXHQgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICBAcmV0dXJuIHtQcm9taXNlfVxuXHQgICovXG5cdFxuXHRcblx0ICBQcm9taXNlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuXHQgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICBgZmluYWxseWAgd2lsbCBiZSBpbnZva2VkIHJlZ2FyZGxlc3Mgb2YgdGhlIHByb21pc2UncyBmYXRlIGp1c3QgYXMgbmF0aXZlXG5cdCAgICB0cnkvY2F0Y2gvZmluYWxseSBiZWhhdmVzXG5cdCAgXG5cdCAgICBTeW5jaHJvbm91cyBleGFtcGxlOlxuXHQgIFxuXHQgICAgYGBganNcblx0ICAgIGZpbmRBdXRob3IoKSB7XG5cdCAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG5ldyBBdXRob3IoKTtcblx0ICAgIH1cblx0ICBcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBmaW5kQXV0aG9yKCk7IC8vIHN1Y2NlZWQgb3IgZmFpbFxuXHQgICAgfSBjYXRjaChlcnJvcikge1xuXHQgICAgICByZXR1cm4gZmluZE90aGVyQXV0aGVyKCk7XG5cdCAgICB9IGZpbmFsbHkge1xuXHQgICAgICAvLyBhbHdheXMgcnVuc1xuXHQgICAgICAvLyBkb2Vzbid0IGFmZmVjdCB0aGUgcmV0dXJuIHZhbHVlXG5cdCAgICB9XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIEFzeW5jaHJvbm91cyBleGFtcGxlOlxuXHQgIFxuXHQgICAgYGBganNcblx0ICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICByZXR1cm4gZmluZE90aGVyQXV0aGVyKCk7XG5cdCAgICB9KS5maW5hbGx5KGZ1bmN0aW9uKCl7XG5cdCAgICAgIC8vIGF1dGhvciB3YXMgZWl0aGVyIGZvdW5kLCBvciBub3Rcblx0ICAgIH0pO1xuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBAbWV0aG9kIGZpbmFsbHlcblx0ICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAgICBAcmV0dXJuIHtQcm9taXNlfVxuXHQgICovXG5cdFxuXHRcblx0ICBQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5ID0gZnVuY3Rpb24gX2ZpbmFsbHkoY2FsbGJhY2spIHtcblx0ICAgIHZhciBwcm9taXNlID0gdGhpcztcblx0ICAgIHZhciBjb25zdHJ1Y3RvciA9IHByb21pc2UuY29uc3RydWN0b3I7XG5cdFxuXHQgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgICB9KTtcblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhyb3cgcmVhc29uO1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBQcm9taXNlO1xuXHR9KCk7XG5cdFxuXHRQcm9taXNlJDEucHJvdG90eXBlLnRoZW4gPSB0aGVuO1xuXHRQcm9taXNlJDEuYWxsID0gYWxsO1xuXHRQcm9taXNlJDEucmFjZSA9IHJhY2U7XG5cdFByb21pc2UkMS5yZXNvbHZlID0gcmVzb2x2ZSQxO1xuXHRQcm9taXNlJDEucmVqZWN0ID0gcmVqZWN0JDE7XG5cdFByb21pc2UkMS5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyO1xuXHRQcm9taXNlJDEuX3NldEFzYXAgPSBzZXRBc2FwO1xuXHRQcm9taXNlJDEuX2FzYXAgPSBhc2FwO1xuXHRcblx0LypnbG9iYWwgc2VsZiovXG5cdGZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuXHQgIHZhciBsb2NhbCA9IHZvaWQgMDtcblx0XG5cdCAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICBsb2NhbCA9IGdsb2JhbDtcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgbG9jYWwgPSBzZWxmO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cdFxuXHQgIGlmIChQKSB7XG5cdCAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcblx0ICAgIH1cblx0XG5cdCAgICBpZiAocHJvbWlzZVRvU3RyaW5nID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZSQxO1xuXHR9XG5cdFxuXHQvLyBTdHJhbmdlIGNvbXBhdC4uXG5cdFByb21pc2UkMS5wb2x5ZmlsbCA9IHBvbHlmaWxsO1xuXHRQcm9taXNlJDEuUHJvbWlzZSA9IFByb21pc2UkMTtcblx0XG5cdHJldHVybiBQcm9taXNlJDE7XG5cdFxuXHR9KSkpO1xuXHRcblx0XG5cdFxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1lczYtcHJvbWlzZS5tYXBcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9ICgpKVxuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0XG5cdFxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdHByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblx0XG5cdHByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xuXHRwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0cHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBzZXRJbW1lZGlhdGUpIHsvKiFcblx0ICogVnVlLmpzIHYyLjUuMTVcblx0ICogKGMpIDIwMTQtMjAxOCBFdmFuIFlvdVxuXHQgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5cdCAqL1xuXHQoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHRcdCB0cnVlID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHRcdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdFx0KGdsb2JhbC5WdWUgPSBmYWN0b3J5KCkpO1xuXHR9KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGVtcHR5T2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG5cdFxuXHQvLyB0aGVzZSBoZWxwZXJzIHByb2R1Y2VzIGJldHRlciB2bSBjb2RlIGluIEpTIGVuZ2luZXMgZHVlIHRvIHRoZWlyXG5cdC8vIGV4cGxpY2l0bmVzcyBhbmQgZnVuY3Rpb24gaW5saW5pbmdcblx0ZnVuY3Rpb24gaXNVbmRlZiAodikge1xuXHQgIHJldHVybiB2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0RlZiAodikge1xuXHQgIHJldHVybiB2ICE9PSB1bmRlZmluZWQgJiYgdiAhPT0gbnVsbFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1RydWUgKHYpIHtcblx0ICByZXR1cm4gdiA9PT0gdHJ1ZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0ZhbHNlICh2KSB7XG5cdCAgcmV0dXJuIHYgPT09IGZhbHNlXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB2YWx1ZSBpcyBwcmltaXRpdmVcblx0ICovXG5cdGZ1bmN0aW9uIGlzUHJpbWl0aXZlICh2YWx1ZSkge1xuXHQgIHJldHVybiAoXG5cdCAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8XG5cdCAgICB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8XG5cdCAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N5bWJvbCcgfHxcblx0ICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nXG5cdCAgKVxuXHR9XG5cdFxuXHQvKipcblx0ICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG5cdCAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcblx0ICogaXMgYSBKU09OLWNvbXBsaWFudCB0eXBlLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QgKG9iaikge1xuXHQgIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCdcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgcmF3IHR5cGUgc3RyaW5nIG9mIGEgdmFsdWUgZS5nLiBbb2JqZWN0IE9iamVjdF1cblx0ICovXG5cdHZhciBfdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0ZnVuY3Rpb24gdG9SYXdUeXBlICh2YWx1ZSkge1xuXHQgIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlXG5cdCAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1BsYWluT2JqZWN0IChvYmopIHtcblx0ICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSdcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNSZWdFeHAgKHYpIHtcblx0ICByZXR1cm4gX3RvU3RyaW5nLmNhbGwodikgPT09ICdbb2JqZWN0IFJlZ0V4cF0nXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB2YWwgaXMgYSB2YWxpZCBhcnJheSBpbmRleC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzVmFsaWRBcnJheUluZGV4ICh2YWwpIHtcblx0ICB2YXIgbiA9IHBhcnNlRmxvYXQoU3RyaW5nKHZhbCkpO1xuXHQgIHJldHVybiBuID49IDAgJiYgTWF0aC5mbG9vcihuKSA9PT0gbiAmJiBpc0Zpbml0ZSh2YWwpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgdmFsdWUgdG8gYSBzdHJpbmcgdGhhdCBpcyBhY3R1YWxseSByZW5kZXJlZC5cblx0ICovXG5cdGZ1bmN0aW9uIHRvU3RyaW5nICh2YWwpIHtcblx0ICByZXR1cm4gdmFsID09IG51bGxcblx0ICAgID8gJydcblx0ICAgIDogdHlwZW9mIHZhbCA9PT0gJ29iamVjdCdcblx0ICAgICAgPyBKU09OLnN0cmluZ2lmeSh2YWwsIG51bGwsIDIpXG5cdCAgICAgIDogU3RyaW5nKHZhbClcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSBpbnB1dCB2YWx1ZSB0byBhIG51bWJlciBmb3IgcGVyc2lzdGVuY2UuXG5cdCAqIElmIHRoZSBjb252ZXJzaW9uIGZhaWxzLCByZXR1cm4gb3JpZ2luYWwgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9OdW1iZXIgKHZhbCkge1xuXHQgIHZhciBuID0gcGFyc2VGbG9hdCh2YWwpO1xuXHQgIHJldHVybiBpc05hTihuKSA/IHZhbCA6IG5cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1ha2UgYSBtYXAgYW5kIHJldHVybiBhIGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhIGtleVxuXHQgKiBpcyBpbiB0aGF0IG1hcC5cblx0ICovXG5cdGZ1bmN0aW9uIG1ha2VNYXAgKFxuXHQgIHN0cixcblx0ICBleHBlY3RzTG93ZXJDYXNlXG5cdCkge1xuXHQgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBsaXN0ID0gc3RyLnNwbGl0KCcsJyk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICBtYXBbbGlzdFtpXV0gPSB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gZXhwZWN0c0xvd2VyQ2FzZVxuXHQgICAgPyBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBtYXBbdmFsLnRvTG93ZXJDYXNlKCldOyB9XG5cdCAgICA6IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIG1hcFt2YWxdOyB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIHRhZyBpcyBhIGJ1aWx0LWluIHRhZy5cblx0ICovXG5cdHZhciBpc0J1aWx0SW5UYWcgPSBtYWtlTWFwKCdzbG90LGNvbXBvbmVudCcsIHRydWUpO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgYXR0cmlidXRlIGlzIGEgcmVzZXJ2ZWQgYXR0cmlidXRlLlxuXHQgKi9cblx0dmFyIGlzUmVzZXJ2ZWRBdHRyaWJ1dGUgPSBtYWtlTWFwKCdrZXkscmVmLHNsb3Qsc2xvdC1zY29wZSxpcycpO1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBpdGVtIGZyb20gYW4gYXJyYXlcblx0ICovXG5cdGZ1bmN0aW9uIHJlbW92ZSAoYXJyLCBpdGVtKSB7XG5cdCAgaWYgKGFyci5sZW5ndGgpIHtcblx0ICAgIHZhciBpbmRleCA9IGFyci5pbmRleE9mKGl0ZW0pO1xuXHQgICAgaWYgKGluZGV4ID4gLTEpIHtcblx0ICAgICAgcmV0dXJuIGFyci5zcGxpY2UoaW5kZXgsIDEpXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG5cdCAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHRmdW5jdGlvbiBoYXNPd24gKG9iaiwga2V5KSB7XG5cdCAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBjYWNoZWQgdmVyc2lvbiBvZiBhIHB1cmUgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBjYWNoZWQgKGZuKSB7XG5cdCAgdmFyIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICByZXR1cm4gKGZ1bmN0aW9uIGNhY2hlZEZuIChzdHIpIHtcblx0ICAgIHZhciBoaXQgPSBjYWNoZVtzdHJdO1xuXHQgICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpXG5cdCAgfSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbWVsaXplIGEgaHlwaGVuLWRlbGltaXRlZCBzdHJpbmcuXG5cdCAqL1xuXHR2YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblx0dmFyIGNhbWVsaXplID0gY2FjaGVkKGZ1bmN0aW9uIChzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgZnVuY3Rpb24gKF8sIGMpIHsgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJzsgfSlcblx0fSk7XG5cdFxuXHQvKipcblx0ICogQ2FwaXRhbGl6ZSBhIHN0cmluZy5cblx0ICovXG5cdHZhciBjYXBpdGFsaXplID0gY2FjaGVkKGZ1bmN0aW9uIChzdHIpIHtcblx0ICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpXG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEh5cGhlbmF0ZSBhIGNhbWVsQ2FzZSBzdHJpbmcuXG5cdCAqL1xuXHR2YXIgaHlwaGVuYXRlUkUgPSAvXFxCKFtBLVpdKS9nO1xuXHR2YXIgaHlwaGVuYXRlID0gY2FjaGVkKGZ1bmN0aW9uIChzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICctJDEnKS50b0xvd2VyQ2FzZSgpXG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFNpbXBsZSBiaW5kIHBvbHlmaWxsIGZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3Qgc3VwcG9ydCBpdC4uLiBlLmcuXG5cdCAqIFBoYW50b21KUyAxLnguIFRlY2huaWNhbGx5IHdlIGRvbid0IG5lZWQgdGhpcyBhbnltb3JlIHNpbmNlIG5hdGl2ZSBiaW5kIGlzXG5cdCAqIG5vdyBtb3JlIHBlcmZvcm1hbnQgaW4gbW9zdCBicm93c2VycywgYnV0IHJlbW92aW5nIGl0IHdvdWxkIGJlIGJyZWFraW5nIGZvclxuXHQgKiBjb2RlIHRoYXQgd2FzIGFibGUgdG8gcnVuIGluIFBoYW50b21KUyAxLngsIHNvIHRoaXMgbXVzdCBiZSBrZXB0IGZvclxuXHQgKiBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cblx0ICovXG5cdFxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRmdW5jdGlvbiBwb2x5ZmlsbEJpbmQgKGZuLCBjdHgpIHtcblx0ICBmdW5jdGlvbiBib3VuZEZuIChhKSB7XG5cdCAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICByZXR1cm4gbFxuXHQgICAgICA/IGwgPiAxXG5cdCAgICAgICAgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cylcblx0ICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKVxuXHQgICAgICA6IGZuLmNhbGwoY3R4KVxuXHQgIH1cblx0XG5cdCAgYm91bmRGbi5fbGVuZ3RoID0gZm4ubGVuZ3RoO1xuXHQgIHJldHVybiBib3VuZEZuXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5hdGl2ZUJpbmQgKGZuLCBjdHgpIHtcblx0ICByZXR1cm4gZm4uYmluZChjdHgpXG5cdH1cblx0XG5cdHZhciBiaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmRcblx0ICA/IG5hdGl2ZUJpbmRcblx0ICA6IHBvbHlmaWxsQmluZDtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvQXJyYXkgKGxpc3QsIHN0YXJ0KSB7XG5cdCAgc3RhcnQgPSBzdGFydCB8fCAwO1xuXHQgIHZhciBpID0gbGlzdC5sZW5ndGggLSBzdGFydDtcblx0ICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldFxuXHR9XG5cdFxuXHQvKipcblx0ICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuXHQgKi9cblx0ZnVuY3Rpb24gZXh0ZW5kICh0bywgX2Zyb20pIHtcblx0ICBmb3IgKHZhciBrZXkgaW4gX2Zyb20pIHtcblx0ICAgIHRvW2tleV0gPSBfZnJvbVtrZXldO1xuXHQgIH1cblx0ICByZXR1cm4gdG9cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIGFuIEFycmF5IG9mIE9iamVjdHMgaW50byBhIHNpbmdsZSBPYmplY3QuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b09iamVjdCAoYXJyKSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBpZiAoYXJyW2ldKSB7XG5cdCAgICAgIGV4dGVuZChyZXMsIGFycltpXSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBlcmZvcm0gbm8gb3BlcmF0aW9uLlxuXHQgKiBTdHViYmluZyBhcmdzIHRvIG1ha2UgRmxvdyBoYXBweSB3aXRob3V0IGxlYXZpbmcgdXNlbGVzcyB0cmFuc3BpbGVkIGNvZGVcblx0ICogd2l0aCAuLi5yZXN0IChodHRwczovL2Zsb3cub3JnL2Jsb2cvMjAxNy8wNS8wNy9TdHJpY3QtRnVuY3Rpb24tQ2FsbC1Bcml0eS8pXG5cdCAqL1xuXHRmdW5jdGlvbiBub29wIChhLCBiLCBjKSB7fVxuXHRcblx0LyoqXG5cdCAqIEFsd2F5cyByZXR1cm4gZmFsc2UuXG5cdCAqL1xuXHR2YXIgbm8gPSBmdW5jdGlvbiAoYSwgYiwgYykgeyByZXR1cm4gZmFsc2U7IH07XG5cdFxuXHQvKipcblx0ICogUmV0dXJuIHNhbWUgdmFsdWVcblx0ICovXG5cdHZhciBpZGVudGl0eSA9IGZ1bmN0aW9uIChfKSB7IHJldHVybiBfOyB9O1xuXHRcblx0LyoqXG5cdCAqIEdlbmVyYXRlIGEgc3RhdGljIGtleXMgc3RyaW5nIGZyb20gY29tcGlsZXIgbW9kdWxlcy5cblx0ICovXG5cdGZ1bmN0aW9uIGdlblN0YXRpY0tleXMgKG1vZHVsZXMpIHtcblx0ICByZXR1cm4gbW9kdWxlcy5yZWR1Y2UoZnVuY3Rpb24gKGtleXMsIG0pIHtcblx0ICAgIHJldHVybiBrZXlzLmNvbmNhdChtLnN0YXRpY0tleXMgfHwgW10pXG5cdCAgfSwgW10pLmpvaW4oJywnKVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG5cdCAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cblx0ICovXG5cdGZ1bmN0aW9uIGxvb3NlRXF1YWwgKGEsIGIpIHtcblx0ICBpZiAoYSA9PT0gYikgeyByZXR1cm4gdHJ1ZSB9XG5cdCAgdmFyIGlzT2JqZWN0QSA9IGlzT2JqZWN0KGEpO1xuXHQgIHZhciBpc09iamVjdEIgPSBpc09iamVjdChiKTtcblx0ICBpZiAoaXNPYmplY3RBICYmIGlzT2JqZWN0Qikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIGlzQXJyYXlBID0gQXJyYXkuaXNBcnJheShhKTtcblx0ICAgICAgdmFyIGlzQXJyYXlCID0gQXJyYXkuaXNBcnJheShiKTtcblx0ICAgICAgaWYgKGlzQXJyYXlBICYmIGlzQXJyYXlCKSB7XG5cdCAgICAgICAgcmV0dXJuIGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KGZ1bmN0aW9uIChlLCBpKSB7XG5cdCAgICAgICAgICByZXR1cm4gbG9vc2VFcXVhbChlLCBiW2ldKVxuXHQgICAgICAgIH0pXG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzQXJyYXlBICYmICFpc0FycmF5Qikge1xuXHQgICAgICAgIHZhciBrZXlzQSA9IE9iamVjdC5rZXlzKGEpO1xuXHQgICAgICAgIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKGIpO1xuXHQgICAgICAgIHJldHVybiBrZXlzQS5sZW5ndGggPT09IGtleXNCLmxlbmd0aCAmJiBrZXlzQS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICByZXR1cm4gbG9vc2VFcXVhbChhW2tleV0sIGJba2V5XSlcblx0ICAgICAgICB9KVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICghaXNPYmplY3RBICYmICFpc09iamVjdEIpIHtcblx0ICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxvb3NlSW5kZXhPZiAoYXJyLCB2YWwpIHtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7IHJldHVybiBpIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFbnN1cmUgYSBmdW5jdGlvbiBpcyBjYWxsZWQgb25seSBvbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gb25jZSAoZm4pIHtcblx0ICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghY2FsbGVkKSB7XG5cdCAgICAgIGNhbGxlZCA9IHRydWU7XG5cdCAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgU1NSX0FUVFIgPSAnZGF0YS1zZXJ2ZXItcmVuZGVyZWQnO1xuXHRcblx0dmFyIEFTU0VUX1RZUEVTID0gW1xuXHQgICdjb21wb25lbnQnLFxuXHQgICdkaXJlY3RpdmUnLFxuXHQgICdmaWx0ZXInXG5cdF07XG5cdFxuXHR2YXIgTElGRUNZQ0xFX0hPT0tTID0gW1xuXHQgICdiZWZvcmVDcmVhdGUnLFxuXHQgICdjcmVhdGVkJyxcblx0ICAnYmVmb3JlTW91bnQnLFxuXHQgICdtb3VudGVkJyxcblx0ICAnYmVmb3JlVXBkYXRlJyxcblx0ICAndXBkYXRlZCcsXG5cdCAgJ2JlZm9yZURlc3Ryb3knLFxuXHQgICdkZXN0cm95ZWQnLFxuXHQgICdhY3RpdmF0ZWQnLFxuXHQgICdkZWFjdGl2YXRlZCcsXG5cdCAgJ2Vycm9yQ2FwdHVyZWQnXG5cdF07XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBjb25maWcgPSAoe1xuXHQgIC8qKlxuXHQgICAqIE9wdGlvbiBtZXJnZSBzdHJhdGVnaWVzICh1c2VkIGluIGNvcmUvdXRpbC9vcHRpb25zKVxuXHQgICAqL1xuXHQgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgIG9wdGlvbk1lcmdlU3RyYXRlZ2llczogT2JqZWN0LmNyZWF0ZShudWxsKSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cblx0ICAgKi9cblx0ICBzaWxlbnQ6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBTaG93IHByb2R1Y3Rpb24gbW9kZSB0aXAgbWVzc2FnZSBvbiBib290P1xuXHQgICAqL1xuXHQgIHByb2R1Y3Rpb25UaXA6IFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIGVuYWJsZSBkZXZ0b29sc1xuXHQgICAqL1xuXHQgIGRldnRvb2xzOiBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byByZWNvcmQgcGVyZlxuXHQgICAqL1xuXHQgIHBlcmZvcm1hbmNlOiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogRXJyb3IgaGFuZGxlciBmb3Igd2F0Y2hlciBlcnJvcnNcblx0ICAgKi9cblx0ICBlcnJvckhhbmRsZXI6IG51bGwsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdhcm4gaGFuZGxlciBmb3Igd2F0Y2hlciB3YXJuc1xuXHQgICAqL1xuXHQgIHdhcm5IYW5kbGVyOiBudWxsLFxuXHRcblx0ICAvKipcblx0ICAgKiBJZ25vcmUgY2VydGFpbiBjdXN0b20gZWxlbWVudHNcblx0ICAgKi9cblx0ICBpZ25vcmVkRWxlbWVudHM6IFtdLFxuXHRcblx0ICAvKipcblx0ICAgKiBDdXN0b20gdXNlciBrZXkgYWxpYXNlcyBmb3Igdi1vblxuXHQgICAqL1xuXHQgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgIGtleUNvZGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBpZiBhIHRhZyBpcyByZXNlcnZlZCBzbyB0aGF0IGl0IGNhbm5vdCBiZSByZWdpc3RlcmVkIGFzIGFcblx0ICAgKiBjb21wb25lbnQuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uXG5cdCAgICovXG5cdCAgaXNSZXNlcnZlZFRhZzogbm8sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIGlmIGFuIGF0dHJpYnV0ZSBpcyByZXNlcnZlZCBzbyB0aGF0IGl0IGNhbm5vdCBiZSB1c2VkIGFzIGEgY29tcG9uZW50XG5cdCAgICogcHJvcC4gVGhpcyBpcyBwbGF0Zm9ybS1kZXBlbmRlbnQgYW5kIG1heSBiZSBvdmVyd3JpdHRlbi5cblx0ICAgKi9cblx0ICBpc1Jlc2VydmVkQXR0cjogbm8sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIGlmIGEgdGFnIGlzIGFuIHVua25vd24gZWxlbWVudC5cblx0ICAgKiBQbGF0Zm9ybS1kZXBlbmRlbnQuXG5cdCAgICovXG5cdCAgaXNVbmtub3duRWxlbWVudDogbm8sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCB0aGUgbmFtZXNwYWNlIG9mIGFuIGVsZW1lbnRcblx0ICAgKi9cblx0ICBnZXRUYWdOYW1lc3BhY2U6IG5vb3AsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFBhcnNlIHRoZSByZWFsIHRhZyBuYW1lIGZvciB0aGUgc3BlY2lmaWMgcGxhdGZvcm0uXG5cdCAgICovXG5cdCAgcGFyc2VQbGF0Zm9ybVRhZ05hbWU6IGlkZW50aXR5LFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBpZiBhbiBhdHRyaWJ1dGUgbXVzdCBiZSBib3VuZCB1c2luZyBwcm9wZXJ0eSwgZS5nLiB2YWx1ZVxuXHQgICAqIFBsYXRmb3JtLWRlcGVuZGVudC5cblx0ICAgKi9cblx0ICBtdXN0VXNlUHJvcDogbm8sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEV4cG9zZWQgZm9yIGxlZ2FjeSByZWFzb25zXG5cdCAgICovXG5cdCAgX2xpZmVjeWNsZUhvb2tzOiBMSUZFQ1lDTEVfSE9PS1Ncblx0fSlcblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuXHQgKi9cblx0ZnVuY3Rpb24gaXNSZXNlcnZlZCAoc3RyKSB7XG5cdCAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG5cdCAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1RlxuXHR9XG5cdFxuXHQvKipcblx0ICogRGVmaW5lIGEgcHJvcGVydHkuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWYgKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIHZhbHVlOiB2YWwsXG5cdCAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG5cdCAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2Ugc2ltcGxlIHBhdGguXG5cdCAqL1xuXHR2YXIgYmFpbFJFID0gL1teXFx3LiRdLztcblx0ZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7XG5cdCAgaWYgKGJhaWxSRS50ZXN0KHBhdGgpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLicpO1xuXHQgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmICghb2JqKSB7IHJldHVybiB9XG5cdCAgICAgIG9iaiA9IG9ialtzZWdtZW50c1tpXV07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb2JqXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIGNhbiB3ZSB1c2UgX19wcm90b19fP1xuXHR2YXIgaGFzUHJvdG8gPSAnX19wcm90b19fJyBpbiB7fTtcblx0XG5cdC8vIEJyb3dzZXIgZW52aXJvbm1lbnQgc25pZmZpbmdcblx0dmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXHR2YXIgaW5XZWV4ID0gdHlwZW9mIFdYRW52aXJvbm1lbnQgIT09ICd1bmRlZmluZWQnICYmICEhV1hFbnZpcm9ubWVudC5wbGF0Zm9ybTtcblx0dmFyIHdlZXhQbGF0Zm9ybSA9IGluV2VleCAmJiBXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCk7XG5cdHZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuXHR2YXIgaXNJRSA9IFVBICYmIC9tc2llfHRyaWRlbnQvLnRlc3QoVUEpO1xuXHR2YXIgaXNJRTkgPSBVQSAmJiBVQS5pbmRleE9mKCdtc2llIDkuMCcpID4gMDtcblx0dmFyIGlzRWRnZSA9IFVBICYmIFVBLmluZGV4T2YoJ2VkZ2UvJykgPiAwO1xuXHR2YXIgaXNBbmRyb2lkID0gKFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDApIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdhbmRyb2lkJyk7XG5cdHZhciBpc0lPUyA9IChVQSAmJiAvaXBob25lfGlwYWR8aXBvZHxpb3MvLnRlc3QoVUEpKSB8fCAod2VleFBsYXRmb3JtID09PSAnaW9zJyk7XG5cdHZhciBpc0Nocm9tZSA9IFVBICYmIC9jaHJvbWVcXC9cXGQrLy50ZXN0KFVBKSAmJiAhaXNFZGdlO1xuXHRcblx0Ly8gRmlyZWZveCBoYXMgYSBcIndhdGNoXCIgZnVuY3Rpb24gb24gT2JqZWN0LnByb3RvdHlwZS4uLlxuXHR2YXIgbmF0aXZlV2F0Y2ggPSAoe30pLndhdGNoO1xuXHRcblx0dmFyIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuXHRpZiAoaW5Ccm93c2VyKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBvcHRzID0ge307XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3B0cywgJ3Bhc3NpdmUnLCAoe1xuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICAgICAgICBzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9KSk7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mbG93L2lzc3Vlcy8yODVcblx0ICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0LXBhc3NpdmUnLCBudWxsLCBvcHRzKTtcblx0ICB9IGNhdGNoIChlKSB7fVxuXHR9XG5cdFxuXHQvLyB0aGlzIG5lZWRzIHRvIGJlIGxhenktZXZhbGVkIGJlY2F1c2UgdnVlIG1heSBiZSByZXF1aXJlZCBiZWZvcmVcblx0Ly8gdnVlLXNlcnZlci1yZW5kZXJlciBjYW4gc2V0IFZVRV9FTlZcblx0dmFyIF9pc1NlcnZlcjtcblx0dmFyIGlzU2VydmVyUmVuZGVyaW5nID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmIChfaXNTZXJ2ZXIgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIWluQnJvd3NlciAmJiAhaW5XZWV4ICYmIHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIC8vIGRldGVjdCBwcmVzZW5jZSBvZiB2dWUtc2VydmVyLXJlbmRlcmVyIGFuZCBhdm9pZFxuXHQgICAgICAvLyBXZWJwYWNrIHNoaW1taW5nIHRoZSBwcm9jZXNzXG5cdCAgICAgIF9pc1NlcnZlciA9IGdsb2JhbFsncHJvY2VzcyddLmVudi5WVUVfRU5WID09PSAnc2VydmVyJztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIF9pc1NlcnZlciA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gX2lzU2VydmVyXG5cdH07XG5cdFxuXHQvLyBkZXRlY3QgZGV2dG9vbHNcblx0dmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXHRcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ZnVuY3Rpb24gaXNOYXRpdmUgKEN0b3IpIHtcblx0ICByZXR1cm4gdHlwZW9mIEN0b3IgPT09ICdmdW5jdGlvbicgJiYgL25hdGl2ZSBjb2RlLy50ZXN0KEN0b3IudG9TdHJpbmcoKSlcblx0fVxuXHRcblx0dmFyIGhhc1N5bWJvbCA9XG5cdCAgdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoU3ltYm9sKSAmJlxuXHQgIHR5cGVvZiBSZWZsZWN0ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShSZWZsZWN0Lm93bktleXMpO1xuXHRcblx0dmFyIF9TZXQ7XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLyAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0aWYgKHR5cGVvZiBTZXQgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFNldCkpIHtcblx0ICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cblx0ICBfU2V0ID0gU2V0O1xuXHR9IGVsc2Uge1xuXHQgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cblx0ICBfU2V0ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNldCAoKSB7XG5cdCAgICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgIH1cblx0ICAgIFNldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gaGFzIChrZXkpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gPT09IHRydWVcblx0ICAgIH07XG5cdCAgICBTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCAoa2V5KSB7XG5cdCAgICAgIHRoaXMuc2V0W2tleV0gPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIFNldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhciAoKSB7XG5cdCAgICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNldDtcblx0ICB9KCkpO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciB3YXJuID0gbm9vcDtcblx0dmFyIHRpcCA9IG5vb3A7XG5cdHZhciBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlID0gKG5vb3ApOyAvLyB3b3JrIGFyb3VuZCBmbG93IGNoZWNrXG5cdHZhciBmb3JtYXRDb21wb25lbnROYW1lID0gKG5vb3ApO1xuXHRcblx0e1xuXHQgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXHQgIHZhciBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXSkoXFx3KS9nO1xuXHQgIHZhciBjbGFzc2lmeSA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0clxuXHQgICAgLnJlcGxhY2UoY2xhc3NpZnlSRSwgZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMudG9VcHBlckNhc2UoKTsgfSlcblx0ICAgIC5yZXBsYWNlKC9bLV9dL2csICcnKTsgfTtcblx0XG5cdCAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG5cdCAgICB2YXIgdHJhY2UgPSB2bSA/IGdlbmVyYXRlQ29tcG9uZW50VHJhY2Uodm0pIDogJyc7XG5cdFxuXHQgICAgaWYgKGNvbmZpZy53YXJuSGFuZGxlcikge1xuXHQgICAgICBjb25maWcud2FybkhhbmRsZXIuY2FsbChudWxsLCBtc2csIHZtLCB0cmFjZSk7XG5cdCAgICB9IGVsc2UgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkge1xuXHQgICAgICBjb25zb2xlLmVycm9yKChcIltWdWUgd2Fybl06IFwiICsgbXNnICsgdHJhY2UpKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICB0aXAgPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuXHQgICAgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkge1xuXHQgICAgICBjb25zb2xlLndhcm4oXCJbVnVlIHRpcF06IFwiICsgbXNnICsgKFxuXHQgICAgICAgIHZtID8gZ2VuZXJhdGVDb21wb25lbnRUcmFjZSh2bSkgOiAnJ1xuXHQgICAgICApKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtLCBpbmNsdWRlRmlsZSkge1xuXHQgICAgaWYgKHZtLiRyb290ID09PSB2bSkge1xuXHQgICAgICByZXR1cm4gJzxSb290Pidcblx0ICAgIH1cblx0ICAgIHZhciBvcHRpb25zID0gdHlwZW9mIHZtID09PSAnZnVuY3Rpb24nICYmIHZtLmNpZCAhPSBudWxsXG5cdCAgICAgID8gdm0ub3B0aW9uc1xuXHQgICAgICA6IHZtLl9pc1Z1ZVxuXHQgICAgICAgID8gdm0uJG9wdGlvbnMgfHwgdm0uY29uc3RydWN0b3Iub3B0aW9uc1xuXHQgICAgICAgIDogdm0gfHwge307XG5cdCAgICB2YXIgbmFtZSA9IG9wdGlvbnMubmFtZSB8fCBvcHRpb25zLl9jb21wb25lbnRUYWc7XG5cdCAgICB2YXIgZmlsZSA9IG9wdGlvbnMuX19maWxlO1xuXHQgICAgaWYgKCFuYW1lICYmIGZpbGUpIHtcblx0ICAgICAgdmFyIG1hdGNoID0gZmlsZS5tYXRjaCgvKFteL1xcXFxdKylcXC52dWUkLyk7XG5cdCAgICAgIG5hbWUgPSBtYXRjaCAmJiBtYXRjaFsxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gKFxuXHQgICAgICAobmFtZSA/IChcIjxcIiArIChjbGFzc2lmeShuYW1lKSkgKyBcIj5cIikgOiBcIjxBbm9ueW1vdXM+XCIpICtcblx0ICAgICAgKGZpbGUgJiYgaW5jbHVkZUZpbGUgIT09IGZhbHNlID8gKFwiIGF0IFwiICsgZmlsZSkgOiAnJylcblx0ICAgIClcblx0ICB9O1xuXHRcblx0ICB2YXIgcmVwZWF0ID0gZnVuY3Rpb24gKHN0ciwgbikge1xuXHQgICAgdmFyIHJlcyA9ICcnO1xuXHQgICAgd2hpbGUgKG4pIHtcblx0ICAgICAgaWYgKG4gJSAyID09PSAxKSB7IHJlcyArPSBzdHI7IH1cblx0ICAgICAgaWYgKG4gPiAxKSB7IHN0ciArPSBzdHI7IH1cblx0ICAgICAgbiA+Pj0gMTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXNcblx0ICB9O1xuXHRcblx0ICBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgICBpZiAodm0uX2lzVnVlICYmIHZtLiRwYXJlbnQpIHtcblx0ICAgICAgdmFyIHRyZWUgPSBbXTtcblx0ICAgICAgdmFyIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA9IDA7XG5cdCAgICAgIHdoaWxlICh2bSkge1xuXHQgICAgICAgIGlmICh0cmVlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgIHZhciBsYXN0ID0gdHJlZVt0cmVlLmxlbmd0aCAtIDFdO1xuXHQgICAgICAgICAgaWYgKGxhc3QuY29uc3RydWN0b3IgPT09IHZtLmNvbnN0cnVjdG9yKSB7XG5cdCAgICAgICAgICAgIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSsrO1xuXHQgICAgICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA+IDApIHtcblx0ICAgICAgICAgICAgdHJlZVt0cmVlLmxlbmd0aCAtIDFdID0gW2xhc3QsIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZV07XG5cdCAgICAgICAgICAgIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA9IDA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRyZWUucHVzaCh2bSk7XG5cdCAgICAgICAgdm0gPSB2bS4kcGFyZW50O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiAnXFxuXFxuZm91bmQgaW5cXG5cXG4nICsgdHJlZVxuXHQgICAgICAgIC5tYXAoZnVuY3Rpb24gKHZtLCBpKSB7IHJldHVybiAoXCJcIiArIChpID09PSAwID8gJy0tLT4gJyA6IHJlcGVhdCgnICcsIDUgKyBpICogMikpICsgKEFycmF5LmlzQXJyYXkodm0pXG5cdCAgICAgICAgICAgID8gKChmb3JtYXRDb21wb25lbnROYW1lKHZtWzBdKSkgKyBcIi4uLiAoXCIgKyAodm1bMV0pICsgXCIgcmVjdXJzaXZlIGNhbGxzKVwiKVxuXHQgICAgICAgICAgICA6IGZvcm1hdENvbXBvbmVudE5hbWUodm0pKSk7IH0pXG5cdCAgICAgICAgLmpvaW4oJ1xcbicpXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gKFwiXFxuXFxuKGZvdW5kIGluIFwiICsgKGZvcm1hdENvbXBvbmVudE5hbWUodm0pKSArIFwiKVwiKVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0XG5cdHZhciB1aWQgPSAwO1xuXHRcblx0LyoqXG5cdCAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuXHQgKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuXHQgKi9cblx0dmFyIERlcCA9IGZ1bmN0aW9uIERlcCAoKSB7XG5cdCAgdGhpcy5pZCA9IHVpZCsrO1xuXHQgIHRoaXMuc3VicyA9IFtdO1xuXHR9O1xuXHRcblx0RGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiBhZGRTdWIgKHN1Yikge1xuXHQgIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG5cdH07XG5cdFxuXHREZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIHJlbW92ZVN1YiAoc3ViKSB7XG5cdCAgcmVtb3ZlKHRoaXMuc3Vicywgc3ViKTtcblx0fTtcblx0XG5cdERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gZGVwZW5kICgpIHtcblx0ICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0RGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiBub3RpZnkgKCkge1xuXHQgIC8vIHN0YWJpbGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG5cdCAgdmFyIHN1YnMgPSB0aGlzLnN1YnMuc2xpY2UoKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHN1YnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cblx0Ly8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuXHQvLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cblx0RGVwLnRhcmdldCA9IG51bGw7XG5cdHZhciB0YXJnZXRTdGFjayA9IFtdO1xuXHRcblx0ZnVuY3Rpb24gcHVzaFRhcmdldCAoX3RhcmdldCkge1xuXHQgIGlmIChEZXAudGFyZ2V0KSB7IHRhcmdldFN0YWNrLnB1c2goRGVwLnRhcmdldCk7IH1cblx0ICBEZXAudGFyZ2V0ID0gX3RhcmdldDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcG9wVGFyZ2V0ICgpIHtcblx0ICBEZXAudGFyZ2V0ID0gdGFyZ2V0U3RhY2sucG9wKCk7XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIFZOb2RlID0gZnVuY3Rpb24gVk5vZGUgKFxuXHQgIHRhZyxcblx0ICBkYXRhLFxuXHQgIGNoaWxkcmVuLFxuXHQgIHRleHQsXG5cdCAgZWxtLFxuXHQgIGNvbnRleHQsXG5cdCAgY29tcG9uZW50T3B0aW9ucyxcblx0ICBhc3luY0ZhY3Rvcnlcblx0KSB7XG5cdCAgdGhpcy50YWcgPSB0YWc7XG5cdCAgdGhpcy5kYXRhID0gZGF0YTtcblx0ICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG5cdCAgdGhpcy50ZXh0ID0gdGV4dDtcblx0ICB0aGlzLmVsbSA9IGVsbTtcblx0ICB0aGlzLm5zID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cdCAgdGhpcy5mbkNvbnRleHQgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5mbk9wdGlvbnMgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5mblNjb3BlSWQgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5rZXkgPSBkYXRhICYmIGRhdGEua2V5O1xuXHQgIHRoaXMuY29tcG9uZW50T3B0aW9ucyA9IGNvbXBvbmVudE9wdGlvbnM7XG5cdCAgdGhpcy5jb21wb25lbnRJbnN0YW5jZSA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLnJhdyA9IGZhbHNlO1xuXHQgIHRoaXMuaXNTdGF0aWMgPSBmYWxzZTtcblx0ICB0aGlzLmlzUm9vdEluc2VydCA9IHRydWU7XG5cdCAgdGhpcy5pc0NvbW1lbnQgPSBmYWxzZTtcblx0ICB0aGlzLmlzQ2xvbmVkID0gZmFsc2U7XG5cdCAgdGhpcy5pc09uY2UgPSBmYWxzZTtcblx0ICB0aGlzLmFzeW5jRmFjdG9yeSA9IGFzeW5jRmFjdG9yeTtcblx0ICB0aGlzLmFzeW5jTWV0YSA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLmlzQXN5bmNQbGFjZWhvbGRlciA9IGZhbHNlO1xuXHR9O1xuXHRcblx0dmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgY2hpbGQ6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTtcblx0XG5cdC8vIERFUFJFQ0FURUQ6IGFsaWFzIGZvciBjb21wb25lbnRJbnN0YW5jZSBmb3IgYmFja3dhcmRzIGNvbXBhdC5cblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0cHJvdG90eXBlQWNjZXNzb3JzLmNoaWxkLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZVxuXHR9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFZOb2RlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cdFxuXHR2YXIgY3JlYXRlRW1wdHlWTm9kZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdCAgaWYgKCB0ZXh0ID09PSB2b2lkIDAgKSB0ZXh0ID0gJyc7XG5cdFxuXHQgIHZhciBub2RlID0gbmV3IFZOb2RlKCk7XG5cdCAgbm9kZS50ZXh0ID0gdGV4dDtcblx0ICBub2RlLmlzQ29tbWVudCA9IHRydWU7XG5cdCAgcmV0dXJuIG5vZGVcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVRleHRWTm9kZSAodmFsKSB7XG5cdCAgcmV0dXJuIG5ldyBWTm9kZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBTdHJpbmcodmFsKSlcblx0fVxuXHRcblx0Ly8gb3B0aW1pemVkIHNoYWxsb3cgY2xvbmVcblx0Ly8gdXNlZCBmb3Igc3RhdGljIG5vZGVzIGFuZCBzbG90IG5vZGVzIGJlY2F1c2UgdGhleSBtYXkgYmUgcmV1c2VkIGFjcm9zc1xuXHQvLyBtdWx0aXBsZSByZW5kZXJzLCBjbG9uaW5nIHRoZW0gYXZvaWRzIGVycm9ycyB3aGVuIERPTSBtYW5pcHVsYXRpb25zIHJlbHlcblx0Ly8gb24gdGhlaXIgZWxtIHJlZmVyZW5jZS5cblx0ZnVuY3Rpb24gY2xvbmVWTm9kZSAodm5vZGUpIHtcblx0ICB2YXIgY2xvbmVkID0gbmV3IFZOb2RlKFxuXHQgICAgdm5vZGUudGFnLFxuXHQgICAgdm5vZGUuZGF0YSxcblx0ICAgIHZub2RlLmNoaWxkcmVuLFxuXHQgICAgdm5vZGUudGV4dCxcblx0ICAgIHZub2RlLmVsbSxcblx0ICAgIHZub2RlLmNvbnRleHQsXG5cdCAgICB2bm9kZS5jb21wb25lbnRPcHRpb25zLFxuXHQgICAgdm5vZGUuYXN5bmNGYWN0b3J5XG5cdCAgKTtcblx0ICBjbG9uZWQubnMgPSB2bm9kZS5ucztcblx0ICBjbG9uZWQuaXNTdGF0aWMgPSB2bm9kZS5pc1N0YXRpYztcblx0ICBjbG9uZWQua2V5ID0gdm5vZGUua2V5O1xuXHQgIGNsb25lZC5pc0NvbW1lbnQgPSB2bm9kZS5pc0NvbW1lbnQ7XG5cdCAgY2xvbmVkLmZuQ29udGV4dCA9IHZub2RlLmZuQ29udGV4dDtcblx0ICBjbG9uZWQuZm5PcHRpb25zID0gdm5vZGUuZm5PcHRpb25zO1xuXHQgIGNsb25lZC5mblNjb3BlSWQgPSB2bm9kZS5mblNjb3BlSWQ7XG5cdCAgY2xvbmVkLmlzQ2xvbmVkID0gdHJ1ZTtcblx0ICByZXR1cm4gY2xvbmVkXG5cdH1cblx0XG5cdC8qXG5cdCAqIG5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBwbGF5IHdlbGwgd2l0aFxuXHQgKiBkeW5hbWljYWxseSBhY2Nlc3NpbmcgbWV0aG9kcyBvbiBBcnJheSBwcm90b3R5cGVcblx0ICovXG5cdFxuXHR2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0dmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90byk7XG5cdFxuXHR2YXIgbWV0aG9kc1RvUGF0Y2ggPSBbXG5cdCAgJ3B1c2gnLFxuXHQgICdwb3AnLFxuXHQgICdzaGlmdCcsXG5cdCAgJ3Vuc2hpZnQnLFxuXHQgICdzcGxpY2UnLFxuXHQgICdzb3J0Jyxcblx0ICAncmV2ZXJzZSdcblx0XTtcblx0XG5cdC8qKlxuXHQgKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcblx0ICovXG5cdG1ldGhvZHNUb1BhdGNoLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuXHQgIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuXHQgIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXTtcblx0ICBkZWYoYXJyYXlNZXRob2RzLCBtZXRob2QsIGZ1bmN0aW9uIG11dGF0b3IgKCkge1xuXHQgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07XG5cdFxuXHQgICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgdmFyIG9iID0gdGhpcy5fX29iX187XG5cdCAgICB2YXIgaW5zZXJ0ZWQ7XG5cdCAgICBzd2l0Y2ggKG1ldGhvZCkge1xuXHQgICAgICBjYXNlICdwdXNoJzpcblx0ICAgICAgY2FzZSAndW5zaGlmdCc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuXHQgICAgICAgIGJyZWFrXG5cdCAgICAgIGNhc2UgJ3NwbGljZSc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuXHQgICAgICAgIGJyZWFrXG5cdCAgICB9XG5cdCAgICBpZiAoaW5zZXJ0ZWQpIHsgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTsgfVxuXHQgICAgLy8gbm90aWZ5IGNoYW5nZVxuXHQgICAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgICAgcmV0dXJuIHJlc3VsdFxuXHQgIH0pO1xuXHR9KTtcblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cdFxuXHQvKipcblx0ICogSW4gc29tZSBjYXNlcyB3ZSBtYXkgd2FudCB0byBkaXNhYmxlIG9ic2VydmF0aW9uIGluc2lkZSBhIGNvbXBvbmVudCdzXG5cdCAqIHVwZGF0ZSBjb21wdXRhdGlvbi5cblx0ICovXG5cdHZhciBzaG91bGRPYnNlcnZlID0gdHJ1ZTtcblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZU9ic2VydmluZyAodmFsdWUpIHtcblx0ICBzaG91bGRPYnNlcnZlID0gdmFsdWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPYnNlcnZlciBjbGFzcyB0aGF0IGlzIGF0dGFjaGVkIHRvIGVhY2ggb2JzZXJ2ZWRcblx0ICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGhlIHRhcmdldFxuXHQgKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuXHQgKiBjb2xsZWN0IGRlcGVuZGVuY2llcyBhbmQgZGlzcGF0Y2ggdXBkYXRlcy5cblx0ICovXG5cdHZhciBPYnNlcnZlciA9IGZ1bmN0aW9uIE9ic2VydmVyICh2YWx1ZSkge1xuXHQgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcblx0ICB0aGlzLnZtQ291bnQgPSAwO1xuXHQgIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuXHQgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90b1xuXHQgICAgICA/IHByb3RvQXVnbWVudFxuXHQgICAgICA6IGNvcHlBdWdtZW50O1xuXHQgICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuXHQgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLndhbGsodmFsdWUpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cblx0ICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG5cdCAqIHZhbHVlIHR5cGUgaXMgT2JqZWN0LlxuXHQgKi9cblx0T2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiB3YWxrIChvYmopIHtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZShvYmosIGtleXNbaV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cblx0ICovXG5cdE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiBvYnNlcnZlQXJyYXkgKGl0ZW1zKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIGhlbHBlcnNcblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG5cdCAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG5cdCAqL1xuXHRmdW5jdGlvbiBwcm90b0F1Z21lbnQgKHRhcmdldCwgc3JjLCBrZXlzKSB7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblx0ICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tcHJvdG8gKi9cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuXHQgKiBoaWRkZW4gcHJvcGVydGllcy5cblx0ICovXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGZ1bmN0aW9uIGNvcHlBdWdtZW50ICh0YXJnZXQsIHNyYywga2V5cykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXR0ZW1wdCB0byBjcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgZm9yIGEgdmFsdWUsXG5cdCAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG5cdCAqIG9yIHRoZSBleGlzdGluZyBvYnNlcnZlciBpZiB0aGUgdmFsdWUgYWxyZWFkeSBoYXMgb25lLlxuXHQgKi9cblx0ZnVuY3Rpb24gb2JzZXJ2ZSAodmFsdWUsIGFzUm9vdERhdGEpIHtcblx0ICBpZiAoIWlzT2JqZWN0KHZhbHVlKSB8fCB2YWx1ZSBpbnN0YW5jZW9mIFZOb2RlKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIG9iO1xuXHQgIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuXHQgICAgb2IgPSB2YWx1ZS5fX29iX187XG5cdCAgfSBlbHNlIGlmIChcblx0ICAgIHNob3VsZE9ic2VydmUgJiZcblx0ICAgICFpc1NlcnZlclJlbmRlcmluZygpICYmXG5cdCAgICAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmXG5cdCAgICBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJlxuXHQgICAgIXZhbHVlLl9pc1Z1ZVxuXHQgICkge1xuXHQgICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuXHQgIH1cblx0ICBpZiAoYXNSb290RGF0YSAmJiBvYikge1xuXHQgICAgb2Iudm1Db3VudCsrO1xuXHQgIH1cblx0ICByZXR1cm4gb2Jcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cblx0ICovXG5cdGZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlIChcblx0ICBvYmosXG5cdCAga2V5LFxuXHQgIHZhbCxcblx0ICBjdXN0b21TZXR0ZXIsXG5cdCAgc2hhbGxvd1xuXHQpIHtcblx0ICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXHRcblx0ICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcblx0ICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcblx0ICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuXHQgIGlmICghZ2V0dGVyICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcblx0ICAgIHZhbCA9IG9ialtrZXldO1xuXHQgIH1cblx0ICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXHRcblx0ICB2YXIgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUodmFsKTtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyICgpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgaWYgKERlcC50YXJnZXQpIHtcblx0ICAgICAgICBkZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgaWYgKGNoaWxkT2IpIHtcblx0ICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgICAgICAgIGRlcGVuZEFycmF5KHZhbHVlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbHVlXG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlciAobmV3VmFsKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlbGYtY29tcGFyZSAqL1xuXHQgICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSB8fCAobmV3VmFsICE9PSBuZXdWYWwgJiYgdmFsdWUgIT09IHZhbHVlKSkge1xuXHQgICAgICAgIHJldHVyblxuXHQgICAgICB9XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tc2VsZi1jb21wYXJlICovXG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjdXN0b21TZXR0ZXIpIHtcblx0ICAgICAgICBjdXN0b21TZXR0ZXIoKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoc2V0dGVyKSB7XG5cdCAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhbCA9IG5ld1ZhbDtcblx0ICAgICAgfVxuXHQgICAgICBjaGlsZE9iID0gIXNoYWxsb3cgJiYgb2JzZXJ2ZShuZXdWYWwpO1xuXHQgICAgICBkZXAubm90aWZ5KCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgYSBwcm9wZXJ0eSBvbiBhbiBvYmplY3QuIEFkZHMgdGhlIG5ldyBwcm9wZXJ0eSBhbmRcblx0ICogdHJpZ2dlcnMgY2hhbmdlIG5vdGlmaWNhdGlvbiBpZiB0aGUgcHJvcGVydHkgZG9lc24ndFxuXHQgKiBhbHJlYWR5IGV4aXN0LlxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0ICh0YXJnZXQsIGtleSwgdmFsKSB7XG5cdCAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAhQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmXG5cdCAgICAhaXNPYmplY3QodGFyZ2V0KVxuXHQgICkge1xuXHQgICAgd2FybigoXCJDYW5ub3Qgc2V0IHJlYWN0aXZlIHByb3BlcnR5IG9uIG5vbi1vYmplY3QvYXJyYXkgdmFsdWU6IFwiICsgdGFyZ2V0KSk7XG5cdCAgfVxuXHQgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkgJiYgaXNWYWxpZEFycmF5SW5kZXgoa2V5KSkge1xuXHQgICAgdGFyZ2V0Lmxlbmd0aCA9IE1hdGgubWF4KHRhcmdldC5sZW5ndGgsIGtleSk7XG5cdCAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSwgdmFsKTtcblx0ICAgIHJldHVybiB2YWxcblx0ICB9XG5cdCAgaWYgKGtleSBpbiB0YXJnZXQgJiYgIShrZXkgaW4gT2JqZWN0LnByb3RvdHlwZSkpIHtcblx0ICAgIHRhcmdldFtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuIHZhbFxuXHQgIH1cblx0ICB2YXIgb2IgPSAodGFyZ2V0KS5fX29iX187XG5cdCAgaWYgKHRhcmdldC5faXNWdWUgfHwgKG9iICYmIG9iLnZtQ291bnQpKSB7XG5cdCAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAnQXZvaWQgYWRkaW5nIHJlYWN0aXZlIHByb3BlcnRpZXMgdG8gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArXG5cdCAgICAgICdhdCBydW50aW1lIC0gZGVjbGFyZSBpdCB1cGZyb250IGluIHRoZSBkYXRhIG9wdGlvbi4nXG5cdCAgICApO1xuXHQgICAgcmV0dXJuIHZhbFxuXHQgIH1cblx0ICBpZiAoIW9iKSB7XG5cdCAgICB0YXJnZXRba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybiB2YWxcblx0ICB9XG5cdCAgZGVmaW5lUmVhY3RpdmUob2IudmFsdWUsIGtleSwgdmFsKTtcblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHQvKipcblx0ICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cblx0ICovXG5cdGZ1bmN0aW9uIGRlbCAodGFyZ2V0LCBrZXkpIHtcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICFBcnJheS5pc0FycmF5KHRhcmdldCkgJiZcblx0ICAgICFpc09iamVjdCh0YXJnZXQpXG5cdCAgKSB7XG5cdCAgICB3YXJuKChcIkNhbm5vdCBkZWxldGUgcmVhY3RpdmUgcHJvcGVydHkgb24gbm9uLW9iamVjdC9hcnJheSB2YWx1ZTogXCIgKyB0YXJnZXQpKTtcblx0ICB9XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSAmJiBpc1ZhbGlkQXJyYXlJbmRleChrZXkpKSB7XG5cdCAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSk7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIG9iID0gKHRhcmdldCkuX19vYl9fO1xuXHQgIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkge1xuXHQgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgJ0F2b2lkIGRlbGV0aW5nIHByb3BlcnRpZXMgb24gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArXG5cdCAgICAgICctIGp1c3Qgc2V0IGl0IHRvIG51bGwuJ1xuXHQgICAgKTtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBpZiAoIWhhc093bih0YXJnZXQsIGtleSkpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBkZWxldGUgdGFyZ2V0W2tleV07XG5cdCAgaWYgKCFvYikge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIG9iLmRlcC5ub3RpZnkoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbGxlY3QgZGVwZW5kZW5jaWVzIG9uIGFycmF5IGVsZW1lbnRzIHdoZW4gdGhlIGFycmF5IGlzIHRvdWNoZWQsIHNpbmNlXG5cdCAqIHdlIGNhbm5vdCBpbnRlcmNlcHQgYXJyYXkgZWxlbWVudCBhY2Nlc3MgbGlrZSBwcm9wZXJ0eSBnZXR0ZXJzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGVwZW5kQXJyYXkgKHZhbHVlKSB7XG5cdCAgZm9yICh2YXIgZSA9ICh2b2lkIDApLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZSA9IHZhbHVlW2ldO1xuXHQgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkge1xuXHQgICAgICBkZXBlbmRBcnJheShlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcblx0ICogaG93IHRvIG1lcmdlIGEgcGFyZW50IG9wdGlvbiB2YWx1ZSBhbmQgYSBjaGlsZCBvcHRpb25cblx0ICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG5cdCAqL1xuXHR2YXIgc3RyYXRzID0gY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztcblx0XG5cdC8qKlxuXHQgKiBPcHRpb25zIHdpdGggcmVzdHJpY3Rpb25zXG5cdCAqL1xuXHR7XG5cdCAgc3RyYXRzLmVsID0gc3RyYXRzLnByb3BzRGF0YSA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkLCB2bSwga2V5KSB7XG5cdCAgICBpZiAoIXZtKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgXCJvcHRpb24gXFxcIlwiICsga2V5ICsgXCJcXFwiIGNhbiBvbmx5IGJlIHVzZWQgZHVyaW5nIGluc3RhbmNlIFwiICtcblx0ICAgICAgICAnY3JlYXRpb24gd2l0aCB0aGUgYG5ld2Aga2V5d29yZC4nXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGVmYXVsdFN0cmF0KHBhcmVudCwgY2hpbGQpXG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VEYXRhICh0bywgZnJvbSkge1xuXHQgIGlmICghZnJvbSkgeyByZXR1cm4gdG8gfVxuXHQgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgdG9WYWwgPSB0b1trZXldO1xuXHQgICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcblx0ICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG5cdCAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh0b1ZhbCkgJiYgaXNQbGFpbk9iamVjdChmcm9tVmFsKSkge1xuXHQgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdG9cblx0fVxuXHRcblx0LyoqXG5cdCAqIERhdGFcblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlRGF0YU9yRm4gKFxuXHQgIHBhcmVudFZhbCxcblx0ICBjaGlsZFZhbCxcblx0ICB2bVxuXHQpIHtcblx0ICBpZiAoIXZtKSB7XG5cdCAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuXHQgICAgaWYgKCFjaGlsZFZhbCkge1xuXHQgICAgICByZXR1cm4gcGFyZW50VmFsXG5cdCAgICB9XG5cdCAgICBpZiAoIXBhcmVudFZhbCkge1xuXHQgICAgICByZXR1cm4gY2hpbGRWYWxcblx0ICAgIH1cblx0ICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcblx0ICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuXHQgICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG5cdCAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2Vcblx0ICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbiAoKSB7XG5cdCAgICAgIHJldHVybiBtZXJnZURhdGEoXG5cdCAgICAgICAgdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh0aGlzLCB0aGlzKSA6IGNoaWxkVmFsLFxuXHQgICAgICAgIHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbicgPyBwYXJlbnRWYWwuY2FsbCh0aGlzLCB0aGlzKSA6IHBhcmVudFZhbFxuXHQgICAgICApXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbiAoKSB7XG5cdCAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG5cdCAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbidcblx0ICAgICAgICA/IGNoaWxkVmFsLmNhbGwodm0sIHZtKVxuXHQgICAgICAgIDogY2hpbGRWYWw7XG5cdCAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbidcblx0ICAgICAgICA/IHBhcmVudFZhbC5jYWxsKHZtLCB2bSlcblx0ICAgICAgICA6IHBhcmVudFZhbDtcblx0ICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuXHQgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSlcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZGVmYXVsdERhdGFcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0c3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAoXG5cdCAgcGFyZW50VmFsLFxuXHQgIGNoaWxkVmFsLFxuXHQgIHZtXG5cdCkge1xuXHQgIGlmICghdm0pIHtcblx0ICAgIGlmIChjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgICAnVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICtcblx0ICAgICAgICAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICtcblx0ICAgICAgICAnZGVmaW5pdGlvbnMuJyxcblx0ICAgICAgICB2bVxuXHQgICAgICApO1xuXHRcblx0ICAgICAgcmV0dXJuIHBhcmVudFZhbFxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1lcmdlRGF0YU9yRm4ocGFyZW50VmFsLCBjaGlsZFZhbClcblx0ICB9XG5cdFxuXHQgIHJldHVybiBtZXJnZURhdGFPckZuKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEhvb2tzIGFuZCBwcm9wcyBhcmUgbWVyZ2VkIGFzIGFycmF5cy5cblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlSG9vayAoXG5cdCAgcGFyZW50VmFsLFxuXHQgIGNoaWxkVmFsXG5cdCkge1xuXHQgIHJldHVybiBjaGlsZFZhbFxuXHQgICAgPyBwYXJlbnRWYWxcblx0ICAgICAgPyBwYXJlbnRWYWwuY29uY2F0KGNoaWxkVmFsKVxuXHQgICAgICA6IEFycmF5LmlzQXJyYXkoY2hpbGRWYWwpXG5cdCAgICAgICAgPyBjaGlsZFZhbFxuXHQgICAgICAgIDogW2NoaWxkVmFsXVxuXHQgICAgOiBwYXJlbnRWYWxcblx0fVxuXHRcblx0TElGRUNZQ0xFX0hPT0tTLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcblx0ICBzdHJhdHNbaG9va10gPSBtZXJnZUhvb2s7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEFzc2V0c1xuXHQgKlxuXHQgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG5cdCAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2Vcblx0ICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZUFzc2V0cyAoXG5cdCAgcGFyZW50VmFsLFxuXHQgIGNoaWxkVmFsLFxuXHQgIHZtLFxuXHQgIGtleVxuXHQpIHtcblx0ICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG5cdCAgaWYgKGNoaWxkVmFsKSB7XG5cdCAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTtcblx0ICAgIHJldHVybiBleHRlbmQocmVzLCBjaGlsZFZhbClcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHJlc1xuXHQgIH1cblx0fVxuXHRcblx0QVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBXYXRjaGVycy5cblx0ICpcblx0ICogV2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuXHQgKiBhbm90aGVyLCBzbyB3ZSBtZXJnZSB0aGVtIGFzIGFycmF5cy5cblx0ICovXG5cdHN0cmF0cy53YXRjaCA9IGZ1bmN0aW9uIChcblx0ICBwYXJlbnRWYWwsXG5cdCAgY2hpbGRWYWwsXG5cdCAgdm0sXG5cdCAga2V5XG5cdCkge1xuXHQgIC8vIHdvcmsgYXJvdW5kIEZpcmVmb3gncyBPYmplY3QucHJvdG90eXBlLndhdGNoLi4uXG5cdCAgaWYgKHBhcmVudFZhbCA9PT0gbmF0aXZlV2F0Y2gpIHsgcGFyZW50VmFsID0gdW5kZWZpbmVkOyB9XG5cdCAgaWYgKGNoaWxkVmFsID09PSBuYXRpdmVXYXRjaCkgeyBjaGlsZFZhbCA9IHVuZGVmaW5lZDsgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghY2hpbGRWYWwpIHsgcmV0dXJuIE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpIH1cblx0ICB7XG5cdCAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTtcblx0ICB9XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHsgcmV0dXJuIGNoaWxkVmFsIH1cblx0ICB2YXIgcmV0ID0ge307XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBmb3IgKHZhciBrZXkkMSBpbiBjaGlsZFZhbCkge1xuXHQgICAgdmFyIHBhcmVudCA9IHJldFtrZXkkMV07XG5cdCAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXkkMV07XG5cdCAgICBpZiAocGFyZW50ICYmICFBcnJheS5pc0FycmF5KHBhcmVudCkpIHtcblx0ICAgICAgcGFyZW50ID0gW3BhcmVudF07XG5cdCAgICB9XG5cdCAgICByZXRba2V5JDFdID0gcGFyZW50XG5cdCAgICAgID8gcGFyZW50LmNvbmNhdChjaGlsZClcblx0ICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkKSA/IGNoaWxkIDogW2NoaWxkXTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldFxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG5cdCAqL1xuXHRzdHJhdHMucHJvcHMgPVxuXHRzdHJhdHMubWV0aG9kcyA9XG5cdHN0cmF0cy5pbmplY3QgPVxuXHRzdHJhdHMuY29tcHV0ZWQgPSBmdW5jdGlvbiAoXG5cdCAgcGFyZW50VmFsLFxuXHQgIGNoaWxkVmFsLFxuXHQgIHZtLFxuXHQgIGtleVxuXHQpIHtcblx0ICBpZiAoY2hpbGRWYWwgJiYgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGFzc2VydE9iamVjdFR5cGUoa2V5LCBjaGlsZFZhbCwgdm0pO1xuXHQgIH1cblx0ICBpZiAoIXBhcmVudFZhbCkgeyByZXR1cm4gY2hpbGRWYWwgfVxuXHQgIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgaWYgKGNoaWxkVmFsKSB7IGV4dGVuZChyZXQsIGNoaWxkVmFsKTsgfVxuXHQgIHJldHVybiByZXRcblx0fTtcblx0c3RyYXRzLnByb3ZpZGUgPSBtZXJnZURhdGFPckZuO1xuXHRcblx0LyoqXG5cdCAqIERlZmF1bHQgc3RyYXRlZ3kuXG5cdCAqL1xuXHR2YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZFxuXHQgICAgPyBwYXJlbnRWYWxcblx0ICAgIDogY2hpbGRWYWxcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBWYWxpZGF0ZSBjb21wb25lbnQgbmFtZXNcblx0ICovXG5cdGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50cyAob3B0aW9ucykge1xuXHQgIGZvciAodmFyIGtleSBpbiBvcHRpb25zLmNvbXBvbmVudHMpIHtcblx0ICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShrZXkpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lIChuYW1lKSB7XG5cdCAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgICdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArXG5cdCAgICAgICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGFuZCB0aGUgaHlwaGVuLCAnICtcblx0ICAgICAgJ2FuZCBtdXN0IHN0YXJ0IHdpdGggYSBsZXR0ZXIuJ1xuXHQgICAgKTtcblx0ICB9XG5cdCAgaWYgKGlzQnVpbHRJblRhZyhuYW1lKSB8fCBjb25maWcuaXNSZXNlcnZlZFRhZyhuYW1lKSkge1xuXHQgICAgd2Fybihcblx0ICAgICAgJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArXG5cdCAgICAgICdpZDogJyArIG5hbWVcblx0ICAgICk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXG5cdCAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG5cdCAqL1xuXHRmdW5jdGlvbiBub3JtYWxpemVQcm9wcyAob3B0aW9ucywgdm0pIHtcblx0ICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuXHQgIGlmICghcHJvcHMpIHsgcmV0dXJuIH1cblx0ICB2YXIgcmVzID0ge307XG5cdCAgdmFyIGksIHZhbCwgbmFtZTtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShwcm9wcykpIHtcblx0ICAgIGkgPSBwcm9wcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2ldO1xuXHQgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBuYW1lID0gY2FtZWxpemUodmFsKTtcblx0ICAgICAgICByZXNbbmFtZV0gPSB7IHR5cGU6IG51bGwgfTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3YXJuKCdwcm9wcyBtdXN0IGJlIHN0cmluZ3Mgd2hlbiB1c2luZyBhcnJheSBzeW50YXguJyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocHJvcHMpKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcblx0ICAgICAgdmFsID0gcHJvcHNba2V5XTtcblx0ICAgICAgbmFtZSA9IGNhbWVsaXplKGtleSk7XG5cdCAgICAgIHJlc1tuYW1lXSA9IGlzUGxhaW5PYmplY3QodmFsKVxuXHQgICAgICAgID8gdmFsXG5cdCAgICAgICAgOiB7IHR5cGU6IHZhbCB9O1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcXFwicHJvcHNcXFwiOiBleHBlY3RlZCBhbiBBcnJheSBvciBhbiBPYmplY3QsIFwiICtcblx0ICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZShwcm9wcykpICsgXCIuXCIsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgIH1cblx0ICBvcHRpb25zLnByb3BzID0gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIGFsbCBpbmplY3Rpb25zIGludG8gT2JqZWN0LWJhc2VkIGZvcm1hdFxuXHQgKi9cblx0ZnVuY3Rpb24gbm9ybWFsaXplSW5qZWN0IChvcHRpb25zLCB2bSkge1xuXHQgIHZhciBpbmplY3QgPSBvcHRpb25zLmluamVjdDtcblx0ICBpZiAoIWluamVjdCkgeyByZXR1cm4gfVxuXHQgIHZhciBub3JtYWxpemVkID0gb3B0aW9ucy5pbmplY3QgPSB7fTtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShpbmplY3QpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluamVjdC5sZW5ndGg7IGkrKykge1xuXHQgICAgICBub3JtYWxpemVkW2luamVjdFtpXV0gPSB7IGZyb206IGluamVjdFtpXSB9O1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChpbmplY3QpKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gaW5qZWN0KSB7XG5cdCAgICAgIHZhciB2YWwgPSBpbmplY3Rba2V5XTtcblx0ICAgICAgbm9ybWFsaXplZFtrZXldID0gaXNQbGFpbk9iamVjdCh2YWwpXG5cdCAgICAgICAgPyBleHRlbmQoeyBmcm9tOiBrZXkgfSwgdmFsKVxuXHQgICAgICAgIDogeyBmcm9tOiB2YWwgfTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgd2Fybihcblx0ICAgICAgXCJJbnZhbGlkIHZhbHVlIGZvciBvcHRpb24gXFxcImluamVjdFxcXCI6IGV4cGVjdGVkIGFuIEFycmF5IG9yIGFuIE9iamVjdCwgXCIgK1xuXHQgICAgICBcImJ1dCBnb3QgXCIgKyAodG9SYXdUeXBlKGluamVjdCkpICsgXCIuXCIsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSByYXcgZnVuY3Rpb24gZGlyZWN0aXZlcyBpbnRvIG9iamVjdCBmb3JtYXQuXG5cdCAqL1xuXHRmdW5jdGlvbiBub3JtYWxpemVEaXJlY3RpdmVzIChvcHRpb25zKSB7XG5cdCAgdmFyIGRpcnMgPSBvcHRpb25zLmRpcmVjdGl2ZXM7XG5cdCAgaWYgKGRpcnMpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBkaXJzKSB7XG5cdCAgICAgIHZhciBkZWYgPSBkaXJzW2tleV07XG5cdCAgICAgIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgZGlyc1trZXldID0geyBiaW5kOiBkZWYsIHVwZGF0ZTogZGVmIH07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzc2VydE9iamVjdFR5cGUgKG5hbWUsIHZhbHVlLCB2bSkge1xuXHQgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgIFwiSW52YWxpZCB2YWx1ZSBmb3Igb3B0aW9uIFxcXCJcIiArIG5hbWUgKyBcIlxcXCI6IGV4cGVjdGVkIGFuIE9iamVjdCwgXCIgK1xuXHQgICAgICBcImJ1dCBnb3QgXCIgKyAodG9SYXdUeXBlKHZhbHVlKSkgKyBcIi5cIixcblx0ICAgICAgdm1cblx0ICAgICk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxuXHQgKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VPcHRpb25zIChcblx0ICBwYXJlbnQsXG5cdCAgY2hpbGQsXG5cdCAgdm1cblx0KSB7XG5cdCAge1xuXHQgICAgY2hlY2tDb21wb25lbnRzKGNoaWxkKTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIGNoaWxkID0gY2hpbGQub3B0aW9ucztcblx0ICB9XG5cdFxuXHQgIG5vcm1hbGl6ZVByb3BzKGNoaWxkLCB2bSk7XG5cdCAgbm9ybWFsaXplSW5qZWN0KGNoaWxkLCB2bSk7XG5cdCAgbm9ybWFsaXplRGlyZWN0aXZlcyhjaGlsZCk7XG5cdCAgdmFyIGV4dGVuZHNGcm9tID0gY2hpbGQuZXh0ZW5kcztcblx0ICBpZiAoZXh0ZW5kc0Zyb20pIHtcblx0ICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGV4dGVuZHNGcm9tLCB2bSk7XG5cdCAgfVxuXHQgIGlmIChjaGlsZC5taXhpbnMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZC5taXhpbnNbaV0sIHZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIG9wdGlvbnMgPSB7fTtcblx0ICB2YXIga2V5O1xuXHQgIGZvciAoa2V5IGluIHBhcmVudCkge1xuXHQgICAgbWVyZ2VGaWVsZChrZXkpO1xuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBjaGlsZCkge1xuXHQgICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG5cdCAgICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZnVuY3Rpb24gbWVyZ2VGaWVsZCAoa2V5KSB7XG5cdCAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG5cdCAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7XG5cdCAgfVxuXHQgIHJldHVybiBvcHRpb25zXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXNvbHZlIGFuIGFzc2V0LlxuXHQgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3Ncblx0ICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVzb2x2ZUFzc2V0IChcblx0ICBvcHRpb25zLFxuXHQgIHR5cGUsXG5cdCAgaWQsXG5cdCAgd2Fybk1pc3Npbmdcblx0KSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcblx0ICAvLyBjaGVjayBsb2NhbCByZWdpc3RyYXRpb24gdmFyaWF0aW9ucyBmaXJzdFxuXHQgIGlmIChoYXNPd24oYXNzZXRzLCBpZCkpIHsgcmV0dXJuIGFzc2V0c1tpZF0gfVxuXHQgIHZhciBjYW1lbGl6ZWRJZCA9IGNhbWVsaXplKGlkKTtcblx0ICBpZiAoaGFzT3duKGFzc2V0cywgY2FtZWxpemVkSWQpKSB7IHJldHVybiBhc3NldHNbY2FtZWxpemVkSWRdIH1cblx0ICB2YXIgUGFzY2FsQ2FzZUlkID0gY2FwaXRhbGl6ZShjYW1lbGl6ZWRJZCk7XG5cdCAgaWYgKGhhc093bihhc3NldHMsIFBhc2NhbENhc2VJZCkpIHsgcmV0dXJuIGFzc2V0c1tQYXNjYWxDYXNlSWRdIH1cblx0ICAvLyBmYWxsYmFjayB0byBwcm90b3R5cGUgY2hhaW5cblx0ICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fCBhc3NldHNbY2FtZWxpemVkSWRdIHx8IGFzc2V0c1tQYXNjYWxDYXNlSWRdO1xuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICAnRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLFxuXHQgICAgICBvcHRpb25zXG5cdCAgICApO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gdmFsaWRhdGVQcm9wIChcblx0ICBrZXksXG5cdCAgcHJvcE9wdGlvbnMsXG5cdCAgcHJvcHNEYXRhLFxuXHQgIHZtXG5cdCkge1xuXHQgIHZhciBwcm9wID0gcHJvcE9wdGlvbnNba2V5XTtcblx0ICB2YXIgYWJzZW50ID0gIWhhc093bihwcm9wc0RhdGEsIGtleSk7XG5cdCAgdmFyIHZhbHVlID0gcHJvcHNEYXRhW2tleV07XG5cdCAgLy8gYm9vbGVhbiBjYXN0aW5nXG5cdCAgdmFyIGJvb2xlYW5JbmRleCA9IGdldFR5cGVJbmRleChCb29sZWFuLCBwcm9wLnR5cGUpO1xuXHQgIGlmIChib29sZWFuSW5kZXggPiAtMSkge1xuXHQgICAgaWYgKGFic2VudCAmJiAhaGFzT3duKHByb3AsICdkZWZhdWx0JykpIHtcblx0ICAgICAgdmFsdWUgPSBmYWxzZTtcblx0ICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSBoeXBoZW5hdGUoa2V5KSkge1xuXHQgICAgICAvLyBvbmx5IGNhc3QgZW1wdHkgc3RyaW5nIC8gc2FtZSBuYW1lIHRvIGJvb2xlYW4gaWZcblx0ICAgICAgLy8gYm9vbGVhbiBoYXMgaGlnaGVyIHByaW9yaXR5XG5cdCAgICAgIHZhciBzdHJpbmdJbmRleCA9IGdldFR5cGVJbmRleChTdHJpbmcsIHByb3AudHlwZSk7XG5cdCAgICAgIGlmIChzdHJpbmdJbmRleCA8IDAgfHwgYm9vbGVhbkluZGV4IDwgc3RyaW5nSW5kZXgpIHtcblx0ICAgICAgICB2YWx1ZSA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gY2hlY2sgZGVmYXVsdCB2YWx1ZVxuXHQgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3AsIGtleSk7XG5cdCAgICAvLyBzaW5jZSB0aGUgZGVmYXVsdCB2YWx1ZSBpcyBhIGZyZXNoIGNvcHksXG5cdCAgICAvLyBtYWtlIHN1cmUgdG8gb2JzZXJ2ZSBpdC5cblx0ICAgIHZhciBwcmV2U2hvdWxkT2JzZXJ2ZSA9IHNob3VsZE9ic2VydmU7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG5cdCAgICBvYnNlcnZlKHZhbHVlKTtcblx0ICAgIHRvZ2dsZU9ic2VydmluZyhwcmV2U2hvdWxkT2JzZXJ2ZSk7XG5cdCAgfVxuXHQgIHtcblx0ICAgIGFzc2VydFByb3AocHJvcCwga2V5LCB2YWx1ZSwgdm0sIGFic2VudCk7XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZVxuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUgKHZtLCBwcm9wLCBrZXkpIHtcblx0ICAvLyBubyBkZWZhdWx0LCByZXR1cm4gdW5kZWZpbmVkXG5cdCAgaWYgKCFoYXNPd24ocHJvcCwgJ2RlZmF1bHQnKSkge1xuXHQgICAgcmV0dXJuIHVuZGVmaW5lZFxuXHQgIH1cblx0ICB2YXIgZGVmID0gcHJvcC5kZWZhdWx0O1xuXHQgIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgaXNPYmplY3QoZGVmKSkge1xuXHQgICAgd2Fybihcblx0ICAgICAgJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBrZXkgKyAnXCI6ICcgK1xuXHQgICAgICAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArXG5cdCAgICAgICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJyxcblx0ICAgICAgdm1cblx0ICAgICk7XG5cdCAgfVxuXHQgIC8vIHRoZSByYXcgcHJvcCB2YWx1ZSB3YXMgYWxzbyB1bmRlZmluZWQgZnJvbSBwcmV2aW91cyByZW5kZXIsXG5cdCAgLy8gcmV0dXJuIHByZXZpb3VzIGRlZmF1bHQgdmFsdWUgdG8gYXZvaWQgdW5uZWNlc3Nhcnkgd2F0Y2hlciB0cmlnZ2VyXG5cdCAgaWYgKHZtICYmIHZtLiRvcHRpb25zLnByb3BzRGF0YSAmJlxuXHQgICAgdm0uJG9wdGlvbnMucHJvcHNEYXRhW2tleV0gPT09IHVuZGVmaW5lZCAmJlxuXHQgICAgdm0uX3Byb3BzW2tleV0gIT09IHVuZGVmaW5lZFxuXHQgICkge1xuXHQgICAgcmV0dXJuIHZtLl9wcm9wc1trZXldXG5cdCAgfVxuXHQgIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG5cdCAgLy8gYSB2YWx1ZSBpcyBGdW5jdGlvbiBpZiBpdHMgcHJvdG90eXBlIGlzIGZ1bmN0aW9uIGV2ZW4gYWNyb3NzIGRpZmZlcmVudCBleGVjdXRpb24gY29udGV4dFxuXHQgIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIGdldFR5cGUocHJvcC50eXBlKSAhPT0gJ0Z1bmN0aW9uJ1xuXHQgICAgPyBkZWYuY2FsbCh2bSlcblx0ICAgIDogZGVmXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBhc3NlcnRQcm9wIChcblx0ICBwcm9wLFxuXHQgIG5hbWUsXG5cdCAgdmFsdWUsXG5cdCAgdm0sXG5cdCAgYWJzZW50XG5cdCkge1xuXHQgIGlmIChwcm9wLnJlcXVpcmVkICYmIGFic2VudCkge1xuXHQgICAgd2Fybihcblx0ICAgICAgJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogXCInICsgbmFtZSArICdcIicsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIGlmICh2YWx1ZSA9PSBudWxsICYmICFwcm9wLnJlcXVpcmVkKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIHR5cGUgPSBwcm9wLnR5cGU7XG5cdCAgdmFyIHZhbGlkID0gIXR5cGUgfHwgdHlwZSA9PT0gdHJ1ZTtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICBpZiAoIUFycmF5LmlzQXJyYXkodHlwZSkpIHtcblx0ICAgICAgdHlwZSA9IFt0eXBlXTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcblx0ICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuXHQgICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSB8fCAnJyk7XG5cdCAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXZhbGlkKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIkludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXFxcIlwiICsgbmFtZSArIFwiXFxcIi5cIiArXG5cdCAgICAgIFwiIEV4cGVjdGVkIFwiICsgKGV4cGVjdGVkVHlwZXMubWFwKGNhcGl0YWxpemUpLmpvaW4oJywgJykpICtcblx0ICAgICAgXCIsIGdvdCBcIiArICh0b1Jhd1R5cGUodmFsdWUpKSArIFwiLlwiLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIgdmFsaWRhdG9yID0gcHJvcC52YWxpZGF0b3I7XG5cdCAgaWYgKHZhbGlkYXRvcikge1xuXHQgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgbmFtZSArICdcIi4nLFxuXHQgICAgICAgIHZtXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgc2ltcGxlQ2hlY2tSRSA9IC9eKFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbnxGdW5jdGlvbnxTeW1ib2wpJC87XG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRUeXBlICh2YWx1ZSwgdHlwZSkge1xuXHQgIHZhciB2YWxpZDtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlID0gZ2V0VHlwZSh0eXBlKTtcblx0ICBpZiAoc2ltcGxlQ2hlY2tSRS50ZXN0KGV4cGVjdGVkVHlwZSkpIHtcblx0ICAgIHZhciB0ID0gdHlwZW9mIHZhbHVlO1xuXHQgICAgdmFsaWQgPSB0ID09PSBleHBlY3RlZFR5cGUudG9Mb3dlckNhc2UoKTtcblx0ICAgIC8vIGZvciBwcmltaXRpdmUgd3JhcHBlciBvYmplY3RzXG5cdCAgICBpZiAoIXZhbGlkICYmIHQgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnT2JqZWN0Jykge1xuXHQgICAgdmFsaWQgPSBpc1BsYWluT2JqZWN0KHZhbHVlKTtcblx0ICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ0FycmF5Jykge1xuXHQgICAgdmFsaWQgPSBBcnJheS5pc0FycmF5KHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG5cdCAgfVxuXHQgIHJldHVybiB7XG5cdCAgICB2YWxpZDogdmFsaWQsXG5cdCAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFVzZSBmdW5jdGlvbiBzdHJpbmcgbmFtZSB0byBjaGVjayBidWlsdC1pbiB0eXBlcyxcblx0ICogYmVjYXVzZSBhIHNpbXBsZSBlcXVhbGl0eSBjaGVjayB3aWxsIGZhaWwgd2hlbiBydW5uaW5nXG5cdCAqIGFjcm9zcyBkaWZmZXJlbnQgdm1zIC8gaWZyYW1lcy5cblx0ICovXG5cdGZ1bmN0aW9uIGdldFR5cGUgKGZuKSB7XG5cdCAgdmFyIG1hdGNoID0gZm4gJiYgZm4udG9TdHJpbmcoKS5tYXRjaCgvXlxccypmdW5jdGlvbiAoXFx3KykvKTtcblx0ICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU2FtZVR5cGUgKGEsIGIpIHtcblx0ICByZXR1cm4gZ2V0VHlwZShhKSA9PT0gZ2V0VHlwZShiKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRUeXBlSW5kZXggKHR5cGUsIGV4cGVjdGVkVHlwZXMpIHtcblx0ICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRUeXBlcykpIHtcblx0ICAgIHJldHVybiBpc1NhbWVUeXBlKGV4cGVjdGVkVHlwZXMsIHR5cGUpID8gMCA6IC0xXG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBleHBlY3RlZFR5cGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBpZiAoaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzW2ldLCB0eXBlKSkge1xuXHQgICAgICByZXR1cm4gaVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTFcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVFcnJvciAoZXJyLCB2bSwgaW5mbykge1xuXHQgIGlmICh2bSkge1xuXHQgICAgdmFyIGN1ciA9IHZtO1xuXHQgICAgd2hpbGUgKChjdXIgPSBjdXIuJHBhcmVudCkpIHtcblx0ICAgICAgdmFyIGhvb2tzID0gY3VyLiRvcHRpb25zLmVycm9yQ2FwdHVyZWQ7XG5cdCAgICAgIGlmIChob29rcykge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHZhciBjYXB0dXJlID0gaG9va3NbaV0uY2FsbChjdXIsIGVyciwgdm0sIGluZm8pID09PSBmYWxzZTtcblx0ICAgICAgICAgICAgaWYgKGNhcHR1cmUpIHsgcmV0dXJuIH1cblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsSGFuZGxlRXJyb3IoZSwgY3VyLCAnZXJyb3JDYXB0dXJlZCBob29rJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIGdsb2JhbEhhbmRsZUVycm9yKGVyciwgdm0sIGluZm8pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnbG9iYWxIYW5kbGVFcnJvciAoZXJyLCB2bSwgaW5mbykge1xuXHQgIGlmIChjb25maWcuZXJyb3JIYW5kbGVyKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gY29uZmlnLmVycm9ySGFuZGxlci5jYWxsKG51bGwsIGVyciwgdm0sIGluZm8pXG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIGxvZ0Vycm9yKGUsIG51bGwsICdjb25maWcuZXJyb3JIYW5kbGVyJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGxvZ0Vycm9yKGVyciwgdm0sIGluZm8pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBsb2dFcnJvciAoZXJyLCB2bSwgaW5mbykge1xuXHQgIHtcblx0ICAgIHdhcm4oKFwiRXJyb3IgaW4gXCIgKyBpbmZvICsgXCI6IFxcXCJcIiArIChlcnIudG9TdHJpbmcoKSkgKyBcIlxcXCJcIiksIHZtKTtcblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoKGluQnJvd3NlciB8fCBpbldlZXgpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgY29uc29sZS5lcnJvcihlcnIpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aHJvdyBlcnJcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHQvKiBnbG9iYWxzIE1lc3NhZ2VDaGFubmVsICovXG5cdFxuXHR2YXIgY2FsbGJhY2tzID0gW107XG5cdHZhciBwZW5kaW5nID0gZmFsc2U7XG5cdFxuXHRmdW5jdGlvbiBmbHVzaENhbGxiYWNrcyAoKSB7XG5cdCAgcGVuZGluZyA9IGZhbHNlO1xuXHQgIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG5cdCAgY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgIGNvcGllc1tpXSgpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gSGVyZSB3ZSBoYXZlIGFzeW5jIGRlZmVycmluZyB3cmFwcGVycyB1c2luZyBib3RoIG1pY3JvdGFza3MgYW5kIChtYWNybykgdGFza3MuXG5cdC8vIEluIDwgMi40IHdlIHVzZWQgbWljcm90YXNrcyBldmVyeXdoZXJlLCBidXQgdGhlcmUgYXJlIHNvbWUgc2NlbmFyaW9zIHdoZXJlXG5cdC8vIG1pY3JvdGFza3MgaGF2ZSB0b28gaGlnaCBhIHByaW9yaXR5IGFuZCBmaXJlIGluIGJldHdlZW4gc3VwcG9zZWRseVxuXHQvLyBzZXF1ZW50aWFsIGV2ZW50cyAoZS5nLiAjNDUyMSwgIzY2OTApIG9yIGV2ZW4gYmV0d2VlbiBidWJibGluZyBvZiB0aGUgc2FtZVxuXHQvLyBldmVudCAoIzY1NjYpLiBIb3dldmVyLCB1c2luZyAobWFjcm8pIHRhc2tzIGV2ZXJ5d2hlcmUgYWxzbyBoYXMgc3VidGxlIHByb2JsZW1zXG5cdC8vIHdoZW4gc3RhdGUgaXMgY2hhbmdlZCByaWdodCBiZWZvcmUgcmVwYWludCAoZS5nLiAjNjgxMywgb3V0LWluIHRyYW5zaXRpb25zKS5cblx0Ly8gSGVyZSB3ZSB1c2UgbWljcm90YXNrIGJ5IGRlZmF1bHQsIGJ1dCBleHBvc2UgYSB3YXkgdG8gZm9yY2UgKG1hY3JvKSB0YXNrIHdoZW5cblx0Ly8gbmVlZGVkIChlLmcuIGluIGV2ZW50IGhhbmRsZXJzIGF0dGFjaGVkIGJ5IHYtb24pLlxuXHR2YXIgbWljcm9UaW1lckZ1bmM7XG5cdHZhciBtYWNyb1RpbWVyRnVuYztcblx0dmFyIHVzZU1hY3JvVGFzayA9IGZhbHNlO1xuXHRcblx0Ly8gRGV0ZXJtaW5lIChtYWNybykgdGFzayBkZWZlciBpbXBsZW1lbnRhdGlvbi5cblx0Ly8gVGVjaG5pY2FsbHkgc2V0SW1tZWRpYXRlIHNob3VsZCBiZSB0aGUgaWRlYWwgY2hvaWNlLCBidXQgaXQncyBvbmx5IGF2YWlsYWJsZVxuXHQvLyBpbiBJRS4gVGhlIG9ubHkgcG9seWZpbGwgdGhhdCBjb25zaXN0ZW50bHkgcXVldWVzIHRoZSBjYWxsYmFjayBhZnRlciBhbGwgRE9NXG5cdC8vIGV2ZW50cyB0cmlnZ2VyZWQgaW4gdGhlIHNhbWUgbG9vcCBpcyBieSB1c2luZyBNZXNzYWdlQ2hhbm5lbC5cblx0LyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShzZXRJbW1lZGlhdGUpKSB7XG5cdCAgbWFjcm9UaW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBzZXRJbW1lZGlhdGUoZmx1c2hDYWxsYmFja3MpO1xuXHQgIH07XG5cdH0gZWxzZSBpZiAodHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJyAmJiAoXG5cdCAgaXNOYXRpdmUoTWVzc2FnZUNoYW5uZWwpIHx8XG5cdCAgLy8gUGhhbnRvbUpTXG5cdCAgTWVzc2FnZUNoYW5uZWwudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgTWVzc2FnZUNoYW5uZWxDb25zdHJ1Y3Rvcl0nXG5cdCkpIHtcblx0ICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgIHZhciBwb3J0ID0gY2hhbm5lbC5wb3J0Mjtcblx0ICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoQ2FsbGJhY2tzO1xuXHQgIG1hY3JvVGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcG9ydC5wb3N0TWVzc2FnZSgxKTtcblx0ICB9O1xuXHR9IGVsc2Uge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgbWFjcm9UaW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBzZXRUaW1lb3V0KGZsdXNoQ2FsbGJhY2tzLCAwKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvLyBEZXRlcm1pbmUgbWljcm90YXNrIGRlZmVyIGltcGxlbWVudGF0aW9uLlxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCwgJGZsb3ctZGlzYWJsZS1saW5lICovXG5cdGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUHJvbWlzZSkpIHtcblx0ICB2YXIgcCA9IFByb21pc2UucmVzb2x2ZSgpO1xuXHQgIG1pY3JvVGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcC50aGVuKGZsdXNoQ2FsbGJhY2tzKTtcblx0ICAgIC8vIGluIHByb2JsZW1hdGljIFVJV2ViVmlld3MsIFByb21pc2UudGhlbiBkb2Vzbid0IGNvbXBsZXRlbHkgYnJlYWssIGJ1dFxuXHQgICAgLy8gaXQgY2FuIGdldCBzdHVjayBpbiBhIHdlaXJkIHN0YXRlIHdoZXJlIGNhbGxiYWNrcyBhcmUgcHVzaGVkIGludG8gdGhlXG5cdCAgICAvLyBtaWNyb3Rhc2sgcXVldWUgYnV0IHRoZSBxdWV1ZSBpc24ndCBiZWluZyBmbHVzaGVkLCB1bnRpbCB0aGUgYnJvd3NlclxuXHQgICAgLy8gbmVlZHMgdG8gZG8gc29tZSBvdGhlciB3b3JrLCBlLmcuIGhhbmRsZSBhIHRpbWVyLiBUaGVyZWZvcmUgd2UgY2FuXG5cdCAgICAvLyBcImZvcmNlXCIgdGhlIG1pY3JvdGFzayBxdWV1ZSB0byBiZSBmbHVzaGVkIGJ5IGFkZGluZyBhbiBlbXB0eSB0aW1lci5cblx0ICAgIGlmIChpc0lPUykgeyBzZXRUaW1lb3V0KG5vb3ApOyB9XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICAvLyBmYWxsYmFjayB0byBtYWNyb1xuXHQgIG1pY3JvVGltZXJGdW5jID0gbWFjcm9UaW1lckZ1bmM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBXcmFwIGEgZnVuY3Rpb24gc28gdGhhdCBpZiBhbnkgY29kZSBpbnNpZGUgdHJpZ2dlcnMgc3RhdGUgY2hhbmdlLFxuXHQgKiB0aGUgY2hhbmdlcyBhcmUgcXVldWVkIHVzaW5nIGEgKG1hY3JvKSB0YXNrIGluc3RlYWQgb2YgYSBtaWNyb3Rhc2suXG5cdCAqL1xuXHRmdW5jdGlvbiB3aXRoTWFjcm9UYXNrIChmbikge1xuXHQgIHJldHVybiBmbi5fd2l0aFRhc2sgfHwgKGZuLl93aXRoVGFzayA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHVzZU1hY3JvVGFzayA9IHRydWU7XG5cdCAgICB2YXIgcmVzID0gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcblx0ICAgIHVzZU1hY3JvVGFzayA9IGZhbHNlO1xuXHQgICAgcmV0dXJuIHJlc1xuXHQgIH0pXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5leHRUaWNrIChjYiwgY3R4KSB7XG5cdCAgdmFyIF9yZXNvbHZlO1xuXHQgIGNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChjYikge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGNiLmNhbGwoY3R4KTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGhhbmRsZUVycm9yKGUsIGN0eCwgJ25leHRUaWNrJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoX3Jlc29sdmUpIHtcblx0ICAgICAgX3Jlc29sdmUoY3R4KTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICBpZiAoIXBlbmRpbmcpIHtcblx0ICAgIHBlbmRpbmcgPSB0cnVlO1xuXHQgICAgaWYgKHVzZU1hY3JvVGFzaykge1xuXHQgICAgICBtYWNyb1RpbWVyRnVuYygpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbWljcm9UaW1lckZ1bmMoKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgaWYgKCFjYiAmJiB0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHQgICAgICBfcmVzb2x2ZSA9IHJlc29sdmU7XG5cdCAgICB9KVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgbWFyaztcblx0dmFyIG1lYXN1cmU7XG5cdFxuXHR7XG5cdCAgdmFyIHBlcmYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnBlcmZvcm1hbmNlO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChcblx0ICAgIHBlcmYgJiZcblx0ICAgIHBlcmYubWFyayAmJlxuXHQgICAgcGVyZi5tZWFzdXJlICYmXG5cdCAgICBwZXJmLmNsZWFyTWFya3MgJiZcblx0ICAgIHBlcmYuY2xlYXJNZWFzdXJlc1xuXHQgICkge1xuXHQgICAgbWFyayA9IGZ1bmN0aW9uICh0YWcpIHsgcmV0dXJuIHBlcmYubWFyayh0YWcpOyB9O1xuXHQgICAgbWVhc3VyZSA9IGZ1bmN0aW9uIChuYW1lLCBzdGFydFRhZywgZW5kVGFnKSB7XG5cdCAgICAgIHBlcmYubWVhc3VyZShuYW1lLCBzdGFydFRhZywgZW5kVGFnKTtcblx0ICAgICAgcGVyZi5jbGVhck1hcmtzKHN0YXJ0VGFnKTtcblx0ICAgICAgcGVyZi5jbGVhck1hcmtzKGVuZFRhZyk7XG5cdCAgICAgIHBlcmYuY2xlYXJNZWFzdXJlcyhuYW1lKTtcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiBub3QgdHlwZSBjaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBmbG93IGRvZXNuJ3QgcGxheSB3ZWxsIHdpdGggUHJveHkgKi9cblx0XG5cdHZhciBpbml0UHJveHk7XG5cdFxuXHR7XG5cdCAgdmFyIGFsbG93ZWRHbG9iYWxzID0gbWFrZU1hcChcblx0ICAgICdJbmZpbml0eSx1bmRlZmluZWQsTmFOLGlzRmluaXRlLGlzTmFOLCcgK1xuXHQgICAgJ3BhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksZW5jb2RlVVJJQ29tcG9uZW50LCcgK1xuXHQgICAgJ01hdGgsTnVtYmVyLERhdGUsQXJyYXksT2JqZWN0LEJvb2xlYW4sU3RyaW5nLFJlZ0V4cCxNYXAsU2V0LEpTT04sSW50bCwnICtcblx0ICAgICdyZXF1aXJlJyAvLyBmb3IgV2VicGFjay9Ccm93c2VyaWZ5XG5cdCAgKTtcblx0XG5cdCAgdmFyIHdhcm5Ob25QcmVzZW50ID0gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIlByb3BlcnR5IG9yIG1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgbm90IGRlZmluZWQgb24gdGhlIGluc3RhbmNlIGJ1dCBcIiArXG5cdCAgICAgICdyZWZlcmVuY2VkIGR1cmluZyByZW5kZXIuIE1ha2Ugc3VyZSB0aGF0IHRoaXMgcHJvcGVydHkgaXMgcmVhY3RpdmUsICcgK1xuXHQgICAgICAnZWl0aGVyIGluIHRoZSBkYXRhIG9wdGlvbiwgb3IgZm9yIGNsYXNzLWJhc2VkIGNvbXBvbmVudHMsIGJ5ICcgK1xuXHQgICAgICAnaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eS4gJyArXG5cdCAgICAgICdTZWU6IGh0dHBzOi8vdnVlanMub3JnL3YyL2d1aWRlL3JlYWN0aXZpdHkuaHRtbCNEZWNsYXJpbmctUmVhY3RpdmUtUHJvcGVydGllcy4nLFxuXHQgICAgICB0YXJnZXRcblx0ICAgICk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIGhhc1Byb3h5ID1cblx0ICAgIHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUHJveHkpO1xuXHRcblx0ICBpZiAoaGFzUHJveHkpIHtcblx0ICAgIHZhciBpc0J1aWx0SW5Nb2RpZmllciA9IG1ha2VNYXAoJ3N0b3AscHJldmVudCxzZWxmLGN0cmwsc2hpZnQsYWx0LG1ldGEsZXhhY3QnKTtcblx0ICAgIGNvbmZpZy5rZXlDb2RlcyA9IG5ldyBQcm94eShjb25maWcua2V5Q29kZXMsIHtcblx0ICAgICAgc2V0OiBmdW5jdGlvbiBzZXQgKHRhcmdldCwga2V5LCB2YWx1ZSkge1xuXHQgICAgICAgIGlmIChpc0J1aWx0SW5Nb2RpZmllcihrZXkpKSB7XG5cdCAgICAgICAgICB3YXJuKChcIkF2b2lkIG92ZXJ3cml0aW5nIGJ1aWx0LWluIG1vZGlmaWVyIGluIGNvbmZpZy5rZXlDb2RlczogLlwiICsga2V5KSk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcblx0ICAgICAgICAgIHJldHVybiB0cnVlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIHZhciBoYXNIYW5kbGVyID0ge1xuXHQgICAgaGFzOiBmdW5jdGlvbiBoYXMgKHRhcmdldCwga2V5KSB7XG5cdCAgICAgIHZhciBoYXMgPSBrZXkgaW4gdGFyZ2V0O1xuXHQgICAgICB2YXIgaXNBbGxvd2VkID0gYWxsb3dlZEdsb2JhbHMoa2V5KSB8fCBrZXkuY2hhckF0KDApID09PSAnXyc7XG5cdCAgICAgIGlmICghaGFzICYmICFpc0FsbG93ZWQpIHtcblx0ICAgICAgICB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGhhcyB8fCAhaXNBbGxvd2VkXG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgdmFyIGdldEhhbmRsZXIgPSB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCAodGFyZ2V0LCBrZXkpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmICEoa2V5IGluIHRhcmdldCkpIHtcblx0ICAgICAgICB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRhcmdldFtrZXldXG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgaW5pdFByb3h5ID0gZnVuY3Rpb24gaW5pdFByb3h5ICh2bSkge1xuXHQgICAgaWYgKGhhc1Byb3h5KSB7XG5cdCAgICAgIC8vIGRldGVybWluZSB3aGljaCBwcm94eSBoYW5kbGVyIHRvIHVzZVxuXHQgICAgICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zO1xuXHQgICAgICB2YXIgaGFuZGxlcnMgPSBvcHRpb25zLnJlbmRlciAmJiBvcHRpb25zLnJlbmRlci5fd2l0aFN0cmlwcGVkXG5cdCAgICAgICAgPyBnZXRIYW5kbGVyXG5cdCAgICAgICAgOiBoYXNIYW5kbGVyO1xuXHQgICAgICB2bS5fcmVuZGVyUHJveHkgPSBuZXcgUHJveHkodm0sIGhhbmRsZXJzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZtLl9yZW5kZXJQcm94eSA9IHZtO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcblx0XG5cdC8qKlxuXHQgKiBSZWN1cnNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuXHQgKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuXHQgKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuXHQgKi9cblx0ZnVuY3Rpb24gdHJhdmVyc2UgKHZhbCkge1xuXHQgIF90cmF2ZXJzZSh2YWwsIHNlZW5PYmplY3RzKTtcblx0ICBzZWVuT2JqZWN0cy5jbGVhcigpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfdHJhdmVyc2UgKHZhbCwgc2Vlbikge1xuXHQgIHZhciBpLCBrZXlzO1xuXHQgIHZhciBpc0EgPSBBcnJheS5pc0FycmF5KHZhbCk7XG5cdCAgaWYgKCghaXNBICYmICFpc09iamVjdCh2YWwpKSB8fCBPYmplY3QuaXNGcm96ZW4odmFsKSB8fCB2YWwgaW5zdGFuY2VvZiBWTm9kZSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIGlmICh2YWwuX19vYl9fKSB7XG5cdCAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcblx0ICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdCAgICBzZWVuLmFkZChkZXBJZCk7XG5cdCAgfVxuXHQgIGlmIChpc0EpIHtcblx0ICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkgeyBfdHJhdmVyc2UodmFsW2ldLCBzZWVuKTsgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHsgX3RyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7IH1cblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIG5vcm1hbGl6ZUV2ZW50ID0gY2FjaGVkKGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgdmFyIHBhc3NpdmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyYnO1xuXHQgIG5hbWUgPSBwYXNzaXZlID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7XG5cdCAgdmFyIG9uY2UkJDEgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJ34nOyAvLyBQcmVmaXhlZCBsYXN0LCBjaGVja2VkIGZpcnN0XG5cdCAgbmFtZSA9IG9uY2UkJDEgPyBuYW1lLnNsaWNlKDEpIDogbmFtZTtcblx0ICB2YXIgY2FwdHVyZSA9IG5hbWUuY2hhckF0KDApID09PSAnISc7XG5cdCAgbmFtZSA9IGNhcHR1cmUgPyBuYW1lLnNsaWNlKDEpIDogbmFtZTtcblx0ICByZXR1cm4ge1xuXHQgICAgbmFtZTogbmFtZSxcblx0ICAgIG9uY2U6IG9uY2UkJDEsXG5cdCAgICBjYXB0dXJlOiBjYXB0dXJlLFxuXHQgICAgcGFzc2l2ZTogcGFzc2l2ZVxuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVGbkludm9rZXIgKGZucykge1xuXHQgIGZ1bmN0aW9uIGludm9rZXIgKCkge1xuXHQgICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXHRcblx0ICAgIHZhciBmbnMgPSBpbnZva2VyLmZucztcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGZucykpIHtcblx0ICAgICAgdmFyIGNsb25lZCA9IGZucy5zbGljZSgpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsb25lZC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGNsb25lZFtpXS5hcHBseShudWxsLCBhcmd1bWVudHMkMSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHJldHVybiBoYW5kbGVyIHJldHVybiB2YWx1ZSBmb3Igc2luZ2xlIGhhbmRsZXJzXG5cdCAgICAgIHJldHVybiBmbnMuYXBwbHkobnVsbCwgYXJndW1lbnRzKVxuXHQgICAgfVxuXHQgIH1cblx0ICBpbnZva2VyLmZucyA9IGZucztcblx0ICByZXR1cm4gaW52b2tlclxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVMaXN0ZW5lcnMgKFxuXHQgIG9uLFxuXHQgIG9sZE9uLFxuXHQgIGFkZCxcblx0ICByZW1vdmUkJDEsXG5cdCAgdm1cblx0KSB7XG5cdCAgdmFyIG5hbWUsIGRlZiwgY3VyLCBvbGQsIGV2ZW50O1xuXHQgIGZvciAobmFtZSBpbiBvbikge1xuXHQgICAgZGVmID0gY3VyID0gb25bbmFtZV07XG5cdCAgICBvbGQgPSBvbGRPbltuYW1lXTtcblx0ICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQobmFtZSk7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChpc1VuZGVmKGN1cikpIHtcblx0ICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgICBcIkludmFsaWQgaGFuZGxlciBmb3IgZXZlbnQgXFxcIlwiICsgKGV2ZW50Lm5hbWUpICsgXCJcXFwiOiBnb3QgXCIgKyBTdHJpbmcoY3VyKSxcblx0ICAgICAgICB2bVxuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIGlmIChpc1VuZGVmKG9sZCkpIHtcblx0ICAgICAgaWYgKGlzVW5kZWYoY3VyLmZucykpIHtcblx0ICAgICAgICBjdXIgPSBvbltuYW1lXSA9IGNyZWF0ZUZuSW52b2tlcihjdXIpO1xuXHQgICAgICB9XG5cdCAgICAgIGFkZChldmVudC5uYW1lLCBjdXIsIGV2ZW50Lm9uY2UsIGV2ZW50LmNhcHR1cmUsIGV2ZW50LnBhc3NpdmUsIGV2ZW50LnBhcmFtcyk7XG5cdCAgICB9IGVsc2UgaWYgKGN1ciAhPT0gb2xkKSB7XG5cdCAgICAgIG9sZC5mbnMgPSBjdXI7XG5cdCAgICAgIG9uW25hbWVdID0gb2xkO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKG5hbWUgaW4gb2xkT24pIHtcblx0ICAgIGlmIChpc1VuZGVmKG9uW25hbWVdKSkge1xuXHQgICAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KG5hbWUpO1xuXHQgICAgICByZW1vdmUkJDEoZXZlbnQubmFtZSwgb2xkT25bbmFtZV0sIGV2ZW50LmNhcHR1cmUpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZVZOb2RlSG9vayAoZGVmLCBob29rS2V5LCBob29rKSB7XG5cdCAgaWYgKGRlZiBpbnN0YW5jZW9mIFZOb2RlKSB7XG5cdCAgICBkZWYgPSBkZWYuZGF0YS5ob29rIHx8IChkZWYuZGF0YS5ob29rID0ge30pO1xuXHQgIH1cblx0ICB2YXIgaW52b2tlcjtcblx0ICB2YXIgb2xkSG9vayA9IGRlZltob29rS2V5XTtcblx0XG5cdCAgZnVuY3Rpb24gd3JhcHBlZEhvb2sgKCkge1xuXHQgICAgaG9vay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgLy8gaW1wb3J0YW50OiByZW1vdmUgbWVyZ2VkIGhvb2sgdG8gZW5zdXJlIGl0J3MgY2FsbGVkIG9ubHkgb25jZVxuXHQgICAgLy8gYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtcblx0ICAgIHJlbW92ZShpbnZva2VyLmZucywgd3JhcHBlZEhvb2spO1xuXHQgIH1cblx0XG5cdCAgaWYgKGlzVW5kZWYob2xkSG9vaykpIHtcblx0ICAgIC8vIG5vIGV4aXN0aW5nIGhvb2tcblx0ICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW3dyYXBwZWRIb29rXSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKGlzRGVmKG9sZEhvb2suZm5zKSAmJiBpc1RydWUob2xkSG9vay5tZXJnZWQpKSB7XG5cdCAgICAgIC8vIGFscmVhZHkgYSBtZXJnZWQgaW52b2tlclxuXHQgICAgICBpbnZva2VyID0gb2xkSG9vaztcblx0ICAgICAgaW52b2tlci5mbnMucHVzaCh3cmFwcGVkSG9vayk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBleGlzdGluZyBwbGFpbiBob29rXG5cdCAgICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW29sZEhvb2ssIHdyYXBwZWRIb29rXSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpbnZva2VyLm1lcmdlZCA9IHRydWU7XG5cdCAgZGVmW2hvb2tLZXldID0gaW52b2tlcjtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhIChcblx0ICBkYXRhLFxuXHQgIEN0b3IsXG5cdCAgdGFnXG5cdCkge1xuXHQgIC8vIHdlIGFyZSBvbmx5IGV4dHJhY3RpbmcgcmF3IHZhbHVlcyBoZXJlLlxuXHQgIC8vIHZhbGlkYXRpb24gYW5kIGRlZmF1bHQgdmFsdWVzIGFyZSBoYW5kbGVkIGluIHRoZSBjaGlsZFxuXHQgIC8vIGNvbXBvbmVudCBpdHNlbGYuXG5cdCAgdmFyIHByb3BPcHRpb25zID0gQ3Rvci5vcHRpb25zLnByb3BzO1xuXHQgIGlmIChpc1VuZGVmKHByb3BPcHRpb25zKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciByZXMgPSB7fTtcblx0ICB2YXIgYXR0cnMgPSBkYXRhLmF0dHJzO1xuXHQgIHZhciBwcm9wcyA9IGRhdGEucHJvcHM7XG5cdCAgaWYgKGlzRGVmKGF0dHJzKSB8fCBpc0RlZihwcm9wcykpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBwcm9wT3B0aW9ucykge1xuXHQgICAgICB2YXIgYWx0S2V5ID0gaHlwaGVuYXRlKGtleSk7XG5cdCAgICAgIHtcblx0ICAgICAgICB2YXIga2V5SW5Mb3dlckNhc2UgPSBrZXkudG9Mb3dlckNhc2UoKTtcblx0ICAgICAgICBpZiAoXG5cdCAgICAgICAgICBrZXkgIT09IGtleUluTG93ZXJDYXNlICYmXG5cdCAgICAgICAgICBhdHRycyAmJiBoYXNPd24oYXR0cnMsIGtleUluTG93ZXJDYXNlKVxuXHQgICAgICAgICkge1xuXHQgICAgICAgICAgdGlwKFxuXHQgICAgICAgICAgICBcIlByb3AgXFxcIlwiICsga2V5SW5Mb3dlckNhc2UgKyBcIlxcXCIgaXMgcGFzc2VkIHRvIGNvbXBvbmVudCBcIiArXG5cdCAgICAgICAgICAgIChmb3JtYXRDb21wb25lbnROYW1lKHRhZyB8fCBDdG9yKSkgKyBcIiwgYnV0IHRoZSBkZWNsYXJlZCBwcm9wIG5hbWUgaXNcIiArXG5cdCAgICAgICAgICAgIFwiIFxcXCJcIiArIGtleSArIFwiXFxcIi4gXCIgK1xuXHQgICAgICAgICAgICBcIk5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIGNhbWVsQ2FzZWQgXCIgK1xuXHQgICAgICAgICAgICBcInByb3BzIG5lZWQgdG8gdXNlIHRoZWlyIGtlYmFiLWNhc2UgZXF1aXZhbGVudHMgd2hlbiB1c2luZyBpbi1ET00gXCIgK1xuXHQgICAgICAgICAgICBcInRlbXBsYXRlcy4gWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXFxcIlwiICsgYWx0S2V5ICsgXCJcXFwiIGluc3RlYWQgb2YgXFxcIlwiICsga2V5ICsgXCJcXFwiLlwiXG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBjaGVja1Byb3AocmVzLCBwcm9wcywga2V5LCBhbHRLZXksIHRydWUpIHx8XG5cdCAgICAgIGNoZWNrUHJvcChyZXMsIGF0dHJzLCBrZXksIGFsdEtleSwgZmFsc2UpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrUHJvcCAoXG5cdCAgcmVzLFxuXHQgIGhhc2gsXG5cdCAga2V5LFxuXHQgIGFsdEtleSxcblx0ICBwcmVzZXJ2ZVxuXHQpIHtcblx0ICBpZiAoaXNEZWYoaGFzaCkpIHtcblx0ICAgIGlmIChoYXNPd24oaGFzaCwga2V5KSkge1xuXHQgICAgICByZXNba2V5XSA9IGhhc2hba2V5XTtcblx0ICAgICAgaWYgKCFwcmVzZXJ2ZSkge1xuXHQgICAgICAgIGRlbGV0ZSBoYXNoW2tleV07XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRydWVcblx0ICAgIH0gZWxzZSBpZiAoaGFzT3duKGhhc2gsIGFsdEtleSkpIHtcblx0ICAgICAgcmVzW2tleV0gPSBoYXNoW2FsdEtleV07XG5cdCAgICAgIGlmICghcHJlc2VydmUpIHtcblx0ICAgICAgICBkZWxldGUgaGFzaFthbHRLZXldO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0cnVlXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIFRoZSB0ZW1wbGF0ZSBjb21waWxlciBhdHRlbXB0cyB0byBtaW5pbWl6ZSB0aGUgbmVlZCBmb3Igbm9ybWFsaXphdGlvbiBieVxuXHQvLyBzdGF0aWNhbGx5IGFuYWx5emluZyB0aGUgdGVtcGxhdGUgYXQgY29tcGlsZSB0aW1lLlxuXHQvL1xuXHQvLyBGb3IgcGxhaW4gSFRNTCBtYXJrdXAsIG5vcm1hbGl6YXRpb24gY2FuIGJlIGNvbXBsZXRlbHkgc2tpcHBlZCBiZWNhdXNlIHRoZVxuXHQvLyBnZW5lcmF0ZWQgcmVuZGVyIGZ1bmN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gcmV0dXJuIEFycmF5PFZOb2RlPi4gVGhlcmUgYXJlXG5cdC8vIHR3byBjYXNlcyB3aGVyZSBleHRyYSBub3JtYWxpemF0aW9uIGlzIG5lZWRlZDpcblx0XG5cdC8vIDEuIFdoZW4gdGhlIGNoaWxkcmVuIGNvbnRhaW5zIGNvbXBvbmVudHMgLSBiZWNhdXNlIGEgZnVuY3Rpb25hbCBjb21wb25lbnRcblx0Ly8gbWF5IHJldHVybiBhbiBBcnJheSBpbnN0ZWFkIG9mIGEgc2luZ2xlIHJvb3QuIEluIHRoaXMgY2FzZSwganVzdCBhIHNpbXBsZVxuXHQvLyBub3JtYWxpemF0aW9uIGlzIG5lZWRlZCAtIGlmIGFueSBjaGlsZCBpcyBhbiBBcnJheSwgd2UgZmxhdHRlbiB0aGUgd2hvbGVcblx0Ly8gdGhpbmcgd2l0aCBBcnJheS5wcm90b3R5cGUuY29uY2F0LiBJdCBpcyBndWFyYW50ZWVkIHRvIGJlIG9ubHkgMS1sZXZlbCBkZWVwXG5cdC8vIGJlY2F1c2UgZnVuY3Rpb25hbCBjb21wb25lbnRzIGFscmVhZHkgbm9ybWFsaXplIHRoZWlyIG93biBjaGlsZHJlbi5cblx0ZnVuY3Rpb24gc2ltcGxlTm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW5baV0pKSB7XG5cdCAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBjaGlsZHJlbilcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGNoaWxkcmVuXG5cdH1cblx0XG5cdC8vIDIuIFdoZW4gdGhlIGNoaWxkcmVuIGNvbnRhaW5zIGNvbnN0cnVjdHMgdGhhdCBhbHdheXMgZ2VuZXJhdGVkIG5lc3RlZCBBcnJheXMsXG5cdC8vIGUuZy4gPHRlbXBsYXRlPiwgPHNsb3Q+LCB2LWZvciwgb3Igd2hlbiB0aGUgY2hpbGRyZW4gaXMgcHJvdmlkZWQgYnkgdXNlclxuXHQvLyB3aXRoIGhhbmQtd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zIC8gSlNYLiBJbiBzdWNoIGNhc2VzIGEgZnVsbCBub3JtYWxpemF0aW9uXG5cdC8vIGlzIG5lZWRlZCB0byBjYXRlciB0byBhbGwgcG9zc2libGUgdHlwZXMgb2YgY2hpbGRyZW4gdmFsdWVzLlxuXHRmdW5jdGlvbiBub3JtYWxpemVDaGlsZHJlbiAoY2hpbGRyZW4pIHtcblx0ICByZXR1cm4gaXNQcmltaXRpdmUoY2hpbGRyZW4pXG5cdCAgICA/IFtjcmVhdGVUZXh0Vk5vZGUoY2hpbGRyZW4pXVxuXHQgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkcmVuKVxuXHQgICAgICA/IG5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4oY2hpbGRyZW4pXG5cdCAgICAgIDogdW5kZWZpbmVkXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVGV4dE5vZGUgKG5vZGUpIHtcblx0ICByZXR1cm4gaXNEZWYobm9kZSkgJiYgaXNEZWYobm9kZS50ZXh0KSAmJiBpc0ZhbHNlKG5vZGUuaXNDb21tZW50KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemVBcnJheUNoaWxkcmVuIChjaGlsZHJlbiwgbmVzdGVkSW5kZXgpIHtcblx0ICB2YXIgcmVzID0gW107XG5cdCAgdmFyIGksIGMsIGxhc3RJbmRleCwgbGFzdDtcblx0ICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgIGMgPSBjaGlsZHJlbltpXTtcblx0ICAgIGlmIChpc1VuZGVmKGMpIHx8IHR5cGVvZiBjID09PSAnYm9vbGVhbicpIHsgY29udGludWUgfVxuXHQgICAgbGFzdEluZGV4ID0gcmVzLmxlbmd0aCAtIDE7XG5cdCAgICBsYXN0ID0gcmVzW2xhc3RJbmRleF07XG5cdCAgICAvLyAgbmVzdGVkXG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShjKSkge1xuXHQgICAgICBpZiAoYy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgYyA9IG5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4oYywgKChuZXN0ZWRJbmRleCB8fCAnJykgKyBcIl9cIiArIGkpKTtcblx0ICAgICAgICAvLyBtZXJnZSBhZGphY2VudCB0ZXh0IG5vZGVzXG5cdCAgICAgICAgaWYgKGlzVGV4dE5vZGUoY1swXSkgJiYgaXNUZXh0Tm9kZShsYXN0KSkge1xuXHQgICAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgKGNbMF0pLnRleHQpO1xuXHQgICAgICAgICAgYy5zaGlmdCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXMucHVzaC5hcHBseShyZXMsIGMpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGlzUHJpbWl0aXZlKGMpKSB7XG5cdCAgICAgIGlmIChpc1RleHROb2RlKGxhc3QpKSB7XG5cdCAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2Rlc1xuXHQgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGZvciBTU1IgaHlkcmF0aW9uIGJlY2F1c2UgdGV4dCBub2RlcyBhcmVcblx0ICAgICAgICAvLyBlc3NlbnRpYWxseSBtZXJnZWQgd2hlbiByZW5kZXJlZCB0byBIVE1MIHN0cmluZ3Ncblx0ICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyBjKTtcblx0ICAgICAgfSBlbHNlIGlmIChjICE9PSAnJykge1xuXHQgICAgICAgIC8vIGNvbnZlcnQgcHJpbWl0aXZlIHRvIHZub2RlXG5cdCAgICAgICAgcmVzLnB1c2goY3JlYXRlVGV4dFZOb2RlKGMpKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGlzVGV4dE5vZGUoYykgJiYgaXNUZXh0Tm9kZShsYXN0KSkge1xuXHQgICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXNcblx0ICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyBjLnRleHQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIGRlZmF1bHQga2V5IGZvciBuZXN0ZWQgYXJyYXkgY2hpbGRyZW4gKGxpa2VseSBnZW5lcmF0ZWQgYnkgdi1mb3IpXG5cdCAgICAgICAgaWYgKGlzVHJ1ZShjaGlsZHJlbi5faXNWTGlzdCkgJiZcblx0ICAgICAgICAgIGlzRGVmKGMudGFnKSAmJlxuXHQgICAgICAgICAgaXNVbmRlZihjLmtleSkgJiZcblx0ICAgICAgICAgIGlzRGVmKG5lc3RlZEluZGV4KSkge1xuXHQgICAgICAgICAgYy5rZXkgPSBcIl9fdmxpc3RcIiArIG5lc3RlZEluZGV4ICsgXCJfXCIgKyBpICsgXCJfX1wiO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXMucHVzaChjKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gZW5zdXJlQ3RvciAoY29tcCwgYmFzZSkge1xuXHQgIGlmIChcblx0ICAgIGNvbXAuX19lc01vZHVsZSB8fFxuXHQgICAgKGhhc1N5bWJvbCAmJiBjb21wW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnKVxuXHQgICkge1xuXHQgICAgY29tcCA9IGNvbXAuZGVmYXVsdDtcblx0ICB9XG5cdCAgcmV0dXJuIGlzT2JqZWN0KGNvbXApXG5cdCAgICA/IGJhc2UuZXh0ZW5kKGNvbXApXG5cdCAgICA6IGNvbXBcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQXN5bmNQbGFjZWhvbGRlciAoXG5cdCAgZmFjdG9yeSxcblx0ICBkYXRhLFxuXHQgIGNvbnRleHQsXG5cdCAgY2hpbGRyZW4sXG5cdCAgdGFnXG5cdCkge1xuXHQgIHZhciBub2RlID0gY3JlYXRlRW1wdHlWTm9kZSgpO1xuXHQgIG5vZGUuYXN5bmNGYWN0b3J5ID0gZmFjdG9yeTtcblx0ICBub2RlLmFzeW5jTWV0YSA9IHsgZGF0YTogZGF0YSwgY29udGV4dDogY29udGV4dCwgY2hpbGRyZW46IGNoaWxkcmVuLCB0YWc6IHRhZyB9O1xuXHQgIHJldHVybiBub2RlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudCAoXG5cdCAgZmFjdG9yeSxcblx0ICBiYXNlQ3Rvcixcblx0ICBjb250ZXh0XG5cdCkge1xuXHQgIGlmIChpc1RydWUoZmFjdG9yeS5lcnJvcikgJiYgaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7XG5cdCAgICByZXR1cm4gZmFjdG9yeS5lcnJvckNvbXBcblx0ICB9XG5cdFxuXHQgIGlmIChpc0RlZihmYWN0b3J5LnJlc29sdmVkKSkge1xuXHQgICAgcmV0dXJuIGZhY3RvcnkucmVzb2x2ZWRcblx0ICB9XG5cdFxuXHQgIGlmIChpc1RydWUoZmFjdG9yeS5sb2FkaW5nKSAmJiBpc0RlZihmYWN0b3J5LmxvYWRpbmdDb21wKSkge1xuXHQgICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ0NvbXBcblx0ICB9XG5cdFxuXHQgIGlmIChpc0RlZihmYWN0b3J5LmNvbnRleHRzKSkge1xuXHQgICAgLy8gYWxyZWFkeSBwZW5kaW5nXG5cdCAgICBmYWN0b3J5LmNvbnRleHRzLnB1c2goY29udGV4dCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjb250ZXh0cyA9IGZhY3RvcnkuY29udGV4dHMgPSBbY29udGV4dF07XG5cdCAgICB2YXIgc3luYyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGZvcmNlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbnRleHRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGNvbnRleHRzW2ldLiRmb3JjZVVwZGF0ZSgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciByZXNvbHZlID0gb25jZShmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgIC8vIGNhY2hlIHJlc29sdmVkXG5cdCAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSBlbnN1cmVDdG9yKHJlcywgYmFzZUN0b3IpO1xuXHQgICAgICAvLyBpbnZva2UgY2FsbGJhY2tzIG9ubHkgaWYgdGhpcyBpcyBub3QgYSBzeW5jaHJvbm91cyByZXNvbHZlXG5cdCAgICAgIC8vIChhc3luYyByZXNvbHZlcyBhcmUgc2hpbW1lZCBhcyBzeW5jaHJvbm91cyBkdXJpbmcgU1NSKVxuXHQgICAgICBpZiAoIXN5bmMpIHtcblx0ICAgICAgICBmb3JjZVJlbmRlcigpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgcmVqZWN0ID0gb25jZShmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgXCJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQ6IFwiICsgKFN0cmluZyhmYWN0b3J5KSkgK1xuXHQgICAgICAgIChyZWFzb24gPyAoXCJcXG5SZWFzb246IFwiICsgcmVhc29uKSA6ICcnKVxuXHQgICAgICApO1xuXHQgICAgICBpZiAoaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7XG5cdCAgICAgICAgZmFjdG9yeS5lcnJvciA9IHRydWU7XG5cdCAgICAgICAgZm9yY2VSZW5kZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHJlcyA9IGZhY3RvcnkocmVzb2x2ZSwgcmVqZWN0KTtcblx0XG5cdCAgICBpZiAoaXNPYmplY3QocmVzKSkge1xuXHQgICAgICBpZiAodHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgLy8gKCkgPT4gUHJvbWlzZVxuXHQgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7XG5cdCAgICAgICAgICByZXMudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChpc0RlZihyZXMuY29tcG9uZW50KSAmJiB0eXBlb2YgcmVzLmNvbXBvbmVudC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgcmVzLmNvbXBvbmVudC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdFxuXHQgICAgICAgIGlmIChpc0RlZihyZXMuZXJyb3IpKSB7XG5cdCAgICAgICAgICBmYWN0b3J5LmVycm9yQ29tcCA9IGVuc3VyZUN0b3IocmVzLmVycm9yLCBiYXNlQ3Rvcik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoaXNEZWYocmVzLmxvYWRpbmcpKSB7XG5cdCAgICAgICAgICBmYWN0b3J5LmxvYWRpbmdDb21wID0gZW5zdXJlQ3RvcihyZXMubG9hZGluZywgYmFzZUN0b3IpO1xuXHQgICAgICAgICAgaWYgKHJlcy5kZWxheSA9PT0gMCkge1xuXHQgICAgICAgICAgICBmYWN0b3J5LmxvYWRpbmcgPSB0cnVlO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkgJiYgaXNVbmRlZihmYWN0b3J5LmVycm9yKSkge1xuXHQgICAgICAgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIGZvcmNlUmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCByZXMuZGVsYXkgfHwgMjAwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChpc0RlZihyZXMudGltZW91dCkpIHtcblx0ICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBpZiAoaXNVbmRlZihmYWN0b3J5LnJlc29sdmVkKSkge1xuXHQgICAgICAgICAgICAgIHJlamVjdChcblx0ICAgICAgICAgICAgICAgIFwidGltZW91dCAoXCIgKyAocmVzLnRpbWVvdXQpICsgXCJtcylcIlxuXHQgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0sIHJlcy50aW1lb3V0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBzeW5jID0gZmFsc2U7XG5cdCAgICAvLyByZXR1cm4gaW4gY2FzZSByZXNvbHZlZCBzeW5jaHJvbm91c2x5XG5cdCAgICByZXR1cm4gZmFjdG9yeS5sb2FkaW5nXG5cdCAgICAgID8gZmFjdG9yeS5sb2FkaW5nQ29tcFxuXHQgICAgICA6IGZhY3RvcnkucmVzb2x2ZWRcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaXNBc3luY1BsYWNlaG9sZGVyIChub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUuaXNDb21tZW50ICYmIG5vZGUuYXN5bmNGYWN0b3J5XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0Rmlyc3RDb21wb25lbnRDaGlsZCAoY2hpbGRyZW4pIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGMgPSBjaGlsZHJlbltpXTtcblx0ICAgICAgaWYgKGlzRGVmKGMpICYmIChpc0RlZihjLmNvbXBvbmVudE9wdGlvbnMpIHx8IGlzQXN5bmNQbGFjZWhvbGRlcihjKSkpIHtcblx0ICAgICAgICByZXR1cm4gY1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdEV2ZW50cyAodm0pIHtcblx0ICB2bS5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2bS5faGFzSG9va0V2ZW50ID0gZmFsc2U7XG5cdCAgLy8gaW5pdCBwYXJlbnQgYXR0YWNoZWQgZXZlbnRzXG5cdCAgdmFyIGxpc3RlbmVycyA9IHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7XG5cdCAgaWYgKGxpc3RlbmVycykge1xuXHQgICAgdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzKHZtLCBsaXN0ZW5lcnMpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRhcmdldDtcblx0XG5cdGZ1bmN0aW9uIGFkZCAoZXZlbnQsIGZuLCBvbmNlKSB7XG5cdCAgaWYgKG9uY2UpIHtcblx0ICAgIHRhcmdldC4kb25jZShldmVudCwgZm4pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0YXJnZXQuJG9uKGV2ZW50LCBmbik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmUkMSAoZXZlbnQsIGZuKSB7XG5cdCAgdGFyZ2V0LiRvZmYoZXZlbnQsIGZuKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzIChcblx0ICB2bSxcblx0ICBsaXN0ZW5lcnMsXG5cdCAgb2xkTGlzdGVuZXJzXG5cdCkge1xuXHQgIHRhcmdldCA9IHZtO1xuXHQgIHVwZGF0ZUxpc3RlbmVycyhsaXN0ZW5lcnMsIG9sZExpc3RlbmVycyB8fCB7fSwgYWRkLCByZW1vdmUkMSwgdm0pO1xuXHQgIHRhcmdldCA9IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuXHQgIHZhciBob29rUkUgPSAvXmhvb2s6Lztcblx0ICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBldmVudC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB0aGlzJDEuJG9uKGV2ZW50W2ldLCBmbik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICh2bS5fZXZlbnRzW2V2ZW50XSB8fCAodm0uX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuXHQgICAgICAvLyBvcHRpbWl6ZSBob29rOmV2ZW50IGNvc3QgYnkgdXNpbmcgYSBib29sZWFuIGZsYWcgbWFya2VkIGF0IHJlZ2lzdHJhdGlvblxuXHQgICAgICAvLyBpbnN0ZWFkIG9mIGEgaGFzaCBsb29rdXBcblx0ICAgICAgaWYgKGhvb2tSRS50ZXN0KGV2ZW50KSkge1xuXHQgICAgICAgIHZtLl9oYXNIb29rRXZlbnQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdm1cblx0ICB9O1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGZ1bmN0aW9uIG9uICgpIHtcblx0ICAgICAgdm0uJG9mZihldmVudCwgb24pO1xuXHQgICAgICBmbi5hcHBseSh2bSwgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIG9uLmZuID0gZm47XG5cdCAgICB2bS4kb24oZXZlbnQsIG9uKTtcblx0ICAgIHJldHVybiB2bVxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICAvLyBhbGxcblx0ICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHQgICAgICB2bS5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgICAgcmV0dXJuIHZtXG5cdCAgICB9XG5cdCAgICAvLyBhcnJheSBvZiBldmVudHNcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGV2ZW50KSkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGV2ZW50Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHRoaXMkMS4kb2ZmKGV2ZW50W2ldLCBmbik7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZtXG5cdCAgICB9XG5cdCAgICAvLyBzcGVjaWZpYyBldmVudFxuXHQgICAgdmFyIGNicyA9IHZtLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgaWYgKCFjYnMpIHtcblx0ICAgICAgcmV0dXJuIHZtXG5cdCAgICB9XG5cdCAgICBpZiAoIWZuKSB7XG5cdCAgICAgIHZtLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcblx0ICAgICAgcmV0dXJuIHZtXG5cdCAgICB9XG5cdCAgICBpZiAoZm4pIHtcblx0ICAgICAgLy8gc3BlY2lmaWMgaGFuZGxlclxuXHQgICAgICB2YXIgY2I7XG5cdCAgICAgIHZhciBpJDEgPSBjYnMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaSQxLS0pIHtcblx0ICAgICAgICBjYiA9IGNic1tpJDFdO1xuXHQgICAgICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG5cdCAgICAgICAgICBjYnMuc3BsaWNlKGkkMSwgMSk7XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZtXG5cdCAgfTtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIHtcblx0ICAgICAgdmFyIGxvd2VyQ2FzZUV2ZW50ID0gZXZlbnQudG9Mb3dlckNhc2UoKTtcblx0ICAgICAgaWYgKGxvd2VyQ2FzZUV2ZW50ICE9PSBldmVudCAmJiB2bS5fZXZlbnRzW2xvd2VyQ2FzZUV2ZW50XSkge1xuXHQgICAgICAgIHRpcChcblx0ICAgICAgICAgIFwiRXZlbnQgXFxcIlwiICsgbG93ZXJDYXNlRXZlbnQgKyBcIlxcXCIgaXMgZW1pdHRlZCBpbiBjb21wb25lbnQgXCIgK1xuXHQgICAgICAgICAgKGZvcm1hdENvbXBvbmVudE5hbWUodm0pKSArIFwiIGJ1dCB0aGUgaGFuZGxlciBpcyByZWdpc3RlcmVkIGZvciBcXFwiXCIgKyBldmVudCArIFwiXFxcIi4gXCIgK1xuXHQgICAgICAgICAgXCJOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCB5b3UgY2Fubm90IHVzZSBcIiArXG5cdCAgICAgICAgICBcInYtb24gdG8gbGlzdGVuIHRvIGNhbWVsQ2FzZSBldmVudHMgd2hlbiB1c2luZyBpbi1ET00gdGVtcGxhdGVzLiBcIiArXG5cdCAgICAgICAgICBcIllvdSBzaG91bGQgcHJvYmFibHkgdXNlIFxcXCJcIiArIChoeXBoZW5hdGUoZXZlbnQpKSArIFwiXFxcIiBpbnN0ZWFkIG9mIFxcXCJcIiArIGV2ZW50ICsgXCJcXFwiLlwiXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIGNicyA9IHZtLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgaWYgKGNicykge1xuXHQgICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcblx0ICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBjYnNbaV0uYXBwbHkodm0sIGFyZ3MpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAoXCJldmVudCBoYW5kbGVyIGZvciBcXFwiXCIgKyBldmVudCArIFwiXFxcIlwiKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdm1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdFxuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciByZXNvbHZpbmcgcmF3IGNoaWxkcmVuIFZOb2RlcyBpbnRvIGEgc2xvdCBvYmplY3QuXG5cdCAqL1xuXHRmdW5jdGlvbiByZXNvbHZlU2xvdHMgKFxuXHQgIGNoaWxkcmVuLFxuXHQgIGNvbnRleHRcblx0KSB7XG5cdCAgdmFyIHNsb3RzID0ge307XG5cdCAgaWYgKCFjaGlsZHJlbikge1xuXHQgICAgcmV0dXJuIHNsb3RzXG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcblx0ICAgIHZhciBkYXRhID0gY2hpbGQuZGF0YTtcblx0ICAgIC8vIHJlbW92ZSBzbG90IGF0dHJpYnV0ZSBpZiB0aGUgbm9kZSBpcyByZXNvbHZlZCBhcyBhIFZ1ZSBzbG90IG5vZGVcblx0ICAgIGlmIChkYXRhICYmIGRhdGEuYXR0cnMgJiYgZGF0YS5hdHRycy5zbG90KSB7XG5cdCAgICAgIGRlbGV0ZSBkYXRhLmF0dHJzLnNsb3Q7XG5cdCAgICB9XG5cdCAgICAvLyBuYW1lZCBzbG90cyBzaG91bGQgb25seSBiZSByZXNwZWN0ZWQgaWYgdGhlIHZub2RlIHdhcyByZW5kZXJlZCBpbiB0aGVcblx0ICAgIC8vIHNhbWUgY29udGV4dC5cblx0ICAgIGlmICgoY2hpbGQuY29udGV4dCA9PT0gY29udGV4dCB8fCBjaGlsZC5mbkNvbnRleHQgPT09IGNvbnRleHQpICYmXG5cdCAgICAgIGRhdGEgJiYgZGF0YS5zbG90ICE9IG51bGxcblx0ICAgICkge1xuXHQgICAgICB2YXIgbmFtZSA9IGRhdGEuc2xvdDtcblx0ICAgICAgdmFyIHNsb3QgPSAoc2xvdHNbbmFtZV0gfHwgKHNsb3RzW25hbWVdID0gW10pKTtcblx0ICAgICAgaWYgKGNoaWxkLnRhZyA9PT0gJ3RlbXBsYXRlJykge1xuXHQgICAgICAgIHNsb3QucHVzaC5hcHBseShzbG90LCBjaGlsZC5jaGlsZHJlbiB8fCBbXSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2xvdC5wdXNoKGNoaWxkKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgKHNsb3RzLmRlZmF1bHQgfHwgKHNsb3RzLmRlZmF1bHQgPSBbXSkpLnB1c2goY2hpbGQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBpZ25vcmUgc2xvdHMgdGhhdCBjb250YWlucyBvbmx5IHdoaXRlc3BhY2Vcblx0ICBmb3IgKHZhciBuYW1lJDEgaW4gc2xvdHMpIHtcblx0ICAgIGlmIChzbG90c1tuYW1lJDFdLmV2ZXJ5KGlzV2hpdGVzcGFjZSkpIHtcblx0ICAgICAgZGVsZXRlIHNsb3RzW25hbWUkMV07XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzbG90c1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1doaXRlc3BhY2UgKG5vZGUpIHtcblx0ICByZXR1cm4gKG5vZGUuaXNDb21tZW50ICYmICFub2RlLmFzeW5jRmFjdG9yeSkgfHwgbm9kZS50ZXh0ID09PSAnICdcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVNjb3BlZFNsb3RzIChcblx0ICBmbnMsIC8vIHNlZSBmbG93L3Zub2RlXG5cdCAgcmVzXG5cdCkge1xuXHQgIHJlcyA9IHJlcyB8fCB7fTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGZucy5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoZm5zW2ldKSkge1xuXHQgICAgICByZXNvbHZlU2NvcGVkU2xvdHMoZm5zW2ldLCByZXMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzW2Zuc1tpXS5rZXldID0gZm5zW2ldLmZuO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGFjdGl2ZUluc3RhbmNlID0gbnVsbDtcblx0dmFyIGlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCA9IGZhbHNlO1xuXHRcblx0ZnVuY3Rpb24gaW5pdExpZmVjeWNsZSAodm0pIHtcblx0ICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zO1xuXHRcblx0ICAvLyBsb2NhdGUgZmlyc3Qgbm9uLWFic3RyYWN0IHBhcmVudFxuXHQgIHZhciBwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcblx0ICBpZiAocGFyZW50ICYmICFvcHRpb25zLmFic3RyYWN0KSB7XG5cdCAgICB3aGlsZSAocGFyZW50LiRvcHRpb25zLmFic3RyYWN0ICYmIHBhcmVudC4kcGFyZW50KSB7XG5cdCAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuXHQgICAgfVxuXHQgICAgcGFyZW50LiRjaGlsZHJlbi5wdXNoKHZtKTtcblx0ICB9XG5cdFxuXHQgIHZtLiRwYXJlbnQgPSBwYXJlbnQ7XG5cdCAgdm0uJHJvb3QgPSBwYXJlbnQgPyBwYXJlbnQuJHJvb3QgOiB2bTtcblx0XG5cdCAgdm0uJGNoaWxkcmVuID0gW107XG5cdCAgdm0uJHJlZnMgPSB7fTtcblx0XG5cdCAgdm0uX3dhdGNoZXIgPSBudWxsO1xuXHQgIHZtLl9pbmFjdGl2ZSA9IG51bGw7XG5cdCAgdm0uX2RpcmVjdEluYWN0aXZlID0gZmFsc2U7XG5cdCAgdm0uX2lzTW91bnRlZCA9IGZhbHNlO1xuXHQgIHZtLl9pc0Rlc3Ryb3llZCA9IGZhbHNlO1xuXHQgIHZtLl9pc0JlaW5nRGVzdHJveWVkID0gZmFsc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcblx0ICBWdWUucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAodm5vZGUsIGh5ZHJhdGluZykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGlmICh2bS5faXNNb3VudGVkKSB7XG5cdCAgICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlVXBkYXRlJyk7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJldkVsID0gdm0uJGVsO1xuXHQgICAgdmFyIHByZXZWbm9kZSA9IHZtLl92bm9kZTtcblx0ICAgIHZhciBwcmV2QWN0aXZlSW5zdGFuY2UgPSBhY3RpdmVJbnN0YW5jZTtcblx0ICAgIGFjdGl2ZUluc3RhbmNlID0gdm07XG5cdCAgICB2bS5fdm5vZGUgPSB2bm9kZTtcblx0ICAgIC8vIFZ1ZS5wcm90b3R5cGUuX19wYXRjaF9fIGlzIGluamVjdGVkIGluIGVudHJ5IHBvaW50c1xuXHQgICAgLy8gYmFzZWQgb24gdGhlIHJlbmRlcmluZyBiYWNrZW5kIHVzZWQuXG5cdCAgICBpZiAoIXByZXZWbm9kZSkge1xuXHQgICAgICAvLyBpbml0aWFsIHJlbmRlclxuXHQgICAgICB2bS4kZWwgPSB2bS5fX3BhdGNoX18oXG5cdCAgICAgICAgdm0uJGVsLCB2bm9kZSwgaHlkcmF0aW5nLCBmYWxzZSAvKiByZW1vdmVPbmx5ICovLFxuXHQgICAgICAgIHZtLiRvcHRpb25zLl9wYXJlbnRFbG0sXG5cdCAgICAgICAgdm0uJG9wdGlvbnMuX3JlZkVsbVxuXHQgICAgICApO1xuXHQgICAgICAvLyBubyBuZWVkIGZvciB0aGUgcmVmIG5vZGVzIGFmdGVyIGluaXRpYWwgcGF0Y2hcblx0ICAgICAgLy8gdGhpcyBwcmV2ZW50cyBrZWVwaW5nIGEgZGV0YWNoZWQgRE9NIHRyZWUgaW4gbWVtb3J5ICgjNTg1MSlcblx0ICAgICAgdm0uJG9wdGlvbnMuX3BhcmVudEVsbSA9IHZtLiRvcHRpb25zLl9yZWZFbG0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gdXBkYXRlc1xuXHQgICAgICB2bS4kZWwgPSB2bS5fX3BhdGNoX18ocHJldlZub2RlLCB2bm9kZSk7XG5cdCAgICB9XG5cdCAgICBhY3RpdmVJbnN0YW5jZSA9IHByZXZBY3RpdmVJbnN0YW5jZTtcblx0ICAgIC8vIHVwZGF0ZSBfX3Z1ZV9fIHJlZmVyZW5jZVxuXHQgICAgaWYgKHByZXZFbCkge1xuXHQgICAgICBwcmV2RWwuX192dWVfXyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAodm0uJGVsKSB7XG5cdCAgICAgIHZtLiRlbC5fX3Z1ZV9fID0gdm07XG5cdCAgICB9XG5cdCAgICAvLyBpZiBwYXJlbnQgaXMgYW4gSE9DLCB1cGRhdGUgaXRzICRlbCBhcyB3ZWxsXG5cdCAgICBpZiAodm0uJHZub2RlICYmIHZtLiRwYXJlbnQgJiYgdm0uJHZub2RlID09PSB2bS4kcGFyZW50Ll92bm9kZSkge1xuXHQgICAgICB2bS4kcGFyZW50LiRlbCA9IHZtLiRlbDtcblx0ICAgIH1cblx0ICAgIC8vIHVwZGF0ZWQgaG9vayBpcyBjYWxsZWQgYnkgdGhlIHNjaGVkdWxlciB0byBlbnN1cmUgdGhhdCBjaGlsZHJlbiBhcmVcblx0ICAgIC8vIHVwZGF0ZWQgaW4gYSBwYXJlbnQncyB1cGRhdGVkIGhvb2suXG5cdCAgfTtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKHZtLl93YXRjaGVyKSB7XG5cdCAgICAgIHZtLl93YXRjaGVyLnVwZGF0ZSgpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKHZtLl9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHQgICAgY2FsbEhvb2sodm0sICdiZWZvcmVEZXN0cm95Jyk7XG5cdCAgICB2bS5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWU7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudFxuXHQgICAgdmFyIHBhcmVudCA9IHZtLiRwYXJlbnQ7XG5cdCAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQgJiYgIXZtLiRvcHRpb25zLmFic3RyYWN0KSB7XG5cdCAgICAgIHJlbW92ZShwYXJlbnQuJGNoaWxkcmVuLCB2bSk7XG5cdCAgICB9XG5cdCAgICAvLyB0ZWFyZG93biB3YXRjaGVyc1xuXHQgICAgaWYgKHZtLl93YXRjaGVyKSB7XG5cdCAgICAgIHZtLl93YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgaSA9IHZtLl93YXRjaGVycy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZtLl93YXRjaGVyc1tpXS50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSBmcm9tIGRhdGEgb2Jcblx0ICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuXHQgICAgaWYgKHZtLl9kYXRhLl9fb2JfXykge1xuXHQgICAgICB2bS5fZGF0YS5fX29iX18udm1Db3VudC0tO1xuXHQgICAgfVxuXHQgICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG5cdCAgICB2bS5faXNEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgLy8gaW52b2tlIGRlc3Ryb3kgaG9va3Mgb24gY3VycmVudCByZW5kZXJlZCB0cmVlXG5cdCAgICB2bS5fX3BhdGNoX18odm0uX3Zub2RlLCBudWxsKTtcblx0ICAgIC8vIGZpcmUgZGVzdHJveWVkIGhvb2tcblx0ICAgIGNhbGxIb29rKHZtLCAnZGVzdHJveWVkJyk7XG5cdCAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuXHQgICAgdm0uJG9mZigpO1xuXHQgICAgLy8gcmVtb3ZlIF9fdnVlX18gcmVmZXJlbmNlXG5cdCAgICBpZiAodm0uJGVsKSB7XG5cdCAgICAgIHZtLiRlbC5fX3Z1ZV9fID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIC8vIHJlbGVhc2UgY2lyY3VsYXIgcmVmZXJlbmNlICgjNjc1OSlcblx0ICAgIGlmICh2bS4kdm5vZGUpIHtcblx0ICAgICAgdm0uJHZub2RlLnBhcmVudCA9IG51bGw7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbW91bnRDb21wb25lbnQgKFxuXHQgIHZtLFxuXHQgIGVsLFxuXHQgIGh5ZHJhdGluZ1xuXHQpIHtcblx0ICB2bS4kZWwgPSBlbDtcblx0ICBpZiAoIXZtLiRvcHRpb25zLnJlbmRlcikge1xuXHQgICAgdm0uJG9wdGlvbnMucmVuZGVyID0gY3JlYXRlRW1wdHlWTm9kZTtcblx0ICAgIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICgodm0uJG9wdGlvbnMudGVtcGxhdGUgJiYgdm0uJG9wdGlvbnMudGVtcGxhdGUuY2hhckF0KDApICE9PSAnIycpIHx8XG5cdCAgICAgICAgdm0uJG9wdGlvbnMuZWwgfHwgZWwpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgJ1lvdSBhcmUgdXNpbmcgdGhlIHJ1bnRpbWUtb25seSBidWlsZCBvZiBWdWUgd2hlcmUgdGhlIHRlbXBsYXRlICcgK1xuXHQgICAgICAgICAgJ2NvbXBpbGVyIGlzIG5vdCBhdmFpbGFibGUuIEVpdGhlciBwcmUtY29tcGlsZSB0aGUgdGVtcGxhdGVzIGludG8gJyArXG5cdCAgICAgICAgICAncmVuZGVyIGZ1bmN0aW9ucywgb3IgdXNlIHRoZSBjb21waWxlci1pbmNsdWRlZCBidWlsZC4nLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAnRmFpbGVkIHRvIG1vdW50IGNvbXBvbmVudDogdGVtcGxhdGUgb3IgcmVuZGVyIGZ1bmN0aW9uIG5vdCBkZWZpbmVkLicsXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgY2FsbEhvb2sodm0sICdiZWZvcmVNb3VudCcpO1xuXHRcblx0ICB2YXIgdXBkYXRlQ29tcG9uZW50O1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuXHQgICAgdXBkYXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbmFtZSA9IHZtLl9uYW1lO1xuXHQgICAgICB2YXIgaWQgPSB2bS5fdWlkO1xuXHQgICAgICB2YXIgc3RhcnRUYWcgPSBcInZ1ZS1wZXJmLXN0YXJ0OlwiICsgaWQ7XG5cdCAgICAgIHZhciBlbmRUYWcgPSBcInZ1ZS1wZXJmLWVuZDpcIiArIGlkO1xuXHRcblx0ICAgICAgbWFyayhzdGFydFRhZyk7XG5cdCAgICAgIHZhciB2bm9kZSA9IHZtLl9yZW5kZXIoKTtcblx0ICAgICAgbWFyayhlbmRUYWcpO1xuXHQgICAgICBtZWFzdXJlKChcInZ1ZSBcIiArIG5hbWUgKyBcIiByZW5kZXJcIiksIHN0YXJ0VGFnLCBlbmRUYWcpO1xuXHRcblx0ICAgICAgbWFyayhzdGFydFRhZyk7XG5cdCAgICAgIHZtLl91cGRhdGUodm5vZGUsIGh5ZHJhdGluZyk7XG5cdCAgICAgIG1hcmsoZW5kVGFnKTtcblx0ICAgICAgbWVhc3VyZSgoXCJ2dWUgXCIgKyBuYW1lICsgXCIgcGF0Y2hcIiksIHN0YXJ0VGFnLCBlbmRUYWcpO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdXBkYXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2bS5fdXBkYXRlKHZtLl9yZW5kZXIoKSwgaHlkcmF0aW5nKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvLyB3ZSBzZXQgdGhpcyB0byB2bS5fd2F0Y2hlciBpbnNpZGUgdGhlIHdhdGNoZXIncyBjb25zdHJ1Y3RvclxuXHQgIC8vIHNpbmNlIHRoZSB3YXRjaGVyJ3MgaW5pdGlhbCBwYXRjaCBtYXkgY2FsbCAkZm9yY2VVcGRhdGUgKGUuZy4gaW5zaWRlIGNoaWxkXG5cdCAgLy8gY29tcG9uZW50J3MgbW91bnRlZCBob29rKSwgd2hpY2ggcmVsaWVzIG9uIHZtLl93YXRjaGVyIGJlaW5nIGFscmVhZHkgZGVmaW5lZFxuXHQgIG5ldyBXYXRjaGVyKHZtLCB1cGRhdGVDb21wb25lbnQsIG5vb3AsIG51bGwsIHRydWUgLyogaXNSZW5kZXJXYXRjaGVyICovKTtcblx0ICBoeWRyYXRpbmcgPSBmYWxzZTtcblx0XG5cdCAgLy8gbWFudWFsbHkgbW91bnRlZCBpbnN0YW5jZSwgY2FsbCBtb3VudGVkIG9uIHNlbGZcblx0ICAvLyBtb3VudGVkIGlzIGNhbGxlZCBmb3IgcmVuZGVyLWNyZWF0ZWQgY2hpbGQgY29tcG9uZW50cyBpbiBpdHMgaW5zZXJ0ZWQgaG9va1xuXHQgIGlmICh2bS4kdm5vZGUgPT0gbnVsbCkge1xuXHQgICAgdm0uX2lzTW91bnRlZCA9IHRydWU7XG5cdCAgICBjYWxsSG9vayh2bSwgJ21vdW50ZWQnKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZtXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUNoaWxkQ29tcG9uZW50IChcblx0ICB2bSxcblx0ICBwcm9wc0RhdGEsXG5cdCAgbGlzdGVuZXJzLFxuXHQgIHBhcmVudFZub2RlLFxuXHQgIHJlbmRlckNoaWxkcmVuXG5cdCkge1xuXHQgIHtcblx0ICAgIGlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCA9IHRydWU7XG5cdCAgfVxuXHRcblx0ICAvLyBkZXRlcm1pbmUgd2hldGhlciBjb21wb25lbnQgaGFzIHNsb3QgY2hpbGRyZW5cblx0ICAvLyB3ZSBuZWVkIHRvIGRvIHRoaXMgYmVmb3JlIG92ZXJ3cml0aW5nICRvcHRpb25zLl9yZW5kZXJDaGlsZHJlblxuXHQgIHZhciBoYXNDaGlsZHJlbiA9ICEhKFxuXHQgICAgcmVuZGVyQ2hpbGRyZW4gfHwgICAgICAgICAgICAgICAvLyBoYXMgbmV3IHN0YXRpYyBzbG90c1xuXHQgICAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuIHx8ICAvLyBoYXMgb2xkIHN0YXRpYyBzbG90c1xuXHQgICAgcGFyZW50Vm5vZGUuZGF0YS5zY29wZWRTbG90cyB8fCAvLyBoYXMgbmV3IHNjb3BlZCBzbG90c1xuXHQgICAgdm0uJHNjb3BlZFNsb3RzICE9PSBlbXB0eU9iamVjdCAvLyBoYXMgb2xkIHNjb3BlZCBzbG90c1xuXHQgICk7XG5cdFxuXHQgIHZtLiRvcHRpb25zLl9wYXJlbnRWbm9kZSA9IHBhcmVudFZub2RlO1xuXHQgIHZtLiR2bm9kZSA9IHBhcmVudFZub2RlOyAvLyB1cGRhdGUgdm0ncyBwbGFjZWhvbGRlciBub2RlIHdpdGhvdXQgcmUtcmVuZGVyXG5cdFxuXHQgIGlmICh2bS5fdm5vZGUpIHsgLy8gdXBkYXRlIGNoaWxkIHRyZWUncyBwYXJlbnRcblx0ICAgIHZtLl92bm9kZS5wYXJlbnQgPSBwYXJlbnRWbm9kZTtcblx0ICB9XG5cdCAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuID0gcmVuZGVyQ2hpbGRyZW47XG5cdFxuXHQgIC8vIHVwZGF0ZSAkYXR0cnMgYW5kICRsaXN0ZW5lcnMgaGFzaFxuXHQgIC8vIHRoZXNlIGFyZSBhbHNvIHJlYWN0aXZlIHNvIHRoZXkgbWF5IHRyaWdnZXIgY2hpbGQgdXBkYXRlIGlmIHRoZSBjaGlsZFxuXHQgIC8vIHVzZWQgdGhlbSBkdXJpbmcgcmVuZGVyXG5cdCAgdm0uJGF0dHJzID0gcGFyZW50Vm5vZGUuZGF0YS5hdHRycyB8fCBlbXB0eU9iamVjdDtcblx0ICB2bS4kbGlzdGVuZXJzID0gbGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0O1xuXHRcblx0ICAvLyB1cGRhdGUgcHJvcHNcblx0ICBpZiAocHJvcHNEYXRhICYmIHZtLiRvcHRpb25zLnByb3BzKSB7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpO1xuXHQgICAgdmFyIHByb3BzID0gdm0uX3Byb3BzO1xuXHQgICAgdmFyIHByb3BLZXlzID0gdm0uJG9wdGlvbnMuX3Byb3BLZXlzIHx8IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wS2V5cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0gcHJvcEtleXNbaV07XG5cdCAgICAgIHZhciBwcm9wT3B0aW9ucyA9IHZtLiRvcHRpb25zLnByb3BzOyAvLyB3dGYgZmxvdz9cblx0ICAgICAgcHJvcHNba2V5XSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BPcHRpb25zLCBwcm9wc0RhdGEsIHZtKTtcblx0ICAgIH1cblx0ICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTtcblx0ICAgIC8vIGtlZXAgYSBjb3B5IG9mIHJhdyBwcm9wc0RhdGFcblx0ICAgIHZtLiRvcHRpb25zLnByb3BzRGF0YSA9IHByb3BzRGF0YTtcblx0ICB9XG5cdFxuXHQgIC8vIHVwZGF0ZSBsaXN0ZW5lcnNcblx0ICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMgfHwgZW1wdHlPYmplY3Q7XG5cdCAgdmFyIG9sZExpc3RlbmVycyA9IHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7XG5cdCAgdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyA9IGxpc3RlbmVycztcblx0ICB1cGRhdGVDb21wb25lbnRMaXN0ZW5lcnModm0sIGxpc3RlbmVycywgb2xkTGlzdGVuZXJzKTtcblx0XG5cdCAgLy8gcmVzb2x2ZSBzbG90cyArIGZvcmNlIHVwZGF0ZSBpZiBoYXMgY2hpbGRyZW5cblx0ICBpZiAoaGFzQ2hpbGRyZW4pIHtcblx0ICAgIHZtLiRzbG90cyA9IHJlc29sdmVTbG90cyhyZW5kZXJDaGlsZHJlbiwgcGFyZW50Vm5vZGUuY29udGV4dCk7XG5cdCAgICB2bS4kZm9yY2VVcGRhdGUoKTtcblx0ICB9XG5cdFxuXHQgIHtcblx0ICAgIGlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNJbkluYWN0aXZlVHJlZSAodm0pIHtcblx0ICB3aGlsZSAodm0gJiYgKHZtID0gdm0uJHBhcmVudCkpIHtcblx0ICAgIGlmICh2bS5faW5hY3RpdmUpIHsgcmV0dXJuIHRydWUgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2Vcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWN0aXZhdGVDaGlsZENvbXBvbmVudCAodm0sIGRpcmVjdCkge1xuXHQgIGlmIChkaXJlY3QpIHtcblx0ICAgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgaWYgKGlzSW5JbmFjdGl2ZVRyZWUodm0pKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodm0uX2RpcmVjdEluYWN0aXZlKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgaWYgKHZtLl9pbmFjdGl2ZSB8fCB2bS5faW5hY3RpdmUgPT09IG51bGwpIHtcblx0ICAgIHZtLl9pbmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS4kY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pO1xuXHQgICAgfVxuXHQgICAgY2FsbEhvb2sodm0sICdhY3RpdmF0ZWQnKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCAodm0sIGRpcmVjdCkge1xuXHQgIGlmIChkaXJlY3QpIHtcblx0ICAgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IHRydWU7XG5cdCAgICBpZiAoaXNJbkluYWN0aXZlVHJlZSh2bSkpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghdm0uX2luYWN0aXZlKSB7XG5cdCAgICB2bS5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS4kY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KHZtLiRjaGlsZHJlbltpXSk7XG5cdCAgICB9XG5cdCAgICBjYWxsSG9vayh2bSwgJ2RlYWN0aXZhdGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjYWxsSG9vayAodm0sIGhvb2spIHtcblx0ICAvLyAjNzU3MyBkaXNhYmxlIGRlcCBjb2xsZWN0aW9uIHdoZW4gaW52b2tpbmcgbGlmZWN5Y2xlIGhvb2tzXG5cdCAgcHVzaFRhcmdldCgpO1xuXHQgIHZhciBoYW5kbGVycyA9IHZtLiRvcHRpb25zW2hvb2tdO1xuXHQgIGlmIChoYW5kbGVycykge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBoYW5kbGVyc1tpXS5jYWxsKHZtKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAoaG9vayArIFwiIGhvb2tcIikpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICh2bS5faGFzSG9va0V2ZW50KSB7XG5cdCAgICB2bS4kZW1pdCgnaG9vazonICsgaG9vayk7XG5cdCAgfVxuXHQgIHBvcFRhcmdldCgpO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdFxuXHR2YXIgTUFYX1VQREFURV9DT1VOVCA9IDEwMDtcblx0XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgYWN0aXZhdGVkQ2hpbGRyZW4gPSBbXTtcblx0dmFyIGhhcyA9IHt9O1xuXHR2YXIgY2lyY3VsYXIgPSB7fTtcblx0dmFyIHdhaXRpbmcgPSBmYWxzZTtcblx0dmFyIGZsdXNoaW5nID0gZmFsc2U7XG5cdHZhciBpbmRleCA9IDA7XG5cdFxuXHQvKipcblx0ICogUmVzZXQgdGhlIHNjaGVkdWxlcidzIHN0YXRlLlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVzZXRTY2hlZHVsZXJTdGF0ZSAoKSB7XG5cdCAgaW5kZXggPSBxdWV1ZS5sZW5ndGggPSBhY3RpdmF0ZWRDaGlsZHJlbi5sZW5ndGggPSAwO1xuXHQgIGhhcyA9IHt9O1xuXHQgIHtcblx0ICAgIGNpcmN1bGFyID0ge307XG5cdCAgfVxuXHQgIHdhaXRpbmcgPSBmbHVzaGluZyA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBmbHVzaFNjaGVkdWxlclF1ZXVlICgpIHtcblx0ICBmbHVzaGluZyA9IHRydWU7XG5cdCAgdmFyIHdhdGNoZXIsIGlkO1xuXHRcblx0ICAvLyBTb3J0IHF1ZXVlIGJlZm9yZSBmbHVzaC5cblx0ICAvLyBUaGlzIGVuc3VyZXMgdGhhdDpcblx0ICAvLyAxLiBDb21wb25lbnRzIGFyZSB1cGRhdGVkIGZyb20gcGFyZW50IHRvIGNoaWxkLiAoYmVjYXVzZSBwYXJlbnQgaXMgYWx3YXlzXG5cdCAgLy8gICAgY3JlYXRlZCBiZWZvcmUgdGhlIGNoaWxkKVxuXHQgIC8vIDIuIEEgY29tcG9uZW50J3MgdXNlciB3YXRjaGVycyBhcmUgcnVuIGJlZm9yZSBpdHMgcmVuZGVyIHdhdGNoZXIgKGJlY2F1c2Vcblx0ICAvLyAgICB1c2VyIHdhdGNoZXJzIGFyZSBjcmVhdGVkIGJlZm9yZSB0aGUgcmVuZGVyIHdhdGNoZXIpXG5cdCAgLy8gMy4gSWYgYSBjb21wb25lbnQgaXMgZGVzdHJveWVkIGR1cmluZyBhIHBhcmVudCBjb21wb25lbnQncyB3YXRjaGVyIHJ1bixcblx0ICAvLyAgICBpdHMgd2F0Y2hlcnMgY2FuIGJlIHNraXBwZWQuXG5cdCAgcXVldWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5pZCAtIGIuaWQ7IH0pO1xuXHRcblx0ICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcblx0ICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcblx0ICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBxdWV1ZS5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgIHdhdGNoZXIgPSBxdWV1ZVtpbmRleF07XG5cdCAgICBpZCA9IHdhdGNoZXIuaWQ7XG5cdCAgICBoYXNbaWRdID0gbnVsbDtcblx0ICAgIHdhdGNoZXIucnVuKCk7XG5cdCAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXG5cdCAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgaGFzW2lkXSAhPSBudWxsKSB7XG5cdCAgICAgIGNpcmN1bGFyW2lkXSA9IChjaXJjdWxhcltpZF0gfHwgMCkgKyAxO1xuXHQgICAgICBpZiAoY2lyY3VsYXJbaWRdID4gTUFYX1VQREFURV9DT1VOVCkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAnWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wICcgKyAoXG5cdCAgICAgICAgICAgIHdhdGNoZXIudXNlclxuXHQgICAgICAgICAgICAgID8gKFwiaW4gd2F0Y2hlciB3aXRoIGV4cHJlc3Npb24gXFxcIlwiICsgKHdhdGNoZXIuZXhwcmVzc2lvbikgKyBcIlxcXCJcIilcblx0ICAgICAgICAgICAgICA6IFwiaW4gYSBjb21wb25lbnQgcmVuZGVyIGZ1bmN0aW9uLlwiXG5cdCAgICAgICAgICApLFxuXHQgICAgICAgICAgd2F0Y2hlci52bVxuXHQgICAgICAgICk7XG5cdCAgICAgICAgYnJlYWtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8ga2VlcCBjb3BpZXMgb2YgcG9zdCBxdWV1ZXMgYmVmb3JlIHJlc2V0dGluZyBzdGF0ZVxuXHQgIHZhciBhY3RpdmF0ZWRRdWV1ZSA9IGFjdGl2YXRlZENoaWxkcmVuLnNsaWNlKCk7XG5cdCAgdmFyIHVwZGF0ZWRRdWV1ZSA9IHF1ZXVlLnNsaWNlKCk7XG5cdFxuXHQgIHJlc2V0U2NoZWR1bGVyU3RhdGUoKTtcblx0XG5cdCAgLy8gY2FsbCBjb21wb25lbnQgdXBkYXRlZCBhbmQgYWN0aXZhdGVkIGhvb2tzXG5cdCAgY2FsbEFjdGl2YXRlZEhvb2tzKGFjdGl2YXRlZFF1ZXVlKTtcblx0ICBjYWxsVXBkYXRlZEhvb2tzKHVwZGF0ZWRRdWV1ZSk7XG5cdFxuXHQgIC8vIGRldnRvb2wgaG9va1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjYWxsVXBkYXRlZEhvb2tzIChxdWV1ZSkge1xuXHQgIHZhciBpID0gcXVldWUubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07XG5cdCAgICB2YXIgdm0gPSB3YXRjaGVyLnZtO1xuXHQgICAgaWYgKHZtLl93YXRjaGVyID09PSB3YXRjaGVyICYmIHZtLl9pc01vdW50ZWQpIHtcblx0ICAgICAgY2FsbEhvb2sodm0sICd1cGRhdGVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUXVldWUgYSBrZXB0LWFsaXZlIGNvbXBvbmVudCB0aGF0IHdhcyBhY3RpdmF0ZWQgZHVyaW5nIHBhdGNoLlxuXHQgKiBUaGUgcXVldWUgd2lsbCBiZSBwcm9jZXNzZWQgYWZ0ZXIgdGhlIGVudGlyZSB0cmVlIGhhcyBiZWVuIHBhdGNoZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBxdWV1ZUFjdGl2YXRlZENvbXBvbmVudCAodm0pIHtcblx0ICAvLyBzZXR0aW5nIF9pbmFjdGl2ZSB0byBmYWxzZSBoZXJlIHNvIHRoYXQgYSByZW5kZXIgZnVuY3Rpb24gY2FuXG5cdCAgLy8gcmVseSBvbiBjaGVja2luZyB3aGV0aGVyIGl0J3MgaW4gYW4gaW5hY3RpdmUgdHJlZSAoZS5nLiByb3V0ZXItdmlldylcblx0ICB2bS5faW5hY3RpdmUgPSBmYWxzZTtcblx0ICBhY3RpdmF0ZWRDaGlsZHJlbi5wdXNoKHZtKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsbEFjdGl2YXRlZEhvb2tzIChxdWV1ZSkge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgIHF1ZXVlW2ldLl9pbmFjdGl2ZSA9IHRydWU7XG5cdCAgICBhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KHF1ZXVlW2ldLCB0cnVlIC8qIHRydWUgKi8pO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG5cdCAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuXHQgKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cblx0ICovXG5cdGZ1bmN0aW9uIHF1ZXVlV2F0Y2hlciAod2F0Y2hlcikge1xuXHQgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG5cdCAgaWYgKGhhc1tpZF0gPT0gbnVsbCkge1xuXHQgICAgaGFzW2lkXSA9IHRydWU7XG5cdCAgICBpZiAoIWZsdXNoaW5nKSB7XG5cdCAgICAgIHF1ZXVlLnB1c2god2F0Y2hlcik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBpZiBhbHJlYWR5IGZsdXNoaW5nLCBzcGxpY2UgdGhlIHdhdGNoZXIgYmFzZWQgb24gaXRzIGlkXG5cdCAgICAgIC8vIGlmIGFscmVhZHkgcGFzdCBpdHMgaWQsIGl0IHdpbGwgYmUgcnVuIG5leHQgaW1tZWRpYXRlbHkuXG5cdCAgICAgIHZhciBpID0gcXVldWUubGVuZ3RoIC0gMTtcblx0ICAgICAgd2hpbGUgKGkgPiBpbmRleCAmJiBxdWV1ZVtpXS5pZCA+IHdhdGNoZXIuaWQpIHtcblx0ICAgICAgICBpLS07XG5cdCAgICAgIH1cblx0ICAgICAgcXVldWUuc3BsaWNlKGkgKyAxLCAwLCB3YXRjaGVyKTtcblx0ICAgIH1cblx0ICAgIC8vIHF1ZXVlIHRoZSBmbHVzaFxuXHQgICAgaWYgKCF3YWl0aW5nKSB7XG5cdCAgICAgIHdhaXRpbmcgPSB0cnVlO1xuXHQgICAgICBuZXh0VGljayhmbHVzaFNjaGVkdWxlclF1ZXVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHVpZCQxID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcblx0ICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cblx0ICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG5cdCAqL1xuXHR2YXIgV2F0Y2hlciA9IGZ1bmN0aW9uIFdhdGNoZXIgKFxuXHQgIHZtLFxuXHQgIGV4cE9yRm4sXG5cdCAgY2IsXG5cdCAgb3B0aW9ucyxcblx0ICBpc1JlbmRlcldhdGNoZXJcblx0KSB7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIGlmIChpc1JlbmRlcldhdGNoZXIpIHtcblx0ICAgIHZtLl93YXRjaGVyID0gdGhpcztcblx0ICB9XG5cdCAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG5cdCAgLy8gb3B0aW9uc1xuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICB0aGlzLmRlZXAgPSAhIW9wdGlvbnMuZGVlcDtcblx0ICAgIHRoaXMudXNlciA9ICEhb3B0aW9ucy51c2VyO1xuXHQgICAgdGhpcy5sYXp5ID0gISFvcHRpb25zLmxhenk7XG5cdCAgICB0aGlzLnN5bmMgPSAhIW9wdGlvbnMuc3luYztcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5kZWVwID0gdGhpcy51c2VyID0gdGhpcy5sYXp5ID0gdGhpcy5zeW5jID0gZmFsc2U7XG5cdCAgfVxuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICB0aGlzLmlkID0gKyt1aWQkMTsgLy8gdWlkIGZvciBiYXRjaGluZ1xuXHQgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuXHQgIHRoaXMuZGVwcyA9IFtdO1xuXHQgIHRoaXMubmV3RGVwcyA9IFtdO1xuXHQgIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcblx0ICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbi50b1N0cmluZygpO1xuXHQgIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlclxuXHQgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLmdldHRlciA9IHBhcnNlUGF0aChleHBPckZuKTtcblx0ICAgIGlmICghdGhpcy5nZXR0ZXIpIHtcblx0ICAgICAgdGhpcy5nZXR0ZXIgPSBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgICBcIkZhaWxlZCB3YXRjaGluZyBwYXRoOiBcXFwiXCIgKyBleHBPckZuICsgXCJcXFwiIFwiICtcblx0ICAgICAgICAnV2F0Y2hlciBvbmx5IGFjY2VwdHMgc2ltcGxlIGRvdC1kZWxpbWl0ZWQgcGF0aHMuICcgK1xuXHQgICAgICAgICdGb3IgZnVsbCBjb250cm9sLCB1c2UgYSBmdW5jdGlvbiBpbnN0ZWFkLicsXG5cdCAgICAgICAgdm1cblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eVxuXHQgICAgPyB1bmRlZmluZWRcblx0ICAgIDogdGhpcy5nZXQoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG5cdCAqL1xuXHRXYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKCkge1xuXHQgIHB1c2hUYXJnZXQodGhpcyk7XG5cdCAgdmFyIHZhbHVlO1xuXHQgIHZhciB2bSA9IHRoaXMudm07XG5cdCAgdHJ5IHtcblx0ICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbCh2bSwgdm0pO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmICh0aGlzLnVzZXIpIHtcblx0ICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIChcImdldHRlciBmb3Igd2F0Y2hlciBcXFwiXCIgKyAodGhpcy5leHByZXNzaW9uKSArIFwiXFxcIlwiKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aHJvdyBlXG5cdCAgICB9XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuXHQgICAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG5cdCAgICBpZiAodGhpcy5kZWVwKSB7XG5cdCAgICAgIHRyYXZlcnNlKHZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHBvcFRhcmdldCgpO1xuXHQgICAgdGhpcy5jbGVhbnVwRGVwcygpO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsdWVcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuXHQgKi9cblx0V2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gYWRkRGVwIChkZXApIHtcblx0ICB2YXIgaWQgPSBkZXAuaWQ7XG5cdCAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG5cdCAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuXHQgICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcblx0ICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuXHQgICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuXHQgKi9cblx0V2F0Y2hlci5wcm90b3R5cGUuY2xlYW51cERlcHMgPSBmdW5jdGlvbiBjbGVhbnVwRGVwcyAoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHZhciBkZXAgPSB0aGlzJDEuZGVwc1tpXTtcblx0ICAgIGlmICghdGhpcyQxLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkge1xuXHQgICAgICBkZXAucmVtb3ZlU3ViKHRoaXMkMSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciB0bXAgPSB0aGlzLmRlcElkcztcblx0ICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG5cdCAgdG1wID0gdGhpcy5kZXBzO1xuXHQgIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcblx0ICB0aGlzLm5ld0RlcHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG5cdCAqL1xuXHRXYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUgKCkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKHRoaXMubGF6eSkge1xuXHQgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cdCAgfSBlbHNlIGlmICh0aGlzLnN5bmMpIHtcblx0ICAgIHRoaXMucnVuKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHF1ZXVlV2F0Y2hlcih0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2NoZWR1bGVyIGpvYiBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBzY2hlZHVsZXIuXG5cdCAqL1xuXHRXYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiBydW4gKCkge1xuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcblx0ICAgIGlmIChcblx0ICAgICAgdmFsdWUgIT09IHRoaXMudmFsdWUgfHxcblx0ICAgICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgd2F0Y2hlcnMgb24gT2JqZWN0L0FycmF5cyBzaG91bGQgZmlyZSBldmVuXG5cdCAgICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcblx0ICAgICAgLy8gaGF2ZSBtdXRhdGVkLlxuXHQgICAgICBpc09iamVjdCh2YWx1ZSkgfHxcblx0ICAgICAgdGhpcy5kZWVwXG5cdCAgICApIHtcblx0ICAgICAgLy8gc2V0IG5ldyB2YWx1ZVxuXHQgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuXHQgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgIGlmICh0aGlzLnVzZXIpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdGhpcy52bSwgKFwiY2FsbGJhY2sgZm9yIHdhdGNoZXIgXFxcIlwiICsgKHRoaXMuZXhwcmVzc2lvbikgKyBcIlxcXCJcIikpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG5cdCAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cblx0ICovXG5cdFdhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gZXZhbHVhdGUgKCkge1xuXHQgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgIHRoaXMuZGlydHkgPSBmYWxzZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cblx0ICovXG5cdFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uIGRlcGVuZCAoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHRoaXMkMS5kZXBzW2ldLmRlcGVuZCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YnNjcmliZXIgbGlzdC5cblx0ICovXG5cdFdhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gdGVhcmRvd24gKCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuXHQgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuXHQgICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZC5cblx0ICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICByZW1vdmUodGhpcy52bS5fd2F0Y2hlcnMsIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzJDEuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyQxKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyogICovXG5cdFxuXHR2YXIgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uID0ge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgIGdldDogbm9vcCxcblx0ICBzZXQ6IG5vb3Bcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHByb3h5ICh0YXJnZXQsIHNvdXJjZUtleSwga2V5KSB7XG5cdCAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IGZ1bmN0aW9uIHByb3h5R2V0dGVyICgpIHtcblx0ICAgIHJldHVybiB0aGlzW3NvdXJjZUtleV1ba2V5XVxuXHQgIH07XG5cdCAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IGZ1bmN0aW9uIHByb3h5U2V0dGVyICh2YWwpIHtcblx0ICAgIHRoaXNbc291cmNlS2V5XVtrZXldID0gdmFsO1xuXHQgIH07XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0U3RhdGUgKHZtKSB7XG5cdCAgdm0uX3dhdGNoZXJzID0gW107XG5cdCAgdmFyIG9wdHMgPSB2bS4kb3B0aW9ucztcblx0ICBpZiAob3B0cy5wcm9wcykgeyBpbml0UHJvcHModm0sIG9wdHMucHJvcHMpOyB9XG5cdCAgaWYgKG9wdHMubWV0aG9kcykgeyBpbml0TWV0aG9kcyh2bSwgb3B0cy5tZXRob2RzKTsgfVxuXHQgIGlmIChvcHRzLmRhdGEpIHtcblx0ICAgIGluaXREYXRhKHZtKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JzZXJ2ZSh2bS5fZGF0YSA9IHt9LCB0cnVlIC8qIGFzUm9vdERhdGEgKi8pO1xuXHQgIH1cblx0ICBpZiAob3B0cy5jb21wdXRlZCkgeyBpbml0Q29tcHV0ZWQodm0sIG9wdHMuY29tcHV0ZWQpOyB9XG5cdCAgaWYgKG9wdHMud2F0Y2ggJiYgb3B0cy53YXRjaCAhPT0gbmF0aXZlV2F0Y2gpIHtcblx0ICAgIGluaXRXYXRjaCh2bSwgb3B0cy53YXRjaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0UHJvcHMgKHZtLCBwcm9wc09wdGlvbnMpIHtcblx0ICB2YXIgcHJvcHNEYXRhID0gdm0uJG9wdGlvbnMucHJvcHNEYXRhIHx8IHt9O1xuXHQgIHZhciBwcm9wcyA9IHZtLl9wcm9wcyA9IHt9O1xuXHQgIC8vIGNhY2hlIHByb3Aga2V5cyBzbyB0aGF0IGZ1dHVyZSBwcm9wcyB1cGRhdGVzIGNhbiBpdGVyYXRlIHVzaW5nIEFycmF5XG5cdCAgLy8gaW5zdGVhZCBvZiBkeW5hbWljIG9iamVjdCBrZXkgZW51bWVyYXRpb24uXG5cdCAgdmFyIGtleXMgPSB2bS4kb3B0aW9ucy5fcHJvcEtleXMgPSBbXTtcblx0ICB2YXIgaXNSb290ID0gIXZtLiRwYXJlbnQ7XG5cdCAgLy8gcm9vdCBpbnN0YW5jZSBwcm9wcyBzaG91bGQgYmUgY29udmVydGVkXG5cdCAgaWYgKCFpc1Jvb3QpIHtcblx0ICAgIHRvZ2dsZU9ic2VydmluZyhmYWxzZSk7XG5cdCAgfVxuXHQgIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7XG5cdCAgICBrZXlzLnB1c2goa2V5KTtcblx0ICAgIHZhciB2YWx1ZSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BzT3B0aW9ucywgcHJvcHNEYXRhLCB2bSk7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgICAge1xuXHQgICAgICB2YXIgaHlwaGVuYXRlZEtleSA9IGh5cGhlbmF0ZShrZXkpO1xuXHQgICAgICBpZiAoaXNSZXNlcnZlZEF0dHJpYnV0ZShoeXBoZW5hdGVkS2V5KSB8fFxuXHQgICAgICAgICAgY29uZmlnLmlzUmVzZXJ2ZWRBdHRyKGh5cGhlbmF0ZWRLZXkpKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIChcIlxcXCJcIiArIGh5cGhlbmF0ZWRLZXkgKyBcIlxcXCIgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUgYW5kIGNhbm5vdCBiZSB1c2VkIGFzIGNvbXBvbmVudCBwcm9wLlwiKSxcblx0ICAgICAgICAgIHZtXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShwcm9wcywga2V5LCB2YWx1ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh2bS4kcGFyZW50ICYmICFpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQpIHtcblx0ICAgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAgIFwiQXZvaWQgbXV0YXRpbmcgYSBwcm9wIGRpcmVjdGx5IHNpbmNlIHRoZSB2YWx1ZSB3aWxsIGJlIFwiICtcblx0ICAgICAgICAgICAgXCJvdmVyd3JpdHRlbiB3aGVuZXZlciB0aGUgcGFyZW50IGNvbXBvbmVudCByZS1yZW5kZXJzLiBcIiArXG5cdCAgICAgICAgICAgIFwiSW5zdGVhZCwgdXNlIGEgZGF0YSBvciBjb21wdXRlZCBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgcHJvcCdzIFwiICtcblx0ICAgICAgICAgICAgXCJ2YWx1ZS4gUHJvcCBiZWluZyBtdXRhdGVkOiBcXFwiXCIgKyBrZXkgKyBcIlxcXCJcIixcblx0ICAgICAgICAgICAgdm1cblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIC8vIHN0YXRpYyBwcm9wcyBhcmUgYWxyZWFkeSBwcm94aWVkIG9uIHRoZSBjb21wb25lbnQncyBwcm90b3R5cGVcblx0ICAgIC8vIGR1cmluZyBWdWUuZXh0ZW5kKCkuIFdlIG9ubHkgbmVlZCB0byBwcm94eSBwcm9wcyBkZWZpbmVkIGF0XG5cdCAgICAvLyBpbnN0YW50aWF0aW9uIGhlcmUuXG5cdCAgICBpZiAoIShrZXkgaW4gdm0pKSB7XG5cdCAgICAgIHByb3h5KHZtLCBcIl9wcm9wc1wiLCBrZXkpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZvciAodmFyIGtleSBpbiBwcm9wc09wdGlvbnMpIGxvb3AoIGtleSApO1xuXHQgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdERhdGEgKHZtKSB7XG5cdCAgdmFyIGRhdGEgPSB2bS4kb3B0aW9ucy5kYXRhO1xuXHQgIGRhdGEgPSB2bS5fZGF0YSA9IHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nXG5cdCAgICA/IGdldERhdGEoZGF0YSwgdm0pXG5cdCAgICA6IGRhdGEgfHwge307XG5cdCAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG5cdCAgICBkYXRhID0ge307XG5cdCAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAnZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3Q6XFxuJyArXG5cdCAgICAgICdodHRwczovL3Z1ZWpzLm9yZy92Mi9ndWlkZS9jb21wb25lbnRzLmh0bWwjZGF0YS1NdXN0LUJlLWEtRnVuY3Rpb24nLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICB9XG5cdCAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG5cdCAgdmFyIHByb3BzID0gdm0uJG9wdGlvbnMucHJvcHM7XG5cdCAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuXHQgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdmFyIGtleSA9IGtleXNbaV07XG5cdCAgICB7XG5cdCAgICAgIGlmIChtZXRob2RzICYmIGhhc093bihtZXRob2RzLCBrZXkpKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIChcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgZGF0YSBwcm9wZXJ0eS5cIiksXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChwcm9wcyAmJiBoYXNPd24ocHJvcHMsIGtleSkpIHtcblx0ICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgICBcIlRoZSBkYXRhIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIiBpcyBhbHJlYWR5IGRlY2xhcmVkIGFzIGEgcHJvcC4gXCIgK1xuXHQgICAgICAgIFwiVXNlIHByb3AgZGVmYXVsdCB2YWx1ZSBpbnN0ZWFkLlwiLFxuXHQgICAgICAgIHZtXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2UgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgcHJveHkodm0sIFwiX2RhdGFcIiwga2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gb2JzZXJ2ZSBkYXRhXG5cdCAgb2JzZXJ2ZShkYXRhLCB0cnVlIC8qIGFzUm9vdERhdGEgKi8pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXREYXRhIChkYXRhLCB2bSkge1xuXHQgIC8vICM3NTczIGRpc2FibGUgZGVwIGNvbGxlY3Rpb24gd2hlbiBpbnZva2luZyBkYXRhIGdldHRlcnNcblx0ICBwdXNoVGFyZ2V0KCk7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiBkYXRhLmNhbGwodm0sIHZtKVxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGhhbmRsZUVycm9yKGUsIHZtLCBcImRhdGEoKVwiKTtcblx0ICAgIHJldHVybiB7fVxuXHQgIH0gZmluYWxseSB7XG5cdCAgICBwb3BUYXJnZXQoKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjb21wdXRlZFdhdGNoZXJPcHRpb25zID0geyBsYXp5OiB0cnVlIH07XG5cdFxuXHRmdW5jdGlvbiBpbml0Q29tcHV0ZWQgKHZtLCBjb21wdXRlZCkge1xuXHQgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgIHZhciB3YXRjaGVycyA9IHZtLl9jb21wdXRlZFdhdGNoZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAvLyBjb21wdXRlZCBwcm9wZXJ0aWVzIGFyZSBqdXN0IGdldHRlcnMgZHVyaW5nIFNTUlxuXHQgIHZhciBpc1NTUiA9IGlzU2VydmVyUmVuZGVyaW5nKCk7XG5cdFxuXHQgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuXHQgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuXHQgICAgdmFyIGdldHRlciA9IHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nID8gdXNlckRlZiA6IHVzZXJEZWYuZ2V0O1xuXHQgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldHRlciA9PSBudWxsKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgKFwiR2V0dGVyIGlzIG1pc3NpbmcgZm9yIGNvbXB1dGVkIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIi5cIiksXG5cdCAgICAgICAgdm1cblx0ICAgICAgKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIWlzU1NSKSB7XG5cdCAgICAgIC8vIGNyZWF0ZSBpbnRlcm5hbCB3YXRjaGVyIGZvciB0aGUgY29tcHV0ZWQgcHJvcGVydHkuXG5cdCAgICAgIHdhdGNoZXJzW2tleV0gPSBuZXcgV2F0Y2hlcihcblx0ICAgICAgICB2bSxcblx0ICAgICAgICBnZXR0ZXIgfHwgbm9vcCxcblx0ICAgICAgICBub29wLFxuXHQgICAgICAgIGNvbXB1dGVkV2F0Y2hlck9wdGlvbnNcblx0ICAgICAgKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBjb21wb25lbnQtZGVmaW5lZCBjb21wdXRlZCBwcm9wZXJ0aWVzIGFyZSBhbHJlYWR5IGRlZmluZWQgb24gdGhlXG5cdCAgICAvLyBjb21wb25lbnQgcHJvdG90eXBlLiBXZSBvbmx5IG5lZWQgdG8gZGVmaW5lIGNvbXB1dGVkIHByb3BlcnRpZXMgZGVmaW5lZFxuXHQgICAgLy8gYXQgaW5zdGFudGlhdGlvbiBoZXJlLlxuXHQgICAgaWYgKCEoa2V5IGluIHZtKSkge1xuXHQgICAgICBkZWZpbmVDb21wdXRlZCh2bSwga2V5LCB1c2VyRGVmKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChrZXkgaW4gdm0uJGRhdGEpIHtcblx0ICAgICAgICB3YXJuKChcIlRoZSBjb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgYWxyZWFkeSBkZWZpbmVkIGluIGRhdGEuXCIpLCB2bSk7XG5cdCAgICAgIH0gZWxzZSBpZiAodm0uJG9wdGlvbnMucHJvcHMgJiYga2V5IGluIHZtLiRvcHRpb25zLnByb3BzKSB7XG5cdCAgICAgICAgd2FybigoXCJUaGUgY29tcHV0ZWQgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3AuXCIpLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRlZmluZUNvbXB1dGVkIChcblx0ICB0YXJnZXQsXG5cdCAga2V5LFxuXHQgIHVzZXJEZWZcblx0KSB7XG5cdCAgdmFyIHNob3VsZENhY2hlID0gIWlzU2VydmVyUmVuZGVyaW5nKCk7XG5cdCAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gc2hvdWxkQ2FjaGVcblx0ICAgICAgPyBjcmVhdGVDb21wdXRlZEdldHRlcihrZXkpXG5cdCAgICAgIDogdXNlckRlZjtcblx0ICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBub29wO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gdXNlckRlZi5nZXRcblx0ICAgICAgPyBzaG91bGRDYWNoZSAmJiB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZVxuXHQgICAgICAgID8gY3JlYXRlQ29tcHV0ZWRHZXR0ZXIoa2V5KVxuXHQgICAgICAgIDogdXNlckRlZi5nZXRcblx0ICAgICAgOiBub29wO1xuXHQgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IHVzZXJEZWYuc2V0XG5cdCAgICAgID8gdXNlckRlZi5zZXRcblx0ICAgICAgOiBub29wO1xuXHQgIH1cblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9PT0gbm9vcCkge1xuXHQgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgd2Fybihcblx0ICAgICAgICAoXCJDb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgd2FzIGFzc2lnbmVkIHRvIGJ1dCBpdCBoYXMgbm8gc2V0dGVyLlwiKSxcblx0ICAgICAgICB0aGlzXG5cdCAgICAgICk7XG5cdCAgICB9O1xuXHQgIH1cblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNvbXB1dGVkR2V0dGVyIChrZXkpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIgKCkge1xuXHQgICAgdmFyIHdhdGNoZXIgPSB0aGlzLl9jb21wdXRlZFdhdGNoZXJzICYmIHRoaXMuX2NvbXB1dGVkV2F0Y2hlcnNba2V5XTtcblx0ICAgIGlmICh3YXRjaGVyKSB7XG5cdCAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG5cdCAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdE1ldGhvZHMgKHZtLCBtZXRob2RzKSB7XG5cdCAgdmFyIHByb3BzID0gdm0uJG9wdGlvbnMucHJvcHM7XG5cdCAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcblx0ICAgIHtcblx0ICAgICAgaWYgKG1ldGhvZHNba2V5XSA9PSBudWxsKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIFwiTWV0aG9kIFxcXCJcIiArIGtleSArIFwiXFxcIiBoYXMgYW4gdW5kZWZpbmVkIHZhbHVlIGluIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbi4gXCIgK1xuXHQgICAgICAgICAgXCJEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5P1wiLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChwcm9wcyAmJiBoYXNPd24ocHJvcHMsIGtleSkpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgKFwiTWV0aG9kIFxcXCJcIiArIGtleSArIFwiXFxcIiBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQgYXMgYSBwcm9wLlwiKSxcblx0ICAgICAgICAgIHZtXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoKGtleSBpbiB2bSkgJiYgaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIFwiTWV0aG9kIFxcXCJcIiArIGtleSArIFwiXFxcIiBjb25mbGljdHMgd2l0aCBhbiBleGlzdGluZyBWdWUgaW5zdGFuY2UgbWV0aG9kLiBcIiArXG5cdCAgICAgICAgICBcIkF2b2lkIGRlZmluaW5nIGNvbXBvbmVudCBtZXRob2RzIHRoYXQgc3RhcnQgd2l0aCBfIG9yICQuXCJcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2bVtrZXldID0gbWV0aG9kc1trZXldID09IG51bGwgPyBub29wIDogYmluZChtZXRob2RzW2tleV0sIHZtKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluaXRXYXRjaCAodm0sIHdhdGNoKSB7XG5cdCAgZm9yICh2YXIga2V5IGluIHdhdGNoKSB7XG5cdCAgICB2YXIgaGFuZGxlciA9IHdhdGNoW2tleV07XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVyKSkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjcmVhdGVXYXRjaGVyKHZtLCBrZXksIGhhbmRsZXJbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjcmVhdGVXYXRjaGVyKHZtLCBrZXksIGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlV2F0Y2hlciAoXG5cdCAgdm0sXG5cdCAgZXhwT3JGbixcblx0ICBoYW5kbGVyLFxuXHQgIG9wdGlvbnNcblx0KSB7XG5cdCAgaWYgKGlzUGxhaW5PYmplY3QoaGFuZGxlcikpIHtcblx0ICAgIG9wdGlvbnMgPSBoYW5kbGVyO1xuXHQgICAgaGFuZGxlciA9IGhhbmRsZXIuaGFuZGxlcjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnc3RyaW5nJykge1xuXHQgICAgaGFuZGxlciA9IHZtW2hhbmRsZXJdO1xuXHQgIH1cblx0ICByZXR1cm4gdm0uJHdhdGNoKGV4cE9yRm4sIGhhbmRsZXIsIG9wdGlvbnMpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuXHQgIC8vIGZsb3cgc29tZWhvdyBoYXMgcHJvYmxlbXMgd2l0aCBkaXJlY3RseSBkZWNsYXJlZCBkZWZpbml0aW9uIG9iamVjdFxuXHQgIC8vIHdoZW4gdXNpbmcgT2JqZWN0LmRlZmluZVByb3BlcnR5LCBzbyB3ZSBoYXZlIHRvIHByb2NlZHVyYWxseSBidWlsZCB1cFxuXHQgIC8vIHRoZSBvYmplY3QgaGVyZS5cblx0ICB2YXIgZGF0YURlZiA9IHt9O1xuXHQgIGRhdGFEZWYuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fZGF0YSB9O1xuXHQgIHZhciBwcm9wc0RlZiA9IHt9O1xuXHQgIHByb3BzRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX3Byb3BzIH07XG5cdCAge1xuXHQgICAgZGF0YURlZi5zZXQgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgICdBdm9pZCByZXBsYWNpbmcgaW5zdGFuY2Ugcm9vdCAkZGF0YS4gJyArXG5cdCAgICAgICAgJ1VzZSBuZXN0ZWQgZGF0YSBwcm9wZXJ0aWVzIGluc3RlYWQuJyxcblx0ICAgICAgICB0aGlzXG5cdCAgICAgICk7XG5cdCAgICB9O1xuXHQgICAgcHJvcHNEZWYuc2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB3YXJuKFwiJHByb3BzIGlzIHJlYWRvbmx5LlwiLCB0aGlzKTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCBkYXRhRGVmKTtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRwcm9wcycsIHByb3BzRGVmKTtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kc2V0ID0gc2V0O1xuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGRlbDtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoXG5cdCAgICBleHBPckZuLFxuXHQgICAgY2IsXG5cdCAgICBvcHRpb25zXG5cdCAgKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKGlzUGxhaW5PYmplY3QoY2IpKSB7XG5cdCAgICAgIHJldHVybiBjcmVhdGVXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucylcblx0ICAgIH1cblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgICAgb3B0aW9ucy51c2VyID0gdHJ1ZTtcblx0ICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKTtcblx0ICAgIGlmIChvcHRpb25zLmltbWVkaWF0ZSkge1xuXHQgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4gKCkge1xuXHQgICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0UHJvdmlkZSAodm0pIHtcblx0ICB2YXIgcHJvdmlkZSA9IHZtLiRvcHRpb25zLnByb3ZpZGU7XG5cdCAgaWYgKHByb3ZpZGUpIHtcblx0ICAgIHZtLl9wcm92aWRlZCA9IHR5cGVvZiBwcm92aWRlID09PSAnZnVuY3Rpb24nXG5cdCAgICAgID8gcHJvdmlkZS5jYWxsKHZtKVxuXHQgICAgICA6IHByb3ZpZGU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0SW5qZWN0aW9ucyAodm0pIHtcblx0ICB2YXIgcmVzdWx0ID0gcmVzb2x2ZUluamVjdCh2bS4kb3B0aW9ucy5pbmplY3QsIHZtKTtcblx0ICBpZiAocmVzdWx0KSB7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpO1xuXHQgICAgT2JqZWN0LmtleXMocmVzdWx0KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICAgICAge1xuXHQgICAgICAgIGRlZmluZVJlYWN0aXZlKHZtLCBrZXksIHJlc3VsdFtrZXldLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgICBcIkF2b2lkIG11dGF0aW5nIGFuIGluamVjdGVkIHZhbHVlIGRpcmVjdGx5IHNpbmNlIHRoZSBjaGFuZ2VzIHdpbGwgYmUgXCIgK1xuXHQgICAgICAgICAgICBcIm92ZXJ3cml0dGVuIHdoZW5ldmVyIHRoZSBwcm92aWRlZCBjb21wb25lbnQgcmUtcmVuZGVycy4gXCIgK1xuXHQgICAgICAgICAgICBcImluamVjdGlvbiBiZWluZyBtdXRhdGVkOiBcXFwiXCIgKyBrZXkgKyBcIlxcXCJcIixcblx0ICAgICAgICAgICAgdm1cblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZUluamVjdCAoaW5qZWN0LCB2bSkge1xuXHQgIGlmIChpbmplY3QpIHtcblx0ICAgIC8vIGluamVjdCBpcyA6YW55IGJlY2F1c2UgZmxvdyBpcyBub3Qgc21hcnQgZW5vdWdoIHRvIGZpZ3VyZSBvdXQgY2FjaGVkXG5cdCAgICB2YXIgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgIHZhciBrZXlzID0gaGFzU3ltYm9sXG5cdCAgICAgID8gUmVmbGVjdC5vd25LZXlzKGluamVjdCkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGluamVjdCwga2V5KS5lbnVtZXJhYmxlXG5cdCAgICAgIH0pXG5cdCAgICAgIDogT2JqZWN0LmtleXMoaW5qZWN0KTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cdCAgICAgIHZhciBwcm92aWRlS2V5ID0gaW5qZWN0W2tleV0uZnJvbTtcblx0ICAgICAgdmFyIHNvdXJjZSA9IHZtO1xuXHQgICAgICB3aGlsZSAoc291cmNlKSB7XG5cdCAgICAgICAgaWYgKHNvdXJjZS5fcHJvdmlkZWQgJiYgaGFzT3duKHNvdXJjZS5fcHJvdmlkZWQsIHByb3ZpZGVLZXkpKSB7XG5cdCAgICAgICAgICByZXN1bHRba2V5XSA9IHNvdXJjZS5fcHJvdmlkZWRbcHJvdmlkZUtleV07XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzb3VyY2UgPSBzb3VyY2UuJHBhcmVudDtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIXNvdXJjZSkge1xuXHQgICAgICAgIGlmICgnZGVmYXVsdCcgaW4gaW5qZWN0W2tleV0pIHtcblx0ICAgICAgICAgIHZhciBwcm92aWRlRGVmYXVsdCA9IGluamVjdFtrZXldLmRlZmF1bHQ7XG5cdCAgICAgICAgICByZXN1bHRba2V5XSA9IHR5cGVvZiBwcm92aWRlRGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgICAgICAgICA/IHByb3ZpZGVEZWZhdWx0LmNhbGwodm0pXG5cdCAgICAgICAgICAgIDogcHJvdmlkZURlZmF1bHQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHdhcm4oKFwiSW5qZWN0aW9uIFxcXCJcIiArIGtleSArIFwiXFxcIiBub3QgZm91bmRcIiksIHZtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHRcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgdi1mb3IgbGlzdHMuXG5cdCAqL1xuXHRmdW5jdGlvbiByZW5kZXJMaXN0IChcblx0ICB2YWwsXG5cdCAgcmVuZGVyXG5cdCkge1xuXHQgIHZhciByZXQsIGksIGwsIGtleXMsIGtleTtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpIHx8IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXQgPSBuZXcgQXJyYXkodmFsLmxlbmd0aCk7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gdmFsLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICByZXRbaV0gPSByZW5kZXIodmFsW2ldLCBpKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG5cdCAgICByZXQgPSBuZXcgQXJyYXkodmFsKTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCB2YWw7IGkrKykge1xuXHQgICAgICByZXRbaV0gPSByZW5kZXIoaSArIDEsIGkpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkge1xuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICByZXQgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIHJldFtpXSA9IHJlbmRlcih2YWxba2V5XSwga2V5LCBpKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGlzRGVmKHJldCkpIHtcblx0ICAgIChyZXQpLl9pc1ZMaXN0ID0gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldFxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIDxzbG90PlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVuZGVyU2xvdCAoXG5cdCAgbmFtZSxcblx0ICBmYWxsYmFjayxcblx0ICBwcm9wcyxcblx0ICBiaW5kT2JqZWN0XG5cdCkge1xuXHQgIHZhciBzY29wZWRTbG90Rm4gPSB0aGlzLiRzY29wZWRTbG90c1tuYW1lXTtcblx0ICB2YXIgbm9kZXM7XG5cdCAgaWYgKHNjb3BlZFNsb3RGbikgeyAvLyBzY29wZWQgc2xvdFxuXHQgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTtcblx0ICAgIGlmIChiaW5kT2JqZWN0KSB7XG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiAhaXNPYmplY3QoYmluZE9iamVjdCkpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgJ3Nsb3Qgdi1iaW5kIHdpdGhvdXQgYXJndW1lbnQgZXhwZWN0cyBhbiBPYmplY3QnLFxuXHQgICAgICAgICAgdGhpc1xuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgcHJvcHMgPSBleHRlbmQoZXh0ZW5kKHt9LCBiaW5kT2JqZWN0KSwgcHJvcHMpO1xuXHQgICAgfVxuXHQgICAgbm9kZXMgPSBzY29wZWRTbG90Rm4ocHJvcHMpIHx8IGZhbGxiYWNrO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgc2xvdE5vZGVzID0gdGhpcy4kc2xvdHNbbmFtZV07XG5cdCAgICAvLyB3YXJuIGR1cGxpY2F0ZSBzbG90IHVzYWdlXG5cdCAgICBpZiAoc2xvdE5vZGVzKSB7XG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBzbG90Tm9kZXMuX3JlbmRlcmVkKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIFwiRHVwbGljYXRlIHByZXNlbmNlIG9mIHNsb3QgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBmb3VuZCBpbiB0aGUgc2FtZSByZW5kZXIgdHJlZSBcIiArXG5cdCAgICAgICAgICBcIi0gdGhpcyB3aWxsIGxpa2VseSBjYXVzZSByZW5kZXIgZXJyb3JzLlwiLFxuXHQgICAgICAgICAgdGhpc1xuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgc2xvdE5vZGVzLl9yZW5kZXJlZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBub2RlcyA9IHNsb3ROb2RlcyB8fCBmYWxsYmFjaztcblx0ICB9XG5cdFxuXHQgIHZhciB0YXJnZXQgPSBwcm9wcyAmJiBwcm9wcy5zbG90O1xuXHQgIGlmICh0YXJnZXQpIHtcblx0ICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScsIHsgc2xvdDogdGFyZ2V0IH0sIG5vZGVzKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbm9kZXNcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciByZXNvbHZpbmcgZmlsdGVyc1xuXHQgKi9cblx0ZnVuY3Rpb24gcmVzb2x2ZUZpbHRlciAoaWQpIHtcblx0ICByZXR1cm4gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgaWQsIHRydWUpIHx8IGlkZW50aXR5XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaXNLZXlOb3RNYXRjaCAoZXhwZWN0LCBhY3R1YWwpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShleHBlY3QpKSB7XG5cdCAgICByZXR1cm4gZXhwZWN0LmluZGV4T2YoYWN0dWFsKSA9PT0gLTFcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGV4cGVjdCAhPT0gYWN0dWFsXG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUnVudGltZSBoZWxwZXIgZm9yIGNoZWNraW5nIGtleUNvZGVzIGZyb20gY29uZmlnLlxuXHQgKiBleHBvc2VkIGFzIFZ1ZS5wcm90b3R5cGUuX2tcblx0ICogcGFzc2luZyBpbiBldmVudEtleU5hbWUgYXMgbGFzdCBhcmd1bWVudCBzZXBhcmF0ZWx5IGZvciBiYWNrd2FyZHMgY29tcGF0XG5cdCAqL1xuXHRmdW5jdGlvbiBjaGVja0tleUNvZGVzIChcblx0ICBldmVudEtleUNvZGUsXG5cdCAga2V5LFxuXHQgIGJ1aWx0SW5LZXlDb2RlLFxuXHQgIGV2ZW50S2V5TmFtZSxcblx0ICBidWlsdEluS2V5TmFtZVxuXHQpIHtcblx0ICB2YXIgbWFwcGVkS2V5Q29kZSA9IGNvbmZpZy5rZXlDb2Rlc1trZXldIHx8IGJ1aWx0SW5LZXlDb2RlO1xuXHQgIGlmIChidWlsdEluS2V5TmFtZSAmJiBldmVudEtleU5hbWUgJiYgIWNvbmZpZy5rZXlDb2Rlc1trZXldKSB7XG5cdCAgICByZXR1cm4gaXNLZXlOb3RNYXRjaChidWlsdEluS2V5TmFtZSwgZXZlbnRLZXlOYW1lKVxuXHQgIH0gZWxzZSBpZiAobWFwcGVkS2V5Q29kZSkge1xuXHQgICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2gobWFwcGVkS2V5Q29kZSwgZXZlbnRLZXlDb2RlKVxuXHQgIH0gZWxzZSBpZiAoZXZlbnRLZXlOYW1lKSB7XG5cdCAgICByZXR1cm4gaHlwaGVuYXRlKGV2ZW50S2V5TmFtZSkgIT09IGtleVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvKipcblx0ICogUnVudGltZSBoZWxwZXIgZm9yIG1lcmdpbmcgdi1iaW5kPVwib2JqZWN0XCIgaW50byBhIFZOb2RlJ3MgZGF0YS5cblx0ICovXG5cdGZ1bmN0aW9uIGJpbmRPYmplY3RQcm9wcyAoXG5cdCAgZGF0YSxcblx0ICB0YWcsXG5cdCAgdmFsdWUsXG5cdCAgYXNQcm9wLFxuXHQgIGlzU3luY1xuXHQpIHtcblx0ICBpZiAodmFsdWUpIHtcblx0ICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgJ3YtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IG9yIEFycmF5IHZhbHVlJyxcblx0ICAgICAgICB0aGlzXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICB2YWx1ZSA9IHRvT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaGFzaDtcblx0ICAgICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGtleSApIHtcblx0ICAgICAgICBpZiAoXG5cdCAgICAgICAgICBrZXkgPT09ICdjbGFzcycgfHxcblx0ICAgICAgICAgIGtleSA9PT0gJ3N0eWxlJyB8fFxuXHQgICAgICAgICAgaXNSZXNlcnZlZEF0dHJpYnV0ZShrZXkpXG5cdCAgICAgICAgKSB7XG5cdCAgICAgICAgICBoYXNoID0gZGF0YTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdmFyIHR5cGUgPSBkYXRhLmF0dHJzICYmIGRhdGEuYXR0cnMudHlwZTtcblx0ICAgICAgICAgIGhhc2ggPSBhc1Byb3AgfHwgY29uZmlnLm11c3RVc2VQcm9wKHRhZywgdHlwZSwga2V5KVxuXHQgICAgICAgICAgICA/IGRhdGEuZG9tUHJvcHMgfHwgKGRhdGEuZG9tUHJvcHMgPSB7fSlcblx0ICAgICAgICAgICAgOiBkYXRhLmF0dHJzIHx8IChkYXRhLmF0dHJzID0ge30pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIShrZXkgaW4gaGFzaCkpIHtcblx0ICAgICAgICAgIGhhc2hba2V5XSA9IHZhbHVlW2tleV07XG5cdFxuXHQgICAgICAgICAgaWYgKGlzU3luYykge1xuXHQgICAgICAgICAgICB2YXIgb24gPSBkYXRhLm9uIHx8IChkYXRhLm9uID0ge30pO1xuXHQgICAgICAgICAgICBvblsoXCJ1cGRhdGU6XCIgKyBrZXkpXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcblx0ICAgICAgICAgICAgICB2YWx1ZVtrZXldID0gJGV2ZW50O1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgbG9vcCgga2V5ICk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBkYXRhXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgc3RhdGljIHRyZWVzLlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVuZGVyU3RhdGljIChcblx0ICBpbmRleCxcblx0ICBpc0luRm9yXG5cdCkge1xuXHQgIHZhciBjYWNoZWQgPSB0aGlzLl9zdGF0aWNUcmVlcyB8fCAodGhpcy5fc3RhdGljVHJlZXMgPSBbXSk7XG5cdCAgdmFyIHRyZWUgPSBjYWNoZWRbaW5kZXhdO1xuXHQgIC8vIGlmIGhhcyBhbHJlYWR5LXJlbmRlcmVkIHN0YXRpYyB0cmVlIGFuZCBub3QgaW5zaWRlIHYtZm9yLFxuXHQgIC8vIHdlIGNhbiByZXVzZSB0aGUgc2FtZSB0cmVlLlxuXHQgIGlmICh0cmVlICYmICFpc0luRm9yKSB7XG5cdCAgICByZXR1cm4gdHJlZVxuXHQgIH1cblx0ICAvLyBvdGhlcndpc2UsIHJlbmRlciBhIGZyZXNoIHRyZWUuXG5cdCAgdHJlZSA9IGNhY2hlZFtpbmRleF0gPSB0aGlzLiRvcHRpb25zLnN0YXRpY1JlbmRlckZuc1tpbmRleF0uY2FsbChcblx0ICAgIHRoaXMuX3JlbmRlclByb3h5LFxuXHQgICAgbnVsbCxcblx0ICAgIHRoaXMgLy8gZm9yIHJlbmRlciBmbnMgZ2VuZXJhdGVkIGZvciBmdW5jdGlvbmFsIGNvbXBvbmVudCB0ZW1wbGF0ZXNcblx0ICApO1xuXHQgIG1hcmtTdGF0aWModHJlZSwgKFwiX19zdGF0aWNfX1wiICsgaW5kZXgpLCBmYWxzZSk7XG5cdCAgcmV0dXJuIHRyZWVcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciB2LW9uY2UuXG5cdCAqIEVmZmVjdGl2ZWx5IGl0IG1lYW5zIG1hcmtpbmcgdGhlIG5vZGUgYXMgc3RhdGljIHdpdGggYSB1bmlxdWUga2V5LlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFya09uY2UgKFxuXHQgIHRyZWUsXG5cdCAgaW5kZXgsXG5cdCAga2V5XG5cdCkge1xuXHQgIG1hcmtTdGF0aWModHJlZSwgKFwiX19vbmNlX19cIiArIGluZGV4ICsgKGtleSA/IChcIl9cIiArIGtleSkgOiBcIlwiKSksIHRydWUpO1xuXHQgIHJldHVybiB0cmVlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hcmtTdGF0aWMgKFxuXHQgIHRyZWUsXG5cdCAga2V5LFxuXHQgIGlzT25jZVxuXHQpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSh0cmVlKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmICh0cmVlW2ldICYmIHR5cGVvZiB0cmVlW2ldICE9PSAnc3RyaW5nJykge1xuXHQgICAgICAgIG1hcmtTdGF0aWNOb2RlKHRyZWVbaV0sIChrZXkgKyBcIl9cIiArIGkpLCBpc09uY2UpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIG1hcmtTdGF0aWNOb2RlKHRyZWUsIGtleSwgaXNPbmNlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hcmtTdGF0aWNOb2RlIChub2RlLCBrZXksIGlzT25jZSkge1xuXHQgIG5vZGUuaXNTdGF0aWMgPSB0cnVlO1xuXHQgIG5vZGUua2V5ID0ga2V5O1xuXHQgIG5vZGUuaXNPbmNlID0gaXNPbmNlO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGJpbmRPYmplY3RMaXN0ZW5lcnMgKGRhdGEsIHZhbHVlKSB7XG5cdCAgaWYgKHZhbHVlKSB7XG5cdCAgICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgJ3Ytb24gd2l0aG91dCBhcmd1bWVudCBleHBlY3RzIGFuIE9iamVjdCB2YWx1ZScsXG5cdCAgICAgICAgdGhpc1xuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIG9uID0gZGF0YS5vbiA9IGRhdGEub24gPyBleHRlbmQoe30sIGRhdGEub24pIDoge307XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHQgICAgICAgIHZhciBleGlzdGluZyA9IG9uW2tleV07XG5cdCAgICAgICAgdmFyIG91cnMgPSB2YWx1ZVtrZXldO1xuXHQgICAgICAgIG9uW2tleV0gPSBleGlzdGluZyA/IFtdLmNvbmNhdChleGlzdGluZywgb3VycykgOiBvdXJzO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBkYXRhXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5zdGFsbFJlbmRlckhlbHBlcnMgKHRhcmdldCkge1xuXHQgIHRhcmdldC5fbyA9IG1hcmtPbmNlO1xuXHQgIHRhcmdldC5fbiA9IHRvTnVtYmVyO1xuXHQgIHRhcmdldC5fcyA9IHRvU3RyaW5nO1xuXHQgIHRhcmdldC5fbCA9IHJlbmRlckxpc3Q7XG5cdCAgdGFyZ2V0Ll90ID0gcmVuZGVyU2xvdDtcblx0ICB0YXJnZXQuX3EgPSBsb29zZUVxdWFsO1xuXHQgIHRhcmdldC5faSA9IGxvb3NlSW5kZXhPZjtcblx0ICB0YXJnZXQuX20gPSByZW5kZXJTdGF0aWM7XG5cdCAgdGFyZ2V0Ll9mID0gcmVzb2x2ZUZpbHRlcjtcblx0ICB0YXJnZXQuX2sgPSBjaGVja0tleUNvZGVzO1xuXHQgIHRhcmdldC5fYiA9IGJpbmRPYmplY3RQcm9wcztcblx0ICB0YXJnZXQuX3YgPSBjcmVhdGVUZXh0Vk5vZGU7XG5cdCAgdGFyZ2V0Ll9lID0gY3JlYXRlRW1wdHlWTm9kZTtcblx0ICB0YXJnZXQuX3UgPSByZXNvbHZlU2NvcGVkU2xvdHM7XG5cdCAgdGFyZ2V0Ll9nID0gYmluZE9iamVjdExpc3RlbmVycztcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCAoXG5cdCAgZGF0YSxcblx0ICBwcm9wcyxcblx0ICBjaGlsZHJlbixcblx0ICBwYXJlbnQsXG5cdCAgQ3RvclxuXHQpIHtcblx0ICB2YXIgb3B0aW9ucyA9IEN0b3Iub3B0aW9ucztcblx0ICB0aGlzLmRhdGEgPSBkYXRhO1xuXHQgIHRoaXMucHJvcHMgPSBwcm9wcztcblx0ICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG5cdCAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cdCAgdGhpcy5saXN0ZW5lcnMgPSBkYXRhLm9uIHx8IGVtcHR5T2JqZWN0O1xuXHQgIHRoaXMuaW5qZWN0aW9ucyA9IHJlc29sdmVJbmplY3Qob3B0aW9ucy5pbmplY3QsIHBhcmVudCk7XG5cdCAgdGhpcy5zbG90cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmVTbG90cyhjaGlsZHJlbiwgcGFyZW50KTsgfTtcblx0XG5cdCAgLy8gZW5zdXJlIHRoZSBjcmVhdGVFbGVtZW50IGZ1bmN0aW9uIGluIGZ1bmN0aW9uYWwgY29tcG9uZW50c1xuXHQgIC8vIGdldHMgYSB1bmlxdWUgY29udGV4dCAtIHRoaXMgaXMgbmVjZXNzYXJ5IGZvciBjb3JyZWN0IG5hbWVkIHNsb3QgY2hlY2tcblx0ICB2YXIgY29udGV4dFZtID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQpO1xuXHQgIHZhciBpc0NvbXBpbGVkID0gaXNUcnVlKG9wdGlvbnMuX2NvbXBpbGVkKTtcblx0ICB2YXIgbmVlZE5vcm1hbGl6YXRpb24gPSAhaXNDb21waWxlZDtcblx0XG5cdCAgLy8gc3VwcG9ydCBmb3IgY29tcGlsZWQgZnVuY3Rpb25hbCB0ZW1wbGF0ZVxuXHQgIGlmIChpc0NvbXBpbGVkKSB7XG5cdCAgICAvLyBleHBvc2luZyAkb3B0aW9ucyBmb3IgcmVuZGVyU3RhdGljKClcblx0ICAgIHRoaXMuJG9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gcHJlLXJlc29sdmUgc2xvdHMgZm9yIHJlbmRlclNsb3QoKVxuXHQgICAgdGhpcy4kc2xvdHMgPSB0aGlzLnNsb3RzKCk7XG5cdCAgICB0aGlzLiRzY29wZWRTbG90cyA9IGRhdGEuc2NvcGVkU2xvdHMgfHwgZW1wdHlPYmplY3Q7XG5cdCAgfVxuXHRcblx0ICBpZiAob3B0aW9ucy5fc2NvcGVJZCkge1xuXHQgICAgdGhpcy5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7XG5cdCAgICAgIHZhciB2bm9kZSA9IGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7XG5cdCAgICAgIGlmICh2bm9kZSAmJiAhQXJyYXkuaXNBcnJheSh2bm9kZSkpIHtcblx0ICAgICAgICB2bm9kZS5mblNjb3BlSWQgPSBvcHRpb25zLl9zY29wZUlkO1xuXHQgICAgICAgIHZub2RlLmZuQ29udGV4dCA9IHBhcmVudDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdm5vZGVcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMuX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudChjb250ZXh0Vm0sIGEsIGIsIGMsIGQsIG5lZWROb3JtYWxpemF0aW9uKTsgfTtcblx0ICB9XG5cdH1cblx0XG5cdGluc3RhbGxSZW5kZXJIZWxwZXJzKEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0LnByb3RvdHlwZSk7XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50IChcblx0ICBDdG9yLFxuXHQgIHByb3BzRGF0YSxcblx0ICBkYXRhLFxuXHQgIGNvbnRleHRWbSxcblx0ICBjaGlsZHJlblxuXHQpIHtcblx0ICB2YXIgb3B0aW9ucyA9IEN0b3Iub3B0aW9ucztcblx0ICB2YXIgcHJvcHMgPSB7fTtcblx0ICB2YXIgcHJvcE9wdGlvbnMgPSBvcHRpb25zLnByb3BzO1xuXHQgIGlmIChpc0RlZihwcm9wT3B0aW9ucykpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBwcm9wT3B0aW9ucykge1xuXHQgICAgICBwcm9wc1trZXldID0gdmFsaWRhdGVQcm9wKGtleSwgcHJvcE9wdGlvbnMsIHByb3BzRGF0YSB8fCBlbXB0eU9iamVjdCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmIChpc0RlZihkYXRhLmF0dHJzKSkgeyBtZXJnZVByb3BzKHByb3BzLCBkYXRhLmF0dHJzKTsgfVxuXHQgICAgaWYgKGlzRGVmKGRhdGEucHJvcHMpKSB7IG1lcmdlUHJvcHMocHJvcHMsIGRhdGEucHJvcHMpOyB9XG5cdCAgfVxuXHRcblx0ICB2YXIgcmVuZGVyQ29udGV4dCA9IG5ldyBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dChcblx0ICAgIGRhdGEsXG5cdCAgICBwcm9wcyxcblx0ICAgIGNoaWxkcmVuLFxuXHQgICAgY29udGV4dFZtLFxuXHQgICAgQ3RvclxuXHQgICk7XG5cdFxuXHQgIHZhciB2bm9kZSA9IG9wdGlvbnMucmVuZGVyLmNhbGwobnVsbCwgcmVuZGVyQ29udGV4dC5fYywgcmVuZGVyQ29udGV4dCk7XG5cdFxuXHQgIGlmICh2bm9kZSBpbnN0YW5jZW9mIFZOb2RlKSB7XG5cdCAgICBzZXRGdW5jdGlvbmFsQ29udGV4dEZvclZOb2RlKHZub2RlLCBkYXRhLCBjb250ZXh0Vm0sIG9wdGlvbnMpO1xuXHQgICAgcmV0dXJuIHZub2RlXG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkge1xuXHQgICAgdmFyIHZub2RlcyA9IG5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlKSB8fCBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHNldEZ1bmN0aW9uYWxDb250ZXh0Rm9yVk5vZGUodm5vZGVzW2ldLCBkYXRhLCBjb250ZXh0Vm0sIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZub2Rlc1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0RnVuY3Rpb25hbENvbnRleHRGb3JWTm9kZSAodm5vZGUsIGRhdGEsIHZtLCBvcHRpb25zKSB7XG5cdCAgdm5vZGUuZm5Db250ZXh0ID0gdm07XG5cdCAgdm5vZGUuZm5PcHRpb25zID0gb3B0aW9ucztcblx0ICBpZiAoZGF0YS5zbG90KSB7XG5cdCAgICAodm5vZGUuZGF0YSB8fCAodm5vZGUuZGF0YSA9IHt9KSkuc2xvdCA9IGRhdGEuc2xvdDtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lcmdlUHJvcHMgKHRvLCBmcm9tKSB7XG5cdCAgZm9yICh2YXIga2V5IGluIGZyb20pIHtcblx0ICAgIHRvW2NhbWVsaXplKGtleSldID0gZnJvbVtrZXldO1xuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0XG5cdFxuXHQvLyBSZWdpc3RlciB0aGUgY29tcG9uZW50IGhvb2sgdG8gd2VleCBuYXRpdmUgcmVuZGVyIGVuZ2luZS5cblx0Ly8gVGhlIGhvb2sgd2lsbCBiZSB0cmlnZ2VyZWQgYnkgbmF0aXZlLCBub3QgamF2YXNjcmlwdC5cblx0XG5cdFxuXHQvLyBVcGRhdGVzIHRoZSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50IHRvIHdlZXggbmF0aXZlIHJlbmRlciBlbmdpbmUuXG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5rczEwMTAwL3dlZXgtbmF0aXZlLWRpcmVjdGl2ZS90cmVlL21hc3Rlci9jb21wb25lbnRcblx0XG5cdC8vIGxpc3RlbmluZyBvbiBuYXRpdmUgY2FsbGJhY2tcblx0XG5cdC8qICAqL1xuXHRcblx0LyogICovXG5cdFxuXHQvLyBob29rcyB0byBiZSBpbnZva2VkIG9uIGNvbXBvbmVudCBWTm9kZXMgZHVyaW5nIHBhdGNoXG5cdHZhciBjb21wb25lbnRWTm9kZUhvb2tzID0ge1xuXHQgIGluaXQ6IGZ1bmN0aW9uIGluaXQgKFxuXHQgICAgdm5vZGUsXG5cdCAgICBoeWRyYXRpbmcsXG5cdCAgICBwYXJlbnRFbG0sXG5cdCAgICByZWZFbG1cblx0ICApIHtcblx0ICAgIGlmIChcblx0ICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgJiZcblx0ICAgICAgIXZub2RlLmNvbXBvbmVudEluc3RhbmNlLl9pc0Rlc3Ryb3llZCAmJlxuXHQgICAgICB2bm9kZS5kYXRhLmtlZXBBbGl2ZVxuXHQgICAgKSB7XG5cdCAgICAgIC8vIGtlcHQtYWxpdmUgY29tcG9uZW50cywgdHJlYXQgYXMgYSBwYXRjaFxuXHQgICAgICB2YXIgbW91bnRlZE5vZGUgPSB2bm9kZTsgLy8gd29yayBhcm91bmQgZmxvd1xuXHQgICAgICBjb21wb25lbnRWTm9kZUhvb2tzLnByZXBhdGNoKG1vdW50ZWROb2RlLCBtb3VudGVkTm9kZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgY2hpbGQgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlRm9yVm5vZGUoXG5cdCAgICAgICAgdm5vZGUsXG5cdCAgICAgICAgYWN0aXZlSW5zdGFuY2UsXG5cdCAgICAgICAgcGFyZW50RWxtLFxuXHQgICAgICAgIHJlZkVsbVxuXHQgICAgICApO1xuXHQgICAgICBjaGlsZC4kbW91bnQoaHlkcmF0aW5nID8gdm5vZGUuZWxtIDogdW5kZWZpbmVkLCBoeWRyYXRpbmcpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHByZXBhdGNoOiBmdW5jdGlvbiBwcmVwYXRjaCAob2xkVm5vZGUsIHZub2RlKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG5cdCAgICB2YXIgY2hpbGQgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IG9sZFZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuXHQgICAgdXBkYXRlQ2hpbGRDb21wb25lbnQoXG5cdCAgICAgIGNoaWxkLFxuXHQgICAgICBvcHRpb25zLnByb3BzRGF0YSwgLy8gdXBkYXRlZCBwcm9wc1xuXHQgICAgICBvcHRpb25zLmxpc3RlbmVycywgLy8gdXBkYXRlZCBsaXN0ZW5lcnNcblx0ICAgICAgdm5vZGUsIC8vIG5ldyBwYXJlbnQgdm5vZGVcblx0ICAgICAgb3B0aW9ucy5jaGlsZHJlbiAvLyBuZXcgY2hpbGRyZW5cblx0ICAgICk7XG5cdCAgfSxcblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQgKHZub2RlKSB7XG5cdCAgICB2YXIgY29udGV4dCA9IHZub2RlLmNvbnRleHQ7XG5cdCAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZTtcblx0ICAgIGlmICghY29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZCkge1xuXHQgICAgICBjb21wb25lbnRJbnN0YW5jZS5faXNNb3VudGVkID0gdHJ1ZTtcblx0ICAgICAgY2FsbEhvb2soY29tcG9uZW50SW5zdGFuY2UsICdtb3VudGVkJyk7XG5cdCAgICB9XG5cdCAgICBpZiAodm5vZGUuZGF0YS5rZWVwQWxpdmUpIHtcblx0ICAgICAgaWYgKGNvbnRleHQuX2lzTW91bnRlZCkge1xuXHQgICAgICAgIC8vIHZ1ZS1yb3V0ZXIjMTIxMlxuXHQgICAgICAgIC8vIER1cmluZyB1cGRhdGVzLCBhIGtlcHQtYWxpdmUgY29tcG9uZW50J3MgY2hpbGQgY29tcG9uZW50cyBtYXlcblx0ICAgICAgICAvLyBjaGFuZ2UsIHNvIGRpcmVjdGx5IHdhbGtpbmcgdGhlIHRyZWUgaGVyZSBtYXkgY2FsbCBhY3RpdmF0ZWQgaG9va3Ncblx0ICAgICAgICAvLyBvbiBpbmNvcnJlY3QgY2hpbGRyZW4uIEluc3RlYWQgd2UgcHVzaCB0aGVtIGludG8gYSBxdWV1ZSB3aGljaCB3aWxsXG5cdCAgICAgICAgLy8gYmUgcHJvY2Vzc2VkIGFmdGVyIHRoZSB3aG9sZSBwYXRjaCBwcm9jZXNzIGVuZGVkLlxuXHQgICAgICAgIHF1ZXVlQWN0aXZhdGVkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCB0cnVlIC8qIGRpcmVjdCAqLyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95ICh2bm9kZSkge1xuXHQgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7XG5cdCAgICBpZiAoIWNvbXBvbmVudEluc3RhbmNlLl9pc0Rlc3Ryb3llZCkge1xuXHQgICAgICBpZiAoIXZub2RlLmRhdGEua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgY29tcG9uZW50SW5zdGFuY2UuJGRlc3Ryb3koKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIHRydWUgLyogZGlyZWN0ICovKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBob29rc1RvTWVyZ2UgPSBPYmplY3Qua2V5cyhjb21wb25lbnRWTm9kZUhvb2tzKTtcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudCAoXG5cdCAgQ3Rvcixcblx0ICBkYXRhLFxuXHQgIGNvbnRleHQsXG5cdCAgY2hpbGRyZW4sXG5cdCAgdGFnXG5cdCkge1xuXHQgIGlmIChpc1VuZGVmKEN0b3IpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHZhciBiYXNlQ3RvciA9IGNvbnRleHQuJG9wdGlvbnMuX2Jhc2U7XG5cdFxuXHQgIC8vIHBsYWluIG9wdGlvbnMgb2JqZWN0OiB0dXJuIGl0IGludG8gYSBjb25zdHJ1Y3RvclxuXHQgIGlmIChpc09iamVjdChDdG9yKSkge1xuXHQgICAgQ3RvciA9IGJhc2VDdG9yLmV4dGVuZChDdG9yKTtcblx0ICB9XG5cdFxuXHQgIC8vIGlmIGF0IHRoaXMgc3RhZ2UgaXQncyBub3QgYSBjb25zdHJ1Y3RvciBvciBhbiBhc3luYyBjb21wb25lbnQgZmFjdG9yeSxcblx0ICAvLyByZWplY3QuXG5cdCAgaWYgKHR5cGVvZiBDdG9yICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICB7XG5cdCAgICAgIHdhcm4oKFwiSW52YWxpZCBDb21wb25lbnQgZGVmaW5pdGlvbjogXCIgKyAoU3RyaW5nKEN0b3IpKSksIGNvbnRleHQpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICAvLyBhc3luYyBjb21wb25lbnRcblx0ICB2YXIgYXN5bmNGYWN0b3J5O1xuXHQgIGlmIChpc1VuZGVmKEN0b3IuY2lkKSkge1xuXHQgICAgYXN5bmNGYWN0b3J5ID0gQ3Rvcjtcblx0ICAgIEN0b3IgPSByZXNvbHZlQXN5bmNDb21wb25lbnQoYXN5bmNGYWN0b3J5LCBiYXNlQ3RvciwgY29udGV4dCk7XG5cdCAgICBpZiAoQ3RvciA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIC8vIHJldHVybiBhIHBsYWNlaG9sZGVyIG5vZGUgZm9yIGFzeW5jIGNvbXBvbmVudCwgd2hpY2ggaXMgcmVuZGVyZWRcblx0ICAgICAgLy8gYXMgYSBjb21tZW50IG5vZGUgYnV0IHByZXNlcnZlcyBhbGwgdGhlIHJhdyBpbmZvcm1hdGlvbiBmb3IgdGhlIG5vZGUuXG5cdCAgICAgIC8vIHRoZSBpbmZvcm1hdGlvbiB3aWxsIGJlIHVzZWQgZm9yIGFzeW5jIHNlcnZlci1yZW5kZXJpbmcgYW5kIGh5ZHJhdGlvbi5cblx0ICAgICAgcmV0dXJuIGNyZWF0ZUFzeW5jUGxhY2Vob2xkZXIoXG5cdCAgICAgICAgYXN5bmNGYWN0b3J5LFxuXHQgICAgICAgIGRhdGEsXG5cdCAgICAgICAgY29udGV4dCxcblx0ICAgICAgICBjaGlsZHJlbixcblx0ICAgICAgICB0YWdcblx0ICAgICAgKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZGF0YSA9IGRhdGEgfHwge307XG5cdFxuXHQgIC8vIHJlc29sdmUgY29uc3RydWN0b3Igb3B0aW9ucyBpbiBjYXNlIGdsb2JhbCBtaXhpbnMgYXJlIGFwcGxpZWQgYWZ0ZXJcblx0ICAvLyBjb21wb25lbnQgY29uc3RydWN0b3IgY3JlYXRpb25cblx0ICByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKEN0b3IpO1xuXHRcblx0ICAvLyB0cmFuc2Zvcm0gY29tcG9uZW50IHYtbW9kZWwgZGF0YSBpbnRvIHByb3BzICYgZXZlbnRzXG5cdCAgaWYgKGlzRGVmKGRhdGEubW9kZWwpKSB7XG5cdCAgICB0cmFuc2Zvcm1Nb2RlbChDdG9yLm9wdGlvbnMsIGRhdGEpO1xuXHQgIH1cblx0XG5cdCAgLy8gZXh0cmFjdCBwcm9wc1xuXHQgIHZhciBwcm9wc0RhdGEgPSBleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhKGRhdGEsIEN0b3IsIHRhZyk7XG5cdFxuXHQgIC8vIGZ1bmN0aW9uYWwgY29tcG9uZW50XG5cdCAgaWYgKGlzVHJ1ZShDdG9yLm9wdGlvbnMuZnVuY3Rpb25hbCkpIHtcblx0ICAgIHJldHVybiBjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50KEN0b3IsIHByb3BzRGF0YSwgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4pXG5cdCAgfVxuXHRcblx0ICAvLyBleHRyYWN0IGxpc3RlbmVycywgc2luY2UgdGhlc2UgbmVlZHMgdG8gYmUgdHJlYXRlZCBhc1xuXHQgIC8vIGNoaWxkIGNvbXBvbmVudCBsaXN0ZW5lcnMgaW5zdGVhZCBvZiBET00gbGlzdGVuZXJzXG5cdCAgdmFyIGxpc3RlbmVycyA9IGRhdGEub247XG5cdCAgLy8gcmVwbGFjZSB3aXRoIGxpc3RlbmVycyB3aXRoIC5uYXRpdmUgbW9kaWZpZXJcblx0ICAvLyBzbyBpdCBnZXRzIHByb2Nlc3NlZCBkdXJpbmcgcGFyZW50IGNvbXBvbmVudCBwYXRjaC5cblx0ICBkYXRhLm9uID0gZGF0YS5uYXRpdmVPbjtcblx0XG5cdCAgaWYgKGlzVHJ1ZShDdG9yLm9wdGlvbnMuYWJzdHJhY3QpKSB7XG5cdCAgICAvLyBhYnN0cmFjdCBjb21wb25lbnRzIGRvIG5vdCBrZWVwIGFueXRoaW5nXG5cdCAgICAvLyBvdGhlciB0aGFuIHByb3BzICYgbGlzdGVuZXJzICYgc2xvdFxuXHRcblx0ICAgIC8vIHdvcmsgYXJvdW5kIGZsb3dcblx0ICAgIHZhciBzbG90ID0gZGF0YS5zbG90O1xuXHQgICAgZGF0YSA9IHt9O1xuXHQgICAgaWYgKHNsb3QpIHtcblx0ICAgICAgZGF0YS5zbG90ID0gc2xvdDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIG1lcmdlIGNvbXBvbmVudCBtYW5hZ2VtZW50IGhvb2tzIG9udG8gdGhlIHBsYWNlaG9sZGVyIG5vZGVcblx0ICBtZXJnZUhvb2tzKGRhdGEpO1xuXHRcblx0ICAvLyByZXR1cm4gYSBwbGFjZWhvbGRlciB2bm9kZVxuXHQgIHZhciBuYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgdGFnO1xuXHQgIHZhciB2bm9kZSA9IG5ldyBWTm9kZShcblx0ICAgIChcInZ1ZS1jb21wb25lbnQtXCIgKyAoQ3Rvci5jaWQpICsgKG5hbWUgPyAoXCItXCIgKyBuYW1lKSA6ICcnKSksXG5cdCAgICBkYXRhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0LFxuXHQgICAgeyBDdG9yOiBDdG9yLCBwcm9wc0RhdGE6IHByb3BzRGF0YSwgbGlzdGVuZXJzOiBsaXN0ZW5lcnMsIHRhZzogdGFnLCBjaGlsZHJlbjogY2hpbGRyZW4gfSxcblx0ICAgIGFzeW5jRmFjdG9yeVxuXHQgICk7XG5cdFxuXHQgIC8vIFdlZXggc3BlY2lmaWM6IGludm9rZSByZWN5Y2xlLWxpc3Qgb3B0aW1pemVkIEByZW5kZXIgZnVuY3Rpb24gZm9yXG5cdCAgLy8gZXh0cmFjdGluZyBjZWxsLXNsb3QgdGVtcGxhdGUuXG5cdCAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0hhbmtzMTAxMDAvd2VleC1uYXRpdmUtZGlyZWN0aXZlL3RyZWUvbWFzdGVyL2NvbXBvbmVudFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIHJldHVybiB2bm9kZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlIChcblx0ICB2bm9kZSwgLy8gd2Uga25vdyBpdCdzIE1vdW50ZWRDb21wb25lbnRWTm9kZSBidXQgZmxvdyBkb2Vzbid0XG5cdCAgcGFyZW50LCAvLyBhY3RpdmVJbnN0YW5jZSBpbiBsaWZlY3ljbGUgc3RhdGVcblx0ICBwYXJlbnRFbG0sXG5cdCAgcmVmRWxtXG5cdCkge1xuXHQgIHZhciBvcHRpb25zID0ge1xuXHQgICAgX2lzQ29tcG9uZW50OiB0cnVlLFxuXHQgICAgcGFyZW50OiBwYXJlbnQsXG5cdCAgICBfcGFyZW50Vm5vZGU6IHZub2RlLFxuXHQgICAgX3BhcmVudEVsbTogcGFyZW50RWxtIHx8IG51bGwsXG5cdCAgICBfcmVmRWxtOiByZWZFbG0gfHwgbnVsbFxuXHQgIH07XG5cdCAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlIHJlbmRlciBmdW5jdGlvbnNcblx0ICB2YXIgaW5saW5lVGVtcGxhdGUgPSB2bm9kZS5kYXRhLmlubGluZVRlbXBsYXRlO1xuXHQgIGlmIChpc0RlZihpbmxpbmVUZW1wbGF0ZSkpIHtcblx0ICAgIG9wdGlvbnMucmVuZGVyID0gaW5saW5lVGVtcGxhdGUucmVuZGVyO1xuXHQgICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSBpbmxpbmVUZW1wbGF0ZS5zdGF0aWNSZW5kZXJGbnM7XG5cdCAgfVxuXHQgIHJldHVybiBuZXcgdm5vZGUuY29tcG9uZW50T3B0aW9ucy5DdG9yKG9wdGlvbnMpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lcmdlSG9va3MgKGRhdGEpIHtcblx0ICBpZiAoIWRhdGEuaG9vaykge1xuXHQgICAgZGF0YS5ob29rID0ge307XG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9va3NUb01lcmdlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIga2V5ID0gaG9va3NUb01lcmdlW2ldO1xuXHQgICAgdmFyIGZyb21QYXJlbnQgPSBkYXRhLmhvb2tba2V5XTtcblx0ICAgIHZhciBvdXJzID0gY29tcG9uZW50Vk5vZGVIb29rc1trZXldO1xuXHQgICAgZGF0YS5ob29rW2tleV0gPSBmcm9tUGFyZW50ID8gbWVyZ2VIb29rJDEob3VycywgZnJvbVBhcmVudCkgOiBvdXJzO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWVyZ2VIb29rJDEgKG9uZSwgdHdvKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7XG5cdCAgICBvbmUoYSwgYiwgYywgZCk7XG5cdCAgICB0d28oYSwgYiwgYywgZCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyB0cmFuc2Zvcm0gY29tcG9uZW50IHYtbW9kZWwgaW5mbyAodmFsdWUgYW5kIGNhbGxiYWNrKSBpbnRvXG5cdC8vIHByb3AgYW5kIGV2ZW50IGhhbmRsZXIgcmVzcGVjdGl2ZWx5LlxuXHRmdW5jdGlvbiB0cmFuc2Zvcm1Nb2RlbCAob3B0aW9ucywgZGF0YSkge1xuXHQgIHZhciBwcm9wID0gKG9wdGlvbnMubW9kZWwgJiYgb3B0aW9ucy5tb2RlbC5wcm9wKSB8fCAndmFsdWUnO1xuXHQgIHZhciBldmVudCA9IChvcHRpb25zLm1vZGVsICYmIG9wdGlvbnMubW9kZWwuZXZlbnQpIHx8ICdpbnB1dCc7KGRhdGEucHJvcHMgfHwgKGRhdGEucHJvcHMgPSB7fSkpW3Byb3BdID0gZGF0YS5tb2RlbC52YWx1ZTtcblx0ICB2YXIgb24gPSBkYXRhLm9uIHx8IChkYXRhLm9uID0ge30pO1xuXHQgIGlmIChpc0RlZihvbltldmVudF0pKSB7XG5cdCAgICBvbltldmVudF0gPSBbZGF0YS5tb2RlbC5jYWxsYmFja10uY29uY2F0KG9uW2V2ZW50XSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9uW2V2ZW50XSA9IGRhdGEubW9kZWwuY2FsbGJhY2s7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBTSU1QTEVfTk9STUFMSVpFID0gMTtcblx0dmFyIEFMV0FZU19OT1JNQUxJWkUgPSAyO1xuXHRcblx0Ly8gd3JhcHBlciBmdW5jdGlvbiBmb3IgcHJvdmlkaW5nIGEgbW9yZSBmbGV4aWJsZSBpbnRlcmZhY2Vcblx0Ly8gd2l0aG91dCBnZXR0aW5nIHllbGxlZCBhdCBieSBmbG93XG5cdGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQgKFxuXHQgIGNvbnRleHQsXG5cdCAgdGFnLFxuXHQgIGRhdGEsXG5cdCAgY2hpbGRyZW4sXG5cdCAgbm9ybWFsaXphdGlvblR5cGUsXG5cdCAgYWx3YXlzTm9ybWFsaXplXG5cdCkge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpIHx8IGlzUHJpbWl0aXZlKGRhdGEpKSB7XG5cdCAgICBub3JtYWxpemF0aW9uVHlwZSA9IGNoaWxkcmVuO1xuXHQgICAgY2hpbGRyZW4gPSBkYXRhO1xuXHQgICAgZGF0YSA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgaWYgKGlzVHJ1ZShhbHdheXNOb3JtYWxpemUpKSB7XG5cdCAgICBub3JtYWxpemF0aW9uVHlwZSA9IEFMV0FZU19OT1JNQUxJWkU7XG5cdCAgfVxuXHQgIHJldHVybiBfY3JlYXRlRWxlbWVudChjb250ZXh0LCB0YWcsIGRhdGEsIGNoaWxkcmVuLCBub3JtYWxpemF0aW9uVHlwZSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NyZWF0ZUVsZW1lbnQgKFxuXHQgIGNvbnRleHQsXG5cdCAgdGFnLFxuXHQgIGRhdGEsXG5cdCAgY2hpbGRyZW4sXG5cdCAgbm9ybWFsaXphdGlvblR5cGVcblx0KSB7XG5cdCAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKChkYXRhKS5fX29iX18pKSB7XG5cdCAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICBcIkF2b2lkIHVzaW5nIG9ic2VydmVkIGRhdGEgb2JqZWN0IGFzIHZub2RlIGRhdGE6IFwiICsgKEpTT04uc3RyaW5naWZ5KGRhdGEpKSArIFwiXFxuXCIgK1xuXHQgICAgICAnQWx3YXlzIGNyZWF0ZSBmcmVzaCB2bm9kZSBkYXRhIG9iamVjdHMgaW4gZWFjaCByZW5kZXIhJyxcblx0ICAgICAgY29udGV4dFxuXHQgICAgKTtcblx0ICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKClcblx0ICB9XG5cdCAgLy8gb2JqZWN0IHN5bnRheCBpbiB2LWJpbmRcblx0ICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoZGF0YS5pcykpIHtcblx0ICAgIHRhZyA9IGRhdGEuaXM7XG5cdCAgfVxuXHQgIGlmICghdGFnKSB7XG5cdCAgICAvLyBpbiBjYXNlIG9mIGNvbXBvbmVudCA6aXMgc2V0IHRvIGZhbHN5IHZhbHVlXG5cdCAgICByZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpXG5cdCAgfVxuXHQgIC8vIHdhcm4gYWdhaW5zdCBub24tcHJpbWl0aXZlIGtleVxuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgaXNEZWYoZGF0YSkgJiYgaXNEZWYoZGF0YS5rZXkpICYmICFpc1ByaW1pdGl2ZShkYXRhLmtleSlcblx0ICApIHtcblx0ICAgIHtcblx0ICAgICAgd2Fybihcblx0ICAgICAgICAnQXZvaWQgdXNpbmcgbm9uLXByaW1pdGl2ZSB2YWx1ZSBhcyBrZXksICcgK1xuXHQgICAgICAgICd1c2Ugc3RyaW5nL251bWJlciB2YWx1ZSBpbnN0ZWFkLicsXG5cdCAgICAgICAgY29udGV4dFxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBzdXBwb3J0IHNpbmdsZSBmdW5jdGlvbiBjaGlsZHJlbiBhcyBkZWZhdWx0IHNjb3BlZCBzbG90XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pICYmXG5cdCAgICB0eXBlb2YgY2hpbGRyZW5bMF0gPT09ICdmdW5jdGlvbidcblx0ICApIHtcblx0ICAgIGRhdGEgPSBkYXRhIHx8IHt9O1xuXHQgICAgZGF0YS5zY29wZWRTbG90cyA9IHsgZGVmYXVsdDogY2hpbGRyZW5bMF0gfTtcblx0ICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7XG5cdCAgfVxuXHQgIGlmIChub3JtYWxpemF0aW9uVHlwZSA9PT0gQUxXQVlTX05PUk1BTElaRSkge1xuXHQgICAgY2hpbGRyZW4gPSBub3JtYWxpemVDaGlsZHJlbihjaGlsZHJlbik7XG5cdCAgfSBlbHNlIGlmIChub3JtYWxpemF0aW9uVHlwZSA9PT0gU0lNUExFX05PUk1BTElaRSkge1xuXHQgICAgY2hpbGRyZW4gPSBzaW1wbGVOb3JtYWxpemVDaGlsZHJlbihjaGlsZHJlbik7XG5cdCAgfVxuXHQgIHZhciB2bm9kZSwgbnM7XG5cdCAgaWYgKHR5cGVvZiB0YWcgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YXIgQ3Rvcjtcblx0ICAgIG5zID0gKGNvbnRleHQuJHZub2RlICYmIGNvbnRleHQuJHZub2RlLm5zKSB8fCBjb25maWcuZ2V0VGFnTmFtZXNwYWNlKHRhZyk7XG5cdCAgICBpZiAoY29uZmlnLmlzUmVzZXJ2ZWRUYWcodGFnKSkge1xuXHQgICAgICAvLyBwbGF0Zm9ybSBidWlsdC1pbiBlbGVtZW50c1xuXHQgICAgICB2bm9kZSA9IG5ldyBWTm9kZShcblx0ICAgICAgICBjb25maWcucGFyc2VQbGF0Zm9ybVRhZ05hbWUodGFnKSwgZGF0YSwgY2hpbGRyZW4sXG5cdCAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHRcblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNEZWYoQ3RvciA9IHJlc29sdmVBc3NldChjb250ZXh0LiRvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpKSB7XG5cdCAgICAgIC8vIGNvbXBvbmVudFxuXHQgICAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudChDdG9yLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbiwgdGFnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHVua25vd24gb3IgdW5saXN0ZWQgbmFtZXNwYWNlZCBlbGVtZW50c1xuXHQgICAgICAvLyBjaGVjayBhdCBydW50aW1lIGJlY2F1c2UgaXQgbWF5IGdldCBhc3NpZ25lZCBhIG5hbWVzcGFjZSB3aGVuIGl0c1xuXHQgICAgICAvLyBwYXJlbnQgbm9ybWFsaXplcyBjaGlsZHJlblxuXHQgICAgICB2bm9kZSA9IG5ldyBWTm9kZShcblx0ICAgICAgICB0YWcsIGRhdGEsIGNoaWxkcmVuLFxuXHQgICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0XG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGRpcmVjdCBjb21wb25lbnQgb3B0aW9ucyAvIGNvbnN0cnVjdG9yXG5cdCAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudCh0YWcsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuKTtcblx0ICB9XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG5cdCAgICByZXR1cm4gdm5vZGVcblx0ICB9IGVsc2UgaWYgKGlzRGVmKHZub2RlKSkge1xuXHQgICAgaWYgKGlzRGVmKG5zKSkgeyBhcHBseU5TKHZub2RlLCBucyk7IH1cblx0ICAgIGlmIChpc0RlZihkYXRhKSkgeyByZWdpc3RlckRlZXBCaW5kaW5ncyhkYXRhKTsgfVxuXHQgICAgcmV0dXJuIHZub2RlXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKClcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFwcGx5TlMgKHZub2RlLCBucywgZm9yY2UpIHtcblx0ICB2bm9kZS5ucyA9IG5zO1xuXHQgIGlmICh2bm9kZS50YWcgPT09ICdmb3JlaWduT2JqZWN0Jykge1xuXHQgICAgLy8gdXNlIGRlZmF1bHQgbmFtZXNwYWNlIGluc2lkZSBmb3JlaWduT2JqZWN0XG5cdCAgICBucyA9IHVuZGVmaW5lZDtcblx0ICAgIGZvcmNlID0gdHJ1ZTtcblx0ICB9XG5cdCAgaWYgKGlzRGVmKHZub2RlLmNoaWxkcmVuKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2bm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY2hpbGRyZW5baV07XG5cdCAgICAgIGlmIChpc0RlZihjaGlsZC50YWcpICYmIChcblx0ICAgICAgICBpc1VuZGVmKGNoaWxkLm5zKSB8fCAoaXNUcnVlKGZvcmNlKSAmJiBjaGlsZC50YWcgIT09ICdzdmcnKSkpIHtcblx0ICAgICAgICBhcHBseU5TKGNoaWxkLCBucywgZm9yY2UpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyByZWYgIzUzMThcblx0Ly8gbmVjZXNzYXJ5IHRvIGVuc3VyZSBwYXJlbnQgcmUtcmVuZGVyIHdoZW4gZGVlcCBiaW5kaW5ncyBsaWtlIDpzdHlsZSBhbmRcblx0Ly8gOmNsYXNzIGFyZSB1c2VkIG9uIHNsb3Qgbm9kZXNcblx0ZnVuY3Rpb24gcmVnaXN0ZXJEZWVwQmluZGluZ3MgKGRhdGEpIHtcblx0ICBpZiAoaXNPYmplY3QoZGF0YS5zdHlsZSkpIHtcblx0ICAgIHRyYXZlcnNlKGRhdGEuc3R5bGUpO1xuXHQgIH1cblx0ICBpZiAoaXNPYmplY3QoZGF0YS5jbGFzcykpIHtcblx0ICAgIHRyYXZlcnNlKGRhdGEuY2xhc3MpO1xuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0UmVuZGVyICh2bSkge1xuXHQgIHZtLl92bm9kZSA9IG51bGw7IC8vIHRoZSByb290IG9mIHRoZSBjaGlsZCB0cmVlXG5cdCAgdm0uX3N0YXRpY1RyZWVzID0gbnVsbDsgLy8gdi1vbmNlIGNhY2hlZCB0cmVlc1xuXHQgIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7XG5cdCAgdmFyIHBhcmVudFZub2RlID0gdm0uJHZub2RlID0gb3B0aW9ucy5fcGFyZW50Vm5vZGU7IC8vIHRoZSBwbGFjZWhvbGRlciBub2RlIGluIHBhcmVudCB0cmVlXG5cdCAgdmFyIHJlbmRlckNvbnRleHQgPSBwYXJlbnRWbm9kZSAmJiBwYXJlbnRWbm9kZS5jb250ZXh0O1xuXHQgIHZtLiRzbG90cyA9IHJlc29sdmVTbG90cyhvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiwgcmVuZGVyQ29udGV4dCk7XG5cdCAgdm0uJHNjb3BlZFNsb3RzID0gZW1wdHlPYmplY3Q7XG5cdCAgLy8gYmluZCB0aGUgY3JlYXRlRWxlbWVudCBmbiB0byB0aGlzIGluc3RhbmNlXG5cdCAgLy8gc28gdGhhdCB3ZSBnZXQgcHJvcGVyIHJlbmRlciBjb250ZXh0IGluc2lkZSBpdC5cblx0ICAvLyBhcmdzIG9yZGVyOiB0YWcsIGRhdGEsIGNoaWxkcmVuLCBub3JtYWxpemF0aW9uVHlwZSwgYWx3YXlzTm9ybWFsaXplXG5cdCAgLy8gaW50ZXJuYWwgdmVyc2lvbiBpcyB1c2VkIGJ5IHJlbmRlciBmdW5jdGlvbnMgY29tcGlsZWQgZnJvbSB0ZW1wbGF0ZXNcblx0ICB2bS5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KHZtLCBhLCBiLCBjLCBkLCBmYWxzZSk7IH07XG5cdCAgLy8gbm9ybWFsaXphdGlvbiBpcyBhbHdheXMgYXBwbGllZCBmb3IgdGhlIHB1YmxpYyB2ZXJzaW9uLCB1c2VkIGluXG5cdCAgLy8gdXNlci13cml0dGVuIHJlbmRlciBmdW5jdGlvbnMuXG5cdCAgdm0uJGNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudCh2bSwgYSwgYiwgYywgZCwgdHJ1ZSk7IH07XG5cdFxuXHQgIC8vICRhdHRycyAmICRsaXN0ZW5lcnMgYXJlIGV4cG9zZWQgZm9yIGVhc2llciBIT0MgY3JlYXRpb24uXG5cdCAgLy8gdGhleSBuZWVkIHRvIGJlIHJlYWN0aXZlIHNvIHRoYXQgSE9DcyB1c2luZyB0aGVtIGFyZSBhbHdheXMgdXBkYXRlZFxuXHQgIHZhciBwYXJlbnREYXRhID0gcGFyZW50Vm5vZGUgJiYgcGFyZW50Vm5vZGUuZGF0YTtcblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICB7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZSh2bSwgJyRhdHRycycsIHBhcmVudERhdGEgJiYgcGFyZW50RGF0YS5hdHRycyB8fCBlbXB0eU9iamVjdCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oXCIkYXR0cnMgaXMgcmVhZG9ubHkuXCIsIHZtKTtcblx0ICAgIH0sIHRydWUpO1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sICckbGlzdGVuZXJzJywgb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICFpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgJiYgd2FybihcIiRsaXN0ZW5lcnMgaXMgcmVhZG9ubHkuXCIsIHZtKTtcblx0ICAgIH0sIHRydWUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVuZGVyTWl4aW4gKFZ1ZSkge1xuXHQgIC8vIGluc3RhbGwgcnVudGltZSBjb252ZW5pZW5jZSBoZWxwZXJzXG5cdCAgaW5zdGFsbFJlbmRlckhlbHBlcnMoVnVlLnByb3RvdHlwZSk7XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICByZXR1cm4gbmV4dFRpY2soZm4sIHRoaXMpXG5cdCAgfTtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIHZhciByZWYgPSB2bS4kb3B0aW9ucztcblx0ICAgIHZhciByZW5kZXIgPSByZWYucmVuZGVyO1xuXHQgICAgdmFyIF9wYXJlbnRWbm9kZSA9IHJlZi5fcGFyZW50Vm5vZGU7XG5cdFxuXHQgICAgLy8gcmVzZXQgX3JlbmRlcmVkIGZsYWcgb24gc2xvdHMgZm9yIGR1cGxpY2F0ZSBzbG90IGNoZWNrXG5cdCAgICB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB2bS4kc2xvdHMpIHtcblx0ICAgICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICAgICAgICB2bS4kc2xvdHNba2V5XS5fcmVuZGVyZWQgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChfcGFyZW50Vm5vZGUpIHtcblx0ICAgICAgdm0uJHNjb3BlZFNsb3RzID0gX3BhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHMgfHwgZW1wdHlPYmplY3Q7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gc2V0IHBhcmVudCB2bm9kZS4gdGhpcyBhbGxvd3MgcmVuZGVyIGZ1bmN0aW9ucyB0byBoYXZlIGFjY2Vzc1xuXHQgICAgLy8gdG8gdGhlIGRhdGEgb24gdGhlIHBsYWNlaG9sZGVyIG5vZGUuXG5cdCAgICB2bS4kdm5vZGUgPSBfcGFyZW50Vm5vZGU7XG5cdCAgICAvLyByZW5kZXIgc2VsZlxuXHQgICAgdmFyIHZub2RlO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdm5vZGUgPSByZW5kZXIuY2FsbCh2bS5fcmVuZGVyUHJveHksIHZtLiRjcmVhdGVFbGVtZW50KTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIFwicmVuZGVyXCIpO1xuXHQgICAgICAvLyByZXR1cm4gZXJyb3IgcmVuZGVyIHJlc3VsdCxcblx0ICAgICAgLy8gb3IgcHJldmlvdXMgdm5vZGUgdG8gcHJldmVudCByZW5kZXIgZXJyb3IgY2F1c2luZyBibGFuayBjb21wb25lbnRcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICAgICAge1xuXHQgICAgICAgIGlmICh2bS4kb3B0aW9ucy5yZW5kZXJFcnJvcikge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdm5vZGUgPSB2bS4kb3B0aW9ucy5yZW5kZXJFcnJvci5jYWxsKHZtLl9yZW5kZXJQcm94eSwgdm0uJGNyZWF0ZUVsZW1lbnQsIGUpO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgXCJyZW5kZXJFcnJvclwiKTtcblx0ICAgICAgICAgICAgdm5vZGUgPSB2bS5fdm5vZGU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZub2RlID0gdm0uX3Zub2RlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gcmV0dXJuIGVtcHR5IHZub2RlIGluIGNhc2UgdGhlIHJlbmRlciBmdW5jdGlvbiBlcnJvcmVkIG91dFxuXHQgICAgaWYgKCEodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkpIHtcblx0ICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIEFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgICdNdWx0aXBsZSByb290IG5vZGVzIHJldHVybmVkIGZyb20gcmVuZGVyIGZ1bmN0aW9uLiBSZW5kZXIgZnVuY3Rpb24gJyArXG5cdCAgICAgICAgICAnc2hvdWxkIHJldHVybiBhIHNpbmdsZSByb290IG5vZGUuJyxcblx0ICAgICAgICAgIHZtXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICB2bm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTtcblx0ICAgIH1cblx0ICAgIC8vIHNldCBwYXJlbnRcblx0ICAgIHZub2RlLnBhcmVudCA9IF9wYXJlbnRWbm9kZTtcblx0ICAgIHJldHVybiB2bm9kZVxuXHQgIH07XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHVpZCQzID0gMDtcblx0XG5cdGZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgLy8gYSB1aWRcblx0ICAgIHZtLl91aWQgPSB1aWQkMysrO1xuXHRcblx0ICAgIHZhciBzdGFydFRhZywgZW5kVGFnO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHtcblx0ICAgICAgc3RhcnRUYWcgPSBcInZ1ZS1wZXJmLXN0YXJ0OlwiICsgKHZtLl91aWQpO1xuXHQgICAgICBlbmRUYWcgPSBcInZ1ZS1wZXJmLWVuZDpcIiArICh2bS5fdWlkKTtcblx0ICAgICAgbWFyayhzdGFydFRhZyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcblx0ICAgIHZtLl9pc1Z1ZSA9IHRydWU7XG5cdCAgICAvLyBtZXJnZSBvcHRpb25zXG5cdCAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLl9pc0NvbXBvbmVudCkge1xuXHQgICAgICAvLyBvcHRpbWl6ZSBpbnRlcm5hbCBjb21wb25lbnQgaW5zdGFudGlhdGlvblxuXHQgICAgICAvLyBzaW5jZSBkeW5hbWljIG9wdGlvbnMgbWVyZ2luZyBpcyBwcmV0dHkgc2xvdywgYW5kIG5vbmUgb2YgdGhlXG5cdCAgICAgIC8vIGludGVybmFsIGNvbXBvbmVudCBvcHRpb25zIG5lZWRzIHNwZWNpYWwgdHJlYXRtZW50LlxuXHQgICAgICBpbml0SW50ZXJuYWxDb21wb25lbnQodm0sIG9wdGlvbnMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdm0uJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoXG5cdCAgICAgICAgcmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyh2bS5jb25zdHJ1Y3RvciksXG5cdCAgICAgICAgb3B0aW9ucyB8fCB7fSxcblx0ICAgICAgICB2bVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICAgIHtcblx0ICAgICAgaW5pdFByb3h5KHZtKTtcblx0ICAgIH1cblx0ICAgIC8vIGV4cG9zZSByZWFsIHNlbGZcblx0ICAgIHZtLl9zZWxmID0gdm07XG5cdCAgICBpbml0TGlmZWN5Y2xlKHZtKTtcblx0ICAgIGluaXRFdmVudHModm0pO1xuXHQgICAgaW5pdFJlbmRlcih2bSk7XG5cdCAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZUNyZWF0ZScpO1xuXHQgICAgaW5pdEluamVjdGlvbnModm0pOyAvLyByZXNvbHZlIGluamVjdGlvbnMgYmVmb3JlIGRhdGEvcHJvcHNcblx0ICAgIGluaXRTdGF0ZSh2bSk7XG5cdCAgICBpbml0UHJvdmlkZSh2bSk7IC8vIHJlc29sdmUgcHJvdmlkZSBhZnRlciBkYXRhL3Byb3BzXG5cdCAgICBjYWxsSG9vayh2bSwgJ2NyZWF0ZWQnKTtcblx0XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuXHQgICAgICB2bS5fbmFtZSA9IGZvcm1hdENvbXBvbmVudE5hbWUodm0sIGZhbHNlKTtcblx0ICAgICAgbWFyayhlbmRUYWcpO1xuXHQgICAgICBtZWFzdXJlKChcInZ1ZSBcIiArICh2bS5fbmFtZSkgKyBcIiBpbml0XCIpLCBzdGFydFRhZywgZW5kVGFnKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodm0uJG9wdGlvbnMuZWwpIHtcblx0ICAgICAgdm0uJG1vdW50KHZtLiRvcHRpb25zLmVsKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0SW50ZXJuYWxDb21wb25lbnQgKHZtLCBvcHRpb25zKSB7XG5cdCAgdmFyIG9wdHMgPSB2bS4kb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUodm0uY29uc3RydWN0b3Iub3B0aW9ucyk7XG5cdCAgLy8gZG9pbmcgdGhpcyBiZWNhdXNlIGl0J3MgZmFzdGVyIHRoYW4gZHluYW1pYyBlbnVtZXJhdGlvbi5cblx0ICB2YXIgcGFyZW50Vm5vZGUgPSBvcHRpb25zLl9wYXJlbnRWbm9kZTtcblx0ICBvcHRzLnBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuXHQgIG9wdHMuX3BhcmVudFZub2RlID0gcGFyZW50Vm5vZGU7XG5cdCAgb3B0cy5fcGFyZW50RWxtID0gb3B0aW9ucy5fcGFyZW50RWxtO1xuXHQgIG9wdHMuX3JlZkVsbSA9IG9wdGlvbnMuX3JlZkVsbTtcblx0XG5cdCAgdmFyIHZub2RlQ29tcG9uZW50T3B0aW9ucyA9IHBhcmVudFZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG5cdCAgb3B0cy5wcm9wc0RhdGEgPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhO1xuXHQgIG9wdHMuX3BhcmVudExpc3RlbmVycyA9IHZub2RlQ29tcG9uZW50T3B0aW9ucy5saXN0ZW5lcnM7XG5cdCAgb3B0cy5fcmVuZGVyQ2hpbGRyZW4gPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMuY2hpbGRyZW47XG5cdCAgb3B0cy5fY29tcG9uZW50VGFnID0gdm5vZGVDb21wb25lbnRPcHRpb25zLnRhZztcblx0XG5cdCAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG5cdCAgICBvcHRzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyO1xuXHQgICAgb3B0cy5zdGF0aWNSZW5kZXJGbnMgPSBvcHRpb25zLnN0YXRpY1JlbmRlckZucztcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMgKEN0b3IpIHtcblx0ICB2YXIgb3B0aW9ucyA9IEN0b3Iub3B0aW9ucztcblx0ICBpZiAoQ3Rvci5zdXBlcikge1xuXHQgICAgdmFyIHN1cGVyT3B0aW9ucyA9IHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvci5zdXBlcik7XG5cdCAgICB2YXIgY2FjaGVkU3VwZXJPcHRpb25zID0gQ3Rvci5zdXBlck9wdGlvbnM7XG5cdCAgICBpZiAoc3VwZXJPcHRpb25zICE9PSBjYWNoZWRTdXBlck9wdGlvbnMpIHtcblx0ICAgICAgLy8gc3VwZXIgb3B0aW9uIGNoYW5nZWQsXG5cdCAgICAgIC8vIG5lZWQgdG8gcmVzb2x2ZSBuZXcgb3B0aW9ucy5cblx0ICAgICAgQ3Rvci5zdXBlck9wdGlvbnMgPSBzdXBlck9wdGlvbnM7XG5cdCAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgbGF0ZS1tb2RpZmllZC9hdHRhY2hlZCBvcHRpb25zICgjNDk3Nilcblx0ICAgICAgdmFyIG1vZGlmaWVkT3B0aW9ucyA9IHJlc29sdmVNb2RpZmllZE9wdGlvbnMoQ3Rvcik7XG5cdCAgICAgIC8vIHVwZGF0ZSBiYXNlIGV4dGVuZCBvcHRpb25zXG5cdCAgICAgIGlmIChtb2RpZmllZE9wdGlvbnMpIHtcblx0ICAgICAgICBleHRlbmQoQ3Rvci5leHRlbmRPcHRpb25zLCBtb2RpZmllZE9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoc3VwZXJPcHRpb25zLCBDdG9yLmV4dGVuZE9wdGlvbnMpO1xuXHQgICAgICBpZiAob3B0aW9ucy5uYW1lKSB7XG5cdCAgICAgICAgb3B0aW9ucy5jb21wb25lbnRzW29wdGlvbnMubmFtZV0gPSBDdG9yO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBvcHRpb25zXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVNb2RpZmllZE9wdGlvbnMgKEN0b3IpIHtcblx0ICB2YXIgbW9kaWZpZWQ7XG5cdCAgdmFyIGxhdGVzdCA9IEN0b3Iub3B0aW9ucztcblx0ICB2YXIgZXh0ZW5kZWQgPSBDdG9yLmV4dGVuZE9wdGlvbnM7XG5cdCAgdmFyIHNlYWxlZCA9IEN0b3Iuc2VhbGVkT3B0aW9ucztcblx0ICBmb3IgKHZhciBrZXkgaW4gbGF0ZXN0KSB7XG5cdCAgICBpZiAobGF0ZXN0W2tleV0gIT09IHNlYWxlZFtrZXldKSB7XG5cdCAgICAgIGlmICghbW9kaWZpZWQpIHsgbW9kaWZpZWQgPSB7fTsgfVxuXHQgICAgICBtb2RpZmllZFtrZXldID0gZGVkdXBlKGxhdGVzdFtrZXldLCBleHRlbmRlZFtrZXldLCBzZWFsZWRba2V5XSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBtb2RpZmllZFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkZWR1cGUgKGxhdGVzdCwgZXh0ZW5kZWQsIHNlYWxlZCkge1xuXHQgIC8vIGNvbXBhcmUgbGF0ZXN0IGFuZCBzZWFsZWQgdG8gZW5zdXJlIGxpZmVjeWNsZSBob29rcyB3b24ndCBiZSBkdXBsaWNhdGVkXG5cdCAgLy8gYmV0d2VlbiBtZXJnZXNcblx0ICBpZiAoQXJyYXkuaXNBcnJheShsYXRlc3QpKSB7XG5cdCAgICB2YXIgcmVzID0gW107XG5cdCAgICBzZWFsZWQgPSBBcnJheS5pc0FycmF5KHNlYWxlZCkgPyBzZWFsZWQgOiBbc2VhbGVkXTtcblx0ICAgIGV4dGVuZGVkID0gQXJyYXkuaXNBcnJheShleHRlbmRlZCkgPyBleHRlbmRlZCA6IFtleHRlbmRlZF07XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhdGVzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAvLyBwdXNoIG9yaWdpbmFsIG9wdGlvbnMgYW5kIG5vdCBzZWFsZWQgb3B0aW9ucyB0byBleGNsdWRlIGR1cGxpY2F0ZWQgb3B0aW9uc1xuXHQgICAgICBpZiAoZXh0ZW5kZWQuaW5kZXhPZihsYXRlc3RbaV0pID49IDAgfHwgc2VhbGVkLmluZGV4T2YobGF0ZXN0W2ldKSA8IDApIHtcblx0ICAgICAgICByZXMucHVzaChsYXRlc3RbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBsYXRlc3Rcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFZ1ZSAob3B0aW9ucykge1xuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgISh0aGlzIGluc3RhbmNlb2YgVnVlKVxuXHQgICkge1xuXHQgICAgd2FybignVnVlIGlzIGEgY29uc3RydWN0b3IgYW5kIHNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgYG5ld2Aga2V5d29yZCcpO1xuXHQgIH1cblx0ICB0aGlzLl9pbml0KG9wdGlvbnMpO1xuXHR9XG5cdFxuXHRpbml0TWl4aW4oVnVlKTtcblx0c3RhdGVNaXhpbihWdWUpO1xuXHRldmVudHNNaXhpbihWdWUpO1xuXHRsaWZlY3ljbGVNaXhpbihWdWUpO1xuXHRyZW5kZXJNaXhpbihWdWUpO1xuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0VXNlIChWdWUpIHtcblx0ICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuXHQgICAgdmFyIGluc3RhbGxlZFBsdWdpbnMgPSAodGhpcy5faW5zdGFsbGVkUGx1Z2lucyB8fCAodGhpcy5faW5zdGFsbGVkUGx1Z2lucyA9IFtdKSk7XG5cdCAgICBpZiAoaW5zdGFsbGVkUGx1Z2lucy5pbmRleE9mKHBsdWdpbikgPiAtMSkge1xuXHQgICAgICByZXR1cm4gdGhpc1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG5cdCAgICBpZiAodHlwZW9mIHBsdWdpbi5pbnN0YWxsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBwbHVnaW4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHQgICAgfVxuXHQgICAgaW5zdGFsbGVkUGx1Z2lucy5wdXNoKHBsdWdpbik7XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH07XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdE1peGluJDEgKFZ1ZSkge1xuXHQgIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuXHQgICAgdGhpcy5vcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMub3B0aW9ucywgbWl4aW4pO1xuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9O1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRFeHRlbmQgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuXHQgICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcblx0ICAgKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cblx0ICAgKi9cblx0ICBWdWUuY2lkID0gMDtcblx0ICB2YXIgY2lkID0gMTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xhc3MgaW5oZXJpdGFuY2Vcblx0ICAgKi9cblx0ICBWdWUuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcblx0ICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuXHQgICAgdmFyIFN1cGVyID0gdGhpcztcblx0ICAgIHZhciBTdXBlcklkID0gU3VwZXIuY2lkO1xuXHQgICAgdmFyIGNhY2hlZEN0b3JzID0gZXh0ZW5kT3B0aW9ucy5fQ3RvciB8fCAoZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IHt9KTtcblx0ICAgIGlmIChjYWNoZWRDdG9yc1tTdXBlcklkXSkge1xuXHQgICAgICByZXR1cm4gY2FjaGVkQ3RvcnNbU3VwZXJJZF1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7XG5cdCAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSkge1xuXHQgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIFN1YiA9IGZ1bmN0aW9uIFZ1ZUNvbXBvbmVudCAob3B0aW9ucykge1xuXHQgICAgICB0aGlzLl9pbml0KG9wdGlvbnMpO1xuXHQgICAgfTtcblx0ICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG5cdCAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuXHQgICAgU3ViLmNpZCA9IGNpZCsrO1xuXHQgICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoXG5cdCAgICAgIFN1cGVyLm9wdGlvbnMsXG5cdCAgICAgIGV4dGVuZE9wdGlvbnNcblx0ICAgICk7XG5cdCAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcblx0XG5cdCAgICAvLyBGb3IgcHJvcHMgYW5kIGNvbXB1dGVkIHByb3BlcnRpZXMsIHdlIGRlZmluZSB0aGUgcHJveHkgZ2V0dGVycyBvblxuXHQgICAgLy8gdGhlIFZ1ZSBpbnN0YW5jZXMgYXQgZXh0ZW5zaW9uIHRpbWUsIG9uIHRoZSBleHRlbmRlZCBwcm90b3R5cGUuIFRoaXNcblx0ICAgIC8vIGF2b2lkcyBPYmplY3QuZGVmaW5lUHJvcGVydHkgY2FsbHMgZm9yIGVhY2ggaW5zdGFuY2UgY3JlYXRlZC5cblx0ICAgIGlmIChTdWIub3B0aW9ucy5wcm9wcykge1xuXHQgICAgICBpbml0UHJvcHMkMShTdWIpO1xuXHQgICAgfVxuXHQgICAgaWYgKFN1Yi5vcHRpb25zLmNvbXB1dGVkKSB7XG5cdCAgICAgIGluaXRDb21wdXRlZCQxKFN1Yik7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb24vbWl4aW4vcGx1Z2luIHVzYWdlXG5cdCAgICBTdWIuZXh0ZW5kID0gU3VwZXIuZXh0ZW5kO1xuXHQgICAgU3ViLm1peGluID0gU3VwZXIubWl4aW47XG5cdCAgICBTdWIudXNlID0gU3VwZXIudXNlO1xuXHRcblx0ICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcblx0ICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cblx0ICAgIEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG5cdCAgICB9KTtcblx0ICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXBcblx0ICAgIGlmIChuYW1lKSB7XG5cdCAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8ga2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgc3VwZXIgb3B0aW9ucyBhdCBleHRlbnNpb24gdGltZS5cblx0ICAgIC8vIGxhdGVyIGF0IGluc3RhbnRpYXRpb24gd2UgY2FuIGNoZWNrIGlmIFN1cGVyJ3Mgb3B0aW9ucyBoYXZlXG5cdCAgICAvLyBiZWVuIHVwZGF0ZWQuXG5cdCAgICBTdWIuc3VwZXJPcHRpb25zID0gU3VwZXIub3B0aW9ucztcblx0ICAgIFN1Yi5leHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucztcblx0ICAgIFN1Yi5zZWFsZWRPcHRpb25zID0gZXh0ZW5kKHt9LCBTdWIub3B0aW9ucyk7XG5cdFxuXHQgICAgLy8gY2FjaGUgY29uc3RydWN0b3Jcblx0ICAgIGNhY2hlZEN0b3JzW1N1cGVySWRdID0gU3ViO1xuXHQgICAgcmV0dXJuIFN1YlxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluaXRQcm9wcyQxIChDb21wKSB7XG5cdCAgdmFyIHByb3BzID0gQ29tcC5vcHRpb25zLnByb3BzO1xuXHQgIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuXHQgICAgcHJveHkoQ29tcC5wcm90b3R5cGUsIFwiX3Byb3BzXCIsIGtleSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0Q29tcHV0ZWQkMSAoQ29tcCkge1xuXHQgIHZhciBjb21wdXRlZCA9IENvbXAub3B0aW9ucy5jb21wdXRlZDtcblx0ICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcblx0ICAgIGRlZmluZUNvbXB1dGVkKENvbXAucHJvdG90eXBlLCBrZXksIGNvbXB1dGVkW2tleV0pO1xuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0QXNzZXRSZWdpc3RlcnMgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcy5cblx0ICAgKi9cblx0ICBBU1NFVF9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICBWdWVbdHlwZV0gPSBmdW5jdGlvbiAoXG5cdCAgICAgIGlkLFxuXHQgICAgICBkZWZpbml0aW9uXG5cdCAgICApIHtcblx0ICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgdHlwZSA9PT0gJ2NvbXBvbmVudCcpIHtcblx0ICAgICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShpZCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG5cdCAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBkZWZpbml0aW9uLm5hbWUgfHwgaWQ7XG5cdCAgICAgICAgICBkZWZpbml0aW9uID0gdGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChkZWZpbml0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHR5cGUgPT09ICdkaXJlY3RpdmUnICYmIHR5cGVvZiBkZWZpbml0aW9uID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBkZWZpbml0aW9uID0geyBiaW5kOiBkZWZpbml0aW9uLCB1cGRhdGU6IGRlZmluaXRpb24gfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247XG5cdCAgICAgICAgcmV0dXJuIGRlZmluaXRpb25cblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBnZXRDb21wb25lbnROYW1lIChvcHRzKSB7XG5cdCAgcmV0dXJuIG9wdHMgJiYgKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hdGNoZXMgKHBhdHRlcm4sIG5hbWUpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkge1xuXHQgICAgcmV0dXJuIHBhdHRlcm4uaW5kZXhPZihuYW1lKSA+IC0xXG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KCcsJykuaW5kZXhPZihuYW1lKSA+IC0xXG5cdCAgfSBlbHNlIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkge1xuXHQgICAgcmV0dXJuIHBhdHRlcm4udGVzdChuYW1lKVxuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgIHJldHVybiBmYWxzZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcnVuZUNhY2hlIChrZWVwQWxpdmVJbnN0YW5jZSwgZmlsdGVyKSB7XG5cdCAgdmFyIGNhY2hlID0ga2VlcEFsaXZlSW5zdGFuY2UuY2FjaGU7XG5cdCAgdmFyIGtleXMgPSBrZWVwQWxpdmVJbnN0YW5jZS5rZXlzO1xuXHQgIHZhciBfdm5vZGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5fdm5vZGU7XG5cdCAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7XG5cdCAgICB2YXIgY2FjaGVkTm9kZSA9IGNhY2hlW2tleV07XG5cdCAgICBpZiAoY2FjaGVkTm9kZSkge1xuXHQgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY2FjaGVkTm9kZS5jb21wb25lbnRPcHRpb25zKTtcblx0ICAgICAgaWYgKG5hbWUgJiYgIWZpbHRlcihuYW1lKSkge1xuXHQgICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5LCBrZXlzLCBfdm5vZGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkgKFxuXHQgIGNhY2hlLFxuXHQgIGtleSxcblx0ICBrZXlzLFxuXHQgIGN1cnJlbnRcblx0KSB7XG5cdCAgdmFyIGNhY2hlZCQkMSA9IGNhY2hlW2tleV07XG5cdCAgaWYgKGNhY2hlZCQkMSAmJiAoIWN1cnJlbnQgfHwgY2FjaGVkJCQxLnRhZyAhPT0gY3VycmVudC50YWcpKSB7XG5cdCAgICBjYWNoZWQkJDEuY29tcG9uZW50SW5zdGFuY2UuJGRlc3Ryb3koKTtcblx0ICB9XG5cdCAgY2FjaGVba2V5XSA9IG51bGw7XG5cdCAgcmVtb3ZlKGtleXMsIGtleSk7XG5cdH1cblx0XG5cdHZhciBwYXR0ZXJuVHlwZXMgPSBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XTtcblx0XG5cdHZhciBLZWVwQWxpdmUgPSB7XG5cdCAgbmFtZTogJ2tlZXAtYWxpdmUnLFxuXHQgIGFic3RyYWN0OiB0cnVlLFxuXHRcblx0ICBwcm9wczoge1xuXHQgICAgaW5jbHVkZTogcGF0dGVyblR5cGVzLFxuXHQgICAgZXhjbHVkZTogcGF0dGVyblR5cGVzLFxuXHQgICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdXG5cdCAgfSxcblx0XG5cdCAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCAoKSB7XG5cdCAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgIHRoaXMua2V5cyA9IFtdO1xuXHQgIH0sXG5cdFxuXHQgIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkICgpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIGZvciAodmFyIGtleSBpbiB0aGlzJDEuY2FjaGUpIHtcblx0ICAgICAgcHJ1bmVDYWNoZUVudHJ5KHRoaXMkMS5jYWNoZSwga2V5LCB0aGlzJDEua2V5cyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgd2F0Y2g6IHtcblx0ICAgIGluY2x1ZGU6IGZ1bmN0aW9uIGluY2x1ZGUgKHZhbCkge1xuXHQgICAgICBwcnVuZUNhY2hlKHRoaXMsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBtYXRjaGVzKHZhbCwgbmFtZSk7IH0pO1xuXHQgICAgfSxcblx0ICAgIGV4Y2x1ZGU6IGZ1bmN0aW9uIGV4Y2x1ZGUgKHZhbCkge1xuXHQgICAgICBwcnVuZUNhY2hlKHRoaXMsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiAhbWF0Y2hlcyh2YWwsIG5hbWUpOyB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG5cdCAgICB2YXIgc2xvdCA9IHRoaXMuJHNsb3RzLmRlZmF1bHQ7XG5cdCAgICB2YXIgdm5vZGUgPSBnZXRGaXJzdENvbXBvbmVudENoaWxkKHNsb3QpO1xuXHQgICAgdmFyIGNvbXBvbmVudE9wdGlvbnMgPSB2bm9kZSAmJiB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuXHQgICAgaWYgKGNvbXBvbmVudE9wdGlvbnMpIHtcblx0ICAgICAgLy8gY2hlY2sgcGF0dGVyblxuXHQgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY29tcG9uZW50T3B0aW9ucyk7XG5cdCAgICAgIHZhciByZWYgPSB0aGlzO1xuXHQgICAgICB2YXIgaW5jbHVkZSA9IHJlZi5pbmNsdWRlO1xuXHQgICAgICB2YXIgZXhjbHVkZSA9IHJlZi5leGNsdWRlO1xuXHQgICAgICBpZiAoXG5cdCAgICAgICAgLy8gbm90IGluY2x1ZGVkXG5cdCAgICAgICAgKGluY2x1ZGUgJiYgKCFuYW1lIHx8ICFtYXRjaGVzKGluY2x1ZGUsIG5hbWUpKSkgfHxcblx0ICAgICAgICAvLyBleGNsdWRlZFxuXHQgICAgICAgIChleGNsdWRlICYmIG5hbWUgJiYgbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSlcblx0ICAgICAgKSB7XG5cdCAgICAgICAgcmV0dXJuIHZub2RlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciByZWYkMSA9IHRoaXM7XG5cdCAgICAgIHZhciBjYWNoZSA9IHJlZiQxLmNhY2hlO1xuXHQgICAgICB2YXIga2V5cyA9IHJlZiQxLmtleXM7XG5cdCAgICAgIHZhciBrZXkgPSB2bm9kZS5rZXkgPT0gbnVsbFxuXHQgICAgICAgIC8vIHNhbWUgY29uc3RydWN0b3IgbWF5IGdldCByZWdpc3RlcmVkIGFzIGRpZmZlcmVudCBsb2NhbCBjb21wb25lbnRzXG5cdCAgICAgICAgLy8gc28gY2lkIGFsb25lIGlzIG5vdCBlbm91Z2ggKCMzMjY5KVxuXHQgICAgICAgID8gY29tcG9uZW50T3B0aW9ucy5DdG9yLmNpZCArIChjb21wb25lbnRPcHRpb25zLnRhZyA/IChcIjo6XCIgKyAoY29tcG9uZW50T3B0aW9ucy50YWcpKSA6ICcnKVxuXHQgICAgICAgIDogdm5vZGUua2V5O1xuXHQgICAgICBpZiAoY2FjaGVba2V5XSkge1xuXHQgICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gY2FjaGVba2V5XS5jb21wb25lbnRJbnN0YW5jZTtcblx0ICAgICAgICAvLyBtYWtlIGN1cnJlbnQga2V5IGZyZXNoZXN0XG5cdCAgICAgICAgcmVtb3ZlKGtleXMsIGtleSk7XG5cdCAgICAgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY2FjaGVba2V5XSA9IHZub2RlO1xuXHQgICAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICAgIC8vIHBydW5lIG9sZGVzdCBlbnRyeVxuXHQgICAgICAgIGlmICh0aGlzLm1heCAmJiBrZXlzLmxlbmd0aCA+IHBhcnNlSW50KHRoaXMubWF4KSkge1xuXHQgICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXlzWzBdLCBrZXlzLCB0aGlzLl92bm9kZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2bm9kZS5kYXRhLmtlZXBBbGl2ZSA9IHRydWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdm5vZGUgfHwgKHNsb3QgJiYgc2xvdFswXSlcblx0ICB9XG5cdH1cblx0XG5cdHZhciBidWlsdEluQ29tcG9uZW50cyA9IHtcblx0ICBLZWVwQWxpdmU6IEtlZXBBbGl2ZVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRHbG9iYWxBUEkgKFZ1ZSkge1xuXHQgIC8vIGNvbmZpZ1xuXHQgIHZhciBjb25maWdEZWYgPSB7fTtcblx0ICBjb25maWdEZWYuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gY29uZmlnOyB9O1xuXHQgIHtcblx0ICAgIGNvbmZpZ0RlZi5zZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgJ0RvIG5vdCByZXBsYWNlIHRoZSBWdWUuY29uZmlnIG9iamVjdCwgc2V0IGluZGl2aWR1YWwgZmllbGRzIGluc3RlYWQuJ1xuXHQgICAgICApO1xuXHQgICAgfTtcblx0ICB9XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ2NvbmZpZycsIGNvbmZpZ0RlZik7XG5cdFxuXHQgIC8vIGV4cG9zZWQgdXRpbCBtZXRob2RzLlxuXHQgIC8vIE5PVEU6IHRoZXNlIGFyZSBub3QgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBwdWJsaWMgQVBJIC0gYXZvaWQgcmVseWluZyBvblxuXHQgIC8vIHRoZW0gdW5sZXNzIHlvdSBhcmUgYXdhcmUgb2YgdGhlIHJpc2suXG5cdCAgVnVlLnV0aWwgPSB7XG5cdCAgICB3YXJuOiB3YXJuLFxuXHQgICAgZXh0ZW5kOiBleHRlbmQsXG5cdCAgICBtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcblx0ICAgIGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZVxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5zZXQgPSBzZXQ7XG5cdCAgVnVlLmRlbGV0ZSA9IGRlbDtcblx0ICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblx0XG5cdCAgVnVlLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgIFZ1ZS5vcHRpb25zW3R5cGUgKyAncyddID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB9KTtcblx0XG5cdCAgLy8gdGhpcyBpcyB1c2VkIHRvIGlkZW50aWZ5IHRoZSBcImJhc2VcIiBjb25zdHJ1Y3RvciB0byBleHRlbmQgYWxsIHBsYWluLW9iamVjdFxuXHQgIC8vIGNvbXBvbmVudHMgd2l0aCBpbiBXZWV4J3MgbXVsdGktaW5zdGFuY2Ugc2NlbmFyaW9zLlxuXHQgIFZ1ZS5vcHRpb25zLl9iYXNlID0gVnVlO1xuXHRcblx0ICBleHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgYnVpbHRJbkNvbXBvbmVudHMpO1xuXHRcblx0ICBpbml0VXNlKFZ1ZSk7XG5cdCAgaW5pdE1peGluJDEoVnVlKTtcblx0ICBpbml0RXh0ZW5kKFZ1ZSk7XG5cdCAgaW5pdEFzc2V0UmVnaXN0ZXJzKFZ1ZSk7XG5cdH1cblx0XG5cdGluaXRHbG9iYWxBUEkoVnVlKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGlzU2VydmVyJywge1xuXHQgIGdldDogaXNTZXJ2ZXJSZW5kZXJpbmdcblx0fSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRzc3JDb250ZXh0Jywge1xuXHQgIGdldDogZnVuY3Rpb24gZ2V0ICgpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICByZXR1cm4gdGhpcy4kdm5vZGUgJiYgdGhpcy4kdm5vZGUuc3NyQ29udGV4dFxuXHQgIH1cblx0fSk7XG5cdFxuXHQvLyBleHBvc2UgRnVuY3Rpb25hbFJlbmRlckNvbnRleHQgZm9yIHNzciBydW50aW1lIGhlbHBlciBpbnN0YWxsYXRpb25cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ0Z1bmN0aW9uYWxSZW5kZXJDb250ZXh0Jywge1xuXHQgIHZhbHVlOiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dFxuXHR9KTtcblx0XG5cdFZ1ZS52ZXJzaW9uID0gJzIuNS4xNSc7XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIHRoZXNlIGFyZSByZXNlcnZlZCBmb3Igd2ViIGJlY2F1c2UgdGhleSBhcmUgZGlyZWN0bHkgY29tcGlsZWQgYXdheVxuXHQvLyBkdXJpbmcgdGVtcGxhdGUgY29tcGlsYXRpb25cblx0dmFyIGlzUmVzZXJ2ZWRBdHRyID0gbWFrZU1hcCgnc3R5bGUsY2xhc3MnKTtcblx0XG5cdC8vIGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgYmUgdXNpbmcgcHJvcHMgZm9yIGJpbmRpbmdcblx0dmFyIGFjY2VwdFZhbHVlID0gbWFrZU1hcCgnaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcycpO1xuXHR2YXIgbXVzdFVzZVByb3AgPSBmdW5jdGlvbiAodGFnLCB0eXBlLCBhdHRyKSB7XG5cdCAgcmV0dXJuIChcblx0ICAgIChhdHRyID09PSAndmFsdWUnICYmIGFjY2VwdFZhbHVlKHRhZykpICYmIHR5cGUgIT09ICdidXR0b24nIHx8XG5cdCAgICAoYXR0ciA9PT0gJ3NlbGVjdGVkJyAmJiB0YWcgPT09ICdvcHRpb24nKSB8fFxuXHQgICAgKGF0dHIgPT09ICdjaGVja2VkJyAmJiB0YWcgPT09ICdpbnB1dCcpIHx8XG5cdCAgICAoYXR0ciA9PT0gJ211dGVkJyAmJiB0YWcgPT09ICd2aWRlbycpXG5cdCAgKVxuXHR9O1xuXHRcblx0dmFyIGlzRW51bWVyYXRlZEF0dHIgPSBtYWtlTWFwKCdjb250ZW50ZWRpdGFibGUsZHJhZ2dhYmxlLHNwZWxsY2hlY2snKTtcblx0XG5cdHZhciBpc0Jvb2xlYW5BdHRyID0gbWFrZU1hcChcblx0ICAnYWxsb3dmdWxsc2NyZWVuLGFzeW5jLGF1dG9mb2N1cyxhdXRvcGxheSxjaGVja2VkLGNvbXBhY3QsY29udHJvbHMsZGVjbGFyZSwnICtcblx0ICAnZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLCcgK1xuXHQgICdlbmFibGVkLGZvcm1ub3ZhbGlkYXRlLGhpZGRlbixpbmRldGVybWluYXRlLGluZXJ0LGlzbWFwLGl0ZW1zY29wZSxsb29wLG11bHRpcGxlLCcgK1xuXHQgICdtdXRlZCxub2hyZWYsbm9yZXNpemUsbm9zaGFkZSxub3ZhbGlkYXRlLG5vd3JhcCxvcGVuLHBhdXNlb25leGl0LHJlYWRvbmx5LCcgK1xuXHQgICdyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLCcgK1xuXHQgICd0cnVlc3BlZWQsdHlwZW11c3RtYXRjaCx2aXNpYmxlJ1xuXHQpO1xuXHRcblx0dmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG5cdFxuXHR2YXIgaXNYbGluayA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgcmV0dXJuIG5hbWUuY2hhckF0KDUpID09PSAnOicgJiYgbmFtZS5zbGljZSgwLCA1KSA9PT0gJ3hsaW5rJ1xuXHR9O1xuXHRcblx0dmFyIGdldFhsaW5rUHJvcCA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgcmV0dXJuIGlzWGxpbmsobmFtZSkgPyBuYW1lLnNsaWNlKDYsIG5hbWUubGVuZ3RoKSA6ICcnXG5cdH07XG5cdFxuXHR2YXIgaXNGYWxzeUF0dHJWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICByZXR1cm4gdmFsID09IG51bGwgfHwgdmFsID09PSBmYWxzZVxuXHR9O1xuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBnZW5DbGFzc0ZvclZub2RlICh2bm9kZSkge1xuXHQgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcblx0ICB2YXIgcGFyZW50Tm9kZSA9IHZub2RlO1xuXHQgIHZhciBjaGlsZE5vZGUgPSB2bm9kZTtcblx0ICB3aGlsZSAoaXNEZWYoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuXHQgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtcblx0ICAgIGlmIChjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEpIHtcblx0ICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGNoaWxkTm9kZS5kYXRhLCBkYXRhKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgd2hpbGUgKGlzRGVmKHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudCkpIHtcblx0ICAgIGlmIChwYXJlbnROb2RlICYmIHBhcmVudE5vZGUuZGF0YSkge1xuXHQgICAgICBkYXRhID0gbWVyZ2VDbGFzc0RhdGEoZGF0YSwgcGFyZW50Tm9kZS5kYXRhKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlbmRlckNsYXNzKGRhdGEuc3RhdGljQ2xhc3MsIGRhdGEuY2xhc3MpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQ2xhc3NEYXRhIChjaGlsZCwgcGFyZW50KSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBjb25jYXQoY2hpbGQuc3RhdGljQ2xhc3MsIHBhcmVudC5zdGF0aWNDbGFzcyksXG5cdCAgICBjbGFzczogaXNEZWYoY2hpbGQuY2xhc3MpXG5cdCAgICAgID8gW2NoaWxkLmNsYXNzLCBwYXJlbnQuY2xhc3NdXG5cdCAgICAgIDogcGFyZW50LmNsYXNzXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW5kZXJDbGFzcyAoXG5cdCAgc3RhdGljQ2xhc3MsXG5cdCAgZHluYW1pY0NsYXNzXG5cdCkge1xuXHQgIGlmIChpc0RlZihzdGF0aWNDbGFzcykgfHwgaXNEZWYoZHluYW1pY0NsYXNzKSkge1xuXHQgICAgcmV0dXJuIGNvbmNhdChzdGF0aWNDbGFzcywgc3RyaW5naWZ5Q2xhc3MoZHluYW1pY0NsYXNzKSlcblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICByZXR1cm4gJydcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29uY2F0IChhLCBiKSB7XG5cdCAgcmV0dXJuIGEgPyBiID8gKGEgKyAnICcgKyBiKSA6IGEgOiAoYiB8fCAnJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RyaW5naWZ5Q2xhc3MgKHZhbHVlKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5naWZ5QXJyYXkodmFsdWUpXG5cdCAgfVxuXHQgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBzdHJpbmdpZnlPYmplY3QodmFsdWUpXG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWVcblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICByZXR1cm4gJydcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RyaW5naWZ5QXJyYXkgKHZhbHVlKSB7XG5cdCAgdmFyIHJlcyA9ICcnO1xuXHQgIHZhciBzdHJpbmdpZmllZDtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaWYgKGlzRGVmKHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5Q2xhc3ModmFsdWVbaV0pKSAmJiBzdHJpbmdpZmllZCAhPT0gJycpIHtcblx0ICAgICAgaWYgKHJlcykgeyByZXMgKz0gJyAnOyB9XG5cdCAgICAgIHJlcyArPSBzdHJpbmdpZmllZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdHJpbmdpZnlPYmplY3QgKHZhbHVlKSB7XG5cdCAgdmFyIHJlcyA9ICcnO1xuXHQgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHQgICAgaWYgKHZhbHVlW2tleV0pIHtcblx0ICAgICAgaWYgKHJlcykgeyByZXMgKz0gJyAnOyB9XG5cdCAgICAgIHJlcyArPSBrZXk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgbmFtZXNwYWNlTWFwID0ge1xuXHQgIHN2ZzogJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcblx0ICBtYXRoOiAnaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCdcblx0fTtcblx0XG5cdHZhciBpc0hUTUxUYWcgPSBtYWtlTWFwKFxuXHQgICdodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSwnICtcblx0ICAnYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGZvb3RlcixoZWFkZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGdyb3VwLG5hdixzZWN0aW9uLCcgK1xuXHQgICdkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCwnICtcblx0ICAnYSxiLGFiYnIsYmRpLGJkbyxicixjaXRlLGNvZGUsZGF0YSxkZm4sZW0saSxrYmQsbWFyayxxLHJwLHJ0LHJ0YyxydWJ5LCcgK1xuXHQgICdzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCx0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbywnICtcblx0ICAnZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsJyArXG5cdCAgJ2NhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLHRoLHRyLCcgK1xuXHQgICdidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsb3B0aW9uLCcgK1xuXHQgICdvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLCcgK1xuXHQgICdkZXRhaWxzLGRpYWxvZyxtZW51LG1lbnVpdGVtLHN1bW1hcnksJyArXG5cdCAgJ2NvbnRlbnQsZWxlbWVudCxzaGFkb3csdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3QnXG5cdCk7XG5cdFxuXHQvLyB0aGlzIG1hcCBpcyBpbnRlbnRpb25hbGx5IHNlbGVjdGl2ZSwgb25seSBjb3ZlcmluZyBTVkcgZWxlbWVudHMgdGhhdCBtYXlcblx0Ly8gY29udGFpbiBjaGlsZCBlbGVtZW50cy5cblx0dmFyIGlzU1ZHID0gbWFrZU1hcChcblx0ICAnc3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLCcgK1xuXHQgICdmb3JlaWduT2JqZWN0LGcsZ2x5cGgsaW1hZ2UsbGluZSxtYXJrZXIsbWFzayxtaXNzaW5nLWdseXBoLHBhdGgscGF0dGVybiwnICtcblx0ICAncG9seWdvbixwb2x5bGluZSxyZWN0LHN3aXRjaCxzeW1ib2wsdGV4dCx0ZXh0cGF0aCx0c3Bhbix1c2UsdmlldycsXG5cdCAgdHJ1ZVxuXHQpO1xuXHRcblx0dmFyIGlzUHJlVGFnID0gZnVuY3Rpb24gKHRhZykgeyByZXR1cm4gdGFnID09PSAncHJlJzsgfTtcblx0XG5cdHZhciBpc1Jlc2VydmVkVGFnID0gZnVuY3Rpb24gKHRhZykge1xuXHQgIHJldHVybiBpc0hUTUxUYWcodGFnKSB8fCBpc1NWRyh0YWcpXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRUYWdOYW1lc3BhY2UgKHRhZykge1xuXHQgIGlmIChpc1NWRyh0YWcpKSB7XG5cdCAgICByZXR1cm4gJ3N2Zydcblx0ICB9XG5cdCAgLy8gYmFzaWMgc3VwcG9ydCBmb3IgTWF0aE1MXG5cdCAgLy8gbm90ZSBpdCBkb2Vzbid0IHN1cHBvcnQgb3RoZXIgTWF0aE1MIGVsZW1lbnRzIGJlaW5nIGNvbXBvbmVudCByb290c1xuXHQgIGlmICh0YWcgPT09ICdtYXRoJykge1xuXHQgICAgcmV0dXJuICdtYXRoJ1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIHVua25vd25FbGVtZW50Q2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRmdW5jdGlvbiBpc1Vua25vd25FbGVtZW50ICh0YWcpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIWluQnJvd3Nlcikge1xuXHQgICAgcmV0dXJuIHRydWVcblx0ICB9XG5cdCAgaWYgKGlzUmVzZXJ2ZWRUYWcodGFnKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHQgIHRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gIT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHVua25vd25FbGVtZW50Q2FjaGVbdGFnXVxuXHQgIH1cblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG5cdCAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkge1xuXHQgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjgyMTAzNjQvMTA3MDI0NFxuXHQgICAgcmV0dXJuICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gPSAoXG5cdCAgICAgIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8XG5cdCAgICAgIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnRcblx0ICAgICkpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddID0gL0hUTUxVbmtub3duRWxlbWVudC8udGVzdChlbC50b1N0cmluZygpKSlcblx0ICB9XG5cdH1cblx0XG5cdHZhciBpc1RleHRJbnB1dFR5cGUgPSBtYWtlTWFwKCd0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCcpO1xuXHRcblx0LyogICovXG5cdFxuXHQvKipcblx0ICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG5cdCAqL1xuXHRmdW5jdGlvbiBxdWVyeSAoZWwpIHtcblx0ICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuXHQgICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG5cdCAgICBpZiAoIXNlbGVjdGVkKSB7XG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBlbFxuXHQgICAgICApO1xuXHQgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jylcblx0ICAgIH1cblx0ICAgIHJldHVybiBzZWxlY3RlZFxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZWxcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlRWxlbWVudCQxICh0YWdOYW1lLCB2bm9kZSkge1xuXHQgIHZhciBlbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuXHQgIGlmICh0YWdOYW1lICE9PSAnc2VsZWN0Jykge1xuXHQgICAgcmV0dXJuIGVsbVxuXHQgIH1cblx0ICAvLyBmYWxzZSBvciBudWxsIHdpbGwgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgYnV0IHVuZGVmaW5lZCB3aWxsIG5vdFxuXHQgIGlmICh2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEuYXR0cnMgJiYgdm5vZGUuZGF0YS5hdHRycy5tdWx0aXBsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICBlbG0uc2V0QXR0cmlidXRlKCdtdWx0aXBsZScsICdtdWx0aXBsZScpO1xuXHQgIH1cblx0ICByZXR1cm4gZWxtXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyAobmFtZXNwYWNlLCB0YWdOYW1lKSB7XG5cdCAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2VNYXBbbmFtZXNwYWNlXSwgdGFnTmFtZSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlVGV4dE5vZGUgKHRleHQpIHtcblx0ICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dClcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQ29tbWVudCAodGV4dCkge1xuXHQgIHJldHVybiBkb2N1bWVudC5jcmVhdGVDb21tZW50KHRleHQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluc2VydEJlZm9yZSAocGFyZW50Tm9kZSwgbmV3Tm9kZSwgcmVmZXJlbmNlTm9kZSkge1xuXHQgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDaGlsZCAobm9kZSwgY2hpbGQpIHtcblx0ICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXBwZW5kQ2hpbGQgKG5vZGUsIGNoaWxkKSB7XG5cdCAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcmVudE5vZGUgKG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZS5wYXJlbnROb2RlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5leHRTaWJsaW5nIChub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUubmV4dFNpYmxpbmdcblx0fVxuXHRcblx0ZnVuY3Rpb24gdGFnTmFtZSAobm9kZSkge1xuXHQgIHJldHVybiBub2RlLnRhZ05hbWVcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGV4dENvbnRlbnQgKG5vZGUsIHRleHQpIHtcblx0ICBub2RlLnRleHRDb250ZW50ID0gdGV4dDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0U3R5bGVTY29wZSAobm9kZSwgc2NvcGVJZCkge1xuXHQgIG5vZGUuc2V0QXR0cmlidXRlKHNjb3BlSWQsICcnKTtcblx0fVxuXHRcblx0XG5cdHZhciBub2RlT3BzID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0Y3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCQxLFxuXHRcdGNyZWF0ZUVsZW1lbnROUzogY3JlYXRlRWxlbWVudE5TLFxuXHRcdGNyZWF0ZVRleHROb2RlOiBjcmVhdGVUZXh0Tm9kZSxcblx0XHRjcmVhdGVDb21tZW50OiBjcmVhdGVDb21tZW50LFxuXHRcdGluc2VydEJlZm9yZTogaW5zZXJ0QmVmb3JlLFxuXHRcdHJlbW92ZUNoaWxkOiByZW1vdmVDaGlsZCxcblx0XHRhcHBlbmRDaGlsZDogYXBwZW5kQ2hpbGQsXG5cdFx0cGFyZW50Tm9kZTogcGFyZW50Tm9kZSxcblx0XHRuZXh0U2libGluZzogbmV4dFNpYmxpbmcsXG5cdFx0dGFnTmFtZTogdGFnTmFtZSxcblx0XHRzZXRUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXG5cdFx0c2V0U3R5bGVTY29wZTogc2V0U3R5bGVTY29wZVxuXHR9KTtcblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHJlZiA9IHtcblx0ICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSAoXywgdm5vZGUpIHtcblx0ICAgIHJlZ2lzdGVyUmVmKHZub2RlKTtcblx0ICB9LFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICAgIGlmIChvbGRWbm9kZS5kYXRhLnJlZiAhPT0gdm5vZGUuZGF0YS5yZWYpIHtcblx0ICAgICAgcmVnaXN0ZXJSZWYob2xkVm5vZGUsIHRydWUpO1xuXHQgICAgICByZWdpc3RlclJlZih2bm9kZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95ICh2bm9kZSkge1xuXHQgICAgcmVnaXN0ZXJSZWYodm5vZGUsIHRydWUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVnaXN0ZXJSZWYgKHZub2RlLCBpc1JlbW92YWwpIHtcblx0ICB2YXIga2V5ID0gdm5vZGUuZGF0YS5yZWY7XG5cdCAgaWYgKCFpc0RlZihrZXkpKSB7IHJldHVybiB9XG5cdFxuXHQgIHZhciB2bSA9IHZub2RlLmNvbnRleHQ7XG5cdCAgdmFyIHJlZiA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlIHx8IHZub2RlLmVsbTtcblx0ICB2YXIgcmVmcyA9IHZtLiRyZWZzO1xuXHQgIGlmIChpc1JlbW92YWwpIHtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KHJlZnNba2V5XSkpIHtcblx0ICAgICAgcmVtb3ZlKHJlZnNba2V5XSwgcmVmKTtcblx0ICAgIH0gZWxzZSBpZiAocmVmc1trZXldID09PSByZWYpIHtcblx0ICAgICAgcmVmc1trZXldID0gdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAodm5vZGUuZGF0YS5yZWZJbkZvcikge1xuXHQgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVmc1trZXldKSkge1xuXHQgICAgICAgIHJlZnNba2V5XSA9IFtyZWZdO1xuXHQgICAgICB9IGVsc2UgaWYgKHJlZnNba2V5XS5pbmRleE9mKHJlZikgPCAwKSB7XG5cdCAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICAgICAgcmVmc1trZXldLnB1c2gocmVmKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVmc1trZXldID0gcmVmO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFZpcnR1YWwgRE9NIHBhdGNoaW5nIGFsZ29yaXRobSBiYXNlZCBvbiBTbmFiYmRvbSBieVxuXHQgKiBTaW1vbiBGcmlpcyBWaW5kdW0gKEBwYWxkZXBpbmQpXG5cdCAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuXHQgKiBodHRwczovL2dpdGh1Yi5jb20vcGFsZGVwaW5kL3NuYWJiZG9tL2Jsb2IvbWFzdGVyL0xJQ0VOU0Vcblx0ICpcblx0ICogbW9kaWZpZWQgYnkgRXZhbiBZb3UgKEB5eXg5OTA4MDMpXG5cdCAqXG5cdCAqIE5vdCB0eXBlLWNoZWNraW5nIHRoaXMgYmVjYXVzZSB0aGlzIGZpbGUgaXMgcGVyZi1jcml0aWNhbCBhbmQgdGhlIGNvc3Rcblx0ICogb2YgbWFraW5nIGZsb3cgdW5kZXJzdGFuZCBpdCBpcyBub3Qgd29ydGggaXQuXG5cdCAqL1xuXHRcblx0dmFyIGVtcHR5Tm9kZSA9IG5ldyBWTm9kZSgnJywge30sIFtdKTtcblx0XG5cdHZhciBob29rcyA9IFsnY3JlYXRlJywgJ2FjdGl2YXRlJywgJ3VwZGF0ZScsICdyZW1vdmUnLCAnZGVzdHJveSddO1xuXHRcblx0ZnVuY3Rpb24gc2FtZVZub2RlIChhLCBiKSB7XG5cdCAgcmV0dXJuIChcblx0ICAgIGEua2V5ID09PSBiLmtleSAmJiAoXG5cdCAgICAgIChcblx0ICAgICAgICBhLnRhZyA9PT0gYi50YWcgJiZcblx0ICAgICAgICBhLmlzQ29tbWVudCA9PT0gYi5pc0NvbW1lbnQgJiZcblx0ICAgICAgICBpc0RlZihhLmRhdGEpID09PSBpc0RlZihiLmRhdGEpICYmXG5cdCAgICAgICAgc2FtZUlucHV0VHlwZShhLCBiKVxuXHQgICAgICApIHx8IChcblx0ICAgICAgICBpc1RydWUoYS5pc0FzeW5jUGxhY2Vob2xkZXIpICYmXG5cdCAgICAgICAgYS5hc3luY0ZhY3RvcnkgPT09IGIuYXN5bmNGYWN0b3J5ICYmXG5cdCAgICAgICAgaXNVbmRlZihiLmFzeW5jRmFjdG9yeS5lcnJvcilcblx0ICAgICAgKVxuXHQgICAgKVxuXHQgIClcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2FtZUlucHV0VHlwZSAoYSwgYikge1xuXHQgIGlmIChhLnRhZyAhPT0gJ2lucHV0JykgeyByZXR1cm4gdHJ1ZSB9XG5cdCAgdmFyIGk7XG5cdCAgdmFyIHR5cGVBID0gaXNEZWYoaSA9IGEuZGF0YSkgJiYgaXNEZWYoaSA9IGkuYXR0cnMpICYmIGkudHlwZTtcblx0ICB2YXIgdHlwZUIgPSBpc0RlZihpID0gYi5kYXRhKSAmJiBpc0RlZihpID0gaS5hdHRycykgJiYgaS50eXBlO1xuXHQgIHJldHVybiB0eXBlQSA9PT0gdHlwZUIgfHwgaXNUZXh0SW5wdXRUeXBlKHR5cGVBKSAmJiBpc1RleHRJbnB1dFR5cGUodHlwZUIpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUtleVRvT2xkSWR4IChjaGlsZHJlbiwgYmVnaW5JZHgsIGVuZElkeCkge1xuXHQgIHZhciBpLCBrZXk7XG5cdCAgdmFyIG1hcCA9IHt9O1xuXHQgIGZvciAoaSA9IGJlZ2luSWR4OyBpIDw9IGVuZElkeDsgKytpKSB7XG5cdCAgICBrZXkgPSBjaGlsZHJlbltpXS5rZXk7XG5cdCAgICBpZiAoaXNEZWYoa2V5KSkgeyBtYXBba2V5XSA9IGk7IH1cblx0ICB9XG5cdCAgcmV0dXJuIG1hcFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVQYXRjaEZ1bmN0aW9uIChiYWNrZW5kKSB7XG5cdCAgdmFyIGksIGo7XG5cdCAgdmFyIGNicyA9IHt9O1xuXHRcblx0ICB2YXIgbW9kdWxlcyA9IGJhY2tlbmQubW9kdWxlcztcblx0ICB2YXIgbm9kZU9wcyA9IGJhY2tlbmQubm9kZU9wcztcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgKytpKSB7XG5cdCAgICBjYnNbaG9va3NbaV1dID0gW107XG5cdCAgICBmb3IgKGogPSAwOyBqIDwgbW9kdWxlcy5sZW5ndGg7ICsraikge1xuXHQgICAgICBpZiAoaXNEZWYobW9kdWxlc1tqXVtob29rc1tpXV0pKSB7XG5cdCAgICAgICAgY2JzW2hvb2tzW2ldXS5wdXNoKG1vZHVsZXNbal1baG9va3NbaV1dKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZW1wdHlOb2RlQXQgKGVsbSkge1xuXHQgICAgcmV0dXJuIG5ldyBWTm9kZShub2RlT3BzLnRhZ05hbWUoZWxtKS50b0xvd2VyQ2FzZSgpLCB7fSwgW10sIHVuZGVmaW5lZCwgZWxtKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlUm1DYiAoY2hpbGRFbG0sIGxpc3RlbmVycykge1xuXHQgICAgZnVuY3Rpb24gcmVtb3ZlICgpIHtcblx0ICAgICAgaWYgKC0tcmVtb3ZlLmxpc3RlbmVycyA9PT0gMCkge1xuXHQgICAgICAgIHJlbW92ZU5vZGUoY2hpbGRFbG0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZW1vdmUubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuXHQgICAgcmV0dXJuIHJlbW92ZVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVtb3ZlTm9kZSAoZWwpIHtcblx0ICAgIHZhciBwYXJlbnQgPSBub2RlT3BzLnBhcmVudE5vZGUoZWwpO1xuXHQgICAgLy8gZWxlbWVudCBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gcmVtb3ZlZCBkdWUgdG8gdi1odG1sIC8gdi10ZXh0XG5cdCAgICBpZiAoaXNEZWYocGFyZW50KSkge1xuXHQgICAgICBub2RlT3BzLnJlbW92ZUNoaWxkKHBhcmVudCwgZWwpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNVbmtub3duRWxlbWVudCQkMSAodm5vZGUsIGluVlByZSkge1xuXHQgICAgcmV0dXJuIChcblx0ICAgICAgIWluVlByZSAmJlxuXHQgICAgICAhdm5vZGUubnMgJiZcblx0ICAgICAgIShcblx0ICAgICAgICBjb25maWcuaWdub3JlZEVsZW1lbnRzLmxlbmd0aCAmJlxuXHQgICAgICAgIGNvbmZpZy5pZ25vcmVkRWxlbWVudHMuc29tZShmdW5jdGlvbiAoaWdub3JlKSB7XG5cdCAgICAgICAgICByZXR1cm4gaXNSZWdFeHAoaWdub3JlKVxuXHQgICAgICAgICAgICA/IGlnbm9yZS50ZXN0KHZub2RlLnRhZylcblx0ICAgICAgICAgICAgOiBpZ25vcmUgPT09IHZub2RlLnRhZ1xuXHQgICAgICAgIH0pXG5cdCAgICAgICkgJiZcblx0ICAgICAgY29uZmlnLmlzVW5rbm93bkVsZW1lbnQodm5vZGUudGFnKVxuXHQgICAgKVxuXHQgIH1cblx0XG5cdCAgdmFyIGNyZWF0aW5nRWxtSW5WUHJlID0gMDtcblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlRWxtIChcblx0ICAgIHZub2RlLFxuXHQgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLFxuXHQgICAgcGFyZW50RWxtLFxuXHQgICAgcmVmRWxtLFxuXHQgICAgbmVzdGVkLFxuXHQgICAgb3duZXJBcnJheSxcblx0ICAgIGluZGV4XG5cdCAgKSB7XG5cdCAgICBpZiAoaXNEZWYodm5vZGUuZWxtKSAmJiBpc0RlZihvd25lckFycmF5KSkge1xuXHQgICAgICAvLyBUaGlzIHZub2RlIHdhcyB1c2VkIGluIGEgcHJldmlvdXMgcmVuZGVyIVxuXHQgICAgICAvLyBub3cgaXQncyB1c2VkIGFzIGEgbmV3IG5vZGUsIG92ZXJ3cml0aW5nIGl0cyBlbG0gd291bGQgY2F1c2Vcblx0ICAgICAgLy8gcG90ZW50aWFsIHBhdGNoIGVycm9ycyBkb3duIHRoZSByb2FkIHdoZW4gaXQncyB1c2VkIGFzIGFuIGluc2VydGlvblxuXHQgICAgICAvLyByZWZlcmVuY2Ugbm9kZS4gSW5zdGVhZCwgd2UgY2xvbmUgdGhlIG5vZGUgb24tZGVtYW5kIGJlZm9yZSBjcmVhdGluZ1xuXHQgICAgICAvLyBhc3NvY2lhdGVkIERPTSBlbGVtZW50IGZvciBpdC5cblx0ICAgICAgdm5vZGUgPSBvd25lckFycmF5W2luZGV4XSA9IGNsb25lVk5vZGUodm5vZGUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZub2RlLmlzUm9vdEluc2VydCA9ICFuZXN0ZWQ7IC8vIGZvciB0cmFuc2l0aW9uIGVudGVyIGNoZWNrXG5cdCAgICBpZiAoY3JlYXRlQ29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcblx0ICAgIHZhciB0YWcgPSB2bm9kZS50YWc7XG5cdCAgICBpZiAoaXNEZWYodGFnKSkge1xuXHQgICAgICB7XG5cdCAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5wcmUpIHtcblx0ICAgICAgICAgIGNyZWF0aW5nRWxtSW5WUHJlKys7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc1Vua25vd25FbGVtZW50JCQxKHZub2RlLCBjcmVhdGluZ0VsbUluVlByZSkpIHtcblx0ICAgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAgICdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICtcblx0ICAgICAgICAgICAgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgK1xuXHQgICAgICAgICAgICAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nLFxuXHQgICAgICAgICAgICB2bm9kZS5jb250ZXh0XG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdm5vZGUuZWxtID0gdm5vZGUubnNcblx0ICAgICAgICA/IG5vZGVPcHMuY3JlYXRlRWxlbWVudE5TKHZub2RlLm5zLCB0YWcpXG5cdCAgICAgICAgOiBub2RlT3BzLmNyZWF0ZUVsZW1lbnQodGFnLCB2bm9kZSk7XG5cdCAgICAgIHNldFNjb3BlKHZub2RlKTtcblx0XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICB7XG5cdCAgICAgICAgY3JlYXRlQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIGlmIChpc0RlZihkYXRhKSkge1xuXHQgICAgICAgICAgaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGRhdGEgJiYgZGF0YS5wcmUpIHtcblx0ICAgICAgICBjcmVhdGluZ0VsbUluVlByZS0tO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpKSB7XG5cdCAgICAgIHZub2RlLmVsbSA9IG5vZGVPcHMuY3JlYXRlQ29tbWVudCh2bm9kZS50ZXh0KTtcblx0ICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdm5vZGUuZWxtID0gbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZSh2bm9kZS50ZXh0KTtcblx0ICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50ICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuXHQgICAgdmFyIGkgPSB2bm9kZS5kYXRhO1xuXHQgICAgaWYgKGlzRGVmKGkpKSB7XG5cdCAgICAgIHZhciBpc1JlYWN0aXZhdGVkID0gaXNEZWYodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpICYmIGkua2VlcEFsaXZlO1xuXHQgICAgICBpZiAoaXNEZWYoaSA9IGkuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHtcblx0ICAgICAgICBpKHZub2RlLCBmYWxzZSAvKiBoeWRyYXRpbmcgKi8sIHBhcmVudEVsbSwgcmVmRWxtKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBhZnRlciBjYWxsaW5nIHRoZSBpbml0IGhvb2ssIGlmIHRoZSB2bm9kZSBpcyBhIGNoaWxkIGNvbXBvbmVudFxuXHQgICAgICAvLyBpdCBzaG91bGQndmUgY3JlYXRlZCBhIGNoaWxkIGluc3RhbmNlIGFuZCBtb3VudGVkIGl0LiB0aGUgY2hpbGRcblx0ICAgICAgLy8gY29tcG9uZW50IGFsc28gaGFzIHNldCB0aGUgcGxhY2Vob2xkZXIgdm5vZGUncyBlbG0uXG5cdCAgICAgIC8vIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdCByZXR1cm4gdGhlIGVsZW1lbnQgYW5kIGJlIGRvbmUuXG5cdCAgICAgIGlmIChpc0RlZih2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkpIHtcblx0ICAgICAgICBpbml0Q29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIGlmIChpc1RydWUoaXNSZWFjdGl2YXRlZCkpIHtcblx0ICAgICAgICAgIHJlYWN0aXZhdGVDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbml0Q29tcG9uZW50ICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG5cdCAgICBpZiAoaXNEZWYodm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0KSkge1xuXHQgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaC5hcHBseShpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmRhdGEucGVuZGluZ0luc2VydCk7XG5cdCAgICAgIHZub2RlLmRhdGEucGVuZGluZ0luc2VydCA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2bm9kZS5lbG0gPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kZWw7XG5cdCAgICBpZiAoaXNQYXRjaGFibGUodm5vZGUpKSB7XG5cdCAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICBzZXRTY29wZSh2bm9kZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBlbXB0eSBjb21wb25lbnQgcm9vdC5cblx0ICAgICAgLy8gc2tpcCBhbGwgZWxlbWVudC1yZWxhdGVkIG1vZHVsZXMgZXhjZXB0IGZvciByZWYgKCMzNDU1KVxuXHQgICAgICByZWdpc3RlclJlZih2bm9kZSk7XG5cdCAgICAgIC8vIG1ha2Ugc3VyZSB0byBpbnZva2UgdGhlIGluc2VydCBob29rXG5cdCAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKHZub2RlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlYWN0aXZhdGVDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIC8vIGhhY2sgZm9yICM0MzM5OiBhIHJlYWN0aXZhdGVkIGNvbXBvbmVudCB3aXRoIGlubmVyIHRyYW5zaXRpb25cblx0ICAgIC8vIGRvZXMgbm90IHRyaWdnZXIgYmVjYXVzZSB0aGUgaW5uZXIgbm9kZSdzIGNyZWF0ZWQgaG9va3MgYXJlIG5vdCBjYWxsZWRcblx0ICAgIC8vIGFnYWluLiBJdCdzIG5vdCBpZGVhbCB0byBpbnZvbHZlIG1vZHVsZS1zcGVjaWZpYyBsb2dpYyBpbiBoZXJlIGJ1dFxuXHQgICAgLy8gdGhlcmUgZG9lc24ndCBzZWVtIHRvIGJlIGEgYmV0dGVyIHdheSB0byBkbyBpdC5cblx0ICAgIHZhciBpbm5lck5vZGUgPSB2bm9kZTtcblx0ICAgIHdoaWxlIChpbm5lck5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHtcblx0ICAgICAgaW5uZXJOb2RlID0gaW5uZXJOb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtcblx0ICAgICAgaWYgKGlzRGVmKGkgPSBpbm5lck5vZGUuZGF0YSkgJiYgaXNEZWYoaSA9IGkudHJhbnNpdGlvbikpIHtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmFjdGl2YXRlLmxlbmd0aDsgKytpKSB7XG5cdCAgICAgICAgICBjYnMuYWN0aXZhdGVbaV0oZW1wdHlOb2RlLCBpbm5lck5vZGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaChpbm5lck5vZGUpO1xuXHQgICAgICAgIGJyZWFrXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHVubGlrZSBhIG5ld2x5IGNyZWF0ZWQgY29tcG9uZW50LFxuXHQgICAgLy8gYSByZWFjdGl2YXRlZCBrZWVwLWFsaXZlIGNvbXBvbmVudCBkb2Vzbid0IGluc2VydCBpdHNlbGZcblx0ICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGluc2VydCAocGFyZW50LCBlbG0sIHJlZiQkMSkge1xuXHQgICAgaWYgKGlzRGVmKHBhcmVudCkpIHtcblx0ICAgICAgaWYgKGlzRGVmKHJlZiQkMSkpIHtcblx0ICAgICAgICBpZiAocmVmJCQxLnBhcmVudE5vZGUgPT09IHBhcmVudCkge1xuXHQgICAgICAgICAgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50LCBlbG0sIHJlZiQkMSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG5vZGVPcHMuYXBwZW5kQ2hpbGQocGFyZW50LCBlbG0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjcmVhdGVDaGlsZHJlbiAodm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpIHtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuXHQgICAgICB7XG5cdCAgICAgICAgY2hlY2tEdXBsaWNhdGVLZXlzKGNoaWxkcmVuKTtcblx0ICAgICAgfVxuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG5cdCAgICAgICAgY3JlYXRlRWxtKGNoaWxkcmVuW2ldLCBpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmVsbSwgbnVsbCwgdHJ1ZSwgY2hpbGRyZW4sIGkpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGlzUHJpbWl0aXZlKHZub2RlLnRleHQpKSB7XG5cdCAgICAgIG5vZGVPcHMuYXBwZW5kQ2hpbGQodm5vZGUuZWxtLCBub2RlT3BzLmNyZWF0ZVRleHROb2RlKFN0cmluZyh2bm9kZS50ZXh0KSkpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNQYXRjaGFibGUgKHZub2RlKSB7XG5cdCAgICB3aGlsZSAodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHtcblx0ICAgICAgdm5vZGUgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaXNEZWYodm5vZGUudGFnKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW52b2tlQ3JlYXRlSG9va3MgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpIHtcblx0ICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkge1xuXHQgICAgICBjYnMuY3JlYXRlW2kkMV0oZW1wdHlOb2RlLCB2bm9kZSk7XG5cdCAgICB9XG5cdCAgICBpID0gdm5vZGUuZGF0YS5ob29rOyAvLyBSZXVzZSB2YXJpYWJsZVxuXHQgICAgaWYgKGlzRGVmKGkpKSB7XG5cdCAgICAgIGlmIChpc0RlZihpLmNyZWF0ZSkpIHsgaS5jcmVhdGUoZW1wdHlOb2RlLCB2bm9kZSk7IH1cblx0ICAgICAgaWYgKGlzRGVmKGkuaW5zZXJ0KSkgeyBpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSk7IH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIHNldCBzY29wZSBpZCBhdHRyaWJ1dGUgZm9yIHNjb3BlZCBDU1MuXG5cdCAgLy8gdGhpcyBpcyBpbXBsZW1lbnRlZCBhcyBhIHNwZWNpYWwgY2FzZSB0byBhdm9pZCB0aGUgb3ZlcmhlYWRcblx0ICAvLyBvZiBnb2luZyB0aHJvdWdoIHRoZSBub3JtYWwgYXR0cmlidXRlIHBhdGNoaW5nIHByb2Nlc3MuXG5cdCAgZnVuY3Rpb24gc2V0U2NvcGUgKHZub2RlKSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIGlmIChpc0RlZihpID0gdm5vZGUuZm5TY29wZUlkKSkge1xuXHQgICAgICBub2RlT3BzLnNldFN0eWxlU2NvcGUodm5vZGUuZWxtLCBpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBhbmNlc3RvciA9IHZub2RlO1xuXHQgICAgICB3aGlsZSAoYW5jZXN0b3IpIHtcblx0ICAgICAgICBpZiAoaXNEZWYoaSA9IGFuY2VzdG9yLmNvbnRleHQpICYmIGlzRGVmKGkgPSBpLiRvcHRpb25zLl9zY29wZUlkKSkge1xuXHQgICAgICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBmb3Igc2xvdCBjb250ZW50IHRoZXkgc2hvdWxkIGFsc28gZ2V0IHRoZSBzY29wZUlkIGZyb20gdGhlIGhvc3QgaW5zdGFuY2UuXG5cdCAgICBpZiAoaXNEZWYoaSA9IGFjdGl2ZUluc3RhbmNlKSAmJlxuXHQgICAgICBpICE9PSB2bm9kZS5jb250ZXh0ICYmXG5cdCAgICAgIGkgIT09IHZub2RlLmZuQ29udGV4dCAmJlxuXHQgICAgICBpc0RlZihpID0gaS4kb3B0aW9ucy5fc2NvcGVJZClcblx0ICAgICkge1xuXHQgICAgICBub2RlT3BzLnNldFN0eWxlU2NvcGUodm5vZGUuZWxtLCBpKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFkZFZub2RlcyAocGFyZW50RWxtLCByZWZFbG0sIHZub2Rlcywgc3RhcnRJZHgsIGVuZElkeCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG5cdCAgICBmb3IgKDsgc3RhcnRJZHggPD0gZW5kSWR4OyArK3N0YXJ0SWR4KSB7XG5cdCAgICAgIGNyZWF0ZUVsbSh2bm9kZXNbc3RhcnRJZHhdLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtLCBmYWxzZSwgdm5vZGVzLCBzdGFydElkeCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnZva2VEZXN0cm95SG9vayAodm5vZGUpIHtcblx0ICAgIHZhciBpLCBqO1xuXHQgICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuXHQgICAgaWYgKGlzRGVmKGRhdGEpKSB7XG5cdCAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5kZXN0cm95KSkgeyBpKHZub2RlKTsgfVxuXHQgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmRlc3Ryb3kubGVuZ3RoOyArK2kpIHsgY2JzLmRlc3Ryb3lbaV0odm5vZGUpOyB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmNoaWxkcmVuKSkge1xuXHQgICAgICBmb3IgKGogPSAwOyBqIDwgdm5vZGUuY2hpbGRyZW4ubGVuZ3RoOyArK2opIHtcblx0ICAgICAgICBpbnZva2VEZXN0cm95SG9vayh2bm9kZS5jaGlsZHJlbltqXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlbW92ZVZub2RlcyAocGFyZW50RWxtLCB2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgpIHtcblx0ICAgIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHtcblx0ICAgICAgdmFyIGNoID0gdm5vZGVzW3N0YXJ0SWR4XTtcblx0ICAgICAgaWYgKGlzRGVmKGNoKSkge1xuXHQgICAgICAgIGlmIChpc0RlZihjaC50YWcpKSB7XG5cdCAgICAgICAgICByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rKGNoKTtcblx0ICAgICAgICAgIGludm9rZURlc3Ryb3lIb29rKGNoKTtcblx0ICAgICAgICB9IGVsc2UgeyAvLyBUZXh0IG5vZGVcblx0ICAgICAgICAgIHJlbW92ZU5vZGUoY2guZWxtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlbW92ZUFuZEludm9rZVJlbW92ZUhvb2sgKHZub2RlLCBybSkge1xuXHQgICAgaWYgKGlzRGVmKHJtKSB8fCBpc0RlZih2bm9kZS5kYXRhKSkge1xuXHQgICAgICB2YXIgaTtcblx0ICAgICAgdmFyIGxpc3RlbmVycyA9IGNicy5yZW1vdmUubGVuZ3RoICsgMTtcblx0ICAgICAgaWYgKGlzRGVmKHJtKSkge1xuXHQgICAgICAgIC8vIHdlIGhhdmUgYSByZWN1cnNpdmVseSBwYXNzZWQgZG93biBybSBjYWxsYmFja1xuXHQgICAgICAgIC8vIGluY3JlYXNlIHRoZSBsaXN0ZW5lcnMgY291bnRcblx0ICAgICAgICBybS5saXN0ZW5lcnMgKz0gbGlzdGVuZXJzO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIGRpcmVjdGx5IHJlbW92aW5nXG5cdCAgICAgICAgcm0gPSBjcmVhdGVSbUNiKHZub2RlLmVsbSwgbGlzdGVuZXJzKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyByZWN1cnNpdmVseSBpbnZva2UgaG9va3Mgb24gY2hpbGQgY29tcG9uZW50IHJvb3Qgbm9kZVxuXHQgICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSAmJiBpc0RlZihpID0gaS5fdm5vZGUpICYmIGlzRGVmKGkuZGF0YSkpIHtcblx0ICAgICAgICByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rKGksIHJtKTtcblx0ICAgICAgfVxuXHQgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLnJlbW92ZS5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgIGNicy5yZW1vdmVbaV0odm5vZGUsIHJtKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkucmVtb3ZlKSkge1xuXHQgICAgICAgIGkodm5vZGUsIHJtKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBybSgpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZW1vdmVOb2RlKHZub2RlLmVsbSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB1cGRhdGVDaGlsZHJlbiAocGFyZW50RWxtLCBvbGRDaCwgbmV3Q2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSkge1xuXHQgICAgdmFyIG9sZFN0YXJ0SWR4ID0gMDtcblx0ICAgIHZhciBuZXdTdGFydElkeCA9IDA7XG5cdCAgICB2YXIgb2xkRW5kSWR4ID0gb2xkQ2gubGVuZ3RoIC0gMTtcblx0ICAgIHZhciBvbGRTdGFydFZub2RlID0gb2xkQ2hbMF07XG5cdCAgICB2YXIgb2xkRW5kVm5vZGUgPSBvbGRDaFtvbGRFbmRJZHhdO1xuXHQgICAgdmFyIG5ld0VuZElkeCA9IG5ld0NoLmxlbmd0aCAtIDE7XG5cdCAgICB2YXIgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWzBdO1xuXHQgICAgdmFyIG5ld0VuZFZub2RlID0gbmV3Q2hbbmV3RW5kSWR4XTtcblx0ICAgIHZhciBvbGRLZXlUb0lkeCwgaWR4SW5PbGQsIHZub2RlVG9Nb3ZlLCByZWZFbG07XG5cdFxuXHQgICAgLy8gcmVtb3ZlT25seSBpcyBhIHNwZWNpYWwgZmxhZyB1c2VkIG9ubHkgYnkgPHRyYW5zaXRpb24tZ3JvdXA+XG5cdCAgICAvLyB0byBlbnN1cmUgcmVtb3ZlZCBlbGVtZW50cyBzdGF5IGluIGNvcnJlY3QgcmVsYXRpdmUgcG9zaXRpb25zXG5cdCAgICAvLyBkdXJpbmcgbGVhdmluZyB0cmFuc2l0aW9uc1xuXHQgICAgdmFyIGNhbk1vdmUgPSAhcmVtb3ZlT25seTtcblx0XG5cdCAgICB7XG5cdCAgICAgIGNoZWNrRHVwbGljYXRlS2V5cyhuZXdDaCk7XG5cdCAgICB9XG5cdFxuXHQgICAgd2hpbGUgKG9sZFN0YXJ0SWR4IDw9IG9sZEVuZElkeCAmJiBuZXdTdGFydElkeCA8PSBuZXdFbmRJZHgpIHtcblx0ICAgICAgaWYgKGlzVW5kZWYob2xkU3RhcnRWbm9kZSkpIHtcblx0ICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07IC8vIFZub2RlIGhhcyBiZWVuIG1vdmVkIGxlZnRcblx0ICAgICAgfSBlbHNlIGlmIChpc1VuZGVmKG9sZEVuZFZub2RlKSkge1xuXHQgICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuXHQgICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlKSkge1xuXHQgICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07XG5cdCAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuXHQgICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUpKSB7XG5cdCAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgb2xkRW5kVm5vZGUgPSBvbGRDaFstLW9sZEVuZElkeF07XG5cdCAgICAgICAgbmV3RW5kVm5vZGUgPSBuZXdDaFstLW5ld0VuZElkeF07XG5cdCAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld0VuZFZub2RlKSkgeyAvLyBWbm9kZSBtb3ZlZCByaWdodFxuXHQgICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtLCBub2RlT3BzLm5leHRTaWJsaW5nKG9sZEVuZFZub2RlLmVsbSkpO1xuXHQgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTtcblx0ICAgICAgICBuZXdFbmRWbm9kZSA9IG5ld0NoWy0tbmV3RW5kSWR4XTtcblx0ICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld1N0YXJ0Vm5vZGUpKSB7IC8vIFZub2RlIG1vdmVkIGxlZnRcblx0ICAgICAgICBwYXRjaFZub2RlKG9sZEVuZFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIGNhbk1vdmUgJiYgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCBvbGRFbmRWbm9kZS5lbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtKTtcblx0ICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcblx0ICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKGlzVW5kZWYob2xkS2V5VG9JZHgpKSB7IG9sZEtleVRvSWR4ID0gY3JlYXRlS2V5VG9PbGRJZHgob2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOyB9XG5cdCAgICAgICAgaWR4SW5PbGQgPSBpc0RlZihuZXdTdGFydFZub2RlLmtleSlcblx0ICAgICAgICAgID8gb2xkS2V5VG9JZHhbbmV3U3RhcnRWbm9kZS5rZXldXG5cdCAgICAgICAgICA6IGZpbmRJZHhJbk9sZChuZXdTdGFydFZub2RlLCBvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7XG5cdCAgICAgICAgaWYgKGlzVW5kZWYoaWR4SW5PbGQpKSB7IC8vIE5ldyBlbGVtZW50XG5cdCAgICAgICAgICBjcmVhdGVFbG0obmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtLCBmYWxzZSwgbmV3Q2gsIG5ld1N0YXJ0SWR4KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdm5vZGVUb01vdmUgPSBvbGRDaFtpZHhJbk9sZF07XG5cdCAgICAgICAgICBpZiAoc2FtZVZub2RlKHZub2RlVG9Nb3ZlLCBuZXdTdGFydFZub2RlKSkge1xuXHQgICAgICAgICAgICBwYXRjaFZub2RlKHZub2RlVG9Nb3ZlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgICAgICBvbGRDaFtpZHhJbk9sZF0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICAgIGNhbk1vdmUgJiYgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCB2bm9kZVRvTW92ZS5lbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUga2V5IGJ1dCBkaWZmZXJlbnQgZWxlbWVudC4gdHJlYXQgYXMgbmV3IGVsZW1lbnRcblx0ICAgICAgICAgICAgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgZmFsc2UsIG5ld0NoLCBuZXdTdGFydElkeCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKG9sZFN0YXJ0SWR4ID4gb2xkRW5kSWR4KSB7XG5cdCAgICAgIHJlZkVsbSA9IGlzVW5kZWYobmV3Q2hbbmV3RW5kSWR4ICsgMV0pID8gbnVsbCA6IG5ld0NoW25ld0VuZElkeCArIDFdLmVsbTtcblx0ICAgICAgYWRkVm5vZGVzKHBhcmVudEVsbSwgcmVmRWxtLCBuZXdDaCwgbmV3U3RhcnRJZHgsIG5ld0VuZElkeCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgIH0gZWxzZSBpZiAobmV3U3RhcnRJZHggPiBuZXdFbmRJZHgpIHtcblx0ICAgICAgcmVtb3ZlVm5vZGVzKHBhcmVudEVsbSwgb2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY2hlY2tEdXBsaWNhdGVLZXlzIChjaGlsZHJlbikge1xuXHQgICAgdmFyIHNlZW5LZXlzID0ge307XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciB2bm9kZSA9IGNoaWxkcmVuW2ldO1xuXHQgICAgICB2YXIga2V5ID0gdm5vZGUua2V5O1xuXHQgICAgICBpZiAoaXNEZWYoa2V5KSkge1xuXHQgICAgICAgIGlmIChzZWVuS2V5c1trZXldKSB7XG5cdCAgICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgICAoXCJEdXBsaWNhdGUga2V5cyBkZXRlY3RlZDogJ1wiICsga2V5ICsgXCInLiBUaGlzIG1heSBjYXVzZSBhbiB1cGRhdGUgZXJyb3IuXCIpLFxuXHQgICAgICAgICAgICB2bm9kZS5jb250ZXh0XG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzZWVuS2V5c1trZXldID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZpbmRJZHhJbk9sZCAobm9kZSwgb2xkQ2gsIHN0YXJ0LCBlbmQpIHtcblx0ICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICAgIHZhciBjID0gb2xkQ2hbaV07XG5cdCAgICAgIGlmIChpc0RlZihjKSAmJiBzYW1lVm5vZGUobm9kZSwgYykpIHsgcmV0dXJuIGkgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcGF0Y2hWbm9kZSAob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpIHtcblx0ICAgIGlmIChvbGRWbm9kZSA9PT0gdm5vZGUpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGVsbSA9IHZub2RlLmVsbSA9IG9sZFZub2RlLmVsbTtcblx0XG5cdCAgICBpZiAoaXNUcnVlKG9sZFZub2RlLmlzQXN5bmNQbGFjZWhvbGRlcikpIHtcblx0ICAgICAgaWYgKGlzRGVmKHZub2RlLmFzeW5jRmFjdG9yeS5yZXNvbHZlZCkpIHtcblx0ICAgICAgICBoeWRyYXRlKG9sZFZub2RlLmVsbSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdm5vZGUuaXNBc3luY1BsYWNlaG9sZGVyID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICAvLyByZXVzZSBlbGVtZW50IGZvciBzdGF0aWMgdHJlZXMuXG5cdCAgICAvLyBub3RlIHdlIG9ubHkgZG8gdGhpcyBpZiB0aGUgdm5vZGUgaXMgY2xvbmVkIC1cblx0ICAgIC8vIGlmIHRoZSBuZXcgbm9kZSBpcyBub3QgY2xvbmVkIGl0IG1lYW5zIHRoZSByZW5kZXIgZnVuY3Rpb25zIGhhdmUgYmVlblxuXHQgICAgLy8gcmVzZXQgYnkgdGhlIGhvdC1yZWxvYWQtYXBpIGFuZCB3ZSBuZWVkIHRvIGRvIGEgcHJvcGVyIHJlLXJlbmRlci5cblx0ICAgIGlmIChpc1RydWUodm5vZGUuaXNTdGF0aWMpICYmXG5cdCAgICAgIGlzVHJ1ZShvbGRWbm9kZS5pc1N0YXRpYykgJiZcblx0ICAgICAgdm5vZGUua2V5ID09PSBvbGRWbm9kZS5rZXkgJiZcblx0ICAgICAgKGlzVHJ1ZSh2bm9kZS5pc0Nsb25lZCkgfHwgaXNUcnVlKHZub2RlLmlzT25jZSkpXG5cdCAgICApIHtcblx0ICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBvbGRWbm9kZS5jb21wb25lbnRJbnN0YW5jZTtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGk7XG5cdCAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG5cdCAgICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkucHJlcGF0Y2gpKSB7XG5cdCAgICAgIGkob2xkVm5vZGUsIHZub2RlKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgb2xkQ2ggPSBvbGRWbm9kZS5jaGlsZHJlbjtcblx0ICAgIHZhciBjaCA9IHZub2RlLmNoaWxkcmVuO1xuXHQgICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzUGF0Y2hhYmxlKHZub2RlKSkge1xuXHQgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLnVwZGF0ZS5sZW5ndGg7ICsraSkgeyBjYnMudXBkYXRlW2ldKG9sZFZub2RlLCB2bm9kZSk7IH1cblx0ICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnVwZGF0ZSkpIHsgaShvbGRWbm9kZSwgdm5vZGUpOyB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNVbmRlZih2bm9kZS50ZXh0KSkge1xuXHQgICAgICBpZiAoaXNEZWYob2xkQ2gpICYmIGlzRGVmKGNoKSkge1xuXHQgICAgICAgIGlmIChvbGRDaCAhPT0gY2gpIHsgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaCwgY2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSk7IH1cblx0ICAgICAgfSBlbHNlIGlmIChpc0RlZihjaCkpIHtcblx0ICAgICAgICBpZiAoaXNEZWYob2xkVm5vZGUudGV4dCkpIHsgbm9kZU9wcy5zZXRUZXh0Q29udGVudChlbG0sICcnKTsgfVxuXHQgICAgICAgIGFkZFZub2RlcyhlbG0sIG51bGwsIGNoLCAwLCBjaC5sZW5ndGggLSAxLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKGlzRGVmKG9sZENoKSkge1xuXHQgICAgICAgIHJlbW92ZVZub2RlcyhlbG0sIG9sZENoLCAwLCBvbGRDaC5sZW5ndGggLSAxKTtcblx0ICAgICAgfSBlbHNlIGlmIChpc0RlZihvbGRWbm9kZS50ZXh0KSkge1xuXHQgICAgICAgIG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAob2xkVm5vZGUudGV4dCAhPT0gdm5vZGUudGV4dCkge1xuXHQgICAgICBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgdm5vZGUudGV4dCk7XG5cdCAgICB9XG5cdCAgICBpZiAoaXNEZWYoZGF0YSkpIHtcblx0ICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnBvc3RwYXRjaCkpIHsgaShvbGRWbm9kZSwgdm5vZGUpOyB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnZva2VJbnNlcnRIb29rICh2bm9kZSwgcXVldWUsIGluaXRpYWwpIHtcblx0ICAgIC8vIGRlbGF5IGluc2VydCBob29rcyBmb3IgY29tcG9uZW50IHJvb3Qgbm9kZXMsIGludm9rZSB0aGVtIGFmdGVyIHRoZVxuXHQgICAgLy8gZWxlbWVudCBpcyByZWFsbHkgaW5zZXJ0ZWRcblx0ICAgIGlmIChpc1RydWUoaW5pdGlhbCkgJiYgaXNEZWYodm5vZGUucGFyZW50KSkge1xuXHQgICAgICB2bm9kZS5wYXJlbnQuZGF0YS5wZW5kaW5nSW5zZXJ0ID0gcXVldWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgKytpKSB7XG5cdCAgICAgICAgcXVldWVbaV0uZGF0YS5ob29rLmluc2VydChxdWV1ZVtpXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBoeWRyYXRpb25CYWlsZWQgPSBmYWxzZTtcblx0ICAvLyBsaXN0IG9mIG1vZHVsZXMgdGhhdCBjYW4gc2tpcCBjcmVhdGUgaG9vayBkdXJpbmcgaHlkcmF0aW9uIGJlY2F1c2UgdGhleVxuXHQgIC8vIGFyZSBhbHJlYWR5IHJlbmRlcmVkIG9uIHRoZSBjbGllbnQgb3IgaGFzIG5vIG5lZWQgZm9yIGluaXRpYWxpemF0aW9uXG5cdCAgLy8gTm90ZTogc3R5bGUgaXMgZXhjbHVkZWQgYmVjYXVzZSBpdCByZWxpZXMgb24gaW5pdGlhbCBjbG9uZSBmb3IgZnV0dXJlXG5cdCAgLy8gZGVlcCB1cGRhdGVzICgjNzA2MykuXG5cdCAgdmFyIGlzUmVuZGVyZWRNb2R1bGUgPSBtYWtlTWFwKCdhdHRycyxjbGFzcyxzdGF0aWNDbGFzcyxzdGF0aWNTdHlsZSxrZXknKTtcblx0XG5cdCAgLy8gTm90ZTogdGhpcyBpcyBhIGJyb3dzZXItb25seSBmdW5jdGlvbiBzbyB3ZSBjYW4gYXNzdW1lIGVsbXMgYXJlIERPTSBub2Rlcy5cblx0ICBmdW5jdGlvbiBoeWRyYXRlIChlbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGluVlByZSkge1xuXHQgICAgdmFyIGk7XG5cdCAgICB2YXIgdGFnID0gdm5vZGUudGFnO1xuXHQgICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuXHQgICAgdmFyIGNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG5cdCAgICBpblZQcmUgPSBpblZQcmUgfHwgKGRhdGEgJiYgZGF0YS5wcmUpO1xuXHQgICAgdm5vZGUuZWxtID0gZWxtO1xuXHRcblx0ICAgIGlmIChpc1RydWUodm5vZGUuaXNDb21tZW50KSAmJiBpc0RlZih2bm9kZS5hc3luY0ZhY3RvcnkpKSB7XG5cdCAgICAgIHZub2RlLmlzQXN5bmNQbGFjZWhvbGRlciA9IHRydWU7XG5cdCAgICAgIHJldHVybiB0cnVlXG5cdCAgICB9XG5cdCAgICAvLyBhc3NlcnQgbm9kZSBtYXRjaFxuXHQgICAge1xuXHQgICAgICBpZiAoIWFzc2VydE5vZGVNYXRjaChlbG0sIHZub2RlLCBpblZQcmUpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChpc0RlZihkYXRhKSkge1xuXHQgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHsgaSh2bm9kZSwgdHJ1ZSAvKiBoeWRyYXRpbmcgKi8pOyB9XG5cdCAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UpKSB7XG5cdCAgICAgICAgLy8gY2hpbGQgY29tcG9uZW50LiBpdCBzaG91bGQgaGF2ZSBoeWRyYXRlZCBpdHMgb3duIHRyZWUuXG5cdCAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNEZWYodGFnKSkge1xuXHQgICAgICBpZiAoaXNEZWYoY2hpbGRyZW4pKSB7XG5cdCAgICAgICAgLy8gZW1wdHkgZWxlbWVudCwgYWxsb3cgY2xpZW50IHRvIHBpY2sgdXAgYW5kIHBvcHVsYXRlIGNoaWxkcmVuXG5cdCAgICAgICAgaWYgKCFlbG0uaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICAgICAgICBjcmVhdGVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4sIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIHYtaHRtbCBhbmQgZG9tUHJvcHM6IGlubmVySFRNTFxuXHQgICAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhKSAmJiBpc0RlZihpID0gaS5kb21Qcm9wcykgJiYgaXNEZWYoaSA9IGkuaW5uZXJIVE1MKSkge1xuXHQgICAgICAgICAgICBpZiAoaSAhPT0gZWxtLmlubmVySFRNTCkge1xuXHQgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgICAgICAgICAgICAhaHlkcmF0aW9uQmFpbGVkXG5cdCAgICAgICAgICAgICAgKSB7XG5cdCAgICAgICAgICAgICAgICBoeWRyYXRpb25CYWlsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQYXJlbnQ6ICcsIGVsbSk7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3NlcnZlciBpbm5lckhUTUw6ICcsIGkpO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdjbGllbnQgaW5uZXJIVE1MOiAnLCBlbG0uaW5uZXJIVE1MKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIC8vIGl0ZXJhdGUgYW5kIGNvbXBhcmUgY2hpbGRyZW4gbGlzdHNcblx0ICAgICAgICAgICAgdmFyIGNoaWxkcmVuTWF0Y2ggPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgY2hpbGROb2RlID0gZWxtLmZpcnN0Q2hpbGQ7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNoaWxkcmVuLmxlbmd0aDsgaSQxKyspIHtcblx0ICAgICAgICAgICAgICBpZiAoIWNoaWxkTm9kZSB8fCAhaHlkcmF0ZShjaGlsZE5vZGUsIGNoaWxkcmVuW2kkMV0sIGluc2VydGVkVm5vZGVRdWV1ZSwgaW5WUHJlKSkge1xuXHQgICAgICAgICAgICAgICAgY2hpbGRyZW5NYXRjaCA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgYnJlYWtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLm5leHRTaWJsaW5nO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vIGlmIGNoaWxkTm9kZSBpcyBub3QgbnVsbCwgaXQgbWVhbnMgdGhlIGFjdHVhbCBjaGlsZE5vZGVzIGxpc3QgaXNcblx0ICAgICAgICAgICAgLy8gbG9uZ2VyIHRoYW4gdGhlIHZpcnR1YWwgY2hpbGRyZW4gbGlzdC5cblx0ICAgICAgICAgICAgaWYgKCFjaGlsZHJlbk1hdGNoIHx8IGNoaWxkTm9kZSkge1xuXHQgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgICAgICAgICAgICAhaHlkcmF0aW9uQmFpbGVkXG5cdCAgICAgICAgICAgICAgKSB7XG5cdCAgICAgICAgICAgICAgICBoeWRyYXRpb25CYWlsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQYXJlbnQ6ICcsIGVsbSk7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01pc21hdGNoaW5nIGNoaWxkTm9kZXMgdnMuIFZOb2RlczogJywgZWxtLmNoaWxkTm9kZXMsIGNoaWxkcmVuKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7XG5cdCAgICAgICAgdmFyIGZ1bGxJbnZva2UgPSBmYWxzZTtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuXHQgICAgICAgICAgaWYgKCFpc1JlbmRlcmVkTW9kdWxlKGtleSkpIHtcblx0ICAgICAgICAgICAgZnVsbEludm9rZSA9IHRydWU7XG5cdCAgICAgICAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgICAgICBicmVha1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWZ1bGxJbnZva2UgJiYgZGF0YVsnY2xhc3MnXSkge1xuXHQgICAgICAgICAgLy8gZW5zdXJlIGNvbGxlY3RpbmcgZGVwcyBmb3IgZGVlcCBjbGFzcyBiaW5kaW5ncyBmb3IgZnV0dXJlIHVwZGF0ZXNcblx0ICAgICAgICAgIHRyYXZlcnNlKGRhdGFbJ2NsYXNzJ10pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChlbG0uZGF0YSAhPT0gdm5vZGUudGV4dCkge1xuXHQgICAgICBlbG0uZGF0YSA9IHZub2RlLnRleHQ7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdHJ1ZVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0Tm9kZU1hdGNoIChub2RlLCB2bm9kZSwgaW5WUHJlKSB7XG5cdCAgICBpZiAoaXNEZWYodm5vZGUudGFnKSkge1xuXHQgICAgICByZXR1cm4gdm5vZGUudGFnLmluZGV4T2YoJ3Z1ZS1jb21wb25lbnQnKSA9PT0gMCB8fCAoXG5cdCAgICAgICAgIWlzVW5rbm93bkVsZW1lbnQkJDEodm5vZGUsIGluVlByZSkgJiZcblx0ICAgICAgICB2bm9kZS50YWcudG9Mb3dlckNhc2UoKSA9PT0gKG5vZGUudGFnTmFtZSAmJiBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSlcblx0ICAgICAgKVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09ICh2bm9kZS5pc0NvbW1lbnQgPyA4IDogMylcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiBwYXRjaCAob2xkVm5vZGUsIHZub2RlLCBoeWRyYXRpbmcsIHJlbW92ZU9ubHksIHBhcmVudEVsbSwgcmVmRWxtKSB7XG5cdCAgICBpZiAoaXNVbmRlZih2bm9kZSkpIHtcblx0ICAgICAgaWYgKGlzRGVmKG9sZFZub2RlKSkgeyBpbnZva2VEZXN0cm95SG9vayhvbGRWbm9kZSk7IH1cblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGlzSW5pdGlhbFBhdGNoID0gZmFsc2U7XG5cdCAgICB2YXIgaW5zZXJ0ZWRWbm9kZVF1ZXVlID0gW107XG5cdFxuXHQgICAgaWYgKGlzVW5kZWYob2xkVm5vZGUpKSB7XG5cdCAgICAgIC8vIGVtcHR5IG1vdW50IChsaWtlbHkgYXMgY29tcG9uZW50KSwgY3JlYXRlIG5ldyByb290IGVsZW1lbnRcblx0ICAgICAgaXNJbml0aWFsUGF0Y2ggPSB0cnVlO1xuXHQgICAgICBjcmVhdGVFbG0odm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGlzUmVhbEVsZW1lbnQgPSBpc0RlZihvbGRWbm9kZS5ub2RlVHlwZSk7XG5cdCAgICAgIGlmICghaXNSZWFsRWxlbWVudCAmJiBzYW1lVm5vZGUob2xkVm5vZGUsIHZub2RlKSkge1xuXHQgICAgICAgIC8vIHBhdGNoIGV4aXN0aW5nIHJvb3Qgbm9kZVxuXHQgICAgICAgIHBhdGNoVm5vZGUob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChpc1JlYWxFbGVtZW50KSB7XG5cdCAgICAgICAgICAvLyBtb3VudGluZyB0byBhIHJlYWwgZWxlbWVudFxuXHQgICAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBzZXJ2ZXItcmVuZGVyZWQgY29udGVudCBhbmQgaWYgd2UgY2FuIHBlcmZvcm1cblx0ICAgICAgICAgIC8vIGEgc3VjY2Vzc2Z1bCBoeWRyYXRpb24uXG5cdCAgICAgICAgICBpZiAob2xkVm5vZGUubm9kZVR5cGUgPT09IDEgJiYgb2xkVm5vZGUuaGFzQXR0cmlidXRlKFNTUl9BVFRSKSkge1xuXHQgICAgICAgICAgICBvbGRWbm9kZS5yZW1vdmVBdHRyaWJ1dGUoU1NSX0FUVFIpO1xuXHQgICAgICAgICAgICBoeWRyYXRpbmcgPSB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKGlzVHJ1ZShoeWRyYXRpbmcpKSB7XG5cdCAgICAgICAgICAgIGlmIChoeWRyYXRlKG9sZFZub2RlLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSkge1xuXHQgICAgICAgICAgICAgIGludm9rZUluc2VydEhvb2sodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgdHJ1ZSk7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIG9sZFZub2RlXG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgd2Fybihcblx0ICAgICAgICAgICAgICAgICdUaGUgY2xpZW50LXNpZGUgcmVuZGVyZWQgdmlydHVhbCBET00gdHJlZSBpcyBub3QgbWF0Y2hpbmcgJyArXG5cdCAgICAgICAgICAgICAgICAnc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQuIFRoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBpbmNvcnJlY3QgJyArXG5cdCAgICAgICAgICAgICAgICAnSFRNTCBtYXJrdXAsIGZvciBleGFtcGxlIG5lc3RpbmcgYmxvY2stbGV2ZWwgZWxlbWVudHMgaW5zaWRlICcgK1xuXHQgICAgICAgICAgICAgICAgJzxwPiwgb3IgbWlzc2luZyA8dGJvZHk+LiBCYWlsaW5nIGh5ZHJhdGlvbiBhbmQgcGVyZm9ybWluZyAnICtcblx0ICAgICAgICAgICAgICAgICdmdWxsIGNsaWVudC1zaWRlIHJlbmRlci4nXG5cdCAgICAgICAgICAgICAgKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gZWl0aGVyIG5vdCBzZXJ2ZXItcmVuZGVyZWQsIG9yIGh5ZHJhdGlvbiBmYWlsZWQuXG5cdCAgICAgICAgICAvLyBjcmVhdGUgYW4gZW1wdHkgbm9kZSBhbmQgcmVwbGFjZSBpdFxuXHQgICAgICAgICAgb2xkVm5vZGUgPSBlbXB0eU5vZGVBdChvbGRWbm9kZSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyByZXBsYWNpbmcgZXhpc3RpbmcgZWxlbWVudFxuXHQgICAgICAgIHZhciBvbGRFbG0gPSBvbGRWbm9kZS5lbG07XG5cdCAgICAgICAgdmFyIHBhcmVudEVsbSQxID0gbm9kZU9wcy5wYXJlbnROb2RlKG9sZEVsbSk7XG5cdFxuXHQgICAgICAgIC8vIGNyZWF0ZSBuZXcgbm9kZVxuXHQgICAgICAgIGNyZWF0ZUVsbShcblx0ICAgICAgICAgIHZub2RlLFxuXHQgICAgICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLFxuXHQgICAgICAgICAgLy8gZXh0cmVtZWx5IHJhcmUgZWRnZSBjYXNlOiBkbyBub3QgaW5zZXJ0IGlmIG9sZCBlbGVtZW50IGlzIGluIGFcblx0ICAgICAgICAgIC8vIGxlYXZpbmcgdHJhbnNpdGlvbi4gT25seSBoYXBwZW5zIHdoZW4gY29tYmluaW5nIHRyYW5zaXRpb24gK1xuXHQgICAgICAgICAgLy8ga2VlcC1hbGl2ZSArIEhPQ3MuICgjNDU5MClcblx0ICAgICAgICAgIG9sZEVsbS5fbGVhdmVDYiA/IG51bGwgOiBwYXJlbnRFbG0kMSxcblx0ICAgICAgICAgIG5vZGVPcHMubmV4dFNpYmxpbmcob2xkRWxtKVxuXHQgICAgICAgICk7XG5cdFxuXHQgICAgICAgIC8vIHVwZGF0ZSBwYXJlbnQgcGxhY2Vob2xkZXIgbm9kZSBlbGVtZW50LCByZWN1cnNpdmVseVxuXHQgICAgICAgIGlmIChpc0RlZih2bm9kZS5wYXJlbnQpKSB7XG5cdCAgICAgICAgICB2YXIgYW5jZXN0b3IgPSB2bm9kZS5wYXJlbnQ7XG5cdCAgICAgICAgICB2YXIgcGF0Y2hhYmxlID0gaXNQYXRjaGFibGUodm5vZGUpO1xuXHQgICAgICAgICAgd2hpbGUgKGFuY2VzdG9yKSB7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2JzLmRlc3Ryb3kubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgICAgICAgICBjYnMuZGVzdHJveVtpXShhbmNlc3Rvcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgYW5jZXN0b3IuZWxtID0gdm5vZGUuZWxtO1xuXHQgICAgICAgICAgICBpZiAocGF0Y2hhYmxlKSB7XG5cdCAgICAgICAgICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgY2JzLmNyZWF0ZS5sZW5ndGg7ICsraSQxKSB7XG5cdCAgICAgICAgICAgICAgICBjYnMuY3JlYXRlW2kkMV0oZW1wdHlOb2RlLCBhbmNlc3Rvcik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIC8vICM2NTEzXG5cdCAgICAgICAgICAgICAgLy8gaW52b2tlIGluc2VydCBob29rcyB0aGF0IG1heSBoYXZlIGJlZW4gbWVyZ2VkIGJ5IGNyZWF0ZSBob29rcy5cblx0ICAgICAgICAgICAgICAvLyBlLmcuIGZvciBkaXJlY3RpdmVzIHRoYXQgdXNlcyB0aGUgXCJpbnNlcnRlZFwiIGhvb2suXG5cdCAgICAgICAgICAgICAgdmFyIGluc2VydCA9IGFuY2VzdG9yLmRhdGEuaG9vay5pbnNlcnQ7XG5cdCAgICAgICAgICAgICAgaWYgKGluc2VydC5tZXJnZWQpIHtcblx0ICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGF0IGluZGV4IDEgdG8gYXZvaWQgcmUtaW52b2tpbmcgY29tcG9uZW50IG1vdW50ZWQgaG9va1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaSQyID0gMTsgaSQyIDwgaW5zZXJ0LmZucy5sZW5ndGg7IGkkMisrKSB7XG5cdCAgICAgICAgICAgICAgICAgIGluc2VydC5mbnNbaSQyXSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICByZWdpc3RlclJlZihhbmNlc3Rvcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBkZXN0cm95IG9sZCBub2RlXG5cdCAgICAgICAgaWYgKGlzRGVmKHBhcmVudEVsbSQxKSkge1xuXHQgICAgICAgICAgcmVtb3ZlVm5vZGVzKHBhcmVudEVsbSQxLCBbb2xkVm5vZGVdLCAwLCAwKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzRGVmKG9sZFZub2RlLnRhZykpIHtcblx0ICAgICAgICAgIGludm9rZURlc3Ryb3lIb29rKG9sZFZub2RlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpbnZva2VJbnNlcnRIb29rKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGlzSW5pdGlhbFBhdGNoKTtcblx0ICAgIHJldHVybiB2bm9kZS5lbG1cblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGRpcmVjdGl2ZXMgPSB7XG5cdCAgY3JlYXRlOiB1cGRhdGVEaXJlY3RpdmVzLFxuXHQgIHVwZGF0ZTogdXBkYXRlRGlyZWN0aXZlcyxcblx0ICBkZXN0cm95OiBmdW5jdGlvbiB1bmJpbmREaXJlY3RpdmVzICh2bm9kZSkge1xuXHQgICAgdXBkYXRlRGlyZWN0aXZlcyh2bm9kZSwgZW1wdHlOb2RlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZURpcmVjdGl2ZXMgKG9sZFZub2RlLCB2bm9kZSkge1xuXHQgIGlmIChvbGRWbm9kZS5kYXRhLmRpcmVjdGl2ZXMgfHwgdm5vZGUuZGF0YS5kaXJlY3RpdmVzKSB7XG5cdCAgICBfdXBkYXRlKG9sZFZub2RlLCB2bm9kZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICB2YXIgaXNDcmVhdGUgPSBvbGRWbm9kZSA9PT0gZW1wdHlOb2RlO1xuXHQgIHZhciBpc0Rlc3Ryb3kgPSB2bm9kZSA9PT0gZW1wdHlOb2RlO1xuXHQgIHZhciBvbGREaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKG9sZFZub2RlLmRhdGEuZGlyZWN0aXZlcywgb2xkVm5vZGUuY29udGV4dCk7XG5cdCAgdmFyIG5ld0RpcnMgPSBub3JtYWxpemVEaXJlY3RpdmVzJDEodm5vZGUuZGF0YS5kaXJlY3RpdmVzLCB2bm9kZS5jb250ZXh0KTtcblx0XG5cdCAgdmFyIGRpcnNXaXRoSW5zZXJ0ID0gW107XG5cdCAgdmFyIGRpcnNXaXRoUG9zdHBhdGNoID0gW107XG5cdFxuXHQgIHZhciBrZXksIG9sZERpciwgZGlyO1xuXHQgIGZvciAoa2V5IGluIG5ld0RpcnMpIHtcblx0ICAgIG9sZERpciA9IG9sZERpcnNba2V5XTtcblx0ICAgIGRpciA9IG5ld0RpcnNba2V5XTtcblx0ICAgIGlmICghb2xkRGlyKSB7XG5cdCAgICAgIC8vIG5ldyBkaXJlY3RpdmUsIGJpbmRcblx0ICAgICAgY2FsbEhvb2skMShkaXIsICdiaW5kJywgdm5vZGUsIG9sZFZub2RlKTtcblx0ICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5pbnNlcnRlZCkge1xuXHQgICAgICAgIGRpcnNXaXRoSW5zZXJ0LnB1c2goZGlyKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gZXhpc3RpbmcgZGlyZWN0aXZlLCB1cGRhdGVcblx0ICAgICAgZGlyLm9sZFZhbHVlID0gb2xkRGlyLnZhbHVlO1xuXHQgICAgICBjYWxsSG9vayQxKGRpciwgJ3VwZGF0ZScsIHZub2RlLCBvbGRWbm9kZSk7XG5cdCAgICAgIGlmIChkaXIuZGVmICYmIGRpci5kZWYuY29tcG9uZW50VXBkYXRlZCkge1xuXHQgICAgICAgIGRpcnNXaXRoUG9zdHBhdGNoLnB1c2goZGlyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aCkge1xuXHQgICAgdmFyIGNhbGxJbnNlcnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlyc1dpdGhJbnNlcnQubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjYWxsSG9vayQxKGRpcnNXaXRoSW5zZXJ0W2ldLCAnaW5zZXJ0ZWQnLCB2bm9kZSwgb2xkVm5vZGUpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgaWYgKGlzQ3JlYXRlKSB7XG5cdCAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAnaW5zZXJ0JywgY2FsbEluc2VydCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjYWxsSW5zZXJ0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoKSB7XG5cdCAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ3Bvc3RwYXRjaCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXJzV2l0aFBvc3RwYXRjaC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGNhbGxIb29rJDEoZGlyc1dpdGhQb3N0cGF0Y2hbaV0sICdjb21wb25lbnRVcGRhdGVkJywgdm5vZGUsIG9sZFZub2RlKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoIWlzQ3JlYXRlKSB7XG5cdCAgICBmb3IgKGtleSBpbiBvbGREaXJzKSB7XG5cdCAgICAgIGlmICghbmV3RGlyc1trZXldKSB7XG5cdCAgICAgICAgLy8gbm8gbG9uZ2VyIHByZXNlbnQsIHVuYmluZFxuXHQgICAgICAgIGNhbGxIb29rJDEob2xkRGlyc1trZXldLCAndW5iaW5kJywgb2xkVm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgZW1wdHlNb2RpZmllcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplRGlyZWN0aXZlcyQxIChcblx0ICBkaXJzLFxuXHQgIHZtXG5cdCkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIGlmICghZGlycykge1xuXHQgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICByZXR1cm4gcmVzXG5cdCAgfVxuXHQgIHZhciBpLCBkaXI7XG5cdCAgZm9yIChpID0gMDsgaSA8IGRpcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgIGRpciA9IGRpcnNbaV07XG5cdCAgICBpZiAoIWRpci5tb2RpZmllcnMpIHtcblx0ICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICAgIGRpci5tb2RpZmllcnMgPSBlbXB0eU1vZGlmaWVycztcblx0ICAgIH1cblx0ICAgIHJlc1tnZXRSYXdEaXJOYW1lKGRpcildID0gZGlyO1xuXHQgICAgZGlyLmRlZiA9IHJlc29sdmVBc3NldCh2bS4kb3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXIubmFtZSwgdHJ1ZSk7XG5cdCAgfVxuXHQgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0UmF3RGlyTmFtZSAoZGlyKSB7XG5cdCAgcmV0dXJuIGRpci5yYXdOYW1lIHx8ICgoZGlyLm5hbWUpICsgXCIuXCIgKyAoT2JqZWN0LmtleXMoZGlyLm1vZGlmaWVycyB8fCB7fSkuam9pbignLicpKSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsbEhvb2skMSAoZGlyLCBob29rLCB2bm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSkge1xuXHQgIHZhciBmbiA9IGRpci5kZWYgJiYgZGlyLmRlZltob29rXTtcblx0ICBpZiAoZm4pIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGZuKHZub2RlLmVsbSwgZGlyLCB2bm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIGhhbmRsZUVycm9yKGUsIHZub2RlLmNvbnRleHQsIChcImRpcmVjdGl2ZSBcIiArIChkaXIubmFtZSkgKyBcIiBcIiArIGhvb2sgKyBcIiBob29rXCIpKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBiYXNlTW9kdWxlcyA9IFtcblx0ICByZWYsXG5cdCAgZGlyZWN0aXZlc1xuXHRdXG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUF0dHJzIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICB2YXIgb3B0cyA9IHZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG5cdCAgaWYgKGlzRGVmKG9wdHMpICYmIG9wdHMuQ3Rvci5vcHRpb25zLmluaGVyaXRBdHRycyA9PT0gZmFsc2UpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmF0dHJzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuYXR0cnMpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIGtleSwgY3VyLCBvbGQ7XG5cdCAgdmFyIGVsbSA9IHZub2RlLmVsbTtcblx0ICB2YXIgb2xkQXR0cnMgPSBvbGRWbm9kZS5kYXRhLmF0dHJzIHx8IHt9O1xuXHQgIHZhciBhdHRycyA9IHZub2RlLmRhdGEuYXR0cnMgfHwge307XG5cdCAgLy8gY2xvbmUgb2JzZXJ2ZWQgb2JqZWN0cywgYXMgdGhlIHVzZXIgcHJvYmFibHkgd2FudHMgdG8gbXV0YXRlIGl0XG5cdCAgaWYgKGlzRGVmKGF0dHJzLl9fb2JfXykpIHtcblx0ICAgIGF0dHJzID0gdm5vZGUuZGF0YS5hdHRycyA9IGV4dGVuZCh7fSwgYXR0cnMpO1xuXHQgIH1cblx0XG5cdCAgZm9yIChrZXkgaW4gYXR0cnMpIHtcblx0ICAgIGN1ciA9IGF0dHJzW2tleV07XG5cdCAgICBvbGQgPSBvbGRBdHRyc1trZXldO1xuXHQgICAgaWYgKG9sZCAhPT0gY3VyKSB7XG5cdCAgICAgIHNldEF0dHIoZWxtLCBrZXksIGN1cik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vICM0MzkxOiBpbiBJRTksIHNldHRpbmcgdHlwZSBjYW4gcmVzZXQgdmFsdWUgZm9yIGlucHV0W3R5cGU9cmFkaW9dXG5cdCAgLy8gIzY2NjY6IElFL0VkZ2UgZm9yY2VzIHByb2dyZXNzIHZhbHVlIGRvd24gdG8gMSBiZWZvcmUgc2V0dGluZyBhIG1heFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICgoaXNJRSB8fCBpc0VkZ2UpICYmIGF0dHJzLnZhbHVlICE9PSBvbGRBdHRycy52YWx1ZSkge1xuXHQgICAgc2V0QXR0cihlbG0sICd2YWx1ZScsIGF0dHJzLnZhbHVlKTtcblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gb2xkQXR0cnMpIHtcblx0ICAgIGlmIChpc1VuZGVmKGF0dHJzW2tleV0pKSB7XG5cdCAgICAgIGlmIChpc1hsaW5rKGtleSkpIHtcblx0ICAgICAgICBlbG0ucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywgZ2V0WGxpbmtQcm9wKGtleSkpO1xuXHQgICAgICB9IGVsc2UgaWYgKCFpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHtcblx0ICAgICAgICBlbG0ucmVtb3ZlQXR0cmlidXRlKGtleSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldEF0dHIgKGVsLCBrZXksIHZhbHVlKSB7XG5cdCAgaWYgKGVsLnRhZ05hbWUuaW5kZXhPZignLScpID4gLTEpIHtcblx0ICAgIGJhc2VTZXRBdHRyKGVsLCBrZXksIHZhbHVlKTtcblx0ICB9IGVsc2UgaWYgKGlzQm9vbGVhbkF0dHIoa2V5KSkge1xuXHQgICAgLy8gc2V0IGF0dHJpYnV0ZSBmb3IgYmxhbmsgdmFsdWVcblx0ICAgIC8vIGUuZy4gPG9wdGlvbiBkaXNhYmxlZD5TZWxlY3Qgb25lPC9vcHRpb24+XG5cdCAgICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyB0ZWNobmljYWxseSBhbGxvd2Z1bGxzY3JlZW4gaXMgYSBib29sZWFuIGF0dHJpYnV0ZSBmb3IgPGlmcmFtZT4sXG5cdCAgICAgIC8vIGJ1dCBGbGFzaCBleHBlY3RzIGEgdmFsdWUgb2YgXCJ0cnVlXCIgd2hlbiB1c2VkIG9uIDxlbWJlZD4gdGFnXG5cdCAgICAgIHZhbHVlID0ga2V5ID09PSAnYWxsb3dmdWxsc2NyZWVuJyAmJiBlbC50YWdOYW1lID09PSAnRU1CRUQnXG5cdCAgICAgICAgPyAndHJ1ZSdcblx0ICAgICAgICA6IGtleTtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNFbnVtZXJhdGVkQXR0cihrZXkpKSB7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJyA/ICdmYWxzZScgOiAndHJ1ZScpO1xuXHQgIH0gZWxzZSBpZiAoaXNYbGluayhrZXkpKSB7XG5cdCAgICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywgZ2V0WGxpbmtQcm9wKGtleSkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywga2V5LCB2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGJhc2VTZXRBdHRyKGVsLCBrZXksIHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2VTZXRBdHRyIChlbCwga2V5LCB2YWx1ZSkge1xuXHQgIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkge1xuXHQgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vICM3MTM4OiBJRTEwICYgMTEgZmlyZXMgaW5wdXQgZXZlbnQgd2hlbiBzZXR0aW5nIHBsYWNlaG9sZGVyIG9uXG5cdCAgICAvLyA8dGV4dGFyZWE+Li4uIGJsb2NrIHRoZSBmaXJzdCBpbnB1dCBldmVudCBhbmQgcmVtb3ZlIHRoZSBibG9ja2VyXG5cdCAgICAvLyBpbW1lZGlhdGVseS5cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKFxuXHQgICAgICBpc0lFICYmICFpc0lFOSAmJlxuXHQgICAgICBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmXG5cdCAgICAgIGtleSA9PT0gJ3BsYWNlaG9sZGVyJyAmJiAhZWwuX19pZXBoXG5cdCAgICApIHtcblx0ICAgICAgdmFyIGJsb2NrZXIgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdCAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBibG9ja2VyKTtcblx0ICAgICAgfTtcblx0ICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBibG9ja2VyKTtcblx0ICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICAgIGVsLl9faWVwaCA9IHRydWU7IC8qIElFIHBsYWNlaG9sZGVyIHBhdGNoZWQgKi9cblx0ICAgIH1cblx0ICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBhdHRycyA9IHtcblx0ICBjcmVhdGU6IHVwZGF0ZUF0dHJzLFxuXHQgIHVwZGF0ZTogdXBkYXRlQXR0cnNcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVDbGFzcyAob2xkVm5vZGUsIHZub2RlKSB7XG5cdCAgdmFyIGVsID0gdm5vZGUuZWxtO1xuXHQgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcblx0ICB2YXIgb2xkRGF0YSA9IG9sZFZub2RlLmRhdGE7XG5cdCAgaWYgKFxuXHQgICAgaXNVbmRlZihkYXRhLnN0YXRpY0NsYXNzKSAmJlxuXHQgICAgaXNVbmRlZihkYXRhLmNsYXNzKSAmJiAoXG5cdCAgICAgIGlzVW5kZWYob2xkRGF0YSkgfHwgKFxuXHQgICAgICAgIGlzVW5kZWYob2xkRGF0YS5zdGF0aWNDbGFzcykgJiZcblx0ICAgICAgICBpc1VuZGVmKG9sZERhdGEuY2xhc3MpXG5cdCAgICAgIClcblx0ICAgIClcblx0ICApIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIGNscyA9IGdlbkNsYXNzRm9yVm5vZGUodm5vZGUpO1xuXHRcblx0ICAvLyBoYW5kbGUgdHJhbnNpdGlvbiBjbGFzc2VzXG5cdCAgdmFyIHRyYW5zaXRpb25DbGFzcyA9IGVsLl90cmFuc2l0aW9uQ2xhc3Nlcztcblx0ICBpZiAoaXNEZWYodHJhbnNpdGlvbkNsYXNzKSkge1xuXHQgICAgY2xzID0gY29uY2F0KGNscywgc3RyaW5naWZ5Q2xhc3ModHJhbnNpdGlvbkNsYXNzKSk7XG5cdCAgfVxuXHRcblx0ICAvLyBzZXQgdGhlIGNsYXNzXG5cdCAgaWYgKGNscyAhPT0gZWwuX3ByZXZDbGFzcykge1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG5cdCAgICBlbC5fcHJldkNsYXNzID0gY2xzO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGtsYXNzID0ge1xuXHQgIGNyZWF0ZTogdXBkYXRlQ2xhc3MsXG5cdCAgdXBkYXRlOiB1cGRhdGVDbGFzc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciB2YWxpZERpdmlzaW9uQ2hhclJFID0gL1tcXHcpLitcXC1fJFxcXV0vO1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VGaWx0ZXJzIChleHApIHtcblx0ICB2YXIgaW5TaW5nbGUgPSBmYWxzZTtcblx0ICB2YXIgaW5Eb3VibGUgPSBmYWxzZTtcblx0ICB2YXIgaW5UZW1wbGF0ZVN0cmluZyA9IGZhbHNlO1xuXHQgIHZhciBpblJlZ2V4ID0gZmFsc2U7XG5cdCAgdmFyIGN1cmx5ID0gMDtcblx0ICB2YXIgc3F1YXJlID0gMDtcblx0ICB2YXIgcGFyZW4gPSAwO1xuXHQgIHZhciBsYXN0RmlsdGVySW5kZXggPSAwO1xuXHQgIHZhciBjLCBwcmV2LCBpLCBleHByZXNzaW9uLCBmaWx0ZXJzO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgZXhwLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBwcmV2ID0gYztcblx0ICAgIGMgPSBleHAuY2hhckNvZGVBdChpKTtcblx0ICAgIGlmIChpblNpbmdsZSkge1xuXHQgICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSB7IGluU2luZ2xlID0gZmFsc2U7IH1cblx0ICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcblx0ICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgeyBpbkRvdWJsZSA9IGZhbHNlOyB9XG5cdCAgICB9IGVsc2UgaWYgKGluVGVtcGxhdGVTdHJpbmcpIHtcblx0ICAgICAgaWYgKGMgPT09IDB4NjAgJiYgcHJldiAhPT0gMHg1QykgeyBpblRlbXBsYXRlU3RyaW5nID0gZmFsc2U7IH1cblx0ICAgIH0gZWxzZSBpZiAoaW5SZWdleCkge1xuXHQgICAgICBpZiAoYyA9PT0gMHgyZiAmJiBwcmV2ICE9PSAweDVDKSB7IGluUmVnZXggPSBmYWxzZTsgfVxuXHQgICAgfSBlbHNlIGlmIChcblx0ICAgICAgYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG5cdCAgICAgIGV4cC5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMHg3QyAmJlxuXHQgICAgICBleHAuY2hhckNvZGVBdChpIC0gMSkgIT09IDB4N0MgJiZcblx0ICAgICAgIWN1cmx5ICYmICFzcXVhcmUgJiYgIXBhcmVuXG5cdCAgICApIHtcblx0ICAgICAgaWYgKGV4cHJlc3Npb24gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb25cblx0ICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0ICAgICAgICBleHByZXNzaW9uID0gZXhwLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwdXNoRmlsdGVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgMHgyMjogaW5Eb3VibGUgPSB0cnVlOyBicmVhayAgICAgICAgIC8vIFwiXG5cdCAgICAgICAgY2FzZSAweDI3OiBpblNpbmdsZSA9IHRydWU7IGJyZWFrICAgICAgICAgLy8gJ1xuXHQgICAgICAgIGNhc2UgMHg2MDogaW5UZW1wbGF0ZVN0cmluZyA9IHRydWU7IGJyZWFrIC8vIGBcblx0ICAgICAgICBjYXNlIDB4Mjg6IHBhcmVuKys7IGJyZWFrICAgICAgICAgICAgICAgICAvLyAoXG5cdCAgICAgICAgY2FzZSAweDI5OiBwYXJlbi0tOyBicmVhayAgICAgICAgICAgICAgICAgLy8gKVxuXHQgICAgICAgIGNhc2UgMHg1Qjogc3F1YXJlKys7IGJyZWFrICAgICAgICAgICAgICAgIC8vIFtcblx0ICAgICAgICBjYXNlIDB4NUQ6IHNxdWFyZS0tOyBicmVhayAgICAgICAgICAgICAgICAvLyBdXG5cdCAgICAgICAgY2FzZSAweDdCOiBjdXJseSsrOyBicmVhayAgICAgICAgICAgICAgICAgLy8ge1xuXHQgICAgICAgIGNhc2UgMHg3RDogY3VybHktLTsgYnJlYWsgICAgICAgICAgICAgICAgIC8vIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoYyA9PT0gMHgyZikgeyAvLyAvXG5cdCAgICAgICAgdmFyIGogPSBpIC0gMTtcblx0ICAgICAgICB2YXIgcCA9ICh2b2lkIDApO1xuXHQgICAgICAgIC8vIGZpbmQgZmlyc3Qgbm9uLXdoaXRlc3BhY2UgcHJldiBjaGFyXG5cdCAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG5cdCAgICAgICAgICBwID0gZXhwLmNoYXJBdChqKTtcblx0ICAgICAgICAgIGlmIChwICE9PSAnICcpIHsgYnJlYWsgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIXAgfHwgIXZhbGlkRGl2aXNpb25DaGFyUkUudGVzdChwKSkge1xuXHQgICAgICAgICAgaW5SZWdleCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoZXhwcmVzc2lvbiA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBleHByZXNzaW9uID0gZXhwLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuXHQgICAgcHVzaEZpbHRlcigpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcHVzaEZpbHRlciAoKSB7XG5cdCAgICAoZmlsdGVycyB8fCAoZmlsdGVycyA9IFtdKSkucHVzaChleHAuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCkpO1xuXHQgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG5cdCAgfVxuXHRcblx0ICBpZiAoZmlsdGVycykge1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGZpbHRlcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgZXhwcmVzc2lvbiA9IHdyYXBGaWx0ZXIoZXhwcmVzc2lvbiwgZmlsdGVyc1tpXSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZXhwcmVzc2lvblxuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cmFwRmlsdGVyIChleHAsIGZpbHRlcikge1xuXHQgIHZhciBpID0gZmlsdGVyLmluZGV4T2YoJygnKTtcblx0ICBpZiAoaSA8IDApIHtcblx0ICAgIC8vIF9mOiByZXNvbHZlRmlsdGVyXG5cdCAgICByZXR1cm4gKFwiX2YoXFxcIlwiICsgZmlsdGVyICsgXCJcXFwiKShcIiArIGV4cCArIFwiKVwiKVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgbmFtZSA9IGZpbHRlci5zbGljZSgwLCBpKTtcblx0ICAgIHZhciBhcmdzID0gZmlsdGVyLnNsaWNlKGkgKyAxKTtcblx0ICAgIHJldHVybiAoXCJfZihcXFwiXCIgKyBuYW1lICsgXCJcXFwiKShcIiArIGV4cCArIChhcmdzICE9PSAnKScgPyAnLCcgKyBhcmdzIDogYXJncykpXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGJhc2VXYXJuIChtc2cpIHtcblx0ICBjb25zb2xlLmVycm9yKChcIltWdWUgY29tcGlsZXJdOiBcIiArIG1zZykpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwbHVja01vZHVsZUZ1bmN0aW9uIChcblx0ICBtb2R1bGVzLFxuXHQgIGtleVxuXHQpIHtcblx0ICByZXR1cm4gbW9kdWxlc1xuXHQgICAgPyBtb2R1bGVzLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gbVtrZXldOyB9KS5maWx0ZXIoZnVuY3Rpb24gKF8pIHsgcmV0dXJuIF87IH0pXG5cdCAgICA6IFtdXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFByb3AgKGVsLCBuYW1lLCB2YWx1ZSkge1xuXHQgIChlbC5wcm9wcyB8fCAoZWwucHJvcHMgPSBbXSkpLnB1c2goeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUgfSk7XG5cdCAgZWwucGxhaW4gPSBmYWxzZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkQXR0ciAoZWwsIG5hbWUsIHZhbHVlKSB7XG5cdCAgKGVsLmF0dHJzIHx8IChlbC5hdHRycyA9IFtdKSkucHVzaCh7IG5hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZSB9KTtcblx0ICBlbC5wbGFpbiA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvLyBhZGQgYSByYXcgYXR0ciAodXNlIHRoaXMgaW4gcHJlVHJhbnNmb3Jtcylcblx0ZnVuY3Rpb24gYWRkUmF3QXR0ciAoZWwsIG5hbWUsIHZhbHVlKSB7XG5cdCAgZWwuYXR0cnNNYXBbbmFtZV0gPSB2YWx1ZTtcblx0ICBlbC5hdHRyc0xpc3QucHVzaCh7IG5hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZSB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkRGlyZWN0aXZlIChcblx0ICBlbCxcblx0ICBuYW1lLFxuXHQgIHJhd05hbWUsXG5cdCAgdmFsdWUsXG5cdCAgYXJnLFxuXHQgIG1vZGlmaWVyc1xuXHQpIHtcblx0ICAoZWwuZGlyZWN0aXZlcyB8fCAoZWwuZGlyZWN0aXZlcyA9IFtdKSkucHVzaCh7IG5hbWU6IG5hbWUsIHJhd05hbWU6IHJhd05hbWUsIHZhbHVlOiB2YWx1ZSwgYXJnOiBhcmcsIG1vZGlmaWVyczogbW9kaWZpZXJzIH0pO1xuXHQgIGVsLnBsYWluID0gZmFsc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZEhhbmRsZXIgKFxuXHQgIGVsLFxuXHQgIG5hbWUsXG5cdCAgdmFsdWUsXG5cdCAgbW9kaWZpZXJzLFxuXHQgIGltcG9ydGFudCxcblx0ICB3YXJuXG5cdCkge1xuXHQgIG1vZGlmaWVycyA9IG1vZGlmaWVycyB8fCBlbXB0eU9iamVjdDtcblx0ICAvLyB3YXJuIHByZXZlbnQgYW5kIHBhc3NpdmUgbW9kaWZpZXJcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoXG5cdCAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuICYmXG5cdCAgICBtb2RpZmllcnMucHJldmVudCAmJiBtb2RpZmllcnMucGFzc2l2ZVxuXHQgICkge1xuXHQgICAgd2Fybihcblx0ICAgICAgJ3Bhc3NpdmUgYW5kIHByZXZlbnQgY2FuXFwndCBiZSB1c2VkIHRvZ2V0aGVyLiAnICtcblx0ICAgICAgJ1Bhc3NpdmUgaGFuZGxlciBjYW5cXCd0IHByZXZlbnQgZGVmYXVsdCBldmVudC4nXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgLy8gY2hlY2sgY2FwdHVyZSBtb2RpZmllclxuXHQgIGlmIChtb2RpZmllcnMuY2FwdHVyZSkge1xuXHQgICAgZGVsZXRlIG1vZGlmaWVycy5jYXB0dXJlO1xuXHQgICAgbmFtZSA9ICchJyArIG5hbWU7IC8vIG1hcmsgdGhlIGV2ZW50IGFzIGNhcHR1cmVkXG5cdCAgfVxuXHQgIGlmIChtb2RpZmllcnMub25jZSkge1xuXHQgICAgZGVsZXRlIG1vZGlmaWVycy5vbmNlO1xuXHQgICAgbmFtZSA9ICd+JyArIG5hbWU7IC8vIG1hcmsgdGhlIGV2ZW50IGFzIG9uY2Vcblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKG1vZGlmaWVycy5wYXNzaXZlKSB7XG5cdCAgICBkZWxldGUgbW9kaWZpZXJzLnBhc3NpdmU7XG5cdCAgICBuYW1lID0gJyYnICsgbmFtZTsgLy8gbWFyayB0aGUgZXZlbnQgYXMgcGFzc2l2ZVxuXHQgIH1cblx0XG5cdCAgLy8gbm9ybWFsaXplIGNsaWNrLnJpZ2h0IGFuZCBjbGljay5taWRkbGUgc2luY2UgdGhleSBkb24ndCBhY3R1YWxseSBmaXJlXG5cdCAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBicm93c2VyLXNwZWNpZmljLCBidXQgYXQgbGVhc3QgZm9yIG5vdyBicm93c2VycyBhcmVcblx0ICAvLyB0aGUgb25seSB0YXJnZXQgZW52cyB0aGF0IGhhdmUgcmlnaHQvbWlkZGxlIGNsaWNrcy5cblx0ICBpZiAobmFtZSA9PT0gJ2NsaWNrJykge1xuXHQgICAgaWYgKG1vZGlmaWVycy5yaWdodCkge1xuXHQgICAgICBuYW1lID0gJ2NvbnRleHRtZW51Jztcblx0ICAgICAgZGVsZXRlIG1vZGlmaWVycy5yaWdodDtcblx0ICAgIH0gZWxzZSBpZiAobW9kaWZpZXJzLm1pZGRsZSkge1xuXHQgICAgICBuYW1lID0gJ21vdXNldXAnO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGV2ZW50cztcblx0ICBpZiAobW9kaWZpZXJzLm5hdGl2ZSkge1xuXHQgICAgZGVsZXRlIG1vZGlmaWVycy5uYXRpdmU7XG5cdCAgICBldmVudHMgPSBlbC5uYXRpdmVFdmVudHMgfHwgKGVsLm5hdGl2ZUV2ZW50cyA9IHt9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZXZlbnRzID0gZWwuZXZlbnRzIHx8IChlbC5ldmVudHMgPSB7fSk7XG5cdCAgfVxuXHRcblx0ICB2YXIgbmV3SGFuZGxlciA9IHtcblx0ICAgIHZhbHVlOiB2YWx1ZS50cmltKClcblx0ICB9O1xuXHQgIGlmIChtb2RpZmllcnMgIT09IGVtcHR5T2JqZWN0KSB7XG5cdCAgICBuZXdIYW5kbGVyLm1vZGlmaWVycyA9IG1vZGlmaWVycztcblx0ICB9XG5cdFxuXHQgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVycykpIHtcblx0ICAgIGltcG9ydGFudCA/IGhhbmRsZXJzLnVuc2hpZnQobmV3SGFuZGxlcikgOiBoYW5kbGVycy5wdXNoKG5ld0hhbmRsZXIpO1xuXHQgIH0gZWxzZSBpZiAoaGFuZGxlcnMpIHtcblx0ICAgIGV2ZW50c1tuYW1lXSA9IGltcG9ydGFudCA/IFtuZXdIYW5kbGVyLCBoYW5kbGVyc10gOiBbaGFuZGxlcnMsIG5ld0hhbmRsZXJdO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBldmVudHNbbmFtZV0gPSBuZXdIYW5kbGVyO1xuXHQgIH1cblx0XG5cdCAgZWwucGxhaW4gPSBmYWxzZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0QmluZGluZ0F0dHIgKFxuXHQgIGVsLFxuXHQgIG5hbWUsXG5cdCAgZ2V0U3RhdGljXG5cdCkge1xuXHQgIHZhciBkeW5hbWljVmFsdWUgPVxuXHQgICAgZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJzonICsgbmFtZSkgfHxcblx0ICAgIGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWJpbmQ6JyArIG5hbWUpO1xuXHQgIGlmIChkeW5hbWljVmFsdWUgIT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHBhcnNlRmlsdGVycyhkeW5hbWljVmFsdWUpXG5cdCAgfSBlbHNlIGlmIChnZXRTdGF0aWMgIT09IGZhbHNlKSB7XG5cdCAgICB2YXIgc3RhdGljVmFsdWUgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCBuYW1lKTtcblx0ICAgIGlmIChzdGF0aWNWYWx1ZSAhPSBudWxsKSB7XG5cdCAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdGF0aWNWYWx1ZSlcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIG5vdGU6IHRoaXMgb25seSByZW1vdmVzIHRoZSBhdHRyIGZyb20gdGhlIEFycmF5IChhdHRyc0xpc3QpIHNvIHRoYXQgaXRcblx0Ly8gZG9lc24ndCBnZXQgcHJvY2Vzc2VkIGJ5IHByb2Nlc3NBdHRycy5cblx0Ly8gQnkgZGVmYXVsdCBpdCBkb2VzIE5PVCByZW1vdmUgaXQgZnJvbSB0aGUgbWFwIChhdHRyc01hcCkgYmVjYXVzZSB0aGUgbWFwIGlzXG5cdC8vIG5lZWRlZCBkdXJpbmcgY29kZWdlbi5cblx0ZnVuY3Rpb24gZ2V0QW5kUmVtb3ZlQXR0ciAoXG5cdCAgZWwsXG5cdCAgbmFtZSxcblx0ICByZW1vdmVGcm9tTWFwXG5cdCkge1xuXHQgIHZhciB2YWw7XG5cdCAgaWYgKCh2YWwgPSBlbC5hdHRyc01hcFtuYW1lXSkgIT0gbnVsbCkge1xuXHQgICAgdmFyIGxpc3QgPSBlbC5hdHRyc0xpc3Q7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGlmIChsaXN0W2ldLm5hbWUgPT09IG5hbWUpIHtcblx0ICAgICAgICBsaXN0LnNwbGljZShpLCAxKTtcblx0ICAgICAgICBicmVha1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChyZW1vdmVGcm9tTWFwKSB7XG5cdCAgICBkZWxldGUgZWwuYXR0cnNNYXBbbmFtZV07XG5cdCAgfVxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvKipcblx0ICogQ3Jvc3MtcGxhdGZvcm0gY29kZSBnZW5lcmF0aW9uIGZvciBjb21wb25lbnQgdi1tb2RlbFxuXHQgKi9cblx0ZnVuY3Rpb24gZ2VuQ29tcG9uZW50TW9kZWwgKFxuXHQgIGVsLFxuXHQgIHZhbHVlLFxuXHQgIG1vZGlmaWVyc1xuXHQpIHtcblx0ICB2YXIgcmVmID0gbW9kaWZpZXJzIHx8IHt9O1xuXHQgIHZhciBudW1iZXIgPSByZWYubnVtYmVyO1xuXHQgIHZhciB0cmltID0gcmVmLnRyaW07XG5cdFxuXHQgIHZhciBiYXNlVmFsdWVFeHByZXNzaW9uID0gJyQkdic7XG5cdCAgdmFyIHZhbHVlRXhwcmVzc2lvbiA9IGJhc2VWYWx1ZUV4cHJlc3Npb247XG5cdCAgaWYgKHRyaW0pIHtcblx0ICAgIHZhbHVlRXhwcmVzc2lvbiA9XG5cdCAgICAgIFwiKHR5cGVvZiBcIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyBcIiA9PT0gJ3N0cmluZydcIiArXG5cdCAgICAgIFwiPyBcIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyBcIi50cmltKClcIiArXG5cdCAgICAgIFwiOiBcIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyBcIilcIjtcblx0ICB9XG5cdCAgaWYgKG51bWJlcikge1xuXHQgICAgdmFsdWVFeHByZXNzaW9uID0gXCJfbihcIiArIHZhbHVlRXhwcmVzc2lvbiArIFwiKVwiO1xuXHQgIH1cblx0ICB2YXIgYXNzaWdubWVudCA9IGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCB2YWx1ZUV4cHJlc3Npb24pO1xuXHRcblx0ICBlbC5tb2RlbCA9IHtcblx0ICAgIHZhbHVlOiAoXCIoXCIgKyB2YWx1ZSArIFwiKVwiKSxcblx0ICAgIGV4cHJlc3Npb246IChcIlxcXCJcIiArIHZhbHVlICsgXCJcXFwiXCIpLFxuXHQgICAgY2FsbGJhY2s6IChcImZ1bmN0aW9uIChcIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyBcIikge1wiICsgYXNzaWdubWVudCArIFwifVwiKVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcm9zcy1wbGF0Zm9ybSBjb2RlZ2VuIGhlbHBlciBmb3IgZ2VuZXJhdGluZyB2LW1vZGVsIHZhbHVlIGFzc2lnbm1lbnQgY29kZS5cblx0ICovXG5cdGZ1bmN0aW9uIGdlbkFzc2lnbm1lbnRDb2RlIChcblx0ICB2YWx1ZSxcblx0ICBhc3NpZ25tZW50XG5cdCkge1xuXHQgIHZhciByZXMgPSBwYXJzZU1vZGVsKHZhbHVlKTtcblx0ICBpZiAocmVzLmtleSA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICh2YWx1ZSArIFwiPVwiICsgYXNzaWdubWVudClcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIChcIiRzZXQoXCIgKyAocmVzLmV4cCkgKyBcIiwgXCIgKyAocmVzLmtleSkgKyBcIiwgXCIgKyBhc3NpZ25tZW50ICsgXCIpXCIpXG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSB2LW1vZGVsIGV4cHJlc3Npb24gaW50byBhIGJhc2UgcGF0aCBhbmQgYSBmaW5hbCBrZXkgc2VnbWVudC5cblx0ICogSGFuZGxlcyBib3RoIGRvdC1wYXRoIGFuZCBwb3NzaWJsZSBzcXVhcmUgYnJhY2tldHMuXG5cdCAqXG5cdCAqIFBvc3NpYmxlIGNhc2VzOlxuXHQgKlxuXHQgKiAtIHRlc3Rcblx0ICogLSB0ZXN0W2tleV1cblx0ICogLSB0ZXN0W3Rlc3QxW2tleV1dXG5cdCAqIC0gdGVzdFtcImFcIl1ba2V5XVxuXHQgKiAtIHh4eC50ZXN0W2FbYV0udGVzdDFba2V5XV1cblx0ICogLSB0ZXN0Lnh4eC5hW1wiYXNhXCJdW3Rlc3QxW2tleV1dXG5cdCAqXG5cdCAqL1xuXHRcblx0dmFyIGxlbjtcblx0dmFyIHN0cjtcblx0dmFyIGNocjtcblx0dmFyIGluZGV4JDE7XG5cdHZhciBleHByZXNzaW9uUG9zO1xuXHR2YXIgZXhwcmVzc2lvbkVuZFBvcztcblx0XG5cdFxuXHRcblx0ZnVuY3Rpb24gcGFyc2VNb2RlbCAodmFsKSB7XG5cdCAgLy8gRml4IGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUvcHVsbC83NzMwXG5cdCAgLy8gYWxsb3cgdi1tb2RlbD1cIm9iai52YWwgXCIgKHRyYWlsaW5nIHdoaXRlc3BhY2UpXG5cdCAgdmFsID0gdmFsLnRyaW0oKTtcblx0ICBsZW4gPSB2YWwubGVuZ3RoO1xuXHRcblx0ICBpZiAodmFsLmluZGV4T2YoJ1snKSA8IDAgfHwgdmFsLmxhc3RJbmRleE9mKCddJykgPCBsZW4gLSAxKSB7XG5cdCAgICBpbmRleCQxID0gdmFsLmxhc3RJbmRleE9mKCcuJyk7XG5cdCAgICBpZiAoaW5kZXgkMSA+IC0xKSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgZXhwOiB2YWwuc2xpY2UoMCwgaW5kZXgkMSksXG5cdCAgICAgICAga2V5OiAnXCInICsgdmFsLnNsaWNlKGluZGV4JDEgKyAxKSArICdcIidcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBleHA6IHZhbCxcblx0ICAgICAgICBrZXk6IG51bGxcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgc3RyID0gdmFsO1xuXHQgIGluZGV4JDEgPSBleHByZXNzaW9uUG9zID0gZXhwcmVzc2lvbkVuZFBvcyA9IDA7XG5cdFxuXHQgIHdoaWxlICghZW9mKCkpIHtcblx0ICAgIGNociA9IG5leHQoKTtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKGlzU3RyaW5nU3RhcnQoY2hyKSkge1xuXHQgICAgICBwYXJzZVN0cmluZyhjaHIpO1xuXHQgICAgfSBlbHNlIGlmIChjaHIgPT09IDB4NUIpIHtcblx0ICAgICAgcGFyc2VCcmFja2V0KGNocik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4ge1xuXHQgICAgZXhwOiB2YWwuc2xpY2UoMCwgZXhwcmVzc2lvblBvcyksXG5cdCAgICBrZXk6IHZhbC5zbGljZShleHByZXNzaW9uUG9zICsgMSwgZXhwcmVzc2lvbkVuZFBvcylcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5leHQgKCkge1xuXHQgIHJldHVybiBzdHIuY2hhckNvZGVBdCgrK2luZGV4JDEpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVvZiAoKSB7XG5cdCAgcmV0dXJuIGluZGV4JDEgPj0gbGVuXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU3RyaW5nU3RhcnQgKGNocikge1xuXHQgIHJldHVybiBjaHIgPT09IDB4MjIgfHwgY2hyID09PSAweDI3XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlQnJhY2tldCAoY2hyKSB7XG5cdCAgdmFyIGluQnJhY2tldCA9IDE7XG5cdCAgZXhwcmVzc2lvblBvcyA9IGluZGV4JDE7XG5cdCAgd2hpbGUgKCFlb2YoKSkge1xuXHQgICAgY2hyID0gbmV4dCgpO1xuXHQgICAgaWYgKGlzU3RyaW5nU3RhcnQoY2hyKSkge1xuXHQgICAgICBwYXJzZVN0cmluZyhjaHIpO1xuXHQgICAgICBjb250aW51ZVxuXHQgICAgfVxuXHQgICAgaWYgKGNociA9PT0gMHg1QikgeyBpbkJyYWNrZXQrKzsgfVxuXHQgICAgaWYgKGNociA9PT0gMHg1RCkgeyBpbkJyYWNrZXQtLTsgfVxuXHQgICAgaWYgKGluQnJhY2tldCA9PT0gMCkge1xuXHQgICAgICBleHByZXNzaW9uRW5kUG9zID0gaW5kZXgkMTtcblx0ICAgICAgYnJlYWtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlU3RyaW5nIChjaHIpIHtcblx0ICB2YXIgc3RyaW5nUXVvdGUgPSBjaHI7XG5cdCAgd2hpbGUgKCFlb2YoKSkge1xuXHQgICAgY2hyID0gbmV4dCgpO1xuXHQgICAgaWYgKGNociA9PT0gc3RyaW5nUXVvdGUpIHtcblx0ICAgICAgYnJlYWtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHdhcm4kMTtcblx0XG5cdC8vIGluIHNvbWUgY2FzZXMsIHRoZSBldmVudCB1c2VkIGhhcyB0byBiZSBkZXRlcm1pbmVkIGF0IHJ1bnRpbWVcblx0Ly8gc28gd2UgdXNlZCBzb21lIHJlc2VydmVkIHRva2VucyBkdXJpbmcgY29tcGlsZS5cblx0dmFyIFJBTkdFX1RPS0VOID0gJ19fcic7XG5cdHZhciBDSEVDS0JPWF9SQURJT19UT0tFTiA9ICdfX2MnO1xuXHRcblx0ZnVuY3Rpb24gbW9kZWwgKFxuXHQgIGVsLFxuXHQgIGRpcixcblx0ICBfd2FyblxuXHQpIHtcblx0ICB3YXJuJDEgPSBfd2Fybjtcblx0ICB2YXIgdmFsdWUgPSBkaXIudmFsdWU7XG5cdCAgdmFyIG1vZGlmaWVycyA9IGRpci5tb2RpZmllcnM7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZztcblx0ICB2YXIgdHlwZSA9IGVsLmF0dHJzTWFwLnR5cGU7XG5cdFxuXHQgIHtcblx0ICAgIC8vIGlucHV0cyB3aXRoIHR5cGU9XCJmaWxlXCIgYXJlIHJlYWQgb25seSBhbmQgc2V0dGluZyB0aGUgaW5wdXQnc1xuXHQgICAgLy8gdmFsdWUgd2lsbCB0aHJvdyBhbiBlcnJvci5cblx0ICAgIGlmICh0YWcgPT09ICdpbnB1dCcgJiYgdHlwZSA9PT0gJ2ZpbGUnKSB7XG5cdCAgICAgIHdhcm4kMShcblx0ICAgICAgICBcIjxcIiArIChlbC50YWcpICsgXCIgdi1tb2RlbD1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIiB0eXBlPVxcXCJmaWxlXFxcIj46XFxuXCIgK1xuXHQgICAgICAgIFwiRmlsZSBpbnB1dHMgYXJlIHJlYWQgb25seS4gVXNlIGEgdi1vbjpjaGFuZ2UgbGlzdGVuZXIgaW5zdGVhZC5cIlxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGVsLmNvbXBvbmVudCkge1xuXHQgICAgZ2VuQ29tcG9uZW50TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpO1xuXHQgICAgLy8gY29tcG9uZW50IHYtbW9kZWwgZG9lc24ndCBuZWVkIGV4dHJhIHJ1bnRpbWVcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH0gZWxzZSBpZiAodGFnID09PSAnc2VsZWN0Jykge1xuXHQgICAgZ2VuU2VsZWN0KGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTtcblx0ICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2lucHV0JyAmJiB0eXBlID09PSAnY2hlY2tib3gnKSB7XG5cdCAgICBnZW5DaGVja2JveE1vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTtcblx0ICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2lucHV0JyAmJiB0eXBlID09PSAncmFkaW8nKSB7XG5cdCAgICBnZW5SYWRpb01vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTtcblx0ICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2lucHV0JyB8fCB0YWcgPT09ICd0ZXh0YXJlYScpIHtcblx0ICAgIGdlbkRlZmF1bHRNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG5cdCAgfSBlbHNlIGlmICghY29uZmlnLmlzUmVzZXJ2ZWRUYWcodGFnKSkge1xuXHQgICAgZ2VuQ29tcG9uZW50TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpO1xuXHQgICAgLy8gY29tcG9uZW50IHYtbW9kZWwgZG9lc24ndCBuZWVkIGV4dHJhIHJ1bnRpbWVcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH0gZWxzZSB7XG5cdCAgICB3YXJuJDEoXG5cdCAgICAgIFwiPFwiICsgKGVsLnRhZykgKyBcIiB2LW1vZGVsPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiPjogXCIgK1xuXHQgICAgICBcInYtbW9kZWwgaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIGVsZW1lbnQgdHlwZS4gXCIgK1xuXHQgICAgICAnSWYgeW91IGFyZSB3b3JraW5nIHdpdGggY29udGVudGVkaXRhYmxlLCBpdFxcJ3MgcmVjb21tZW5kZWQgdG8gJyArXG5cdCAgICAgICd3cmFwIGEgbGlicmFyeSBkZWRpY2F0ZWQgZm9yIHRoYXQgcHVycG9zZSBpbnNpZGUgYSBjdXN0b20gY29tcG9uZW50Lidcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICAvLyBlbnN1cmUgcnVudGltZSBkaXJlY3RpdmUgbWV0YWRhdGFcblx0ICByZXR1cm4gdHJ1ZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5DaGVja2JveE1vZGVsIChcblx0ICBlbCxcblx0ICB2YWx1ZSxcblx0ICBtb2RpZmllcnNcblx0KSB7XG5cdCAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyO1xuXHQgIHZhciB2YWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3ZhbHVlJykgfHwgJ251bGwnO1xuXHQgIHZhciB0cnVlVmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICd0cnVlLXZhbHVlJykgfHwgJ3RydWUnO1xuXHQgIHZhciBmYWxzZVZhbHVlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnZmFsc2UtdmFsdWUnKSB8fCAnZmFsc2UnO1xuXHQgIGFkZFByb3AoZWwsICdjaGVja2VkJyxcblx0ICAgIFwiQXJyYXkuaXNBcnJheShcIiArIHZhbHVlICsgXCIpXCIgK1xuXHQgICAgXCI/X2koXCIgKyB2YWx1ZSArIFwiLFwiICsgdmFsdWVCaW5kaW5nICsgXCIpPi0xXCIgKyAoXG5cdCAgICAgIHRydWVWYWx1ZUJpbmRpbmcgPT09ICd0cnVlJ1xuXHQgICAgICAgID8gKFwiOihcIiArIHZhbHVlICsgXCIpXCIpXG5cdCAgICAgICAgOiAoXCI6X3EoXCIgKyB2YWx1ZSArIFwiLFwiICsgdHJ1ZVZhbHVlQmluZGluZyArIFwiKVwiKVxuXHQgICAgKVxuXHQgICk7XG5cdCAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsXG5cdCAgICBcInZhciAkJGE9XCIgKyB2YWx1ZSArIFwiLFwiICtcblx0ICAgICAgICAnJCRlbD0kZXZlbnQudGFyZ2V0LCcgK1xuXHQgICAgICAgIFwiJCRjPSQkZWwuY2hlY2tlZD8oXCIgKyB0cnVlVmFsdWVCaW5kaW5nICsgXCIpOihcIiArIGZhbHNlVmFsdWVCaW5kaW5nICsgXCIpO1wiICtcblx0ICAgICdpZihBcnJheS5pc0FycmF5KCQkYSkpeycgK1xuXHQgICAgICBcInZhciAkJHY9XCIgKyAobnVtYmVyID8gJ19uKCcgKyB2YWx1ZUJpbmRpbmcgKyAnKScgOiB2YWx1ZUJpbmRpbmcpICsgXCIsXCIgK1xuXHQgICAgICAgICAgJyQkaT1faSgkJGEsJCR2KTsnICtcblx0ICAgICAgXCJpZigkJGVsLmNoZWNrZWQpeyQkaTwwJiYoXCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGEuY29uY2F0KFskJHZdKScpKSArIFwiKX1cIiArXG5cdCAgICAgIFwiZWxzZXskJGk+LTEmJihcIiArIChnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgJyQkYS5zbGljZSgwLCQkaSkuY29uY2F0KCQkYS5zbGljZSgkJGkrMSkpJykpICsgXCIpfVwiICtcblx0ICAgIFwifWVsc2V7XCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGMnKSkgKyBcIn1cIixcblx0ICAgIG51bGwsIHRydWVcblx0ICApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5SYWRpb01vZGVsIChcblx0ICBlbCxcblx0ICB2YWx1ZSxcblx0ICBtb2RpZmllcnNcblx0KSB7XG5cdCAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyO1xuXHQgIHZhciB2YWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3ZhbHVlJykgfHwgJ251bGwnO1xuXHQgIHZhbHVlQmluZGluZyA9IG51bWJlciA/IChcIl9uKFwiICsgdmFsdWVCaW5kaW5nICsgXCIpXCIpIDogdmFsdWVCaW5kaW5nO1xuXHQgIGFkZFByb3AoZWwsICdjaGVja2VkJywgKFwiX3EoXCIgKyB2YWx1ZSArIFwiLFwiICsgdmFsdWVCaW5kaW5nICsgXCIpXCIpKTtcblx0ICBhZGRIYW5kbGVyKGVsLCAnY2hhbmdlJywgZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIHZhbHVlQmluZGluZyksIG51bGwsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5TZWxlY3QgKFxuXHQgIGVsLFxuXHQgIHZhbHVlLFxuXHQgIG1vZGlmaWVyc1xuXHQpIHtcblx0ICB2YXIgbnVtYmVyID0gbW9kaWZpZXJzICYmIG1vZGlmaWVycy5udW1iZXI7XG5cdCAgdmFyIHNlbGVjdGVkVmFsID0gXCJBcnJheS5wcm90b3R5cGUuZmlsdGVyXCIgK1xuXHQgICAgXCIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KVwiICtcblx0ICAgIFwiLm1hcChmdW5jdGlvbihvKXt2YXIgdmFsID0gXFxcIl92YWx1ZVxcXCIgaW4gbyA/IG8uX3ZhbHVlIDogby52YWx1ZTtcIiArXG5cdCAgICBcInJldHVybiBcIiArIChudW1iZXIgPyAnX24odmFsKScgOiAndmFsJykgKyBcIn0pXCI7XG5cdFxuXHQgIHZhciBhc3NpZ25tZW50ID0gJyRldmVudC50YXJnZXQubXVsdGlwbGUgPyAkJHNlbGVjdGVkVmFsIDogJCRzZWxlY3RlZFZhbFswXSc7XG5cdCAgdmFyIGNvZGUgPSBcInZhciAkJHNlbGVjdGVkVmFsID0gXCIgKyBzZWxlY3RlZFZhbCArIFwiO1wiO1xuXHQgIGNvZGUgPSBjb2RlICsgXCIgXCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIGFzc2lnbm1lbnQpKTtcblx0ICBhZGRIYW5kbGVyKGVsLCAnY2hhbmdlJywgY29kZSwgbnVsbCwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbkRlZmF1bHRNb2RlbCAoXG5cdCAgZWwsXG5cdCAgdmFsdWUsXG5cdCAgbW9kaWZpZXJzXG5cdCkge1xuXHQgIHZhciB0eXBlID0gZWwuYXR0cnNNYXAudHlwZTtcblx0XG5cdCAgLy8gd2FybiBpZiB2LWJpbmQ6dmFsdWUgY29uZmxpY3RzIHdpdGggdi1tb2RlbFxuXHQgIC8vIGV4Y2VwdCBmb3IgaW5wdXRzIHdpdGggdi1iaW5kOnR5cGVcblx0ICB7XG5cdCAgICB2YXIgdmFsdWUkMSA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dmFsdWUnXSB8fCBlbC5hdHRyc01hcFsnOnZhbHVlJ107XG5cdCAgICB2YXIgdHlwZUJpbmRpbmcgPSBlbC5hdHRyc01hcFsndi1iaW5kOnR5cGUnXSB8fCBlbC5hdHRyc01hcFsnOnR5cGUnXTtcblx0ICAgIGlmICh2YWx1ZSQxICYmICF0eXBlQmluZGluZykge1xuXHQgICAgICB2YXIgYmluZGluZyA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dmFsdWUnXSA/ICd2LWJpbmQ6dmFsdWUnIDogJzp2YWx1ZSc7XG5cdCAgICAgIHdhcm4kMShcblx0ICAgICAgICBiaW5kaW5nICsgXCI9XFxcIlwiICsgdmFsdWUkMSArIFwiXFxcIiBjb25mbGljdHMgd2l0aCB2LW1vZGVsIG9uIHRoZSBzYW1lIGVsZW1lbnQgXCIgK1xuXHQgICAgICAgICdiZWNhdXNlIHRoZSBsYXR0ZXIgYWxyZWFkeSBleHBhbmRzIHRvIGEgdmFsdWUgYmluZGluZyBpbnRlcm5hbGx5J1xuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIHJlZiA9IG1vZGlmaWVycyB8fCB7fTtcblx0ICB2YXIgbGF6eSA9IHJlZi5sYXp5O1xuXHQgIHZhciBudW1iZXIgPSByZWYubnVtYmVyO1xuXHQgIHZhciB0cmltID0gcmVmLnRyaW07XG5cdCAgdmFyIG5lZWRDb21wb3NpdGlvbkd1YXJkID0gIWxhenkgJiYgdHlwZSAhPT0gJ3JhbmdlJztcblx0ICB2YXIgZXZlbnQgPSBsYXp5XG5cdCAgICA/ICdjaGFuZ2UnXG5cdCAgICA6IHR5cGUgPT09ICdyYW5nZSdcblx0ICAgICAgPyBSQU5HRV9UT0tFTlxuXHQgICAgICA6ICdpbnB1dCc7XG5cdFxuXHQgIHZhciB2YWx1ZUV4cHJlc3Npb24gPSAnJGV2ZW50LnRhcmdldC52YWx1ZSc7XG5cdCAgaWYgKHRyaW0pIHtcblx0ICAgIHZhbHVlRXhwcmVzc2lvbiA9IFwiJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKClcIjtcblx0ICB9XG5cdCAgaWYgKG51bWJlcikge1xuXHQgICAgdmFsdWVFeHByZXNzaW9uID0gXCJfbihcIiArIHZhbHVlRXhwcmVzc2lvbiArIFwiKVwiO1xuXHQgIH1cblx0XG5cdCAgdmFyIGNvZGUgPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVFeHByZXNzaW9uKTtcblx0ICBpZiAobmVlZENvbXBvc2l0aW9uR3VhcmQpIHtcblx0ICAgIGNvZGUgPSBcImlmKCRldmVudC50YXJnZXQuY29tcG9zaW5nKXJldHVybjtcIiArIGNvZGU7XG5cdCAgfVxuXHRcblx0ICBhZGRQcm9wKGVsLCAndmFsdWUnLCAoXCIoXCIgKyB2YWx1ZSArIFwiKVwiKSk7XG5cdCAgYWRkSGFuZGxlcihlbCwgZXZlbnQsIGNvZGUsIG51bGwsIHRydWUpO1xuXHQgIGlmICh0cmltIHx8IG51bWJlcikge1xuXHQgICAgYWRkSGFuZGxlcihlbCwgJ2JsdXInLCAnJGZvcmNlVXBkYXRlKCknKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gbm9ybWFsaXplIHYtbW9kZWwgZXZlbnQgdG9rZW5zIHRoYXQgY2FuIG9ubHkgYmUgZGV0ZXJtaW5lZCBhdCBydW50aW1lLlxuXHQvLyBpdCdzIGltcG9ydGFudCB0byBwbGFjZSB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGluIHRoZSBhcnJheSBiZWNhdXNlXG5cdC8vIHRoZSB3aG9sZSBwb2ludCBpcyBlbnN1cmluZyB0aGUgdi1tb2RlbCBjYWxsYmFjayBnZXRzIGNhbGxlZCBiZWZvcmVcblx0Ly8gdXNlci1hdHRhY2hlZCBoYW5kbGVycy5cblx0ZnVuY3Rpb24gbm9ybWFsaXplRXZlbnRzIChvbikge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc0RlZihvbltSQU5HRV9UT0tFTl0pKSB7XG5cdCAgICAvLyBJRSBpbnB1dFt0eXBlPXJhbmdlXSBvbmx5IHN1cHBvcnRzIGBjaGFuZ2VgIGV2ZW50XG5cdCAgICB2YXIgZXZlbnQgPSBpc0lFID8gJ2NoYW5nZScgOiAnaW5wdXQnO1xuXHQgICAgb25bZXZlbnRdID0gW10uY29uY2F0KG9uW1JBTkdFX1RPS0VOXSwgb25bZXZlbnRdIHx8IFtdKTtcblx0ICAgIGRlbGV0ZSBvbltSQU5HRV9UT0tFTl07XG5cdCAgfVxuXHQgIC8vIFRoaXMgd2FzIG9yaWdpbmFsbHkgaW50ZW5kZWQgdG8gZml4ICM0NTIxIGJ1dCBubyBsb25nZXIgbmVjZXNzYXJ5XG5cdCAgLy8gYWZ0ZXIgMi41LiBLZWVwaW5nIGl0IGZvciBiYWNrd2FyZHMgY29tcGF0IHdpdGggZ2VuZXJhdGVkIGNvZGUgZnJvbSA8IDIuNFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc0RlZihvbltDSEVDS0JPWF9SQURJT19UT0tFTl0pKSB7XG5cdCAgICBvbi5jaGFuZ2UgPSBbXS5jb25jYXQob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dLCBvbi5jaGFuZ2UgfHwgW10pO1xuXHQgICAgZGVsZXRlIG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciB0YXJnZXQkMTtcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZU9uY2VIYW5kbGVyIChoYW5kbGVyLCBldmVudCwgY2FwdHVyZSkge1xuXHQgIHZhciBfdGFyZ2V0ID0gdGFyZ2V0JDE7IC8vIHNhdmUgY3VycmVudCB0YXJnZXQgZWxlbWVudCBpbiBjbG9zdXJlXG5cdCAgcmV0dXJuIGZ1bmN0aW9uIG9uY2VIYW5kbGVyICgpIHtcblx0ICAgIHZhciByZXMgPSBoYW5kbGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cdCAgICBpZiAocmVzICE9PSBudWxsKSB7XG5cdCAgICAgIHJlbW92ZSQyKGV2ZW50LCBvbmNlSGFuZGxlciwgY2FwdHVyZSwgX3RhcmdldCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGQkMSAoXG5cdCAgZXZlbnQsXG5cdCAgaGFuZGxlcixcblx0ICBvbmNlJCQxLFxuXHQgIGNhcHR1cmUsXG5cdCAgcGFzc2l2ZVxuXHQpIHtcblx0ICBoYW5kbGVyID0gd2l0aE1hY3JvVGFzayhoYW5kbGVyKTtcblx0ICBpZiAob25jZSQkMSkgeyBoYW5kbGVyID0gY3JlYXRlT25jZUhhbmRsZXIoaGFuZGxlciwgZXZlbnQsIGNhcHR1cmUpOyB9XG5cdCAgdGFyZ2V0JDEuYWRkRXZlbnRMaXN0ZW5lcihcblx0ICAgIGV2ZW50LFxuXHQgICAgaGFuZGxlcixcblx0ICAgIHN1cHBvcnRzUGFzc2l2ZVxuXHQgICAgICA/IHsgY2FwdHVyZTogY2FwdHVyZSwgcGFzc2l2ZTogcGFzc2l2ZSB9XG5cdCAgICAgIDogY2FwdHVyZVxuXHQgICk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZSQyIChcblx0ICBldmVudCxcblx0ICBoYW5kbGVyLFxuXHQgIGNhcHR1cmUsXG5cdCAgX3RhcmdldFxuXHQpIHtcblx0ICAoX3RhcmdldCB8fCB0YXJnZXQkMSkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcblx0ICAgIGV2ZW50LFxuXHQgICAgaGFuZGxlci5fd2l0aFRhc2sgfHwgaGFuZGxlcixcblx0ICAgIGNhcHR1cmVcblx0ICApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVET01MaXN0ZW5lcnMgKG9sZFZub2RlLCB2bm9kZSkge1xuXHQgIGlmIChpc1VuZGVmKG9sZFZub2RlLmRhdGEub24pICYmIGlzVW5kZWYodm5vZGUuZGF0YS5vbikpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIgb24gPSB2bm9kZS5kYXRhLm9uIHx8IHt9O1xuXHQgIHZhciBvbGRPbiA9IG9sZFZub2RlLmRhdGEub24gfHwge307XG5cdCAgdGFyZ2V0JDEgPSB2bm9kZS5lbG07XG5cdCAgbm9ybWFsaXplRXZlbnRzKG9uKTtcblx0ICB1cGRhdGVMaXN0ZW5lcnMob24sIG9sZE9uLCBhZGQkMSwgcmVtb3ZlJDIsIHZub2RlLmNvbnRleHQpO1xuXHQgIHRhcmdldCQxID0gdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHR2YXIgZXZlbnRzID0ge1xuXHQgIGNyZWF0ZTogdXBkYXRlRE9NTGlzdGVuZXJzLFxuXHQgIHVwZGF0ZTogdXBkYXRlRE9NTGlzdGVuZXJzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlRE9NUHJvcHMgKG9sZFZub2RlLCB2bm9kZSkge1xuXHQgIGlmIChpc1VuZGVmKG9sZFZub2RlLmRhdGEuZG9tUHJvcHMpICYmIGlzVW5kZWYodm5vZGUuZGF0YS5kb21Qcm9wcykpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIga2V5LCBjdXI7XG5cdCAgdmFyIGVsbSA9IHZub2RlLmVsbTtcblx0ICB2YXIgb2xkUHJvcHMgPSBvbGRWbm9kZS5kYXRhLmRvbVByb3BzIHx8IHt9O1xuXHQgIHZhciBwcm9wcyA9IHZub2RlLmRhdGEuZG9tUHJvcHMgfHwge307XG5cdCAgLy8gY2xvbmUgb2JzZXJ2ZWQgb2JqZWN0cywgYXMgdGhlIHVzZXIgcHJvYmFibHkgd2FudHMgdG8gbXV0YXRlIGl0XG5cdCAgaWYgKGlzRGVmKHByb3BzLl9fb2JfXykpIHtcblx0ICAgIHByb3BzID0gdm5vZGUuZGF0YS5kb21Qcm9wcyA9IGV4dGVuZCh7fSwgcHJvcHMpO1xuXHQgIH1cblx0XG5cdCAgZm9yIChrZXkgaW4gb2xkUHJvcHMpIHtcblx0ICAgIGlmIChpc1VuZGVmKHByb3BzW2tleV0pKSB7XG5cdCAgICAgIGVsbVtrZXldID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIHByb3BzKSB7XG5cdCAgICBjdXIgPSBwcm9wc1trZXldO1xuXHQgICAgLy8gaWdub3JlIGNoaWxkcmVuIGlmIHRoZSBub2RlIGhhcyB0ZXh0Q29udGVudCBvciBpbm5lckhUTUwsXG5cdCAgICAvLyBhcyB0aGVzZSB3aWxsIHRocm93IGF3YXkgZXhpc3RpbmcgRE9NIG5vZGVzIGFuZCBjYXVzZSByZW1vdmFsIGVycm9yc1xuXHQgICAgLy8gb24gc3Vic2VxdWVudCBwYXRjaGVzICgjMzM2MClcblx0ICAgIGlmIChrZXkgPT09ICd0ZXh0Q29udGVudCcgfHwga2V5ID09PSAnaW5uZXJIVE1MJykge1xuXHQgICAgICBpZiAodm5vZGUuY2hpbGRyZW4pIHsgdm5vZGUuY2hpbGRyZW4ubGVuZ3RoID0gMDsgfVxuXHQgICAgICBpZiAoY3VyID09PSBvbGRQcm9wc1trZXldKSB7IGNvbnRpbnVlIH1cblx0ICAgICAgLy8gIzY2MDEgd29yayBhcm91bmQgQ2hyb21lIHZlcnNpb24gPD0gNTUgYnVnIHdoZXJlIHNpbmdsZSB0ZXh0Tm9kZVxuXHQgICAgICAvLyByZXBsYWNlZCBieSBpbm5lckhUTUwvdGV4dENvbnRlbnQgcmV0YWlucyBpdHMgcGFyZW50Tm9kZSBwcm9wZXJ0eVxuXHQgICAgICBpZiAoZWxtLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgZWxtLnJlbW92ZUNoaWxkKGVsbS5jaGlsZE5vZGVzWzBdKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChrZXkgPT09ICd2YWx1ZScpIHtcblx0ICAgICAgLy8gc3RvcmUgdmFsdWUgYXMgX3ZhbHVlIGFzIHdlbGwgc2luY2Vcblx0ICAgICAgLy8gbm9uLXN0cmluZyB2YWx1ZXMgd2lsbCBiZSBzdHJpbmdpZmllZFxuXHQgICAgICBlbG0uX3ZhbHVlID0gY3VyO1xuXHQgICAgICAvLyBhdm9pZCByZXNldHRpbmcgY3Vyc29yIHBvc2l0aW9uIHdoZW4gdmFsdWUgaXMgdGhlIHNhbWVcblx0ICAgICAgdmFyIHN0ckN1ciA9IGlzVW5kZWYoY3VyKSA/ICcnIDogU3RyaW5nKGN1cik7XG5cdCAgICAgIGlmIChzaG91bGRVcGRhdGVWYWx1ZShlbG0sIHN0ckN1cikpIHtcblx0ICAgICAgICBlbG0udmFsdWUgPSBzdHJDdXI7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsbVtrZXldID0gY3VyO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0Ly8gY2hlY2sgcGxhdGZvcm1zL3dlYi91dGlsL2F0dHJzLmpzIGFjY2VwdFZhbHVlXG5cdFxuXHRcblx0ZnVuY3Rpb24gc2hvdWxkVXBkYXRlVmFsdWUgKGVsbSwgY2hlY2tWYWwpIHtcblx0ICByZXR1cm4gKCFlbG0uY29tcG9zaW5nICYmIChcblx0ICAgIGVsbS50YWdOYW1lID09PSAnT1BUSU9OJyB8fFxuXHQgICAgaXNOb3RJbkZvY3VzQW5kRGlydHkoZWxtLCBjaGVja1ZhbCkgfHxcblx0ICAgIGlzRGlydHlXaXRoTW9kaWZpZXJzKGVsbSwgY2hlY2tWYWwpXG5cdCAgKSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNOb3RJbkZvY3VzQW5kRGlydHkgKGVsbSwgY2hlY2tWYWwpIHtcblx0ICAvLyByZXR1cm4gdHJ1ZSB3aGVuIHRleHRib3ggKC5udW1iZXIgYW5kIC50cmltKSBsb3NlcyBmb2N1cyBhbmQgaXRzIHZhbHVlIGlzXG5cdCAgLy8gbm90IGVxdWFsIHRvIHRoZSB1cGRhdGVkIHZhbHVlXG5cdCAgdmFyIG5vdEluRm9jdXMgPSB0cnVlO1xuXHQgIC8vICM2MTU3XG5cdCAgLy8gd29yayBhcm91bmQgSUUgYnVnIHdoZW4gYWNjZXNzaW5nIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaW4gYW4gaWZyYW1lXG5cdCAgdHJ5IHsgbm90SW5Gb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGVsbTsgfSBjYXRjaCAoZSkge31cblx0ICByZXR1cm4gbm90SW5Gb2N1cyAmJiBlbG0udmFsdWUgIT09IGNoZWNrVmFsXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzRGlydHlXaXRoTW9kaWZpZXJzIChlbG0sIG5ld1ZhbCkge1xuXHQgIHZhciB2YWx1ZSA9IGVsbS52YWx1ZTtcblx0ICB2YXIgbW9kaWZpZXJzID0gZWxtLl92TW9kaWZpZXJzOyAvLyBpbmplY3RlZCBieSB2LW1vZGVsIHJ1bnRpbWVcblx0ICBpZiAoaXNEZWYobW9kaWZpZXJzKSkge1xuXHQgICAgaWYgKG1vZGlmaWVycy5sYXp5KSB7XG5cdCAgICAgIC8vIGlucHV0cyB3aXRoIGxhenkgc2hvdWxkIG9ubHkgYmUgdXBkYXRlZCB3aGVuIG5vdCBpbiBmb2N1c1xuXHQgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgIH1cblx0ICAgIGlmIChtb2RpZmllcnMubnVtYmVyKSB7XG5cdCAgICAgIHJldHVybiB0b051bWJlcih2YWx1ZSkgIT09IHRvTnVtYmVyKG5ld1ZhbClcblx0ICAgIH1cblx0ICAgIGlmIChtb2RpZmllcnMudHJpbSkge1xuXHQgICAgICByZXR1cm4gdmFsdWUudHJpbSgpICE9PSBuZXdWYWwudHJpbSgpXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZSAhPT0gbmV3VmFsXG5cdH1cblx0XG5cdHZhciBkb21Qcm9wcyA9IHtcblx0ICBjcmVhdGU6IHVwZGF0ZURPTVByb3BzLFxuXHQgIHVwZGF0ZTogdXBkYXRlRE9NUHJvcHNcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgcGFyc2VTdHlsZVRleHQgPSBjYWNoZWQoZnVuY3Rpb24gKGNzc1RleHQpIHtcblx0ICB2YXIgcmVzID0ge307XG5cdCAgdmFyIGxpc3REZWxpbWl0ZXIgPSAvOyg/IVteKF0qXFwpKS9nO1xuXHQgIHZhciBwcm9wZXJ0eURlbGltaXRlciA9IC86KC4rKS87XG5cdCAgY3NzVGV4dC5zcGxpdChsaXN0RGVsaW1pdGVyKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICBpZiAoaXRlbSkge1xuXHQgICAgICB2YXIgdG1wID0gaXRlbS5zcGxpdChwcm9wZXJ0eURlbGltaXRlcik7XG5cdCAgICAgIHRtcC5sZW5ndGggPiAxICYmIChyZXNbdG1wWzBdLnRyaW0oKV0gPSB0bXBbMV0udHJpbSgpKTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gcmVzXG5cdH0pO1xuXHRcblx0Ly8gbWVyZ2Ugc3RhdGljIGFuZCBkeW5hbWljIHN0eWxlIGRhdGEgb24gdGhlIHNhbWUgdm5vZGVcblx0ZnVuY3Rpb24gbm9ybWFsaXplU3R5bGVEYXRhIChkYXRhKSB7XG5cdCAgdmFyIHN0eWxlID0gbm9ybWFsaXplU3R5bGVCaW5kaW5nKGRhdGEuc3R5bGUpO1xuXHQgIC8vIHN0YXRpYyBzdHlsZSBpcyBwcmUtcHJvY2Vzc2VkIGludG8gYW4gb2JqZWN0IGR1cmluZyBjb21waWxhdGlvblxuXHQgIC8vIGFuZCBpcyBhbHdheXMgYSBmcmVzaCBvYmplY3QsIHNvIGl0J3Mgc2FmZSB0byBtZXJnZSBpbnRvIGl0XG5cdCAgcmV0dXJuIGRhdGEuc3RhdGljU3R5bGVcblx0ICAgID8gZXh0ZW5kKGRhdGEuc3RhdGljU3R5bGUsIHN0eWxlKVxuXHQgICAgOiBzdHlsZVxuXHR9XG5cdFxuXHQvLyBub3JtYWxpemUgcG9zc2libGUgYXJyYXkgLyBzdHJpbmcgdmFsdWVzIGludG8gT2JqZWN0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlQmluZGluZyAoYmluZGluZ1N0eWxlKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoYmluZGluZ1N0eWxlKSkge1xuXHQgICAgcmV0dXJuIHRvT2JqZWN0KGJpbmRpbmdTdHlsZSlcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBiaW5kaW5nU3R5bGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gcGFyc2VTdHlsZVRleHQoYmluZGluZ1N0eWxlKVxuXHQgIH1cblx0ICByZXR1cm4gYmluZGluZ1N0eWxlXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBwYXJlbnQgY29tcG9uZW50IHN0eWxlIHNob3VsZCBiZSBhZnRlciBjaGlsZCdzXG5cdCAqIHNvIHRoYXQgcGFyZW50IGNvbXBvbmVudCdzIHN0eWxlIGNvdWxkIG92ZXJyaWRlIGl0XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRTdHlsZSAodm5vZGUsIGNoZWNrQ2hpbGQpIHtcblx0ICB2YXIgcmVzID0ge307XG5cdCAgdmFyIHN0eWxlRGF0YTtcblx0XG5cdCAgaWYgKGNoZWNrQ2hpbGQpIHtcblx0ICAgIHZhciBjaGlsZE5vZGUgPSB2bm9kZTtcblx0ICAgIHdoaWxlIChjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHtcblx0ICAgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtcblx0ICAgICAgaWYgKFxuXHQgICAgICAgIGNoaWxkTm9kZSAmJiBjaGlsZE5vZGUuZGF0YSAmJlxuXHQgICAgICAgIChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEoY2hpbGROb2RlLmRhdGEpKVxuXHQgICAgICApIHtcblx0ICAgICAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YSh2bm9kZS5kYXRhKSkpIHtcblx0ICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7XG5cdCAgfVxuXHRcblx0ICB2YXIgcGFyZW50Tm9kZSA9IHZub2RlO1xuXHQgIHdoaWxlICgocGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50KSkge1xuXHQgICAgaWYgKHBhcmVudE5vZGUuZGF0YSAmJiAoc3R5bGVEYXRhID0gbm9ybWFsaXplU3R5bGVEYXRhKHBhcmVudE5vZGUuZGF0YSkpKSB7XG5cdCAgICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgY3NzVmFyUkUgPSAvXi0tLztcblx0dmFyIGltcG9ydGFudFJFID0gL1xccyohaW1wb3J0YW50JC87XG5cdHZhciBzZXRQcm9wID0gZnVuY3Rpb24gKGVsLCBuYW1lLCB2YWwpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoY3NzVmFyUkUudGVzdChuYW1lKSkge1xuXHQgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsKTtcblx0ICB9IGVsc2UgaWYgKGltcG9ydGFudFJFLnRlc3QodmFsKSkge1xuXHQgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKSwgJ2ltcG9ydGFudCcpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgbm9ybWFsaXplZE5hbWUgPSBub3JtYWxpemUobmFtZSk7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG5cdCAgICAgIC8vIFN1cHBvcnQgdmFsdWVzIGFycmF5IGNyZWF0ZWQgYnkgYXV0b3ByZWZpeGVyLCBlLmcuXG5cdCAgICAgIC8vIHtkaXNwbGF5OiBbXCItd2Via2l0LWJveFwiLCBcIi1tcy1mbGV4Ym94XCIsIFwiZmxleFwiXX1cblx0ICAgICAgLy8gU2V0IHRoZW0gb25lIGJ5IG9uZSwgYW5kIHRoZSBicm93c2VyIHdpbGwgb25seSBzZXQgdGhvc2UgaXQgY2FuIHJlY29nbml6ZVxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdmFsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgZWwuc3R5bGVbbm9ybWFsaXplZE5hbWVdID0gdmFsW2ldO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5zdHlsZVtub3JtYWxpemVkTmFtZV0gPSB2YWw7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHZlbmRvck5hbWVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG5cdFxuXHR2YXIgZW1wdHlTdHlsZTtcblx0dmFyIG5vcm1hbGl6ZSA9IGNhY2hlZChmdW5jdGlvbiAocHJvcCkge1xuXHQgIGVtcHR5U3R5bGUgPSBlbXB0eVN0eWxlIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlO1xuXHQgIHByb3AgPSBjYW1lbGl6ZShwcm9wKTtcblx0ICBpZiAocHJvcCAhPT0gJ2ZpbHRlcicgJiYgKHByb3AgaW4gZW1wdHlTdHlsZSkpIHtcblx0ICAgIHJldHVybiBwcm9wXG5cdCAgfVxuXHQgIHZhciBjYXBOYW1lID0gcHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3Auc2xpY2UoMSk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZW5kb3JOYW1lcy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIG5hbWUgPSB2ZW5kb3JOYW1lc1tpXSArIGNhcE5hbWU7XG5cdCAgICBpZiAobmFtZSBpbiBlbXB0eVN0eWxlKSB7XG5cdCAgICAgIHJldHVybiBuYW1lXG5cdCAgICB9XG5cdCAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG5cdCAgdmFyIG9sZERhdGEgPSBvbGRWbm9kZS5kYXRhO1xuXHRcblx0ICBpZiAoaXNVbmRlZihkYXRhLnN0YXRpY1N0eWxlKSAmJiBpc1VuZGVmKGRhdGEuc3R5bGUpICYmXG5cdCAgICBpc1VuZGVmKG9sZERhdGEuc3RhdGljU3R5bGUpICYmIGlzVW5kZWYob2xkRGF0YS5zdHlsZSlcblx0ICApIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIGN1ciwgbmFtZTtcblx0ICB2YXIgZWwgPSB2bm9kZS5lbG07XG5cdCAgdmFyIG9sZFN0YXRpY1N0eWxlID0gb2xkRGF0YS5zdGF0aWNTdHlsZTtcblx0ICB2YXIgb2xkU3R5bGVCaW5kaW5nID0gb2xkRGF0YS5ub3JtYWxpemVkU3R5bGUgfHwgb2xkRGF0YS5zdHlsZSB8fCB7fTtcblx0XG5cdCAgLy8gaWYgc3RhdGljIHN0eWxlIGV4aXN0cywgc3R5bGViaW5kaW5nIGFscmVhZHkgbWVyZ2VkIGludG8gaXQgd2hlbiBkb2luZyBub3JtYWxpemVTdHlsZURhdGFcblx0ICB2YXIgb2xkU3R5bGUgPSBvbGRTdGF0aWNTdHlsZSB8fCBvbGRTdHlsZUJpbmRpbmc7XG5cdFxuXHQgIHZhciBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlQmluZGluZyh2bm9kZS5kYXRhLnN0eWxlKSB8fCB7fTtcblx0XG5cdCAgLy8gc3RvcmUgbm9ybWFsaXplZCBzdHlsZSB1bmRlciBhIGRpZmZlcmVudCBrZXkgZm9yIG5leHQgZGlmZlxuXHQgIC8vIG1ha2Ugc3VyZSB0byBjbG9uZSBpdCBpZiBpdCdzIHJlYWN0aXZlLCBzaW5jZSB0aGUgdXNlciBsaWtlbHkgd2FudHNcblx0ICAvLyB0byBtdXRhdGUgaXQuXG5cdCAgdm5vZGUuZGF0YS5ub3JtYWxpemVkU3R5bGUgPSBpc0RlZihzdHlsZS5fX29iX18pXG5cdCAgICA/IGV4dGVuZCh7fSwgc3R5bGUpXG5cdCAgICA6IHN0eWxlO1xuXHRcblx0ICB2YXIgbmV3U3R5bGUgPSBnZXRTdHlsZSh2bm9kZSwgdHJ1ZSk7XG5cdFxuXHQgIGZvciAobmFtZSBpbiBvbGRTdHlsZSkge1xuXHQgICAgaWYgKGlzVW5kZWYobmV3U3R5bGVbbmFtZV0pKSB7XG5cdCAgICAgIHNldFByb3AoZWwsIG5hbWUsICcnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yIChuYW1lIGluIG5ld1N0eWxlKSB7XG5cdCAgICBjdXIgPSBuZXdTdHlsZVtuYW1lXTtcblx0ICAgIGlmIChjdXIgIT09IG9sZFN0eWxlW25hbWVdKSB7XG5cdCAgICAgIC8vIGllOSBzZXR0aW5nIHRvIG51bGwgaGFzIG5vIGVmZmVjdCwgbXVzdCB1c2UgZW1wdHkgc3RyaW5nXG5cdCAgICAgIHNldFByb3AoZWwsIG5hbWUsIGN1ciA9PSBudWxsID8gJycgOiBjdXIpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHN0eWxlID0ge1xuXHQgIGNyZWF0ZTogdXBkYXRlU3R5bGUsXG5cdCAgdXBkYXRlOiB1cGRhdGVTdHlsZVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBTVkcgc2luY2UgY2xhc3NMaXN0IGlzIG5vdCBzdXBwb3J0ZWQgb25cblx0ICogU1ZHIGVsZW1lbnRzIGluIElFXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGRDbGFzcyAoZWwsIGNscykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghY2xzIHx8ICEoY2xzID0gY2xzLnRyaW0oKSkpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBpZiAoY2xzLmluZGV4T2YoJyAnKSA+IC0xKSB7XG5cdCAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5hZGQoYyk7IH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY3VyID0gXCIgXCIgKyAoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiO1xuXHQgICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoY3VyICsgY2xzKS50cmltKCkpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIFNWRyBzaW5jZSBjbGFzc0xpc3QgaXMgbm90IHN1cHBvcnRlZCBvblxuXHQgKiBTVkcgZWxlbWVudHMgaW4gSUVcblx0ICovXG5cdGZ1bmN0aW9uIHJlbW92ZUNsYXNzIChlbCwgY2xzKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFjbHMgfHwgIShjbHMgPSBjbHMudHJpbSgpKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgIGlmIChjbHMuaW5kZXhPZignICcpID4gLTEpIHtcblx0ICAgICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoYykgeyByZXR1cm4gZWwuY2xhc3NMaXN0LnJlbW92ZShjKTsgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7XG5cdCAgICB9XG5cdCAgICBpZiAoIWVsLmNsYXNzTGlzdC5sZW5ndGgpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY3VyID0gXCIgXCIgKyAoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiO1xuXHQgICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJztcblx0ICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHtcblx0ICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuXHQgICAgfVxuXHQgICAgY3VyID0gY3VyLnRyaW0oKTtcblx0ICAgIGlmIChjdXIpIHtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGN1cik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uIChkZWYpIHtcblx0ICBpZiAoIWRlZikge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKHR5cGVvZiBkZWYgPT09ICdvYmplY3QnKSB7XG5cdCAgICB2YXIgcmVzID0ge307XG5cdCAgICBpZiAoZGVmLmNzcyAhPT0gZmFsc2UpIHtcblx0ICAgICAgZXh0ZW5kKHJlcywgYXV0b0Nzc1RyYW5zaXRpb24oZGVmLm5hbWUgfHwgJ3YnKSk7XG5cdCAgICB9XG5cdCAgICBleHRlbmQocmVzLCBkZWYpO1xuXHQgICAgcmV0dXJuIHJlc1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGRlZiA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiBhdXRvQ3NzVHJhbnNpdGlvbihkZWYpXG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgYXV0b0Nzc1RyYW5zaXRpb24gPSBjYWNoZWQoZnVuY3Rpb24gKG5hbWUpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgZW50ZXJDbGFzczogKG5hbWUgKyBcIi1lbnRlclwiKSxcblx0ICAgIGVudGVyVG9DbGFzczogKG5hbWUgKyBcIi1lbnRlci10b1wiKSxcblx0ICAgIGVudGVyQWN0aXZlQ2xhc3M6IChuYW1lICsgXCItZW50ZXItYWN0aXZlXCIpLFxuXHQgICAgbGVhdmVDbGFzczogKG5hbWUgKyBcIi1sZWF2ZVwiKSxcblx0ICAgIGxlYXZlVG9DbGFzczogKG5hbWUgKyBcIi1sZWF2ZS10b1wiKSxcblx0ICAgIGxlYXZlQWN0aXZlQ2xhc3M6IChuYW1lICsgXCItbGVhdmUtYWN0aXZlXCIpXG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBoYXNUcmFuc2l0aW9uID0gaW5Ccm93c2VyICYmICFpc0lFOTtcblx0dmFyIFRSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG5cdHZhciBBTklNQVRJT04gPSAnYW5pbWF0aW9uJztcblx0XG5cdC8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcblx0dmFyIHRyYW5zaXRpb25Qcm9wID0gJ3RyYW5zaXRpb24nO1xuXHR2YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gJ3RyYW5zaXRpb25lbmQnO1xuXHR2YXIgYW5pbWF0aW9uUHJvcCA9ICdhbmltYXRpb24nO1xuXHR2YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSAnYW5pbWF0aW9uZW5kJztcblx0aWYgKGhhc1RyYW5zaXRpb24pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAod2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmXG5cdCAgICB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWRcblx0ICApIHtcblx0ICAgIHRyYW5zaXRpb25Qcm9wID0gJ1dlYmtpdFRyYW5zaXRpb24nO1xuXHQgICAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gJ3dlYmtpdFRyYW5zaXRpb25FbmQnO1xuXHQgIH1cblx0ICBpZiAod2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiZcblx0ICAgIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkXG5cdCAgKSB7XG5cdCAgICBhbmltYXRpb25Qcm9wID0gJ1dlYmtpdEFuaW1hdGlvbic7XG5cdCAgICBhbmltYXRpb25FbmRFdmVudCA9ICd3ZWJraXRBbmltYXRpb25FbmQnO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gYmluZGluZyB0byB3aW5kb3cgaXMgbmVjZXNzYXJ5IHRvIG1ha2UgaG90IHJlbG9hZCB3b3JrIGluIElFIGluIHN0cmljdCBtb2RlXG5cdHZhciByYWYgPSBpbkJyb3dzZXJcblx0ICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcblx0ICAgID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdylcblx0ICAgIDogc2V0VGltZW91dFxuXHQgIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbigpOyB9O1xuXHRcblx0ZnVuY3Rpb24gbmV4dEZyYW1lIChmbikge1xuXHQgIHJhZihmdW5jdGlvbiAoKSB7XG5cdCAgICByYWYoZm4pO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRUcmFuc2l0aW9uQ2xhc3MgKGVsLCBjbHMpIHtcblx0ICB2YXIgdHJhbnNpdGlvbkNsYXNzZXMgPSBlbC5fdHJhbnNpdGlvbkNsYXNzZXMgfHwgKGVsLl90cmFuc2l0aW9uQ2xhc3NlcyA9IFtdKTtcblx0ICBpZiAodHJhbnNpdGlvbkNsYXNzZXMuaW5kZXhPZihjbHMpIDwgMCkge1xuXHQgICAgdHJhbnNpdGlvbkNsYXNzZXMucHVzaChjbHMpO1xuXHQgICAgYWRkQ2xhc3MoZWwsIGNscyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uQ2xhc3MgKGVsLCBjbHMpIHtcblx0ICBpZiAoZWwuX3RyYW5zaXRpb25DbGFzc2VzKSB7XG5cdCAgICByZW1vdmUoZWwuX3RyYW5zaXRpb25DbGFzc2VzLCBjbHMpO1xuXHQgIH1cblx0ICByZW1vdmVDbGFzcyhlbCwgY2xzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd2hlblRyYW5zaXRpb25FbmRzIChcblx0ICBlbCxcblx0ICBleHBlY3RlZFR5cGUsXG5cdCAgY2Jcblx0KSB7XG5cdCAgdmFyIHJlZiA9IGdldFRyYW5zaXRpb25JbmZvKGVsLCBleHBlY3RlZFR5cGUpO1xuXHQgIHZhciB0eXBlID0gcmVmLnR5cGU7XG5cdCAgdmFyIHRpbWVvdXQgPSByZWYudGltZW91dDtcblx0ICB2YXIgcHJvcENvdW50ID0gcmVmLnByb3BDb3VudDtcblx0ICBpZiAoIXR5cGUpIHsgcmV0dXJuIGNiKCkgfVxuXHQgIHZhciBldmVudCA9IHR5cGUgPT09IFRSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcblx0ICB2YXIgZW5kZWQgPSAwO1xuXHQgIHZhciBlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBvbkVuZCk7XG5cdCAgICBjYigpO1xuXHQgIH07XG5cdCAgdmFyIG9uRW5kID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcblx0ICAgICAgaWYgKCsrZW5kZWQgPj0gcHJvcENvdW50KSB7XG5cdCAgICAgICAgZW5kKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGVuZGVkIDwgcHJvcENvdW50KSB7XG5cdCAgICAgIGVuZCgpO1xuXHQgICAgfVxuXHQgIH0sIHRpbWVvdXQgKyAxKTtcblx0ICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBvbkVuZCk7XG5cdH1cblx0XG5cdHZhciB0cmFuc2Zvcm1SRSA9IC9cXGIodHJhbnNmb3JtfGFsbCkoLHwkKS87XG5cdFxuXHRmdW5jdGlvbiBnZXRUcmFuc2l0aW9uSW5mbyAoZWwsIGV4cGVjdGVkVHlwZSkge1xuXHQgIHZhciBzdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG5cdCAgdmFyIHRyYW5zaXRpb25EZWxheXMgPSBzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnRGVsYXknXS5zcGxpdCgnLCAnKTtcblx0ICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9ucyA9IHN0eWxlc1t0cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbiddLnNwbGl0KCcsICcpO1xuXHQgIHZhciB0cmFuc2l0aW9uVGltZW91dCA9IGdldFRpbWVvdXQodHJhbnNpdGlvbkRlbGF5cywgdHJhbnNpdGlvbkR1cmF0aW9ucyk7XG5cdCAgdmFyIGFuaW1hdGlvbkRlbGF5cyA9IHN0eWxlc1thbmltYXRpb25Qcm9wICsgJ0RlbGF5J10uc3BsaXQoJywgJyk7XG5cdCAgdmFyIGFuaW1hdGlvbkR1cmF0aW9ucyA9IHN0eWxlc1thbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJ10uc3BsaXQoJywgJyk7XG5cdCAgdmFyIGFuaW1hdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KGFuaW1hdGlvbkRlbGF5cywgYW5pbWF0aW9uRHVyYXRpb25zKTtcblx0XG5cdCAgdmFyIHR5cGU7XG5cdCAgdmFyIHRpbWVvdXQgPSAwO1xuXHQgIHZhciBwcm9wQ291bnQgPSAwO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChleHBlY3RlZFR5cGUgPT09IFRSQU5TSVRJT04pIHtcblx0ICAgIGlmICh0cmFuc2l0aW9uVGltZW91dCA+IDApIHtcblx0ICAgICAgdHlwZSA9IFRSQU5TSVRJT047XG5cdCAgICAgIHRpbWVvdXQgPSB0cmFuc2l0aW9uVGltZW91dDtcblx0ICAgICAgcHJvcENvdW50ID0gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IEFOSU1BVElPTikge1xuXHQgICAgaWYgKGFuaW1hdGlvblRpbWVvdXQgPiAwKSB7XG5cdCAgICAgIHR5cGUgPSBBTklNQVRJT047XG5cdCAgICAgIHRpbWVvdXQgPSBhbmltYXRpb25UaW1lb3V0O1xuXHQgICAgICBwcm9wQ291bnQgPSBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB0aW1lb3V0ID0gTWF0aC5tYXgodHJhbnNpdGlvblRpbWVvdXQsIGFuaW1hdGlvblRpbWVvdXQpO1xuXHQgICAgdHlwZSA9IHRpbWVvdXQgPiAwXG5cdCAgICAgID8gdHJhbnNpdGlvblRpbWVvdXQgPiBhbmltYXRpb25UaW1lb3V0XG5cdCAgICAgICAgPyBUUkFOU0lUSU9OXG5cdCAgICAgICAgOiBBTklNQVRJT05cblx0ICAgICAgOiBudWxsO1xuXHQgICAgcHJvcENvdW50ID0gdHlwZVxuXHQgICAgICA/IHR5cGUgPT09IFRSQU5TSVRJT05cblx0ICAgICAgICA/IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoXG5cdCAgICAgICAgOiBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoXG5cdCAgICAgIDogMDtcblx0ICB9XG5cdCAgdmFyIGhhc1RyYW5zZm9ybSA9XG5cdCAgICB0eXBlID09PSBUUkFOU0lUSU9OICYmXG5cdCAgICB0cmFuc2Zvcm1SRS50ZXN0KHN0eWxlc1t0cmFuc2l0aW9uUHJvcCArICdQcm9wZXJ0eSddKTtcblx0ICByZXR1cm4ge1xuXHQgICAgdHlwZTogdHlwZSxcblx0ICAgIHRpbWVvdXQ6IHRpbWVvdXQsXG5cdCAgICBwcm9wQ291bnQ6IHByb3BDb3VudCxcblx0ICAgIGhhc1RyYW5zZm9ybTogaGFzVHJhbnNmb3JtXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRUaW1lb3V0IChkZWxheXMsIGR1cmF0aW9ucykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgd2hpbGUgKGRlbGF5cy5sZW5ndGggPCBkdXJhdGlvbnMubGVuZ3RoKSB7XG5cdCAgICBkZWxheXMgPSBkZWxheXMuY29uY2F0KGRlbGF5cyk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCwgZHVyYXRpb25zLm1hcChmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgcmV0dXJuIHRvTXMoZCkgKyB0b01zKGRlbGF5c1tpXSlcblx0ICB9KSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9NcyAocykge1xuXHQgIHJldHVybiBOdW1iZXIocy5zbGljZSgwLCAtMSkpICogMTAwMFxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGVudGVyICh2bm9kZSwgdG9nZ2xlRGlzcGxheSkge1xuXHQgIHZhciBlbCA9IHZub2RlLmVsbTtcblx0XG5cdCAgLy8gY2FsbCBsZWF2ZSBjYWxsYmFjayBub3dcblx0ICBpZiAoaXNEZWYoZWwuX2xlYXZlQ2IpKSB7XG5cdCAgICBlbC5fbGVhdmVDYi5jYW5jZWxsZWQgPSB0cnVlO1xuXHQgICAgZWwuX2xlYXZlQ2IoKTtcblx0ICB9XG5cdFxuXHQgIHZhciBkYXRhID0gcmVzb2x2ZVRyYW5zaXRpb24odm5vZGUuZGF0YS50cmFuc2l0aW9uKTtcblx0ICBpZiAoaXNVbmRlZihkYXRhKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNEZWYoZWwuX2VudGVyQ2IpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHZhciBjc3MgPSBkYXRhLmNzcztcblx0ICB2YXIgdHlwZSA9IGRhdGEudHlwZTtcblx0ICB2YXIgZW50ZXJDbGFzcyA9IGRhdGEuZW50ZXJDbGFzcztcblx0ICB2YXIgZW50ZXJUb0NsYXNzID0gZGF0YS5lbnRlclRvQ2xhc3M7XG5cdCAgdmFyIGVudGVyQWN0aXZlQ2xhc3MgPSBkYXRhLmVudGVyQWN0aXZlQ2xhc3M7XG5cdCAgdmFyIGFwcGVhckNsYXNzID0gZGF0YS5hcHBlYXJDbGFzcztcblx0ICB2YXIgYXBwZWFyVG9DbGFzcyA9IGRhdGEuYXBwZWFyVG9DbGFzcztcblx0ICB2YXIgYXBwZWFyQWN0aXZlQ2xhc3MgPSBkYXRhLmFwcGVhckFjdGl2ZUNsYXNzO1xuXHQgIHZhciBiZWZvcmVFbnRlciA9IGRhdGEuYmVmb3JlRW50ZXI7XG5cdCAgdmFyIGVudGVyID0gZGF0YS5lbnRlcjtcblx0ICB2YXIgYWZ0ZXJFbnRlciA9IGRhdGEuYWZ0ZXJFbnRlcjtcblx0ICB2YXIgZW50ZXJDYW5jZWxsZWQgPSBkYXRhLmVudGVyQ2FuY2VsbGVkO1xuXHQgIHZhciBiZWZvcmVBcHBlYXIgPSBkYXRhLmJlZm9yZUFwcGVhcjtcblx0ICB2YXIgYXBwZWFyID0gZGF0YS5hcHBlYXI7XG5cdCAgdmFyIGFmdGVyQXBwZWFyID0gZGF0YS5hZnRlckFwcGVhcjtcblx0ICB2YXIgYXBwZWFyQ2FuY2VsbGVkID0gZGF0YS5hcHBlYXJDYW5jZWxsZWQ7XG5cdCAgdmFyIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjtcblx0XG5cdCAgLy8gYWN0aXZlSW5zdGFuY2Ugd2lsbCBhbHdheXMgYmUgdGhlIDx0cmFuc2l0aW9uPiBjb21wb25lbnQgbWFuYWdpbmcgdGhpc1xuXHQgIC8vIHRyYW5zaXRpb24uIE9uZSBlZGdlIGNhc2UgdG8gY2hlY2sgaXMgd2hlbiB0aGUgPHRyYW5zaXRpb24+IGlzIHBsYWNlZFxuXHQgIC8vIGFzIHRoZSByb290IG5vZGUgb2YgYSBjaGlsZCBjb21wb25lbnQuIEluIHRoYXQgY2FzZSB3ZSBuZWVkIHRvIGNoZWNrXG5cdCAgLy8gPHRyYW5zaXRpb24+J3MgcGFyZW50IGZvciBhcHBlYXIgY2hlY2suXG5cdCAgdmFyIGNvbnRleHQgPSBhY3RpdmVJbnN0YW5jZTtcblx0ICB2YXIgdHJhbnNpdGlvbk5vZGUgPSBhY3RpdmVJbnN0YW5jZS4kdm5vZGU7XG5cdCAgd2hpbGUgKHRyYW5zaXRpb25Ob2RlICYmIHRyYW5zaXRpb25Ob2RlLnBhcmVudCkge1xuXHQgICAgdHJhbnNpdGlvbk5vZGUgPSB0cmFuc2l0aW9uTm9kZS5wYXJlbnQ7XG5cdCAgICBjb250ZXh0ID0gdHJhbnNpdGlvbk5vZGUuY29udGV4dDtcblx0ICB9XG5cdFxuXHQgIHZhciBpc0FwcGVhciA9ICFjb250ZXh0Ll9pc01vdW50ZWQgfHwgIXZub2RlLmlzUm9vdEluc2VydDtcblx0XG5cdCAgaWYgKGlzQXBwZWFyICYmICFhcHBlYXIgJiYgYXBwZWFyICE9PSAnJykge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgc3RhcnRDbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhckNsYXNzXG5cdCAgICA/IGFwcGVhckNsYXNzXG5cdCAgICA6IGVudGVyQ2xhc3M7XG5cdCAgdmFyIGFjdGl2ZUNsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyQWN0aXZlQ2xhc3Ncblx0ICAgID8gYXBwZWFyQWN0aXZlQ2xhc3Ncblx0ICAgIDogZW50ZXJBY3RpdmVDbGFzcztcblx0ICB2YXIgdG9DbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhclRvQ2xhc3Ncblx0ICAgID8gYXBwZWFyVG9DbGFzc1xuXHQgICAgOiBlbnRlclRvQ2xhc3M7XG5cdFxuXHQgIHZhciBiZWZvcmVFbnRlckhvb2sgPSBpc0FwcGVhclxuXHQgICAgPyAoYmVmb3JlQXBwZWFyIHx8IGJlZm9yZUVudGVyKVxuXHQgICAgOiBiZWZvcmVFbnRlcjtcblx0ICB2YXIgZW50ZXJIb29rID0gaXNBcHBlYXJcblx0ICAgID8gKHR5cGVvZiBhcHBlYXIgPT09ICdmdW5jdGlvbicgPyBhcHBlYXIgOiBlbnRlcilcblx0ICAgIDogZW50ZXI7XG5cdCAgdmFyIGFmdGVyRW50ZXJIb29rID0gaXNBcHBlYXJcblx0ICAgID8gKGFmdGVyQXBwZWFyIHx8IGFmdGVyRW50ZXIpXG5cdCAgICA6IGFmdGVyRW50ZXI7XG5cdCAgdmFyIGVudGVyQ2FuY2VsbGVkSG9vayA9IGlzQXBwZWFyXG5cdCAgICA/IChhcHBlYXJDYW5jZWxsZWQgfHwgZW50ZXJDYW5jZWxsZWQpXG5cdCAgICA6IGVudGVyQ2FuY2VsbGVkO1xuXHRcblx0ICB2YXIgZXhwbGljaXRFbnRlckR1cmF0aW9uID0gdG9OdW1iZXIoXG5cdCAgICBpc09iamVjdChkdXJhdGlvbilcblx0ICAgICAgPyBkdXJhdGlvbi5lbnRlclxuXHQgICAgICA6IGR1cmF0aW9uXG5cdCAgKTtcblx0XG5cdCAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGV4cGxpY2l0RW50ZXJEdXJhdGlvbiAhPSBudWxsKSB7XG5cdCAgICBjaGVja0R1cmF0aW9uKGV4cGxpY2l0RW50ZXJEdXJhdGlvbiwgJ2VudGVyJywgdm5vZGUpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGV4cGVjdHNDU1MgPSBjc3MgIT09IGZhbHNlICYmICFpc0lFOTtcblx0ICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgoZW50ZXJIb29rKTtcblx0XG5cdCAgdmFyIGNiID0gZWwuX2VudGVyQ2IgPSBvbmNlKGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChleHBlY3RzQ1NTKSB7XG5cdCAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgdG9DbGFzcyk7XG5cdCAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgYWN0aXZlQ2xhc3MpO1xuXHQgICAgfVxuXHQgICAgaWYgKGNiLmNhbmNlbGxlZCkge1xuXHQgICAgICBpZiAoZXhwZWN0c0NTUykge1xuXHQgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgc3RhcnRDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgICAgZW50ZXJDYW5jZWxsZWRIb29rICYmIGVudGVyQ2FuY2VsbGVkSG9vayhlbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBhZnRlckVudGVySG9vayAmJiBhZnRlckVudGVySG9vayhlbCk7XG5cdCAgICB9XG5cdCAgICBlbC5fZW50ZXJDYiA9IG51bGw7XG5cdCAgfSk7XG5cdFxuXHQgIGlmICghdm5vZGUuZGF0YS5zaG93KSB7XG5cdCAgICAvLyByZW1vdmUgcGVuZGluZyBsZWF2ZSBlbGVtZW50IG9uIGVudGVyIGJ5IGluamVjdGluZyBhbiBpbnNlcnQgaG9va1xuXHQgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdpbnNlcnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuXHQgICAgICB2YXIgcGVuZGluZ05vZGUgPSBwYXJlbnQgJiYgcGFyZW50Ll9wZW5kaW5nICYmIHBhcmVudC5fcGVuZGluZ1t2bm9kZS5rZXldO1xuXHQgICAgICBpZiAocGVuZGluZ05vZGUgJiZcblx0ICAgICAgICBwZW5kaW5nTm9kZS50YWcgPT09IHZub2RlLnRhZyAmJlxuXHQgICAgICAgIHBlbmRpbmdOb2RlLmVsbS5fbGVhdmVDYlxuXHQgICAgICApIHtcblx0ICAgICAgICBwZW5kaW5nTm9kZS5lbG0uX2xlYXZlQ2IoKTtcblx0ICAgICAgfVxuXHQgICAgICBlbnRlckhvb2sgJiYgZW50ZXJIb29rKGVsLCBjYik7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIC8vIHN0YXJ0IGVudGVyIHRyYW5zaXRpb25cblx0ICBiZWZvcmVFbnRlckhvb2sgJiYgYmVmb3JlRW50ZXJIb29rKGVsKTtcblx0ICBpZiAoZXhwZWN0c0NTUykge1xuXHQgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcblx0ICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYWN0aXZlQ2xhc3MpO1xuXHQgICAgbmV4dEZyYW1lKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcblx0ICAgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIHRvQ2xhc3MpO1xuXHQgICAgICAgIGlmICghdXNlcldhbnRzQ29udHJvbCkge1xuXHQgICAgICAgICAgaWYgKGlzVmFsaWREdXJhdGlvbihleHBsaWNpdEVudGVyRHVyYXRpb24pKSB7XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQoY2IsIGV4cGxpY2l0RW50ZXJEdXJhdGlvbik7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGNiKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKHZub2RlLmRhdGEuc2hvdykge1xuXHQgICAgdG9nZ2xlRGlzcGxheSAmJiB0b2dnbGVEaXNwbGF5KCk7XG5cdCAgICBlbnRlckhvb2sgJiYgZW50ZXJIb29rKGVsLCBjYik7XG5cdCAgfVxuXHRcblx0ICBpZiAoIWV4cGVjdHNDU1MgJiYgIXVzZXJXYW50c0NvbnRyb2wpIHtcblx0ICAgIGNiKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsZWF2ZSAodm5vZGUsIHJtKSB7XG5cdCAgdmFyIGVsID0gdm5vZGUuZWxtO1xuXHRcblx0ICAvLyBjYWxsIGVudGVyIGNhbGxiYWNrIG5vd1xuXHQgIGlmIChpc0RlZihlbC5fZW50ZXJDYikpIHtcblx0ICAgIGVsLl9lbnRlckNiLmNhbmNlbGxlZCA9IHRydWU7XG5cdCAgICBlbC5fZW50ZXJDYigpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGRhdGEgPSByZXNvbHZlVHJhbnNpdGlvbih2bm9kZS5kYXRhLnRyYW5zaXRpb24pO1xuXHQgIGlmIChpc1VuZGVmKGRhdGEpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7XG5cdCAgICByZXR1cm4gcm0oKVxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgY3NzID0gZGF0YS5jc3M7XG5cdCAgdmFyIHR5cGUgPSBkYXRhLnR5cGU7XG5cdCAgdmFyIGxlYXZlQ2xhc3MgPSBkYXRhLmxlYXZlQ2xhc3M7XG5cdCAgdmFyIGxlYXZlVG9DbGFzcyA9IGRhdGEubGVhdmVUb0NsYXNzO1xuXHQgIHZhciBsZWF2ZUFjdGl2ZUNsYXNzID0gZGF0YS5sZWF2ZUFjdGl2ZUNsYXNzO1xuXHQgIHZhciBiZWZvcmVMZWF2ZSA9IGRhdGEuYmVmb3JlTGVhdmU7XG5cdCAgdmFyIGxlYXZlID0gZGF0YS5sZWF2ZTtcblx0ICB2YXIgYWZ0ZXJMZWF2ZSA9IGRhdGEuYWZ0ZXJMZWF2ZTtcblx0ICB2YXIgbGVhdmVDYW5jZWxsZWQgPSBkYXRhLmxlYXZlQ2FuY2VsbGVkO1xuXHQgIHZhciBkZWxheUxlYXZlID0gZGF0YS5kZWxheUxlYXZlO1xuXHQgIHZhciBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247XG5cdFxuXHQgIHZhciBleHBlY3RzQ1NTID0gY3NzICE9PSBmYWxzZSAmJiAhaXNJRTk7XG5cdCAgdmFyIHVzZXJXYW50c0NvbnRyb2wgPSBnZXRIb29rQXJndW1lbnRzTGVuZ3RoKGxlYXZlKTtcblx0XG5cdCAgdmFyIGV4cGxpY2l0TGVhdmVEdXJhdGlvbiA9IHRvTnVtYmVyKFxuXHQgICAgaXNPYmplY3QoZHVyYXRpb24pXG5cdCAgICAgID8gZHVyYXRpb24ubGVhdmVcblx0ICAgICAgOiBkdXJhdGlvblxuXHQgICk7XG5cdFxuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBpc0RlZihleHBsaWNpdExlYXZlRHVyYXRpb24pKSB7XG5cdCAgICBjaGVja0R1cmF0aW9uKGV4cGxpY2l0TGVhdmVEdXJhdGlvbiwgJ2xlYXZlJywgdm5vZGUpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGNiID0gZWwuX2xlYXZlQ2IgPSBvbmNlKGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChlbC5wYXJlbnROb2RlICYmIGVsLnBhcmVudE5vZGUuX3BlbmRpbmcpIHtcblx0ICAgICAgZWwucGFyZW50Tm9kZS5fcGVuZGluZ1t2bm9kZS5rZXldID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmIChleHBlY3RzQ1NTKSB7XG5cdCAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcblx0ICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTtcblx0ICAgIH1cblx0ICAgIGlmIChjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgaWYgKGV4cGVjdHNDU1MpIHtcblx0ICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICAgIGxlYXZlQ2FuY2VsbGVkICYmIGxlYXZlQ2FuY2VsbGVkKGVsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJtKCk7XG5cdCAgICAgIGFmdGVyTGVhdmUgJiYgYWZ0ZXJMZWF2ZShlbCk7XG5cdCAgICB9XG5cdCAgICBlbC5fbGVhdmVDYiA9IG51bGw7XG5cdCAgfSk7XG5cdFxuXHQgIGlmIChkZWxheUxlYXZlKSB7XG5cdCAgICBkZWxheUxlYXZlKHBlcmZvcm1MZWF2ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBlcmZvcm1MZWF2ZSgpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcGVyZm9ybUxlYXZlICgpIHtcblx0ICAgIC8vIHRoZSBkZWxheWVkIGxlYXZlIG1heSBoYXZlIGFscmVhZHkgYmVlbiBjYW5jZWxsZWRcblx0ICAgIGlmIChjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdCAgICAvLyByZWNvcmQgbGVhdmluZyBlbGVtZW50XG5cdCAgICBpZiAoIXZub2RlLmRhdGEuc2hvdykge1xuXHQgICAgICAoZWwucGFyZW50Tm9kZS5fcGVuZGluZyB8fCAoZWwucGFyZW50Tm9kZS5fcGVuZGluZyA9IHt9KSlbKHZub2RlLmtleSldID0gdm5vZGU7XG5cdCAgICB9XG5cdCAgICBiZWZvcmVMZWF2ZSAmJiBiZWZvcmVMZWF2ZShlbCk7XG5cdCAgICBpZiAoZXhwZWN0c0NTUykge1xuXHQgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQ2xhc3MpO1xuXHQgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuXHQgICAgICBuZXh0RnJhbWUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7XG5cdCAgICAgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcblx0ICAgICAgICAgIGlmICghdXNlcldhbnRzQ29udHJvbCkge1xuXHQgICAgICAgICAgICBpZiAoaXNWYWxpZER1cmF0aW9uKGV4cGxpY2l0TGVhdmVEdXJhdGlvbikpIHtcblx0ICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCBleHBsaWNpdExlYXZlRHVyYXRpb24pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgY2IpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIGxlYXZlICYmIGxlYXZlKGVsLCBjYik7XG5cdCAgICBpZiAoIWV4cGVjdHNDU1MgJiYgIXVzZXJXYW50c0NvbnRyb2wpIHtcblx0ICAgICAgY2IoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIG9ubHkgdXNlZCBpbiBkZXYgbW9kZVxuXHRmdW5jdGlvbiBjaGVja0R1cmF0aW9uICh2YWwsIG5hbWUsIHZub2RlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIjx0cmFuc2l0aW9uPiBleHBsaWNpdCBcIiArIG5hbWUgKyBcIiBkdXJhdGlvbiBpcyBub3QgYSB2YWxpZCBudW1iZXIgLSBcIiArXG5cdCAgICAgIFwiZ290IFwiICsgKEpTT04uc3RyaW5naWZ5KHZhbCkpICsgXCIuXCIsXG5cdCAgICAgIHZub2RlLmNvbnRleHRcblx0ICAgICk7XG5cdCAgfSBlbHNlIGlmIChpc05hTih2YWwpKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIjx0cmFuc2l0aW9uPiBleHBsaWNpdCBcIiArIG5hbWUgKyBcIiBkdXJhdGlvbiBpcyBOYU4gLSBcIiArXG5cdCAgICAgICd0aGUgZHVyYXRpb24gZXhwcmVzc2lvbiBtaWdodCBiZSBpbmNvcnJlY3QuJyxcblx0ICAgICAgdm5vZGUuY29udGV4dFxuXHQgICAgKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVmFsaWREdXJhdGlvbiAodmFsKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInICYmICFpc05hTih2YWwpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgYSB0cmFuc2l0aW9uIGhvb2sncyBhcmd1bWVudCBsZW5ndGguIFRoZSBob29rIG1heSBiZTpcblx0ICogLSBhIG1lcmdlZCBob29rIChpbnZva2VyKSB3aXRoIHRoZSBvcmlnaW5hbCBpbiAuZm5zXG5cdCAqIC0gYSB3cmFwcGVkIGNvbXBvbmVudCBtZXRob2QgKGNoZWNrIC5fbGVuZ3RoKVxuXHQgKiAtIGEgcGxhaW4gZnVuY3Rpb24gKC5sZW5ndGgpXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRIb29rQXJndW1lbnRzTGVuZ3RoIChmbikge1xuXHQgIGlmIChpc1VuZGVmKGZuKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHQgIHZhciBpbnZva2VyRm5zID0gZm4uZm5zO1xuXHQgIGlmIChpc0RlZihpbnZva2VyRm5zKSkge1xuXHQgICAgLy8gaW52b2tlclxuXHQgICAgcmV0dXJuIGdldEhvb2tBcmd1bWVudHNMZW5ndGgoXG5cdCAgICAgIEFycmF5LmlzQXJyYXkoaW52b2tlckZucylcblx0ICAgICAgICA/IGludm9rZXJGbnNbMF1cblx0ICAgICAgICA6IGludm9rZXJGbnNcblx0ICAgIClcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIChmbi5fbGVuZ3RoIHx8IGZuLmxlbmd0aCkgPiAxXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfZW50ZXIgKF8sIHZub2RlKSB7XG5cdCAgaWYgKHZub2RlLmRhdGEuc2hvdyAhPT0gdHJ1ZSkge1xuXHQgICAgZW50ZXIodm5vZGUpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRyYW5zaXRpb24gPSBpbkJyb3dzZXIgPyB7XG5cdCAgY3JlYXRlOiBfZW50ZXIsXG5cdCAgYWN0aXZhdGU6IF9lbnRlcixcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSQkMSAodm5vZGUsIHJtKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgICAgaWYgKHZub2RlLmRhdGEuc2hvdyAhPT0gdHJ1ZSkge1xuXHQgICAgICBsZWF2ZSh2bm9kZSwgcm0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcm0oKTtcblx0ICAgIH1cblx0ICB9XG5cdH0gOiB7fVxuXHRcblx0dmFyIHBsYXRmb3JtTW9kdWxlcyA9IFtcblx0ICBhdHRycyxcblx0ICBrbGFzcyxcblx0ICBldmVudHMsXG5cdCAgZG9tUHJvcHMsXG5cdCAgc3R5bGUsXG5cdCAgdHJhbnNpdGlvblxuXHRdXG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIHRoZSBkaXJlY3RpdmUgbW9kdWxlIHNob3VsZCBiZSBhcHBsaWVkIGxhc3QsIGFmdGVyIGFsbFxuXHQvLyBidWlsdC1pbiBtb2R1bGVzIGhhdmUgYmVlbiBhcHBsaWVkLlxuXHR2YXIgbW9kdWxlcyA9IHBsYXRmb3JtTW9kdWxlcy5jb25jYXQoYmFzZU1vZHVsZXMpO1xuXHRcblx0dmFyIHBhdGNoID0gY3JlYXRlUGF0Y2hGdW5jdGlvbih7IG5vZGVPcHM6IG5vZGVPcHMsIG1vZHVsZXM6IG1vZHVsZXMgfSk7XG5cdFxuXHQvKipcblx0ICogTm90IHR5cGUgY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgZmxvdyBkb2Vzbid0IGxpa2UgYXR0YWNoaW5nXG5cdCAqIHByb3BlcnRpZXMgdG8gRWxlbWVudHMuXG5cdCAqL1xuXHRcblx0LyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdGlmIChpc0lFOSkge1xuXHQgIC8vIGh0dHA6Ly93d3cubWF0dHM0MTEuY29tL3Bvc3QvaW50ZXJuZXQtZXhwbG9yZXItOS1vbmlucHV0L1xuXHQgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGlvbmNoYW5nZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBlbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cdCAgICBpZiAoZWwgJiYgZWwudm1vZGVsKSB7XG5cdCAgICAgIHRyaWdnZXIoZWwsICdpbnB1dCcpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHQgIGluc2VydGVkOiBmdW5jdGlvbiBpbnNlcnRlZCAoZWwsIGJpbmRpbmcsIHZub2RlLCBvbGRWbm9kZSkge1xuXHQgICAgaWYgKHZub2RlLnRhZyA9PT0gJ3NlbGVjdCcpIHtcblx0ICAgICAgLy8gIzY5MDNcblx0ICAgICAgaWYgKG9sZFZub2RlLmVsbSAmJiAhb2xkVm5vZGUuZWxtLl92T3B0aW9ucykge1xuXHQgICAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAncG9zdHBhdGNoJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgZGlyZWN0aXZlLmNvbXBvbmVudFVwZGF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm5vZGUuY29udGV4dCk7XG5cdCAgICAgIH1cblx0ICAgICAgZWwuX3ZPcHRpb25zID0gW10ubWFwLmNhbGwoZWwub3B0aW9ucywgZ2V0VmFsdWUpO1xuXHQgICAgfSBlbHNlIGlmICh2bm9kZS50YWcgPT09ICd0ZXh0YXJlYScgfHwgaXNUZXh0SW5wdXRUeXBlKGVsLnR5cGUpKSB7XG5cdCAgICAgIGVsLl92TW9kaWZpZXJzID0gYmluZGluZy5tb2RpZmllcnM7XG5cdCAgICAgIGlmICghYmluZGluZy5tb2RpZmllcnMubGF6eSkge1xuXHQgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvc2l0aW9uc3RhcnQnLCBvbkNvbXBvc2l0aW9uU3RhcnQpO1xuXHQgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvc2l0aW9uZW5kJywgb25Db21wb3NpdGlvbkVuZCk7XG5cdCAgICAgICAgLy8gU2FmYXJpIDwgMTAuMiAmIFVJV2ViVmlldyBkb2Vzbid0IGZpcmUgY29tcG9zaXRpb25lbmQgd2hlblxuXHQgICAgICAgIC8vIHN3aXRjaGluZyBmb2N1cyBiZWZvcmUgY29uZmlybWluZyBjb21wb3NpdGlvbiBjaG9pY2Vcblx0ICAgICAgICAvLyB0aGlzIGFsc28gZml4ZXMgdGhlIGlzc3VlIHdoZXJlIHNvbWUgYnJvd3NlcnMgZS5nLiBpT1MgQ2hyb21lXG5cdCAgICAgICAgLy8gZmlyZXMgXCJjaGFuZ2VcIiBpbnN0ZWFkIG9mIFwiaW5wdXRcIiBvbiBhdXRvY29tcGxldGUuXG5cdCAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25Db21wb3NpdGlvbkVuZCk7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKGlzSUU5KSB7XG5cdCAgICAgICAgICBlbC52bW9kZWwgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGNvbXBvbmVudFVwZGF0ZWQ6IGZ1bmN0aW9uIGNvbXBvbmVudFVwZGF0ZWQgKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xuXHQgICAgaWYgKHZub2RlLnRhZyA9PT0gJ3NlbGVjdCcpIHtcblx0ICAgICAgc2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLmNvbnRleHQpO1xuXHQgICAgICAvLyBpbiBjYXNlIHRoZSBvcHRpb25zIHJlbmRlcmVkIGJ5IHYtZm9yIGhhdmUgY2hhbmdlZCxcblx0ICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSB2YWx1ZSBpcyBvdXQtb2Ytc3luYyB3aXRoIHRoZSByZW5kZXJlZCBvcHRpb25zLlxuXHQgICAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZmlsdGVyIG91dCB2YWx1ZXMgdGhhdCBubyBsb25nZXIgaGFzIGEgbWF0Y2hpbmdcblx0ICAgICAgLy8gb3B0aW9uIGluIHRoZSBET00uXG5cdCAgICAgIHZhciBwcmV2T3B0aW9ucyA9IGVsLl92T3B0aW9ucztcblx0ICAgICAgdmFyIGN1ck9wdGlvbnMgPSBlbC5fdk9wdGlvbnMgPSBbXS5tYXAuY2FsbChlbC5vcHRpb25zLCBnZXRWYWx1ZSk7XG5cdCAgICAgIGlmIChjdXJPcHRpb25zLnNvbWUoZnVuY3Rpb24gKG8sIGkpIHsgcmV0dXJuICFsb29zZUVxdWFsKG8sIHByZXZPcHRpb25zW2ldKTsgfSkpIHtcblx0ICAgICAgICAvLyB0cmlnZ2VyIGNoYW5nZSBldmVudCBpZlxuXHQgICAgICAgIC8vIG5vIG1hdGNoaW5nIG9wdGlvbiBmb3VuZCBmb3IgYXQgbGVhc3Qgb25lIHZhbHVlXG5cdCAgICAgICAgdmFyIG5lZWRSZXNldCA9IGVsLm11bHRpcGxlXG5cdCAgICAgICAgICA/IGJpbmRpbmcudmFsdWUuc29tZShmdW5jdGlvbiAodikgeyByZXR1cm4gaGFzTm9NYXRjaGluZ09wdGlvbih2LCBjdXJPcHRpb25zKTsgfSlcblx0ICAgICAgICAgIDogYmluZGluZy52YWx1ZSAhPT0gYmluZGluZy5vbGRWYWx1ZSAmJiBoYXNOb01hdGNoaW5nT3B0aW9uKGJpbmRpbmcudmFsdWUsIGN1ck9wdGlvbnMpO1xuXHQgICAgICAgIGlmIChuZWVkUmVzZXQpIHtcblx0ICAgICAgICAgIHRyaWdnZXIoZWwsICdjaGFuZ2UnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXRTZWxlY3RlZCAoZWwsIGJpbmRpbmcsIHZtKSB7XG5cdCAgYWN0dWFsbHlTZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm0pO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc0lFIHx8IGlzRWRnZSkge1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGFjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZtKTtcblx0ICAgIH0sIDApO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWN0dWFsbHlTZXRTZWxlY3RlZCAoZWwsIGJpbmRpbmcsIHZtKSB7XG5cdCAgdmFyIHZhbHVlID0gYmluZGluZy52YWx1ZTtcblx0ICB2YXIgaXNNdWx0aXBsZSA9IGVsLm11bHRpcGxlO1xuXHQgIGlmIChpc011bHRpcGxlICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgXCI8c2VsZWN0IG11bHRpcGxlIHYtbW9kZWw9XFxcIlwiICsgKGJpbmRpbmcuZXhwcmVzc2lvbikgKyBcIlxcXCI+IFwiICtcblx0ICAgICAgXCJleHBlY3RzIGFuIEFycmF5IHZhbHVlIGZvciBpdHMgYmluZGluZywgYnV0IGdvdCBcIiArIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKSksXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciBzZWxlY3RlZCwgb3B0aW9uO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG9wdGlvbiA9IGVsLm9wdGlvbnNbaV07XG5cdCAgICBpZiAoaXNNdWx0aXBsZSkge1xuXHQgICAgICBzZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgZ2V0VmFsdWUob3B0aW9uKSkgPiAtMTtcblx0ICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCAhPT0gc2VsZWN0ZWQpIHtcblx0ICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSBzZWxlY3RlZDtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGxvb3NlRXF1YWwoZ2V0VmFsdWUob3B0aW9uKSwgdmFsdWUpKSB7XG5cdCAgICAgICAgaWYgKGVsLnNlbGVjdGVkSW5kZXggIT09IGkpIHtcblx0ICAgICAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSBpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm5cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIWlzTXVsdGlwbGUpIHtcblx0ICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhc05vTWF0Y2hpbmdPcHRpb24gKHZhbHVlLCBvcHRpb25zKSB7XG5cdCAgcmV0dXJuIG9wdGlvbnMuZXZlcnkoZnVuY3Rpb24gKG8pIHsgcmV0dXJuICFsb29zZUVxdWFsKG8sIHZhbHVlKTsgfSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VmFsdWUgKG9wdGlvbikge1xuXHQgIHJldHVybiAnX3ZhbHVlJyBpbiBvcHRpb25cblx0ICAgID8gb3B0aW9uLl92YWx1ZVxuXHQgICAgOiBvcHRpb24udmFsdWVcblx0fVxuXHRcblx0ZnVuY3Rpb24gb25Db21wb3NpdGlvblN0YXJ0IChlKSB7XG5cdCAgZS50YXJnZXQuY29tcG9zaW5nID0gdHJ1ZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gb25Db21wb3NpdGlvbkVuZCAoZSkge1xuXHQgIC8vIHByZXZlbnQgdHJpZ2dlcmluZyBhbiBpbnB1dCBldmVudCBmb3Igbm8gcmVhc29uXG5cdCAgaWYgKCFlLnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuIH1cblx0ICBlLnRhcmdldC5jb21wb3NpbmcgPSBmYWxzZTtcblx0ICB0cmlnZ2VyKGUudGFyZ2V0LCAnaW5wdXQnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJpZ2dlciAoZWwsIHR5cGUpIHtcblx0ICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyk7XG5cdCAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG5cdCAgZWwuZGlzcGF0Y2hFdmVudChlKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyByZWN1cnNpdmVseSBzZWFyY2ggZm9yIHBvc3NpYmxlIHRyYW5zaXRpb24gZGVmaW5lZCBpbnNpZGUgdGhlIGNvbXBvbmVudCByb290XG5cdGZ1bmN0aW9uIGxvY2F0ZU5vZGUgKHZub2RlKSB7XG5cdCAgcmV0dXJuIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmICghdm5vZGUuZGF0YSB8fCAhdm5vZGUuZGF0YS50cmFuc2l0aW9uKVxuXHQgICAgPyBsb2NhdGVOb2RlKHZub2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSlcblx0ICAgIDogdm5vZGVcblx0fVxuXHRcblx0dmFyIHNob3cgPSB7XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCAoZWwsIHJlZiwgdm5vZGUpIHtcblx0ICAgIHZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcblx0XG5cdCAgICB2bm9kZSA9IGxvY2F0ZU5vZGUodm5vZGUpO1xuXHQgICAgdmFyIHRyYW5zaXRpb24kJDEgPSB2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEudHJhbnNpdGlvbjtcblx0ICAgIHZhciBvcmlnaW5hbERpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXkgPVxuXHQgICAgICBlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnJyA6IGVsLnN0eWxlLmRpc3BsYXk7XG5cdCAgICBpZiAodmFsdWUgJiYgdHJhbnNpdGlvbiQkMSkge1xuXHQgICAgICB2bm9kZS5kYXRhLnNob3cgPSB0cnVlO1xuXHQgICAgICBlbnRlcih2bm9kZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBvcmlnaW5hbERpc3BsYXk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gb3JpZ2luYWxEaXNwbGF5IDogJ25vbmUnO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlIChlbCwgcmVmLCB2bm9kZSkge1xuXHQgICAgdmFyIHZhbHVlID0gcmVmLnZhbHVlO1xuXHQgICAgdmFyIG9sZFZhbHVlID0gcmVmLm9sZFZhbHVlO1xuXHRcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCF2YWx1ZSA9PT0gIW9sZFZhbHVlKSB7IHJldHVybiB9XG5cdCAgICB2bm9kZSA9IGxvY2F0ZU5vZGUodm5vZGUpO1xuXHQgICAgdmFyIHRyYW5zaXRpb24kJDEgPSB2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEudHJhbnNpdGlvbjtcblx0ICAgIGlmICh0cmFuc2l0aW9uJCQxKSB7XG5cdCAgICAgIHZub2RlLmRhdGEuc2hvdyA9IHRydWU7XG5cdCAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgIGVudGVyKHZub2RlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5O1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxlYXZlKHZub2RlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBlbC5fX3ZPcmlnaW5hbERpc3BsYXkgOiAnbm9uZSc7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQgKFxuXHQgICAgZWwsXG5cdCAgICBiaW5kaW5nLFxuXHQgICAgdm5vZGUsXG5cdCAgICBvbGRWbm9kZSxcblx0ICAgIGlzRGVzdHJveVxuXHQgICkge1xuXHQgICAgaWYgKCFpc0Rlc3Ryb3kpIHtcblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IGVsLl9fdk9yaWdpbmFsRGlzcGxheTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBwbGF0Zm9ybURpcmVjdGl2ZXMgPSB7XG5cdCAgbW9kZWw6IGRpcmVjdGl2ZSxcblx0ICBzaG93OiBzaG93XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gUHJvdmlkZXMgdHJhbnNpdGlvbiBzdXBwb3J0IGZvciBhIHNpbmdsZSBlbGVtZW50L2NvbXBvbmVudC5cblx0Ly8gc3VwcG9ydHMgdHJhbnNpdGlvbiBtb2RlIChvdXQtaW4gLyBpbi1vdXQpXG5cdFxuXHR2YXIgdHJhbnNpdGlvblByb3BzID0ge1xuXHQgIG5hbWU6IFN0cmluZyxcblx0ICBhcHBlYXI6IEJvb2xlYW4sXG5cdCAgY3NzOiBCb29sZWFuLFxuXHQgIG1vZGU6IFN0cmluZyxcblx0ICB0eXBlOiBTdHJpbmcsXG5cdCAgZW50ZXJDbGFzczogU3RyaW5nLFxuXHQgIGxlYXZlQ2xhc3M6IFN0cmluZyxcblx0ICBlbnRlclRvQ2xhc3M6IFN0cmluZyxcblx0ICBsZWF2ZVRvQ2xhc3M6IFN0cmluZyxcblx0ICBlbnRlckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG5cdCAgbGVhdmVBY3RpdmVDbGFzczogU3RyaW5nLFxuXHQgIGFwcGVhckNsYXNzOiBTdHJpbmcsXG5cdCAgYXBwZWFyQWN0aXZlQ2xhc3M6IFN0cmluZyxcblx0ICBhcHBlYXJUb0NsYXNzOiBTdHJpbmcsXG5cdCAgZHVyYXRpb246IFtOdW1iZXIsIFN0cmluZywgT2JqZWN0XVxuXHR9O1xuXHRcblx0Ly8gaW4gY2FzZSB0aGUgY2hpbGQgaXMgYWxzbyBhbiBhYnN0cmFjdCBjb21wb25lbnQsIGUuZy4gPGtlZXAtYWxpdmU+XG5cdC8vIHdlIHdhbnQgdG8gcmVjdXJzaXZlbHkgcmV0cmlldmUgdGhlIHJlYWwgY29tcG9uZW50IHRvIGJlIHJlbmRlcmVkXG5cdGZ1bmN0aW9uIGdldFJlYWxDaGlsZCAodm5vZGUpIHtcblx0ICB2YXIgY29tcE9wdGlvbnMgPSB2bm9kZSAmJiB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuXHQgIGlmIChjb21wT3B0aW9ucyAmJiBjb21wT3B0aW9ucy5DdG9yLm9wdGlvbnMuYWJzdHJhY3QpIHtcblx0ICAgIHJldHVybiBnZXRSZWFsQ2hpbGQoZ2V0Rmlyc3RDb21wb25lbnRDaGlsZChjb21wT3B0aW9ucy5jaGlsZHJlbikpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB2bm9kZVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdFRyYW5zaXRpb25EYXRhIChjb21wKSB7XG5cdCAgdmFyIGRhdGEgPSB7fTtcblx0ICB2YXIgb3B0aW9ucyA9IGNvbXAuJG9wdGlvbnM7XG5cdCAgLy8gcHJvcHNcblx0ICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5wcm9wc0RhdGEpIHtcblx0ICAgIGRhdGFba2V5XSA9IGNvbXBba2V5XTtcblx0ICB9XG5cdCAgLy8gZXZlbnRzLlxuXHQgIC8vIGV4dHJhY3QgbGlzdGVuZXJzIGFuZCBwYXNzIHRoZW0gZGlyZWN0bHkgdG8gdGhlIHRyYW5zaXRpb24gbWV0aG9kc1xuXHQgIHZhciBsaXN0ZW5lcnMgPSBvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7XG5cdCAgZm9yICh2YXIga2V5JDEgaW4gbGlzdGVuZXJzKSB7XG5cdCAgICBkYXRhW2NhbWVsaXplKGtleSQxKV0gPSBsaXN0ZW5lcnNba2V5JDFdO1xuXHQgIH1cblx0ICByZXR1cm4gZGF0YVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwbGFjZWhvbGRlciAoaCwgcmF3Q2hpbGQpIHtcblx0ICBpZiAoL1xcZC1rZWVwLWFsaXZlJC8udGVzdChyYXdDaGlsZC50YWcpKSB7XG5cdCAgICByZXR1cm4gaCgna2VlcC1hbGl2ZScsIHtcblx0ICAgICAgcHJvcHM6IHJhd0NoaWxkLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhXG5cdCAgICB9KVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFzUGFyZW50VHJhbnNpdGlvbiAodm5vZGUpIHtcblx0ICB3aGlsZSAoKHZub2RlID0gdm5vZGUucGFyZW50KSkge1xuXHQgICAgaWYgKHZub2RlLmRhdGEudHJhbnNpdGlvbikge1xuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNTYW1lQ2hpbGQgKGNoaWxkLCBvbGRDaGlsZCkge1xuXHQgIHJldHVybiBvbGRDaGlsZC5rZXkgPT09IGNoaWxkLmtleSAmJiBvbGRDaGlsZC50YWcgPT09IGNoaWxkLnRhZ1xuXHR9XG5cdFxuXHR2YXIgVHJhbnNpdGlvbiA9IHtcblx0ICBuYW1lOiAndHJhbnNpdGlvbicsXG5cdCAgcHJvcHM6IHRyYW5zaXRpb25Qcm9wcyxcblx0ICBhYnN0cmFjdDogdHJ1ZSxcblx0XG5cdCAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKGgpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJHNsb3RzLmRlZmF1bHQ7XG5cdCAgICBpZiAoIWNoaWxkcmVuKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGZpbHRlciBvdXQgdGV4dCBub2RlcyAocG9zc2libGUgd2hpdGVzcGFjZXMpXG5cdCAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy50YWcgfHwgaXNBc3luY1BsYWNlaG9sZGVyKGMpOyB9KTtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgLy8gd2FybiBtdWx0aXBsZSBlbGVtZW50c1xuXHQgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgd2Fybihcblx0ICAgICAgICAnPHRyYW5zaXRpb24+IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBzaW5nbGUgZWxlbWVudC4gVXNlICcgK1xuXHQgICAgICAgICc8dHJhbnNpdGlvbi1ncm91cD4gZm9yIGxpc3RzLicsXG5cdCAgICAgICAgdGhpcy4kcGFyZW50XG5cdCAgICAgICk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1vZGUgPSB0aGlzLm1vZGU7XG5cdFxuXHQgICAgLy8gd2FybiBpbnZhbGlkIG1vZGVcblx0ICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgICBtb2RlICYmIG1vZGUgIT09ICdpbi1vdXQnICYmIG1vZGUgIT09ICdvdXQtaW4nXG5cdCAgICApIHtcblx0ICAgICAgd2Fybihcblx0ICAgICAgICAnaW52YWxpZCA8dHJhbnNpdGlvbj4gbW9kZTogJyArIG1vZGUsXG5cdCAgICAgICAgdGhpcy4kcGFyZW50XG5cdCAgICAgICk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJhd0NoaWxkID0gY2hpbGRyZW5bMF07XG5cdFxuXHQgICAgLy8gaWYgdGhpcyBpcyBhIGNvbXBvbmVudCByb290IG5vZGUgYW5kIHRoZSBjb21wb25lbnQnc1xuXHQgICAgLy8gcGFyZW50IGNvbnRhaW5lciBub2RlIGFsc28gaGFzIHRyYW5zaXRpb24sIHNraXAuXG5cdCAgICBpZiAoaGFzUGFyZW50VHJhbnNpdGlvbih0aGlzLiR2bm9kZSkpIHtcblx0ICAgICAgcmV0dXJuIHJhd0NoaWxkXG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYXBwbHkgdHJhbnNpdGlvbiBkYXRhIHRvIGNoaWxkXG5cdCAgICAvLyB1c2UgZ2V0UmVhbENoaWxkKCkgdG8gaWdub3JlIGFic3RyYWN0IGNvbXBvbmVudHMgZS5nLiBrZWVwLWFsaXZlXG5cdCAgICB2YXIgY2hpbGQgPSBnZXRSZWFsQ2hpbGQocmF3Q2hpbGQpO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIWNoaWxkKSB7XG5cdCAgICAgIHJldHVybiByYXdDaGlsZFxuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0aGlzLl9sZWF2aW5nKSB7XG5cdCAgICAgIHJldHVybiBwbGFjZWhvbGRlcihoLCByYXdDaGlsZClcblx0ICAgIH1cblx0XG5cdCAgICAvLyBlbnN1cmUgYSBrZXkgdGhhdCBpcyB1bmlxdWUgdG8gdGhlIHZub2RlIHR5cGUgYW5kIHRvIHRoaXMgdHJhbnNpdGlvblxuXHQgICAgLy8gY29tcG9uZW50IGluc3RhbmNlLiBUaGlzIGtleSB3aWxsIGJlIHVzZWQgdG8gcmVtb3ZlIHBlbmRpbmcgbGVhdmluZyBub2Rlc1xuXHQgICAgLy8gZHVyaW5nIGVudGVyaW5nLlxuXHQgICAgdmFyIGlkID0gXCJfX3RyYW5zaXRpb24tXCIgKyAodGhpcy5fdWlkKSArIFwiLVwiO1xuXHQgICAgY2hpbGQua2V5ID0gY2hpbGQua2V5ID09IG51bGxcblx0ICAgICAgPyBjaGlsZC5pc0NvbW1lbnRcblx0ICAgICAgICA/IGlkICsgJ2NvbW1lbnQnXG5cdCAgICAgICAgOiBpZCArIGNoaWxkLnRhZ1xuXHQgICAgICA6IGlzUHJpbWl0aXZlKGNoaWxkLmtleSlcblx0ICAgICAgICA/IChTdHJpbmcoY2hpbGQua2V5KS5pbmRleE9mKGlkKSA9PT0gMCA/IGNoaWxkLmtleSA6IGlkICsgY2hpbGQua2V5KVxuXHQgICAgICAgIDogY2hpbGQua2V5O1xuXHRcblx0ICAgIHZhciBkYXRhID0gKGNoaWxkLmRhdGEgfHwgKGNoaWxkLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7XG5cdCAgICB2YXIgb2xkUmF3Q2hpbGQgPSB0aGlzLl92bm9kZTtcblx0ICAgIHZhciBvbGRDaGlsZCA9IGdldFJlYWxDaGlsZChvbGRSYXdDaGlsZCk7XG5cdFxuXHQgICAgLy8gbWFyayB2LXNob3dcblx0ICAgIC8vIHNvIHRoYXQgdGhlIHRyYW5zaXRpb24gbW9kdWxlIGNhbiBoYW5kIG92ZXIgdGhlIGNvbnRyb2wgdG8gdGhlIGRpcmVjdGl2ZVxuXHQgICAgaWYgKGNoaWxkLmRhdGEuZGlyZWN0aXZlcyAmJiBjaGlsZC5kYXRhLmRpcmVjdGl2ZXMuc29tZShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lID09PSAnc2hvdyc7IH0pKSB7XG5cdCAgICAgIGNoaWxkLmRhdGEuc2hvdyA9IHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKFxuXHQgICAgICBvbGRDaGlsZCAmJlxuXHQgICAgICBvbGRDaGlsZC5kYXRhICYmXG5cdCAgICAgICFpc1NhbWVDaGlsZChjaGlsZCwgb2xkQ2hpbGQpICYmXG5cdCAgICAgICFpc0FzeW5jUGxhY2Vob2xkZXIob2xkQ2hpbGQpICYmXG5cdCAgICAgIC8vICM2Njg3IGNvbXBvbmVudCByb290IGlzIGEgY29tbWVudCBub2RlXG5cdCAgICAgICEob2xkQ2hpbGQuY29tcG9uZW50SW5zdGFuY2UgJiYgb2xkQ2hpbGQuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlLmlzQ29tbWVudClcblx0ICAgICkge1xuXHQgICAgICAvLyByZXBsYWNlIG9sZCBjaGlsZCB0cmFuc2l0aW9uIGRhdGEgd2l0aCBmcmVzaCBvbmVcblx0ICAgICAgLy8gaW1wb3J0YW50IGZvciBkeW5hbWljIHRyYW5zaXRpb25zIVxuXHQgICAgICB2YXIgb2xkRGF0YSA9IG9sZENoaWxkLmRhdGEudHJhbnNpdGlvbiA9IGV4dGVuZCh7fSwgZGF0YSk7XG5cdCAgICAgIC8vIGhhbmRsZSB0cmFuc2l0aW9uIG1vZGVcblx0ICAgICAgaWYgKG1vZGUgPT09ICdvdXQtaW4nKSB7XG5cdCAgICAgICAgLy8gcmV0dXJuIHBsYWNlaG9sZGVyIG5vZGUgYW5kIHF1ZXVlIHVwZGF0ZSB3aGVuIGxlYXZlIGZpbmlzaGVzXG5cdCAgICAgICAgdGhpcy5fbGVhdmluZyA9IHRydWU7XG5cdCAgICAgICAgbWVyZ2VWTm9kZUhvb2sob2xkRGF0YSwgJ2FmdGVyTGVhdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0aGlzJDEuX2xlYXZpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgIHRoaXMkMS4kZm9yY2VVcGRhdGUoKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gcGxhY2Vob2xkZXIoaCwgcmF3Q2hpbGQpXG5cdCAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2luLW91dCcpIHtcblx0ICAgICAgICBpZiAoaXNBc3luY1BsYWNlaG9sZGVyKGNoaWxkKSkge1xuXHQgICAgICAgICAgcmV0dXJuIG9sZFJhd0NoaWxkXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBkZWxheWVkTGVhdmU7XG5cdCAgICAgICAgdmFyIHBlcmZvcm1MZWF2ZSA9IGZ1bmN0aW9uICgpIHsgZGVsYXllZExlYXZlKCk7IH07XG5cdCAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2FmdGVyRW50ZXInLCBwZXJmb3JtTGVhdmUpO1xuXHQgICAgICAgIG1lcmdlVk5vZGVIb29rKGRhdGEsICdlbnRlckNhbmNlbGxlZCcsIHBlcmZvcm1MZWF2ZSk7XG5cdCAgICAgICAgbWVyZ2VWTm9kZUhvb2sob2xkRGF0YSwgJ2RlbGF5TGVhdmUnLCBmdW5jdGlvbiAobGVhdmUpIHsgZGVsYXllZExlYXZlID0gbGVhdmU7IH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHJhd0NoaWxkXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIFByb3ZpZGVzIHRyYW5zaXRpb24gc3VwcG9ydCBmb3IgbGlzdCBpdGVtcy5cblx0Ly8gc3VwcG9ydHMgbW92ZSB0cmFuc2l0aW9ucyB1c2luZyB0aGUgRkxJUCB0ZWNobmlxdWUuXG5cdFxuXHQvLyBCZWNhdXNlIHRoZSB2ZG9tJ3MgY2hpbGRyZW4gdXBkYXRlIGFsZ29yaXRobSBpcyBcInVuc3RhYmxlXCIgLSBpLmUuXG5cdC8vIGl0IGRvZXNuJ3QgZ3VhcmFudGVlIHRoZSByZWxhdGl2ZSBwb3NpdGlvbmluZyBvZiByZW1vdmVkIGVsZW1lbnRzLFxuXHQvLyB3ZSBmb3JjZSB0cmFuc2l0aW9uLWdyb3VwIHRvIHVwZGF0ZSBpdHMgY2hpbGRyZW4gaW50byB0d28gcGFzc2VzOlxuXHQvLyBpbiB0aGUgZmlyc3QgcGFzcywgd2UgcmVtb3ZlIGFsbCBub2RlcyB0aGF0IG5lZWQgdG8gYmUgcmVtb3ZlZCxcblx0Ly8gdHJpZ2dlcmluZyB0aGVpciBsZWF2aW5nIHRyYW5zaXRpb247IGluIHRoZSBzZWNvbmQgcGFzcywgd2UgaW5zZXJ0L21vdmVcblx0Ly8gaW50byB0aGUgZmluYWwgZGVzaXJlZCBzdGF0ZS4gVGhpcyB3YXkgaW4gdGhlIHNlY29uZCBwYXNzIHJlbW92ZWRcblx0Ly8gbm9kZXMgd2lsbCByZW1haW4gd2hlcmUgdGhleSBzaG91bGQgYmUuXG5cdFxuXHR2YXIgcHJvcHMgPSBleHRlbmQoe1xuXHQgIHRhZzogU3RyaW5nLFxuXHQgIG1vdmVDbGFzczogU3RyaW5nXG5cdH0sIHRyYW5zaXRpb25Qcm9wcyk7XG5cdFxuXHRkZWxldGUgcHJvcHMubW9kZTtcblx0XG5cdHZhciBUcmFuc2l0aW9uR3JvdXAgPSB7XG5cdCAgcHJvcHM6IHByb3BzLFxuXHRcblx0ICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoaCkge1xuXHQgICAgdmFyIHRhZyA9IHRoaXMudGFnIHx8IHRoaXMuJHZub2RlLmRhdGEudGFnIHx8ICdzcGFuJztcblx0ICAgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMucHJldkNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjtcblx0ICAgIHZhciByYXdDaGlsZHJlbiA9IHRoaXMuJHNsb3RzLmRlZmF1bHQgfHwgW107XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuID0gW107XG5cdCAgICB2YXIgdHJhbnNpdGlvbkRhdGEgPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXdDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgYyA9IHJhd0NoaWxkcmVuW2ldO1xuXHQgICAgICBpZiAoYy50YWcpIHtcblx0ICAgICAgICBpZiAoYy5rZXkgIT0gbnVsbCAmJiBTdHJpbmcoYy5rZXkpLmluZGV4T2YoJ19fdmxpc3QnKSAhPT0gMCkge1xuXHQgICAgICAgICAgY2hpbGRyZW4ucHVzaChjKTtcblx0ICAgICAgICAgIG1hcFtjLmtleV0gPSBjXG5cdCAgICAgICAgICA7KGMuZGF0YSB8fCAoYy5kYXRhID0ge30pKS50cmFuc2l0aW9uID0gdHJhbnNpdGlvbkRhdGE7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZhciBvcHRzID0gYy5jb21wb25lbnRPcHRpb25zO1xuXHQgICAgICAgICAgdmFyIG5hbWUgPSBvcHRzID8gKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcgfHwgJycpIDogYy50YWc7XG5cdCAgICAgICAgICB3YXJuKChcIjx0cmFuc2l0aW9uLWdyb3VwPiBjaGlsZHJlbiBtdXN0IGJlIGtleWVkOiA8XCIgKyBuYW1lICsgXCI+XCIpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAocHJldkNoaWxkcmVuKSB7XG5cdCAgICAgIHZhciBrZXB0ID0gW107XG5cdCAgICAgIHZhciByZW1vdmVkID0gW107XG5cdCAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHByZXZDaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7XG5cdCAgICAgICAgdmFyIGMkMSA9IHByZXZDaGlsZHJlbltpJDFdO1xuXHQgICAgICAgIGMkMS5kYXRhLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRGF0YTtcblx0ICAgICAgICBjJDEuZGF0YS5wb3MgPSBjJDEuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgICAgIGlmIChtYXBbYyQxLmtleV0pIHtcblx0ICAgICAgICAgIGtlcHQucHVzaChjJDEpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZW1vdmVkLnB1c2goYyQxKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5rZXB0ID0gaCh0YWcsIG51bGwsIGtlcHQpO1xuXHQgICAgICB0aGlzLnJlbW92ZWQgPSByZW1vdmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBoKHRhZywgbnVsbCwgY2hpbGRyZW4pXG5cdCAgfSxcblx0XG5cdCAgYmVmb3JlVXBkYXRlOiBmdW5jdGlvbiBiZWZvcmVVcGRhdGUgKCkge1xuXHQgICAgLy8gZm9yY2UgcmVtb3ZpbmcgcGFzc1xuXHQgICAgdGhpcy5fX3BhdGNoX18oXG5cdCAgICAgIHRoaXMuX3Zub2RlLFxuXHQgICAgICB0aGlzLmtlcHQsXG5cdCAgICAgIGZhbHNlLCAvLyBoeWRyYXRpbmdcblx0ICAgICAgdHJ1ZSAvLyByZW1vdmVPbmx5ICghaW1wb3J0YW50LCBhdm9pZHMgdW5uZWNlc3NhcnkgbW92ZXMpXG5cdCAgICApO1xuXHQgICAgdGhpcy5fdm5vZGUgPSB0aGlzLmtlcHQ7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlZDogZnVuY3Rpb24gdXBkYXRlZCAoKSB7XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByZXZDaGlsZHJlbjtcblx0ICAgIHZhciBtb3ZlQ2xhc3MgPSB0aGlzLm1vdmVDbGFzcyB8fCAoKHRoaXMubmFtZSB8fCAndicpICsgJy1tb3ZlJyk7XG5cdCAgICBpZiAoIWNoaWxkcmVuLmxlbmd0aCB8fCAhdGhpcy5oYXNNb3ZlKGNoaWxkcmVuWzBdLmVsbSwgbW92ZUNsYXNzKSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICAvLyB3ZSBkaXZpZGUgdGhlIHdvcmsgaW50byB0aHJlZSBsb29wcyB0byBhdm9pZCBtaXhpbmcgRE9NIHJlYWRzIGFuZCB3cml0ZXNcblx0ICAgIC8vIGluIGVhY2ggaXRlcmF0aW9uIC0gd2hpY2ggaGVscHMgcHJldmVudCBsYXlvdXQgdGhyYXNoaW5nLlxuXHQgICAgY2hpbGRyZW4uZm9yRWFjaChjYWxsUGVuZGluZ0Nicyk7XG5cdCAgICBjaGlsZHJlbi5mb3JFYWNoKHJlY29yZFBvc2l0aW9uKTtcblx0ICAgIGNoaWxkcmVuLmZvckVhY2goYXBwbHlUcmFuc2xhdGlvbik7XG5cdFxuXHQgICAgLy8gZm9yY2UgcmVmbG93IHRvIHB1dCBldmVyeXRoaW5nIGluIHBvc2l0aW9uXG5cdCAgICAvLyBhc3NpZ24gdG8gdGhpcyB0byBhdm9pZCBiZWluZyByZW1vdmVkIGluIHRyZWUtc2hha2luZ1xuXHQgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICB0aGlzLl9yZWZsb3cgPSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDtcblx0XG5cdCAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG5cdCAgICAgIGlmIChjLmRhdGEubW92ZWQpIHtcblx0ICAgICAgICB2YXIgZWwgPSBjLmVsbTtcblx0ICAgICAgICB2YXIgcyA9IGVsLnN0eWxlO1xuXHQgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcblx0ICAgICAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnJztcblx0ICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmRFdmVudCwgZWwuX21vdmVDYiA9IGZ1bmN0aW9uIGNiIChlKSB7XG5cdCAgICAgICAgICBpZiAoIWUgfHwgL3RyYW5zZm9ybSQvLnRlc3QoZS5wcm9wZXJ0eU5hbWUpKSB7XG5cdCAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCBjYik7XG5cdCAgICAgICAgICAgIGVsLl9tb3ZlQ2IgPSBudWxsO1xuXHQgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIGhhc01vdmU6IGZ1bmN0aW9uIGhhc01vdmUgKGVsLCBtb3ZlQ2xhc3MpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghaGFzVHJhbnNpdGlvbikge1xuXHQgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICB9XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAodGhpcy5faGFzTW92ZSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9oYXNNb3ZlXG5cdCAgICAgIH1cblx0ICAgICAgLy8gRGV0ZWN0IHdoZXRoZXIgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3ZlIGNsYXNzIGFwcGxpZWQgaGFzXG5cdCAgICAgIC8vIENTUyB0cmFuc2l0aW9ucy4gU2luY2UgdGhlIGVsZW1lbnQgbWF5IGJlIGluc2lkZSBhbiBlbnRlcmluZ1xuXHQgICAgICAvLyB0cmFuc2l0aW9uIGF0IHRoaXMgdmVyeSBtb21lbnQsIHdlIG1ha2UgYSBjbG9uZSBvZiBpdCBhbmQgcmVtb3ZlXG5cdCAgICAgIC8vIGFsbCBvdGhlciB0cmFuc2l0aW9uIGNsYXNzZXMgYXBwbGllZCB0byBlbnN1cmUgb25seSB0aGUgbW92ZSBjbGFzc1xuXHQgICAgICAvLyBpcyBhcHBsaWVkLlxuXHQgICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTtcblx0ICAgICAgaWYgKGVsLl90cmFuc2l0aW9uQ2xhc3Nlcykge1xuXHQgICAgICAgIGVsLl90cmFuc2l0aW9uQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHsgcmVtb3ZlQ2xhc3MoY2xvbmUsIGNscyk7IH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGFkZENsYXNzKGNsb25lLCBtb3ZlQ2xhc3MpO1xuXHQgICAgICBjbG9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHQgICAgICB0aGlzLiRlbC5hcHBlbmRDaGlsZChjbG9uZSk7XG5cdCAgICAgIHZhciBpbmZvID0gZ2V0VHJhbnNpdGlvbkluZm8oY2xvbmUpO1xuXHQgICAgICB0aGlzLiRlbC5yZW1vdmVDaGlsZChjbG9uZSk7XG5cdCAgICAgIHJldHVybiAodGhpcy5faGFzTW92ZSA9IGluZm8uaGFzVHJhbnNmb3JtKVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsbFBlbmRpbmdDYnMgKGMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoYy5lbG0uX21vdmVDYikge1xuXHQgICAgYy5lbG0uX21vdmVDYigpO1xuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoYy5lbG0uX2VudGVyQ2IpIHtcblx0ICAgIGMuZWxtLl9lbnRlckNiKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWNvcmRQb3NpdGlvbiAoYykge1xuXHQgIGMuZGF0YS5uZXdQb3MgPSBjLmVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbiAoYykge1xuXHQgIHZhciBvbGRQb3MgPSBjLmRhdGEucG9zO1xuXHQgIHZhciBuZXdQb3MgPSBjLmRhdGEubmV3UG9zO1xuXHQgIHZhciBkeCA9IG9sZFBvcy5sZWZ0IC0gbmV3UG9zLmxlZnQ7XG5cdCAgdmFyIGR5ID0gb2xkUG9zLnRvcCAtIG5ld1Bvcy50b3A7XG5cdCAgaWYgKGR4IHx8IGR5KSB7XG5cdCAgICBjLmRhdGEubW92ZWQgPSB0cnVlO1xuXHQgICAgdmFyIHMgPSBjLmVsbS5zdHlsZTtcblx0ICAgIHMudHJhbnNmb3JtID0gcy5XZWJraXRUcmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIGR4ICsgXCJweCxcIiArIGR5ICsgXCJweClcIjtcblx0ICAgIHMudHJhbnNpdGlvbkR1cmF0aW9uID0gJzBzJztcblx0ICB9XG5cdH1cblx0XG5cdHZhciBwbGF0Zm9ybUNvbXBvbmVudHMgPSB7XG5cdCAgVHJhbnNpdGlvbjogVHJhbnNpdGlvbixcblx0ICBUcmFuc2l0aW9uR3JvdXA6IFRyYW5zaXRpb25Hcm91cFxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIGluc3RhbGwgcGxhdGZvcm0gc3BlY2lmaWMgdXRpbHNcblx0VnVlLmNvbmZpZy5tdXN0VXNlUHJvcCA9IG11c3RVc2VQcm9wO1xuXHRWdWUuY29uZmlnLmlzUmVzZXJ2ZWRUYWcgPSBpc1Jlc2VydmVkVGFnO1xuXHRWdWUuY29uZmlnLmlzUmVzZXJ2ZWRBdHRyID0gaXNSZXNlcnZlZEF0dHI7XG5cdFZ1ZS5jb25maWcuZ2V0VGFnTmFtZXNwYWNlID0gZ2V0VGFnTmFtZXNwYWNlO1xuXHRWdWUuY29uZmlnLmlzVW5rbm93bkVsZW1lbnQgPSBpc1Vua25vd25FbGVtZW50O1xuXHRcblx0Ly8gaW5zdGFsbCBwbGF0Zm9ybSBydW50aW1lIGRpcmVjdGl2ZXMgJiBjb21wb25lbnRzXG5cdGV4dGVuZChWdWUub3B0aW9ucy5kaXJlY3RpdmVzLCBwbGF0Zm9ybURpcmVjdGl2ZXMpO1xuXHRleHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgcGxhdGZvcm1Db21wb25lbnRzKTtcblx0XG5cdC8vIGluc3RhbGwgcGxhdGZvcm0gcGF0Y2ggZnVuY3Rpb25cblx0VnVlLnByb3RvdHlwZS5fX3BhdGNoX18gPSBpbkJyb3dzZXIgPyBwYXRjaCA6IG5vb3A7XG5cdFxuXHQvLyBwdWJsaWMgbW91bnQgbWV0aG9kXG5cdFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKFxuXHQgIGVsLFxuXHQgIGh5ZHJhdGluZ1xuXHQpIHtcblx0ICBlbCA9IGVsICYmIGluQnJvd3NlciA/IHF1ZXJ5KGVsKSA6IHVuZGVmaW5lZDtcblx0ICByZXR1cm4gbW91bnRDb21wb25lbnQodGhpcywgZWwsIGh5ZHJhdGluZylcblx0fTtcblx0XG5cdC8vIGRldnRvb2xzIGdsb2JhbCBob29rXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGlmIChpbkJyb3dzZXIpIHtcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgICAgaWYgKGRldnRvb2xzKSB7XG5cdCAgICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoXG5cdCAgICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICAgICBcImRldmVsb3BtZW50XCIgIT09ICd0ZXN0JyAmJlxuXHQgICAgICAgIGlzQ2hyb21lXG5cdCAgICAgICkge1xuXHQgICAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKFxuXHQgICAgICAgICAgJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZXh0ZW5zaW9uIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgK1xuXHQgICAgICAgICAgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Rlc3QnICYmXG5cdCAgICAgIGNvbmZpZy5wcm9kdWN0aW9uVGlwICE9PSBmYWxzZSAmJlxuXHQgICAgICB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCdcblx0ICAgICkge1xuXHQgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXShcblx0ICAgICAgICBcIllvdSBhcmUgcnVubmluZyBWdWUgaW4gZGV2ZWxvcG1lbnQgbW9kZS5cXG5cIiArXG5cdCAgICAgICAgXCJNYWtlIHN1cmUgdG8gdHVybiBvbiBwcm9kdWN0aW9uIG1vZGUgd2hlbiBkZXBsb3lpbmcgZm9yIHByb2R1Y3Rpb24uXFxuXCIgK1xuXHQgICAgICAgIFwiU2VlIG1vcmUgdGlwcyBhdCBodHRwczovL3Z1ZWpzLm9yZy9ndWlkZS9kZXBsb3ltZW50Lmh0bWxcIlxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH0sIDApO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBkZWZhdWx0VGFnUkUgPSAvXFx7XFx7KCg/Oi58XFxuKSs/KVxcfVxcfS9nO1xuXHR2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG5cdFxuXHR2YXIgYnVpbGRSZWdleCA9IGNhY2hlZChmdW5jdGlvbiAoZGVsaW1pdGVycykge1xuXHQgIHZhciBvcGVuID0gZGVsaW1pdGVyc1swXS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcblx0ICB2YXIgY2xvc2UgPSBkZWxpbWl0ZXJzWzFdLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpO1xuXHQgIHJldHVybiBuZXcgUmVnRXhwKG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpXG5cdH0pO1xuXHRcblx0XG5cdFxuXHRmdW5jdGlvbiBwYXJzZVRleHQgKFxuXHQgIHRleHQsXG5cdCAgZGVsaW1pdGVyc1xuXHQpIHtcblx0ICB2YXIgdGFnUkUgPSBkZWxpbWl0ZXJzID8gYnVpbGRSZWdleChkZWxpbWl0ZXJzKSA6IGRlZmF1bHRUYWdSRTtcblx0ICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIgdG9rZW5zID0gW107XG5cdCAgdmFyIHJhd1Rva2VucyA9IFtdO1xuXHQgIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuXHQgIHZhciBtYXRjaCwgaW5kZXgsIHRva2VuVmFsdWU7XG5cdCAgd2hpbGUgKChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpKSB7XG5cdCAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuXHQgICAgLy8gcHVzaCB0ZXh0IHRva2VuXG5cdCAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcblx0ICAgICAgcmF3VG9rZW5zLnB1c2godG9rZW5WYWx1ZSA9IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleCkpO1xuXHQgICAgICB0b2tlbnMucHVzaChKU09OLnN0cmluZ2lmeSh0b2tlblZhbHVlKSk7XG5cdCAgICB9XG5cdCAgICAvLyB0YWcgdG9rZW5cblx0ICAgIHZhciBleHAgPSBwYXJzZUZpbHRlcnMobWF0Y2hbMV0udHJpbSgpKTtcblx0ICAgIHRva2Vucy5wdXNoKChcIl9zKFwiICsgZXhwICsgXCIpXCIpKTtcblx0ICAgIHJhd1Rva2Vucy5wdXNoKHsgJ0BiaW5kaW5nJzogZXhwIH0pO1xuXHQgICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG5cdCAgfVxuXHQgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuXHQgICAgcmF3VG9rZW5zLnB1c2godG9rZW5WYWx1ZSA9IHRleHQuc2xpY2UobGFzdEluZGV4KSk7XG5cdCAgICB0b2tlbnMucHVzaChKU09OLnN0cmluZ2lmeSh0b2tlblZhbHVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiB7XG5cdCAgICBleHByZXNzaW9uOiB0b2tlbnMuam9pbignKycpLFxuXHQgICAgdG9rZW5zOiByYXdUb2tlbnNcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNmb3JtTm9kZSAoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgd2FybiA9IG9wdGlvbnMud2FybiB8fCBiYXNlV2Fybjtcblx0ICB2YXIgc3RhdGljQ2xhc3MgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnY2xhc3MnKTtcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgc3RhdGljQ2xhc3MpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZVRleHQoc3RhdGljQ2xhc3MsIG9wdGlvbnMuZGVsaW1pdGVycyk7XG5cdCAgICBpZiAocmVzKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgXCJjbGFzcz1cXFwiXCIgKyBzdGF0aWNDbGFzcyArIFwiXFxcIjogXCIgK1xuXHQgICAgICAgICdJbnRlcnBvbGF0aW9uIGluc2lkZSBhdHRyaWJ1dGVzIGhhcyBiZWVuIHJlbW92ZWQuICcgK1xuXHQgICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgK1xuXHQgICAgICAgICdpbnN0ZWFkIG9mIDxkaXYgY2xhc3M9XCJ7eyB2YWwgfX1cIj4sIHVzZSA8ZGl2IDpjbGFzcz1cInZhbFwiPi4nXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChzdGF0aWNDbGFzcykge1xuXHQgICAgZWwuc3RhdGljQ2xhc3MgPSBKU09OLnN0cmluZ2lmeShzdGF0aWNDbGFzcyk7XG5cdCAgfVxuXHQgIHZhciBjbGFzc0JpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2NsYXNzJywgZmFsc2UgLyogZ2V0U3RhdGljICovKTtcblx0ICBpZiAoY2xhc3NCaW5kaW5nKSB7XG5cdCAgICBlbC5jbGFzc0JpbmRpbmcgPSBjbGFzc0JpbmRpbmc7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5EYXRhIChlbCkge1xuXHQgIHZhciBkYXRhID0gJyc7XG5cdCAgaWYgKGVsLnN0YXRpY0NsYXNzKSB7XG5cdCAgICBkYXRhICs9IFwic3RhdGljQ2xhc3M6XCIgKyAoZWwuc3RhdGljQ2xhc3MpICsgXCIsXCI7XG5cdCAgfVxuXHQgIGlmIChlbC5jbGFzc0JpbmRpbmcpIHtcblx0ICAgIGRhdGEgKz0gXCJjbGFzczpcIiArIChlbC5jbGFzc0JpbmRpbmcpICsgXCIsXCI7XG5cdCAgfVxuXHQgIHJldHVybiBkYXRhXG5cdH1cblx0XG5cdHZhciBrbGFzcyQxID0ge1xuXHQgIHN0YXRpY0tleXM6IFsnc3RhdGljQ2xhc3MnXSxcblx0ICB0cmFuc2Zvcm1Ob2RlOiB0cmFuc2Zvcm1Ob2RlLFxuXHQgIGdlbkRhdGE6IGdlbkRhdGFcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiB0cmFuc2Zvcm1Ob2RlJDEgKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHdhcm4gPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47XG5cdCAgdmFyIHN0YXRpY1N0eWxlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3N0eWxlJyk7XG5cdCAgaWYgKHN0YXRpY1N0eWxlKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIHtcblx0ICAgICAgdmFyIHJlcyA9IHBhcnNlVGV4dChzdGF0aWNTdHlsZSwgb3B0aW9ucy5kZWxpbWl0ZXJzKTtcblx0ICAgICAgaWYgKHJlcykge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICBcInN0eWxlPVxcXCJcIiArIHN0YXRpY1N0eWxlICsgXCJcXFwiOiBcIiArXG5cdCAgICAgICAgICAnSW50ZXJwb2xhdGlvbiBpbnNpZGUgYXR0cmlidXRlcyBoYXMgYmVlbiByZW1vdmVkLiAnICtcblx0ICAgICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgK1xuXHQgICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBzdHlsZT1cInt7IHZhbCB9fVwiPiwgdXNlIDxkaXYgOnN0eWxlPVwidmFsXCI+Lidcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBlbC5zdGF0aWNTdHlsZSA9IEpTT04uc3RyaW5naWZ5KHBhcnNlU3R5bGVUZXh0KHN0YXRpY1N0eWxlKSk7XG5cdCAgfVxuXHRcblx0ICB2YXIgc3R5bGVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdzdHlsZScsIGZhbHNlIC8qIGdldFN0YXRpYyAqLyk7XG5cdCAgaWYgKHN0eWxlQmluZGluZykge1xuXHQgICAgZWwuc3R5bGVCaW5kaW5nID0gc3R5bGVCaW5kaW5nO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuRGF0YSQxIChlbCkge1xuXHQgIHZhciBkYXRhID0gJyc7XG5cdCAgaWYgKGVsLnN0YXRpY1N0eWxlKSB7XG5cdCAgICBkYXRhICs9IFwic3RhdGljU3R5bGU6XCIgKyAoZWwuc3RhdGljU3R5bGUpICsgXCIsXCI7XG5cdCAgfVxuXHQgIGlmIChlbC5zdHlsZUJpbmRpbmcpIHtcblx0ICAgIGRhdGEgKz0gXCJzdHlsZTooXCIgKyAoZWwuc3R5bGVCaW5kaW5nKSArIFwiKSxcIjtcblx0ICB9XG5cdCAgcmV0dXJuIGRhdGFcblx0fVxuXHRcblx0dmFyIHN0eWxlJDEgPSB7XG5cdCAgc3RhdGljS2V5czogWydzdGF0aWNTdHlsZSddLFxuXHQgIHRyYW5zZm9ybU5vZGU6IHRyYW5zZm9ybU5vZGUkMSxcblx0ICBnZW5EYXRhOiBnZW5EYXRhJDFcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgZGVjb2Rlcjtcblx0XG5cdHZhciBoZSA9IHtcblx0ICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZSAoaHRtbCkge1xuXHQgICAgZGVjb2RlciA9IGRlY29kZXIgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBkZWNvZGVyLmlubmVySFRNTCA9IGh0bWw7XG5cdCAgICByZXR1cm4gZGVjb2Rlci50ZXh0Q29udGVudFxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgaXNVbmFyeVRhZyA9IG1ha2VNYXAoXG5cdCAgJ2FyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLCcgK1xuXHQgICdsaW5rLG1ldGEscGFyYW0sc291cmNlLHRyYWNrLHdicidcblx0KTtcblx0XG5cdC8vIEVsZW1lbnRzIHRoYXQgeW91IGNhbiwgaW50ZW50aW9uYWxseSwgbGVhdmUgb3BlblxuXHQvLyAoYW5kIHdoaWNoIGNsb3NlIHRoZW1zZWx2ZXMpXG5cdHZhciBjYW5CZUxlZnRPcGVuVGFnID0gbWFrZU1hcChcblx0ICAnY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSdcblx0KTtcblx0XG5cdC8vIEhUTUw1IHRhZ3MgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvaW5kaWNlcy5odG1sI2VsZW1lbnRzLTNcblx0Ly8gUGhyYXNpbmcgQ29udGVudCBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9kb20uaHRtbCNwaHJhc2luZy1jb250ZW50XG5cdHZhciBpc05vblBocmFzaW5nVGFnID0gbWFrZU1hcChcblx0ICAnYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGJhc2UsYmxvY2txdW90ZSxib2R5LGNhcHRpb24sY29sLGNvbGdyb3VwLGRkLCcgK1xuXHQgICdkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0sJyArXG5cdCAgJ2gxLGgyLGgzLGg0LGg1LGg2LGhlYWQsaGVhZGVyLGhncm91cCxocixodG1sLGxlZ2VuZCxsaSxtZW51aXRlbSxtZXRhLCcgK1xuXHQgICdvcHRncm91cCxvcHRpb24scGFyYW0scnAscnQsc291cmNlLHN0eWxlLHN1bW1hcnksdGJvZHksdGQsdGZvb3QsdGgsdGhlYWQsJyArXG5cdCAgJ3RpdGxlLHRyLHRyYWNrJ1xuXHQpO1xuXHRcblx0LyoqXG5cdCAqIE5vdCB0eXBlLWNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGl0J3MgbW9zdGx5IHZlbmRvciBjb2RlLlxuXHQgKi9cblx0XG5cdC8qIVxuXHQgKiBIVE1MIFBhcnNlciBCeSBKb2huIFJlc2lnIChlam9obi5vcmcpXG5cdCAqIE1vZGlmaWVkIGJ5IEp1cml5IFwia2FuZ2F4XCIgWmF5dHNldlxuXHQgKiBPcmlnaW5hbCBjb2RlIGJ5IEVyaWsgQXJ2aWRzc29uLCBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlXG5cdCAqIGh0dHA6Ly9lcmlrLmVhZS5uZXQvc2ltcGxlaHRtbHBhcnNlci9zaW1wbGVodG1scGFyc2VyLmpzXG5cdCAqL1xuXHRcblx0Ly8gUmVndWxhciBFeHByZXNzaW9ucyBmb3IgcGFyc2luZyB0YWdzIGFuZCBhdHRyaWJ1dGVzXG5cdHZhciBhdHRyaWJ1dGUgPSAvXlxccyooW15cXHNcIic8PlxcLz1dKykoPzpcXHMqKD0pXFxzKig/OlwiKFteXCJdKilcIit8JyhbXiddKiknK3woW15cXHNcIic9PD5gXSspKSk/Lztcblx0Ly8gY291bGQgdXNlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8xOTk5L1JFQy14bWwtbmFtZXMtMTk5OTAxMTQvI05ULVFOYW1lXG5cdC8vIGJ1dCBmb3IgVnVlIHRlbXBsYXRlcyB3ZSBjYW4gZW5mb3JjZSBhIHNpbXBsZSBjaGFyc2V0XG5cdHZhciBuY25hbWUgPSAnW2EtekEtWl9dW1xcXFx3XFxcXC1cXFxcLl0qJztcblx0dmFyIHFuYW1lQ2FwdHVyZSA9IFwiKCg/OlwiICsgbmNuYW1lICsgXCJcXFxcOik/XCIgKyBuY25hbWUgKyBcIilcIjtcblx0dmFyIHN0YXJ0VGFnT3BlbiA9IG5ldyBSZWdFeHAoKFwiXjxcIiArIHFuYW1lQ2FwdHVyZSkpO1xuXHR2YXIgc3RhcnRUYWdDbG9zZSA9IC9eXFxzKihcXC8/KT4vO1xuXHR2YXIgZW5kVGFnID0gbmV3IFJlZ0V4cCgoXCJePFxcXFwvXCIgKyBxbmFtZUNhcHR1cmUgKyBcIltePl0qPlwiKSk7XG5cdHZhciBkb2N0eXBlID0gL148IURPQ1RZUEUgW14+XSs+L2k7XG5cdC8vICM3Mjk4OiBlc2NhcGUgLSB0byBhdm9pZCBiZWluZyBwYXNlZCBhcyBIVE1MIGNvbW1lbnQgd2hlbiBpbmxpbmVkIGluIHBhZ2Vcblx0dmFyIGNvbW1lbnQgPSAvXjwhXFwtLS87XG5cdHZhciBjb25kaXRpb25hbENvbW1lbnQgPSAvXjwhXFxbLztcblx0XG5cdHZhciBJU19SRUdFWF9DQVBUVVJJTkdfQlJPS0VOID0gZmFsc2U7XG5cdCd4Jy5yZXBsYWNlKC94KC4pPy9nLCBmdW5jdGlvbiAobSwgZykge1xuXHQgIElTX1JFR0VYX0NBUFRVUklOR19CUk9LRU4gPSBnID09PSAnJztcblx0fSk7XG5cdFxuXHQvLyBTcGVjaWFsIEVsZW1lbnRzIChjYW4gY29udGFpbiBhbnl0aGluZylcblx0dmFyIGlzUGxhaW5UZXh0RWxlbWVudCA9IG1ha2VNYXAoJ3NjcmlwdCxzdHlsZSx0ZXh0YXJlYScsIHRydWUpO1xuXHR2YXIgcmVDYWNoZSA9IHt9O1xuXHRcblx0dmFyIGRlY29kaW5nTWFwID0ge1xuXHQgICcmbHQ7JzogJzwnLFxuXHQgICcmZ3Q7JzogJz4nLFxuXHQgICcmcXVvdDsnOiAnXCInLFxuXHQgICcmYW1wOyc6ICcmJyxcblx0ICAnJiMxMDsnOiAnXFxuJyxcblx0ICAnJiM5Oyc6ICdcXHQnXG5cdH07XG5cdHZhciBlbmNvZGVkQXR0ciA9IC8mKD86bHR8Z3R8cXVvdHxhbXApOy9nO1xuXHR2YXIgZW5jb2RlZEF0dHJXaXRoTmV3TGluZXMgPSAvJig/Omx0fGd0fHF1b3R8YW1wfCMxMHwjOSk7L2c7XG5cdFxuXHQvLyAjNTk5MlxuXHR2YXIgaXNJZ25vcmVOZXdsaW5lVGFnID0gbWFrZU1hcCgncHJlLHRleHRhcmVhJywgdHJ1ZSk7XG5cdHZhciBzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUgPSBmdW5jdGlvbiAodGFnLCBodG1sKSB7IHJldHVybiB0YWcgJiYgaXNJZ25vcmVOZXdsaW5lVGFnKHRhZykgJiYgaHRtbFswXSA9PT0gJ1xcbic7IH07XG5cdFxuXHRmdW5jdGlvbiBkZWNvZGVBdHRyICh2YWx1ZSwgc2hvdWxkRGVjb2RlTmV3bGluZXMpIHtcblx0ICB2YXIgcmUgPSBzaG91bGREZWNvZGVOZXdsaW5lcyA/IGVuY29kZWRBdHRyV2l0aE5ld0xpbmVzIDogZW5jb2RlZEF0dHI7XG5cdCAgcmV0dXJuIHZhbHVlLnJlcGxhY2UocmUsIGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gZGVjb2RpbmdNYXBbbWF0Y2hdOyB9KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZUhUTUwgKGh0bWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgc3RhY2sgPSBbXTtcblx0ICB2YXIgZXhwZWN0SFRNTCA9IG9wdGlvbnMuZXhwZWN0SFRNTDtcblx0ICB2YXIgaXNVbmFyeVRhZyQkMSA9IG9wdGlvbnMuaXNVbmFyeVRhZyB8fCBubztcblx0ICB2YXIgY2FuQmVMZWZ0T3BlblRhZyQkMSA9IG9wdGlvbnMuY2FuQmVMZWZ0T3BlblRhZyB8fCBubztcblx0ICB2YXIgaW5kZXggPSAwO1xuXHQgIHZhciBsYXN0LCBsYXN0VGFnO1xuXHQgIHdoaWxlIChodG1sKSB7XG5cdCAgICBsYXN0ID0gaHRtbDtcblx0ICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBub3QgaW4gYSBwbGFpbnRleHQgY29udGVudCBlbGVtZW50IGxpa2Ugc2NyaXB0L3N0eWxlXG5cdCAgICBpZiAoIWxhc3RUYWcgfHwgIWlzUGxhaW5UZXh0RWxlbWVudChsYXN0VGFnKSkge1xuXHQgICAgICB2YXIgdGV4dEVuZCA9IGh0bWwuaW5kZXhPZignPCcpO1xuXHQgICAgICBpZiAodGV4dEVuZCA9PT0gMCkge1xuXHQgICAgICAgIC8vIENvbW1lbnQ6XG5cdCAgICAgICAgaWYgKGNvbW1lbnQudGVzdChodG1sKSkge1xuXHQgICAgICAgICAgdmFyIGNvbW1lbnRFbmQgPSBodG1sLmluZGV4T2YoJy0tPicpO1xuXHRcblx0ICAgICAgICAgIGlmIChjb21tZW50RW5kID49IDApIHtcblx0ICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2hvdWxkS2VlcENvbW1lbnQpIHtcblx0ICAgICAgICAgICAgICBvcHRpb25zLmNvbW1lbnQoaHRtbC5zdWJzdHJpbmcoNCwgY29tbWVudEVuZCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGFkdmFuY2UoY29tbWVudEVuZCArIDMpO1xuXHQgICAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db25kaXRpb25hbF9jb21tZW50I0Rvd25sZXZlbC1yZXZlYWxlZF9jb25kaXRpb25hbF9jb21tZW50XG5cdCAgICAgICAgaWYgKGNvbmRpdGlvbmFsQ29tbWVudC50ZXN0KGh0bWwpKSB7XG5cdCAgICAgICAgICB2YXIgY29uZGl0aW9uYWxFbmQgPSBodG1sLmluZGV4T2YoJ10+Jyk7XG5cdFxuXHQgICAgICAgICAgaWYgKGNvbmRpdGlvbmFsRW5kID49IDApIHtcblx0ICAgICAgICAgICAgYWR2YW5jZShjb25kaXRpb25hbEVuZCArIDIpO1xuXHQgICAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gRG9jdHlwZTpcblx0ICAgICAgICB2YXIgZG9jdHlwZU1hdGNoID0gaHRtbC5tYXRjaChkb2N0eXBlKTtcblx0ICAgICAgICBpZiAoZG9jdHlwZU1hdGNoKSB7XG5cdCAgICAgICAgICBhZHZhbmNlKGRvY3R5cGVNYXRjaFswXS5sZW5ndGgpO1xuXHQgICAgICAgICAgY29udGludWVcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIEVuZCB0YWc6XG5cdCAgICAgICAgdmFyIGVuZFRhZ01hdGNoID0gaHRtbC5tYXRjaChlbmRUYWcpO1xuXHQgICAgICAgIGlmIChlbmRUYWdNYXRjaCkge1xuXHQgICAgICAgICAgdmFyIGN1ckluZGV4ID0gaW5kZXg7XG5cdCAgICAgICAgICBhZHZhbmNlKGVuZFRhZ01hdGNoWzBdLmxlbmd0aCk7XG5cdCAgICAgICAgICBwYXJzZUVuZFRhZyhlbmRUYWdNYXRjaFsxXSwgY3VySW5kZXgsIGluZGV4KTtcblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBTdGFydCB0YWc6XG5cdCAgICAgICAgdmFyIHN0YXJ0VGFnTWF0Y2ggPSBwYXJzZVN0YXJ0VGFnKCk7XG5cdCAgICAgICAgaWYgKHN0YXJ0VGFnTWF0Y2gpIHtcblx0ICAgICAgICAgIGhhbmRsZVN0YXJ0VGFnKHN0YXJ0VGFnTWF0Y2gpO1xuXHQgICAgICAgICAgaWYgKHNob3VsZElnbm9yZUZpcnN0TmV3bGluZShsYXN0VGFnLCBodG1sKSkge1xuXHQgICAgICAgICAgICBhZHZhbmNlKDEpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgY29udGludWVcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciB0ZXh0ID0gKHZvaWQgMCksIHJlc3QgPSAodm9pZCAwKSwgbmV4dCA9ICh2b2lkIDApO1xuXHQgICAgICBpZiAodGV4dEVuZCA+PSAwKSB7XG5cdCAgICAgICAgcmVzdCA9IGh0bWwuc2xpY2UodGV4dEVuZCk7XG5cdCAgICAgICAgd2hpbGUgKFxuXHQgICAgICAgICAgIWVuZFRhZy50ZXN0KHJlc3QpICYmXG5cdCAgICAgICAgICAhc3RhcnRUYWdPcGVuLnRlc3QocmVzdCkgJiZcblx0ICAgICAgICAgICFjb21tZW50LnRlc3QocmVzdCkgJiZcblx0ICAgICAgICAgICFjb25kaXRpb25hbENvbW1lbnQudGVzdChyZXN0KVxuXHQgICAgICAgICkge1xuXHQgICAgICAgICAgLy8gPCBpbiBwbGFpbiB0ZXh0LCBiZSBmb3JnaXZpbmcgYW5kIHRyZWF0IGl0IGFzIHRleHRcblx0ICAgICAgICAgIG5leHQgPSByZXN0LmluZGV4T2YoJzwnLCAxKTtcblx0ICAgICAgICAgIGlmIChuZXh0IDwgMCkgeyBicmVhayB9XG5cdCAgICAgICAgICB0ZXh0RW5kICs9IG5leHQ7XG5cdCAgICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGV4dCA9IGh0bWwuc3Vic3RyaW5nKDAsIHRleHRFbmQpO1xuXHQgICAgICAgIGFkdmFuY2UodGV4dEVuZCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0ZXh0RW5kIDwgMCkge1xuXHQgICAgICAgIHRleHQgPSBodG1sO1xuXHQgICAgICAgIGh0bWwgPSAnJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKG9wdGlvbnMuY2hhcnMgJiYgdGV4dCkge1xuXHQgICAgICAgIG9wdGlvbnMuY2hhcnModGV4dCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBlbmRUYWdMZW5ndGggPSAwO1xuXHQgICAgICB2YXIgc3RhY2tlZFRhZyA9IGxhc3RUYWcudG9Mb3dlckNhc2UoKTtcblx0ICAgICAgdmFyIHJlU3RhY2tlZFRhZyA9IHJlQ2FjaGVbc3RhY2tlZFRhZ10gfHwgKHJlQ2FjaGVbc3RhY2tlZFRhZ10gPSBuZXcgUmVnRXhwKCcoW1xcXFxzXFxcXFNdKj8pKDwvJyArIHN0YWNrZWRUYWcgKyAnW14+XSo+KScsICdpJykpO1xuXHQgICAgICB2YXIgcmVzdCQxID0gaHRtbC5yZXBsYWNlKHJlU3RhY2tlZFRhZywgZnVuY3Rpb24gKGFsbCwgdGV4dCwgZW5kVGFnKSB7XG5cdCAgICAgICAgZW5kVGFnTGVuZ3RoID0gZW5kVGFnLmxlbmd0aDtcblx0ICAgICAgICBpZiAoIWlzUGxhaW5UZXh0RWxlbWVudChzdGFja2VkVGFnKSAmJiBzdGFja2VkVGFnICE9PSAnbm9zY3JpcHQnKSB7XG5cdCAgICAgICAgICB0ZXh0ID0gdGV4dFxuXHQgICAgICAgICAgICAucmVwbGFjZSgvPCFcXC0tKFtcXHNcXFNdKj8pLS0+L2csICckMScpIC8vICM3Mjk4XG5cdCAgICAgICAgICAgIC5yZXBsYWNlKC88IVxcW0NEQVRBXFxbKFtcXHNcXFNdKj8pXV0+L2csICckMScpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoc2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lKHN0YWNrZWRUYWcsIHRleHQpKSB7XG5cdCAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZSgxKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKG9wdGlvbnMuY2hhcnMpIHtcblx0ICAgICAgICAgIG9wdGlvbnMuY2hhcnModGV4dCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAnJ1xuXHQgICAgICB9KTtcblx0ICAgICAgaW5kZXggKz0gaHRtbC5sZW5ndGggLSByZXN0JDEubGVuZ3RoO1xuXHQgICAgICBodG1sID0gcmVzdCQxO1xuXHQgICAgICBwYXJzZUVuZFRhZyhzdGFja2VkVGFnLCBpbmRleCAtIGVuZFRhZ0xlbmd0aCwgaW5kZXgpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChodG1sID09PSBsYXN0KSB7XG5cdCAgICAgIG9wdGlvbnMuY2hhcnMgJiYgb3B0aW9ucy5jaGFycyhodG1sKTtcblx0ICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmICFzdGFjay5sZW5ndGggJiYgb3B0aW9ucy53YXJuKSB7XG5cdCAgICAgICAgb3B0aW9ucy53YXJuKChcIk1hbC1mb3JtYXR0ZWQgdGFnIGF0IGVuZCBvZiB0ZW1wbGF0ZTogXFxcIlwiICsgaHRtbCArIFwiXFxcIlwiKSk7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIENsZWFuIHVwIGFueSByZW1haW5pbmcgdGFnc1xuXHQgIHBhcnNlRW5kVGFnKCk7XG5cdFxuXHQgIGZ1bmN0aW9uIGFkdmFuY2UgKG4pIHtcblx0ICAgIGluZGV4ICs9IG47XG5cdCAgICBodG1sID0gaHRtbC5zdWJzdHJpbmcobik7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBwYXJzZVN0YXJ0VGFnICgpIHtcblx0ICAgIHZhciBzdGFydCA9IGh0bWwubWF0Y2goc3RhcnRUYWdPcGVuKTtcblx0ICAgIGlmIChzdGFydCkge1xuXHQgICAgICB2YXIgbWF0Y2ggPSB7XG5cdCAgICAgICAgdGFnTmFtZTogc3RhcnRbMV0sXG5cdCAgICAgICAgYXR0cnM6IFtdLFxuXHQgICAgICAgIHN0YXJ0OiBpbmRleFxuXHQgICAgICB9O1xuXHQgICAgICBhZHZhbmNlKHN0YXJ0WzBdLmxlbmd0aCk7XG5cdCAgICAgIHZhciBlbmQsIGF0dHI7XG5cdCAgICAgIHdoaWxlICghKGVuZCA9IGh0bWwubWF0Y2goc3RhcnRUYWdDbG9zZSkpICYmIChhdHRyID0gaHRtbC5tYXRjaChhdHRyaWJ1dGUpKSkge1xuXHQgICAgICAgIGFkdmFuY2UoYXR0clswXS5sZW5ndGgpO1xuXHQgICAgICAgIG1hdGNoLmF0dHJzLnB1c2goYXR0cik7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGVuZCkge1xuXHQgICAgICAgIG1hdGNoLnVuYXJ5U2xhc2ggPSBlbmRbMV07XG5cdCAgICAgICAgYWR2YW5jZShlbmRbMF0ubGVuZ3RoKTtcblx0ICAgICAgICBtYXRjaC5lbmQgPSBpbmRleDtcblx0ICAgICAgICByZXR1cm4gbWF0Y2hcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaGFuZGxlU3RhcnRUYWcgKG1hdGNoKSB7XG5cdCAgICB2YXIgdGFnTmFtZSA9IG1hdGNoLnRhZ05hbWU7XG5cdCAgICB2YXIgdW5hcnlTbGFzaCA9IG1hdGNoLnVuYXJ5U2xhc2g7XG5cdFxuXHQgICAgaWYgKGV4cGVjdEhUTUwpIHtcblx0ICAgICAgaWYgKGxhc3RUYWcgPT09ICdwJyAmJiBpc05vblBocmFzaW5nVGFnKHRhZ05hbWUpKSB7XG5cdCAgICAgICAgcGFyc2VFbmRUYWcobGFzdFRhZyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGNhbkJlTGVmdE9wZW5UYWckJDEodGFnTmFtZSkgJiYgbGFzdFRhZyA9PT0gdGFnTmFtZSkge1xuXHQgICAgICAgIHBhcnNlRW5kVGFnKHRhZ05hbWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHVuYXJ5ID0gaXNVbmFyeVRhZyQkMSh0YWdOYW1lKSB8fCAhIXVuYXJ5U2xhc2g7XG5cdFxuXHQgICAgdmFyIGwgPSBtYXRjaC5hdHRycy5sZW5ndGg7XG5cdCAgICB2YXIgYXR0cnMgPSBuZXcgQXJyYXkobCk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgYXJncyA9IG1hdGNoLmF0dHJzW2ldO1xuXHQgICAgICAvLyBoYWNraXNoIHdvcmsgYXJvdW5kIEZGIGJ1ZyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0zNjk3Nzhcblx0ICAgICAgaWYgKElTX1JFR0VYX0NBUFRVUklOR19CUk9LRU4gJiYgYXJnc1swXS5pbmRleE9mKCdcIlwiJykgPT09IC0xKSB7XG5cdCAgICAgICAgaWYgKGFyZ3NbM10gPT09ICcnKSB7IGRlbGV0ZSBhcmdzWzNdOyB9XG5cdCAgICAgICAgaWYgKGFyZ3NbNF0gPT09ICcnKSB7IGRlbGV0ZSBhcmdzWzRdOyB9XG5cdCAgICAgICAgaWYgKGFyZ3NbNV0gPT09ICcnKSB7IGRlbGV0ZSBhcmdzWzVdOyB9XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHZhbHVlID0gYXJnc1szXSB8fCBhcmdzWzRdIHx8IGFyZ3NbNV0gfHwgJyc7XG5cdCAgICAgIHZhciBzaG91bGREZWNvZGVOZXdsaW5lcyA9IHRhZ05hbWUgPT09ICdhJyAmJiBhcmdzWzFdID09PSAnaHJlZidcblx0ICAgICAgICA/IG9wdGlvbnMuc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmXG5cdCAgICAgICAgOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzO1xuXHQgICAgICBhdHRyc1tpXSA9IHtcblx0ICAgICAgICBuYW1lOiBhcmdzWzFdLFxuXHQgICAgICAgIHZhbHVlOiBkZWNvZGVBdHRyKHZhbHVlLCBzaG91bGREZWNvZGVOZXdsaW5lcylcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIXVuYXJ5KSB7XG5cdCAgICAgIHN0YWNrLnB1c2goeyB0YWc6IHRhZ05hbWUsIGxvd2VyQ2FzZWRUYWc6IHRhZ05hbWUudG9Mb3dlckNhc2UoKSwgYXR0cnM6IGF0dHJzIH0pO1xuXHQgICAgICBsYXN0VGFnID0gdGFnTmFtZTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAob3B0aW9ucy5zdGFydCkge1xuXHQgICAgICBvcHRpb25zLnN0YXJ0KHRhZ05hbWUsIGF0dHJzLCB1bmFyeSwgbWF0Y2guc3RhcnQsIG1hdGNoLmVuZCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBwYXJzZUVuZFRhZyAodGFnTmFtZSwgc3RhcnQsIGVuZCkge1xuXHQgICAgdmFyIHBvcywgbG93ZXJDYXNlZFRhZ05hbWU7XG5cdCAgICBpZiAoc3RhcnQgPT0gbnVsbCkgeyBzdGFydCA9IGluZGV4OyB9XG5cdCAgICBpZiAoZW5kID09IG51bGwpIHsgZW5kID0gaW5kZXg7IH1cblx0XG5cdCAgICBpZiAodGFnTmFtZSkge1xuXHQgICAgICBsb3dlckNhc2VkVGFnTmFtZSA9IHRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IG9wZW5lZCB0YWcgb2YgdGhlIHNhbWUgdHlwZVxuXHQgICAgaWYgKHRhZ05hbWUpIHtcblx0ICAgICAgZm9yIChwb3MgPSBzdGFjay5sZW5ndGggLSAxOyBwb3MgPj0gMDsgcG9zLS0pIHtcblx0ICAgICAgICBpZiAoc3RhY2tbcG9zXS5sb3dlckNhc2VkVGFnID09PSBsb3dlckNhc2VkVGFnTmFtZSkge1xuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIElmIG5vIHRhZyBuYW1lIGlzIHByb3ZpZGVkLCBjbGVhbiBzaG9wXG5cdCAgICAgIHBvcyA9IDA7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHBvcyA+PSAwKSB7XG5cdCAgICAgIC8vIENsb3NlIGFsbCB0aGUgb3BlbiBlbGVtZW50cywgdXAgdGhlIHN0YWNrXG5cdCAgICAgIGZvciAodmFyIGkgPSBzdGFjay5sZW5ndGggLSAxOyBpID49IHBvczsgaS0tKSB7XG5cdCAgICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgICAgICAoaSA+IHBvcyB8fCAhdGFnTmFtZSkgJiZcblx0ICAgICAgICAgIG9wdGlvbnMud2FyblxuXHQgICAgICAgICkge1xuXHQgICAgICAgICAgb3B0aW9ucy53YXJuKFxuXHQgICAgICAgICAgICAoXCJ0YWcgPFwiICsgKHN0YWNrW2ldLnRhZykgKyBcIj4gaGFzIG5vIG1hdGNoaW5nIGVuZCB0YWcuXCIpXG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAob3B0aW9ucy5lbmQpIHtcblx0ICAgICAgICAgIG9wdGlvbnMuZW5kKHN0YWNrW2ldLnRhZywgc3RhcnQsIGVuZCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBSZW1vdmUgdGhlIG9wZW4gZWxlbWVudHMgZnJvbSB0aGUgc3RhY2tcblx0ICAgICAgc3RhY2subGVuZ3RoID0gcG9zO1xuXHQgICAgICBsYXN0VGFnID0gcG9zICYmIHN0YWNrW3BvcyAtIDFdLnRhZztcblx0ICAgIH0gZWxzZSBpZiAobG93ZXJDYXNlZFRhZ05hbWUgPT09ICdicicpIHtcblx0ICAgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHtcblx0ICAgICAgICBvcHRpb25zLnN0YXJ0KHRhZ05hbWUsIFtdLCB0cnVlLCBzdGFydCwgZW5kKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChsb3dlckNhc2VkVGFnTmFtZSA9PT0gJ3AnKSB7XG5cdCAgICAgIGlmIChvcHRpb25zLnN0YXJ0KSB7XG5cdCAgICAgICAgb3B0aW9ucy5zdGFydCh0YWdOYW1lLCBbXSwgZmFsc2UsIHN0YXJ0LCBlbmQpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChvcHRpb25zLmVuZCkge1xuXHQgICAgICAgIG9wdGlvbnMuZW5kKHRhZ05hbWUsIHN0YXJ0LCBlbmQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBvblJFID0gL15AfF52LW9uOi87XG5cdHZhciBkaXJSRSA9IC9edi18XkB8XjovO1xuXHR2YXIgZm9yQWxpYXNSRSA9IC8oLio/KVxccysoPzppbnxvZilcXHMrKC4qKS87XG5cdHZhciBmb3JJdGVyYXRvclJFID0gLywoW14sXFx9XFxdXSopKD86LChbXixcXH1cXF1dKikpPyQvO1xuXHR2YXIgc3RyaXBQYXJlbnNSRSA9IC9eXFwofFxcKSQvZztcblx0XG5cdHZhciBhcmdSRSA9IC86KC4qKSQvO1xuXHR2YXIgYmluZFJFID0gL146fF52LWJpbmQ6Lztcblx0dmFyIG1vZGlmaWVyUkUgPSAvXFwuW14uXSsvZztcblx0XG5cdHZhciBkZWNvZGVIVE1MQ2FjaGVkID0gY2FjaGVkKGhlLmRlY29kZSk7XG5cdFxuXHQvLyBjb25maWd1cmFibGUgc3RhdGVcblx0dmFyIHdhcm4kMjtcblx0dmFyIGRlbGltaXRlcnM7XG5cdHZhciB0cmFuc2Zvcm1zO1xuXHR2YXIgcHJlVHJhbnNmb3Jtcztcblx0dmFyIHBvc3RUcmFuc2Zvcm1zO1xuXHR2YXIgcGxhdGZvcm1Jc1ByZVRhZztcblx0dmFyIHBsYXRmb3JtTXVzdFVzZVByb3A7XG5cdHZhciBwbGF0Zm9ybUdldFRhZ05hbWVzcGFjZTtcblx0XG5cdFxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQVNURWxlbWVudCAoXG5cdCAgdGFnLFxuXHQgIGF0dHJzLFxuXHQgIHBhcmVudFxuXHQpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgdHlwZTogMSxcblx0ICAgIHRhZzogdGFnLFxuXHQgICAgYXR0cnNMaXN0OiBhdHRycyxcblx0ICAgIGF0dHJzTWFwOiBtYWtlQXR0cnNNYXAoYXR0cnMpLFxuXHQgICAgcGFyZW50OiBwYXJlbnQsXG5cdCAgICBjaGlsZHJlbjogW11cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IEhUTUwgc3RyaW5nIHRvIEFTVC5cblx0ICovXG5cdGZ1bmN0aW9uIHBhcnNlIChcblx0ICB0ZW1wbGF0ZSxcblx0ICBvcHRpb25zXG5cdCkge1xuXHQgIHdhcm4kMiA9IG9wdGlvbnMud2FybiB8fCBiYXNlV2Fybjtcblx0XG5cdCAgcGxhdGZvcm1Jc1ByZVRhZyA9IG9wdGlvbnMuaXNQcmVUYWcgfHwgbm87XG5cdCAgcGxhdGZvcm1NdXN0VXNlUHJvcCA9IG9wdGlvbnMubXVzdFVzZVByb3AgfHwgbm87XG5cdCAgcGxhdGZvcm1HZXRUYWdOYW1lc3BhY2UgPSBvcHRpb25zLmdldFRhZ05hbWVzcGFjZSB8fCBubztcblx0XG5cdCAgdHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAndHJhbnNmb3JtTm9kZScpO1xuXHQgIHByZVRyYW5zZm9ybXMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ3ByZVRyYW5zZm9ybU5vZGUnKTtcblx0ICBwb3N0VHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAncG9zdFRyYW5zZm9ybU5vZGUnKTtcblx0XG5cdCAgZGVsaW1pdGVycyA9IG9wdGlvbnMuZGVsaW1pdGVycztcblx0XG5cdCAgdmFyIHN0YWNrID0gW107XG5cdCAgdmFyIHByZXNlcnZlV2hpdGVzcGFjZSA9IG9wdGlvbnMucHJlc2VydmVXaGl0ZXNwYWNlICE9PSBmYWxzZTtcblx0ICB2YXIgcm9vdDtcblx0ICB2YXIgY3VycmVudFBhcmVudDtcblx0ICB2YXIgaW5WUHJlID0gZmFsc2U7XG5cdCAgdmFyIGluUHJlID0gZmFsc2U7XG5cdCAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuXHRcblx0ICBmdW5jdGlvbiB3YXJuT25jZSAobXNnKSB7XG5cdCAgICBpZiAoIXdhcm5lZCkge1xuXHQgICAgICB3YXJuZWQgPSB0cnVlO1xuXHQgICAgICB3YXJuJDIobXNnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNsb3NlRWxlbWVudCAoZWxlbWVudCkge1xuXHQgICAgLy8gY2hlY2sgcHJlIHN0YXRlXG5cdCAgICBpZiAoZWxlbWVudC5wcmUpIHtcblx0ICAgICAgaW5WUHJlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBpZiAocGxhdGZvcm1Jc1ByZVRhZyhlbGVtZW50LnRhZykpIHtcblx0ICAgICAgaW5QcmUgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIC8vIGFwcGx5IHBvc3QtdHJhbnNmb3Jtc1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0VHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBwb3N0VHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHBhcnNlSFRNTCh0ZW1wbGF0ZSwge1xuXHQgICAgd2Fybjogd2FybiQyLFxuXHQgICAgZXhwZWN0SFRNTDogb3B0aW9ucy5leHBlY3RIVE1MLFxuXHQgICAgaXNVbmFyeVRhZzogb3B0aW9ucy5pc1VuYXJ5VGFnLFxuXHQgICAgY2FuQmVMZWZ0T3BlblRhZzogb3B0aW9ucy5jYW5CZUxlZnRPcGVuVGFnLFxuXHQgICAgc2hvdWxkRGVjb2RlTmV3bGluZXM6IG9wdGlvbnMuc2hvdWxkRGVjb2RlTmV3bGluZXMsXG5cdCAgICBzaG91bGREZWNvZGVOZXdsaW5lc0ZvckhyZWY6IG9wdGlvbnMuc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmLFxuXHQgICAgc2hvdWxkS2VlcENvbW1lbnQ6IG9wdGlvbnMuY29tbWVudHMsXG5cdCAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQgKHRhZywgYXR0cnMsIHVuYXJ5KSB7XG5cdCAgICAgIC8vIGNoZWNrIG5hbWVzcGFjZS5cblx0ICAgICAgLy8gaW5oZXJpdCBwYXJlbnQgbnMgaWYgdGhlcmUgaXMgb25lXG5cdCAgICAgIHZhciBucyA9IChjdXJyZW50UGFyZW50ICYmIGN1cnJlbnRQYXJlbnQubnMpIHx8IHBsYXRmb3JtR2V0VGFnTmFtZXNwYWNlKHRhZyk7XG5cdFxuXHQgICAgICAvLyBoYW5kbGUgSUUgc3ZnIGJ1Z1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGlzSUUgJiYgbnMgPT09ICdzdmcnKSB7XG5cdCAgICAgICAgYXR0cnMgPSBndWFyZElFU1ZHQnVnKGF0dHJzKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGVsZW1lbnQgPSBjcmVhdGVBU1RFbGVtZW50KHRhZywgYXR0cnMsIGN1cnJlbnRQYXJlbnQpO1xuXHQgICAgICBpZiAobnMpIHtcblx0ICAgICAgICBlbGVtZW50Lm5zID0gbnM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChpc0ZvcmJpZGRlblRhZyhlbGVtZW50KSAmJiAhaXNTZXJ2ZXJSZW5kZXJpbmcoKSkge1xuXHQgICAgICAgIGVsZW1lbnQuZm9yYmlkZGVuID0gdHJ1ZTtcblx0ICAgICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuJDIoXG5cdCAgICAgICAgICAnVGVtcGxhdGVzIHNob3VsZCBvbmx5IGJlIHJlc3BvbnNpYmxlIGZvciBtYXBwaW5nIHRoZSBzdGF0ZSB0byB0aGUgJyArXG5cdCAgICAgICAgICAnVUkuIEF2b2lkIHBsYWNpbmcgdGFncyB3aXRoIHNpZGUtZWZmZWN0cyBpbiB5b3VyIHRlbXBsYXRlcywgc3VjaCBhcyAnICtcblx0ICAgICAgICAgIFwiPFwiICsgdGFnICsgXCI+XCIgKyAnLCBhcyB0aGV5IHdpbGwgbm90IGJlIHBhcnNlZC4nXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gYXBwbHkgcHJlLXRyYW5zZm9ybXNcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmVUcmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZWxlbWVudCA9IHByZVRyYW5zZm9ybXNbaV0oZWxlbWVudCwgb3B0aW9ucykgfHwgZWxlbWVudDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFpblZQcmUpIHtcblx0ICAgICAgICBwcm9jZXNzUHJlKGVsZW1lbnQpO1xuXHQgICAgICAgIGlmIChlbGVtZW50LnByZSkge1xuXHQgICAgICAgICAgaW5WUHJlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHBsYXRmb3JtSXNQcmVUYWcoZWxlbWVudC50YWcpKSB7XG5cdCAgICAgICAgaW5QcmUgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChpblZQcmUpIHtcblx0ICAgICAgICBwcm9jZXNzUmF3QXR0cnMoZWxlbWVudCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoIWVsZW1lbnQucHJvY2Vzc2VkKSB7XG5cdCAgICAgICAgLy8gc3RydWN0dXJhbCBkaXJlY3RpdmVzXG5cdCAgICAgICAgcHJvY2Vzc0ZvcihlbGVtZW50KTtcblx0ICAgICAgICBwcm9jZXNzSWYoZWxlbWVudCk7XG5cdCAgICAgICAgcHJvY2Vzc09uY2UoZWxlbWVudCk7XG5cdCAgICAgICAgLy8gZWxlbWVudC1zY29wZSBzdHVmZlxuXHQgICAgICAgIHByb2Nlc3NFbGVtZW50KGVsZW1lbnQsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmdW5jdGlvbiBjaGVja1Jvb3RDb25zdHJhaW50cyAoZWwpIHtcblx0ICAgICAgICB7XG5cdCAgICAgICAgICBpZiAoZWwudGFnID09PSAnc2xvdCcgfHwgZWwudGFnID09PSAndGVtcGxhdGUnKSB7XG5cdCAgICAgICAgICAgIHdhcm5PbmNlKFxuXHQgICAgICAgICAgICAgIFwiQ2Fubm90IHVzZSA8XCIgKyAoZWwudGFnKSArIFwiPiBhcyBjb21wb25lbnQgcm9vdCBlbGVtZW50IGJlY2F1c2UgaXQgbWF5IFwiICtcblx0ICAgICAgICAgICAgICAnY29udGFpbiBtdWx0aXBsZSBub2Rlcy4nXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZiAoZWwuYXR0cnNNYXAuaGFzT3duUHJvcGVydHkoJ3YtZm9yJykpIHtcblx0ICAgICAgICAgICAgd2Fybk9uY2UoXG5cdCAgICAgICAgICAgICAgJ0Nhbm5vdCB1c2Ugdi1mb3Igb24gc3RhdGVmdWwgY29tcG9uZW50IHJvb3QgZWxlbWVudCBiZWNhdXNlICcgK1xuXHQgICAgICAgICAgICAgICdpdCByZW5kZXJzIG11bHRpcGxlIGVsZW1lbnRzLidcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHRyZWUgbWFuYWdlbWVudFxuXHQgICAgICBpZiAoIXJvb3QpIHtcblx0ICAgICAgICByb290ID0gZWxlbWVudDtcblx0ICAgICAgICBjaGVja1Jvb3RDb25zdHJhaW50cyhyb290KTtcblx0ICAgICAgfSBlbHNlIGlmICghc3RhY2subGVuZ3RoKSB7XG5cdCAgICAgICAgLy8gYWxsb3cgcm9vdCBlbGVtZW50cyB3aXRoIHYtaWYsIHYtZWxzZS1pZiBhbmQgdi1lbHNlXG5cdCAgICAgICAgaWYgKHJvb3QuaWYgJiYgKGVsZW1lbnQuZWxzZWlmIHx8IGVsZW1lbnQuZWxzZSkpIHtcblx0ICAgICAgICAgIGNoZWNrUm9vdENvbnN0cmFpbnRzKGVsZW1lbnQpO1xuXHQgICAgICAgICAgYWRkSWZDb25kaXRpb24ocm9vdCwge1xuXHQgICAgICAgICAgICBleHA6IGVsZW1lbnQuZWxzZWlmLFxuXHQgICAgICAgICAgICBibG9jazogZWxlbWVudFxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHdhcm5PbmNlKFxuXHQgICAgICAgICAgICBcIkNvbXBvbmVudCB0ZW1wbGF0ZSBzaG91bGQgY29udGFpbiBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIFwiICtcblx0ICAgICAgICAgICAgXCJJZiB5b3UgYXJlIHVzaW5nIHYtaWYgb24gbXVsdGlwbGUgZWxlbWVudHMsIFwiICtcblx0ICAgICAgICAgICAgXCJ1c2Ugdi1lbHNlLWlmIHRvIGNoYWluIHRoZW0gaW5zdGVhZC5cIlxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGN1cnJlbnRQYXJlbnQgJiYgIWVsZW1lbnQuZm9yYmlkZGVuKSB7XG5cdCAgICAgICAgaWYgKGVsZW1lbnQuZWxzZWlmIHx8IGVsZW1lbnQuZWxzZSkge1xuXHQgICAgICAgICAgcHJvY2Vzc0lmQ29uZGl0aW9ucyhlbGVtZW50LCBjdXJyZW50UGFyZW50KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuc2xvdFNjb3BlKSB7IC8vIHNjb3BlZCBzbG90XG5cdCAgICAgICAgICBjdXJyZW50UGFyZW50LnBsYWluID0gZmFsc2U7XG5cdCAgICAgICAgICB2YXIgbmFtZSA9IGVsZW1lbnQuc2xvdFRhcmdldCB8fCAnXCJkZWZhdWx0XCInOyhjdXJyZW50UGFyZW50LnNjb3BlZFNsb3RzIHx8IChjdXJyZW50UGFyZW50LnNjb3BlZFNsb3RzID0ge30pKVtuYW1lXSA9IGVsZW1lbnQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGN1cnJlbnRQYXJlbnQuY2hpbGRyZW4ucHVzaChlbGVtZW50KTtcblx0ICAgICAgICAgIGVsZW1lbnQucGFyZW50ID0gY3VycmVudFBhcmVudDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCF1bmFyeSkge1xuXHQgICAgICAgIGN1cnJlbnRQYXJlbnQgPSBlbGVtZW50O1xuXHQgICAgICAgIHN0YWNrLnB1c2goZWxlbWVudCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY2xvc2VFbGVtZW50KGVsZW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGVuZDogZnVuY3Rpb24gZW5kICgpIHtcblx0ICAgICAgLy8gcmVtb3ZlIHRyYWlsaW5nIHdoaXRlc3BhY2Vcblx0ICAgICAgdmFyIGVsZW1lbnQgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcblx0ICAgICAgdmFyIGxhc3ROb2RlID0gZWxlbWVudC5jaGlsZHJlbltlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuXHQgICAgICBpZiAobGFzdE5vZGUgJiYgbGFzdE5vZGUudHlwZSA9PT0gMyAmJiBsYXN0Tm9kZS50ZXh0ID09PSAnICcgJiYgIWluUHJlKSB7XG5cdCAgICAgICAgZWxlbWVudC5jaGlsZHJlbi5wb3AoKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBwb3Agc3RhY2tcblx0ICAgICAgc3RhY2subGVuZ3RoIC09IDE7XG5cdCAgICAgIGN1cnJlbnRQYXJlbnQgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcblx0ICAgICAgY2xvc2VFbGVtZW50KGVsZW1lbnQpO1xuXHQgICAgfSxcblx0XG5cdCAgICBjaGFyczogZnVuY3Rpb24gY2hhcnMgKHRleHQpIHtcblx0ICAgICAgaWYgKCFjdXJyZW50UGFyZW50KSB7XG5cdCAgICAgICAge1xuXHQgICAgICAgICAgaWYgKHRleHQgPT09IHRlbXBsYXRlKSB7XG5cdCAgICAgICAgICAgIHdhcm5PbmNlKFxuXHQgICAgICAgICAgICAgICdDb21wb25lbnQgdGVtcGxhdGUgcmVxdWlyZXMgYSByb290IGVsZW1lbnQsIHJhdGhlciB0aGFuIGp1c3QgdGV4dC4nXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKCh0ZXh0ID0gdGV4dC50cmltKCkpKSB7XG5cdCAgICAgICAgICAgIHdhcm5PbmNlKFxuXHQgICAgICAgICAgICAgIChcInRleHQgXFxcIlwiICsgdGV4dCArIFwiXFxcIiBvdXRzaWRlIHJvb3QgZWxlbWVudCB3aWxsIGJlIGlnbm9yZWQuXCIpXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVyblxuXHQgICAgICB9XG5cdCAgICAgIC8vIElFIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1Z1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGlzSUUgJiZcblx0ICAgICAgICBjdXJyZW50UGFyZW50LnRhZyA9PT0gJ3RleHRhcmVhJyAmJlxuXHQgICAgICAgIGN1cnJlbnRQYXJlbnQuYXR0cnNNYXAucGxhY2Vob2xkZXIgPT09IHRleHRcblx0ICAgICAgKSB7XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGNoaWxkcmVuID0gY3VycmVudFBhcmVudC5jaGlsZHJlbjtcblx0ICAgICAgdGV4dCA9IGluUHJlIHx8IHRleHQudHJpbSgpXG5cdCAgICAgICAgPyBpc1RleHRUYWcoY3VycmVudFBhcmVudCkgPyB0ZXh0IDogZGVjb2RlSFRNTENhY2hlZCh0ZXh0KVxuXHQgICAgICAgIC8vIG9ubHkgcHJlc2VydmUgd2hpdGVzcGFjZSBpZiBpdHMgbm90IHJpZ2h0IGFmdGVyIGEgc3RhcnRpbmcgdGFnXG5cdCAgICAgICAgOiBwcmVzZXJ2ZVdoaXRlc3BhY2UgJiYgY2hpbGRyZW4ubGVuZ3RoID8gJyAnIDogJyc7XG5cdCAgICAgIGlmICh0ZXh0KSB7XG5cdCAgICAgICAgdmFyIHJlcztcblx0ICAgICAgICBpZiAoIWluVlByZSAmJiB0ZXh0ICE9PSAnICcgJiYgKHJlcyA9IHBhcnNlVGV4dCh0ZXh0LCBkZWxpbWl0ZXJzKSkpIHtcblx0ICAgICAgICAgIGNoaWxkcmVuLnB1c2goe1xuXHQgICAgICAgICAgICB0eXBlOiAyLFxuXHQgICAgICAgICAgICBleHByZXNzaW9uOiByZXMuZXhwcmVzc2lvbixcblx0ICAgICAgICAgICAgdG9rZW5zOiByZXMudG9rZW5zLFxuXHQgICAgICAgICAgICB0ZXh0OiB0ZXh0XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHRleHQgIT09ICcgJyB8fCAhY2hpbGRyZW4ubGVuZ3RoIHx8IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdLnRleHQgIT09ICcgJykge1xuXHQgICAgICAgICAgY2hpbGRyZW4ucHVzaCh7XG5cdCAgICAgICAgICAgIHR5cGU6IDMsXG5cdCAgICAgICAgICAgIHRleHQ6IHRleHRcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGNvbW1lbnQ6IGZ1bmN0aW9uIGNvbW1lbnQgKHRleHQpIHtcblx0ICAgICAgY3VycmVudFBhcmVudC5jaGlsZHJlbi5wdXNoKHtcblx0ICAgICAgICB0eXBlOiAzLFxuXHQgICAgICAgIHRleHQ6IHRleHQsXG5cdCAgICAgICAgaXNDb21tZW50OiB0cnVlXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiByb290XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NQcmUgKGVsKSB7XG5cdCAgaWYgKGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LXByZScpICE9IG51bGwpIHtcblx0ICAgIGVsLnByZSA9IHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzUmF3QXR0cnMgKGVsKSB7XG5cdCAgdmFyIGwgPSBlbC5hdHRyc0xpc3QubGVuZ3RoO1xuXHQgIGlmIChsKSB7XG5cdCAgICB2YXIgYXR0cnMgPSBlbC5hdHRycyA9IG5ldyBBcnJheShsKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGF0dHJzW2ldID0ge1xuXHQgICAgICAgIG5hbWU6IGVsLmF0dHJzTGlzdFtpXS5uYW1lLFxuXHQgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShlbC5hdHRyc0xpc3RbaV0udmFsdWUpXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICghZWwucHJlKSB7XG5cdCAgICAvLyBub24gcm9vdCBub2RlIGluIHByZSBibG9ja3Mgd2l0aCBubyBhdHRyaWJ1dGVzXG5cdCAgICBlbC5wbGFpbiA9IHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzRWxlbWVudCAoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgIHByb2Nlc3NLZXkoZWxlbWVudCk7XG5cdFxuXHQgIC8vIGRldGVybWluZSB3aGV0aGVyIHRoaXMgaXMgYSBwbGFpbiBlbGVtZW50IGFmdGVyXG5cdCAgLy8gcmVtb3Zpbmcgc3RydWN0dXJhbCBhdHRyaWJ1dGVzXG5cdCAgZWxlbWVudC5wbGFpbiA9ICFlbGVtZW50LmtleSAmJiAhZWxlbWVudC5hdHRyc0xpc3QubGVuZ3RoO1xuXHRcblx0ICBwcm9jZXNzUmVmKGVsZW1lbnQpO1xuXHQgIHByb2Nlc3NTbG90KGVsZW1lbnQpO1xuXHQgIHByb2Nlc3NDb21wb25lbnQoZWxlbWVudCk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBlbGVtZW50ID0gdHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKSB8fCBlbGVtZW50O1xuXHQgIH1cblx0ICBwcm9jZXNzQXR0cnMoZWxlbWVudCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NLZXkgKGVsKSB7XG5cdCAgdmFyIGV4cCA9IGdldEJpbmRpbmdBdHRyKGVsLCAna2V5Jyk7XG5cdCAgaWYgKGV4cCkge1xuXHQgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVsLnRhZyA9PT0gJ3RlbXBsYXRlJykge1xuXHQgICAgICB3YXJuJDIoXCI8dGVtcGxhdGU+IGNhbm5vdCBiZSBrZXllZC4gUGxhY2UgdGhlIGtleSBvbiByZWFsIGVsZW1lbnRzIGluc3RlYWQuXCIpO1xuXHQgICAgfVxuXHQgICAgZWwua2V5ID0gZXhwO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1JlZiAoZWwpIHtcblx0ICB2YXIgcmVmID0gZ2V0QmluZGluZ0F0dHIoZWwsICdyZWYnKTtcblx0ICBpZiAocmVmKSB7XG5cdCAgICBlbC5yZWYgPSByZWY7XG5cdCAgICBlbC5yZWZJbkZvciA9IGNoZWNrSW5Gb3IoZWwpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0ZvciAoZWwpIHtcblx0ICB2YXIgZXhwO1xuXHQgIGlmICgoZXhwID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZm9yJykpKSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VGb3IoZXhwKTtcblx0ICAgIGlmIChyZXMpIHtcblx0ICAgICAgZXh0ZW5kKGVsLCByZXMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgd2FybiQyKFxuXHQgICAgICAgIChcIkludmFsaWQgdi1mb3IgZXhwcmVzc2lvbjogXCIgKyBleHApXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRcblx0XG5cdGZ1bmN0aW9uIHBhcnNlRm9yIChleHApIHtcblx0ICB2YXIgaW5NYXRjaCA9IGV4cC5tYXRjaChmb3JBbGlhc1JFKTtcblx0ICBpZiAoIWluTWF0Y2gpIHsgcmV0dXJuIH1cblx0ICB2YXIgcmVzID0ge307XG5cdCAgcmVzLmZvciA9IGluTWF0Y2hbMl0udHJpbSgpO1xuXHQgIHZhciBhbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpLnJlcGxhY2Uoc3RyaXBQYXJlbnNSRSwgJycpO1xuXHQgIHZhciBpdGVyYXRvck1hdGNoID0gYWxpYXMubWF0Y2goZm9ySXRlcmF0b3JSRSk7XG5cdCAgaWYgKGl0ZXJhdG9yTWF0Y2gpIHtcblx0ICAgIHJlcy5hbGlhcyA9IGFsaWFzLnJlcGxhY2UoZm9ySXRlcmF0b3JSRSwgJycpO1xuXHQgICAgcmVzLml0ZXJhdG9yMSA9IGl0ZXJhdG9yTWF0Y2hbMV0udHJpbSgpO1xuXHQgICAgaWYgKGl0ZXJhdG9yTWF0Y2hbMl0pIHtcblx0ICAgICAgcmVzLml0ZXJhdG9yMiA9IGl0ZXJhdG9yTWF0Y2hbMl0udHJpbSgpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXMuYWxpYXMgPSBhbGlhcztcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzSWYgKGVsKSB7XG5cdCAgdmFyIGV4cCA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWlmJyk7XG5cdCAgaWYgKGV4cCkge1xuXHQgICAgZWwuaWYgPSBleHA7XG5cdCAgICBhZGRJZkNvbmRpdGlvbihlbCwge1xuXHQgICAgICBleHA6IGV4cCxcblx0ICAgICAgYmxvY2s6IGVsXG5cdCAgICB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWVsc2UnKSAhPSBudWxsKSB7XG5cdCAgICAgIGVsLmVsc2UgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgdmFyIGVsc2VpZiA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWVsc2UtaWYnKTtcblx0ICAgIGlmIChlbHNlaWYpIHtcblx0ICAgICAgZWwuZWxzZWlmID0gZWxzZWlmO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0lmQ29uZGl0aW9ucyAoZWwsIHBhcmVudCkge1xuXHQgIHZhciBwcmV2ID0gZmluZFByZXZFbGVtZW50KHBhcmVudC5jaGlsZHJlbik7XG5cdCAgaWYgKHByZXYgJiYgcHJldi5pZikge1xuXHQgICAgYWRkSWZDb25kaXRpb24ocHJldiwge1xuXHQgICAgICBleHA6IGVsLmVsc2VpZixcblx0ICAgICAgYmxvY2s6IGVsXG5cdCAgICB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgd2FybiQyKFxuXHQgICAgICBcInYtXCIgKyAoZWwuZWxzZWlmID8gKCdlbHNlLWlmPVwiJyArIGVsLmVsc2VpZiArICdcIicpIDogJ2Vsc2UnKSArIFwiIFwiICtcblx0ICAgICAgXCJ1c2VkIG9uIGVsZW1lbnQgPFwiICsgKGVsLnRhZykgKyBcIj4gd2l0aG91dCBjb3JyZXNwb25kaW5nIHYtaWYuXCJcblx0ICAgICk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmaW5kUHJldkVsZW1lbnQgKGNoaWxkcmVuKSB7XG5cdCAgdmFyIGkgPSBjaGlsZHJlbi5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKGNoaWxkcmVuW2ldLnR5cGUgPT09IDEpIHtcblx0ICAgICAgcmV0dXJuIGNoaWxkcmVuW2ldXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY2hpbGRyZW5baV0udGV4dCAhPT0gJyAnKSB7XG5cdCAgICAgICAgd2FybiQyKFxuXHQgICAgICAgICAgXCJ0ZXh0IFxcXCJcIiArIChjaGlsZHJlbltpXS50ZXh0LnRyaW0oKSkgKyBcIlxcXCIgYmV0d2VlbiB2LWlmIGFuZCB2LWVsc2UoLWlmKSBcIiArXG5cdCAgICAgICAgICBcIndpbGwgYmUgaWdub3JlZC5cIlxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgY2hpbGRyZW4ucG9wKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRJZkNvbmRpdGlvbiAoZWwsIGNvbmRpdGlvbikge1xuXHQgIGlmICghZWwuaWZDb25kaXRpb25zKSB7XG5cdCAgICBlbC5pZkNvbmRpdGlvbnMgPSBbXTtcblx0ICB9XG5cdCAgZWwuaWZDb25kaXRpb25zLnB1c2goY29uZGl0aW9uKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc09uY2UgKGVsKSB7XG5cdCAgdmFyIG9uY2UkJDEgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1vbmNlJyk7XG5cdCAgaWYgKG9uY2UkJDEgIT0gbnVsbCkge1xuXHQgICAgZWwub25jZSA9IHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzU2xvdCAoZWwpIHtcblx0ICBpZiAoZWwudGFnID09PSAnc2xvdCcpIHtcblx0ICAgIGVsLnNsb3ROYW1lID0gZ2V0QmluZGluZ0F0dHIoZWwsICduYW1lJyk7XG5cdCAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgZWwua2V5KSB7XG5cdCAgICAgIHdhcm4kMihcblx0ICAgICAgICBcImBrZXlgIGRvZXMgbm90IHdvcmsgb24gPHNsb3Q+IGJlY2F1c2Ugc2xvdHMgYXJlIGFic3RyYWN0IG91dGxldHMgXCIgK1xuXHQgICAgICAgIFwiYW5kIGNhbiBwb3NzaWJseSBleHBhbmQgaW50byBtdWx0aXBsZSBlbGVtZW50cy4gXCIgK1xuXHQgICAgICAgIFwiVXNlIHRoZSBrZXkgb24gYSB3cmFwcGluZyBlbGVtZW50IGluc3RlYWQuXCJcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHNsb3RTY29wZTtcblx0ICAgIGlmIChlbC50YWcgPT09ICd0ZW1wbGF0ZScpIHtcblx0ICAgICAgc2xvdFNjb3BlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3Njb3BlJyk7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgc2xvdFNjb3BlKSB7XG5cdCAgICAgICAgd2FybiQyKFxuXHQgICAgICAgICAgXCJ0aGUgXFxcInNjb3BlXFxcIiBhdHRyaWJ1dGUgZm9yIHNjb3BlZCBzbG90cyBoYXZlIGJlZW4gZGVwcmVjYXRlZCBhbmQgXCIgK1xuXHQgICAgICAgICAgXCJyZXBsYWNlZCBieSBcXFwic2xvdC1zY29wZVxcXCIgc2luY2UgMi41LiBUaGUgbmV3IFxcXCJzbG90LXNjb3BlXFxcIiBhdHRyaWJ1dGUgXCIgK1xuXHQgICAgICAgICAgXCJjYW4gYWxzbyBiZSB1c2VkIG9uIHBsYWluIGVsZW1lbnRzIGluIGFkZGl0aW9uIHRvIDx0ZW1wbGF0ZT4gdG8gXCIgK1xuXHQgICAgICAgICAgXCJkZW5vdGUgc2NvcGVkIHNsb3RzLlwiLFxuXHQgICAgICAgICAgdHJ1ZVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgZWwuc2xvdFNjb3BlID0gc2xvdFNjb3BlIHx8IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzbG90LXNjb3BlJyk7XG5cdCAgICB9IGVsc2UgaWYgKChzbG90U2NvcGUgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc2xvdC1zY29wZScpKSkge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVsLmF0dHJzTWFwWyd2LWZvciddKSB7XG5cdCAgICAgICAgd2FybiQyKFxuXHQgICAgICAgICAgXCJBbWJpZ3VvdXMgY29tYmluZWQgdXNhZ2Ugb2Ygc2xvdC1zY29wZSBhbmQgdi1mb3Igb24gPFwiICsgKGVsLnRhZykgKyBcIj4gXCIgK1xuXHQgICAgICAgICAgXCIodi1mb3IgdGFrZXMgaGlnaGVyIHByaW9yaXR5KS4gVXNlIGEgd3JhcHBlciA8dGVtcGxhdGU+IGZvciB0aGUgXCIgK1xuXHQgICAgICAgICAgXCJzY29wZWQgc2xvdCB0byBtYWtlIGl0IGNsZWFyZXIuXCIsXG5cdCAgICAgICAgICB0cnVlXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICBlbC5zbG90U2NvcGUgPSBzbG90U2NvcGU7XG5cdCAgICB9XG5cdCAgICB2YXIgc2xvdFRhcmdldCA9IGdldEJpbmRpbmdBdHRyKGVsLCAnc2xvdCcpO1xuXHQgICAgaWYgKHNsb3RUYXJnZXQpIHtcblx0ICAgICAgZWwuc2xvdFRhcmdldCA9IHNsb3RUYXJnZXQgPT09ICdcIlwiJyA/ICdcImRlZmF1bHRcIicgOiBzbG90VGFyZ2V0O1xuXHQgICAgICAvLyBwcmVzZXJ2ZSBzbG90IGFzIGFuIGF0dHJpYnV0ZSBmb3IgbmF0aXZlIHNoYWRvdyBET00gY29tcGF0XG5cdCAgICAgIC8vIG9ubHkgZm9yIG5vbi1zY29wZWQgc2xvdHMuXG5cdCAgICAgIGlmIChlbC50YWcgIT09ICd0ZW1wbGF0ZScgJiYgIWVsLnNsb3RTY29wZSkge1xuXHQgICAgICAgIGFkZEF0dHIoZWwsICdzbG90Jywgc2xvdFRhcmdldCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NDb21wb25lbnQgKGVsKSB7XG5cdCAgdmFyIGJpbmRpbmc7XG5cdCAgaWYgKChiaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdpcycpKSkge1xuXHQgICAgZWwuY29tcG9uZW50ID0gYmluZGluZztcblx0ICB9XG5cdCAgaWYgKGdldEFuZFJlbW92ZUF0dHIoZWwsICdpbmxpbmUtdGVtcGxhdGUnKSAhPSBudWxsKSB7XG5cdCAgICBlbC5pbmxpbmVUZW1wbGF0ZSA9IHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzQXR0cnMgKGVsKSB7XG5cdCAgdmFyIGxpc3QgPSBlbC5hdHRyc0xpc3Q7XG5cdCAgdmFyIGksIGwsIG5hbWUsIHJhd05hbWUsIHZhbHVlLCBtb2RpZmllcnMsIGlzUHJvcDtcblx0ICBmb3IgKGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG5hbWUgPSByYXdOYW1lID0gbGlzdFtpXS5uYW1lO1xuXHQgICAgdmFsdWUgPSBsaXN0W2ldLnZhbHVlO1xuXHQgICAgaWYgKGRpclJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgLy8gbWFyayBlbGVtZW50IGFzIGR5bmFtaWNcblx0ICAgICAgZWwuaGFzQmluZGluZ3MgPSB0cnVlO1xuXHQgICAgICAvLyBtb2RpZmllcnNcblx0ICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSk7XG5cdCAgICAgIGlmIChtb2RpZmllcnMpIHtcblx0ICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoYmluZFJFLnRlc3QobmFtZSkpIHsgLy8gdi1iaW5kXG5cdCAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcblx0ICAgICAgICB2YWx1ZSA9IHBhcnNlRmlsdGVycyh2YWx1ZSk7XG5cdCAgICAgICAgaXNQcm9wID0gZmFsc2U7XG5cdCAgICAgICAgaWYgKG1vZGlmaWVycykge1xuXHQgICAgICAgICAgaWYgKG1vZGlmaWVycy5wcm9wKSB7XG5cdCAgICAgICAgICAgIGlzUHJvcCA9IHRydWU7XG5cdCAgICAgICAgICAgIG5hbWUgPSBjYW1lbGl6ZShuYW1lKTtcblx0ICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdpbm5lckh0bWwnKSB7IG5hbWUgPSAnaW5uZXJIVE1MJzsgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKG1vZGlmaWVycy5jYW1lbCkge1xuXHQgICAgICAgICAgICBuYW1lID0gY2FtZWxpemUobmFtZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZiAobW9kaWZpZXJzLnN5bmMpIHtcblx0ICAgICAgICAgICAgYWRkSGFuZGxlcihcblx0ICAgICAgICAgICAgICBlbCxcblx0ICAgICAgICAgICAgICAoXCJ1cGRhdGU6XCIgKyAoY2FtZWxpemUobmFtZSkpKSxcblx0ICAgICAgICAgICAgICBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgXCIkZXZlbnRcIilcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzUHJvcCB8fCAoXG5cdCAgICAgICAgICAhZWwuY29tcG9uZW50ICYmIHBsYXRmb3JtTXVzdFVzZVByb3AoZWwudGFnLCBlbC5hdHRyc01hcC50eXBlLCBuYW1lKVxuXHQgICAgICAgICkpIHtcblx0ICAgICAgICAgIGFkZFByb3AoZWwsIG5hbWUsIHZhbHVlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgYWRkQXR0cihlbCwgbmFtZSwgdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChvblJFLnRlc3QobmFtZSkpIHsgLy8gdi1vblxuXHQgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpO1xuXHQgICAgICAgIGFkZEhhbmRsZXIoZWwsIG5hbWUsIHZhbHVlLCBtb2RpZmllcnMsIGZhbHNlLCB3YXJuJDIpO1xuXHQgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZGlyUkUsICcnKTtcblx0ICAgICAgICAvLyBwYXJzZSBhcmdcblx0ICAgICAgICB2YXIgYXJnTWF0Y2ggPSBuYW1lLm1hdGNoKGFyZ1JFKTtcblx0ICAgICAgICB2YXIgYXJnID0gYXJnTWF0Y2ggJiYgYXJnTWF0Y2hbMV07XG5cdCAgICAgICAgaWYgKGFyZykge1xuXHQgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgLShhcmcubGVuZ3RoICsgMSkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBhZGREaXJlY3RpdmUoZWwsIG5hbWUsIHJhd05hbWUsIHZhbHVlLCBhcmcsIG1vZGlmaWVycyk7XG5cdCAgICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUgPT09ICdtb2RlbCcpIHtcblx0ICAgICAgICAgIGNoZWNrRm9yQWxpYXNNb2RlbChlbCwgdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbGl0ZXJhbCBhdHRyaWJ1dGVcblx0ICAgICAge1xuXHQgICAgICAgIHZhciByZXMgPSBwYXJzZVRleHQodmFsdWUsIGRlbGltaXRlcnMpO1xuXHQgICAgICAgIGlmIChyZXMpIHtcblx0ICAgICAgICAgIHdhcm4kMihcblx0ICAgICAgICAgICAgbmFtZSArIFwiPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiOiBcIiArXG5cdCAgICAgICAgICAgICdJbnRlcnBvbGF0aW9uIGluc2lkZSBhdHRyaWJ1dGVzIGhhcyBiZWVuIHJlbW92ZWQuICcgK1xuXHQgICAgICAgICAgICAnVXNlIHYtYmluZCBvciB0aGUgY29sb24gc2hvcnRoYW5kIGluc3RlYWQuIEZvciBleGFtcGxlLCAnICtcblx0ICAgICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBpZD1cInt7IHZhbCB9fVwiPiwgdXNlIDxkaXYgOmlkPVwidmFsXCI+Lidcblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGFkZEF0dHIoZWwsIG5hbWUsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG5cdCAgICAgIC8vICM2ODg3IGZpcmVmb3ggZG9lc24ndCB1cGRhdGUgbXV0ZWQgc3RhdGUgaWYgc2V0IHZpYSBhdHRyaWJ1dGVcblx0ICAgICAgLy8gZXZlbiBpbW1lZGlhdGVseSBhZnRlciBlbGVtZW50IGNyZWF0aW9uXG5cdCAgICAgIGlmICghZWwuY29tcG9uZW50ICYmXG5cdCAgICAgICAgICBuYW1lID09PSAnbXV0ZWQnICYmXG5cdCAgICAgICAgICBwbGF0Zm9ybU11c3RVc2VQcm9wKGVsLnRhZywgZWwuYXR0cnNNYXAudHlwZSwgbmFtZSkpIHtcblx0ICAgICAgICBhZGRQcm9wKGVsLCBuYW1lLCAndHJ1ZScpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0luRm9yIChlbCkge1xuXHQgIHZhciBwYXJlbnQgPSBlbDtcblx0ICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICBpZiAocGFyZW50LmZvciAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHJldHVybiB0cnVlXG5cdCAgICB9XG5cdCAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuXHQgIH1cblx0ICByZXR1cm4gZmFsc2Vcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMgKG5hbWUpIHtcblx0ICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuXHQgIGlmIChtYXRjaCkge1xuXHQgICAgdmFyIHJldCA9IHt9O1xuXHQgICAgbWF0Y2guZm9yRWFjaChmdW5jdGlvbiAobSkgeyByZXRbbS5zbGljZSgxKV0gPSB0cnVlOyB9KTtcblx0ICAgIHJldHVybiByZXRcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VBdHRyc01hcCAoYXR0cnMpIHtcblx0ICB2YXIgbWFwID0ge307XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGlmIChcblx0ICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICAgbWFwW2F0dHJzW2ldLm5hbWVdICYmICFpc0lFICYmICFpc0VkZ2Vcblx0ICAgICkge1xuXHQgICAgICB3YXJuJDIoJ2R1cGxpY2F0ZSBhdHRyaWJ1dGU6ICcgKyBhdHRyc1tpXS5uYW1lKTtcblx0ICAgIH1cblx0ICAgIG1hcFthdHRyc1tpXS5uYW1lXSA9IGF0dHJzW2ldLnZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gbWFwXG5cdH1cblx0XG5cdC8vIGZvciBzY3JpcHQgKGUuZy4gdHlwZT1cIngvdGVtcGxhdGVcIikgb3Igc3R5bGUsIGRvIG5vdCBkZWNvZGUgY29udGVudFxuXHRmdW5jdGlvbiBpc1RleHRUYWcgKGVsKSB7XG5cdCAgcmV0dXJuIGVsLnRhZyA9PT0gJ3NjcmlwdCcgfHwgZWwudGFnID09PSAnc3R5bGUnXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzRm9yYmlkZGVuVGFnIChlbCkge1xuXHQgIHJldHVybiAoXG5cdCAgICBlbC50YWcgPT09ICdzdHlsZScgfHxcblx0ICAgIChlbC50YWcgPT09ICdzY3JpcHQnICYmIChcblx0ICAgICAgIWVsLmF0dHJzTWFwLnR5cGUgfHxcblx0ICAgICAgZWwuYXR0cnNNYXAudHlwZSA9PT0gJ3RleHQvamF2YXNjcmlwdCdcblx0ICAgICkpXG5cdCAgKVxuXHR9XG5cdFxuXHR2YXIgaWVOU0J1ZyA9IC9eeG1sbnM6TlNcXGQrLztcblx0dmFyIGllTlNQcmVmaXggPSAvXk5TXFxkKzovO1xuXHRcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ZnVuY3Rpb24gZ3VhcmRJRVNWR0J1ZyAoYXR0cnMpIHtcblx0ICB2YXIgcmVzID0gW107XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIGlmICghaWVOU0J1Zy50ZXN0KGF0dHIubmFtZSkpIHtcblx0ICAgICAgYXR0ci5uYW1lID0gYXR0ci5uYW1lLnJlcGxhY2UoaWVOU1ByZWZpeCwgJycpO1xuXHQgICAgICByZXMucHVzaChhdHRyKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0ZvckFsaWFzTW9kZWwgKGVsLCB2YWx1ZSkge1xuXHQgIHZhciBfZWwgPSBlbDtcblx0ICB3aGlsZSAoX2VsKSB7XG5cdCAgICBpZiAoX2VsLmZvciAmJiBfZWwuYWxpYXMgPT09IHZhbHVlKSB7XG5cdCAgICAgIHdhcm4kMihcblx0ICAgICAgICBcIjxcIiArIChlbC50YWcpICsgXCIgdi1tb2RlbD1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIj46IFwiICtcblx0ICAgICAgICBcIllvdSBhcmUgYmluZGluZyB2LW1vZGVsIGRpcmVjdGx5IHRvIGEgdi1mb3IgaXRlcmF0aW9uIGFsaWFzLiBcIiArXG5cdCAgICAgICAgXCJUaGlzIHdpbGwgbm90IGJlIGFibGUgdG8gbW9kaWZ5IHRoZSB2LWZvciBzb3VyY2UgYXJyYXkgYmVjYXVzZSBcIiArXG5cdCAgICAgICAgXCJ3cml0aW5nIHRvIHRoZSBhbGlhcyBpcyBsaWtlIG1vZGlmeWluZyBhIGZ1bmN0aW9uIGxvY2FsIHZhcmlhYmxlLiBcIiArXG5cdCAgICAgICAgXCJDb25zaWRlciB1c2luZyBhbiBhcnJheSBvZiBvYmplY3RzIGFuZCB1c2Ugdi1tb2RlbCBvbiBhbiBvYmplY3QgcHJvcGVydHkgaW5zdGVhZC5cIlxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgICAgX2VsID0gX2VsLnBhcmVudDtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIEV4cGFuZCBpbnB1dFt2LW1vZGVsXSB3aXRoIGR5YW5taWMgdHlwZSBiaW5kaW5ncyBpbnRvIHYtaWYtZWxzZSBjaGFpbnNcblx0ICogVHVybiB0aGlzOlxuXHQgKiAgIDxpbnB1dCB2LW1vZGVsPVwiZGF0YVt0eXBlXVwiIDp0eXBlPVwidHlwZVwiPlxuXHQgKiBpbnRvIHRoaXM6XG5cdCAqICAgPGlucHV0IHYtaWY9XCJ0eXBlID09PSAnY2hlY2tib3gnXCIgdHlwZT1cImNoZWNrYm94XCIgdi1tb2RlbD1cImRhdGFbdHlwZV1cIj5cblx0ICogICA8aW5wdXQgdi1lbHNlLWlmPVwidHlwZSA9PT0gJ3JhZGlvJ1wiIHR5cGU9XCJyYWRpb1wiIHYtbW9kZWw9XCJkYXRhW3R5cGVdXCI+XG5cdCAqICAgPGlucHV0IHYtZWxzZSA6dHlwZT1cInR5cGVcIiB2LW1vZGVsPVwiZGF0YVt0eXBlXVwiPlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByZVRyYW5zZm9ybU5vZGUgKGVsLCBvcHRpb25zKSB7XG5cdCAgaWYgKGVsLnRhZyA9PT0gJ2lucHV0Jykge1xuXHQgICAgdmFyIG1hcCA9IGVsLmF0dHJzTWFwO1xuXHQgICAgaWYgKCFtYXBbJ3YtbW9kZWwnXSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgdHlwZUJpbmRpbmc7XG5cdCAgICBpZiAobWFwWyc6dHlwZSddIHx8IG1hcFsndi1iaW5kOnR5cGUnXSkge1xuXHQgICAgICB0eXBlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAndHlwZScpO1xuXHQgICAgfVxuXHQgICAgaWYgKCF0eXBlQmluZGluZyAmJiBtYXBbJ3YtYmluZCddKSB7XG5cdCAgICAgIHR5cGVCaW5kaW5nID0gXCIoXCIgKyAobWFwWyd2LWJpbmQnXSkgKyBcIikudHlwZVwiO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0eXBlQmluZGluZykge1xuXHQgICAgICB2YXIgaWZDb25kaXRpb24gPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1pZicsIHRydWUpO1xuXHQgICAgICB2YXIgaWZDb25kaXRpb25FeHRyYSA9IGlmQ29uZGl0aW9uID8gKFwiJiYoXCIgKyBpZkNvbmRpdGlvbiArIFwiKVwiKSA6IFwiXCI7XG5cdCAgICAgIHZhciBoYXNFbHNlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZWxzZScsIHRydWUpICE9IG51bGw7XG5cdCAgICAgIHZhciBlbHNlSWZDb25kaXRpb24gPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlLWlmJywgdHJ1ZSk7XG5cdCAgICAgIC8vIDEuIGNoZWNrYm94XG5cdCAgICAgIHZhciBicmFuY2gwID0gY2xvbmVBU1RFbGVtZW50KGVsKTtcblx0ICAgICAgLy8gcHJvY2VzcyBmb3Igb24gdGhlIG1haW4gbm9kZVxuXHQgICAgICBwcm9jZXNzRm9yKGJyYW5jaDApO1xuXHQgICAgICBhZGRSYXdBdHRyKGJyYW5jaDAsICd0eXBlJywgJ2NoZWNrYm94Jyk7XG5cdCAgICAgIHByb2Nlc3NFbGVtZW50KGJyYW5jaDAsIG9wdGlvbnMpO1xuXHQgICAgICBicmFuY2gwLnByb2Nlc3NlZCA9IHRydWU7IC8vIHByZXZlbnQgaXQgZnJvbSBkb3VibGUtcHJvY2Vzc2VkXG5cdCAgICAgIGJyYW5jaDAuaWYgPSBcIihcIiArIHR5cGVCaW5kaW5nICsgXCIpPT09J2NoZWNrYm94J1wiICsgaWZDb25kaXRpb25FeHRyYTtcblx0ICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwge1xuXHQgICAgICAgIGV4cDogYnJhbmNoMC5pZixcblx0ICAgICAgICBibG9jazogYnJhbmNoMFxuXHQgICAgICB9KTtcblx0ICAgICAgLy8gMi4gYWRkIHJhZGlvIGVsc2UtaWYgY29uZGl0aW9uXG5cdCAgICAgIHZhciBicmFuY2gxID0gY2xvbmVBU1RFbGVtZW50KGVsKTtcblx0ICAgICAgZ2V0QW5kUmVtb3ZlQXR0cihicmFuY2gxLCAndi1mb3InLCB0cnVlKTtcblx0ICAgICAgYWRkUmF3QXR0cihicmFuY2gxLCAndHlwZScsICdyYWRpbycpO1xuXHQgICAgICBwcm9jZXNzRWxlbWVudChicmFuY2gxLCBvcHRpb25zKTtcblx0ICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwge1xuXHQgICAgICAgIGV4cDogXCIoXCIgKyB0eXBlQmluZGluZyArIFwiKT09PSdyYWRpbydcIiArIGlmQ29uZGl0aW9uRXh0cmEsXG5cdCAgICAgICAgYmxvY2s6IGJyYW5jaDFcblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIDMuIG90aGVyXG5cdCAgICAgIHZhciBicmFuY2gyID0gY2xvbmVBU1RFbGVtZW50KGVsKTtcblx0ICAgICAgZ2V0QW5kUmVtb3ZlQXR0cihicmFuY2gyLCAndi1mb3InLCB0cnVlKTtcblx0ICAgICAgYWRkUmF3QXR0cihicmFuY2gyLCAnOnR5cGUnLCB0eXBlQmluZGluZyk7XG5cdCAgICAgIHByb2Nlc3NFbGVtZW50KGJyYW5jaDIsIG9wdGlvbnMpO1xuXHQgICAgICBhZGRJZkNvbmRpdGlvbihicmFuY2gwLCB7XG5cdCAgICAgICAgZXhwOiBpZkNvbmRpdGlvbixcblx0ICAgICAgICBibG9jazogYnJhbmNoMlxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmIChoYXNFbHNlKSB7XG5cdCAgICAgICAgYnJhbmNoMC5lbHNlID0gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIGlmIChlbHNlSWZDb25kaXRpb24pIHtcblx0ICAgICAgICBicmFuY2gwLmVsc2VpZiA9IGVsc2VJZkNvbmRpdGlvbjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGJyYW5jaDBcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNsb25lQVNURWxlbWVudCAoZWwpIHtcblx0ICByZXR1cm4gY3JlYXRlQVNURWxlbWVudChlbC50YWcsIGVsLmF0dHJzTGlzdC5zbGljZSgpLCBlbC5wYXJlbnQpXG5cdH1cblx0XG5cdHZhciBtb2RlbCQyID0ge1xuXHQgIHByZVRyYW5zZm9ybU5vZGU6IHByZVRyYW5zZm9ybU5vZGVcblx0fVxuXHRcblx0dmFyIG1vZHVsZXMkMSA9IFtcblx0ICBrbGFzcyQxLFxuXHQgIHN0eWxlJDEsXG5cdCAgbW9kZWwkMlxuXHRdXG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHRleHQgKGVsLCBkaXIpIHtcblx0ICBpZiAoZGlyLnZhbHVlKSB7XG5cdCAgICBhZGRQcm9wKGVsLCAndGV4dENvbnRlbnQnLCAoXCJfcyhcIiArIChkaXIudmFsdWUpICsgXCIpXCIpKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaHRtbCAoZWwsIGRpcikge1xuXHQgIGlmIChkaXIudmFsdWUpIHtcblx0ICAgIGFkZFByb3AoZWwsICdpbm5lckhUTUwnLCAoXCJfcyhcIiArIChkaXIudmFsdWUpICsgXCIpXCIpKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBkaXJlY3RpdmVzJDEgPSB7XG5cdCAgbW9kZWw6IG1vZGVsLFxuXHQgIHRleHQ6IHRleHQsXG5cdCAgaHRtbDogaHRtbFxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBiYXNlT3B0aW9ucyA9IHtcblx0ICBleHBlY3RIVE1MOiB0cnVlLFxuXHQgIG1vZHVsZXM6IG1vZHVsZXMkMSxcblx0ICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzJDEsXG5cdCAgaXNQcmVUYWc6IGlzUHJlVGFnLFxuXHQgIGlzVW5hcnlUYWc6IGlzVW5hcnlUYWcsXG5cdCAgbXVzdFVzZVByb3A6IG11c3RVc2VQcm9wLFxuXHQgIGNhbkJlTGVmdE9wZW5UYWc6IGNhbkJlTGVmdE9wZW5UYWcsXG5cdCAgaXNSZXNlcnZlZFRhZzogaXNSZXNlcnZlZFRhZyxcblx0ICBnZXRUYWdOYW1lc3BhY2U6IGdldFRhZ05hbWVzcGFjZSxcblx0ICBzdGF0aWNLZXlzOiBnZW5TdGF0aWNLZXlzKG1vZHVsZXMkMSlcblx0fTtcblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGlzU3RhdGljS2V5O1xuXHR2YXIgaXNQbGF0Zm9ybVJlc2VydmVkVGFnO1xuXHRcblx0dmFyIGdlblN0YXRpY0tleXNDYWNoZWQgPSBjYWNoZWQoZ2VuU3RhdGljS2V5cyQxKTtcblx0XG5cdC8qKlxuXHQgKiBHb2FsIG9mIHRoZSBvcHRpbWl6ZXI6IHdhbGsgdGhlIGdlbmVyYXRlZCB0ZW1wbGF0ZSBBU1QgdHJlZVxuXHQgKiBhbmQgZGV0ZWN0IHN1Yi10cmVlcyB0aGF0IGFyZSBwdXJlbHkgc3RhdGljLCBpLmUuIHBhcnRzIG9mXG5cdCAqIHRoZSBET00gdGhhdCBuZXZlciBuZWVkcyB0byBjaGFuZ2UuXG5cdCAqXG5cdCAqIE9uY2Ugd2UgZGV0ZWN0IHRoZXNlIHN1Yi10cmVlcywgd2UgY2FuOlxuXHQgKlxuXHQgKiAxLiBIb2lzdCB0aGVtIGludG8gY29uc3RhbnRzLCBzbyB0aGF0IHdlIG5vIGxvbmdlciBuZWVkIHRvXG5cdCAqICAgIGNyZWF0ZSBmcmVzaCBub2RlcyBmb3IgdGhlbSBvbiBlYWNoIHJlLXJlbmRlcjtcblx0ICogMi4gQ29tcGxldGVseSBza2lwIHRoZW0gaW4gdGhlIHBhdGNoaW5nIHByb2Nlc3MuXG5cdCAqL1xuXHRmdW5jdGlvbiBvcHRpbWl6ZSAocm9vdCwgb3B0aW9ucykge1xuXHQgIGlmICghcm9vdCkgeyByZXR1cm4gfVxuXHQgIGlzU3RhdGljS2V5ID0gZ2VuU3RhdGljS2V5c0NhY2hlZChvcHRpb25zLnN0YXRpY0tleXMgfHwgJycpO1xuXHQgIGlzUGxhdGZvcm1SZXNlcnZlZFRhZyA9IG9wdGlvbnMuaXNSZXNlcnZlZFRhZyB8fCBubztcblx0ICAvLyBmaXJzdCBwYXNzOiBtYXJrIGFsbCBub24tc3RhdGljIG5vZGVzLlxuXHQgIG1hcmtTdGF0aWMkMShyb290KTtcblx0ICAvLyBzZWNvbmQgcGFzczogbWFyayBzdGF0aWMgcm9vdHMuXG5cdCAgbWFya1N0YXRpY1Jvb3RzKHJvb3QsIGZhbHNlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuU3RhdGljS2V5cyQxIChrZXlzKSB7XG5cdCAgcmV0dXJuIG1ha2VNYXAoXG5cdCAgICAndHlwZSx0YWcsYXR0cnNMaXN0LGF0dHJzTWFwLHBsYWluLHBhcmVudCxjaGlsZHJlbixhdHRycycgK1xuXHQgICAgKGtleXMgPyAnLCcgKyBrZXlzIDogJycpXG5cdCAgKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXJrU3RhdGljJDEgKG5vZGUpIHtcblx0ICBub2RlLnN0YXRpYyA9IGlzU3RhdGljKG5vZGUpO1xuXHQgIGlmIChub2RlLnR5cGUgPT09IDEpIHtcblx0ICAgIC8vIGRvIG5vdCBtYWtlIGNvbXBvbmVudCBzbG90IGNvbnRlbnQgc3RhdGljLiB0aGlzIGF2b2lkc1xuXHQgICAgLy8gMS4gY29tcG9uZW50cyBub3QgYWJsZSB0byBtdXRhdGUgc2xvdCBub2Rlc1xuXHQgICAgLy8gMi4gc3RhdGljIHNsb3QgY29udGVudCBmYWlscyBmb3IgaG90LXJlbG9hZGluZ1xuXHQgICAgaWYgKFxuXHQgICAgICAhaXNQbGF0Zm9ybVJlc2VydmVkVGFnKG5vZGUudGFnKSAmJlxuXHQgICAgICBub2RlLnRhZyAhPT0gJ3Nsb3QnICYmXG5cdCAgICAgIG5vZGUuYXR0cnNNYXBbJ2lubGluZS10ZW1wbGF0ZSddID09IG51bGxcblx0ICAgICkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcblx0ICAgICAgbWFya1N0YXRpYyQxKGNoaWxkKTtcblx0ICAgICAgaWYgKCFjaGlsZC5zdGF0aWMpIHtcblx0ICAgICAgICBub2RlLnN0YXRpYyA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAobm9kZS5pZkNvbmRpdGlvbnMpIHtcblx0ICAgICAgZm9yICh2YXIgaSQxID0gMSwgbCQxID0gbm9kZS5pZkNvbmRpdGlvbnMubGVuZ3RoOyBpJDEgPCBsJDE7IGkkMSsrKSB7XG5cdCAgICAgICAgdmFyIGJsb2NrID0gbm9kZS5pZkNvbmRpdGlvbnNbaSQxXS5ibG9jaztcblx0ICAgICAgICBtYXJrU3RhdGljJDEoYmxvY2spO1xuXHQgICAgICAgIGlmICghYmxvY2suc3RhdGljKSB7XG5cdCAgICAgICAgICBub2RlLnN0YXRpYyA9IGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFya1N0YXRpY1Jvb3RzIChub2RlLCBpc0luRm9yKSB7XG5cdCAgaWYgKG5vZGUudHlwZSA9PT0gMSkge1xuXHQgICAgaWYgKG5vZGUuc3RhdGljIHx8IG5vZGUub25jZSkge1xuXHQgICAgICBub2RlLnN0YXRpY0luRm9yID0gaXNJbkZvcjtcblx0ICAgIH1cblx0ICAgIC8vIEZvciBhIG5vZGUgdG8gcXVhbGlmeSBhcyBhIHN0YXRpYyByb290LCBpdCBzaG91bGQgaGF2ZSBjaGlsZHJlbiB0aGF0XG5cdCAgICAvLyBhcmUgbm90IGp1c3Qgc3RhdGljIHRleHQuIE90aGVyd2lzZSB0aGUgY29zdCBvZiBob2lzdGluZyBvdXQgd2lsbFxuXHQgICAgLy8gb3V0d2VpZ2ggdGhlIGJlbmVmaXRzIGFuZCBpdCdzIGJldHRlciBvZmYgdG8ganVzdCBhbHdheXMgcmVuZGVyIGl0IGZyZXNoLlxuXHQgICAgaWYgKG5vZGUuc3RhdGljICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoICYmICEoXG5cdCAgICAgIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG5cdCAgICAgIG5vZGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gM1xuXHQgICAgKSkge1xuXHQgICAgICBub2RlLnN0YXRpY1Jvb3QgPSB0cnVlO1xuXHQgICAgICByZXR1cm5cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG5vZGUuc3RhdGljUm9vdCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIG1hcmtTdGF0aWNSb290cyhub2RlLmNoaWxkcmVuW2ldLCBpc0luRm9yIHx8ICEhbm9kZS5mb3IpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAobm9kZS5pZkNvbmRpdGlvbnMpIHtcblx0ICAgICAgZm9yICh2YXIgaSQxID0gMSwgbCQxID0gbm9kZS5pZkNvbmRpdGlvbnMubGVuZ3RoOyBpJDEgPCBsJDE7IGkkMSsrKSB7XG5cdCAgICAgICAgbWFya1N0YXRpY1Jvb3RzKG5vZGUuaWZDb25kaXRpb25zW2kkMV0uYmxvY2ssIGlzSW5Gb3IpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1N0YXRpYyAobm9kZSkge1xuXHQgIGlmIChub2RlLnR5cGUgPT09IDIpIHsgLy8gZXhwcmVzc2lvblxuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHQgIGlmIChub2RlLnR5cGUgPT09IDMpIHsgLy8gdGV4dFxuXHQgICAgcmV0dXJuIHRydWVcblx0ICB9XG5cdCAgcmV0dXJuICEhKG5vZGUucHJlIHx8IChcblx0ICAgICFub2RlLmhhc0JpbmRpbmdzICYmIC8vIG5vIGR5bmFtaWMgYmluZGluZ3Ncblx0ICAgICFub2RlLmlmICYmICFub2RlLmZvciAmJiAvLyBub3Qgdi1pZiBvciB2LWZvciBvciB2LWVsc2Vcblx0ICAgICFpc0J1aWx0SW5UYWcobm9kZS50YWcpICYmIC8vIG5vdCBhIGJ1aWx0LWluXG5cdCAgICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcobm9kZS50YWcpICYmIC8vIG5vdCBhIGNvbXBvbmVudFxuXHQgICAgIWlzRGlyZWN0Q2hpbGRPZlRlbXBsYXRlRm9yKG5vZGUpICYmXG5cdCAgICBPYmplY3Qua2V5cyhub2RlKS5ldmVyeShpc1N0YXRpY0tleSlcblx0ICApKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0RpcmVjdENoaWxkT2ZUZW1wbGF0ZUZvciAobm9kZSkge1xuXHQgIHdoaWxlIChub2RlLnBhcmVudCkge1xuXHQgICAgbm9kZSA9IG5vZGUucGFyZW50O1xuXHQgICAgaWYgKG5vZGUudGFnICE9PSAndGVtcGxhdGUnKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgfVxuXHQgICAgaWYgKG5vZGUuZm9yKSB7XG5cdCAgICAgIHJldHVybiB0cnVlXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBmbkV4cFJFID0gL14oW1xcdyRfXSt8XFwoW14pXSo/XFwpKVxccyo9PnxeZnVuY3Rpb25cXHMqXFwoLztcblx0dmFyIHNpbXBsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooPzpcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnW14nXSo/J118XFxbXCJbXlwiXSo/XCJdfFxcW1xcZCtdfFxcW1tBLVphLXpfJF1bXFx3JF0qXSkqJC87XG5cdFxuXHQvLyBLZXlib2FyZEV2ZW50LmtleUNvZGUgYWxpYXNlc1xuXHR2YXIga2V5Q29kZXMgPSB7XG5cdCAgZXNjOiAyNyxcblx0ICB0YWI6IDksXG5cdCAgZW50ZXI6IDEzLFxuXHQgIHNwYWNlOiAzMixcblx0ICB1cDogMzgsXG5cdCAgbGVmdDogMzcsXG5cdCAgcmlnaHQ6IDM5LFxuXHQgIGRvd246IDQwLFxuXHQgICdkZWxldGUnOiBbOCwgNDZdXG5cdH07XG5cdFxuXHQvLyBLZXlib2FyZEV2ZW50LmtleSBhbGlhc2VzXG5cdHZhciBrZXlOYW1lcyA9IHtcblx0ICBlc2M6ICdFc2NhcGUnLFxuXHQgIHRhYjogJ1RhYicsXG5cdCAgZW50ZXI6ICdFbnRlcicsXG5cdCAgc3BhY2U6ICcgJyxcblx0ICB1cDogJ0Fycm93VXAnLFxuXHQgIGxlZnQ6ICdBcnJvd0xlZnQnLFxuXHQgIHJpZ2h0OiAnQXJyb3dSaWdodCcsXG5cdCAgZG93bjogJ0Fycm93RG93bicsXG5cdCAgJ2RlbGV0ZSc6IFsnQmFja3NwYWNlJywgJ0RlbGV0ZSddXG5cdH07XG5cdFxuXHQvLyAjNDg2ODogbW9kaWZpZXJzIHRoYXQgcHJldmVudCB0aGUgZXhlY3V0aW9uIG9mIHRoZSBsaXN0ZW5lclxuXHQvLyBuZWVkIHRvIGV4cGxpY2l0bHkgcmV0dXJuIG51bGwgc28gdGhhdCB3ZSBjYW4gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gcmVtb3ZlXG5cdC8vIHRoZSBsaXN0ZW5lciBmb3IgLm9uY2Vcblx0dmFyIGdlbkd1YXJkID0gZnVuY3Rpb24gKGNvbmRpdGlvbikgeyByZXR1cm4gKFwiaWYoXCIgKyBjb25kaXRpb24gKyBcIilyZXR1cm4gbnVsbDtcIik7IH07XG5cdFxuXHR2YXIgbW9kaWZpZXJDb2RlID0ge1xuXHQgIHN0b3A6ICckZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7Jyxcblx0ICBwcmV2ZW50OiAnJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7Jyxcblx0ICBzZWxmOiBnZW5HdWFyZChcIiRldmVudC50YXJnZXQgIT09ICRldmVudC5jdXJyZW50VGFyZ2V0XCIpLFxuXHQgIGN0cmw6IGdlbkd1YXJkKFwiISRldmVudC5jdHJsS2V5XCIpLFxuXHQgIHNoaWZ0OiBnZW5HdWFyZChcIiEkZXZlbnQuc2hpZnRLZXlcIiksXG5cdCAgYWx0OiBnZW5HdWFyZChcIiEkZXZlbnQuYWx0S2V5XCIpLFxuXHQgIG1ldGE6IGdlbkd1YXJkKFwiISRldmVudC5tZXRhS2V5XCIpLFxuXHQgIGxlZnQ6IGdlbkd1YXJkKFwiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDBcIiksXG5cdCAgbWlkZGxlOiBnZW5HdWFyZChcIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAxXCIpLFxuXHQgIHJpZ2h0OiBnZW5HdWFyZChcIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAyXCIpXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZW5IYW5kbGVycyAoXG5cdCAgZXZlbnRzLFxuXHQgIGlzTmF0aXZlLFxuXHQgIHdhcm5cblx0KSB7XG5cdCAgdmFyIHJlcyA9IGlzTmF0aXZlID8gJ25hdGl2ZU9uOnsnIDogJ29uOnsnO1xuXHQgIGZvciAodmFyIG5hbWUgaW4gZXZlbnRzKSB7XG5cdCAgICByZXMgKz0gXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiOlwiICsgKGdlbkhhbmRsZXIobmFtZSwgZXZlbnRzW25hbWVdKSkgKyBcIixcIjtcblx0ICB9XG5cdCAgcmV0dXJuIHJlcy5zbGljZSgwLCAtMSkgKyAnfSdcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuSGFuZGxlciAoXG5cdCAgbmFtZSxcblx0ICBoYW5kbGVyXG5cdCkge1xuXHQgIGlmICghaGFuZGxlcikge1xuXHQgICAgcmV0dXJuICdmdW5jdGlvbigpe30nXG5cdCAgfVxuXHRcblx0ICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVyKSkge1xuXHQgICAgcmV0dXJuIChcIltcIiArIChoYW5kbGVyLm1hcChmdW5jdGlvbiAoaGFuZGxlcikgeyByZXR1cm4gZ2VuSGFuZGxlcihuYW1lLCBoYW5kbGVyKTsgfSkuam9pbignLCcpKSArIFwiXVwiKVxuXHQgIH1cblx0XG5cdCAgdmFyIGlzTWV0aG9kUGF0aCA9IHNpbXBsZVBhdGhSRS50ZXN0KGhhbmRsZXIudmFsdWUpO1xuXHQgIHZhciBpc0Z1bmN0aW9uRXhwcmVzc2lvbiA9IGZuRXhwUkUudGVzdChoYW5kbGVyLnZhbHVlKTtcblx0XG5cdCAgaWYgKCFoYW5kbGVyLm1vZGlmaWVycykge1xuXHQgICAgaWYgKGlzTWV0aG9kUGF0aCB8fCBpc0Z1bmN0aW9uRXhwcmVzc2lvbikge1xuXHQgICAgICByZXR1cm4gaGFuZGxlci52YWx1ZVxuXHQgICAgfVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICByZXR1cm4gKFwiZnVuY3Rpb24oJGV2ZW50KXtcIiArIChoYW5kbGVyLnZhbHVlKSArIFwifVwiKSAvLyBpbmxpbmUgc3RhdGVtZW50XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjb2RlID0gJyc7XG5cdCAgICB2YXIgZ2VuTW9kaWZpZXJDb2RlID0gJyc7XG5cdCAgICB2YXIga2V5cyA9IFtdO1xuXHQgICAgZm9yICh2YXIga2V5IGluIGhhbmRsZXIubW9kaWZpZXJzKSB7XG5cdCAgICAgIGlmIChtb2RpZmllckNvZGVba2V5XSkge1xuXHQgICAgICAgIGdlbk1vZGlmaWVyQ29kZSArPSBtb2RpZmllckNvZGVba2V5XTtcblx0ICAgICAgICAvLyBsZWZ0L3JpZ2h0XG5cdCAgICAgICAgaWYgKGtleUNvZGVzW2tleV0pIHtcblx0ICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdleGFjdCcpIHtcblx0ICAgICAgICB2YXIgbW9kaWZpZXJzID0gKGhhbmRsZXIubW9kaWZpZXJzKTtcblx0ICAgICAgICBnZW5Nb2RpZmllckNvZGUgKz0gZ2VuR3VhcmQoXG5cdCAgICAgICAgICBbJ2N0cmwnLCAnc2hpZnQnLCAnYWx0JywgJ21ldGEnXVxuXHQgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXlNb2RpZmllcikgeyByZXR1cm4gIW1vZGlmaWVyc1trZXlNb2RpZmllcl07IH0pXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleU1vZGlmaWVyKSB7IHJldHVybiAoXCIkZXZlbnQuXCIgKyBrZXlNb2RpZmllciArIFwiS2V5XCIpOyB9KVxuXHQgICAgICAgICAgICAuam9pbignfHwnKVxuXHQgICAgICAgICk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChrZXlzLmxlbmd0aCkge1xuXHQgICAgICBjb2RlICs9IGdlbktleUZpbHRlcihrZXlzKTtcblx0ICAgIH1cblx0ICAgIC8vIE1ha2Ugc3VyZSBtb2RpZmllcnMgbGlrZSBwcmV2ZW50IGFuZCBzdG9wIGdldCBleGVjdXRlZCBhZnRlciBrZXkgZmlsdGVyaW5nXG5cdCAgICBpZiAoZ2VuTW9kaWZpZXJDb2RlKSB7XG5cdCAgICAgIGNvZGUgKz0gZ2VuTW9kaWZpZXJDb2RlO1xuXHQgICAgfVxuXHQgICAgdmFyIGhhbmRsZXJDb2RlID0gaXNNZXRob2RQYXRoXG5cdCAgICAgID8gKFwicmV0dXJuIFwiICsgKGhhbmRsZXIudmFsdWUpICsgXCIoJGV2ZW50KVwiKVxuXHQgICAgICA6IGlzRnVuY3Rpb25FeHByZXNzaW9uXG5cdCAgICAgICAgPyAoXCJyZXR1cm4gKFwiICsgKGhhbmRsZXIudmFsdWUpICsgXCIpKCRldmVudClcIilcblx0ICAgICAgICA6IGhhbmRsZXIudmFsdWU7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIHJldHVybiAoXCJmdW5jdGlvbigkZXZlbnQpe1wiICsgY29kZSArIGhhbmRsZXJDb2RlICsgXCJ9XCIpXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5LZXlGaWx0ZXIgKGtleXMpIHtcblx0ICByZXR1cm4gKFwiaWYoISgnYnV0dG9uJyBpbiAkZXZlbnQpJiZcIiArIChrZXlzLm1hcChnZW5GaWx0ZXJDb2RlKS5qb2luKCcmJicpKSArIFwiKXJldHVybiBudWxsO1wiKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5GaWx0ZXJDb2RlIChrZXkpIHtcblx0ICB2YXIga2V5VmFsID0gcGFyc2VJbnQoa2V5LCAxMCk7XG5cdCAgaWYgKGtleVZhbCkge1xuXHQgICAgcmV0dXJuIChcIiRldmVudC5rZXlDb2RlIT09XCIgKyBrZXlWYWwpXG5cdCAgfVxuXHQgIHZhciBrZXlDb2RlID0ga2V5Q29kZXNba2V5XTtcblx0ICB2YXIga2V5TmFtZSA9IGtleU5hbWVzW2tleV07XG5cdCAgcmV0dXJuIChcblx0ICAgIFwiX2soJGV2ZW50LmtleUNvZGUsXCIgK1xuXHQgICAgKEpTT04uc3RyaW5naWZ5KGtleSkpICsgXCIsXCIgK1xuXHQgICAgKEpTT04uc3RyaW5naWZ5KGtleUNvZGUpKSArIFwiLFwiICtcblx0ICAgIFwiJGV2ZW50LmtleSxcIiArXG5cdCAgICBcIlwiICsgKEpTT04uc3RyaW5naWZ5KGtleU5hbWUpKSArXG5cdCAgICBcIilcIlxuXHQgIClcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBvbiAoZWwsIGRpcikge1xuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBkaXIubW9kaWZpZXJzKSB7XG5cdCAgICB3YXJuKFwidi1vbiB3aXRob3V0IGFyZ3VtZW50IGRvZXMgbm90IHN1cHBvcnQgbW9kaWZpZXJzLlwiKTtcblx0ICB9XG5cdCAgZWwud3JhcExpc3RlbmVycyA9IGZ1bmN0aW9uIChjb2RlKSB7IHJldHVybiAoXCJfZyhcIiArIGNvZGUgKyBcIixcIiArIChkaXIudmFsdWUpICsgXCIpXCIpOyB9O1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGJpbmQkMSAoZWwsIGRpcikge1xuXHQgIGVsLndyYXBEYXRhID0gZnVuY3Rpb24gKGNvZGUpIHtcblx0ICAgIHJldHVybiAoXCJfYihcIiArIGNvZGUgKyBcIiwnXCIgKyAoZWwudGFnKSArIFwiJyxcIiArIChkaXIudmFsdWUpICsgXCIsXCIgKyAoZGlyLm1vZGlmaWVycyAmJiBkaXIubW9kaWZpZXJzLnByb3AgPyAndHJ1ZScgOiAnZmFsc2UnKSArIChkaXIubW9kaWZpZXJzICYmIGRpci5tb2RpZmllcnMuc3luYyA/ICcsdHJ1ZScgOiAnJykgKyBcIilcIilcblx0ICB9O1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBiYXNlRGlyZWN0aXZlcyA9IHtcblx0ICBvbjogb24sXG5cdCAgYmluZDogYmluZCQxLFxuXHQgIGNsb2FrOiBub29wXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIENvZGVnZW5TdGF0ZSA9IGZ1bmN0aW9uIENvZGVnZW5TdGF0ZSAob3B0aW9ucykge1xuXHQgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgdGhpcy53YXJuID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuO1xuXHQgIHRoaXMudHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAndHJhbnNmb3JtQ29kZScpO1xuXHQgIHRoaXMuZGF0YUdlbkZucyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAnZ2VuRGF0YScpO1xuXHQgIHRoaXMuZGlyZWN0aXZlcyA9IGV4dGVuZChleHRlbmQoe30sIGJhc2VEaXJlY3RpdmVzKSwgb3B0aW9ucy5kaXJlY3RpdmVzKTtcblx0ICB2YXIgaXNSZXNlcnZlZFRhZyA9IG9wdGlvbnMuaXNSZXNlcnZlZFRhZyB8fCBubztcblx0ICB0aGlzLm1heWJlQ29tcG9uZW50ID0gZnVuY3Rpb24gKGVsKSB7IHJldHVybiAhaXNSZXNlcnZlZFRhZyhlbC50YWcpOyB9O1xuXHQgIHRoaXMub25jZUlkID0gMDtcblx0ICB0aGlzLnN0YXRpY1JlbmRlckZucyA9IFtdO1xuXHR9O1xuXHRcblx0XG5cdFxuXHRmdW5jdGlvbiBnZW5lcmF0ZSAoXG5cdCAgYXN0LFxuXHQgIG9wdGlvbnNcblx0KSB7XG5cdCAgdmFyIHN0YXRlID0gbmV3IENvZGVnZW5TdGF0ZShvcHRpb25zKTtcblx0ICB2YXIgY29kZSA9IGFzdCA/IGdlbkVsZW1lbnQoYXN0LCBzdGF0ZSkgOiAnX2MoXCJkaXZcIiknO1xuXHQgIHJldHVybiB7XG5cdCAgICByZW5kZXI6IChcIndpdGgodGhpcyl7cmV0dXJuIFwiICsgY29kZSArIFwifVwiKSxcblx0ICAgIHN0YXRpY1JlbmRlckZuczogc3RhdGUuc3RhdGljUmVuZGVyRm5zXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5FbGVtZW50IChlbCwgc3RhdGUpIHtcblx0ICBpZiAoZWwuc3RhdGljUm9vdCAmJiAhZWwuc3RhdGljUHJvY2Vzc2VkKSB7XG5cdCAgICByZXR1cm4gZ2VuU3RhdGljKGVsLCBzdGF0ZSlcblx0ICB9IGVsc2UgaWYgKGVsLm9uY2UgJiYgIWVsLm9uY2VQcm9jZXNzZWQpIHtcblx0ICAgIHJldHVybiBnZW5PbmNlKGVsLCBzdGF0ZSlcblx0ICB9IGVsc2UgaWYgKGVsLmZvciAmJiAhZWwuZm9yUHJvY2Vzc2VkKSB7XG5cdCAgICByZXR1cm4gZ2VuRm9yKGVsLCBzdGF0ZSlcblx0ICB9IGVsc2UgaWYgKGVsLmlmICYmICFlbC5pZlByb2Nlc3NlZCkge1xuXHQgICAgcmV0dXJuIGdlbklmKGVsLCBzdGF0ZSlcblx0ICB9IGVsc2UgaWYgKGVsLnRhZyA9PT0gJ3RlbXBsYXRlJyAmJiAhZWwuc2xvdFRhcmdldCkge1xuXHQgICAgcmV0dXJuIGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSkgfHwgJ3ZvaWQgMCdcblx0ICB9IGVsc2UgaWYgKGVsLnRhZyA9PT0gJ3Nsb3QnKSB7XG5cdCAgICByZXR1cm4gZ2VuU2xvdChlbCwgc3RhdGUpXG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGNvbXBvbmVudCBvciBlbGVtZW50XG5cdCAgICB2YXIgY29kZTtcblx0ICAgIGlmIChlbC5jb21wb25lbnQpIHtcblx0ICAgICAgY29kZSA9IGdlbkNvbXBvbmVudChlbC5jb21wb25lbnQsIGVsLCBzdGF0ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgZGF0YSA9IGVsLnBsYWluID8gdW5kZWZpbmVkIDogZ2VuRGF0YSQyKGVsLCBzdGF0ZSk7XG5cdFxuXHQgICAgICB2YXIgY2hpbGRyZW4gPSBlbC5pbmxpbmVUZW1wbGF0ZSA/IG51bGwgOiBnZW5DaGlsZHJlbihlbCwgc3RhdGUsIHRydWUpO1xuXHQgICAgICBjb2RlID0gXCJfYygnXCIgKyAoZWwudGFnKSArIFwiJ1wiICsgKGRhdGEgPyAoXCIsXCIgKyBkYXRhKSA6ICcnKSArIChjaGlsZHJlbiA/IChcIixcIiArIGNoaWxkcmVuKSA6ICcnKSArIFwiKVwiO1xuXHQgICAgfVxuXHQgICAgLy8gbW9kdWxlIHRyYW5zZm9ybXNcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUudHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBjb2RlID0gc3RhdGUudHJhbnNmb3Jtc1tpXShlbCwgY29kZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gY29kZVxuXHQgIH1cblx0fVxuXHRcblx0Ly8gaG9pc3Qgc3RhdGljIHN1Yi10cmVlcyBvdXRcblx0ZnVuY3Rpb24gZ2VuU3RhdGljIChlbCwgc3RhdGUpIHtcblx0ICBlbC5zdGF0aWNQcm9jZXNzZWQgPSB0cnVlO1xuXHQgIHN0YXRlLnN0YXRpY1JlbmRlckZucy5wdXNoKChcIndpdGgodGhpcyl7cmV0dXJuIFwiICsgKGdlbkVsZW1lbnQoZWwsIHN0YXRlKSkgKyBcIn1cIikpO1xuXHQgIHJldHVybiAoXCJfbShcIiArIChzdGF0ZS5zdGF0aWNSZW5kZXJGbnMubGVuZ3RoIC0gMSkgKyAoZWwuc3RhdGljSW5Gb3IgPyAnLHRydWUnIDogJycpICsgXCIpXCIpXG5cdH1cblx0XG5cdC8vIHYtb25jZVxuXHRmdW5jdGlvbiBnZW5PbmNlIChlbCwgc3RhdGUpIHtcblx0ICBlbC5vbmNlUHJvY2Vzc2VkID0gdHJ1ZTtcblx0ICBpZiAoZWwuaWYgJiYgIWVsLmlmUHJvY2Vzc2VkKSB7XG5cdCAgICByZXR1cm4gZ2VuSWYoZWwsIHN0YXRlKVxuXHQgIH0gZWxzZSBpZiAoZWwuc3RhdGljSW5Gb3IpIHtcblx0ICAgIHZhciBrZXkgPSAnJztcblx0ICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnQ7XG5cdCAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgIGlmIChwYXJlbnQuZm9yKSB7XG5cdCAgICAgICAga2V5ID0gcGFyZW50LmtleTtcblx0ICAgICAgICBicmVha1xuXHQgICAgICB9XG5cdCAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG5cdCAgICB9XG5cdCAgICBpZiAoIWtleSkge1xuXHQgICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBzdGF0ZS53YXJuKFxuXHQgICAgICAgIFwidi1vbmNlIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHYtZm9yIHRoYXQgaXMga2V5ZWQuIFwiXG5cdCAgICAgICk7XG5cdCAgICAgIHJldHVybiBnZW5FbGVtZW50KGVsLCBzdGF0ZSlcblx0ICAgIH1cblx0ICAgIHJldHVybiAoXCJfbyhcIiArIChnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgXCIsXCIgKyAoc3RhdGUub25jZUlkKyspICsgXCIsXCIgKyBrZXkgKyBcIilcIilcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGdlblN0YXRpYyhlbCwgc3RhdGUpXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5JZiAoXG5cdCAgZWwsXG5cdCAgc3RhdGUsXG5cdCAgYWx0R2VuLFxuXHQgIGFsdEVtcHR5XG5cdCkge1xuXHQgIGVsLmlmUHJvY2Vzc2VkID0gdHJ1ZTsgLy8gYXZvaWQgcmVjdXJzaW9uXG5cdCAgcmV0dXJuIGdlbklmQ29uZGl0aW9ucyhlbC5pZkNvbmRpdGlvbnMuc2xpY2UoKSwgc3RhdGUsIGFsdEdlbiwgYWx0RW1wdHkpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbklmQ29uZGl0aW9ucyAoXG5cdCAgY29uZGl0aW9ucyxcblx0ICBzdGF0ZSxcblx0ICBhbHRHZW4sXG5cdCAgYWx0RW1wdHlcblx0KSB7XG5cdCAgaWYgKCFjb25kaXRpb25zLmxlbmd0aCkge1xuXHQgICAgcmV0dXJuIGFsdEVtcHR5IHx8ICdfZSgpJ1xuXHQgIH1cblx0XG5cdCAgdmFyIGNvbmRpdGlvbiA9IGNvbmRpdGlvbnMuc2hpZnQoKTtcblx0ICBpZiAoY29uZGl0aW9uLmV4cCkge1xuXHQgICAgcmV0dXJuIChcIihcIiArIChjb25kaXRpb24uZXhwKSArIFwiKT9cIiArIChnZW5UZXJuYXJ5RXhwKGNvbmRpdGlvbi5ibG9jaykpICsgXCI6XCIgKyAoZ2VuSWZDb25kaXRpb25zKGNvbmRpdGlvbnMsIHN0YXRlLCBhbHRHZW4sIGFsdEVtcHR5KSkpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAoXCJcIiArIChnZW5UZXJuYXJ5RXhwKGNvbmRpdGlvbi5ibG9jaykpKVxuXHQgIH1cblx0XG5cdCAgLy8gdi1pZiB3aXRoIHYtb25jZSBzaG91bGQgZ2VuZXJhdGUgY29kZSBsaWtlIChhKT9fbSgwKTpfbSgxKVxuXHQgIGZ1bmN0aW9uIGdlblRlcm5hcnlFeHAgKGVsKSB7XG5cdCAgICByZXR1cm4gYWx0R2VuXG5cdCAgICAgID8gYWx0R2VuKGVsLCBzdGF0ZSlcblx0ICAgICAgOiBlbC5vbmNlXG5cdCAgICAgICAgPyBnZW5PbmNlKGVsLCBzdGF0ZSlcblx0ICAgICAgICA6IGdlbkVsZW1lbnQoZWwsIHN0YXRlKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuRm9yIChcblx0ICBlbCxcblx0ICBzdGF0ZSxcblx0ICBhbHRHZW4sXG5cdCAgYWx0SGVscGVyXG5cdCkge1xuXHQgIHZhciBleHAgPSBlbC5mb3I7XG5cdCAgdmFyIGFsaWFzID0gZWwuYWxpYXM7XG5cdCAgdmFyIGl0ZXJhdG9yMSA9IGVsLml0ZXJhdG9yMSA/IChcIixcIiArIChlbC5pdGVyYXRvcjEpKSA6ICcnO1xuXHQgIHZhciBpdGVyYXRvcjIgPSBlbC5pdGVyYXRvcjIgPyAoXCIsXCIgKyAoZWwuaXRlcmF0b3IyKSkgOiAnJztcblx0XG5cdCAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICBzdGF0ZS5tYXliZUNvbXBvbmVudChlbCkgJiZcblx0ICAgIGVsLnRhZyAhPT0gJ3Nsb3QnICYmXG5cdCAgICBlbC50YWcgIT09ICd0ZW1wbGF0ZScgJiZcblx0ICAgICFlbC5rZXlcblx0ICApIHtcblx0ICAgIHN0YXRlLndhcm4oXG5cdCAgICAgIFwiPFwiICsgKGVsLnRhZykgKyBcIiB2LWZvcj1cXFwiXCIgKyBhbGlhcyArIFwiIGluIFwiICsgZXhwICsgXCJcXFwiPjogY29tcG9uZW50IGxpc3RzIHJlbmRlcmVkIHdpdGggXCIgK1xuXHQgICAgICBcInYtZm9yIHNob3VsZCBoYXZlIGV4cGxpY2l0IGtleXMuIFwiICtcblx0ICAgICAgXCJTZWUgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvbGlzdC5odG1sI2tleSBmb3IgbW9yZSBpbmZvLlwiLFxuXHQgICAgICB0cnVlIC8qIHRpcCAqL1xuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIGVsLmZvclByb2Nlc3NlZCA9IHRydWU7IC8vIGF2b2lkIHJlY3Vyc2lvblxuXHQgIHJldHVybiAoYWx0SGVscGVyIHx8ICdfbCcpICsgXCIoKFwiICsgZXhwICsgXCIpLFwiICtcblx0ICAgIFwiZnVuY3Rpb24oXCIgKyBhbGlhcyArIGl0ZXJhdG9yMSArIGl0ZXJhdG9yMiArIFwiKXtcIiArXG5cdCAgICAgIFwicmV0dXJuIFwiICsgKChhbHRHZW4gfHwgZ2VuRWxlbWVudCkoZWwsIHN0YXRlKSkgK1xuXHQgICAgJ30pJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5EYXRhJDIgKGVsLCBzdGF0ZSkge1xuXHQgIHZhciBkYXRhID0gJ3snO1xuXHRcblx0ICAvLyBkaXJlY3RpdmVzIGZpcnN0LlxuXHQgIC8vIGRpcmVjdGl2ZXMgbWF5IG11dGF0ZSB0aGUgZWwncyBvdGhlciBwcm9wZXJ0aWVzIGJlZm9yZSB0aGV5IGFyZSBnZW5lcmF0ZWQuXG5cdCAgdmFyIGRpcnMgPSBnZW5EaXJlY3RpdmVzKGVsLCBzdGF0ZSk7XG5cdCAgaWYgKGRpcnMpIHsgZGF0YSArPSBkaXJzICsgJywnOyB9XG5cdFxuXHQgIC8vIGtleVxuXHQgIGlmIChlbC5rZXkpIHtcblx0ICAgIGRhdGEgKz0gXCJrZXk6XCIgKyAoZWwua2V5KSArIFwiLFwiO1xuXHQgIH1cblx0ICAvLyByZWZcblx0ICBpZiAoZWwucmVmKSB7XG5cdCAgICBkYXRhICs9IFwicmVmOlwiICsgKGVsLnJlZikgKyBcIixcIjtcblx0ICB9XG5cdCAgaWYgKGVsLnJlZkluRm9yKSB7XG5cdCAgICBkYXRhICs9IFwicmVmSW5Gb3I6dHJ1ZSxcIjtcblx0ICB9XG5cdCAgLy8gcHJlXG5cdCAgaWYgKGVsLnByZSkge1xuXHQgICAgZGF0YSArPSBcInByZTp0cnVlLFwiO1xuXHQgIH1cblx0ICAvLyByZWNvcmQgb3JpZ2luYWwgdGFnIG5hbWUgZm9yIGNvbXBvbmVudHMgdXNpbmcgXCJpc1wiIGF0dHJpYnV0ZVxuXHQgIGlmIChlbC5jb21wb25lbnQpIHtcblx0ICAgIGRhdGEgKz0gXCJ0YWc6XFxcIlwiICsgKGVsLnRhZykgKyBcIlxcXCIsXCI7XG5cdCAgfVxuXHQgIC8vIG1vZHVsZSBkYXRhIGdlbmVyYXRpb24gZnVuY3Rpb25zXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5kYXRhR2VuRm5zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBkYXRhICs9IHN0YXRlLmRhdGFHZW5GbnNbaV0oZWwpO1xuXHQgIH1cblx0ICAvLyBhdHRyaWJ1dGVzXG5cdCAgaWYgKGVsLmF0dHJzKSB7XG5cdCAgICBkYXRhICs9IFwiYXR0cnM6e1wiICsgKGdlblByb3BzKGVsLmF0dHJzKSkgKyBcIn0sXCI7XG5cdCAgfVxuXHQgIC8vIERPTSBwcm9wc1xuXHQgIGlmIChlbC5wcm9wcykge1xuXHQgICAgZGF0YSArPSBcImRvbVByb3BzOntcIiArIChnZW5Qcm9wcyhlbC5wcm9wcykpICsgXCJ9LFwiO1xuXHQgIH1cblx0ICAvLyBldmVudCBoYW5kbGVyc1xuXHQgIGlmIChlbC5ldmVudHMpIHtcblx0ICAgIGRhdGEgKz0gKGdlbkhhbmRsZXJzKGVsLmV2ZW50cywgZmFsc2UsIHN0YXRlLndhcm4pKSArIFwiLFwiO1xuXHQgIH1cblx0ICBpZiAoZWwubmF0aXZlRXZlbnRzKSB7XG5cdCAgICBkYXRhICs9IChnZW5IYW5kbGVycyhlbC5uYXRpdmVFdmVudHMsIHRydWUsIHN0YXRlLndhcm4pKSArIFwiLFwiO1xuXHQgIH1cblx0ICAvLyBzbG90IHRhcmdldFxuXHQgIC8vIG9ubHkgZm9yIG5vbi1zY29wZWQgc2xvdHNcblx0ICBpZiAoZWwuc2xvdFRhcmdldCAmJiAhZWwuc2xvdFNjb3BlKSB7XG5cdCAgICBkYXRhICs9IFwic2xvdDpcIiArIChlbC5zbG90VGFyZ2V0KSArIFwiLFwiO1xuXHQgIH1cblx0ICAvLyBzY29wZWQgc2xvdHNcblx0ICBpZiAoZWwuc2NvcGVkU2xvdHMpIHtcblx0ICAgIGRhdGEgKz0gKGdlblNjb3BlZFNsb3RzKGVsLnNjb3BlZFNsb3RzLCBzdGF0ZSkpICsgXCIsXCI7XG5cdCAgfVxuXHQgIC8vIGNvbXBvbmVudCB2LW1vZGVsXG5cdCAgaWYgKGVsLm1vZGVsKSB7XG5cdCAgICBkYXRhICs9IFwibW9kZWw6e3ZhbHVlOlwiICsgKGVsLm1vZGVsLnZhbHVlKSArIFwiLGNhbGxiYWNrOlwiICsgKGVsLm1vZGVsLmNhbGxiYWNrKSArIFwiLGV4cHJlc3Npb246XCIgKyAoZWwubW9kZWwuZXhwcmVzc2lvbikgKyBcIn0sXCI7XG5cdCAgfVxuXHQgIC8vIGlubGluZS10ZW1wbGF0ZVxuXHQgIGlmIChlbC5pbmxpbmVUZW1wbGF0ZSkge1xuXHQgICAgdmFyIGlubGluZVRlbXBsYXRlID0gZ2VuSW5saW5lVGVtcGxhdGUoZWwsIHN0YXRlKTtcblx0ICAgIGlmIChpbmxpbmVUZW1wbGF0ZSkge1xuXHQgICAgICBkYXRhICs9IGlubGluZVRlbXBsYXRlICsgXCIsXCI7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGRhdGEgPSBkYXRhLnJlcGxhY2UoLywkLywgJycpICsgJ30nO1xuXHQgIC8vIHYtYmluZCBkYXRhIHdyYXBcblx0ICBpZiAoZWwud3JhcERhdGEpIHtcblx0ICAgIGRhdGEgPSBlbC53cmFwRGF0YShkYXRhKTtcblx0ICB9XG5cdCAgLy8gdi1vbiBkYXRhIHdyYXBcblx0ICBpZiAoZWwud3JhcExpc3RlbmVycykge1xuXHQgICAgZGF0YSA9IGVsLndyYXBMaXN0ZW5lcnMoZGF0YSk7XG5cdCAgfVxuXHQgIHJldHVybiBkYXRhXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbkRpcmVjdGl2ZXMgKGVsLCBzdGF0ZSkge1xuXHQgIHZhciBkaXJzID0gZWwuZGlyZWN0aXZlcztcblx0ICBpZiAoIWRpcnMpIHsgcmV0dXJuIH1cblx0ICB2YXIgcmVzID0gJ2RpcmVjdGl2ZXM6Wyc7XG5cdCAgdmFyIGhhc1J1bnRpbWUgPSBmYWxzZTtcblx0ICB2YXIgaSwgbCwgZGlyLCBuZWVkUnVudGltZTtcblx0ICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGRpciA9IGRpcnNbaV07XG5cdCAgICBuZWVkUnVudGltZSA9IHRydWU7XG5cdCAgICB2YXIgZ2VuID0gc3RhdGUuZGlyZWN0aXZlc1tkaXIubmFtZV07XG5cdCAgICBpZiAoZ2VuKSB7XG5cdCAgICAgIC8vIGNvbXBpbGUtdGltZSBkaXJlY3RpdmUgdGhhdCBtYW5pcHVsYXRlcyBBU1QuXG5cdCAgICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBpdCBhbHNvIG5lZWRzIGEgcnVudGltZSBjb3VudGVycGFydC5cblx0ICAgICAgbmVlZFJ1bnRpbWUgPSAhIWdlbihlbCwgZGlyLCBzdGF0ZS53YXJuKTtcblx0ICAgIH1cblx0ICAgIGlmIChuZWVkUnVudGltZSkge1xuXHQgICAgICBoYXNSdW50aW1lID0gdHJ1ZTtcblx0ICAgICAgcmVzICs9IFwie25hbWU6XFxcIlwiICsgKGRpci5uYW1lKSArIFwiXFxcIixyYXdOYW1lOlxcXCJcIiArIChkaXIucmF3TmFtZSkgKyBcIlxcXCJcIiArIChkaXIudmFsdWUgPyAoXCIsdmFsdWU6KFwiICsgKGRpci52YWx1ZSkgKyBcIiksZXhwcmVzc2lvbjpcIiArIChKU09OLnN0cmluZ2lmeShkaXIudmFsdWUpKSkgOiAnJykgKyAoZGlyLmFyZyA/IChcIixhcmc6XFxcIlwiICsgKGRpci5hcmcpICsgXCJcXFwiXCIpIDogJycpICsgKGRpci5tb2RpZmllcnMgPyAoXCIsbW9kaWZpZXJzOlwiICsgKEpTT04uc3RyaW5naWZ5KGRpci5tb2RpZmllcnMpKSkgOiAnJykgKyBcIn0sXCI7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChoYXNSdW50aW1lKSB7XG5cdCAgICByZXR1cm4gcmVzLnNsaWNlKDAsIC0xKSArICddJ1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuSW5saW5lVGVtcGxhdGUgKGVsLCBzdGF0ZSkge1xuXHQgIHZhciBhc3QgPSBlbC5jaGlsZHJlblswXTtcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgKFxuXHQgICAgZWwuY2hpbGRyZW4ubGVuZ3RoICE9PSAxIHx8IGFzdC50eXBlICE9PSAxXG5cdCAgKSkge1xuXHQgICAgc3RhdGUud2FybignSW5saW5lLXRlbXBsYXRlIGNvbXBvbmVudHMgbXVzdCBoYXZlIGV4YWN0bHkgb25lIGNoaWxkIGVsZW1lbnQuJyk7XG5cdCAgfVxuXHQgIGlmIChhc3QudHlwZSA9PT0gMSkge1xuXHQgICAgdmFyIGlubGluZVJlbmRlckZucyA9IGdlbmVyYXRlKGFzdCwgc3RhdGUub3B0aW9ucyk7XG5cdCAgICByZXR1cm4gKFwiaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpe1wiICsgKGlubGluZVJlbmRlckZucy5yZW5kZXIpICsgXCJ9LHN0YXRpY1JlbmRlckZuczpbXCIgKyAoaW5saW5lUmVuZGVyRm5zLnN0YXRpY1JlbmRlckZucy5tYXAoZnVuY3Rpb24gKGNvZGUpIHsgcmV0dXJuIChcImZ1bmN0aW9uKCl7XCIgKyBjb2RlICsgXCJ9XCIpOyB9KS5qb2luKCcsJykpICsgXCJdfVwiKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuU2NvcGVkU2xvdHMgKFxuXHQgIHNsb3RzLFxuXHQgIHN0YXRlXG5cdCkge1xuXHQgIHJldHVybiAoXCJzY29wZWRTbG90czpfdShbXCIgKyAoT2JqZWN0LmtleXMoc2xvdHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiBnZW5TY29wZWRTbG90KGtleSwgc2xvdHNba2V5XSwgc3RhdGUpXG5cdCAgICB9KS5qb2luKCcsJykpICsgXCJdKVwiKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5TY29wZWRTbG90IChcblx0ICBrZXksXG5cdCAgZWwsXG5cdCAgc3RhdGVcblx0KSB7XG5cdCAgaWYgKGVsLmZvciAmJiAhZWwuZm9yUHJvY2Vzc2VkKSB7XG5cdCAgICByZXR1cm4gZ2VuRm9yU2NvcGVkU2xvdChrZXksIGVsLCBzdGF0ZSlcblx0ICB9XG5cdCAgdmFyIGZuID0gXCJmdW5jdGlvbihcIiArIChTdHJpbmcoZWwuc2xvdFNjb3BlKSkgKyBcIil7XCIgK1xuXHQgICAgXCJyZXR1cm4gXCIgKyAoZWwudGFnID09PSAndGVtcGxhdGUnXG5cdCAgICAgID8gZWwuaWZcblx0ICAgICAgICA/ICgoZWwuaWYpICsgXCI/XCIgKyAoZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlKSB8fCAndW5kZWZpbmVkJykgKyBcIjp1bmRlZmluZWRcIilcblx0ICAgICAgICA6IGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSkgfHwgJ3VuZGVmaW5lZCdcblx0ICAgICAgOiBnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgXCJ9XCI7XG5cdCAgcmV0dXJuIChcIntrZXk6XCIgKyBrZXkgKyBcIixmbjpcIiArIGZuICsgXCJ9XCIpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbkZvclNjb3BlZFNsb3QgKFxuXHQgIGtleSxcblx0ICBlbCxcblx0ICBzdGF0ZVxuXHQpIHtcblx0ICB2YXIgZXhwID0gZWwuZm9yO1xuXHQgIHZhciBhbGlhcyA9IGVsLmFsaWFzO1xuXHQgIHZhciBpdGVyYXRvcjEgPSBlbC5pdGVyYXRvcjEgPyAoXCIsXCIgKyAoZWwuaXRlcmF0b3IxKSkgOiAnJztcblx0ICB2YXIgaXRlcmF0b3IyID0gZWwuaXRlcmF0b3IyID8gKFwiLFwiICsgKGVsLml0ZXJhdG9yMikpIDogJyc7XG5cdCAgZWwuZm9yUHJvY2Vzc2VkID0gdHJ1ZTsgLy8gYXZvaWQgcmVjdXJzaW9uXG5cdCAgcmV0dXJuIFwiX2woKFwiICsgZXhwICsgXCIpLFwiICtcblx0ICAgIFwiZnVuY3Rpb24oXCIgKyBhbGlhcyArIGl0ZXJhdG9yMSArIGl0ZXJhdG9yMiArIFwiKXtcIiArXG5cdCAgICAgIFwicmV0dXJuIFwiICsgKGdlblNjb3BlZFNsb3Qoa2V5LCBlbCwgc3RhdGUpKSArXG5cdCAgICAnfSknXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbkNoaWxkcmVuIChcblx0ICBlbCxcblx0ICBzdGF0ZSxcblx0ICBjaGVja1NraXAsXG5cdCAgYWx0R2VuRWxlbWVudCxcblx0ICBhbHRHZW5Ob2RlXG5cdCkge1xuXHQgIHZhciBjaGlsZHJlbiA9IGVsLmNoaWxkcmVuO1xuXHQgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHtcblx0ICAgIHZhciBlbCQxID0gY2hpbGRyZW5bMF07XG5cdCAgICAvLyBvcHRpbWl6ZSBzaW5nbGUgdi1mb3Jcblx0ICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcblx0ICAgICAgZWwkMS5mb3IgJiZcblx0ICAgICAgZWwkMS50YWcgIT09ICd0ZW1wbGF0ZScgJiZcblx0ICAgICAgZWwkMS50YWcgIT09ICdzbG90J1xuXHQgICAgKSB7XG5cdCAgICAgIHJldHVybiAoYWx0R2VuRWxlbWVudCB8fCBnZW5FbGVtZW50KShlbCQxLCBzdGF0ZSlcblx0ICAgIH1cblx0ICAgIHZhciBub3JtYWxpemF0aW9uVHlwZSA9IGNoZWNrU2tpcFxuXHQgICAgICA/IGdldE5vcm1hbGl6YXRpb25UeXBlKGNoaWxkcmVuLCBzdGF0ZS5tYXliZUNvbXBvbmVudClcblx0ICAgICAgOiAwO1xuXHQgICAgdmFyIGdlbiA9IGFsdEdlbk5vZGUgfHwgZ2VuTm9kZTtcblx0ICAgIHJldHVybiAoXCJbXCIgKyAoY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBnZW4oYywgc3RhdGUpOyB9KS5qb2luKCcsJykpICsgXCJdXCIgKyAobm9ybWFsaXphdGlvblR5cGUgPyAoXCIsXCIgKyBub3JtYWxpemF0aW9uVHlwZSkgOiAnJykpXG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBkZXRlcm1pbmUgdGhlIG5vcm1hbGl6YXRpb24gbmVlZGVkIGZvciB0aGUgY2hpbGRyZW4gYXJyYXkuXG5cdC8vIDA6IG5vIG5vcm1hbGl6YXRpb24gbmVlZGVkXG5cdC8vIDE6IHNpbXBsZSBub3JtYWxpemF0aW9uIG5lZWRlZCAocG9zc2libGUgMS1sZXZlbCBkZWVwIG5lc3RlZCBhcnJheSlcblx0Ly8gMjogZnVsbCBub3JtYWxpemF0aW9uIG5lZWRlZFxuXHRmdW5jdGlvbiBnZXROb3JtYWxpemF0aW9uVHlwZSAoXG5cdCAgY2hpbGRyZW4sXG5cdCAgbWF5YmVDb21wb25lbnRcblx0KSB7XG5cdCAgdmFyIHJlcyA9IDA7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIGVsID0gY2hpbGRyZW5baV07XG5cdCAgICBpZiAoZWwudHlwZSAhPT0gMSkge1xuXHQgICAgICBjb250aW51ZVxuXHQgICAgfVxuXHQgICAgaWYgKG5lZWRzTm9ybWFsaXphdGlvbihlbCkgfHxcblx0ICAgICAgICAoZWwuaWZDb25kaXRpb25zICYmIGVsLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uIChjKSB7IHJldHVybiBuZWVkc05vcm1hbGl6YXRpb24oYy5ibG9jayk7IH0pKSkge1xuXHQgICAgICByZXMgPSAyO1xuXHQgICAgICBicmVha1xuXHQgICAgfVxuXHQgICAgaWYgKG1heWJlQ29tcG9uZW50KGVsKSB8fFxuXHQgICAgICAgIChlbC5pZkNvbmRpdGlvbnMgJiYgZWwuaWZDb25kaXRpb25zLnNvbWUoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIG1heWJlQ29tcG9uZW50KGMuYmxvY2spOyB9KSkpIHtcblx0ICAgICAgcmVzID0gMTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBuZWVkc05vcm1hbGl6YXRpb24gKGVsKSB7XG5cdCAgcmV0dXJuIGVsLmZvciAhPT0gdW5kZWZpbmVkIHx8IGVsLnRhZyA9PT0gJ3RlbXBsYXRlJyB8fCBlbC50YWcgPT09ICdzbG90J1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5Ob2RlIChub2RlLCBzdGF0ZSkge1xuXHQgIGlmIChub2RlLnR5cGUgPT09IDEpIHtcblx0ICAgIHJldHVybiBnZW5FbGVtZW50KG5vZGUsIHN0YXRlKVxuXHQgIH0gaWYgKG5vZGUudHlwZSA9PT0gMyAmJiBub2RlLmlzQ29tbWVudCkge1xuXHQgICAgcmV0dXJuIGdlbkNvbW1lbnQobm9kZSlcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGdlblRleHQobm9kZSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlblRleHQgKHRleHQpIHtcblx0ICByZXR1cm4gKFwiX3YoXCIgKyAodGV4dC50eXBlID09PSAyXG5cdCAgICA/IHRleHQuZXhwcmVzc2lvbiAvLyBubyBuZWVkIGZvciAoKSBiZWNhdXNlIGFscmVhZHkgd3JhcHBlZCBpbiBfcygpXG5cdCAgICA6IHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyhKU09OLnN0cmluZ2lmeSh0ZXh0LnRleHQpKSkgKyBcIilcIilcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuQ29tbWVudCAoY29tbWVudCkge1xuXHQgIHJldHVybiAoXCJfZShcIiArIChKU09OLnN0cmluZ2lmeShjb21tZW50LnRleHQpKSArIFwiKVwiKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5TbG90IChlbCwgc3RhdGUpIHtcblx0ICB2YXIgc2xvdE5hbWUgPSBlbC5zbG90TmFtZSB8fCAnXCJkZWZhdWx0XCInO1xuXHQgIHZhciBjaGlsZHJlbiA9IGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSk7XG5cdCAgdmFyIHJlcyA9IFwiX3QoXCIgKyBzbG90TmFtZSArIChjaGlsZHJlbiA/IChcIixcIiArIGNoaWxkcmVuKSA6ICcnKTtcblx0ICB2YXIgYXR0cnMgPSBlbC5hdHRycyAmJiAoXCJ7XCIgKyAoZWwuYXR0cnMubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiAoKGNhbWVsaXplKGEubmFtZSkpICsgXCI6XCIgKyAoYS52YWx1ZSkpOyB9KS5qb2luKCcsJykpICsgXCJ9XCIpO1xuXHQgIHZhciBiaW5kJCQxID0gZWwuYXR0cnNNYXBbJ3YtYmluZCddO1xuXHQgIGlmICgoYXR0cnMgfHwgYmluZCQkMSkgJiYgIWNoaWxkcmVuKSB7XG5cdCAgICByZXMgKz0gXCIsbnVsbFwiO1xuXHQgIH1cblx0ICBpZiAoYXR0cnMpIHtcblx0ICAgIHJlcyArPSBcIixcIiArIGF0dHJzO1xuXHQgIH1cblx0ICBpZiAoYmluZCQkMSkge1xuXHQgICAgcmVzICs9IChhdHRycyA/ICcnIDogJyxudWxsJykgKyBcIixcIiArIGJpbmQkJDE7XG5cdCAgfVxuXHQgIHJldHVybiByZXMgKyAnKSdcblx0fVxuXHRcblx0Ly8gY29tcG9uZW50TmFtZSBpcyBlbC5jb21wb25lbnQsIHRha2UgaXQgYXMgYXJndW1lbnQgdG8gc2h1biBmbG93J3MgcGVzc2ltaXN0aWMgcmVmaW5lbWVudFxuXHRmdW5jdGlvbiBnZW5Db21wb25lbnQgKFxuXHQgIGNvbXBvbmVudE5hbWUsXG5cdCAgZWwsXG5cdCAgc3RhdGVcblx0KSB7XG5cdCAgdmFyIGNoaWxkcmVuID0gZWwuaW5saW5lVGVtcGxhdGUgPyBudWxsIDogZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlLCB0cnVlKTtcblx0ICByZXR1cm4gKFwiX2MoXCIgKyBjb21wb25lbnROYW1lICsgXCIsXCIgKyAoZ2VuRGF0YSQyKGVsLCBzdGF0ZSkpICsgKGNoaWxkcmVuID8gKFwiLFwiICsgY2hpbGRyZW4pIDogJycpICsgXCIpXCIpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlblByb3BzIChwcm9wcykge1xuXHQgIHZhciByZXMgPSAnJztcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgcHJvcCA9IHByb3BzW2ldO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICB7XG5cdCAgICAgIHJlcyArPSBcIlxcXCJcIiArIChwcm9wLm5hbWUpICsgXCJcXFwiOlwiICsgKHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyhwcm9wLnZhbHVlKSkgKyBcIixcIjtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcy5zbGljZSgwLCAtMSlcblx0fVxuXHRcblx0Ly8gIzM4OTUsICM0MjY4XG5cdGZ1bmN0aW9uIHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyAodGV4dCkge1xuXHQgIHJldHVybiB0ZXh0XG5cdCAgICAucmVwbGFjZSgvXFx1MjAyOC9nLCAnXFxcXHUyMDI4Jylcblx0ICAgIC5yZXBsYWNlKC9cXHUyMDI5L2csICdcXFxcdTIwMjknKVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIHRoZXNlIGtleXdvcmRzIHNob3VsZCBub3QgYXBwZWFyIGluc2lkZSBleHByZXNzaW9ucywgYnV0IG9wZXJhdG9ycyBsaWtlXG5cdC8vIHR5cGVvZiwgaW5zdGFuY2VvZiBhbmQgaW4gYXJlIGFsbG93ZWRcblx0dmFyIHByb2hpYml0ZWRLZXl3b3JkUkUgPSBuZXcgUmVnRXhwKCdcXFxcYicgKyAoXG5cdCAgJ2RvLGlmLGZvcixsZXQsbmV3LHRyeSx2YXIsY2FzZSxlbHNlLHdpdGgsYXdhaXQsYnJlYWssY2F0Y2gsY2xhc3MsY29uc3QsJyArXG5cdCAgJ3N1cGVyLHRocm93LHdoaWxlLHlpZWxkLGRlbGV0ZSxleHBvcnQsaW1wb3J0LHJldHVybixzd2l0Y2gsZGVmYXVsdCwnICtcblx0ICAnZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cydcblx0KS5zcGxpdCgnLCcpLmpvaW4oJ1xcXFxifFxcXFxiJykgKyAnXFxcXGInKTtcblx0XG5cdC8vIHRoZXNlIHVuYXJ5IG9wZXJhdG9ycyBzaG91bGQgbm90IGJlIHVzZWQgYXMgcHJvcGVydHkvbWV0aG9kIG5hbWVzXG5cdHZhciB1bmFyeU9wZXJhdG9yc1JFID0gbmV3IFJlZ0V4cCgnXFxcXGInICsgKFxuXHQgICdkZWxldGUsdHlwZW9mLHZvaWQnXG5cdCkuc3BsaXQoJywnKS5qb2luKCdcXFxccypcXFxcKFteXFxcXCldKlxcXFwpfFxcXFxiJykgKyAnXFxcXHMqXFxcXChbXlxcXFwpXSpcXFxcKScpO1xuXHRcblx0Ly8gc3RyaXAgc3RyaW5ncyBpbiBleHByZXNzaW9uc1xuXHR2YXIgc3RyaXBTdHJpbmdSRSA9IC8nKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYC9nO1xuXHRcblx0Ly8gZGV0ZWN0IHByb2JsZW1hdGljIGV4cHJlc3Npb25zIGluIGEgdGVtcGxhdGVcblx0ZnVuY3Rpb24gZGV0ZWN0RXJyb3JzIChhc3QpIHtcblx0ICB2YXIgZXJyb3JzID0gW107XG5cdCAgaWYgKGFzdCkge1xuXHQgICAgY2hlY2tOb2RlKGFzdCwgZXJyb3JzKTtcblx0ICB9XG5cdCAgcmV0dXJuIGVycm9yc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja05vZGUgKG5vZGUsIGVycm9ycykge1xuXHQgIGlmIChub2RlLnR5cGUgPT09IDEpIHtcblx0ICAgIGZvciAodmFyIG5hbWUgaW4gbm9kZS5hdHRyc01hcCkge1xuXHQgICAgICBpZiAoZGlyUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IG5vZGUuYXR0cnNNYXBbbmFtZV07XG5cdCAgICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgICBpZiAobmFtZSA9PT0gJ3YtZm9yJykge1xuXHQgICAgICAgICAgICBjaGVja0Zvcihub2RlLCAoXCJ2LWZvcj1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIlwiKSwgZXJyb3JzKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgICAgIGNoZWNrRXZlbnQodmFsdWUsIChuYW1lICsgXCI9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCJcIiksIGVycm9ycyk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjaGVja0V4cHJlc3Npb24odmFsdWUsIChuYW1lICsgXCI9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCJcIiksIGVycm9ycyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjaGVja05vZGUobm9kZS5jaGlsZHJlbltpXSwgZXJyb3JzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAyKSB7XG5cdCAgICBjaGVja0V4cHJlc3Npb24obm9kZS5leHByZXNzaW9uLCBub2RlLnRleHQsIGVycm9ycyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0V2ZW50IChleHAsIHRleHQsIGVycm9ycykge1xuXHQgIHZhciBzdGlwcGVkID0gZXhwLnJlcGxhY2Uoc3RyaXBTdHJpbmdSRSwgJycpO1xuXHQgIHZhciBrZXl3b3JkTWF0Y2ggPSBzdGlwcGVkLm1hdGNoKHVuYXJ5T3BlcmF0b3JzUkUpO1xuXHQgIGlmIChrZXl3b3JkTWF0Y2ggJiYgc3RpcHBlZC5jaGFyQXQoa2V5d29yZE1hdGNoLmluZGV4IC0gMSkgIT09ICckJykge1xuXHQgICAgZXJyb3JzLnB1c2goXG5cdCAgICAgIFwiYXZvaWQgdXNpbmcgSmF2YVNjcmlwdCB1bmFyeSBvcGVyYXRvciBhcyBwcm9wZXJ0eSBuYW1lOiBcIiArXG5cdCAgICAgIFwiXFxcIlwiICsgKGtleXdvcmRNYXRjaFswXSkgKyBcIlxcXCIgaW4gZXhwcmVzc2lvbiBcIiArICh0ZXh0LnRyaW0oKSlcblx0ICAgICk7XG5cdCAgfVxuXHQgIGNoZWNrRXhwcmVzc2lvbihleHAsIHRleHQsIGVycm9ycyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrRm9yIChub2RlLCB0ZXh0LCBlcnJvcnMpIHtcblx0ICBjaGVja0V4cHJlc3Npb24obm9kZS5mb3IgfHwgJycsIHRleHQsIGVycm9ycyk7XG5cdCAgY2hlY2tJZGVudGlmaWVyKG5vZGUuYWxpYXMsICd2LWZvciBhbGlhcycsIHRleHQsIGVycm9ycyk7XG5cdCAgY2hlY2tJZGVudGlmaWVyKG5vZGUuaXRlcmF0b3IxLCAndi1mb3IgaXRlcmF0b3InLCB0ZXh0LCBlcnJvcnMpO1xuXHQgIGNoZWNrSWRlbnRpZmllcihub2RlLml0ZXJhdG9yMiwgJ3YtZm9yIGl0ZXJhdG9yJywgdGV4dCwgZXJyb3JzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tJZGVudGlmaWVyIChcblx0ICBpZGVudCxcblx0ICB0eXBlLFxuXHQgIHRleHQsXG5cdCAgZXJyb3JzXG5cdCkge1xuXHQgIGlmICh0eXBlb2YgaWRlbnQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBuZXcgRnVuY3Rpb24oKFwidmFyIFwiICsgaWRlbnQgKyBcIj1fXCIpKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgZXJyb3JzLnB1c2goKFwiaW52YWxpZCBcIiArIHR5cGUgKyBcIiBcXFwiXCIgKyBpZGVudCArIFwiXFxcIiBpbiBleHByZXNzaW9uOiBcIiArICh0ZXh0LnRyaW0oKSkpKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrRXhwcmVzc2lvbiAoZXhwLCB0ZXh0LCBlcnJvcnMpIHtcblx0ICB0cnkge1xuXHQgICAgbmV3IEZ1bmN0aW9uKChcInJldHVybiBcIiArIGV4cCkpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHZhciBrZXl3b3JkTWF0Y2ggPSBleHAucmVwbGFjZShzdHJpcFN0cmluZ1JFLCAnJykubWF0Y2gocHJvaGliaXRlZEtleXdvcmRSRSk7XG5cdCAgICBpZiAoa2V5d29yZE1hdGNoKSB7XG5cdCAgICAgIGVycm9ycy5wdXNoKFxuXHQgICAgICAgIFwiYXZvaWQgdXNpbmcgSmF2YVNjcmlwdCBrZXl3b3JkIGFzIHByb3BlcnR5IG5hbWU6IFwiICtcblx0ICAgICAgICBcIlxcXCJcIiArIChrZXl3b3JkTWF0Y2hbMF0pICsgXCJcXFwiXFxuICBSYXcgZXhwcmVzc2lvbjogXCIgKyAodGV4dC50cmltKCkpXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlcnJvcnMucHVzaChcblx0ICAgICAgICBcImludmFsaWQgZXhwcmVzc2lvbjogXCIgKyAoZS5tZXNzYWdlKSArIFwiIGluXFxuXFxuXCIgK1xuXHQgICAgICAgIFwiICAgIFwiICsgZXhwICsgXCJcXG5cXG5cIiArXG5cdCAgICAgICAgXCIgIFJhdyBleHByZXNzaW9uOiBcIiArICh0ZXh0LnRyaW0oKSkgKyBcIlxcblwiXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uIChjb2RlLCBlcnJvcnMpIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihjb2RlKVxuXHQgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgZXJyb3JzLnB1c2goeyBlcnI6IGVyciwgY29kZTogY29kZSB9KTtcblx0ICAgIHJldHVybiBub29wXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb21waWxlVG9GdW5jdGlvbkZuIChjb21waWxlKSB7XG5cdCAgdmFyIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBpbGVUb0Z1bmN0aW9ucyAoXG5cdCAgICB0ZW1wbGF0ZSxcblx0ICAgIG9wdGlvbnMsXG5cdCAgICB2bVxuXHQgICkge1xuXHQgICAgb3B0aW9ucyA9IGV4dGVuZCh7fSwgb3B0aW9ucyk7XG5cdCAgICB2YXIgd2FybiQkMSA9IG9wdGlvbnMud2FybiB8fCB3YXJuO1xuXHQgICAgZGVsZXRlIG9wdGlvbnMud2Fybjtcblx0XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIHtcblx0ICAgICAgLy8gZGV0ZWN0IHBvc3NpYmxlIENTUCByZXN0cmljdGlvblxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG5ldyBGdW5jdGlvbigncmV0dXJuIDEnKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG5cdCAgICAgICAgICB3YXJuJCQxKFxuXHQgICAgICAgICAgICAnSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgc3RhbmRhbG9uZSBidWlsZCBvZiBWdWUuanMgaW4gYW4gJyArXG5cdCAgICAgICAgICAgICdlbnZpcm9ubWVudCB3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICtcblx0ICAgICAgICAgICAgJ1RoZSB0ZW1wbGF0ZSBjb21waWxlciBjYW5ub3Qgd29yayBpbiB0aGlzIGVudmlyb25tZW50LiBDb25zaWRlciAnICtcblx0ICAgICAgICAgICAgJ3JlbGF4aW5nIHRoZSBwb2xpY3kgdG8gYWxsb3cgdW5zYWZlLWV2YWwgb3IgcHJlLWNvbXBpbGluZyB5b3VyICcgK1xuXHQgICAgICAgICAgICAndGVtcGxhdGVzIGludG8gcmVuZGVyIGZ1bmN0aW9ucy4nXG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGNoZWNrIGNhY2hlXG5cdCAgICB2YXIga2V5ID0gb3B0aW9ucy5kZWxpbWl0ZXJzXG5cdCAgICAgID8gU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVycykgKyB0ZW1wbGF0ZVxuXHQgICAgICA6IHRlbXBsYXRlO1xuXHQgICAgaWYgKGNhY2hlW2tleV0pIHtcblx0ICAgICAgcmV0dXJuIGNhY2hlW2tleV1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBjb21waWxlXG5cdCAgICB2YXIgY29tcGlsZWQgPSBjb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTtcblx0XG5cdCAgICAvLyBjaGVjayBjb21waWxhdGlvbiBlcnJvcnMvdGlwc1xuXHQgICAge1xuXHQgICAgICBpZiAoY29tcGlsZWQuZXJyb3JzICYmIGNvbXBpbGVkLmVycm9ycy5sZW5ndGgpIHtcblx0ICAgICAgICB3YXJuJCQxKFxuXHQgICAgICAgICAgXCJFcnJvciBjb21waWxpbmcgdGVtcGxhdGU6XFxuXFxuXCIgKyB0ZW1wbGF0ZSArIFwiXFxuXFxuXCIgK1xuXHQgICAgICAgICAgY29tcGlsZWQuZXJyb3JzLm1hcChmdW5jdGlvbiAoZSkgeyByZXR1cm4gKFwiLSBcIiArIGUpOyB9KS5qb2luKCdcXG4nKSArICdcXG4nLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChjb21waWxlZC50aXBzICYmIGNvbXBpbGVkLnRpcHMubGVuZ3RoKSB7XG5cdCAgICAgICAgY29tcGlsZWQudGlwcy5mb3JFYWNoKGZ1bmN0aW9uIChtc2cpIHsgcmV0dXJuIHRpcChtc2csIHZtKTsgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyB0dXJuIGNvZGUgaW50byBmdW5jdGlvbnNcblx0ICAgIHZhciByZXMgPSB7fTtcblx0ICAgIHZhciBmbkdlbkVycm9ycyA9IFtdO1xuXHQgICAgcmVzLnJlbmRlciA9IGNyZWF0ZUZ1bmN0aW9uKGNvbXBpbGVkLnJlbmRlciwgZm5HZW5FcnJvcnMpO1xuXHQgICAgcmVzLnN0YXRpY1JlbmRlckZucyA9IGNvbXBpbGVkLnN0YXRpY1JlbmRlckZucy5tYXAoZnVuY3Rpb24gKGNvZGUpIHtcblx0ICAgICAgcmV0dXJuIGNyZWF0ZUZ1bmN0aW9uKGNvZGUsIGZuR2VuRXJyb3JzKVxuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8gY2hlY2sgZnVuY3Rpb24gZ2VuZXJhdGlvbiBlcnJvcnMuXG5cdCAgICAvLyB0aGlzIHNob3VsZCBvbmx5IGhhcHBlbiBpZiB0aGVyZSBpcyBhIGJ1ZyBpbiB0aGUgY29tcGlsZXIgaXRzZWxmLlxuXHQgICAgLy8gbW9zdGx5IGZvciBjb2RlZ2VuIGRldmVsb3BtZW50IHVzZVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICB7XG5cdCAgICAgIGlmICgoIWNvbXBpbGVkLmVycm9ycyB8fCAhY29tcGlsZWQuZXJyb3JzLmxlbmd0aCkgJiYgZm5HZW5FcnJvcnMubGVuZ3RoKSB7XG5cdCAgICAgICAgd2FybiQkMShcblx0ICAgICAgICAgIFwiRmFpbGVkIHRvIGdlbmVyYXRlIHJlbmRlciBmdW5jdGlvbjpcXG5cXG5cIiArXG5cdCAgICAgICAgICBmbkdlbkVycm9ycy5tYXAoZnVuY3Rpb24gKHJlZikge1xuXHQgICAgICAgICAgICB2YXIgZXJyID0gcmVmLmVycjtcblx0ICAgICAgICAgICAgdmFyIGNvZGUgPSByZWYuY29kZTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiAoKGVyci50b1N0cmluZygpKSArIFwiIGluXFxuXFxuXCIgKyBjb2RlICsgXCJcXG5cIik7XG5cdCAgICAgICAgfSkuam9pbignXFxuJyksXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gKGNhY2hlW2tleV0gPSByZXMpXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNvbXBpbGVyQ3JlYXRvciAoYmFzZUNvbXBpbGUpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQ29tcGlsZXIgKGJhc2VPcHRpb25zKSB7XG5cdCAgICBmdW5jdGlvbiBjb21waWxlIChcblx0ICAgICAgdGVtcGxhdGUsXG5cdCAgICAgIG9wdGlvbnNcblx0ICAgICkge1xuXHQgICAgICB2YXIgZmluYWxPcHRpb25zID0gT2JqZWN0LmNyZWF0ZShiYXNlT3B0aW9ucyk7XG5cdCAgICAgIHZhciBlcnJvcnMgPSBbXTtcblx0ICAgICAgdmFyIHRpcHMgPSBbXTtcblx0ICAgICAgZmluYWxPcHRpb25zLndhcm4gPSBmdW5jdGlvbiAobXNnLCB0aXApIHtcblx0ICAgICAgICAodGlwID8gdGlwcyA6IGVycm9ycykucHVzaChtc2cpO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgaWYgKG9wdGlvbnMpIHtcblx0ICAgICAgICAvLyBtZXJnZSBjdXN0b20gbW9kdWxlc1xuXHQgICAgICAgIGlmIChvcHRpb25zLm1vZHVsZXMpIHtcblx0ICAgICAgICAgIGZpbmFsT3B0aW9ucy5tb2R1bGVzID1cblx0ICAgICAgICAgICAgKGJhc2VPcHRpb25zLm1vZHVsZXMgfHwgW10pLmNvbmNhdChvcHRpb25zLm1vZHVsZXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBtZXJnZSBjdXN0b20gZGlyZWN0aXZlc1xuXHQgICAgICAgIGlmIChvcHRpb25zLmRpcmVjdGl2ZXMpIHtcblx0ICAgICAgICAgIGZpbmFsT3B0aW9ucy5kaXJlY3RpdmVzID0gZXh0ZW5kKFxuXHQgICAgICAgICAgICBPYmplY3QuY3JlYXRlKGJhc2VPcHRpb25zLmRpcmVjdGl2ZXMgfHwgbnVsbCksXG5cdCAgICAgICAgICAgIG9wdGlvbnMuZGlyZWN0aXZlc1xuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gY29weSBvdGhlciBvcHRpb25zXG5cdCAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHtcblx0ICAgICAgICAgIGlmIChrZXkgIT09ICdtb2R1bGVzJyAmJiBrZXkgIT09ICdkaXJlY3RpdmVzJykge1xuXHQgICAgICAgICAgICBmaW5hbE9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb21waWxlZCA9IGJhc2VDb21waWxlKHRlbXBsYXRlLCBmaW5hbE9wdGlvbnMpO1xuXHQgICAgICB7XG5cdCAgICAgICAgZXJyb3JzLnB1c2guYXBwbHkoZXJyb3JzLCBkZXRlY3RFcnJvcnMoY29tcGlsZWQuYXN0KSk7XG5cdCAgICAgIH1cblx0ICAgICAgY29tcGlsZWQuZXJyb3JzID0gZXJyb3JzO1xuXHQgICAgICBjb21waWxlZC50aXBzID0gdGlwcztcblx0ICAgICAgcmV0dXJuIGNvbXBpbGVkXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgY29tcGlsZTogY29tcGlsZSxcblx0ICAgICAgY29tcGlsZVRvRnVuY3Rpb25zOiBjcmVhdGVDb21waWxlVG9GdW5jdGlvbkZuKGNvbXBpbGUpXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIGBjcmVhdGVDb21waWxlckNyZWF0b3JgIGFsbG93cyBjcmVhdGluZyBjb21waWxlcnMgdGhhdCB1c2UgYWx0ZXJuYXRpdmVcblx0Ly8gcGFyc2VyL29wdGltaXplci9jb2RlZ2VuLCBlLmcgdGhlIFNTUiBvcHRpbWl6aW5nIGNvbXBpbGVyLlxuXHQvLyBIZXJlIHdlIGp1c3QgZXhwb3J0IGEgZGVmYXVsdCBjb21waWxlciB1c2luZyB0aGUgZGVmYXVsdCBwYXJ0cy5cblx0dmFyIGNyZWF0ZUNvbXBpbGVyID0gY3JlYXRlQ29tcGlsZXJDcmVhdG9yKGZ1bmN0aW9uIGJhc2VDb21waWxlIChcblx0ICB0ZW1wbGF0ZSxcblx0ICBvcHRpb25zXG5cdCkge1xuXHQgIHZhciBhc3QgPSBwYXJzZSh0ZW1wbGF0ZS50cmltKCksIG9wdGlvbnMpO1xuXHQgIGlmIChvcHRpb25zLm9wdGltaXplICE9PSBmYWxzZSkge1xuXHQgICAgb3B0aW1pemUoYXN0LCBvcHRpb25zKTtcblx0ICB9XG5cdCAgdmFyIGNvZGUgPSBnZW5lcmF0ZShhc3QsIG9wdGlvbnMpO1xuXHQgIHJldHVybiB7XG5cdCAgICBhc3Q6IGFzdCxcblx0ICAgIHJlbmRlcjogY29kZS5yZW5kZXIsXG5cdCAgICBzdGF0aWNSZW5kZXJGbnM6IGNvZGUuc3RhdGljUmVuZGVyRm5zXG5cdCAgfVxuXHR9KTtcblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHJlZiQxID0gY3JlYXRlQ29tcGlsZXIoYmFzZU9wdGlvbnMpO1xuXHR2YXIgY29tcGlsZVRvRnVuY3Rpb25zID0gcmVmJDEuY29tcGlsZVRvRnVuY3Rpb25zO1xuXHRcblx0LyogICovXG5cdFxuXHQvLyBjaGVjayB3aGV0aGVyIGN1cnJlbnQgYnJvd3NlciBlbmNvZGVzIGEgY2hhciBpbnNpZGUgYXR0cmlidXRlIHZhbHVlc1xuXHR2YXIgZGl2O1xuXHRmdW5jdGlvbiBnZXRTaG91bGREZWNvZGUgKGhyZWYpIHtcblx0ICBkaXYgPSBkaXYgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgZGl2LmlubmVySFRNTCA9IGhyZWYgPyBcIjxhIGhyZWY9XFxcIlxcblxcXCIvPlwiIDogXCI8ZGl2IGE9XFxcIlxcblxcXCIvPlwiO1xuXHQgIHJldHVybiBkaXYuaW5uZXJIVE1MLmluZGV4T2YoJyYjMTA7JykgPiAwXG5cdH1cblx0XG5cdC8vICMzNjYzOiBJRSBlbmNvZGVzIG5ld2xpbmVzIGluc2lkZSBhdHRyaWJ1dGUgdmFsdWVzIHdoaWxlIG90aGVyIGJyb3dzZXJzIGRvbid0XG5cdHZhciBzaG91bGREZWNvZGVOZXdsaW5lcyA9IGluQnJvd3NlciA/IGdldFNob3VsZERlY29kZShmYWxzZSkgOiBmYWxzZTtcblx0Ly8gIzY4Mjg6IGNocm9tZSBlbmNvZGVzIGNvbnRlbnQgaW4gYVtocmVmXVxuXHR2YXIgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmID0gaW5Ccm93c2VyID8gZ2V0U2hvdWxkRGVjb2RlKHRydWUpIDogZmFsc2U7XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBpZFRvVGVtcGxhdGUgPSBjYWNoZWQoZnVuY3Rpb24gKGlkKSB7XG5cdCAgdmFyIGVsID0gcXVlcnkoaWQpO1xuXHQgIHJldHVybiBlbCAmJiBlbC5pbm5lckhUTUxcblx0fSk7XG5cdFxuXHR2YXIgbW91bnQgPSBWdWUucHJvdG90eXBlLiRtb3VudDtcblx0VnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoXG5cdCAgZWwsXG5cdCAgaHlkcmF0aW5nXG5cdCkge1xuXHQgIGVsID0gZWwgJiYgcXVlcnkoZWwpO1xuXHRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkgfHwgZWwgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuXHQgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgXCJEbyBub3QgbW91bnQgVnVlIHRvIDxodG1sPiBvciA8Ym9keT4gLSBtb3VudCB0byBub3JtYWwgZWxlbWVudHMgaW5zdGVhZC5cIlxuXHQgICAgKTtcblx0ICAgIHJldHVybiB0aGlzXG5cdCAgfVxuXHRcblx0ICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdCAgLy8gcmVzb2x2ZSB0ZW1wbGF0ZS9lbCBhbmQgY29udmVydCB0byByZW5kZXIgZnVuY3Rpb25cblx0ICBpZiAoIW9wdGlvbnMucmVuZGVyKSB7XG5cdCAgICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlO1xuXHQgICAgaWYgKHRlbXBsYXRlKSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgaWYgKHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG5cdCAgICAgICAgICB0ZW1wbGF0ZSA9IGlkVG9UZW1wbGF0ZSh0ZW1wbGF0ZSk7XG5cdCAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiAhdGVtcGxhdGUpIHtcblx0ICAgICAgICAgICAgd2Fybihcblx0ICAgICAgICAgICAgICAoXCJUZW1wbGF0ZSBlbGVtZW50IG5vdCBmb3VuZCBvciBpcyBlbXB0eTogXCIgKyAob3B0aW9ucy50ZW1wbGF0ZSkpLFxuXHQgICAgICAgICAgICAgIHRoaXNcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGUubm9kZVR5cGUpIHtcblx0ICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLmlubmVySFRNTDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB7XG5cdCAgICAgICAgICB3YXJuKCdpbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjonICsgdGVtcGxhdGUsIHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpc1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGVsKSB7XG5cdCAgICAgIHRlbXBsYXRlID0gZ2V0T3V0ZXJIVE1MKGVsKTtcblx0ICAgIH1cblx0ICAgIGlmICh0ZW1wbGF0ZSkge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7XG5cdCAgICAgICAgbWFyaygnY29tcGlsZScpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcmVmID0gY29tcGlsZVRvRnVuY3Rpb25zKHRlbXBsYXRlLCB7XG5cdCAgICAgICAgc2hvdWxkRGVjb2RlTmV3bGluZXM6IHNob3VsZERlY29kZU5ld2xpbmVzLFxuXHQgICAgICAgIHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjogc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmLFxuXHQgICAgICAgIGRlbGltaXRlcnM6IG9wdGlvbnMuZGVsaW1pdGVycyxcblx0ICAgICAgICBjb21tZW50czogb3B0aW9ucy5jb21tZW50c1xuXHQgICAgICB9LCB0aGlzKTtcblx0ICAgICAgdmFyIHJlbmRlciA9IHJlZi5yZW5kZXI7XG5cdCAgICAgIHZhciBzdGF0aWNSZW5kZXJGbnMgPSByZWYuc3RhdGljUmVuZGVyRm5zO1xuXHQgICAgICBvcHRpb25zLnJlbmRlciA9IHJlbmRlcjtcblx0ICAgICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSBzdGF0aWNSZW5kZXJGbnM7XG5cdFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7XG5cdCAgICAgICAgbWFyaygnY29tcGlsZSBlbmQnKTtcblx0ICAgICAgICBtZWFzdXJlKChcInZ1ZSBcIiArICh0aGlzLl9uYW1lKSArIFwiIGNvbXBpbGVcIiksICdjb21waWxlJywgJ2NvbXBpbGUgZW5kJyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG1vdW50LmNhbGwodGhpcywgZWwsIGh5ZHJhdGluZylcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZVxuXHQgKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldE91dGVySFRNTCAoZWwpIHtcblx0ICBpZiAoZWwub3V0ZXJIVE1MKSB7XG5cdCAgICByZXR1cm4gZWwub3V0ZXJIVE1MXG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuXHQgICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUxcblx0ICB9XG5cdH1cblx0XG5cdFZ1ZS5jb21waWxlID0gY29tcGlsZVRvRnVuY3Rpb25zO1xuXHRcblx0cmV0dXJuIFZ1ZTtcblx0XG5cdH0pKSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1KS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7dmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXHRcblx0Ly8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3Ncblx0XG5cdGV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcblx0fTtcblx0ZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xuXHR9O1xuXHRleHBvcnRzLmNsZWFyVGltZW91dCA9XG5cdGV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcblx0ICBpZiAodGltZW91dCkge1xuXHQgICAgdGltZW91dC5jbG9zZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblx0VGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cblx0ZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHRcblx0ICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcblx0ICBpZiAobXNlY3MgPj0gMCkge1xuXHQgICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuXHQgICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuXHQgICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuXHQgICAgfSwgbXNlY3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3Rcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0Ly8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVpZGF0ZWAgd2FzXG5cdC8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG5cdC8vIGBzZXRpbW1lZGlhdGVgIGxpYnJhcnkuXG5cdGV4cG9ydHMuc2V0SW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuc2V0SW1tZWRpYXRlKSB8fFxuXHQgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUpIHx8XG5cdCAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5zZXRJbW1lZGlhdGUpO1xuXHRleHBvcnRzLmNsZWFySW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY2xlYXJJbW1lZGlhdGUpIHx8XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUpIHx8XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLmNsZWFySW1tZWRpYXRlKTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2VzcykgeyhmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG5cdCAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcblx0ICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblx0XG5cdCAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcblx0ICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG5cdCAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcblx0ICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuXHQgICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG5cdCAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuXHQgICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcblx0ICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcblx0ICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcblx0ICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICBjYWxsYmFjaygpO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuXHQgICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcblx0ICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuXHQgICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcblx0ICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcblx0ICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIGlmICh0YXNrKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG5cdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcblx0ICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuXHQgICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcblx0ICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cblx0ICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuXHQgICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG5cdCAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG5cdCAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcblx0ICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2Vcblx0ICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cdFxuXHQgICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG5cdCAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuXHQgICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcblx0ICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcblx0ICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcblx0ICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcblx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG5cdCAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG5cdCAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblx0ICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdCAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG5cdCAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG5cdCAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblx0XG5cdCAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG5cdCAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG5cdCAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuXHQgICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cdFxuXHQgICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG5cdCAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cdFxuXHQgICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcblx0ICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuXHQgICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cdFxuXHQgICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuXHQgICAgICAgIC8vIEZvciBJRSA24oCTOFxuXHQgICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblx0XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH1cblx0XG5cdCAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5cdCAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXHR9KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygzKSkpXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAgKiB2dWUtcm91dGVyIHYzLjAuMVxuXHQgICogKGMpIDIwMTcgRXZhbiBZb3Vcblx0ICAqIEBsaWNlbnNlIE1JVFxuXHQgICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0IChjb25kaXRpb24sIG1lc3NhZ2UpIHtcblx0ICBpZiAoIWNvbmRpdGlvbikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKChcIlt2dWUtcm91dGVyXSBcIiArIG1lc3NhZ2UpKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gd2FybiAoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIWNvbmRpdGlvbikge1xuXHQgICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUud2FybigoXCJbdnVlLXJvdXRlcl0gXCIgKyBtZXNzYWdlKSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0Vycm9yIChlcnIpIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVycikuaW5kZXhPZignRXJyb3InKSA+IC0xXG5cdH1cblx0XG5cdHZhciBWaWV3ID0ge1xuXHQgIG5hbWU6ICdyb3V0ZXItdmlldycsXG5cdCAgZnVuY3Rpb25hbDogdHJ1ZSxcblx0ICBwcm9wczoge1xuXHQgICAgbmFtZToge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIGRlZmF1bHQ6ICdkZWZhdWx0J1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKF8sIHJlZikge1xuXHQgICAgdmFyIHByb3BzID0gcmVmLnByb3BzO1xuXHQgICAgdmFyIGNoaWxkcmVuID0gcmVmLmNoaWxkcmVuO1xuXHQgICAgdmFyIHBhcmVudCA9IHJlZi5wYXJlbnQ7XG5cdCAgICB2YXIgZGF0YSA9IHJlZi5kYXRhO1xuXHRcblx0ICAgIGRhdGEucm91dGVyVmlldyA9IHRydWU7XG5cdFxuXHQgICAgLy8gZGlyZWN0bHkgdXNlIHBhcmVudCBjb250ZXh0J3MgY3JlYXRlRWxlbWVudCgpIGZ1bmN0aW9uXG5cdCAgICAvLyBzbyB0aGF0IGNvbXBvbmVudHMgcmVuZGVyZWQgYnkgcm91dGVyLXZpZXcgY2FuIHJlc29sdmUgbmFtZWQgc2xvdHNcblx0ICAgIHZhciBoID0gcGFyZW50LiRjcmVhdGVFbGVtZW50O1xuXHQgICAgdmFyIG5hbWUgPSBwcm9wcy5uYW1lO1xuXHQgICAgdmFyIHJvdXRlID0gcGFyZW50LiRyb3V0ZTtcblx0ICAgIHZhciBjYWNoZSA9IHBhcmVudC5fcm91dGVyVmlld0NhY2hlIHx8IChwYXJlbnQuX3JvdXRlclZpZXdDYWNoZSA9IHt9KTtcblx0XG5cdCAgICAvLyBkZXRlcm1pbmUgY3VycmVudCB2aWV3IGRlcHRoLCBhbHNvIGNoZWNrIHRvIHNlZSBpZiB0aGUgdHJlZVxuXHQgICAgLy8gaGFzIGJlZW4gdG9nZ2xlZCBpbmFjdGl2ZSBidXQga2VwdC1hbGl2ZS5cblx0ICAgIHZhciBkZXB0aCA9IDA7XG5cdCAgICB2YXIgaW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50Ll9yb3V0ZXJSb290ICE9PSBwYXJlbnQpIHtcblx0ICAgICAgaWYgKHBhcmVudC4kdm5vZGUgJiYgcGFyZW50LiR2bm9kZS5kYXRhLnJvdXRlclZpZXcpIHtcblx0ICAgICAgICBkZXB0aCsrO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChwYXJlbnQuX2luYWN0aXZlKSB7XG5cdCAgICAgICAgaW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuXHQgICAgfVxuXHQgICAgZGF0YS5yb3V0ZXJWaWV3RGVwdGggPSBkZXB0aDtcblx0XG5cdCAgICAvLyByZW5kZXIgcHJldmlvdXMgdmlldyBpZiB0aGUgdHJlZSBpcyBpbmFjdGl2ZSBhbmQga2VwdC1hbGl2ZVxuXHQgICAgaWYgKGluYWN0aXZlKSB7XG5cdCAgICAgIHJldHVybiBoKGNhY2hlW25hbWVdLCBkYXRhLCBjaGlsZHJlbilcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbWF0Y2hlZCA9IHJvdXRlLm1hdGNoZWRbZGVwdGhdO1xuXHQgICAgLy8gcmVuZGVyIGVtcHR5IG5vZGUgaWYgbm8gbWF0Y2hlZCByb3V0ZVxuXHQgICAgaWYgKCFtYXRjaGVkKSB7XG5cdCAgICAgIGNhY2hlW25hbWVdID0gbnVsbDtcblx0ICAgICAgcmV0dXJuIGgoKVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjb21wb25lbnQgPSBjYWNoZVtuYW1lXSA9IG1hdGNoZWQuY29tcG9uZW50c1tuYW1lXTtcblx0XG5cdCAgICAvLyBhdHRhY2ggaW5zdGFuY2UgcmVnaXN0cmF0aW9uIGhvb2tcblx0ICAgIC8vIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW4gdGhlIGluc3RhbmNlJ3MgaW5qZWN0ZWQgbGlmZWN5Y2xlIGhvb2tzXG5cdCAgICBkYXRhLnJlZ2lzdGVyUm91dGVJbnN0YW5jZSA9IGZ1bmN0aW9uICh2bSwgdmFsKSB7XG5cdCAgICAgIC8vIHZhbCBjb3VsZCBiZSB1bmRlZmluZWQgZm9yIHVucmVnaXN0cmF0aW9uXG5cdCAgICAgIHZhciBjdXJyZW50ID0gbWF0Y2hlZC5pbnN0YW5jZXNbbmFtZV07XG5cdCAgICAgIGlmIChcblx0ICAgICAgICAodmFsICYmIGN1cnJlbnQgIT09IHZtKSB8fFxuXHQgICAgICAgICghdmFsICYmIGN1cnJlbnQgPT09IHZtKVxuXHQgICAgICApIHtcblx0ICAgICAgICBtYXRjaGVkLmluc3RhbmNlc1tuYW1lXSA9IHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFsc28gcmVnaXN0ZXIgaW5zdGFuY2UgaW4gcHJlcGF0Y2ggaG9va1xuXHQgICAgLy8gaW4gY2FzZSB0aGUgc2FtZSBjb21wb25lbnQgaW5zdGFuY2UgaXMgcmV1c2VkIGFjcm9zcyBkaWZmZXJlbnQgcm91dGVzXG5cdCAgICA7KGRhdGEuaG9vayB8fCAoZGF0YS5ob29rID0ge30pKS5wcmVwYXRjaCA9IGZ1bmN0aW9uIChfLCB2bm9kZSkge1xuXHQgICAgICBtYXRjaGVkLmluc3RhbmNlc1tuYW1lXSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyByZXNvbHZlIHByb3BzXG5cdCAgICB2YXIgcHJvcHNUb1Bhc3MgPSBkYXRhLnByb3BzID0gcmVzb2x2ZVByb3BzKHJvdXRlLCBtYXRjaGVkLnByb3BzICYmIG1hdGNoZWQucHJvcHNbbmFtZV0pO1xuXHQgICAgaWYgKHByb3BzVG9QYXNzKSB7XG5cdCAgICAgIC8vIGNsb25lIHRvIHByZXZlbnQgbXV0YXRpb25cblx0ICAgICAgcHJvcHNUb1Bhc3MgPSBkYXRhLnByb3BzID0gZXh0ZW5kKHt9LCBwcm9wc1RvUGFzcyk7XG5cdCAgICAgIC8vIHBhc3Mgbm9uLWRlY2xhcmVkIHByb3BzIGFzIGF0dHJzXG5cdCAgICAgIHZhciBhdHRycyA9IGRhdGEuYXR0cnMgPSBkYXRhLmF0dHJzIHx8IHt9O1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHNUb1Bhc3MpIHtcblx0ICAgICAgICBpZiAoIWNvbXBvbmVudC5wcm9wcyB8fCAhKGtleSBpbiBjb21wb25lbnQucHJvcHMpKSB7XG5cdCAgICAgICAgICBhdHRyc1trZXldID0gcHJvcHNUb1Bhc3Nba2V5XTtcblx0ICAgICAgICAgIGRlbGV0ZSBwcm9wc1RvUGFzc1trZXldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBoKGNvbXBvbmVudCwgZGF0YSwgY2hpbGRyZW4pXG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVByb3BzIChyb3V0ZSwgY29uZmlnKSB7XG5cdCAgc3dpdGNoICh0eXBlb2YgY29uZmlnKSB7XG5cdCAgICBjYXNlICd1bmRlZmluZWQnOlxuXHQgICAgICByZXR1cm5cblx0ICAgIGNhc2UgJ29iamVjdCc6XG5cdCAgICAgIHJldHVybiBjb25maWdcblx0ICAgIGNhc2UgJ2Z1bmN0aW9uJzpcblx0ICAgICAgcmV0dXJuIGNvbmZpZyhyb3V0ZSlcblx0ICAgIGNhc2UgJ2Jvb2xlYW4nOlxuXHQgICAgICByZXR1cm4gY29uZmlnID8gcm91dGUucGFyYW1zIDogdW5kZWZpbmVkXG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICBmYWxzZSxcblx0ICAgICAgICAgIFwicHJvcHMgaW4gXFxcIlwiICsgKHJvdXRlLnBhdGgpICsgXCJcXFwiIGlzIGEgXCIgKyAodHlwZW9mIGNvbmZpZykgKyBcIiwgXCIgK1xuXHQgICAgICAgICAgXCJleHBlY3RpbmcgYW4gb2JqZWN0LCBmdW5jdGlvbiBvciBib29sZWFuLlwiXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZXh0ZW5kICh0bywgZnJvbSkge1xuXHQgIGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdCAgICB0b1trZXldID0gZnJvbVtrZXldO1xuXHQgIH1cblx0ICByZXR1cm4gdG9cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgZW5jb2RlUmVzZXJ2ZVJFID0gL1shJygpKl0vZztcblx0dmFyIGVuY29kZVJlc2VydmVSZXBsYWNlciA9IGZ1bmN0aW9uIChjKSB7IHJldHVybiAnJScgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpOyB9O1xuXHR2YXIgY29tbWFSRSA9IC8lMkMvZztcblx0XG5cdC8vIGZpeGVkIGVuY29kZVVSSUNvbXBvbmVudCB3aGljaCBpcyBtb3JlIGNvbmZvcm1hbnQgdG8gUkZDMzk4Njpcblx0Ly8gLSBlc2NhcGVzIFshJygpKl1cblx0Ly8gLSBwcmVzZXJ2ZSBjb21tYXNcblx0dmFyIGVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHIpXG5cdCAgLnJlcGxhY2UoZW5jb2RlUmVzZXJ2ZVJFLCBlbmNvZGVSZXNlcnZlUmVwbGFjZXIpXG5cdCAgLnJlcGxhY2UoY29tbWFSRSwgJywnKTsgfTtcblx0XG5cdHZhciBkZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlUXVlcnkgKFxuXHQgIHF1ZXJ5LFxuXHQgIGV4dHJhUXVlcnksXG5cdCAgX3BhcnNlUXVlcnlcblx0KSB7XG5cdCAgaWYgKCBleHRyYVF1ZXJ5ID09PSB2b2lkIDAgKSBleHRyYVF1ZXJ5ID0ge307XG5cdFxuXHQgIHZhciBwYXJzZSA9IF9wYXJzZVF1ZXJ5IHx8IHBhcnNlUXVlcnk7XG5cdCAgdmFyIHBhcnNlZFF1ZXJ5O1xuXHQgIHRyeSB7XG5cdCAgICBwYXJzZWRRdWVyeSA9IHBhcnNlKHF1ZXJ5IHx8ICcnKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oZmFsc2UsIGUubWVzc2FnZSk7XG5cdCAgICBwYXJzZWRRdWVyeSA9IHt9O1xuXHQgIH1cblx0ICBmb3IgKHZhciBrZXkgaW4gZXh0cmFRdWVyeSkge1xuXHQgICAgcGFyc2VkUXVlcnlba2V5XSA9IGV4dHJhUXVlcnlba2V5XTtcblx0ICB9XG5cdCAgcmV0dXJuIHBhcnNlZFF1ZXJ5XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlUXVlcnkgKHF1ZXJ5KSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHRcblx0ICBxdWVyeSA9IHF1ZXJ5LnRyaW0oKS5yZXBsYWNlKC9eKFxcP3wjfCYpLywgJycpO1xuXHRcblx0ICBpZiAoIXF1ZXJ5KSB7XG5cdCAgICByZXR1cm4gcmVzXG5cdCAgfVxuXHRcblx0ICBxdWVyeS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7XG5cdCAgICB2YXIgcGFydHMgPSBwYXJhbS5yZXBsYWNlKC9cXCsvZywgJyAnKS5zcGxpdCgnPScpO1xuXHQgICAgdmFyIGtleSA9IGRlY29kZShwYXJ0cy5zaGlmdCgpKTtcblx0ICAgIHZhciB2YWwgPSBwYXJ0cy5sZW5ndGggPiAwXG5cdCAgICAgID8gZGVjb2RlKHBhcnRzLmpvaW4oJz0nKSlcblx0ICAgICAgOiBudWxsO1xuXHRcblx0ICAgIGlmIChyZXNba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHJlc1trZXldID0gdmFsO1xuXHQgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc1trZXldKSkge1xuXHQgICAgICByZXNba2V5XS5wdXNoKHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXNba2V5XSA9IFtyZXNba2V5XSwgdmFsXTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdHJpbmdpZnlRdWVyeSAob2JqKSB7XG5cdCAgdmFyIHJlcyA9IG9iaiA/IE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHZhciB2YWwgPSBvYmpba2V5XTtcblx0XG5cdCAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgcmV0dXJuICcnXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4gZW5jb2RlKGtleSlcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG5cdCAgICAgIHZhciByZXN1bHQgPSBbXTtcblx0ICAgICAgdmFsLmZvckVhY2goZnVuY3Rpb24gKHZhbDIpIHtcblx0ICAgICAgICBpZiAodmFsMiA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHZhbDIgPT09IG51bGwpIHtcblx0ICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZShrZXkpKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmVzdWx0LnB1c2goZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodmFsMikpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiByZXN1bHQuam9pbignJicpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHZhbClcblx0ICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubGVuZ3RoID4gMDsgfSkuam9pbignJicpIDogbnVsbDtcblx0ICByZXR1cm4gcmVzID8gKFwiP1wiICsgcmVzKSA6ICcnXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0XG5cdHZhciB0cmFpbGluZ1NsYXNoUkUgPSAvXFwvPyQvO1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlUm91dGUgKFxuXHQgIHJlY29yZCxcblx0ICBsb2NhdGlvbixcblx0ICByZWRpcmVjdGVkRnJvbSxcblx0ICByb3V0ZXJcblx0KSB7XG5cdCAgdmFyIHN0cmluZ2lmeVF1ZXJ5JCQxID0gcm91dGVyICYmIHJvdXRlci5vcHRpb25zLnN0cmluZ2lmeVF1ZXJ5O1xuXHRcblx0ICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5xdWVyeSB8fCB7fTtcblx0ICB0cnkge1xuXHQgICAgcXVlcnkgPSBjbG9uZShxdWVyeSk7XG5cdCAgfSBjYXRjaCAoZSkge31cblx0XG5cdCAgdmFyIHJvdXRlID0ge1xuXHQgICAgbmFtZTogbG9jYXRpb24ubmFtZSB8fCAocmVjb3JkICYmIHJlY29yZC5uYW1lKSxcblx0ICAgIG1ldGE6IChyZWNvcmQgJiYgcmVjb3JkLm1ldGEpIHx8IHt9LFxuXHQgICAgcGF0aDogbG9jYXRpb24ucGF0aCB8fCAnLycsXG5cdCAgICBoYXNoOiBsb2NhdGlvbi5oYXNoIHx8ICcnLFxuXHQgICAgcXVlcnk6IHF1ZXJ5LFxuXHQgICAgcGFyYW1zOiBsb2NhdGlvbi5wYXJhbXMgfHwge30sXG5cdCAgICBmdWxsUGF0aDogZ2V0RnVsbFBhdGgobG9jYXRpb24sIHN0cmluZ2lmeVF1ZXJ5JCQxKSxcblx0ICAgIG1hdGNoZWQ6IHJlY29yZCA/IGZvcm1hdE1hdGNoKHJlY29yZCkgOiBbXVxuXHQgIH07XG5cdCAgaWYgKHJlZGlyZWN0ZWRGcm9tKSB7XG5cdCAgICByb3V0ZS5yZWRpcmVjdGVkRnJvbSA9IGdldEZ1bGxQYXRoKHJlZGlyZWN0ZWRGcm9tLCBzdHJpbmdpZnlRdWVyeSQkMSk7XG5cdCAgfVxuXHQgIHJldHVybiBPYmplY3QuZnJlZXplKHJvdXRlKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjbG9uZSAodmFsdWUpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZS5tYXAoY2xvbmUpXG5cdCAgfSBlbHNlIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICB2YXIgcmVzID0ge307XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcblx0ICAgICAgcmVzW2tleV0gPSBjbG9uZSh2YWx1ZVtrZXldKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXNcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHZhbHVlXG5cdCAgfVxuXHR9XG5cdFxuXHQvLyB0aGUgc3RhcnRpbmcgcm91dGUgdGhhdCByZXByZXNlbnRzIHRoZSBpbml0aWFsIHN0YXRlXG5cdHZhciBTVEFSVCA9IGNyZWF0ZVJvdXRlKG51bGwsIHtcblx0ICBwYXRoOiAnLydcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRNYXRjaCAocmVjb3JkKSB7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIHdoaWxlIChyZWNvcmQpIHtcblx0ICAgIHJlcy51bnNoaWZ0KHJlY29yZCk7XG5cdCAgICByZWNvcmQgPSByZWNvcmQucGFyZW50O1xuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEZ1bGxQYXRoIChcblx0ICByZWYsXG5cdCAgX3N0cmluZ2lmeVF1ZXJ5XG5cdCkge1xuXHQgIHZhciBwYXRoID0gcmVmLnBhdGg7XG5cdCAgdmFyIHF1ZXJ5ID0gcmVmLnF1ZXJ5OyBpZiAoIHF1ZXJ5ID09PSB2b2lkIDAgKSBxdWVyeSA9IHt9O1xuXHQgIHZhciBoYXNoID0gcmVmLmhhc2g7IGlmICggaGFzaCA9PT0gdm9pZCAwICkgaGFzaCA9ICcnO1xuXHRcblx0ICB2YXIgc3RyaW5naWZ5ID0gX3N0cmluZ2lmeVF1ZXJ5IHx8IHN0cmluZ2lmeVF1ZXJ5O1xuXHQgIHJldHVybiAocGF0aCB8fCAnLycpICsgc3RyaW5naWZ5KHF1ZXJ5KSArIGhhc2hcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNTYW1lUm91dGUgKGEsIGIpIHtcblx0ICBpZiAoYiA9PT0gU1RBUlQpIHtcblx0ICAgIHJldHVybiBhID09PSBiXG5cdCAgfSBlbHNlIGlmICghYikge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfSBlbHNlIGlmIChhLnBhdGggJiYgYi5wYXRoKSB7XG5cdCAgICByZXR1cm4gKFxuXHQgICAgICBhLnBhdGgucmVwbGFjZSh0cmFpbGluZ1NsYXNoUkUsICcnKSA9PT0gYi5wYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnJykgJiZcblx0ICAgICAgYS5oYXNoID09PSBiLmhhc2ggJiZcblx0ICAgICAgaXNPYmplY3RFcXVhbChhLnF1ZXJ5LCBiLnF1ZXJ5KVxuXHQgICAgKVxuXHQgIH0gZWxzZSBpZiAoYS5uYW1lICYmIGIubmFtZSkge1xuXHQgICAgcmV0dXJuIChcblx0ICAgICAgYS5uYW1lID09PSBiLm5hbWUgJiZcblx0ICAgICAgYS5oYXNoID09PSBiLmhhc2ggJiZcblx0ICAgICAgaXNPYmplY3RFcXVhbChhLnF1ZXJ5LCBiLnF1ZXJ5KSAmJlxuXHQgICAgICBpc09iamVjdEVxdWFsKGEucGFyYW1zLCBiLnBhcmFtcylcblx0ICAgIClcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdEVxdWFsIChhLCBiKSB7XG5cdCAgaWYgKCBhID09PSB2b2lkIDAgKSBhID0ge307XG5cdCAgaWYgKCBiID09PSB2b2lkIDAgKSBiID0ge307XG5cdFxuXHQgIC8vIGhhbmRsZSBudWxsIHZhbHVlICMxNTY2XG5cdCAgaWYgKCFhIHx8ICFiKSB7IHJldHVybiBhID09PSBiIH1cblx0ICB2YXIgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcblx0ICB2YXIgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcblx0ICBpZiAoYUtleXMubGVuZ3RoICE9PSBiS2V5cy5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0ICByZXR1cm4gYUtleXMuZXZlcnkoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdmFyIGFWYWwgPSBhW2tleV07XG5cdCAgICB2YXIgYlZhbCA9IGJba2V5XTtcblx0ICAgIC8vIGNoZWNrIG5lc3RlZCBlcXVhbGl0eVxuXHQgICAgaWYgKHR5cGVvZiBhVmFsID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgYlZhbCA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlzT2JqZWN0RXF1YWwoYVZhbCwgYlZhbClcblx0ICAgIH1cblx0ICAgIHJldHVybiBTdHJpbmcoYVZhbCkgPT09IFN0cmluZyhiVmFsKVxuXHQgIH0pXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzSW5jbHVkZWRSb3V0ZSAoY3VycmVudCwgdGFyZ2V0KSB7XG5cdCAgcmV0dXJuIChcblx0ICAgIGN1cnJlbnQucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJy8nKS5pbmRleE9mKFxuXHQgICAgICB0YXJnZXQucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJy8nKVxuXHQgICAgKSA9PT0gMCAmJlxuXHQgICAgKCF0YXJnZXQuaGFzaCB8fCBjdXJyZW50Lmhhc2ggPT09IHRhcmdldC5oYXNoKSAmJlxuXHQgICAgcXVlcnlJbmNsdWRlcyhjdXJyZW50LnF1ZXJ5LCB0YXJnZXQucXVlcnkpXG5cdCAgKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBxdWVyeUluY2x1ZGVzIChjdXJyZW50LCB0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBrZXkgaW4gdGFyZ2V0KSB7XG5cdCAgICBpZiAoIShrZXkgaW4gY3VycmVudCkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gd29yayBhcm91bmQgd2VpcmQgZmxvdyBidWdcblx0dmFyIHRvVHlwZXMgPSBbU3RyaW5nLCBPYmplY3RdO1xuXHR2YXIgZXZlbnRUeXBlcyA9IFtTdHJpbmcsIEFycmF5XTtcblx0XG5cdHZhciBMaW5rID0ge1xuXHQgIG5hbWU6ICdyb3V0ZXItbGluaycsXG5cdCAgcHJvcHM6IHtcblx0ICAgIHRvOiB7XG5cdCAgICAgIHR5cGU6IHRvVHlwZXMsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9LFxuXHQgICAgdGFnOiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgZGVmYXVsdDogJ2EnXG5cdCAgICB9LFxuXHQgICAgZXhhY3Q6IEJvb2xlYW4sXG5cdCAgICBhcHBlbmQ6IEJvb2xlYW4sXG5cdCAgICByZXBsYWNlOiBCb29sZWFuLFxuXHQgICAgYWN0aXZlQ2xhc3M6IFN0cmluZyxcblx0ICAgIGV4YWN0QWN0aXZlQ2xhc3M6IFN0cmluZyxcblx0ICAgIGV2ZW50OiB7XG5cdCAgICAgIHR5cGU6IGV2ZW50VHlwZXMsXG5cdCAgICAgIGRlZmF1bHQ6ICdjbGljaydcblx0ICAgIH1cblx0ICB9LFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgcm91dGVyID0gdGhpcy4kcm91dGVyO1xuXHQgICAgdmFyIGN1cnJlbnQgPSB0aGlzLiRyb3V0ZTtcblx0ICAgIHZhciByZWYgPSByb3V0ZXIucmVzb2x2ZSh0aGlzLnRvLCBjdXJyZW50LCB0aGlzLmFwcGVuZCk7XG5cdCAgICB2YXIgbG9jYXRpb24gPSByZWYubG9jYXRpb247XG5cdCAgICB2YXIgcm91dGUgPSByZWYucm91dGU7XG5cdCAgICB2YXIgaHJlZiA9IHJlZi5ocmVmO1xuXHRcblx0ICAgIHZhciBjbGFzc2VzID0ge307XG5cdCAgICB2YXIgZ2xvYmFsQWN0aXZlQ2xhc3MgPSByb3V0ZXIub3B0aW9ucy5saW5rQWN0aXZlQ2xhc3M7XG5cdCAgICB2YXIgZ2xvYmFsRXhhY3RBY3RpdmVDbGFzcyA9IHJvdXRlci5vcHRpb25zLmxpbmtFeGFjdEFjdGl2ZUNsYXNzO1xuXHQgICAgLy8gU3VwcG9ydCBnbG9iYWwgZW1wdHkgYWN0aXZlIGNsYXNzXG5cdCAgICB2YXIgYWN0aXZlQ2xhc3NGYWxsYmFjayA9IGdsb2JhbEFjdGl2ZUNsYXNzID09IG51bGxcblx0ICAgICAgICAgICAgPyAncm91dGVyLWxpbmstYWN0aXZlJ1xuXHQgICAgICAgICAgICA6IGdsb2JhbEFjdGl2ZUNsYXNzO1xuXHQgICAgdmFyIGV4YWN0QWN0aXZlQ2xhc3NGYWxsYmFjayA9IGdsb2JhbEV4YWN0QWN0aXZlQ2xhc3MgPT0gbnVsbFxuXHQgICAgICAgICAgICA/ICdyb3V0ZXItbGluay1leGFjdC1hY3RpdmUnXG5cdCAgICAgICAgICAgIDogZ2xvYmFsRXhhY3RBY3RpdmVDbGFzcztcblx0ICAgIHZhciBhY3RpdmVDbGFzcyA9IHRoaXMuYWN0aXZlQ2xhc3MgPT0gbnVsbFxuXHQgICAgICAgICAgICA/IGFjdGl2ZUNsYXNzRmFsbGJhY2tcblx0ICAgICAgICAgICAgOiB0aGlzLmFjdGl2ZUNsYXNzO1xuXHQgICAgdmFyIGV4YWN0QWN0aXZlQ2xhc3MgPSB0aGlzLmV4YWN0QWN0aXZlQ2xhc3MgPT0gbnVsbFxuXHQgICAgICAgICAgICA/IGV4YWN0QWN0aXZlQ2xhc3NGYWxsYmFja1xuXHQgICAgICAgICAgICA6IHRoaXMuZXhhY3RBY3RpdmVDbGFzcztcblx0ICAgIHZhciBjb21wYXJlVGFyZ2V0ID0gbG9jYXRpb24ucGF0aFxuXHQgICAgICA/IGNyZWF0ZVJvdXRlKG51bGwsIGxvY2F0aW9uLCBudWxsLCByb3V0ZXIpXG5cdCAgICAgIDogcm91dGU7XG5cdFxuXHQgICAgY2xhc3Nlc1tleGFjdEFjdGl2ZUNsYXNzXSA9IGlzU2FtZVJvdXRlKGN1cnJlbnQsIGNvbXBhcmVUYXJnZXQpO1xuXHQgICAgY2xhc3Nlc1thY3RpdmVDbGFzc10gPSB0aGlzLmV4YWN0XG5cdCAgICAgID8gY2xhc3Nlc1tleGFjdEFjdGl2ZUNsYXNzXVxuXHQgICAgICA6IGlzSW5jbHVkZWRSb3V0ZShjdXJyZW50LCBjb21wYXJlVGFyZ2V0KTtcblx0XG5cdCAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIGlmIChndWFyZEV2ZW50KGUpKSB7XG5cdCAgICAgICAgaWYgKHRoaXMkMS5yZXBsYWNlKSB7XG5cdCAgICAgICAgICByb3V0ZXIucmVwbGFjZShsb2NhdGlvbik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJvdXRlci5wdXNoKGxvY2F0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIG9uID0geyBjbGljazogZ3VhcmRFdmVudCB9O1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5ldmVudCkpIHtcblx0ICAgICAgdGhpcy5ldmVudC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IG9uW2VdID0gaGFuZGxlcjsgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvblt0aGlzLmV2ZW50XSA9IGhhbmRsZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRhdGEgPSB7XG5cdCAgICAgIGNsYXNzOiBjbGFzc2VzXG5cdCAgICB9O1xuXHRcblx0ICAgIGlmICh0aGlzLnRhZyA9PT0gJ2EnKSB7XG5cdCAgICAgIGRhdGEub24gPSBvbjtcblx0ICAgICAgZGF0YS5hdHRycyA9IHsgaHJlZjogaHJlZiB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gZmluZCB0aGUgZmlyc3QgPGE+IGNoaWxkIGFuZCBhcHBseSBsaXN0ZW5lciBhbmQgaHJlZlxuXHQgICAgICB2YXIgYSA9IGZpbmRBbmNob3IodGhpcy4kc2xvdHMuZGVmYXVsdCk7XG5cdCAgICAgIGlmIChhKSB7XG5cdCAgICAgICAgLy8gaW4gY2FzZSB0aGUgPGE+IGlzIGEgc3RhdGljIG5vZGVcblx0ICAgICAgICBhLmlzU3RhdGljID0gZmFsc2U7XG5cdCAgICAgICAgdmFyIGV4dGVuZCA9IF9WdWUudXRpbC5leHRlbmQ7XG5cdCAgICAgICAgdmFyIGFEYXRhID0gYS5kYXRhID0gZXh0ZW5kKHt9LCBhLmRhdGEpO1xuXHQgICAgICAgIGFEYXRhLm9uID0gb247XG5cdCAgICAgICAgdmFyIGFBdHRycyA9IGEuZGF0YS5hdHRycyA9IGV4dGVuZCh7fSwgYS5kYXRhLmF0dHJzKTtcblx0ICAgICAgICBhQXR0cnMuaHJlZiA9IGhyZWY7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gZG9lc24ndCBoYXZlIDxhPiBjaGlsZCwgYXBwbHkgbGlzdGVuZXIgdG8gc2VsZlxuXHQgICAgICAgIGRhdGEub24gPSBvbjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBoKHRoaXMudGFnLCBkYXRhLCB0aGlzLiRzbG90cy5kZWZhdWx0KVxuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGd1YXJkRXZlbnQgKGUpIHtcblx0ICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuXHQgIGlmIChlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHsgcmV0dXJuIH1cblx0ICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuXHQgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHsgcmV0dXJuIH1cblx0ICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuXHQgIGlmIChlLmJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIGUuYnV0dG9uICE9PSAwKSB7IHJldHVybiB9XG5cdCAgLy8gZG9uJ3QgcmVkaXJlY3QgaWYgYHRhcmdldD1cIl9ibGFua1wiYFxuXHQgIGlmIChlLmN1cnJlbnRUYXJnZXQgJiYgZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSkge1xuXHQgICAgdmFyIHRhcmdldCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpO1xuXHQgICAgaWYgKC9cXGJfYmxhbmtcXGIvaS50ZXN0KHRhcmdldCkpIHsgcmV0dXJuIH1cblx0ICB9XG5cdCAgLy8gdGhpcyBtYXkgYmUgYSBXZWV4IGV2ZW50IHdoaWNoIGRvZXNuJ3QgaGF2ZSB0aGlzIG1ldGhvZFxuXHQgIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZpbmRBbmNob3IgKGNoaWxkcmVuKSB7XG5cdCAgaWYgKGNoaWxkcmVuKSB7XG5cdCAgICB2YXIgY2hpbGQ7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XG5cdCAgICAgIGlmIChjaGlsZC50YWcgPT09ICdhJykge1xuXHQgICAgICAgIHJldHVybiBjaGlsZFxuXHQgICAgICB9XG5cdCAgICAgIGlmIChjaGlsZC5jaGlsZHJlbiAmJiAoY2hpbGQgPSBmaW5kQW5jaG9yKGNoaWxkLmNoaWxkcmVuKSkpIHtcblx0ICAgICAgICByZXR1cm4gY2hpbGRcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIF9WdWU7XG5cdFxuXHRmdW5jdGlvbiBpbnN0YWxsIChWdWUpIHtcblx0ICBpZiAoaW5zdGFsbC5pbnN0YWxsZWQgJiYgX1Z1ZSA9PT0gVnVlKSB7IHJldHVybiB9XG5cdCAgaW5zdGFsbC5pbnN0YWxsZWQgPSB0cnVlO1xuXHRcblx0ICBfVnVlID0gVnVlO1xuXHRcblx0ICB2YXIgaXNEZWYgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gdiAhPT0gdW5kZWZpbmVkOyB9O1xuXHRcblx0ICB2YXIgcmVnaXN0ZXJJbnN0YW5jZSA9IGZ1bmN0aW9uICh2bSwgY2FsbFZhbCkge1xuXHQgICAgdmFyIGkgPSB2bS4kb3B0aW9ucy5fcGFyZW50Vm5vZGU7XG5cdCAgICBpZiAoaXNEZWYoaSkgJiYgaXNEZWYoaSA9IGkuZGF0YSkgJiYgaXNEZWYoaSA9IGkucmVnaXN0ZXJSb3V0ZUluc3RhbmNlKSkge1xuXHQgICAgICBpKHZtLCBjYWxsVmFsKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBWdWUubWl4aW4oe1xuXHQgICAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUgKCkge1xuXHQgICAgICBpZiAoaXNEZWYodGhpcy4kb3B0aW9ucy5yb3V0ZXIpKSB7XG5cdCAgICAgICAgdGhpcy5fcm91dGVyUm9vdCA9IHRoaXM7XG5cdCAgICAgICAgdGhpcy5fcm91dGVyID0gdGhpcy4kb3B0aW9ucy5yb3V0ZXI7XG5cdCAgICAgICAgdGhpcy5fcm91dGVyLmluaXQodGhpcyk7XG5cdCAgICAgICAgVnVlLnV0aWwuZGVmaW5lUmVhY3RpdmUodGhpcywgJ19yb3V0ZScsIHRoaXMuX3JvdXRlci5oaXN0b3J5LmN1cnJlbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX3JvdXRlclJvb3QgPSAodGhpcy4kcGFyZW50ICYmIHRoaXMuJHBhcmVudC5fcm91dGVyUm9vdCkgfHwgdGhpcztcblx0ICAgICAgfVxuXHQgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIHRoaXMpO1xuXHQgICAgfSxcblx0ICAgIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkICgpIHtcblx0ICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckcm91dGVyJywge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkgeyByZXR1cm4gdGhpcy5fcm91dGVyUm9vdC5fcm91dGVyIH1cblx0ICB9KTtcblx0XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckcm91dGUnLCB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7IHJldHVybiB0aGlzLl9yb3V0ZXJSb290Ll9yb3V0ZSB9XG5cdCAgfSk7XG5cdFxuXHQgIFZ1ZS5jb21wb25lbnQoJ3JvdXRlci12aWV3JywgVmlldyk7XG5cdCAgVnVlLmNvbXBvbmVudCgncm91dGVyLWxpbmsnLCBMaW5rKTtcblx0XG5cdCAgdmFyIHN0cmF0cyA9IFZ1ZS5jb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzO1xuXHQgIC8vIHVzZSB0aGUgc2FtZSBob29rIG1lcmdpbmcgc3RyYXRlZ3kgZm9yIHJvdXRlIGhvb2tzXG5cdCAgc3RyYXRzLmJlZm9yZVJvdXRlRW50ZXIgPSBzdHJhdHMuYmVmb3JlUm91dGVMZWF2ZSA9IHN0cmF0cy5iZWZvcmVSb3V0ZVVwZGF0ZSA9IHN0cmF0cy5jcmVhdGVkO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVBhdGggKFxuXHQgIHJlbGF0aXZlLFxuXHQgIGJhc2UsXG5cdCAgYXBwZW5kXG5cdCkge1xuXHQgIHZhciBmaXJzdENoYXIgPSByZWxhdGl2ZS5jaGFyQXQoMCk7XG5cdCAgaWYgKGZpcnN0Q2hhciA9PT0gJy8nKSB7XG5cdCAgICByZXR1cm4gcmVsYXRpdmVcblx0ICB9XG5cdFxuXHQgIGlmIChmaXJzdENoYXIgPT09ICc/JyB8fCBmaXJzdENoYXIgPT09ICcjJykge1xuXHQgICAgcmV0dXJuIGJhc2UgKyByZWxhdGl2ZVxuXHQgIH1cblx0XG5cdCAgdmFyIHN0YWNrID0gYmFzZS5zcGxpdCgnLycpO1xuXHRcblx0ICAvLyByZW1vdmUgdHJhaWxpbmcgc2VnbWVudCBpZjpcblx0ICAvLyAtIG5vdCBhcHBlbmRpbmdcblx0ICAvLyAtIGFwcGVuZGluZyB0byB0cmFpbGluZyBzbGFzaCAobGFzdCBzZWdtZW50IGlzIGVtcHR5KVxuXHQgIGlmICghYXBwZW5kIHx8ICFzdGFja1tzdGFjay5sZW5ndGggLSAxXSkge1xuXHQgICAgc3RhY2sucG9wKCk7XG5cdCAgfVxuXHRcblx0ICAvLyByZXNvbHZlIHJlbGF0aXZlIHBhdGhcblx0ICB2YXIgc2VnbWVudHMgPSByZWxhdGl2ZS5yZXBsYWNlKC9eXFwvLywgJycpLnNwbGl0KCcvJyk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcblx0ICAgIGlmIChzZWdtZW50ID09PSAnLi4nKSB7XG5cdCAgICAgIHN0YWNrLnBvcCgpO1xuXHQgICAgfSBlbHNlIGlmIChzZWdtZW50ICE9PSAnLicpIHtcblx0ICAgICAgc3RhY2sucHVzaChzZWdtZW50KTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIGVuc3VyZSBsZWFkaW5nIHNsYXNoXG5cdCAgaWYgKHN0YWNrWzBdICE9PSAnJykge1xuXHQgICAgc3RhY2sudW5zaGlmdCgnJyk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gc3RhY2suam9pbignLycpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aCAocGF0aCkge1xuXHQgIHZhciBoYXNoID0gJyc7XG5cdCAgdmFyIHF1ZXJ5ID0gJyc7XG5cdFxuXHQgIHZhciBoYXNoSW5kZXggPSBwYXRoLmluZGV4T2YoJyMnKTtcblx0ICBpZiAoaGFzaEluZGV4ID49IDApIHtcblx0ICAgIGhhc2ggPSBwYXRoLnNsaWNlKGhhc2hJbmRleCk7XG5cdCAgICBwYXRoID0gcGF0aC5zbGljZSgwLCBoYXNoSW5kZXgpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHF1ZXJ5SW5kZXggPSBwYXRoLmluZGV4T2YoJz8nKTtcblx0ICBpZiAocXVlcnlJbmRleCA+PSAwKSB7XG5cdCAgICBxdWVyeSA9IHBhdGguc2xpY2UocXVlcnlJbmRleCArIDEpO1xuXHQgICAgcGF0aCA9IHBhdGguc2xpY2UoMCwgcXVlcnlJbmRleCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4ge1xuXHQgICAgcGF0aDogcGF0aCxcblx0ICAgIHF1ZXJ5OiBxdWVyeSxcblx0ICAgIGhhc2g6IGhhc2hcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNsZWFuUGF0aCAocGF0aCkge1xuXHQgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcL1xcLy9nLCAnLycpXG5cdH1cblx0XG5cdHZhciBpc2FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXhwb3NlIGBwYXRoVG9SZWdleHBgLlxuXHQgKi9cblx0dmFyIHBhdGhUb1JlZ2V4cF8xID0gcGF0aFRvUmVnZXhwO1xuXHR2YXIgcGFyc2VfMSA9IHBhcnNlO1xuXHR2YXIgY29tcGlsZV8xID0gY29tcGlsZTtcblx0dmFyIHRva2Vuc1RvRnVuY3Rpb25fMSA9IHRva2Vuc1RvRnVuY3Rpb247XG5cdHZhciB0b2tlbnNUb1JlZ0V4cF8xID0gdG9rZW5zVG9SZWdFeHA7XG5cdFxuXHQvKipcblx0ICogVGhlIG1haW4gcGF0aCBtYXRjaGluZyByZWdleHAgdXRpbGl0eS5cblx0ICpcblx0ICogQHR5cGUge1JlZ0V4cH1cblx0ICovXG5cdHZhciBQQVRIX1JFR0VYUCA9IG5ldyBSZWdFeHAoW1xuXHQgIC8vIE1hdGNoIGVzY2FwZWQgY2hhcmFjdGVycyB0aGF0IHdvdWxkIG90aGVyd2lzZSBhcHBlYXIgaW4gZnV0dXJlIG1hdGNoZXMuXG5cdCAgLy8gVGhpcyBhbGxvd3MgdGhlIHVzZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IHdvbid0IHRyYW5zZm9ybS5cblx0ICAnKFxcXFxcXFxcLiknLFxuXHQgIC8vIE1hdGNoIEV4cHJlc3Mtc3R5bGUgcGFyYW1ldGVycyBhbmQgdW4tbmFtZWQgcGFyYW1ldGVycyB3aXRoIGEgcHJlZml4XG5cdCAgLy8gYW5kIG9wdGlvbmFsIHN1ZmZpeGVzLiBNYXRjaGVzIGFwcGVhciBhczpcblx0ICAvL1xuXHQgIC8vIFwiLzp0ZXN0KFxcXFxkKyk/XCIgPT4gW1wiL1wiLCBcInRlc3RcIiwgXCJcXGQrXCIsIHVuZGVmaW5lZCwgXCI/XCIsIHVuZGVmaW5lZF1cblx0ICAvLyBcIi9yb3V0ZShcXFxcZCspXCIgID0+IFt1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG5cdCAgLy8gXCIvKlwiICAgICAgICAgICAgPT4gW1wiL1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFwiKlwiXVxuXHQgICcoW1xcXFwvLl0pPyg/Oig/OlxcXFw6KFxcXFx3KykoPzpcXFxcKCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpXSkrKVxcXFwpKT98XFxcXCgoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKV0pKylcXFxcKSkoWysqP10pP3woXFxcXCopKSdcblx0XS5qb2luKCd8JyksICdnJyk7XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSBzdHJpbmcgZm9yIHRoZSByYXcgdG9rZW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9ICBzdHJcblx0ICogQHBhcmFtICB7T2JqZWN0PX0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHshQXJyYXl9XG5cdCAqL1xuXHRmdW5jdGlvbiBwYXJzZSAoc3RyLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRva2VucyA9IFtdO1xuXHQgIHZhciBrZXkgPSAwO1xuXHQgIHZhciBpbmRleCA9IDA7XG5cdCAgdmFyIHBhdGggPSAnJztcblx0ICB2YXIgZGVmYXVsdERlbGltaXRlciA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWxpbWl0ZXIgfHwgJy8nO1xuXHQgIHZhciByZXM7XG5cdFxuXHQgIHdoaWxlICgocmVzID0gUEFUSF9SRUdFWFAuZXhlYyhzdHIpKSAhPSBudWxsKSB7XG5cdCAgICB2YXIgbSA9IHJlc1swXTtcblx0ICAgIHZhciBlc2NhcGVkID0gcmVzWzFdO1xuXHQgICAgdmFyIG9mZnNldCA9IHJlcy5pbmRleDtcblx0ICAgIHBhdGggKz0gc3RyLnNsaWNlKGluZGV4LCBvZmZzZXQpO1xuXHQgICAgaW5kZXggPSBvZmZzZXQgKyBtLmxlbmd0aDtcblx0XG5cdCAgICAvLyBJZ25vcmUgYWxyZWFkeSBlc2NhcGVkIHNlcXVlbmNlcy5cblx0ICAgIGlmIChlc2NhcGVkKSB7XG5cdCAgICAgIHBhdGggKz0gZXNjYXBlZFsxXTtcblx0ICAgICAgY29udGludWVcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV4dCA9IHN0cltpbmRleF07XG5cdCAgICB2YXIgcHJlZml4ID0gcmVzWzJdO1xuXHQgICAgdmFyIG5hbWUgPSByZXNbM107XG5cdCAgICB2YXIgY2FwdHVyZSA9IHJlc1s0XTtcblx0ICAgIHZhciBncm91cCA9IHJlc1s1XTtcblx0ICAgIHZhciBtb2RpZmllciA9IHJlc1s2XTtcblx0ICAgIHZhciBhc3RlcmlzayA9IHJlc1s3XTtcblx0XG5cdCAgICAvLyBQdXNoIHRoZSBjdXJyZW50IHBhdGggb250byB0aGUgdG9rZW5zLlxuXHQgICAgaWYgKHBhdGgpIHtcblx0ICAgICAgdG9rZW5zLnB1c2gocGF0aCk7XG5cdCAgICAgIHBhdGggPSAnJztcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcGFydGlhbCA9IHByZWZpeCAhPSBudWxsICYmIG5leHQgIT0gbnVsbCAmJiBuZXh0ICE9PSBwcmVmaXg7XG5cdCAgICB2YXIgcmVwZWF0ID0gbW9kaWZpZXIgPT09ICcrJyB8fCBtb2RpZmllciA9PT0gJyonO1xuXHQgICAgdmFyIG9wdGlvbmFsID0gbW9kaWZpZXIgPT09ICc/JyB8fCBtb2RpZmllciA9PT0gJyonO1xuXHQgICAgdmFyIGRlbGltaXRlciA9IHJlc1syXSB8fCBkZWZhdWx0RGVsaW1pdGVyO1xuXHQgICAgdmFyIHBhdHRlcm4gPSBjYXB0dXJlIHx8IGdyb3VwO1xuXHRcblx0ICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgbmFtZTogbmFtZSB8fCBrZXkrKyxcblx0ICAgICAgcHJlZml4OiBwcmVmaXggfHwgJycsXG5cdCAgICAgIGRlbGltaXRlcjogZGVsaW1pdGVyLFxuXHQgICAgICBvcHRpb25hbDogb3B0aW9uYWwsXG5cdCAgICAgIHJlcGVhdDogcmVwZWF0LFxuXHQgICAgICBwYXJ0aWFsOiBwYXJ0aWFsLFxuXHQgICAgICBhc3RlcmlzazogISFhc3Rlcmlzayxcblx0ICAgICAgcGF0dGVybjogcGF0dGVybiA/IGVzY2FwZUdyb3VwKHBhdHRlcm4pIDogKGFzdGVyaXNrID8gJy4qJyA6ICdbXicgKyBlc2NhcGVTdHJpbmcoZGVsaW1pdGVyKSArICddKz8nKVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvLyBNYXRjaCBhbnkgY2hhcmFjdGVycyBzdGlsbCByZW1haW5pbmcuXG5cdCAgaWYgKGluZGV4IDwgc3RyLmxlbmd0aCkge1xuXHQgICAgcGF0aCArPSBzdHIuc3Vic3RyKGluZGV4KTtcblx0ICB9XG5cdFxuXHQgIC8vIElmIHRoZSBwYXRoIGV4aXN0cywgcHVzaCBpdCBvbnRvIHRoZSBlbmQuXG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIHRva2Vucy5wdXNoKHBhdGgpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRva2Vuc1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHN0cmluZyB0byBhIHRlbXBsYXRlIGZ1bmN0aW9uIGZvciB0aGUgcGF0aC5cblx0ICpcblx0ICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgICBzdHJcblx0ICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICAgICBvcHRpb25zXG5cdCAqIEByZXR1cm4geyFmdW5jdGlvbihPYmplY3Q9LCBPYmplY3Q9KX1cblx0ICovXG5cdGZ1bmN0aW9uIGNvbXBpbGUgKHN0ciwgb3B0aW9ucykge1xuXHQgIHJldHVybiB0b2tlbnNUb0Z1bmN0aW9uKHBhcnNlKHN0ciwgb3B0aW9ucykpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcmV0dGllciBlbmNvZGluZyBvZiBVUkkgcGF0aCBzZWdtZW50cy5cblx0ICpcblx0ICogQHBhcmFtICB7c3RyaW5nfVxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBlbmNvZGVVUklDb21wb25lbnRQcmV0dHkgKHN0cikge1xuXHQgIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bXFwvPyNdL2csIGZ1bmN0aW9uIChjKSB7XG5cdCAgICByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG5cdCAgfSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuY29kZSB0aGUgYXN0ZXJpc2sgcGFyYW1ldGVyLiBTaW1pbGFyIHRvIGBwcmV0dHlgLCBidXQgYWxsb3dzIHNsYXNoZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ31cblx0ICogQHJldHVybiB7c3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gZW5jb2RlQXN0ZXJpc2sgKHN0cikge1xuXHQgIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uIChjKSB7XG5cdCAgICByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG5cdCAgfSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4cG9zZSBhIG1ldGhvZCBmb3IgdHJhbnNmb3JtaW5nIHRva2VucyBpbnRvIHRoZSBwYXRoIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9rZW5zVG9GdW5jdGlvbiAodG9rZW5zKSB7XG5cdCAgLy8gQ29tcGlsZSBhbGwgdGhlIHRva2VucyBpbnRvIHJlZ2V4cHMuXG5cdCAgdmFyIG1hdGNoZXMgPSBuZXcgQXJyYXkodG9rZW5zLmxlbmd0aCk7XG5cdFxuXHQgIC8vIENvbXBpbGUgYWxsIHRoZSBwYXR0ZXJucyBiZWZvcmUgY29tcGlsYXRpb24uXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmICh0eXBlb2YgdG9rZW5zW2ldID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBtYXRjaGVzW2ldID0gbmV3IFJlZ0V4cCgnXig/OicgKyB0b2tlbnNbaV0ucGF0dGVybiArICcpJCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChvYmosIG9wdHMpIHtcblx0ICAgIHZhciBwYXRoID0gJyc7XG5cdCAgICB2YXIgZGF0YSA9IG9iaiB8fCB7fTtcblx0ICAgIHZhciBvcHRpb25zID0gb3B0cyB8fCB7fTtcblx0ICAgIHZhciBlbmNvZGUgPSBvcHRpb25zLnByZXR0eSA/IGVuY29kZVVSSUNvbXBvbmVudFByZXR0eSA6IGVuY29kZVVSSUNvbXBvbmVudDtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHBhdGggKz0gdG9rZW47XG5cdFxuXHQgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciB2YWx1ZSA9IGRhdGFbdG9rZW4ubmFtZV07XG5cdCAgICAgIHZhciBzZWdtZW50O1xuXHRcblx0ICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcblx0ICAgICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcblx0ICAgICAgICAgIC8vIFByZXBlbmQgcGFydGlhbCBzZWdtZW50IHByZWZpeGVzLlxuXHQgICAgICAgICAgaWYgKHRva2VuLnBhcnRpYWwpIHtcblx0ICAgICAgICAgICAgcGF0aCArPSB0b2tlbi5wcmVmaXg7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgY29udGludWVcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBiZSBkZWZpbmVkJylcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChpc2FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgIGlmICghdG9rZW4ucmVwZWF0KSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG5vdCByZXBlYXQsIGJ1dCByZWNlaXZlZCBgJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICdgJylcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgIGlmICh0b2tlbi5vcHRpb25hbCkge1xuXHQgICAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBub3QgYmUgZW1wdHknKVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWx1ZS5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgc2VnbWVudCA9IGVuY29kZSh2YWx1ZVtqXSk7XG5cdFxuXHQgICAgICAgICAgaWYgKCFtYXRjaGVzW2ldLnRlc3Qoc2VnbWVudCkpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYWxsIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbWF0Y2ggXCInICsgdG9rZW4ucGF0dGVybiArICdcIiwgYnV0IHJlY2VpdmVkIGAnICsgSlNPTi5zdHJpbmdpZnkoc2VnbWVudCkgKyAnYCcpXG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgcGF0aCArPSAoaiA9PT0gMCA/IHRva2VuLnByZWZpeCA6IHRva2VuLmRlbGltaXRlcikgKyBzZWdtZW50O1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY29udGludWVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgc2VnbWVudCA9IHRva2VuLmFzdGVyaXNrID8gZW5jb2RlQXN0ZXJpc2sodmFsdWUpIDogZW5jb2RlKHZhbHVlKTtcblx0XG5cdCAgICAgIGlmICghbWF0Y2hlc1tpXS50ZXN0KHNlZ21lbnQpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBtYXRjaCBcIicgKyB0b2tlbi5wYXR0ZXJuICsgJ1wiLCBidXQgcmVjZWl2ZWQgXCInICsgc2VnbWVudCArICdcIicpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHBhdGggKz0gdG9rZW4ucHJlZml4ICsgc2VnbWVudDtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcGF0aFxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEVzY2FwZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGVzY2FwZVN0cmluZyAoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4rKj89XiE6JHt9KClbXFxdfFxcL1xcXFxdKS9nLCAnXFxcXCQxJylcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVzY2FwZSB0aGUgY2FwdHVyaW5nIGdyb3VwIGJ5IGVzY2FwaW5nIHNwZWNpYWwgY2hhcmFjdGVycyBhbmQgbWVhbmluZy5cblx0ICpcblx0ICogQHBhcmFtICB7c3RyaW5nfSBncm91cFxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBlc2NhcGVHcm91cCAoZ3JvdXApIHtcblx0ICByZXR1cm4gZ3JvdXAucmVwbGFjZSgvKFs9ITokXFwvKCldKS9nLCAnXFxcXCQxJylcblx0fVxuXHRcblx0LyoqXG5cdCAqIEF0dGFjaCB0aGUga2V5cyBhcyBhIHByb3BlcnR5IG9mIHRoZSByZWdleHAuXG5cdCAqXG5cdCAqIEBwYXJhbSAgeyFSZWdFeHB9IHJlXG5cdCAqIEBwYXJhbSAge0FycmF5fSAgIGtleXNcblx0ICogQHJldHVybiB7IVJlZ0V4cH1cblx0ICovXG5cdGZ1bmN0aW9uIGF0dGFjaEtleXMgKHJlLCBrZXlzKSB7XG5cdCAgcmUua2V5cyA9IGtleXM7XG5cdCAgcmV0dXJuIHJlXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIGZsYWdzIGZvciBhIHJlZ2V4cCBmcm9tIHRoZSBvcHRpb25zLlxuXHQgKlxuXHQgKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7c3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gZmxhZ3MgKG9wdGlvbnMpIHtcblx0ICByZXR1cm4gb3B0aW9ucy5zZW5zaXRpdmUgPyAnJyA6ICdpJ1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHVsbCBvdXQga2V5cyBmcm9tIGEgcmVnZXhwLlxuXHQgKlxuXHQgKiBAcGFyYW0gIHshUmVnRXhwfSBwYXRoXG5cdCAqIEBwYXJhbSAgeyFBcnJheX0gIGtleXNcblx0ICogQHJldHVybiB7IVJlZ0V4cH1cblx0ICovXG5cdGZ1bmN0aW9uIHJlZ2V4cFRvUmVnZXhwIChwYXRoLCBrZXlzKSB7XG5cdCAgLy8gVXNlIGEgbmVnYXRpdmUgbG9va2FoZWFkIHRvIG1hdGNoIG9ubHkgY2FwdHVyaW5nIGdyb3Vwcy5cblx0ICB2YXIgZ3JvdXBzID0gcGF0aC5zb3VyY2UubWF0Y2goL1xcKCg/IVxcPykvZyk7XG5cdFxuXHQgIGlmIChncm91cHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGtleXMucHVzaCh7XG5cdCAgICAgICAgbmFtZTogaSxcblx0ICAgICAgICBwcmVmaXg6IG51bGwsXG5cdCAgICAgICAgZGVsaW1pdGVyOiBudWxsLFxuXHQgICAgICAgIG9wdGlvbmFsOiBmYWxzZSxcblx0ICAgICAgICByZXBlYXQ6IGZhbHNlLFxuXHQgICAgICAgIHBhcnRpYWw6IGZhbHNlLFxuXHQgICAgICAgIGFzdGVyaXNrOiBmYWxzZSxcblx0ICAgICAgICBwYXR0ZXJuOiBudWxsXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGF0dGFjaEtleXMocGF0aCwga2V5cylcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyYW5zZm9ybSBhbiBhcnJheSBpbnRvIGEgcmVnZXhwLlxuXHQgKlxuXHQgKiBAcGFyYW0gIHshQXJyYXl9ICBwYXRoXG5cdCAqIEBwYXJhbSAge0FycmF5fSAgIGtleXNcblx0ICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHshUmVnRXhwfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyYXlUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuXHQgIHZhciBwYXJ0cyA9IFtdO1xuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcblx0ICAgIHBhcnRzLnB1c2gocGF0aFRvUmVnZXhwKHBhdGhbaV0sIGtleXMsIG9wdGlvbnMpLnNvdXJjZSk7XG5cdCAgfVxuXHRcblx0ICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgnKD86JyArIHBhcnRzLmpvaW4oJ3wnKSArICcpJywgZmxhZ3Mob3B0aW9ucykpO1xuXHRcblx0ICByZXR1cm4gYXR0YWNoS2V5cyhyZWdleHAsIGtleXMpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBwYXRoIHJlZ2V4cCBmcm9tIHN0cmluZyBpbnB1dC5cblx0ICpcblx0ICogQHBhcmFtICB7c3RyaW5nfSAgcGF0aFxuXHQgKiBAcGFyYW0gIHshQXJyYXl9ICBrZXlzXG5cdCAqIEBwYXJhbSAgeyFPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7IVJlZ0V4cH1cblx0ICovXG5cdGZ1bmN0aW9uIHN0cmluZ1RvUmVnZXhwIChwYXRoLCBrZXlzLCBvcHRpb25zKSB7XG5cdCAgcmV0dXJuIHRva2Vuc1RvUmVnRXhwKHBhcnNlKHBhdGgsIG9wdGlvbnMpLCBrZXlzLCBvcHRpb25zKVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXhwb3NlIGEgZnVuY3Rpb24gZm9yIHRha2luZyB0b2tlbnMgYW5kIHJldHVybmluZyBhIFJlZ0V4cC5cblx0ICpcblx0ICogQHBhcmFtICB7IUFycmF5fSAgICAgICAgICB0b2tlbnNcblx0ICogQHBhcmFtICB7KEFycmF5fE9iamVjdCk9fSBrZXlzXG5cdCAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHshUmVnRXhwfVxuXHQgKi9cblx0ZnVuY3Rpb24gdG9rZW5zVG9SZWdFeHAgKHRva2Vucywga2V5cywgb3B0aW9ucykge1xuXHQgIGlmICghaXNhcnJheShrZXlzKSkge1xuXHQgICAgb3B0aW9ucyA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGtleXMgfHwgb3B0aW9ucyk7XG5cdCAgICBrZXlzID0gW107XG5cdCAgfVxuXHRcblx0ICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgdmFyIHN0cmljdCA9IG9wdGlvbnMuc3RyaWN0O1xuXHQgIHZhciBlbmQgPSBvcHRpb25zLmVuZCAhPT0gZmFsc2U7XG5cdCAgdmFyIHJvdXRlID0gJyc7XG5cdFxuXHQgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgdG9rZW5zIGFuZCBjcmVhdGUgb3VyIHJlZ2V4cCBzdHJpbmcuXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXTtcblx0XG5cdCAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuXHQgICAgICByb3V0ZSArPSBlc2NhcGVTdHJpbmcodG9rZW4pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHByZWZpeCA9IGVzY2FwZVN0cmluZyh0b2tlbi5wcmVmaXgpO1xuXHQgICAgICB2YXIgY2FwdHVyZSA9ICcoPzonICsgdG9rZW4ucGF0dGVybiArICcpJztcblx0XG5cdCAgICAgIGtleXMucHVzaCh0b2tlbik7XG5cdFxuXHQgICAgICBpZiAodG9rZW4ucmVwZWF0KSB7XG5cdCAgICAgICAgY2FwdHVyZSArPSAnKD86JyArIHByZWZpeCArIGNhcHR1cmUgKyAnKSonO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcblx0ICAgICAgICBpZiAoIXRva2VuLnBhcnRpYWwpIHtcblx0ICAgICAgICAgIGNhcHR1cmUgPSAnKD86JyArIHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKSk/Jztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY2FwdHVyZSA9IHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKT8nO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjYXB0dXJlID0gcHJlZml4ICsgJygnICsgY2FwdHVyZSArICcpJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcm91dGUgKz0gY2FwdHVyZTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBkZWxpbWl0ZXIgPSBlc2NhcGVTdHJpbmcob3B0aW9ucy5kZWxpbWl0ZXIgfHwgJy8nKTtcblx0ICB2YXIgZW5kc1dpdGhEZWxpbWl0ZXIgPSByb3V0ZS5zbGljZSgtZGVsaW1pdGVyLmxlbmd0aCkgPT09IGRlbGltaXRlcjtcblx0XG5cdCAgLy8gSW4gbm9uLXN0cmljdCBtb2RlIHdlIGFsbG93IGEgc2xhc2ggYXQgdGhlIGVuZCBvZiBtYXRjaC4gSWYgdGhlIHBhdGggdG9cblx0ICAvLyBtYXRjaCBhbHJlYWR5IGVuZHMgd2l0aCBhIHNsYXNoLCB3ZSByZW1vdmUgaXQgZm9yIGNvbnNpc3RlbmN5LiBUaGUgc2xhc2hcblx0ICAvLyBpcyB2YWxpZCBhdCB0aGUgZW5kIG9mIGEgcGF0aCBtYXRjaCwgbm90IGluIHRoZSBtaWRkbGUuIFRoaXMgaXMgaW1wb3J0YW50XG5cdCAgLy8gaW4gbm9uLWVuZGluZyBtb2RlLCB3aGVyZSBcIi90ZXN0L1wiIHNob3VsZG4ndCBtYXRjaCBcIi90ZXN0Ly9yb3V0ZVwiLlxuXHQgIGlmICghc3RyaWN0KSB7XG5cdCAgICByb3V0ZSA9IChlbmRzV2l0aERlbGltaXRlciA/IHJvdXRlLnNsaWNlKDAsIC1kZWxpbWl0ZXIubGVuZ3RoKSA6IHJvdXRlKSArICcoPzonICsgZGVsaW1pdGVyICsgJyg/PSQpKT8nO1xuXHQgIH1cblx0XG5cdCAgaWYgKGVuZCkge1xuXHQgICAgcm91dGUgKz0gJyQnO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBJbiBub24tZW5kaW5nIG1vZGUsIHdlIG5lZWQgdGhlIGNhcHR1cmluZyBncm91cHMgdG8gbWF0Y2ggYXMgbXVjaCBhc1xuXHQgICAgLy8gcG9zc2libGUgYnkgdXNpbmcgYSBwb3NpdGl2ZSBsb29rYWhlYWQgdG8gdGhlIGVuZCBvciBuZXh0IHBhdGggc2VnbWVudC5cblx0ICAgIHJvdXRlICs9IHN0cmljdCAmJiBlbmRzV2l0aERlbGltaXRlciA/ICcnIDogJyg/PScgKyBkZWxpbWl0ZXIgKyAnfCQpJztcblx0ICB9XG5cdFxuXHQgIHJldHVybiBhdHRhY2hLZXlzKG5ldyBSZWdFeHAoJ14nICsgcm91dGUsIGZsYWdzKG9wdGlvbnMpKSwga2V5cylcblx0fVxuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSB0aGUgZ2l2ZW4gcGF0aCBzdHJpbmcsIHJldHVybmluZyBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cblx0ICpcblx0ICogQW4gZW1wdHkgYXJyYXkgY2FuIGJlIHBhc3NlZCBpbiBmb3IgdGhlIGtleXMsIHdoaWNoIHdpbGwgaG9sZCB0aGVcblx0ICogcGxhY2Vob2xkZXIga2V5IGRlc2NyaXB0aW9ucy4gRm9yIGV4YW1wbGUsIHVzaW5nIGAvdXNlci86aWRgLCBga2V5c2Agd2lsbFxuXHQgKiBjb250YWluIGBbeyBuYW1lOiAnaWQnLCBkZWxpbWl0ZXI6ICcvJywgb3B0aW9uYWw6IGZhbHNlLCByZXBlYXQ6IGZhbHNlIH1dYC5cblx0ICpcblx0ICogQHBhcmFtICB7KHN0cmluZ3xSZWdFeHB8QXJyYXkpfSBwYXRoXG5cdCAqIEBwYXJhbSAgeyhBcnJheXxPYmplY3QpPX0gICAgICAga2V5c1xuXHQgKiBAcGFyYW0gIHtPYmplY3Q9fSAgICAgICAgICAgICAgIG9wdGlvbnNcblx0ICogQHJldHVybiB7IVJlZ0V4cH1cblx0ICovXG5cdGZ1bmN0aW9uIHBhdGhUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuXHQgIGlmICghaXNhcnJheShrZXlzKSkge1xuXHQgICAgb3B0aW9ucyA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGtleXMgfHwgb3B0aW9ucyk7XG5cdCAgICBrZXlzID0gW107XG5cdCAgfVxuXHRcblx0ICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgaWYgKHBhdGggaW5zdGFuY2VvZiBSZWdFeHApIHtcblx0ICAgIHJldHVybiByZWdleHBUb1JlZ2V4cChwYXRoLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpKVxuXHQgIH1cblx0XG5cdCAgaWYgKGlzYXJyYXkocGF0aCkpIHtcblx0ICAgIHJldHVybiBhcnJheVRvUmVnZXhwKC8qKiBAdHlwZSB7IUFycmF5fSAqLyAocGF0aCksIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cyksIG9wdGlvbnMpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gc3RyaW5nVG9SZWdleHAoLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwYXRoKSwgLyoqIEB0eXBlIHshQXJyYXl9ICovIChrZXlzKSwgb3B0aW9ucylcblx0fVxuXHRcblx0cGF0aFRvUmVnZXhwXzEucGFyc2UgPSBwYXJzZV8xO1xuXHRwYXRoVG9SZWdleHBfMS5jb21waWxlID0gY29tcGlsZV8xO1xuXHRwYXRoVG9SZWdleHBfMS50b2tlbnNUb0Z1bmN0aW9uID0gdG9rZW5zVG9GdW5jdGlvbl8xO1xuXHRwYXRoVG9SZWdleHBfMS50b2tlbnNUb1JlZ0V4cCA9IHRva2Vuc1RvUmVnRXhwXzE7XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vICRmbG93LWRpc2FibGUtbGluZVxuXHR2YXIgcmVnZXhwQ29tcGlsZUNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdGZ1bmN0aW9uIGZpbGxQYXJhbXMgKFxuXHQgIHBhdGgsXG5cdCAgcGFyYW1zLFxuXHQgIHJvdXRlTXNnXG5cdCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgZmlsbGVyID1cblx0ICAgICAgcmVnZXhwQ29tcGlsZUNhY2hlW3BhdGhdIHx8XG5cdCAgICAgIChyZWdleHBDb21waWxlQ2FjaGVbcGF0aF0gPSBwYXRoVG9SZWdleHBfMS5jb21waWxlKHBhdGgpKTtcblx0ICAgIHJldHVybiBmaWxsZXIocGFyYW1zIHx8IHt9LCB7IHByZXR0eTogdHJ1ZSB9KVxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHdhcm4oZmFsc2UsIChcIm1pc3NpbmcgcGFyYW0gZm9yIFwiICsgcm91dGVNc2cgKyBcIjogXCIgKyAoZS5tZXNzYWdlKSkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICcnXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVJvdXRlTWFwIChcblx0ICByb3V0ZXMsXG5cdCAgb2xkUGF0aExpc3QsXG5cdCAgb2xkUGF0aE1hcCxcblx0ICBvbGROYW1lTWFwXG5cdCkge1xuXHQgIC8vIHRoZSBwYXRoIGxpc3QgaXMgdXNlZCB0byBjb250cm9sIHBhdGggbWF0Y2hpbmcgcHJpb3JpdHlcblx0ICB2YXIgcGF0aExpc3QgPSBvbGRQYXRoTGlzdCB8fCBbXTtcblx0ICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICB2YXIgcGF0aE1hcCA9IG9sZFBhdGhNYXAgfHwgT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICB2YXIgbmFtZU1hcCA9IG9sZE5hbWVNYXAgfHwgT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdCAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICBhZGRSb3V0ZVJlY29yZChwYXRoTGlzdCwgcGF0aE1hcCwgbmFtZU1hcCwgcm91dGUpO1xuXHQgIH0pO1xuXHRcblx0ICAvLyBlbnN1cmUgd2lsZGNhcmQgcm91dGVzIGFyZSBhbHdheXMgYXQgdGhlIGVuZFxuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gcGF0aExpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpZiAocGF0aExpc3RbaV0gPT09ICcqJykge1xuXHQgICAgICBwYXRoTGlzdC5wdXNoKHBhdGhMaXN0LnNwbGljZShpLCAxKVswXSk7XG5cdCAgICAgIGwtLTtcblx0ICAgICAgaS0tO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIHBhdGhMaXN0OiBwYXRoTGlzdCxcblx0ICAgIHBhdGhNYXA6IHBhdGhNYXAsXG5cdCAgICBuYW1lTWFwOiBuYW1lTWFwXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRSb3V0ZVJlY29yZCAoXG5cdCAgcGF0aExpc3QsXG5cdCAgcGF0aE1hcCxcblx0ICBuYW1lTWFwLFxuXHQgIHJvdXRlLFxuXHQgIHBhcmVudCxcblx0ICBtYXRjaEFzXG5cdCkge1xuXHQgIHZhciBwYXRoID0gcm91dGUucGF0aDtcblx0ICB2YXIgbmFtZSA9IHJvdXRlLm5hbWU7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGFzc2VydChwYXRoICE9IG51bGwsIFwiXFxcInBhdGhcXFwiIGlzIHJlcXVpcmVkIGluIGEgcm91dGUgY29uZmlndXJhdGlvbi5cIik7XG5cdCAgICBhc3NlcnQoXG5cdCAgICAgIHR5cGVvZiByb3V0ZS5jb21wb25lbnQgIT09ICdzdHJpbmcnLFxuXHQgICAgICBcInJvdXRlIGNvbmZpZyBcXFwiY29tcG9uZW50XFxcIiBmb3IgcGF0aDogXCIgKyAoU3RyaW5nKHBhdGggfHwgbmFtZSkpICsgXCIgY2Fubm90IGJlIGEgXCIgK1xuXHQgICAgICBcInN0cmluZyBpZC4gVXNlIGFuIGFjdHVhbCBjb21wb25lbnQgaW5zdGVhZC5cIlxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIHZhciBwYXRoVG9SZWdleHBPcHRpb25zID0gcm91dGUucGF0aFRvUmVnZXhwT3B0aW9ucyB8fCB7fTtcblx0ICB2YXIgbm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVQYXRoKFxuXHQgICAgcGF0aCxcblx0ICAgIHBhcmVudCxcblx0ICAgIHBhdGhUb1JlZ2V4cE9wdGlvbnMuc3RyaWN0XG5cdCAgKTtcblx0XG5cdCAgaWYgKHR5cGVvZiByb3V0ZS5jYXNlU2Vuc2l0aXZlID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHBhdGhUb1JlZ2V4cE9wdGlvbnMuc2Vuc2l0aXZlID0gcm91dGUuY2FzZVNlbnNpdGl2ZTtcblx0ICB9XG5cdFxuXHQgIHZhciByZWNvcmQgPSB7XG5cdCAgICBwYXRoOiBub3JtYWxpemVkUGF0aCxcblx0ICAgIHJlZ2V4OiBjb21waWxlUm91dGVSZWdleChub3JtYWxpemVkUGF0aCwgcGF0aFRvUmVnZXhwT3B0aW9ucyksXG5cdCAgICBjb21wb25lbnRzOiByb3V0ZS5jb21wb25lbnRzIHx8IHsgZGVmYXVsdDogcm91dGUuY29tcG9uZW50IH0sXG5cdCAgICBpbnN0YW5jZXM6IHt9LFxuXHQgICAgbmFtZTogbmFtZSxcblx0ICAgIHBhcmVudDogcGFyZW50LFxuXHQgICAgbWF0Y2hBczogbWF0Y2hBcyxcblx0ICAgIHJlZGlyZWN0OiByb3V0ZS5yZWRpcmVjdCxcblx0ICAgIGJlZm9yZUVudGVyOiByb3V0ZS5iZWZvcmVFbnRlcixcblx0ICAgIG1ldGE6IHJvdXRlLm1ldGEgfHwge30sXG5cdCAgICBwcm9wczogcm91dGUucHJvcHMgPT0gbnVsbFxuXHQgICAgICA/IHt9XG5cdCAgICAgIDogcm91dGUuY29tcG9uZW50c1xuXHQgICAgICAgID8gcm91dGUucHJvcHNcblx0ICAgICAgICA6IHsgZGVmYXVsdDogcm91dGUucHJvcHMgfVxuXHQgIH07XG5cdFxuXHQgIGlmIChyb3V0ZS5jaGlsZHJlbikge1xuXHQgICAgLy8gV2FybiBpZiByb3V0ZSBpcyBuYW1lZCwgZG9lcyBub3QgcmVkaXJlY3QgYW5kIGhhcyBhIGRlZmF1bHQgY2hpbGQgcm91dGUuXG5cdCAgICAvLyBJZiB1c2VycyBuYXZpZ2F0ZSB0byB0aGlzIHJvdXRlIGJ5IG5hbWUsIHRoZSBkZWZhdWx0IGNoaWxkIHdpbGxcblx0ICAgIC8vIG5vdCBiZSByZW5kZXJlZCAoR0ggSXNzdWUgIzYyOSlcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGlmIChyb3V0ZS5uYW1lICYmICFyb3V0ZS5yZWRpcmVjdCAmJiByb3V0ZS5jaGlsZHJlbi5zb21lKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gL15cXC8/JC8udGVzdChjaGlsZC5wYXRoKTsgfSkpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgZmFsc2UsXG5cdCAgICAgICAgICBcIk5hbWVkIFJvdXRlICdcIiArIChyb3V0ZS5uYW1lKSArIFwiJyBoYXMgYSBkZWZhdWx0IGNoaWxkIHJvdXRlLiBcIiArXG5cdCAgICAgICAgICBcIldoZW4gbmF2aWdhdGluZyB0byB0aGlzIG5hbWVkIHJvdXRlICg6dG89XFxcIntuYW1lOiAnXCIgKyAocm91dGUubmFtZSkgKyBcIidcXFwiKSwgXCIgK1xuXHQgICAgICAgICAgXCJ0aGUgZGVmYXVsdCBjaGlsZCByb3V0ZSB3aWxsIG5vdCBiZSByZW5kZXJlZC4gUmVtb3ZlIHRoZSBuYW1lIGZyb20gXCIgK1xuXHQgICAgICAgICAgXCJ0aGlzIHJvdXRlIGFuZCB1c2UgdGhlIG5hbWUgb2YgdGhlIGRlZmF1bHQgY2hpbGQgcm91dGUgZm9yIG5hbWVkIFwiICtcblx0ICAgICAgICAgIFwibGlua3MgaW5zdGVhZC5cIlxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJvdXRlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG5cdCAgICAgIHZhciBjaGlsZE1hdGNoQXMgPSBtYXRjaEFzXG5cdCAgICAgICAgPyBjbGVhblBhdGgoKG1hdGNoQXMgKyBcIi9cIiArIChjaGlsZC5wYXRoKSkpXG5cdCAgICAgICAgOiB1bmRlZmluZWQ7XG5cdCAgICAgIGFkZFJvdXRlUmVjb3JkKHBhdGhMaXN0LCBwYXRoTWFwLCBuYW1lTWFwLCBjaGlsZCwgcmVjb3JkLCBjaGlsZE1hdGNoQXMpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAocm91dGUuYWxpYXMgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgdmFyIGFsaWFzZXMgPSBBcnJheS5pc0FycmF5KHJvdXRlLmFsaWFzKVxuXHQgICAgICA/IHJvdXRlLmFsaWFzXG5cdCAgICAgIDogW3JvdXRlLmFsaWFzXTtcblx0XG5cdCAgICBhbGlhc2VzLmZvckVhY2goZnVuY3Rpb24gKGFsaWFzKSB7XG5cdCAgICAgIHZhciBhbGlhc1JvdXRlID0ge1xuXHQgICAgICAgIHBhdGg6IGFsaWFzLFxuXHQgICAgICAgIGNoaWxkcmVuOiByb3V0ZS5jaGlsZHJlblxuXHQgICAgICB9O1xuXHQgICAgICBhZGRSb3V0ZVJlY29yZChcblx0ICAgICAgICBwYXRoTGlzdCxcblx0ICAgICAgICBwYXRoTWFwLFxuXHQgICAgICAgIG5hbWVNYXAsXG5cdCAgICAgICAgYWxpYXNSb3V0ZSxcblx0ICAgICAgICBwYXJlbnQsXG5cdCAgICAgICAgcmVjb3JkLnBhdGggfHwgJy8nIC8vIG1hdGNoQXNcblx0ICAgICAgKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKCFwYXRoTWFwW3JlY29yZC5wYXRoXSkge1xuXHQgICAgcGF0aExpc3QucHVzaChyZWNvcmQucGF0aCk7XG5cdCAgICBwYXRoTWFwW3JlY29yZC5wYXRoXSA9IHJlY29yZDtcblx0ICB9XG5cdFxuXHQgIGlmIChuYW1lKSB7XG5cdCAgICBpZiAoIW5hbWVNYXBbbmFtZV0pIHtcblx0ICAgICAgbmFtZU1hcFtuYW1lXSA9IHJlY29yZDtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhbWF0Y2hBcykge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgIGZhbHNlLFxuXHQgICAgICAgIFwiRHVwbGljYXRlIG5hbWVkIHJvdXRlcyBkZWZpbml0aW9uOiBcIiArXG5cdCAgICAgICAgXCJ7IG5hbWU6IFxcXCJcIiArIG5hbWUgKyBcIlxcXCIsIHBhdGg6IFxcXCJcIiArIChyZWNvcmQucGF0aCkgKyBcIlxcXCIgfVwiXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUm91dGVSZWdleCAocGF0aCwgcGF0aFRvUmVnZXhwT3B0aW9ucykge1xuXHQgIHZhciByZWdleCA9IHBhdGhUb1JlZ2V4cF8xKHBhdGgsIFtdLCBwYXRoVG9SZWdleHBPcHRpb25zKTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgICAgcmVnZXgua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgd2Fybigha2V5c1trZXkubmFtZV0sIChcIkR1cGxpY2F0ZSBwYXJhbSBrZXlzIGluIHJvdXRlIHdpdGggcGF0aDogXFxcIlwiICsgcGF0aCArIFwiXFxcIlwiKSk7XG5cdCAgICAgIGtleXNba2V5Lm5hbWVdID0gdHJ1ZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0ICByZXR1cm4gcmVnZXhcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplUGF0aCAocGF0aCwgcGFyZW50LCBzdHJpY3QpIHtcblx0ICBpZiAoIXN0cmljdCkgeyBwYXRoID0gcGF0aC5yZXBsYWNlKC9cXC8kLywgJycpOyB9XG5cdCAgaWYgKHBhdGhbMF0gPT09ICcvJykgeyByZXR1cm4gcGF0aCB9XG5cdCAgaWYgKHBhcmVudCA9PSBudWxsKSB7IHJldHVybiBwYXRoIH1cblx0ICByZXR1cm4gY2xlYW5QYXRoKCgocGFyZW50LnBhdGgpICsgXCIvXCIgKyBwYXRoKSlcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplTG9jYXRpb24gKFxuXHQgIHJhdyxcblx0ICBjdXJyZW50LFxuXHQgIGFwcGVuZCxcblx0ICByb3V0ZXJcblx0KSB7XG5cdCAgdmFyIG5leHQgPSB0eXBlb2YgcmF3ID09PSAnc3RyaW5nJyA/IHsgcGF0aDogcmF3IH0gOiByYXc7XG5cdCAgLy8gbmFtZWQgdGFyZ2V0XG5cdCAgaWYgKG5leHQubmFtZSB8fCBuZXh0Ll9ub3JtYWxpemVkKSB7XG5cdCAgICByZXR1cm4gbmV4dFxuXHQgIH1cblx0XG5cdCAgLy8gcmVsYXRpdmUgcGFyYW1zXG5cdCAgaWYgKCFuZXh0LnBhdGggJiYgbmV4dC5wYXJhbXMgJiYgY3VycmVudCkge1xuXHQgICAgbmV4dCA9IGFzc2lnbih7fSwgbmV4dCk7XG5cdCAgICBuZXh0Ll9ub3JtYWxpemVkID0gdHJ1ZTtcblx0ICAgIHZhciBwYXJhbXMgPSBhc3NpZ24oYXNzaWduKHt9LCBjdXJyZW50LnBhcmFtcyksIG5leHQucGFyYW1zKTtcblx0ICAgIGlmIChjdXJyZW50Lm5hbWUpIHtcblx0ICAgICAgbmV4dC5uYW1lID0gY3VycmVudC5uYW1lO1xuXHQgICAgICBuZXh0LnBhcmFtcyA9IHBhcmFtcztcblx0ICAgIH0gZWxzZSBpZiAoY3VycmVudC5tYXRjaGVkLmxlbmd0aCkge1xuXHQgICAgICB2YXIgcmF3UGF0aCA9IGN1cnJlbnQubWF0Y2hlZFtjdXJyZW50Lm1hdGNoZWQubGVuZ3RoIC0gMV0ucGF0aDtcblx0ICAgICAgbmV4dC5wYXRoID0gZmlsbFBhcmFtcyhyYXdQYXRoLCBwYXJhbXMsIChcInBhdGggXCIgKyAoY3VycmVudC5wYXRoKSkpO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHdhcm4oZmFsc2UsIFwicmVsYXRpdmUgcGFyYW1zIG5hdmlnYXRpb24gcmVxdWlyZXMgYSBjdXJyZW50IHJvdXRlLlwiKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXh0XG5cdCAgfVxuXHRcblx0ICB2YXIgcGFyc2VkUGF0aCA9IHBhcnNlUGF0aChuZXh0LnBhdGggfHwgJycpO1xuXHQgIHZhciBiYXNlUGF0aCA9IChjdXJyZW50ICYmIGN1cnJlbnQucGF0aCkgfHwgJy8nO1xuXHQgIHZhciBwYXRoID0gcGFyc2VkUGF0aC5wYXRoXG5cdCAgICA/IHJlc29sdmVQYXRoKHBhcnNlZFBhdGgucGF0aCwgYmFzZVBhdGgsIGFwcGVuZCB8fCBuZXh0LmFwcGVuZClcblx0ICAgIDogYmFzZVBhdGg7XG5cdFxuXHQgIHZhciBxdWVyeSA9IHJlc29sdmVRdWVyeShcblx0ICAgIHBhcnNlZFBhdGgucXVlcnksXG5cdCAgICBuZXh0LnF1ZXJ5LFxuXHQgICAgcm91dGVyICYmIHJvdXRlci5vcHRpb25zLnBhcnNlUXVlcnlcblx0ICApO1xuXHRcblx0ICB2YXIgaGFzaCA9IG5leHQuaGFzaCB8fCBwYXJzZWRQYXRoLmhhc2g7XG5cdCAgaWYgKGhhc2ggJiYgaGFzaC5jaGFyQXQoMCkgIT09ICcjJykge1xuXHQgICAgaGFzaCA9IFwiI1wiICsgaGFzaDtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB7XG5cdCAgICBfbm9ybWFsaXplZDogdHJ1ZSxcblx0ICAgIHBhdGg6IHBhdGgsXG5cdCAgICBxdWVyeTogcXVlcnksXG5cdCAgICBoYXNoOiBoYXNoXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc3NpZ24gKGEsIGIpIHtcblx0ICBmb3IgKHZhciBrZXkgaW4gYikge1xuXHQgICAgYVtrZXldID0gYltrZXldO1xuXHQgIH1cblx0ICByZXR1cm4gYVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVNYXRjaGVyIChcblx0ICByb3V0ZXMsXG5cdCAgcm91dGVyXG5cdCkge1xuXHQgIHZhciByZWYgPSBjcmVhdGVSb3V0ZU1hcChyb3V0ZXMpO1xuXHQgIHZhciBwYXRoTGlzdCA9IHJlZi5wYXRoTGlzdDtcblx0ICB2YXIgcGF0aE1hcCA9IHJlZi5wYXRoTWFwO1xuXHQgIHZhciBuYW1lTWFwID0gcmVmLm5hbWVNYXA7XG5cdFxuXHQgIGZ1bmN0aW9uIGFkZFJvdXRlcyAocm91dGVzKSB7XG5cdCAgICBjcmVhdGVSb3V0ZU1hcChyb3V0ZXMsIHBhdGhMaXN0LCBwYXRoTWFwLCBuYW1lTWFwKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG1hdGNoIChcblx0ICAgIHJhdyxcblx0ICAgIGN1cnJlbnRSb3V0ZSxcblx0ICAgIHJlZGlyZWN0ZWRGcm9tXG5cdCAgKSB7XG5cdCAgICB2YXIgbG9jYXRpb24gPSBub3JtYWxpemVMb2NhdGlvbihyYXcsIGN1cnJlbnRSb3V0ZSwgZmFsc2UsIHJvdXRlcik7XG5cdCAgICB2YXIgbmFtZSA9IGxvY2F0aW9uLm5hbWU7XG5cdFxuXHQgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgdmFyIHJlY29yZCA9IG5hbWVNYXBbbmFtZV07XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybihyZWNvcmQsIChcIlJvdXRlIHdpdGggbmFtZSAnXCIgKyBuYW1lICsgXCInIGRvZXMgbm90IGV4aXN0XCIpKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIXJlY29yZCkgeyByZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsIGxvY2F0aW9uKSB9XG5cdCAgICAgIHZhciBwYXJhbU5hbWVzID0gcmVjb3JkLnJlZ2V4LmtleXNcblx0ICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuICFrZXkub3B0aW9uYWw7IH0pXG5cdCAgICAgICAgLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkubmFtZTsgfSk7XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIGxvY2F0aW9uLnBhcmFtcyAhPT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBsb2NhdGlvbi5wYXJhbXMgPSB7fTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGN1cnJlbnRSb3V0ZSAmJiB0eXBlb2YgY3VycmVudFJvdXRlLnBhcmFtcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gY3VycmVudFJvdXRlLnBhcmFtcykge1xuXHQgICAgICAgICAgaWYgKCEoa2V5IGluIGxvY2F0aW9uLnBhcmFtcykgJiYgcGFyYW1OYW1lcy5pbmRleE9mKGtleSkgPiAtMSkge1xuXHQgICAgICAgICAgICBsb2NhdGlvbi5wYXJhbXNba2V5XSA9IGN1cnJlbnRSb3V0ZS5wYXJhbXNba2V5XTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChyZWNvcmQpIHtcblx0ICAgICAgICBsb2NhdGlvbi5wYXRoID0gZmlsbFBhcmFtcyhyZWNvcmQucGF0aCwgbG9jYXRpb24ucGFyYW1zLCAoXCJuYW1lZCByb3V0ZSBcXFwiXCIgKyBuYW1lICsgXCJcXFwiXCIpKTtcblx0ICAgICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKHJlY29yZCwgbG9jYXRpb24sIHJlZGlyZWN0ZWRGcm9tKVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLnBhdGgpIHtcblx0ICAgICAgbG9jYXRpb24ucGFyYW1zID0ge307XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aExpc3QubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgcGF0aCA9IHBhdGhMaXN0W2ldO1xuXHQgICAgICAgIHZhciByZWNvcmQkMSA9IHBhdGhNYXBbcGF0aF07XG5cdCAgICAgICAgaWYgKG1hdGNoUm91dGUocmVjb3JkJDEucmVnZXgsIGxvY2F0aW9uLnBhdGgsIGxvY2F0aW9uLnBhcmFtcykpIHtcblx0ICAgICAgICAgIHJldHVybiBfY3JlYXRlUm91dGUocmVjb3JkJDEsIGxvY2F0aW9uLCByZWRpcmVjdGVkRnJvbSlcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIG5vIG1hdGNoXG5cdCAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsIGxvY2F0aW9uKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVkaXJlY3QgKFxuXHQgICAgcmVjb3JkLFxuXHQgICAgbG9jYXRpb25cblx0ICApIHtcblx0ICAgIHZhciBvcmlnaW5hbFJlZGlyZWN0ID0gcmVjb3JkLnJlZGlyZWN0O1xuXHQgICAgdmFyIHJlZGlyZWN0ID0gdHlwZW9mIG9yaWdpbmFsUmVkaXJlY3QgPT09ICdmdW5jdGlvbidcblx0ICAgICAgICA/IG9yaWdpbmFsUmVkaXJlY3QoY3JlYXRlUm91dGUocmVjb3JkLCBsb2NhdGlvbiwgbnVsbCwgcm91dGVyKSlcblx0ICAgICAgICA6IG9yaWdpbmFsUmVkaXJlY3Q7XG5cdFxuXHQgICAgaWYgKHR5cGVvZiByZWRpcmVjdCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgcmVkaXJlY3QgPSB7IHBhdGg6IHJlZGlyZWN0IH07XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFyZWRpcmVjdCB8fCB0eXBlb2YgcmVkaXJlY3QgIT09ICdvYmplY3QnKSB7XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIGZhbHNlLCAoXCJpbnZhbGlkIHJlZGlyZWN0IG9wdGlvbjogXCIgKyAoSlNPTi5zdHJpbmdpZnkocmVkaXJlY3QpKSlcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBfY3JlYXRlUm91dGUobnVsbCwgbG9jYXRpb24pXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJlID0gcmVkaXJlY3Q7XG5cdCAgICB2YXIgbmFtZSA9IHJlLm5hbWU7XG5cdCAgICB2YXIgcGF0aCA9IHJlLnBhdGg7XG5cdCAgICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5xdWVyeTtcblx0ICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcblx0ICAgIHZhciBwYXJhbXMgPSBsb2NhdGlvbi5wYXJhbXM7XG5cdCAgICBxdWVyeSA9IHJlLmhhc093blByb3BlcnR5KCdxdWVyeScpID8gcmUucXVlcnkgOiBxdWVyeTtcblx0ICAgIGhhc2ggPSByZS5oYXNPd25Qcm9wZXJ0eSgnaGFzaCcpID8gcmUuaGFzaCA6IGhhc2g7XG5cdCAgICBwYXJhbXMgPSByZS5oYXNPd25Qcm9wZXJ0eSgncGFyYW1zJykgPyByZS5wYXJhbXMgOiBwYXJhbXM7XG5cdFxuXHQgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgLy8gcmVzb2x2ZWQgbmFtZWQgZGlyZWN0XG5cdCAgICAgIHZhciB0YXJnZXRSZWNvcmQgPSBuYW1lTWFwW25hbWVdO1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGFzc2VydCh0YXJnZXRSZWNvcmQsIChcInJlZGlyZWN0IGZhaWxlZDogbmFtZWQgcm91dGUgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBub3QgZm91bmQuXCIpKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWF0Y2goe1xuXHQgICAgICAgIF9ub3JtYWxpemVkOiB0cnVlLFxuXHQgICAgICAgIG5hbWU6IG5hbWUsXG5cdCAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuXHQgICAgICAgIGhhc2g6IGhhc2gsXG5cdCAgICAgICAgcGFyYW1zOiBwYXJhbXNcblx0ICAgICAgfSwgdW5kZWZpbmVkLCBsb2NhdGlvbilcblx0ICAgIH0gZWxzZSBpZiAocGF0aCkge1xuXHQgICAgICAvLyAxLiByZXNvbHZlIHJlbGF0aXZlIHJlZGlyZWN0XG5cdCAgICAgIHZhciByYXdQYXRoID0gcmVzb2x2ZVJlY29yZFBhdGgocGF0aCwgcmVjb3JkKTtcblx0ICAgICAgLy8gMi4gcmVzb2x2ZSBwYXJhbXNcblx0ICAgICAgdmFyIHJlc29sdmVkUGF0aCA9IGZpbGxQYXJhbXMocmF3UGF0aCwgcGFyYW1zLCAoXCJyZWRpcmVjdCByb3V0ZSB3aXRoIHBhdGggXFxcIlwiICsgcmF3UGF0aCArIFwiXFxcIlwiKSk7XG5cdCAgICAgIC8vIDMuIHJlbWF0Y2ggd2l0aCBleGlzdGluZyBxdWVyeSBhbmQgaGFzaFxuXHQgICAgICByZXR1cm4gbWF0Y2goe1xuXHQgICAgICAgIF9ub3JtYWxpemVkOiB0cnVlLFxuXHQgICAgICAgIHBhdGg6IHJlc29sdmVkUGF0aCxcblx0ICAgICAgICBxdWVyeTogcXVlcnksXG5cdCAgICAgICAgaGFzaDogaGFzaFxuXHQgICAgICB9LCB1bmRlZmluZWQsIGxvY2F0aW9uKVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB3YXJuKGZhbHNlLCAoXCJpbnZhbGlkIHJlZGlyZWN0IG9wdGlvbjogXCIgKyAoSlNPTi5zdHJpbmdpZnkocmVkaXJlY3QpKSkpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBfY3JlYXRlUm91dGUobnVsbCwgbG9jYXRpb24pXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBhbGlhcyAoXG5cdCAgICByZWNvcmQsXG5cdCAgICBsb2NhdGlvbixcblx0ICAgIG1hdGNoQXNcblx0ICApIHtcblx0ICAgIHZhciBhbGlhc2VkUGF0aCA9IGZpbGxQYXJhbXMobWF0Y2hBcywgbG9jYXRpb24ucGFyYW1zLCAoXCJhbGlhc2VkIHJvdXRlIHdpdGggcGF0aCBcXFwiXCIgKyBtYXRjaEFzICsgXCJcXFwiXCIpKTtcblx0ICAgIHZhciBhbGlhc2VkTWF0Y2ggPSBtYXRjaCh7XG5cdCAgICAgIF9ub3JtYWxpemVkOiB0cnVlLFxuXHQgICAgICBwYXRoOiBhbGlhc2VkUGF0aFxuXHQgICAgfSk7XG5cdCAgICBpZiAoYWxpYXNlZE1hdGNoKSB7XG5cdCAgICAgIHZhciBtYXRjaGVkID0gYWxpYXNlZE1hdGNoLm1hdGNoZWQ7XG5cdCAgICAgIHZhciBhbGlhc2VkUmVjb3JkID0gbWF0Y2hlZFttYXRjaGVkLmxlbmd0aCAtIDFdO1xuXHQgICAgICBsb2NhdGlvbi5wYXJhbXMgPSBhbGlhc2VkTWF0Y2gucGFyYW1zO1xuXHQgICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKGFsaWFzZWRSZWNvcmQsIGxvY2F0aW9uKVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbilcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIF9jcmVhdGVSb3V0ZSAoXG5cdCAgICByZWNvcmQsXG5cdCAgICBsb2NhdGlvbixcblx0ICAgIHJlZGlyZWN0ZWRGcm9tXG5cdCAgKSB7XG5cdCAgICBpZiAocmVjb3JkICYmIHJlY29yZC5yZWRpcmVjdCkge1xuXHQgICAgICByZXR1cm4gcmVkaXJlY3QocmVjb3JkLCByZWRpcmVjdGVkRnJvbSB8fCBsb2NhdGlvbilcblx0ICAgIH1cblx0ICAgIGlmIChyZWNvcmQgJiYgcmVjb3JkLm1hdGNoQXMpIHtcblx0ICAgICAgcmV0dXJuIGFsaWFzKHJlY29yZCwgbG9jYXRpb24sIHJlY29yZC5tYXRjaEFzKVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGNyZWF0ZVJvdXRlKHJlY29yZCwgbG9jYXRpb24sIHJlZGlyZWN0ZWRGcm9tLCByb3V0ZXIpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4ge1xuXHQgICAgbWF0Y2g6IG1hdGNoLFxuXHQgICAgYWRkUm91dGVzOiBhZGRSb3V0ZXNcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hdGNoUm91dGUgKFxuXHQgIHJlZ2V4LFxuXHQgIHBhdGgsXG5cdCAgcGFyYW1zXG5cdCkge1xuXHQgIHZhciBtID0gcGF0aC5tYXRjaChyZWdleCk7XG5cdFxuXHQgIGlmICghbSkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfSBlbHNlIGlmICghcGFyYW1zKSB7XG5cdCAgICByZXR1cm4gdHJ1ZVxuXHQgIH1cblx0XG5cdCAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IG0ubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcblx0ICAgIHZhciBrZXkgPSByZWdleC5rZXlzW2kgLSAxXTtcblx0ICAgIHZhciB2YWwgPSB0eXBlb2YgbVtpXSA9PT0gJ3N0cmluZycgPyBkZWNvZGVVUklDb21wb25lbnQobVtpXSkgOiBtW2ldO1xuXHQgICAgaWYgKGtleSkge1xuXHQgICAgICBwYXJhbXNba2V5Lm5hbWVdID0gdmFsO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRydWVcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVJlY29yZFBhdGggKHBhdGgsIHJlY29yZCkge1xuXHQgIHJldHVybiByZXNvbHZlUGF0aChwYXRoLCByZWNvcmQucGFyZW50ID8gcmVjb3JkLnBhcmVudC5wYXRoIDogJy8nLCB0cnVlKVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdFxuXHR2YXIgcG9zaXRpb25TdG9yZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHRmdW5jdGlvbiBzZXR1cFNjcm9sbCAoKSB7XG5cdCAgLy8gRml4IGZvciAjMTU4NSBmb3IgRmlyZWZveFxuXHQgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7IGtleTogZ2V0U3RhdGVLZXkoKSB9LCAnJyk7XG5cdCAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgIHNhdmVTY3JvbGxQb3NpdGlvbigpO1xuXHQgICAgaWYgKGUuc3RhdGUgJiYgZS5zdGF0ZS5rZXkpIHtcblx0ICAgICAgc2V0U3RhdGVLZXkoZS5zdGF0ZS5rZXkpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVTY3JvbGwgKFxuXHQgIHJvdXRlcixcblx0ICB0byxcblx0ICBmcm9tLFxuXHQgIGlzUG9wXG5cdCkge1xuXHQgIGlmICghcm91dGVyLmFwcCkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgYmVoYXZpb3IgPSByb3V0ZXIub3B0aW9ucy5zY3JvbGxCZWhhdmlvcjtcblx0ICBpZiAoIWJlaGF2aW9yKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnQodHlwZW9mIGJlaGF2aW9yID09PSAnZnVuY3Rpb24nLCBcInNjcm9sbEJlaGF2aW9yIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdFxuXHQgIC8vIHdhaXQgdW50aWwgcmUtcmVuZGVyIGZpbmlzaGVzIGJlZm9yZSBzY3JvbGxpbmdcblx0ICByb3V0ZXIuYXBwLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgcG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpO1xuXHQgICAgdmFyIHNob3VsZFNjcm9sbCA9IGJlaGF2aW9yKHRvLCBmcm9tLCBpc1BvcCA/IHBvc2l0aW9uIDogbnVsbCk7XG5cdFxuXHQgICAgaWYgKCFzaG91bGRTY3JvbGwpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBzaG91bGRTY3JvbGwudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBzaG91bGRTY3JvbGwudGhlbihmdW5jdGlvbiAoc2hvdWxkU2Nyb2xsKSB7XG5cdCAgICAgICAgc2Nyb2xsVG9Qb3NpdGlvbigoc2hvdWxkU2Nyb2xsKSwgcG9zaXRpb24pO1xuXHQgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIGFzc2VydChmYWxzZSwgZXJyLnRvU3RyaW5nKCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzY3JvbGxUb1Bvc2l0aW9uKHNob3VsZFNjcm9sbCwgcG9zaXRpb24pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzYXZlU2Nyb2xsUG9zaXRpb24gKCkge1xuXHQgIHZhciBrZXkgPSBnZXRTdGF0ZUtleSgpO1xuXHQgIGlmIChrZXkpIHtcblx0ICAgIHBvc2l0aW9uU3RvcmVba2V5XSA9IHtcblx0ICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHQgICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXRcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRTY3JvbGxQb3NpdGlvbiAoKSB7XG5cdCAgdmFyIGtleSA9IGdldFN0YXRlS2V5KCk7XG5cdCAgaWYgKGtleSkge1xuXHQgICAgcmV0dXJuIHBvc2l0aW9uU3RvcmVba2V5XVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RWxlbWVudFBvc2l0aW9uIChlbCwgb2Zmc2V0KSB7XG5cdCAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHQgIHZhciBkb2NSZWN0ID0gZG9jRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdCAgdmFyIGVsUmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgIHJldHVybiB7XG5cdCAgICB4OiBlbFJlY3QubGVmdCAtIGRvY1JlY3QubGVmdCAtIG9mZnNldC54LFxuXHQgICAgeTogZWxSZWN0LnRvcCAtIGRvY1JlY3QudG9wIC0gb2Zmc2V0Lnlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVmFsaWRQb3NpdGlvbiAob2JqKSB7XG5cdCAgcmV0dXJuIGlzTnVtYmVyKG9iai54KSB8fCBpc051bWJlcihvYmoueSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplUG9zaXRpb24gKG9iaikge1xuXHQgIHJldHVybiB7XG5cdCAgICB4OiBpc051bWJlcihvYmoueCkgPyBvYmoueCA6IHdpbmRvdy5wYWdlWE9mZnNldCxcblx0ICAgIHk6IGlzTnVtYmVyKG9iai55KSA/IG9iai55IDogd2luZG93LnBhZ2VZT2Zmc2V0XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemVPZmZzZXQgKG9iaikge1xuXHQgIHJldHVybiB7XG5cdCAgICB4OiBpc051bWJlcihvYmoueCkgPyBvYmoueCA6IDAsXG5cdCAgICB5OiBpc051bWJlcihvYmoueSkgPyBvYmoueSA6IDBcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzTnVtYmVyICh2KSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uIChzaG91bGRTY3JvbGwsIHBvc2l0aW9uKSB7XG5cdCAgdmFyIGlzT2JqZWN0ID0gdHlwZW9mIHNob3VsZFNjcm9sbCA9PT0gJ29iamVjdCc7XG5cdCAgaWYgKGlzT2JqZWN0ICYmIHR5cGVvZiBzaG91bGRTY3JvbGwuc2VsZWN0b3IgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNob3VsZFNjcm9sbC5zZWxlY3Rvcik7XG5cdCAgICBpZiAoZWwpIHtcblx0ICAgICAgdmFyIG9mZnNldCA9IHNob3VsZFNjcm9sbC5vZmZzZXQgJiYgdHlwZW9mIHNob3VsZFNjcm9sbC5vZmZzZXQgPT09ICdvYmplY3QnID8gc2hvdWxkU2Nyb2xsLm9mZnNldCA6IHt9O1xuXHQgICAgICBvZmZzZXQgPSBub3JtYWxpemVPZmZzZXQob2Zmc2V0KTtcblx0ICAgICAgcG9zaXRpb24gPSBnZXRFbGVtZW50UG9zaXRpb24oZWwsIG9mZnNldCk7XG5cdCAgICB9IGVsc2UgaWYgKGlzVmFsaWRQb3NpdGlvbihzaG91bGRTY3JvbGwpKSB7XG5cdCAgICAgIHBvc2l0aW9uID0gbm9ybWFsaXplUG9zaXRpb24oc2hvdWxkU2Nyb2xsKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0ICYmIGlzVmFsaWRQb3NpdGlvbihzaG91bGRTY3JvbGwpKSB7XG5cdCAgICBwb3NpdGlvbiA9IG5vcm1hbGl6ZVBvc2l0aW9uKHNob3VsZFNjcm9sbCk7XG5cdCAgfVxuXHRcblx0ICBpZiAocG9zaXRpb24pIHtcblx0ICAgIHdpbmRvdy5zY3JvbGxUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHN1cHBvcnRzUHVzaFN0YXRlID0gaW5Ccm93c2VyICYmIChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG5cdFxuXHQgIGlmIChcblx0ICAgICh1YS5pbmRleE9mKCdBbmRyb2lkIDIuJykgIT09IC0xIHx8IHVhLmluZGV4T2YoJ0FuZHJvaWQgNC4wJykgIT09IC0xKSAmJlxuXHQgICAgdWEuaW5kZXhPZignTW9iaWxlIFNhZmFyaScpICE9PSAtMSAmJlxuXHQgICAgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmXG5cdCAgICB1YS5pbmRleE9mKCdXaW5kb3dzIFBob25lJykgPT09IC0xXG5cdCAgKSB7XG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdFxuXHQgIHJldHVybiB3aW5kb3cuaGlzdG9yeSAmJiAncHVzaFN0YXRlJyBpbiB3aW5kb3cuaGlzdG9yeVxuXHR9KSgpO1xuXHRcblx0Ly8gdXNlIFVzZXIgVGltaW5nIGFwaSAoaWYgcHJlc2VudCkgZm9yIG1vcmUgYWNjdXJhdGUga2V5IHByZWNpc2lvblxuXHR2YXIgVGltZSA9IGluQnJvd3NlciAmJiB3aW5kb3cucGVyZm9ybWFuY2UgJiYgd2luZG93LnBlcmZvcm1hbmNlLm5vd1xuXHQgID8gd2luZG93LnBlcmZvcm1hbmNlXG5cdCAgOiBEYXRlO1xuXHRcblx0dmFyIF9rZXkgPSBnZW5LZXkoKTtcblx0XG5cdGZ1bmN0aW9uIGdlbktleSAoKSB7XG5cdCAgcmV0dXJuIFRpbWUubm93KCkudG9GaXhlZCgzKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRTdGF0ZUtleSAoKSB7XG5cdCAgcmV0dXJuIF9rZXlcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0U3RhdGVLZXkgKGtleSkge1xuXHQgIF9rZXkgPSBrZXk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHB1c2hTdGF0ZSAodXJsLCByZXBsYWNlKSB7XG5cdCAgc2F2ZVNjcm9sbFBvc2l0aW9uKCk7XG5cdCAgLy8gdHJ5Li4uY2F0Y2ggdGhlIHB1c2hTdGF0ZSBjYWxsIHRvIGdldCBhcm91bmQgU2FmYXJpXG5cdCAgLy8gRE9NIEV4Y2VwdGlvbiAxOCB3aGVyZSBpdCBsaW1pdHMgdG8gMTAwIHB1c2hTdGF0ZSBjYWxsc1xuXHQgIHZhciBoaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG5cdCAgdHJ5IHtcblx0ICAgIGlmIChyZXBsYWNlKSB7XG5cdCAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHsga2V5OiBfa2V5IH0sICcnLCB1cmwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgX2tleSA9IGdlbktleSgpO1xuXHQgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7IGtleTogX2tleSB9LCAnJywgdXJsKTtcblx0ICAgIH1cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB3aW5kb3cubG9jYXRpb25bcmVwbGFjZSA/ICdyZXBsYWNlJyA6ICdhc3NpZ24nXSh1cmwpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVwbGFjZVN0YXRlICh1cmwpIHtcblx0ICBwdXNoU3RhdGUodXJsLCB0cnVlKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBydW5RdWV1ZSAocXVldWUsIGZuLCBjYikge1xuXHQgIHZhciBzdGVwID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdCAgICBpZiAoaW5kZXggPj0gcXVldWUubGVuZ3RoKSB7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAocXVldWVbaW5kZXhdKSB7XG5cdCAgICAgICAgZm4ocXVldWVbaW5kZXhdLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBzdGVwKGluZGV4ICsgMSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RlcChpbmRleCArIDEpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0ICBzdGVwKDApO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudHMgKG1hdGNoZWQpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XG5cdCAgICB2YXIgaGFzQXN5bmMgPSBmYWxzZTtcblx0ICAgIHZhciBwZW5kaW5nID0gMDtcblx0ICAgIHZhciBlcnJvciA9IG51bGw7XG5cdFxuXHQgICAgZmxhdE1hcENvbXBvbmVudHMobWF0Y2hlZCwgZnVuY3Rpb24gKGRlZiwgXywgbWF0Y2gsIGtleSkge1xuXHQgICAgICAvLyBpZiBpdCdzIGEgZnVuY3Rpb24gYW5kIGRvZXNuJ3QgaGF2ZSBjaWQgYXR0YWNoZWQsXG5cdCAgICAgIC8vIGFzc3VtZSBpdCdzIGFuIGFzeW5jIGNvbXBvbmVudCByZXNvbHZlIGZ1bmN0aW9uLlxuXHQgICAgICAvLyB3ZSBhcmUgbm90IHVzaW5nIFZ1ZSdzIGRlZmF1bHQgYXN5bmMgcmVzb2x2aW5nIG1lY2hhbmlzbSBiZWNhdXNlXG5cdCAgICAgIC8vIHdlIHdhbnQgdG8gaGFsdCB0aGUgbmF2aWdhdGlvbiB1bnRpbCB0aGUgaW5jb21pbmcgY29tcG9uZW50IGhhcyBiZWVuXG5cdCAgICAgIC8vIHJlc29sdmVkLlxuXHQgICAgICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWYuY2lkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBoYXNBc3luYyA9IHRydWU7XG5cdCAgICAgICAgcGVuZGluZysrO1xuXHRcblx0ICAgICAgICB2YXIgcmVzb2x2ZSA9IG9uY2UoZnVuY3Rpb24gKHJlc29sdmVkRGVmKSB7XG5cdCAgICAgICAgICBpZiAoaXNFU01vZHVsZShyZXNvbHZlZERlZikpIHtcblx0ICAgICAgICAgICAgcmVzb2x2ZWREZWYgPSByZXNvbHZlZERlZi5kZWZhdWx0O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gc2F2ZSByZXNvbHZlZCBvbiBhc3luYyBmYWN0b3J5IGluIGNhc2UgaXQncyB1c2VkIGVsc2V3aGVyZVxuXHQgICAgICAgICAgZGVmLnJlc29sdmVkID0gdHlwZW9mIHJlc29sdmVkRGVmID09PSAnZnVuY3Rpb24nXG5cdCAgICAgICAgICAgID8gcmVzb2x2ZWREZWZcblx0ICAgICAgICAgICAgOiBfVnVlLmV4dGVuZChyZXNvbHZlZERlZik7XG5cdCAgICAgICAgICBtYXRjaC5jb21wb25lbnRzW2tleV0gPSByZXNvbHZlZERlZjtcblx0ICAgICAgICAgIHBlbmRpbmctLTtcblx0ICAgICAgICAgIGlmIChwZW5kaW5nIDw9IDApIHtcblx0ICAgICAgICAgICAgbmV4dCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB2YXIgcmVqZWN0ID0gb25jZShmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgICAgICB2YXIgbXNnID0gXCJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQgXCIgKyBrZXkgKyBcIjogXCIgKyByZWFzb247XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oZmFsc2UsIG1zZyk7XG5cdCAgICAgICAgICBpZiAoIWVycm9yKSB7XG5cdCAgICAgICAgICAgIGVycm9yID0gaXNFcnJvcihyZWFzb24pXG5cdCAgICAgICAgICAgICAgPyByZWFzb25cblx0ICAgICAgICAgICAgICA6IG5ldyBFcnJvcihtc2cpO1xuXHQgICAgICAgICAgICBuZXh0KGVycm9yKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdmFyIHJlcztcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmVzID0gZGVmKHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgcmVqZWN0KGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocmVzKSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHJlcy50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBuZXcgc3ludGF4IGluIFZ1ZSAyLjNcblx0ICAgICAgICAgICAgdmFyIGNvbXAgPSByZXMuY29tcG9uZW50O1xuXHQgICAgICAgICAgICBpZiAoY29tcCAmJiB0eXBlb2YgY29tcC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgICAgY29tcC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGlmICghaGFzQXN5bmMpIHsgbmV4dCgpOyB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmbGF0TWFwQ29tcG9uZW50cyAoXG5cdCAgbWF0Y2hlZCxcblx0ICBmblxuXHQpIHtcblx0ICByZXR1cm4gZmxhdHRlbihtYXRjaGVkLm1hcChmdW5jdGlvbiAobSkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5rZXlzKG0uY29tcG9uZW50cykubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZuKFxuXHQgICAgICBtLmNvbXBvbmVudHNba2V5XSxcblx0ICAgICAgbS5pbnN0YW5jZXNba2V5XSxcblx0ICAgICAgbSwga2V5XG5cdCAgICApOyB9KVxuXHQgIH0pKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmbGF0dGVuIChhcnIpIHtcblx0ICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyKVxuXHR9XG5cdFxuXHR2YXIgaGFzU3ltYm9sID1cblx0ICB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmXG5cdCAgdHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCc7XG5cdFxuXHRmdW5jdGlvbiBpc0VTTW9kdWxlIChvYmopIHtcblx0ICByZXR1cm4gb2JqLl9fZXNNb2R1bGUgfHwgKGhhc1N5bWJvbCAmJiBvYmpbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZScpXG5cdH1cblx0XG5cdC8vIGluIFdlYnBhY2sgMiwgcmVxdWlyZS5lbnN1cmUgbm93IGFsc28gcmV0dXJucyBhIFByb21pc2Vcblx0Ly8gc28gdGhlIHJlc29sdmUvcmVqZWN0IGZ1bmN0aW9ucyBtYXkgZ2V0IGNhbGxlZCBhbiBleHRyYSB0aW1lXG5cdC8vIGlmIHRoZSB1c2VyIHVzZXMgYW4gYXJyb3cgZnVuY3Rpb24gc2hvcnRoYW5kIHRoYXQgaGFwcGVucyB0b1xuXHQvLyByZXR1cm4gdGhhdCBQcm9taXNlLlxuXHRmdW5jdGlvbiBvbmNlIChmbikge1xuXHQgIHZhciBjYWxsZWQgPSBmYWxzZTtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07XG5cdFxuXHQgICAgaWYgKGNhbGxlZCkgeyByZXR1cm4gfVxuXHQgICAgY2FsbGVkID0gdHJ1ZTtcblx0ICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgSGlzdG9yeSA9IGZ1bmN0aW9uIEhpc3RvcnkgKHJvdXRlciwgYmFzZSkge1xuXHQgIHRoaXMucm91dGVyID0gcm91dGVyO1xuXHQgIHRoaXMuYmFzZSA9IG5vcm1hbGl6ZUJhc2UoYmFzZSk7XG5cdCAgLy8gc3RhcnQgd2l0aCBhIHJvdXRlIG9iamVjdCB0aGF0IHN0YW5kcyBmb3IgXCJub3doZXJlXCJcblx0ICB0aGlzLmN1cnJlbnQgPSBTVEFSVDtcblx0ICB0aGlzLnBlbmRpbmcgPSBudWxsO1xuXHQgIHRoaXMucmVhZHkgPSBmYWxzZTtcblx0ICB0aGlzLnJlYWR5Q2JzID0gW107XG5cdCAgdGhpcy5yZWFkeUVycm9yQ2JzID0gW107XG5cdCAgdGhpcy5lcnJvckNicyA9IFtdO1xuXHR9O1xuXHRcblx0SGlzdG9yeS5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuIChjYikge1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0fTtcblx0XG5cdEhpc3RvcnkucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbiBvblJlYWR5IChjYiwgZXJyb3JDYikge1xuXHQgIGlmICh0aGlzLnJlYWR5KSB7XG5cdCAgICBjYigpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLnJlYWR5Q2JzLnB1c2goY2IpO1xuXHQgICAgaWYgKGVycm9yQ2IpIHtcblx0ICAgICAgdGhpcy5yZWFkeUVycm9yQ2JzLnB1c2goZXJyb3JDYik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0SGlzdG9yeS5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IgKGVycm9yQ2IpIHtcblx0ICB0aGlzLmVycm9yQ2JzLnB1c2goZXJyb3JDYik7XG5cdH07XG5cdFxuXHRIaXN0b3J5LnByb3RvdHlwZS50cmFuc2l0aW9uVG8gPSBmdW5jdGlvbiB0cmFuc2l0aW9uVG8gKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgdmFyIHJvdXRlID0gdGhpcy5yb3V0ZXIubWF0Y2gobG9jYXRpb24sIHRoaXMuY3VycmVudCk7XG5cdCAgdGhpcy5jb25maXJtVHJhbnNpdGlvbihyb3V0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcyQxLnVwZGF0ZVJvdXRlKHJvdXRlKTtcblx0ICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG5cdCAgICB0aGlzJDEuZW5zdXJlVVJMKCk7XG5cdFxuXHQgICAgLy8gZmlyZSByZWFkeSBjYnMgb25jZVxuXHQgICAgaWYgKCF0aGlzJDEucmVhZHkpIHtcblx0ICAgICAgdGhpcyQxLnJlYWR5ID0gdHJ1ZTtcblx0ICAgICAgdGhpcyQxLnJlYWR5Q2JzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IGNiKHJvdXRlKTsgfSk7XG5cdCAgICB9XG5cdCAgfSwgZnVuY3Rpb24gKGVycikge1xuXHQgICAgaWYgKG9uQWJvcnQpIHtcblx0ICAgICAgb25BYm9ydChlcnIpO1xuXHQgICAgfVxuXHQgICAgaWYgKGVyciAmJiAhdGhpcyQxLnJlYWR5KSB7XG5cdCAgICAgIHRoaXMkMS5yZWFkeSA9IHRydWU7XG5cdCAgICAgIHRoaXMkMS5yZWFkeUVycm9yQ2JzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IGNiKGVycik7IH0pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0SGlzdG9yeS5wcm90b3R5cGUuY29uZmlybVRyYW5zaXRpb24gPSBmdW5jdGlvbiBjb25maXJtVHJhbnNpdGlvbiAocm91dGUsIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICB2YXIgY3VycmVudCA9IHRoaXMuY3VycmVudDtcblx0ICB2YXIgYWJvcnQgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICBpZiAoaXNFcnJvcihlcnIpKSB7XG5cdCAgICAgIGlmICh0aGlzJDEuZXJyb3JDYnMubGVuZ3RoKSB7XG5cdCAgICAgICAgdGhpcyQxLmVycm9yQ2JzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IGNiKGVycik7IH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdhcm4oZmFsc2UsICd1bmNhdWdodCBlcnJvciBkdXJpbmcgcm91dGUgbmF2aWdhdGlvbjonKTtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIG9uQWJvcnQgJiYgb25BYm9ydChlcnIpO1xuXHQgIH07XG5cdCAgaWYgKFxuXHQgICAgaXNTYW1lUm91dGUocm91dGUsIGN1cnJlbnQpICYmXG5cdCAgICAvLyBpbiB0aGUgY2FzZSB0aGUgcm91dGUgbWFwIGhhcyBiZWVuIGR5bmFtaWNhbGx5IGFwcGVuZGVkIHRvXG5cdCAgICByb3V0ZS5tYXRjaGVkLmxlbmd0aCA9PT0gY3VycmVudC5tYXRjaGVkLmxlbmd0aFxuXHQgICkge1xuXHQgICAgdGhpcy5lbnN1cmVVUkwoKTtcblx0ICAgIHJldHVybiBhYm9ydCgpXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVmID0gcmVzb2x2ZVF1ZXVlKHRoaXMuY3VycmVudC5tYXRjaGVkLCByb3V0ZS5tYXRjaGVkKTtcblx0ICAgIHZhciB1cGRhdGVkID0gcmVmLnVwZGF0ZWQ7XG5cdCAgICB2YXIgZGVhY3RpdmF0ZWQgPSByZWYuZGVhY3RpdmF0ZWQ7XG5cdCAgICB2YXIgYWN0aXZhdGVkID0gcmVmLmFjdGl2YXRlZDtcblx0XG5cdCAgdmFyIHF1ZXVlID0gW10uY29uY2F0KFxuXHQgICAgLy8gaW4tY29tcG9uZW50IGxlYXZlIGd1YXJkc1xuXHQgICAgZXh0cmFjdExlYXZlR3VhcmRzKGRlYWN0aXZhdGVkKSxcblx0ICAgIC8vIGdsb2JhbCBiZWZvcmUgaG9va3Ncblx0ICAgIHRoaXMucm91dGVyLmJlZm9yZUhvb2tzLFxuXHQgICAgLy8gaW4tY29tcG9uZW50IHVwZGF0ZSBob29rc1xuXHQgICAgZXh0cmFjdFVwZGF0ZUhvb2tzKHVwZGF0ZWQpLFxuXHQgICAgLy8gaW4tY29uZmlnIGVudGVyIGd1YXJkc1xuXHQgICAgYWN0aXZhdGVkLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5iZWZvcmVFbnRlcjsgfSksXG5cdCAgICAvLyBhc3luYyBjb21wb25lbnRzXG5cdCAgICByZXNvbHZlQXN5bmNDb21wb25lbnRzKGFjdGl2YXRlZClcblx0ICApO1xuXHRcblx0ICB0aGlzLnBlbmRpbmcgPSByb3V0ZTtcblx0ICB2YXIgaXRlcmF0b3IgPSBmdW5jdGlvbiAoaG9vaywgbmV4dCkge1xuXHQgICAgaWYgKHRoaXMkMS5wZW5kaW5nICE9PSByb3V0ZSkge1xuXHQgICAgICByZXR1cm4gYWJvcnQoKVxuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgaG9vayhyb3V0ZSwgY3VycmVudCwgZnVuY3Rpb24gKHRvKSB7XG5cdCAgICAgICAgaWYgKHRvID09PSBmYWxzZSB8fCBpc0Vycm9yKHRvKSkge1xuXHQgICAgICAgICAgLy8gbmV4dChmYWxzZSkgLT4gYWJvcnQgbmF2aWdhdGlvbiwgZW5zdXJlIGN1cnJlbnQgVVJMXG5cdCAgICAgICAgICB0aGlzJDEuZW5zdXJlVVJMKHRydWUpO1xuXHQgICAgICAgICAgYWJvcnQodG8pO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoXG5cdCAgICAgICAgICB0eXBlb2YgdG8gPT09ICdzdHJpbmcnIHx8XG5cdCAgICAgICAgICAodHlwZW9mIHRvID09PSAnb2JqZWN0JyAmJiAoXG5cdCAgICAgICAgICAgIHR5cGVvZiB0by5wYXRoID09PSAnc3RyaW5nJyB8fFxuXHQgICAgICAgICAgICB0eXBlb2YgdG8ubmFtZSA9PT0gJ3N0cmluZydcblx0ICAgICAgICAgICkpXG5cdCAgICAgICAgKSB7XG5cdCAgICAgICAgICAvLyBuZXh0KCcvJykgb3IgbmV4dCh7IHBhdGg6ICcvJyB9KSAtPiByZWRpcmVjdFxuXHQgICAgICAgICAgYWJvcnQoKTtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgdG8gPT09ICdvYmplY3QnICYmIHRvLnJlcGxhY2UpIHtcblx0ICAgICAgICAgICAgdGhpcyQxLnJlcGxhY2UodG8pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcyQxLnB1c2godG8pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyBjb25maXJtIHRyYW5zaXRpb24gYW5kIHBhc3Mgb24gdGhlIHZhbHVlXG5cdCAgICAgICAgICBuZXh0KHRvKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICBhYm9ydChlKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBydW5RdWV1ZShxdWV1ZSwgaXRlcmF0b3IsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBwb3N0RW50ZXJDYnMgPSBbXTtcblx0ICAgIHZhciBpc1ZhbGlkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcyQxLmN1cnJlbnQgPT09IHJvdXRlOyB9O1xuXHQgICAgLy8gd2FpdCB1bnRpbCBhc3luYyBjb21wb25lbnRzIGFyZSByZXNvbHZlZCBiZWZvcmVcblx0ICAgIC8vIGV4dHJhY3RpbmcgaW4tY29tcG9uZW50IGVudGVyIGd1YXJkc1xuXHQgICAgdmFyIGVudGVyR3VhcmRzID0gZXh0cmFjdEVudGVyR3VhcmRzKGFjdGl2YXRlZCwgcG9zdEVudGVyQ2JzLCBpc1ZhbGlkKTtcblx0ICAgIHZhciBxdWV1ZSA9IGVudGVyR3VhcmRzLmNvbmNhdCh0aGlzJDEucm91dGVyLnJlc29sdmVIb29rcyk7XG5cdCAgICBydW5RdWV1ZShxdWV1ZSwgaXRlcmF0b3IsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHRoaXMkMS5wZW5kaW5nICE9PSByb3V0ZSkge1xuXHQgICAgICAgIHJldHVybiBhYm9ydCgpXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcyQxLnBlbmRpbmcgPSBudWxsO1xuXHQgICAgICBvbkNvbXBsZXRlKHJvdXRlKTtcblx0ICAgICAgaWYgKHRoaXMkMS5yb3V0ZXIuYXBwKSB7XG5cdCAgICAgICAgdGhpcyQxLnJvdXRlci5hcHAuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHBvc3RFbnRlckNicy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyBjYigpOyB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRIaXN0b3J5LnByb3RvdHlwZS51cGRhdGVSb3V0ZSA9IGZ1bmN0aW9uIHVwZGF0ZVJvdXRlIChyb3V0ZSkge1xuXHQgIHZhciBwcmV2ID0gdGhpcy5jdXJyZW50O1xuXHQgIHRoaXMuY3VycmVudCA9IHJvdXRlO1xuXHQgIHRoaXMuY2IgJiYgdGhpcy5jYihyb3V0ZSk7XG5cdCAgdGhpcy5yb3V0ZXIuYWZ0ZXJIb29rcy5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XG5cdCAgICBob29rICYmIGhvb2socm91dGUsIHByZXYpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplQmFzZSAoYmFzZSkge1xuXHQgIGlmICghYmFzZSkge1xuXHQgICAgaWYgKGluQnJvd3Nlcikge1xuXHQgICAgICAvLyByZXNwZWN0IDxiYXNlPiB0YWdcblx0ICAgICAgdmFyIGJhc2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTtcblx0ICAgICAgYmFzZSA9IChiYXNlRWwgJiYgYmFzZUVsLmdldEF0dHJpYnV0ZSgnaHJlZicpKSB8fCAnLyc7XG5cdCAgICAgIC8vIHN0cmlwIGZ1bGwgVVJMIG9yaWdpblxuXHQgICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKC9eaHR0cHM/OlxcL1xcL1teXFwvXSsvLCAnJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBiYXNlID0gJy8nO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBtYWtlIHN1cmUgdGhlcmUncyB0aGUgc3RhcnRpbmcgc2xhc2hcblx0ICBpZiAoYmFzZS5jaGFyQXQoMCkgIT09ICcvJykge1xuXHQgICAgYmFzZSA9ICcvJyArIGJhc2U7XG5cdCAgfVxuXHQgIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuXHQgIHJldHVybiBiYXNlLnJlcGxhY2UoL1xcLyQvLCAnJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVF1ZXVlIChcblx0ICBjdXJyZW50LFxuXHQgIG5leHRcblx0KSB7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIG1heCA9IE1hdGgubWF4KGN1cnJlbnQubGVuZ3RoLCBuZXh0Lmxlbmd0aCk7XG5cdCAgZm9yIChpID0gMDsgaSA8IG1heDsgaSsrKSB7XG5cdCAgICBpZiAoY3VycmVudFtpXSAhPT0gbmV4dFtpXSkge1xuXHQgICAgICBicmVha1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgdXBkYXRlZDogbmV4dC5zbGljZSgwLCBpKSxcblx0ICAgIGFjdGl2YXRlZDogbmV4dC5zbGljZShpKSxcblx0ICAgIGRlYWN0aXZhdGVkOiBjdXJyZW50LnNsaWNlKGkpXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0R3VhcmRzIChcblx0ICByZWNvcmRzLFxuXHQgIG5hbWUsXG5cdCAgYmluZCxcblx0ICByZXZlcnNlXG5cdCkge1xuXHQgIHZhciBndWFyZHMgPSBmbGF0TWFwQ29tcG9uZW50cyhyZWNvcmRzLCBmdW5jdGlvbiAoZGVmLCBpbnN0YW5jZSwgbWF0Y2gsIGtleSkge1xuXHQgICAgdmFyIGd1YXJkID0gZXh0cmFjdEd1YXJkKGRlZiwgbmFtZSk7XG5cdCAgICBpZiAoZ3VhcmQpIHtcblx0ICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZ3VhcmQpXG5cdCAgICAgICAgPyBndWFyZC5tYXAoZnVuY3Rpb24gKGd1YXJkKSB7IHJldHVybiBiaW5kKGd1YXJkLCBpbnN0YW5jZSwgbWF0Y2gsIGtleSk7IH0pXG5cdCAgICAgICAgOiBiaW5kKGd1YXJkLCBpbnN0YW5jZSwgbWF0Y2gsIGtleSlcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gZmxhdHRlbihyZXZlcnNlID8gZ3VhcmRzLnJldmVyc2UoKSA6IGd1YXJkcylcblx0fVxuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEd1YXJkIChcblx0ICBkZWYsXG5cdCAga2V5XG5cdCkge1xuXHQgIGlmICh0eXBlb2YgZGVmICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAvLyBleHRlbmQgbm93IHNvIHRoYXQgZ2xvYmFsIG1peGlucyBhcmUgYXBwbGllZC5cblx0ICAgIGRlZiA9IF9WdWUuZXh0ZW5kKGRlZik7XG5cdCAgfVxuXHQgIHJldHVybiBkZWYub3B0aW9uc1trZXldXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RMZWF2ZUd1YXJkcyAoZGVhY3RpdmF0ZWQpIHtcblx0ICByZXR1cm4gZXh0cmFjdEd1YXJkcyhkZWFjdGl2YXRlZCwgJ2JlZm9yZVJvdXRlTGVhdmUnLCBiaW5kR3VhcmQsIHRydWUpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RVcGRhdGVIb29rcyAodXBkYXRlZCkge1xuXHQgIHJldHVybiBleHRyYWN0R3VhcmRzKHVwZGF0ZWQsICdiZWZvcmVSb3V0ZVVwZGF0ZScsIGJpbmRHdWFyZClcblx0fVxuXHRcblx0ZnVuY3Rpb24gYmluZEd1YXJkIChndWFyZCwgaW5zdGFuY2UpIHtcblx0ICBpZiAoaW5zdGFuY2UpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBib3VuZFJvdXRlR3VhcmQgKCkge1xuXHQgICAgICByZXR1cm4gZ3VhcmQuYXBwbHkoaW5zdGFuY2UsIGFyZ3VtZW50cylcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RFbnRlckd1YXJkcyAoXG5cdCAgYWN0aXZhdGVkLFxuXHQgIGNicyxcblx0ICBpc1ZhbGlkXG5cdCkge1xuXHQgIHJldHVybiBleHRyYWN0R3VhcmRzKGFjdGl2YXRlZCwgJ2JlZm9yZVJvdXRlRW50ZXInLCBmdW5jdGlvbiAoZ3VhcmQsIF8sIG1hdGNoLCBrZXkpIHtcblx0ICAgIHJldHVybiBiaW5kRW50ZXJHdWFyZChndWFyZCwgbWF0Y2gsIGtleSwgY2JzLCBpc1ZhbGlkKVxuXHQgIH0pXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJpbmRFbnRlckd1YXJkIChcblx0ICBndWFyZCxcblx0ICBtYXRjaCxcblx0ICBrZXksXG5cdCAgY2JzLFxuXHQgIGlzVmFsaWRcblx0KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHJvdXRlRW50ZXJHdWFyZCAodG8sIGZyb20sIG5leHQpIHtcblx0ICAgIHJldHVybiBndWFyZCh0bywgZnJvbSwgZnVuY3Rpb24gKGNiKSB7XG5cdCAgICAgIG5leHQoY2IpO1xuXHQgICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgY2JzLnB1c2goZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgLy8gIzc1MFxuXHQgICAgICAgICAgLy8gaWYgYSByb3V0ZXItdmlldyBpcyB3cmFwcGVkIHdpdGggYW4gb3V0LWluIHRyYW5zaXRpb24sXG5cdCAgICAgICAgICAvLyB0aGUgaW5zdGFuY2UgbWF5IG5vdCBoYXZlIGJlZW4gcmVnaXN0ZXJlZCBhdCB0aGlzIHRpbWUuXG5cdCAgICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gcG9sbCBmb3IgcmVnaXN0cmF0aW9uIHVudGlsIGN1cnJlbnQgcm91dGVcblx0ICAgICAgICAgIC8vIGlzIG5vIGxvbmdlciB2YWxpZC5cblx0ICAgICAgICAgIHBvbGwoY2IsIG1hdGNoLmluc3RhbmNlcywga2V5LCBpc1ZhbGlkKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBvbGwgKFxuXHQgIGNiLCAvLyBzb21laG93IGZsb3cgY2Fubm90IGluZmVyIHRoaXMgaXMgYSBmdW5jdGlvblxuXHQgIGluc3RhbmNlcyxcblx0ICBrZXksXG5cdCAgaXNWYWxpZFxuXHQpIHtcblx0ICBpZiAoaW5zdGFuY2VzW2tleV0pIHtcblx0ICAgIGNiKGluc3RhbmNlc1trZXldKTtcblx0ICB9IGVsc2UgaWYgKGlzVmFsaWQoKSkge1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHBvbGwoY2IsIGluc3RhbmNlcywga2V5LCBpc1ZhbGlkKTtcblx0ICAgIH0sIDE2KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0XG5cdHZhciBIVE1MNUhpc3RvcnkgPSAoZnVuY3Rpb24gKEhpc3RvcnkkJDEpIHtcblx0ICBmdW5jdGlvbiBIVE1MNUhpc3RvcnkgKHJvdXRlciwgYmFzZSkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgICAgSGlzdG9yeSQkMS5jYWxsKHRoaXMsIHJvdXRlciwgYmFzZSk7XG5cdFxuXHQgICAgdmFyIGV4cGVjdFNjcm9sbCA9IHJvdXRlci5vcHRpb25zLnNjcm9sbEJlaGF2aW9yO1xuXHRcblx0ICAgIGlmIChleHBlY3RTY3JvbGwpIHtcblx0ICAgICAgc2V0dXBTY3JvbGwoKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaW5pdExvY2F0aW9uID0gZ2V0TG9jYXRpb24odGhpcy5iYXNlKTtcblx0ICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIHZhciBjdXJyZW50ID0gdGhpcyQxLmN1cnJlbnQ7XG5cdFxuXHQgICAgICAvLyBBdm9pZGluZyBmaXJzdCBgcG9wc3RhdGVgIGV2ZW50IGRpc3BhdGNoZWQgaW4gc29tZSBicm93c2VycyBidXQgZmlyc3Rcblx0ICAgICAgLy8gaGlzdG9yeSByb3V0ZSBub3QgdXBkYXRlZCBzaW5jZSBhc3luYyBndWFyZCBhdCB0aGUgc2FtZSB0aW1lLlxuXHQgICAgICB2YXIgbG9jYXRpb24gPSBnZXRMb2NhdGlvbih0aGlzJDEuYmFzZSk7XG5cdCAgICAgIGlmICh0aGlzJDEuY3VycmVudCA9PT0gU1RBUlQgJiYgbG9jYXRpb24gPT09IGluaXRMb2NhdGlvbikge1xuXHQgICAgICAgIHJldHVyblxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzJDEudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcblx0ICAgICAgICBpZiAoZXhwZWN0U2Nyb2xsKSB7XG5cdCAgICAgICAgICBoYW5kbGVTY3JvbGwocm91dGVyLCByb3V0ZSwgY3VycmVudCwgdHJ1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKCBIaXN0b3J5JCQxICkgSFRNTDVIaXN0b3J5Ll9fcHJvdG9fXyA9IEhpc3RvcnkkJDE7XG5cdCAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEhpc3RvcnkkJDEgJiYgSGlzdG9yeSQkMS5wcm90b3R5cGUgKTtcblx0ICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSFRNTDVIaXN0b3J5O1xuXHRcblx0ICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28gKG4pIHtcblx0ICAgIHdpbmRvdy5oaXN0b3J5LmdvKG4pO1xuXHQgIH07XG5cdFxuXHQgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2ggKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgcmVmID0gdGhpcztcblx0ICAgIHZhciBmcm9tUm91dGUgPSByZWYuY3VycmVudDtcblx0ICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcblx0ICAgICAgcHVzaFN0YXRlKGNsZWFuUGF0aCh0aGlzJDEuYmFzZSArIHJvdXRlLmZ1bGxQYXRoKSk7XG5cdCAgICAgIGhhbmRsZVNjcm9sbCh0aGlzJDEucm91dGVyLCByb3V0ZSwgZnJvbVJvdXRlLCBmYWxzZSk7XG5cdCAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG5cdCAgICB9LCBvbkFib3J0KTtcblx0ICB9O1xuXHRcblx0ICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHJlZiA9IHRoaXM7XG5cdCAgICB2YXIgZnJvbVJvdXRlID0gcmVmLmN1cnJlbnQ7XG5cdCAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgIHJlcGxhY2VTdGF0ZShjbGVhblBhdGgodGhpcyQxLmJhc2UgKyByb3V0ZS5mdWxsUGF0aCkpO1xuXHQgICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGZyb21Sb3V0ZSwgZmFsc2UpO1xuXHQgICAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuXHQgICAgfSwgb25BYm9ydCk7XG5cdCAgfTtcblx0XG5cdCAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5lbnN1cmVVUkwgPSBmdW5jdGlvbiBlbnN1cmVVUkwgKHB1c2gpIHtcblx0ICAgIGlmIChnZXRMb2NhdGlvbih0aGlzLmJhc2UpICE9PSB0aGlzLmN1cnJlbnQuZnVsbFBhdGgpIHtcblx0ICAgICAgdmFyIGN1cnJlbnQgPSBjbGVhblBhdGgodGhpcy5iYXNlICsgdGhpcy5jdXJyZW50LmZ1bGxQYXRoKTtcblx0ICAgICAgcHVzaCA/IHB1c2hTdGF0ZShjdXJyZW50KSA6IHJlcGxhY2VTdGF0ZShjdXJyZW50KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmdldEN1cnJlbnRMb2NhdGlvbiA9IGZ1bmN0aW9uIGdldEN1cnJlbnRMb2NhdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gZ2V0TG9jYXRpb24odGhpcy5iYXNlKVxuXHQgIH07XG5cdFxuXHQgIHJldHVybiBIVE1MNUhpc3Rvcnk7XG5cdH0oSGlzdG9yeSkpO1xuXHRcblx0ZnVuY3Rpb24gZ2V0TG9jYXRpb24gKGJhc2UpIHtcblx0ICB2YXIgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblx0ICBpZiAoYmFzZSAmJiBwYXRoLmluZGV4T2YoYmFzZSkgPT09IDApIHtcblx0ICAgIHBhdGggPSBwYXRoLnNsaWNlKGJhc2UubGVuZ3RoKTtcblx0ICB9XG5cdCAgcmV0dXJuIChwYXRoIHx8ICcvJykgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhhc2hcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0dmFyIEhhc2hIaXN0b3J5ID0gKGZ1bmN0aW9uIChIaXN0b3J5JCQxKSB7XG5cdCAgZnVuY3Rpb24gSGFzaEhpc3RvcnkgKHJvdXRlciwgYmFzZSwgZmFsbGJhY2spIHtcblx0ICAgIEhpc3RvcnkkJDEuY2FsbCh0aGlzLCByb3V0ZXIsIGJhc2UpO1xuXHQgICAgLy8gY2hlY2sgaGlzdG9yeSBmYWxsYmFjayBkZWVwbGlua2luZ1xuXHQgICAgaWYgKGZhbGxiYWNrICYmIGNoZWNrRmFsbGJhY2sodGhpcy5iYXNlKSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0ICAgIGVuc3VyZVNsYXNoKCk7XG5cdCAgfVxuXHRcblx0ICBpZiAoIEhpc3RvcnkkJDEgKSBIYXNoSGlzdG9yeS5fX3Byb3RvX18gPSBIaXN0b3J5JCQxO1xuXHQgIEhhc2hIaXN0b3J5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEhpc3RvcnkkJDEgJiYgSGlzdG9yeSQkMS5wcm90b3R5cGUgKTtcblx0ICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBIYXNoSGlzdG9yeTtcblx0XG5cdCAgLy8gdGhpcyBpcyBkZWxheWVkIHVudGlsIHRoZSBhcHAgbW91bnRzXG5cdCAgLy8gdG8gYXZvaWQgdGhlIGhhc2hjaGFuZ2UgbGlzdGVuZXIgYmVpbmcgZmlyZWQgdG9vIGVhcmx5XG5cdCAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnNldHVwTGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMgKCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyO1xuXHQgICAgdmFyIGV4cGVjdFNjcm9sbCA9IHJvdXRlci5vcHRpb25zLnNjcm9sbEJlaGF2aW9yO1xuXHQgICAgdmFyIHN1cHBvcnRzU2Nyb2xsID0gc3VwcG9ydHNQdXNoU3RhdGUgJiYgZXhwZWN0U2Nyb2xsO1xuXHRcblx0ICAgIGlmIChzdXBwb3J0c1Njcm9sbCkge1xuXHQgICAgICBzZXR1cFNjcm9sbCgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKHN1cHBvcnRzUHVzaFN0YXRlID8gJ3BvcHN0YXRlJyA6ICdoYXNoY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgY3VycmVudCA9IHRoaXMkMS5jdXJyZW50O1xuXHQgICAgICBpZiAoIWVuc3VyZVNsYXNoKCkpIHtcblx0ICAgICAgICByZXR1cm5cblx0ICAgICAgfVxuXHQgICAgICB0aGlzJDEudHJhbnNpdGlvblRvKGdldEhhc2goKSwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgICAgaWYgKHN1cHBvcnRzU2Nyb2xsKSB7XG5cdCAgICAgICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGN1cnJlbnQsIHRydWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIXN1cHBvcnRzUHVzaFN0YXRlKSB7XG5cdCAgICAgICAgICByZXBsYWNlSGFzaChyb3V0ZS5mdWxsUGF0aCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHZhciByZWYgPSB0aGlzO1xuXHQgICAgdmFyIGZyb21Sb3V0ZSA9IHJlZi5jdXJyZW50O1xuXHQgICAgdGhpcy50cmFuc2l0aW9uVG8obG9jYXRpb24sIGZ1bmN0aW9uIChyb3V0ZSkge1xuXHQgICAgICBwdXNoSGFzaChyb3V0ZS5mdWxsUGF0aCk7XG5cdCAgICAgIGhhbmRsZVNjcm9sbCh0aGlzJDEucm91dGVyLCByb3V0ZSwgZnJvbVJvdXRlLCBmYWxzZSk7XG5cdCAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG5cdCAgICB9LCBvbkFib3J0KTtcblx0ICB9O1xuXHRcblx0ICBIYXNoSGlzdG9yeS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UgKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgcmVmID0gdGhpcztcblx0ICAgIHZhciBmcm9tUm91dGUgPSByZWYuY3VycmVudDtcblx0ICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcblx0ICAgICAgcmVwbGFjZUhhc2gocm91dGUuZnVsbFBhdGgpO1xuXHQgICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGZyb21Sb3V0ZSwgZmFsc2UpO1xuXHQgICAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuXHQgICAgfSwgb25BYm9ydCk7XG5cdCAgfTtcblx0XG5cdCAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28gKG4pIHtcblx0ICAgIHdpbmRvdy5oaXN0b3J5LmdvKG4pO1xuXHQgIH07XG5cdFxuXHQgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5lbnN1cmVVUkwgPSBmdW5jdGlvbiBlbnN1cmVVUkwgKHB1c2gpIHtcblx0ICAgIHZhciBjdXJyZW50ID0gdGhpcy5jdXJyZW50LmZ1bGxQYXRoO1xuXHQgICAgaWYgKGdldEhhc2goKSAhPT0gY3VycmVudCkge1xuXHQgICAgICBwdXNoID8gcHVzaEhhc2goY3VycmVudCkgOiByZXBsYWNlSGFzaChjdXJyZW50KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZ2V0Q3VycmVudExvY2F0aW9uID0gZnVuY3Rpb24gZ2V0Q3VycmVudExvY2F0aW9uICgpIHtcblx0ICAgIHJldHVybiBnZXRIYXNoKClcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gSGFzaEhpc3Rvcnk7XG5cdH0oSGlzdG9yeSkpO1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tGYWxsYmFjayAoYmFzZSkge1xuXHQgIHZhciBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGJhc2UpO1xuXHQgIGlmICghL15cXC8jLy50ZXN0KGxvY2F0aW9uKSkge1xuXHQgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoXG5cdCAgICAgIGNsZWFuUGF0aChiYXNlICsgJy8jJyArIGxvY2F0aW9uKVxuXHQgICAgKTtcblx0ICAgIHJldHVybiB0cnVlXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbnN1cmVTbGFzaCAoKSB7XG5cdCAgdmFyIHBhdGggPSBnZXRIYXNoKCk7XG5cdCAgaWYgKHBhdGguY2hhckF0KDApID09PSAnLycpIHtcblx0ICAgIHJldHVybiB0cnVlXG5cdCAgfVxuXHQgIHJlcGxhY2VIYXNoKCcvJyArIHBhdGgpO1xuXHQgIHJldHVybiBmYWxzZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRIYXNoICgpIHtcblx0ICAvLyBXZSBjYW4ndCB1c2Ugd2luZG93LmxvY2F0aW9uLmhhc2ggaGVyZSBiZWNhdXNlIGl0J3Mgbm90XG5cdCAgLy8gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMgLSBGaXJlZm94IHdpbGwgcHJlLWRlY29kZSBpdCFcblx0ICB2YXIgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHQgIHZhciBpbmRleCA9IGhyZWYuaW5kZXhPZignIycpO1xuXHQgIHJldHVybiBpbmRleCA9PT0gLTEgPyAnJyA6IGhyZWYuc2xpY2UoaW5kZXggKyAxKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRVcmwgKHBhdGgpIHtcblx0ICB2YXIgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHQgIHZhciBpID0gaHJlZi5pbmRleE9mKCcjJyk7XG5cdCAgdmFyIGJhc2UgPSBpID49IDAgPyBocmVmLnNsaWNlKDAsIGkpIDogaHJlZjtcblx0ICByZXR1cm4gKGJhc2UgKyBcIiNcIiArIHBhdGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHB1c2hIYXNoIChwYXRoKSB7XG5cdCAgaWYgKHN1cHBvcnRzUHVzaFN0YXRlKSB7XG5cdCAgICBwdXNoU3RhdGUoZ2V0VXJsKHBhdGgpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBwYXRoO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVwbGFjZUhhc2ggKHBhdGgpIHtcblx0ICBpZiAoc3VwcG9ydHNQdXNoU3RhdGUpIHtcblx0ICAgIHJlcGxhY2VTdGF0ZShnZXRVcmwocGF0aCkpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShnZXRVcmwocGF0aCkpO1xuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0dmFyIEFic3RyYWN0SGlzdG9yeSA9IChmdW5jdGlvbiAoSGlzdG9yeSQkMSkge1xuXHQgIGZ1bmN0aW9uIEFic3RyYWN0SGlzdG9yeSAocm91dGVyLCBiYXNlKSB7XG5cdCAgICBIaXN0b3J5JCQxLmNhbGwodGhpcywgcm91dGVyLCBiYXNlKTtcblx0ICAgIHRoaXMuc3RhY2sgPSBbXTtcblx0ICAgIHRoaXMuaW5kZXggPSAtMTtcblx0ICB9XG5cdFxuXHQgIGlmICggSGlzdG9yeSQkMSApIEFic3RyYWN0SGlzdG9yeS5fX3Byb3RvX18gPSBIaXN0b3J5JCQxO1xuXHQgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBIaXN0b3J5JCQxICYmIEhpc3RvcnkkJDEucHJvdG90eXBlICk7XG5cdCAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFic3RyYWN0SGlzdG9yeTtcblx0XG5cdCAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcblx0ICAgICAgdGhpcyQxLnN0YWNrID0gdGhpcyQxLnN0YWNrLnNsaWNlKDAsIHRoaXMkMS5pbmRleCArIDEpLmNvbmNhdChyb3V0ZSk7XG5cdCAgICAgIHRoaXMkMS5pbmRleCsrO1xuXHQgICAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuXHQgICAgfSwgb25BYm9ydCk7XG5cdCAgfTtcblx0XG5cdCAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZSAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcblx0ICAgICAgdGhpcyQxLnN0YWNrID0gdGhpcyQxLnN0YWNrLnNsaWNlKDAsIHRoaXMkMS5pbmRleCkuY29uY2F0KHJvdXRlKTtcblx0ICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcblx0ICAgIH0sIG9uQWJvcnQpO1xuXHQgIH07XG5cdFxuXHQgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyAobikge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHRhcmdldEluZGV4ID0gdGhpcy5pbmRleCArIG47XG5cdCAgICBpZiAodGFyZ2V0SW5kZXggPCAwIHx8IHRhcmdldEluZGV4ID49IHRoaXMuc3RhY2subGVuZ3RoKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHQgICAgdmFyIHJvdXRlID0gdGhpcy5zdGFja1t0YXJnZXRJbmRleF07XG5cdCAgICB0aGlzLmNvbmZpcm1UcmFuc2l0aW9uKHJvdXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMkMS5pbmRleCA9IHRhcmdldEluZGV4O1xuXHQgICAgICB0aGlzJDEudXBkYXRlUm91dGUocm91dGUpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5nZXRDdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbiBnZXRDdXJyZW50TG9jYXRpb24gKCkge1xuXHQgICAgdmFyIGN1cnJlbnQgPSB0aGlzLnN0YWNrW3RoaXMuc3RhY2subGVuZ3RoIC0gMV07XG5cdCAgICByZXR1cm4gY3VycmVudCA/IGN1cnJlbnQuZnVsbFBhdGggOiAnLydcblx0ICB9O1xuXHRcblx0ICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmVuc3VyZVVSTCA9IGZ1bmN0aW9uIGVuc3VyZVVSTCAoKSB7XG5cdCAgICAvLyBub29wXG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEFic3RyYWN0SGlzdG9yeTtcblx0fShIaXN0b3J5KSk7XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBWdWVSb3V0ZXIgPSBmdW5jdGlvbiBWdWVSb3V0ZXIgKG9wdGlvbnMpIHtcblx0ICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblx0XG5cdCAgdGhpcy5hcHAgPSBudWxsO1xuXHQgIHRoaXMuYXBwcyA9IFtdO1xuXHQgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgdGhpcy5iZWZvcmVIb29rcyA9IFtdO1xuXHQgIHRoaXMucmVzb2x2ZUhvb2tzID0gW107XG5cdCAgdGhpcy5hZnRlckhvb2tzID0gW107XG5cdCAgdGhpcy5tYXRjaGVyID0gY3JlYXRlTWF0Y2hlcihvcHRpb25zLnJvdXRlcyB8fCBbXSwgdGhpcyk7XG5cdFxuXHQgIHZhciBtb2RlID0gb3B0aW9ucy5tb2RlIHx8ICdoYXNoJztcblx0ICB0aGlzLmZhbGxiYWNrID0gbW9kZSA9PT0gJ2hpc3RvcnknICYmICFzdXBwb3J0c1B1c2hTdGF0ZSAmJiBvcHRpb25zLmZhbGxiYWNrICE9PSBmYWxzZTtcblx0ICBpZiAodGhpcy5mYWxsYmFjaykge1xuXHQgICAgbW9kZSA9ICdoYXNoJztcblx0ICB9XG5cdCAgaWYgKCFpbkJyb3dzZXIpIHtcblx0ICAgIG1vZGUgPSAnYWJzdHJhY3QnO1xuXHQgIH1cblx0ICB0aGlzLm1vZGUgPSBtb2RlO1xuXHRcblx0ICBzd2l0Y2ggKG1vZGUpIHtcblx0ICAgIGNhc2UgJ2hpc3RvcnknOlxuXHQgICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSFRNTDVIaXN0b3J5KHRoaXMsIG9wdGlvbnMuYmFzZSk7XG5cdCAgICAgIGJyZWFrXG5cdCAgICBjYXNlICdoYXNoJzpcblx0ICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhhc2hIaXN0b3J5KHRoaXMsIG9wdGlvbnMuYmFzZSwgdGhpcy5mYWxsYmFjayk7XG5cdCAgICAgIGJyZWFrXG5cdCAgICBjYXNlICdhYnN0cmFjdCc6XG5cdCAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBBYnN0cmFjdEhpc3RvcnkodGhpcywgb3B0aW9ucy5iYXNlKTtcblx0ICAgICAgYnJlYWtcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgYXNzZXJ0KGZhbHNlLCAoXCJpbnZhbGlkIG1vZGU6IFwiICsgbW9kZSkpO1xuXHQgICAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgY3VycmVudFJvdXRlOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gbWF0Y2ggKFxuXHQgIHJhdyxcblx0ICBjdXJyZW50LFxuXHQgIHJlZGlyZWN0ZWRGcm9tXG5cdCkge1xuXHQgIHJldHVybiB0aGlzLm1hdGNoZXIubWF0Y2gocmF3LCBjdXJyZW50LCByZWRpcmVjdGVkRnJvbSlcblx0fTtcblx0XG5cdHByb3RvdHlwZUFjY2Vzc29ycy5jdXJyZW50Um91dGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB0aGlzLmhpc3RvcnkgJiYgdGhpcy5oaXN0b3J5LmN1cnJlbnRcblx0fTtcblx0XG5cdFZ1ZVJvdXRlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIGluaXQgKGFwcCAvKiBWdWUgY29tcG9uZW50IGluc3RhbmNlICovKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBhc3NlcnQoXG5cdCAgICBpbnN0YWxsLmluc3RhbGxlZCxcblx0ICAgIFwibm90IGluc3RhbGxlZC4gTWFrZSBzdXJlIHRvIGNhbGwgYFZ1ZS51c2UoVnVlUm91dGVyKWAgXCIgK1xuXHQgICAgXCJiZWZvcmUgY3JlYXRpbmcgcm9vdCBpbnN0YW5jZS5cIlxuXHQgICk7XG5cdFxuXHQgIHRoaXMuYXBwcy5wdXNoKGFwcCk7XG5cdFxuXHQgIC8vIG1haW4gYXBwIGFscmVhZHkgaW5pdGlhbGl6ZWQuXG5cdCAgaWYgKHRoaXMuYXBwKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHRoaXMuYXBwID0gYXBwO1xuXHRcblx0ICB2YXIgaGlzdG9yeSA9IHRoaXMuaGlzdG9yeTtcblx0XG5cdCAgaWYgKGhpc3RvcnkgaW5zdGFuY2VvZiBIVE1MNUhpc3RvcnkpIHtcblx0ICAgIGhpc3RvcnkudHJhbnNpdGlvblRvKGhpc3RvcnkuZ2V0Q3VycmVudExvY2F0aW9uKCkpO1xuXHQgIH0gZWxzZSBpZiAoaGlzdG9yeSBpbnN0YW5jZW9mIEhhc2hIaXN0b3J5KSB7XG5cdCAgICB2YXIgc2V0dXBIYXNoTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGhpc3Rvcnkuc2V0dXBMaXN0ZW5lcnMoKTtcblx0ICAgIH07XG5cdCAgICBoaXN0b3J5LnRyYW5zaXRpb25Ubyhcblx0ICAgICAgaGlzdG9yeS5nZXRDdXJyZW50TG9jYXRpb24oKSxcblx0ICAgICAgc2V0dXBIYXNoTGlzdGVuZXIsXG5cdCAgICAgIHNldHVwSGFzaExpc3RlbmVyXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgaGlzdG9yeS5saXN0ZW4oZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICB0aGlzJDEuYXBwcy5mb3JFYWNoKGZ1bmN0aW9uIChhcHApIHtcblx0ICAgICAgYXBwLl9yb3V0ZSA9IHJvdXRlO1xuXHQgICAgfSk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLmJlZm9yZUVhY2ggPSBmdW5jdGlvbiBiZWZvcmVFYWNoIChmbikge1xuXHQgIHJldHVybiByZWdpc3Rlckhvb2sodGhpcy5iZWZvcmVIb29rcywgZm4pXG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLmJlZm9yZVJlc29sdmUgPSBmdW5jdGlvbiBiZWZvcmVSZXNvbHZlIChmbikge1xuXHQgIHJldHVybiByZWdpc3Rlckhvb2sodGhpcy5yZXNvbHZlSG9va3MsIGZuKVxuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5hZnRlckVhY2ggPSBmdW5jdGlvbiBhZnRlckVhY2ggKGZuKSB7XG5cdCAgcmV0dXJuIHJlZ2lzdGVySG9vayh0aGlzLmFmdGVySG9va3MsIGZuKVxuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5vblJlYWR5ID0gZnVuY3Rpb24gb25SZWFkeSAoY2IsIGVycm9yQ2IpIHtcblx0ICB0aGlzLmhpc3Rvcnkub25SZWFkeShjYiwgZXJyb3JDYik7XG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yIChlcnJvckNiKSB7XG5cdCAgdGhpcy5oaXN0b3J5Lm9uRXJyb3IoZXJyb3JDYik7XG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuXHQgIHRoaXMuaGlzdG9yeS5wdXNoKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KTtcblx0fTtcblx0XG5cdFZ1ZVJvdXRlci5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UgKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG5cdCAgdGhpcy5oaXN0b3J5LnJlcGxhY2UobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpO1xuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvIChuKSB7XG5cdCAgdGhpcy5oaXN0b3J5LmdvKG4pO1xuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5iYWNrID0gZnVuY3Rpb24gYmFjayAoKSB7XG5cdCAgdGhpcy5nbygtMSk7XG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLmZvcndhcmQgPSBmdW5jdGlvbiBmb3J3YXJkICgpIHtcblx0ICB0aGlzLmdvKDEpO1xuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5nZXRNYXRjaGVkQ29tcG9uZW50cyA9IGZ1bmN0aW9uIGdldE1hdGNoZWRDb21wb25lbnRzICh0bykge1xuXHQgIHZhciByb3V0ZSA9IHRvXG5cdCAgICA/IHRvLm1hdGNoZWRcblx0ICAgICAgPyB0b1xuXHQgICAgICA6IHRoaXMucmVzb2x2ZSh0bykucm91dGVcblx0ICAgIDogdGhpcy5jdXJyZW50Um91dGU7XG5cdCAgaWYgKCFyb3V0ZSkge1xuXHQgICAgcmV0dXJuIFtdXG5cdCAgfVxuXHQgIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIHJvdXRlLm1hdGNoZWQubWFwKGZ1bmN0aW9uIChtKSB7XG5cdCAgICByZXR1cm4gT2JqZWN0LmtleXMobS5jb21wb25lbnRzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gbS5jb21wb25lbnRzW2tleV1cblx0ICAgIH0pXG5cdCAgfSkpXG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbiByZXNvbHZlIChcblx0ICB0byxcblx0ICBjdXJyZW50LFxuXHQgIGFwcGVuZFxuXHQpIHtcblx0ICB2YXIgbG9jYXRpb24gPSBub3JtYWxpemVMb2NhdGlvbihcblx0ICAgIHRvLFxuXHQgICAgY3VycmVudCB8fCB0aGlzLmhpc3RvcnkuY3VycmVudCxcblx0ICAgIGFwcGVuZCxcblx0ICAgIHRoaXNcblx0ICApO1xuXHQgIHZhciByb3V0ZSA9IHRoaXMubWF0Y2gobG9jYXRpb24sIGN1cnJlbnQpO1xuXHQgIHZhciBmdWxsUGF0aCA9IHJvdXRlLnJlZGlyZWN0ZWRGcm9tIHx8IHJvdXRlLmZ1bGxQYXRoO1xuXHQgIHZhciBiYXNlID0gdGhpcy5oaXN0b3J5LmJhc2U7XG5cdCAgdmFyIGhyZWYgPSBjcmVhdGVIcmVmKGJhc2UsIGZ1bGxQYXRoLCB0aGlzLm1vZGUpO1xuXHQgIHJldHVybiB7XG5cdCAgICBsb2NhdGlvbjogbG9jYXRpb24sXG5cdCAgICByb3V0ZTogcm91dGUsXG5cdCAgICBocmVmOiBocmVmLFxuXHQgICAgLy8gZm9yIGJhY2t3YXJkcyBjb21wYXRcblx0ICAgIG5vcm1hbGl6ZWRUbzogbG9jYXRpb24sXG5cdCAgICByZXNvbHZlZDogcm91dGVcblx0ICB9XG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLmFkZFJvdXRlcyA9IGZ1bmN0aW9uIGFkZFJvdXRlcyAocm91dGVzKSB7XG5cdCAgdGhpcy5tYXRjaGVyLmFkZFJvdXRlcyhyb3V0ZXMpO1xuXHQgIGlmICh0aGlzLmhpc3RvcnkuY3VycmVudCAhPT0gU1RBUlQpIHtcblx0ICAgIHRoaXMuaGlzdG9yeS50cmFuc2l0aW9uVG8odGhpcy5oaXN0b3J5LmdldEN1cnJlbnRMb2NhdGlvbigpKTtcblx0ICB9XG5cdH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggVnVlUm91dGVyLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cdFxuXHRmdW5jdGlvbiByZWdpc3Rlckhvb2sgKGxpc3QsIGZuKSB7XG5cdCAgbGlzdC5wdXNoKGZuKTtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGkgPSBsaXN0LmluZGV4T2YoZm4pO1xuXHQgICAgaWYgKGkgPiAtMSkgeyBsaXN0LnNwbGljZShpLCAxKTsgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlSHJlZiAoYmFzZSwgZnVsbFBhdGgsIG1vZGUpIHtcblx0ICB2YXIgcGF0aCA9IG1vZGUgPT09ICdoYXNoJyA/ICcjJyArIGZ1bGxQYXRoIDogZnVsbFBhdGg7XG5cdCAgcmV0dXJuIGJhc2UgPyBjbGVhblBhdGgoYmFzZSArICcvJyArIHBhdGgpIDogcGF0aFxuXHR9XG5cdFxuXHRWdWVSb3V0ZXIuaW5zdGFsbCA9IGluc3RhbGw7XG5cdFZ1ZVJvdXRlci52ZXJzaW9uID0gJzMuMC4xJztcblx0XG5cdGlmIChpbkJyb3dzZXIgJiYgd2luZG93LlZ1ZSkge1xuXHQgIHdpbmRvdy5WdWUudXNlKFZ1ZVJvdXRlcik7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVnVlUm91dGVyO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykpKVxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgQXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIGRlZmF1bHRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG5cdCAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuXHQgIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuXHQgIHZhciBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXHRcblx0ICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuXHQgIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0KTtcblx0XG5cdCAgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlXG5cdCAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0KTtcblx0XG5cdCAgcmV0dXJuIGluc3RhbmNlO1xuXHR9XG5cdFxuXHQvLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcblx0dmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpO1xuXHRcblx0Ly8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5cdGF4aW9zLkF4aW9zID0gQXhpb3M7XG5cdFxuXHQvLyBGYWN0b3J5IGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2VzXG5cdGF4aW9zLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykge1xuXHQgIHJldHVybiBjcmVhdGVJbnN0YW5jZSh1dGlscy5tZXJnZShkZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTtcblx0fTtcblx0XG5cdC8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuXHRheGlvcy5DYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblx0YXhpb3MuQ2FuY2VsVG9rZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0YXhpb3MuaXNDYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0XG5cdC8vIEV4cG9zZSBhbGwvc3ByZWFkXG5cdGF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuXHQgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG5cdH07XG5cdGF4aW9zLnNwcmVhZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBheGlvcztcblx0XG5cdC8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxuXHRtb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gYXhpb3M7XG5cblxuLyoqKi8gfSksXG4vKiAxMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBiaW5kID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBpc0J1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0LypnbG9iYWwgdG9TdHJpbmc6dHJ1ZSovXG5cdFxuXHQvLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXHRcblx0dmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnKSAmJiAodmFsIGluc3RhbmNlb2YgRm9ybURhdGEpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuXHQgIHZhciByZXN1bHQ7XG5cdCAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuXHQgICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAodmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXJcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc051bWJlcih2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbCkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcblx0ICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBEYXRlXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBEYXRlXSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNGaWxlKHZhbCkge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0Jsb2IodmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvblxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHtcblx0ICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2Vcblx0ICovXG5cdGZ1bmN0aW9uIHRyaW0oc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKS5yZXBsYWNlKC9cXHMqJC8sICcnKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudFxuXHQgKlxuXHQgKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLlxuXHQgKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuXG5cdCAqXG5cdCAqIHdlYiB3b3JrZXJzOlxuXHQgKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWRcblx0ICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcblx0ICpcblx0ICogcmVhY3QtbmF0aXZlOlxuXHQgKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG5cdCAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiAoXG5cdCAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuXHQgICk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cblx0ICpcblx0ICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuXHQgKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cblx0ICpcblx0ICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3Npbmdcblx0ICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuXHQgKi9cblx0ZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XG5cdCAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG5cdCAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG5cdCAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG5cdCAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cblx0ICAgIG9iaiA9IFtvYmpdO1xuXHQgIH1cblx0XG5cdCAgaWYgKGlzQXJyYXkob2JqKSkge1xuXHQgICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcblx0ICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcblx0ICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG5cdCAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuXHQgKlxuXHQgKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuXHQgKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG5cdCAqXG5cdCAqIEV4YW1wbGU6XG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcblx0ICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2Vcblx0ICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcblx0ICB2YXIgcmVzdWx0ID0ge307XG5cdCAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcblx0ICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXN1bHRba2V5XSA9IHZhbDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcblx0ICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuXHQgKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cblx0ICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG5cdCAqL1xuXHRmdW5jdGlvbiBleHRlbmQoYSwgYiwgdGhpc0FyZykge1xuXHQgIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcblx0ICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYVtrZXldID0gdmFsO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiBhO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBpc0FycmF5OiBpc0FycmF5LFxuXHQgIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsXG5cdCAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuXHQgIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG5cdCAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LFxuXHQgIGlzU3RyaW5nOiBpc1N0cmluZyxcblx0ICBpc051bWJlcjogaXNOdW1iZXIsXG5cdCAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuXHQgIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcblx0ICBpc0RhdGU6IGlzRGF0ZSxcblx0ICBpc0ZpbGU6IGlzRmlsZSxcblx0ICBpc0Jsb2I6IGlzQmxvYixcblx0ICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuXHQgIGlzU3RyZWFtOiBpc1N0cmVhbSxcblx0ICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsXG5cdCAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuXHQgIGZvckVhY2g6IGZvckVhY2gsXG5cdCAgbWVyZ2U6IG1lcmdlLFxuXHQgIGV4dGVuZDogZXh0ZW5kLFxuXHQgIHRyaW06IHRyaW1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGlzIGEgQnVmZmVyXG5cdCAqXG5cdCAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG5cdCAqIEBsaWNlbnNlICBNSVRcblx0ICovXG5cdFxuXHQvLyBUaGUgX2lzQnVmZmVyIGNoZWNrIGlzIGZvciBTYWZhcmkgNS03IHN1cHBvcnQsIGJlY2F1c2UgaXQncyBtaXNzaW5nXG5cdC8vIE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHlcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAhPSBudWxsICYmIChpc0J1ZmZlcihvYmopIHx8IGlzU2xvd0J1ZmZlcihvYmopIHx8ICEhb2JqLl9pc0J1ZmZlcilcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNCdWZmZXIgKG9iaikge1xuXHQgIHJldHVybiAhIW9iai5jb25zdHJ1Y3RvciAmJiB0eXBlb2Ygb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopXG5cdH1cblx0XG5cdC8vIEZvciBOb2RlIHYwLjEwIHN1cHBvcnQuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHkuXG5cdGZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBvYmoucmVhZEZsb2F0TEUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5zbGljZSA9PT0gJ2Z1bmN0aW9uJyAmJiBpc0J1ZmZlcihvYmouc2xpY2UoMCwgMCkpXG5cdH1cblxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGRlZmF1bHRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgSW50ZXJjZXB0b3JNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdHZhciBkaXNwYXRjaFJlcXVlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3Ncblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG5cdCAqL1xuXHRmdW5jdGlvbiBBeGlvcyhpbnN0YW5jZUNvbmZpZykge1xuXHQgIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcblx0ICB0aGlzLmludGVyY2VwdG9ycyA9IHtcblx0ICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxcblx0ICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGlzcGF0Y2ggYSByZXF1ZXN0XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuXHQgKi9cblx0QXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuXHQgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuXHQgIC8vIEFsbG93IGZvciBheGlvcygnZXhhbXBsZS91cmwnWywgY29uZmlnXSkgYSBsYSBmZXRjaCBBUElcblx0ICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0ICAgIGNvbmZpZyA9IHV0aWxzLm1lcmdlKHtcblx0ICAgICAgdXJsOiBhcmd1bWVudHNbMF1cblx0ICAgIH0sIGFyZ3VtZW50c1sxXSk7XG5cdCAgfVxuXHRcblx0ICBjb25maWcgPSB1dGlscy5tZXJnZShkZWZhdWx0cywge21ldGhvZDogJ2dldCd9LCB0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuXHQgIGNvbmZpZy5tZXRob2QgPSBjb25maWcubWV0aG9kLnRvTG93ZXJDYXNlKCk7XG5cdFxuXHQgIC8vIEhvb2sgdXAgaW50ZXJjZXB0b3JzIG1pZGRsZXdhcmVcblx0ICB2YXIgY2hhaW4gPSBbZGlzcGF0Y2hSZXF1ZXN0LCB1bmRlZmluZWRdO1xuXHQgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7XG5cdFxuXHQgIHRoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuXHQgICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcblx0ICB9KTtcblx0XG5cdCAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcblx0ICAgIGNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG5cdCAgfSk7XG5cdFxuXHQgIHdoaWxlIChjaGFpbi5sZW5ndGgpIHtcblx0ICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oY2hhaW4uc2hpZnQoKSwgY2hhaW4uc2hpZnQoKSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcHJvbWlzZTtcblx0fTtcblx0XG5cdC8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xuXHR1dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcblx0ICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuXHQgIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcblx0ICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG5cdCAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICB1cmw6IHVybFxuXHQgICAgfSkpO1xuXHQgIH07XG5cdH0pO1xuXHRcblx0dXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcblx0ICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuXHQgIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcblx0ICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG5cdCAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICB1cmw6IHVybCxcblx0ICAgICAgZGF0YTogZGF0YVxuXHQgICAgfSkpO1xuXHQgIH07XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcblxuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdHZhciBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHtcblx0ICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuXHQgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7XG5cdCAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG5cdCAgdmFyIGFkYXB0ZXI7XG5cdCAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcblx0ICAgIGFkYXB0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgLy8gRm9yIG5vZGUgdXNlIEhUVFAgYWRhcHRlclxuXHQgICAgYWRhcHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHQgIH1cblx0ICByZXR1cm4gYWRhcHRlcjtcblx0fVxuXHRcblx0dmFyIGRlZmF1bHRzID0ge1xuXHQgIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cdFxuXHQgIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHtcblx0ICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuXHQgICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcblx0ICAgICAgdXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKSB8fFxuXHQgICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuXHQgICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuXHQgICAgICB1dGlscy5pc0ZpbGUoZGF0YSkgfHxcblx0ICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG5cdCAgICApIHtcblx0ICAgICAgcmV0dXJuIGRhdGE7XG5cdCAgICB9XG5cdCAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcblx0ICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyO1xuXHQgICAgfVxuXHQgICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG5cdCAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnKTtcblx0ICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcblx0ICAgIH1cblx0ICAgIGlmICh1dGlscy5pc09iamVjdChkYXRhKSkge1xuXHQgICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcpO1xuXHQgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGF0YTtcblx0ICB9XSxcblx0XG5cdCAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7XG5cdCAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cblx0ICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcblx0ICAgICAgfSBjYXRjaCAoZSkgeyAvKiBJZ25vcmUgKi8gfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdCAgfV0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYVxuXHQgICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG5cdCAgICovXG5cdCAgdGltZW91dDogMCxcblx0XG5cdCAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcblx0ICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsXG5cdFxuXHQgIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuXHRcblx0ICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7XG5cdCAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZGVmYXVsdHMuaGVhZGVycyA9IHtcblx0ICBjb21tb246IHtcblx0ICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuXHQgIH1cblx0fTtcblx0XG5cdHV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcblx0ICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTtcblx0fSk7XG5cdFxuXHR1dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuXHQgIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykpKVxuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgbm9ybWFsaXplZE5hbWUpIHtcblx0ICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIodmFsdWUsIG5hbWUpIHtcblx0ICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcblx0ICAgICAgaGVhZGVyc1tub3JtYWxpemVkTmFtZV0gPSB2YWx1ZTtcblx0ICAgICAgZGVsZXRlIGhlYWRlcnNbbmFtZV07XG5cdCAgICB9XG5cdCAgfSk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBzZXR0bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIGJ1aWxkVVJMID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciBwYXJzZUhlYWRlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIGlzVVJMU2FtZU9yaWdpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHR2YXIgY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIGJ0b2EgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmJ0b2EgJiYgd2luZG93LmJ0b2EuYmluZCh3aW5kb3cpKSB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcblx0ICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG5cdCAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcblx0XG5cdCAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcblx0ICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICB2YXIgbG9hZEV2ZW50ID0gJ29ucmVhZHlzdGF0ZWNoYW5nZSc7XG5cdCAgICB2YXIgeERvbWFpbiA9IGZhbHNlO1xuXHRcblx0ICAgIC8vIEZvciBJRSA4LzkgQ09SUyBzdXBwb3J0XG5cdCAgICAvLyBPbmx5IHN1cHBvcnRzIFBPU1QgYW5kIEdFVCBjYWxscyBhbmQgZG9lc24ndCByZXR1cm5zIHRoZSByZXNwb25zZSBoZWFkZXJzLlxuXHQgICAgLy8gRE9OJ1QgZG8gdGhpcyBmb3IgdGVzdGluZyBiL2MgWE1MSHR0cFJlcXVlc3QgaXMgbW9ja2VkLCBub3QgWERvbWFpblJlcXVlc3QuXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0JyAmJlxuXHQgICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgICAgd2luZG93LlhEb21haW5SZXF1ZXN0ICYmICEoJ3dpdGhDcmVkZW50aWFscycgaW4gcmVxdWVzdCkgJiZcblx0ICAgICAgICAhaXNVUkxTYW1lT3JpZ2luKGNvbmZpZy51cmwpKSB7XG5cdCAgICAgIHJlcXVlc3QgPSBuZXcgd2luZG93LlhEb21haW5SZXF1ZXN0KCk7XG5cdCAgICAgIGxvYWRFdmVudCA9ICdvbmxvYWQnO1xuXHQgICAgICB4RG9tYWluID0gdHJ1ZTtcblx0ICAgICAgcmVxdWVzdC5vbnByb2dyZXNzID0gZnVuY3Rpb24gaGFuZGxlUHJvZ3Jlc3MoKSB7fTtcblx0ICAgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge307XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuXHQgICAgaWYgKGNvbmZpZy5hdXRoKSB7XG5cdCAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnO1xuXHQgICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCB8fCAnJztcblx0ICAgICAgcmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChjb25maWcudXJsLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpO1xuXHRcblx0ICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG5cdCAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcblx0XG5cdCAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlXG5cdCAgICByZXF1ZXN0W2xvYWRFdmVudF0gPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuXHQgICAgICBpZiAoIXJlcXVlc3QgfHwgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCAmJiAheERvbWFpbikpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuXHQgICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuXHQgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuXHQgICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG5cdCAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2Vcblx0ICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuXHQgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gIWNvbmZpZy5yZXNwb25zZVR5cGUgfHwgY29uZmlnLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnID8gcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuXHQgICAgICB2YXIgcmVzcG9uc2UgPSB7XG5cdCAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuXHQgICAgICAgIC8vIElFIHNlbmRzIDEyMjMgaW5zdGVhZCBvZiAyMDQgKGh0dHBzOi8vZ2l0aHViLmNvbS9heGlvcy9heGlvcy9pc3N1ZXMvMjAxKVxuXHQgICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMgPT09IDEyMjMgPyAyMDQgOiByZXF1ZXN0LnN0YXR1cyxcblx0ICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/ICdObyBDb250ZW50JyA6IHJlcXVlc3Quc3RhdHVzVGV4dCxcblx0ICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG5cdCAgICAgICAgY29uZmlnOiBjb25maWcsXG5cdCAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuXHRcblx0ICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuXHQgICAgICByZXF1ZXN0ID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuXHQgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG5cdCAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlclxuXHQgICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3Jcblx0ICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7XG5cdFxuXHQgICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG5cdCAgICAgIHJlcXVlc3QgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBIYW5kbGUgdGltZW91dFxuXHQgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge1xuXHQgICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJyxcblx0ICAgICAgICByZXF1ZXN0KSk7XG5cdFxuXHQgICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG5cdCAgICAgIHJlcXVlc3QgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBBZGQgeHNyZiBoZWFkZXJcblx0ICAgIC8vIFRoaXMgaXMgb25seSBkb25lIGlmIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50LlxuXHQgICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cblx0ICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG5cdCAgICAgIHZhciBjb29raWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHQgICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcblx0ICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cblx0ICAgICAgICAgIGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDpcblx0ICAgICAgICAgIHVuZGVmaW5lZDtcblx0XG5cdCAgICAgIGlmICh4c3JmVmFsdWUpIHtcblx0ICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWRkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3Rcblx0ICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuXHQgICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0RGF0YSA9PT0gJ3VuZGVmaW5lZCcgJiYga2V5LnRvTG93ZXJDYXNlKCkgPT09ICdjb250ZW50LXR5cGUnKSB7XG5cdCAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG5cdCAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3Rcblx0ICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG5cdCAgICBpZiAoY29uZmlnLndpdGhDcmVkZW50aWFscykge1xuXHQgICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9IHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuXHQgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBFeHBlY3RlZCBET01FeGNlcHRpb24gdGhyb3duIGJ5IGJyb3dzZXJzIG5vdCBjb21wYXRpYmxlIFhNTEh0dHBSZXF1ZXN0IExldmVsIDIuXG5cdCAgICAgICAgLy8gQnV0LCB0aGlzIGNhbiBiZSBzdXBwcmVzc2VkIGZvciAnanNvbicgdHlwZSBhcyBpdCBjYW4gYmUgcGFyc2VkIGJ5IGRlZmF1bHQgJ3RyYW5zZm9ybVJlc3BvbnNlJyBmdW5jdGlvbi5cblx0ICAgICAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XG5cdCAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcblx0ICAgIGlmICh0eXBlb2YgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcblx0ICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHtcblx0ICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25VcGxvYWRQcm9ncmVzcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuXHQgICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uXG5cdCAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbi5wcm9taXNlLnRoZW4oZnVuY3Rpb24gb25DYW5jZWxlZChjYW5jZWwpIHtcblx0ICAgICAgICBpZiAoIXJlcXVlc3QpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcblx0ICAgICAgICByZWplY3QoY2FuY2VsKTtcblx0ICAgICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG5cdCAgICAgICAgcmVxdWVzdCA9IG51bGw7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChyZXF1ZXN0RGF0YSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHJlcXVlc3REYXRhID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTZW5kIHRoZSByZXF1ZXN0XG5cdCAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykpKVxuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGNyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHQvKipcblx0ICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cblx0ICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcblx0ICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7XG5cdCAgLy8gTm90ZTogc3RhdHVzIGlzIG5vdCBleHBvc2VkIGJ5IFhEb21haW5SZXF1ZXN0XG5cdCAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcblx0ICAgIHJlc29sdmUocmVzcG9uc2UpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZWplY3QoY3JlYXRlRXJyb3IoXG5cdCAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG5cdCAgICAgIHJlc3BvbnNlLmNvbmZpZyxcblx0ICAgICAgbnVsbCxcblx0ICAgICAgcmVzcG9uc2UucmVxdWVzdCxcblx0ICAgICAgcmVzcG9uc2Vcblx0ICAgICkpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGVuaGFuY2VFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG5cdCAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuXHQgIHJldHVybiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cblx0ICpcblx0ICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG5cdCAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGVycm9yLlxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcblx0ICBlcnJvci5jb25maWcgPSBjb25maWc7XG5cdCAgaWYgKGNvZGUpIHtcblx0ICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuXHQgIH1cblx0ICBlcnJvci5yZXF1ZXN0ID0gcmVxdWVzdDtcblx0ICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuXHQgIHJldHVybiBlcnJvcjtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHRmdW5jdGlvbiBlbmNvZGUodmFsKSB7XG5cdCAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuXHQgICAgcmVwbGFjZSgvJTQwL2dpLCAnQCcpLlxuXHQgICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuXHQgICAgcmVwbGFjZSgvJTI0L2csICckJykuXG5cdCAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG5cdCAgICByZXBsYWNlKC8lMjAvZywgJysnKS5cblx0ICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cblx0ICAgIHJlcGxhY2UoLyU1RC9naSwgJ10nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZFxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSlcblx0ICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWRcblx0ICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIHBhcmFtc1NlcmlhbGl6ZXIpIHtcblx0ICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cblx0ICBpZiAoIXBhcmFtcykge1xuXHQgICAgcmV0dXJuIHVybDtcblx0ICB9XG5cdFxuXHQgIHZhciBzZXJpYWxpemVkUGFyYW1zO1xuXHQgIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7XG5cdCAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuXHQgIH0gZWxzZSBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSkge1xuXHQgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcGFydHMgPSBbXTtcblx0XG5cdCAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG5cdCAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHtcblx0ICAgICAgICBrZXkgPSBrZXkgKyAnW10nO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhbCA9IFt2YWxdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB1dGlscy5mb3JFYWNoKHZhbCwgZnVuY3Rpb24gcGFyc2VWYWx1ZSh2KSB7XG5cdCAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuXHQgICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KHYpKSB7XG5cdCAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHBhcnRzLnB1c2goZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodikpO1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG5cdCAgfVxuXHRcblx0ICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuXHQgICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHVybDtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZVxuXHQvLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzXG5cdHZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFtcblx0ICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuXHQgICdleHBpcmVzJywgJ2Zyb20nLCAnaG9zdCcsICdpZi1tb2RpZmllZC1zaW5jZScsICdpZi11bm1vZGlmaWVkLXNpbmNlJyxcblx0ICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG5cdCAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcblx0XTtcblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0XG5cdCAqXG5cdCAqIGBgYFxuXHQgKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVFxuXHQgKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cblx0ICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuXHQgKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZFxuXHQgKiBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZFxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuXHQgIHZhciBwYXJzZWQgPSB7fTtcblx0ICB2YXIga2V5O1xuXHQgIHZhciB2YWw7XG5cdCAgdmFyIGk7XG5cdFxuXHQgIGlmICghaGVhZGVycykgeyByZXR1cm4gcGFyc2VkOyB9XG5cdFxuXHQgIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG5cdCAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG5cdCAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXHRcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuXHQgICAgICAgIHBhcnNlZFtrZXldID0gKHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gOiBbXSkuY29uY2F0KFt2YWxdKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBwYXJzZWQ7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSAoXG5cdCAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cdFxuXHQgIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBoYXZlIGZ1bGwgc3VwcG9ydCBvZiB0aGUgQVBJcyBuZWVkZWQgdG8gdGVzdFxuXHQgIC8vIHdoZXRoZXIgdGhlIHJlcXVlc3QgVVJMIGlzIG9mIHRoZSBzYW1lIG9yaWdpbiBhcyBjdXJyZW50IGxvY2F0aW9uLlxuXHQgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG5cdCAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cdCAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cdCAgICB2YXIgb3JpZ2luVVJMO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgKiBQYXJzZSBhIFVSTCB0byBkaXNjb3ZlciBpdCdzIGNvbXBvbmVudHNcblx0ICAgICpcblx0ICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuXHQgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuXHQgICAgKi9cblx0ICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7XG5cdCAgICAgIHZhciBocmVmID0gdXJsO1xuXHRcblx0ICAgICAgaWYgKG1zaWUpIHtcblx0ICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzXG5cdCAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cdCAgICAgICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXHRcblx0ICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG5cdCAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcblx0ICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuXHQgICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcblx0ICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuXHQgICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcblx0ICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuXHQgICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cblx0ICAgICAgICAgICAgICAgICAgdXJsUGFyc2luZ05vZGUucGF0aG5hbWUgOlxuXHQgICAgICAgICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuXHQgICAgKlxuXHQgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdFVSTCBUaGUgVVJMIHRvIHRlc3Rcblx0ICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuXHQgICAgKi9cblx0ICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkge1xuXHQgICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuXHQgICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG5cdCAgICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VUkwuaG9zdCk7XG5cdCAgICB9O1xuXHQgIH0pKCkgOlxuXHRcblx0ICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuXHQgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgfSkoKVxuXHQpO1xuXG5cbi8qKiovIH0pLFxuLyogMjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBidG9hIHBvbHlmaWxsIGZvciBJRTwxMCBjb3VydGVzeSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRjaGFtYmVycy9CYXNlNjQuanNcblx0XG5cdHZhciBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSc7XG5cdFxuXHRmdW5jdGlvbiBFKCkge1xuXHQgIHRoaXMubWVzc2FnZSA9ICdTdHJpbmcgY29udGFpbnMgYW4gaW52YWxpZCBjaGFyYWN0ZXInO1xuXHR9XG5cdEUucHJvdG90eXBlID0gbmV3IEVycm9yO1xuXHRFLnByb3RvdHlwZS5jb2RlID0gNTtcblx0RS5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXHRcblx0ZnVuY3Rpb24gYnRvYShpbnB1dCkge1xuXHQgIHZhciBzdHIgPSBTdHJpbmcoaW5wdXQpO1xuXHQgIHZhciBvdXRwdXQgPSAnJztcblx0ICBmb3IgKFxuXHQgICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgYW5kIGNvdW50ZXJcblx0ICAgIHZhciBibG9jaywgY2hhckNvZGUsIGlkeCA9IDAsIG1hcCA9IGNoYXJzO1xuXHQgICAgLy8gaWYgdGhlIG5leHQgc3RyIGluZGV4IGRvZXMgbm90IGV4aXN0OlxuXHQgICAgLy8gICBjaGFuZ2UgdGhlIG1hcHBpbmcgdGFibGUgdG8gXCI9XCJcblx0ICAgIC8vICAgY2hlY2sgaWYgZCBoYXMgbm8gZnJhY3Rpb25hbCBkaWdpdHNcblx0ICAgIHN0ci5jaGFyQXQoaWR4IHwgMCkgfHwgKG1hcCA9ICc9JywgaWR4ICUgMSk7XG5cdCAgICAvLyBcIjggLSBpZHggJSAxICogOFwiIGdlbmVyYXRlcyB0aGUgc2VxdWVuY2UgMiwgNCwgNiwgOFxuXHQgICAgb3V0cHV0ICs9IG1hcC5jaGFyQXQoNjMgJiBibG9jayA+PiA4IC0gaWR4ICUgMSAqIDgpXG5cdCAgKSB7XG5cdCAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGlkeCArPSAzIC8gNCk7XG5cdCAgICBpZiAoY2hhckNvZGUgPiAweEZGKSB7XG5cdCAgICAgIHRocm93IG5ldyBFKCk7XG5cdCAgICB9XG5cdCAgICBibG9jayA9IGJsb2NrIDw8IDggfCBjaGFyQ29kZTtcblx0ICB9XG5cdCAgcmV0dXJuIG91dHB1dDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBidG9hO1xuXG5cbi8qKiovIH0pLFxuLyogMjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKFxuXHQgIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXHRcblx0ICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcblx0ICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuXHQgICAgICAgIHZhciBjb29raWUgPSBbXTtcblx0ICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG5cdFxuXHQgICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkge1xuXHQgICAgICAgICAgY29va2llLnB1c2goJ2V4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyZXMpLnRvR01UU3RyaW5nKCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7XG5cdCAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuXHQgICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHtcblx0ICAgICAgICAgIGNvb2tpZS5wdXNoKCdzZWN1cmUnKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7XG5cdCAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcblx0ICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuXHQgICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfSkoKSA6XG5cdFxuXHQgIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cblx0ICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG5cdCAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoKSB7IHJldHVybiBudWxsOyB9LFxuXHQgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG5cdCAgICB9O1xuXHQgIH0pKClcblx0KTtcblxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHRmdW5jdGlvbiBJbnRlcmNlcHRvck1hbmFnZXIoKSB7XG5cdCAgdGhpcy5oYW5kbGVycyA9IFtdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG5cdCAqXG5cdCAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXJcblx0ICovXG5cdEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcblx0ICB0aGlzLmhhbmRsZXJzLnB1c2goe1xuXHQgICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG5cdCAgICByZWplY3RlZDogcmVqZWN0ZWRcblx0ICB9KTtcblx0ICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG5cdCAqL1xuXHRJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0ID0gZnVuY3Rpb24gZWplY3QoaWQpIHtcblx0ICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcblx0ICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcblx0ICpcblx0ICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnlcblx0ICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yXG5cdCAqL1xuXHRJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG5cdCAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7XG5cdCAgICBpZiAoaCAhPT0gbnVsbCkge1xuXHQgICAgICBmbihoKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuXG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHRyYW5zZm9ybURhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0dmFyIGlzQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciBkZWZhdWx0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgaXNBYnNvbHV0ZVVSTCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR2YXIgY29tYmluZVVSTHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdC8qKlxuXHQgKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcblx0ICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG5cdCAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0XG5cdCAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuXHQgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblx0XG5cdCAgLy8gU3VwcG9ydCBiYXNlVVJMIGNvbmZpZ1xuXHQgIGlmIChjb25maWcuYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChjb25maWcudXJsKSkge1xuXHQgICAgY29uZmlnLnVybCA9IGNvbWJpbmVVUkxzKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcblx0ICB9XG5cdFxuXHQgIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG5cdCAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcblx0XG5cdCAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuXHQgIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YShcblx0ICAgIGNvbmZpZy5kYXRhLFxuXHQgICAgY29uZmlnLmhlYWRlcnMsXG5cdCAgICBjb25maWcudHJhbnNmb3JtUmVxdWVzdFxuXHQgICk7XG5cdFxuXHQgIC8vIEZsYXR0ZW4gaGVhZGVyc1xuXHQgIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoXG5cdCAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG5cdCAgICBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSxcblx0ICAgIGNvbmZpZy5oZWFkZXJzIHx8IHt9XG5cdCAgKTtcblx0XG5cdCAgdXRpbHMuZm9yRWFjaChcblx0ICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuXHQgICAgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7XG5cdCAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO1xuXHQgICAgfVxuXHQgICk7XG5cdFxuXHQgIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblx0XG5cdCAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHtcblx0ICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblx0XG5cdCAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuXHQgICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG5cdCAgICAgIHJlc3BvbnNlLmRhdGEsXG5cdCAgICAgIHJlc3BvbnNlLmhlYWRlcnMsXG5cdCAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuXHQgICAgKTtcblx0XG5cdCAgICByZXR1cm4gcmVzcG9uc2U7XG5cdCAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuXHQgICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG5cdCAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblx0XG5cdCAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG5cdCAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG5cdCAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuXHQgICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEsXG5cdCAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcblx0ICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDI3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogVHJhbnNmb3JtIHRoZSBkYXRhIGZvciBhIHJlcXVlc3Qgb3IgYSByZXNwb25zZVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcblx0ICogQHBhcmFtIHtBcnJheX0gaGVhZGVycyBUaGUgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3Qgb3IgcmVzcG9uc2Vcblx0ICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuXHQgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG5cdCAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG5cdCAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuXHQgICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkge1xuXHQgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDI5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG5cdCAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuXHQgIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuXHQgIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuXHQgIHJldHVybiAvXihbYS16XVthLXpcXGRcXCtcXC1cXC5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDMwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkxcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcblx0ICByZXR1cm4gcmVsYXRpdmVVUkxcblx0ICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG5cdCAgICA6IGJhc2VVUkw7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBBIGBDYW5jZWxgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC5cblx0ICpcblx0ICogQGNsYXNzXG5cdCAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cblx0ICovXG5cdGZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG5cdCAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0fVxuXHRcblx0Q2FuY2VsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHQgIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xuXHR9O1xuXHRcblx0Q2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQ2FuY2VsO1xuXG5cbi8qKiovIH0pLFxuLyogMzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdFxuXHQvKipcblx0ICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cblx0ICpcblx0ICogQGNsYXNzXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG5cdCAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHJlc29sdmVQcm9taXNlO1xuXHQgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7XG5cdCAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG5cdCAgfSk7XG5cdFxuXHQgIHZhciB0b2tlbiA9IHRoaXM7XG5cdCAgZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2UpIHtcblx0ICAgIGlmICh0b2tlbi5yZWFzb24pIHtcblx0ICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB0b2tlbi5yZWFzb24gPSBuZXcgQ2FuY2VsKG1lc3NhZ2UpO1xuXHQgICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG5cdCAqL1xuXHRDYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7XG5cdCAgaWYgKHRoaXMucmVhc29uKSB7XG5cdCAgICB0aHJvdyB0aGlzLnJlYXNvbjtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuXHQgKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuXHQgKi9cblx0Q2FuY2VsVG9rZW4uc291cmNlID0gZnVuY3Rpb24gc291cmNlKCkge1xuXHQgIHZhciBjYW5jZWw7XG5cdCAgdmFyIHRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHtcblx0ICAgIGNhbmNlbCA9IGM7XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHRva2VuOiB0b2tlbixcblx0ICAgIGNhbmNlbDogY2FuY2VsXG5cdCAgfTtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQ2FuY2VsVG9rZW47XG5cblxuLyoqKi8gfSksXG4vKiAzMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuXHQgKlxuXHQgKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuXHQgKlxuXHQgKiAgYGBganNcblx0ICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cblx0ICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuXHQgKiAgZi5hcHBseShudWxsLCBhcmdzKTtcblx0ICogIGBgYFxuXHQgKlxuXHQgKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cblx0ICpcblx0ICogIGBgYGpzXG5cdCAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG5cdCAqICBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0ICogQHJldHVybnMge0Z1bmN0aW9ufVxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHtcblx0ICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3Z1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3Z1ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92dWUpO1xuXHRcblx0dmFyIF92dWV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdFxuXHR2YXIgX3Z1ZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdnVleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X3Z1ZTIuZGVmYXVsdC51c2UoX3Z1ZXgyLmRlZmF1bHQpO1xuXHRcblx0dmFyIHN0YXRlID0ge1xuXHQgICAgbG9hZFN0YXR1czogZmFsc2Vcblx0fTtcblx0XG5cdHZhciBtdXRhdGlvbnMgPSB7XG5cdCAgICAvL2xvYWRpbmflvIDlhbNcblx0ICAgIExPQURfU1RBVFVTOiBmdW5jdGlvbiBMT0FEX1NUQVRVUyhzdGF0ZSwgZGF0YSkge1xuXHQgICAgICAgIHN0YXRlLmxvYWRTdGF0dXMgPSBkYXRhO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbmV3IF92dWV4Mi5kZWZhdWx0LlN0b3JlKHtcblx0ICAgIHN0YXRlOiBzdGF0ZSxcblx0ICAgIG11dGF0aW9uczogbXV0YXRpb25zXG5cdH0pO1xuXG4vKioqLyB9KSxcbi8qIDM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogdnVleCB2My4wLjFcblx0ICogKGMpIDIwMTcgRXZhbiBZb3Vcblx0ICogQGxpY2Vuc2UgTUlUXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYXBwbHlNaXhpbiA9IGZ1bmN0aW9uIChWdWUpIHtcblx0ICB2YXIgdmVyc2lvbiA9IE51bWJlcihWdWUudmVyc2lvbi5zcGxpdCgnLicpWzBdKTtcblx0XG5cdCAgaWYgKHZlcnNpb24gPj0gMikge1xuXHQgICAgVnVlLm1peGluKHsgYmVmb3JlQ3JlYXRlOiB2dWV4SW5pdCB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gb3ZlcnJpZGUgaW5pdCBhbmQgaW5qZWN0IHZ1ZXggaW5pdCBwcm9jZWR1cmVcblx0ICAgIC8vIGZvciAxLnggYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5cdCAgICB2YXIgX2luaXQgPSBWdWUucHJvdG90eXBlLl9pbml0O1xuXHQgICAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9O1xuXHRcblx0ICAgICAgb3B0aW9ucy5pbml0ID0gb3B0aW9ucy5pbml0XG5cdCAgICAgICAgPyBbdnVleEluaXRdLmNvbmNhdChvcHRpb25zLmluaXQpXG5cdCAgICAgICAgOiB2dWV4SW5pdDtcblx0ICAgICAgX2luaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBWdWV4IGluaXQgaG9vaywgaW5qZWN0ZWQgaW50byBlYWNoIGluc3RhbmNlcyBpbml0IGhvb2tzIGxpc3QuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHZ1ZXhJbml0ICgpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0ICAgIC8vIHN0b3JlIGluamVjdGlvblxuXHQgICAgaWYgKG9wdGlvbnMuc3RvcmUpIHtcblx0ICAgICAgdGhpcy4kc3RvcmUgPSB0eXBlb2Ygb3B0aW9ucy5zdG9yZSA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgICAgID8gb3B0aW9ucy5zdG9yZSgpXG5cdCAgICAgICAgOiBvcHRpb25zLnN0b3JlO1xuXHQgICAgfSBlbHNlIGlmIChvcHRpb25zLnBhcmVudCAmJiBvcHRpb25zLnBhcmVudC4kc3RvcmUpIHtcblx0ICAgICAgdGhpcy4kc3RvcmUgPSBvcHRpb25zLnBhcmVudC4kc3RvcmU7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGRldnRvb2xIb29rID1cblx0ICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXHRcblx0ZnVuY3Rpb24gZGV2dG9vbFBsdWdpbiAoc3RvcmUpIHtcblx0ICBpZiAoIWRldnRvb2xIb29rKSB7IHJldHVybiB9XG5cdFxuXHQgIHN0b3JlLl9kZXZ0b29sSG9vayA9IGRldnRvb2xIb29rO1xuXHRcblx0ICBkZXZ0b29sSG9vay5lbWl0KCd2dWV4OmluaXQnLCBzdG9yZSk7XG5cdFxuXHQgIGRldnRvb2xIb29rLm9uKCd2dWV4OnRyYXZlbC10by1zdGF0ZScsIGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkge1xuXHQgICAgc3RvcmUucmVwbGFjZVN0YXRlKHRhcmdldFN0YXRlKTtcblx0ICB9KTtcblx0XG5cdCAgc3RvcmUuc3Vic2NyaWJlKGZ1bmN0aW9uIChtdXRhdGlvbiwgc3RhdGUpIHtcblx0ICAgIGRldnRvb2xIb29rLmVtaXQoJ3Z1ZXg6bXV0YXRpb24nLCBtdXRhdGlvbiwgc3RhdGUpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSBmaXJzdCBpdGVtIHRoYXQgcGFzcyB0aGUgdGVzdFxuXHQgKiBieSBzZWNvbmQgYXJndW1lbnQgZnVuY3Rpb25cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gbGlzdFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG5cdCAqIEByZXR1cm4geyp9XG5cdCAqL1xuXHQvKipcblx0ICogRGVlcCBjb3B5IHRoZSBnaXZlbiBvYmplY3QgY29uc2lkZXJpbmcgY2lyY3VsYXIgc3RydWN0dXJlLlxuXHQgKiBUaGlzIGZ1bmN0aW9uIGNhY2hlcyBhbGwgbmVzdGVkIG9iamVjdHMgYW5kIGl0cyBjb3BpZXMuXG5cdCAqIElmIGl0IGRldGVjdHMgY2lyY3VsYXIgc3RydWN0dXJlLCB1c2UgY2FjaGVkIGNvcHkgdG8gYXZvaWQgaW5maW5pdGUgbG9vcC5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBjYWNoZVxuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0XG5cdFxuXHQvKipcblx0ICogZm9yRWFjaCBmb3Igb2JqZWN0XG5cdCAqL1xuXHRmdW5jdGlvbiBmb3JFYWNoVmFsdWUgKG9iaiwgZm4pIHtcblx0ICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZm4ob2JqW2tleV0sIGtleSk7IH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdCAob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0J1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1Byb21pc2UgKHZhbCkge1xuXHQgIHJldHVybiB2YWwgJiYgdHlwZW9mIHZhbC50aGVuID09PSAnZnVuY3Rpb24nXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzc2VydCAoY29uZGl0aW9uLCBtc2cpIHtcblx0ICBpZiAoIWNvbmRpdGlvbikgeyB0aHJvdyBuZXcgRXJyb3IoKFwiW3Z1ZXhdIFwiICsgbXNnKSkgfVxuXHR9XG5cdFxuXHR2YXIgTW9kdWxlID0gZnVuY3Rpb24gTW9kdWxlIChyYXdNb2R1bGUsIHJ1bnRpbWUpIHtcblx0ICB0aGlzLnJ1bnRpbWUgPSBydW50aW1lO1xuXHQgIHRoaXMuX2NoaWxkcmVuID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB0aGlzLl9yYXdNb2R1bGUgPSByYXdNb2R1bGU7XG5cdCAgdmFyIHJhd1N0YXRlID0gcmF3TW9kdWxlLnN0YXRlO1xuXHQgIHRoaXMuc3RhdGUgPSAodHlwZW9mIHJhd1N0YXRlID09PSAnZnVuY3Rpb24nID8gcmF3U3RhdGUoKSA6IHJhd1N0YXRlKSB8fCB7fTtcblx0fTtcblx0XG5cdHZhciBwcm90b3R5cGVBY2Nlc3NvcnMkMSA9IHsgbmFtZXNwYWNlZDogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXHRcblx0cHJvdG90eXBlQWNjZXNzb3JzJDEubmFtZXNwYWNlZC5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuICEhdGhpcy5fcmF3TW9kdWxlLm5hbWVzcGFjZWRcblx0fTtcblx0XG5cdE1vZHVsZS5wcm90b3R5cGUuYWRkQ2hpbGQgPSBmdW5jdGlvbiBhZGRDaGlsZCAoa2V5LCBtb2R1bGUpIHtcblx0ICB0aGlzLl9jaGlsZHJlbltrZXldID0gbW9kdWxlO1xuXHR9O1xuXHRcblx0TW9kdWxlLnByb3RvdHlwZS5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIHJlbW92ZUNoaWxkIChrZXkpIHtcblx0ICBkZWxldGUgdGhpcy5fY2hpbGRyZW5ba2V5XTtcblx0fTtcblx0XG5cdE1vZHVsZS5wcm90b3R5cGUuZ2V0Q2hpbGQgPSBmdW5jdGlvbiBnZXRDaGlsZCAoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuW2tleV1cblx0fTtcblx0XG5cdE1vZHVsZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlIChyYXdNb2R1bGUpIHtcblx0ICB0aGlzLl9yYXdNb2R1bGUubmFtZXNwYWNlZCA9IHJhd01vZHVsZS5uYW1lc3BhY2VkO1xuXHQgIGlmIChyYXdNb2R1bGUuYWN0aW9ucykge1xuXHQgICAgdGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMgPSByYXdNb2R1bGUuYWN0aW9ucztcblx0ICB9XG5cdCAgaWYgKHJhd01vZHVsZS5tdXRhdGlvbnMpIHtcblx0ICAgIHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMgPSByYXdNb2R1bGUubXV0YXRpb25zO1xuXHQgIH1cblx0ICBpZiAocmF3TW9kdWxlLmdldHRlcnMpIHtcblx0ICAgIHRoaXMuX3Jhd01vZHVsZS5nZXR0ZXJzID0gcmF3TW9kdWxlLmdldHRlcnM7XG5cdCAgfVxuXHR9O1xuXHRcblx0TW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoQ2hpbGQgPSBmdW5jdGlvbiBmb3JFYWNoQ2hpbGQgKGZuKSB7XG5cdCAgZm9yRWFjaFZhbHVlKHRoaXMuX2NoaWxkcmVuLCBmbik7XG5cdH07XG5cdFxuXHRNb2R1bGUucHJvdG90eXBlLmZvckVhY2hHZXR0ZXIgPSBmdW5jdGlvbiBmb3JFYWNoR2V0dGVyIChmbikge1xuXHQgIGlmICh0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycykge1xuXHQgICAgZm9yRWFjaFZhbHVlKHRoaXMuX3Jhd01vZHVsZS5nZXR0ZXJzLCBmbik7XG5cdCAgfVxuXHR9O1xuXHRcblx0TW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoQWN0aW9uID0gZnVuY3Rpb24gZm9yRWFjaEFjdGlvbiAoZm4pIHtcblx0ICBpZiAodGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMpIHtcblx0ICAgIGZvckVhY2hWYWx1ZSh0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucywgZm4pO1xuXHQgIH1cblx0fTtcblx0XG5cdE1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaE11dGF0aW9uID0gZnVuY3Rpb24gZm9yRWFjaE11dGF0aW9uIChmbikge1xuXHQgIGlmICh0aGlzLl9yYXdNb2R1bGUubXV0YXRpb25zKSB7XG5cdCAgICBmb3JFYWNoVmFsdWUodGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucywgZm4pO1xuXHQgIH1cblx0fTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBNb2R1bGUucHJvdG90eXBlLCBwcm90b3R5cGVBY2Nlc3NvcnMkMSApO1xuXHRcblx0dmFyIE1vZHVsZUNvbGxlY3Rpb24gPSBmdW5jdGlvbiBNb2R1bGVDb2xsZWN0aW9uIChyYXdSb290TW9kdWxlKSB7XG5cdCAgLy8gcmVnaXN0ZXIgcm9vdCBtb2R1bGUgKFZ1ZXguU3RvcmUgb3B0aW9ucylcblx0ICB0aGlzLnJlZ2lzdGVyKFtdLCByYXdSb290TW9kdWxlLCBmYWxzZSk7XG5cdH07XG5cdFxuXHRNb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKHBhdGgpIHtcblx0ICByZXR1cm4gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKG1vZHVsZSwga2V5KSB7XG5cdCAgICByZXR1cm4gbW9kdWxlLmdldENoaWxkKGtleSlcblx0ICB9LCB0aGlzLnJvb3QpXG5cdH07XG5cdFxuXHRNb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXROYW1lc3BhY2UgPSBmdW5jdGlvbiBnZXROYW1lc3BhY2UgKHBhdGgpIHtcblx0ICB2YXIgbW9kdWxlID0gdGhpcy5yb290O1xuXHQgIHJldHVybiBwYXRoLnJlZHVjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBrZXkpIHtcblx0ICAgIG1vZHVsZSA9IG1vZHVsZS5nZXRDaGlsZChrZXkpO1xuXHQgICAgcmV0dXJuIG5hbWVzcGFjZSArIChtb2R1bGUubmFtZXNwYWNlZCA/IGtleSArICcvJyA6ICcnKVxuXHQgIH0sICcnKVxuXHR9O1xuXHRcblx0TW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlJDEgKHJhd1Jvb3RNb2R1bGUpIHtcblx0ICB1cGRhdGUoW10sIHRoaXMucm9vdCwgcmF3Um9vdE1vZHVsZSk7XG5cdH07XG5cdFxuXHRNb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIHJlZ2lzdGVyIChwYXRoLCByYXdNb2R1bGUsIHJ1bnRpbWUpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHQgICAgaWYgKCBydW50aW1lID09PSB2b2lkIDAgKSBydW50aW1lID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGFzc2VydFJhd01vZHVsZShwYXRoLCByYXdNb2R1bGUpO1xuXHQgIH1cblx0XG5cdCAgdmFyIG5ld01vZHVsZSA9IG5ldyBNb2R1bGUocmF3TW9kdWxlLCBydW50aW1lKTtcblx0ICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcblx0ICAgIHRoaXMucm9vdCA9IG5ld01vZHVsZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0KHBhdGguc2xpY2UoMCwgLTEpKTtcblx0ICAgIHBhcmVudC5hZGRDaGlsZChwYXRoW3BhdGgubGVuZ3RoIC0gMV0sIG5ld01vZHVsZSk7XG5cdCAgfVxuXHRcblx0ICAvLyByZWdpc3RlciBuZXN0ZWQgbW9kdWxlc1xuXHQgIGlmIChyYXdNb2R1bGUubW9kdWxlcykge1xuXHQgICAgZm9yRWFjaFZhbHVlKHJhd01vZHVsZS5tb2R1bGVzLCBmdW5jdGlvbiAocmF3Q2hpbGRNb2R1bGUsIGtleSkge1xuXHQgICAgICB0aGlzJDEucmVnaXN0ZXIocGF0aC5jb25jYXQoa2V5KSwgcmF3Q2hpbGRNb2R1bGUsIHJ1bnRpbWUpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0TW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUudW5yZWdpc3RlciA9IGZ1bmN0aW9uIHVucmVnaXN0ZXIgKHBhdGgpIHtcblx0ICB2YXIgcGFyZW50ID0gdGhpcy5nZXQocGF0aC5zbGljZSgwLCAtMSkpO1xuXHQgIHZhciBrZXkgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG5cdCAgaWYgKCFwYXJlbnQuZ2V0Q2hpbGQoa2V5KS5ydW50aW1lKSB7IHJldHVybiB9XG5cdFxuXHQgIHBhcmVudC5yZW1vdmVDaGlsZChrZXkpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlIChwYXRoLCB0YXJnZXRNb2R1bGUsIG5ld01vZHVsZSkge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnRSYXdNb2R1bGUocGF0aCwgbmV3TW9kdWxlKTtcblx0ICB9XG5cdFxuXHQgIC8vIHVwZGF0ZSB0YXJnZXQgbW9kdWxlXG5cdCAgdGFyZ2V0TW9kdWxlLnVwZGF0ZShuZXdNb2R1bGUpO1xuXHRcblx0ICAvLyB1cGRhdGUgbmVzdGVkIG1vZHVsZXNcblx0ICBpZiAobmV3TW9kdWxlLm1vZHVsZXMpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBuZXdNb2R1bGUubW9kdWxlcykge1xuXHQgICAgICBpZiAoIXRhcmdldE1vZHVsZS5nZXRDaGlsZChrZXkpKSB7XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIGNvbnNvbGUud2Fybihcblx0ICAgICAgICAgICAgXCJbdnVleF0gdHJ5aW5nIHRvIGFkZCBhIG5ldyBtb2R1bGUgJ1wiICsga2V5ICsgXCInIG9uIGhvdCByZWxvYWRpbmcsIFwiICtcblx0ICAgICAgICAgICAgJ21hbnVhbCByZWxvYWQgaXMgbmVlZGVkJ1xuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgICAgdXBkYXRlKFxuXHQgICAgICAgIHBhdGguY29uY2F0KGtleSksXG5cdCAgICAgICAgdGFyZ2V0TW9kdWxlLmdldENoaWxkKGtleSksXG5cdCAgICAgICAgbmV3TW9kdWxlLm1vZHVsZXNba2V5XVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGZ1bmN0aW9uQXNzZXJ0ID0ge1xuXHQgIGFzc2VydDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7IH0sXG5cdCAgZXhwZWN0ZWQ6ICdmdW5jdGlvbidcblx0fTtcblx0XG5cdHZhciBvYmplY3RBc3NlcnQgPSB7XG5cdCAgYXNzZXJ0OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuXHQgICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmhhbmRsZXIgPT09ICdmdW5jdGlvbicpOyB9LFxuXHQgIGV4cGVjdGVkOiAnZnVuY3Rpb24gb3Igb2JqZWN0IHdpdGggXCJoYW5kbGVyXCIgZnVuY3Rpb24nXG5cdH07XG5cdFxuXHR2YXIgYXNzZXJ0VHlwZXMgPSB7XG5cdCAgZ2V0dGVyczogZnVuY3Rpb25Bc3NlcnQsXG5cdCAgbXV0YXRpb25zOiBmdW5jdGlvbkFzc2VydCxcblx0ICBhY3Rpb25zOiBvYmplY3RBc3NlcnRcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGFzc2VydFJhd01vZHVsZSAocGF0aCwgcmF3TW9kdWxlKSB7XG5cdCAgT2JqZWN0LmtleXMoYXNzZXJ0VHlwZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgaWYgKCFyYXdNb2R1bGVba2V5XSkgeyByZXR1cm4gfVxuXHRcblx0ICAgIHZhciBhc3NlcnRPcHRpb25zID0gYXNzZXJ0VHlwZXNba2V5XTtcblx0XG5cdCAgICBmb3JFYWNoVmFsdWUocmF3TW9kdWxlW2tleV0sIGZ1bmN0aW9uICh2YWx1ZSwgdHlwZSkge1xuXHQgICAgICBhc3NlcnQoXG5cdCAgICAgICAgYXNzZXJ0T3B0aW9ucy5hc3NlcnQodmFsdWUpLFxuXHQgICAgICAgIG1ha2VBc3NlcnRpb25NZXNzYWdlKHBhdGgsIGtleSwgdHlwZSwgdmFsdWUsIGFzc2VydE9wdGlvbnMuZXhwZWN0ZWQpXG5cdCAgICAgICk7XG5cdCAgICB9KTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUFzc2VydGlvbk1lc3NhZ2UgKHBhdGgsIGtleSwgdHlwZSwgdmFsdWUsIGV4cGVjdGVkKSB7XG5cdCAgdmFyIGJ1ZiA9IGtleSArIFwiIHNob3VsZCBiZSBcIiArIGV4cGVjdGVkICsgXCIgYnV0IFxcXCJcIiArIGtleSArIFwiLlwiICsgdHlwZSArIFwiXFxcIlwiO1xuXHQgIGlmIChwYXRoLmxlbmd0aCA+IDApIHtcblx0ICAgIGJ1ZiArPSBcIiBpbiBtb2R1bGUgXFxcIlwiICsgKHBhdGguam9pbignLicpKSArIFwiXFxcIlwiO1xuXHQgIH1cblx0ICBidWYgKz0gXCIgaXMgXCIgKyAoSlNPTi5zdHJpbmdpZnkodmFsdWUpKSArIFwiLlwiO1xuXHQgIHJldHVybiBidWZcblx0fVxuXHRcblx0dmFyIFZ1ZTsgLy8gYmluZCBvbiBpbnN0YWxsXG5cdFxuXHR2YXIgU3RvcmUgPSBmdW5jdGlvbiBTdG9yZSAob3B0aW9ucykge1xuXHQgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHQgIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9O1xuXHRcblx0ICAvLyBBdXRvIGluc3RhbGwgaWYgaXQgaXMgbm90IGRvbmUgeWV0IGFuZCBgd2luZG93YCBoYXMgYFZ1ZWAuXG5cdCAgLy8gVG8gYWxsb3cgdXNlcnMgdG8gYXZvaWQgYXV0by1pbnN0YWxsYXRpb24gaW4gc29tZSBjYXNlcyxcblx0ICAvLyB0aGlzIGNvZGUgc2hvdWxkIGJlIHBsYWNlZCBoZXJlLiBTZWUgIzczMVxuXHQgIGlmICghVnVlICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcblx0ICAgIGluc3RhbGwod2luZG93LlZ1ZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgYXNzZXJ0KFZ1ZSwgXCJtdXN0IGNhbGwgVnVlLnVzZShWdWV4KSBiZWZvcmUgY3JlYXRpbmcgYSBzdG9yZSBpbnN0YW5jZS5cIik7XG5cdCAgICBhc3NlcnQodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnLCBcInZ1ZXggcmVxdWlyZXMgYSBQcm9taXNlIHBvbHlmaWxsIGluIHRoaXMgYnJvd3Nlci5cIik7XG5cdCAgICBhc3NlcnQodGhpcyBpbnN0YW5jZW9mIFN0b3JlLCBcIlN0b3JlIG11c3QgYmUgY2FsbGVkIHdpdGggdGhlIG5ldyBvcGVyYXRvci5cIik7XG5cdCAgfVxuXHRcblx0ICB2YXIgcGx1Z2lucyA9IG9wdGlvbnMucGx1Z2luczsgaWYgKCBwbHVnaW5zID09PSB2b2lkIDAgKSBwbHVnaW5zID0gW107XG5cdCAgdmFyIHN0cmljdCA9IG9wdGlvbnMuc3RyaWN0OyBpZiAoIHN0cmljdCA9PT0gdm9pZCAwICkgc3RyaWN0ID0gZmFsc2U7XG5cdFxuXHQgIHZhciBzdGF0ZSA9IG9wdGlvbnMuc3RhdGU7IGlmICggc3RhdGUgPT09IHZvaWQgMCApIHN0YXRlID0ge307XG5cdCAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgc3RhdGUgPSBzdGF0ZSgpIHx8IHt9O1xuXHQgIH1cblx0XG5cdCAgLy8gc3RvcmUgaW50ZXJuYWwgc3RhdGVcblx0ICB0aGlzLl9jb21taXR0aW5nID0gZmFsc2U7XG5cdCAgdGhpcy5fYWN0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMgPSBbXTtcblx0ICB0aGlzLl9tdXRhdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHRoaXMuX3dyYXBwZWRHZXR0ZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB0aGlzLl9tb2R1bGVzID0gbmV3IE1vZHVsZUNvbGxlY3Rpb24ob3B0aW9ucyk7XG5cdCAgdGhpcy5fbW9kdWxlc05hbWVzcGFjZU1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblx0ICB0aGlzLl93YXRjaGVyVk0gPSBuZXcgVnVlKCk7XG5cdFxuXHQgIC8vIGJpbmQgY29tbWl0IGFuZCBkaXNwYXRjaCB0byBzZWxmXG5cdCAgdmFyIHN0b3JlID0gdGhpcztcblx0ICB2YXIgcmVmID0gdGhpcztcblx0ICB2YXIgZGlzcGF0Y2ggPSByZWYuZGlzcGF0Y2g7XG5cdCAgdmFyIGNvbW1pdCA9IHJlZi5jb21taXQ7XG5cdCAgdGhpcy5kaXNwYXRjaCA9IGZ1bmN0aW9uIGJvdW5kRGlzcGF0Y2ggKHR5cGUsIHBheWxvYWQpIHtcblx0ICAgIHJldHVybiBkaXNwYXRjaC5jYWxsKHN0b3JlLCB0eXBlLCBwYXlsb2FkKVxuXHQgIH07XG5cdCAgdGhpcy5jb21taXQgPSBmdW5jdGlvbiBib3VuZENvbW1pdCAodHlwZSwgcGF5bG9hZCwgb3B0aW9ucykge1xuXHQgICAgcmV0dXJuIGNvbW1pdC5jYWxsKHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBvcHRpb25zKVxuXHQgIH07XG5cdFxuXHQgIC8vIHN0cmljdCBtb2RlXG5cdCAgdGhpcy5zdHJpY3QgPSBzdHJpY3Q7XG5cdFxuXHQgIC8vIGluaXQgcm9vdCBtb2R1bGUuXG5cdCAgLy8gdGhpcyBhbHNvIHJlY3Vyc2l2ZWx5IHJlZ2lzdGVycyBhbGwgc3ViLW1vZHVsZXNcblx0ICAvLyBhbmQgY29sbGVjdHMgYWxsIG1vZHVsZSBnZXR0ZXJzIGluc2lkZSB0aGlzLl93cmFwcGVkR2V0dGVyc1xuXHQgIGluc3RhbGxNb2R1bGUodGhpcywgc3RhdGUsIFtdLCB0aGlzLl9tb2R1bGVzLnJvb3QpO1xuXHRcblx0ICAvLyBpbml0aWFsaXplIHRoZSBzdG9yZSB2bSwgd2hpY2ggaXMgcmVzcG9uc2libGUgZm9yIHRoZSByZWFjdGl2aXR5XG5cdCAgLy8gKGFsc28gcmVnaXN0ZXJzIF93cmFwcGVkR2V0dGVycyBhcyBjb21wdXRlZCBwcm9wZXJ0aWVzKVxuXHQgIHJlc2V0U3RvcmVWTSh0aGlzLCBzdGF0ZSk7XG5cdFxuXHQgIC8vIGFwcGx5IHBsdWdpbnNcblx0ICBwbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikgeyByZXR1cm4gcGx1Z2luKHRoaXMkMSk7IH0pO1xuXHRcblx0ICBpZiAoVnVlLmNvbmZpZy5kZXZ0b29scykge1xuXHQgICAgZGV2dG9vbFBsdWdpbih0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcHJvdG90eXBlQWNjZXNzb3JzID0geyBzdGF0ZTogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXHRcblx0cHJvdG90eXBlQWNjZXNzb3JzLnN0YXRlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gdGhpcy5fdm0uX2RhdGEuJCRzdGF0ZVxuXHR9O1xuXHRcblx0cHJvdG90eXBlQWNjZXNzb3JzLnN0YXRlLnNldCA9IGZ1bmN0aW9uICh2KSB7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGFzc2VydChmYWxzZSwgXCJVc2Ugc3RvcmUucmVwbGFjZVN0YXRlKCkgdG8gZXhwbGljaXQgcmVwbGFjZSBzdG9yZSBzdGF0ZS5cIik7XG5cdCAgfVxuXHR9O1xuXHRcblx0U3RvcmUucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uIGNvbW1pdCAoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucykge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIC8vIGNoZWNrIG9iamVjdC1zdHlsZSBjb21taXRcblx0ICB2YXIgcmVmID0gdW5pZnlPYmplY3RTdHlsZShfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKTtcblx0ICAgIHZhciB0eXBlID0gcmVmLnR5cGU7XG5cdCAgICB2YXIgcGF5bG9hZCA9IHJlZi5wYXlsb2FkO1xuXHQgICAgdmFyIG9wdGlvbnMgPSByZWYub3B0aW9ucztcblx0XG5cdCAgdmFyIG11dGF0aW9uID0geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBwYXlsb2FkIH07XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5fbXV0YXRpb25zW3R5cGVdO1xuXHQgIGlmICghZW50cnkpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gbXV0YXRpb24gdHlwZTogXCIgKyB0eXBlKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdGhpcy5fd2l0aENvbW1pdChmdW5jdGlvbiAoKSB7XG5cdCAgICBlbnRyeS5mb3JFYWNoKGZ1bmN0aW9uIGNvbW1pdEl0ZXJhdG9yIChoYW5kbGVyKSB7XG5cdCAgICAgIGhhbmRsZXIocGF5bG9hZCk7XG5cdCAgICB9KTtcblx0ICB9KTtcblx0ICB0aGlzLl9zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHsgcmV0dXJuIHN1YihtdXRhdGlvbiwgdGhpcyQxLnN0YXRlKTsgfSk7XG5cdFxuXHQgIGlmIChcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgIG9wdGlvbnMgJiYgb3B0aW9ucy5zaWxlbnRcblx0ICApIHtcblx0ICAgIGNvbnNvbGUud2Fybihcblx0ICAgICAgXCJbdnVleF0gbXV0YXRpb24gdHlwZTogXCIgKyB0eXBlICsgXCIuIFNpbGVudCBvcHRpb24gaGFzIGJlZW4gcmVtb3ZlZC4gXCIgK1xuXHQgICAgICAnVXNlIHRoZSBmaWx0ZXIgZnVuY3Rpb25hbGl0eSBpbiB0aGUgdnVlLWRldnRvb2xzJ1xuXHQgICAgKTtcblx0ICB9XG5cdH07XG5cdFxuXHRTdG9yZS5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiBkaXNwYXRjaCAoX3R5cGUsIF9wYXlsb2FkKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgLy8gY2hlY2sgb2JqZWN0LXN0eWxlIGRpc3BhdGNoXG5cdCAgdmFyIHJlZiA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkKTtcblx0ICAgIHZhciB0eXBlID0gcmVmLnR5cGU7XG5cdCAgICB2YXIgcGF5bG9hZCA9IHJlZi5wYXlsb2FkO1xuXHRcblx0ICB2YXIgYWN0aW9uID0geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBwYXlsb2FkIH07XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5fYWN0aW9uc1t0eXBlXTtcblx0ICBpZiAoIWVudHJ5KSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIGFjdGlvbiB0eXBlOiBcIiArIHR5cGUpKTtcblx0ICAgIH1cblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIoYWN0aW9uLCB0aGlzJDEuc3RhdGUpOyB9KTtcblx0XG5cdCAgcmV0dXJuIGVudHJ5Lmxlbmd0aCA+IDFcblx0ICAgID8gUHJvbWlzZS5hbGwoZW50cnkubWFwKGZ1bmN0aW9uIChoYW5kbGVyKSB7IHJldHVybiBoYW5kbGVyKHBheWxvYWQpOyB9KSlcblx0ICAgIDogZW50cnlbMF0ocGF5bG9hZClcblx0fTtcblx0XG5cdFN0b3JlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUgKGZuKSB7XG5cdCAgcmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoZm4sIHRoaXMuX3N1YnNjcmliZXJzKVxuXHR9O1xuXHRcblx0U3RvcmUucHJvdG90eXBlLnN1YnNjcmliZUFjdGlvbiA9IGZ1bmN0aW9uIHN1YnNjcmliZUFjdGlvbiAoZm4pIHtcblx0ICByZXR1cm4gZ2VuZXJpY1N1YnNjcmliZShmbiwgdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMpXG5cdH07XG5cdFxuXHRTdG9yZS5wcm90b3R5cGUud2F0Y2ggPSBmdW5jdGlvbiB3YXRjaCAoZ2V0dGVyLCBjYiwgb3B0aW9ucykge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnQodHlwZW9mIGdldHRlciA9PT0gJ2Z1bmN0aW9uJywgXCJzdG9yZS53YXRjaCBvbmx5IGFjY2VwdHMgYSBmdW5jdGlvbi5cIik7XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzLl93YXRjaGVyVk0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldHRlcih0aGlzJDEuc3RhdGUsIHRoaXMkMS5nZXR0ZXJzKTsgfSwgY2IsIG9wdGlvbnMpXG5cdH07XG5cdFxuXHRTdG9yZS5wcm90b3R5cGUucmVwbGFjZVN0YXRlID0gZnVuY3Rpb24gcmVwbGFjZVN0YXRlIChzdGF0ZSkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIHRoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcyQxLl92bS5fZGF0YS4kJHN0YXRlID0gc3RhdGU7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRTdG9yZS5wcm90b3R5cGUucmVnaXN0ZXJNb2R1bGUgPSBmdW5jdGlvbiByZWdpc3Rlck1vZHVsZSAocGF0aCwgcmF3TW9kdWxlLCBvcHRpb25zKSB7XG5cdCAgICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblx0XG5cdCAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgeyBwYXRoID0gW3BhdGhdOyB9XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShwYXRoKSwgXCJtb2R1bGUgcGF0aCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIEFycmF5LlwiKTtcblx0ICAgIGFzc2VydChwYXRoLmxlbmd0aCA+IDAsICdjYW5ub3QgcmVnaXN0ZXIgdGhlIHJvb3QgbW9kdWxlIGJ5IHVzaW5nIHJlZ2lzdGVyTW9kdWxlLicpO1xuXHQgIH1cblx0XG5cdCAgdGhpcy5fbW9kdWxlcy5yZWdpc3RlcihwYXRoLCByYXdNb2R1bGUpO1xuXHQgIGluc3RhbGxNb2R1bGUodGhpcywgdGhpcy5zdGF0ZSwgcGF0aCwgdGhpcy5fbW9kdWxlcy5nZXQocGF0aCksIG9wdGlvbnMucHJlc2VydmVTdGF0ZSk7XG5cdCAgLy8gcmVzZXQgc3RvcmUgdG8gdXBkYXRlIGdldHRlcnMuLi5cblx0ICByZXNldFN0b3JlVk0odGhpcywgdGhpcy5zdGF0ZSk7XG5cdH07XG5cdFxuXHRTdG9yZS5wcm90b3R5cGUudW5yZWdpc3Rlck1vZHVsZSA9IGZ1bmN0aW9uIHVucmVnaXN0ZXJNb2R1bGUgKHBhdGgpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7IHBhdGggPSBbcGF0aF07IH1cblx0XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGFzc2VydChBcnJheS5pc0FycmF5KHBhdGgpLCBcIm1vZHVsZSBwYXRoIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gQXJyYXkuXCIpO1xuXHQgIH1cblx0XG5cdCAgdGhpcy5fbW9kdWxlcy51bnJlZ2lzdGVyKHBhdGgpO1xuXHQgIHRoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHBhcmVudFN0YXRlID0gZ2V0TmVzdGVkU3RhdGUodGhpcyQxLnN0YXRlLCBwYXRoLnNsaWNlKDAsIC0xKSk7XG5cdCAgICBWdWUuZGVsZXRlKHBhcmVudFN0YXRlLCBwYXRoW3BhdGgubGVuZ3RoIC0gMV0pO1xuXHQgIH0pO1xuXHQgIHJlc2V0U3RvcmUodGhpcyk7XG5cdH07XG5cdFxuXHRTdG9yZS5wcm90b3R5cGUuaG90VXBkYXRlID0gZnVuY3Rpb24gaG90VXBkYXRlIChuZXdPcHRpb25zKSB7XG5cdCAgdGhpcy5fbW9kdWxlcy51cGRhdGUobmV3T3B0aW9ucyk7XG5cdCAgcmVzZXRTdG9yZSh0aGlzLCB0cnVlKTtcblx0fTtcblx0XG5cdFN0b3JlLnByb3RvdHlwZS5fd2l0aENvbW1pdCA9IGZ1bmN0aW9uIF93aXRoQ29tbWl0IChmbikge1xuXHQgIHZhciBjb21taXR0aW5nID0gdGhpcy5fY29tbWl0dGluZztcblx0ICB0aGlzLl9jb21taXR0aW5nID0gdHJ1ZTtcblx0ICBmbigpO1xuXHQgIHRoaXMuX2NvbW1pdHRpbmcgPSBjb21taXR0aW5nO1xuXHR9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFN0b3JlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cdFxuXHRmdW5jdGlvbiBnZW5lcmljU3Vic2NyaWJlIChmbiwgc3Vicykge1xuXHQgIGlmIChzdWJzLmluZGV4T2YoZm4pIDwgMCkge1xuXHQgICAgc3Vicy5wdXNoKGZuKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBpID0gc3Vicy5pbmRleE9mKGZuKTtcblx0ICAgIGlmIChpID4gLTEpIHtcblx0ICAgICAgc3Vicy5zcGxpY2UoaSwgMSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNldFN0b3JlIChzdG9yZSwgaG90KSB7XG5cdCAgc3RvcmUuX2FjdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHN0b3JlLl9tdXRhdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHN0b3JlLl93cmFwcGVkR2V0dGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgc3RvcmUuX21vZHVsZXNOYW1lc3BhY2VNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBzdGF0ZSA9IHN0b3JlLnN0YXRlO1xuXHQgIC8vIGluaXQgYWxsIG1vZHVsZXNcblx0ICBpbnN0YWxsTW9kdWxlKHN0b3JlLCBzdGF0ZSwgW10sIHN0b3JlLl9tb2R1bGVzLnJvb3QsIHRydWUpO1xuXHQgIC8vIHJlc2V0IHZtXG5cdCAgcmVzZXRTdG9yZVZNKHN0b3JlLCBzdGF0ZSwgaG90KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzZXRTdG9yZVZNIChzdG9yZSwgc3RhdGUsIGhvdCkge1xuXHQgIHZhciBvbGRWbSA9IHN0b3JlLl92bTtcblx0XG5cdCAgLy8gYmluZCBzdG9yZSBwdWJsaWMgZ2V0dGVyc1xuXHQgIHN0b3JlLmdldHRlcnMgPSB7fTtcblx0ICB2YXIgd3JhcHBlZEdldHRlcnMgPSBzdG9yZS5fd3JhcHBlZEdldHRlcnM7XG5cdCAgdmFyIGNvbXB1dGVkID0ge307XG5cdCAgZm9yRWFjaFZhbHVlKHdyYXBwZWRHZXR0ZXJzLCBmdW5jdGlvbiAoZm4sIGtleSkge1xuXHQgICAgLy8gdXNlIGNvbXB1dGVkIHRvIGxldmVyYWdlIGl0cyBsYXp5LWNhY2hpbmcgbWVjaGFuaXNtXG5cdCAgICBjb21wdXRlZFtrZXldID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZm4oc3RvcmUpOyB9O1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0b3JlLmdldHRlcnMsIGtleSwge1xuXHQgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLl92bVtrZXldOyB9LFxuXHQgICAgICBlbnVtZXJhYmxlOiB0cnVlIC8vIGZvciBsb2NhbCBnZXR0ZXJzXG5cdCAgICB9KTtcblx0ICB9KTtcblx0XG5cdCAgLy8gdXNlIGEgVnVlIGluc3RhbmNlIHRvIHN0b3JlIHRoZSBzdGF0ZSB0cmVlXG5cdCAgLy8gc3VwcHJlc3Mgd2FybmluZ3MganVzdCBpbiBjYXNlIHRoZSB1c2VyIGhhcyBhZGRlZFxuXHQgIC8vIHNvbWUgZnVua3kgZ2xvYmFsIG1peGluc1xuXHQgIHZhciBzaWxlbnQgPSBWdWUuY29uZmlnLnNpbGVudDtcblx0ICBWdWUuY29uZmlnLnNpbGVudCA9IHRydWU7XG5cdCAgc3RvcmUuX3ZtID0gbmV3IFZ1ZSh7XG5cdCAgICBkYXRhOiB7XG5cdCAgICAgICQkc3RhdGU6IHN0YXRlXG5cdCAgICB9LFxuXHQgICAgY29tcHV0ZWQ6IGNvbXB1dGVkXG5cdCAgfSk7XG5cdCAgVnVlLmNvbmZpZy5zaWxlbnQgPSBzaWxlbnQ7XG5cdFxuXHQgIC8vIGVuYWJsZSBzdHJpY3QgbW9kZSBmb3IgbmV3IHZtXG5cdCAgaWYgKHN0b3JlLnN0cmljdCkge1xuXHQgICAgZW5hYmxlU3RyaWN0TW9kZShzdG9yZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAob2xkVm0pIHtcblx0ICAgIGlmIChob3QpIHtcblx0ICAgICAgLy8gZGlzcGF0Y2ggY2hhbmdlcyBpbiBhbGwgc3Vic2NyaWJlZCB3YXRjaGVyc1xuXHQgICAgICAvLyB0byBmb3JjZSBnZXR0ZXIgcmUtZXZhbHVhdGlvbiBmb3IgaG90IHJlbG9hZGluZy5cblx0ICAgICAgc3RvcmUuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG9sZFZtLl9kYXRhLiQkc3RhdGUgPSBudWxsO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJldHVybiBvbGRWbS4kZGVzdHJveSgpOyB9KTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluc3RhbGxNb2R1bGUgKHN0b3JlLCByb290U3RhdGUsIHBhdGgsIG1vZHVsZSwgaG90KSB7XG5cdCAgdmFyIGlzUm9vdCA9ICFwYXRoLmxlbmd0aDtcblx0ICB2YXIgbmFtZXNwYWNlID0gc3RvcmUuX21vZHVsZXMuZ2V0TmFtZXNwYWNlKHBhdGgpO1xuXHRcblx0ICAvLyByZWdpc3RlciBpbiBuYW1lc3BhY2UgbWFwXG5cdCAgaWYgKG1vZHVsZS5uYW1lc3BhY2VkKSB7XG5cdCAgICBzdG9yZS5fbW9kdWxlc05hbWVzcGFjZU1hcFtuYW1lc3BhY2VdID0gbW9kdWxlO1xuXHQgIH1cblx0XG5cdCAgLy8gc2V0IHN0YXRlXG5cdCAgaWYgKCFpc1Jvb3QgJiYgIWhvdCkge1xuXHQgICAgdmFyIHBhcmVudFN0YXRlID0gZ2V0TmVzdGVkU3RhdGUocm9vdFN0YXRlLCBwYXRoLnNsaWNlKDAsIC0xKSk7XG5cdCAgICB2YXIgbW9kdWxlTmFtZSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcblx0ICAgIHN0b3JlLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgVnVlLnNldChwYXJlbnRTdGF0ZSwgbW9kdWxlTmFtZSwgbW9kdWxlLnN0YXRlKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgdmFyIGxvY2FsID0gbW9kdWxlLmNvbnRleHQgPSBtYWtlTG9jYWxDb250ZXh0KHN0b3JlLCBuYW1lc3BhY2UsIHBhdGgpO1xuXHRcblx0ICBtb2R1bGUuZm9yRWFjaE11dGF0aW9uKGZ1bmN0aW9uIChtdXRhdGlvbiwga2V5KSB7XG5cdCAgICB2YXIgbmFtZXNwYWNlZFR5cGUgPSBuYW1lc3BhY2UgKyBrZXk7XG5cdCAgICByZWdpc3Rlck11dGF0aW9uKHN0b3JlLCBuYW1lc3BhY2VkVHlwZSwgbXV0YXRpb24sIGxvY2FsKTtcblx0ICB9KTtcblx0XG5cdCAgbW9kdWxlLmZvckVhY2hBY3Rpb24oZnVuY3Rpb24gKGFjdGlvbiwga2V5KSB7XG5cdCAgICB2YXIgdHlwZSA9IGFjdGlvbi5yb290ID8ga2V5IDogbmFtZXNwYWNlICsga2V5O1xuXHQgICAgdmFyIGhhbmRsZXIgPSBhY3Rpb24uaGFuZGxlciB8fCBhY3Rpb247XG5cdCAgICByZWdpc3RlckFjdGlvbihzdG9yZSwgdHlwZSwgaGFuZGxlciwgbG9jYWwpO1xuXHQgIH0pO1xuXHRcblx0ICBtb2R1bGUuZm9yRWFjaEdldHRlcihmdW5jdGlvbiAoZ2V0dGVyLCBrZXkpIHtcblx0ICAgIHZhciBuYW1lc3BhY2VkVHlwZSA9IG5hbWVzcGFjZSArIGtleTtcblx0ICAgIHJlZ2lzdGVyR2V0dGVyKHN0b3JlLCBuYW1lc3BhY2VkVHlwZSwgZ2V0dGVyLCBsb2NhbCk7XG5cdCAgfSk7XG5cdFxuXHQgIG1vZHVsZS5mb3JFYWNoQ2hpbGQoZnVuY3Rpb24gKGNoaWxkLCBrZXkpIHtcblx0ICAgIGluc3RhbGxNb2R1bGUoc3RvcmUsIHJvb3RTdGF0ZSwgcGF0aC5jb25jYXQoa2V5KSwgY2hpbGQsIGhvdCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBtYWtlIGxvY2FsaXplZCBkaXNwYXRjaCwgY29tbWl0LCBnZXR0ZXJzIGFuZCBzdGF0ZVxuXHQgKiBpZiB0aGVyZSBpcyBubyBuYW1lc3BhY2UsIGp1c3QgdXNlIHJvb3Qgb25lc1xuXHQgKi9cblx0ZnVuY3Rpb24gbWFrZUxvY2FsQ29udGV4dCAoc3RvcmUsIG5hbWVzcGFjZSwgcGF0aCkge1xuXHQgIHZhciBub05hbWVzcGFjZSA9IG5hbWVzcGFjZSA9PT0gJyc7XG5cdFxuXHQgIHZhciBsb2NhbCA9IHtcblx0ICAgIGRpc3BhdGNoOiBub05hbWVzcGFjZSA/IHN0b3JlLmRpc3BhdGNoIDogZnVuY3Rpb24gKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpIHtcblx0ICAgICAgdmFyIGFyZ3MgPSB1bmlmeU9iamVjdFN0eWxlKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpO1xuXHQgICAgICB2YXIgcGF5bG9hZCA9IGFyZ3MucGF5bG9hZDtcblx0ICAgICAgdmFyIG9wdGlvbnMgPSBhcmdzLm9wdGlvbnM7XG5cdCAgICAgIHZhciB0eXBlID0gYXJncy50eXBlO1xuXHRcblx0ICAgICAgaWYgKCFvcHRpb25zIHx8ICFvcHRpb25zLnJvb3QpIHtcblx0ICAgICAgICB0eXBlID0gbmFtZXNwYWNlICsgdHlwZTtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhc3RvcmUuX2FjdGlvbnNbdHlwZV0pIHtcblx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gbG9jYWwgYWN0aW9uIHR5cGU6IFwiICsgKGFyZ3MudHlwZSkgKyBcIiwgZ2xvYmFsIHR5cGU6IFwiICsgdHlwZSkpO1xuXHQgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2godHlwZSwgcGF5bG9hZClcblx0ICAgIH0sXG5cdFxuXHQgICAgY29tbWl0OiBub05hbWVzcGFjZSA/IHN0b3JlLmNvbW1pdCA6IGZ1bmN0aW9uIChfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKSB7XG5cdCAgICAgIHZhciBhcmdzID0gdW5pZnlPYmplY3RTdHlsZShfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKTtcblx0ICAgICAgdmFyIHBheWxvYWQgPSBhcmdzLnBheWxvYWQ7XG5cdCAgICAgIHZhciBvcHRpb25zID0gYXJncy5vcHRpb25zO1xuXHQgICAgICB2YXIgdHlwZSA9IGFyZ3MudHlwZTtcblx0XG5cdCAgICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5yb290KSB7XG5cdCAgICAgICAgdHlwZSA9IG5hbWVzcGFjZSArIHR5cGU7XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXN0b3JlLl9tdXRhdGlvbnNbdHlwZV0pIHtcblx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gbG9jYWwgbXV0YXRpb24gdHlwZTogXCIgKyAoYXJncy50eXBlKSArIFwiLCBnbG9iYWwgdHlwZTogXCIgKyB0eXBlKSk7XG5cdCAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHN0b3JlLmNvbW1pdCh0eXBlLCBwYXlsb2FkLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvLyBnZXR0ZXJzIGFuZCBzdGF0ZSBvYmplY3QgbXVzdCBiZSBnb3R0ZW4gbGF6aWx5XG5cdCAgLy8gYmVjYXVzZSB0aGV5IHdpbGwgYmUgY2hhbmdlZCBieSB2bSB1cGRhdGVcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhsb2NhbCwge1xuXHQgICAgZ2V0dGVyczoge1xuXHQgICAgICBnZXQ6IG5vTmFtZXNwYWNlXG5cdCAgICAgICAgPyBmdW5jdGlvbiAoKSB7IHJldHVybiBzdG9yZS5nZXR0ZXJzOyB9XG5cdCAgICAgICAgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBtYWtlTG9jYWxHZXR0ZXJzKHN0b3JlLCBuYW1lc3BhY2UpOyB9XG5cdCAgICB9LFxuXHQgICAgc3RhdGU6IHtcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXROZXN0ZWRTdGF0ZShzdG9yZS5zdGF0ZSwgcGF0aCk7IH1cblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGxvY2FsXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMb2NhbEdldHRlcnMgKHN0b3JlLCBuYW1lc3BhY2UpIHtcblx0ICB2YXIgZ2V0dGVyc1Byb3h5ID0ge307XG5cdFxuXHQgIHZhciBzcGxpdFBvcyA9IG5hbWVzcGFjZS5sZW5ndGg7XG5cdCAgT2JqZWN0LmtleXMoc3RvcmUuZ2V0dGVycykuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgLy8gc2tpcCBpZiB0aGUgdGFyZ2V0IGdldHRlciBpcyBub3QgbWF0Y2ggdGhpcyBuYW1lc3BhY2Vcblx0ICAgIGlmICh0eXBlLnNsaWNlKDAsIHNwbGl0UG9zKSAhPT0gbmFtZXNwYWNlKSB7IHJldHVybiB9XG5cdFxuXHQgICAgLy8gZXh0cmFjdCBsb2NhbCBnZXR0ZXIgdHlwZVxuXHQgICAgdmFyIGxvY2FsVHlwZSA9IHR5cGUuc2xpY2Uoc3BsaXRQb3MpO1xuXHRcblx0ICAgIC8vIEFkZCBhIHBvcnQgdG8gdGhlIGdldHRlcnMgcHJveHkuXG5cdCAgICAvLyBEZWZpbmUgYXMgZ2V0dGVyIHByb3BlcnR5IGJlY2F1c2Vcblx0ICAgIC8vIHdlIGRvIG5vdCB3YW50IHRvIGV2YWx1YXRlIHRoZSBnZXR0ZXJzIGluIHRoaXMgdGltZS5cblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXR0ZXJzUHJveHksIGxvY2FsVHlwZSwge1xuXHQgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLmdldHRlcnNbdHlwZV07IH0sXG5cdCAgICAgIGVudW1lcmFibGU6IHRydWVcblx0ICAgIH0pO1xuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gZ2V0dGVyc1Byb3h5XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlZ2lzdGVyTXV0YXRpb24gKHN0b3JlLCB0eXBlLCBoYW5kbGVyLCBsb2NhbCkge1xuXHQgIHZhciBlbnRyeSA9IHN0b3JlLl9tdXRhdGlvbnNbdHlwZV0gfHwgKHN0b3JlLl9tdXRhdGlvbnNbdHlwZV0gPSBbXSk7XG5cdCAgZW50cnkucHVzaChmdW5jdGlvbiB3cmFwcGVkTXV0YXRpb25IYW5kbGVyIChwYXlsb2FkKSB7XG5cdCAgICBoYW5kbGVyLmNhbGwoc3RvcmUsIGxvY2FsLnN0YXRlLCBwYXlsb2FkKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVnaXN0ZXJBY3Rpb24gKHN0b3JlLCB0eXBlLCBoYW5kbGVyLCBsb2NhbCkge1xuXHQgIHZhciBlbnRyeSA9IHN0b3JlLl9hY3Rpb25zW3R5cGVdIHx8IChzdG9yZS5fYWN0aW9uc1t0eXBlXSA9IFtdKTtcblx0ICBlbnRyeS5wdXNoKGZ1bmN0aW9uIHdyYXBwZWRBY3Rpb25IYW5kbGVyIChwYXlsb2FkLCBjYikge1xuXHQgICAgdmFyIHJlcyA9IGhhbmRsZXIuY2FsbChzdG9yZSwge1xuXHQgICAgICBkaXNwYXRjaDogbG9jYWwuZGlzcGF0Y2gsXG5cdCAgICAgIGNvbW1pdDogbG9jYWwuY29tbWl0LFxuXHQgICAgICBnZXR0ZXJzOiBsb2NhbC5nZXR0ZXJzLFxuXHQgICAgICBzdGF0ZTogbG9jYWwuc3RhdGUsXG5cdCAgICAgIHJvb3RHZXR0ZXJzOiBzdG9yZS5nZXR0ZXJzLFxuXHQgICAgICByb290U3RhdGU6IHN0b3JlLnN0YXRlXG5cdCAgICB9LCBwYXlsb2FkLCBjYik7XG5cdCAgICBpZiAoIWlzUHJvbWlzZShyZXMpKSB7XG5cdCAgICAgIHJlcyA9IFByb21pc2UucmVzb2x2ZShyZXMpO1xuXHQgICAgfVxuXHQgICAgaWYgKHN0b3JlLl9kZXZ0b29sSG9vaykge1xuXHQgICAgICByZXR1cm4gcmVzLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBzdG9yZS5fZGV2dG9vbEhvb2suZW1pdCgndnVleDplcnJvcicsIGVycik7XG5cdCAgICAgICAgdGhyb3cgZXJyXG5cdCAgICAgIH0pXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gcmVzXG5cdCAgICB9XG5cdCAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlZ2lzdGVyR2V0dGVyIChzdG9yZSwgdHlwZSwgcmF3R2V0dGVyLCBsb2NhbCkge1xuXHQgIGlmIChzdG9yZS5fd3JhcHBlZEdldHRlcnNbdHlwZV0pIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIGR1cGxpY2F0ZSBnZXR0ZXIga2V5OiBcIiArIHR5cGUpKTtcblx0ICAgIH1cblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBzdG9yZS5fd3JhcHBlZEdldHRlcnNbdHlwZV0gPSBmdW5jdGlvbiB3cmFwcGVkR2V0dGVyIChzdG9yZSkge1xuXHQgICAgcmV0dXJuIHJhd0dldHRlcihcblx0ICAgICAgbG9jYWwuc3RhdGUsIC8vIGxvY2FsIHN0YXRlXG5cdCAgICAgIGxvY2FsLmdldHRlcnMsIC8vIGxvY2FsIGdldHRlcnNcblx0ICAgICAgc3RvcmUuc3RhdGUsIC8vIHJvb3Qgc3RhdGVcblx0ICAgICAgc3RvcmUuZ2V0dGVycyAvLyByb290IGdldHRlcnNcblx0ICAgIClcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVTdHJpY3RNb2RlIChzdG9yZSkge1xuXHQgIHN0b3JlLl92bS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fZGF0YS4kJHN0YXRlIH0sIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGFzc2VydChzdG9yZS5fY29tbWl0dGluZywgXCJEbyBub3QgbXV0YXRlIHZ1ZXggc3RvcmUgc3RhdGUgb3V0c2lkZSBtdXRhdGlvbiBoYW5kbGVycy5cIik7XG5cdCAgICB9XG5cdCAgfSwgeyBkZWVwOiB0cnVlLCBzeW5jOiB0cnVlIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXROZXN0ZWRTdGF0ZSAoc3RhdGUsIHBhdGgpIHtcblx0ICByZXR1cm4gcGF0aC5sZW5ndGhcblx0ICAgID8gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKHN0YXRlLCBrZXkpIHsgcmV0dXJuIHN0YXRlW2tleV07IH0sIHN0YXRlKVxuXHQgICAgOiBzdGF0ZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1bmlmeU9iamVjdFN0eWxlICh0eXBlLCBwYXlsb2FkLCBvcHRpb25zKSB7XG5cdCAgaWYgKGlzT2JqZWN0KHR5cGUpICYmIHR5cGUudHlwZSkge1xuXHQgICAgb3B0aW9ucyA9IHBheWxvYWQ7XG5cdCAgICBwYXlsb2FkID0gdHlwZTtcblx0ICAgIHR5cGUgPSB0eXBlLnR5cGU7XG5cdCAgfVxuXHRcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgYXNzZXJ0KHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJywgKFwiRXhwZWN0cyBzdHJpbmcgYXMgdGhlIHR5cGUsIGJ1dCBmb3VuZCBcIiArICh0eXBlb2YgdHlwZSkgKyBcIi5cIikpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHsgdHlwZTogdHlwZSwgcGF5bG9hZDogcGF5bG9hZCwgb3B0aW9uczogb3B0aW9ucyB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluc3RhbGwgKF9WdWUpIHtcblx0ICBpZiAoVnVlICYmIF9WdWUgPT09IFZ1ZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgY29uc29sZS5lcnJvcihcblx0ICAgICAgICAnW3Z1ZXhdIGFscmVhZHkgaW5zdGFsbGVkLiBWdWUudXNlKFZ1ZXgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLidcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBWdWUgPSBfVnVlO1xuXHQgIGFwcGx5TWl4aW4oVnVlKTtcblx0fVxuXHRcblx0dmFyIG1hcFN0YXRlID0gbm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIHN0YXRlcykge1xuXHQgIHZhciByZXMgPSB7fTtcblx0ICBub3JtYWxpemVNYXAoc3RhdGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcblx0ICAgIHZhciBrZXkgPSByZWYua2V5O1xuXHQgICAgdmFyIHZhbCA9IHJlZi52YWw7XG5cdFxuXHQgICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRTdGF0ZSAoKSB7XG5cdCAgICAgIHZhciBzdGF0ZSA9IHRoaXMuJHN0b3JlLnN0YXRlO1xuXHQgICAgICB2YXIgZ2V0dGVycyA9IHRoaXMuJHN0b3JlLmdldHRlcnM7XG5cdCAgICAgIGlmIChuYW1lc3BhY2UpIHtcblx0ICAgICAgICB2YXIgbW9kdWxlID0gZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBTdGF0ZScsIG5hbWVzcGFjZSk7XG5cdCAgICAgICAgaWYgKCFtb2R1bGUpIHtcblx0ICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGF0ZSA9IG1vZHVsZS5jb250ZXh0LnN0YXRlO1xuXHQgICAgICAgIGdldHRlcnMgPSBtb2R1bGUuY29udGV4dC5nZXR0ZXJzO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nXG5cdCAgICAgICAgPyB2YWwuY2FsbCh0aGlzLCBzdGF0ZSwgZ2V0dGVycylcblx0ICAgICAgICA6IHN0YXRlW3ZhbF1cblx0ICAgIH07XG5cdCAgICAvLyBtYXJrIHZ1ZXggZ2V0dGVyIGZvciBkZXZ0b29sc1xuXHQgICAgcmVzW2tleV0udnVleCA9IHRydWU7XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHJlc1xuXHR9KTtcblx0XG5cdHZhciBtYXBNdXRhdGlvbnMgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgbXV0YXRpb25zKSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIG5vcm1hbGl6ZU1hcChtdXRhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKHJlZikge1xuXHQgICAgdmFyIGtleSA9IHJlZi5rZXk7XG5cdCAgICB2YXIgdmFsID0gcmVmLnZhbDtcblx0XG5cdCAgICByZXNba2V5XSA9IGZ1bmN0aW9uIG1hcHBlZE11dGF0aW9uICgpIHtcblx0ICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTtcblx0XG5cdCAgICAgIHZhciBjb21taXQgPSB0aGlzLiRzdG9yZS5jb21taXQ7XG5cdCAgICAgIGlmIChuYW1lc3BhY2UpIHtcblx0ICAgICAgICB2YXIgbW9kdWxlID0gZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBNdXRhdGlvbnMnLCBuYW1lc3BhY2UpO1xuXHQgICAgICAgIGlmICghbW9kdWxlKSB7XG5cdCAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cdCAgICAgICAgY29tbWl0ID0gbW9kdWxlLmNvbnRleHQuY29tbWl0O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nXG5cdCAgICAgICAgPyB2YWwuYXBwbHkodGhpcywgW2NvbW1pdF0uY29uY2F0KGFyZ3MpKVxuXHQgICAgICAgIDogY29tbWl0LmFwcGx5KHRoaXMuJHN0b3JlLCBbdmFsXS5jb25jYXQoYXJncykpXG5cdCAgICB9O1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXNcblx0fSk7XG5cdFxuXHR2YXIgbWFwR2V0dGVycyA9IG5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBnZXR0ZXJzKSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIG5vcm1hbGl6ZU1hcChnZXR0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcblx0ICAgIHZhciBrZXkgPSByZWYua2V5O1xuXHQgICAgdmFyIHZhbCA9IHJlZi52YWw7XG5cdFxuXHQgICAgdmFsID0gbmFtZXNwYWNlICsgdmFsO1xuXHQgICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRHZXR0ZXIgKCkge1xuXHQgICAgICBpZiAobmFtZXNwYWNlICYmICFnZXRNb2R1bGVCeU5hbWVzcGFjZSh0aGlzLiRzdG9yZSwgJ21hcEdldHRlcnMnLCBuYW1lc3BhY2UpKSB7XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgISh2YWwgaW4gdGhpcy4kc3RvcmUuZ2V0dGVycykpIHtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIGdldHRlcjogXCIgKyB2YWwpKTtcblx0ICAgICAgICByZXR1cm5cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1t2YWxdXG5cdCAgICB9O1xuXHQgICAgLy8gbWFyayB2dWV4IGdldHRlciBmb3IgZGV2dG9vbHNcblx0ICAgIHJlc1trZXldLnZ1ZXggPSB0cnVlO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXNcblx0fSk7XG5cdFxuXHR2YXIgbWFwQWN0aW9ucyA9IG5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBhY3Rpb25zKSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIG5vcm1hbGl6ZU1hcChhY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcblx0ICAgIHZhciBrZXkgPSByZWYua2V5O1xuXHQgICAgdmFyIHZhbCA9IHJlZi52YWw7XG5cdFxuXHQgICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRBY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXJncyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXHRcblx0ICAgICAgdmFyIGRpc3BhdGNoID0gdGhpcy4kc3RvcmUuZGlzcGF0Y2g7XG5cdCAgICAgIGlmIChuYW1lc3BhY2UpIHtcblx0ICAgICAgICB2YXIgbW9kdWxlID0gZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBBY3Rpb25zJywgbmFtZXNwYWNlKTtcblx0ICAgICAgICBpZiAoIW1vZHVsZSkge1xuXHQgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRpc3BhdGNoID0gbW9kdWxlLmNvbnRleHQuZGlzcGF0Y2g7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbidcblx0ICAgICAgICA/IHZhbC5hcHBseSh0aGlzLCBbZGlzcGF0Y2hdLmNvbmNhdChhcmdzKSlcblx0ICAgICAgICA6IGRpc3BhdGNoLmFwcGx5KHRoaXMuJHN0b3JlLCBbdmFsXS5jb25jYXQoYXJncykpXG5cdCAgICB9O1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXNcblx0fSk7XG5cdFxuXHR2YXIgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMgPSBmdW5jdGlvbiAobmFtZXNwYWNlKSB7IHJldHVybiAoe1xuXHQgIG1hcFN0YXRlOiBtYXBTdGF0ZS5iaW5kKG51bGwsIG5hbWVzcGFjZSksXG5cdCAgbWFwR2V0dGVyczogbWFwR2V0dGVycy5iaW5kKG51bGwsIG5hbWVzcGFjZSksXG5cdCAgbWFwTXV0YXRpb25zOiBtYXBNdXRhdGlvbnMuYmluZChudWxsLCBuYW1lc3BhY2UpLFxuXHQgIG1hcEFjdGlvbnM6IG1hcEFjdGlvbnMuYmluZChudWxsLCBuYW1lc3BhY2UpXG5cdH0pOyB9O1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplTWFwIChtYXApIHtcblx0ICByZXR1cm4gQXJyYXkuaXNBcnJheShtYXApXG5cdCAgICA/IG1hcC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKHsga2V5OiBrZXksIHZhbDoga2V5IH0pOyB9KVxuXHQgICAgOiBPYmplY3Qua2V5cyhtYXApLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoeyBrZXk6IGtleSwgdmFsOiBtYXBba2V5XSB9KTsgfSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplTmFtZXNwYWNlIChmbikge1xuXHQgIHJldHVybiBmdW5jdGlvbiAobmFtZXNwYWNlLCBtYXApIHtcblx0ICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xuXHQgICAgICBtYXAgPSBuYW1lc3BhY2U7XG5cdCAgICAgIG5hbWVzcGFjZSA9ICcnO1xuXHQgICAgfSBlbHNlIGlmIChuYW1lc3BhY2UuY2hhckF0KG5hbWVzcGFjZS5sZW5ndGggLSAxKSAhPT0gJy8nKSB7XG5cdCAgICAgIG5hbWVzcGFjZSArPSAnLyc7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZm4obmFtZXNwYWNlLCBtYXApXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRNb2R1bGVCeU5hbWVzcGFjZSAoc3RvcmUsIGhlbHBlciwgbmFtZXNwYWNlKSB7XG5cdCAgdmFyIG1vZHVsZSA9IHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwW25hbWVzcGFjZV07XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIW1vZHVsZSkge1xuXHQgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gbW9kdWxlIG5hbWVzcGFjZSBub3QgZm91bmQgaW4gXCIgKyBoZWxwZXIgKyBcIigpOiBcIiArIG5hbWVzcGFjZSkpO1xuXHQgIH1cblx0ICByZXR1cm4gbW9kdWxlXG5cdH1cblx0XG5cdHZhciBpbmRleCA9IHtcblx0ICBTdG9yZTogU3RvcmUsXG5cdCAgaW5zdGFsbDogaW5zdGFsbCxcblx0ICB2ZXJzaW9uOiAnMy4wLjEnLFxuXHQgIG1hcFN0YXRlOiBtYXBTdGF0ZSxcblx0ICBtYXBNdXRhdGlvbnM6IG1hcE11dGF0aW9ucyxcblx0ICBtYXBHZXR0ZXJzOiBtYXBHZXR0ZXJzLFxuXHQgIG1hcEFjdGlvbnM6IG1hcEFjdGlvbnMsXG5cdCAgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnM6IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGluZGV4O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykpKVxuXG4vKioqLyB9KSxcbi8qIDM2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX2V4cG9ydHNfXywgX192dWVfb3B0aW9uc19fXG5cdHZhciBfX3Z1ZV9zdHlsZXNfXyA9IHt9XG5cdFxuXHQvKiBzY3JpcHQgKi9cblx0X192dWVfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNylcblx0XG5cdC8qIHRlbXBsYXRlICovXG5cdHZhciBfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OClcblx0X192dWVfb3B0aW9uc19fID0gX192dWVfZXhwb3J0c19fID0gX192dWVfZXhwb3J0c19fIHx8IHt9XG5cdGlmIChcblx0ICB0eXBlb2YgX192dWVfZXhwb3J0c19fLmRlZmF1bHQgPT09IFwib2JqZWN0XCIgfHxcblx0ICB0eXBlb2YgX192dWVfZXhwb3J0c19fLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0X192dWVfb3B0aW9uc19fID0gX192dWVfZXhwb3J0c19fID0gX192dWVfZXhwb3J0c19fLmRlZmF1bHRcblx0fVxuXHRpZiAodHlwZW9mIF9fdnVlX29wdGlvbnNfXyA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgX192dWVfb3B0aW9uc19fID0gX192dWVfb3B0aW9uc19fLm9wdGlvbnNcblx0fVxuXHRcblx0X192dWVfb3B0aW9uc19fLnJlbmRlciA9IF9fdnVlX3RlbXBsYXRlX18ucmVuZGVyXG5cdF9fdnVlX29wdGlvbnNfXy5zdGF0aWNSZW5kZXJGbnMgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnN0YXRpY1JlbmRlckZuc1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9leHBvcnRzX19cblxuXG4vKioqLyB9KSxcbi8qIDM3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0XG5cdHZhciBfdnVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfdnVlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZSk7XG5cdFxuXHR2YXIgX2xvYWRpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0XG5cdHZhciBfbG9hZGluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2FkaW5nKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfdnVlMi5kZWZhdWx0LmNvbXBvbmVudCgnbG9hZGluZycsIF9sb2FkaW5nMi5kZWZhdWx0KTsgLy9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdGl0bGU6ICdIZWxsbyBXb3JsZCdcblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDM4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG4vKiAzOSAqLyxcbi8qIDQwICovLFxuLyogNDEgKi8sXG4vKiA0MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9leHBvcnRzX18sIF9fdnVlX29wdGlvbnNfX1xuXHR2YXIgX192dWVfc3R5bGVzX18gPSB7fVxuXHRcblx0Lyogc2NyaXB0ICovXG5cdF9fdnVlX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpXG5cdFxuXHQvKiB0ZW1wbGF0ZSAqL1xuXHR2YXIgX192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXyB8fCB7fVxuXHRpZiAoXG5cdCAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcIm9iamVjdFwiIHx8XG5cdCAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0XG5cdH1cblx0aWYgKHR5cGVvZiBfX3Z1ZV9vcHRpb25zX18gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgIF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX29wdGlvbnNfXy5vcHRpb25zXG5cdH1cblx0XG5cdF9fdnVlX29wdGlvbnNfXy5yZW5kZXIgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnJlbmRlclxuXHRfX3Z1ZV9vcHRpb25zX18uc3RhdGljUmVuZGVyRm5zID0gX192dWVfdGVtcGxhdGVfXy5zdGF0aWNSZW5kZXJGbnNcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfZXhwb3J0c19fXG5cblxuLyoqKi8gfSksXG4vKiA0MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7XG5cdFxuXHR2YXIgX3N0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHR2YXIgX3N0b3JlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0b3JlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvL1xuXHQvL1xuXHQvL1xuXHQvL1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXB1dGVkOiB7XG5cdCAgICBsb2FkU3RhdHVzOiBmdW5jdGlvbiBsb2FkU3RhdHVzKCkge1xuXHQgICAgICByZXR1cm4gX3N0b3JlMi5kZWZhdWx0LnN0YXRlLmxvYWRTdGF0dXM7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDQ0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG4vKiA0NSAqLyxcbi8qIDQ2ICovLFxuLyogNDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiAoX3ZtLmxvYWRTdGF0dXMpID8gX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImxvYWRpbmdcIlxuXHQgIH0pIDogX3ZtLl9lKClcblx0fSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG4vKioqLyB9KSxcbi8qIDQ4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcblx0ICByZXR1cm4gX2MoJ2RpdicsIHtcblx0ICAgIGF0dHJzOiB7XG5cdCAgICAgIFwiaWRcIjogXCJhcHBcIlxuXHQgICAgfVxuXHQgIH0sIFtfYygnaDEnLCBbX3ZtLl92KF92bS5fcyhfdm0udGl0bGUpKV0pLCBfdm0uX3YoXCIgXCIpLCBfYygncm91dGVyLXZpZXcnLCB7XG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcImtlZXAtYWxpdmVcIjogXCJcIlxuXHQgICAgfVxuXHQgIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbG9hZGluZycpXSwgMSlcblx0fSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG4vKioqLyB9KSxcbi8qIDQ5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX2V4cG9ydHNfXywgX192dWVfb3B0aW9uc19fXG5cdHZhciBfX3Z1ZV9zdHlsZXNfXyA9IHt9XG5cdFxuXHQvKiBzY3JpcHQgKi9cblx0X192dWVfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0XG5cdC8qIHRlbXBsYXRlICovXG5cdHZhciBfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0X192dWVfb3B0aW9uc19fID0gX192dWVfZXhwb3J0c19fID0gX192dWVfZXhwb3J0c19fIHx8IHt9XG5cdGlmIChcblx0ICB0eXBlb2YgX192dWVfZXhwb3J0c19fLmRlZmF1bHQgPT09IFwib2JqZWN0XCIgfHxcblx0ICB0eXBlb2YgX192dWVfZXhwb3J0c19fLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0X192dWVfb3B0aW9uc19fID0gX192dWVfZXhwb3J0c19fID0gX192dWVfZXhwb3J0c19fLmRlZmF1bHRcblx0fVxuXHRpZiAodHlwZW9mIF9fdnVlX29wdGlvbnNfXyA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgX192dWVfb3B0aW9uc19fID0gX192dWVfb3B0aW9uc19fLm9wdGlvbnNcblx0fVxuXHRcblx0X192dWVfb3B0aW9uc19fLnJlbmRlciA9IF9fdnVlX3RlbXBsYXRlX18ucmVuZGVyXG5cdF9fdnVlX29wdGlvbnNfXy5zdGF0aWNSZW5kZXJGbnMgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnN0YXRpY1JlbmRlckZuc1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9leHBvcnRzX19cblxuXG4vKioqLyB9KSxcbi8qIDUwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHRcblx0dmFyIF9zdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0dmFyIF9zdG9yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdG9yZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICAgIG1ldGhvZHM6IHtcblx0ICAgICAgICBzaG93TG9hZGluZzogZnVuY3Rpb24gc2hvd0xvYWRpbmcoKSB7XG5cdCAgICAgICAgICAgIF9zdG9yZTIuZGVmYXVsdC5jb21taXQoJ0xPQURfU1RBVFVTJywgdHJ1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDUxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG4vKiA1MiAqLyxcbi8qIDUzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcblx0ICByZXR1cm4gX2MoJ2RpdicsIHtcblx0ICAgIHN0YXRpY0NsYXNzOiBcImJveFwiXG5cdCAgfSwgW19jKCdhJywge1xuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJocmVmXCI6IFwiamF2YXNjcmlwdDp2b2lkKDApXCJcblx0ICAgIH0sXG5cdCAgICBvbjoge1xuXHQgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuXHQgICAgICAgIF92bS5zaG93TG9hZGluZygpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCBbX3ZtLl92KFwi5pi+56S6bG9hZGluZ1wiKV0pXSlcblx0fSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2luZGV4LmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGE4NWI0OTk2N2Y5ZDRmNDRjOTYyIiwiaW1wb3J0ICdlczYtcHJvbWlzZS9hdXRvJ1xuXG5pbXBvcnQgVnVlIGZyb20gJ3Z1ZSdcbmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcidcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcydcbmltcG9ydCBzdG9yZSBmcm9tICcuL3Z1ZXgvc3RvcmUnXG5pbXBvcnQgQXBwIGZyb20gJy4vYXBwJ1xuXG5WdWUudXNlKFZ1ZVJvdXRlcik7XG5WdWUucHJvdG90eXBlLiRodHRwID0gYXhpb3M7XG5cbmltcG9ydCBpbmRleCBmcm9tICcuL3ZpZXcvaW5kZXgvaW5kZXgudnVlJ1xuXG5jb25zdCBfcm91dGVzID0gW1xuICAgIHtcbiAgICAgICAgcGF0aDogJy9pbmRleCcsXG4gICAgICAgIG5hbWU6J2luZGV4JyxcbiAgICAgICAgY29tcG9uZW50OiBpbmRleFxuICAgIH0sXG4gICAge1xuICAgICAgICBwYXRoOiAnKicsXG4gICAgICAgIHJlZGlyZWN0OiAnL2luZGV4J1xuICAgIH1cbl07XG5cbmNvbnN0IHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoe1xuICAgIHJvdXRlczpfcm91dGVzXG59KVxuXG5jb25zdCBhcHAgPSBuZXcgVnVlKHtcbiAgICAgICAgZWw6ICcjYXBwJyxcbiAgICAgICAgcm91dGVyLFxuICAgICAgICBzdG9yZSxcbiAgICAgICAgcmVuZGVyOiBoID0+IGgoQXBwKVxufSkuJG1vdW50KCcjYXBwJylcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsIi8vIFRoaXMgZmlsZSBjYW4gYmUgcmVxdWlyZWQgaW4gQnJvd3NlcmlmeSBhbmQgTm9kZS5qcyBmb3IgYXV0b21hdGljIHBvbHlmaWxsXG4vLyBUbyB1c2UgaXQ6ICByZXF1aXJlKCdlczYtcHJvbWlzZS9hdXRvJyk7XG4ndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJykucG9seWZpbGwoKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9lczYtcHJvbWlzZS9hdXRvLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgdjQuMi40KzMxNGU0ODMxXG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB4O1xuICByZXR1cm4geCAhPT0gbnVsbCAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cblxuXG52YXIgX2lzQXJyYXkgPSB2b2lkIDA7XG5pZiAoQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG59IGVsc2Uge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdm9pZCAwO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdm9pZCAwO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblxuLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbnZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8vIG5vZGVcbmZ1bmN0aW9uIHVzZU5leHRUaWNrKCkge1xuICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICB9O1xufVxuXG4vLyB2ZXJ0eFxuZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHtcbiAgaWYgKHR5cGVvZiB2ZXJ0eE5leHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZlcnR4TmV4dChmbHVzaCk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gIHZhciBpdGVyYXRpb25zID0gMDtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG4gIH07XG59XG5cbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG4gICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblxuICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG4gIH1cblxuICBsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHZlcnR4ID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKS5yZXF1aXJlKCd2ZXJ0eCcpO1xuICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG4gIH1cbn1cblxudmFyIHNjaGVkdWxlRmx1c2ggPSB2b2lkIDA7XG4vLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuaWYgKGlzTm9kZSkge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcbn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbn0gZWxzZSBpZiAoaXNXb3JrZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7XG59IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7XG59IGVsc2Uge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuXG4gIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbWFrZVByb21pc2UoY2hpbGQpO1xuICB9XG5cbiAgdmFyIF9zdGF0ZSA9IHBhcmVudC5fc3RhdGU7XG5cblxuICBpZiAoX3N0YXRlKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW19zdGF0ZSAtIDFdO1xuICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUkMShvYmplY3QpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCA9IDI7XG5cbnZhciBUUllfQ0FUQ0hfRVJST1IgPSB7IGVycm9yOiBudWxsIH07XG5cbmZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xufVxuXG5mdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG59XG5cbmZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSkge1xuICB0cnkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4kJDEsIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuJCQxLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJDEgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlJDEpIHtcbiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhlbiQkMSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgVFJZX0NBVENIX0VSUk9SLmVycm9yKTtcbiAgICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0aGVuJCQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJDEpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuXG4gIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoaWxkID0gdm9pZCAwLFxuICAgICAgY2FsbGJhY2sgPSB2b2lkIDAsXG4gICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdm9pZCAwLFxuICAgICAgZXJyb3IgPSB2b2lkIDAsXG4gICAgICBzdWNjZWVkZWQgPSB2b2lkIDAsXG4gICAgICBmYWlsZWQgPSB2b2lkIDA7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlLmVycm9yID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gZGV0YWlsO1xuICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gIH1cblxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAvLyBub29wXG4gIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufVxuXG52YXIgRW51bWVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcbiAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gICAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gICAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHtcbiAgICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gICAgfVxuXG4gICAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuICAgICAgICB0aGlzLl9lbnVtZXJhdGUoaW5wdXQpO1xuICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xuICAgIH1cbiAgfVxuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiBfZW51bWVyYXRlKGlucHV0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIF9lYWNoRW50cnkoZW50cnksIGkpIHtcbiAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gICAgdmFyIHJlc29sdmUkJDEgPSBjLnJlc29sdmU7XG5cblxuICAgIGlmIChyZXNvbHZlJCQxID09PSByZXNvbHZlJDEpIHtcbiAgICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlJDEpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcbiAgICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJDEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSQkMShlbnRyeSk7XG4gICAgICAgIH0pLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJDEoZW50cnkpLCBpKTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIF9zZXR0bGVkQXQoc3RhdGUsIGksIHZhbHVlKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cblxuICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICAgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIF93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSkge1xuICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBFbnVtZXJhdG9yO1xufSgpO1xuXG4vKipcbiAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG4gIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3JcbiAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsXG4gIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTtcbiAgbGV0IHByb21pc2UzID0gcmVzb2x2ZSgzKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIFRoZSBhcnJheSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdO1xuICB9KTtcbiAgYGBgXG5cbiAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2VcbiAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzXG4gIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZTpcblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVqZWN0KG5ldyBFcnJvcihcIjJcIikpO1xuICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcbiAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCBhbGxcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cbiAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXG4gIEBzdGF0aWNcbiovXG5mdW5jdGlvbiBhbGwoZW50cmllcykge1xuICByZXR1cm4gbmV3IEVudW1lcmF0b3IodGhpcywgZW50cmllcykucHJvbWlzZTtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcbiAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAyJyk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTFcbiAgICAvLyB3YXMgcmVzb2x2ZWQuXG4gIH0pO1xuICBgYGBcblxuICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG4gIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcbiAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhc1xuICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcbiAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnNcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXG4gIH0pO1xuICBgYGBcblxuICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcbiAgYGBgXG5cbiAgQG1ldGhvZCByYWNlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXMgYXJyYXkgb2YgcHJvbWlzZXMgdG8gb2JzZXJ2ZVxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkXG4gIHByb21pc2UgdG8gc2V0dGxlLlxuKi9cbmZ1bmN0aW9uIHJhY2UoZW50cmllcykge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmICghaXNBcnJheShlbnRyaWVzKSkge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAgYFByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuXG4gIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlamVjdFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxuKi9cbmZ1bmN0aW9uIHJlamVjdCQxKHJlYXNvbikge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG59XG5cbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xufVxuXG4vKipcbiAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUHJvbWlzZVxuICBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cblxudmFyIFByb21pc2UkMSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICAgIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcbiAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXG4gICAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgICAgdGhpcyBpbnN0YW5jZW9mIFByb21pc2UgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgfSk7XG4gIGBgYFxuICAgQ2hhaW5pbmdcbiAgLS0tLS0tLS1cbiAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gdXNlci5uYW1lO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgfSk7XG4gICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICB9KTtcbiAgYGBgXG4gIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICB9KTtcbiAgYGBgXG4gICBBc3NpbWlsYXRpb25cbiAgLS0tLS0tLS0tLS0tXG4gICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG4gIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgfSk7XG4gIGBgYFxuICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICB9KTtcbiAgYGBgXG4gICBTaW1wbGUgRXhhbXBsZVxuICAtLS0tLS0tLS0tLS0tLVxuICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICAgYGBgamF2YXNjcmlwdFxuICBsZXQgcmVzdWx0O1xuICAgdHJ5IHtcbiAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgLy8gc3VjY2Vzc1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAgIC8vIGZhaWx1cmVcbiAgfVxuICBgYGBcbiAgIEVycmJhY2sgRXhhbXBsZVxuICAgYGBganNcbiAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG4gICAgaWYgKGVycikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfVxuICB9KTtcbiAgYGBgXG4gICBQcm9taXNlIEV4YW1wbGU7XG4gICBgYGBqYXZhc2NyaXB0XG4gIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gc3VjY2Vzc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIGZhaWx1cmVcbiAgfSk7XG4gIGBgYFxuICAgQWR2YW5jZWQgRXhhbXBsZVxuICAtLS0tLS0tLS0tLS0tLVxuICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICAgYGBgamF2YXNjcmlwdFxuICBsZXQgYXV0aG9yLCBib29rcztcbiAgIHRyeSB7XG4gICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgLy8gc3VjY2Vzc1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAgIC8vIGZhaWx1cmVcbiAgfVxuICBgYGBcbiAgIEVycmJhY2sgRXhhbXBsZVxuICAgYGBganNcbiAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgIH1cbiAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG4gICB9XG4gICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBmYWlsdXJlKGVycik7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9XG4gIH0pO1xuICBgYGBcbiAgIFByb21pc2UgRXhhbXBsZTtcbiAgIGBgYGphdmFzY3JpcHRcbiAgZmluZEF1dGhvcigpLlxuICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuICAgICAgLy8gZm91bmQgYm9va3NcbiAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICB9KTtcbiAgYGBgXG4gICBAbWV0aG9kIHRoZW5cbiAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG5cbiAgLyoqXG4gIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cbiAgYGBganNcbiAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgfVxuICAvLyBzeW5jaHJvbm91c1xuICB0cnkge1xuICBmaW5kQXV0aG9yKCk7XG4gIH0gY2F0Y2gocmVhc29uKSB7XG4gIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gIH1cbiAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgfSk7XG4gIGBgYFxuICBAbWV0aG9kIGNhdGNoXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cblxuXG4gIFByb21pc2UucHJvdG90eXBlLmNhdGNoID0gZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAgYGZpbmFsbHlgIHdpbGwgYmUgaW52b2tlZCByZWdhcmRsZXNzIG9mIHRoZSBwcm9taXNlJ3MgZmF0ZSBqdXN0IGFzIG5hdGl2ZVxuICAgIHRyeS9jYXRjaC9maW5hbGx5IGJlaGF2ZXNcbiAgXG4gICAgU3luY2hyb25vdXMgZXhhbXBsZTpcbiAgXG4gICAgYGBganNcbiAgICBmaW5kQXV0aG9yKCkge1xuICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEF1dGhvcigpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmaW5kQXV0aG9yKCk7IC8vIHN1Y2NlZWQgb3IgZmFpbFxuICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgIHJldHVybiBmaW5kT3RoZXJBdXRoZXIoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gYWx3YXlzIHJ1bnNcbiAgICAgIC8vIGRvZXNuJ3QgYWZmZWN0IHRoZSByZXR1cm4gdmFsdWVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEFzeW5jaHJvbm91cyBleGFtcGxlOlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpO1xuICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24oKXtcbiAgICAgIC8vIGF1dGhvciB3YXMgZWl0aGVyIGZvdW5kLCBvciBub3RcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBmaW5hbGx5XG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuXG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseSA9IGZ1bmN0aW9uIF9maW5hbGx5KGNhbGxiYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IHByb21pc2UuY29uc3RydWN0b3I7XG5cbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gUHJvbWlzZTtcbn0oKTtcblxuUHJvbWlzZSQxLnByb3RvdHlwZS50aGVuID0gdGhlbjtcblByb21pc2UkMS5hbGwgPSBhbGw7XG5Qcm9taXNlJDEucmFjZSA9IHJhY2U7XG5Qcm9taXNlJDEucmVzb2x2ZSA9IHJlc29sdmUkMTtcblByb21pc2UkMS5yZWplY3QgPSByZWplY3QkMTtcblByb21pc2UkMS5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyO1xuUHJvbWlzZSQxLl9zZXRBc2FwID0gc2V0QXNhcDtcblByb21pc2UkMS5fYXNhcCA9IGFzYXA7XG5cbi8qZ2xvYmFsIHNlbGYqL1xuZnVuY3Rpb24gcG9seWZpbGwoKSB7XG4gIHZhciBsb2NhbCA9IHZvaWQgMDtcblxuICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2NhbCA9IGdsb2JhbDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2NhbCA9IHNlbGY7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICBpZiAoUCkge1xuICAgIHZhciBwcm9taXNlVG9TdHJpbmcgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZVRvU3RyaW5nID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGxvY2FsLlByb21pc2UgPSBQcm9taXNlJDE7XG59XG5cbi8vIFN0cmFuZ2UgY29tcGF0Li5cblByb21pc2UkMS5wb2x5ZmlsbCA9IHBvbHlmaWxsO1xuUHJvbWlzZSQxLlByb21pc2UgPSBQcm9taXNlJDE7XG5cbnJldHVybiBQcm9taXNlJDE7XG5cbn0pKSk7XG5cblxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lczYtcHJvbWlzZS5tYXBcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9lczYtcHJvbWlzZS9kaXN0L2VzNi1wcm9taXNlLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcHJvY2Vzcy9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIVxuICogVnVlLmpzIHYyLjUuMTVcbiAqIChjKSAyMDE0LTIwMTggRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZ2xvYmFsLlZ1ZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuLyogICovXG5cbnZhciBlbXB0eU9iamVjdCA9IE9iamVjdC5mcmVlemUoe30pO1xuXG4vLyB0aGVzZSBoZWxwZXJzIHByb2R1Y2VzIGJldHRlciB2bSBjb2RlIGluIEpTIGVuZ2luZXMgZHVlIHRvIHRoZWlyXG4vLyBleHBsaWNpdG5lc3MgYW5kIGZ1bmN0aW9uIGlubGluaW5nXG5mdW5jdGlvbiBpc1VuZGVmICh2KSB7XG4gIHJldHVybiB2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbFxufVxuXG5mdW5jdGlvbiBpc0RlZiAodikge1xuICByZXR1cm4gdiAhPT0gdW5kZWZpbmVkICYmIHYgIT09IG51bGxcbn1cblxuZnVuY3Rpb24gaXNUcnVlICh2KSB7XG4gIHJldHVybiB2ID09PSB0cnVlXG59XG5cbmZ1bmN0aW9uIGlzRmFsc2UgKHYpIHtcbiAgcmV0dXJuIHYgPT09IGZhbHNlXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdmFsdWUgaXMgcHJpbWl0aXZlXG4gKi9cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlICh2YWx1ZSkge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHxcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8XG4gICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgdHlwZW9mIHZhbHVlID09PSAnc3ltYm9sJyB8fFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nXG4gIClcbn1cblxuLyoqXG4gKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcbiAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcbiAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QgKG9iaikge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnXG59XG5cbi8qKlxuICogR2V0IHRoZSByYXcgdHlwZSBzdHJpbmcgb2YgYSB2YWx1ZSBlLmcuIFtvYmplY3QgT2JqZWN0XVxuICovXG52YXIgX3RvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gdG9SYXdUeXBlICh2YWx1ZSkge1xuICByZXR1cm4gX3RvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKVxufVxuXG4vKipcbiAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcbiAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QgKG9iaikge1xuICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSdcbn1cblxuZnVuY3Rpb24gaXNSZWdFeHAgKHYpIHtcbiAgcmV0dXJuIF90b1N0cmluZy5jYWxsKHYpID09PSAnW29iamVjdCBSZWdFeHBdJ1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHZhbCBpcyBhIHZhbGlkIGFycmF5IGluZGV4LlxuICovXG5mdW5jdGlvbiBpc1ZhbGlkQXJyYXlJbmRleCAodmFsKSB7XG4gIHZhciBuID0gcGFyc2VGbG9hdChTdHJpbmcodmFsKSk7XG4gIHJldHVybiBuID49IDAgJiYgTWF0aC5mbG9vcihuKSA9PT0gbiAmJiBpc0Zpbml0ZSh2YWwpXG59XG5cbi8qKlxuICogQ29udmVydCBhIHZhbHVlIHRvIGEgc3RyaW5nIHRoYXQgaXMgYWN0dWFsbHkgcmVuZGVyZWQuXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nICh2YWwpIHtcbiAgcmV0dXJuIHZhbCA9PSBudWxsXG4gICAgPyAnJ1xuICAgIDogdHlwZW9mIHZhbCA9PT0gJ29iamVjdCdcbiAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCBudWxsLCAyKVxuICAgICAgOiBTdHJpbmcodmFsKVxufVxuXG4vKipcbiAqIENvbnZlcnQgYSBpbnB1dCB2YWx1ZSB0byBhIG51bWJlciBmb3IgcGVyc2lzdGVuY2UuXG4gKiBJZiB0aGUgY29udmVyc2lvbiBmYWlscywgcmV0dXJuIG9yaWdpbmFsIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIgKHZhbCkge1xuICB2YXIgbiA9IHBhcnNlRmxvYXQodmFsKTtcbiAgcmV0dXJuIGlzTmFOKG4pID8gdmFsIDogblxufVxuXG4vKipcbiAqIE1ha2UgYSBtYXAgYW5kIHJldHVybiBhIGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhIGtleVxuICogaXMgaW4gdGhhdCBtYXAuXG4gKi9cbmZ1bmN0aW9uIG1ha2VNYXAgKFxuICBzdHIsXG4gIGV4cGVjdHNMb3dlckNhc2Vcbikge1xuICB2YXIgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGxpc3QgPSBzdHIuc3BsaXQoJywnKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgbWFwW2xpc3RbaV1dID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZXhwZWN0c0xvd2VyQ2FzZVxuICAgID8gZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbC50b0xvd2VyQ2FzZSgpXTsgfVxuICAgIDogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbF07IH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHRhZyBpcyBhIGJ1aWx0LWluIHRhZy5cbiAqL1xudmFyIGlzQnVpbHRJblRhZyA9IG1ha2VNYXAoJ3Nsb3QsY29tcG9uZW50JywgdHJ1ZSk7XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBhdHRyaWJ1dGUgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUuXG4gKi9cbnZhciBpc1Jlc2VydmVkQXR0cmlidXRlID0gbWFrZU1hcCgna2V5LHJlZixzbG90LHNsb3Qtc2NvcGUsaXMnKTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaXRlbSBmcm9tIGFuIGFycmF5XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZSAoYXJyLCBpdGVtKSB7XG4gIGlmIChhcnIubGVuZ3RoKSB7XG4gICAgdmFyIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHJldHVybiBhcnIuc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuZnVuY3Rpb24gaGFzT3duIChvYmosIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSlcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjYWNoZWQgdmVyc2lvbiBvZiBhIHB1cmUgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNhY2hlZCAoZm4pIHtcbiAgdmFyIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgcmV0dXJuIChmdW5jdGlvbiBjYWNoZWRGbiAoc3RyKSB7XG4gICAgdmFyIGhpdCA9IGNhY2hlW3N0cl07XG4gICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpXG4gIH0pXG59XG5cbi8qKlxuICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsaW1pdGVkIHN0cmluZy5cbiAqL1xudmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG52YXIgY2FtZWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgZnVuY3Rpb24gKF8sIGMpIHsgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJzsgfSlcbn0pO1xuXG4vKipcbiAqIENhcGl0YWxpemUgYSBzdHJpbmcuXG4gKi9cbnZhciBjYXBpdGFsaXplID0gY2FjaGVkKGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKVxufSk7XG5cbi8qKlxuICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cbiAqL1xudmFyIGh5cGhlbmF0ZVJFID0gL1xcQihbQS1aXSkvZztcbnZhciBoeXBoZW5hdGUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICctJDEnKS50b0xvd2VyQ2FzZSgpXG59KTtcblxuLyoqXG4gKiBTaW1wbGUgYmluZCBwb2x5ZmlsbCBmb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IHN1cHBvcnQgaXQuLi4gZS5nLlxuICogUGhhbnRvbUpTIDEueC4gVGVjaG5pY2FsbHkgd2UgZG9uJ3QgbmVlZCB0aGlzIGFueW1vcmUgc2luY2UgbmF0aXZlIGJpbmQgaXNcbiAqIG5vdyBtb3JlIHBlcmZvcm1hbnQgaW4gbW9zdCBicm93c2VycywgYnV0IHJlbW92aW5nIGl0IHdvdWxkIGJlIGJyZWFraW5nIGZvclxuICogY29kZSB0aGF0IHdhcyBhYmxlIHRvIHJ1biBpbiBQaGFudG9tSlMgMS54LCBzbyB0aGlzIG11c3QgYmUga2VwdCBmb3JcbiAqIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICovXG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBwb2x5ZmlsbEJpbmQgKGZuLCBjdHgpIHtcbiAgZnVuY3Rpb24gYm91bmRGbiAoYSkge1xuICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICByZXR1cm4gbFxuICAgICAgPyBsID4gMVxuICAgICAgICA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKVxuICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKVxuICAgICAgOiBmbi5jYWxsKGN0eClcbiAgfVxuXG4gIGJvdW5kRm4uX2xlbmd0aCA9IGZuLmxlbmd0aDtcbiAgcmV0dXJuIGJvdW5kRm5cbn1cblxuZnVuY3Rpb24gbmF0aXZlQmluZCAoZm4sIGN0eCkge1xuICByZXR1cm4gZm4uYmluZChjdHgpXG59XG5cbnZhciBiaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmRcbiAgPyBuYXRpdmVCaW5kXG4gIDogcG9seWZpbGxCaW5kO1xuXG4vKipcbiAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuICovXG5mdW5jdGlvbiB0b0FycmF5IChsaXN0LCBzdGFydCkge1xuICBzdGFydCA9IHN0YXJ0IHx8IDA7XG4gIHZhciBpID0gbGlzdC5sZW5ndGggLSBzdGFydDtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcbiAgd2hpbGUgKGktLSkge1xuICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XTtcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbi8qKlxuICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBleHRlbmQgKHRvLCBfZnJvbSkge1xuICBmb3IgKHZhciBrZXkgaW4gX2Zyb20pIHtcbiAgICB0b1trZXldID0gX2Zyb21ba2V5XTtcbiAgfVxuICByZXR1cm4gdG9cbn1cblxuLyoqXG4gKiBNZXJnZSBhbiBBcnJheSBvZiBPYmplY3RzIGludG8gYSBzaW5nbGUgT2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCAoYXJyKSB7XG4gIHZhciByZXMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYXJyW2ldKSB7XG4gICAgICBleHRlbmQocmVzLCBhcnJbaV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogUGVyZm9ybSBubyBvcGVyYXRpb24uXG4gKiBTdHViYmluZyBhcmdzIHRvIG1ha2UgRmxvdyBoYXBweSB3aXRob3V0IGxlYXZpbmcgdXNlbGVzcyB0cmFuc3BpbGVkIGNvZGVcbiAqIHdpdGggLi4ucmVzdCAoaHR0cHM6Ly9mbG93Lm9yZy9ibG9nLzIwMTcvMDUvMDcvU3RyaWN0LUZ1bmN0aW9uLUNhbGwtQXJpdHkvKVxuICovXG5mdW5jdGlvbiBub29wIChhLCBiLCBjKSB7fVxuXG4vKipcbiAqIEFsd2F5cyByZXR1cm4gZmFsc2UuXG4gKi9cbnZhciBubyA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7IHJldHVybiBmYWxzZTsgfTtcblxuLyoqXG4gKiBSZXR1cm4gc2FtZSB2YWx1ZVxuICovXG52YXIgaWRlbnRpdHkgPSBmdW5jdGlvbiAoXykgeyByZXR1cm4gXzsgfTtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHN0YXRpYyBrZXlzIHN0cmluZyBmcm9tIGNvbXBpbGVyIG1vZHVsZXMuXG4gKi9cbmZ1bmN0aW9uIGdlblN0YXRpY0tleXMgKG1vZHVsZXMpIHtcbiAgcmV0dXJuIG1vZHVsZXMucmVkdWNlKGZ1bmN0aW9uIChrZXlzLCBtKSB7XG4gICAgcmV0dXJuIGtleXMuY29uY2F0KG0uc3RhdGljS2V5cyB8fCBbXSlcbiAgfSwgW10pLmpvaW4oJywnKVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuICovXG5mdW5jdGlvbiBsb29zZUVxdWFsIChhLCBiKSB7XG4gIGlmIChhID09PSBiKSB7IHJldHVybiB0cnVlIH1cbiAgdmFyIGlzT2JqZWN0QSA9IGlzT2JqZWN0KGEpO1xuICB2YXIgaXNPYmplY3RCID0gaXNPYmplY3QoYik7XG4gIGlmIChpc09iamVjdEEgJiYgaXNPYmplY3RCKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBpc0FycmF5QSA9IEFycmF5LmlzQXJyYXkoYSk7XG4gICAgICB2YXIgaXNBcnJheUIgPSBBcnJheS5pc0FycmF5KGIpO1xuICAgICAgaWYgKGlzQXJyYXlBICYmIGlzQXJyYXlCKSB7XG4gICAgICAgIHJldHVybiBhLmxlbmd0aCA9PT0gYi5sZW5ndGggJiYgYS5ldmVyeShmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgICAgIHJldHVybiBsb29zZUVxdWFsKGUsIGJbaV0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKCFpc0FycmF5QSAmJiAhaXNBcnJheUIpIHtcbiAgICAgICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoYSk7XG4gICAgICAgIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKGIpO1xuICAgICAgICByZXR1cm4ga2V5c0EubGVuZ3RoID09PSBrZXlzQi5sZW5ndGggJiYga2V5c0EuZXZlcnkoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIHJldHVybiBsb29zZUVxdWFsKGFba2V5XSwgYltrZXldKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSBlbHNlIGlmICghaXNPYmplY3RBICYmICFpc09iamVjdEIpIHtcbiAgICByZXR1cm4gU3RyaW5nKGEpID09PSBTdHJpbmcoYilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBsb29zZUluZGV4T2YgKGFyciwgdmFsKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7IHJldHVybiBpIH1cbiAgfVxuICByZXR1cm4gLTFcbn1cblxuLyoqXG4gKiBFbnN1cmUgYSBmdW5jdGlvbiBpcyBjYWxsZWQgb25seSBvbmNlLlxuICovXG5mdW5jdGlvbiBvbmNlIChmbikge1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgU1NSX0FUVFIgPSAnZGF0YS1zZXJ2ZXItcmVuZGVyZWQnO1xuXG52YXIgQVNTRVRfVFlQRVMgPSBbXG4gICdjb21wb25lbnQnLFxuICAnZGlyZWN0aXZlJyxcbiAgJ2ZpbHRlcidcbl07XG5cbnZhciBMSUZFQ1lDTEVfSE9PS1MgPSBbXG4gICdiZWZvcmVDcmVhdGUnLFxuICAnY3JlYXRlZCcsXG4gICdiZWZvcmVNb3VudCcsXG4gICdtb3VudGVkJyxcbiAgJ2JlZm9yZVVwZGF0ZScsXG4gICd1cGRhdGVkJyxcbiAgJ2JlZm9yZURlc3Ryb3knLFxuICAnZGVzdHJveWVkJyxcbiAgJ2FjdGl2YXRlZCcsXG4gICdkZWFjdGl2YXRlZCcsXG4gICdlcnJvckNhcHR1cmVkJ1xuXTtcblxuLyogICovXG5cbnZhciBjb25maWcgPSAoe1xuICAvKipcbiAgICogT3B0aW9uIG1lcmdlIHN0cmF0ZWdpZXMgKHVzZWQgaW4gY29yZS91dGlsL29wdGlvbnMpXG4gICAqL1xuICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgKi9cbiAgc2lsZW50OiBmYWxzZSxcblxuICAvKipcbiAgICogU2hvdyBwcm9kdWN0aW9uIG1vZGUgdGlwIG1lc3NhZ2Ugb24gYm9vdD9cbiAgICovXG4gIHByb2R1Y3Rpb25UaXA6IFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGVuYWJsZSBkZXZ0b29sc1xuICAgKi9cbiAgZGV2dG9vbHM6IFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHJlY29yZCBwZXJmXG4gICAqL1xuICBwZXJmb3JtYW5jZTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEVycm9yIGhhbmRsZXIgZm9yIHdhdGNoZXIgZXJyb3JzXG4gICAqL1xuICBlcnJvckhhbmRsZXI6IG51bGwsXG5cbiAgLyoqXG4gICAqIFdhcm4gaGFuZGxlciBmb3Igd2F0Y2hlciB3YXJuc1xuICAgKi9cbiAgd2FybkhhbmRsZXI6IG51bGwsXG5cbiAgLyoqXG4gICAqIElnbm9yZSBjZXJ0YWluIGN1c3RvbSBlbGVtZW50c1xuICAgKi9cbiAgaWdub3JlZEVsZW1lbnRzOiBbXSxcblxuICAvKipcbiAgICogQ3VzdG9tIHVzZXIga2V5IGFsaWFzZXMgZm9yIHYtb25cbiAgICovXG4gIC8vICRmbG93LWRpc2FibGUtbGluZVxuICBrZXlDb2RlczogT2JqZWN0LmNyZWF0ZShudWxsKSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB0YWcgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBhcyBhXG4gICAqIGNvbXBvbmVudC4gVGhpcyBpcyBwbGF0Zm9ybS1kZXBlbmRlbnQgYW5kIG1heSBiZSBvdmVyd3JpdHRlbi5cbiAgICovXG4gIGlzUmVzZXJ2ZWRUYWc6IG5vLFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBhdHRyaWJ1dGUgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgdXNlZCBhcyBhIGNvbXBvbmVudFxuICAgKiBwcm9wLiBUaGlzIGlzIHBsYXRmb3JtLWRlcGVuZGVudCBhbmQgbWF5IGJlIG92ZXJ3cml0dGVuLlxuICAgKi9cbiAgaXNSZXNlcnZlZEF0dHI6IG5vLFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHRhZyBpcyBhbiB1bmtub3duIGVsZW1lbnQuXG4gICAqIFBsYXRmb3JtLWRlcGVuZGVudC5cbiAgICovXG4gIGlzVW5rbm93bkVsZW1lbnQ6IG5vLFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5hbWVzcGFjZSBvZiBhbiBlbGVtZW50XG4gICAqL1xuICBnZXRUYWdOYW1lc3BhY2U6IG5vb3AsXG5cbiAgLyoqXG4gICAqIFBhcnNlIHRoZSByZWFsIHRhZyBuYW1lIGZvciB0aGUgc3BlY2lmaWMgcGxhdGZvcm0uXG4gICAqL1xuICBwYXJzZVBsYXRmb3JtVGFnTmFtZTogaWRlbnRpdHksXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGF0dHJpYnV0ZSBtdXN0IGJlIGJvdW5kIHVzaW5nIHByb3BlcnR5LCBlLmcuIHZhbHVlXG4gICAqIFBsYXRmb3JtLWRlcGVuZGVudC5cbiAgICovXG4gIG11c3RVc2VQcm9wOiBubyxcblxuICAvKipcbiAgICogRXhwb3NlZCBmb3IgbGVnYWN5IHJlYXNvbnNcbiAgICovXG4gIF9saWZlY3ljbGVIb29rczogTElGRUNZQ0xFX0hPT0tTXG59KVxuXG4vKiAgKi9cblxuLyoqXG4gKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cbiAqL1xuZnVuY3Rpb24gaXNSZXNlcnZlZCAoc3RyKSB7XG4gIHZhciBjID0gKHN0ciArICcnKS5jaGFyQ29kZUF0KDApO1xuICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGXG59XG5cbi8qKlxuICogRGVmaW5lIGEgcHJvcGVydHkuXG4gKi9cbmZ1bmN0aW9uIGRlZiAob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICB2YWx1ZTogdmFsLFxuICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8qKlxuICogUGFyc2Ugc2ltcGxlIHBhdGguXG4gKi9cbnZhciBiYWlsUkUgPSAvW15cXHcuJF0vO1xuZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7XG4gIGlmIChiYWlsUkUudGVzdChwYXRoKSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIW9iaikgeyByZXR1cm4gfVxuICAgICAgb2JqID0gb2JqW3NlZ21lbnRzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIG9ialxuICB9XG59XG5cbi8qICAqL1xuXG4vLyBjYW4gd2UgdXNlIF9fcHJvdG9fXz9cbnZhciBoYXNQcm90byA9ICdfX3Byb3RvX18nIGluIHt9O1xuXG4vLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG52YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG52YXIgaW5XZWV4ID0gdHlwZW9mIFdYRW52aXJvbm1lbnQgIT09ICd1bmRlZmluZWQnICYmICEhV1hFbnZpcm9ubWVudC5wbGF0Zm9ybTtcbnZhciB3ZWV4UGxhdGZvcm0gPSBpbldlZXggJiYgV1hFbnZpcm9ubWVudC5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpO1xudmFyIFVBID0gaW5Ccm93c2VyICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG52YXIgaXNJRSA9IFVBICYmIC9tc2llfHRyaWRlbnQvLnRlc3QoVUEpO1xudmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG52YXIgaXNFZGdlID0gVUEgJiYgVUEuaW5kZXhPZignZWRnZS8nKSA+IDA7XG52YXIgaXNBbmRyb2lkID0gKFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDApIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdhbmRyb2lkJyk7XG52YXIgaXNJT1MgPSAoVUEgJiYgL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KFVBKSkgfHwgKHdlZXhQbGF0Zm9ybSA9PT0gJ2lvcycpO1xudmFyIGlzQ2hyb21lID0gVUEgJiYgL2Nocm9tZVxcL1xcZCsvLnRlc3QoVUEpICYmICFpc0VkZ2U7XG5cbi8vIEZpcmVmb3ggaGFzIGEgXCJ3YXRjaFwiIGZ1bmN0aW9uIG9uIE9iamVjdC5wcm90b3R5cGUuLi5cbnZhciBuYXRpdmVXYXRjaCA9ICh7fSkud2F0Y2g7XG5cbnZhciBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcbmlmIChpbkJyb3dzZXIpIHtcbiAgdHJ5IHtcbiAgICB2YXIgb3B0cyA9IHt9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvcHRzLCAncGFzc2l2ZScsICh7XG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIHN1cHBvcnRzUGFzc2l2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSkpOyAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvMjg1XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QtcGFzc2l2ZScsIG51bGwsIG9wdHMpO1xuICB9IGNhdGNoIChlKSB7fVxufVxuXG4vLyB0aGlzIG5lZWRzIHRvIGJlIGxhenktZXZhbGVkIGJlY2F1c2UgdnVlIG1heSBiZSByZXF1aXJlZCBiZWZvcmVcbi8vIHZ1ZS1zZXJ2ZXItcmVuZGVyZXIgY2FuIHNldCBWVUVfRU5WXG52YXIgX2lzU2VydmVyO1xudmFyIGlzU2VydmVyUmVuZGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICBpZiAoX2lzU2VydmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIWluQnJvd3NlciAmJiAhaW5XZWV4ICYmIHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBkZXRlY3QgcHJlc2VuY2Ugb2YgdnVlLXNlcnZlci1yZW5kZXJlciBhbmQgYXZvaWRcbiAgICAgIC8vIFdlYnBhY2sgc2hpbW1pbmcgdGhlIHByb2Nlc3NcbiAgICAgIF9pc1NlcnZlciA9IGdsb2JhbFsncHJvY2VzcyddLmVudi5WVUVfRU5WID09PSAnc2VydmVyJztcbiAgICB9IGVsc2Uge1xuICAgICAgX2lzU2VydmVyID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBfaXNTZXJ2ZXJcbn07XG5cbi8vIGRldGVjdCBkZXZ0b29sc1xudmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gaXNOYXRpdmUgKEN0b3IpIHtcbiAgcmV0dXJuIHR5cGVvZiBDdG9yID09PSAnZnVuY3Rpb24nICYmIC9uYXRpdmUgY29kZS8udGVzdChDdG9yLnRvU3RyaW5nKCkpXG59XG5cbnZhciBoYXNTeW1ib2wgPVxuICB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTeW1ib2wpICYmXG4gIHR5cGVvZiBSZWZsZWN0ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShSZWZsZWN0Lm93bktleXMpO1xuXG52YXIgX1NldDtcbi8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLyAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbmlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTZXQpKSB7XG4gIC8vIHVzZSBuYXRpdmUgU2V0IHdoZW4gYXZhaWxhYmxlLlxuICBfU2V0ID0gU2V0O1xufSBlbHNlIHtcbiAgLy8gYSBub24tc3RhbmRhcmQgU2V0IHBvbHlmaWxsIHRoYXQgb25seSB3b3JrcyB3aXRoIHByaW1pdGl2ZSBrZXlzLlxuICBfU2V0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTZXQgKCkge1xuICAgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH1cbiAgICBTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIGhhcyAoa2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRba2V5XSA9PT0gdHJ1ZVxuICAgIH07XG4gICAgU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQgKGtleSkge1xuICAgICAgdGhpcy5zZXRba2V5XSA9IHRydWU7XG4gICAgfTtcbiAgICBTZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIgKCkge1xuICAgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2V0O1xuICB9KCkpO1xufVxuXG4vKiAgKi9cblxudmFyIHdhcm4gPSBub29wO1xudmFyIHRpcCA9IG5vb3A7XG52YXIgZ2VuZXJhdGVDb21wb25lbnRUcmFjZSA9IChub29wKTsgLy8gd29yayBhcm91bmQgZmxvdyBjaGVja1xudmFyIGZvcm1hdENvbXBvbmVudE5hbWUgPSAobm9vcCk7XG5cbntcbiAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG4gIHZhciBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXSkoXFx3KS9nO1xuICB2YXIgY2xhc3NpZnkgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBzdHJcbiAgICAucmVwbGFjZShjbGFzc2lmeVJFLCBmdW5jdGlvbiAoYykgeyByZXR1cm4gYy50b1VwcGVyQ2FzZSgpOyB9KVxuICAgIC5yZXBsYWNlKC9bLV9dL2csICcnKTsgfTtcblxuICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcbiAgICB2YXIgdHJhY2UgPSB2bSA/IGdlbmVyYXRlQ29tcG9uZW50VHJhY2Uodm0pIDogJyc7XG5cbiAgICBpZiAoY29uZmlnLndhcm5IYW5kbGVyKSB7XG4gICAgICBjb25maWcud2FybkhhbmRsZXIuY2FsbChudWxsLCBtc2csIHZtLCB0cmFjZSk7XG4gICAgfSBlbHNlIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW1Z1ZSB3YXJuXTogXCIgKyBtc2cgKyB0cmFjZSkpO1xuICAgIH1cbiAgfTtcblxuICB0aXAgPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuICAgIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIltWdWUgdGlwXTogXCIgKyBtc2cgKyAoXG4gICAgICAgIHZtID8gZ2VuZXJhdGVDb21wb25lbnRUcmFjZSh2bSkgOiAnJ1xuICAgICAgKSk7XG4gICAgfVxuICB9O1xuXG4gIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0sIGluY2x1ZGVGaWxlKSB7XG4gICAgaWYgKHZtLiRyb290ID09PSB2bSkge1xuICAgICAgcmV0dXJuICc8Um9vdD4nXG4gICAgfVxuICAgIHZhciBvcHRpb25zID0gdHlwZW9mIHZtID09PSAnZnVuY3Rpb24nICYmIHZtLmNpZCAhPSBudWxsXG4gICAgICA/IHZtLm9wdGlvbnNcbiAgICAgIDogdm0uX2lzVnVlXG4gICAgICAgID8gdm0uJG9wdGlvbnMgfHwgdm0uY29uc3RydWN0b3Iub3B0aW9uc1xuICAgICAgICA6IHZtIHx8IHt9O1xuICAgIHZhciBuYW1lID0gb3B0aW9ucy5uYW1lIHx8IG9wdGlvbnMuX2NvbXBvbmVudFRhZztcbiAgICB2YXIgZmlsZSA9IG9wdGlvbnMuX19maWxlO1xuICAgIGlmICghbmFtZSAmJiBmaWxlKSB7XG4gICAgICB2YXIgbWF0Y2ggPSBmaWxlLm1hdGNoKC8oW14vXFxcXF0rKVxcLnZ1ZSQvKTtcbiAgICAgIG5hbWUgPSBtYXRjaCAmJiBtYXRjaFsxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgKG5hbWUgPyAoXCI8XCIgKyAoY2xhc3NpZnkobmFtZSkpICsgXCI+XCIpIDogXCI8QW5vbnltb3VzPlwiKSArXG4gICAgICAoZmlsZSAmJiBpbmNsdWRlRmlsZSAhPT0gZmFsc2UgPyAoXCIgYXQgXCIgKyBmaWxlKSA6ICcnKVxuICAgIClcbiAgfTtcblxuICB2YXIgcmVwZWF0ID0gZnVuY3Rpb24gKHN0ciwgbikge1xuICAgIHZhciByZXMgPSAnJztcbiAgICB3aGlsZSAobikge1xuICAgICAgaWYgKG4gJSAyID09PSAxKSB7IHJlcyArPSBzdHI7IH1cbiAgICAgIGlmIChuID4gMSkgeyBzdHIgKz0gc3RyOyB9XG4gICAgICBuID4+PSAxO1xuICAgIH1cbiAgICByZXR1cm4gcmVzXG4gIH07XG5cbiAgZ2VuZXJhdGVDb21wb25lbnRUcmFjZSA9IGZ1bmN0aW9uICh2bSkge1xuICAgIGlmICh2bS5faXNWdWUgJiYgdm0uJHBhcmVudCkge1xuICAgICAgdmFyIHRyZWUgPSBbXTtcbiAgICAgIHZhciBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPSAwO1xuICAgICAgd2hpbGUgKHZtKSB7XG4gICAgICAgIGlmICh0cmVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgbGFzdCA9IHRyZWVbdHJlZS5sZW5ndGggLSAxXTtcbiAgICAgICAgICBpZiAobGFzdC5jb25zdHJ1Y3RvciA9PT0gdm0uY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSsrO1xuICAgICAgICAgICAgdm0gPSB2bS4kcGFyZW50O1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA+IDApIHtcbiAgICAgICAgICAgIHRyZWVbdHJlZS5sZW5ndGggLSAxXSA9IFtsYXN0LCBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2VdO1xuICAgICAgICAgICAgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJlZS5wdXNoKHZtKTtcbiAgICAgICAgdm0gPSB2bS4kcGFyZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuICdcXG5cXG5mb3VuZCBpblxcblxcbicgKyB0cmVlXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKHZtLCBpKSB7IHJldHVybiAoXCJcIiArIChpID09PSAwID8gJy0tLT4gJyA6IHJlcGVhdCgnICcsIDUgKyBpICogMikpICsgKEFycmF5LmlzQXJyYXkodm0pXG4gICAgICAgICAgICA/ICgoZm9ybWF0Q29tcG9uZW50TmFtZSh2bVswXSkpICsgXCIuLi4gKFwiICsgKHZtWzFdKSArIFwiIHJlY3Vyc2l2ZSBjYWxscylcIilcbiAgICAgICAgICAgIDogZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpKTsgfSlcbiAgICAgICAgLmpvaW4oJ1xcbicpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXCJcXG5cXG4oZm91bmQgaW4gXCIgKyAoZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpICsgXCIpXCIpXG4gICAgfVxuICB9O1xufVxuXG4vKiAgKi9cblxuXG52YXIgdWlkID0gMDtcblxuLyoqXG4gKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcbiAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG4gKi9cbnZhciBEZXAgPSBmdW5jdGlvbiBEZXAgKCkge1xuICB0aGlzLmlkID0gdWlkKys7XG4gIHRoaXMuc3VicyA9IFtdO1xufTtcblxuRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiBhZGRTdWIgKHN1Yikge1xuICB0aGlzLnN1YnMucHVzaChzdWIpO1xufTtcblxuRGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiByZW1vdmVTdWIgKHN1Yikge1xuICByZW1vdmUodGhpcy5zdWJzLCBzdWIpO1xufTtcblxuRGVwLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiBkZXBlbmQgKCkge1xuICBpZiAoRGVwLnRhcmdldCkge1xuICAgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xuICB9XG59O1xuXG5EZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeSAoKSB7XG4gIC8vIHN0YWJpbGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG4gIHZhciBzdWJzID0gdGhpcy5zdWJzLnNsaWNlKCk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuICB9XG59O1xuXG4vLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG4vLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG4vLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cbkRlcC50YXJnZXQgPSBudWxsO1xudmFyIHRhcmdldFN0YWNrID0gW107XG5cbmZ1bmN0aW9uIHB1c2hUYXJnZXQgKF90YXJnZXQpIHtcbiAgaWYgKERlcC50YXJnZXQpIHsgdGFyZ2V0U3RhY2sucHVzaChEZXAudGFyZ2V0KTsgfVxuICBEZXAudGFyZ2V0ID0gX3RhcmdldDtcbn1cblxuZnVuY3Rpb24gcG9wVGFyZ2V0ICgpIHtcbiAgRGVwLnRhcmdldCA9IHRhcmdldFN0YWNrLnBvcCgpO1xufVxuXG4vKiAgKi9cblxudmFyIFZOb2RlID0gZnVuY3Rpb24gVk5vZGUgKFxuICB0YWcsXG4gIGRhdGEsXG4gIGNoaWxkcmVuLFxuICB0ZXh0LFxuICBlbG0sXG4gIGNvbnRleHQsXG4gIGNvbXBvbmVudE9wdGlvbnMsXG4gIGFzeW5jRmFjdG9yeVxuKSB7XG4gIHRoaXMudGFnID0gdGFnO1xuICB0aGlzLmRhdGEgPSBkYXRhO1xuICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIHRoaXMudGV4dCA9IHRleHQ7XG4gIHRoaXMuZWxtID0gZWxtO1xuICB0aGlzLm5zID0gdW5kZWZpbmVkO1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB0aGlzLmZuQ29udGV4dCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5mbk9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuZm5TY29wZUlkID0gdW5kZWZpbmVkO1xuICB0aGlzLmtleSA9IGRhdGEgJiYgZGF0YS5rZXk7XG4gIHRoaXMuY29tcG9uZW50T3B0aW9ucyA9IGNvbXBvbmVudE9wdGlvbnM7XG4gIHRoaXMuY29tcG9uZW50SW5zdGFuY2UgPSB1bmRlZmluZWQ7XG4gIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkO1xuICB0aGlzLnJhdyA9IGZhbHNlO1xuICB0aGlzLmlzU3RhdGljID0gZmFsc2U7XG4gIHRoaXMuaXNSb290SW5zZXJ0ID0gdHJ1ZTtcbiAgdGhpcy5pc0NvbW1lbnQgPSBmYWxzZTtcbiAgdGhpcy5pc0Nsb25lZCA9IGZhbHNlO1xuICB0aGlzLmlzT25jZSA9IGZhbHNlO1xuICB0aGlzLmFzeW5jRmFjdG9yeSA9IGFzeW5jRmFjdG9yeTtcbiAgdGhpcy5hc3luY01ldGEgPSB1bmRlZmluZWQ7XG4gIHRoaXMuaXNBc3luY1BsYWNlaG9sZGVyID0gZmFsc2U7XG59O1xuXG52YXIgcHJvdG90eXBlQWNjZXNzb3JzID0geyBjaGlsZDogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXG4vLyBERVBSRUNBVEVEOiBhbGlhcyBmb3IgY29tcG9uZW50SW5zdGFuY2UgZm9yIGJhY2t3YXJkcyBjb21wYXQuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xucHJvdG90eXBlQWNjZXNzb3JzLmNoaWxkLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuY29tcG9uZW50SW5zdGFuY2Vcbn07XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBWTm9kZS5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyApO1xuXG52YXIgY3JlYXRlRW1wdHlWTm9kZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gIGlmICggdGV4dCA9PT0gdm9pZCAwICkgdGV4dCA9ICcnO1xuXG4gIHZhciBub2RlID0gbmV3IFZOb2RlKCk7XG4gIG5vZGUudGV4dCA9IHRleHQ7XG4gIG5vZGUuaXNDb21tZW50ID0gdHJ1ZTtcbiAgcmV0dXJuIG5vZGVcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHRWTm9kZSAodmFsKSB7XG4gIHJldHVybiBuZXcgVk5vZGUodW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgU3RyaW5nKHZhbCkpXG59XG5cbi8vIG9wdGltaXplZCBzaGFsbG93IGNsb25lXG4vLyB1c2VkIGZvciBzdGF0aWMgbm9kZXMgYW5kIHNsb3Qgbm9kZXMgYmVjYXVzZSB0aGV5IG1heSBiZSByZXVzZWQgYWNyb3NzXG4vLyBtdWx0aXBsZSByZW5kZXJzLCBjbG9uaW5nIHRoZW0gYXZvaWRzIGVycm9ycyB3aGVuIERPTSBtYW5pcHVsYXRpb25zIHJlbHlcbi8vIG9uIHRoZWlyIGVsbSByZWZlcmVuY2UuXG5mdW5jdGlvbiBjbG9uZVZOb2RlICh2bm9kZSkge1xuICB2YXIgY2xvbmVkID0gbmV3IFZOb2RlKFxuICAgIHZub2RlLnRhZyxcbiAgICB2bm9kZS5kYXRhLFxuICAgIHZub2RlLmNoaWxkcmVuLFxuICAgIHZub2RlLnRleHQsXG4gICAgdm5vZGUuZWxtLFxuICAgIHZub2RlLmNvbnRleHQsXG4gICAgdm5vZGUuY29tcG9uZW50T3B0aW9ucyxcbiAgICB2bm9kZS5hc3luY0ZhY3RvcnlcbiAgKTtcbiAgY2xvbmVkLm5zID0gdm5vZGUubnM7XG4gIGNsb25lZC5pc1N0YXRpYyA9IHZub2RlLmlzU3RhdGljO1xuICBjbG9uZWQua2V5ID0gdm5vZGUua2V5O1xuICBjbG9uZWQuaXNDb21tZW50ID0gdm5vZGUuaXNDb21tZW50O1xuICBjbG9uZWQuZm5Db250ZXh0ID0gdm5vZGUuZm5Db250ZXh0O1xuICBjbG9uZWQuZm5PcHRpb25zID0gdm5vZGUuZm5PcHRpb25zO1xuICBjbG9uZWQuZm5TY29wZUlkID0gdm5vZGUuZm5TY29wZUlkO1xuICBjbG9uZWQuaXNDbG9uZWQgPSB0cnVlO1xuICByZXR1cm4gY2xvbmVkXG59XG5cbi8qXG4gKiBub3QgdHlwZSBjaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBmbG93IGRvZXNuJ3QgcGxheSB3ZWxsIHdpdGhcbiAqIGR5bmFtaWNhbGx5IGFjY2Vzc2luZyBtZXRob2RzIG9uIEFycmF5IHByb3RvdHlwZVxuICovXG5cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xudmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90byk7XG5cbnZhciBtZXRob2RzVG9QYXRjaCA9IFtcbiAgJ3B1c2gnLFxuICAncG9wJyxcbiAgJ3NoaWZ0JyxcbiAgJ3Vuc2hpZnQnLFxuICAnc3BsaWNlJyxcbiAgJ3NvcnQnLFxuICAncmV2ZXJzZSdcbl07XG5cbi8qKlxuICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG4gKi9cbm1ldGhvZHNUb1BhdGNoLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2RcbiAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdO1xuICBkZWYoYXJyYXlNZXRob2RzLCBtZXRob2QsIGZ1bmN0aW9uIG11dGF0b3IgKCkge1xuICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTtcblxuICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcbiAgICB2YXIgaW5zZXJ0ZWQ7XG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ3B1c2gnOlxuICAgICAgY2FzZSAndW5zaGlmdCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3NwbGljZSc6XG4gICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgaWYgKGluc2VydGVkKSB7IG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7IH1cbiAgICAvLyBub3RpZnkgY2hhbmdlXG4gICAgb2IuZGVwLm5vdGlmeSgpO1xuICAgIHJldHVybiByZXN1bHRcbiAgfSk7XG59KTtcblxuLyogICovXG5cbnZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xuXG4vKipcbiAqIEluIHNvbWUgY2FzZXMgd2UgbWF5IHdhbnQgdG8gZGlzYWJsZSBvYnNlcnZhdGlvbiBpbnNpZGUgYSBjb21wb25lbnQnc1xuICogdXBkYXRlIGNvbXB1dGF0aW9uLlxuICovXG52YXIgc2hvdWxkT2JzZXJ2ZSA9IHRydWU7XG5cbmZ1bmN0aW9uIHRvZ2dsZU9ic2VydmluZyAodmFsdWUpIHtcbiAgc2hvdWxkT2JzZXJ2ZSA9IHZhbHVlO1xufVxuXG4vKipcbiAqIE9ic2VydmVyIGNsYXNzIHRoYXQgaXMgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGhlIHRhcmdldFxuICogb2JqZWN0J3MgcHJvcGVydHkga2V5cyBpbnRvIGdldHRlci9zZXR0ZXJzIHRoYXRcbiAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaCB1cGRhdGVzLlxuICovXG52YXIgT2JzZXJ2ZXIgPSBmdW5jdGlvbiBPYnNlcnZlciAodmFsdWUpIHtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcbiAgdGhpcy52bUNvdW50ID0gMDtcbiAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHZhciBhdWdtZW50ID0gaGFzUHJvdG9cbiAgICAgID8gcHJvdG9BdWdtZW50XG4gICAgICA6IGNvcHlBdWdtZW50O1xuICAgIGF1Z21lbnQodmFsdWUsIGFycmF5TWV0aG9kcywgYXJyYXlLZXlzKTtcbiAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy53YWxrKHZhbHVlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cbiAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG4gKi9cbk9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gd2FsayAob2JqKSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgZGVmaW5lUmVhY3RpdmUob2JqLCBrZXlzW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cbiAqL1xuT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIG9ic2VydmVBcnJheSAoaXRlbXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcbiAgfVxufTtcblxuLy8gaGVscGVyc1xuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcbiAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG4gKi9cbmZ1bmN0aW9uIHByb3RvQXVnbWVudCAodGFyZ2V0LCBzcmMsIGtleXMpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cbiAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyYztcbiAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xufVxuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuICogaGlkZGVuIHByb3BlcnRpZXMuXG4gKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBjb3B5QXVnbWVudCAodGFyZ2V0LCBzcmMsIGtleXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIGRlZih0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuICB9XG59XG5cbi8qKlxuICogQXR0ZW1wdCB0byBjcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgZm9yIGEgdmFsdWUsXG4gKiByZXR1cm5zIHRoZSBuZXcgb2JzZXJ2ZXIgaWYgc3VjY2Vzc2Z1bGx5IG9ic2VydmVkLFxuICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXG4gKi9cbmZ1bmN0aW9uIG9ic2VydmUgKHZhbHVlLCBhc1Jvb3REYXRhKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlIGluc3RhbmNlb2YgVk5vZGUpIHtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgb2I7XG4gIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuICAgIG9iID0gdmFsdWUuX19vYl9fO1xuICB9IGVsc2UgaWYgKFxuICAgIHNob3VsZE9ic2VydmUgJiZcbiAgICAhaXNTZXJ2ZXJSZW5kZXJpbmcoKSAmJlxuICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiZcbiAgICBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJlxuICAgICF2YWx1ZS5faXNWdWVcbiAgKSB7XG4gICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuICB9XG4gIGlmIChhc1Jvb3REYXRhICYmIG9iKSB7XG4gICAgb2Iudm1Db3VudCsrO1xuICB9XG4gIHJldHVybiBvYlxufVxuXG4vKipcbiAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cbiAqL1xuZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUgKFxuICBvYmosXG4gIGtleSxcbiAgdmFsLFxuICBjdXN0b21TZXR0ZXIsXG4gIHNoYWxsb3dcbikge1xuICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXG4gIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG4gIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XG4gIGlmICghZ2V0dGVyICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICB2YWwgPSBvYmpba2V5XTtcbiAgfVxuICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXG4gIHZhciBjaGlsZE9iID0gIXNoYWxsb3cgJiYgb2JzZXJ2ZSh2YWwpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyICgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG4gICAgICBpZiAoRGVwLnRhcmdldCkge1xuICAgICAgICBkZXAuZGVwZW5kKCk7XG4gICAgICAgIGlmIChjaGlsZE9iKSB7XG4gICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKCk7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICBkZXBlbmRBcnJheSh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIgKG5ld1ZhbCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlbGYtY29tcGFyZSAqL1xuICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUgfHwgKG5ld1ZhbCAhPT0gbmV3VmFsICYmIHZhbHVlICE9PSB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlbGYtY29tcGFyZSAqL1xuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGN1c3RvbVNldHRlcikge1xuICAgICAgICBjdXN0b21TZXR0ZXIoKTtcbiAgICAgIH1cbiAgICAgIGlmIChzZXR0ZXIpIHtcbiAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gbmV3VmFsO1xuICAgICAgfVxuICAgICAgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUobmV3VmFsKTtcbiAgICAgIGRlcC5ub3RpZnkoKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFNldCBhIHByb3BlcnR5IG9uIGFuIG9iamVjdC4gQWRkcyB0aGUgbmV3IHByb3BlcnR5IGFuZFxuICogdHJpZ2dlcnMgY2hhbmdlIG5vdGlmaWNhdGlvbiBpZiB0aGUgcHJvcGVydHkgZG9lc24ndFxuICogYWxyZWFkeSBleGlzdC5cbiAqL1xuZnVuY3Rpb24gc2V0ICh0YXJnZXQsIGtleSwgdmFsKSB7XG4gIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICFBcnJheS5pc0FycmF5KHRhcmdldCkgJiZcbiAgICAhaXNPYmplY3QodGFyZ2V0KVxuICApIHtcbiAgICB3YXJuKChcIkNhbm5vdCBzZXQgcmVhY3RpdmUgcHJvcGVydHkgb24gbm9uLW9iamVjdC9hcnJheSB2YWx1ZTogXCIgKyB0YXJnZXQpKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHtcbiAgICB0YXJnZXQubGVuZ3RoID0gTWF0aC5tYXgodGFyZ2V0Lmxlbmd0aCwga2V5KTtcbiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSwgdmFsKTtcbiAgICByZXR1cm4gdmFsXG4gIH1cbiAgaWYgKGtleSBpbiB0YXJnZXQgJiYgIShrZXkgaW4gT2JqZWN0LnByb3RvdHlwZSkpIHtcbiAgICB0YXJnZXRba2V5XSA9IHZhbDtcbiAgICByZXR1cm4gdmFsXG4gIH1cbiAgdmFyIG9iID0gKHRhcmdldCkuX19vYl9fO1xuICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCAob2IgJiYgb2Iudm1Db3VudCkpIHtcbiAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgJ0F2b2lkIGFkZGluZyByZWFjdGl2ZSBwcm9wZXJ0aWVzIHRvIGEgVnVlIGluc3RhbmNlIG9yIGl0cyByb290ICRkYXRhICcgK1xuICAgICAgJ2F0IHJ1bnRpbWUgLSBkZWNsYXJlIGl0IHVwZnJvbnQgaW4gdGhlIGRhdGEgb3B0aW9uLidcbiAgICApO1xuICAgIHJldHVybiB2YWxcbiAgfVxuICBpZiAoIW9iKSB7XG4gICAgdGFyZ2V0W2tleV0gPSB2YWw7XG4gICAgcmV0dXJuIHZhbFxuICB9XG4gIGRlZmluZVJlYWN0aXZlKG9iLnZhbHVlLCBrZXksIHZhbCk7XG4gIG9iLmRlcC5ub3RpZnkoKTtcbiAgcmV0dXJuIHZhbFxufVxuXG4vKipcbiAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG4gKi9cbmZ1bmN0aW9uIGRlbCAodGFyZ2V0LCBrZXkpIHtcbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgIUFycmF5LmlzQXJyYXkodGFyZ2V0KSAmJlxuICAgICFpc09iamVjdCh0YXJnZXQpXG4gICkge1xuICAgIHdhcm4oKFwiQ2Fubm90IGRlbGV0ZSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBub24tb2JqZWN0L2FycmF5IHZhbHVlOiBcIiArIHRhcmdldCkpO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkgJiYgaXNWYWxpZEFycmF5SW5kZXgoa2V5KSkge1xuICAgIHRhcmdldC5zcGxpY2Uoa2V5LCAxKTtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgb2IgPSAodGFyZ2V0KS5fX29iX187XG4gIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkge1xuICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAnQXZvaWQgZGVsZXRpbmcgcHJvcGVydGllcyBvbiBhIFZ1ZSBpbnN0YW5jZSBvciBpdHMgcm9vdCAkZGF0YSAnICtcbiAgICAgICctIGp1c3Qgc2V0IGl0IHRvIG51bGwuJ1xuICAgICk7XG4gICAgcmV0dXJuXG4gIH1cbiAgaWYgKCFoYXNPd24odGFyZ2V0LCBrZXkpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgZGVsZXRlIHRhcmdldFtrZXldO1xuICBpZiAoIW9iKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgb2IuZGVwLm5vdGlmeSgpO1xufVxuXG4vKipcbiAqIENvbGxlY3QgZGVwZW5kZW5jaWVzIG9uIGFycmF5IGVsZW1lbnRzIHdoZW4gdGhlIGFycmF5IGlzIHRvdWNoZWQsIHNpbmNlXG4gKiB3ZSBjYW5ub3QgaW50ZXJjZXB0IGFycmF5IGVsZW1lbnQgYWNjZXNzIGxpa2UgcHJvcGVydHkgZ2V0dGVycy5cbiAqL1xuZnVuY3Rpb24gZGVwZW5kQXJyYXkgKHZhbHVlKSB7XG4gIGZvciAodmFyIGUgPSAodm9pZCAwKSwgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBlID0gdmFsdWVbaV07XG4gICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHtcbiAgICAgIGRlcGVuZEFycmF5KGUpO1xuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG4gKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG4gKi9cbnZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzO1xuXG4vKipcbiAqIE9wdGlvbnMgd2l0aCByZXN0cmljdGlvbnNcbiAqL1xue1xuICBzdHJhdHMuZWwgPSBzdHJhdHMucHJvcHNEYXRhID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQsIHZtLCBrZXkpIHtcbiAgICBpZiAoIXZtKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBcIm9wdGlvbiBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgY2FuIG9ubHkgYmUgdXNlZCBkdXJpbmcgaW5zdGFuY2UgXCIgK1xuICAgICAgICAnY3JlYXRpb24gd2l0aCB0aGUgYG5ld2Aga2V5d29yZC4nXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gZGVmYXVsdFN0cmF0KHBhcmVudCwgY2hpbGQpXG4gIH07XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG4gKi9cbmZ1bmN0aW9uIG1lcmdlRGF0YSAodG8sIGZyb20pIHtcbiAgaWYgKCFmcm9tKSB7IHJldHVybiB0byB9XG4gIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBrZXlzW2ldO1xuICAgIHRvVmFsID0gdG9ba2V5XTtcbiAgICBmcm9tVmFsID0gZnJvbVtrZXldO1xuICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG4gICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHRvVmFsKSAmJiBpc1BsYWluT2JqZWN0KGZyb21WYWwpKSB7XG4gICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG9cbn1cblxuLyoqXG4gKiBEYXRhXG4gKi9cbmZ1bmN0aW9uIG1lcmdlRGF0YU9yRm4gKFxuICBwYXJlbnRWYWwsXG4gIGNoaWxkVmFsLFxuICB2bVxuKSB7XG4gIGlmICghdm0pIHtcbiAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuICAgIGlmICghY2hpbGRWYWwpIHtcbiAgICAgIHJldHVybiBwYXJlbnRWYWxcbiAgICB9XG4gICAgaWYgKCFwYXJlbnRWYWwpIHtcbiAgICAgIHJldHVybiBjaGlsZFZhbFxuICAgIH1cbiAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG4gICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG4gICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG4gICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbiAoKSB7XG4gICAgICByZXR1cm4gbWVyZ2VEYXRhKFxuICAgICAgICB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHRoaXMsIHRoaXMpIDogY2hpbGRWYWwsXG4gICAgICAgIHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbicgPyBwYXJlbnRWYWwuY2FsbCh0aGlzLCB0aGlzKSA6IHBhcmVudFZhbFxuICAgICAgKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4gKCkge1xuICAgICAgLy8gaW5zdGFuY2UgbWVyZ2VcbiAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBjaGlsZFZhbC5jYWxsKHZtLCB2bSlcbiAgICAgICAgOiBjaGlsZFZhbDtcbiAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBwYXJlbnRWYWwuY2FsbCh2bSwgdm0pXG4gICAgICAgIDogcGFyZW50VmFsO1xuICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVmYXVsdERhdGFcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuc3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAoXG4gIHBhcmVudFZhbCxcbiAgY2hpbGRWYWwsXG4gIHZtXG4pIHtcbiAgaWYgKCF2bSkge1xuICAgIGlmIChjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgICdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgK1xuICAgICAgICAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICtcbiAgICAgICAgJ2RlZmluaXRpb25zLicsXG4gICAgICAgIHZtXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gcGFyZW50VmFsXG4gICAgfVxuICAgIHJldHVybiBtZXJnZURhdGFPckZuKHBhcmVudFZhbCwgY2hpbGRWYWwpXG4gIH1cblxuICByZXR1cm4gbWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSlcbn07XG5cbi8qKlxuICogSG9va3MgYW5kIHByb3BzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICovXG5mdW5jdGlvbiBtZXJnZUhvb2sgKFxuICBwYXJlbnRWYWwsXG4gIGNoaWxkVmFsXG4pIHtcbiAgcmV0dXJuIGNoaWxkVmFsXG4gICAgPyBwYXJlbnRWYWxcbiAgICAgID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbClcbiAgICAgIDogQXJyYXkuaXNBcnJheShjaGlsZFZhbClcbiAgICAgICAgPyBjaGlsZFZhbFxuICAgICAgICA6IFtjaGlsZFZhbF1cbiAgICA6IHBhcmVudFZhbFxufVxuXG5MSUZFQ1lDTEVfSE9PS1MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuICBzdHJhdHNbaG9va10gPSBtZXJnZUhvb2s7XG59KTtcblxuLyoqXG4gKiBBc3NldHNcbiAqXG4gKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG4gKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG4gKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VBc3NldHMgKFxuICBwYXJlbnRWYWwsXG4gIGNoaWxkVmFsLFxuICB2bSxcbiAga2V5XG4pIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuICBpZiAoY2hpbGRWYWwpIHtcbiAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTtcbiAgICByZXR1cm4gZXh0ZW5kKHJlcywgY2hpbGRWYWwpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlc1xuICB9XG59XG5cbkFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7XG59KTtcblxuLyoqXG4gKiBXYXRjaGVycy5cbiAqXG4gKiBXYXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG4gKiBhbm90aGVyLCBzbyB3ZSBtZXJnZSB0aGVtIGFzIGFycmF5cy5cbiAqL1xuc3RyYXRzLndhdGNoID0gZnVuY3Rpb24gKFxuICBwYXJlbnRWYWwsXG4gIGNoaWxkVmFsLFxuICB2bSxcbiAga2V5XG4pIHtcbiAgLy8gd29yayBhcm91bmQgRmlyZWZveCdzIE9iamVjdC5wcm90b3R5cGUud2F0Y2guLi5cbiAgaWYgKHBhcmVudFZhbCA9PT0gbmF0aXZlV2F0Y2gpIHsgcGFyZW50VmFsID0gdW5kZWZpbmVkOyB9XG4gIGlmIChjaGlsZFZhbCA9PT0gbmF0aXZlV2F0Y2gpIHsgY2hpbGRWYWwgPSB1bmRlZmluZWQ7IH1cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghY2hpbGRWYWwpIHsgcmV0dXJuIE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpIH1cbiAge1xuICAgIGFzc2VydE9iamVjdFR5cGUoa2V5LCBjaGlsZFZhbCwgdm0pO1xuICB9XG4gIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9XG4gIHZhciByZXQgPSB7fTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZm9yICh2YXIga2V5JDEgaW4gY2hpbGRWYWwpIHtcbiAgICB2YXIgcGFyZW50ID0gcmV0W2tleSQxXTtcbiAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXkkMV07XG4gICAgaWYgKHBhcmVudCAmJiAhQXJyYXkuaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgcmV0W2tleSQxXSA9IHBhcmVudFxuICAgICAgPyBwYXJlbnQuY29uY2F0KGNoaWxkKVxuICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkKSA/IGNoaWxkIDogW2NoaWxkXTtcbiAgfVxuICByZXR1cm4gcmV0XG59O1xuXG4vKipcbiAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG4gKi9cbnN0cmF0cy5wcm9wcyA9XG5zdHJhdHMubWV0aG9kcyA9XG5zdHJhdHMuaW5qZWN0ID1cbnN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChcbiAgcGFyZW50VmFsLFxuICBjaGlsZFZhbCxcbiAgdm0sXG4gIGtleVxuKSB7XG4gIGlmIChjaGlsZFZhbCAmJiBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydE9iamVjdFR5cGUoa2V5LCBjaGlsZFZhbCwgdm0pO1xuICB9XG4gIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9XG4gIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBpZiAoY2hpbGRWYWwpIHsgZXh0ZW5kKHJldCwgY2hpbGRWYWwpOyB9XG4gIHJldHVybiByZXRcbn07XG5zdHJhdHMucHJvdmlkZSA9IG1lcmdlRGF0YU9yRm47XG5cbi8qKlxuICogRGVmYXVsdCBzdHJhdGVneS5cbiAqL1xudmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkXG4gICAgPyBwYXJlbnRWYWxcbiAgICA6IGNoaWxkVmFsXG59O1xuXG4vKipcbiAqIFZhbGlkYXRlIGNvbXBvbmVudCBuYW1lc1xuICovXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudHMgKG9wdGlvbnMpIHtcbiAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMuY29tcG9uZW50cykge1xuICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShrZXkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQ29tcG9uZW50TmFtZSAobmFtZSkge1xuICBpZiAoIS9eW2EtekEtWl1bXFx3LV0qJC8udGVzdChuYW1lKSkge1xuICAgIHdhcm4oXG4gICAgICAnSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgK1xuICAgICAgJ2NhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgYW5kIHRoZSBoeXBoZW4sICcgK1xuICAgICAgJ2FuZCBtdXN0IHN0YXJ0IHdpdGggYSBsZXR0ZXIuJ1xuICAgICk7XG4gIH1cbiAgaWYgKGlzQnVpbHRJblRhZyhuYW1lKSB8fCBjb25maWcuaXNSZXNlcnZlZFRhZyhuYW1lKSkge1xuICAgIHdhcm4oXG4gICAgICAnRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICtcbiAgICAgICdpZDogJyArIG5hbWVcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXG4gKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVQcm9wcyAob3B0aW9ucywgdm0pIHtcbiAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcbiAgaWYgKCFwcm9wcykgeyByZXR1cm4gfVxuICB2YXIgcmVzID0ge307XG4gIHZhciBpLCB2YWwsIG5hbWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHByb3BzKSkge1xuICAgIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNbaV07XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbmFtZSA9IGNhbWVsaXplKHZhbCk7XG4gICAgICAgIHJlc1tuYW1lXSA9IHsgdHlwZTogbnVsbCB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybigncHJvcHMgbXVzdCBiZSBzdHJpbmdzIHdoZW4gdXNpbmcgYXJyYXkgc3ludGF4LicpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuICAgICAgdmFsID0gcHJvcHNba2V5XTtcbiAgICAgIG5hbWUgPSBjYW1lbGl6ZShrZXkpO1xuICAgICAgcmVzW25hbWVdID0gaXNQbGFpbk9iamVjdCh2YWwpXG4gICAgICAgID8gdmFsXG4gICAgICAgIDogeyB0eXBlOiB2YWwgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2FybihcbiAgICAgIFwiSW52YWxpZCB2YWx1ZSBmb3Igb3B0aW9uIFxcXCJwcm9wc1xcXCI6IGV4cGVjdGVkIGFuIEFycmF5IG9yIGFuIE9iamVjdCwgXCIgK1xuICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZShwcm9wcykpICsgXCIuXCIsXG4gICAgICB2bVxuICAgICk7XG4gIH1cbiAgb3B0aW9ucy5wcm9wcyA9IHJlcztcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgYWxsIGluamVjdGlvbnMgaW50byBPYmplY3QtYmFzZWQgZm9ybWF0XG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZUluamVjdCAob3B0aW9ucywgdm0pIHtcbiAgdmFyIGluamVjdCA9IG9wdGlvbnMuaW5qZWN0O1xuICBpZiAoIWluamVjdCkgeyByZXR1cm4gfVxuICB2YXIgbm9ybWFsaXplZCA9IG9wdGlvbnMuaW5qZWN0ID0ge307XG4gIGlmIChBcnJheS5pc0FycmF5KGluamVjdCkpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluamVjdC5sZW5ndGg7IGkrKykge1xuICAgICAgbm9ybWFsaXplZFtpbmplY3RbaV1dID0geyBmcm9tOiBpbmplY3RbaV0gfTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChpbmplY3QpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIGluamVjdCkge1xuICAgICAgdmFyIHZhbCA9IGluamVjdFtrZXldO1xuICAgICAgbm9ybWFsaXplZFtrZXldID0gaXNQbGFpbk9iamVjdCh2YWwpXG4gICAgICAgID8gZXh0ZW5kKHsgZnJvbToga2V5IH0sIHZhbClcbiAgICAgICAgOiB7IGZyb206IHZhbCB9O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB3YXJuKFxuICAgICAgXCJJbnZhbGlkIHZhbHVlIGZvciBvcHRpb24gXFxcImluamVjdFxcXCI6IGV4cGVjdGVkIGFuIEFycmF5IG9yIGFuIE9iamVjdCwgXCIgK1xuICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZShpbmplY3QpKSArIFwiLlwiLFxuICAgICAgdm1cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogTm9ybWFsaXplIHJhdyBmdW5jdGlvbiBkaXJlY3RpdmVzIGludG8gb2JqZWN0IGZvcm1hdC5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplRGlyZWN0aXZlcyAob3B0aW9ucykge1xuICB2YXIgZGlycyA9IG9wdGlvbnMuZGlyZWN0aXZlcztcbiAgaWYgKGRpcnMpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGlycykge1xuICAgICAgdmFyIGRlZiA9IGRpcnNba2V5XTtcbiAgICAgIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGRpcnNba2V5XSA9IHsgYmluZDogZGVmLCB1cGRhdGU6IGRlZiB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRPYmplY3RUeXBlIChuYW1lLCB2YWx1ZSwgdm0pIHtcbiAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgIHdhcm4oXG4gICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcXFwiXCIgKyBuYW1lICsgXCJcXFwiOiBleHBlY3RlZCBhbiBPYmplY3QsIFwiICtcbiAgICAgIFwiYnV0IGdvdCBcIiArICh0b1Jhd1R5cGUodmFsdWUpKSArIFwiLlwiLFxuICAgICAgdm1cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxuICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VPcHRpb25zIChcbiAgcGFyZW50LFxuICBjaGlsZCxcbiAgdm1cbikge1xuICB7XG4gICAgY2hlY2tDb21wb25lbnRzKGNoaWxkKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgY2hpbGQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjaGlsZCA9IGNoaWxkLm9wdGlvbnM7XG4gIH1cblxuICBub3JtYWxpemVQcm9wcyhjaGlsZCwgdm0pO1xuICBub3JtYWxpemVJbmplY3QoY2hpbGQsIHZtKTtcbiAgbm9ybWFsaXplRGlyZWN0aXZlcyhjaGlsZCk7XG4gIHZhciBleHRlbmRzRnJvbSA9IGNoaWxkLmV4dGVuZHM7XG4gIGlmIChleHRlbmRzRnJvbSkge1xuICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGV4dGVuZHNGcm9tLCB2bSk7XG4gIH1cbiAgaWYgKGNoaWxkLm1peGlucykge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQubWl4aW5zW2ldLCB2bSk7XG4gICAgfVxuICB9XG4gIHZhciBvcHRpb25zID0ge307XG4gIHZhciBrZXk7XG4gIGZvciAoa2V5IGluIHBhcmVudCkge1xuICAgIG1lcmdlRmllbGQoa2V5KTtcbiAgfVxuICBmb3IgKGtleSBpbiBjaGlsZCkge1xuICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBtZXJnZUZpZWxkIChrZXkpIHtcbiAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG4gICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuICB9XG4gIHJldHVybiBvcHRpb25zXG59XG5cbi8qKlxuICogUmVzb2x2ZSBhbiBhc3NldC5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuICovXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQgKFxuICBvcHRpb25zLFxuICB0eXBlLFxuICBpZCxcbiAgd2Fybk1pc3Npbmdcbikge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcbiAgLy8gY2hlY2sgbG9jYWwgcmVnaXN0cmF0aW9uIHZhcmlhdGlvbnMgZmlyc3RcbiAgaWYgKGhhc093bihhc3NldHMsIGlkKSkgeyByZXR1cm4gYXNzZXRzW2lkXSB9XG4gIHZhciBjYW1lbGl6ZWRJZCA9IGNhbWVsaXplKGlkKTtcbiAgaWYgKGhhc093bihhc3NldHMsIGNhbWVsaXplZElkKSkgeyByZXR1cm4gYXNzZXRzW2NhbWVsaXplZElkXSB9XG4gIHZhciBQYXNjYWxDYXNlSWQgPSBjYXBpdGFsaXplKGNhbWVsaXplZElkKTtcbiAgaWYgKGhhc093bihhc3NldHMsIFBhc2NhbENhc2VJZCkpIHsgcmV0dXJuIGFzc2V0c1tQYXNjYWxDYXNlSWRdIH1cbiAgLy8gZmFsbGJhY2sgdG8gcHJvdG90eXBlIGNoYWluXG4gIHZhciByZXMgPSBhc3NldHNbaWRdIHx8IGFzc2V0c1tjYW1lbGl6ZWRJZF0gfHwgYXNzZXRzW1Bhc2NhbENhc2VJZF07XG4gIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG4gICAgd2FybihcbiAgICAgICdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiB2YWxpZGF0ZVByb3AgKFxuICBrZXksXG4gIHByb3BPcHRpb25zLFxuICBwcm9wc0RhdGEsXG4gIHZtXG4pIHtcbiAgdmFyIHByb3AgPSBwcm9wT3B0aW9uc1trZXldO1xuICB2YXIgYWJzZW50ID0gIWhhc093bihwcm9wc0RhdGEsIGtleSk7XG4gIHZhciB2YWx1ZSA9IHByb3BzRGF0YVtrZXldO1xuICAvLyBib29sZWFuIGNhc3RpbmdcbiAgdmFyIGJvb2xlYW5JbmRleCA9IGdldFR5cGVJbmRleChCb29sZWFuLCBwcm9wLnR5cGUpO1xuICBpZiAoYm9vbGVhbkluZGV4ID4gLTEpIHtcbiAgICBpZiAoYWJzZW50ICYmICFoYXNPd24ocHJvcCwgJ2RlZmF1bHQnKSkge1xuICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gaHlwaGVuYXRlKGtleSkpIHtcbiAgICAgIC8vIG9ubHkgY2FzdCBlbXB0eSBzdHJpbmcgLyBzYW1lIG5hbWUgdG8gYm9vbGVhbiBpZlxuICAgICAgLy8gYm9vbGVhbiBoYXMgaGlnaGVyIHByaW9yaXR5XG4gICAgICB2YXIgc3RyaW5nSW5kZXggPSBnZXRUeXBlSW5kZXgoU3RyaW5nLCBwcm9wLnR5cGUpO1xuICAgICAgaWYgKHN0cmluZ0luZGV4IDwgMCB8fCBib29sZWFuSW5kZXggPCBzdHJpbmdJbmRleCkge1xuICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIGNoZWNrIGRlZmF1bHQgdmFsdWVcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3AsIGtleSk7XG4gICAgLy8gc2luY2UgdGhlIGRlZmF1bHQgdmFsdWUgaXMgYSBmcmVzaCBjb3B5LFxuICAgIC8vIG1ha2Ugc3VyZSB0byBvYnNlcnZlIGl0LlxuICAgIHZhciBwcmV2U2hvdWxkT2JzZXJ2ZSA9IHNob3VsZE9ic2VydmU7XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpO1xuICAgIG9ic2VydmUodmFsdWUpO1xuICAgIHRvZ2dsZU9ic2VydmluZyhwcmV2U2hvdWxkT2JzZXJ2ZSk7XG4gIH1cbiAge1xuICAgIGFzc2VydFByb3AocHJvcCwga2V5LCB2YWx1ZSwgdm0sIGFic2VudCk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlXG59XG5cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cbiAqL1xuZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSAodm0sIHByb3AsIGtleSkge1xuICAvLyBubyBkZWZhdWx0LCByZXR1cm4gdW5kZWZpbmVkXG4gIGlmICghaGFzT3duKHByb3AsICdkZWZhdWx0JykpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cbiAgdmFyIGRlZiA9IHByb3AuZGVmYXVsdDtcbiAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgaXNPYmplY3QoZGVmKSkge1xuICAgIHdhcm4oXG4gICAgICAnSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wIFwiJyArIGtleSArICdcIjogJyArXG4gICAgICAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArXG4gICAgICAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsXG4gICAgICB2bVxuICAgICk7XG4gIH1cbiAgLy8gdGhlIHJhdyBwcm9wIHZhbHVlIHdhcyBhbHNvIHVuZGVmaW5lZCBmcm9tIHByZXZpb3VzIHJlbmRlcixcbiAgLy8gcmV0dXJuIHByZXZpb3VzIGRlZmF1bHQgdmFsdWUgdG8gYXZvaWQgdW5uZWNlc3Nhcnkgd2F0Y2hlciB0cmlnZ2VyXG4gIGlmICh2bSAmJiB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgJiZcbiAgICB2bS4kb3B0aW9ucy5wcm9wc0RhdGFba2V5XSA9PT0gdW5kZWZpbmVkICYmXG4gICAgdm0uX3Byb3BzW2tleV0gIT09IHVuZGVmaW5lZFxuICApIHtcbiAgICByZXR1cm4gdm0uX3Byb3BzW2tleV1cbiAgfVxuICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuICAvLyBhIHZhbHVlIGlzIEZ1bmN0aW9uIGlmIGl0cyBwcm90b3R5cGUgaXMgZnVuY3Rpb24gZXZlbiBhY3Jvc3MgZGlmZmVyZW50IGV4ZWN1dGlvbiBjb250ZXh0XG4gIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIGdldFR5cGUocHJvcC50eXBlKSAhPT0gJ0Z1bmN0aW9uJ1xuICAgID8gZGVmLmNhbGwodm0pXG4gICAgOiBkZWZcbn1cblxuLyoqXG4gKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFByb3AgKFxuICBwcm9wLFxuICBuYW1lLFxuICB2YWx1ZSxcbiAgdm0sXG4gIGFic2VudFxuKSB7XG4gIGlmIChwcm9wLnJlcXVpcmVkICYmIGFic2VudCkge1xuICAgIHdhcm4oXG4gICAgICAnTWlzc2luZyByZXF1aXJlZCBwcm9wOiBcIicgKyBuYW1lICsgJ1wiJyxcbiAgICAgIHZtXG4gICAgKTtcbiAgICByZXR1cm5cbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcHJvcC5yZXF1aXJlZCkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciB0eXBlID0gcHJvcC50eXBlO1xuICB2YXIgdmFsaWQgPSAhdHlwZSB8fCB0eXBlID09PSB0cnVlO1xuICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICBpZiAodHlwZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgdHlwZSA9IFt0eXBlXTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUgfHwgJycpO1xuICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG4gICAgfVxuICB9XG4gIGlmICghdmFsaWQpIHtcbiAgICB3YXJuKFxuICAgICAgXCJJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIuXCIgK1xuICAgICAgXCIgRXhwZWN0ZWQgXCIgKyAoZXhwZWN0ZWRUeXBlcy5tYXAoY2FwaXRhbGl6ZSkuam9pbignLCAnKSkgK1xuICAgICAgXCIsIGdvdCBcIiArICh0b1Jhd1R5cGUodmFsdWUpKSArIFwiLlwiLFxuICAgICAgdm1cbiAgICApO1xuICAgIHJldHVyblxuICB9XG4gIHZhciB2YWxpZGF0b3IgPSBwcm9wLnZhbGlkYXRvcjtcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgd2FybihcbiAgICAgICAgJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgbmFtZSArICdcIi4nLFxuICAgICAgICB2bVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHNpbXBsZUNoZWNrUkUgPSAvXihTdHJpbmd8TnVtYmVyfEJvb2xlYW58RnVuY3Rpb258U3ltYm9sKSQvO1xuXG5mdW5jdGlvbiBhc3NlcnRUeXBlICh2YWx1ZSwgdHlwZSkge1xuICB2YXIgdmFsaWQ7XG4gIHZhciBleHBlY3RlZFR5cGUgPSBnZXRUeXBlKHR5cGUpO1xuICBpZiAoc2ltcGxlQ2hlY2tSRS50ZXN0KGV4cGVjdGVkVHlwZSkpIHtcbiAgICB2YXIgdCA9IHR5cGVvZiB2YWx1ZTtcbiAgICB2YWxpZCA9IHQgPT09IGV4cGVjdGVkVHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIGZvciBwcmltaXRpdmUgd3JhcHBlciBvYmplY3RzXG4gICAgaWYgKCF2YWxpZCAmJiB0ID09PSAnb2JqZWN0Jykge1xuICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ09iamVjdCcpIHtcbiAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ0FycmF5Jykge1xuICAgIHZhbGlkID0gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdmFsaWQsXG4gICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcbiAgfVxufVxuXG4vKipcbiAqIFVzZSBmdW5jdGlvbiBzdHJpbmcgbmFtZSB0byBjaGVjayBidWlsdC1pbiB0eXBlcyxcbiAqIGJlY2F1c2UgYSBzaW1wbGUgZXF1YWxpdHkgY2hlY2sgd2lsbCBmYWlsIHdoZW4gcnVubmluZ1xuICogYWNyb3NzIGRpZmZlcmVudCB2bXMgLyBpZnJhbWVzLlxuICovXG5mdW5jdGlvbiBnZXRUeXBlIChmbikge1xuICB2YXIgbWF0Y2ggPSBmbiAmJiBmbi50b1N0cmluZygpLm1hdGNoKC9eXFxzKmZ1bmN0aW9uIChcXHcrKS8pO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnXG59XG5cbmZ1bmN0aW9uIGlzU2FtZVR5cGUgKGEsIGIpIHtcbiAgcmV0dXJuIGdldFR5cGUoYSkgPT09IGdldFR5cGUoYilcbn1cblxuZnVuY3Rpb24gZ2V0VHlwZUluZGV4ICh0eXBlLCBleHBlY3RlZFR5cGVzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShleHBlY3RlZFR5cGVzKSkge1xuICAgIHJldHVybiBpc1NhbWVUeXBlKGV4cGVjdGVkVHlwZXMsIHR5cGUpID8gMCA6IC0xXG4gIH1cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGV4cGVjdGVkVHlwZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzW2ldLCB0eXBlKSkge1xuICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBoYW5kbGVFcnJvciAoZXJyLCB2bSwgaW5mbykge1xuICBpZiAodm0pIHtcbiAgICB2YXIgY3VyID0gdm07XG4gICAgd2hpbGUgKChjdXIgPSBjdXIuJHBhcmVudCkpIHtcbiAgICAgIHZhciBob29rcyA9IGN1ci4kb3B0aW9ucy5lcnJvckNhcHR1cmVkO1xuICAgICAgaWYgKGhvb2tzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGNhcHR1cmUgPSBob29rc1tpXS5jYWxsKGN1ciwgZXJyLCB2bSwgaW5mbykgPT09IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGNhcHR1cmUpIHsgcmV0dXJuIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBnbG9iYWxIYW5kbGVFcnJvcihlLCBjdXIsICdlcnJvckNhcHR1cmVkIGhvb2snKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZ2xvYmFsSGFuZGxlRXJyb3IoZXJyLCB2bSwgaW5mbyk7XG59XG5cbmZ1bmN0aW9uIGdsb2JhbEhhbmRsZUVycm9yIChlcnIsIHZtLCBpbmZvKSB7XG4gIGlmIChjb25maWcuZXJyb3JIYW5kbGVyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBjb25maWcuZXJyb3JIYW5kbGVyLmNhbGwobnVsbCwgZXJyLCB2bSwgaW5mbylcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dFcnJvcihlLCBudWxsLCAnY29uZmlnLmVycm9ySGFuZGxlcicpO1xuICAgIH1cbiAgfVxuICBsb2dFcnJvcihlcnIsIHZtLCBpbmZvKTtcbn1cblxuZnVuY3Rpb24gbG9nRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcbiAge1xuICAgIHdhcm4oKFwiRXJyb3IgaW4gXCIgKyBpbmZvICsgXCI6IFxcXCJcIiArIChlcnIudG9TdHJpbmcoKSkgKyBcIlxcXCJcIiksIHZtKTtcbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoKGluQnJvd3NlciB8fCBpbldlZXgpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBlcnJcbiAgfVxufVxuXG4vKiAgKi9cbi8qIGdsb2JhbHMgTWVzc2FnZUNoYW5uZWwgKi9cblxudmFyIGNhbGxiYWNrcyA9IFtdO1xudmFyIHBlbmRpbmcgPSBmYWxzZTtcblxuZnVuY3Rpb24gZmx1c2hDYWxsYmFja3MgKCkge1xuICBwZW5kaW5nID0gZmFsc2U7XG4gIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG4gIGNhbGxiYWNrcy5sZW5ndGggPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xuICAgIGNvcGllc1tpXSgpO1xuICB9XG59XG5cbi8vIEhlcmUgd2UgaGF2ZSBhc3luYyBkZWZlcnJpbmcgd3JhcHBlcnMgdXNpbmcgYm90aCBtaWNyb3Rhc2tzIGFuZCAobWFjcm8pIHRhc2tzLlxuLy8gSW4gPCAyLjQgd2UgdXNlZCBtaWNyb3Rhc2tzIGV2ZXJ5d2hlcmUsIGJ1dCB0aGVyZSBhcmUgc29tZSBzY2VuYXJpb3Mgd2hlcmVcbi8vIG1pY3JvdGFza3MgaGF2ZSB0b28gaGlnaCBhIHByaW9yaXR5IGFuZCBmaXJlIGluIGJldHdlZW4gc3VwcG9zZWRseVxuLy8gc2VxdWVudGlhbCBldmVudHMgKGUuZy4gIzQ1MjEsICM2NjkwKSBvciBldmVuIGJldHdlZW4gYnViYmxpbmcgb2YgdGhlIHNhbWVcbi8vIGV2ZW50ICgjNjU2NikuIEhvd2V2ZXIsIHVzaW5nIChtYWNybykgdGFza3MgZXZlcnl3aGVyZSBhbHNvIGhhcyBzdWJ0bGUgcHJvYmxlbXNcbi8vIHdoZW4gc3RhdGUgaXMgY2hhbmdlZCByaWdodCBiZWZvcmUgcmVwYWludCAoZS5nLiAjNjgxMywgb3V0LWluIHRyYW5zaXRpb25zKS5cbi8vIEhlcmUgd2UgdXNlIG1pY3JvdGFzayBieSBkZWZhdWx0LCBidXQgZXhwb3NlIGEgd2F5IHRvIGZvcmNlIChtYWNybykgdGFzayB3aGVuXG4vLyBuZWVkZWQgKGUuZy4gaW4gZXZlbnQgaGFuZGxlcnMgYXR0YWNoZWQgYnkgdi1vbikuXG52YXIgbWljcm9UaW1lckZ1bmM7XG52YXIgbWFjcm9UaW1lckZ1bmM7XG52YXIgdXNlTWFjcm9UYXNrID0gZmFsc2U7XG5cbi8vIERldGVybWluZSAobWFjcm8pIHRhc2sgZGVmZXIgaW1wbGVtZW50YXRpb24uXG4vLyBUZWNobmljYWxseSBzZXRJbW1lZGlhdGUgc2hvdWxkIGJlIHRoZSBpZGVhbCBjaG9pY2UsIGJ1dCBpdCdzIG9ubHkgYXZhaWxhYmxlXG4vLyBpbiBJRS4gVGhlIG9ubHkgcG9seWZpbGwgdGhhdCBjb25zaXN0ZW50bHkgcXVldWVzIHRoZSBjYWxsYmFjayBhZnRlciBhbGwgRE9NXG4vLyBldmVudHMgdHJpZ2dlcmVkIGluIHRoZSBzYW1lIGxvb3AgaXMgYnkgdXNpbmcgTWVzc2FnZUNoYW5uZWwuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbmlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShzZXRJbW1lZGlhdGUpKSB7XG4gIG1hY3JvVGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgIHNldEltbWVkaWF0ZShmbHVzaENhbGxiYWNrcyk7XG4gIH07XG59IGVsc2UgaWYgKHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCcgJiYgKFxuICBpc05hdGl2ZShNZXNzYWdlQ2hhbm5lbCkgfHxcbiAgLy8gUGhhbnRvbUpTXG4gIE1lc3NhZ2VDaGFubmVsLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE1lc3NhZ2VDaGFubmVsQ29uc3RydWN0b3JdJ1xuKSkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICB2YXIgcG9ydCA9IGNoYW5uZWwucG9ydDI7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2hDYWxsYmFja3M7XG4gIG1hY3JvVGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgIHBvcnQucG9zdE1lc3NhZ2UoMSk7XG4gIH07XG59IGVsc2Uge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBtYWNyb1RpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICBzZXRUaW1lb3V0KGZsdXNoQ2FsbGJhY2tzLCAwKTtcbiAgfTtcbn1cblxuLy8gRGV0ZXJtaW5lIG1pY3JvdGFzayBkZWZlciBpbXBsZW1lbnRhdGlvbi5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0LCAkZmxvdy1kaXNhYmxlLWxpbmUgKi9cbmlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUHJvbWlzZSkpIHtcbiAgdmFyIHAgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgbWljcm9UaW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcC50aGVuKGZsdXNoQ2FsbGJhY2tzKTtcbiAgICAvLyBpbiBwcm9ibGVtYXRpYyBVSVdlYlZpZXdzLCBQcm9taXNlLnRoZW4gZG9lc24ndCBjb21wbGV0ZWx5IGJyZWFrLCBidXRcbiAgICAvLyBpdCBjYW4gZ2V0IHN0dWNrIGluIGEgd2VpcmQgc3RhdGUgd2hlcmUgY2FsbGJhY2tzIGFyZSBwdXNoZWQgaW50byB0aGVcbiAgICAvLyBtaWNyb3Rhc2sgcXVldWUgYnV0IHRoZSBxdWV1ZSBpc24ndCBiZWluZyBmbHVzaGVkLCB1bnRpbCB0aGUgYnJvd3NlclxuICAgIC8vIG5lZWRzIHRvIGRvIHNvbWUgb3RoZXIgd29yaywgZS5nLiBoYW5kbGUgYSB0aW1lci4gVGhlcmVmb3JlIHdlIGNhblxuICAgIC8vIFwiZm9yY2VcIiB0aGUgbWljcm90YXNrIHF1ZXVlIHRvIGJlIGZsdXNoZWQgYnkgYWRkaW5nIGFuIGVtcHR5IHRpbWVyLlxuICAgIGlmIChpc0lPUykgeyBzZXRUaW1lb3V0KG5vb3ApOyB9XG4gIH07XG59IGVsc2Uge1xuICAvLyBmYWxsYmFjayB0byBtYWNyb1xuICBtaWNyb1RpbWVyRnVuYyA9IG1hY3JvVGltZXJGdW5jO1xufVxuXG4vKipcbiAqIFdyYXAgYSBmdW5jdGlvbiBzbyB0aGF0IGlmIGFueSBjb2RlIGluc2lkZSB0cmlnZ2VycyBzdGF0ZSBjaGFuZ2UsXG4gKiB0aGUgY2hhbmdlcyBhcmUgcXVldWVkIHVzaW5nIGEgKG1hY3JvKSB0YXNrIGluc3RlYWQgb2YgYSBtaWNyb3Rhc2suXG4gKi9cbmZ1bmN0aW9uIHdpdGhNYWNyb1Rhc2sgKGZuKSB7XG4gIHJldHVybiBmbi5fd2l0aFRhc2sgfHwgKGZuLl93aXRoVGFzayA9IGZ1bmN0aW9uICgpIHtcbiAgICB1c2VNYWNyb1Rhc2sgPSB0cnVlO1xuICAgIHZhciByZXMgPSBmbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIHVzZU1hY3JvVGFzayA9IGZhbHNlO1xuICAgIHJldHVybiByZXNcbiAgfSlcbn1cblxuZnVuY3Rpb24gbmV4dFRpY2sgKGNiLCBjdHgpIHtcbiAgdmFyIF9yZXNvbHZlO1xuICBjYWxsYmFja3MucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNiKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjYi5jYWxsKGN0eCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGUsIGN0eCwgJ25leHRUaWNrJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChfcmVzb2x2ZSkge1xuICAgICAgX3Jlc29sdmUoY3R4KTtcbiAgICB9XG4gIH0pO1xuICBpZiAoIXBlbmRpbmcpIHtcbiAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICBpZiAodXNlTWFjcm9UYXNrKSB7XG4gICAgICBtYWNyb1RpbWVyRnVuYygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtaWNyb1RpbWVyRnVuYygpO1xuICAgIH1cbiAgfVxuICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgaWYgKCFjYiAmJiB0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIF9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICB9KVxuICB9XG59XG5cbi8qICAqL1xuXG52YXIgbWFyaztcbnZhciBtZWFzdXJlO1xuXG57XG4gIHZhciBwZXJmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChcbiAgICBwZXJmICYmXG4gICAgcGVyZi5tYXJrICYmXG4gICAgcGVyZi5tZWFzdXJlICYmXG4gICAgcGVyZi5jbGVhck1hcmtzICYmXG4gICAgcGVyZi5jbGVhck1lYXN1cmVzXG4gICkge1xuICAgIG1hcmsgPSBmdW5jdGlvbiAodGFnKSB7IHJldHVybiBwZXJmLm1hcmsodGFnKTsgfTtcbiAgICBtZWFzdXJlID0gZnVuY3Rpb24gKG5hbWUsIHN0YXJ0VGFnLCBlbmRUYWcpIHtcbiAgICAgIHBlcmYubWVhc3VyZShuYW1lLCBzdGFydFRhZywgZW5kVGFnKTtcbiAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7XG4gICAgICBwZXJmLmNsZWFyTWFya3MoZW5kVGFnKTtcbiAgICAgIHBlcmYuY2xlYXJNZWFzdXJlcyhuYW1lKTtcbiAgICB9O1xuICB9XG59XG5cbi8qIG5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBwbGF5IHdlbGwgd2l0aCBQcm94eSAqL1xuXG52YXIgaW5pdFByb3h5O1xuXG57XG4gIHZhciBhbGxvd2VkR2xvYmFscyA9IG1ha2VNYXAoXG4gICAgJ0luZmluaXR5LHVuZGVmaW5lZCxOYU4saXNGaW5pdGUsaXNOYU4sJyArXG4gICAgJ3BhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksZW5jb2RlVVJJQ29tcG9uZW50LCcgK1xuICAgICdNYXRoLE51bWJlcixEYXRlLEFycmF5LE9iamVjdCxCb29sZWFuLFN0cmluZyxSZWdFeHAsTWFwLFNldCxKU09OLEludGwsJyArXG4gICAgJ3JlcXVpcmUnIC8vIGZvciBXZWJwYWNrL0Jyb3dzZXJpZnlcbiAgKTtcblxuICB2YXIgd2Fybk5vblByZXNlbnQgPSBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHtcbiAgICB3YXJuKFxuICAgICAgXCJQcm9wZXJ0eSBvciBtZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIG5vdCBkZWZpbmVkIG9uIHRoZSBpbnN0YW5jZSBidXQgXCIgK1xuICAgICAgJ3JlZmVyZW5jZWQgZHVyaW5nIHJlbmRlci4gTWFrZSBzdXJlIHRoYXQgdGhpcyBwcm9wZXJ0eSBpcyByZWFjdGl2ZSwgJyArXG4gICAgICAnZWl0aGVyIGluIHRoZSBkYXRhIG9wdGlvbiwgb3IgZm9yIGNsYXNzLWJhc2VkIGNvbXBvbmVudHMsIGJ5ICcgK1xuICAgICAgJ2luaXRpYWxpemluZyB0aGUgcHJvcGVydHkuICcgK1xuICAgICAgJ1NlZTogaHR0cHM6Ly92dWVqcy5vcmcvdjIvZ3VpZGUvcmVhY3Rpdml0eS5odG1sI0RlY2xhcmluZy1SZWFjdGl2ZS1Qcm9wZXJ0aWVzLicsXG4gICAgICB0YXJnZXRcbiAgICApO1xuICB9O1xuXG4gIHZhciBoYXNQcm94eSA9XG4gICAgdHlwZW9mIFByb3h5ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShQcm94eSk7XG5cbiAgaWYgKGhhc1Byb3h5KSB7XG4gICAgdmFyIGlzQnVpbHRJbk1vZGlmaWVyID0gbWFrZU1hcCgnc3RvcCxwcmV2ZW50LHNlbGYsY3RybCxzaGlmdCxhbHQsbWV0YSxleGFjdCcpO1xuICAgIGNvbmZpZy5rZXlDb2RlcyA9IG5ldyBQcm94eShjb25maWcua2V5Q29kZXMsIHtcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0ICh0YXJnZXQsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGlzQnVpbHRJbk1vZGlmaWVyKGtleSkpIHtcbiAgICAgICAgICB3YXJuKChcIkF2b2lkIG92ZXJ3cml0aW5nIGJ1aWx0LWluIG1vZGlmaWVyIGluIGNvbmZpZy5rZXlDb2RlczogLlwiICsga2V5KSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB2YXIgaGFzSGFuZGxlciA9IHtcbiAgICBoYXM6IGZ1bmN0aW9uIGhhcyAodGFyZ2V0LCBrZXkpIHtcbiAgICAgIHZhciBoYXMgPSBrZXkgaW4gdGFyZ2V0O1xuICAgICAgdmFyIGlzQWxsb3dlZCA9IGFsbG93ZWRHbG9iYWxzKGtleSkgfHwga2V5LmNoYXJBdCgwKSA9PT0gJ18nO1xuICAgICAgaWYgKCFoYXMgJiYgIWlzQWxsb3dlZCkge1xuICAgICAgICB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzIHx8ICFpc0FsbG93ZWRcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdldEhhbmRsZXIgPSB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQgKHRhcmdldCwga2V5KSB7XG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYgIShrZXkgaW4gdGFyZ2V0KSkge1xuICAgICAgICB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGFyZ2V0W2tleV1cbiAgICB9XG4gIH07XG5cbiAgaW5pdFByb3h5ID0gZnVuY3Rpb24gaW5pdFByb3h5ICh2bSkge1xuICAgIGlmIChoYXNQcm94eSkge1xuICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3h5IGhhbmRsZXIgdG8gdXNlXG4gICAgICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zO1xuICAgICAgdmFyIGhhbmRsZXJzID0gb3B0aW9ucy5yZW5kZXIgJiYgb3B0aW9ucy5yZW5kZXIuX3dpdGhTdHJpcHBlZFxuICAgICAgICA/IGdldEhhbmRsZXJcbiAgICAgICAgOiBoYXNIYW5kbGVyO1xuICAgICAgdm0uX3JlbmRlclByb3h5ID0gbmV3IFByb3h5KHZtLCBoYW5kbGVycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZtLl9yZW5kZXJQcm94eSA9IHZtO1xuICAgIH1cbiAgfTtcbn1cblxuLyogICovXG5cbnZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5cbi8qKlxuICogUmVjdXJzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcbiAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG4gKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZSAodmFsKSB7XG4gIF90cmF2ZXJzZSh2YWwsIHNlZW5PYmplY3RzKTtcbiAgc2Vlbk9iamVjdHMuY2xlYXIoKTtcbn1cblxuZnVuY3Rpb24gX3RyYXZlcnNlICh2YWwsIHNlZW4pIHtcbiAgdmFyIGksIGtleXM7XG4gIHZhciBpc0EgPSBBcnJheS5pc0FycmF5KHZhbCk7XG4gIGlmICgoIWlzQSAmJiAhaXNPYmplY3QodmFsKSkgfHwgT2JqZWN0LmlzRnJvemVuKHZhbCkgfHwgdmFsIGluc3RhbmNlb2YgVk5vZGUpIHtcbiAgICByZXR1cm5cbiAgfVxuICBpZiAodmFsLl9fb2JfXykge1xuICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBzZWVuLmFkZChkZXBJZCk7XG4gIH1cbiAgaWYgKGlzQSkge1xuICAgIGkgPSB2YWwubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHsgX3RyYXZlcnNlKHZhbFtpXSwgc2Vlbik7IH1cbiAgfSBlbHNlIHtcbiAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkgeyBfdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTsgfVxuICB9XG59XG5cbi8qICAqL1xuXG52YXIgbm9ybWFsaXplRXZlbnQgPSBjYWNoZWQoZnVuY3Rpb24gKG5hbWUpIHtcbiAgdmFyIHBhc3NpdmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyYnO1xuICBuYW1lID0gcGFzc2l2ZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lO1xuICB2YXIgb25jZSQkMSA9IG5hbWUuY2hhckF0KDApID09PSAnfic7IC8vIFByZWZpeGVkIGxhc3QsIGNoZWNrZWQgZmlyc3RcbiAgbmFtZSA9IG9uY2UkJDEgPyBuYW1lLnNsaWNlKDEpIDogbmFtZTtcbiAgdmFyIGNhcHR1cmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyEnO1xuICBuYW1lID0gY2FwdHVyZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lO1xuICByZXR1cm4ge1xuICAgIG5hbWU6IG5hbWUsXG4gICAgb25jZTogb25jZSQkMSxcbiAgICBjYXB0dXJlOiBjYXB0dXJlLFxuICAgIHBhc3NpdmU6IHBhc3NpdmVcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUZuSW52b2tlciAoZm5zKSB7XG4gIGZ1bmN0aW9uIGludm9rZXIgKCkge1xuICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50cztcblxuICAgIHZhciBmbnMgPSBpbnZva2VyLmZucztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbnMpKSB7XG4gICAgICB2YXIgY2xvbmVkID0gZm5zLnNsaWNlKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsb25lZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjbG9uZWRbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzJDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZXR1cm4gaGFuZGxlciByZXR1cm4gdmFsdWUgZm9yIHNpbmdsZSBoYW5kbGVyc1xuICAgICAgcmV0dXJuIGZucy5hcHBseShudWxsLCBhcmd1bWVudHMpXG4gICAgfVxuICB9XG4gIGludm9rZXIuZm5zID0gZm5zO1xuICByZXR1cm4gaW52b2tlclxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaXN0ZW5lcnMgKFxuICBvbixcbiAgb2xkT24sXG4gIGFkZCxcbiAgcmVtb3ZlJCQxLFxuICB2bVxuKSB7XG4gIHZhciBuYW1lLCBkZWYsIGN1ciwgb2xkLCBldmVudDtcbiAgZm9yIChuYW1lIGluIG9uKSB7XG4gICAgZGVmID0gY3VyID0gb25bbmFtZV07XG4gICAgb2xkID0gb2xkT25bbmFtZV07XG4gICAgZXZlbnQgPSBub3JtYWxpemVFdmVudChuYW1lKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNVbmRlZihjdXIpKSB7XG4gICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgICBcIkludmFsaWQgaGFuZGxlciBmb3IgZXZlbnQgXFxcIlwiICsgKGV2ZW50Lm5hbWUpICsgXCJcXFwiOiBnb3QgXCIgKyBTdHJpbmcoY3VyKSxcbiAgICAgICAgdm1cbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChpc1VuZGVmKG9sZCkpIHtcbiAgICAgIGlmIChpc1VuZGVmKGN1ci5mbnMpKSB7XG4gICAgICAgIGN1ciA9IG9uW25hbWVdID0gY3JlYXRlRm5JbnZva2VyKGN1cik7XG4gICAgICB9XG4gICAgICBhZGQoZXZlbnQubmFtZSwgY3VyLCBldmVudC5vbmNlLCBldmVudC5jYXB0dXJlLCBldmVudC5wYXNzaXZlLCBldmVudC5wYXJhbXMpO1xuICAgIH0gZWxzZSBpZiAoY3VyICE9PSBvbGQpIHtcbiAgICAgIG9sZC5mbnMgPSBjdXI7XG4gICAgICBvbltuYW1lXSA9IG9sZDtcbiAgICB9XG4gIH1cbiAgZm9yIChuYW1lIGluIG9sZE9uKSB7XG4gICAgaWYgKGlzVW5kZWYob25bbmFtZV0pKSB7XG4gICAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KG5hbWUpO1xuICAgICAgcmVtb3ZlJCQxKGV2ZW50Lm5hbWUsIG9sZE9uW25hbWVdLCBldmVudC5jYXB0dXJlKTtcbiAgICB9XG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIG1lcmdlVk5vZGVIb29rIChkZWYsIGhvb2tLZXksIGhvb2spIHtcbiAgaWYgKGRlZiBpbnN0YW5jZW9mIFZOb2RlKSB7XG4gICAgZGVmID0gZGVmLmRhdGEuaG9vayB8fCAoZGVmLmRhdGEuaG9vayA9IHt9KTtcbiAgfVxuICB2YXIgaW52b2tlcjtcbiAgdmFyIG9sZEhvb2sgPSBkZWZbaG9va0tleV07XG5cbiAgZnVuY3Rpb24gd3JhcHBlZEhvb2sgKCkge1xuICAgIGhvb2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAvLyBpbXBvcnRhbnQ6IHJlbW92ZSBtZXJnZWQgaG9vayB0byBlbnN1cmUgaXQncyBjYWxsZWQgb25seSBvbmNlXG4gICAgLy8gYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtcbiAgICByZW1vdmUoaW52b2tlci5mbnMsIHdyYXBwZWRIb29rKTtcbiAgfVxuXG4gIGlmIChpc1VuZGVmKG9sZEhvb2spKSB7XG4gICAgLy8gbm8gZXhpc3RpbmcgaG9va1xuICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW3dyYXBwZWRIb29rXSk7XG4gIH0gZWxzZSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGlzRGVmKG9sZEhvb2suZm5zKSAmJiBpc1RydWUob2xkSG9vay5tZXJnZWQpKSB7XG4gICAgICAvLyBhbHJlYWR5IGEgbWVyZ2VkIGludm9rZXJcbiAgICAgIGludm9rZXIgPSBvbGRIb29rO1xuICAgICAgaW52b2tlci5mbnMucHVzaCh3cmFwcGVkSG9vayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGV4aXN0aW5nIHBsYWluIGhvb2tcbiAgICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW29sZEhvb2ssIHdyYXBwZWRIb29rXSk7XG4gICAgfVxuICB9XG5cbiAgaW52b2tlci5tZXJnZWQgPSB0cnVlO1xuICBkZWZbaG9va0tleV0gPSBpbnZva2VyO1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gZXh0cmFjdFByb3BzRnJvbVZOb2RlRGF0YSAoXG4gIGRhdGEsXG4gIEN0b3IsXG4gIHRhZ1xuKSB7XG4gIC8vIHdlIGFyZSBvbmx5IGV4dHJhY3RpbmcgcmF3IHZhbHVlcyBoZXJlLlxuICAvLyB2YWxpZGF0aW9uIGFuZCBkZWZhdWx0IHZhbHVlcyBhcmUgaGFuZGxlZCBpbiB0aGUgY2hpbGRcbiAgLy8gY29tcG9uZW50IGl0c2VsZi5cbiAgdmFyIHByb3BPcHRpb25zID0gQ3Rvci5vcHRpb25zLnByb3BzO1xuICBpZiAoaXNVbmRlZihwcm9wT3B0aW9ucykpIHtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgcmVzID0ge307XG4gIHZhciBhdHRycyA9IGRhdGEuYXR0cnM7XG4gIHZhciBwcm9wcyA9IGRhdGEucHJvcHM7XG4gIGlmIChpc0RlZihhdHRycykgfHwgaXNEZWYocHJvcHMpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BPcHRpb25zKSB7XG4gICAgICB2YXIgYWx0S2V5ID0gaHlwaGVuYXRlKGtleSk7XG4gICAgICB7XG4gICAgICAgIHZhciBrZXlJbkxvd2VyQ2FzZSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAga2V5ICE9PSBrZXlJbkxvd2VyQ2FzZSAmJlxuICAgICAgICAgIGF0dHJzICYmIGhhc093bihhdHRycywga2V5SW5Mb3dlckNhc2UpXG4gICAgICAgICkge1xuICAgICAgICAgIHRpcChcbiAgICAgICAgICAgIFwiUHJvcCBcXFwiXCIgKyBrZXlJbkxvd2VyQ2FzZSArIFwiXFxcIiBpcyBwYXNzZWQgdG8gY29tcG9uZW50IFwiICtcbiAgICAgICAgICAgIChmb3JtYXRDb21wb25lbnROYW1lKHRhZyB8fCBDdG9yKSkgKyBcIiwgYnV0IHRoZSBkZWNsYXJlZCBwcm9wIG5hbWUgaXNcIiArXG4gICAgICAgICAgICBcIiBcXFwiXCIgKyBrZXkgKyBcIlxcXCIuIFwiICtcbiAgICAgICAgICAgIFwiTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgY2FtZWxDYXNlZCBcIiArXG4gICAgICAgICAgICBcInByb3BzIG5lZWQgdG8gdXNlIHRoZWlyIGtlYmFiLWNhc2UgZXF1aXZhbGVudHMgd2hlbiB1c2luZyBpbi1ET00gXCIgK1xuICAgICAgICAgICAgXCJ0ZW1wbGF0ZXMuIFlvdSBzaG91bGQgcHJvYmFibHkgdXNlIFxcXCJcIiArIGFsdEtleSArIFwiXFxcIiBpbnN0ZWFkIG9mIFxcXCJcIiArIGtleSArIFwiXFxcIi5cIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNoZWNrUHJvcChyZXMsIHByb3BzLCBrZXksIGFsdEtleSwgdHJ1ZSkgfHxcbiAgICAgIGNoZWNrUHJvcChyZXMsIGF0dHJzLCBrZXksIGFsdEtleSwgZmFsc2UpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGNoZWNrUHJvcCAoXG4gIHJlcyxcbiAgaGFzaCxcbiAga2V5LFxuICBhbHRLZXksXG4gIHByZXNlcnZlXG4pIHtcbiAgaWYgKGlzRGVmKGhhc2gpKSB7XG4gICAgaWYgKGhhc093bihoYXNoLCBrZXkpKSB7XG4gICAgICByZXNba2V5XSA9IGhhc2hba2V5XTtcbiAgICAgIGlmICghcHJlc2VydmUpIHtcbiAgICAgICAgZGVsZXRlIGhhc2hba2V5XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIGlmIChoYXNPd24oaGFzaCwgYWx0S2V5KSkge1xuICAgICAgcmVzW2tleV0gPSBoYXNoW2FsdEtleV07XG4gICAgICBpZiAoIXByZXNlcnZlKSB7XG4gICAgICAgIGRlbGV0ZSBoYXNoW2FsdEtleV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuLyogICovXG5cbi8vIFRoZSB0ZW1wbGF0ZSBjb21waWxlciBhdHRlbXB0cyB0byBtaW5pbWl6ZSB0aGUgbmVlZCBmb3Igbm9ybWFsaXphdGlvbiBieVxuLy8gc3RhdGljYWxseSBhbmFseXppbmcgdGhlIHRlbXBsYXRlIGF0IGNvbXBpbGUgdGltZS5cbi8vXG4vLyBGb3IgcGxhaW4gSFRNTCBtYXJrdXAsIG5vcm1hbGl6YXRpb24gY2FuIGJlIGNvbXBsZXRlbHkgc2tpcHBlZCBiZWNhdXNlIHRoZVxuLy8gZ2VuZXJhdGVkIHJlbmRlciBmdW5jdGlvbiBpcyBndWFyYW50ZWVkIHRvIHJldHVybiBBcnJheTxWTm9kZT4uIFRoZXJlIGFyZVxuLy8gdHdvIGNhc2VzIHdoZXJlIGV4dHJhIG5vcm1hbGl6YXRpb24gaXMgbmVlZGVkOlxuXG4vLyAxLiBXaGVuIHRoZSBjaGlsZHJlbiBjb250YWlucyBjb21wb25lbnRzIC0gYmVjYXVzZSBhIGZ1bmN0aW9uYWwgY29tcG9uZW50XG4vLyBtYXkgcmV0dXJuIGFuIEFycmF5IGluc3RlYWQgb2YgYSBzaW5nbGUgcm9vdC4gSW4gdGhpcyBjYXNlLCBqdXN0IGEgc2ltcGxlXG4vLyBub3JtYWxpemF0aW9uIGlzIG5lZWRlZCAtIGlmIGFueSBjaGlsZCBpcyBhbiBBcnJheSwgd2UgZmxhdHRlbiB0aGUgd2hvbGVcbi8vIHRoaW5nIHdpdGggQXJyYXkucHJvdG90eXBlLmNvbmNhdC4gSXQgaXMgZ3VhcmFudGVlZCB0byBiZSBvbmx5IDEtbGV2ZWwgZGVlcFxuLy8gYmVjYXVzZSBmdW5jdGlvbmFsIGNvbXBvbmVudHMgYWxyZWFkeSBub3JtYWxpemUgdGhlaXIgb3duIGNoaWxkcmVuLlxuZnVuY3Rpb24gc2ltcGxlTm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbltpXSkpIHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBjaGlsZHJlbilcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNoaWxkcmVuXG59XG5cbi8vIDIuIFdoZW4gdGhlIGNoaWxkcmVuIGNvbnRhaW5zIGNvbnN0cnVjdHMgdGhhdCBhbHdheXMgZ2VuZXJhdGVkIG5lc3RlZCBBcnJheXMsXG4vLyBlLmcuIDx0ZW1wbGF0ZT4sIDxzbG90Piwgdi1mb3IsIG9yIHdoZW4gdGhlIGNoaWxkcmVuIGlzIHByb3ZpZGVkIGJ5IHVzZXJcbi8vIHdpdGggaGFuZC13cml0dGVuIHJlbmRlciBmdW5jdGlvbnMgLyBKU1guIEluIHN1Y2ggY2FzZXMgYSBmdWxsIG5vcm1hbGl6YXRpb25cbi8vIGlzIG5lZWRlZCB0byBjYXRlciB0byBhbGwgcG9zc2libGUgdHlwZXMgb2YgY2hpbGRyZW4gdmFsdWVzLlxuZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7XG4gIHJldHVybiBpc1ByaW1pdGl2ZShjaGlsZHJlbilcbiAgICA/IFtjcmVhdGVUZXh0Vk5vZGUoY2hpbGRyZW4pXVxuICAgIDogQXJyYXkuaXNBcnJheShjaGlsZHJlbilcbiAgICAgID8gbm9ybWFsaXplQXJyYXlDaGlsZHJlbihjaGlsZHJlbilcbiAgICAgIDogdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGlzVGV4dE5vZGUgKG5vZGUpIHtcbiAgcmV0dXJuIGlzRGVmKG5vZGUpICYmIGlzRGVmKG5vZGUudGV4dCkgJiYgaXNGYWxzZShub2RlLmlzQ29tbWVudClcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXlDaGlsZHJlbiAoY2hpbGRyZW4sIG5lc3RlZEluZGV4KSB7XG4gIHZhciByZXMgPSBbXTtcbiAgdmFyIGksIGMsIGxhc3RJbmRleCwgbGFzdDtcbiAgZm9yIChpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgYyA9IGNoaWxkcmVuW2ldO1xuICAgIGlmIChpc1VuZGVmKGMpIHx8IHR5cGVvZiBjID09PSAnYm9vbGVhbicpIHsgY29udGludWUgfVxuICAgIGxhc3RJbmRleCA9IHJlcy5sZW5ndGggLSAxO1xuICAgIGxhc3QgPSByZXNbbGFzdEluZGV4XTtcbiAgICAvLyAgbmVzdGVkXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYykpIHtcbiAgICAgIGlmIChjLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYyA9IG5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4oYywgKChuZXN0ZWRJbmRleCB8fCAnJykgKyBcIl9cIiArIGkpKTtcbiAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2Rlc1xuICAgICAgICBpZiAoaXNUZXh0Tm9kZShjWzBdKSAmJiBpc1RleHROb2RlKGxhc3QpKSB7XG4gICAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgKGNbMF0pLnRleHQpO1xuICAgICAgICAgIGMuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXMucHVzaC5hcHBseShyZXMsIGMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNQcmltaXRpdmUoYykpIHtcbiAgICAgIGlmIChpc1RleHROb2RlKGxhc3QpKSB7XG4gICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXNcbiAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnkgZm9yIFNTUiBoeWRyYXRpb24gYmVjYXVzZSB0ZXh0IG5vZGVzIGFyZVxuICAgICAgICAvLyBlc3NlbnRpYWxseSBtZXJnZWQgd2hlbiByZW5kZXJlZCB0byBIVE1MIHN0cmluZ3NcbiAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYyk7XG4gICAgICB9IGVsc2UgaWYgKGMgIT09ICcnKSB7XG4gICAgICAgIC8vIGNvbnZlcnQgcHJpbWl0aXZlIHRvIHZub2RlXG4gICAgICAgIHJlcy5wdXNoKGNyZWF0ZVRleHRWTm9kZShjKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc1RleHROb2RlKGMpICYmIGlzVGV4dE5vZGUobGFzdCkpIHtcbiAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2Rlc1xuICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyBjLnRleHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGVmYXVsdCBrZXkgZm9yIG5lc3RlZCBhcnJheSBjaGlsZHJlbiAobGlrZWx5IGdlbmVyYXRlZCBieSB2LWZvcilcbiAgICAgICAgaWYgKGlzVHJ1ZShjaGlsZHJlbi5faXNWTGlzdCkgJiZcbiAgICAgICAgICBpc0RlZihjLnRhZykgJiZcbiAgICAgICAgICBpc1VuZGVmKGMua2V5KSAmJlxuICAgICAgICAgIGlzRGVmKG5lc3RlZEluZGV4KSkge1xuICAgICAgICAgIGMua2V5ID0gXCJfX3ZsaXN0XCIgKyBuZXN0ZWRJbmRleCArIFwiX1wiICsgaSArIFwiX19cIjtcbiAgICAgICAgfVxuICAgICAgICByZXMucHVzaChjKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gZW5zdXJlQ3RvciAoY29tcCwgYmFzZSkge1xuICBpZiAoXG4gICAgY29tcC5fX2VzTW9kdWxlIHx8XG4gICAgKGhhc1N5bWJvbCAmJiBjb21wW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnKVxuICApIHtcbiAgICBjb21wID0gY29tcC5kZWZhdWx0O1xuICB9XG4gIHJldHVybiBpc09iamVjdChjb21wKVxuICAgID8gYmFzZS5leHRlbmQoY29tcClcbiAgICA6IGNvbXBcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXN5bmNQbGFjZWhvbGRlciAoXG4gIGZhY3RvcnksXG4gIGRhdGEsXG4gIGNvbnRleHQsXG4gIGNoaWxkcmVuLFxuICB0YWdcbikge1xuICB2YXIgbm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTtcbiAgbm9kZS5hc3luY0ZhY3RvcnkgPSBmYWN0b3J5O1xuICBub2RlLmFzeW5jTWV0YSA9IHsgZGF0YTogZGF0YSwgY29udGV4dDogY29udGV4dCwgY2hpbGRyZW46IGNoaWxkcmVuLCB0YWc6IHRhZyB9O1xuICByZXR1cm4gbm9kZVxufVxuXG5mdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnQgKFxuICBmYWN0b3J5LFxuICBiYXNlQ3RvcixcbiAgY29udGV4dFxuKSB7XG4gIGlmIChpc1RydWUoZmFjdG9yeS5lcnJvcikgJiYgaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7XG4gICAgcmV0dXJuIGZhY3RvcnkuZXJyb3JDb21wXG4gIH1cblxuICBpZiAoaXNEZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcbiAgICByZXR1cm4gZmFjdG9yeS5yZXNvbHZlZFxuICB9XG5cbiAgaWYgKGlzVHJ1ZShmYWN0b3J5LmxvYWRpbmcpICYmIGlzRGVmKGZhY3RvcnkubG9hZGluZ0NvbXApKSB7XG4gICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ0NvbXBcbiAgfVxuXG4gIGlmIChpc0RlZihmYWN0b3J5LmNvbnRleHRzKSkge1xuICAgIC8vIGFscmVhZHkgcGVuZGluZ1xuICAgIGZhY3RvcnkuY29udGV4dHMucHVzaChjb250ZXh0KTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY29udGV4dHMgPSBmYWN0b3J5LmNvbnRleHRzID0gW2NvbnRleHRdO1xuICAgIHZhciBzeW5jID0gdHJ1ZTtcblxuICAgIHZhciBmb3JjZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29udGV4dHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnRleHRzW2ldLiRmb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcmVzb2x2ZSA9IG9uY2UoZnVuY3Rpb24gKHJlcykge1xuICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcbiAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSBlbnN1cmVDdG9yKHJlcywgYmFzZUN0b3IpO1xuICAgICAgLy8gaW52b2tlIGNhbGxiYWNrcyBvbmx5IGlmIHRoaXMgaXMgbm90IGEgc3luY2hyb25vdXMgcmVzb2x2ZVxuICAgICAgLy8gKGFzeW5jIHJlc29sdmVzIGFyZSBzaGltbWVkIGFzIHN5bmNocm9ub3VzIGR1cmluZyBTU1IpXG4gICAgICBpZiAoIXN5bmMpIHtcbiAgICAgICAgZm9yY2VSZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciByZWplY3QgPSBvbmNlKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgIFwiRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50OiBcIiArIChTdHJpbmcoZmFjdG9yeSkpICtcbiAgICAgICAgKHJlYXNvbiA/IChcIlxcblJlYXNvbjogXCIgKyByZWFzb24pIDogJycpXG4gICAgICApO1xuICAgICAgaWYgKGlzRGVmKGZhY3RvcnkuZXJyb3JDb21wKSkge1xuICAgICAgICBmYWN0b3J5LmVycm9yID0gdHJ1ZTtcbiAgICAgICAgZm9yY2VSZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciByZXMgPSBmYWN0b3J5KHJlc29sdmUsIHJlamVjdCk7XG5cbiAgICBpZiAoaXNPYmplY3QocmVzKSkge1xuICAgICAgaWYgKHR5cGVvZiByZXMudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyAoKSA9PiBQcm9taXNlXG4gICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7XG4gICAgICAgICAgcmVzLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc0RlZihyZXMuY29tcG9uZW50KSAmJiB0eXBlb2YgcmVzLmNvbXBvbmVudC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJlcy5jb21wb25lbnQudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXG4gICAgICAgIGlmIChpc0RlZihyZXMuZXJyb3IpKSB7XG4gICAgICAgICAgZmFjdG9yeS5lcnJvckNvbXAgPSBlbnN1cmVDdG9yKHJlcy5lcnJvciwgYmFzZUN0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmKHJlcy5sb2FkaW5nKSkge1xuICAgICAgICAgIGZhY3RvcnkubG9hZGluZ0NvbXAgPSBlbnN1cmVDdG9yKHJlcy5sb2FkaW5nLCBiYXNlQ3Rvcik7XG4gICAgICAgICAgaWYgKHJlcy5kZWxheSA9PT0gMCkge1xuICAgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpICYmIGlzVW5kZWYoZmFjdG9yeS5lcnJvcikpIHtcbiAgICAgICAgICAgICAgICBmYWN0b3J5LmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvcmNlUmVuZGVyKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlcy5kZWxheSB8fCAyMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0RlZihyZXMudGltZW91dCkpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcbiAgICAgICAgICAgICAgICBcInRpbWVvdXQgKFwiICsgKHJlcy50aW1lb3V0KSArIFwibXMpXCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCByZXMudGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBzeW5jID0gZmFsc2U7XG4gICAgLy8gcmV0dXJuIGluIGNhc2UgcmVzb2x2ZWQgc3luY2hyb25vdXNseVxuICAgIHJldHVybiBmYWN0b3J5LmxvYWRpbmdcbiAgICAgID8gZmFjdG9yeS5sb2FkaW5nQ29tcFxuICAgICAgOiBmYWN0b3J5LnJlc29sdmVkXG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGlzQXN5bmNQbGFjZWhvbGRlciAobm9kZSkge1xuICByZXR1cm4gbm9kZS5pc0NvbW1lbnQgJiYgbm9kZS5hc3luY0ZhY3Rvcnlcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGdldEZpcnN0Q29tcG9uZW50Q2hpbGQgKGNoaWxkcmVuKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjID0gY2hpbGRyZW5baV07XG4gICAgICBpZiAoaXNEZWYoYykgJiYgKGlzRGVmKGMuY29tcG9uZW50T3B0aW9ucykgfHwgaXNBc3luY1BsYWNlaG9sZGVyKGMpKSkge1xuICAgICAgICByZXR1cm4gY1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxuLyogICovXG5cbmZ1bmN0aW9uIGluaXRFdmVudHMgKHZtKSB7XG4gIHZtLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2bS5faGFzSG9va0V2ZW50ID0gZmFsc2U7XG4gIC8vIGluaXQgcGFyZW50IGF0dGFjaGVkIGV2ZW50c1xuICB2YXIgbGlzdGVuZXJzID0gdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycztcbiAgaWYgKGxpc3RlbmVycykge1xuICAgIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyh2bSwgbGlzdGVuZXJzKTtcbiAgfVxufVxuXG52YXIgdGFyZ2V0O1xuXG5mdW5jdGlvbiBhZGQgKGV2ZW50LCBmbiwgb25jZSkge1xuICBpZiAob25jZSkge1xuICAgIHRhcmdldC4kb25jZShldmVudCwgZm4pO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldC4kb24oZXZlbnQsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmUkMSAoZXZlbnQsIGZuKSB7XG4gIHRhcmdldC4kb2ZmKGV2ZW50LCBmbik7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyAoXG4gIHZtLFxuICBsaXN0ZW5lcnMsXG4gIG9sZExpc3RlbmVyc1xuKSB7XG4gIHRhcmdldCA9IHZtO1xuICB1cGRhdGVMaXN0ZW5lcnMobGlzdGVuZXJzLCBvbGRMaXN0ZW5lcnMgfHwge30sIGFkZCwgcmVtb3ZlJDEsIHZtKTtcbiAgdGFyZ2V0ID0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG4gIHZhciBob29rUkUgPSAvXmhvb2s6LztcbiAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGV2ZW50KSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBldmVudC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcyQxLiRvbihldmVudFtpXSwgZm4pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAodm0uX2V2ZW50c1tldmVudF0gfHwgKHZtLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcbiAgICAgIC8vIG9wdGltaXplIGhvb2s6ZXZlbnQgY29zdCBieSB1c2luZyBhIGJvb2xlYW4gZmxhZyBtYXJrZWQgYXQgcmVnaXN0cmF0aW9uXG4gICAgICAvLyBpbnN0ZWFkIG9mIGEgaGFzaCBsb29rdXBcbiAgICAgIGlmIChob29rUkUudGVzdChldmVudCkpIHtcbiAgICAgICAgdm0uX2hhc0hvb2tFdmVudCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2bVxuICB9O1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBmdW5jdGlvbiBvbiAoKSB7XG4gICAgICB2bS4kb2ZmKGV2ZW50LCBvbik7XG4gICAgICBmbi5hcHBseSh2bSwgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgb24uZm4gPSBmbjtcbiAgICB2bS4kb24oZXZlbnQsIG9uKTtcbiAgICByZXR1cm4gdm1cbiAgfTtcblxuICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIC8vIGFsbFxuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgdm0uX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICByZXR1cm4gdm1cbiAgICB9XG4gICAgLy8gYXJyYXkgb2YgZXZlbnRzXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGV2ZW50Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzJDEuJG9mZihldmVudFtpXSwgZm4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZtXG4gICAgfVxuICAgIC8vIHNwZWNpZmljIGV2ZW50XG4gICAgdmFyIGNicyA9IHZtLl9ldmVudHNbZXZlbnRdO1xuICAgIGlmICghY2JzKSB7XG4gICAgICByZXR1cm4gdm1cbiAgICB9XG4gICAgaWYgKCFmbikge1xuICAgICAgdm0uX2V2ZW50c1tldmVudF0gPSBudWxsO1xuICAgICAgcmV0dXJuIHZtXG4gICAgfVxuICAgIGlmIChmbikge1xuICAgICAgLy8gc3BlY2lmaWMgaGFuZGxlclxuICAgICAgdmFyIGNiO1xuICAgICAgdmFyIGkkMSA9IGNicy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaSQxLS0pIHtcbiAgICAgICAgY2IgPSBjYnNbaSQxXTtcbiAgICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgICAgICBjYnMuc3BsaWNlKGkkMSwgMSk7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdm1cbiAgfTtcblxuICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB7XG4gICAgICB2YXIgbG93ZXJDYXNlRXZlbnQgPSBldmVudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGxvd2VyQ2FzZUV2ZW50ICE9PSBldmVudCAmJiB2bS5fZXZlbnRzW2xvd2VyQ2FzZUV2ZW50XSkge1xuICAgICAgICB0aXAoXG4gICAgICAgICAgXCJFdmVudCBcXFwiXCIgKyBsb3dlckNhc2VFdmVudCArIFwiXFxcIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCBcIiArXG4gICAgICAgICAgKGZvcm1hdENvbXBvbmVudE5hbWUodm0pKSArIFwiIGJ1dCB0aGUgaGFuZGxlciBpcyByZWdpc3RlcmVkIGZvciBcXFwiXCIgKyBldmVudCArIFwiXFxcIi4gXCIgK1xuICAgICAgICAgIFwiTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgeW91IGNhbm5vdCB1c2UgXCIgK1xuICAgICAgICAgIFwidi1vbiB0byBsaXN0ZW4gdG8gY2FtZWxDYXNlIGV2ZW50cyB3aGVuIHVzaW5nIGluLURPTSB0ZW1wbGF0ZXMuIFwiICtcbiAgICAgICAgICBcIllvdSBzaG91bGQgcHJvYmFibHkgdXNlIFxcXCJcIiArIChoeXBoZW5hdGUoZXZlbnQpKSArIFwiXFxcIiBpbnN0ZWFkIG9mIFxcXCJcIiArIGV2ZW50ICsgXCJcXFwiLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBjYnMgPSB2bS5fZXZlbnRzW2V2ZW50XTtcbiAgICBpZiAoY2JzKSB7XG4gICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcbiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2JzW2ldLmFwcGx5KHZtLCBhcmdzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAoXCJldmVudCBoYW5kbGVyIGZvciBcXFwiXCIgKyBldmVudCArIFwiXFxcIlwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZtXG4gIH07XG59XG5cbi8qICAqL1xuXG5cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIHJhdyBjaGlsZHJlbiBWTm9kZXMgaW50byBhIHNsb3Qgb2JqZWN0LlxuICovXG5mdW5jdGlvbiByZXNvbHZlU2xvdHMgKFxuICBjaGlsZHJlbixcbiAgY29udGV4dFxuKSB7XG4gIHZhciBzbG90cyA9IHt9O1xuICBpZiAoIWNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIHNsb3RzXG4gIH1cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICB2YXIgZGF0YSA9IGNoaWxkLmRhdGE7XG4gICAgLy8gcmVtb3ZlIHNsb3QgYXR0cmlidXRlIGlmIHRoZSBub2RlIGlzIHJlc29sdmVkIGFzIGEgVnVlIHNsb3Qgbm9kZVxuICAgIGlmIChkYXRhICYmIGRhdGEuYXR0cnMgJiYgZGF0YS5hdHRycy5zbG90KSB7XG4gICAgICBkZWxldGUgZGF0YS5hdHRycy5zbG90O1xuICAgIH1cbiAgICAvLyBuYW1lZCBzbG90cyBzaG91bGQgb25seSBiZSByZXNwZWN0ZWQgaWYgdGhlIHZub2RlIHdhcyByZW5kZXJlZCBpbiB0aGVcbiAgICAvLyBzYW1lIGNvbnRleHQuXG4gICAgaWYgKChjaGlsZC5jb250ZXh0ID09PSBjb250ZXh0IHx8IGNoaWxkLmZuQ29udGV4dCA9PT0gY29udGV4dCkgJiZcbiAgICAgIGRhdGEgJiYgZGF0YS5zbG90ICE9IG51bGxcbiAgICApIHtcbiAgICAgIHZhciBuYW1lID0gZGF0YS5zbG90O1xuICAgICAgdmFyIHNsb3QgPSAoc2xvdHNbbmFtZV0gfHwgKHNsb3RzW25hbWVdID0gW10pKTtcbiAgICAgIGlmIChjaGlsZC50YWcgPT09ICd0ZW1wbGF0ZScpIHtcbiAgICAgICAgc2xvdC5wdXNoLmFwcGx5KHNsb3QsIGNoaWxkLmNoaWxkcmVuIHx8IFtdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsb3QucHVzaChjaGlsZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIChzbG90cy5kZWZhdWx0IHx8IChzbG90cy5kZWZhdWx0ID0gW10pKS5wdXNoKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgLy8gaWdub3JlIHNsb3RzIHRoYXQgY29udGFpbnMgb25seSB3aGl0ZXNwYWNlXG4gIGZvciAodmFyIG5hbWUkMSBpbiBzbG90cykge1xuICAgIGlmIChzbG90c1tuYW1lJDFdLmV2ZXJ5KGlzV2hpdGVzcGFjZSkpIHtcbiAgICAgIGRlbGV0ZSBzbG90c1tuYW1lJDFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2xvdHNcbn1cblxuZnVuY3Rpb24gaXNXaGl0ZXNwYWNlIChub2RlKSB7XG4gIHJldHVybiAobm9kZS5pc0NvbW1lbnQgJiYgIW5vZGUuYXN5bmNGYWN0b3J5KSB8fCBub2RlLnRleHQgPT09ICcgJ1xufVxuXG5mdW5jdGlvbiByZXNvbHZlU2NvcGVkU2xvdHMgKFxuICBmbnMsIC8vIHNlZSBmbG93L3Zub2RlXG4gIHJlc1xuKSB7XG4gIHJlcyA9IHJlcyB8fCB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbnNbaV0pKSB7XG4gICAgICByZXNvbHZlU2NvcGVkU2xvdHMoZm5zW2ldLCByZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNbZm5zW2ldLmtleV0gPSBmbnNbaV0uZm47XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyogICovXG5cbnZhciBhY3RpdmVJbnN0YW5jZSA9IG51bGw7XG52YXIgaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGluaXRMaWZlY3ljbGUgKHZtKSB7XG4gIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7XG5cbiAgLy8gbG9jYXRlIGZpcnN0IG5vbi1hYnN0cmFjdCBwYXJlbnRcbiAgdmFyIHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuICBpZiAocGFyZW50ICYmICFvcHRpb25zLmFic3RyYWN0KSB7XG4gICAgd2hpbGUgKHBhcmVudC4kb3B0aW9ucy5hYnN0cmFjdCAmJiBwYXJlbnQuJHBhcmVudCkge1xuICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgfVxuICAgIHBhcmVudC4kY2hpbGRyZW4ucHVzaCh2bSk7XG4gIH1cblxuICB2bS4kcGFyZW50ID0gcGFyZW50O1xuICB2bS4kcm9vdCA9IHBhcmVudCA/IHBhcmVudC4kcm9vdCA6IHZtO1xuXG4gIHZtLiRjaGlsZHJlbiA9IFtdO1xuICB2bS4kcmVmcyA9IHt9O1xuXG4gIHZtLl93YXRjaGVyID0gbnVsbDtcbiAgdm0uX2luYWN0aXZlID0gbnVsbDtcbiAgdm0uX2RpcmVjdEluYWN0aXZlID0gZmFsc2U7XG4gIHZtLl9pc01vdW50ZWQgPSBmYWxzZTtcbiAgdm0uX2lzRGVzdHJveWVkID0gZmFsc2U7XG4gIHZtLl9pc0JlaW5nRGVzdHJveWVkID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcbiAgVnVlLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKHZub2RlLCBoeWRyYXRpbmcpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmICh2bS5faXNNb3VudGVkKSB7XG4gICAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZVVwZGF0ZScpO1xuICAgIH1cbiAgICB2YXIgcHJldkVsID0gdm0uJGVsO1xuICAgIHZhciBwcmV2Vm5vZGUgPSB2bS5fdm5vZGU7XG4gICAgdmFyIHByZXZBY3RpdmVJbnN0YW5jZSA9IGFjdGl2ZUluc3RhbmNlO1xuICAgIGFjdGl2ZUluc3RhbmNlID0gdm07XG4gICAgdm0uX3Zub2RlID0gdm5vZGU7XG4gICAgLy8gVnVlLnByb3RvdHlwZS5fX3BhdGNoX18gaXMgaW5qZWN0ZWQgaW4gZW50cnkgcG9pbnRzXG4gICAgLy8gYmFzZWQgb24gdGhlIHJlbmRlcmluZyBiYWNrZW5kIHVzZWQuXG4gICAgaWYgKCFwcmV2Vm5vZGUpIHtcbiAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG4gICAgICB2bS4kZWwgPSB2bS5fX3BhdGNoX18oXG4gICAgICAgIHZtLiRlbCwgdm5vZGUsIGh5ZHJhdGluZywgZmFsc2UgLyogcmVtb3ZlT25seSAqLyxcbiAgICAgICAgdm0uJG9wdGlvbnMuX3BhcmVudEVsbSxcbiAgICAgICAgdm0uJG9wdGlvbnMuX3JlZkVsbVxuICAgICAgKTtcbiAgICAgIC8vIG5vIG5lZWQgZm9yIHRoZSByZWYgbm9kZXMgYWZ0ZXIgaW5pdGlhbCBwYXRjaFxuICAgICAgLy8gdGhpcyBwcmV2ZW50cyBrZWVwaW5nIGEgZGV0YWNoZWQgRE9NIHRyZWUgaW4gbWVtb3J5ICgjNTg1MSlcbiAgICAgIHZtLiRvcHRpb25zLl9wYXJlbnRFbG0gPSB2bS4kb3B0aW9ucy5fcmVmRWxtID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlc1xuICAgICAgdm0uJGVsID0gdm0uX19wYXRjaF9fKHByZXZWbm9kZSwgdm5vZGUpO1xuICAgIH1cbiAgICBhY3RpdmVJbnN0YW5jZSA9IHByZXZBY3RpdmVJbnN0YW5jZTtcbiAgICAvLyB1cGRhdGUgX192dWVfXyByZWZlcmVuY2VcbiAgICBpZiAocHJldkVsKSB7XG4gICAgICBwcmV2RWwuX192dWVfXyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh2bS4kZWwpIHtcbiAgICAgIHZtLiRlbC5fX3Z1ZV9fID0gdm07XG4gICAgfVxuICAgIC8vIGlmIHBhcmVudCBpcyBhbiBIT0MsIHVwZGF0ZSBpdHMgJGVsIGFzIHdlbGxcbiAgICBpZiAodm0uJHZub2RlICYmIHZtLiRwYXJlbnQgJiYgdm0uJHZub2RlID09PSB2bS4kcGFyZW50Ll92bm9kZSkge1xuICAgICAgdm0uJHBhcmVudC4kZWwgPSB2bS4kZWw7XG4gICAgfVxuICAgIC8vIHVwZGF0ZWQgaG9vayBpcyBjYWxsZWQgYnkgdGhlIHNjaGVkdWxlciB0byBlbnN1cmUgdGhhdCBjaGlsZHJlbiBhcmVcbiAgICAvLyB1cGRhdGVkIGluIGEgcGFyZW50J3MgdXBkYXRlZCBob29rLlxuICB9O1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKHZtLl93YXRjaGVyKSB7XG4gICAgICB2bS5fd2F0Y2hlci51cGRhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmICh2bS5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlRGVzdHJveScpO1xuICAgIHZtLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudFxuICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdm0uJG9wdGlvbnMuYWJzdHJhY3QpIHtcbiAgICAgIHJlbW92ZShwYXJlbnQuJGNoaWxkcmVuLCB2bSk7XG4gICAgfVxuICAgIC8vIHRlYXJkb3duIHdhdGNoZXJzXG4gICAgaWYgKHZtLl93YXRjaGVyKSB7XG4gICAgICB2bS5fd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH1cbiAgICB2YXIgaSA9IHZtLl93YXRjaGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdm0uX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG4gICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG4gICAgaWYgKHZtLl9kYXRhLl9fb2JfXykge1xuICAgICAgdm0uX2RhdGEuX19vYl9fLnZtQ291bnQtLTtcbiAgICB9XG4gICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG4gICAgdm0uX2lzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAvLyBpbnZva2UgZGVzdHJveSBob29rcyBvbiBjdXJyZW50IHJlbmRlcmVkIHRyZWVcbiAgICB2bS5fX3BhdGNoX18odm0uX3Zub2RlLCBudWxsKTtcbiAgICAvLyBmaXJlIGRlc3Ryb3llZCBob29rXG4gICAgY2FsbEhvb2sodm0sICdkZXN0cm95ZWQnKTtcbiAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuICAgIHZtLiRvZmYoKTtcbiAgICAvLyByZW1vdmUgX192dWVfXyByZWZlcmVuY2VcbiAgICBpZiAodm0uJGVsKSB7XG4gICAgICB2bS4kZWwuX192dWVfXyA9IG51bGw7XG4gICAgfVxuICAgIC8vIHJlbGVhc2UgY2lyY3VsYXIgcmVmZXJlbmNlICgjNjc1OSlcbiAgICBpZiAodm0uJHZub2RlKSB7XG4gICAgICB2bS4kdm5vZGUucGFyZW50ID0gbnVsbDtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1vdW50Q29tcG9uZW50IChcbiAgdm0sXG4gIGVsLFxuICBoeWRyYXRpbmdcbikge1xuICB2bS4kZWwgPSBlbDtcbiAgaWYgKCF2bS4kb3B0aW9ucy5yZW5kZXIpIHtcbiAgICB2bS4kb3B0aW9ucy5yZW5kZXIgPSBjcmVhdGVFbXB0eVZOb2RlO1xuICAgIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCh2bS4kb3B0aW9ucy50ZW1wbGF0ZSAmJiB2bS4kb3B0aW9ucy50ZW1wbGF0ZS5jaGFyQXQoMCkgIT09ICcjJykgfHxcbiAgICAgICAgdm0uJG9wdGlvbnMuZWwgfHwgZWwpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAnWW91IGFyZSB1c2luZyB0aGUgcnVudGltZS1vbmx5IGJ1aWxkIG9mIFZ1ZSB3aGVyZSB0aGUgdGVtcGxhdGUgJyArXG4gICAgICAgICAgJ2NvbXBpbGVyIGlzIG5vdCBhdmFpbGFibGUuIEVpdGhlciBwcmUtY29tcGlsZSB0aGUgdGVtcGxhdGVzIGludG8gJyArXG4gICAgICAgICAgJ3JlbmRlciBmdW5jdGlvbnMsIG9yIHVzZSB0aGUgY29tcGlsZXItaW5jbHVkZWQgYnVpbGQuJyxcbiAgICAgICAgICB2bVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAnRmFpbGVkIHRvIG1vdW50IGNvbXBvbmVudDogdGVtcGxhdGUgb3IgcmVuZGVyIGZ1bmN0aW9uIG5vdCBkZWZpbmVkLicsXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY2FsbEhvb2sodm0sICdiZWZvcmVNb3VudCcpO1xuXG4gIHZhciB1cGRhdGVDb21wb25lbnQ7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHtcbiAgICB1cGRhdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbmFtZSA9IHZtLl9uYW1lO1xuICAgICAgdmFyIGlkID0gdm0uX3VpZDtcbiAgICAgIHZhciBzdGFydFRhZyA9IFwidnVlLXBlcmYtc3RhcnQ6XCIgKyBpZDtcbiAgICAgIHZhciBlbmRUYWcgPSBcInZ1ZS1wZXJmLWVuZDpcIiArIGlkO1xuXG4gICAgICBtYXJrKHN0YXJ0VGFnKTtcbiAgICAgIHZhciB2bm9kZSA9IHZtLl9yZW5kZXIoKTtcbiAgICAgIG1hcmsoZW5kVGFnKTtcbiAgICAgIG1lYXN1cmUoKFwidnVlIFwiICsgbmFtZSArIFwiIHJlbmRlclwiKSwgc3RhcnRUYWcsIGVuZFRhZyk7XG5cbiAgICAgIG1hcmsoc3RhcnRUYWcpO1xuICAgICAgdm0uX3VwZGF0ZSh2bm9kZSwgaHlkcmF0aW5nKTtcbiAgICAgIG1hcmsoZW5kVGFnKTtcbiAgICAgIG1lYXN1cmUoKFwidnVlIFwiICsgbmFtZSArIFwiIHBhdGNoXCIpLCBzdGFydFRhZywgZW5kVGFnKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHVwZGF0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLl91cGRhdGUodm0uX3JlbmRlcigpLCBoeWRyYXRpbmcpO1xuICAgIH07XG4gIH1cblxuICAvLyB3ZSBzZXQgdGhpcyB0byB2bS5fd2F0Y2hlciBpbnNpZGUgdGhlIHdhdGNoZXIncyBjb25zdHJ1Y3RvclxuICAvLyBzaW5jZSB0aGUgd2F0Y2hlcidzIGluaXRpYWwgcGF0Y2ggbWF5IGNhbGwgJGZvcmNlVXBkYXRlIChlLmcuIGluc2lkZSBjaGlsZFxuICAvLyBjb21wb25lbnQncyBtb3VudGVkIGhvb2spLCB3aGljaCByZWxpZXMgb24gdm0uX3dhdGNoZXIgYmVpbmcgYWxyZWFkeSBkZWZpbmVkXG4gIG5ldyBXYXRjaGVyKHZtLCB1cGRhdGVDb21wb25lbnQsIG5vb3AsIG51bGwsIHRydWUgLyogaXNSZW5kZXJXYXRjaGVyICovKTtcbiAgaHlkcmF0aW5nID0gZmFsc2U7XG5cbiAgLy8gbWFudWFsbHkgbW91bnRlZCBpbnN0YW5jZSwgY2FsbCBtb3VudGVkIG9uIHNlbGZcbiAgLy8gbW91bnRlZCBpcyBjYWxsZWQgZm9yIHJlbmRlci1jcmVhdGVkIGNoaWxkIGNvbXBvbmVudHMgaW4gaXRzIGluc2VydGVkIGhvb2tcbiAgaWYgKHZtLiR2bm9kZSA9PSBudWxsKSB7XG4gICAgdm0uX2lzTW91bnRlZCA9IHRydWU7XG4gICAgY2FsbEhvb2sodm0sICdtb3VudGVkJyk7XG4gIH1cbiAgcmV0dXJuIHZtXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNoaWxkQ29tcG9uZW50IChcbiAgdm0sXG4gIHByb3BzRGF0YSxcbiAgbGlzdGVuZXJzLFxuICBwYXJlbnRWbm9kZSxcbiAgcmVuZGVyQ2hpbGRyZW5cbikge1xuICB7XG4gICAgaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIGRldGVybWluZSB3aGV0aGVyIGNvbXBvbmVudCBoYXMgc2xvdCBjaGlsZHJlblxuICAvLyB3ZSBuZWVkIHRvIGRvIHRoaXMgYmVmb3JlIG92ZXJ3cml0aW5nICRvcHRpb25zLl9yZW5kZXJDaGlsZHJlblxuICB2YXIgaGFzQ2hpbGRyZW4gPSAhIShcbiAgICByZW5kZXJDaGlsZHJlbiB8fCAgICAgICAgICAgICAgIC8vIGhhcyBuZXcgc3RhdGljIHNsb3RzXG4gICAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuIHx8ICAvLyBoYXMgb2xkIHN0YXRpYyBzbG90c1xuICAgIHBhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHMgfHwgLy8gaGFzIG5ldyBzY29wZWQgc2xvdHNcbiAgICB2bS4kc2NvcGVkU2xvdHMgIT09IGVtcHR5T2JqZWN0IC8vIGhhcyBvbGQgc2NvcGVkIHNsb3RzXG4gICk7XG5cbiAgdm0uJG9wdGlvbnMuX3BhcmVudFZub2RlID0gcGFyZW50Vm5vZGU7XG4gIHZtLiR2bm9kZSA9IHBhcmVudFZub2RlOyAvLyB1cGRhdGUgdm0ncyBwbGFjZWhvbGRlciBub2RlIHdpdGhvdXQgcmUtcmVuZGVyXG5cbiAgaWYgKHZtLl92bm9kZSkgeyAvLyB1cGRhdGUgY2hpbGQgdHJlZSdzIHBhcmVudFxuICAgIHZtLl92bm9kZS5wYXJlbnQgPSBwYXJlbnRWbm9kZTtcbiAgfVxuICB2bS4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW4gPSByZW5kZXJDaGlsZHJlbjtcblxuICAvLyB1cGRhdGUgJGF0dHJzIGFuZCAkbGlzdGVuZXJzIGhhc2hcbiAgLy8gdGhlc2UgYXJlIGFsc28gcmVhY3RpdmUgc28gdGhleSBtYXkgdHJpZ2dlciBjaGlsZCB1cGRhdGUgaWYgdGhlIGNoaWxkXG4gIC8vIHVzZWQgdGhlbSBkdXJpbmcgcmVuZGVyXG4gIHZtLiRhdHRycyA9IHBhcmVudFZub2RlLmRhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3Q7XG4gIHZtLiRsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMgfHwgZW1wdHlPYmplY3Q7XG5cbiAgLy8gdXBkYXRlIHByb3BzXG4gIGlmIChwcm9wc0RhdGEgJiYgdm0uJG9wdGlvbnMucHJvcHMpIHtcbiAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpO1xuICAgIHZhciBwcm9wcyA9IHZtLl9wcm9wcztcbiAgICB2YXIgcHJvcEtleXMgPSB2bS4kb3B0aW9ucy5fcHJvcEtleXMgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IHByb3BLZXlzW2ldO1xuICAgICAgdmFyIHByb3BPcHRpb25zID0gdm0uJG9wdGlvbnMucHJvcHM7IC8vIHd0ZiBmbG93P1xuICAgICAgcHJvcHNba2V5XSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BPcHRpb25zLCBwcm9wc0RhdGEsIHZtKTtcbiAgICB9XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpO1xuICAgIC8vIGtlZXAgYSBjb3B5IG9mIHJhdyBwcm9wc0RhdGFcbiAgICB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgPSBwcm9wc0RhdGE7XG4gIH1cblxuICAvLyB1cGRhdGUgbGlzdGVuZXJzXG4gIGxpc3RlbmVycyA9IGxpc3RlbmVycyB8fCBlbXB0eU9iamVjdDtcbiAgdmFyIG9sZExpc3RlbmVycyA9IHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7XG4gIHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnMgPSBsaXN0ZW5lcnM7XG4gIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyh2bSwgbGlzdGVuZXJzLCBvbGRMaXN0ZW5lcnMpO1xuXG4gIC8vIHJlc29sdmUgc2xvdHMgKyBmb3JjZSB1cGRhdGUgaWYgaGFzIGNoaWxkcmVuXG4gIGlmIChoYXNDaGlsZHJlbikge1xuICAgIHZtLiRzbG90cyA9IHJlc29sdmVTbG90cyhyZW5kZXJDaGlsZHJlbiwgcGFyZW50Vm5vZGUuY29udGV4dCk7XG4gICAgdm0uJGZvcmNlVXBkYXRlKCk7XG4gIH1cblxuICB7XG4gICAgaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ID0gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNJbkluYWN0aXZlVHJlZSAodm0pIHtcbiAgd2hpbGUgKHZtICYmICh2bSA9IHZtLiRwYXJlbnQpKSB7XG4gICAgaWYgKHZtLl9pbmFjdGl2ZSkgeyByZXR1cm4gdHJ1ZSB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHtcbiAgaWYgKGRpcmVjdCkge1xuICAgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IGZhbHNlO1xuICAgIGlmIChpc0luSW5hY3RpdmVUcmVlKHZtKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICB9IGVsc2UgaWYgKHZtLl9kaXJlY3RJbmFjdGl2ZSkge1xuICAgIHJldHVyblxuICB9XG4gIGlmICh2bS5faW5hY3RpdmUgfHwgdm0uX2luYWN0aXZlID09PSBudWxsKSB7XG4gICAgdm0uX2luYWN0aXZlID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS4kY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQodm0uJGNoaWxkcmVuW2ldKTtcbiAgICB9XG4gICAgY2FsbEhvb2sodm0sICdhY3RpdmF0ZWQnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHtcbiAgaWYgKGRpcmVjdCkge1xuICAgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IHRydWU7XG4gICAgaWYgKGlzSW5JbmFjdGl2ZVRyZWUodm0pKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cbiAgaWYgKCF2bS5faW5hY3RpdmUpIHtcbiAgICB2bS5faW5hY3RpdmUgPSB0cnVlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uJGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQodm0uJGNoaWxkcmVuW2ldKTtcbiAgICB9XG4gICAgY2FsbEhvb2sodm0sICdkZWFjdGl2YXRlZCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNhbGxIb29rICh2bSwgaG9vaykge1xuICAvLyAjNzU3MyBkaXNhYmxlIGRlcCBjb2xsZWN0aW9uIHdoZW4gaW52b2tpbmcgbGlmZWN5Y2xlIGhvb2tzXG4gIHB1c2hUYXJnZXQoKTtcbiAgdmFyIGhhbmRsZXJzID0gdm0uJG9wdGlvbnNbaG9va107XG4gIGlmIChoYW5kbGVycykge1xuICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICBoYW5kbGVyc1tpXS5jYWxsKHZtKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIChob29rICsgXCIgaG9va1wiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICh2bS5faGFzSG9va0V2ZW50KSB7XG4gICAgdm0uJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuICB9XG4gIHBvcFRhcmdldCgpO1xufVxuXG4vKiAgKi9cblxuXG52YXIgTUFYX1VQREFURV9DT1VOVCA9IDEwMDtcblxudmFyIHF1ZXVlID0gW107XG52YXIgYWN0aXZhdGVkQ2hpbGRyZW4gPSBbXTtcbnZhciBoYXMgPSB7fTtcbnZhciBjaXJjdWxhciA9IHt9O1xudmFyIHdhaXRpbmcgPSBmYWxzZTtcbnZhciBmbHVzaGluZyA9IGZhbHNlO1xudmFyIGluZGV4ID0gMDtcblxuLyoqXG4gKiBSZXNldCB0aGUgc2NoZWR1bGVyJ3Mgc3RhdGUuXG4gKi9cbmZ1bmN0aW9uIHJlc2V0U2NoZWR1bGVyU3RhdGUgKCkge1xuICBpbmRleCA9IHF1ZXVlLmxlbmd0aCA9IGFjdGl2YXRlZENoaWxkcmVuLmxlbmd0aCA9IDA7XG4gIGhhcyA9IHt9O1xuICB7XG4gICAgY2lyY3VsYXIgPSB7fTtcbiAgfVxuICB3YWl0aW5nID0gZmx1c2hpbmcgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cbiAqL1xuZnVuY3Rpb24gZmx1c2hTY2hlZHVsZXJRdWV1ZSAoKSB7XG4gIGZsdXNoaW5nID0gdHJ1ZTtcbiAgdmFyIHdhdGNoZXIsIGlkO1xuXG4gIC8vIFNvcnQgcXVldWUgYmVmb3JlIGZsdXNoLlxuICAvLyBUaGlzIGVuc3VyZXMgdGhhdDpcbiAgLy8gMS4gQ29tcG9uZW50cyBhcmUgdXBkYXRlZCBmcm9tIHBhcmVudCB0byBjaGlsZC4gKGJlY2F1c2UgcGFyZW50IGlzIGFsd2F5c1xuICAvLyAgICBjcmVhdGVkIGJlZm9yZSB0aGUgY2hpbGQpXG4gIC8vIDIuIEEgY29tcG9uZW50J3MgdXNlciB3YXRjaGVycyBhcmUgcnVuIGJlZm9yZSBpdHMgcmVuZGVyIHdhdGNoZXIgKGJlY2F1c2VcbiAgLy8gICAgdXNlciB3YXRjaGVycyBhcmUgY3JlYXRlZCBiZWZvcmUgdGhlIHJlbmRlciB3YXRjaGVyKVxuICAvLyAzLiBJZiBhIGNvbXBvbmVudCBpcyBkZXN0cm95ZWQgZHVyaW5nIGEgcGFyZW50IGNvbXBvbmVudCdzIHdhdGNoZXIgcnVuLFxuICAvLyAgICBpdHMgd2F0Y2hlcnMgY2FuIGJlIHNraXBwZWQuXG4gIHF1ZXVlLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuaWQgLSBiLmlkOyB9KTtcblxuICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcbiAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG4gIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHF1ZXVlLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIHdhdGNoZXIgPSBxdWV1ZVtpbmRleF07XG4gICAgaWQgPSB3YXRjaGVyLmlkO1xuICAgIGhhc1tpZF0gPSBudWxsO1xuICAgIHdhdGNoZXIucnVuKCk7XG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBoYXNbaWRdICE9IG51bGwpIHtcbiAgICAgIGNpcmN1bGFyW2lkXSA9IChjaXJjdWxhcltpZF0gfHwgMCkgKyAxO1xuICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IE1BWF9VUERBVEVfQ09VTlQpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAnWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wICcgKyAoXG4gICAgICAgICAgICB3YXRjaGVyLnVzZXJcbiAgICAgICAgICAgICAgPyAoXCJpbiB3YXRjaGVyIHdpdGggZXhwcmVzc2lvbiBcXFwiXCIgKyAod2F0Y2hlci5leHByZXNzaW9uKSArIFwiXFxcIlwiKVxuICAgICAgICAgICAgICA6IFwiaW4gYSBjb21wb25lbnQgcmVuZGVyIGZ1bmN0aW9uLlwiXG4gICAgICAgICAgKSxcbiAgICAgICAgICB3YXRjaGVyLnZtXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8ga2VlcCBjb3BpZXMgb2YgcG9zdCBxdWV1ZXMgYmVmb3JlIHJlc2V0dGluZyBzdGF0ZVxuICB2YXIgYWN0aXZhdGVkUXVldWUgPSBhY3RpdmF0ZWRDaGlsZHJlbi5zbGljZSgpO1xuICB2YXIgdXBkYXRlZFF1ZXVlID0gcXVldWUuc2xpY2UoKTtcblxuICByZXNldFNjaGVkdWxlclN0YXRlKCk7XG5cbiAgLy8gY2FsbCBjb21wb25lbnQgdXBkYXRlZCBhbmQgYWN0aXZhdGVkIGhvb2tzXG4gIGNhbGxBY3RpdmF0ZWRIb29rcyhhY3RpdmF0ZWRRdWV1ZSk7XG4gIGNhbGxVcGRhdGVkSG9va3ModXBkYXRlZFF1ZXVlKTtcblxuICAvLyBkZXZ0b29sIGhvb2tcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcbiAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNhbGxVcGRhdGVkSG9va3MgKHF1ZXVlKSB7XG4gIHZhciBpID0gcXVldWUubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcbiAgICB2YXIgdm0gPSB3YXRjaGVyLnZtO1xuICAgIGlmICh2bS5fd2F0Y2hlciA9PT0gd2F0Y2hlciAmJiB2bS5faXNNb3VudGVkKSB7XG4gICAgICBjYWxsSG9vayh2bSwgJ3VwZGF0ZWQnKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBRdWV1ZSBhIGtlcHQtYWxpdmUgY29tcG9uZW50IHRoYXQgd2FzIGFjdGl2YXRlZCBkdXJpbmcgcGF0Y2guXG4gKiBUaGUgcXVldWUgd2lsbCBiZSBwcm9jZXNzZWQgYWZ0ZXIgdGhlIGVudGlyZSB0cmVlIGhhcyBiZWVuIHBhdGNoZWQuXG4gKi9cbmZ1bmN0aW9uIHF1ZXVlQWN0aXZhdGVkQ29tcG9uZW50ICh2bSkge1xuICAvLyBzZXR0aW5nIF9pbmFjdGl2ZSB0byBmYWxzZSBoZXJlIHNvIHRoYXQgYSByZW5kZXIgZnVuY3Rpb24gY2FuXG4gIC8vIHJlbHkgb24gY2hlY2tpbmcgd2hldGhlciBpdCdzIGluIGFuIGluYWN0aXZlIHRyZWUgKGUuZy4gcm91dGVyLXZpZXcpXG4gIHZtLl9pbmFjdGl2ZSA9IGZhbHNlO1xuICBhY3RpdmF0ZWRDaGlsZHJlbi5wdXNoKHZtKTtcbn1cblxuZnVuY3Rpb24gY2FsbEFjdGl2YXRlZEhvb2tzIChxdWV1ZSkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgcXVldWVbaV0uX2luYWN0aXZlID0gdHJ1ZTtcbiAgICBhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KHF1ZXVlW2ldLCB0cnVlIC8qIHRydWUgKi8pO1xuICB9XG59XG5cbi8qKlxuICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS5cbiAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG4gKi9cbmZ1bmN0aW9uIHF1ZXVlV2F0Y2hlciAod2F0Y2hlcikge1xuICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XG4gICAgaGFzW2lkXSA9IHRydWU7XG4gICAgaWYgKCFmbHVzaGluZykge1xuICAgICAgcXVldWUucHVzaCh3YXRjaGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgYWxyZWFkeSBmbHVzaGluZywgc3BsaWNlIHRoZSB3YXRjaGVyIGJhc2VkIG9uIGl0cyBpZFxuICAgICAgLy8gaWYgYWxyZWFkeSBwYXN0IGl0cyBpZCwgaXQgd2lsbCBiZSBydW4gbmV4dCBpbW1lZGlhdGVseS5cbiAgICAgIHZhciBpID0gcXVldWUubGVuZ3RoIC0gMTtcbiAgICAgIHdoaWxlIChpID4gaW5kZXggJiYgcXVldWVbaV0uaWQgPiB3YXRjaGVyLmlkKSB7XG4gICAgICAgIGktLTtcbiAgICAgIH1cbiAgICAgIHF1ZXVlLnNwbGljZShpICsgMSwgMCwgd2F0Y2hlcik7XG4gICAgfVxuICAgIC8vIHF1ZXVlIHRoZSBmbHVzaFxuICAgIGlmICghd2FpdGluZykge1xuICAgICAgd2FpdGluZyA9IHRydWU7XG4gICAgICBuZXh0VGljayhmbHVzaFNjaGVkdWxlclF1ZXVlKTtcbiAgICB9XG4gIH1cbn1cblxuLyogICovXG5cbnZhciB1aWQkMSA9IDA7XG5cbi8qKlxuICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG4gKiBhbmQgZmlyZXMgY2FsbGJhY2sgd2hlbiB0aGUgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzLlxuICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG4gKi9cbnZhciBXYXRjaGVyID0gZnVuY3Rpb24gV2F0Y2hlciAoXG4gIHZtLFxuICBleHBPckZuLFxuICBjYixcbiAgb3B0aW9ucyxcbiAgaXNSZW5kZXJXYXRjaGVyXG4pIHtcbiAgdGhpcy52bSA9IHZtO1xuICBpZiAoaXNSZW5kZXJXYXRjaGVyKSB7XG4gICAgdm0uX3dhdGNoZXIgPSB0aGlzO1xuICB9XG4gIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuICAvLyBvcHRpb25zXG4gIGlmIChvcHRpb25zKSB7XG4gICAgdGhpcy5kZWVwID0gISFvcHRpb25zLmRlZXA7XG4gICAgdGhpcy51c2VyID0gISFvcHRpb25zLnVzZXI7XG4gICAgdGhpcy5sYXp5ID0gISFvcHRpb25zLmxhenk7XG4gICAgdGhpcy5zeW5jID0gISFvcHRpb25zLnN5bmM7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5kZWVwID0gdGhpcy51c2VyID0gdGhpcy5sYXp5ID0gdGhpcy5zeW5jID0gZmFsc2U7XG4gIH1cbiAgdGhpcy5jYiA9IGNiO1xuICB0aGlzLmlkID0gKyt1aWQkMTsgLy8gdWlkIGZvciBiYXRjaGluZ1xuICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gIHRoaXMuZGlydHkgPSB0aGlzLmxhenk7IC8vIGZvciBsYXp5IHdhdGNoZXJzXG4gIHRoaXMuZGVwcyA9IFtdO1xuICB0aGlzLm5ld0RlcHMgPSBbXTtcbiAgdGhpcy5kZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm4udG9TdHJpbmcoKTtcbiAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyXG4gIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmdldHRlciA9IHBhcnNlUGF0aChleHBPckZuKTtcbiAgICBpZiAoIXRoaXMuZ2V0dGVyKSB7XG4gICAgICB0aGlzLmdldHRlciA9IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICAgXCJGYWlsZWQgd2F0Y2hpbmcgcGF0aDogXFxcIlwiICsgZXhwT3JGbiArIFwiXFxcIiBcIiArXG4gICAgICAgICdXYXRjaGVyIG9ubHkgYWNjZXB0cyBzaW1wbGUgZG90LWRlbGltaXRlZCBwYXRocy4gJyArXG4gICAgICAgICdGb3IgZnVsbCBjb250cm9sLCB1c2UgYSBmdW5jdGlvbiBpbnN0ZWFkLicsXG4gICAgICAgIHZtXG4gICAgICApO1xuICAgIH1cbiAgfVxuICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5XG4gICAgPyB1bmRlZmluZWRcbiAgICA6IHRoaXMuZ2V0KCk7XG59O1xuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cbiAqL1xuV2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0ICgpIHtcbiAgcHVzaFRhcmdldCh0aGlzKTtcbiAgdmFyIHZhbHVlO1xuICB2YXIgdm0gPSB0aGlzLnZtO1xuICB0cnkge1xuICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbCh2bSwgdm0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHRoaXMudXNlcikge1xuICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIChcImdldHRlciBmb3Igd2F0Y2hlciBcXFwiXCIgKyAodGhpcy5leHByZXNzaW9uKSArIFwiXFxcIlwiKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVcbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgLy8gXCJ0b3VjaFwiIGV2ZXJ5IHByb3BlcnR5IHNvIHRoZXkgYXJlIGFsbCB0cmFja2VkIGFzXG4gICAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG4gICAgaWYgKHRoaXMuZGVlcCkge1xuICAgICAgdHJhdmVyc2UodmFsdWUpO1xuICAgIH1cbiAgICBwb3BUYXJnZXQoKTtcbiAgICB0aGlzLmNsZWFudXBEZXBzKCk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlXG59O1xuXG4vKipcbiAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIGFkZERlcCAoZGVwKSB7XG4gIHZhciBpZCA9IGRlcC5pZDtcbiAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG4gICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcbiAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAqL1xuV2F0Y2hlci5wcm90b3R5cGUuY2xlYW51cERlcHMgPSBmdW5jdGlvbiBjbGVhbnVwRGVwcyAoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdmFyIGRlcCA9IHRoaXMkMS5kZXBzW2ldO1xuICAgIGlmICghdGhpcyQxLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkge1xuICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzJDEpO1xuICAgIH1cbiAgfVxuICB2YXIgdG1wID0gdGhpcy5kZXBJZHM7XG4gIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7XG4gIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuICB0aGlzLm5ld0RlcElkcy5jbGVhcigpO1xuICB0bXAgPSB0aGlzLmRlcHM7XG4gIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcbiAgdGhpcy5uZXdEZXBzID0gdG1wO1xuICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDtcbn07XG5cbi8qKlxuICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXG4gKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLlxuICovXG5XYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUgKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAodGhpcy5sYXp5KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH0gZWxzZSBpZiAodGhpcy5zeW5jKSB7XG4gICAgdGhpcy5ydW4oKTtcbiAgfSBlbHNlIHtcbiAgICBxdWV1ZVdhdGNoZXIodGhpcyk7XG4gIH1cbn07XG5cbi8qKlxuICogU2NoZWR1bGVyIGpvYiBpbnRlcmZhY2UuXG4gKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgc2NoZWR1bGVyLlxuICovXG5XYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiBydW4gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuICAgIGlmIChcbiAgICAgIHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG4gICAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cbiAgICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcbiAgICAgIC8vIGhhdmUgbXV0YXRlZC5cbiAgICAgIGlzT2JqZWN0KHZhbHVlKSB8fFxuICAgICAgdGhpcy5kZWVwXG4gICAgKSB7XG4gICAgICAvLyBzZXQgbmV3IHZhbHVlXG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgaWYgKHRoaXMudXNlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdGhpcy52bSwgKFwiY2FsbGJhY2sgZm9yIHdhdGNoZXIgXFxcIlwiICsgKHRoaXMuZXhwcmVzc2lvbikgKyBcIlxcXCJcIikpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLlxuICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLlxuICovXG5XYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIGV2YWx1YXRlICgpIHtcbiAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG4gIHRoaXMuZGlydHkgPSBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uIGRlcGVuZCAoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdGhpcyQxLmRlcHNbaV0uZGVwZW5kKCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJzY3JpYmVyIGxpc3QuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gdGVhcmRvd24gKCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3RcbiAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG4gICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZC5cbiAgICBpZiAoIXRoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIHJlbW92ZSh0aGlzLnZtLl93YXRjaGVycywgdGhpcyk7XG4gICAgfVxuICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzJDEuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyQxKTtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgfVxufTtcblxuLyogICovXG5cbnZhciBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24gPSB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBub29wLFxuICBzZXQ6IG5vb3Bcbn07XG5cbmZ1bmN0aW9uIHByb3h5ICh0YXJnZXQsIHNvdXJjZUtleSwga2V5KSB7XG4gIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSBmdW5jdGlvbiBwcm94eUdldHRlciAoKSB7XG4gICAgcmV0dXJuIHRoaXNbc291cmNlS2V5XVtrZXldXG4gIH07XG4gIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBmdW5jdGlvbiBwcm94eVNldHRlciAodmFsKSB7XG4gICAgdGhpc1tzb3VyY2VLZXldW2tleV0gPSB2YWw7XG4gIH07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uKTtcbn1cblxuZnVuY3Rpb24gaW5pdFN0YXRlICh2bSkge1xuICB2bS5fd2F0Y2hlcnMgPSBbXTtcbiAgdmFyIG9wdHMgPSB2bS4kb3B0aW9ucztcbiAgaWYgKG9wdHMucHJvcHMpIHsgaW5pdFByb3BzKHZtLCBvcHRzLnByb3BzKTsgfVxuICBpZiAob3B0cy5tZXRob2RzKSB7IGluaXRNZXRob2RzKHZtLCBvcHRzLm1ldGhvZHMpOyB9XG4gIGlmIChvcHRzLmRhdGEpIHtcbiAgICBpbml0RGF0YSh2bSk7XG4gIH0gZWxzZSB7XG4gICAgb2JzZXJ2ZSh2bS5fZGF0YSA9IHt9LCB0cnVlIC8qIGFzUm9vdERhdGEgKi8pO1xuICB9XG4gIGlmIChvcHRzLmNvbXB1dGVkKSB7IGluaXRDb21wdXRlZCh2bSwgb3B0cy5jb21wdXRlZCk7IH1cbiAgaWYgKG9wdHMud2F0Y2ggJiYgb3B0cy53YXRjaCAhPT0gbmF0aXZlV2F0Y2gpIHtcbiAgICBpbml0V2F0Y2godm0sIG9wdHMud2F0Y2gpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRQcm9wcyAodm0sIHByb3BzT3B0aW9ucykge1xuICB2YXIgcHJvcHNEYXRhID0gdm0uJG9wdGlvbnMucHJvcHNEYXRhIHx8IHt9O1xuICB2YXIgcHJvcHMgPSB2bS5fcHJvcHMgPSB7fTtcbiAgLy8gY2FjaGUgcHJvcCBrZXlzIHNvIHRoYXQgZnV0dXJlIHByb3BzIHVwZGF0ZXMgY2FuIGl0ZXJhdGUgdXNpbmcgQXJyYXlcbiAgLy8gaW5zdGVhZCBvZiBkeW5hbWljIG9iamVjdCBrZXkgZW51bWVyYXRpb24uXG4gIHZhciBrZXlzID0gdm0uJG9wdGlvbnMuX3Byb3BLZXlzID0gW107XG4gIHZhciBpc1Jvb3QgPSAhdm0uJHBhcmVudDtcbiAgLy8gcm9vdCBpbnN0YW5jZSBwcm9wcyBzaG91bGQgYmUgY29udmVydGVkXG4gIGlmICghaXNSb290KSB7XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTtcbiAgfVxuICB2YXIgbG9vcCA9IGZ1bmN0aW9uICgga2V5ICkge1xuICAgIGtleXMucHVzaChrZXkpO1xuICAgIHZhciB2YWx1ZSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BzT3B0aW9ucywgcHJvcHNEYXRhLCB2bSk7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICB7XG4gICAgICB2YXIgaHlwaGVuYXRlZEtleSA9IGh5cGhlbmF0ZShrZXkpO1xuICAgICAgaWYgKGlzUmVzZXJ2ZWRBdHRyaWJ1dGUoaHlwaGVuYXRlZEtleSkgfHxcbiAgICAgICAgICBjb25maWcuaXNSZXNlcnZlZEF0dHIoaHlwaGVuYXRlZEtleSkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAoXCJcXFwiXCIgKyBoeXBoZW5hdGVkS2V5ICsgXCJcXFwiIGlzIGEgcmVzZXJ2ZWQgYXR0cmlidXRlIGFuZCBjYW5ub3QgYmUgdXNlZCBhcyBjb21wb25lbnQgcHJvcC5cIiksXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGRlZmluZVJlYWN0aXZlKHByb3BzLCBrZXksIHZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS4kcGFyZW50ICYmICFpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQpIHtcbiAgICAgICAgICB3YXJuKFxuICAgICAgICAgICAgXCJBdm9pZCBtdXRhdGluZyBhIHByb3AgZGlyZWN0bHkgc2luY2UgdGhlIHZhbHVlIHdpbGwgYmUgXCIgK1xuICAgICAgICAgICAgXCJvdmVyd3JpdHRlbiB3aGVuZXZlciB0aGUgcGFyZW50IGNvbXBvbmVudCByZS1yZW5kZXJzLiBcIiArXG4gICAgICAgICAgICBcIkluc3RlYWQsIHVzZSBhIGRhdGEgb3IgY29tcHV0ZWQgcHJvcGVydHkgYmFzZWQgb24gdGhlIHByb3AncyBcIiArXG4gICAgICAgICAgICBcInZhbHVlLiBQcm9wIGJlaW5nIG11dGF0ZWQ6IFxcXCJcIiArIGtleSArIFwiXFxcIlwiLFxuICAgICAgICAgICAgdm1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gc3RhdGljIHByb3BzIGFyZSBhbHJlYWR5IHByb3hpZWQgb24gdGhlIGNvbXBvbmVudCdzIHByb3RvdHlwZVxuICAgIC8vIGR1cmluZyBWdWUuZXh0ZW5kKCkuIFdlIG9ubHkgbmVlZCB0byBwcm94eSBwcm9wcyBkZWZpbmVkIGF0XG4gICAgLy8gaW5zdGFudGlhdGlvbiBoZXJlLlxuICAgIGlmICghKGtleSBpbiB2bSkpIHtcbiAgICAgIHByb3h5KHZtLCBcIl9wcm9wc1wiLCBrZXkpO1xuICAgIH1cbiAgfTtcblxuICBmb3IgKHZhciBrZXkgaW4gcHJvcHNPcHRpb25zKSBsb29wKCBrZXkgKTtcbiAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpO1xufVxuXG5mdW5jdGlvbiBpbml0RGF0YSAodm0pIHtcbiAgdmFyIGRhdGEgPSB2bS4kb3B0aW9ucy5kYXRhO1xuICBkYXRhID0gdm0uX2RhdGEgPSB0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gZ2V0RGF0YShkYXRhLCB2bSlcbiAgICA6IGRhdGEgfHwge307XG4gIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgIGRhdGEgPSB7fTtcbiAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0OlxcbicgK1xuICAgICAgJ2h0dHBzOi8vdnVlanMub3JnL3YyL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNkYXRhLU11c3QtQmUtYS1GdW5jdGlvbicsXG4gICAgICB2bVxuICAgICk7XG4gIH1cbiAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICB2YXIgcHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wcztcbiAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAge1xuICAgICAgaWYgKG1ldGhvZHMgJiYgaGFzT3duKG1ldGhvZHMsIGtleSkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAoXCJNZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCBhcyBhIGRhdGEgcHJvcGVydHkuXCIpLFxuICAgICAgICAgIHZtXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9wcyAmJiBoYXNPd24ocHJvcHMsIGtleSkpIHtcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgIFwiVGhlIGRhdGEgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIGFscmVhZHkgZGVjbGFyZWQgYXMgYSBwcm9wLiBcIiArXG4gICAgICAgIFwiVXNlIHByb3AgZGVmYXVsdCB2YWx1ZSBpbnN0ZWFkLlwiLFxuICAgICAgICB2bVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgIHByb3h5KHZtLCBcIl9kYXRhXCIsIGtleSk7XG4gICAgfVxuICB9XG4gIC8vIG9ic2VydmUgZGF0YVxuICBvYnNlcnZlKGRhdGEsIHRydWUgLyogYXNSb290RGF0YSAqLyk7XG59XG5cbmZ1bmN0aW9uIGdldERhdGEgKGRhdGEsIHZtKSB7XG4gIC8vICM3NTczIGRpc2FibGUgZGVwIGNvbGxlY3Rpb24gd2hlbiBpbnZva2luZyBkYXRhIGdldHRlcnNcbiAgcHVzaFRhcmdldCgpO1xuICB0cnkge1xuICAgIHJldHVybiBkYXRhLmNhbGwodm0sIHZtKVxuICB9IGNhdGNoIChlKSB7XG4gICAgaGFuZGxlRXJyb3IoZSwgdm0sIFwiZGF0YSgpXCIpO1xuICAgIHJldHVybiB7fVxuICB9IGZpbmFsbHkge1xuICAgIHBvcFRhcmdldCgpO1xuICB9XG59XG5cbnZhciBjb21wdXRlZFdhdGNoZXJPcHRpb25zID0geyBsYXp5OiB0cnVlIH07XG5cbmZ1bmN0aW9uIGluaXRDb21wdXRlZCAodm0sIGNvbXB1dGVkKSB7XG4gIC8vICRmbG93LWRpc2FibGUtbGluZVxuICB2YXIgd2F0Y2hlcnMgPSB2bS5fY29tcHV0ZWRXYXRjaGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIC8vIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIGp1c3QgZ2V0dGVycyBkdXJpbmcgU1NSXG4gIHZhciBpc1NTUiA9IGlzU2VydmVyUmVuZGVyaW5nKCk7XG5cbiAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG4gICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuICAgIHZhciBnZXR0ZXIgPSB0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJyA/IHVzZXJEZWYgOiB1c2VyRGVmLmdldDtcbiAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0dGVyID09IG51bGwpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIChcIkdldHRlciBpcyBtaXNzaW5nIGZvciBjb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIuXCIpLFxuICAgICAgICB2bVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzU1NSKSB7XG4gICAgICAvLyBjcmVhdGUgaW50ZXJuYWwgd2F0Y2hlciBmb3IgdGhlIGNvbXB1dGVkIHByb3BlcnR5LlxuICAgICAgd2F0Y2hlcnNba2V5XSA9IG5ldyBXYXRjaGVyKFxuICAgICAgICB2bSxcbiAgICAgICAgZ2V0dGVyIHx8IG5vb3AsXG4gICAgICAgIG5vb3AsXG4gICAgICAgIGNvbXB1dGVkV2F0Y2hlck9wdGlvbnNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gY29tcG9uZW50LWRlZmluZWQgY29tcHV0ZWQgcHJvcGVydGllcyBhcmUgYWxyZWFkeSBkZWZpbmVkIG9uIHRoZVxuICAgIC8vIGNvbXBvbmVudCBwcm90b3R5cGUuIFdlIG9ubHkgbmVlZCB0byBkZWZpbmUgY29tcHV0ZWQgcHJvcGVydGllcyBkZWZpbmVkXG4gICAgLy8gYXQgaW5zdGFudGlhdGlvbiBoZXJlLlxuICAgIGlmICghKGtleSBpbiB2bSkpIHtcbiAgICAgIGRlZmluZUNvbXB1dGVkKHZtLCBrZXksIHVzZXJEZWYpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoa2V5IGluIHZtLiRkYXRhKSB7XG4gICAgICAgIHdhcm4oKFwiVGhlIGNvbXB1dGVkIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gZGF0YS5cIiksIHZtKTtcbiAgICAgIH0gZWxzZSBpZiAodm0uJG9wdGlvbnMucHJvcHMgJiYga2V5IGluIHZtLiRvcHRpb25zLnByb3BzKSB7XG4gICAgICAgIHdhcm4oKFwiVGhlIGNvbXB1dGVkIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIiBpcyBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wLlwiKSwgdm0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkZWZpbmVDb21wdXRlZCAoXG4gIHRhcmdldCxcbiAga2V5LFxuICB1c2VyRGVmXG4pIHtcbiAgdmFyIHNob3VsZENhY2hlID0gIWlzU2VydmVyUmVuZGVyaW5nKCk7XG4gIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSBzaG91bGRDYWNoZVxuICAgICAgPyBjcmVhdGVDb21wdXRlZEdldHRlcihrZXkpXG4gICAgICA6IHVzZXJEZWY7XG4gICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IG5vb3A7XG4gIH0gZWxzZSB7XG4gICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IHVzZXJEZWYuZ2V0XG4gICAgICA/IHNob3VsZENhY2hlICYmIHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlXG4gICAgICAgID8gY3JlYXRlQ29tcHV0ZWRHZXR0ZXIoa2V5KVxuICAgICAgICA6IHVzZXJEZWYuZ2V0XG4gICAgICA6IG5vb3A7XG4gICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IHVzZXJEZWYuc2V0XG4gICAgICA/IHVzZXJEZWYuc2V0XG4gICAgICA6IG5vb3A7XG4gIH1cbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID09PSBub29wKSB7XG4gICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIChcIkNvbXB1dGVkIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIiB3YXMgYXNzaWduZWQgdG8gYnV0IGl0IGhhcyBubyBzZXR0ZXIuXCIpLFxuICAgICAgICB0aGlzXG4gICAgICApO1xuICAgIH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wdXRlZEdldHRlciAoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlciAoKSB7XG4gICAgdmFyIHdhdGNoZXIgPSB0aGlzLl9jb21wdXRlZFdhdGNoZXJzICYmIHRoaXMuX2NvbXB1dGVkV2F0Y2hlcnNba2V5XTtcbiAgICBpZiAod2F0Y2hlcikge1xuICAgICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcbiAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuICAgICAgfVxuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3YXRjaGVyLnZhbHVlXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRNZXRob2RzICh2bSwgbWV0aG9kcykge1xuICB2YXIgcHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wcztcbiAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcbiAgICB7XG4gICAgICBpZiAobWV0aG9kc1trZXldID09IG51bGwpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaGFzIGFuIHVuZGVmaW5lZCB2YWx1ZSBpbiB0aGUgY29tcG9uZW50IGRlZmluaXRpb24uIFwiICtcbiAgICAgICAgICBcIkRpZCB5b3UgcmVmZXJlbmNlIHRoZSBmdW5jdGlvbiBjb3JyZWN0bHk/XCIsXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wcyAmJiBoYXNPd24ocHJvcHMsIGtleSkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAoXCJNZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCBhcyBhIHByb3AuXCIpLFxuICAgICAgICAgIHZtXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoKGtleSBpbiB2bSkgJiYgaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgXCJNZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGNvbmZsaWN0cyB3aXRoIGFuIGV4aXN0aW5nIFZ1ZSBpbnN0YW5jZSBtZXRob2QuIFwiICtcbiAgICAgICAgICBcIkF2b2lkIGRlZmluaW5nIGNvbXBvbmVudCBtZXRob2RzIHRoYXQgc3RhcnQgd2l0aCBfIG9yICQuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdm1ba2V5XSA9IG1ldGhvZHNba2V5XSA9PSBudWxsID8gbm9vcCA6IGJpbmQobWV0aG9kc1trZXldLCB2bSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdFdhdGNoICh2bSwgd2F0Y2gpIHtcbiAgZm9yICh2YXIga2V5IGluIHdhdGNoKSB7XG4gICAgdmFyIGhhbmRsZXIgPSB3YXRjaFtrZXldO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGhhbmRsZXIpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY3JlYXRlV2F0Y2hlcih2bSwga2V5LCBoYW5kbGVyW2ldKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY3JlYXRlV2F0Y2hlcih2bSwga2V5LCBoYW5kbGVyKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlV2F0Y2hlciAoXG4gIHZtLFxuICBleHBPckZuLFxuICBoYW5kbGVyLFxuICBvcHRpb25zXG4pIHtcbiAgaWYgKGlzUGxhaW5PYmplY3QoaGFuZGxlcikpIHtcbiAgICBvcHRpb25zID0gaGFuZGxlcjtcbiAgICBoYW5kbGVyID0gaGFuZGxlci5oYW5kbGVyO1xuICB9XG4gIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ3N0cmluZycpIHtcbiAgICBoYW5kbGVyID0gdm1baGFuZGxlcl07XG4gIH1cbiAgcmV0dXJuIHZtLiR3YXRjaChleHBPckZuLCBoYW5kbGVyLCBvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcbiAgLy8gZmxvdyBzb21laG93IGhhcyBwcm9ibGVtcyB3aXRoIGRpcmVjdGx5IGRlY2xhcmVkIGRlZmluaXRpb24gb2JqZWN0XG4gIC8vIHdoZW4gdXNpbmcgT2JqZWN0LmRlZmluZVByb3BlcnR5LCBzbyB3ZSBoYXZlIHRvIHByb2NlZHVyYWxseSBidWlsZCB1cFxuICAvLyB0aGUgb2JqZWN0IGhlcmUuXG4gIHZhciBkYXRhRGVmID0ge307XG4gIGRhdGFEZWYuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fZGF0YSB9O1xuICB2YXIgcHJvcHNEZWYgPSB7fTtcbiAgcHJvcHNEZWYuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fcHJvcHMgfTtcbiAge1xuICAgIGRhdGFEZWYuc2V0ID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgICdBdm9pZCByZXBsYWNpbmcgaW5zdGFuY2Ugcm9vdCAkZGF0YS4gJyArXG4gICAgICAgICdVc2UgbmVzdGVkIGRhdGEgcHJvcGVydGllcyBpbnN0ZWFkLicsXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgfTtcbiAgICBwcm9wc0RlZi5zZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB3YXJuKFwiJHByb3BzIGlzIHJlYWRvbmx5LlwiLCB0aGlzKTtcbiAgICB9O1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCBkYXRhRGVmKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckcHJvcHMnLCBwcm9wc0RlZik7XG5cbiAgVnVlLnByb3RvdHlwZS4kc2V0ID0gc2V0O1xuICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBkZWw7XG5cbiAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoXG4gICAgZXhwT3JGbixcbiAgICBjYixcbiAgICBvcHRpb25zXG4gICkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKGlzUGxhaW5PYmplY3QoY2IpKSB7XG4gICAgICByZXR1cm4gY3JlYXRlV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpXG4gICAgfVxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMudXNlciA9IHRydWU7XG4gICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zLmltbWVkaWF0ZSkge1xuICAgICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4gKCkge1xuICAgICAgd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH1cbiAgfTtcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGluaXRQcm92aWRlICh2bSkge1xuICB2YXIgcHJvdmlkZSA9IHZtLiRvcHRpb25zLnByb3ZpZGU7XG4gIGlmIChwcm92aWRlKSB7XG4gICAgdm0uX3Byb3ZpZGVkID0gdHlwZW9mIHByb3ZpZGUgPT09ICdmdW5jdGlvbidcbiAgICAgID8gcHJvdmlkZS5jYWxsKHZtKVxuICAgICAgOiBwcm92aWRlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRJbmplY3Rpb25zICh2bSkge1xuICB2YXIgcmVzdWx0ID0gcmVzb2x2ZUluamVjdCh2bS4kb3B0aW9ucy5pbmplY3QsIHZtKTtcbiAgaWYgKHJlc3VsdCkge1xuICAgIHRvZ2dsZU9ic2VydmluZyhmYWxzZSk7XG4gICAgT2JqZWN0LmtleXMocmVzdWx0KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKHZtLCBrZXksIHJlc3VsdFtrZXldLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2FybihcbiAgICAgICAgICAgIFwiQXZvaWQgbXV0YXRpbmcgYW4gaW5qZWN0ZWQgdmFsdWUgZGlyZWN0bHkgc2luY2UgdGhlIGNoYW5nZXMgd2lsbCBiZSBcIiArXG4gICAgICAgICAgICBcIm92ZXJ3cml0dGVuIHdoZW5ldmVyIHRoZSBwcm92aWRlZCBjb21wb25lbnQgcmUtcmVuZGVycy4gXCIgK1xuICAgICAgICAgICAgXCJpbmplY3Rpb24gYmVpbmcgbXV0YXRlZDogXFxcIlwiICsga2V5ICsgXCJcXFwiXCIsXG4gICAgICAgICAgICB2bVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXNvbHZlSW5qZWN0IChpbmplY3QsIHZtKSB7XG4gIGlmIChpbmplY3QpIHtcbiAgICAvLyBpbmplY3QgaXMgOmFueSBiZWNhdXNlIGZsb3cgaXMgbm90IHNtYXJ0IGVub3VnaCB0byBmaWd1cmUgb3V0IGNhY2hlZFxuICAgIHZhciByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhciBrZXlzID0gaGFzU3ltYm9sXG4gICAgICA/IFJlZmxlY3Qub3duS2V5cyhpbmplY3QpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGluamVjdCwga2V5KS5lbnVtZXJhYmxlXG4gICAgICB9KVxuICAgICAgOiBPYmplY3Qua2V5cyhpbmplY3QpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIHZhciBwcm92aWRlS2V5ID0gaW5qZWN0W2tleV0uZnJvbTtcbiAgICAgIHZhciBzb3VyY2UgPSB2bTtcbiAgICAgIHdoaWxlIChzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5fcHJvdmlkZWQgJiYgaGFzT3duKHNvdXJjZS5fcHJvdmlkZWQsIHByb3ZpZGVLZXkpKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2UuX3Byb3ZpZGVkW3Byb3ZpZGVLZXldO1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgc291cmNlID0gc291cmNlLiRwYXJlbnQ7XG4gICAgICB9XG4gICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICBpZiAoJ2RlZmF1bHQnIGluIGluamVjdFtrZXldKSB7XG4gICAgICAgICAgdmFyIHByb3ZpZGVEZWZhdWx0ID0gaW5qZWN0W2tleV0uZGVmYXVsdDtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHR5cGVvZiBwcm92aWRlRGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgPyBwcm92aWRlRGVmYXVsdC5jYWxsKHZtKVxuICAgICAgICAgICAgOiBwcm92aWRlRGVmYXVsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3YXJuKChcIkluamVjdGlvbiBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgbm90IGZvdW5kXCIpLCB2bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG59XG5cbi8qICAqL1xuXG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgdi1mb3IgbGlzdHMuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckxpc3QgKFxuICB2YWwsXG4gIHJlbmRlclxuKSB7XG4gIHZhciByZXQsIGksIGwsIGtleXMsIGtleTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSB8fCB0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHJldCA9IG5ldyBBcnJheSh2YWwubGVuZ3RoKTtcbiAgICBmb3IgKGkgPSAwLCBsID0gdmFsLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgcmV0W2ldID0gcmVuZGVyKHZhbFtpXSwgaSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgcmV0ID0gbmV3IEFycmF5KHZhbCk7XG4gICAgZm9yIChpID0gMDsgaSA8IHZhbDsgaSsrKSB7XG4gICAgICByZXRbaV0gPSByZW5kZXIoaSArIDEsIGkpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWwpKSB7XG4gICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG4gICAgcmV0ID0gbmV3IEFycmF5KGtleXMubGVuZ3RoKTtcbiAgICBmb3IgKGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICByZXRbaV0gPSByZW5kZXIodmFsW2tleV0sIGtleSwgaSk7XG4gICAgfVxuICB9XG4gIGlmIChpc0RlZihyZXQpKSB7XG4gICAgKHJldCkuX2lzVkxpc3QgPSB0cnVlO1xuICB9XG4gIHJldHVybiByZXRcbn1cblxuLyogICovXG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyA8c2xvdD5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyU2xvdCAoXG4gIG5hbWUsXG4gIGZhbGxiYWNrLFxuICBwcm9wcyxcbiAgYmluZE9iamVjdFxuKSB7XG4gIHZhciBzY29wZWRTbG90Rm4gPSB0aGlzLiRzY29wZWRTbG90c1tuYW1lXTtcbiAgdmFyIG5vZGVzO1xuICBpZiAoc2NvcGVkU2xvdEZuKSB7IC8vIHNjb3BlZCBzbG90XG4gICAgcHJvcHMgPSBwcm9wcyB8fCB7fTtcbiAgICBpZiAoYmluZE9iamVjdCkge1xuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc09iamVjdChiaW5kT2JqZWN0KSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgICdzbG90IHYtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0JyxcbiAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBwcm9wcyA9IGV4dGVuZChleHRlbmQoe30sIGJpbmRPYmplY3QpLCBwcm9wcyk7XG4gICAgfVxuICAgIG5vZGVzID0gc2NvcGVkU2xvdEZuKHByb3BzKSB8fCBmYWxsYmFjaztcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xvdE5vZGVzID0gdGhpcy4kc2xvdHNbbmFtZV07XG4gICAgLy8gd2FybiBkdXBsaWNhdGUgc2xvdCB1c2FnZVxuICAgIGlmIChzbG90Tm9kZXMpIHtcbiAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBzbG90Tm9kZXMuX3JlbmRlcmVkKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgXCJEdXBsaWNhdGUgcHJlc2VuY2Ugb2Ygc2xvdCBcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGZvdW5kIGluIHRoZSBzYW1lIHJlbmRlciB0cmVlIFwiICtcbiAgICAgICAgICBcIi0gdGhpcyB3aWxsIGxpa2VseSBjYXVzZSByZW5kZXIgZXJyb3JzLlwiLFxuICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHNsb3ROb2Rlcy5fcmVuZGVyZWQgPSB0cnVlO1xuICAgIH1cbiAgICBub2RlcyA9IHNsb3ROb2RlcyB8fCBmYWxsYmFjaztcbiAgfVxuXG4gIHZhciB0YXJnZXQgPSBwcm9wcyAmJiBwcm9wcy5zbG90O1xuICBpZiAodGFyZ2V0KSB7XG4gICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJywgeyBzbG90OiB0YXJnZXQgfSwgbm9kZXMpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5vZGVzXG4gIH1cbn1cblxuLyogICovXG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIHJlc29sdmluZyBmaWx0ZXJzXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVGaWx0ZXIgKGlkKSB7XG4gIHJldHVybiByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBpZCwgdHJ1ZSkgfHwgaWRlbnRpdHlcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGlzS2V5Tm90TWF0Y2ggKGV4cGVjdCwgYWN0dWFsKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGV4cGVjdCkpIHtcbiAgICByZXR1cm4gZXhwZWN0LmluZGV4T2YoYWN0dWFsKSA9PT0gLTFcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZXhwZWN0ICE9PSBhY3R1YWxcbiAgfVxufVxuXG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciBjaGVja2luZyBrZXlDb2RlcyBmcm9tIGNvbmZpZy5cbiAqIGV4cG9zZWQgYXMgVnVlLnByb3RvdHlwZS5fa1xuICogcGFzc2luZyBpbiBldmVudEtleU5hbWUgYXMgbGFzdCBhcmd1bWVudCBzZXBhcmF0ZWx5IGZvciBiYWNrd2FyZHMgY29tcGF0XG4gKi9cbmZ1bmN0aW9uIGNoZWNrS2V5Q29kZXMgKFxuICBldmVudEtleUNvZGUsXG4gIGtleSxcbiAgYnVpbHRJbktleUNvZGUsXG4gIGV2ZW50S2V5TmFtZSxcbiAgYnVpbHRJbktleU5hbWVcbikge1xuICB2YXIgbWFwcGVkS2V5Q29kZSA9IGNvbmZpZy5rZXlDb2Rlc1trZXldIHx8IGJ1aWx0SW5LZXlDb2RlO1xuICBpZiAoYnVpbHRJbktleU5hbWUgJiYgZXZlbnRLZXlOYW1lICYmICFjb25maWcua2V5Q29kZXNba2V5XSkge1xuICAgIHJldHVybiBpc0tleU5vdE1hdGNoKGJ1aWx0SW5LZXlOYW1lLCBldmVudEtleU5hbWUpXG4gIH0gZWxzZSBpZiAobWFwcGVkS2V5Q29kZSkge1xuICAgIHJldHVybiBpc0tleU5vdE1hdGNoKG1hcHBlZEtleUNvZGUsIGV2ZW50S2V5Q29kZSlcbiAgfSBlbHNlIGlmIChldmVudEtleU5hbWUpIHtcbiAgICByZXR1cm4gaHlwaGVuYXRlKGV2ZW50S2V5TmFtZSkgIT09IGtleVxuICB9XG59XG5cbi8qICAqL1xuXG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciBtZXJnaW5nIHYtYmluZD1cIm9iamVjdFwiIGludG8gYSBWTm9kZSdzIGRhdGEuXG4gKi9cbmZ1bmN0aW9uIGJpbmRPYmplY3RQcm9wcyAoXG4gIGRhdGEsXG4gIHRhZyxcbiAgdmFsdWUsXG4gIGFzUHJvcCxcbiAgaXNTeW5jXG4pIHtcbiAgaWYgKHZhbHVlKSB7XG4gICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgICd2LWJpbmQgd2l0aG91dCBhcmd1bWVudCBleHBlY3RzIGFuIE9iamVjdCBvciBBcnJheSB2YWx1ZScsXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHRvT2JqZWN0KHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHZhciBoYXNoO1xuICAgICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGtleSApIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGtleSA9PT0gJ2NsYXNzJyB8fFxuICAgICAgICAgIGtleSA9PT0gJ3N0eWxlJyB8fFxuICAgICAgICAgIGlzUmVzZXJ2ZWRBdHRyaWJ1dGUoa2V5KVxuICAgICAgICApIHtcbiAgICAgICAgICBoYXNoID0gZGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgdHlwZSA9IGRhdGEuYXR0cnMgJiYgZGF0YS5hdHRycy50eXBlO1xuICAgICAgICAgIGhhc2ggPSBhc1Byb3AgfHwgY29uZmlnLm11c3RVc2VQcm9wKHRhZywgdHlwZSwga2V5KVxuICAgICAgICAgICAgPyBkYXRhLmRvbVByb3BzIHx8IChkYXRhLmRvbVByb3BzID0ge30pXG4gICAgICAgICAgICA6IGRhdGEuYXR0cnMgfHwgKGRhdGEuYXR0cnMgPSB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoa2V5IGluIGhhc2gpKSB7XG4gICAgICAgICAgaGFzaFtrZXldID0gdmFsdWVba2V5XTtcblxuICAgICAgICAgIGlmIChpc1N5bmMpIHtcbiAgICAgICAgICAgIHZhciBvbiA9IGRhdGEub24gfHwgKGRhdGEub24gPSB7fSk7XG4gICAgICAgICAgICBvblsoXCJ1cGRhdGU6XCIgKyBrZXkpXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICAgICAgdmFsdWVba2V5XSA9ICRldmVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIGxvb3AoIGtleSApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGF0YVxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIHN0YXRpYyB0cmVlcy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyU3RhdGljIChcbiAgaW5kZXgsXG4gIGlzSW5Gb3Jcbikge1xuICB2YXIgY2FjaGVkID0gdGhpcy5fc3RhdGljVHJlZXMgfHwgKHRoaXMuX3N0YXRpY1RyZWVzID0gW10pO1xuICB2YXIgdHJlZSA9IGNhY2hlZFtpbmRleF07XG4gIC8vIGlmIGhhcyBhbHJlYWR5LXJlbmRlcmVkIHN0YXRpYyB0cmVlIGFuZCBub3QgaW5zaWRlIHYtZm9yLFxuICAvLyB3ZSBjYW4gcmV1c2UgdGhlIHNhbWUgdHJlZS5cbiAgaWYgKHRyZWUgJiYgIWlzSW5Gb3IpIHtcbiAgICByZXR1cm4gdHJlZVxuICB9XG4gIC8vIG90aGVyd2lzZSwgcmVuZGVyIGEgZnJlc2ggdHJlZS5cbiAgdHJlZSA9IGNhY2hlZFtpbmRleF0gPSB0aGlzLiRvcHRpb25zLnN0YXRpY1JlbmRlckZuc1tpbmRleF0uY2FsbChcbiAgICB0aGlzLl9yZW5kZXJQcm94eSxcbiAgICBudWxsLFxuICAgIHRoaXMgLy8gZm9yIHJlbmRlciBmbnMgZ2VuZXJhdGVkIGZvciBmdW5jdGlvbmFsIGNvbXBvbmVudCB0ZW1wbGF0ZXNcbiAgKTtcbiAgbWFya1N0YXRpYyh0cmVlLCAoXCJfX3N0YXRpY19fXCIgKyBpbmRleCksIGZhbHNlKTtcbiAgcmV0dXJuIHRyZWVcbn1cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3Igdi1vbmNlLlxuICogRWZmZWN0aXZlbHkgaXQgbWVhbnMgbWFya2luZyB0aGUgbm9kZSBhcyBzdGF0aWMgd2l0aCBhIHVuaXF1ZSBrZXkuXG4gKi9cbmZ1bmN0aW9uIG1hcmtPbmNlIChcbiAgdHJlZSxcbiAgaW5kZXgsXG4gIGtleVxuKSB7XG4gIG1hcmtTdGF0aWModHJlZSwgKFwiX19vbmNlX19cIiArIGluZGV4ICsgKGtleSA/IChcIl9cIiArIGtleSkgOiBcIlwiKSksIHRydWUpO1xuICByZXR1cm4gdHJlZVxufVxuXG5mdW5jdGlvbiBtYXJrU3RhdGljIChcbiAgdHJlZSxcbiAga2V5LFxuICBpc09uY2Vcbikge1xuICBpZiAoQXJyYXkuaXNBcnJheSh0cmVlKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRyZWVbaV0gJiYgdHlwZW9mIHRyZWVbaV0gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG1hcmtTdGF0aWNOb2RlKHRyZWVbaV0sIChrZXkgKyBcIl9cIiArIGkpLCBpc09uY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBtYXJrU3RhdGljTm9kZSh0cmVlLCBrZXksIGlzT25jZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFya1N0YXRpY05vZGUgKG5vZGUsIGtleSwgaXNPbmNlKSB7XG4gIG5vZGUuaXNTdGF0aWMgPSB0cnVlO1xuICBub2RlLmtleSA9IGtleTtcbiAgbm9kZS5pc09uY2UgPSBpc09uY2U7XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBiaW5kT2JqZWN0TGlzdGVuZXJzIChkYXRhLCB2YWx1ZSkge1xuICBpZiAodmFsdWUpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgICAndi1vbiB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IHZhbHVlJyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG9uID0gZGF0YS5vbiA9IGRhdGEub24gPyBleHRlbmQoe30sIGRhdGEub24pIDoge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gb25ba2V5XTtcbiAgICAgICAgdmFyIG91cnMgPSB2YWx1ZVtrZXldO1xuICAgICAgICBvbltrZXldID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIG91cnMpIDogb3VycztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRhdGFcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGluc3RhbGxSZW5kZXJIZWxwZXJzICh0YXJnZXQpIHtcbiAgdGFyZ2V0Ll9vID0gbWFya09uY2U7XG4gIHRhcmdldC5fbiA9IHRvTnVtYmVyO1xuICB0YXJnZXQuX3MgPSB0b1N0cmluZztcbiAgdGFyZ2V0Ll9sID0gcmVuZGVyTGlzdDtcbiAgdGFyZ2V0Ll90ID0gcmVuZGVyU2xvdDtcbiAgdGFyZ2V0Ll9xID0gbG9vc2VFcXVhbDtcbiAgdGFyZ2V0Ll9pID0gbG9vc2VJbmRleE9mO1xuICB0YXJnZXQuX20gPSByZW5kZXJTdGF0aWM7XG4gIHRhcmdldC5fZiA9IHJlc29sdmVGaWx0ZXI7XG4gIHRhcmdldC5fayA9IGNoZWNrS2V5Q29kZXM7XG4gIHRhcmdldC5fYiA9IGJpbmRPYmplY3RQcm9wcztcbiAgdGFyZ2V0Ll92ID0gY3JlYXRlVGV4dFZOb2RlO1xuICB0YXJnZXQuX2UgPSBjcmVhdGVFbXB0eVZOb2RlO1xuICB0YXJnZXQuX3UgPSByZXNvbHZlU2NvcGVkU2xvdHM7XG4gIHRhcmdldC5fZyA9IGJpbmRPYmplY3RMaXN0ZW5lcnM7XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCAoXG4gIGRhdGEsXG4gIHByb3BzLFxuICBjaGlsZHJlbixcbiAgcGFyZW50LFxuICBDdG9yXG4pIHtcbiAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5saXN0ZW5lcnMgPSBkYXRhLm9uIHx8IGVtcHR5T2JqZWN0O1xuICB0aGlzLmluamVjdGlvbnMgPSByZXNvbHZlSW5qZWN0KG9wdGlvbnMuaW5qZWN0LCBwYXJlbnQpO1xuICB0aGlzLnNsb3RzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZVNsb3RzKGNoaWxkcmVuLCBwYXJlbnQpOyB9O1xuXG4gIC8vIGVuc3VyZSB0aGUgY3JlYXRlRWxlbWVudCBmdW5jdGlvbiBpbiBmdW5jdGlvbmFsIGNvbXBvbmVudHNcbiAgLy8gZ2V0cyBhIHVuaXF1ZSBjb250ZXh0IC0gdGhpcyBpcyBuZWNlc3NhcnkgZm9yIGNvcnJlY3QgbmFtZWQgc2xvdCBjaGVja1xuICB2YXIgY29udGV4dFZtID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQpO1xuICB2YXIgaXNDb21waWxlZCA9IGlzVHJ1ZShvcHRpb25zLl9jb21waWxlZCk7XG4gIHZhciBuZWVkTm9ybWFsaXphdGlvbiA9ICFpc0NvbXBpbGVkO1xuXG4gIC8vIHN1cHBvcnQgZm9yIGNvbXBpbGVkIGZ1bmN0aW9uYWwgdGVtcGxhdGVcbiAgaWYgKGlzQ29tcGlsZWQpIHtcbiAgICAvLyBleHBvc2luZyAkb3B0aW9ucyBmb3IgcmVuZGVyU3RhdGljKClcbiAgICB0aGlzLiRvcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyBwcmUtcmVzb2x2ZSBzbG90cyBmb3IgcmVuZGVyU2xvdCgpXG4gICAgdGhpcy4kc2xvdHMgPSB0aGlzLnNsb3RzKCk7XG4gICAgdGhpcy4kc2NvcGVkU2xvdHMgPSBkYXRhLnNjb3BlZFNsb3RzIHx8IGVtcHR5T2JqZWN0O1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuX3Njb3BlSWQpIHtcbiAgICB0aGlzLl9jID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHtcbiAgICAgIHZhciB2bm9kZSA9IGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7XG4gICAgICBpZiAodm5vZGUgJiYgIUFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG4gICAgICAgIHZub2RlLmZuU2NvcGVJZCA9IG9wdGlvbnMuX3Njb3BlSWQ7XG4gICAgICAgIHZub2RlLmZuQ29udGV4dCA9IHBhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2bm9kZVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KGNvbnRleHRWbSwgYSwgYiwgYywgZCwgbmVlZE5vcm1hbGl6YXRpb24pOyB9O1xuICB9XG59XG5cbmluc3RhbGxSZW5kZXJIZWxwZXJzKEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0LnByb3RvdHlwZSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uYWxDb21wb25lbnQgKFxuICBDdG9yLFxuICBwcm9wc0RhdGEsXG4gIGRhdGEsXG4gIGNvbnRleHRWbSxcbiAgY2hpbGRyZW5cbikge1xuICB2YXIgb3B0aW9ucyA9IEN0b3Iub3B0aW9ucztcbiAgdmFyIHByb3BzID0ge307XG4gIHZhciBwcm9wT3B0aW9ucyA9IG9wdGlvbnMucHJvcHM7XG4gIGlmIChpc0RlZihwcm9wT3B0aW9ucykpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHtcbiAgICAgIHByb3BzW2tleV0gPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wT3B0aW9ucywgcHJvcHNEYXRhIHx8IGVtcHR5T2JqZWN0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGlzRGVmKGRhdGEuYXR0cnMpKSB7IG1lcmdlUHJvcHMocHJvcHMsIGRhdGEuYXR0cnMpOyB9XG4gICAgaWYgKGlzRGVmKGRhdGEucHJvcHMpKSB7IG1lcmdlUHJvcHMocHJvcHMsIGRhdGEucHJvcHMpOyB9XG4gIH1cblxuICB2YXIgcmVuZGVyQ29udGV4dCA9IG5ldyBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dChcbiAgICBkYXRhLFxuICAgIHByb3BzLFxuICAgIGNoaWxkcmVuLFxuICAgIGNvbnRleHRWbSxcbiAgICBDdG9yXG4gICk7XG5cbiAgdmFyIHZub2RlID0gb3B0aW9ucy5yZW5kZXIuY2FsbChudWxsLCByZW5kZXJDb250ZXh0Ll9jLCByZW5kZXJDb250ZXh0KTtcblxuICBpZiAodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkge1xuICAgIHNldEZ1bmN0aW9uYWxDb250ZXh0Rm9yVk5vZGUodm5vZGUsIGRhdGEsIGNvbnRleHRWbSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHZub2RlXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2bm9kZSkpIHtcbiAgICB2YXIgdm5vZGVzID0gbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUpIHx8IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzZXRGdW5jdGlvbmFsQ29udGV4dEZvclZOb2RlKHZub2Rlc1tpXSwgZGF0YSwgY29udGV4dFZtLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2Rlc1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldEZ1bmN0aW9uYWxDb250ZXh0Rm9yVk5vZGUgKHZub2RlLCBkYXRhLCB2bSwgb3B0aW9ucykge1xuICB2bm9kZS5mbkNvbnRleHQgPSB2bTtcbiAgdm5vZGUuZm5PcHRpb25zID0gb3B0aW9ucztcbiAgaWYgKGRhdGEuc2xvdCkge1xuICAgICh2bm9kZS5kYXRhIHx8ICh2bm9kZS5kYXRhID0ge30pKS5zbG90ID0gZGF0YS5zbG90O1xuICB9XG59XG5cbmZ1bmN0aW9uIG1lcmdlUHJvcHMgKHRvLCBmcm9tKSB7XG4gIGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG4gICAgdG9bY2FtZWxpemUoa2V5KV0gPSBmcm9tW2tleV07XG4gIH1cbn1cblxuLyogICovXG5cblxuXG5cbi8vIFJlZ2lzdGVyIHRoZSBjb21wb25lbnQgaG9vayB0byB3ZWV4IG5hdGl2ZSByZW5kZXIgZW5naW5lLlxuLy8gVGhlIGhvb2sgd2lsbCBiZSB0cmlnZ2VyZWQgYnkgbmF0aXZlLCBub3QgamF2YXNjcmlwdC5cblxuXG4vLyBVcGRhdGVzIHRoZSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50IHRvIHdlZXggbmF0aXZlIHJlbmRlciBlbmdpbmUuXG5cbi8qICAqL1xuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vSGFua3MxMDEwMC93ZWV4LW5hdGl2ZS1kaXJlY3RpdmUvdHJlZS9tYXN0ZXIvY29tcG9uZW50XG5cbi8vIGxpc3RlbmluZyBvbiBuYXRpdmUgY2FsbGJhY2tcblxuLyogICovXG5cbi8qICAqL1xuXG4vLyBob29rcyB0byBiZSBpbnZva2VkIG9uIGNvbXBvbmVudCBWTm9kZXMgZHVyaW5nIHBhdGNoXG52YXIgY29tcG9uZW50Vk5vZGVIb29rcyA9IHtcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCAoXG4gICAgdm5vZGUsXG4gICAgaHlkcmF0aW5nLFxuICAgIHBhcmVudEVsbSxcbiAgICByZWZFbG1cbiAgKSB7XG4gICAgaWYgKFxuICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgJiZcbiAgICAgICF2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQgJiZcbiAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlXG4gICAgKSB7XG4gICAgICAvLyBrZXB0LWFsaXZlIGNvbXBvbmVudHMsIHRyZWF0IGFzIGEgcGF0Y2hcbiAgICAgIHZhciBtb3VudGVkTm9kZSA9IHZub2RlOyAvLyB3b3JrIGFyb3VuZCBmbG93XG4gICAgICBjb21wb25lbnRWTm9kZUhvb2tzLnByZXBhdGNoKG1vdW50ZWROb2RlLCBtb3VudGVkTm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjaGlsZCA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2VGb3JWbm9kZShcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIGFjdGl2ZUluc3RhbmNlLFxuICAgICAgICBwYXJlbnRFbG0sXG4gICAgICAgIHJlZkVsbVxuICAgICAgKTtcbiAgICAgIGNoaWxkLiRtb3VudChoeWRyYXRpbmcgPyB2bm9kZS5lbG0gOiB1bmRlZmluZWQsIGh5ZHJhdGluZyk7XG4gICAgfVxuICB9LFxuXG4gIHByZXBhdGNoOiBmdW5jdGlvbiBwcmVwYXRjaCAob2xkVm5vZGUsIHZub2RlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuICAgIHZhciBjaGlsZCA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gb2xkVm5vZGUuY29tcG9uZW50SW5zdGFuY2U7XG4gICAgdXBkYXRlQ2hpbGRDb21wb25lbnQoXG4gICAgICBjaGlsZCxcbiAgICAgIG9wdGlvbnMucHJvcHNEYXRhLCAvLyB1cGRhdGVkIHByb3BzXG4gICAgICBvcHRpb25zLmxpc3RlbmVycywgLy8gdXBkYXRlZCBsaXN0ZW5lcnNcbiAgICAgIHZub2RlLCAvLyBuZXcgcGFyZW50IHZub2RlXG4gICAgICBvcHRpb25zLmNoaWxkcmVuIC8vIG5ldyBjaGlsZHJlblxuICAgICk7XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQgKHZub2RlKSB7XG4gICAgdmFyIGNvbnRleHQgPSB2bm9kZS5jb250ZXh0O1xuICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuICAgIGlmICghY29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZCkge1xuICAgICAgY29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZCA9IHRydWU7XG4gICAgICBjYWxsSG9vayhjb21wb25lbnRJbnN0YW5jZSwgJ21vdW50ZWQnKTtcbiAgICB9XG4gICAgaWYgKHZub2RlLmRhdGEua2VlcEFsaXZlKSB7XG4gICAgICBpZiAoY29udGV4dC5faXNNb3VudGVkKSB7XG4gICAgICAgIC8vIHZ1ZS1yb3V0ZXIjMTIxMlxuICAgICAgICAvLyBEdXJpbmcgdXBkYXRlcywgYSBrZXB0LWFsaXZlIGNvbXBvbmVudCdzIGNoaWxkIGNvbXBvbmVudHMgbWF5XG4gICAgICAgIC8vIGNoYW5nZSwgc28gZGlyZWN0bHkgd2Fsa2luZyB0aGUgdHJlZSBoZXJlIG1heSBjYWxsIGFjdGl2YXRlZCBob29rc1xuICAgICAgICAvLyBvbiBpbmNvcnJlY3QgY2hpbGRyZW4uIEluc3RlYWQgd2UgcHVzaCB0aGVtIGludG8gYSBxdWV1ZSB3aGljaCB3aWxsXG4gICAgICAgIC8vIGJlIHByb2Nlc3NlZCBhZnRlciB0aGUgd2hvbGUgcGF0Y2ggcHJvY2VzcyBlbmRlZC5cbiAgICAgICAgcXVldWVBY3RpdmF0ZWRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgdHJ1ZSAvKiBkaXJlY3QgKi8pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95ICh2bm9kZSkge1xuICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuICAgIGlmICghY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkKSB7XG4gICAgICBpZiAoIXZub2RlLmRhdGEua2VlcEFsaXZlKSB7XG4gICAgICAgIGNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIHRydWUgLyogZGlyZWN0ICovKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbnZhciBob29rc1RvTWVyZ2UgPSBPYmplY3Qua2V5cyhjb21wb25lbnRWTm9kZUhvb2tzKTtcblxuZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50IChcbiAgQ3RvcixcbiAgZGF0YSxcbiAgY29udGV4dCxcbiAgY2hpbGRyZW4sXG4gIHRhZ1xuKSB7XG4gIGlmIChpc1VuZGVmKEN0b3IpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgYmFzZUN0b3IgPSBjb250ZXh0LiRvcHRpb25zLl9iYXNlO1xuXG4gIC8vIHBsYWluIG9wdGlvbnMgb2JqZWN0OiB0dXJuIGl0IGludG8gYSBjb25zdHJ1Y3RvclxuICBpZiAoaXNPYmplY3QoQ3RvcikpIHtcbiAgICBDdG9yID0gYmFzZUN0b3IuZXh0ZW5kKEN0b3IpO1xuICB9XG5cbiAgLy8gaWYgYXQgdGhpcyBzdGFnZSBpdCdzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIGFuIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5LFxuICAvLyByZWplY3QuXG4gIGlmICh0eXBlb2YgQ3RvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHtcbiAgICAgIHdhcm4oKFwiSW52YWxpZCBDb21wb25lbnQgZGVmaW5pdGlvbjogXCIgKyAoU3RyaW5nKEN0b3IpKSksIGNvbnRleHQpO1xuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIGFzeW5jIGNvbXBvbmVudFxuICB2YXIgYXN5bmNGYWN0b3J5O1xuICBpZiAoaXNVbmRlZihDdG9yLmNpZCkpIHtcbiAgICBhc3luY0ZhY3RvcnkgPSBDdG9yO1xuICAgIEN0b3IgPSByZXNvbHZlQXN5bmNDb21wb25lbnQoYXN5bmNGYWN0b3J5LCBiYXNlQ3RvciwgY29udGV4dCk7XG4gICAgaWYgKEN0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gcmV0dXJuIGEgcGxhY2Vob2xkZXIgbm9kZSBmb3IgYXN5bmMgY29tcG9uZW50LCB3aGljaCBpcyByZW5kZXJlZFxuICAgICAgLy8gYXMgYSBjb21tZW50IG5vZGUgYnV0IHByZXNlcnZlcyBhbGwgdGhlIHJhdyBpbmZvcm1hdGlvbiBmb3IgdGhlIG5vZGUuXG4gICAgICAvLyB0aGUgaW5mb3JtYXRpb24gd2lsbCBiZSB1c2VkIGZvciBhc3luYyBzZXJ2ZXItcmVuZGVyaW5nIGFuZCBoeWRyYXRpb24uXG4gICAgICByZXR1cm4gY3JlYXRlQXN5bmNQbGFjZWhvbGRlcihcbiAgICAgICAgYXN5bmNGYWN0b3J5LFxuICAgICAgICBkYXRhLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgdGFnXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgZGF0YSA9IGRhdGEgfHwge307XG5cbiAgLy8gcmVzb2x2ZSBjb25zdHJ1Y3RvciBvcHRpb25zIGluIGNhc2UgZ2xvYmFsIG1peGlucyBhcmUgYXBwbGllZCBhZnRlclxuICAvLyBjb21wb25lbnQgY29uc3RydWN0b3IgY3JlYXRpb25cbiAgcmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyhDdG9yKTtcblxuICAvLyB0cmFuc2Zvcm0gY29tcG9uZW50IHYtbW9kZWwgZGF0YSBpbnRvIHByb3BzICYgZXZlbnRzXG4gIGlmIChpc0RlZihkYXRhLm1vZGVsKSkge1xuICAgIHRyYW5zZm9ybU1vZGVsKEN0b3Iub3B0aW9ucywgZGF0YSk7XG4gIH1cblxuICAvLyBleHRyYWN0IHByb3BzXG4gIHZhciBwcm9wc0RhdGEgPSBleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhKGRhdGEsIEN0b3IsIHRhZyk7XG5cbiAgLy8gZnVuY3Rpb25hbCBjb21wb25lbnRcbiAgaWYgKGlzVHJ1ZShDdG9yLm9wdGlvbnMuZnVuY3Rpb25hbCkpIHtcbiAgICByZXR1cm4gY3JlYXRlRnVuY3Rpb25hbENvbXBvbmVudChDdG9yLCBwcm9wc0RhdGEsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuKVxuICB9XG5cbiAgLy8gZXh0cmFjdCBsaXN0ZW5lcnMsIHNpbmNlIHRoZXNlIG5lZWRzIHRvIGJlIHRyZWF0ZWQgYXNcbiAgLy8gY2hpbGQgY29tcG9uZW50IGxpc3RlbmVycyBpbnN0ZWFkIG9mIERPTSBsaXN0ZW5lcnNcbiAgdmFyIGxpc3RlbmVycyA9IGRhdGEub247XG4gIC8vIHJlcGxhY2Ugd2l0aCBsaXN0ZW5lcnMgd2l0aCAubmF0aXZlIG1vZGlmaWVyXG4gIC8vIHNvIGl0IGdldHMgcHJvY2Vzc2VkIGR1cmluZyBwYXJlbnQgY29tcG9uZW50IHBhdGNoLlxuICBkYXRhLm9uID0gZGF0YS5uYXRpdmVPbjtcblxuICBpZiAoaXNUcnVlKEN0b3Iub3B0aW9ucy5hYnN0cmFjdCkpIHtcbiAgICAvLyBhYnN0cmFjdCBjb21wb25lbnRzIGRvIG5vdCBrZWVwIGFueXRoaW5nXG4gICAgLy8gb3RoZXIgdGhhbiBwcm9wcyAmIGxpc3RlbmVycyAmIHNsb3RcblxuICAgIC8vIHdvcmsgYXJvdW5kIGZsb3dcbiAgICB2YXIgc2xvdCA9IGRhdGEuc2xvdDtcbiAgICBkYXRhID0ge307XG4gICAgaWYgKHNsb3QpIHtcbiAgICAgIGRhdGEuc2xvdCA9IHNsb3Q7XG4gICAgfVxuICB9XG5cbiAgLy8gbWVyZ2UgY29tcG9uZW50IG1hbmFnZW1lbnQgaG9va3Mgb250byB0aGUgcGxhY2Vob2xkZXIgbm9kZVxuICBtZXJnZUhvb2tzKGRhdGEpO1xuXG4gIC8vIHJldHVybiBhIHBsYWNlaG9sZGVyIHZub2RlXG4gIHZhciBuYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgdGFnO1xuICB2YXIgdm5vZGUgPSBuZXcgVk5vZGUoXG4gICAgKFwidnVlLWNvbXBvbmVudC1cIiArIChDdG9yLmNpZCkgKyAobmFtZSA/IChcIi1cIiArIG5hbWUpIDogJycpKSxcbiAgICBkYXRhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0LFxuICAgIHsgQ3RvcjogQ3RvciwgcHJvcHNEYXRhOiBwcm9wc0RhdGEsIGxpc3RlbmVyczogbGlzdGVuZXJzLCB0YWc6IHRhZywgY2hpbGRyZW46IGNoaWxkcmVuIH0sXG4gICAgYXN5bmNGYWN0b3J5XG4gICk7XG5cbiAgLy8gV2VleCBzcGVjaWZpYzogaW52b2tlIHJlY3ljbGUtbGlzdCBvcHRpbWl6ZWQgQHJlbmRlciBmdW5jdGlvbiBmb3JcbiAgLy8gZXh0cmFjdGluZyBjZWxsLXNsb3QgdGVtcGxhdGUuXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5rczEwMTAwL3dlZXgtbmF0aXZlLWRpcmVjdGl2ZS90cmVlL21hc3Rlci9jb21wb25lbnRcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIHJldHVybiB2bm9kZVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlIChcbiAgdm5vZGUsIC8vIHdlIGtub3cgaXQncyBNb3VudGVkQ29tcG9uZW50Vk5vZGUgYnV0IGZsb3cgZG9lc24ndFxuICBwYXJlbnQsIC8vIGFjdGl2ZUluc3RhbmNlIGluIGxpZmVjeWNsZSBzdGF0ZVxuICBwYXJlbnRFbG0sXG4gIHJlZkVsbVxuKSB7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIF9pc0NvbXBvbmVudDogdHJ1ZSxcbiAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICBfcGFyZW50Vm5vZGU6IHZub2RlLFxuICAgIF9wYXJlbnRFbG06IHBhcmVudEVsbSB8fCBudWxsLFxuICAgIF9yZWZFbG06IHJlZkVsbSB8fCBudWxsXG4gIH07XG4gIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZSByZW5kZXIgZnVuY3Rpb25zXG4gIHZhciBpbmxpbmVUZW1wbGF0ZSA9IHZub2RlLmRhdGEuaW5saW5lVGVtcGxhdGU7XG4gIGlmIChpc0RlZihpbmxpbmVUZW1wbGF0ZSkpIHtcbiAgICBvcHRpb25zLnJlbmRlciA9IGlubGluZVRlbXBsYXRlLnJlbmRlcjtcbiAgICBvcHRpb25zLnN0YXRpY1JlbmRlckZucyA9IGlubGluZVRlbXBsYXRlLnN0YXRpY1JlbmRlckZucztcbiAgfVxuICByZXR1cm4gbmV3IHZub2RlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBtZXJnZUhvb2tzIChkYXRhKSB7XG4gIGlmICghZGF0YS5ob29rKSB7XG4gICAgZGF0YS5ob29rID0ge307XG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBob29rc1RvTWVyZ2UubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gaG9va3NUb01lcmdlW2ldO1xuICAgIHZhciBmcm9tUGFyZW50ID0gZGF0YS5ob29rW2tleV07XG4gICAgdmFyIG91cnMgPSBjb21wb25lbnRWTm9kZUhvb2tzW2tleV07XG4gICAgZGF0YS5ob29rW2tleV0gPSBmcm9tUGFyZW50ID8gbWVyZ2VIb29rJDEob3VycywgZnJvbVBhcmVudCkgOiBvdXJzO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1lcmdlSG9vayQxIChvbmUsIHR3bykge1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHtcbiAgICBvbmUoYSwgYiwgYywgZCk7XG4gICAgdHdvKGEsIGIsIGMsIGQpO1xuICB9XG59XG5cbi8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBpbmZvICh2YWx1ZSBhbmQgY2FsbGJhY2spIGludG9cbi8vIHByb3AgYW5kIGV2ZW50IGhhbmRsZXIgcmVzcGVjdGl2ZWx5LlxuZnVuY3Rpb24gdHJhbnNmb3JtTW9kZWwgKG9wdGlvbnMsIGRhdGEpIHtcbiAgdmFyIHByb3AgPSAob3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLnByb3ApIHx8ICd2YWx1ZSc7XG4gIHZhciBldmVudCA9IChvcHRpb25zLm1vZGVsICYmIG9wdGlvbnMubW9kZWwuZXZlbnQpIHx8ICdpbnB1dCc7KGRhdGEucHJvcHMgfHwgKGRhdGEucHJvcHMgPSB7fSkpW3Byb3BdID0gZGF0YS5tb2RlbC52YWx1ZTtcbiAgdmFyIG9uID0gZGF0YS5vbiB8fCAoZGF0YS5vbiA9IHt9KTtcbiAgaWYgKGlzRGVmKG9uW2V2ZW50XSkpIHtcbiAgICBvbltldmVudF0gPSBbZGF0YS5tb2RlbC5jYWxsYmFja10uY29uY2F0KG9uW2V2ZW50XSk7XG4gIH0gZWxzZSB7XG4gICAgb25bZXZlbnRdID0gZGF0YS5tb2RlbC5jYWxsYmFjaztcbiAgfVxufVxuXG4vKiAgKi9cblxudmFyIFNJTVBMRV9OT1JNQUxJWkUgPSAxO1xudmFyIEFMV0FZU19OT1JNQUxJWkUgPSAyO1xuXG4vLyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBwcm92aWRpbmcgYSBtb3JlIGZsZXhpYmxlIGludGVyZmFjZVxuLy8gd2l0aG91dCBnZXR0aW5nIHllbGxlZCBhdCBieSBmbG93XG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50IChcbiAgY29udGV4dCxcbiAgdGFnLFxuICBkYXRhLFxuICBjaGlsZHJlbixcbiAgbm9ybWFsaXphdGlvblR5cGUsXG4gIGFsd2F5c05vcm1hbGl6ZVxuKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGRhdGEpIHx8IGlzUHJpbWl0aXZlKGRhdGEpKSB7XG4gICAgbm9ybWFsaXphdGlvblR5cGUgPSBjaGlsZHJlbjtcbiAgICBjaGlsZHJlbiA9IGRhdGE7XG4gICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoaXNUcnVlKGFsd2F5c05vcm1hbGl6ZSkpIHtcbiAgICBub3JtYWxpemF0aW9uVHlwZSA9IEFMV0FZU19OT1JNQUxJWkU7XG4gIH1cbiAgcmV0dXJuIF9jcmVhdGVFbGVtZW50KGNvbnRleHQsIHRhZywgZGF0YSwgY2hpbGRyZW4sIG5vcm1hbGl6YXRpb25UeXBlKVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlRWxlbWVudCAoXG4gIGNvbnRleHQsXG4gIHRhZyxcbiAgZGF0YSxcbiAgY2hpbGRyZW4sXG4gIG5vcm1hbGl6YXRpb25UeXBlXG4pIHtcbiAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKChkYXRhKS5fX29iX18pKSB7XG4gICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgIFwiQXZvaWQgdXNpbmcgb2JzZXJ2ZWQgZGF0YSBvYmplY3QgYXMgdm5vZGUgZGF0YTogXCIgKyAoSlNPTi5zdHJpbmdpZnkoZGF0YSkpICsgXCJcXG5cIiArXG4gICAgICAnQWx3YXlzIGNyZWF0ZSBmcmVzaCB2bm9kZSBkYXRhIG9iamVjdHMgaW4gZWFjaCByZW5kZXIhJyxcbiAgICAgIGNvbnRleHRcbiAgICApO1xuICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKClcbiAgfVxuICAvLyBvYmplY3Qgc3ludGF4IGluIHYtYmluZFxuICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoZGF0YS5pcykpIHtcbiAgICB0YWcgPSBkYXRhLmlzO1xuICB9XG4gIGlmICghdGFnKSB7XG4gICAgLy8gaW4gY2FzZSBvZiBjb21wb25lbnQgOmlzIHNldCB0byBmYWxzeSB2YWx1ZVxuICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKClcbiAgfVxuICAvLyB3YXJuIGFnYWluc3Qgbm9uLXByaW1pdGl2ZSBrZXlcbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgaXNEZWYoZGF0YSkgJiYgaXNEZWYoZGF0YS5rZXkpICYmICFpc1ByaW1pdGl2ZShkYXRhLmtleSlcbiAgKSB7XG4gICAge1xuICAgICAgd2FybihcbiAgICAgICAgJ0F2b2lkIHVzaW5nIG5vbi1wcmltaXRpdmUgdmFsdWUgYXMga2V5LCAnICtcbiAgICAgICAgJ3VzZSBzdHJpbmcvbnVtYmVyIHZhbHVlIGluc3RlYWQuJyxcbiAgICAgICAgY29udGV4dFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgLy8gc3VwcG9ydCBzaW5nbGUgZnVuY3Rpb24gY2hpbGRyZW4gYXMgZGVmYXVsdCBzY29wZWQgc2xvdFxuICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikgJiZcbiAgICB0eXBlb2YgY2hpbGRyZW5bMF0gPT09ICdmdW5jdGlvbidcbiAgKSB7XG4gICAgZGF0YSA9IGRhdGEgfHwge307XG4gICAgZGF0YS5zY29wZWRTbG90cyA9IHsgZGVmYXVsdDogY2hpbGRyZW5bMF0gfTtcbiAgICBjaGlsZHJlbi5sZW5ndGggPSAwO1xuICB9XG4gIGlmIChub3JtYWxpemF0aW9uVHlwZSA9PT0gQUxXQVlTX05PUk1BTElaRSkge1xuICAgIGNoaWxkcmVuID0gbm9ybWFsaXplQ2hpbGRyZW4oY2hpbGRyZW4pO1xuICB9IGVsc2UgaWYgKG5vcm1hbGl6YXRpb25UeXBlID09PSBTSU1QTEVfTk9STUFMSVpFKSB7XG4gICAgY2hpbGRyZW4gPSBzaW1wbGVOb3JtYWxpemVDaGlsZHJlbihjaGlsZHJlbik7XG4gIH1cbiAgdmFyIHZub2RlLCBucztcbiAgaWYgKHR5cGVvZiB0YWcgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIEN0b3I7XG4gICAgbnMgPSAoY29udGV4dC4kdm5vZGUgJiYgY29udGV4dC4kdm5vZGUubnMpIHx8IGNvbmZpZy5nZXRUYWdOYW1lc3BhY2UodGFnKTtcbiAgICBpZiAoY29uZmlnLmlzUmVzZXJ2ZWRUYWcodGFnKSkge1xuICAgICAgLy8gcGxhdGZvcm0gYnVpbHQtaW4gZWxlbWVudHNcbiAgICAgIHZub2RlID0gbmV3IFZOb2RlKFxuICAgICAgICBjb25maWcucGFyc2VQbGF0Zm9ybVRhZ05hbWUodGFnKSwgZGF0YSwgY2hpbGRyZW4sXG4gICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0XG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoaXNEZWYoQ3RvciA9IHJlc29sdmVBc3NldChjb250ZXh0LiRvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpKSB7XG4gICAgICAvLyBjb21wb25lbnRcbiAgICAgIHZub2RlID0gY3JlYXRlQ29tcG9uZW50KEN0b3IsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuLCB0YWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1bmtub3duIG9yIHVubGlzdGVkIG5hbWVzcGFjZWQgZWxlbWVudHNcbiAgICAgIC8vIGNoZWNrIGF0IHJ1bnRpbWUgYmVjYXVzZSBpdCBtYXkgZ2V0IGFzc2lnbmVkIGEgbmFtZXNwYWNlIHdoZW4gaXRzXG4gICAgICAvLyBwYXJlbnQgbm9ybWFsaXplcyBjaGlsZHJlblxuICAgICAgdm5vZGUgPSBuZXcgVk5vZGUoXG4gICAgICAgIHRhZywgZGF0YSwgY2hpbGRyZW4sXG4gICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0XG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBkaXJlY3QgY29tcG9uZW50IG9wdGlvbnMgLyBjb25zdHJ1Y3RvclxuICAgIHZub2RlID0gY3JlYXRlQ29tcG9uZW50KHRhZywgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4pO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkge1xuICAgIHJldHVybiB2bm9kZVxuICB9IGVsc2UgaWYgKGlzRGVmKHZub2RlKSkge1xuICAgIGlmIChpc0RlZihucykpIHsgYXBwbHlOUyh2bm9kZSwgbnMpOyB9XG4gICAgaWYgKGlzRGVmKGRhdGEpKSB7IHJlZ2lzdGVyRGVlcEJpbmRpbmdzKGRhdGEpOyB9XG4gICAgcmV0dXJuIHZub2RlXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5TlMgKHZub2RlLCBucywgZm9yY2UpIHtcbiAgdm5vZGUubnMgPSBucztcbiAgaWYgKHZub2RlLnRhZyA9PT0gJ2ZvcmVpZ25PYmplY3QnKSB7XG4gICAgLy8gdXNlIGRlZmF1bHQgbmFtZXNwYWNlIGluc2lkZSBmb3JlaWduT2JqZWN0XG4gICAgbnMgPSB1bmRlZmluZWQ7XG4gICAgZm9yY2UgPSB0cnVlO1xuICB9XG4gIGlmIChpc0RlZih2bm9kZS5jaGlsZHJlbikpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY2hpbGRyZW5baV07XG4gICAgICBpZiAoaXNEZWYoY2hpbGQudGFnKSAmJiAoXG4gICAgICAgIGlzVW5kZWYoY2hpbGQubnMpIHx8IChpc1RydWUoZm9yY2UpICYmIGNoaWxkLnRhZyAhPT0gJ3N2ZycpKSkge1xuICAgICAgICBhcHBseU5TKGNoaWxkLCBucywgZm9yY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyByZWYgIzUzMThcbi8vIG5lY2Vzc2FyeSB0byBlbnN1cmUgcGFyZW50IHJlLXJlbmRlciB3aGVuIGRlZXAgYmluZGluZ3MgbGlrZSA6c3R5bGUgYW5kXG4vLyA6Y2xhc3MgYXJlIHVzZWQgb24gc2xvdCBub2Rlc1xuZnVuY3Rpb24gcmVnaXN0ZXJEZWVwQmluZGluZ3MgKGRhdGEpIHtcbiAgaWYgKGlzT2JqZWN0KGRhdGEuc3R5bGUpKSB7XG4gICAgdHJhdmVyc2UoZGF0YS5zdHlsZSk7XG4gIH1cbiAgaWYgKGlzT2JqZWN0KGRhdGEuY2xhc3MpKSB7XG4gICAgdHJhdmVyc2UoZGF0YS5jbGFzcyk7XG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGluaXRSZW5kZXIgKHZtKSB7XG4gIHZtLl92bm9kZSA9IG51bGw7IC8vIHRoZSByb290IG9mIHRoZSBjaGlsZCB0cmVlXG4gIHZtLl9zdGF0aWNUcmVlcyA9IG51bGw7IC8vIHYtb25jZSBjYWNoZWQgdHJlZXNcbiAgdmFyIG9wdGlvbnMgPSB2bS4kb3B0aW9ucztcbiAgdmFyIHBhcmVudFZub2RlID0gdm0uJHZub2RlID0gb3B0aW9ucy5fcGFyZW50Vm5vZGU7IC8vIHRoZSBwbGFjZWhvbGRlciBub2RlIGluIHBhcmVudCB0cmVlXG4gIHZhciByZW5kZXJDb250ZXh0ID0gcGFyZW50Vm5vZGUgJiYgcGFyZW50Vm5vZGUuY29udGV4dDtcbiAgdm0uJHNsb3RzID0gcmVzb2x2ZVNsb3RzKG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuLCByZW5kZXJDb250ZXh0KTtcbiAgdm0uJHNjb3BlZFNsb3RzID0gZW1wdHlPYmplY3Q7XG4gIC8vIGJpbmQgdGhlIGNyZWF0ZUVsZW1lbnQgZm4gdG8gdGhpcyBpbnN0YW5jZVxuICAvLyBzbyB0aGF0IHdlIGdldCBwcm9wZXIgcmVuZGVyIGNvbnRleHQgaW5zaWRlIGl0LlxuICAvLyBhcmdzIG9yZGVyOiB0YWcsIGRhdGEsIGNoaWxkcmVuLCBub3JtYWxpemF0aW9uVHlwZSwgYWx3YXlzTm9ybWFsaXplXG4gIC8vIGludGVybmFsIHZlcnNpb24gaXMgdXNlZCBieSByZW5kZXIgZnVuY3Rpb25zIGNvbXBpbGVkIGZyb20gdGVtcGxhdGVzXG4gIHZtLl9jID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodm0sIGEsIGIsIGMsIGQsIGZhbHNlKTsgfTtcbiAgLy8gbm9ybWFsaXphdGlvbiBpcyBhbHdheXMgYXBwbGllZCBmb3IgdGhlIHB1YmxpYyB2ZXJzaW9uLCB1c2VkIGluXG4gIC8vIHVzZXItd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zLlxuICB2bS4kY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KHZtLCBhLCBiLCBjLCBkLCB0cnVlKTsgfTtcblxuICAvLyAkYXR0cnMgJiAkbGlzdGVuZXJzIGFyZSBleHBvc2VkIGZvciBlYXNpZXIgSE9DIGNyZWF0aW9uLlxuICAvLyB0aGV5IG5lZWQgdG8gYmUgcmVhY3RpdmUgc28gdGhhdCBIT0NzIHVzaW5nIHRoZW0gYXJlIGFsd2F5cyB1cGRhdGVkXG4gIHZhciBwYXJlbnREYXRhID0gcGFyZW50Vm5vZGUgJiYgcGFyZW50Vm5vZGUuZGF0YTtcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICB7XG4gICAgZGVmaW5lUmVhY3RpdmUodm0sICckYXR0cnMnLCBwYXJlbnREYXRhICYmIHBhcmVudERhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3QsIGZ1bmN0aW9uICgpIHtcbiAgICAgICFpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgJiYgd2FybihcIiRhdHRycyBpcyByZWFkb25seS5cIiwgdm0pO1xuICAgIH0sIHRydWUpO1xuICAgIGRlZmluZVJlYWN0aXZlKHZtLCAnJGxpc3RlbmVycycsIG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyB8fCBlbXB0eU9iamVjdCwgZnVuY3Rpb24gKCkge1xuICAgICAgIWlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCAmJiB3YXJuKFwiJGxpc3RlbmVycyBpcyByZWFkb25seS5cIiwgdm0pO1xuICAgIH0sIHRydWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlck1peGluIChWdWUpIHtcbiAgLy8gaW5zdGFsbCBydW50aW1lIGNvbnZlbmllbmNlIGhlbHBlcnNcbiAgaW5zdGFsbFJlbmRlckhlbHBlcnMoVnVlLnByb3RvdHlwZSk7XG5cbiAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gbmV4dFRpY2soZm4sIHRoaXMpXG4gIH07XG5cbiAgVnVlLnByb3RvdHlwZS5fcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdmFyIHJlZiA9IHZtLiRvcHRpb25zO1xuICAgIHZhciByZW5kZXIgPSByZWYucmVuZGVyO1xuICAgIHZhciBfcGFyZW50Vm5vZGUgPSByZWYuX3BhcmVudFZub2RlO1xuXG4gICAgLy8gcmVzZXQgX3JlbmRlcmVkIGZsYWcgb24gc2xvdHMgZm9yIGR1cGxpY2F0ZSBzbG90IGNoZWNrXG4gICAge1xuICAgICAgZm9yICh2YXIga2V5IGluIHZtLiRzbG90cykge1xuICAgICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICAgICAgdm0uJHNsb3RzW2tleV0uX3JlbmRlcmVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKF9wYXJlbnRWbm9kZSkge1xuICAgICAgdm0uJHNjb3BlZFNsb3RzID0gX3BhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHMgfHwgZW1wdHlPYmplY3Q7XG4gICAgfVxuXG4gICAgLy8gc2V0IHBhcmVudCB2bm9kZS4gdGhpcyBhbGxvd3MgcmVuZGVyIGZ1bmN0aW9ucyB0byBoYXZlIGFjY2Vzc1xuICAgIC8vIHRvIHRoZSBkYXRhIG9uIHRoZSBwbGFjZWhvbGRlciBub2RlLlxuICAgIHZtLiR2bm9kZSA9IF9wYXJlbnRWbm9kZTtcbiAgICAvLyByZW5kZXIgc2VsZlxuICAgIHZhciB2bm9kZTtcbiAgICB0cnkge1xuICAgICAgdm5vZGUgPSByZW5kZXIuY2FsbCh2bS5fcmVuZGVyUHJveHksIHZtLiRjcmVhdGVFbGVtZW50KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBoYW5kbGVFcnJvcihlLCB2bSwgXCJyZW5kZXJcIik7XG4gICAgICAvLyByZXR1cm4gZXJyb3IgcmVuZGVyIHJlc3VsdCxcbiAgICAgIC8vIG9yIHByZXZpb3VzIHZub2RlIHRvIHByZXZlbnQgcmVuZGVyIGVycm9yIGNhdXNpbmcgYmxhbmsgY29tcG9uZW50XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAge1xuICAgICAgICBpZiAodm0uJG9wdGlvbnMucmVuZGVyRXJyb3IpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdm5vZGUgPSB2bS4kb3B0aW9ucy5yZW5kZXJFcnJvci5jYWxsKHZtLl9yZW5kZXJQcm94eSwgdm0uJGNyZWF0ZUVsZW1lbnQsIGUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCBcInJlbmRlckVycm9yXCIpO1xuICAgICAgICAgICAgdm5vZGUgPSB2bS5fdm5vZGU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZub2RlID0gdm0uX3Zub2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHJldHVybiBlbXB0eSB2bm9kZSBpbiBjYXNlIHRoZSByZW5kZXIgZnVuY3Rpb24gZXJyb3JlZCBvdXRcbiAgICBpZiAoISh2bm9kZSBpbnN0YW5jZW9mIFZOb2RlKSkge1xuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIEFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgJ011bHRpcGxlIHJvb3Qgbm9kZXMgcmV0dXJuZWQgZnJvbSByZW5kZXIgZnVuY3Rpb24uIFJlbmRlciBmdW5jdGlvbiAnICtcbiAgICAgICAgICAnc2hvdWxkIHJldHVybiBhIHNpbmdsZSByb290IG5vZGUuJyxcbiAgICAgICAgICB2bVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdm5vZGUgPSBjcmVhdGVFbXB0eVZOb2RlKCk7XG4gICAgfVxuICAgIC8vIHNldCBwYXJlbnRcbiAgICB2bm9kZS5wYXJlbnQgPSBfcGFyZW50Vm5vZGU7XG4gICAgcmV0dXJuIHZub2RlXG4gIH07XG59XG5cbi8qICAqL1xuXG52YXIgdWlkJDMgPSAwO1xuXG5mdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIC8vIGEgdWlkXG4gICAgdm0uX3VpZCA9IHVpZCQzKys7XG5cbiAgICB2YXIgc3RhcnRUYWcsIGVuZFRhZztcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHtcbiAgICAgIHN0YXJ0VGFnID0gXCJ2dWUtcGVyZi1zdGFydDpcIiArICh2bS5fdWlkKTtcbiAgICAgIGVuZFRhZyA9IFwidnVlLXBlcmYtZW5kOlwiICsgKHZtLl91aWQpO1xuICAgICAgbWFyayhzdGFydFRhZyk7XG4gICAgfVxuXG4gICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcbiAgICB2bS5faXNWdWUgPSB0cnVlO1xuICAgIC8vIG1lcmdlIG9wdGlvbnNcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLl9pc0NvbXBvbmVudCkge1xuICAgICAgLy8gb3B0aW1pemUgaW50ZXJuYWwgY29tcG9uZW50IGluc3RhbnRpYXRpb25cbiAgICAgIC8vIHNpbmNlIGR5bmFtaWMgb3B0aW9ucyBtZXJnaW5nIGlzIHByZXR0eSBzbG93LCBhbmQgbm9uZSBvZiB0aGVcbiAgICAgIC8vIGludGVybmFsIGNvbXBvbmVudCBvcHRpb25zIG5lZWRzIHNwZWNpYWwgdHJlYXRtZW50LlxuICAgICAgaW5pdEludGVybmFsQ29tcG9uZW50KHZtLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdm0uJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoXG4gICAgICAgIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnModm0uY29uc3RydWN0b3IpLFxuICAgICAgICBvcHRpb25zIHx8IHt9LFxuICAgICAgICB2bVxuICAgICAgKTtcbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICB7XG4gICAgICBpbml0UHJveHkodm0pO1xuICAgIH1cbiAgICAvLyBleHBvc2UgcmVhbCBzZWxmXG4gICAgdm0uX3NlbGYgPSB2bTtcbiAgICBpbml0TGlmZWN5Y2xlKHZtKTtcbiAgICBpbml0RXZlbnRzKHZtKTtcbiAgICBpbml0UmVuZGVyKHZtKTtcbiAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZUNyZWF0ZScpO1xuICAgIGluaXRJbmplY3Rpb25zKHZtKTsgLy8gcmVzb2x2ZSBpbmplY3Rpb25zIGJlZm9yZSBkYXRhL3Byb3BzXG4gICAgaW5pdFN0YXRlKHZtKTtcbiAgICBpbml0UHJvdmlkZSh2bSk7IC8vIHJlc29sdmUgcHJvdmlkZSBhZnRlciBkYXRhL3Byb3BzXG4gICAgY2FsbEhvb2sodm0sICdjcmVhdGVkJyk7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHtcbiAgICAgIHZtLl9uYW1lID0gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSwgZmFsc2UpO1xuICAgICAgbWFyayhlbmRUYWcpO1xuICAgICAgbWVhc3VyZSgoXCJ2dWUgXCIgKyAodm0uX25hbWUpICsgXCIgaW5pdFwiKSwgc3RhcnRUYWcsIGVuZFRhZyk7XG4gICAgfVxuXG4gICAgaWYgKHZtLiRvcHRpb25zLmVsKSB7XG4gICAgICB2bS4kbW91bnQodm0uJG9wdGlvbnMuZWwpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gaW5pdEludGVybmFsQ29tcG9uZW50ICh2bSwgb3B0aW9ucykge1xuICB2YXIgb3B0cyA9IHZtLiRvcHRpb25zID0gT2JqZWN0LmNyZWF0ZSh2bS5jb25zdHJ1Y3Rvci5vcHRpb25zKTtcbiAgLy8gZG9pbmcgdGhpcyBiZWNhdXNlIGl0J3MgZmFzdGVyIHRoYW4gZHluYW1pYyBlbnVtZXJhdGlvbi5cbiAgdmFyIHBhcmVudFZub2RlID0gb3B0aW9ucy5fcGFyZW50Vm5vZGU7XG4gIG9wdHMucGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG4gIG9wdHMuX3BhcmVudFZub2RlID0gcGFyZW50Vm5vZGU7XG4gIG9wdHMuX3BhcmVudEVsbSA9IG9wdGlvbnMuX3BhcmVudEVsbTtcbiAgb3B0cy5fcmVmRWxtID0gb3B0aW9ucy5fcmVmRWxtO1xuXG4gIHZhciB2bm9kZUNvbXBvbmVudE9wdGlvbnMgPSBwYXJlbnRWbm9kZS5jb21wb25lbnRPcHRpb25zO1xuICBvcHRzLnByb3BzRGF0YSA9IHZub2RlQ29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGE7XG4gIG9wdHMuX3BhcmVudExpc3RlbmVycyA9IHZub2RlQ29tcG9uZW50T3B0aW9ucy5saXN0ZW5lcnM7XG4gIG9wdHMuX3JlbmRlckNoaWxkcmVuID0gdm5vZGVDb21wb25lbnRPcHRpb25zLmNoaWxkcmVuO1xuICBvcHRzLl9jb21wb25lbnRUYWcgPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMudGFnO1xuXG4gIGlmIChvcHRpb25zLnJlbmRlcikge1xuICAgIG9wdHMucmVuZGVyID0gb3B0aW9ucy5yZW5kZXI7XG4gICAgb3B0cy5zdGF0aWNSZW5kZXJGbnMgPSBvcHRpb25zLnN0YXRpY1JlbmRlckZucztcbiAgfVxufVxuXG5mdW5jdGlvbiByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zIChDdG9yKSB7XG4gIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zO1xuICBpZiAoQ3Rvci5zdXBlcikge1xuICAgIHZhciBzdXBlck9wdGlvbnMgPSByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKEN0b3Iuc3VwZXIpO1xuICAgIHZhciBjYWNoZWRTdXBlck9wdGlvbnMgPSBDdG9yLnN1cGVyT3B0aW9ucztcbiAgICBpZiAoc3VwZXJPcHRpb25zICE9PSBjYWNoZWRTdXBlck9wdGlvbnMpIHtcbiAgICAgIC8vIHN1cGVyIG9wdGlvbiBjaGFuZ2VkLFxuICAgICAgLy8gbmVlZCB0byByZXNvbHZlIG5ldyBvcHRpb25zLlxuICAgICAgQ3Rvci5zdXBlck9wdGlvbnMgPSBzdXBlck9wdGlvbnM7XG4gICAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgYW55IGxhdGUtbW9kaWZpZWQvYXR0YWNoZWQgb3B0aW9ucyAoIzQ5NzYpXG4gICAgICB2YXIgbW9kaWZpZWRPcHRpb25zID0gcmVzb2x2ZU1vZGlmaWVkT3B0aW9ucyhDdG9yKTtcbiAgICAgIC8vIHVwZGF0ZSBiYXNlIGV4dGVuZCBvcHRpb25zXG4gICAgICBpZiAobW9kaWZpZWRPcHRpb25zKSB7XG4gICAgICAgIGV4dGVuZChDdG9yLmV4dGVuZE9wdGlvbnMsIG1vZGlmaWVkT3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gQ3Rvci5vcHRpb25zID0gbWVyZ2VPcHRpb25zKHN1cGVyT3B0aW9ucywgQ3Rvci5leHRlbmRPcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLm5hbWUpIHtcbiAgICAgICAgb3B0aW9ucy5jb21wb25lbnRzW29wdGlvbnMubmFtZV0gPSBDdG9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3B0aW9uc1xufVxuXG5mdW5jdGlvbiByZXNvbHZlTW9kaWZpZWRPcHRpb25zIChDdG9yKSB7XG4gIHZhciBtb2RpZmllZDtcbiAgdmFyIGxhdGVzdCA9IEN0b3Iub3B0aW9ucztcbiAgdmFyIGV4dGVuZGVkID0gQ3Rvci5leHRlbmRPcHRpb25zO1xuICB2YXIgc2VhbGVkID0gQ3Rvci5zZWFsZWRPcHRpb25zO1xuICBmb3IgKHZhciBrZXkgaW4gbGF0ZXN0KSB7XG4gICAgaWYgKGxhdGVzdFtrZXldICE9PSBzZWFsZWRba2V5XSkge1xuICAgICAgaWYgKCFtb2RpZmllZCkgeyBtb2RpZmllZCA9IHt9OyB9XG4gICAgICBtb2RpZmllZFtrZXldID0gZGVkdXBlKGxhdGVzdFtrZXldLCBleHRlbmRlZFtrZXldLCBzZWFsZWRba2V5XSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBtb2RpZmllZFxufVxuXG5mdW5jdGlvbiBkZWR1cGUgKGxhdGVzdCwgZXh0ZW5kZWQsIHNlYWxlZCkge1xuICAvLyBjb21wYXJlIGxhdGVzdCBhbmQgc2VhbGVkIHRvIGVuc3VyZSBsaWZlY3ljbGUgaG9va3Mgd29uJ3QgYmUgZHVwbGljYXRlZFxuICAvLyBiZXR3ZWVuIG1lcmdlc1xuICBpZiAoQXJyYXkuaXNBcnJheShsYXRlc3QpKSB7XG4gICAgdmFyIHJlcyA9IFtdO1xuICAgIHNlYWxlZCA9IEFycmF5LmlzQXJyYXkoc2VhbGVkKSA/IHNlYWxlZCA6IFtzZWFsZWRdO1xuICAgIGV4dGVuZGVkID0gQXJyYXkuaXNBcnJheShleHRlbmRlZCkgPyBleHRlbmRlZCA6IFtleHRlbmRlZF07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXRlc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIHB1c2ggb3JpZ2luYWwgb3B0aW9ucyBhbmQgbm90IHNlYWxlZCBvcHRpb25zIHRvIGV4Y2x1ZGUgZHVwbGljYXRlZCBvcHRpb25zXG4gICAgICBpZiAoZXh0ZW5kZWQuaW5kZXhPZihsYXRlc3RbaV0pID49IDAgfHwgc2VhbGVkLmluZGV4T2YobGF0ZXN0W2ldKSA8IDApIHtcbiAgICAgICAgcmVzLnB1c2gobGF0ZXN0W2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsYXRlc3RcbiAgfVxufVxuXG5mdW5jdGlvbiBWdWUgKG9wdGlvbnMpIHtcbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgISh0aGlzIGluc3RhbmNlb2YgVnVlKVxuICApIHtcbiAgICB3YXJuKCdWdWUgaXMgYSBjb25zdHJ1Y3RvciBhbmQgc2hvdWxkIGJlIGNhbGxlZCB3aXRoIHRoZSBgbmV3YCBrZXl3b3JkJyk7XG4gIH1cbiAgdGhpcy5faW5pdChvcHRpb25zKTtcbn1cblxuaW5pdE1peGluKFZ1ZSk7XG5zdGF0ZU1peGluKFZ1ZSk7XG5ldmVudHNNaXhpbihWdWUpO1xubGlmZWN5Y2xlTWl4aW4oVnVlKTtcbnJlbmRlck1peGluKFZ1ZSk7XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBpbml0VXNlIChWdWUpIHtcbiAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICB2YXIgaW5zdGFsbGVkUGx1Z2lucyA9ICh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zIHx8ICh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zID0gW10pKTtcbiAgICBpZiAoaW5zdGFsbGVkUGx1Z2lucy5pbmRleE9mKHBsdWdpbikgPiAtMSkge1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwbHVnaW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9XG4gICAgaW5zdGFsbGVkUGx1Z2lucy5wdXNoKHBsdWdpbik7XG4gICAgcmV0dXJuIHRoaXNcbiAgfTtcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGluaXRNaXhpbiQxIChWdWUpIHtcbiAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG4gICAgdGhpcy5vcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMub3B0aW9ucywgbWl4aW4pO1xuICAgIHJldHVybiB0aGlzXG4gIH07XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBpbml0RXh0ZW5kIChWdWUpIHtcbiAgLyoqXG4gICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG4gICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuICAgKi9cbiAgVnVlLmNpZCA9IDA7XG4gIHZhciBjaWQgPSAxO1xuXG4gIC8qKlxuICAgKiBDbGFzcyBpbmhlcml0YW5jZVxuICAgKi9cbiAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG4gICAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge307XG4gICAgdmFyIFN1cGVyID0gdGhpcztcbiAgICB2YXIgU3VwZXJJZCA9IFN1cGVyLmNpZDtcbiAgICB2YXIgY2FjaGVkQ3RvcnMgPSBleHRlbmRPcHRpb25zLl9DdG9yIHx8IChleHRlbmRPcHRpb25zLl9DdG9yID0ge30pO1xuICAgIGlmIChjYWNoZWRDdG9yc1tTdXBlcklkXSkge1xuICAgICAgcmV0dXJuIGNhY2hlZEN0b3JzW1N1cGVySWRdXG4gICAgfVxuXG4gICAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lO1xuICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lKSB7XG4gICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIFN1YiA9IGZ1bmN0aW9uIFZ1ZUNvbXBvbmVudCAob3B0aW9ucykge1xuICAgICAgdGhpcy5faW5pdChvcHRpb25zKTtcbiAgICB9O1xuICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG4gICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YjtcbiAgICBTdWIuY2lkID0gY2lkKys7XG4gICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoXG4gICAgICBTdXBlci5vcHRpb25zLFxuICAgICAgZXh0ZW5kT3B0aW9uc1xuICAgICk7XG4gICAgU3ViWydzdXBlciddID0gU3VwZXI7XG5cbiAgICAvLyBGb3IgcHJvcHMgYW5kIGNvbXB1dGVkIHByb3BlcnRpZXMsIHdlIGRlZmluZSB0aGUgcHJveHkgZ2V0dGVycyBvblxuICAgIC8vIHRoZSBWdWUgaW5zdGFuY2VzIGF0IGV4dGVuc2lvbiB0aW1lLCBvbiB0aGUgZXh0ZW5kZWQgcHJvdG90eXBlLiBUaGlzXG4gICAgLy8gYXZvaWRzIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBjYWxscyBmb3IgZWFjaCBpbnN0YW5jZSBjcmVhdGVkLlxuICAgIGlmIChTdWIub3B0aW9ucy5wcm9wcykge1xuICAgICAgaW5pdFByb3BzJDEoU3ViKTtcbiAgICB9XG4gICAgaWYgKFN1Yi5vcHRpb25zLmNvbXB1dGVkKSB7XG4gICAgICBpbml0Q29tcHV0ZWQkMShTdWIpO1xuICAgIH1cblxuICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uL21peGluL3BsdWdpbiB1c2FnZVxuICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG4gICAgU3ViLm1peGluID0gU3VwZXIubWl4aW47XG4gICAgU3ViLnVzZSA9IFN1cGVyLnVzZTtcblxuICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcbiAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG4gICAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG4gICAgfSk7XG4gICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuICAgIGlmIChuYW1lKSB7XG4gICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuICAgIH1cblxuICAgIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIHN1cGVyIG9wdGlvbnMgYXQgZXh0ZW5zaW9uIHRpbWUuXG4gICAgLy8gbGF0ZXIgYXQgaW5zdGFudGlhdGlvbiB3ZSBjYW4gY2hlY2sgaWYgU3VwZXIncyBvcHRpb25zIGhhdmVcbiAgICAvLyBiZWVuIHVwZGF0ZWQuXG4gICAgU3ViLnN1cGVyT3B0aW9ucyA9IFN1cGVyLm9wdGlvbnM7XG4gICAgU3ViLmV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zO1xuICAgIFN1Yi5zZWFsZWRPcHRpb25zID0gZXh0ZW5kKHt9LCBTdWIub3B0aW9ucyk7XG5cbiAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuICAgIGNhY2hlZEN0b3JzW1N1cGVySWRdID0gU3ViO1xuICAgIHJldHVybiBTdWJcbiAgfTtcbn1cblxuZnVuY3Rpb24gaW5pdFByb3BzJDEgKENvbXApIHtcbiAgdmFyIHByb3BzID0gQ29tcC5vcHRpb25zLnByb3BzO1xuICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcbiAgICBwcm94eShDb21wLnByb3RvdHlwZSwgXCJfcHJvcHNcIiwga2V5KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0Q29tcHV0ZWQkMSAoQ29tcCkge1xuICB2YXIgY29tcHV0ZWQgPSBDb21wLm9wdGlvbnMuY29tcHV0ZWQ7XG4gIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuICAgIGRlZmluZUNvbXB1dGVkKENvbXAucHJvdG90eXBlLCBrZXksIGNvbXB1dGVkW2tleV0pO1xuICB9XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBpbml0QXNzZXRSZWdpc3RlcnMgKFZ1ZSkge1xuICAvKipcbiAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzLlxuICAgKi9cbiAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChcbiAgICAgIGlkLFxuICAgICAgZGVmaW5pdGlvblxuICAgICkge1xuICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGUgPT09ICdjb21wb25lbnQnKSB7XG4gICAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKGlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkge1xuICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGRlZmluaXRpb24ubmFtZSB8fCBpZDtcbiAgICAgICAgICBkZWZpbml0aW9uID0gdGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChkZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ2RpcmVjdGl2ZScgJiYgdHlwZW9mIGRlZmluaXRpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBkZWZpbml0aW9uID0geyBiaW5kOiBkZWZpbml0aW9uLCB1cGRhdGU6IGRlZmluaXRpb24gfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb25cbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUgKG9wdHMpIHtcbiAgcmV0dXJuIG9wdHMgJiYgKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcpXG59XG5cbmZ1bmN0aW9uIG1hdGNoZXMgKHBhdHRlcm4sIG5hbWUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHtcbiAgICByZXR1cm4gcGF0dGVybi5pbmRleE9mKG5hbWUpID4gLTFcbiAgfSBlbHNlIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcGF0dGVybi5zcGxpdCgnLCcpLmluZGV4T2YobmFtZSkgPiAtMVxuICB9IGVsc2UgaWYgKGlzUmVnRXhwKHBhdHRlcm4pKSB7XG4gICAgcmV0dXJuIHBhdHRlcm4udGVzdChuYW1lKVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBwcnVuZUNhY2hlIChrZWVwQWxpdmVJbnN0YW5jZSwgZmlsdGVyKSB7XG4gIHZhciBjYWNoZSA9IGtlZXBBbGl2ZUluc3RhbmNlLmNhY2hlO1xuICB2YXIga2V5cyA9IGtlZXBBbGl2ZUluc3RhbmNlLmtleXM7XG4gIHZhciBfdm5vZGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5fdm5vZGU7XG4gIGZvciAodmFyIGtleSBpbiBjYWNoZSkge1xuICAgIHZhciBjYWNoZWROb2RlID0gY2FjaGVba2V5XTtcbiAgICBpZiAoY2FjaGVkTm9kZSkge1xuICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNhY2hlZE5vZGUuY29tcG9uZW50T3B0aW9ucyk7XG4gICAgICBpZiAobmFtZSAmJiAhZmlsdGVyKG5hbWUpKSB7XG4gICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5LCBrZXlzLCBfdm5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkgKFxuICBjYWNoZSxcbiAga2V5LFxuICBrZXlzLFxuICBjdXJyZW50XG4pIHtcbiAgdmFyIGNhY2hlZCQkMSA9IGNhY2hlW2tleV07XG4gIGlmIChjYWNoZWQkJDEgJiYgKCFjdXJyZW50IHx8IGNhY2hlZCQkMS50YWcgIT09IGN1cnJlbnQudGFnKSkge1xuICAgIGNhY2hlZCQkMS5jb21wb25lbnRJbnN0YW5jZS4kZGVzdHJveSgpO1xuICB9XG4gIGNhY2hlW2tleV0gPSBudWxsO1xuICByZW1vdmUoa2V5cywga2V5KTtcbn1cblxudmFyIHBhdHRlcm5UeXBlcyA9IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldO1xuXG52YXIgS2VlcEFsaXZlID0ge1xuICBuYW1lOiAna2VlcC1hbGl2ZScsXG4gIGFic3RyYWN0OiB0cnVlLFxuXG4gIHByb3BzOiB7XG4gICAgaW5jbHVkZTogcGF0dGVyblR5cGVzLFxuICAgIGV4Y2x1ZGU6IHBhdHRlcm5UeXBlcyxcbiAgICBtYXg6IFtTdHJpbmcsIE51bWJlcl1cbiAgfSxcblxuICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkICgpIHtcbiAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLmtleXMgPSBbXTtcbiAgfSxcblxuICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCAoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcyQxLmNhY2hlKSB7XG4gICAgICBwcnVuZUNhY2hlRW50cnkodGhpcyQxLmNhY2hlLCBrZXksIHRoaXMkMS5rZXlzKTtcbiAgICB9XG4gIH0sXG5cbiAgd2F0Y2g6IHtcbiAgICBpbmNsdWRlOiBmdW5jdGlvbiBpbmNsdWRlICh2YWwpIHtcbiAgICAgIHBydW5lQ2FjaGUodGhpcywgZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIG1hdGNoZXModmFsLCBuYW1lKTsgfSk7XG4gICAgfSxcbiAgICBleGNsdWRlOiBmdW5jdGlvbiBleGNsdWRlICh2YWwpIHtcbiAgICAgIHBydW5lQ2FjaGUodGhpcywgZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuICFtYXRjaGVzKHZhbCwgbmFtZSk7IH0pO1xuICAgIH1cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG4gICAgdmFyIHNsb3QgPSB0aGlzLiRzbG90cy5kZWZhdWx0O1xuICAgIHZhciB2bm9kZSA9IGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoc2xvdCk7XG4gICAgdmFyIGNvbXBvbmVudE9wdGlvbnMgPSB2bm9kZSAmJiB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuICAgIGlmIChjb21wb25lbnRPcHRpb25zKSB7XG4gICAgICAvLyBjaGVjayBwYXR0ZXJuXG4gICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY29tcG9uZW50T3B0aW9ucyk7XG4gICAgICB2YXIgcmVmID0gdGhpcztcbiAgICAgIHZhciBpbmNsdWRlID0gcmVmLmluY2x1ZGU7XG4gICAgICB2YXIgZXhjbHVkZSA9IHJlZi5leGNsdWRlO1xuICAgICAgaWYgKFxuICAgICAgICAvLyBub3QgaW5jbHVkZWRcbiAgICAgICAgKGluY2x1ZGUgJiYgKCFuYW1lIHx8ICFtYXRjaGVzKGluY2x1ZGUsIG5hbWUpKSkgfHxcbiAgICAgICAgLy8gZXhjbHVkZWRcbiAgICAgICAgKGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB2bm9kZVxuICAgICAgfVxuXG4gICAgICB2YXIgcmVmJDEgPSB0aGlzO1xuICAgICAgdmFyIGNhY2hlID0gcmVmJDEuY2FjaGU7XG4gICAgICB2YXIga2V5cyA9IHJlZiQxLmtleXM7XG4gICAgICB2YXIga2V5ID0gdm5vZGUua2V5ID09IG51bGxcbiAgICAgICAgLy8gc2FtZSBjb25zdHJ1Y3RvciBtYXkgZ2V0IHJlZ2lzdGVyZWQgYXMgZGlmZmVyZW50IGxvY2FsIGNvbXBvbmVudHNcbiAgICAgICAgLy8gc28gY2lkIGFsb25lIGlzIG5vdCBlbm91Z2ggKCMzMjY5KVxuICAgICAgICA/IGNvbXBvbmVudE9wdGlvbnMuQ3Rvci5jaWQgKyAoY29tcG9uZW50T3B0aW9ucy50YWcgPyAoXCI6OlwiICsgKGNvbXBvbmVudE9wdGlvbnMudGFnKSkgOiAnJylcbiAgICAgICAgOiB2bm9kZS5rZXk7XG4gICAgICBpZiAoY2FjaGVba2V5XSkge1xuICAgICAgICB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IGNhY2hlW2tleV0uY29tcG9uZW50SW5zdGFuY2U7XG4gICAgICAgIC8vIG1ha2UgY3VycmVudCBrZXkgZnJlc2hlc3RcbiAgICAgICAgcmVtb3ZlKGtleXMsIGtleSk7XG4gICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FjaGVba2V5XSA9IHZub2RlO1xuICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgLy8gcHJ1bmUgb2xkZXN0IGVudHJ5XG4gICAgICAgIGlmICh0aGlzLm1heCAmJiBrZXlzLmxlbmd0aCA+IHBhcnNlSW50KHRoaXMubWF4KSkge1xuICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5c1swXSwga2V5cywgdGhpcy5fdm5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlIHx8IChzbG90ICYmIHNsb3RbMF0pXG4gIH1cbn1cblxudmFyIGJ1aWx0SW5Db21wb25lbnRzID0ge1xuICBLZWVwQWxpdmU6IEtlZXBBbGl2ZVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdEdsb2JhbEFQSSAoVnVlKSB7XG4gIC8vIGNvbmZpZ1xuICB2YXIgY29uZmlnRGVmID0ge307XG4gIGNvbmZpZ0RlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25maWc7IH07XG4gIHtcbiAgICBjb25maWdEZWYuc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgd2FybihcbiAgICAgICAgJ0RvIG5vdCByZXBsYWNlIHRoZSBWdWUuY29uZmlnIG9iamVjdCwgc2V0IGluZGl2aWR1YWwgZmllbGRzIGluc3RlYWQuJ1xuICAgICAgKTtcbiAgICB9O1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUsICdjb25maWcnLCBjb25maWdEZWYpO1xuXG4gIC8vIGV4cG9zZWQgdXRpbCBtZXRob2RzLlxuICAvLyBOT1RFOiB0aGVzZSBhcmUgbm90IGNvbnNpZGVyZWQgcGFydCBvZiB0aGUgcHVibGljIEFQSSAtIGF2b2lkIHJlbHlpbmcgb25cbiAgLy8gdGhlbSB1bmxlc3MgeW91IGFyZSBhd2FyZSBvZiB0aGUgcmlzay5cbiAgVnVlLnV0aWwgPSB7XG4gICAgd2Fybjogd2FybixcbiAgICBleHRlbmQ6IGV4dGVuZCxcbiAgICBtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcbiAgICBkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmVcbiAgfTtcblxuICBWdWUuc2V0ID0gc2V0O1xuICBWdWUuZGVsZXRlID0gZGVsO1xuICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblxuICBWdWUub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBWdWUub3B0aW9uc1t0eXBlICsgJ3MnXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH0pO1xuXG4gIC8vIHRoaXMgaXMgdXNlZCB0byBpZGVudGlmeSB0aGUgXCJiYXNlXCIgY29uc3RydWN0b3IgdG8gZXh0ZW5kIGFsbCBwbGFpbi1vYmplY3RcbiAgLy8gY29tcG9uZW50cyB3aXRoIGluIFdlZXgncyBtdWx0aS1pbnN0YW5jZSBzY2VuYXJpb3MuXG4gIFZ1ZS5vcHRpb25zLl9iYXNlID0gVnVlO1xuXG4gIGV4dGVuZChWdWUub3B0aW9ucy5jb21wb25lbnRzLCBidWlsdEluQ29tcG9uZW50cyk7XG5cbiAgaW5pdFVzZShWdWUpO1xuICBpbml0TWl4aW4kMShWdWUpO1xuICBpbml0RXh0ZW5kKFZ1ZSk7XG4gIGluaXRBc3NldFJlZ2lzdGVycyhWdWUpO1xufVxuXG5pbml0R2xvYmFsQVBJKFZ1ZSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGlzU2VydmVyJywge1xuICBnZXQ6IGlzU2VydmVyUmVuZGVyaW5nXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckc3NyQ29udGV4dCcsIHtcbiAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcmV0dXJuIHRoaXMuJHZub2RlICYmIHRoaXMuJHZub2RlLnNzckNvbnRleHRcbiAgfVxufSk7XG5cbi8vIGV4cG9zZSBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCBmb3Igc3NyIHJ1bnRpbWUgaGVscGVyIGluc3RhbGxhdGlvblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ0Z1bmN0aW9uYWxSZW5kZXJDb250ZXh0Jywge1xuICB2YWx1ZTogRnVuY3Rpb25hbFJlbmRlckNvbnRleHRcbn0pO1xuXG5WdWUudmVyc2lvbiA9ICcyLjUuMTUnO1xuXG4vKiAgKi9cblxuLy8gdGhlc2UgYXJlIHJlc2VydmVkIGZvciB3ZWIgYmVjYXVzZSB0aGV5IGFyZSBkaXJlY3RseSBjb21waWxlZCBhd2F5XG4vLyBkdXJpbmcgdGVtcGxhdGUgY29tcGlsYXRpb25cbnZhciBpc1Jlc2VydmVkQXR0ciA9IG1ha2VNYXAoJ3N0eWxlLGNsYXNzJyk7XG5cbi8vIGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgYmUgdXNpbmcgcHJvcHMgZm9yIGJpbmRpbmdcbnZhciBhY2NlcHRWYWx1ZSA9IG1ha2VNYXAoJ2lucHV0LHRleHRhcmVhLG9wdGlvbixzZWxlY3QscHJvZ3Jlc3MnKTtcbnZhciBtdXN0VXNlUHJvcCA9IGZ1bmN0aW9uICh0YWcsIHR5cGUsIGF0dHIpIHtcbiAgcmV0dXJuIChcbiAgICAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBhY2NlcHRWYWx1ZSh0YWcpKSAmJiB0eXBlICE9PSAnYnV0dG9uJyB8fFxuICAgIChhdHRyID09PSAnc2VsZWN0ZWQnICYmIHRhZyA9PT0gJ29wdGlvbicpIHx8XG4gICAgKGF0dHIgPT09ICdjaGVja2VkJyAmJiB0YWcgPT09ICdpbnB1dCcpIHx8XG4gICAgKGF0dHIgPT09ICdtdXRlZCcgJiYgdGFnID09PSAndmlkZW8nKVxuICApXG59O1xuXG52YXIgaXNFbnVtZXJhdGVkQXR0ciA9IG1ha2VNYXAoJ2NvbnRlbnRlZGl0YWJsZSxkcmFnZ2FibGUsc3BlbGxjaGVjaycpO1xuXG52YXIgaXNCb29sZWFuQXR0ciA9IG1ha2VNYXAoXG4gICdhbGxvd2Z1bGxzY3JlZW4sYXN5bmMsYXV0b2ZvY3VzLGF1dG9wbGF5LGNoZWNrZWQsY29tcGFjdCxjb250cm9scyxkZWNsYXJlLCcgK1xuICAnZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLCcgK1xuICAnZW5hYmxlZCxmb3Jtbm92YWxpZGF0ZSxoaWRkZW4saW5kZXRlcm1pbmF0ZSxpbmVydCxpc21hcCxpdGVtc2NvcGUsbG9vcCxtdWx0aXBsZSwnICtcbiAgJ211dGVkLG5vaHJlZixub3Jlc2l6ZSxub3NoYWRlLG5vdmFsaWRhdGUsbm93cmFwLG9wZW4scGF1c2VvbmV4aXQscmVhZG9ubHksJyArXG4gICdyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLCcgK1xuICAndHJ1ZXNwZWVkLHR5cGVtdXN0bWF0Y2gsdmlzaWJsZSdcbik7XG5cbnZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xuXG52YXIgaXNYbGluayA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiBuYW1lLmNoYXJBdCg1KSA9PT0gJzonICYmIG5hbWUuc2xpY2UoMCwgNSkgPT09ICd4bGluaydcbn07XG5cbnZhciBnZXRYbGlua1Byb3AgPSBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gaXNYbGluayhuYW1lKSA/IG5hbWUuc2xpY2UoNiwgbmFtZS5sZW5ndGgpIDogJydcbn07XG5cbnZhciBpc0ZhbHN5QXR0clZhbHVlID0gZnVuY3Rpb24gKHZhbCkge1xuICByZXR1cm4gdmFsID09IG51bGwgfHwgdmFsID09PSBmYWxzZVxufTtcblxuLyogICovXG5cbmZ1bmN0aW9uIGdlbkNsYXNzRm9yVm5vZGUgKHZub2RlKSB7XG4gIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcbiAgdmFyIHBhcmVudE5vZGUgPSB2bm9kZTtcbiAgdmFyIGNoaWxkTm9kZSA9IHZub2RlO1xuICB3aGlsZSAoaXNEZWYoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG4gICAgaWYgKGNoaWxkTm9kZSAmJiBjaGlsZE5vZGUuZGF0YSkge1xuICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGNoaWxkTm9kZS5kYXRhLCBkYXRhKTtcbiAgICB9XG4gIH1cbiAgd2hpbGUgKGlzRGVmKHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudCkpIHtcbiAgICBpZiAocGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLmRhdGEpIHtcbiAgICAgIGRhdGEgPSBtZXJnZUNsYXNzRGF0YShkYXRhLCBwYXJlbnROb2RlLmRhdGEpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVuZGVyQ2xhc3MoZGF0YS5zdGF0aWNDbGFzcywgZGF0YS5jbGFzcylcbn1cblxuZnVuY3Rpb24gbWVyZ2VDbGFzc0RhdGEgKGNoaWxkLCBwYXJlbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBzdGF0aWNDbGFzczogY29uY2F0KGNoaWxkLnN0YXRpY0NsYXNzLCBwYXJlbnQuc3RhdGljQ2xhc3MpLFxuICAgIGNsYXNzOiBpc0RlZihjaGlsZC5jbGFzcylcbiAgICAgID8gW2NoaWxkLmNsYXNzLCBwYXJlbnQuY2xhc3NdXG4gICAgICA6IHBhcmVudC5jbGFzc1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNsYXNzIChcbiAgc3RhdGljQ2xhc3MsXG4gIGR5bmFtaWNDbGFzc1xuKSB7XG4gIGlmIChpc0RlZihzdGF0aWNDbGFzcykgfHwgaXNEZWYoZHluYW1pY0NsYXNzKSkge1xuICAgIHJldHVybiBjb25jYXQoc3RhdGljQ2xhc3MsIHN0cmluZ2lmeUNsYXNzKGR5bmFtaWNDbGFzcykpXG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmV0dXJuICcnXG59XG5cbmZ1bmN0aW9uIGNvbmNhdCAoYSwgYikge1xuICByZXR1cm4gYSA/IGIgPyAoYSArICcgJyArIGIpIDogYSA6IChiIHx8ICcnKVxufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlDbGFzcyAodmFsdWUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN0cmluZ2lmeUFycmF5KHZhbHVlKVxuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gc3RyaW5naWZ5T2JqZWN0KHZhbHVlKVxuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmV0dXJuICcnXG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeUFycmF5ICh2YWx1ZSkge1xuICB2YXIgcmVzID0gJyc7XG4gIHZhciBzdHJpbmdpZmllZDtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoaXNEZWYoc3RyaW5naWZpZWQgPSBzdHJpbmdpZnlDbGFzcyh2YWx1ZVtpXSkpICYmIHN0cmluZ2lmaWVkICE9PSAnJykge1xuICAgICAgaWYgKHJlcykgeyByZXMgKz0gJyAnOyB9XG4gICAgICByZXMgKz0gc3RyaW5naWZpZWQ7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5T2JqZWN0ICh2YWx1ZSkge1xuICB2YXIgcmVzID0gJyc7XG4gIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZVtrZXldKSB7XG4gICAgICBpZiAocmVzKSB7IHJlcyArPSAnICc7IH1cbiAgICAgIHJlcyArPSBrZXk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyogICovXG5cbnZhciBuYW1lc3BhY2VNYXAgPSB7XG4gIHN2ZzogJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcbiAgbWF0aDogJ2h0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwnXG59O1xuXG52YXIgaXNIVE1MVGFnID0gbWFrZU1hcChcbiAgJ2h0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLCcgK1xuICAnYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGZvb3RlcixoZWFkZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGdyb3VwLG5hdixzZWN0aW9uLCcgK1xuICAnZGl2LGRkLGRsLGR0LGZpZ2NhcHRpb24sZmlndXJlLHBpY3R1cmUsaHIsaW1nLGxpLG1haW4sb2wscCxwcmUsdWwsJyArXG4gICdhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnksJyArXG4gICdzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCx0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbywnICtcbiAgJ2VtYmVkLG9iamVjdCxwYXJhbSxzb3VyY2UsY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLCcgK1xuICAnY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsJyArXG4gICdidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsb3B0aW9uLCcgK1xuICAnb3V0cHV0LHByb2dyZXNzLHNlbGVjdCx0ZXh0YXJlYSwnICtcbiAgJ2RldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSwnICtcbiAgJ2NvbnRlbnQsZWxlbWVudCxzaGFkb3csdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3QnXG4pO1xuXG4vLyB0aGlzIG1hcCBpcyBpbnRlbnRpb25hbGx5IHNlbGVjdGl2ZSwgb25seSBjb3ZlcmluZyBTVkcgZWxlbWVudHMgdGhhdCBtYXlcbi8vIGNvbnRhaW4gY2hpbGQgZWxlbWVudHMuXG52YXIgaXNTVkcgPSBtYWtlTWFwKFxuICAnc3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLCcgK1xuICAnZm9yZWlnbk9iamVjdCxnLGdseXBoLGltYWdlLGxpbmUsbWFya2VyLG1hc2ssbWlzc2luZy1nbHlwaCxwYXRoLHBhdHRlcm4sJyArXG4gICdwb2x5Z29uLHBvbHlsaW5lLHJlY3Qsc3dpdGNoLHN5bWJvbCx0ZXh0LHRleHRwYXRoLHRzcGFuLHVzZSx2aWV3JyxcbiAgdHJ1ZVxuKTtcblxudmFyIGlzUHJlVGFnID0gZnVuY3Rpb24gKHRhZykgeyByZXR1cm4gdGFnID09PSAncHJlJzsgfTtcblxudmFyIGlzUmVzZXJ2ZWRUYWcgPSBmdW5jdGlvbiAodGFnKSB7XG4gIHJldHVybiBpc0hUTUxUYWcodGFnKSB8fCBpc1NWRyh0YWcpXG59O1xuXG5mdW5jdGlvbiBnZXRUYWdOYW1lc3BhY2UgKHRhZykge1xuICBpZiAoaXNTVkcodGFnKSkge1xuICAgIHJldHVybiAnc3ZnJ1xuICB9XG4gIC8vIGJhc2ljIHN1cHBvcnQgZm9yIE1hdGhNTFxuICAvLyBub3RlIGl0IGRvZXNuJ3Qgc3VwcG9ydCBvdGhlciBNYXRoTUwgZWxlbWVudHMgYmVpbmcgY29tcG9uZW50IHJvb3RzXG4gIGlmICh0YWcgPT09ICdtYXRoJykge1xuICAgIHJldHVybiAnbWF0aCdcbiAgfVxufVxuXG52YXIgdW5rbm93bkVsZW1lbnRDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5mdW5jdGlvbiBpc1Vua25vd25FbGVtZW50ICh0YWcpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghaW5Ccm93c2VyKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICBpZiAoaXNSZXNlcnZlZFRhZyh0YWcpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddICE9IG51bGwpIHtcbiAgICByZXR1cm4gdW5rbm93bkVsZW1lbnRDYWNoZVt0YWddXG4gIH1cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjgyMTAzNjQvMTA3MDI0NFxuICAgIHJldHVybiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddID0gKFxuICAgICAgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHxcbiAgICAgIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnRcbiAgICApKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddID0gL0hUTUxVbmtub3duRWxlbWVudC8udGVzdChlbC50b1N0cmluZygpKSlcbiAgfVxufVxuXG52YXIgaXNUZXh0SW5wdXRUeXBlID0gbWFrZU1hcCgndGV4dCxudW1iZXIscGFzc3dvcmQsc2VhcmNoLGVtYWlsLHRlbCx1cmwnKTtcblxuLyogICovXG5cbi8qKlxuICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5IChlbCkge1xuICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgIHZhciBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgIGlmICghc2VsZWN0ZWQpIHtcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgICdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgZWxcbiAgICAgICk7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdGVkXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGVsXG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQkMSAodGFnTmFtZSwgdm5vZGUpIHtcbiAgdmFyIGVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gIGlmICh0YWdOYW1lICE9PSAnc2VsZWN0Jykge1xuICAgIHJldHVybiBlbG1cbiAgfVxuICAvLyBmYWxzZSBvciBudWxsIHdpbGwgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgYnV0IHVuZGVmaW5lZCB3aWxsIG5vdFxuICBpZiAodm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLmF0dHJzICYmIHZub2RlLmRhdGEuYXR0cnMubXVsdGlwbGUgIT09IHVuZGVmaW5lZCkge1xuICAgIGVsbS5zZXRBdHRyaWJ1dGUoJ211bHRpcGxlJywgJ211bHRpcGxlJyk7XG4gIH1cbiAgcmV0dXJuIGVsbVxufVxuXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50TlMgKG5hbWVzcGFjZSwgdGFnTmFtZSkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZU1hcFtuYW1lc3BhY2VdLCB0YWdOYW1lKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVUZXh0Tm9kZSAodGV4dCkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dClcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29tbWVudCAodGV4dCkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCh0ZXh0KVxufVxuXG5mdW5jdGlvbiBpbnNlcnRCZWZvcmUgKHBhcmVudE5vZGUsIG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpIHtcbiAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmZXJlbmNlTm9kZSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNoaWxkIChub2RlLCBjaGlsZCkge1xuICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kQ2hpbGQgKG5vZGUsIGNoaWxkKSB7XG4gIG5vZGUuYXBwZW5kQ2hpbGQoY2hpbGQpO1xufVxuXG5mdW5jdGlvbiBwYXJlbnROb2RlIChub2RlKSB7XG4gIHJldHVybiBub2RlLnBhcmVudE5vZGVcbn1cblxuZnVuY3Rpb24gbmV4dFNpYmxpbmcgKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUubmV4dFNpYmxpbmdcbn1cblxuZnVuY3Rpb24gdGFnTmFtZSAobm9kZSkge1xuICByZXR1cm4gbm9kZS50YWdOYW1lXG59XG5cbmZ1bmN0aW9uIHNldFRleHRDb250ZW50IChub2RlLCB0ZXh0KSB7XG4gIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xufVxuXG5mdW5jdGlvbiBzZXRTdHlsZVNjb3BlIChub2RlLCBzY29wZUlkKSB7XG4gIG5vZGUuc2V0QXR0cmlidXRlKHNjb3BlSWQsICcnKTtcbn1cblxuXG52YXIgbm9kZU9wcyA9IE9iamVjdC5mcmVlemUoe1xuXHRjcmVhdGVFbGVtZW50OiBjcmVhdGVFbGVtZW50JDEsXG5cdGNyZWF0ZUVsZW1lbnROUzogY3JlYXRlRWxlbWVudE5TLFxuXHRjcmVhdGVUZXh0Tm9kZTogY3JlYXRlVGV4dE5vZGUsXG5cdGNyZWF0ZUNvbW1lbnQ6IGNyZWF0ZUNvbW1lbnQsXG5cdGluc2VydEJlZm9yZTogaW5zZXJ0QmVmb3JlLFxuXHRyZW1vdmVDaGlsZDogcmVtb3ZlQ2hpbGQsXG5cdGFwcGVuZENoaWxkOiBhcHBlbmRDaGlsZCxcblx0cGFyZW50Tm9kZTogcGFyZW50Tm9kZSxcblx0bmV4dFNpYmxpbmc6IG5leHRTaWJsaW5nLFxuXHR0YWdOYW1lOiB0YWdOYW1lLFxuXHRzZXRUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXG5cdHNldFN0eWxlU2NvcGU6IHNldFN0eWxlU2NvcGVcbn0pO1xuXG4vKiAgKi9cblxudmFyIHJlZiA9IHtcbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUgKF8sIHZub2RlKSB7XG4gICAgcmVnaXN0ZXJSZWYodm5vZGUpO1xuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSAob2xkVm5vZGUsIHZub2RlKSB7XG4gICAgaWYgKG9sZFZub2RlLmRhdGEucmVmICE9PSB2bm9kZS5kYXRhLnJlZikge1xuICAgICAgcmVnaXN0ZXJSZWYob2xkVm5vZGUsIHRydWUpO1xuICAgICAgcmVnaXN0ZXJSZWYodm5vZGUpO1xuICAgIH1cbiAgfSxcbiAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSAodm5vZGUpIHtcbiAgICByZWdpc3RlclJlZih2bm9kZSwgdHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJSZWYgKHZub2RlLCBpc1JlbW92YWwpIHtcbiAgdmFyIGtleSA9IHZub2RlLmRhdGEucmVmO1xuICBpZiAoIWlzRGVmKGtleSkpIHsgcmV0dXJuIH1cblxuICB2YXIgdm0gPSB2bm9kZS5jb250ZXh0O1xuICB2YXIgcmVmID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgfHwgdm5vZGUuZWxtO1xuICB2YXIgcmVmcyA9IHZtLiRyZWZzO1xuICBpZiAoaXNSZW1vdmFsKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVmc1trZXldKSkge1xuICAgICAgcmVtb3ZlKHJlZnNba2V5XSwgcmVmKTtcbiAgICB9IGVsc2UgaWYgKHJlZnNba2V5XSA9PT0gcmVmKSB7XG4gICAgICByZWZzW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICh2bm9kZS5kYXRhLnJlZkluRm9yKSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVmc1trZXldKSkge1xuICAgICAgICByZWZzW2tleV0gPSBbcmVmXTtcbiAgICAgIH0gZWxzZSBpZiAocmVmc1trZXldLmluZGV4T2YocmVmKSA8IDApIHtcbiAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgICAgIHJlZnNba2V5XS5wdXNoKHJlZik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZnNba2V5XSA9IHJlZjtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBWaXJ0dWFsIERPTSBwYXRjaGluZyBhbGdvcml0aG0gYmFzZWQgb24gU25hYmJkb20gYnlcbiAqIFNpbW9uIEZyaWlzIFZpbmR1bSAoQHBhbGRlcGluZClcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL3BhbGRlcGluZC9zbmFiYmRvbS9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKlxuICogbW9kaWZpZWQgYnkgRXZhbiBZb3UgKEB5eXg5OTA4MDMpXG4gKlxuICogTm90IHR5cGUtY2hlY2tpbmcgdGhpcyBiZWNhdXNlIHRoaXMgZmlsZSBpcyBwZXJmLWNyaXRpY2FsIGFuZCB0aGUgY29zdFxuICogb2YgbWFraW5nIGZsb3cgdW5kZXJzdGFuZCBpdCBpcyBub3Qgd29ydGggaXQuXG4gKi9cblxudmFyIGVtcHR5Tm9kZSA9IG5ldyBWTm9kZSgnJywge30sIFtdKTtcblxudmFyIGhvb2tzID0gWydjcmVhdGUnLCAnYWN0aXZhdGUnLCAndXBkYXRlJywgJ3JlbW92ZScsICdkZXN0cm95J107XG5cbmZ1bmN0aW9uIHNhbWVWbm9kZSAoYSwgYikge1xuICByZXR1cm4gKFxuICAgIGEua2V5ID09PSBiLmtleSAmJiAoXG4gICAgICAoXG4gICAgICAgIGEudGFnID09PSBiLnRhZyAmJlxuICAgICAgICBhLmlzQ29tbWVudCA9PT0gYi5pc0NvbW1lbnQgJiZcbiAgICAgICAgaXNEZWYoYS5kYXRhKSA9PT0gaXNEZWYoYi5kYXRhKSAmJlxuICAgICAgICBzYW1lSW5wdXRUeXBlKGEsIGIpXG4gICAgICApIHx8IChcbiAgICAgICAgaXNUcnVlKGEuaXNBc3luY1BsYWNlaG9sZGVyKSAmJlxuICAgICAgICBhLmFzeW5jRmFjdG9yeSA9PT0gYi5hc3luY0ZhY3RvcnkgJiZcbiAgICAgICAgaXNVbmRlZihiLmFzeW5jRmFjdG9yeS5lcnJvcilcbiAgICAgIClcbiAgICApXG4gIClcbn1cblxuZnVuY3Rpb24gc2FtZUlucHV0VHlwZSAoYSwgYikge1xuICBpZiAoYS50YWcgIT09ICdpbnB1dCcpIHsgcmV0dXJuIHRydWUgfVxuICB2YXIgaTtcbiAgdmFyIHR5cGVBID0gaXNEZWYoaSA9IGEuZGF0YSkgJiYgaXNEZWYoaSA9IGkuYXR0cnMpICYmIGkudHlwZTtcbiAgdmFyIHR5cGVCID0gaXNEZWYoaSA9IGIuZGF0YSkgJiYgaXNEZWYoaSA9IGkuYXR0cnMpICYmIGkudHlwZTtcbiAgcmV0dXJuIHR5cGVBID09PSB0eXBlQiB8fCBpc1RleHRJbnB1dFR5cGUodHlwZUEpICYmIGlzVGV4dElucHV0VHlwZSh0eXBlQilcbn1cblxuZnVuY3Rpb24gY3JlYXRlS2V5VG9PbGRJZHggKGNoaWxkcmVuLCBiZWdpbklkeCwgZW5kSWR4KSB7XG4gIHZhciBpLCBrZXk7XG4gIHZhciBtYXAgPSB7fTtcbiAgZm9yIChpID0gYmVnaW5JZHg7IGkgPD0gZW5kSWR4OyArK2kpIHtcbiAgICBrZXkgPSBjaGlsZHJlbltpXS5rZXk7XG4gICAgaWYgKGlzRGVmKGtleSkpIHsgbWFwW2tleV0gPSBpOyB9XG4gIH1cbiAgcmV0dXJuIG1hcFxufVxuXG5mdW5jdGlvbiBjcmVhdGVQYXRjaEZ1bmN0aW9uIChiYWNrZW5kKSB7XG4gIHZhciBpLCBqO1xuICB2YXIgY2JzID0ge307XG5cbiAgdmFyIG1vZHVsZXMgPSBiYWNrZW5kLm1vZHVsZXM7XG4gIHZhciBub2RlT3BzID0gYmFja2VuZC5ub2RlT3BzO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBob29rcy5sZW5ndGg7ICsraSkge1xuICAgIGNic1tob29rc1tpXV0gPSBbXTtcbiAgICBmb3IgKGogPSAwOyBqIDwgbW9kdWxlcy5sZW5ndGg7ICsraikge1xuICAgICAgaWYgKGlzRGVmKG1vZHVsZXNbal1baG9va3NbaV1dKSkge1xuICAgICAgICBjYnNbaG9va3NbaV1dLnB1c2gobW9kdWxlc1tqXVtob29rc1tpXV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVtcHR5Tm9kZUF0IChlbG0pIHtcbiAgICByZXR1cm4gbmV3IFZOb2RlKG5vZGVPcHMudGFnTmFtZShlbG0pLnRvTG93ZXJDYXNlKCksIHt9LCBbXSwgdW5kZWZpbmVkLCBlbG0pXG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVSbUNiIChjaGlsZEVsbSwgbGlzdGVuZXJzKSB7XG4gICAgZnVuY3Rpb24gcmVtb3ZlICgpIHtcbiAgICAgIGlmICgtLXJlbW92ZS5saXN0ZW5lcnMgPT09IDApIHtcbiAgICAgICAgcmVtb3ZlTm9kZShjaGlsZEVsbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlbW92ZS5saXN0ZW5lcnMgPSBsaXN0ZW5lcnM7XG4gICAgcmV0dXJuIHJlbW92ZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTm9kZSAoZWwpIHtcbiAgICB2YXIgcGFyZW50ID0gbm9kZU9wcy5wYXJlbnROb2RlKGVsKTtcbiAgICAvLyBlbGVtZW50IG1heSBoYXZlIGFscmVhZHkgYmVlbiByZW1vdmVkIGR1ZSB0byB2LWh0bWwgLyB2LXRleHRcbiAgICBpZiAoaXNEZWYocGFyZW50KSkge1xuICAgICAgbm9kZU9wcy5yZW1vdmVDaGlsZChwYXJlbnQsIGVsKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc1Vua25vd25FbGVtZW50JCQxICh2bm9kZSwgaW5WUHJlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICFpblZQcmUgJiZcbiAgICAgICF2bm9kZS5ucyAmJlxuICAgICAgIShcbiAgICAgICAgY29uZmlnLmlnbm9yZWRFbGVtZW50cy5sZW5ndGggJiZcbiAgICAgICAgY29uZmlnLmlnbm9yZWRFbGVtZW50cy5zb21lKGZ1bmN0aW9uIChpZ25vcmUpIHtcbiAgICAgICAgICByZXR1cm4gaXNSZWdFeHAoaWdub3JlKVxuICAgICAgICAgICAgPyBpZ25vcmUudGVzdCh2bm9kZS50YWcpXG4gICAgICAgICAgICA6IGlnbm9yZSA9PT0gdm5vZGUudGFnXG4gICAgICAgIH0pXG4gICAgICApICYmXG4gICAgICBjb25maWcuaXNVbmtub3duRWxlbWVudCh2bm9kZS50YWcpXG4gICAgKVxuICB9XG5cbiAgdmFyIGNyZWF0aW5nRWxtSW5WUHJlID0gMDtcblxuICBmdW5jdGlvbiBjcmVhdGVFbG0gKFxuICAgIHZub2RlLFxuICAgIGluc2VydGVkVm5vZGVRdWV1ZSxcbiAgICBwYXJlbnRFbG0sXG4gICAgcmVmRWxtLFxuICAgIG5lc3RlZCxcbiAgICBvd25lckFycmF5LFxuICAgIGluZGV4XG4gICkge1xuICAgIGlmIChpc0RlZih2bm9kZS5lbG0pICYmIGlzRGVmKG93bmVyQXJyYXkpKSB7XG4gICAgICAvLyBUaGlzIHZub2RlIHdhcyB1c2VkIGluIGEgcHJldmlvdXMgcmVuZGVyIVxuICAgICAgLy8gbm93IGl0J3MgdXNlZCBhcyBhIG5ldyBub2RlLCBvdmVyd3JpdGluZyBpdHMgZWxtIHdvdWxkIGNhdXNlXG4gICAgICAvLyBwb3RlbnRpYWwgcGF0Y2ggZXJyb3JzIGRvd24gdGhlIHJvYWQgd2hlbiBpdCdzIHVzZWQgYXMgYW4gaW5zZXJ0aW9uXG4gICAgICAvLyByZWZlcmVuY2Ugbm9kZS4gSW5zdGVhZCwgd2UgY2xvbmUgdGhlIG5vZGUgb24tZGVtYW5kIGJlZm9yZSBjcmVhdGluZ1xuICAgICAgLy8gYXNzb2NpYXRlZCBET00gZWxlbWVudCBmb3IgaXQuXG4gICAgICB2bm9kZSA9IG93bmVyQXJyYXlbaW5kZXhdID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gICAgfVxuXG4gICAgdm5vZGUuaXNSb290SW5zZXJ0ID0gIW5lc3RlZDsgLy8gZm9yIHRyYW5zaXRpb24gZW50ZXIgY2hlY2tcbiAgICBpZiAoY3JlYXRlQ29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuICAgIHZhciBjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICAgIHZhciB0YWcgPSB2bm9kZS50YWc7XG4gICAgaWYgKGlzRGVmKHRhZykpIHtcbiAgICAgIHtcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5wcmUpIHtcbiAgICAgICAgICBjcmVhdGluZ0VsbUluVlByZSsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Vua25vd25FbGVtZW50JCQxKHZub2RlLCBjcmVhdGluZ0VsbUluVlByZSkpIHtcbiAgICAgICAgICB3YXJuKFxuICAgICAgICAgICAgJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSBkaWQgeW91ICcgK1xuICAgICAgICAgICAgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgK1xuICAgICAgICAgICAgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyxcbiAgICAgICAgICAgIHZub2RlLmNvbnRleHRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZub2RlLmVsbSA9IHZub2RlLm5zXG4gICAgICAgID8gbm9kZU9wcy5jcmVhdGVFbGVtZW50TlModm5vZGUubnMsIHRhZylcbiAgICAgICAgOiBub2RlT3BzLmNyZWF0ZUVsZW1lbnQodGFnLCB2bm9kZSk7XG4gICAgICBzZXRTY29wZSh2bm9kZSk7XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAge1xuICAgICAgICBjcmVhdGVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4sIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgIGlmIChpc0RlZihkYXRhKSkge1xuICAgICAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICB9XG4gICAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGRhdGEgJiYgZGF0YS5wcmUpIHtcbiAgICAgICAgY3JlYXRpbmdFbG1JblZQcmUtLTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpKSB7XG4gICAgICB2bm9kZS5lbG0gPSBub2RlT3BzLmNyZWF0ZUNvbW1lbnQodm5vZGUudGV4dCk7XG4gICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZub2RlLmVsbSA9IG5vZGVPcHMuY3JlYXRlVGV4dE5vZGUodm5vZGUudGV4dCk7XG4gICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50ICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuICAgIHZhciBpID0gdm5vZGUuZGF0YTtcbiAgICBpZiAoaXNEZWYoaSkpIHtcbiAgICAgIHZhciBpc1JlYWN0aXZhdGVkID0gaXNEZWYodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpICYmIGkua2VlcEFsaXZlO1xuICAgICAgaWYgKGlzRGVmKGkgPSBpLmhvb2spICYmIGlzRGVmKGkgPSBpLmluaXQpKSB7XG4gICAgICAgIGkodm5vZGUsIGZhbHNlIC8qIGh5ZHJhdGluZyAqLywgcGFyZW50RWxtLCByZWZFbG0pO1xuICAgICAgfVxuICAgICAgLy8gYWZ0ZXIgY2FsbGluZyB0aGUgaW5pdCBob29rLCBpZiB0aGUgdm5vZGUgaXMgYSBjaGlsZCBjb21wb25lbnRcbiAgICAgIC8vIGl0IHNob3VsZCd2ZSBjcmVhdGVkIGEgY2hpbGQgaW5zdGFuY2UgYW5kIG1vdW50ZWQgaXQuIHRoZSBjaGlsZFxuICAgICAgLy8gY29tcG9uZW50IGFsc28gaGFzIHNldCB0aGUgcGxhY2Vob2xkZXIgdm5vZGUncyBlbG0uXG4gICAgICAvLyBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3QgcmV0dXJuIHRoZSBlbGVtZW50IGFuZCBiZSBkb25lLlxuICAgICAgaWYgKGlzRGVmKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuICAgICAgICBpbml0Q29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICBpZiAoaXNUcnVlKGlzUmVhY3RpdmF0ZWQpKSB7XG4gICAgICAgICAgcmVhY3RpdmF0ZUNvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbml0Q29tcG9uZW50ICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG4gICAgaWYgKGlzRGVmKHZub2RlLmRhdGEucGVuZGluZ0luc2VydCkpIHtcbiAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoLmFwcGx5KGluc2VydGVkVm5vZGVRdWV1ZSwgdm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0KTtcbiAgICAgIHZub2RlLmRhdGEucGVuZGluZ0luc2VydCA9IG51bGw7XG4gICAgfVxuICAgIHZub2RlLmVsbSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlLiRlbDtcbiAgICBpZiAoaXNQYXRjaGFibGUodm5vZGUpKSB7XG4gICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgIHNldFNjb3BlKHZub2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZW1wdHkgY29tcG9uZW50IHJvb3QuXG4gICAgICAvLyBza2lwIGFsbCBlbGVtZW50LXJlbGF0ZWQgbW9kdWxlcyBleGNlcHQgZm9yIHJlZiAoIzM0NTUpXG4gICAgICByZWdpc3RlclJlZih2bm9kZSk7XG4gICAgICAvLyBtYWtlIHN1cmUgdG8gaW52b2tlIHRoZSBpbnNlcnQgaG9va1xuICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2godm5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWN0aXZhdGVDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSB7XG4gICAgdmFyIGk7XG4gICAgLy8gaGFjayBmb3IgIzQzMzk6IGEgcmVhY3RpdmF0ZWQgY29tcG9uZW50IHdpdGggaW5uZXIgdHJhbnNpdGlvblxuICAgIC8vIGRvZXMgbm90IHRyaWdnZXIgYmVjYXVzZSB0aGUgaW5uZXIgbm9kZSdzIGNyZWF0ZWQgaG9va3MgYXJlIG5vdCBjYWxsZWRcbiAgICAvLyBhZ2Fpbi4gSXQncyBub3QgaWRlYWwgdG8gaW52b2x2ZSBtb2R1bGUtc3BlY2lmaWMgbG9naWMgaW4gaGVyZSBidXRcbiAgICAvLyB0aGVyZSBkb2Vzbid0IHNlZW0gdG8gYmUgYSBiZXR0ZXIgd2F5IHRvIGRvIGl0LlxuICAgIHZhciBpbm5lck5vZGUgPSB2bm9kZTtcbiAgICB3aGlsZSAoaW5uZXJOb2RlLmNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgICBpbm5lck5vZGUgPSBpbm5lck5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlO1xuICAgICAgaWYgKGlzRGVmKGkgPSBpbm5lck5vZGUuZGF0YSkgJiYgaXNEZWYoaSA9IGkudHJhbnNpdGlvbikpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5hY3RpdmF0ZS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGNicy5hY3RpdmF0ZVtpXShlbXB0eU5vZGUsIGlubmVyTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2goaW5uZXJOb2RlKTtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gdW5saWtlIGEgbmV3bHkgY3JlYXRlZCBjb21wb25lbnQsXG4gICAgLy8gYSByZWFjdGl2YXRlZCBrZWVwLWFsaXZlIGNvbXBvbmVudCBkb2Vzbid0IGluc2VydCBpdHNlbGZcbiAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnNlcnQgKHBhcmVudCwgZWxtLCByZWYkJDEpIHtcbiAgICBpZiAoaXNEZWYocGFyZW50KSkge1xuICAgICAgaWYgKGlzRGVmKHJlZiQkMSkpIHtcbiAgICAgICAgaWYgKHJlZiQkMS5wYXJlbnROb2RlID09PSBwYXJlbnQpIHtcbiAgICAgICAgICBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnQsIGVsbSwgcmVmJCQxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZU9wcy5hcHBlbmRDaGlsZChwYXJlbnQsIGVsbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQ2hpbGRyZW4gKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgICB7XG4gICAgICAgIGNoZWNrRHVwbGljYXRlS2V5cyhjaGlsZHJlbik7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNyZWF0ZUVsbShjaGlsZHJlbltpXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCB2bm9kZS5lbG0sIG51bGwsIHRydWUsIGNoaWxkcmVuLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzUHJpbWl0aXZlKHZub2RlLnRleHQpKSB7XG4gICAgICBub2RlT3BzLmFwcGVuZENoaWxkKHZub2RlLmVsbSwgbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZShTdHJpbmcodm5vZGUudGV4dCkpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc1BhdGNoYWJsZSAodm5vZGUpIHtcbiAgICB3aGlsZSAodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgIHZub2RlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlO1xuICAgIH1cbiAgICByZXR1cm4gaXNEZWYodm5vZGUudGFnKVxuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlQ3JlYXRlSG9va3MgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpIHtcbiAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjYnMuY3JlYXRlLmxlbmd0aDsgKytpJDEpIHtcbiAgICAgIGNicy5jcmVhdGVbaSQxXShlbXB0eU5vZGUsIHZub2RlKTtcbiAgICB9XG4gICAgaSA9IHZub2RlLmRhdGEuaG9vazsgLy8gUmV1c2UgdmFyaWFibGVcbiAgICBpZiAoaXNEZWYoaSkpIHtcbiAgICAgIGlmIChpc0RlZihpLmNyZWF0ZSkpIHsgaS5jcmVhdGUoZW1wdHlOb2RlLCB2bm9kZSk7IH1cbiAgICAgIGlmIChpc0RlZihpLmluc2VydCkpIHsgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2godm5vZGUpOyB9XG4gICAgfVxuICB9XG5cbiAgLy8gc2V0IHNjb3BlIGlkIGF0dHJpYnV0ZSBmb3Igc2NvcGVkIENTUy5cbiAgLy8gdGhpcyBpcyBpbXBsZW1lbnRlZCBhcyBhIHNwZWNpYWwgY2FzZSB0byBhdm9pZCB0aGUgb3ZlcmhlYWRcbiAgLy8gb2YgZ29pbmcgdGhyb3VnaCB0aGUgbm9ybWFsIGF0dHJpYnV0ZSBwYXRjaGluZyBwcm9jZXNzLlxuICBmdW5jdGlvbiBzZXRTY29wZSAodm5vZGUpIHtcbiAgICB2YXIgaTtcbiAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmZuU2NvcGVJZCkpIHtcbiAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYW5jZXN0b3IgPSB2bm9kZTtcbiAgICAgIHdoaWxlIChhbmNlc3Rvcikge1xuICAgICAgICBpZiAoaXNEZWYoaSA9IGFuY2VzdG9yLmNvbnRleHQpICYmIGlzRGVmKGkgPSBpLiRvcHRpb25zLl9zY29wZUlkKSkge1xuICAgICAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpO1xuICAgICAgICB9XG4gICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50O1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBmb3Igc2xvdCBjb250ZW50IHRoZXkgc2hvdWxkIGFsc28gZ2V0IHRoZSBzY29wZUlkIGZyb20gdGhlIGhvc3QgaW5zdGFuY2UuXG4gICAgaWYgKGlzRGVmKGkgPSBhY3RpdmVJbnN0YW5jZSkgJiZcbiAgICAgIGkgIT09IHZub2RlLmNvbnRleHQgJiZcbiAgICAgIGkgIT09IHZub2RlLmZuQ29udGV4dCAmJlxuICAgICAgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpXG4gICAgKSB7XG4gICAgICBub2RlT3BzLnNldFN0eWxlU2NvcGUodm5vZGUuZWxtLCBpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhZGRWbm9kZXMgKHBhcmVudEVsbSwgcmVmRWxtLCB2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuICAgIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHtcbiAgICAgIGNyZWF0ZUVsbSh2bm9kZXNbc3RhcnRJZHhdLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtLCBmYWxzZSwgdm5vZGVzLCBzdGFydElkeCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRGVzdHJveUhvb2sgKHZub2RlKSB7XG4gICAgdmFyIGksIGo7XG4gICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuICAgIGlmIChpc0RlZihkYXRhKSkge1xuICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLmRlc3Ryb3kpKSB7IGkodm5vZGUpOyB9XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmRlc3Ryb3kubGVuZ3RoOyArK2kpIHsgY2JzLmRlc3Ryb3lbaV0odm5vZGUpOyB9XG4gICAgfVxuICAgIGlmIChpc0RlZihpID0gdm5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgdm5vZGUuY2hpbGRyZW4ubGVuZ3RoOyArK2opIHtcbiAgICAgICAgaW52b2tlRGVzdHJveUhvb2sodm5vZGUuY2hpbGRyZW5bal0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVZub2RlcyAocGFyZW50RWxtLCB2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgpIHtcbiAgICBmb3IgKDsgc3RhcnRJZHggPD0gZW5kSWR4OyArK3N0YXJ0SWR4KSB7XG4gICAgICB2YXIgY2ggPSB2bm9kZXNbc3RhcnRJZHhdO1xuICAgICAgaWYgKGlzRGVmKGNoKSkge1xuICAgICAgICBpZiAoaXNEZWYoY2gudGFnKSkge1xuICAgICAgICAgIHJlbW92ZUFuZEludm9rZVJlbW92ZUhvb2soY2gpO1xuICAgICAgICAgIGludm9rZURlc3Ryb3lIb29rKGNoKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gVGV4dCBub2RlXG4gICAgICAgICAgcmVtb3ZlTm9kZShjaC5lbG0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayAodm5vZGUsIHJtKSB7XG4gICAgaWYgKGlzRGVmKHJtKSB8fCBpc0RlZih2bm9kZS5kYXRhKSkge1xuICAgICAgdmFyIGk7XG4gICAgICB2YXIgbGlzdGVuZXJzID0gY2JzLnJlbW92ZS5sZW5ndGggKyAxO1xuICAgICAgaWYgKGlzRGVmKHJtKSkge1xuICAgICAgICAvLyB3ZSBoYXZlIGEgcmVjdXJzaXZlbHkgcGFzc2VkIGRvd24gcm0gY2FsbGJhY2tcbiAgICAgICAgLy8gaW5jcmVhc2UgdGhlIGxpc3RlbmVycyBjb3VudFxuICAgICAgICBybS5saXN0ZW5lcnMgKz0gbGlzdGVuZXJzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGlyZWN0bHkgcmVtb3ZpbmdcbiAgICAgICAgcm0gPSBjcmVhdGVSbUNiKHZub2RlLmVsbSwgbGlzdGVuZXJzKTtcbiAgICAgIH1cbiAgICAgIC8vIHJlY3Vyc2l2ZWx5IGludm9rZSBob29rcyBvbiBjaGlsZCBjb21wb25lbnQgcm9vdCBub2RlXG4gICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSAmJiBpc0RlZihpID0gaS5fdm5vZGUpICYmIGlzRGVmKGkuZGF0YSkpIHtcbiAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhpLCBybSk7XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLnJlbW92ZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBjYnMucmVtb3ZlW2ldKHZub2RlLCBybSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkucmVtb3ZlKSkge1xuICAgICAgICBpKHZub2RlLCBybSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBybSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVOb2RlKHZub2RlLmVsbSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRyZW4gKHBhcmVudEVsbSwgb2xkQ2gsIG5ld0NoLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpIHtcbiAgICB2YXIgb2xkU3RhcnRJZHggPSAwO1xuICAgIHZhciBuZXdTdGFydElkeCA9IDA7XG4gICAgdmFyIG9sZEVuZElkeCA9IG9sZENoLmxlbmd0aCAtIDE7XG4gICAgdmFyIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFswXTtcbiAgICB2YXIgb2xkRW5kVm5vZGUgPSBvbGRDaFtvbGRFbmRJZHhdO1xuICAgIHZhciBuZXdFbmRJZHggPSBuZXdDaC5sZW5ndGggLSAxO1xuICAgIHZhciBuZXdTdGFydFZub2RlID0gbmV3Q2hbMF07XG4gICAgdmFyIG5ld0VuZFZub2RlID0gbmV3Q2hbbmV3RW5kSWR4XTtcbiAgICB2YXIgb2xkS2V5VG9JZHgsIGlkeEluT2xkLCB2bm9kZVRvTW92ZSwgcmVmRWxtO1xuXG4gICAgLy8gcmVtb3ZlT25seSBpcyBhIHNwZWNpYWwgZmxhZyB1c2VkIG9ubHkgYnkgPHRyYW5zaXRpb24tZ3JvdXA+XG4gICAgLy8gdG8gZW5zdXJlIHJlbW92ZWQgZWxlbWVudHMgc3RheSBpbiBjb3JyZWN0IHJlbGF0aXZlIHBvc2l0aW9uc1xuICAgIC8vIGR1cmluZyBsZWF2aW5nIHRyYW5zaXRpb25zXG4gICAgdmFyIGNhbk1vdmUgPSAhcmVtb3ZlT25seTtcblxuICAgIHtcbiAgICAgIGNoZWNrRHVwbGljYXRlS2V5cyhuZXdDaCk7XG4gICAgfVxuXG4gICAgd2hpbGUgKG9sZFN0YXJ0SWR4IDw9IG9sZEVuZElkeCAmJiBuZXdTdGFydElkeCA8PSBuZXdFbmRJZHgpIHtcbiAgICAgIGlmIChpc1VuZGVmKG9sZFN0YXJ0Vm5vZGUpKSB7XG4gICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTsgLy8gVm5vZGUgaGFzIGJlZW4gbW92ZWQgbGVmdFxuICAgICAgfSBlbHNlIGlmIChpc1VuZGVmKG9sZEVuZFZub2RlKSkge1xuICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld1N0YXJ0Vm5vZGUpKSB7XG4gICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdO1xuICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG4gICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUpKSB7XG4gICAgICAgIHBhdGNoVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICAgICAgbmV3RW5kVm5vZGUgPSBuZXdDaFstLW5ld0VuZElkeF07XG4gICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgcmlnaHRcbiAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtLCBub2RlT3BzLm5leHRTaWJsaW5nKG9sZEVuZFZub2RlLmVsbSkpO1xuICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07XG4gICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld1N0YXJ0Vm5vZGUpKSB7IC8vIFZub2RlIG1vdmVkIGxlZnRcbiAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZEVuZFZub2RlLmVsbSwgb2xkU3RhcnRWbm9kZS5lbG0pO1xuICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzVW5kZWYob2xkS2V5VG9JZHgpKSB7IG9sZEtleVRvSWR4ID0gY3JlYXRlS2V5VG9PbGRJZHgob2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOyB9XG4gICAgICAgIGlkeEluT2xkID0gaXNEZWYobmV3U3RhcnRWbm9kZS5rZXkpXG4gICAgICAgICAgPyBvbGRLZXlUb0lkeFtuZXdTdGFydFZub2RlLmtleV1cbiAgICAgICAgICA6IGZpbmRJZHhJbk9sZChuZXdTdGFydFZub2RlLCBvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7XG4gICAgICAgIGlmIChpc1VuZGVmKGlkeEluT2xkKSkgeyAvLyBOZXcgZWxlbWVudFxuICAgICAgICAgIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIGZhbHNlLCBuZXdDaCwgbmV3U3RhcnRJZHgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZub2RlVG9Nb3ZlID0gb2xkQ2hbaWR4SW5PbGRdO1xuICAgICAgICAgIGlmIChzYW1lVm5vZGUodm5vZGVUb01vdmUsIG5ld1N0YXJ0Vm5vZGUpKSB7XG4gICAgICAgICAgICBwYXRjaFZub2RlKHZub2RlVG9Nb3ZlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICAgICAgb2xkQ2hbaWR4SW5PbGRdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIHZub2RlVG9Nb3ZlLmVsbSwgb2xkU3RhcnRWbm9kZS5lbG0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBzYW1lIGtleSBidXQgZGlmZmVyZW50IGVsZW1lbnQuIHRyZWF0IGFzIG5ldyBlbGVtZW50XG4gICAgICAgICAgICBjcmVhdGVFbG0obmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtLCBmYWxzZSwgbmV3Q2gsIG5ld1N0YXJ0SWR4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob2xkU3RhcnRJZHggPiBvbGRFbmRJZHgpIHtcbiAgICAgIHJlZkVsbSA9IGlzVW5kZWYobmV3Q2hbbmV3RW5kSWR4ICsgMV0pID8gbnVsbCA6IG5ld0NoW25ld0VuZElkeCArIDFdLmVsbTtcbiAgICAgIGFkZFZub2RlcyhwYXJlbnRFbG0sIHJlZkVsbSwgbmV3Q2gsIG5ld1N0YXJ0SWR4LCBuZXdFbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgfSBlbHNlIGlmIChuZXdTdGFydElkeCA+IG5ld0VuZElkeCkge1xuICAgICAgcmVtb3ZlVm5vZGVzKHBhcmVudEVsbSwgb2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrRHVwbGljYXRlS2V5cyAoY2hpbGRyZW4pIHtcbiAgICB2YXIgc2VlbktleXMgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdm5vZGUgPSBjaGlsZHJlbltpXTtcbiAgICAgIHZhciBrZXkgPSB2bm9kZS5rZXk7XG4gICAgICBpZiAoaXNEZWYoa2V5KSkge1xuICAgICAgICBpZiAoc2VlbktleXNba2V5XSkge1xuICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICAoXCJEdXBsaWNhdGUga2V5cyBkZXRlY3RlZDogJ1wiICsga2V5ICsgXCInLiBUaGlzIG1heSBjYXVzZSBhbiB1cGRhdGUgZXJyb3IuXCIpLFxuICAgICAgICAgICAgdm5vZGUuY29udGV4dFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VlbktleXNba2V5XSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kSWR4SW5PbGQgKG5vZGUsIG9sZENoLCBzdGFydCwgZW5kKSB7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHZhciBjID0gb2xkQ2hbaV07XG4gICAgICBpZiAoaXNEZWYoYykgJiYgc2FtZVZub2RlKG5vZGUsIGMpKSB7IHJldHVybiBpIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXRjaFZub2RlIChvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSkge1xuICAgIGlmIChvbGRWbm9kZSA9PT0gdm5vZGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBlbG0gPSB2bm9kZS5lbG0gPSBvbGRWbm9kZS5lbG07XG5cbiAgICBpZiAoaXNUcnVlKG9sZFZub2RlLmlzQXN5bmNQbGFjZWhvbGRlcikpIHtcbiAgICAgIGlmIChpc0RlZih2bm9kZS5hc3luY0ZhY3RvcnkucmVzb2x2ZWQpKSB7XG4gICAgICAgIGh5ZHJhdGUob2xkVm5vZGUuZWxtLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZub2RlLmlzQXN5bmNQbGFjZWhvbGRlciA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyByZXVzZSBlbGVtZW50IGZvciBzdGF0aWMgdHJlZXMuXG4gICAgLy8gbm90ZSB3ZSBvbmx5IGRvIHRoaXMgaWYgdGhlIHZub2RlIGlzIGNsb25lZCAtXG4gICAgLy8gaWYgdGhlIG5ldyBub2RlIGlzIG5vdCBjbG9uZWQgaXQgbWVhbnMgdGhlIHJlbmRlciBmdW5jdGlvbnMgaGF2ZSBiZWVuXG4gICAgLy8gcmVzZXQgYnkgdGhlIGhvdC1yZWxvYWQtYXBpIGFuZCB3ZSBuZWVkIHRvIGRvIGEgcHJvcGVyIHJlLXJlbmRlci5cbiAgICBpZiAoaXNUcnVlKHZub2RlLmlzU3RhdGljKSAmJlxuICAgICAgaXNUcnVlKG9sZFZub2RlLmlzU3RhdGljKSAmJlxuICAgICAgdm5vZGUua2V5ID09PSBvbGRWbm9kZS5rZXkgJiZcbiAgICAgIChpc1RydWUodm5vZGUuaXNDbG9uZWQpIHx8IGlzVHJ1ZSh2bm9kZS5pc09uY2UpKVxuICAgICkge1xuICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBvbGRWbm9kZS5jb21wb25lbnRJbnN0YW5jZTtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBpO1xuICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcbiAgICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkucHJlcGF0Y2gpKSB7XG4gICAgICBpKG9sZFZub2RlLCB2bm9kZSk7XG4gICAgfVxuXG4gICAgdmFyIG9sZENoID0gb2xkVm5vZGUuY2hpbGRyZW47XG4gICAgdmFyIGNoID0gdm5vZGUuY2hpbGRyZW47XG4gICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzUGF0Y2hhYmxlKHZub2RlKSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGNicy51cGRhdGUubGVuZ3RoOyArK2kpIHsgY2JzLnVwZGF0ZVtpXShvbGRWbm9kZSwgdm5vZGUpOyB9XG4gICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkudXBkYXRlKSkgeyBpKG9sZFZub2RlLCB2bm9kZSk7IH1cbiAgICB9XG4gICAgaWYgKGlzVW5kZWYodm5vZGUudGV4dCkpIHtcbiAgICAgIGlmIChpc0RlZihvbGRDaCkgJiYgaXNEZWYoY2gpKSB7XG4gICAgICAgIGlmIChvbGRDaCAhPT0gY2gpIHsgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaCwgY2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSk7IH1cbiAgICAgIH0gZWxzZSBpZiAoaXNEZWYoY2gpKSB7XG4gICAgICAgIGlmIChpc0RlZihvbGRWbm9kZS50ZXh0KSkgeyBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgJycpOyB9XG4gICAgICAgIGFkZFZub2RlcyhlbG0sIG51bGwsIGNoLCAwLCBjaC5sZW5ndGggLSAxLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgfSBlbHNlIGlmIChpc0RlZihvbGRDaCkpIHtcbiAgICAgICAgcmVtb3ZlVm5vZGVzKGVsbSwgb2xkQ2gsIDAsIG9sZENoLmxlbmd0aCAtIDEpO1xuICAgICAgfSBlbHNlIGlmIChpc0RlZihvbGRWbm9kZS50ZXh0KSkge1xuICAgICAgICBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgJycpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob2xkVm5vZGUudGV4dCAhPT0gdm5vZGUudGV4dCkge1xuICAgICAgbm9kZU9wcy5zZXRUZXh0Q29udGVudChlbG0sIHZub2RlLnRleHQpO1xuICAgIH1cbiAgICBpZiAoaXNEZWYoZGF0YSkpIHtcbiAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5wb3N0cGF0Y2gpKSB7IGkob2xkVm5vZGUsIHZub2RlKTsgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUluc2VydEhvb2sgKHZub2RlLCBxdWV1ZSwgaW5pdGlhbCkge1xuICAgIC8vIGRlbGF5IGluc2VydCBob29rcyBmb3IgY29tcG9uZW50IHJvb3Qgbm9kZXMsIGludm9rZSB0aGVtIGFmdGVyIHRoZVxuICAgIC8vIGVsZW1lbnQgaXMgcmVhbGx5IGluc2VydGVkXG4gICAgaWYgKGlzVHJ1ZShpbml0aWFsKSAmJiBpc0RlZih2bm9kZS5wYXJlbnQpKSB7XG4gICAgICB2bm9kZS5wYXJlbnQuZGF0YS5wZW5kaW5nSW5zZXJ0ID0gcXVldWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgcXVldWVbaV0uZGF0YS5ob29rLmluc2VydChxdWV1ZVtpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGh5ZHJhdGlvbkJhaWxlZCA9IGZhbHNlO1xuICAvLyBsaXN0IG9mIG1vZHVsZXMgdGhhdCBjYW4gc2tpcCBjcmVhdGUgaG9vayBkdXJpbmcgaHlkcmF0aW9uIGJlY2F1c2UgdGhleVxuICAvLyBhcmUgYWxyZWFkeSByZW5kZXJlZCBvbiB0aGUgY2xpZW50IG9yIGhhcyBubyBuZWVkIGZvciBpbml0aWFsaXphdGlvblxuICAvLyBOb3RlOiBzdHlsZSBpcyBleGNsdWRlZCBiZWNhdXNlIGl0IHJlbGllcyBvbiBpbml0aWFsIGNsb25lIGZvciBmdXR1cmVcbiAgLy8gZGVlcCB1cGRhdGVzICgjNzA2MykuXG4gIHZhciBpc1JlbmRlcmVkTW9kdWxlID0gbWFrZU1hcCgnYXR0cnMsY2xhc3Msc3RhdGljQ2xhc3Msc3RhdGljU3R5bGUsa2V5Jyk7XG5cbiAgLy8gTm90ZTogdGhpcyBpcyBhIGJyb3dzZXItb25seSBmdW5jdGlvbiBzbyB3ZSBjYW4gYXNzdW1lIGVsbXMgYXJlIERPTSBub2Rlcy5cbiAgZnVuY3Rpb24gaHlkcmF0ZSAoZWxtLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpblZQcmUpIHtcbiAgICB2YXIgaTtcbiAgICB2YXIgdGFnID0gdm5vZGUudGFnO1xuICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcbiAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcbiAgICBpblZQcmUgPSBpblZQcmUgfHwgKGRhdGEgJiYgZGF0YS5wcmUpO1xuICAgIHZub2RlLmVsbSA9IGVsbTtcblxuICAgIGlmIChpc1RydWUodm5vZGUuaXNDb21tZW50KSAmJiBpc0RlZih2bm9kZS5hc3luY0ZhY3RvcnkpKSB7XG4gICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgLy8gYXNzZXJ0IG5vZGUgbWF0Y2hcbiAgICB7XG4gICAgICBpZiAoIWFzc2VydE5vZGVNYXRjaChlbG0sIHZub2RlLCBpblZQcmUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNEZWYoZGF0YSkpIHtcbiAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5pbml0KSkgeyBpKHZub2RlLCB0cnVlIC8qIGh5ZHJhdGluZyAqLyk7IH1cbiAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UpKSB7XG4gICAgICAgIC8vIGNoaWxkIGNvbXBvbmVudC4gaXQgc2hvdWxkIGhhdmUgaHlkcmF0ZWQgaXRzIG93biB0cmVlLlxuICAgICAgICBpbml0Q29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNEZWYodGFnKSkge1xuICAgICAgaWYgKGlzRGVmKGNoaWxkcmVuKSkge1xuICAgICAgICAvLyBlbXB0eSBlbGVtZW50LCBhbGxvdyBjbGllbnQgdG8gcGljayB1cCBhbmQgcG9wdWxhdGUgY2hpbGRyZW5cbiAgICAgICAgaWYgKCFlbG0uaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgY3JlYXRlQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHYtaHRtbCBhbmQgZG9tUHJvcHM6IGlubmVySFRNTFxuICAgICAgICAgIGlmIChpc0RlZihpID0gZGF0YSkgJiYgaXNEZWYoaSA9IGkuZG9tUHJvcHMpICYmIGlzRGVmKGkgPSBpLmlubmVySFRNTCkpIHtcbiAgICAgICAgICAgIGlmIChpICE9PSBlbG0uaW5uZXJIVE1MKSB7XG4gICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICAhaHlkcmF0aW9uQmFpbGVkXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGh5ZHJhdGlvbkJhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQYXJlbnQ6ICcsIGVsbSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdzZXJ2ZXIgaW5uZXJIVE1MOiAnLCBpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2NsaWVudCBpbm5lckhUTUw6ICcsIGVsbS5pbm5lckhUTUwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBpdGVyYXRlIGFuZCBjb21wYXJlIGNoaWxkcmVuIGxpc3RzXG4gICAgICAgICAgICB2YXIgY2hpbGRyZW5NYXRjaCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgY2hpbGROb2RlID0gZWxtLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7XG4gICAgICAgICAgICAgIGlmICghY2hpbGROb2RlIHx8ICFoeWRyYXRlKGNoaWxkTm9kZSwgY2hpbGRyZW5baSQxXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpblZQcmUpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5NYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgY2hpbGROb2RlIGlzIG5vdCBudWxsLCBpdCBtZWFucyB0aGUgYWN0dWFsIGNoaWxkTm9kZXMgbGlzdCBpc1xuICAgICAgICAgICAgLy8gbG9uZ2VyIHRoYW4gdGhlIHZpcnR1YWwgY2hpbGRyZW4gbGlzdC5cbiAgICAgICAgICAgIGlmICghY2hpbGRyZW5NYXRjaCB8fCBjaGlsZE5vZGUpIHtcbiAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICAgICFoeWRyYXRpb25CYWlsZWRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaHlkcmF0aW9uQmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BhcmVudDogJywgZWxtKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01pc21hdGNoaW5nIGNoaWxkTm9kZXMgdnMuIFZOb2RlczogJywgZWxtLmNoaWxkTm9kZXMsIGNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0RlZihkYXRhKSkge1xuICAgICAgICB2YXIgZnVsbEludm9rZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgIGlmICghaXNSZW5kZXJlZE1vZHVsZShrZXkpKSB7XG4gICAgICAgICAgICBmdWxsSW52b2tlID0gdHJ1ZTtcbiAgICAgICAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmdWxsSW52b2tlICYmIGRhdGFbJ2NsYXNzJ10pIHtcbiAgICAgICAgICAvLyBlbnN1cmUgY29sbGVjdGluZyBkZXBzIGZvciBkZWVwIGNsYXNzIGJpbmRpbmdzIGZvciBmdXR1cmUgdXBkYXRlc1xuICAgICAgICAgIHRyYXZlcnNlKGRhdGFbJ2NsYXNzJ10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbG0uZGF0YSAhPT0gdm5vZGUudGV4dCkge1xuICAgICAgZWxtLmRhdGEgPSB2bm9kZS50ZXh0O1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gYXNzZXJ0Tm9kZU1hdGNoIChub2RlLCB2bm9kZSwgaW5WUHJlKSB7XG4gICAgaWYgKGlzRGVmKHZub2RlLnRhZykpIHtcbiAgICAgIHJldHVybiB2bm9kZS50YWcuaW5kZXhPZigndnVlLWNvbXBvbmVudCcpID09PSAwIHx8IChcbiAgICAgICAgIWlzVW5rbm93bkVsZW1lbnQkJDEodm5vZGUsIGluVlByZSkgJiZcbiAgICAgICAgdm5vZGUudGFnLnRvTG93ZXJDYXNlKCkgPT09IChub2RlLnRhZ05hbWUgJiYgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAodm5vZGUuaXNDb21tZW50ID8gOCA6IDMpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHBhdGNoIChvbGRWbm9kZSwgdm5vZGUsIGh5ZHJhdGluZywgcmVtb3ZlT25seSwgcGFyZW50RWxtLCByZWZFbG0pIHtcbiAgICBpZiAoaXNVbmRlZih2bm9kZSkpIHtcbiAgICAgIGlmIChpc0RlZihvbGRWbm9kZSkpIHsgaW52b2tlRGVzdHJveUhvb2sob2xkVm5vZGUpOyB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgaXNJbml0aWFsUGF0Y2ggPSBmYWxzZTtcbiAgICB2YXIgaW5zZXJ0ZWRWbm9kZVF1ZXVlID0gW107XG5cbiAgICBpZiAoaXNVbmRlZihvbGRWbm9kZSkpIHtcbiAgICAgIC8vIGVtcHR5IG1vdW50IChsaWtlbHkgYXMgY29tcG9uZW50KSwgY3JlYXRlIG5ldyByb290IGVsZW1lbnRcbiAgICAgIGlzSW5pdGlhbFBhdGNoID0gdHJ1ZTtcbiAgICAgIGNyZWF0ZUVsbSh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpc1JlYWxFbGVtZW50ID0gaXNEZWYob2xkVm5vZGUubm9kZVR5cGUpO1xuICAgICAgaWYgKCFpc1JlYWxFbGVtZW50ICYmIHNhbWVWbm9kZShvbGRWbm9kZSwgdm5vZGUpKSB7XG4gICAgICAgIC8vIHBhdGNoIGV4aXN0aW5nIHJvb3Qgbm9kZVxuICAgICAgICBwYXRjaFZub2RlKG9sZFZub2RlLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCByZW1vdmVPbmx5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc1JlYWxFbGVtZW50KSB7XG4gICAgICAgICAgLy8gbW91bnRpbmcgdG8gYSByZWFsIGVsZW1lbnRcbiAgICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIHNlcnZlci1yZW5kZXJlZCBjb250ZW50IGFuZCBpZiB3ZSBjYW4gcGVyZm9ybVxuICAgICAgICAgIC8vIGEgc3VjY2Vzc2Z1bCBoeWRyYXRpb24uXG4gICAgICAgICAgaWYgKG9sZFZub2RlLm5vZGVUeXBlID09PSAxICYmIG9sZFZub2RlLmhhc0F0dHJpYnV0ZShTU1JfQVRUUikpIHtcbiAgICAgICAgICAgIG9sZFZub2RlLnJlbW92ZUF0dHJpYnV0ZShTU1JfQVRUUik7XG4gICAgICAgICAgICBoeWRyYXRpbmcgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNUcnVlKGh5ZHJhdGluZykpIHtcbiAgICAgICAgICAgIGlmIChoeWRyYXRlKG9sZFZub2RlLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSkge1xuICAgICAgICAgICAgICBpbnZva2VJbnNlcnRIb29rKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHRydWUpO1xuICAgICAgICAgICAgICByZXR1cm4gb2xkVm5vZGVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICAgICAgJ1RoZSBjbGllbnQtc2lkZSByZW5kZXJlZCB2aXJ0dWFsIERPTSB0cmVlIGlzIG5vdCBtYXRjaGluZyAnICtcbiAgICAgICAgICAgICAgICAnc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQuIFRoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBpbmNvcnJlY3QgJyArXG4gICAgICAgICAgICAgICAgJ0hUTUwgbWFya3VwLCBmb3IgZXhhbXBsZSBuZXN0aW5nIGJsb2NrLWxldmVsIGVsZW1lbnRzIGluc2lkZSAnICtcbiAgICAgICAgICAgICAgICAnPHA+LCBvciBtaXNzaW5nIDx0Ym9keT4uIEJhaWxpbmcgaHlkcmF0aW9uIGFuZCBwZXJmb3JtaW5nICcgK1xuICAgICAgICAgICAgICAgICdmdWxsIGNsaWVudC1zaWRlIHJlbmRlci4nXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGVpdGhlciBub3Qgc2VydmVyLXJlbmRlcmVkLCBvciBoeWRyYXRpb24gZmFpbGVkLlxuICAgICAgICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBub2RlIGFuZCByZXBsYWNlIGl0XG4gICAgICAgICAgb2xkVm5vZGUgPSBlbXB0eU5vZGVBdChvbGRWbm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXBsYWNpbmcgZXhpc3RpbmcgZWxlbWVudFxuICAgICAgICB2YXIgb2xkRWxtID0gb2xkVm5vZGUuZWxtO1xuICAgICAgICB2YXIgcGFyZW50RWxtJDEgPSBub2RlT3BzLnBhcmVudE5vZGUob2xkRWxtKTtcblxuICAgICAgICAvLyBjcmVhdGUgbmV3IG5vZGVcbiAgICAgICAgY3JlYXRlRWxtKFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZSxcbiAgICAgICAgICAvLyBleHRyZW1lbHkgcmFyZSBlZGdlIGNhc2U6IGRvIG5vdCBpbnNlcnQgaWYgb2xkIGVsZW1lbnQgaXMgaW4gYVxuICAgICAgICAgIC8vIGxlYXZpbmcgdHJhbnNpdGlvbi4gT25seSBoYXBwZW5zIHdoZW4gY29tYmluaW5nIHRyYW5zaXRpb24gK1xuICAgICAgICAgIC8vIGtlZXAtYWxpdmUgKyBIT0NzLiAoIzQ1OTApXG4gICAgICAgICAgb2xkRWxtLl9sZWF2ZUNiID8gbnVsbCA6IHBhcmVudEVsbSQxLFxuICAgICAgICAgIG5vZGVPcHMubmV4dFNpYmxpbmcob2xkRWxtKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIHVwZGF0ZSBwYXJlbnQgcGxhY2Vob2xkZXIgbm9kZSBlbGVtZW50LCByZWN1cnNpdmVseVxuICAgICAgICBpZiAoaXNEZWYodm5vZGUucGFyZW50KSkge1xuICAgICAgICAgIHZhciBhbmNlc3RvciA9IHZub2RlLnBhcmVudDtcbiAgICAgICAgICB2YXIgcGF0Y2hhYmxlID0gaXNQYXRjaGFibGUodm5vZGUpO1xuICAgICAgICAgIHdoaWxlIChhbmNlc3Rvcikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMuZGVzdHJveS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICBjYnMuZGVzdHJveVtpXShhbmNlc3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmNlc3Rvci5lbG0gPSB2bm9kZS5lbG07XG4gICAgICAgICAgICBpZiAocGF0Y2hhYmxlKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkge1xuICAgICAgICAgICAgICAgIGNicy5jcmVhdGVbaSQxXShlbXB0eU5vZGUsIGFuY2VzdG9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyAjNjUxM1xuICAgICAgICAgICAgICAvLyBpbnZva2UgaW5zZXJ0IGhvb2tzIHRoYXQgbWF5IGhhdmUgYmVlbiBtZXJnZWQgYnkgY3JlYXRlIGhvb2tzLlxuICAgICAgICAgICAgICAvLyBlLmcuIGZvciBkaXJlY3RpdmVzIHRoYXQgdXNlcyB0aGUgXCJpbnNlcnRlZFwiIGhvb2suXG4gICAgICAgICAgICAgIHZhciBpbnNlcnQgPSBhbmNlc3Rvci5kYXRhLmhvb2suaW5zZXJ0O1xuICAgICAgICAgICAgICBpZiAoaW5zZXJ0Lm1lcmdlZCkge1xuICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGF0IGluZGV4IDEgdG8gYXZvaWQgcmUtaW52b2tpbmcgY29tcG9uZW50IG1vdW50ZWQgaG9va1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkkMiA9IDE7IGkkMiA8IGluc2VydC5mbnMubGVuZ3RoOyBpJDIrKykge1xuICAgICAgICAgICAgICAgICAgaW5zZXJ0LmZuc1tpJDJdKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWdpc3RlclJlZihhbmNlc3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZXN0cm95IG9sZCBub2RlXG4gICAgICAgIGlmIChpc0RlZihwYXJlbnRFbG0kMSkpIHtcbiAgICAgICAgICByZW1vdmVWbm9kZXMocGFyZW50RWxtJDEsIFtvbGRWbm9kZV0sIDAsIDApO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRGVmKG9sZFZub2RlLnRhZykpIHtcbiAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayhvbGRWbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbnZva2VJbnNlcnRIb29rKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGlzSW5pdGlhbFBhdGNoKTtcbiAgICByZXR1cm4gdm5vZGUuZWxtXG4gIH1cbn1cblxuLyogICovXG5cbnZhciBkaXJlY3RpdmVzID0ge1xuICBjcmVhdGU6IHVwZGF0ZURpcmVjdGl2ZXMsXG4gIHVwZGF0ZTogdXBkYXRlRGlyZWN0aXZlcyxcbiAgZGVzdHJveTogZnVuY3Rpb24gdW5iaW5kRGlyZWN0aXZlcyAodm5vZGUpIHtcbiAgICB1cGRhdGVEaXJlY3RpdmVzKHZub2RlLCBlbXB0eU5vZGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURpcmVjdGl2ZXMgKG9sZFZub2RlLCB2bm9kZSkge1xuICBpZiAob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzIHx8IHZub2RlLmRhdGEuZGlyZWN0aXZlcykge1xuICAgIF91cGRhdGUob2xkVm5vZGUsIHZub2RlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgdmFyIGlzQ3JlYXRlID0gb2xkVm5vZGUgPT09IGVtcHR5Tm9kZTtcbiAgdmFyIGlzRGVzdHJveSA9IHZub2RlID09PSBlbXB0eU5vZGU7XG4gIHZhciBvbGREaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKG9sZFZub2RlLmRhdGEuZGlyZWN0aXZlcywgb2xkVm5vZGUuY29udGV4dCk7XG4gIHZhciBuZXdEaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKHZub2RlLmRhdGEuZGlyZWN0aXZlcywgdm5vZGUuY29udGV4dCk7XG5cbiAgdmFyIGRpcnNXaXRoSW5zZXJ0ID0gW107XG4gIHZhciBkaXJzV2l0aFBvc3RwYXRjaCA9IFtdO1xuXG4gIHZhciBrZXksIG9sZERpciwgZGlyO1xuICBmb3IgKGtleSBpbiBuZXdEaXJzKSB7XG4gICAgb2xkRGlyID0gb2xkRGlyc1trZXldO1xuICAgIGRpciA9IG5ld0RpcnNba2V5XTtcbiAgICBpZiAoIW9sZERpcikge1xuICAgICAgLy8gbmV3IGRpcmVjdGl2ZSwgYmluZFxuICAgICAgY2FsbEhvb2skMShkaXIsICdiaW5kJywgdm5vZGUsIG9sZFZub2RlKTtcbiAgICAgIGlmIChkaXIuZGVmICYmIGRpci5kZWYuaW5zZXJ0ZWQpIHtcbiAgICAgICAgZGlyc1dpdGhJbnNlcnQucHVzaChkaXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBleGlzdGluZyBkaXJlY3RpdmUsIHVwZGF0ZVxuICAgICAgZGlyLm9sZFZhbHVlID0gb2xkRGlyLnZhbHVlO1xuICAgICAgY2FsbEhvb2skMShkaXIsICd1cGRhdGUnLCB2bm9kZSwgb2xkVm5vZGUpO1xuICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5jb21wb25lbnRVcGRhdGVkKSB7XG4gICAgICAgIGRpcnNXaXRoUG9zdHBhdGNoLnB1c2goZGlyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZGlyc1dpdGhJbnNlcnQubGVuZ3RoKSB7XG4gICAgdmFyIGNhbGxJbnNlcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxIb29rJDEoZGlyc1dpdGhJbnNlcnRbaV0sICdpbnNlcnRlZCcsIHZub2RlLCBvbGRWbm9kZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoaXNDcmVhdGUpIHtcbiAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAnaW5zZXJ0JywgY2FsbEluc2VydCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxJbnNlcnQoKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoKSB7XG4gICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdwb3N0cGF0Y2gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoUG9zdHBhdGNoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxIb29rJDEoZGlyc1dpdGhQb3N0cGF0Y2hbaV0sICdjb21wb25lbnRVcGRhdGVkJywgdm5vZGUsIG9sZFZub2RlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmICghaXNDcmVhdGUpIHtcbiAgICBmb3IgKGtleSBpbiBvbGREaXJzKSB7XG4gICAgICBpZiAoIW5ld0RpcnNba2V5XSkge1xuICAgICAgICAvLyBubyBsb25nZXIgcHJlc2VudCwgdW5iaW5kXG4gICAgICAgIGNhbGxIb29rJDEob2xkRGlyc1trZXldLCAndW5iaW5kJywgb2xkVm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG52YXIgZW1wdHlNb2RpZmllcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVEaXJlY3RpdmVzJDEgKFxuICBkaXJzLFxuICB2bVxuKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpZiAoIWRpcnMpIHtcbiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICByZXR1cm4gcmVzXG4gIH1cbiAgdmFyIGksIGRpcjtcbiAgZm9yIChpID0gMDsgaSA8IGRpcnMubGVuZ3RoOyBpKyspIHtcbiAgICBkaXIgPSBkaXJzW2ldO1xuICAgIGlmICghZGlyLm1vZGlmaWVycykge1xuICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgICBkaXIubW9kaWZpZXJzID0gZW1wdHlNb2RpZmllcnM7XG4gICAgfVxuICAgIHJlc1tnZXRSYXdEaXJOYW1lKGRpcildID0gZGlyO1xuICAgIGRpci5kZWYgPSByZXNvbHZlQXNzZXQodm0uJG9wdGlvbnMsICdkaXJlY3RpdmVzJywgZGlyLm5hbWUsIHRydWUpO1xuICB9XG4gIC8vICRmbG93LWRpc2FibGUtbGluZVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGdldFJhd0Rpck5hbWUgKGRpcikge1xuICByZXR1cm4gZGlyLnJhd05hbWUgfHwgKChkaXIubmFtZSkgKyBcIi5cIiArIChPYmplY3Qua2V5cyhkaXIubW9kaWZpZXJzIHx8IHt9KS5qb2luKCcuJykpKVxufVxuXG5mdW5jdGlvbiBjYWxsSG9vayQxIChkaXIsIGhvb2ssIHZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KSB7XG4gIHZhciBmbiA9IGRpci5kZWYgJiYgZGlyLmRlZltob29rXTtcbiAgaWYgKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgIGZuKHZub2RlLmVsbSwgZGlyLCB2bm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaGFuZGxlRXJyb3IoZSwgdm5vZGUuY29udGV4dCwgKFwiZGlyZWN0aXZlIFwiICsgKGRpci5uYW1lKSArIFwiIFwiICsgaG9vayArIFwiIGhvb2tcIikpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgYmFzZU1vZHVsZXMgPSBbXG4gIHJlZixcbiAgZGlyZWN0aXZlc1xuXVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gdXBkYXRlQXR0cnMgKG9sZFZub2RlLCB2bm9kZSkge1xuICB2YXIgb3B0cyA9IHZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG4gIGlmIChpc0RlZihvcHRzKSAmJiBvcHRzLkN0b3Iub3B0aW9ucy5pbmhlcml0QXR0cnMgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgaWYgKGlzVW5kZWYob2xkVm5vZGUuZGF0YS5hdHRycykgJiYgaXNVbmRlZih2bm9kZS5kYXRhLmF0dHJzKSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciBrZXksIGN1ciwgb2xkO1xuICB2YXIgZWxtID0gdm5vZGUuZWxtO1xuICB2YXIgb2xkQXR0cnMgPSBvbGRWbm9kZS5kYXRhLmF0dHJzIHx8IHt9O1xuICB2YXIgYXR0cnMgPSB2bm9kZS5kYXRhLmF0dHJzIHx8IHt9O1xuICAvLyBjbG9uZSBvYnNlcnZlZCBvYmplY3RzLCBhcyB0aGUgdXNlciBwcm9iYWJseSB3YW50cyB0byBtdXRhdGUgaXRcbiAgaWYgKGlzRGVmKGF0dHJzLl9fb2JfXykpIHtcbiAgICBhdHRycyA9IHZub2RlLmRhdGEuYXR0cnMgPSBleHRlbmQoe30sIGF0dHJzKTtcbiAgfVxuXG4gIGZvciAoa2V5IGluIGF0dHJzKSB7XG4gICAgY3VyID0gYXR0cnNba2V5XTtcbiAgICBvbGQgPSBvbGRBdHRyc1trZXldO1xuICAgIGlmIChvbGQgIT09IGN1cikge1xuICAgICAgc2V0QXR0cihlbG0sIGtleSwgY3VyKTtcbiAgICB9XG4gIH1cbiAgLy8gIzQzOTE6IGluIElFOSwgc2V0dGluZyB0eXBlIGNhbiByZXNldCB2YWx1ZSBmb3IgaW5wdXRbdHlwZT1yYWRpb11cbiAgLy8gIzY2NjY6IElFL0VkZ2UgZm9yY2VzIHByb2dyZXNzIHZhbHVlIGRvd24gdG8gMSBiZWZvcmUgc2V0dGluZyBhIG1heFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKChpc0lFIHx8IGlzRWRnZSkgJiYgYXR0cnMudmFsdWUgIT09IG9sZEF0dHJzLnZhbHVlKSB7XG4gICAgc2V0QXR0cihlbG0sICd2YWx1ZScsIGF0dHJzLnZhbHVlKTtcbiAgfVxuICBmb3IgKGtleSBpbiBvbGRBdHRycykge1xuICAgIGlmIChpc1VuZGVmKGF0dHJzW2tleV0pKSB7XG4gICAgICBpZiAoaXNYbGluayhrZXkpKSB7XG4gICAgICAgIGVsbS5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBnZXRYbGlua1Byb3Aoa2V5KSk7XG4gICAgICB9IGVsc2UgaWYgKCFpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHtcbiAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRBdHRyIChlbCwga2V5LCB2YWx1ZSkge1xuICBpZiAoZWwudGFnTmFtZS5pbmRleE9mKCctJykgPiAtMSkge1xuICAgIGJhc2VTZXRBdHRyKGVsLCBrZXksIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc0Jvb2xlYW5BdHRyKGtleSkpIHtcbiAgICAvLyBzZXQgYXR0cmlidXRlIGZvciBibGFuayB2YWx1ZVxuICAgIC8vIGUuZy4gPG9wdGlvbiBkaXNhYmxlZD5TZWxlY3Qgb25lPC9vcHRpb24+XG4gICAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdGVjaG5pY2FsbHkgYWxsb3dmdWxsc2NyZWVuIGlzIGEgYm9vbGVhbiBhdHRyaWJ1dGUgZm9yIDxpZnJhbWU+LFxuICAgICAgLy8gYnV0IEZsYXNoIGV4cGVjdHMgYSB2YWx1ZSBvZiBcInRydWVcIiB3aGVuIHVzZWQgb24gPGVtYmVkPiB0YWdcbiAgICAgIHZhbHVlID0ga2V5ID09PSAnYWxsb3dmdWxsc2NyZWVuJyAmJiBlbC50YWdOYW1lID09PSAnRU1CRUQnXG4gICAgICAgID8gJ3RydWUnXG4gICAgICAgIDoga2V5O1xuICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJyA/ICdmYWxzZScgOiAndHJ1ZScpO1xuICB9IGVsc2UgaWYgKGlzWGxpbmsoa2V5KSkge1xuICAgIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywgZ2V0WGxpbmtQcm9wKGtleSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXksIHZhbHVlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYmFzZVNldEF0dHIoZWwsIGtleSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2VTZXRBdHRyIChlbCwga2V5LCB2YWx1ZSkge1xuICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyAjNzEzODogSUUxMCAmIDExIGZpcmVzIGlucHV0IGV2ZW50IHdoZW4gc2V0dGluZyBwbGFjZWhvbGRlciBvblxuICAgIC8vIDx0ZXh0YXJlYT4uLi4gYmxvY2sgdGhlIGZpcnN0IGlucHV0IGV2ZW50IGFuZCByZW1vdmUgdGhlIGJsb2NrZXJcbiAgICAvLyBpbW1lZGlhdGVseS5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoXG4gICAgICBpc0lFICYmICFpc0lFOSAmJlxuICAgICAgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJlxuICAgICAga2V5ID09PSAncGxhY2Vob2xkZXInICYmICFlbC5fX2llcGhcbiAgICApIHtcbiAgICAgIHZhciBibG9ja2VyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBibG9ja2VyKTtcbiAgICAgIH07XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGJsb2NrZXIpO1xuICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgICBlbC5fX2llcGggPSB0cnVlOyAvKiBJRSBwbGFjZWhvbGRlciBwYXRjaGVkICovXG4gICAgfVxuICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgfVxufVxuXG52YXIgYXR0cnMgPSB7XG4gIGNyZWF0ZTogdXBkYXRlQXR0cnMsXG4gIHVwZGF0ZTogdXBkYXRlQXR0cnNcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIHVwZGF0ZUNsYXNzIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgdmFyIGVsID0gdm5vZGUuZWxtO1xuICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG4gIHZhciBvbGREYXRhID0gb2xkVm5vZGUuZGF0YTtcbiAgaWYgKFxuICAgIGlzVW5kZWYoZGF0YS5zdGF0aWNDbGFzcykgJiZcbiAgICBpc1VuZGVmKGRhdGEuY2xhc3MpICYmIChcbiAgICAgIGlzVW5kZWYob2xkRGF0YSkgfHwgKFxuICAgICAgICBpc1VuZGVmKG9sZERhdGEuc3RhdGljQ2xhc3MpICYmXG4gICAgICAgIGlzVW5kZWYob2xkRGF0YS5jbGFzcylcbiAgICAgIClcbiAgICApXG4gICkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIGNscyA9IGdlbkNsYXNzRm9yVm5vZGUodm5vZGUpO1xuXG4gIC8vIGhhbmRsZSB0cmFuc2l0aW9uIGNsYXNzZXNcbiAgdmFyIHRyYW5zaXRpb25DbGFzcyA9IGVsLl90cmFuc2l0aW9uQ2xhc3NlcztcbiAgaWYgKGlzRGVmKHRyYW5zaXRpb25DbGFzcykpIHtcbiAgICBjbHMgPSBjb25jYXQoY2xzLCBzdHJpbmdpZnlDbGFzcyh0cmFuc2l0aW9uQ2xhc3MpKTtcbiAgfVxuXG4gIC8vIHNldCB0aGUgY2xhc3NcbiAgaWYgKGNscyAhPT0gZWwuX3ByZXZDbGFzcykge1xuICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuICAgIGVsLl9wcmV2Q2xhc3MgPSBjbHM7XG4gIH1cbn1cblxudmFyIGtsYXNzID0ge1xuICBjcmVhdGU6IHVwZGF0ZUNsYXNzLFxuICB1cGRhdGU6IHVwZGF0ZUNsYXNzXG59XG5cbi8qICAqL1xuXG52YXIgdmFsaWREaXZpc2lvbkNoYXJSRSA9IC9bXFx3KS4rXFwtXyRcXF1dLztcblxuZnVuY3Rpb24gcGFyc2VGaWx0ZXJzIChleHApIHtcbiAgdmFyIGluU2luZ2xlID0gZmFsc2U7XG4gIHZhciBpbkRvdWJsZSA9IGZhbHNlO1xuICB2YXIgaW5UZW1wbGF0ZVN0cmluZyA9IGZhbHNlO1xuICB2YXIgaW5SZWdleCA9IGZhbHNlO1xuICB2YXIgY3VybHkgPSAwO1xuICB2YXIgc3F1YXJlID0gMDtcbiAgdmFyIHBhcmVuID0gMDtcbiAgdmFyIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG4gIHZhciBjLCBwcmV2LCBpLCBleHByZXNzaW9uLCBmaWx0ZXJzO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBleHAubGVuZ3RoOyBpKyspIHtcbiAgICBwcmV2ID0gYztcbiAgICBjID0gZXhwLmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKGluU2luZ2xlKSB7XG4gICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSB7IGluU2luZ2xlID0gZmFsc2U7IH1cbiAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG4gICAgICBpZiAoYyA9PT0gMHgyMiAmJiBwcmV2ICE9PSAweDVDKSB7IGluRG91YmxlID0gZmFsc2U7IH1cbiAgICB9IGVsc2UgaWYgKGluVGVtcGxhdGVTdHJpbmcpIHtcbiAgICAgIGlmIChjID09PSAweDYwICYmIHByZXYgIT09IDB4NUMpIHsgaW5UZW1wbGF0ZVN0cmluZyA9IGZhbHNlOyB9XG4gICAgfSBlbHNlIGlmIChpblJlZ2V4KSB7XG4gICAgICBpZiAoYyA9PT0gMHgyZiAmJiBwcmV2ICE9PSAweDVDKSB7IGluUmVnZXggPSBmYWxzZTsgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICBjID09PSAweDdDICYmIC8vIHBpcGVcbiAgICAgIGV4cC5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMHg3QyAmJlxuICAgICAgZXhwLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDICYmXG4gICAgICAhY3VybHkgJiYgIXNxdWFyZSAmJiAhcGFyZW5cbiAgICApIHtcbiAgICAgIGlmIChleHByZXNzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcbiAgICAgICAgZXhwcmVzc2lvbiA9IGV4cC5zbGljZSgwLCBpKS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdXNoRmlsdGVyKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICBjYXNlIDB4MjI6IGluRG91YmxlID0gdHJ1ZTsgYnJlYWsgICAgICAgICAvLyBcIlxuICAgICAgICBjYXNlIDB4Mjc6IGluU2luZ2xlID0gdHJ1ZTsgYnJlYWsgICAgICAgICAvLyAnXG4gICAgICAgIGNhc2UgMHg2MDogaW5UZW1wbGF0ZVN0cmluZyA9IHRydWU7IGJyZWFrIC8vIGBcbiAgICAgICAgY2FzZSAweDI4OiBwYXJlbisrOyBicmVhayAgICAgICAgICAgICAgICAgLy8gKFxuICAgICAgICBjYXNlIDB4Mjk6IHBhcmVuLS07IGJyZWFrICAgICAgICAgICAgICAgICAvLyApXG4gICAgICAgIGNhc2UgMHg1Qjogc3F1YXJlKys7IGJyZWFrICAgICAgICAgICAgICAgIC8vIFtcbiAgICAgICAgY2FzZSAweDVEOiBzcXVhcmUtLTsgYnJlYWsgICAgICAgICAgICAgICAgLy8gXVxuICAgICAgICBjYXNlIDB4N0I6IGN1cmx5Kys7IGJyZWFrICAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgIGNhc2UgMHg3RDogY3VybHktLTsgYnJlYWsgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgIH1cbiAgICAgIGlmIChjID09PSAweDJmKSB7IC8vIC9cbiAgICAgICAgdmFyIGogPSBpIC0gMTtcbiAgICAgICAgdmFyIHAgPSAodm9pZCAwKTtcbiAgICAgICAgLy8gZmluZCBmaXJzdCBub24td2hpdGVzcGFjZSBwcmV2IGNoYXJcbiAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgcCA9IGV4cC5jaGFyQXQoaik7XG4gICAgICAgICAgaWYgKHAgIT09ICcgJykgeyBicmVhayB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwIHx8ICF2YWxpZERpdmlzaW9uQ2hhclJFLnRlc3QocCkpIHtcbiAgICAgICAgICBpblJlZ2V4ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChleHByZXNzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICBleHByZXNzaW9uID0gZXhwLnNsaWNlKDAsIGkpLnRyaW0oKTtcbiAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHtcbiAgICBwdXNoRmlsdGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwdXNoRmlsdGVyICgpIHtcbiAgICAoZmlsdGVycyB8fCAoZmlsdGVycyA9IFtdKSkucHVzaChleHAuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCkpO1xuICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuICB9XG5cbiAgaWYgKGZpbHRlcnMpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgZmlsdGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgZXhwcmVzc2lvbiA9IHdyYXBGaWx0ZXIoZXhwcmVzc2lvbiwgZmlsdGVyc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGV4cHJlc3Npb25cbn1cblxuZnVuY3Rpb24gd3JhcEZpbHRlciAoZXhwLCBmaWx0ZXIpIHtcbiAgdmFyIGkgPSBmaWx0ZXIuaW5kZXhPZignKCcpO1xuICBpZiAoaSA8IDApIHtcbiAgICAvLyBfZjogcmVzb2x2ZUZpbHRlclxuICAgIHJldHVybiAoXCJfZihcXFwiXCIgKyBmaWx0ZXIgKyBcIlxcXCIpKFwiICsgZXhwICsgXCIpXCIpXG4gIH0gZWxzZSB7XG4gICAgdmFyIG5hbWUgPSBmaWx0ZXIuc2xpY2UoMCwgaSk7XG4gICAgdmFyIGFyZ3MgPSBmaWx0ZXIuc2xpY2UoaSArIDEpO1xuICAgIHJldHVybiAoXCJfZihcXFwiXCIgKyBuYW1lICsgXCJcXFwiKShcIiArIGV4cCArIChhcmdzICE9PSAnKScgPyAnLCcgKyBhcmdzIDogYXJncykpXG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGJhc2VXYXJuIChtc2cpIHtcbiAgY29uc29sZS5lcnJvcigoXCJbVnVlIGNvbXBpbGVyXTogXCIgKyBtc2cpKTtcbn1cblxuZnVuY3Rpb24gcGx1Y2tNb2R1bGVGdW5jdGlvbiAoXG4gIG1vZHVsZXMsXG4gIGtleVxuKSB7XG4gIHJldHVybiBtb2R1bGVzXG4gICAgPyBtb2R1bGVzLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gbVtrZXldOyB9KS5maWx0ZXIoZnVuY3Rpb24gKF8pIHsgcmV0dXJuIF87IH0pXG4gICAgOiBbXVxufVxuXG5mdW5jdGlvbiBhZGRQcm9wIChlbCwgbmFtZSwgdmFsdWUpIHtcbiAgKGVsLnByb3BzIHx8IChlbC5wcm9wcyA9IFtdKSkucHVzaCh7IG5hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgZWwucGxhaW4gPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYWRkQXR0ciAoZWwsIG5hbWUsIHZhbHVlKSB7XG4gIChlbC5hdHRycyB8fCAoZWwuYXR0cnMgPSBbXSkpLnB1c2goeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUgfSk7XG4gIGVsLnBsYWluID0gZmFsc2U7XG59XG5cbi8vIGFkZCBhIHJhdyBhdHRyICh1c2UgdGhpcyBpbiBwcmVUcmFuc2Zvcm1zKVxuZnVuY3Rpb24gYWRkUmF3QXR0ciAoZWwsIG5hbWUsIHZhbHVlKSB7XG4gIGVsLmF0dHJzTWFwW25hbWVdID0gdmFsdWU7XG4gIGVsLmF0dHJzTGlzdC5wdXNoKHsgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlIH0pO1xufVxuXG5mdW5jdGlvbiBhZGREaXJlY3RpdmUgKFxuICBlbCxcbiAgbmFtZSxcbiAgcmF3TmFtZSxcbiAgdmFsdWUsXG4gIGFyZyxcbiAgbW9kaWZpZXJzXG4pIHtcbiAgKGVsLmRpcmVjdGl2ZXMgfHwgKGVsLmRpcmVjdGl2ZXMgPSBbXSkpLnB1c2goeyBuYW1lOiBuYW1lLCByYXdOYW1lOiByYXdOYW1lLCB2YWx1ZTogdmFsdWUsIGFyZzogYXJnLCBtb2RpZmllcnM6IG1vZGlmaWVycyB9KTtcbiAgZWwucGxhaW4gPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYWRkSGFuZGxlciAoXG4gIGVsLFxuICBuYW1lLFxuICB2YWx1ZSxcbiAgbW9kaWZpZXJzLFxuICBpbXBvcnRhbnQsXG4gIHdhcm5cbikge1xuICBtb2RpZmllcnMgPSBtb2RpZmllcnMgfHwgZW1wdHlPYmplY3Q7XG4gIC8vIHdhcm4gcHJldmVudCBhbmQgcGFzc2l2ZSBtb2RpZmllclxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKFxuICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4gJiZcbiAgICBtb2RpZmllcnMucHJldmVudCAmJiBtb2RpZmllcnMucGFzc2l2ZVxuICApIHtcbiAgICB3YXJuKFxuICAgICAgJ3Bhc3NpdmUgYW5kIHByZXZlbnQgY2FuXFwndCBiZSB1c2VkIHRvZ2V0aGVyLiAnICtcbiAgICAgICdQYXNzaXZlIGhhbmRsZXIgY2FuXFwndCBwcmV2ZW50IGRlZmF1bHQgZXZlbnQuJ1xuICAgICk7XG4gIH1cblxuICAvLyBjaGVjayBjYXB0dXJlIG1vZGlmaWVyXG4gIGlmIChtb2RpZmllcnMuY2FwdHVyZSkge1xuICAgIGRlbGV0ZSBtb2RpZmllcnMuY2FwdHVyZTtcbiAgICBuYW1lID0gJyEnICsgbmFtZTsgLy8gbWFyayB0aGUgZXZlbnQgYXMgY2FwdHVyZWRcbiAgfVxuICBpZiAobW9kaWZpZXJzLm9uY2UpIHtcbiAgICBkZWxldGUgbW9kaWZpZXJzLm9uY2U7XG4gICAgbmFtZSA9ICd+JyArIG5hbWU7IC8vIG1hcmsgdGhlIGV2ZW50IGFzIG9uY2VcbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKG1vZGlmaWVycy5wYXNzaXZlKSB7XG4gICAgZGVsZXRlIG1vZGlmaWVycy5wYXNzaXZlO1xuICAgIG5hbWUgPSAnJicgKyBuYW1lOyAvLyBtYXJrIHRoZSBldmVudCBhcyBwYXNzaXZlXG4gIH1cblxuICAvLyBub3JtYWxpemUgY2xpY2sucmlnaHQgYW5kIGNsaWNrLm1pZGRsZSBzaW5jZSB0aGV5IGRvbid0IGFjdHVhbGx5IGZpcmVcbiAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBicm93c2VyLXNwZWNpZmljLCBidXQgYXQgbGVhc3QgZm9yIG5vdyBicm93c2VycyBhcmVcbiAgLy8gdGhlIG9ubHkgdGFyZ2V0IGVudnMgdGhhdCBoYXZlIHJpZ2h0L21pZGRsZSBjbGlja3MuXG4gIGlmIChuYW1lID09PSAnY2xpY2snKSB7XG4gICAgaWYgKG1vZGlmaWVycy5yaWdodCkge1xuICAgICAgbmFtZSA9ICdjb250ZXh0bWVudSc7XG4gICAgICBkZWxldGUgbW9kaWZpZXJzLnJpZ2h0O1xuICAgIH0gZWxzZSBpZiAobW9kaWZpZXJzLm1pZGRsZSkge1xuICAgICAgbmFtZSA9ICdtb3VzZXVwJztcbiAgICB9XG4gIH1cblxuICB2YXIgZXZlbnRzO1xuICBpZiAobW9kaWZpZXJzLm5hdGl2ZSkge1xuICAgIGRlbGV0ZSBtb2RpZmllcnMubmF0aXZlO1xuICAgIGV2ZW50cyA9IGVsLm5hdGl2ZUV2ZW50cyB8fCAoZWwubmF0aXZlRXZlbnRzID0ge30pO1xuICB9IGVsc2Uge1xuICAgIGV2ZW50cyA9IGVsLmV2ZW50cyB8fCAoZWwuZXZlbnRzID0ge30pO1xuICB9XG5cbiAgdmFyIG5ld0hhbmRsZXIgPSB7XG4gICAgdmFsdWU6IHZhbHVlLnRyaW0oKVxuICB9O1xuICBpZiAobW9kaWZpZXJzICE9PSBlbXB0eU9iamVjdCkge1xuICAgIG5ld0hhbmRsZXIubW9kaWZpZXJzID0gbW9kaWZpZXJzO1xuICB9XG5cbiAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKEFycmF5LmlzQXJyYXkoaGFuZGxlcnMpKSB7XG4gICAgaW1wb3J0YW50ID8gaGFuZGxlcnMudW5zaGlmdChuZXdIYW5kbGVyKSA6IGhhbmRsZXJzLnB1c2gobmV3SGFuZGxlcik7XG4gIH0gZWxzZSBpZiAoaGFuZGxlcnMpIHtcbiAgICBldmVudHNbbmFtZV0gPSBpbXBvcnRhbnQgPyBbbmV3SGFuZGxlciwgaGFuZGxlcnNdIDogW2hhbmRsZXJzLCBuZXdIYW5kbGVyXTtcbiAgfSBlbHNlIHtcbiAgICBldmVudHNbbmFtZV0gPSBuZXdIYW5kbGVyO1xuICB9XG5cbiAgZWwucGxhaW4gPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0QmluZGluZ0F0dHIgKFxuICBlbCxcbiAgbmFtZSxcbiAgZ2V0U3RhdGljXG4pIHtcbiAgdmFyIGR5bmFtaWNWYWx1ZSA9XG4gICAgZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJzonICsgbmFtZSkgfHxcbiAgICBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1iaW5kOicgKyBuYW1lKTtcbiAgaWYgKGR5bmFtaWNWYWx1ZSAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHBhcnNlRmlsdGVycyhkeW5hbWljVmFsdWUpXG4gIH0gZWxzZSBpZiAoZ2V0U3RhdGljICE9PSBmYWxzZSkge1xuICAgIHZhciBzdGF0aWNWYWx1ZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsIG5hbWUpO1xuICAgIGlmIChzdGF0aWNWYWx1ZSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RhdGljVmFsdWUpXG4gICAgfVxuICB9XG59XG5cbi8vIG5vdGU6IHRoaXMgb25seSByZW1vdmVzIHRoZSBhdHRyIGZyb20gdGhlIEFycmF5IChhdHRyc0xpc3QpIHNvIHRoYXQgaXRcbi8vIGRvZXNuJ3QgZ2V0IHByb2Nlc3NlZCBieSBwcm9jZXNzQXR0cnMuXG4vLyBCeSBkZWZhdWx0IGl0IGRvZXMgTk9UIHJlbW92ZSBpdCBmcm9tIHRoZSBtYXAgKGF0dHJzTWFwKSBiZWNhdXNlIHRoZSBtYXAgaXNcbi8vIG5lZWRlZCBkdXJpbmcgY29kZWdlbi5cbmZ1bmN0aW9uIGdldEFuZFJlbW92ZUF0dHIgKFxuICBlbCxcbiAgbmFtZSxcbiAgcmVtb3ZlRnJvbU1hcFxuKSB7XG4gIHZhciB2YWw7XG4gIGlmICgodmFsID0gZWwuYXR0cnNNYXBbbmFtZV0pICE9IG51bGwpIHtcbiAgICB2YXIgbGlzdCA9IGVsLmF0dHJzTGlzdDtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAobGlzdFtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgIGxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAocmVtb3ZlRnJvbU1hcCkge1xuICAgIGRlbGV0ZSBlbC5hdHRyc01hcFtuYW1lXTtcbiAgfVxuICByZXR1cm4gdmFsXG59XG5cbi8qICAqL1xuXG4vKipcbiAqIENyb3NzLXBsYXRmb3JtIGNvZGUgZ2VuZXJhdGlvbiBmb3IgY29tcG9uZW50IHYtbW9kZWxcbiAqL1xuZnVuY3Rpb24gZ2VuQ29tcG9uZW50TW9kZWwgKFxuICBlbCxcbiAgdmFsdWUsXG4gIG1vZGlmaWVyc1xuKSB7XG4gIHZhciByZWYgPSBtb2RpZmllcnMgfHwge307XG4gIHZhciBudW1iZXIgPSByZWYubnVtYmVyO1xuICB2YXIgdHJpbSA9IHJlZi50cmltO1xuXG4gIHZhciBiYXNlVmFsdWVFeHByZXNzaW9uID0gJyQkdic7XG4gIHZhciB2YWx1ZUV4cHJlc3Npb24gPSBiYXNlVmFsdWVFeHByZXNzaW9uO1xuICBpZiAodHJpbSkge1xuICAgIHZhbHVlRXhwcmVzc2lvbiA9XG4gICAgICBcIih0eXBlb2YgXCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgXCIgPT09ICdzdHJpbmcnXCIgK1xuICAgICAgXCI/IFwiICsgYmFzZVZhbHVlRXhwcmVzc2lvbiArIFwiLnRyaW0oKVwiICtcbiAgICAgIFwiOiBcIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyBcIilcIjtcbiAgfVxuICBpZiAobnVtYmVyKSB7XG4gICAgdmFsdWVFeHByZXNzaW9uID0gXCJfbihcIiArIHZhbHVlRXhwcmVzc2lvbiArIFwiKVwiO1xuICB9XG4gIHZhciBhc3NpZ25tZW50ID0gZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIHZhbHVlRXhwcmVzc2lvbik7XG5cbiAgZWwubW9kZWwgPSB7XG4gICAgdmFsdWU6IChcIihcIiArIHZhbHVlICsgXCIpXCIpLFxuICAgIGV4cHJlc3Npb246IChcIlxcXCJcIiArIHZhbHVlICsgXCJcXFwiXCIpLFxuICAgIGNhbGxiYWNrOiAoXCJmdW5jdGlvbiAoXCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgXCIpIHtcIiArIGFzc2lnbm1lbnQgKyBcIn1cIilcbiAgfTtcbn1cblxuLyoqXG4gKiBDcm9zcy1wbGF0Zm9ybSBjb2RlZ2VuIGhlbHBlciBmb3IgZ2VuZXJhdGluZyB2LW1vZGVsIHZhbHVlIGFzc2lnbm1lbnQgY29kZS5cbiAqL1xuZnVuY3Rpb24gZ2VuQXNzaWdubWVudENvZGUgKFxuICB2YWx1ZSxcbiAgYXNzaWdubWVudFxuKSB7XG4gIHZhciByZXMgPSBwYXJzZU1vZGVsKHZhbHVlKTtcbiAgaWYgKHJlcy5rZXkgPT09IG51bGwpIHtcbiAgICByZXR1cm4gKHZhbHVlICsgXCI9XCIgKyBhc3NpZ25tZW50KVxuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXCIkc2V0KFwiICsgKHJlcy5leHApICsgXCIsIFwiICsgKHJlcy5rZXkpICsgXCIsIFwiICsgYXNzaWdubWVudCArIFwiKVwiKVxuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYSB2LW1vZGVsIGV4cHJlc3Npb24gaW50byBhIGJhc2UgcGF0aCBhbmQgYSBmaW5hbCBrZXkgc2VnbWVudC5cbiAqIEhhbmRsZXMgYm90aCBkb3QtcGF0aCBhbmQgcG9zc2libGUgc3F1YXJlIGJyYWNrZXRzLlxuICpcbiAqIFBvc3NpYmxlIGNhc2VzOlxuICpcbiAqIC0gdGVzdFxuICogLSB0ZXN0W2tleV1cbiAqIC0gdGVzdFt0ZXN0MVtrZXldXVxuICogLSB0ZXN0W1wiYVwiXVtrZXldXG4gKiAtIHh4eC50ZXN0W2FbYV0udGVzdDFba2V5XV1cbiAqIC0gdGVzdC54eHguYVtcImFzYVwiXVt0ZXN0MVtrZXldXVxuICpcbiAqL1xuXG52YXIgbGVuO1xudmFyIHN0cjtcbnZhciBjaHI7XG52YXIgaW5kZXgkMTtcbnZhciBleHByZXNzaW9uUG9zO1xudmFyIGV4cHJlc3Npb25FbmRQb3M7XG5cblxuXG5mdW5jdGlvbiBwYXJzZU1vZGVsICh2YWwpIHtcbiAgLy8gRml4IGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUvcHVsbC83NzMwXG4gIC8vIGFsbG93IHYtbW9kZWw9XCJvYmoudmFsIFwiICh0cmFpbGluZyB3aGl0ZXNwYWNlKVxuICB2YWwgPSB2YWwudHJpbSgpO1xuICBsZW4gPSB2YWwubGVuZ3RoO1xuXG4gIGlmICh2YWwuaW5kZXhPZignWycpIDwgMCB8fCB2YWwubGFzdEluZGV4T2YoJ10nKSA8IGxlbiAtIDEpIHtcbiAgICBpbmRleCQxID0gdmFsLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgaWYgKGluZGV4JDEgPiAtMSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXhwOiB2YWwuc2xpY2UoMCwgaW5kZXgkMSksXG4gICAgICAgIGtleTogJ1wiJyArIHZhbC5zbGljZShpbmRleCQxICsgMSkgKyAnXCInXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGV4cDogdmFsLFxuICAgICAgICBrZXk6IG51bGxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdHIgPSB2YWw7XG4gIGluZGV4JDEgPSBleHByZXNzaW9uUG9zID0gZXhwcmVzc2lvbkVuZFBvcyA9IDA7XG5cbiAgd2hpbGUgKCFlb2YoKSkge1xuICAgIGNociA9IG5leHQoKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNTdHJpbmdTdGFydChjaHIpKSB7XG4gICAgICBwYXJzZVN0cmluZyhjaHIpO1xuICAgIH0gZWxzZSBpZiAoY2hyID09PSAweDVCKSB7XG4gICAgICBwYXJzZUJyYWNrZXQoY2hyKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGV4cDogdmFsLnNsaWNlKDAsIGV4cHJlc3Npb25Qb3MpLFxuICAgIGtleTogdmFsLnNsaWNlKGV4cHJlc3Npb25Qb3MgKyAxLCBleHByZXNzaW9uRW5kUG9zKVxuICB9XG59XG5cbmZ1bmN0aW9uIG5leHQgKCkge1xuICByZXR1cm4gc3RyLmNoYXJDb2RlQXQoKytpbmRleCQxKVxufVxuXG5mdW5jdGlvbiBlb2YgKCkge1xuICByZXR1cm4gaW5kZXgkMSA+PSBsZW5cbn1cblxuZnVuY3Rpb24gaXNTdHJpbmdTdGFydCAoY2hyKSB7XG4gIHJldHVybiBjaHIgPT09IDB4MjIgfHwgY2hyID09PSAweDI3XG59XG5cbmZ1bmN0aW9uIHBhcnNlQnJhY2tldCAoY2hyKSB7XG4gIHZhciBpbkJyYWNrZXQgPSAxO1xuICBleHByZXNzaW9uUG9zID0gaW5kZXgkMTtcbiAgd2hpbGUgKCFlb2YoKSkge1xuICAgIGNociA9IG5leHQoKTtcbiAgICBpZiAoaXNTdHJpbmdTdGFydChjaHIpKSB7XG4gICAgICBwYXJzZVN0cmluZyhjaHIpO1xuICAgICAgY29udGludWVcbiAgICB9XG4gICAgaWYgKGNociA9PT0gMHg1QikgeyBpbkJyYWNrZXQrKzsgfVxuICAgIGlmIChjaHIgPT09IDB4NUQpIHsgaW5CcmFja2V0LS07IH1cbiAgICBpZiAoaW5CcmFja2V0ID09PSAwKSB7XG4gICAgICBleHByZXNzaW9uRW5kUG9zID0gaW5kZXgkMTtcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlU3RyaW5nIChjaHIpIHtcbiAgdmFyIHN0cmluZ1F1b3RlID0gY2hyO1xuICB3aGlsZSAoIWVvZigpKSB7XG4gICAgY2hyID0gbmV4dCgpO1xuICAgIGlmIChjaHIgPT09IHN0cmluZ1F1b3RlKSB7XG4gICAgICBicmVha1xuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxudmFyIHdhcm4kMTtcblxuLy8gaW4gc29tZSBjYXNlcywgdGhlIGV2ZW50IHVzZWQgaGFzIHRvIGJlIGRldGVybWluZWQgYXQgcnVudGltZVxuLy8gc28gd2UgdXNlZCBzb21lIHJlc2VydmVkIHRva2VucyBkdXJpbmcgY29tcGlsZS5cbnZhciBSQU5HRV9UT0tFTiA9ICdfX3InO1xudmFyIENIRUNLQk9YX1JBRElPX1RPS0VOID0gJ19fYyc7XG5cbmZ1bmN0aW9uIG1vZGVsIChcbiAgZWwsXG4gIGRpcixcbiAgX3dhcm5cbikge1xuICB3YXJuJDEgPSBfd2FybjtcbiAgdmFyIHZhbHVlID0gZGlyLnZhbHVlO1xuICB2YXIgbW9kaWZpZXJzID0gZGlyLm1vZGlmaWVycztcbiAgdmFyIHRhZyA9IGVsLnRhZztcbiAgdmFyIHR5cGUgPSBlbC5hdHRyc01hcC50eXBlO1xuXG4gIHtcbiAgICAvLyBpbnB1dHMgd2l0aCB0eXBlPVwiZmlsZVwiIGFyZSByZWFkIG9ubHkgYW5kIHNldHRpbmcgdGhlIGlucHV0J3NcbiAgICAvLyB2YWx1ZSB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgIGlmICh0YWcgPT09ICdpbnB1dCcgJiYgdHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIFwiPFwiICsgKGVsLnRhZykgKyBcIiB2LW1vZGVsPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiIHR5cGU9XFxcImZpbGVcXFwiPjpcXG5cIiArXG4gICAgICAgIFwiRmlsZSBpbnB1dHMgYXJlIHJlYWQgb25seS4gVXNlIGEgdi1vbjpjaGFuZ2UgbGlzdGVuZXIgaW5zdGVhZC5cIlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZWwuY29tcG9uZW50KSB7XG4gICAgZ2VuQ29tcG9uZW50TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpO1xuICAgIC8vIGNvbXBvbmVudCB2LW1vZGVsIGRvZXNuJ3QgbmVlZCBleHRyYSBydW50aW1lXG4gICAgcmV0dXJuIGZhbHNlXG4gIH0gZWxzZSBpZiAodGFnID09PSAnc2VsZWN0Jykge1xuICAgIGdlblNlbGVjdChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG4gIH0gZWxzZSBpZiAodGFnID09PSAnaW5wdXQnICYmIHR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICBnZW5DaGVja2JveE1vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTtcbiAgfSBlbHNlIGlmICh0YWcgPT09ICdpbnB1dCcgJiYgdHlwZSA9PT0gJ3JhZGlvJykge1xuICAgIGdlblJhZGlvTW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpO1xuICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2lucHV0JyB8fCB0YWcgPT09ICd0ZXh0YXJlYScpIHtcbiAgICBnZW5EZWZhdWx0TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpO1xuICB9IGVsc2UgaWYgKCFjb25maWcuaXNSZXNlcnZlZFRhZyh0YWcpKSB7XG4gICAgZ2VuQ29tcG9uZW50TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpO1xuICAgIC8vIGNvbXBvbmVudCB2LW1vZGVsIGRvZXNuJ3QgbmVlZCBleHRyYSBydW50aW1lXG4gICAgcmV0dXJuIGZhbHNlXG4gIH0gZWxzZSB7XG4gICAgd2FybiQxKFxuICAgICAgXCI8XCIgKyAoZWwudGFnKSArIFwiIHYtbW9kZWw9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCI+OiBcIiArXG4gICAgICBcInYtbW9kZWwgaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIGVsZW1lbnQgdHlwZS4gXCIgK1xuICAgICAgJ0lmIHlvdSBhcmUgd29ya2luZyB3aXRoIGNvbnRlbnRlZGl0YWJsZSwgaXRcXCdzIHJlY29tbWVuZGVkIHRvICcgK1xuICAgICAgJ3dyYXAgYSBsaWJyYXJ5IGRlZGljYXRlZCBmb3IgdGhhdCBwdXJwb3NlIGluc2lkZSBhIGN1c3RvbSBjb21wb25lbnQuJ1xuICAgICk7XG4gIH1cblxuICAvLyBlbnN1cmUgcnVudGltZSBkaXJlY3RpdmUgbWV0YWRhdGFcbiAgcmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gZ2VuQ2hlY2tib3hNb2RlbCAoXG4gIGVsLFxuICB2YWx1ZSxcbiAgbW9kaWZpZXJzXG4pIHtcbiAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyO1xuICB2YXIgdmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICd2YWx1ZScpIHx8ICdudWxsJztcbiAgdmFyIHRydWVWYWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3RydWUtdmFsdWUnKSB8fCAndHJ1ZSc7XG4gIHZhciBmYWxzZVZhbHVlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnZmFsc2UtdmFsdWUnKSB8fCAnZmFsc2UnO1xuICBhZGRQcm9wKGVsLCAnY2hlY2tlZCcsXG4gICAgXCJBcnJheS5pc0FycmF5KFwiICsgdmFsdWUgKyBcIilcIiArXG4gICAgXCI/X2koXCIgKyB2YWx1ZSArIFwiLFwiICsgdmFsdWVCaW5kaW5nICsgXCIpPi0xXCIgKyAoXG4gICAgICB0cnVlVmFsdWVCaW5kaW5nID09PSAndHJ1ZSdcbiAgICAgICAgPyAoXCI6KFwiICsgdmFsdWUgKyBcIilcIilcbiAgICAgICAgOiAoXCI6X3EoXCIgKyB2YWx1ZSArIFwiLFwiICsgdHJ1ZVZhbHVlQmluZGluZyArIFwiKVwiKVxuICAgIClcbiAgKTtcbiAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsXG4gICAgXCJ2YXIgJCRhPVwiICsgdmFsdWUgKyBcIixcIiArXG4gICAgICAgICckJGVsPSRldmVudC50YXJnZXQsJyArXG4gICAgICAgIFwiJCRjPSQkZWwuY2hlY2tlZD8oXCIgKyB0cnVlVmFsdWVCaW5kaW5nICsgXCIpOihcIiArIGZhbHNlVmFsdWVCaW5kaW5nICsgXCIpO1wiICtcbiAgICAnaWYoQXJyYXkuaXNBcnJheSgkJGEpKXsnICtcbiAgICAgIFwidmFyICQkdj1cIiArIChudW1iZXIgPyAnX24oJyArIHZhbHVlQmluZGluZyArICcpJyA6IHZhbHVlQmluZGluZykgKyBcIixcIiArXG4gICAgICAgICAgJyQkaT1faSgkJGEsJCR2KTsnICtcbiAgICAgIFwiaWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKFwiICsgKGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCAnJCRhLmNvbmNhdChbJCR2XSknKSkgKyBcIil9XCIgK1xuICAgICAgXCJlbHNleyQkaT4tMSYmKFwiICsgKGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCAnJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSknKSkgKyBcIil9XCIgK1xuICAgIFwifWVsc2V7XCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGMnKSkgKyBcIn1cIixcbiAgICBudWxsLCB0cnVlXG4gICk7XG59XG5cbmZ1bmN0aW9uIGdlblJhZGlvTW9kZWwgKFxuICBlbCxcbiAgdmFsdWUsXG4gIG1vZGlmaWVyc1xuKSB7XG4gIHZhciBudW1iZXIgPSBtb2RpZmllcnMgJiYgbW9kaWZpZXJzLm51bWJlcjtcbiAgdmFyIHZhbHVlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAndmFsdWUnKSB8fCAnbnVsbCc7XG4gIHZhbHVlQmluZGluZyA9IG51bWJlciA/IChcIl9uKFwiICsgdmFsdWVCaW5kaW5nICsgXCIpXCIpIDogdmFsdWVCaW5kaW5nO1xuICBhZGRQcm9wKGVsLCAnY2hlY2tlZCcsIChcIl9xKFwiICsgdmFsdWUgKyBcIixcIiArIHZhbHVlQmluZGluZyArIFwiKVwiKSk7XG4gIGFkZEhhbmRsZXIoZWwsICdjaGFuZ2UnLCBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVCaW5kaW5nKSwgbnVsbCwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGdlblNlbGVjdCAoXG4gIGVsLFxuICB2YWx1ZSxcbiAgbW9kaWZpZXJzXG4pIHtcbiAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyO1xuICB2YXIgc2VsZWN0ZWRWYWwgPSBcIkFycmF5LnByb3RvdHlwZS5maWx0ZXJcIiArXG4gICAgXCIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KVwiICtcbiAgICBcIi5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9IFxcXCJfdmFsdWVcXFwiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7XCIgK1xuICAgIFwicmV0dXJuIFwiICsgKG51bWJlciA/ICdfbih2YWwpJyA6ICd2YWwnKSArIFwifSlcIjtcblxuICB2YXIgYXNzaWdubWVudCA9ICckZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0nO1xuICB2YXIgY29kZSA9IFwidmFyICQkc2VsZWN0ZWRWYWwgPSBcIiArIHNlbGVjdGVkVmFsICsgXCI7XCI7XG4gIGNvZGUgPSBjb2RlICsgXCIgXCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIGFzc2lnbm1lbnQpKTtcbiAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsIGNvZGUsIG51bGwsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBnZW5EZWZhdWx0TW9kZWwgKFxuICBlbCxcbiAgdmFsdWUsXG4gIG1vZGlmaWVyc1xuKSB7XG4gIHZhciB0eXBlID0gZWwuYXR0cnNNYXAudHlwZTtcblxuICAvLyB3YXJuIGlmIHYtYmluZDp2YWx1ZSBjb25mbGljdHMgd2l0aCB2LW1vZGVsXG4gIC8vIGV4Y2VwdCBmb3IgaW5wdXRzIHdpdGggdi1iaW5kOnR5cGVcbiAge1xuICAgIHZhciB2YWx1ZSQxID0gZWwuYXR0cnNNYXBbJ3YtYmluZDp2YWx1ZSddIHx8IGVsLmF0dHJzTWFwWyc6dmFsdWUnXTtcbiAgICB2YXIgdHlwZUJpbmRpbmcgPSBlbC5hdHRyc01hcFsndi1iaW5kOnR5cGUnXSB8fCBlbC5hdHRyc01hcFsnOnR5cGUnXTtcbiAgICBpZiAodmFsdWUkMSAmJiAhdHlwZUJpbmRpbmcpIHtcbiAgICAgIHZhciBiaW5kaW5nID0gZWwuYXR0cnNNYXBbJ3YtYmluZDp2YWx1ZSddID8gJ3YtYmluZDp2YWx1ZScgOiAnOnZhbHVlJztcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYmluZGluZyArIFwiPVxcXCJcIiArIHZhbHVlJDEgKyBcIlxcXCIgY29uZmxpY3RzIHdpdGggdi1tb2RlbCBvbiB0aGUgc2FtZSBlbGVtZW50IFwiICtcbiAgICAgICAgJ2JlY2F1c2UgdGhlIGxhdHRlciBhbHJlYWR5IGV4cGFuZHMgdG8gYSB2YWx1ZSBiaW5kaW5nIGludGVybmFsbHknXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHZhciByZWYgPSBtb2RpZmllcnMgfHwge307XG4gIHZhciBsYXp5ID0gcmVmLmxhenk7XG4gIHZhciBudW1iZXIgPSByZWYubnVtYmVyO1xuICB2YXIgdHJpbSA9IHJlZi50cmltO1xuICB2YXIgbmVlZENvbXBvc2l0aW9uR3VhcmQgPSAhbGF6eSAmJiB0eXBlICE9PSAncmFuZ2UnO1xuICB2YXIgZXZlbnQgPSBsYXp5XG4gICAgPyAnY2hhbmdlJ1xuICAgIDogdHlwZSA9PT0gJ3JhbmdlJ1xuICAgICAgPyBSQU5HRV9UT0tFTlxuICAgICAgOiAnaW5wdXQnO1xuXG4gIHZhciB2YWx1ZUV4cHJlc3Npb24gPSAnJGV2ZW50LnRhcmdldC52YWx1ZSc7XG4gIGlmICh0cmltKSB7XG4gICAgdmFsdWVFeHByZXNzaW9uID0gXCIkZXZlbnQudGFyZ2V0LnZhbHVlLnRyaW0oKVwiO1xuICB9XG4gIGlmIChudW1iZXIpIHtcbiAgICB2YWx1ZUV4cHJlc3Npb24gPSBcIl9uKFwiICsgdmFsdWVFeHByZXNzaW9uICsgXCIpXCI7XG4gIH1cblxuICB2YXIgY29kZSA9IGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCB2YWx1ZUV4cHJlc3Npb24pO1xuICBpZiAobmVlZENvbXBvc2l0aW9uR3VhcmQpIHtcbiAgICBjb2RlID0gXCJpZigkZXZlbnQudGFyZ2V0LmNvbXBvc2luZylyZXR1cm47XCIgKyBjb2RlO1xuICB9XG5cbiAgYWRkUHJvcChlbCwgJ3ZhbHVlJywgKFwiKFwiICsgdmFsdWUgKyBcIilcIikpO1xuICBhZGRIYW5kbGVyKGVsLCBldmVudCwgY29kZSwgbnVsbCwgdHJ1ZSk7XG4gIGlmICh0cmltIHx8IG51bWJlcikge1xuICAgIGFkZEhhbmRsZXIoZWwsICdibHVyJywgJyRmb3JjZVVwZGF0ZSgpJyk7XG4gIH1cbn1cblxuLyogICovXG5cbi8vIG5vcm1hbGl6ZSB2LW1vZGVsIGV2ZW50IHRva2VucyB0aGF0IGNhbiBvbmx5IGJlIGRldGVybWluZWQgYXQgcnVudGltZS5cbi8vIGl0J3MgaW1wb3J0YW50IHRvIHBsYWNlIHRoZSBldmVudCBhcyB0aGUgZmlyc3QgaW4gdGhlIGFycmF5IGJlY2F1c2Vcbi8vIHRoZSB3aG9sZSBwb2ludCBpcyBlbnN1cmluZyB0aGUgdi1tb2RlbCBjYWxsYmFjayBnZXRzIGNhbGxlZCBiZWZvcmVcbi8vIHVzZXItYXR0YWNoZWQgaGFuZGxlcnMuXG5mdW5jdGlvbiBub3JtYWxpemVFdmVudHMgKG9uKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNEZWYob25bUkFOR0VfVE9LRU5dKSkge1xuICAgIC8vIElFIGlucHV0W3R5cGU9cmFuZ2VdIG9ubHkgc3VwcG9ydHMgYGNoYW5nZWAgZXZlbnRcbiAgICB2YXIgZXZlbnQgPSBpc0lFID8gJ2NoYW5nZScgOiAnaW5wdXQnO1xuICAgIG9uW2V2ZW50XSA9IFtdLmNvbmNhdChvbltSQU5HRV9UT0tFTl0sIG9uW2V2ZW50XSB8fCBbXSk7XG4gICAgZGVsZXRlIG9uW1JBTkdFX1RPS0VOXTtcbiAgfVxuICAvLyBUaGlzIHdhcyBvcmlnaW5hbGx5IGludGVuZGVkIHRvIGZpeCAjNDUyMSBidXQgbm8gbG9uZ2VyIG5lY2Vzc2FyeVxuICAvLyBhZnRlciAyLjUuIEtlZXBpbmcgaXQgZm9yIGJhY2t3YXJkcyBjb21wYXQgd2l0aCBnZW5lcmF0ZWQgY29kZSBmcm9tIDwgMi40XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNEZWYob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dKSkge1xuICAgIG9uLmNoYW5nZSA9IFtdLmNvbmNhdChvbltDSEVDS0JPWF9SQURJT19UT0tFTl0sIG9uLmNoYW5nZSB8fCBbXSk7XG4gICAgZGVsZXRlIG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXTtcbiAgfVxufVxuXG52YXIgdGFyZ2V0JDE7XG5cbmZ1bmN0aW9uIGNyZWF0ZU9uY2VIYW5kbGVyIChoYW5kbGVyLCBldmVudCwgY2FwdHVyZSkge1xuICB2YXIgX3RhcmdldCA9IHRhcmdldCQxOyAvLyBzYXZlIGN1cnJlbnQgdGFyZ2V0IGVsZW1lbnQgaW4gY2xvc3VyZVxuICByZXR1cm4gZnVuY3Rpb24gb25jZUhhbmRsZXIgKCkge1xuICAgIHZhciByZXMgPSBoYW5kbGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHJlcyAhPT0gbnVsbCkge1xuICAgICAgcmVtb3ZlJDIoZXZlbnQsIG9uY2VIYW5kbGVyLCBjYXB0dXJlLCBfdGFyZ2V0KTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkJDEgKFxuICBldmVudCxcbiAgaGFuZGxlcixcbiAgb25jZSQkMSxcbiAgY2FwdHVyZSxcbiAgcGFzc2l2ZVxuKSB7XG4gIGhhbmRsZXIgPSB3aXRoTWFjcm9UYXNrKGhhbmRsZXIpO1xuICBpZiAob25jZSQkMSkgeyBoYW5kbGVyID0gY3JlYXRlT25jZUhhbmRsZXIoaGFuZGxlciwgZXZlbnQsIGNhcHR1cmUpOyB9XG4gIHRhcmdldCQxLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgZXZlbnQsXG4gICAgaGFuZGxlcixcbiAgICBzdXBwb3J0c1Bhc3NpdmVcbiAgICAgID8geyBjYXB0dXJlOiBjYXB0dXJlLCBwYXNzaXZlOiBwYXNzaXZlIH1cbiAgICAgIDogY2FwdHVyZVxuICApO1xufVxuXG5mdW5jdGlvbiByZW1vdmUkMiAoXG4gIGV2ZW50LFxuICBoYW5kbGVyLFxuICBjYXB0dXJlLFxuICBfdGFyZ2V0XG4pIHtcbiAgKF90YXJnZXQgfHwgdGFyZ2V0JDEpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgZXZlbnQsXG4gICAgaGFuZGxlci5fd2l0aFRhc2sgfHwgaGFuZGxlcixcbiAgICBjYXB0dXJlXG4gICk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURPTUxpc3RlbmVycyAob2xkVm5vZGUsIHZub2RlKSB7XG4gIGlmIChpc1VuZGVmKG9sZFZub2RlLmRhdGEub24pICYmIGlzVW5kZWYodm5vZGUuZGF0YS5vbikpIHtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgb24gPSB2bm9kZS5kYXRhLm9uIHx8IHt9O1xuICB2YXIgb2xkT24gPSBvbGRWbm9kZS5kYXRhLm9uIHx8IHt9O1xuICB0YXJnZXQkMSA9IHZub2RlLmVsbTtcbiAgbm9ybWFsaXplRXZlbnRzKG9uKTtcbiAgdXBkYXRlTGlzdGVuZXJzKG9uLCBvbGRPbiwgYWRkJDEsIHJlbW92ZSQyLCB2bm9kZS5jb250ZXh0KTtcbiAgdGFyZ2V0JDEgPSB1bmRlZmluZWQ7XG59XG5cbnZhciBldmVudHMgPSB7XG4gIGNyZWF0ZTogdXBkYXRlRE9NTGlzdGVuZXJzLFxuICB1cGRhdGU6IHVwZGF0ZURPTUxpc3RlbmVyc1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gdXBkYXRlRE9NUHJvcHMgKG9sZFZub2RlLCB2bm9kZSkge1xuICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmRvbVByb3BzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuZG9tUHJvcHMpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIGtleSwgY3VyO1xuICB2YXIgZWxtID0gdm5vZGUuZWxtO1xuICB2YXIgb2xkUHJvcHMgPSBvbGRWbm9kZS5kYXRhLmRvbVByb3BzIHx8IHt9O1xuICB2YXIgcHJvcHMgPSB2bm9kZS5kYXRhLmRvbVByb3BzIHx8IHt9O1xuICAvLyBjbG9uZSBvYnNlcnZlZCBvYmplY3RzLCBhcyB0aGUgdXNlciBwcm9iYWJseSB3YW50cyB0byBtdXRhdGUgaXRcbiAgaWYgKGlzRGVmKHByb3BzLl9fb2JfXykpIHtcbiAgICBwcm9wcyA9IHZub2RlLmRhdGEuZG9tUHJvcHMgPSBleHRlbmQoe30sIHByb3BzKTtcbiAgfVxuXG4gIGZvciAoa2V5IGluIG9sZFByb3BzKSB7XG4gICAgaWYgKGlzVW5kZWYocHJvcHNba2V5XSkpIHtcbiAgICAgIGVsbVtrZXldID0gJyc7XG4gICAgfVxuICB9XG4gIGZvciAoa2V5IGluIHByb3BzKSB7XG4gICAgY3VyID0gcHJvcHNba2V5XTtcbiAgICAvLyBpZ25vcmUgY2hpbGRyZW4gaWYgdGhlIG5vZGUgaGFzIHRleHRDb250ZW50IG9yIGlubmVySFRNTCxcbiAgICAvLyBhcyB0aGVzZSB3aWxsIHRocm93IGF3YXkgZXhpc3RpbmcgRE9NIG5vZGVzIGFuZCBjYXVzZSByZW1vdmFsIGVycm9yc1xuICAgIC8vIG9uIHN1YnNlcXVlbnQgcGF0Y2hlcyAoIzMzNjApXG4gICAgaWYgKGtleSA9PT0gJ3RleHRDb250ZW50JyB8fCBrZXkgPT09ICdpbm5lckhUTUwnKSB7XG4gICAgICBpZiAodm5vZGUuY2hpbGRyZW4pIHsgdm5vZGUuY2hpbGRyZW4ubGVuZ3RoID0gMDsgfVxuICAgICAgaWYgKGN1ciA9PT0gb2xkUHJvcHNba2V5XSkgeyBjb250aW51ZSB9XG4gICAgICAvLyAjNjYwMSB3b3JrIGFyb3VuZCBDaHJvbWUgdmVyc2lvbiA8PSA1NSBidWcgd2hlcmUgc2luZ2xlIHRleHROb2RlXG4gICAgICAvLyByZXBsYWNlZCBieSBpbm5lckhUTUwvdGV4dENvbnRlbnQgcmV0YWlucyBpdHMgcGFyZW50Tm9kZSBwcm9wZXJ0eVxuICAgICAgaWYgKGVsbS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbG0ucmVtb3ZlQ2hpbGQoZWxtLmNoaWxkTm9kZXNbMF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICd2YWx1ZScpIHtcbiAgICAgIC8vIHN0b3JlIHZhbHVlIGFzIF92YWx1ZSBhcyB3ZWxsIHNpbmNlXG4gICAgICAvLyBub24tc3RyaW5nIHZhbHVlcyB3aWxsIGJlIHN0cmluZ2lmaWVkXG4gICAgICBlbG0uX3ZhbHVlID0gY3VyO1xuICAgICAgLy8gYXZvaWQgcmVzZXR0aW5nIGN1cnNvciBwb3NpdGlvbiB3aGVuIHZhbHVlIGlzIHRoZSBzYW1lXG4gICAgICB2YXIgc3RyQ3VyID0gaXNVbmRlZihjdXIpID8gJycgOiBTdHJpbmcoY3VyKTtcbiAgICAgIGlmIChzaG91bGRVcGRhdGVWYWx1ZShlbG0sIHN0ckN1cikpIHtcbiAgICAgICAgZWxtLnZhbHVlID0gc3RyQ3VyO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbG1ba2V5XSA9IGN1cjtcbiAgICB9XG4gIH1cbn1cblxuLy8gY2hlY2sgcGxhdGZvcm1zL3dlYi91dGlsL2F0dHJzLmpzIGFjY2VwdFZhbHVlXG5cblxuZnVuY3Rpb24gc2hvdWxkVXBkYXRlVmFsdWUgKGVsbSwgY2hlY2tWYWwpIHtcbiAgcmV0dXJuICghZWxtLmNvbXBvc2luZyAmJiAoXG4gICAgZWxtLnRhZ05hbWUgPT09ICdPUFRJT04nIHx8XG4gICAgaXNOb3RJbkZvY3VzQW5kRGlydHkoZWxtLCBjaGVja1ZhbCkgfHxcbiAgICBpc0RpcnR5V2l0aE1vZGlmaWVycyhlbG0sIGNoZWNrVmFsKVxuICApKVxufVxuXG5mdW5jdGlvbiBpc05vdEluRm9jdXNBbmREaXJ0eSAoZWxtLCBjaGVja1ZhbCkge1xuICAvLyByZXR1cm4gdHJ1ZSB3aGVuIHRleHRib3ggKC5udW1iZXIgYW5kIC50cmltKSBsb3NlcyBmb2N1cyBhbmQgaXRzIHZhbHVlIGlzXG4gIC8vIG5vdCBlcXVhbCB0byB0aGUgdXBkYXRlZCB2YWx1ZVxuICB2YXIgbm90SW5Gb2N1cyA9IHRydWU7XG4gIC8vICM2MTU3XG4gIC8vIHdvcmsgYXJvdW5kIElFIGJ1ZyB3aGVuIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGluIGFuIGlmcmFtZVxuICB0cnkgeyBub3RJbkZvY3VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gZWxtOyB9IGNhdGNoIChlKSB7fVxuICByZXR1cm4gbm90SW5Gb2N1cyAmJiBlbG0udmFsdWUgIT09IGNoZWNrVmFsXG59XG5cbmZ1bmN0aW9uIGlzRGlydHlXaXRoTW9kaWZpZXJzIChlbG0sIG5ld1ZhbCkge1xuICB2YXIgdmFsdWUgPSBlbG0udmFsdWU7XG4gIHZhciBtb2RpZmllcnMgPSBlbG0uX3ZNb2RpZmllcnM7IC8vIGluamVjdGVkIGJ5IHYtbW9kZWwgcnVudGltZVxuICBpZiAoaXNEZWYobW9kaWZpZXJzKSkge1xuICAgIGlmIChtb2RpZmllcnMubGF6eSkge1xuICAgICAgLy8gaW5wdXRzIHdpdGggbGF6eSBzaG91bGQgb25seSBiZSB1cGRhdGVkIHdoZW4gbm90IGluIGZvY3VzXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKG1vZGlmaWVycy5udW1iZXIpIHtcbiAgICAgIHJldHVybiB0b051bWJlcih2YWx1ZSkgIT09IHRvTnVtYmVyKG5ld1ZhbClcbiAgICB9XG4gICAgaWYgKG1vZGlmaWVycy50cmltKSB7XG4gICAgICByZXR1cm4gdmFsdWUudHJpbSgpICE9PSBuZXdWYWwudHJpbSgpXG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZSAhPT0gbmV3VmFsXG59XG5cbnZhciBkb21Qcm9wcyA9IHtcbiAgY3JlYXRlOiB1cGRhdGVET01Qcm9wcyxcbiAgdXBkYXRlOiB1cGRhdGVET01Qcm9wc1xufVxuXG4vKiAgKi9cblxudmFyIHBhcnNlU3R5bGVUZXh0ID0gY2FjaGVkKGZ1bmN0aW9uIChjc3NUZXh0KSB7XG4gIHZhciByZXMgPSB7fTtcbiAgdmFyIGxpc3REZWxpbWl0ZXIgPSAvOyg/IVteKF0qXFwpKS9nO1xuICB2YXIgcHJvcGVydHlEZWxpbWl0ZXIgPSAvOiguKykvO1xuICBjc3NUZXh0LnNwbGl0KGxpc3REZWxpbWl0ZXIpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgdmFyIHRtcCA9IGl0ZW0uc3BsaXQocHJvcGVydHlEZWxpbWl0ZXIpO1xuICAgICAgdG1wLmxlbmd0aCA+IDEgJiYgKHJlc1t0bXBbMF0udHJpbSgpXSA9IHRtcFsxXS50cmltKCkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXNcbn0pO1xuXG4vLyBtZXJnZSBzdGF0aWMgYW5kIGR5bmFtaWMgc3R5bGUgZGF0YSBvbiB0aGUgc2FtZSB2bm9kZVxuZnVuY3Rpb24gbm9ybWFsaXplU3R5bGVEYXRhIChkYXRhKSB7XG4gIHZhciBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlQmluZGluZyhkYXRhLnN0eWxlKTtcbiAgLy8gc3RhdGljIHN0eWxlIGlzIHByZS1wcm9jZXNzZWQgaW50byBhbiBvYmplY3QgZHVyaW5nIGNvbXBpbGF0aW9uXG4gIC8vIGFuZCBpcyBhbHdheXMgYSBmcmVzaCBvYmplY3QsIHNvIGl0J3Mgc2FmZSB0byBtZXJnZSBpbnRvIGl0XG4gIHJldHVybiBkYXRhLnN0YXRpY1N0eWxlXG4gICAgPyBleHRlbmQoZGF0YS5zdGF0aWNTdHlsZSwgc3R5bGUpXG4gICAgOiBzdHlsZVxufVxuXG4vLyBub3JtYWxpemUgcG9zc2libGUgYXJyYXkgLyBzdHJpbmcgdmFsdWVzIGludG8gT2JqZWN0XG5mdW5jdGlvbiBub3JtYWxpemVTdHlsZUJpbmRpbmcgKGJpbmRpbmdTdHlsZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShiaW5kaW5nU3R5bGUpKSB7XG4gICAgcmV0dXJuIHRvT2JqZWN0KGJpbmRpbmdTdHlsZSlcbiAgfVxuICBpZiAodHlwZW9mIGJpbmRpbmdTdHlsZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcGFyc2VTdHlsZVRleHQoYmluZGluZ1N0eWxlKVxuICB9XG4gIHJldHVybiBiaW5kaW5nU3R5bGVcbn1cblxuLyoqXG4gKiBwYXJlbnQgY29tcG9uZW50IHN0eWxlIHNob3VsZCBiZSBhZnRlciBjaGlsZCdzXG4gKiBzbyB0aGF0IHBhcmVudCBjb21wb25lbnQncyBzdHlsZSBjb3VsZCBvdmVycmlkZSBpdFxuICovXG5mdW5jdGlvbiBnZXRTdHlsZSAodm5vZGUsIGNoZWNrQ2hpbGQpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICB2YXIgc3R5bGVEYXRhO1xuXG4gIGlmIChjaGVja0NoaWxkKSB7XG4gICAgdmFyIGNoaWxkTm9kZSA9IHZub2RlO1xuICAgIHdoaWxlIChjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG4gICAgICBpZiAoXG4gICAgICAgIGNoaWxkTm9kZSAmJiBjaGlsZE5vZGUuZGF0YSAmJlxuICAgICAgICAoc3R5bGVEYXRhID0gbm9ybWFsaXplU3R5bGVEYXRhKGNoaWxkTm9kZS5kYXRhKSlcbiAgICAgICkge1xuICAgICAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICgoc3R5bGVEYXRhID0gbm9ybWFsaXplU3R5bGVEYXRhKHZub2RlLmRhdGEpKSkge1xuICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7XG4gIH1cblxuICB2YXIgcGFyZW50Tm9kZSA9IHZub2RlO1xuICB3aGlsZSAoKHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudCkpIHtcbiAgICBpZiAocGFyZW50Tm9kZS5kYXRhICYmIChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEocGFyZW50Tm9kZS5kYXRhKSkpIHtcbiAgICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyogICovXG5cbnZhciBjc3NWYXJSRSA9IC9eLS0vO1xudmFyIGltcG9ydGFudFJFID0gL1xccyohaW1wb3J0YW50JC87XG52YXIgc2V0UHJvcCA9IGZ1bmN0aW9uIChlbCwgbmFtZSwgdmFsKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoY3NzVmFyUkUudGVzdChuYW1lKSkge1xuICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbCk7XG4gIH0gZWxzZSBpZiAoaW1wb3J0YW50UkUudGVzdCh2YWwpKSB7XG4gICAgZWwuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKSwgJ2ltcG9ydGFudCcpO1xuICB9IGVsc2Uge1xuICAgIHZhciBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZShuYW1lKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAvLyBTdXBwb3J0IHZhbHVlcyBhcnJheSBjcmVhdGVkIGJ5IGF1dG9wcmVmaXhlciwgZS5nLlxuICAgICAgLy8ge2Rpc3BsYXk6IFtcIi13ZWJraXQtYm94XCIsIFwiLW1zLWZsZXhib3hcIiwgXCJmbGV4XCJdfVxuICAgICAgLy8gU2V0IHRoZW0gb25lIGJ5IG9uZSwgYW5kIHRoZSBicm93c2VyIHdpbGwgb25seSBzZXQgdGhvc2UgaXQgY2FuIHJlY29nbml6ZVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHZhbC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBlbC5zdHlsZVtub3JtYWxpemVkTmFtZV0gPSB2YWxbaV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnN0eWxlW25vcm1hbGl6ZWROYW1lXSA9IHZhbDtcbiAgICB9XG4gIH1cbn07XG5cbnZhciB2ZW5kb3JOYW1lcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xuXG52YXIgZW1wdHlTdHlsZTtcbnZhciBub3JtYWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHByb3ApIHtcbiAgZW1wdHlTdHlsZSA9IGVtcHR5U3R5bGUgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XG4gIHByb3AgPSBjYW1lbGl6ZShwcm9wKTtcbiAgaWYgKHByb3AgIT09ICdmaWx0ZXInICYmIChwcm9wIGluIGVtcHR5U3R5bGUpKSB7XG4gICAgcmV0dXJuIHByb3BcbiAgfVxuICB2YXIgY2FwTmFtZSA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnNsaWNlKDEpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHZlbmRvck5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIG5hbWUgPSB2ZW5kb3JOYW1lc1tpXSArIGNhcE5hbWU7XG4gICAgaWYgKG5hbWUgaW4gZW1wdHlTdHlsZSkge1xuICAgICAgcmV0dXJuIG5hbWVcbiAgICB9XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiB1cGRhdGVTdHlsZSAob2xkVm5vZGUsIHZub2RlKSB7XG4gIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcbiAgdmFyIG9sZERhdGEgPSBvbGRWbm9kZS5kYXRhO1xuXG4gIGlmIChpc1VuZGVmKGRhdGEuc3RhdGljU3R5bGUpICYmIGlzVW5kZWYoZGF0YS5zdHlsZSkgJiZcbiAgICBpc1VuZGVmKG9sZERhdGEuc3RhdGljU3R5bGUpICYmIGlzVW5kZWYob2xkRGF0YS5zdHlsZSlcbiAgKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgY3VyLCBuYW1lO1xuICB2YXIgZWwgPSB2bm9kZS5lbG07XG4gIHZhciBvbGRTdGF0aWNTdHlsZSA9IG9sZERhdGEuc3RhdGljU3R5bGU7XG4gIHZhciBvbGRTdHlsZUJpbmRpbmcgPSBvbGREYXRhLm5vcm1hbGl6ZWRTdHlsZSB8fCBvbGREYXRhLnN0eWxlIHx8IHt9O1xuXG4gIC8vIGlmIHN0YXRpYyBzdHlsZSBleGlzdHMsIHN0eWxlYmluZGluZyBhbHJlYWR5IG1lcmdlZCBpbnRvIGl0IHdoZW4gZG9pbmcgbm9ybWFsaXplU3R5bGVEYXRhXG4gIHZhciBvbGRTdHlsZSA9IG9sZFN0YXRpY1N0eWxlIHx8IG9sZFN0eWxlQmluZGluZztcblxuICB2YXIgc3R5bGUgPSBub3JtYWxpemVTdHlsZUJpbmRpbmcodm5vZGUuZGF0YS5zdHlsZSkgfHwge307XG5cbiAgLy8gc3RvcmUgbm9ybWFsaXplZCBzdHlsZSB1bmRlciBhIGRpZmZlcmVudCBrZXkgZm9yIG5leHQgZGlmZlxuICAvLyBtYWtlIHN1cmUgdG8gY2xvbmUgaXQgaWYgaXQncyByZWFjdGl2ZSwgc2luY2UgdGhlIHVzZXIgbGlrZWx5IHdhbnRzXG4gIC8vIHRvIG11dGF0ZSBpdC5cbiAgdm5vZGUuZGF0YS5ub3JtYWxpemVkU3R5bGUgPSBpc0RlZihzdHlsZS5fX29iX18pXG4gICAgPyBleHRlbmQoe30sIHN0eWxlKVxuICAgIDogc3R5bGU7XG5cbiAgdmFyIG5ld1N0eWxlID0gZ2V0U3R5bGUodm5vZGUsIHRydWUpO1xuXG4gIGZvciAobmFtZSBpbiBvbGRTdHlsZSkge1xuICAgIGlmIChpc1VuZGVmKG5ld1N0eWxlW25hbWVdKSkge1xuICAgICAgc2V0UHJvcChlbCwgbmFtZSwgJycpO1xuICAgIH1cbiAgfVxuICBmb3IgKG5hbWUgaW4gbmV3U3R5bGUpIHtcbiAgICBjdXIgPSBuZXdTdHlsZVtuYW1lXTtcbiAgICBpZiAoY3VyICE9PSBvbGRTdHlsZVtuYW1lXSkge1xuICAgICAgLy8gaWU5IHNldHRpbmcgdG8gbnVsbCBoYXMgbm8gZWZmZWN0LCBtdXN0IHVzZSBlbXB0eSBzdHJpbmdcbiAgICAgIHNldFByb3AoZWwsIG5hbWUsIGN1ciA9PSBudWxsID8gJycgOiBjdXIpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgc3R5bGUgPSB7XG4gIGNyZWF0ZTogdXBkYXRlU3R5bGUsXG4gIHVwZGF0ZTogdXBkYXRlU3R5bGVcbn1cblxuLyogICovXG5cbi8qKlxuICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgU1ZHIHNpbmNlIGNsYXNzTGlzdCBpcyBub3Qgc3VwcG9ydGVkIG9uXG4gKiBTVkcgZWxlbWVudHMgaW4gSUVcbiAqL1xuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbHMpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghY2xzIHx8ICEoY2xzID0gY2xzLnRyaW0oKSkpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBpZiAoY2xzLmluZGV4T2YoJyAnKSA+IC0xKSB7XG4gICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7IHJldHVybiBlbC5jbGFzc0xpc3QuYWRkKGMpOyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gXCIgXCIgKyAoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiO1xuICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIChjdXIgKyBjbHMpLnRyaW0oKSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgU1ZHIHNpbmNlIGNsYXNzTGlzdCBpcyBub3Qgc3VwcG9ydGVkIG9uXG4gKiBTVkcgZWxlbWVudHMgaW4gSUVcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MgKGVsLCBjbHMpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghY2xzIHx8ICEoY2xzID0gY2xzLnRyaW0oKSkpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBpZiAoY2xzLmluZGV4T2YoJyAnKSA+IC0xKSB7XG4gICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7IHJldHVybiBlbC5jbGFzc0xpc3QucmVtb3ZlKGMpOyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuICAgIH1cbiAgICBpZiAoIWVsLmNsYXNzTGlzdC5sZW5ndGgpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9IFwiIFwiICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyBcIiBcIjtcbiAgICB2YXIgdGFyID0gJyAnICsgY2xzICsgJyAnO1xuICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHtcbiAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcbiAgICB9XG4gICAgY3VyID0gY3VyLnRyaW0oKTtcbiAgICBpZiAoY3VyKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY3VyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zaXRpb24gKGRlZikge1xuICBpZiAoIWRlZikge1xuICAgIHJldHVyblxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmICh0eXBlb2YgZGVmID09PSAnb2JqZWN0Jykge1xuICAgIHZhciByZXMgPSB7fTtcbiAgICBpZiAoZGVmLmNzcyAhPT0gZmFsc2UpIHtcbiAgICAgIGV4dGVuZChyZXMsIGF1dG9Dc3NUcmFuc2l0aW9uKGRlZi5uYW1lIHx8ICd2JykpO1xuICAgIH1cbiAgICBleHRlbmQocmVzLCBkZWYpO1xuICAgIHJldHVybiByZXNcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBhdXRvQ3NzVHJhbnNpdGlvbihkZWYpXG4gIH1cbn1cblxudmFyIGF1dG9Dc3NUcmFuc2l0aW9uID0gY2FjaGVkKGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiB7XG4gICAgZW50ZXJDbGFzczogKG5hbWUgKyBcIi1lbnRlclwiKSxcbiAgICBlbnRlclRvQ2xhc3M6IChuYW1lICsgXCItZW50ZXItdG9cIiksXG4gICAgZW50ZXJBY3RpdmVDbGFzczogKG5hbWUgKyBcIi1lbnRlci1hY3RpdmVcIiksXG4gICAgbGVhdmVDbGFzczogKG5hbWUgKyBcIi1sZWF2ZVwiKSxcbiAgICBsZWF2ZVRvQ2xhc3M6IChuYW1lICsgXCItbGVhdmUtdG9cIiksXG4gICAgbGVhdmVBY3RpdmVDbGFzczogKG5hbWUgKyBcIi1sZWF2ZS1hY3RpdmVcIilcbiAgfVxufSk7XG5cbnZhciBoYXNUcmFuc2l0aW9uID0gaW5Ccm93c2VyICYmICFpc0lFOTtcbnZhciBUUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xudmFyIEFOSU1BVElPTiA9ICdhbmltYXRpb24nO1xuXG4vLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG52YXIgdHJhbnNpdGlvblByb3AgPSAndHJhbnNpdGlvbic7XG52YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gJ3RyYW5zaXRpb25lbmQnO1xudmFyIGFuaW1hdGlvblByb3AgPSAnYW5pbWF0aW9uJztcbnZhciBhbmltYXRpb25FbmRFdmVudCA9ICdhbmltYXRpb25lbmQnO1xuaWYgKGhhc1RyYW5zaXRpb24pIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh3aW5kb3cub250cmFuc2l0aW9uZW5kID09PSB1bmRlZmluZWQgJiZcbiAgICB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWRcbiAgKSB7XG4gICAgdHJhbnNpdGlvblByb3AgPSAnV2Via2l0VHJhbnNpdGlvbic7XG4gICAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gJ3dlYmtpdFRyYW5zaXRpb25FbmQnO1xuICB9XG4gIGlmICh3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJlxuICAgIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkXG4gICkge1xuICAgIGFuaW1hdGlvblByb3AgPSAnV2Via2l0QW5pbWF0aW9uJztcbiAgICBhbmltYXRpb25FbmRFdmVudCA9ICd3ZWJraXRBbmltYXRpb25FbmQnO1xuICB9XG59XG5cbi8vIGJpbmRpbmcgdG8gd2luZG93IGlzIG5lY2Vzc2FyeSB0byBtYWtlIGhvdCByZWxvYWQgd29yayBpbiBJRSBpbiBzdHJpY3QgbW9kZVxudmFyIHJhZiA9IGluQnJvd3NlclxuICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpXG4gICAgOiBzZXRUaW1lb3V0XG4gIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbigpOyB9O1xuXG5mdW5jdGlvbiBuZXh0RnJhbWUgKGZuKSB7XG4gIHJhZihmdW5jdGlvbiAoKSB7XG4gICAgcmFmKGZuKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyAoZWwsIGNscykge1xuICB2YXIgdHJhbnNpdGlvbkNsYXNzZXMgPSBlbC5fdHJhbnNpdGlvbkNsYXNzZXMgfHwgKGVsLl90cmFuc2l0aW9uQ2xhc3NlcyA9IFtdKTtcbiAgaWYgKHRyYW5zaXRpb25DbGFzc2VzLmluZGV4T2YoY2xzKSA8IDApIHtcbiAgICB0cmFuc2l0aW9uQ2xhc3Nlcy5wdXNoKGNscyk7XG4gICAgYWRkQ2xhc3MoZWwsIGNscyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlVHJhbnNpdGlvbkNsYXNzIChlbCwgY2xzKSB7XG4gIGlmIChlbC5fdHJhbnNpdGlvbkNsYXNzZXMpIHtcbiAgICByZW1vdmUoZWwuX3RyYW5zaXRpb25DbGFzc2VzLCBjbHMpO1xuICB9XG4gIHJlbW92ZUNsYXNzKGVsLCBjbHMpO1xufVxuXG5mdW5jdGlvbiB3aGVuVHJhbnNpdGlvbkVuZHMgKFxuICBlbCxcbiAgZXhwZWN0ZWRUeXBlLFxuICBjYlxuKSB7XG4gIHZhciByZWYgPSBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKTtcbiAgdmFyIHR5cGUgPSByZWYudHlwZTtcbiAgdmFyIHRpbWVvdXQgPSByZWYudGltZW91dDtcbiAgdmFyIHByb3BDb3VudCA9IHJlZi5wcm9wQ291bnQ7XG4gIGlmICghdHlwZSkgeyByZXR1cm4gY2IoKSB9XG4gIHZhciBldmVudCA9IHR5cGUgPT09IFRSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcbiAgdmFyIGVuZGVkID0gMDtcbiAgdmFyIGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBvbkVuZCk7XG4gICAgY2IoKTtcbiAgfTtcbiAgdmFyIG9uRW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG4gICAgICBpZiAoKytlbmRlZCA+PSBwcm9wQ291bnQpIHtcbiAgICAgICAgZW5kKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZW5kZWQgPCBwcm9wQ291bnQpIHtcbiAgICAgIGVuZCgpO1xuICAgIH1cbiAgfSwgdGltZW91dCArIDEpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBvbkVuZCk7XG59XG5cbnZhciB0cmFuc2Zvcm1SRSA9IC9cXGIodHJhbnNmb3JtfGFsbCkoLHwkKS87XG5cbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25JbmZvIChlbCwgZXhwZWN0ZWRUeXBlKSB7XG4gIHZhciBzdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG4gIHZhciB0cmFuc2l0aW9uRGVsYXlzID0gc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ0RlbGF5J10uc3BsaXQoJywgJyk7XG4gIHZhciB0cmFuc2l0aW9uRHVyYXRpb25zID0gc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJ10uc3BsaXQoJywgJyk7XG4gIHZhciB0cmFuc2l0aW9uVGltZW91dCA9IGdldFRpbWVvdXQodHJhbnNpdGlvbkRlbGF5cywgdHJhbnNpdGlvbkR1cmF0aW9ucyk7XG4gIHZhciBhbmltYXRpb25EZWxheXMgPSBzdHlsZXNbYW5pbWF0aW9uUHJvcCArICdEZWxheSddLnNwbGl0KCcsICcpO1xuICB2YXIgYW5pbWF0aW9uRHVyYXRpb25zID0gc3R5bGVzW2FuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nXS5zcGxpdCgnLCAnKTtcbiAgdmFyIGFuaW1hdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KGFuaW1hdGlvbkRlbGF5cywgYW5pbWF0aW9uRHVyYXRpb25zKTtcblxuICB2YXIgdHlwZTtcbiAgdmFyIHRpbWVvdXQgPSAwO1xuICB2YXIgcHJvcENvdW50ID0gMDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChleHBlY3RlZFR5cGUgPT09IFRSQU5TSVRJT04pIHtcbiAgICBpZiAodHJhbnNpdGlvblRpbWVvdXQgPiAwKSB7XG4gICAgICB0eXBlID0gVFJBTlNJVElPTjtcbiAgICAgIHRpbWVvdXQgPSB0cmFuc2l0aW9uVGltZW91dDtcbiAgICAgIHByb3BDb3VudCA9IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuICAgIH1cbiAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IEFOSU1BVElPTikge1xuICAgIGlmIChhbmltYXRpb25UaW1lb3V0ID4gMCkge1xuICAgICAgdHlwZSA9IEFOSU1BVElPTjtcbiAgICAgIHRpbWVvdXQgPSBhbmltYXRpb25UaW1lb3V0O1xuICAgICAgcHJvcENvdW50ID0gYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTtcbiAgICB0eXBlID0gdGltZW91dCA+IDBcbiAgICAgID8gdHJhbnNpdGlvblRpbWVvdXQgPiBhbmltYXRpb25UaW1lb3V0XG4gICAgICAgID8gVFJBTlNJVElPTlxuICAgICAgICA6IEFOSU1BVElPTlxuICAgICAgOiBudWxsO1xuICAgIHByb3BDb3VudCA9IHR5cGVcbiAgICAgID8gdHlwZSA9PT0gVFJBTlNJVElPTlxuICAgICAgICA/IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoXG4gICAgICAgIDogYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aFxuICAgICAgOiAwO1xuICB9XG4gIHZhciBoYXNUcmFuc2Zvcm0gPVxuICAgIHR5cGUgPT09IFRSQU5TSVRJT04gJiZcbiAgICB0cmFuc2Zvcm1SRS50ZXN0KHN0eWxlc1t0cmFuc2l0aW9uUHJvcCArICdQcm9wZXJ0eSddKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiB0eXBlLFxuICAgIHRpbWVvdXQ6IHRpbWVvdXQsXG4gICAgcHJvcENvdW50OiBwcm9wQ291bnQsXG4gICAgaGFzVHJhbnNmb3JtOiBoYXNUcmFuc2Zvcm1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRUaW1lb3V0IChkZWxheXMsIGR1cmF0aW9ucykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICB3aGlsZSAoZGVsYXlzLmxlbmd0aCA8IGR1cmF0aW9ucy5sZW5ndGgpIHtcbiAgICBkZWxheXMgPSBkZWxheXMuY29uY2F0KGRlbGF5cyk7XG4gIH1cblxuICByZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCwgZHVyYXRpb25zLm1hcChmdW5jdGlvbiAoZCwgaSkge1xuICAgIHJldHVybiB0b01zKGQpICsgdG9NcyhkZWxheXNbaV0pXG4gIH0pKVxufVxuXG5mdW5jdGlvbiB0b01zIChzKSB7XG4gIHJldHVybiBOdW1iZXIocy5zbGljZSgwLCAtMSkpICogMTAwMFxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gZW50ZXIgKHZub2RlLCB0b2dnbGVEaXNwbGF5KSB7XG4gIHZhciBlbCA9IHZub2RlLmVsbTtcblxuICAvLyBjYWxsIGxlYXZlIGNhbGxiYWNrIG5vd1xuICBpZiAoaXNEZWYoZWwuX2xlYXZlQ2IpKSB7XG4gICAgZWwuX2xlYXZlQ2IuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICBlbC5fbGVhdmVDYigpO1xuICB9XG5cbiAgdmFyIGRhdGEgPSByZXNvbHZlVHJhbnNpdGlvbih2bm9kZS5kYXRhLnRyYW5zaXRpb24pO1xuICBpZiAoaXNVbmRlZihkYXRhKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc0RlZihlbC5fZW50ZXJDYikgfHwgZWwubm9kZVR5cGUgIT09IDEpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBjc3MgPSBkYXRhLmNzcztcbiAgdmFyIHR5cGUgPSBkYXRhLnR5cGU7XG4gIHZhciBlbnRlckNsYXNzID0gZGF0YS5lbnRlckNsYXNzO1xuICB2YXIgZW50ZXJUb0NsYXNzID0gZGF0YS5lbnRlclRvQ2xhc3M7XG4gIHZhciBlbnRlckFjdGl2ZUNsYXNzID0gZGF0YS5lbnRlckFjdGl2ZUNsYXNzO1xuICB2YXIgYXBwZWFyQ2xhc3MgPSBkYXRhLmFwcGVhckNsYXNzO1xuICB2YXIgYXBwZWFyVG9DbGFzcyA9IGRhdGEuYXBwZWFyVG9DbGFzcztcbiAgdmFyIGFwcGVhckFjdGl2ZUNsYXNzID0gZGF0YS5hcHBlYXJBY3RpdmVDbGFzcztcbiAgdmFyIGJlZm9yZUVudGVyID0gZGF0YS5iZWZvcmVFbnRlcjtcbiAgdmFyIGVudGVyID0gZGF0YS5lbnRlcjtcbiAgdmFyIGFmdGVyRW50ZXIgPSBkYXRhLmFmdGVyRW50ZXI7XG4gIHZhciBlbnRlckNhbmNlbGxlZCA9IGRhdGEuZW50ZXJDYW5jZWxsZWQ7XG4gIHZhciBiZWZvcmVBcHBlYXIgPSBkYXRhLmJlZm9yZUFwcGVhcjtcbiAgdmFyIGFwcGVhciA9IGRhdGEuYXBwZWFyO1xuICB2YXIgYWZ0ZXJBcHBlYXIgPSBkYXRhLmFmdGVyQXBwZWFyO1xuICB2YXIgYXBwZWFyQ2FuY2VsbGVkID0gZGF0YS5hcHBlYXJDYW5jZWxsZWQ7XG4gIHZhciBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247XG5cbiAgLy8gYWN0aXZlSW5zdGFuY2Ugd2lsbCBhbHdheXMgYmUgdGhlIDx0cmFuc2l0aW9uPiBjb21wb25lbnQgbWFuYWdpbmcgdGhpc1xuICAvLyB0cmFuc2l0aW9uLiBPbmUgZWRnZSBjYXNlIHRvIGNoZWNrIGlzIHdoZW4gdGhlIDx0cmFuc2l0aW9uPiBpcyBwbGFjZWRcbiAgLy8gYXMgdGhlIHJvb3Qgbm9kZSBvZiBhIGNoaWxkIGNvbXBvbmVudC4gSW4gdGhhdCBjYXNlIHdlIG5lZWQgdG8gY2hlY2tcbiAgLy8gPHRyYW5zaXRpb24+J3MgcGFyZW50IGZvciBhcHBlYXIgY2hlY2suXG4gIHZhciBjb250ZXh0ID0gYWN0aXZlSW5zdGFuY2U7XG4gIHZhciB0cmFuc2l0aW9uTm9kZSA9IGFjdGl2ZUluc3RhbmNlLiR2bm9kZTtcbiAgd2hpbGUgKHRyYW5zaXRpb25Ob2RlICYmIHRyYW5zaXRpb25Ob2RlLnBhcmVudCkge1xuICAgIHRyYW5zaXRpb25Ob2RlID0gdHJhbnNpdGlvbk5vZGUucGFyZW50O1xuICAgIGNvbnRleHQgPSB0cmFuc2l0aW9uTm9kZS5jb250ZXh0O1xuICB9XG5cbiAgdmFyIGlzQXBwZWFyID0gIWNvbnRleHQuX2lzTW91bnRlZCB8fCAhdm5vZGUuaXNSb290SW5zZXJ0O1xuXG4gIGlmIChpc0FwcGVhciAmJiAhYXBwZWFyICYmIGFwcGVhciAhPT0gJycpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBzdGFydENsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyQ2xhc3NcbiAgICA/IGFwcGVhckNsYXNzXG4gICAgOiBlbnRlckNsYXNzO1xuICB2YXIgYWN0aXZlQ2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJBY3RpdmVDbGFzc1xuICAgID8gYXBwZWFyQWN0aXZlQ2xhc3NcbiAgICA6IGVudGVyQWN0aXZlQ2xhc3M7XG4gIHZhciB0b0NsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyVG9DbGFzc1xuICAgID8gYXBwZWFyVG9DbGFzc1xuICAgIDogZW50ZXJUb0NsYXNzO1xuXG4gIHZhciBiZWZvcmVFbnRlckhvb2sgPSBpc0FwcGVhclxuICAgID8gKGJlZm9yZUFwcGVhciB8fCBiZWZvcmVFbnRlcilcbiAgICA6IGJlZm9yZUVudGVyO1xuICB2YXIgZW50ZXJIb29rID0gaXNBcHBlYXJcbiAgICA/ICh0eXBlb2YgYXBwZWFyID09PSAnZnVuY3Rpb24nID8gYXBwZWFyIDogZW50ZXIpXG4gICAgOiBlbnRlcjtcbiAgdmFyIGFmdGVyRW50ZXJIb29rID0gaXNBcHBlYXJcbiAgICA/IChhZnRlckFwcGVhciB8fCBhZnRlckVudGVyKVxuICAgIDogYWZ0ZXJFbnRlcjtcbiAgdmFyIGVudGVyQ2FuY2VsbGVkSG9vayA9IGlzQXBwZWFyXG4gICAgPyAoYXBwZWFyQ2FuY2VsbGVkIHx8IGVudGVyQ2FuY2VsbGVkKVxuICAgIDogZW50ZXJDYW5jZWxsZWQ7XG5cbiAgdmFyIGV4cGxpY2l0RW50ZXJEdXJhdGlvbiA9IHRvTnVtYmVyKFxuICAgIGlzT2JqZWN0KGR1cmF0aW9uKVxuICAgICAgPyBkdXJhdGlvbi5lbnRlclxuICAgICAgOiBkdXJhdGlvblxuICApO1xuXG4gIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBleHBsaWNpdEVudGVyRHVyYXRpb24gIT0gbnVsbCkge1xuICAgIGNoZWNrRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uLCAnZW50ZXInLCB2bm9kZSk7XG4gIH1cblxuICB2YXIgZXhwZWN0c0NTUyA9IGNzcyAhPT0gZmFsc2UgJiYgIWlzSUU5O1xuICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgoZW50ZXJIb29rKTtcblxuICB2YXIgY2IgPSBlbC5fZW50ZXJDYiA9IG9uY2UoZnVuY3Rpb24gKCkge1xuICAgIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIHRvQ2xhc3MpO1xuICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBhY3RpdmVDbGFzcyk7XG4gICAgfVxuICAgIGlmIChjYi5jYW5jZWxsZWQpIHtcbiAgICAgIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgc3RhcnRDbGFzcyk7XG4gICAgICB9XG4gICAgICBlbnRlckNhbmNlbGxlZEhvb2sgJiYgZW50ZXJDYW5jZWxsZWRIb29rKGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJFbnRlckhvb2sgJiYgYWZ0ZXJFbnRlckhvb2soZWwpO1xuICAgIH1cbiAgICBlbC5fZW50ZXJDYiA9IG51bGw7XG4gIH0pO1xuXG4gIGlmICghdm5vZGUuZGF0YS5zaG93KSB7XG4gICAgLy8gcmVtb3ZlIHBlbmRpbmcgbGVhdmUgZWxlbWVudCBvbiBlbnRlciBieSBpbmplY3RpbmcgYW4gaW5zZXJ0IGhvb2tcbiAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ2luc2VydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuICAgICAgdmFyIHBlbmRpbmdOb2RlID0gcGFyZW50ICYmIHBhcmVudC5fcGVuZGluZyAmJiBwYXJlbnQuX3BlbmRpbmdbdm5vZGUua2V5XTtcbiAgICAgIGlmIChwZW5kaW5nTm9kZSAmJlxuICAgICAgICBwZW5kaW5nTm9kZS50YWcgPT09IHZub2RlLnRhZyAmJlxuICAgICAgICBwZW5kaW5nTm9kZS5lbG0uX2xlYXZlQ2JcbiAgICAgICkge1xuICAgICAgICBwZW5kaW5nTm9kZS5lbG0uX2xlYXZlQ2IoKTtcbiAgICAgIH1cbiAgICAgIGVudGVySG9vayAmJiBlbnRlckhvb2soZWwsIGNiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHN0YXJ0IGVudGVyIHRyYW5zaXRpb25cbiAgYmVmb3JlRW50ZXJIb29rICYmIGJlZm9yZUVudGVySG9vayhlbCk7XG4gIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcbiAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTtcbiAgICBuZXh0RnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcbiAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgdG9DbGFzcyk7XG4gICAgICAgIGlmICghdXNlcldhbnRzQ29udHJvbCkge1xuICAgICAgICAgIGlmIChpc1ZhbGlkRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChjYiwgZXhwbGljaXRFbnRlckR1cmF0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBjYik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAodm5vZGUuZGF0YS5zaG93KSB7XG4gICAgdG9nZ2xlRGlzcGxheSAmJiB0b2dnbGVEaXNwbGF5KCk7XG4gICAgZW50ZXJIb29rICYmIGVudGVySG9vayhlbCwgY2IpO1xuICB9XG5cbiAgaWYgKCFleHBlY3RzQ1NTICYmICF1c2VyV2FudHNDb250cm9sKSB7XG4gICAgY2IoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBsZWF2ZSAodm5vZGUsIHJtKSB7XG4gIHZhciBlbCA9IHZub2RlLmVsbTtcblxuICAvLyBjYWxsIGVudGVyIGNhbGxiYWNrIG5vd1xuICBpZiAoaXNEZWYoZWwuX2VudGVyQ2IpKSB7XG4gICAgZWwuX2VudGVyQ2IuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICBlbC5fZW50ZXJDYigpO1xuICB9XG5cbiAgdmFyIGRhdGEgPSByZXNvbHZlVHJhbnNpdGlvbih2bm9kZS5kYXRhLnRyYW5zaXRpb24pO1xuICBpZiAoaXNVbmRlZihkYXRhKSB8fCBlbC5ub2RlVHlwZSAhPT0gMSkge1xuICAgIHJldHVybiBybSgpXG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIGNzcyA9IGRhdGEuY3NzO1xuICB2YXIgdHlwZSA9IGRhdGEudHlwZTtcbiAgdmFyIGxlYXZlQ2xhc3MgPSBkYXRhLmxlYXZlQ2xhc3M7XG4gIHZhciBsZWF2ZVRvQ2xhc3MgPSBkYXRhLmxlYXZlVG9DbGFzcztcbiAgdmFyIGxlYXZlQWN0aXZlQ2xhc3MgPSBkYXRhLmxlYXZlQWN0aXZlQ2xhc3M7XG4gIHZhciBiZWZvcmVMZWF2ZSA9IGRhdGEuYmVmb3JlTGVhdmU7XG4gIHZhciBsZWF2ZSA9IGRhdGEubGVhdmU7XG4gIHZhciBhZnRlckxlYXZlID0gZGF0YS5hZnRlckxlYXZlO1xuICB2YXIgbGVhdmVDYW5jZWxsZWQgPSBkYXRhLmxlYXZlQ2FuY2VsbGVkO1xuICB2YXIgZGVsYXlMZWF2ZSA9IGRhdGEuZGVsYXlMZWF2ZTtcbiAgdmFyIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjtcblxuICB2YXIgZXhwZWN0c0NTUyA9IGNzcyAhPT0gZmFsc2UgJiYgIWlzSUU5O1xuICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgobGVhdmUpO1xuXG4gIHZhciBleHBsaWNpdExlYXZlRHVyYXRpb24gPSB0b051bWJlcihcbiAgICBpc09iamVjdChkdXJhdGlvbilcbiAgICAgID8gZHVyYXRpb24ubGVhdmVcbiAgICAgIDogZHVyYXRpb25cbiAgKTtcblxuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgaXNEZWYoZXhwbGljaXRMZWF2ZUR1cmF0aW9uKSkge1xuICAgIGNoZWNrRHVyYXRpb24oZXhwbGljaXRMZWF2ZUR1cmF0aW9uLCAnbGVhdmUnLCB2bm9kZSk7XG4gIH1cblxuICB2YXIgY2IgPSBlbC5fbGVhdmVDYiA9IG9uY2UoZnVuY3Rpb24gKCkge1xuICAgIGlmIChlbC5wYXJlbnROb2RlICYmIGVsLnBhcmVudE5vZGUuX3BlbmRpbmcpIHtcbiAgICAgIGVsLnBhcmVudE5vZGUuX3BlbmRpbmdbdm5vZGUua2V5XSA9IG51bGw7XG4gICAgfVxuICAgIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG4gICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgIH1cbiAgICBpZiAoY2IuY2FuY2VsbGVkKSB7XG4gICAgICBpZiAoZXhwZWN0c0NTUykge1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQ2xhc3MpO1xuICAgICAgfVxuICAgICAgbGVhdmVDYW5jZWxsZWQgJiYgbGVhdmVDYW5jZWxsZWQoZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBybSgpO1xuICAgICAgYWZ0ZXJMZWF2ZSAmJiBhZnRlckxlYXZlKGVsKTtcbiAgICB9XG4gICAgZWwuX2xlYXZlQ2IgPSBudWxsO1xuICB9KTtcblxuICBpZiAoZGVsYXlMZWF2ZSkge1xuICAgIGRlbGF5TGVhdmUocGVyZm9ybUxlYXZlKTtcbiAgfSBlbHNlIHtcbiAgICBwZXJmb3JtTGVhdmUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBlcmZvcm1MZWF2ZSAoKSB7XG4gICAgLy8gdGhlIGRlbGF5ZWQgbGVhdmUgbWF5IGhhdmUgYWxyZWFkeSBiZWVuIGNhbmNlbGxlZFxuICAgIGlmIChjYi5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyByZWNvcmQgbGVhdmluZyBlbGVtZW50XG4gICAgaWYgKCF2bm9kZS5kYXRhLnNob3cpIHtcbiAgICAgIChlbC5wYXJlbnROb2RlLl9wZW5kaW5nIHx8IChlbC5wYXJlbnROb2RlLl9wZW5kaW5nID0ge30pKVsodm5vZGUua2V5KV0gPSB2bm9kZTtcbiAgICB9XG4gICAgYmVmb3JlTGVhdmUgJiYgYmVmb3JlTGVhdmUoZWwpO1xuICAgIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQ2xhc3MpO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTtcbiAgICAgIG5leHRGcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7XG4gICAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG4gICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuICAgICAgICAgIGlmICghdXNlcldhbnRzQ29udHJvbCkge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWREdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24pKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoY2IsIGV4cGxpY2l0TGVhdmVEdXJhdGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGNiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBsZWF2ZSAmJiBsZWF2ZShlbCwgY2IpO1xuICAgIGlmICghZXhwZWN0c0NTUyAmJiAhdXNlcldhbnRzQ29udHJvbCkge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gb25seSB1c2VkIGluIGRldiBtb2RlXG5mdW5jdGlvbiBjaGVja0R1cmF0aW9uICh2YWwsIG5hbWUsIHZub2RlKSB7XG4gIGlmICh0eXBlb2YgdmFsICE9PSAnbnVtYmVyJykge1xuICAgIHdhcm4oXG4gICAgICBcIjx0cmFuc2l0aW9uPiBleHBsaWNpdCBcIiArIG5hbWUgKyBcIiBkdXJhdGlvbiBpcyBub3QgYSB2YWxpZCBudW1iZXIgLSBcIiArXG4gICAgICBcImdvdCBcIiArIChKU09OLnN0cmluZ2lmeSh2YWwpKSArIFwiLlwiLFxuICAgICAgdm5vZGUuY29udGV4dFxuICAgICk7XG4gIH0gZWxzZSBpZiAoaXNOYU4odmFsKSkge1xuICAgIHdhcm4oXG4gICAgICBcIjx0cmFuc2l0aW9uPiBleHBsaWNpdCBcIiArIG5hbWUgKyBcIiBkdXJhdGlvbiBpcyBOYU4gLSBcIiArXG4gICAgICAndGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LicsXG4gICAgICB2bm9kZS5jb250ZXh0XG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1ZhbGlkRHVyYXRpb24gKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbClcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgYSB0cmFuc2l0aW9uIGhvb2sncyBhcmd1bWVudCBsZW5ndGguIFRoZSBob29rIG1heSBiZTpcbiAqIC0gYSBtZXJnZWQgaG9vayAoaW52b2tlcikgd2l0aCB0aGUgb3JpZ2luYWwgaW4gLmZuc1xuICogLSBhIHdyYXBwZWQgY29tcG9uZW50IG1ldGhvZCAoY2hlY2sgLl9sZW5ndGgpXG4gKiAtIGEgcGxhaW4gZnVuY3Rpb24gKC5sZW5ndGgpXG4gKi9cbmZ1bmN0aW9uIGdldEhvb2tBcmd1bWVudHNMZW5ndGggKGZuKSB7XG4gIGlmIChpc1VuZGVmKGZuKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIHZhciBpbnZva2VyRm5zID0gZm4uZm5zO1xuICBpZiAoaXNEZWYoaW52b2tlckZucykpIHtcbiAgICAvLyBpbnZva2VyXG4gICAgcmV0dXJuIGdldEhvb2tBcmd1bWVudHNMZW5ndGgoXG4gICAgICBBcnJheS5pc0FycmF5KGludm9rZXJGbnMpXG4gICAgICAgID8gaW52b2tlckZuc1swXVxuICAgICAgICA6IGludm9rZXJGbnNcbiAgICApXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChmbi5fbGVuZ3RoIHx8IGZuLmxlbmd0aCkgPiAxXG4gIH1cbn1cblxuZnVuY3Rpb24gX2VudGVyIChfLCB2bm9kZSkge1xuICBpZiAodm5vZGUuZGF0YS5zaG93ICE9PSB0cnVlKSB7XG4gICAgZW50ZXIodm5vZGUpO1xuICB9XG59XG5cbnZhciB0cmFuc2l0aW9uID0gaW5Ccm93c2VyID8ge1xuICBjcmVhdGU6IF9lbnRlcixcbiAgYWN0aXZhdGU6IF9lbnRlcixcbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUkJDEgKHZub2RlLCBybSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKHZub2RlLmRhdGEuc2hvdyAhPT0gdHJ1ZSkge1xuICAgICAgbGVhdmUodm5vZGUsIHJtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm0oKTtcbiAgICB9XG4gIH1cbn0gOiB7fVxuXG52YXIgcGxhdGZvcm1Nb2R1bGVzID0gW1xuICBhdHRycyxcbiAga2xhc3MsXG4gIGV2ZW50cyxcbiAgZG9tUHJvcHMsXG4gIHN0eWxlLFxuICB0cmFuc2l0aW9uXG5dXG5cbi8qICAqL1xuXG4vLyB0aGUgZGlyZWN0aXZlIG1vZHVsZSBzaG91bGQgYmUgYXBwbGllZCBsYXN0LCBhZnRlciBhbGxcbi8vIGJ1aWx0LWluIG1vZHVsZXMgaGF2ZSBiZWVuIGFwcGxpZWQuXG52YXIgbW9kdWxlcyA9IHBsYXRmb3JtTW9kdWxlcy5jb25jYXQoYmFzZU1vZHVsZXMpO1xuXG52YXIgcGF0Y2ggPSBjcmVhdGVQYXRjaEZ1bmN0aW9uKHsgbm9kZU9wczogbm9kZU9wcywgbW9kdWxlczogbW9kdWxlcyB9KTtcblxuLyoqXG4gKiBOb3QgdHlwZSBjaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBmbG93IGRvZXNuJ3QgbGlrZSBhdHRhY2hpbmdcbiAqIHByb3BlcnRpZXMgdG8gRWxlbWVudHMuXG4gKi9cblxuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAoaXNJRTkpIHtcbiAgLy8gaHR0cDovL3d3dy5tYXR0czQxMS5jb20vcG9zdC9pbnRlcm5ldC1leHBsb3Jlci05LW9uaW5wdXQvXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGlvbmNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIGlmIChlbCAmJiBlbC52bW9kZWwpIHtcbiAgICAgIHRyaWdnZXIoZWwsICdpbnB1dCcpO1xuICAgIH1cbiAgfSk7XG59XG5cbnZhciBkaXJlY3RpdmUgPSB7XG4gIGluc2VydGVkOiBmdW5jdGlvbiBpbnNlcnRlZCAoZWwsIGJpbmRpbmcsIHZub2RlLCBvbGRWbm9kZSkge1xuICAgIGlmICh2bm9kZS50YWcgPT09ICdzZWxlY3QnKSB7XG4gICAgICAvLyAjNjkwM1xuICAgICAgaWYgKG9sZFZub2RlLmVsbSAmJiAhb2xkVm5vZGUuZWxtLl92T3B0aW9ucykge1xuICAgICAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ3Bvc3RwYXRjaCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBkaXJlY3RpdmUuY29tcG9uZW50VXBkYXRlZChlbCwgYmluZGluZywgdm5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bm9kZS5jb250ZXh0KTtcbiAgICAgIH1cbiAgICAgIGVsLl92T3B0aW9ucyA9IFtdLm1hcC5jYWxsKGVsLm9wdGlvbnMsIGdldFZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHZub2RlLnRhZyA9PT0gJ3RleHRhcmVhJyB8fCBpc1RleHRJbnB1dFR5cGUoZWwudHlwZSkpIHtcbiAgICAgIGVsLl92TW9kaWZpZXJzID0gYmluZGluZy5tb2RpZmllcnM7XG4gICAgICBpZiAoIWJpbmRpbmcubW9kaWZpZXJzLmxhenkpIHtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25zdGFydCcsIG9uQ29tcG9zaXRpb25TdGFydCk7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvc2l0aW9uZW5kJywgb25Db21wb3NpdGlvbkVuZCk7XG4gICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW5cbiAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZVxuICAgICAgICAvLyB0aGlzIGFsc28gZml4ZXMgdGhlIGlzc3VlIHdoZXJlIHNvbWUgYnJvd3NlcnMgZS5nLiBpT1MgQ2hyb21lXG4gICAgICAgIC8vIGZpcmVzIFwiY2hhbmdlXCIgaW5zdGVhZCBvZiBcImlucHV0XCIgb24gYXV0b2NvbXBsZXRlLlxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkNvbXBvc2l0aW9uRW5kKTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChpc0lFOSkge1xuICAgICAgICAgIGVsLnZtb2RlbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50VXBkYXRlZDogZnVuY3Rpb24gY29tcG9uZW50VXBkYXRlZCAoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgaWYgKHZub2RlLnRhZyA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgIHNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bm9kZS5jb250ZXh0KTtcbiAgICAgIC8vIGluIGNhc2UgdGhlIG9wdGlvbnMgcmVuZGVyZWQgYnkgdi1mb3IgaGF2ZSBjaGFuZ2VkLFxuICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSB2YWx1ZSBpcyBvdXQtb2Ytc3luYyB3aXRoIHRoZSByZW5kZXJlZCBvcHRpb25zLlxuICAgICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGZpbHRlciBvdXQgdmFsdWVzIHRoYXQgbm8gbG9uZ2VyIGhhcyBhIG1hdGNoaW5nXG4gICAgICAvLyBvcHRpb24gaW4gdGhlIERPTS5cbiAgICAgIHZhciBwcmV2T3B0aW9ucyA9IGVsLl92T3B0aW9ucztcbiAgICAgIHZhciBjdXJPcHRpb25zID0gZWwuX3ZPcHRpb25zID0gW10ubWFwLmNhbGwoZWwub3B0aW9ucywgZ2V0VmFsdWUpO1xuICAgICAgaWYgKGN1ck9wdGlvbnMuc29tZShmdW5jdGlvbiAobywgaSkgeyByZXR1cm4gIWxvb3NlRXF1YWwobywgcHJldk9wdGlvbnNbaV0pOyB9KSkge1xuICAgICAgICAvLyB0cmlnZ2VyIGNoYW5nZSBldmVudCBpZlxuICAgICAgICAvLyBubyBtYXRjaGluZyBvcHRpb24gZm91bmQgZm9yIGF0IGxlYXN0IG9uZSB2YWx1ZVxuICAgICAgICB2YXIgbmVlZFJlc2V0ID0gZWwubXVsdGlwbGVcbiAgICAgICAgICA/IGJpbmRpbmcudmFsdWUuc29tZShmdW5jdGlvbiAodikgeyByZXR1cm4gaGFzTm9NYXRjaGluZ09wdGlvbih2LCBjdXJPcHRpb25zKTsgfSlcbiAgICAgICAgICA6IGJpbmRpbmcudmFsdWUgIT09IGJpbmRpbmcub2xkVmFsdWUgJiYgaGFzTm9NYXRjaGluZ09wdGlvbihiaW5kaW5nLnZhbHVlLCBjdXJPcHRpb25zKTtcbiAgICAgICAgaWYgKG5lZWRSZXNldCkge1xuICAgICAgICAgIHRyaWdnZXIoZWwsICdjaGFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkge1xuICBhY3R1YWxseVNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bSk7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNJRSB8fCBpc0VkZ2UpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGFjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZtKTtcbiAgICB9LCAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhY3R1YWxseVNldFNlbGVjdGVkIChlbCwgYmluZGluZywgdm0pIHtcbiAgdmFyIHZhbHVlID0gYmluZGluZy52YWx1ZTtcbiAgdmFyIGlzTXVsdGlwbGUgPSBlbC5tdWx0aXBsZTtcbiAgaWYgKGlzTXVsdGlwbGUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgIFwiPHNlbGVjdCBtdWx0aXBsZSB2LW1vZGVsPVxcXCJcIiArIChiaW5kaW5nLmV4cHJlc3Npb24pICsgXCJcXFwiPiBcIiArXG4gICAgICBcImV4cGVjdHMgYW4gQXJyYXkgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBidXQgZ290IFwiICsgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpKSxcbiAgICAgIHZtXG4gICAgKTtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgc2VsZWN0ZWQsIG9wdGlvbjtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9wdGlvbiA9IGVsLm9wdGlvbnNbaV07XG4gICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgIHNlbGVjdGVkID0gbG9vc2VJbmRleE9mKHZhbHVlLCBnZXRWYWx1ZShvcHRpb24pKSA+IC0xO1xuICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCAhPT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChsb29zZUVxdWFsKGdldFZhbHVlKG9wdGlvbiksIHZhbHVlKSkge1xuICAgICAgICBpZiAoZWwuc2VsZWN0ZWRJbmRleCAhPT0gaSkge1xuICAgICAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoIWlzTXVsdGlwbGUpIHtcbiAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzTm9NYXRjaGluZ09wdGlvbiAodmFsdWUsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMuZXZlcnkoZnVuY3Rpb24gKG8pIHsgcmV0dXJuICFsb29zZUVxdWFsKG8sIHZhbHVlKTsgfSlcbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWUgKG9wdGlvbikge1xuICByZXR1cm4gJ192YWx1ZScgaW4gb3B0aW9uXG4gICAgPyBvcHRpb24uX3ZhbHVlXG4gICAgOiBvcHRpb24udmFsdWVcbn1cblxuZnVuY3Rpb24gb25Db21wb3NpdGlvblN0YXJ0IChlKSB7XG4gIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25FbmQgKGUpIHtcbiAgLy8gcHJldmVudCB0cmlnZ2VyaW5nIGFuIGlucHV0IGV2ZW50IGZvciBubyByZWFzb25cbiAgaWYgKCFlLnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuIH1cbiAgZS50YXJnZXQuY29tcG9zaW5nID0gZmFsc2U7XG4gIHRyaWdnZXIoZS50YXJnZXQsICdpbnB1dCcpO1xufVxuXG5mdW5jdGlvbiB0cmlnZ2VyIChlbCwgdHlwZSkge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyk7XG4gIGUuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpO1xuICBlbC5kaXNwYXRjaEV2ZW50KGUpO1xufVxuXG4vKiAgKi9cblxuLy8gcmVjdXJzaXZlbHkgc2VhcmNoIGZvciBwb3NzaWJsZSB0cmFuc2l0aW9uIGRlZmluZWQgaW5zaWRlIHRoZSBjb21wb25lbnQgcm9vdFxuZnVuY3Rpb24gbG9jYXRlTm9kZSAodm5vZGUpIHtcbiAgcmV0dXJuIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmICghdm5vZGUuZGF0YSB8fCAhdm5vZGUuZGF0YS50cmFuc2l0aW9uKVxuICAgID8gbG9jYXRlTm9kZSh2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpXG4gICAgOiB2bm9kZVxufVxuXG52YXIgc2hvdyA9IHtcbiAgYmluZDogZnVuY3Rpb24gYmluZCAoZWwsIHJlZiwgdm5vZGUpIHtcbiAgICB2YXIgdmFsdWUgPSByZWYudmFsdWU7XG5cbiAgICB2bm9kZSA9IGxvY2F0ZU5vZGUodm5vZGUpO1xuICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247XG4gICAgdmFyIG9yaWdpbmFsRGlzcGxheSA9IGVsLl9fdk9yaWdpbmFsRGlzcGxheSA9XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnJyA6IGVsLnN0eWxlLmRpc3BsYXk7XG4gICAgaWYgKHZhbHVlICYmIHRyYW5zaXRpb24kJDEpIHtcbiAgICAgIHZub2RlLmRhdGEuc2hvdyA9IHRydWU7XG4gICAgICBlbnRlcih2bm9kZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5O1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IG9yaWdpbmFsRGlzcGxheSA6ICdub25lJztcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUgKGVsLCByZWYsIHZub2RlKSB7XG4gICAgdmFyIHZhbHVlID0gcmVmLnZhbHVlO1xuICAgIHZhciBvbGRWYWx1ZSA9IHJlZi5vbGRWYWx1ZTtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghdmFsdWUgPT09ICFvbGRWYWx1ZSkgeyByZXR1cm4gfVxuICAgIHZub2RlID0gbG9jYXRlTm9kZSh2bm9kZSk7XG4gICAgdmFyIHRyYW5zaXRpb24kJDEgPSB2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEudHJhbnNpdGlvbjtcbiAgICBpZiAodHJhbnNpdGlvbiQkMSkge1xuICAgICAgdm5vZGUuZGF0YS5zaG93ID0gdHJ1ZTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBlbnRlcih2bm9kZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGVhdmUodm5vZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWwuX192T3JpZ2luYWxEaXNwbGF5IDogJ25vbmUnO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCAoXG4gICAgZWwsXG4gICAgYmluZGluZyxcbiAgICB2bm9kZSxcbiAgICBvbGRWbm9kZSxcbiAgICBpc0Rlc3Ryb3lcbiAgKSB7XG4gICAgaWYgKCFpc0Rlc3Ryb3kpIHtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXk7XG4gICAgfVxuICB9XG59XG5cbnZhciBwbGF0Zm9ybURpcmVjdGl2ZXMgPSB7XG4gIG1vZGVsOiBkaXJlY3RpdmUsXG4gIHNob3c6IHNob3dcbn1cblxuLyogICovXG5cbi8vIFByb3ZpZGVzIHRyYW5zaXRpb24gc3VwcG9ydCBmb3IgYSBzaW5nbGUgZWxlbWVudC9jb21wb25lbnQuXG4vLyBzdXBwb3J0cyB0cmFuc2l0aW9uIG1vZGUgKG91dC1pbiAvIGluLW91dClcblxudmFyIHRyYW5zaXRpb25Qcm9wcyA9IHtcbiAgbmFtZTogU3RyaW5nLFxuICBhcHBlYXI6IEJvb2xlYW4sXG4gIGNzczogQm9vbGVhbixcbiAgbW9kZTogU3RyaW5nLFxuICB0eXBlOiBTdHJpbmcsXG4gIGVudGVyQ2xhc3M6IFN0cmluZyxcbiAgbGVhdmVDbGFzczogU3RyaW5nLFxuICBlbnRlclRvQ2xhc3M6IFN0cmluZyxcbiAgbGVhdmVUb0NsYXNzOiBTdHJpbmcsXG4gIGVudGVyQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgbGVhdmVBY3RpdmVDbGFzczogU3RyaW5nLFxuICBhcHBlYXJDbGFzczogU3RyaW5nLFxuICBhcHBlYXJBY3RpdmVDbGFzczogU3RyaW5nLFxuICBhcHBlYXJUb0NsYXNzOiBTdHJpbmcsXG4gIGR1cmF0aW9uOiBbTnVtYmVyLCBTdHJpbmcsIE9iamVjdF1cbn07XG5cbi8vIGluIGNhc2UgdGhlIGNoaWxkIGlzIGFsc28gYW4gYWJzdHJhY3QgY29tcG9uZW50LCBlLmcuIDxrZWVwLWFsaXZlPlxuLy8gd2Ugd2FudCB0byByZWN1cnNpdmVseSByZXRyaWV2ZSB0aGUgcmVhbCBjb21wb25lbnQgdG8gYmUgcmVuZGVyZWRcbmZ1bmN0aW9uIGdldFJlYWxDaGlsZCAodm5vZGUpIHtcbiAgdmFyIGNvbXBPcHRpb25zID0gdm5vZGUgJiYgdm5vZGUuY29tcG9uZW50T3B0aW9ucztcbiAgaWYgKGNvbXBPcHRpb25zICYmIGNvbXBPcHRpb25zLkN0b3Iub3B0aW9ucy5hYnN0cmFjdCkge1xuICAgIHJldHVybiBnZXRSZWFsQ2hpbGQoZ2V0Rmlyc3RDb21wb25lbnRDaGlsZChjb21wT3B0aW9ucy5jaGlsZHJlbikpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZub2RlXG4gIH1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdFRyYW5zaXRpb25EYXRhIChjb21wKSB7XG4gIHZhciBkYXRhID0ge307XG4gIHZhciBvcHRpb25zID0gY29tcC4kb3B0aW9ucztcbiAgLy8gcHJvcHNcbiAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMucHJvcHNEYXRhKSB7XG4gICAgZGF0YVtrZXldID0gY29tcFtrZXldO1xuICB9XG4gIC8vIGV2ZW50cy5cbiAgLy8gZXh0cmFjdCBsaXN0ZW5lcnMgYW5kIHBhc3MgdGhlbSBkaXJlY3RseSB0byB0aGUgdHJhbnNpdGlvbiBtZXRob2RzXG4gIHZhciBsaXN0ZW5lcnMgPSBvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7XG4gIGZvciAodmFyIGtleSQxIGluIGxpc3RlbmVycykge1xuICAgIGRhdGFbY2FtZWxpemUoa2V5JDEpXSA9IGxpc3RlbmVyc1trZXkkMV07XG4gIH1cbiAgcmV0dXJuIGRhdGFcbn1cblxuZnVuY3Rpb24gcGxhY2Vob2xkZXIgKGgsIHJhd0NoaWxkKSB7XG4gIGlmICgvXFxkLWtlZXAtYWxpdmUkLy50ZXN0KHJhd0NoaWxkLnRhZykpIHtcbiAgICByZXR1cm4gaCgna2VlcC1hbGl2ZScsIHtcbiAgICAgIHByb3BzOiByYXdDaGlsZC5jb21wb25lbnRPcHRpb25zLnByb3BzRGF0YVxuICAgIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzUGFyZW50VHJhbnNpdGlvbiAodm5vZGUpIHtcbiAgd2hpbGUgKCh2bm9kZSA9IHZub2RlLnBhcmVudCkpIHtcbiAgICBpZiAodm5vZGUuZGF0YS50cmFuc2l0aW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpc1NhbWVDaGlsZCAoY2hpbGQsIG9sZENoaWxkKSB7XG4gIHJldHVybiBvbGRDaGlsZC5rZXkgPT09IGNoaWxkLmtleSAmJiBvbGRDaGlsZC50YWcgPT09IGNoaWxkLnRhZ1xufVxuXG52YXIgVHJhbnNpdGlvbiA9IHtcbiAgbmFtZTogJ3RyYW5zaXRpb24nLFxuICBwcm9wczogdHJhbnNpdGlvblByb3BzLFxuICBhYnN0cmFjdDogdHJ1ZSxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoaCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kc2xvdHMuZGVmYXVsdDtcbiAgICBpZiAoIWNoaWxkcmVuKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgb3V0IHRleHQgbm9kZXMgKHBvc3NpYmxlIHdoaXRlc3BhY2VzKVxuICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLnRhZyB8fCBpc0FzeW5jUGxhY2Vob2xkZXIoYyk7IH0pO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyB3YXJuIG11bHRpcGxlIGVsZW1lbnRzXG4gICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgICc8dHJhbnNpdGlvbj4gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIHNpbmdsZSBlbGVtZW50LiBVc2UgJyArXG4gICAgICAgICc8dHJhbnNpdGlvbi1ncm91cD4gZm9yIGxpc3RzLicsXG4gICAgICAgIHRoaXMuJHBhcmVudFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgbW9kZSA9IHRoaXMubW9kZTtcblxuICAgIC8vIHdhcm4gaW52YWxpZCBtb2RlXG4gICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICBtb2RlICYmIG1vZGUgIT09ICdpbi1vdXQnICYmIG1vZGUgIT09ICdvdXQtaW4nXG4gICAgKSB7XG4gICAgICB3YXJuKFxuICAgICAgICAnaW52YWxpZCA8dHJhbnNpdGlvbj4gbW9kZTogJyArIG1vZGUsXG4gICAgICAgIHRoaXMuJHBhcmVudFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgcmF3Q2hpbGQgPSBjaGlsZHJlblswXTtcblxuICAgIC8vIGlmIHRoaXMgaXMgYSBjb21wb25lbnQgcm9vdCBub2RlIGFuZCB0aGUgY29tcG9uZW50J3NcbiAgICAvLyBwYXJlbnQgY29udGFpbmVyIG5vZGUgYWxzbyBoYXMgdHJhbnNpdGlvbiwgc2tpcC5cbiAgICBpZiAoaGFzUGFyZW50VHJhbnNpdGlvbih0aGlzLiR2bm9kZSkpIHtcbiAgICAgIHJldHVybiByYXdDaGlsZFxuICAgIH1cblxuICAgIC8vIGFwcGx5IHRyYW5zaXRpb24gZGF0YSB0byBjaGlsZFxuICAgIC8vIHVzZSBnZXRSZWFsQ2hpbGQoKSB0byBpZ25vcmUgYWJzdHJhY3QgY29tcG9uZW50cyBlLmcuIGtlZXAtYWxpdmVcbiAgICB2YXIgY2hpbGQgPSBnZXRSZWFsQ2hpbGQocmF3Q2hpbGQpO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghY2hpbGQpIHtcbiAgICAgIHJldHVybiByYXdDaGlsZFxuICAgIH1cblxuICAgIGlmICh0aGlzLl9sZWF2aW5nKSB7XG4gICAgICByZXR1cm4gcGxhY2Vob2xkZXIoaCwgcmF3Q2hpbGQpXG4gICAgfVxuXG4gICAgLy8gZW5zdXJlIGEga2V5IHRoYXQgaXMgdW5pcXVlIHRvIHRoZSB2bm9kZSB0eXBlIGFuZCB0byB0aGlzIHRyYW5zaXRpb25cbiAgICAvLyBjb21wb25lbnQgaW5zdGFuY2UuIFRoaXMga2V5IHdpbGwgYmUgdXNlZCB0byByZW1vdmUgcGVuZGluZyBsZWF2aW5nIG5vZGVzXG4gICAgLy8gZHVyaW5nIGVudGVyaW5nLlxuICAgIHZhciBpZCA9IFwiX190cmFuc2l0aW9uLVwiICsgKHRoaXMuX3VpZCkgKyBcIi1cIjtcbiAgICBjaGlsZC5rZXkgPSBjaGlsZC5rZXkgPT0gbnVsbFxuICAgICAgPyBjaGlsZC5pc0NvbW1lbnRcbiAgICAgICAgPyBpZCArICdjb21tZW50J1xuICAgICAgICA6IGlkICsgY2hpbGQudGFnXG4gICAgICA6IGlzUHJpbWl0aXZlKGNoaWxkLmtleSlcbiAgICAgICAgPyAoU3RyaW5nKGNoaWxkLmtleSkuaW5kZXhPZihpZCkgPT09IDAgPyBjaGlsZC5rZXkgOiBpZCArIGNoaWxkLmtleSlcbiAgICAgICAgOiBjaGlsZC5rZXk7XG5cbiAgICB2YXIgZGF0YSA9IChjaGlsZC5kYXRhIHx8IChjaGlsZC5kYXRhID0ge30pKS50cmFuc2l0aW9uID0gZXh0cmFjdFRyYW5zaXRpb25EYXRhKHRoaXMpO1xuICAgIHZhciBvbGRSYXdDaGlsZCA9IHRoaXMuX3Zub2RlO1xuICAgIHZhciBvbGRDaGlsZCA9IGdldFJlYWxDaGlsZChvbGRSYXdDaGlsZCk7XG5cbiAgICAvLyBtYXJrIHYtc2hvd1xuICAgIC8vIHNvIHRoYXQgdGhlIHRyYW5zaXRpb24gbW9kdWxlIGNhbiBoYW5kIG92ZXIgdGhlIGNvbnRyb2wgdG8gdGhlIGRpcmVjdGl2ZVxuICAgIGlmIChjaGlsZC5kYXRhLmRpcmVjdGl2ZXMgJiYgY2hpbGQuZGF0YS5kaXJlY3RpdmVzLnNvbWUoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQubmFtZSA9PT0gJ3Nob3cnOyB9KSkge1xuICAgICAgY2hpbGQuZGF0YS5zaG93ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBvbGRDaGlsZCAmJlxuICAgICAgb2xkQ2hpbGQuZGF0YSAmJlxuICAgICAgIWlzU2FtZUNoaWxkKGNoaWxkLCBvbGRDaGlsZCkgJiZcbiAgICAgICFpc0FzeW5jUGxhY2Vob2xkZXIob2xkQ2hpbGQpICYmXG4gICAgICAvLyAjNjY4NyBjb21wb25lbnQgcm9vdCBpcyBhIGNvbW1lbnQgbm9kZVxuICAgICAgIShvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZSAmJiBvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUuaXNDb21tZW50KVxuICAgICkge1xuICAgICAgLy8gcmVwbGFjZSBvbGQgY2hpbGQgdHJhbnNpdGlvbiBkYXRhIHdpdGggZnJlc2ggb25lXG4gICAgICAvLyBpbXBvcnRhbnQgZm9yIGR5bmFtaWMgdHJhbnNpdGlvbnMhXG4gICAgICB2YXIgb2xkRGF0YSA9IG9sZENoaWxkLmRhdGEudHJhbnNpdGlvbiA9IGV4dGVuZCh7fSwgZGF0YSk7XG4gICAgICAvLyBoYW5kbGUgdHJhbnNpdGlvbiBtb2RlXG4gICAgICBpZiAobW9kZSA9PT0gJ291dC1pbicpIHtcbiAgICAgICAgLy8gcmV0dXJuIHBsYWNlaG9sZGVyIG5vZGUgYW5kIHF1ZXVlIHVwZGF0ZSB3aGVuIGxlYXZlIGZpbmlzaGVzXG4gICAgICAgIHRoaXMuX2xlYXZpbmcgPSB0cnVlO1xuICAgICAgICBtZXJnZVZOb2RlSG9vayhvbGREYXRhLCAnYWZ0ZXJMZWF2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzJDEuX2xlYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzJDEuJGZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGxhY2Vob2xkZXIoaCwgcmF3Q2hpbGQpXG4gICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdpbi1vdXQnKSB7XG4gICAgICAgIGlmIChpc0FzeW5jUGxhY2Vob2xkZXIoY2hpbGQpKSB7XG4gICAgICAgICAgcmV0dXJuIG9sZFJhd0NoaWxkXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgdmFyIHBlcmZvcm1MZWF2ZSA9IGZ1bmN0aW9uICgpIHsgZGVsYXllZExlYXZlKCk7IH07XG4gICAgICAgIG1lcmdlVk5vZGVIb29rKGRhdGEsICdhZnRlckVudGVyJywgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2VudGVyQ2FuY2VsbGVkJywgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgbWVyZ2VWTm9kZUhvb2sob2xkRGF0YSwgJ2RlbGF5TGVhdmUnLCBmdW5jdGlvbiAobGVhdmUpIHsgZGVsYXllZExlYXZlID0gbGVhdmU7IH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByYXdDaGlsZFxuICB9XG59XG5cbi8qICAqL1xuXG4vLyBQcm92aWRlcyB0cmFuc2l0aW9uIHN1cHBvcnQgZm9yIGxpc3QgaXRlbXMuXG4vLyBzdXBwb3J0cyBtb3ZlIHRyYW5zaXRpb25zIHVzaW5nIHRoZSBGTElQIHRlY2huaXF1ZS5cblxuLy8gQmVjYXVzZSB0aGUgdmRvbSdzIGNoaWxkcmVuIHVwZGF0ZSBhbGdvcml0aG0gaXMgXCJ1bnN0YWJsZVwiIC0gaS5lLlxuLy8gaXQgZG9lc24ndCBndWFyYW50ZWUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uaW5nIG9mIHJlbW92ZWQgZWxlbWVudHMsXG4vLyB3ZSBmb3JjZSB0cmFuc2l0aW9uLWdyb3VwIHRvIHVwZGF0ZSBpdHMgY2hpbGRyZW4gaW50byB0d28gcGFzc2VzOlxuLy8gaW4gdGhlIGZpcnN0IHBhc3MsIHdlIHJlbW92ZSBhbGwgbm9kZXMgdGhhdCBuZWVkIHRvIGJlIHJlbW92ZWQsXG4vLyB0cmlnZ2VyaW5nIHRoZWlyIGxlYXZpbmcgdHJhbnNpdGlvbjsgaW4gdGhlIHNlY29uZCBwYXNzLCB3ZSBpbnNlcnQvbW92ZVxuLy8gaW50byB0aGUgZmluYWwgZGVzaXJlZCBzdGF0ZS4gVGhpcyB3YXkgaW4gdGhlIHNlY29uZCBwYXNzIHJlbW92ZWRcbi8vIG5vZGVzIHdpbGwgcmVtYWluIHdoZXJlIHRoZXkgc2hvdWxkIGJlLlxuXG52YXIgcHJvcHMgPSBleHRlbmQoe1xuICB0YWc6IFN0cmluZyxcbiAgbW92ZUNsYXNzOiBTdHJpbmdcbn0sIHRyYW5zaXRpb25Qcm9wcyk7XG5cbmRlbGV0ZSBwcm9wcy5tb2RlO1xuXG52YXIgVHJhbnNpdGlvbkdyb3VwID0ge1xuICBwcm9wczogcHJvcHMsXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKGgpIHtcbiAgICB2YXIgdGFnID0gdGhpcy50YWcgfHwgdGhpcy4kdm5vZGUuZGF0YS50YWcgfHwgJ3NwYW4nO1xuICAgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhciBwcmV2Q2hpbGRyZW4gPSB0aGlzLnByZXZDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47XG4gICAgdmFyIHJhd0NoaWxkcmVuID0gdGhpcy4kc2xvdHMuZGVmYXVsdCB8fCBbXTtcbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgdmFyIHRyYW5zaXRpb25EYXRhID0gZXh0cmFjdFRyYW5zaXRpb25EYXRhKHRoaXMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXdDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGMgPSByYXdDaGlsZHJlbltpXTtcbiAgICAgIGlmIChjLnRhZykge1xuICAgICAgICBpZiAoYy5rZXkgIT0gbnVsbCAmJiBTdHJpbmcoYy5rZXkpLmluZGV4T2YoJ19fdmxpc3QnKSAhPT0gMCkge1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2goYyk7XG4gICAgICAgICAgbWFwW2Mua2V5XSA9IGNcbiAgICAgICAgICA7KGMuZGF0YSB8fCAoYy5kYXRhID0ge30pKS50cmFuc2l0aW9uID0gdHJhbnNpdGlvbkRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG9wdHMgPSBjLmNvbXBvbmVudE9wdGlvbnM7XG4gICAgICAgICAgdmFyIG5hbWUgPSBvcHRzID8gKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcgfHwgJycpIDogYy50YWc7XG4gICAgICAgICAgd2FybigoXCI8dHJhbnNpdGlvbi1ncm91cD4gY2hpbGRyZW4gbXVzdCBiZSBrZXllZDogPFwiICsgbmFtZSArIFwiPlwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJldkNoaWxkcmVuKSB7XG4gICAgICB2YXIga2VwdCA9IFtdO1xuICAgICAgdmFyIHJlbW92ZWQgPSBbXTtcbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHByZXZDaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7XG4gICAgICAgIHZhciBjJDEgPSBwcmV2Q2hpbGRyZW5baSQxXTtcbiAgICAgICAgYyQxLmRhdGEudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25EYXRhO1xuICAgICAgICBjJDEuZGF0YS5wb3MgPSBjJDEuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAobWFwW2MkMS5rZXldKSB7XG4gICAgICAgICAga2VwdC5wdXNoKGMkMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVtb3ZlZC5wdXNoKGMkMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMua2VwdCA9IGgodGFnLCBudWxsLCBrZXB0KTtcbiAgICAgIHRoaXMucmVtb3ZlZCA9IHJlbW92ZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGgodGFnLCBudWxsLCBjaGlsZHJlbilcbiAgfSxcblxuICBiZWZvcmVVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yZVVwZGF0ZSAoKSB7XG4gICAgLy8gZm9yY2UgcmVtb3ZpbmcgcGFzc1xuICAgIHRoaXMuX19wYXRjaF9fKFxuICAgICAgdGhpcy5fdm5vZGUsXG4gICAgICB0aGlzLmtlcHQsXG4gICAgICBmYWxzZSwgLy8gaHlkcmF0aW5nXG4gICAgICB0cnVlIC8vIHJlbW92ZU9ubHkgKCFpbXBvcnRhbnQsIGF2b2lkcyB1bm5lY2Vzc2FyeSBtb3ZlcylcbiAgICApO1xuICAgIHRoaXMuX3Zub2RlID0gdGhpcy5rZXB0O1xuICB9LFxuXG4gIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQgKCkge1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucHJldkNoaWxkcmVuO1xuICAgIHZhciBtb3ZlQ2xhc3MgPSB0aGlzLm1vdmVDbGFzcyB8fCAoKHRoaXMubmFtZSB8fCAndicpICsgJy1tb3ZlJyk7XG4gICAgaWYgKCFjaGlsZHJlbi5sZW5ndGggfHwgIXRoaXMuaGFzTW92ZShjaGlsZHJlblswXS5lbG0sIG1vdmVDbGFzcykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIHdlIGRpdmlkZSB0aGUgd29yayBpbnRvIHRocmVlIGxvb3BzIHRvIGF2b2lkIG1peGluZyBET00gcmVhZHMgYW5kIHdyaXRlc1xuICAgIC8vIGluIGVhY2ggaXRlcmF0aW9uIC0gd2hpY2ggaGVscHMgcHJldmVudCBsYXlvdXQgdGhyYXNoaW5nLlxuICAgIGNoaWxkcmVuLmZvckVhY2goY2FsbFBlbmRpbmdDYnMpO1xuICAgIGNoaWxkcmVuLmZvckVhY2gocmVjb3JkUG9zaXRpb24pO1xuICAgIGNoaWxkcmVuLmZvckVhY2goYXBwbHlUcmFuc2xhdGlvbik7XG5cbiAgICAvLyBmb3JjZSByZWZsb3cgdG8gcHV0IGV2ZXJ5dGhpbmcgaW4gcG9zaXRpb25cbiAgICAvLyBhc3NpZ24gdG8gdGhpcyB0byBhdm9pZCBiZWluZyByZW1vdmVkIGluIHRyZWUtc2hha2luZ1xuICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuICAgIHRoaXMuX3JlZmxvdyA9IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0O1xuXG4gICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgaWYgKGMuZGF0YS5tb3ZlZCkge1xuICAgICAgICB2YXIgZWwgPSBjLmVsbTtcbiAgICAgICAgdmFyIHMgPSBlbC5zdHlsZTtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuICAgICAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnJztcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsIGVsLl9tb3ZlQ2IgPSBmdW5jdGlvbiBjYiAoZSkge1xuICAgICAgICAgIGlmICghZSB8fCAvdHJhbnNmb3JtJC8udGVzdChlLnByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCBjYik7XG4gICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDtcbiAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICBoYXNNb3ZlOiBmdW5jdGlvbiBoYXNNb3ZlIChlbCwgbW92ZUNsYXNzKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghaGFzVHJhbnNpdGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHRoaXMuX2hhc01vdmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhc01vdmVcbiAgICAgIH1cbiAgICAgIC8vIERldGVjdCB3aGV0aGVyIGFuIGVsZW1lbnQgd2l0aCB0aGUgbW92ZSBjbGFzcyBhcHBsaWVkIGhhc1xuICAgICAgLy8gQ1NTIHRyYW5zaXRpb25zLiBTaW5jZSB0aGUgZWxlbWVudCBtYXkgYmUgaW5zaWRlIGFuIGVudGVyaW5nXG4gICAgICAvLyB0cmFuc2l0aW9uIGF0IHRoaXMgdmVyeSBtb21lbnQsIHdlIG1ha2UgYSBjbG9uZSBvZiBpdCBhbmQgcmVtb3ZlXG4gICAgICAvLyBhbGwgb3RoZXIgdHJhbnNpdGlvbiBjbGFzc2VzIGFwcGxpZWQgdG8gZW5zdXJlIG9ubHkgdGhlIG1vdmUgY2xhc3NcbiAgICAgIC8vIGlzIGFwcGxpZWQuXG4gICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTtcbiAgICAgIGlmIChlbC5fdHJhbnNpdGlvbkNsYXNzZXMpIHtcbiAgICAgICAgZWwuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNscykgeyByZW1vdmVDbGFzcyhjbG9uZSwgY2xzKTsgfSk7XG4gICAgICB9XG4gICAgICBhZGRDbGFzcyhjbG9uZSwgbW92ZUNsYXNzKTtcbiAgICAgIGNsb25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB0aGlzLiRlbC5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgICB2YXIgaW5mbyA9IGdldFRyYW5zaXRpb25JbmZvKGNsb25lKTtcbiAgICAgIHRoaXMuJGVsLnJlbW92ZUNoaWxkKGNsb25lKTtcbiAgICAgIHJldHVybiAodGhpcy5faGFzTW92ZSA9IGluZm8uaGFzVHJhbnNmb3JtKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjYWxsUGVuZGluZ0NicyAoYykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGMuZWxtLl9tb3ZlQ2IpIHtcbiAgICBjLmVsbS5fbW92ZUNiKCk7XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChjLmVsbS5fZW50ZXJDYikge1xuICAgIGMuZWxtLl9lbnRlckNiKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVjb3JkUG9zaXRpb24gKGMpIHtcbiAgYy5kYXRhLm5ld1BvcyA9IGMuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xufVxuXG5mdW5jdGlvbiBhcHBseVRyYW5zbGF0aW9uIChjKSB7XG4gIHZhciBvbGRQb3MgPSBjLmRhdGEucG9zO1xuICB2YXIgbmV3UG9zID0gYy5kYXRhLm5ld1BvcztcbiAgdmFyIGR4ID0gb2xkUG9zLmxlZnQgLSBuZXdQb3MubGVmdDtcbiAgdmFyIGR5ID0gb2xkUG9zLnRvcCAtIG5ld1Bvcy50b3A7XG4gIGlmIChkeCB8fCBkeSkge1xuICAgIGMuZGF0YS5tb3ZlZCA9IHRydWU7XG4gICAgdmFyIHMgPSBjLmVsbS5zdHlsZTtcbiAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyBkeCArIFwicHgsXCIgKyBkeSArIFwicHgpXCI7XG4gICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMnO1xuICB9XG59XG5cbnZhciBwbGF0Zm9ybUNvbXBvbmVudHMgPSB7XG4gIFRyYW5zaXRpb246IFRyYW5zaXRpb24sXG4gIFRyYW5zaXRpb25Hcm91cDogVHJhbnNpdGlvbkdyb3VwXG59XG5cbi8qICAqL1xuXG4vLyBpbnN0YWxsIHBsYXRmb3JtIHNwZWNpZmljIHV0aWxzXG5WdWUuY29uZmlnLm11c3RVc2VQcm9wID0gbXVzdFVzZVByb3A7XG5WdWUuY29uZmlnLmlzUmVzZXJ2ZWRUYWcgPSBpc1Jlc2VydmVkVGFnO1xuVnVlLmNvbmZpZy5pc1Jlc2VydmVkQXR0ciA9IGlzUmVzZXJ2ZWRBdHRyO1xuVnVlLmNvbmZpZy5nZXRUYWdOYW1lc3BhY2UgPSBnZXRUYWdOYW1lc3BhY2U7XG5WdWUuY29uZmlnLmlzVW5rbm93bkVsZW1lbnQgPSBpc1Vua25vd25FbGVtZW50O1xuXG4vLyBpbnN0YWxsIHBsYXRmb3JtIHJ1bnRpbWUgZGlyZWN0aXZlcyAmIGNvbXBvbmVudHNcbmV4dGVuZChWdWUub3B0aW9ucy5kaXJlY3RpdmVzLCBwbGF0Zm9ybURpcmVjdGl2ZXMpO1xuZXh0ZW5kKFZ1ZS5vcHRpb25zLmNvbXBvbmVudHMsIHBsYXRmb3JtQ29tcG9uZW50cyk7XG5cbi8vIGluc3RhbGwgcGxhdGZvcm0gcGF0Y2ggZnVuY3Rpb25cblZ1ZS5wcm90b3R5cGUuX19wYXRjaF9fID0gaW5Ccm93c2VyID8gcGF0Y2ggOiBub29wO1xuXG4vLyBwdWJsaWMgbW91bnQgbWV0aG9kXG5WdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChcbiAgZWwsXG4gIGh5ZHJhdGluZ1xuKSB7XG4gIGVsID0gZWwgJiYgaW5Ccm93c2VyID8gcXVlcnkoZWwpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gbW91bnRDb21wb25lbnQodGhpcywgZWwsIGh5ZHJhdGluZylcbn07XG5cbi8vIGRldnRvb2xzIGdsb2JhbCBob29rXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuaWYgKGluQnJvd3Nlcikge1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG4gICAgICBpZiAoZGV2dG9vbHMpIHtcbiAgICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICBcImRldmVsb3BtZW50XCIgIT09ICd0ZXN0JyAmJlxuICAgICAgICBpc0Nocm9tZVxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKFxuICAgICAgICAgICdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGV4dGVuc2lvbiBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICtcbiAgICAgICAgICAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scydcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICBcImRldmVsb3BtZW50XCIgIT09ICd0ZXN0JyAmJlxuICAgICAgY29uZmlnLnByb2R1Y3Rpb25UaXAgIT09IGZhbHNlICYmXG4gICAgICB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKFxuICAgICAgICBcIllvdSBhcmUgcnVubmluZyBWdWUgaW4gZGV2ZWxvcG1lbnQgbW9kZS5cXG5cIiArXG4gICAgICAgIFwiTWFrZSBzdXJlIHRvIHR1cm4gb24gcHJvZHVjdGlvbiBtb2RlIHdoZW4gZGVwbG95aW5nIGZvciBwcm9kdWN0aW9uLlxcblwiICtcbiAgICAgICAgXCJTZWUgbW9yZSB0aXBzIGF0IGh0dHBzOi8vdnVlanMub3JnL2d1aWRlL2RlcGxveW1lbnQuaHRtbFwiXG4gICAgICApO1xuICAgIH1cbiAgfSwgMCk7XG59XG5cbi8qICAqL1xuXG52YXIgZGVmYXVsdFRhZ1JFID0gL1xce1xceygoPzoufFxcbikrPylcXH1cXH0vZztcbnZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcblxudmFyIGJ1aWxkUmVnZXggPSBjYWNoZWQoZnVuY3Rpb24gKGRlbGltaXRlcnMpIHtcbiAgdmFyIG9wZW4gPSBkZWxpbWl0ZXJzWzBdLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpO1xuICB2YXIgY2xvc2UgPSBkZWxpbWl0ZXJzWzFdLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpO1xuICByZXR1cm4gbmV3IFJlZ0V4cChvcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyBjbG9zZSwgJ2cnKVxufSk7XG5cblxuXG5mdW5jdGlvbiBwYXJzZVRleHQgKFxuICB0ZXh0LFxuICBkZWxpbWl0ZXJzXG4pIHtcbiAgdmFyIHRhZ1JFID0gZGVsaW1pdGVycyA/IGJ1aWxkUmVnZXgoZGVsaW1pdGVycykgOiBkZWZhdWx0VGFnUkU7XG4gIGlmICghdGFnUkUudGVzdCh0ZXh0KSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciB0b2tlbnMgPSBbXTtcbiAgdmFyIHJhd1Rva2VucyA9IFtdO1xuICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcbiAgdmFyIG1hdGNoLCBpbmRleCwgdG9rZW5WYWx1ZTtcbiAgd2hpbGUgKChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpKSB7XG4gICAgaW5kZXggPSBtYXRjaC5pbmRleDtcbiAgICAvLyBwdXNoIHRleHQgdG9rZW5cbiAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgIHJhd1Rva2Vucy5wdXNoKHRva2VuVmFsdWUgPSB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpKTtcbiAgICAgIHRva2Vucy5wdXNoKEpTT04uc3RyaW5naWZ5KHRva2VuVmFsdWUpKTtcbiAgICB9XG4gICAgLy8gdGFnIHRva2VuXG4gICAgdmFyIGV4cCA9IHBhcnNlRmlsdGVycyhtYXRjaFsxXS50cmltKCkpO1xuICAgIHRva2Vucy5wdXNoKChcIl9zKFwiICsgZXhwICsgXCIpXCIpKTtcbiAgICByYXdUb2tlbnMucHVzaCh7ICdAYmluZGluZyc6IGV4cCB9KTtcbiAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgfVxuICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHtcbiAgICByYXdUb2tlbnMucHVzaCh0b2tlblZhbHVlID0gdGV4dC5zbGljZShsYXN0SW5kZXgpKTtcbiAgICB0b2tlbnMucHVzaChKU09OLnN0cmluZ2lmeSh0b2tlblZhbHVlKSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBleHByZXNzaW9uOiB0b2tlbnMuam9pbignKycpLFxuICAgIHRva2VuczogcmF3VG9rZW5zXG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIHRyYW5zZm9ybU5vZGUgKGVsLCBvcHRpb25zKSB7XG4gIHZhciB3YXJuID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuO1xuICB2YXIgc3RhdGljQ2xhc3MgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnY2xhc3MnKTtcbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHN0YXRpY0NsYXNzKSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlVGV4dChzdGF0aWNDbGFzcywgb3B0aW9ucy5kZWxpbWl0ZXJzKTtcbiAgICBpZiAocmVzKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBcImNsYXNzPVxcXCJcIiArIHN0YXRpY0NsYXNzICsgXCJcXFwiOiBcIiArXG4gICAgICAgICdJbnRlcnBvbGF0aW9uIGluc2lkZSBhdHRyaWJ1dGVzIGhhcyBiZWVuIHJlbW92ZWQuICcgK1xuICAgICAgICAnVXNlIHYtYmluZCBvciB0aGUgY29sb24gc2hvcnRoYW5kIGluc3RlYWQuIEZvciBleGFtcGxlLCAnICtcbiAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBjbGFzcz1cInt7IHZhbCB9fVwiPiwgdXNlIDxkaXYgOmNsYXNzPVwidmFsXCI+LidcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGlmIChzdGF0aWNDbGFzcykge1xuICAgIGVsLnN0YXRpY0NsYXNzID0gSlNPTi5zdHJpbmdpZnkoc3RhdGljQ2xhc3MpO1xuICB9XG4gIHZhciBjbGFzc0JpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2NsYXNzJywgZmFsc2UgLyogZ2V0U3RhdGljICovKTtcbiAgaWYgKGNsYXNzQmluZGluZykge1xuICAgIGVsLmNsYXNzQmluZGluZyA9IGNsYXNzQmluZGluZztcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5EYXRhIChlbCkge1xuICB2YXIgZGF0YSA9ICcnO1xuICBpZiAoZWwuc3RhdGljQ2xhc3MpIHtcbiAgICBkYXRhICs9IFwic3RhdGljQ2xhc3M6XCIgKyAoZWwuc3RhdGljQ2xhc3MpICsgXCIsXCI7XG4gIH1cbiAgaWYgKGVsLmNsYXNzQmluZGluZykge1xuICAgIGRhdGEgKz0gXCJjbGFzczpcIiArIChlbC5jbGFzc0JpbmRpbmcpICsgXCIsXCI7XG4gIH1cbiAgcmV0dXJuIGRhdGFcbn1cblxudmFyIGtsYXNzJDEgPSB7XG4gIHN0YXRpY0tleXM6IFsnc3RhdGljQ2xhc3MnXSxcbiAgdHJhbnNmb3JtTm9kZTogdHJhbnNmb3JtTm9kZSxcbiAgZ2VuRGF0YTogZ2VuRGF0YVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gdHJhbnNmb3JtTm9kZSQxIChlbCwgb3B0aW9ucykge1xuICB2YXIgd2FybiA9IG9wdGlvbnMud2FybiB8fCBiYXNlV2FybjtcbiAgdmFyIHN0YXRpY1N0eWxlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3N0eWxlJyk7XG4gIGlmIChzdGF0aWNTdHlsZSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIHtcbiAgICAgIHZhciByZXMgPSBwYXJzZVRleHQoc3RhdGljU3R5bGUsIG9wdGlvbnMuZGVsaW1pdGVycyk7XG4gICAgICBpZiAocmVzKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgXCJzdHlsZT1cXFwiXCIgKyBzdGF0aWNTdHlsZSArIFwiXFxcIjogXCIgK1xuICAgICAgICAgICdJbnRlcnBvbGF0aW9uIGluc2lkZSBhdHRyaWJ1dGVzIGhhcyBiZWVuIHJlbW92ZWQuICcgK1xuICAgICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgK1xuICAgICAgICAgICdpbnN0ZWFkIG9mIDxkaXYgc3R5bGU9XCJ7eyB2YWwgfX1cIj4sIHVzZSA8ZGl2IDpzdHlsZT1cInZhbFwiPi4nXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsLnN0YXRpY1N0eWxlID0gSlNPTi5zdHJpbmdpZnkocGFyc2VTdHlsZVRleHQoc3RhdGljU3R5bGUpKTtcbiAgfVxuXG4gIHZhciBzdHlsZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3N0eWxlJywgZmFsc2UgLyogZ2V0U3RhdGljICovKTtcbiAgaWYgKHN0eWxlQmluZGluZykge1xuICAgIGVsLnN0eWxlQmluZGluZyA9IHN0eWxlQmluZGluZztcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5EYXRhJDEgKGVsKSB7XG4gIHZhciBkYXRhID0gJyc7XG4gIGlmIChlbC5zdGF0aWNTdHlsZSkge1xuICAgIGRhdGEgKz0gXCJzdGF0aWNTdHlsZTpcIiArIChlbC5zdGF0aWNTdHlsZSkgKyBcIixcIjtcbiAgfVxuICBpZiAoZWwuc3R5bGVCaW5kaW5nKSB7XG4gICAgZGF0YSArPSBcInN0eWxlOihcIiArIChlbC5zdHlsZUJpbmRpbmcpICsgXCIpLFwiO1xuICB9XG4gIHJldHVybiBkYXRhXG59XG5cbnZhciBzdHlsZSQxID0ge1xuICBzdGF0aWNLZXlzOiBbJ3N0YXRpY1N0eWxlJ10sXG4gIHRyYW5zZm9ybU5vZGU6IHRyYW5zZm9ybU5vZGUkMSxcbiAgZ2VuRGF0YTogZ2VuRGF0YSQxXG59XG5cbi8qICAqL1xuXG52YXIgZGVjb2RlcjtcblxudmFyIGhlID0ge1xuICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZSAoaHRtbCkge1xuICAgIGRlY29kZXIgPSBkZWNvZGVyIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRlY29kZXIuaW5uZXJIVE1MID0gaHRtbDtcbiAgICByZXR1cm4gZGVjb2Rlci50ZXh0Q29udGVudFxuICB9XG59XG5cbi8qICAqL1xuXG52YXIgaXNVbmFyeVRhZyA9IG1ha2VNYXAoXG4gICdhcmVhLGJhc2UsYnIsY29sLGVtYmVkLGZyYW1lLGhyLGltZyxpbnB1dCxpc2luZGV4LGtleWdlbiwnICtcbiAgJ2xpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyJ1xuKTtcblxuLy8gRWxlbWVudHMgdGhhdCB5b3UgY2FuLCBpbnRlbnRpb25hbGx5LCBsZWF2ZSBvcGVuXG4vLyAoYW5kIHdoaWNoIGNsb3NlIHRoZW1zZWx2ZXMpXG52YXIgY2FuQmVMZWZ0T3BlblRhZyA9IG1ha2VNYXAoXG4gICdjb2xncm91cCxkZCxkdCxsaSxvcHRpb25zLHAsdGQsdGZvb3QsdGgsdGhlYWQsdHIsc291cmNlJ1xuKTtcblxuLy8gSFRNTDUgdGFncyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWwjZWxlbWVudHMtM1xuLy8gUGhyYXNpbmcgQ29udGVudCBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9kb20uaHRtbCNwaHJhc2luZy1jb250ZW50XG52YXIgaXNOb25QaHJhc2luZ1RhZyA9IG1ha2VNYXAoXG4gICdhZGRyZXNzLGFydGljbGUsYXNpZGUsYmFzZSxibG9ja3F1b3RlLGJvZHksY2FwdGlvbixjb2wsY29sZ3JvdXAsZGQsJyArXG4gICdkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0sJyArXG4gICdoMSxoMixoMyxoNCxoNSxoNixoZWFkLGhlYWRlcixoZ3JvdXAsaHIsaHRtbCxsZWdlbmQsbGksbWVudWl0ZW0sbWV0YSwnICtcbiAgJ29wdGdyb3VwLG9wdGlvbixwYXJhbSxycCxydCxzb3VyY2Usc3R5bGUsc3VtbWFyeSx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCwnICtcbiAgJ3RpdGxlLHRyLHRyYWNrJ1xuKTtcblxuLyoqXG4gKiBOb3QgdHlwZS1jaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBpdCdzIG1vc3RseSB2ZW5kb3IgY29kZS5cbiAqL1xuXG4vKiFcbiAqIEhUTUwgUGFyc2VyIEJ5IEpvaG4gUmVzaWcgKGVqb2huLm9yZylcbiAqIE1vZGlmaWVkIGJ5IEp1cml5IFwia2FuZ2F4XCIgWmF5dHNldlxuICogT3JpZ2luYWwgY29kZSBieSBFcmlrIEFydmlkc3NvbiwgTW96aWxsYSBQdWJsaWMgTGljZW5zZVxuICogaHR0cDovL2VyaWsuZWFlLm5ldC9zaW1wbGVodG1scGFyc2VyL3NpbXBsZWh0bWxwYXJzZXIuanNcbiAqL1xuXG4vLyBSZWd1bGFyIEV4cHJlc3Npb25zIGZvciBwYXJzaW5nIHRhZ3MgYW5kIGF0dHJpYnV0ZXNcbnZhciBhdHRyaWJ1dGUgPSAvXlxccyooW15cXHNcIic8PlxcLz1dKykoPzpcXHMqKD0pXFxzKig/OlwiKFteXCJdKilcIit8JyhbXiddKiknK3woW15cXHNcIic9PD5gXSspKSk/Lztcbi8vIGNvdWxkIHVzZSBodHRwczovL3d3dy53My5vcmcvVFIvMTk5OS9SRUMteG1sLW5hbWVzLTE5OTkwMTE0LyNOVC1RTmFtZVxuLy8gYnV0IGZvciBWdWUgdGVtcGxhdGVzIHdlIGNhbiBlbmZvcmNlIGEgc2ltcGxlIGNoYXJzZXRcbnZhciBuY25hbWUgPSAnW2EtekEtWl9dW1xcXFx3XFxcXC1cXFxcLl0qJztcbnZhciBxbmFtZUNhcHR1cmUgPSBcIigoPzpcIiArIG5jbmFtZSArIFwiXFxcXDopP1wiICsgbmNuYW1lICsgXCIpXCI7XG52YXIgc3RhcnRUYWdPcGVuID0gbmV3IFJlZ0V4cCgoXCJePFwiICsgcW5hbWVDYXB0dXJlKSk7XG52YXIgc3RhcnRUYWdDbG9zZSA9IC9eXFxzKihcXC8/KT4vO1xudmFyIGVuZFRhZyA9IG5ldyBSZWdFeHAoKFwiXjxcXFxcL1wiICsgcW5hbWVDYXB0dXJlICsgXCJbXj5dKj5cIikpO1xudmFyIGRvY3R5cGUgPSAvXjwhRE9DVFlQRSBbXj5dKz4vaTtcbi8vICM3Mjk4OiBlc2NhcGUgLSB0byBhdm9pZCBiZWluZyBwYXNlZCBhcyBIVE1MIGNvbW1lbnQgd2hlbiBpbmxpbmVkIGluIHBhZ2VcbnZhciBjb21tZW50ID0gL148IVxcLS0vO1xudmFyIGNvbmRpdGlvbmFsQ29tbWVudCA9IC9ePCFcXFsvO1xuXG52YXIgSVNfUkVHRVhfQ0FQVFVSSU5HX0JST0tFTiA9IGZhbHNlO1xuJ3gnLnJlcGxhY2UoL3goLik/L2csIGZ1bmN0aW9uIChtLCBnKSB7XG4gIElTX1JFR0VYX0NBUFRVUklOR19CUk9LRU4gPSBnID09PSAnJztcbn0pO1xuXG4vLyBTcGVjaWFsIEVsZW1lbnRzIChjYW4gY29udGFpbiBhbnl0aGluZylcbnZhciBpc1BsYWluVGV4dEVsZW1lbnQgPSBtYWtlTWFwKCdzY3JpcHQsc3R5bGUsdGV4dGFyZWEnLCB0cnVlKTtcbnZhciByZUNhY2hlID0ge307XG5cbnZhciBkZWNvZGluZ01hcCA9IHtcbiAgJyZsdDsnOiAnPCcsXG4gICcmZ3Q7JzogJz4nLFxuICAnJnF1b3Q7JzogJ1wiJyxcbiAgJyZhbXA7JzogJyYnLFxuICAnJiMxMDsnOiAnXFxuJyxcbiAgJyYjOTsnOiAnXFx0J1xufTtcbnZhciBlbmNvZGVkQXR0ciA9IC8mKD86bHR8Z3R8cXVvdHxhbXApOy9nO1xudmFyIGVuY29kZWRBdHRyV2l0aE5ld0xpbmVzID0gLyYoPzpsdHxndHxxdW90fGFtcHwjMTB8IzkpOy9nO1xuXG4vLyAjNTk5MlxudmFyIGlzSWdub3JlTmV3bGluZVRhZyA9IG1ha2VNYXAoJ3ByZSx0ZXh0YXJlYScsIHRydWUpO1xudmFyIHNob3VsZElnbm9yZUZpcnN0TmV3bGluZSA9IGZ1bmN0aW9uICh0YWcsIGh0bWwpIHsgcmV0dXJuIHRhZyAmJiBpc0lnbm9yZU5ld2xpbmVUYWcodGFnKSAmJiBodG1sWzBdID09PSAnXFxuJzsgfTtcblxuZnVuY3Rpb24gZGVjb2RlQXR0ciAodmFsdWUsIHNob3VsZERlY29kZU5ld2xpbmVzKSB7XG4gIHZhciByZSA9IHNob3VsZERlY29kZU5ld2xpbmVzID8gZW5jb2RlZEF0dHJXaXRoTmV3TGluZXMgOiBlbmNvZGVkQXR0cjtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UocmUsIGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gZGVjb2RpbmdNYXBbbWF0Y2hdOyB9KVxufVxuXG5mdW5jdGlvbiBwYXJzZUhUTUwgKGh0bWwsIG9wdGlvbnMpIHtcbiAgdmFyIHN0YWNrID0gW107XG4gIHZhciBleHBlY3RIVE1MID0gb3B0aW9ucy5leHBlY3RIVE1MO1xuICB2YXIgaXNVbmFyeVRhZyQkMSA9IG9wdGlvbnMuaXNVbmFyeVRhZyB8fCBubztcbiAgdmFyIGNhbkJlTGVmdE9wZW5UYWckJDEgPSBvcHRpb25zLmNhbkJlTGVmdE9wZW5UYWcgfHwgbm87XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBsYXN0LCBsYXN0VGFnO1xuICB3aGlsZSAoaHRtbCkge1xuICAgIGxhc3QgPSBodG1sO1xuICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBub3QgaW4gYSBwbGFpbnRleHQgY29udGVudCBlbGVtZW50IGxpa2Ugc2NyaXB0L3N0eWxlXG4gICAgaWYgKCFsYXN0VGFnIHx8ICFpc1BsYWluVGV4dEVsZW1lbnQobGFzdFRhZykpIHtcbiAgICAgIHZhciB0ZXh0RW5kID0gaHRtbC5pbmRleE9mKCc8Jyk7XG4gICAgICBpZiAodGV4dEVuZCA9PT0gMCkge1xuICAgICAgICAvLyBDb21tZW50OlxuICAgICAgICBpZiAoY29tbWVudC50ZXN0KGh0bWwpKSB7XG4gICAgICAgICAgdmFyIGNvbW1lbnRFbmQgPSBodG1sLmluZGV4T2YoJy0tPicpO1xuXG4gICAgICAgICAgaWYgKGNvbW1lbnRFbmQgPj0gMCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2hvdWxkS2VlcENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgb3B0aW9ucy5jb21tZW50KGh0bWwuc3Vic3RyaW5nKDQsIGNvbW1lbnRFbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkdmFuY2UoY29tbWVudEVuZCArIDMpO1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbmRpdGlvbmFsX2NvbW1lbnQjRG93bmxldmVsLXJldmVhbGVkX2NvbmRpdGlvbmFsX2NvbW1lbnRcbiAgICAgICAgaWYgKGNvbmRpdGlvbmFsQ29tbWVudC50ZXN0KGh0bWwpKSB7XG4gICAgICAgICAgdmFyIGNvbmRpdGlvbmFsRW5kID0gaHRtbC5pbmRleE9mKCddPicpO1xuXG4gICAgICAgICAgaWYgKGNvbmRpdGlvbmFsRW5kID49IDApIHtcbiAgICAgICAgICAgIGFkdmFuY2UoY29uZGl0aW9uYWxFbmQgKyAyKTtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG9jdHlwZTpcbiAgICAgICAgdmFyIGRvY3R5cGVNYXRjaCA9IGh0bWwubWF0Y2goZG9jdHlwZSk7XG4gICAgICAgIGlmIChkb2N0eXBlTWF0Y2gpIHtcbiAgICAgICAgICBhZHZhbmNlKGRvY3R5cGVNYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbmQgdGFnOlxuICAgICAgICB2YXIgZW5kVGFnTWF0Y2ggPSBodG1sLm1hdGNoKGVuZFRhZyk7XG4gICAgICAgIGlmIChlbmRUYWdNYXRjaCkge1xuICAgICAgICAgIHZhciBjdXJJbmRleCA9IGluZGV4O1xuICAgICAgICAgIGFkdmFuY2UoZW5kVGFnTWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICBwYXJzZUVuZFRhZyhlbmRUYWdNYXRjaFsxXSwgY3VySW5kZXgsIGluZGV4KTtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RhcnQgdGFnOlxuICAgICAgICB2YXIgc3RhcnRUYWdNYXRjaCA9IHBhcnNlU3RhcnRUYWcoKTtcbiAgICAgICAgaWYgKHN0YXJ0VGFnTWF0Y2gpIHtcbiAgICAgICAgICBoYW5kbGVTdGFydFRhZyhzdGFydFRhZ01hdGNoKTtcbiAgICAgICAgICBpZiAoc2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lKGxhc3RUYWcsIGh0bWwpKSB7XG4gICAgICAgICAgICBhZHZhbmNlKDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB0ZXh0ID0gKHZvaWQgMCksIHJlc3QgPSAodm9pZCAwKSwgbmV4dCA9ICh2b2lkIDApO1xuICAgICAgaWYgKHRleHRFbmQgPj0gMCkge1xuICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTtcbiAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICFlbmRUYWcudGVzdChyZXN0KSAmJlxuICAgICAgICAgICFzdGFydFRhZ09wZW4udGVzdChyZXN0KSAmJlxuICAgICAgICAgICFjb21tZW50LnRlc3QocmVzdCkgJiZcbiAgICAgICAgICAhY29uZGl0aW9uYWxDb21tZW50LnRlc3QocmVzdClcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gPCBpbiBwbGFpbiB0ZXh0LCBiZSBmb3JnaXZpbmcgYW5kIHRyZWF0IGl0IGFzIHRleHRcbiAgICAgICAgICBuZXh0ID0gcmVzdC5pbmRleE9mKCc8JywgMSk7XG4gICAgICAgICAgaWYgKG5leHQgPCAwKSB7IGJyZWFrIH1cbiAgICAgICAgICB0ZXh0RW5kICs9IG5leHQ7XG4gICAgICAgICAgcmVzdCA9IGh0bWwuc2xpY2UodGV4dEVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCA9IGh0bWwuc3Vic3RyaW5nKDAsIHRleHRFbmQpO1xuICAgICAgICBhZHZhbmNlKHRleHRFbmQpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGV4dEVuZCA8IDApIHtcbiAgICAgICAgdGV4dCA9IGh0bWw7XG4gICAgICAgIGh0bWwgPSAnJztcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuY2hhcnMgJiYgdGV4dCkge1xuICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZW5kVGFnTGVuZ3RoID0gMDtcbiAgICAgIHZhciBzdGFja2VkVGFnID0gbGFzdFRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIHJlU3RhY2tlZFRhZyA9IHJlQ2FjaGVbc3RhY2tlZFRhZ10gfHwgKHJlQ2FjaGVbc3RhY2tlZFRhZ10gPSBuZXcgUmVnRXhwKCcoW1xcXFxzXFxcXFNdKj8pKDwvJyArIHN0YWNrZWRUYWcgKyAnW14+XSo+KScsICdpJykpO1xuICAgICAgdmFyIHJlc3QkMSA9IGh0bWwucmVwbGFjZShyZVN0YWNrZWRUYWcsIGZ1bmN0aW9uIChhbGwsIHRleHQsIGVuZFRhZykge1xuICAgICAgICBlbmRUYWdMZW5ndGggPSBlbmRUYWcubGVuZ3RoO1xuICAgICAgICBpZiAoIWlzUGxhaW5UZXh0RWxlbWVudChzdGFja2VkVGFnKSAmJiBzdGFja2VkVGFnICE9PSAnbm9zY3JpcHQnKSB7XG4gICAgICAgICAgdGV4dCA9IHRleHRcbiAgICAgICAgICAgIC5yZXBsYWNlKC88IVxcLS0oW1xcc1xcU10qPyktLT4vZywgJyQxJykgLy8gIzcyOThcbiAgICAgICAgICAgIC5yZXBsYWNlKC88IVxcW0NEQVRBXFxbKFtcXHNcXFNdKj8pXV0+L2csICckMScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUoc3RhY2tlZFRhZywgdGV4dCkpIHtcbiAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5jaGFycykge1xuICAgICAgICAgIG9wdGlvbnMuY2hhcnModGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnXG4gICAgICB9KTtcbiAgICAgIGluZGV4ICs9IGh0bWwubGVuZ3RoIC0gcmVzdCQxLmxlbmd0aDtcbiAgICAgIGh0bWwgPSByZXN0JDE7XG4gICAgICBwYXJzZUVuZFRhZyhzdGFja2VkVGFnLCBpbmRleCAtIGVuZFRhZ0xlbmd0aCwgaW5kZXgpO1xuICAgIH1cblxuICAgIGlmIChodG1sID09PSBsYXN0KSB7XG4gICAgICBvcHRpb25zLmNoYXJzICYmIG9wdGlvbnMuY2hhcnMoaHRtbCk7XG4gICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgIXN0YWNrLmxlbmd0aCAmJiBvcHRpb25zLndhcm4pIHtcbiAgICAgICAgb3B0aW9ucy53YXJuKChcIk1hbC1mb3JtYXR0ZWQgdGFnIGF0IGVuZCBvZiB0ZW1wbGF0ZTogXFxcIlwiICsgaHRtbCArIFwiXFxcIlwiKSk7XG4gICAgICB9XG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFuIHVwIGFueSByZW1haW5pbmcgdGFnc1xuICBwYXJzZUVuZFRhZygpO1xuXG4gIGZ1bmN0aW9uIGFkdmFuY2UgKG4pIHtcbiAgICBpbmRleCArPSBuO1xuICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhuKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlU3RhcnRUYWcgKCkge1xuICAgIHZhciBzdGFydCA9IGh0bWwubWF0Y2goc3RhcnRUYWdPcGVuKTtcbiAgICBpZiAoc3RhcnQpIHtcbiAgICAgIHZhciBtYXRjaCA9IHtcbiAgICAgICAgdGFnTmFtZTogc3RhcnRbMV0sXG4gICAgICAgIGF0dHJzOiBbXSxcbiAgICAgICAgc3RhcnQ6IGluZGV4XG4gICAgICB9O1xuICAgICAgYWR2YW5jZShzdGFydFswXS5sZW5ndGgpO1xuICAgICAgdmFyIGVuZCwgYXR0cjtcbiAgICAgIHdoaWxlICghKGVuZCA9IGh0bWwubWF0Y2goc3RhcnRUYWdDbG9zZSkpICYmIChhdHRyID0gaHRtbC5tYXRjaChhdHRyaWJ1dGUpKSkge1xuICAgICAgICBhZHZhbmNlKGF0dHJbMF0ubGVuZ3RoKTtcbiAgICAgICAgbWF0Y2guYXR0cnMucHVzaChhdHRyKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmQpIHtcbiAgICAgICAgbWF0Y2gudW5hcnlTbGFzaCA9IGVuZFsxXTtcbiAgICAgICAgYWR2YW5jZShlbmRbMF0ubGVuZ3RoKTtcbiAgICAgICAgbWF0Y2guZW5kID0gaW5kZXg7XG4gICAgICAgIHJldHVybiBtYXRjaFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVN0YXJ0VGFnIChtYXRjaCkge1xuICAgIHZhciB0YWdOYW1lID0gbWF0Y2gudGFnTmFtZTtcbiAgICB2YXIgdW5hcnlTbGFzaCA9IG1hdGNoLnVuYXJ5U2xhc2g7XG5cbiAgICBpZiAoZXhwZWN0SFRNTCkge1xuICAgICAgaWYgKGxhc3RUYWcgPT09ICdwJyAmJiBpc05vblBocmFzaW5nVGFnKHRhZ05hbWUpKSB7XG4gICAgICAgIHBhcnNlRW5kVGFnKGxhc3RUYWcpO1xuICAgICAgfVxuICAgICAgaWYgKGNhbkJlTGVmdE9wZW5UYWckJDEodGFnTmFtZSkgJiYgbGFzdFRhZyA9PT0gdGFnTmFtZSkge1xuICAgICAgICBwYXJzZUVuZFRhZyh0YWdOYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdW5hcnkgPSBpc1VuYXJ5VGFnJCQxKHRhZ05hbWUpIHx8ICEhdW5hcnlTbGFzaDtcblxuICAgIHZhciBsID0gbWF0Y2guYXR0cnMubGVuZ3RoO1xuICAgIHZhciBhdHRycyA9IG5ldyBBcnJheShsKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGFyZ3MgPSBtYXRjaC5hdHRyc1tpXTtcbiAgICAgIC8vIGhhY2tpc2ggd29yayBhcm91bmQgRkYgYnVnIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTM2OTc3OFxuICAgICAgaWYgKElTX1JFR0VYX0NBUFRVUklOR19CUk9LRU4gJiYgYXJnc1swXS5pbmRleE9mKCdcIlwiJykgPT09IC0xKSB7XG4gICAgICAgIGlmIChhcmdzWzNdID09PSAnJykgeyBkZWxldGUgYXJnc1szXTsgfVxuICAgICAgICBpZiAoYXJnc1s0XSA9PT0gJycpIHsgZGVsZXRlIGFyZ3NbNF07IH1cbiAgICAgICAgaWYgKGFyZ3NbNV0gPT09ICcnKSB7IGRlbGV0ZSBhcmdzWzVdOyB9XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBhcmdzWzNdIHx8IGFyZ3NbNF0gfHwgYXJnc1s1XSB8fCAnJztcbiAgICAgIHZhciBzaG91bGREZWNvZGVOZXdsaW5lcyA9IHRhZ05hbWUgPT09ICdhJyAmJiBhcmdzWzFdID09PSAnaHJlZidcbiAgICAgICAgPyBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZlxuICAgICAgICA6IG9wdGlvbnMuc2hvdWxkRGVjb2RlTmV3bGluZXM7XG4gICAgICBhdHRyc1tpXSA9IHtcbiAgICAgICAgbmFtZTogYXJnc1sxXSxcbiAgICAgICAgdmFsdWU6IGRlY29kZUF0dHIodmFsdWUsIHNob3VsZERlY29kZU5ld2xpbmVzKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoIXVuYXJ5KSB7XG4gICAgICBzdGFjay5wdXNoKHsgdGFnOiB0YWdOYW1lLCBsb3dlckNhc2VkVGFnOiB0YWdOYW1lLnRvTG93ZXJDYXNlKCksIGF0dHJzOiBhdHRycyB9KTtcbiAgICAgIGxhc3RUYWcgPSB0YWdOYW1lO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnN0YXJ0KSB7XG4gICAgICBvcHRpb25zLnN0YXJ0KHRhZ05hbWUsIGF0dHJzLCB1bmFyeSwgbWF0Y2guc3RhcnQsIG1hdGNoLmVuZCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VFbmRUYWcgKHRhZ05hbWUsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgcG9zLCBsb3dlckNhc2VkVGFnTmFtZTtcbiAgICBpZiAoc3RhcnQgPT0gbnVsbCkgeyBzdGFydCA9IGluZGV4OyB9XG4gICAgaWYgKGVuZCA9PSBudWxsKSB7IGVuZCA9IGluZGV4OyB9XG5cbiAgICBpZiAodGFnTmFtZSkge1xuICAgICAgbG93ZXJDYXNlZFRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLy8gRmluZCB0aGUgY2xvc2VzdCBvcGVuZWQgdGFnIG9mIHRoZSBzYW1lIHR5cGVcbiAgICBpZiAodGFnTmFtZSkge1xuICAgICAgZm9yIChwb3MgPSBzdGFjay5sZW5ndGggLSAxOyBwb3MgPj0gMDsgcG9zLS0pIHtcbiAgICAgICAgaWYgKHN0YWNrW3Bvc10ubG93ZXJDYXNlZFRhZyA9PT0gbG93ZXJDYXNlZFRhZ05hbWUpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIG5vIHRhZyBuYW1lIGlzIHByb3ZpZGVkLCBjbGVhbiBzaG9wXG4gICAgICBwb3MgPSAwO1xuICAgIH1cblxuICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgLy8gQ2xvc2UgYWxsIHRoZSBvcGVuIGVsZW1lbnRzLCB1cCB0aGUgc3RhY2tcbiAgICAgIGZvciAodmFyIGkgPSBzdGFjay5sZW5ndGggLSAxOyBpID49IHBvczsgaS0tKSB7XG4gICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgIChpID4gcG9zIHx8ICF0YWdOYW1lKSAmJlxuICAgICAgICAgIG9wdGlvbnMud2FyblxuICAgICAgICApIHtcbiAgICAgICAgICBvcHRpb25zLndhcm4oXG4gICAgICAgICAgICAoXCJ0YWcgPFwiICsgKHN0YWNrW2ldLnRhZykgKyBcIj4gaGFzIG5vIG1hdGNoaW5nIGVuZCB0YWcuXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5lbmQpIHtcbiAgICAgICAgICBvcHRpb25zLmVuZChzdGFja1tpXS50YWcsIHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgb3BlbiBlbGVtZW50cyBmcm9tIHRoZSBzdGFja1xuICAgICAgc3RhY2subGVuZ3RoID0gcG9zO1xuICAgICAgbGFzdFRhZyA9IHBvcyAmJiBzdGFja1twb3MgLSAxXS50YWc7XG4gICAgfSBlbHNlIGlmIChsb3dlckNhc2VkVGFnTmFtZSA9PT0gJ2JyJykge1xuICAgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHtcbiAgICAgICAgb3B0aW9ucy5zdGFydCh0YWdOYW1lLCBbXSwgdHJ1ZSwgc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsb3dlckNhc2VkVGFnTmFtZSA9PT0gJ3AnKSB7XG4gICAgICBpZiAob3B0aW9ucy5zdGFydCkge1xuICAgICAgICBvcHRpb25zLnN0YXJ0KHRhZ05hbWUsIFtdLCBmYWxzZSwgc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5lbmQpIHtcbiAgICAgICAgb3B0aW9ucy5lbmQodGFnTmFtZSwgc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qICAqL1xuXG52YXIgb25SRSA9IC9eQHxedi1vbjovO1xudmFyIGRpclJFID0gL152LXxeQHxeOi87XG52YXIgZm9yQWxpYXNSRSA9IC8oLio/KVxccysoPzppbnxvZilcXHMrKC4qKS87XG52YXIgZm9ySXRlcmF0b3JSRSA9IC8sKFteLFxcfVxcXV0qKSg/OiwoW14sXFx9XFxdXSopKT8kLztcbnZhciBzdHJpcFBhcmVuc1JFID0gL15cXCh8XFwpJC9nO1xuXG52YXIgYXJnUkUgPSAvOiguKikkLztcbnZhciBiaW5kUkUgPSAvXjp8XnYtYmluZDovO1xudmFyIG1vZGlmaWVyUkUgPSAvXFwuW14uXSsvZztcblxudmFyIGRlY29kZUhUTUxDYWNoZWQgPSBjYWNoZWQoaGUuZGVjb2RlKTtcblxuLy8gY29uZmlndXJhYmxlIHN0YXRlXG52YXIgd2FybiQyO1xudmFyIGRlbGltaXRlcnM7XG52YXIgdHJhbnNmb3JtcztcbnZhciBwcmVUcmFuc2Zvcm1zO1xudmFyIHBvc3RUcmFuc2Zvcm1zO1xudmFyIHBsYXRmb3JtSXNQcmVUYWc7XG52YXIgcGxhdGZvcm1NdXN0VXNlUHJvcDtcbnZhciBwbGF0Zm9ybUdldFRhZ05hbWVzcGFjZTtcblxuXG5cbmZ1bmN0aW9uIGNyZWF0ZUFTVEVsZW1lbnQgKFxuICB0YWcsXG4gIGF0dHJzLFxuICBwYXJlbnRcbikge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IDEsXG4gICAgdGFnOiB0YWcsXG4gICAgYXR0cnNMaXN0OiBhdHRycyxcbiAgICBhdHRyc01hcDogbWFrZUF0dHJzTWFwKGF0dHJzKSxcbiAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICBjaGlsZHJlbjogW11cbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgSFRNTCBzdHJpbmcgdG8gQVNULlxuICovXG5mdW5jdGlvbiBwYXJzZSAoXG4gIHRlbXBsYXRlLFxuICBvcHRpb25zXG4pIHtcbiAgd2FybiQyID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuO1xuXG4gIHBsYXRmb3JtSXNQcmVUYWcgPSBvcHRpb25zLmlzUHJlVGFnIHx8IG5vO1xuICBwbGF0Zm9ybU11c3RVc2VQcm9wID0gb3B0aW9ucy5tdXN0VXNlUHJvcCB8fCBubztcbiAgcGxhdGZvcm1HZXRUYWdOYW1lc3BhY2UgPSBvcHRpb25zLmdldFRhZ05hbWVzcGFjZSB8fCBubztcblxuICB0cmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICd0cmFuc2Zvcm1Ob2RlJyk7XG4gIHByZVRyYW5zZm9ybXMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ3ByZVRyYW5zZm9ybU5vZGUnKTtcbiAgcG9zdFRyYW5zZm9ybXMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ3Bvc3RUcmFuc2Zvcm1Ob2RlJyk7XG5cbiAgZGVsaW1pdGVycyA9IG9wdGlvbnMuZGVsaW1pdGVycztcblxuICB2YXIgc3RhY2sgPSBbXTtcbiAgdmFyIHByZXNlcnZlV2hpdGVzcGFjZSA9IG9wdGlvbnMucHJlc2VydmVXaGl0ZXNwYWNlICE9PSBmYWxzZTtcbiAgdmFyIHJvb3Q7XG4gIHZhciBjdXJyZW50UGFyZW50O1xuICB2YXIgaW5WUHJlID0gZmFsc2U7XG4gIHZhciBpblByZSA9IGZhbHNlO1xuICB2YXIgd2FybmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gd2Fybk9uY2UgKG1zZykge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICB3YXJuZWQgPSB0cnVlO1xuICAgICAgd2FybiQyKG1zZyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VFbGVtZW50IChlbGVtZW50KSB7XG4gICAgLy8gY2hlY2sgcHJlIHN0YXRlXG4gICAgaWYgKGVsZW1lbnQucHJlKSB7XG4gICAgICBpblZQcmUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHBsYXRmb3JtSXNQcmVUYWcoZWxlbWVudC50YWcpKSB7XG4gICAgICBpblByZSA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBhcHBseSBwb3N0LXRyYW5zZm9ybXNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc3RUcmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb3N0VHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBwYXJzZUhUTUwodGVtcGxhdGUsIHtcbiAgICB3YXJuOiB3YXJuJDIsXG4gICAgZXhwZWN0SFRNTDogb3B0aW9ucy5leHBlY3RIVE1MLFxuICAgIGlzVW5hcnlUYWc6IG9wdGlvbnMuaXNVbmFyeVRhZyxcbiAgICBjYW5CZUxlZnRPcGVuVGFnOiBvcHRpb25zLmNhbkJlTGVmdE9wZW5UYWcsXG4gICAgc2hvdWxkRGVjb2RlTmV3bGluZXM6IG9wdGlvbnMuc2hvdWxkRGVjb2RlTmV3bGluZXMsXG4gICAgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixcbiAgICBzaG91bGRLZWVwQ29tbWVudDogb3B0aW9ucy5jb21tZW50cyxcbiAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQgKHRhZywgYXR0cnMsIHVuYXJ5KSB7XG4gICAgICAvLyBjaGVjayBuYW1lc3BhY2UuXG4gICAgICAvLyBpbmhlcml0IHBhcmVudCBucyBpZiB0aGVyZSBpcyBvbmVcbiAgICAgIHZhciBucyA9IChjdXJyZW50UGFyZW50ICYmIGN1cnJlbnRQYXJlbnQubnMpIHx8IHBsYXRmb3JtR2V0VGFnTmFtZXNwYWNlKHRhZyk7XG5cbiAgICAgIC8vIGhhbmRsZSBJRSBzdmcgYnVnXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChpc0lFICYmIG5zID09PSAnc3ZnJykge1xuICAgICAgICBhdHRycyA9IGd1YXJkSUVTVkdCdWcoYXR0cnMpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZWxlbWVudCA9IGNyZWF0ZUFTVEVsZW1lbnQodGFnLCBhdHRycywgY3VycmVudFBhcmVudCk7XG4gICAgICBpZiAobnMpIHtcbiAgICAgICAgZWxlbWVudC5ucyA9IG5zO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNGb3JiaWRkZW5UYWcoZWxlbWVudCkgJiYgIWlzU2VydmVyUmVuZGVyaW5nKCkpIHtcbiAgICAgICAgZWxlbWVudC5mb3JiaWRkZW4gPSB0cnVlO1xuICAgICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuJDIoXG4gICAgICAgICAgJ1RlbXBsYXRlcyBzaG91bGQgb25seSBiZSByZXNwb25zaWJsZSBmb3IgbWFwcGluZyB0aGUgc3RhdGUgdG8gdGhlICcgK1xuICAgICAgICAgICdVSS4gQXZvaWQgcGxhY2luZyB0YWdzIHdpdGggc2lkZS1lZmZlY3RzIGluIHlvdXIgdGVtcGxhdGVzLCBzdWNoIGFzICcgK1xuICAgICAgICAgIFwiPFwiICsgdGFnICsgXCI+XCIgKyAnLCBhcyB0aGV5IHdpbGwgbm90IGJlIHBhcnNlZC4nXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIGFwcGx5IHByZS10cmFuc2Zvcm1zXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByZVRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxlbWVudCA9IHByZVRyYW5zZm9ybXNbaV0oZWxlbWVudCwgb3B0aW9ucykgfHwgZWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpblZQcmUpIHtcbiAgICAgICAgcHJvY2Vzc1ByZShlbGVtZW50KTtcbiAgICAgICAgaWYgKGVsZW1lbnQucHJlKSB7XG4gICAgICAgICAgaW5WUHJlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBsYXRmb3JtSXNQcmVUYWcoZWxlbWVudC50YWcpKSB7XG4gICAgICAgIGluUHJlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpblZQcmUpIHtcbiAgICAgICAgcHJvY2Vzc1Jhd0F0dHJzKGVsZW1lbnQpO1xuICAgICAgfSBlbHNlIGlmICghZWxlbWVudC5wcm9jZXNzZWQpIHtcbiAgICAgICAgLy8gc3RydWN0dXJhbCBkaXJlY3RpdmVzXG4gICAgICAgIHByb2Nlc3NGb3IoZWxlbWVudCk7XG4gICAgICAgIHByb2Nlc3NJZihlbGVtZW50KTtcbiAgICAgICAgcHJvY2Vzc09uY2UoZWxlbWVudCk7XG4gICAgICAgIC8vIGVsZW1lbnQtc2NvcGUgc3R1ZmZcbiAgICAgICAgcHJvY2Vzc0VsZW1lbnQoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNoZWNrUm9vdENvbnN0cmFpbnRzIChlbCkge1xuICAgICAgICB7XG4gICAgICAgICAgaWYgKGVsLnRhZyA9PT0gJ3Nsb3QnIHx8IGVsLnRhZyA9PT0gJ3RlbXBsYXRlJykge1xuICAgICAgICAgICAgd2Fybk9uY2UoXG4gICAgICAgICAgICAgIFwiQ2Fubm90IHVzZSA8XCIgKyAoZWwudGFnKSArIFwiPiBhcyBjb21wb25lbnQgcm9vdCBlbGVtZW50IGJlY2F1c2UgaXQgbWF5IFwiICtcbiAgICAgICAgICAgICAgJ2NvbnRhaW4gbXVsdGlwbGUgbm9kZXMuJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGVsLmF0dHJzTWFwLmhhc093blByb3BlcnR5KCd2LWZvcicpKSB7XG4gICAgICAgICAgICB3YXJuT25jZShcbiAgICAgICAgICAgICAgJ0Nhbm5vdCB1c2Ugdi1mb3Igb24gc3RhdGVmdWwgY29tcG9uZW50IHJvb3QgZWxlbWVudCBiZWNhdXNlICcgK1xuICAgICAgICAgICAgICAnaXQgcmVuZGVycyBtdWx0aXBsZSBlbGVtZW50cy4nXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB0cmVlIG1hbmFnZW1lbnRcbiAgICAgIGlmICghcm9vdCkge1xuICAgICAgICByb290ID0gZWxlbWVudDtcbiAgICAgICAgY2hlY2tSb290Q29uc3RyYWludHMocm9vdCk7XG4gICAgICB9IGVsc2UgaWYgKCFzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgLy8gYWxsb3cgcm9vdCBlbGVtZW50cyB3aXRoIHYtaWYsIHYtZWxzZS1pZiBhbmQgdi1lbHNlXG4gICAgICAgIGlmIChyb290LmlmICYmIChlbGVtZW50LmVsc2VpZiB8fCBlbGVtZW50LmVsc2UpKSB7XG4gICAgICAgICAgY2hlY2tSb290Q29uc3RyYWludHMoZWxlbWVudCk7XG4gICAgICAgICAgYWRkSWZDb25kaXRpb24ocm9vdCwge1xuICAgICAgICAgICAgZXhwOiBlbGVtZW50LmVsc2VpZixcbiAgICAgICAgICAgIGJsb2NrOiBlbGVtZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2Fybk9uY2UoXG4gICAgICAgICAgICBcIkNvbXBvbmVudCB0ZW1wbGF0ZSBzaG91bGQgY29udGFpbiBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIFwiICtcbiAgICAgICAgICAgIFwiSWYgeW91IGFyZSB1c2luZyB2LWlmIG9uIG11bHRpcGxlIGVsZW1lbnRzLCBcIiArXG4gICAgICAgICAgICBcInVzZSB2LWVsc2UtaWYgdG8gY2hhaW4gdGhlbSBpbnN0ZWFkLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRQYXJlbnQgJiYgIWVsZW1lbnQuZm9yYmlkZGVuKSB7XG4gICAgICAgIGlmIChlbGVtZW50LmVsc2VpZiB8fCBlbGVtZW50LmVsc2UpIHtcbiAgICAgICAgICBwcm9jZXNzSWZDb25kaXRpb25zKGVsZW1lbnQsIGN1cnJlbnRQYXJlbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuc2xvdFNjb3BlKSB7IC8vIHNjb3BlZCBzbG90XG4gICAgICAgICAgY3VycmVudFBhcmVudC5wbGFpbiA9IGZhbHNlO1xuICAgICAgICAgIHZhciBuYW1lID0gZWxlbWVudC5zbG90VGFyZ2V0IHx8ICdcImRlZmF1bHRcIic7KGN1cnJlbnRQYXJlbnQuc2NvcGVkU2xvdHMgfHwgKGN1cnJlbnRQYXJlbnQuc2NvcGVkU2xvdHMgPSB7fSkpW25hbWVdID0gZWxlbWVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50UGFyZW50LmNoaWxkcmVuLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgZWxlbWVudC5wYXJlbnQgPSBjdXJyZW50UGFyZW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXVuYXJ5KSB7XG4gICAgICAgIGN1cnJlbnRQYXJlbnQgPSBlbGVtZW50O1xuICAgICAgICBzdGFjay5wdXNoKGVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvc2VFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbmQ6IGZ1bmN0aW9uIGVuZCAoKSB7XG4gICAgICAvLyByZW1vdmUgdHJhaWxpbmcgd2hpdGVzcGFjZVxuICAgICAgdmFyIGVsZW1lbnQgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgIHZhciBsYXN0Tm9kZSA9IGVsZW1lbnQuY2hpbGRyZW5bZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChsYXN0Tm9kZSAmJiBsYXN0Tm9kZS50eXBlID09PSAzICYmIGxhc3ROb2RlLnRleHQgPT09ICcgJyAmJiAhaW5QcmUpIHtcbiAgICAgICAgZWxlbWVudC5jaGlsZHJlbi5wb3AoKTtcbiAgICAgIH1cbiAgICAgIC8vIHBvcCBzdGFja1xuICAgICAgc3RhY2subGVuZ3RoIC09IDE7XG4gICAgICBjdXJyZW50UGFyZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICBjbG9zZUVsZW1lbnQoZWxlbWVudCk7XG4gICAgfSxcblxuICAgIGNoYXJzOiBmdW5jdGlvbiBjaGFycyAodGV4dCkge1xuICAgICAgaWYgKCFjdXJyZW50UGFyZW50KSB7XG4gICAgICAgIHtcbiAgICAgICAgICBpZiAodGV4dCA9PT0gdGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHdhcm5PbmNlKFxuICAgICAgICAgICAgICAnQ29tcG9uZW50IHRlbXBsYXRlIHJlcXVpcmVzIGEgcm9vdCBlbGVtZW50LCByYXRoZXIgdGhhbiBqdXN0IHRleHQuJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCh0ZXh0ID0gdGV4dC50cmltKCkpKSB7XG4gICAgICAgICAgICB3YXJuT25jZShcbiAgICAgICAgICAgICAgKFwidGV4dCBcXFwiXCIgKyB0ZXh0ICsgXCJcXFwiIG91dHNpZGUgcm9vdCBlbGVtZW50IHdpbGwgYmUgaWdub3JlZC5cIilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgLy8gSUUgdGV4dGFyZWEgcGxhY2Vob2xkZXIgYnVnXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChpc0lFICYmXG4gICAgICAgIGN1cnJlbnRQYXJlbnQudGFnID09PSAndGV4dGFyZWEnICYmXG4gICAgICAgIGN1cnJlbnRQYXJlbnQuYXR0cnNNYXAucGxhY2Vob2xkZXIgPT09IHRleHRcbiAgICAgICkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZHJlbiA9IGN1cnJlbnRQYXJlbnQuY2hpbGRyZW47XG4gICAgICB0ZXh0ID0gaW5QcmUgfHwgdGV4dC50cmltKClcbiAgICAgICAgPyBpc1RleHRUYWcoY3VycmVudFBhcmVudCkgPyB0ZXh0IDogZGVjb2RlSFRNTENhY2hlZCh0ZXh0KVxuICAgICAgICAvLyBvbmx5IHByZXNlcnZlIHdoaXRlc3BhY2UgaWYgaXRzIG5vdCByaWdodCBhZnRlciBhIHN0YXJ0aW5nIHRhZ1xuICAgICAgICA6IHByZXNlcnZlV2hpdGVzcGFjZSAmJiBjaGlsZHJlbi5sZW5ndGggPyAnICcgOiAnJztcbiAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgIHZhciByZXM7XG4gICAgICAgIGlmICghaW5WUHJlICYmIHRleHQgIT09ICcgJyAmJiAocmVzID0gcGFyc2VUZXh0KHRleHQsIGRlbGltaXRlcnMpKSkge1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogMixcbiAgICAgICAgICAgIGV4cHJlc3Npb246IHJlcy5leHByZXNzaW9uLFxuICAgICAgICAgICAgdG9rZW5zOiByZXMudG9rZW5zLFxuICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHRleHQgIT09ICcgJyB8fCAhY2hpbGRyZW4ubGVuZ3RoIHx8IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdLnRleHQgIT09ICcgJykge1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogMyxcbiAgICAgICAgICAgIHRleHQ6IHRleHRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY29tbWVudDogZnVuY3Rpb24gY29tbWVudCAodGV4dCkge1xuICAgICAgY3VycmVudFBhcmVudC5jaGlsZHJlbi5wdXNoKHtcbiAgICAgICAgdHlwZTogMyxcbiAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgaXNDb21tZW50OiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcm9vdFxufVxuXG5mdW5jdGlvbiBwcm9jZXNzUHJlIChlbCkge1xuICBpZiAoZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtcHJlJykgIT0gbnVsbCkge1xuICAgIGVsLnByZSA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1Jhd0F0dHJzIChlbCkge1xuICB2YXIgbCA9IGVsLmF0dHJzTGlzdC5sZW5ndGg7XG4gIGlmIChsKSB7XG4gICAgdmFyIGF0dHJzID0gZWwuYXR0cnMgPSBuZXcgQXJyYXkobCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIGF0dHJzW2ldID0ge1xuICAgICAgICBuYW1lOiBlbC5hdHRyc0xpc3RbaV0ubmFtZSxcbiAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGVsLmF0dHJzTGlzdFtpXS52YWx1ZSlcbiAgICAgIH07XG4gICAgfVxuICB9IGVsc2UgaWYgKCFlbC5wcmUpIHtcbiAgICAvLyBub24gcm9vdCBub2RlIGluIHByZSBibG9ja3Mgd2l0aCBubyBhdHRyaWJ1dGVzXG4gICAgZWwucGxhaW4gPSB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NFbGVtZW50IChlbGVtZW50LCBvcHRpb25zKSB7XG4gIHByb2Nlc3NLZXkoZWxlbWVudCk7XG5cbiAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhpcyBpcyBhIHBsYWluIGVsZW1lbnQgYWZ0ZXJcbiAgLy8gcmVtb3Zpbmcgc3RydWN0dXJhbCBhdHRyaWJ1dGVzXG4gIGVsZW1lbnQucGxhaW4gPSAhZWxlbWVudC5rZXkgJiYgIWVsZW1lbnQuYXR0cnNMaXN0Lmxlbmd0aDtcblxuICBwcm9jZXNzUmVmKGVsZW1lbnQpO1xuICBwcm9jZXNzU2xvdChlbGVtZW50KTtcbiAgcHJvY2Vzc0NvbXBvbmVudChlbGVtZW50KTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgZWxlbWVudCA9IHRyYW5zZm9ybXNbaV0oZWxlbWVudCwgb3B0aW9ucykgfHwgZWxlbWVudDtcbiAgfVxuICBwcm9jZXNzQXR0cnMoZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NLZXkgKGVsKSB7XG4gIHZhciBleHAgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2tleScpO1xuICBpZiAoZXhwKSB7XG4gICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVsLnRhZyA9PT0gJ3RlbXBsYXRlJykge1xuICAgICAgd2FybiQyKFwiPHRlbXBsYXRlPiBjYW5ub3QgYmUga2V5ZWQuIFBsYWNlIHRoZSBrZXkgb24gcmVhbCBlbGVtZW50cyBpbnN0ZWFkLlwiKTtcbiAgICB9XG4gICAgZWwua2V5ID0gZXhwO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NSZWYgKGVsKSB7XG4gIHZhciByZWYgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3JlZicpO1xuICBpZiAocmVmKSB7XG4gICAgZWwucmVmID0gcmVmO1xuICAgIGVsLnJlZkluRm9yID0gY2hlY2tJbkZvcihlbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0ZvciAoZWwpIHtcbiAgdmFyIGV4cDtcbiAgaWYgKChleHAgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1mb3InKSkpIHtcbiAgICB2YXIgcmVzID0gcGFyc2VGb3IoZXhwKTtcbiAgICBpZiAocmVzKSB7XG4gICAgICBleHRlbmQoZWwsIHJlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdhcm4kMihcbiAgICAgICAgKFwiSW52YWxpZCB2LWZvciBleHByZXNzaW9uOiBcIiArIGV4cClcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cblxuXG5mdW5jdGlvbiBwYXJzZUZvciAoZXhwKSB7XG4gIHZhciBpbk1hdGNoID0gZXhwLm1hdGNoKGZvckFsaWFzUkUpO1xuICBpZiAoIWluTWF0Y2gpIHsgcmV0dXJuIH1cbiAgdmFyIHJlcyA9IHt9O1xuICByZXMuZm9yID0gaW5NYXRjaFsyXS50cmltKCk7XG4gIHZhciBhbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpLnJlcGxhY2Uoc3RyaXBQYXJlbnNSRSwgJycpO1xuICB2YXIgaXRlcmF0b3JNYXRjaCA9IGFsaWFzLm1hdGNoKGZvckl0ZXJhdG9yUkUpO1xuICBpZiAoaXRlcmF0b3JNYXRjaCkge1xuICAgIHJlcy5hbGlhcyA9IGFsaWFzLnJlcGxhY2UoZm9ySXRlcmF0b3JSRSwgJycpO1xuICAgIHJlcy5pdGVyYXRvcjEgPSBpdGVyYXRvck1hdGNoWzFdLnRyaW0oKTtcbiAgICBpZiAoaXRlcmF0b3JNYXRjaFsyXSkge1xuICAgICAgcmVzLml0ZXJhdG9yMiA9IGl0ZXJhdG9yTWF0Y2hbMl0udHJpbSgpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuYWxpYXMgPSBhbGlhcztcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NJZiAoZWwpIHtcbiAgdmFyIGV4cCA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWlmJyk7XG4gIGlmIChleHApIHtcbiAgICBlbC5pZiA9IGV4cDtcbiAgICBhZGRJZkNvbmRpdGlvbihlbCwge1xuICAgICAgZXhwOiBleHAsXG4gICAgICBibG9jazogZWxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZWxzZScpICE9IG51bGwpIHtcbiAgICAgIGVsLmVsc2UgPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgZWxzZWlmID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZWxzZS1pZicpO1xuICAgIGlmIChlbHNlaWYpIHtcbiAgICAgIGVsLmVsc2VpZiA9IGVsc2VpZjtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0lmQ29uZGl0aW9ucyAoZWwsIHBhcmVudCkge1xuICB2YXIgcHJldiA9IGZpbmRQcmV2RWxlbWVudChwYXJlbnQuY2hpbGRyZW4pO1xuICBpZiAocHJldiAmJiBwcmV2LmlmKSB7XG4gICAgYWRkSWZDb25kaXRpb24ocHJldiwge1xuICAgICAgZXhwOiBlbC5lbHNlaWYsXG4gICAgICBibG9jazogZWxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB3YXJuJDIoXG4gICAgICBcInYtXCIgKyAoZWwuZWxzZWlmID8gKCdlbHNlLWlmPVwiJyArIGVsLmVsc2VpZiArICdcIicpIDogJ2Vsc2UnKSArIFwiIFwiICtcbiAgICAgIFwidXNlZCBvbiBlbGVtZW50IDxcIiArIChlbC50YWcpICsgXCI+IHdpdGhvdXQgY29ycmVzcG9uZGluZyB2LWlmLlwiXG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kUHJldkVsZW1lbnQgKGNoaWxkcmVuKSB7XG4gIHZhciBpID0gY2hpbGRyZW4ubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKGNoaWxkcmVuW2ldLnR5cGUgPT09IDEpIHtcbiAgICAgIHJldHVybiBjaGlsZHJlbltpXVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY2hpbGRyZW5baV0udGV4dCAhPT0gJyAnKSB7XG4gICAgICAgIHdhcm4kMihcbiAgICAgICAgICBcInRleHQgXFxcIlwiICsgKGNoaWxkcmVuW2ldLnRleHQudHJpbSgpKSArIFwiXFxcIiBiZXR3ZWVuIHYtaWYgYW5kIHYtZWxzZSgtaWYpIFwiICtcbiAgICAgICAgICBcIndpbGwgYmUgaWdub3JlZC5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY2hpbGRyZW4ucG9wKCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFkZElmQ29uZGl0aW9uIChlbCwgY29uZGl0aW9uKSB7XG4gIGlmICghZWwuaWZDb25kaXRpb25zKSB7XG4gICAgZWwuaWZDb25kaXRpb25zID0gW107XG4gIH1cbiAgZWwuaWZDb25kaXRpb25zLnB1c2goY29uZGl0aW9uKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc09uY2UgKGVsKSB7XG4gIHZhciBvbmNlJCQxID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3Ytb25jZScpO1xuICBpZiAob25jZSQkMSAhPSBudWxsKSB7XG4gICAgZWwub25jZSA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1Nsb3QgKGVsKSB7XG4gIGlmIChlbC50YWcgPT09ICdzbG90Jykge1xuICAgIGVsLnNsb3ROYW1lID0gZ2V0QmluZGluZ0F0dHIoZWwsICduYW1lJyk7XG4gICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVsLmtleSkge1xuICAgICAgd2FybiQyKFxuICAgICAgICBcImBrZXlgIGRvZXMgbm90IHdvcmsgb24gPHNsb3Q+IGJlY2F1c2Ugc2xvdHMgYXJlIGFic3RyYWN0IG91dGxldHMgXCIgK1xuICAgICAgICBcImFuZCBjYW4gcG9zc2libHkgZXhwYW5kIGludG8gbXVsdGlwbGUgZWxlbWVudHMuIFwiICtcbiAgICAgICAgXCJVc2UgdGhlIGtleSBvbiBhIHdyYXBwaW5nIGVsZW1lbnQgaW5zdGVhZC5cIlxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsb3RTY29wZTtcbiAgICBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnKSB7XG4gICAgICBzbG90U2NvcGUgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc2NvcGUnKTtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHNsb3RTY29wZSkge1xuICAgICAgICB3YXJuJDIoXG4gICAgICAgICAgXCJ0aGUgXFxcInNjb3BlXFxcIiBhdHRyaWJ1dGUgZm9yIHNjb3BlZCBzbG90cyBoYXZlIGJlZW4gZGVwcmVjYXRlZCBhbmQgXCIgK1xuICAgICAgICAgIFwicmVwbGFjZWQgYnkgXFxcInNsb3Qtc2NvcGVcXFwiIHNpbmNlIDIuNS4gVGhlIG5ldyBcXFwic2xvdC1zY29wZVxcXCIgYXR0cmlidXRlIFwiICtcbiAgICAgICAgICBcImNhbiBhbHNvIGJlIHVzZWQgb24gcGxhaW4gZWxlbWVudHMgaW4gYWRkaXRpb24gdG8gPHRlbXBsYXRlPiB0byBcIiArXG4gICAgICAgICAgXCJkZW5vdGUgc2NvcGVkIHNsb3RzLlwiLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGVsLnNsb3RTY29wZSA9IHNsb3RTY29wZSB8fCBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc2xvdC1zY29wZScpO1xuICAgIH0gZWxzZSBpZiAoKHNsb3RTY29wZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzbG90LXNjb3BlJykpKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBlbC5hdHRyc01hcFsndi1mb3InXSkge1xuICAgICAgICB3YXJuJDIoXG4gICAgICAgICAgXCJBbWJpZ3VvdXMgY29tYmluZWQgdXNhZ2Ugb2Ygc2xvdC1zY29wZSBhbmQgdi1mb3Igb24gPFwiICsgKGVsLnRhZykgKyBcIj4gXCIgK1xuICAgICAgICAgIFwiKHYtZm9yIHRha2VzIGhpZ2hlciBwcmlvcml0eSkuIFVzZSBhIHdyYXBwZXIgPHRlbXBsYXRlPiBmb3IgdGhlIFwiICtcbiAgICAgICAgICBcInNjb3BlZCBzbG90IHRvIG1ha2UgaXQgY2xlYXJlci5cIixcbiAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBlbC5zbG90U2NvcGUgPSBzbG90U2NvcGU7XG4gICAgfVxuICAgIHZhciBzbG90VGFyZ2V0ID0gZ2V0QmluZGluZ0F0dHIoZWwsICdzbG90Jyk7XG4gICAgaWYgKHNsb3RUYXJnZXQpIHtcbiAgICAgIGVsLnNsb3RUYXJnZXQgPSBzbG90VGFyZ2V0ID09PSAnXCJcIicgPyAnXCJkZWZhdWx0XCInIDogc2xvdFRhcmdldDtcbiAgICAgIC8vIHByZXNlcnZlIHNsb3QgYXMgYW4gYXR0cmlidXRlIGZvciBuYXRpdmUgc2hhZG93IERPTSBjb21wYXRcbiAgICAgIC8vIG9ubHkgZm9yIG5vbi1zY29wZWQgc2xvdHMuXG4gICAgICBpZiAoZWwudGFnICE9PSAndGVtcGxhdGUnICYmICFlbC5zbG90U2NvcGUpIHtcbiAgICAgICAgYWRkQXR0cihlbCwgJ3Nsb3QnLCBzbG90VGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0NvbXBvbmVudCAoZWwpIHtcbiAgdmFyIGJpbmRpbmc7XG4gIGlmICgoYmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnaXMnKSkpIHtcbiAgICBlbC5jb21wb25lbnQgPSBiaW5kaW5nO1xuICB9XG4gIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAnaW5saW5lLXRlbXBsYXRlJykgIT0gbnVsbCkge1xuICAgIGVsLmlubGluZVRlbXBsYXRlID0gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzQXR0cnMgKGVsKSB7XG4gIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0O1xuICB2YXIgaSwgbCwgbmFtZSwgcmF3TmFtZSwgdmFsdWUsIG1vZGlmaWVycywgaXNQcm9wO1xuICBmb3IgKGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBuYW1lID0gcmF3TmFtZSA9IGxpc3RbaV0ubmFtZTtcbiAgICB2YWx1ZSA9IGxpc3RbaV0udmFsdWU7XG4gICAgaWYgKGRpclJFLnRlc3QobmFtZSkpIHtcbiAgICAgIC8vIG1hcmsgZWxlbWVudCBhcyBkeW5hbWljXG4gICAgICBlbC5oYXNCaW5kaW5ncyA9IHRydWU7XG4gICAgICAvLyBtb2RpZmllcnNcbiAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcbiAgICAgIH1cbiAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkgeyAvLyB2LWJpbmRcbiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcbiAgICAgICAgdmFsdWUgPSBwYXJzZUZpbHRlcnModmFsdWUpO1xuICAgICAgICBpc1Byb3AgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICAgIGlmIChtb2RpZmllcnMucHJvcCkge1xuICAgICAgICAgICAgaXNQcm9wID0gdHJ1ZTtcbiAgICAgICAgICAgIG5hbWUgPSBjYW1lbGl6ZShuYW1lKTtcbiAgICAgICAgICAgIGlmIChuYW1lID09PSAnaW5uZXJIdG1sJykgeyBuYW1lID0gJ2lubmVySFRNTCc7IH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1vZGlmaWVycy5jYW1lbCkge1xuICAgICAgICAgICAgbmFtZSA9IGNhbWVsaXplKG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobW9kaWZpZXJzLnN5bmMpIHtcbiAgICAgICAgICAgIGFkZEhhbmRsZXIoXG4gICAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAgICAoXCJ1cGRhdGU6XCIgKyAoY2FtZWxpemUobmFtZSkpKSxcbiAgICAgICAgICAgICAgZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIFwiJGV2ZW50XCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcm9wIHx8IChcbiAgICAgICAgICAhZWwuY29tcG9uZW50ICYmIHBsYXRmb3JtTXVzdFVzZVByb3AoZWwudGFnLCBlbC5hdHRyc01hcC50eXBlLCBuYW1lKVxuICAgICAgICApKSB7XG4gICAgICAgICAgYWRkUHJvcChlbCwgbmFtZSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZEF0dHIoZWwsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChvblJFLnRlc3QobmFtZSkpIHsgLy8gdi1vblxuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcbiAgICAgICAgYWRkSGFuZGxlcihlbCwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgZmFsc2UsIHdhcm4kMik7XG4gICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGRpclJFLCAnJyk7XG4gICAgICAgIC8vIHBhcnNlIGFyZ1xuICAgICAgICB2YXIgYXJnTWF0Y2ggPSBuYW1lLm1hdGNoKGFyZ1JFKTtcbiAgICAgICAgdmFyIGFyZyA9IGFyZ01hdGNoICYmIGFyZ01hdGNoWzFdO1xuICAgICAgICBpZiAoYXJnKSB7XG4gICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgLShhcmcubGVuZ3RoICsgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGFkZERpcmVjdGl2ZShlbCwgbmFtZSwgcmF3TmFtZSwgdmFsdWUsIGFyZywgbW9kaWZpZXJzKTtcbiAgICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUgPT09ICdtb2RlbCcpIHtcbiAgICAgICAgICBjaGVja0ZvckFsaWFzTW9kZWwoZWwsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBsaXRlcmFsIGF0dHJpYnV0ZVxuICAgICAge1xuICAgICAgICB2YXIgcmVzID0gcGFyc2VUZXh0KHZhbHVlLCBkZWxpbWl0ZXJzKTtcbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgIHdhcm4kMihcbiAgICAgICAgICAgIG5hbWUgKyBcIj1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIjogXCIgK1xuICAgICAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArXG4gICAgICAgICAgICAnVXNlIHYtYmluZCBvciB0aGUgY29sb24gc2hvcnRoYW5kIGluc3RlYWQuIEZvciBleGFtcGxlLCAnICtcbiAgICAgICAgICAgICdpbnN0ZWFkIG9mIDxkaXYgaWQ9XCJ7eyB2YWwgfX1cIj4sIHVzZSA8ZGl2IDppZD1cInZhbFwiPi4nXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYWRkQXR0cihlbCwgbmFtZSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgIC8vICM2ODg3IGZpcmVmb3ggZG9lc24ndCB1cGRhdGUgbXV0ZWQgc3RhdGUgaWYgc2V0IHZpYSBhdHRyaWJ1dGVcbiAgICAgIC8vIGV2ZW4gaW1tZWRpYXRlbHkgYWZ0ZXIgZWxlbWVudCBjcmVhdGlvblxuICAgICAgaWYgKCFlbC5jb21wb25lbnQgJiZcbiAgICAgICAgICBuYW1lID09PSAnbXV0ZWQnICYmXG4gICAgICAgICAgcGxhdGZvcm1NdXN0VXNlUHJvcChlbC50YWcsIGVsLmF0dHJzTWFwLnR5cGUsIG5hbWUpKSB7XG4gICAgICAgIGFkZFByb3AoZWwsIG5hbWUsICd0cnVlJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrSW5Gb3IgKGVsKSB7XG4gIHZhciBwYXJlbnQgPSBlbDtcbiAgd2hpbGUgKHBhcmVudCkge1xuICAgIGlmIChwYXJlbnQuZm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzIChuYW1lKSB7XG4gIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XG4gIGlmIChtYXRjaCkge1xuICAgIHZhciByZXQgPSB7fTtcbiAgICBtYXRjaC5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7IHJldFttLnNsaWNlKDEpXSA9IHRydWU7IH0pO1xuICAgIHJldHVybiByZXRcbiAgfVxufVxuXG5mdW5jdGlvbiBtYWtlQXR0cnNNYXAgKGF0dHJzKSB7XG4gIHZhciBtYXAgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoXG4gICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgbWFwW2F0dHJzW2ldLm5hbWVdICYmICFpc0lFICYmICFpc0VkZ2VcbiAgICApIHtcbiAgICAgIHdhcm4kMignZHVwbGljYXRlIGF0dHJpYnV0ZTogJyArIGF0dHJzW2ldLm5hbWUpO1xuICAgIH1cbiAgICBtYXBbYXR0cnNbaV0ubmFtZV0gPSBhdHRyc1tpXS52YWx1ZTtcbiAgfVxuICByZXR1cm4gbWFwXG59XG5cbi8vIGZvciBzY3JpcHQgKGUuZy4gdHlwZT1cIngvdGVtcGxhdGVcIikgb3Igc3R5bGUsIGRvIG5vdCBkZWNvZGUgY29udGVudFxuZnVuY3Rpb24gaXNUZXh0VGFnIChlbCkge1xuICByZXR1cm4gZWwudGFnID09PSAnc2NyaXB0JyB8fCBlbC50YWcgPT09ICdzdHlsZSdcbn1cblxuZnVuY3Rpb24gaXNGb3JiaWRkZW5UYWcgKGVsKSB7XG4gIHJldHVybiAoXG4gICAgZWwudGFnID09PSAnc3R5bGUnIHx8XG4gICAgKGVsLnRhZyA9PT0gJ3NjcmlwdCcgJiYgKFxuICAgICAgIWVsLmF0dHJzTWFwLnR5cGUgfHxcbiAgICAgIGVsLmF0dHJzTWFwLnR5cGUgPT09ICd0ZXh0L2phdmFzY3JpcHQnXG4gICAgKSlcbiAgKVxufVxuXG52YXIgaWVOU0J1ZyA9IC9eeG1sbnM6TlNcXGQrLztcbnZhciBpZU5TUHJlZml4ID0gL15OU1xcZCs6LztcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGd1YXJkSUVTVkdCdWcgKGF0dHJzKSB7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBhdHRyID0gYXR0cnNbaV07XG4gICAgaWYgKCFpZU5TQnVnLnRlc3QoYXR0ci5uYW1lKSkge1xuICAgICAgYXR0ci5uYW1lID0gYXR0ci5uYW1lLnJlcGxhY2UoaWVOU1ByZWZpeCwgJycpO1xuICAgICAgcmVzLnB1c2goYXR0cik7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JBbGlhc01vZGVsIChlbCwgdmFsdWUpIHtcbiAgdmFyIF9lbCA9IGVsO1xuICB3aGlsZSAoX2VsKSB7XG4gICAgaWYgKF9lbC5mb3IgJiYgX2VsLmFsaWFzID09PSB2YWx1ZSkge1xuICAgICAgd2FybiQyKFxuICAgICAgICBcIjxcIiArIChlbC50YWcpICsgXCIgdi1tb2RlbD1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIj46IFwiICtcbiAgICAgICAgXCJZb3UgYXJlIGJpbmRpbmcgdi1tb2RlbCBkaXJlY3RseSB0byBhIHYtZm9yIGl0ZXJhdGlvbiBhbGlhcy4gXCIgK1xuICAgICAgICBcIlRoaXMgd2lsbCBub3QgYmUgYWJsZSB0byBtb2RpZnkgdGhlIHYtZm9yIHNvdXJjZSBhcnJheSBiZWNhdXNlIFwiICtcbiAgICAgICAgXCJ3cml0aW5nIHRvIHRoZSBhbGlhcyBpcyBsaWtlIG1vZGlmeWluZyBhIGZ1bmN0aW9uIGxvY2FsIHZhcmlhYmxlLiBcIiArXG4gICAgICAgIFwiQ29uc2lkZXIgdXNpbmcgYW4gYXJyYXkgb2Ygb2JqZWN0cyBhbmQgdXNlIHYtbW9kZWwgb24gYW4gb2JqZWN0IHByb3BlcnR5IGluc3RlYWQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIF9lbCA9IF9lbC5wYXJlbnQ7XG4gIH1cbn1cblxuLyogICovXG5cbi8qKlxuICogRXhwYW5kIGlucHV0W3YtbW9kZWxdIHdpdGggZHlhbm1pYyB0eXBlIGJpbmRpbmdzIGludG8gdi1pZi1lbHNlIGNoYWluc1xuICogVHVybiB0aGlzOlxuICogICA8aW5wdXQgdi1tb2RlbD1cImRhdGFbdHlwZV1cIiA6dHlwZT1cInR5cGVcIj5cbiAqIGludG8gdGhpczpcbiAqICAgPGlucHV0IHYtaWY9XCJ0eXBlID09PSAnY2hlY2tib3gnXCIgdHlwZT1cImNoZWNrYm94XCIgdi1tb2RlbD1cImRhdGFbdHlwZV1cIj5cbiAqICAgPGlucHV0IHYtZWxzZS1pZj1cInR5cGUgPT09ICdyYWRpbydcIiB0eXBlPVwicmFkaW9cIiB2LW1vZGVsPVwiZGF0YVt0eXBlXVwiPlxuICogICA8aW5wdXQgdi1lbHNlIDp0eXBlPVwidHlwZVwiIHYtbW9kZWw9XCJkYXRhW3R5cGVdXCI+XG4gKi9cblxuZnVuY3Rpb24gcHJlVHJhbnNmb3JtTm9kZSAoZWwsIG9wdGlvbnMpIHtcbiAgaWYgKGVsLnRhZyA9PT0gJ2lucHV0Jykge1xuICAgIHZhciBtYXAgPSBlbC5hdHRyc01hcDtcbiAgICBpZiAoIW1hcFsndi1tb2RlbCddKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgdHlwZUJpbmRpbmc7XG4gICAgaWYgKG1hcFsnOnR5cGUnXSB8fCBtYXBbJ3YtYmluZDp0eXBlJ10pIHtcbiAgICAgIHR5cGVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICd0eXBlJyk7XG4gICAgfVxuICAgIGlmICghdHlwZUJpbmRpbmcgJiYgbWFwWyd2LWJpbmQnXSkge1xuICAgICAgdHlwZUJpbmRpbmcgPSBcIihcIiArIChtYXBbJ3YtYmluZCddKSArIFwiKS50eXBlXCI7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVCaW5kaW5nKSB7XG4gICAgICB2YXIgaWZDb25kaXRpb24gPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1pZicsIHRydWUpO1xuICAgICAgdmFyIGlmQ29uZGl0aW9uRXh0cmEgPSBpZkNvbmRpdGlvbiA/IChcIiYmKFwiICsgaWZDb25kaXRpb24gKyBcIilcIikgOiBcIlwiO1xuICAgICAgdmFyIGhhc0Vsc2UgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlJywgdHJ1ZSkgIT0gbnVsbDtcbiAgICAgIHZhciBlbHNlSWZDb25kaXRpb24gPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlLWlmJywgdHJ1ZSk7XG4gICAgICAvLyAxLiBjaGVja2JveFxuICAgICAgdmFyIGJyYW5jaDAgPSBjbG9uZUFTVEVsZW1lbnQoZWwpO1xuICAgICAgLy8gcHJvY2VzcyBmb3Igb24gdGhlIG1haW4gbm9kZVxuICAgICAgcHJvY2Vzc0ZvcihicmFuY2gwKTtcbiAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMCwgJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICAgIHByb2Nlc3NFbGVtZW50KGJyYW5jaDAsIG9wdGlvbnMpO1xuICAgICAgYnJhbmNoMC5wcm9jZXNzZWQgPSB0cnVlOyAvLyBwcmV2ZW50IGl0IGZyb20gZG91YmxlLXByb2Nlc3NlZFxuICAgICAgYnJhbmNoMC5pZiA9IFwiKFwiICsgdHlwZUJpbmRpbmcgKyBcIik9PT0nY2hlY2tib3gnXCIgKyBpZkNvbmRpdGlvbkV4dHJhO1xuICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwge1xuICAgICAgICBleHA6IGJyYW5jaDAuaWYsXG4gICAgICAgIGJsb2NrOiBicmFuY2gwXG4gICAgICB9KTtcbiAgICAgIC8vIDIuIGFkZCByYWRpbyBlbHNlLWlmIGNvbmRpdGlvblxuICAgICAgdmFyIGJyYW5jaDEgPSBjbG9uZUFTVEVsZW1lbnQoZWwpO1xuICAgICAgZ2V0QW5kUmVtb3ZlQXR0cihicmFuY2gxLCAndi1mb3InLCB0cnVlKTtcbiAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMSwgJ3R5cGUnLCAncmFkaW8nKTtcbiAgICAgIHByb2Nlc3NFbGVtZW50KGJyYW5jaDEsIG9wdGlvbnMpO1xuICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwge1xuICAgICAgICBleHA6IFwiKFwiICsgdHlwZUJpbmRpbmcgKyBcIik9PT0ncmFkaW8nXCIgKyBpZkNvbmRpdGlvbkV4dHJhLFxuICAgICAgICBibG9jazogYnJhbmNoMVxuICAgICAgfSk7XG4gICAgICAvLyAzLiBvdGhlclxuICAgICAgdmFyIGJyYW5jaDIgPSBjbG9uZUFTVEVsZW1lbnQoZWwpO1xuICAgICAgZ2V0QW5kUmVtb3ZlQXR0cihicmFuY2gyLCAndi1mb3InLCB0cnVlKTtcbiAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMiwgJzp0eXBlJywgdHlwZUJpbmRpbmcpO1xuICAgICAgcHJvY2Vzc0VsZW1lbnQoYnJhbmNoMiwgb3B0aW9ucyk7XG4gICAgICBhZGRJZkNvbmRpdGlvbihicmFuY2gwLCB7XG4gICAgICAgIGV4cDogaWZDb25kaXRpb24sXG4gICAgICAgIGJsb2NrOiBicmFuY2gyXG4gICAgICB9KTtcblxuICAgICAgaWYgKGhhc0Vsc2UpIHtcbiAgICAgICAgYnJhbmNoMC5lbHNlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZWxzZUlmQ29uZGl0aW9uKSB7XG4gICAgICAgIGJyYW5jaDAuZWxzZWlmID0gZWxzZUlmQ29uZGl0aW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJhbmNoMFxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjbG9uZUFTVEVsZW1lbnQgKGVsKSB7XG4gIHJldHVybiBjcmVhdGVBU1RFbGVtZW50KGVsLnRhZywgZWwuYXR0cnNMaXN0LnNsaWNlKCksIGVsLnBhcmVudClcbn1cblxudmFyIG1vZGVsJDIgPSB7XG4gIHByZVRyYW5zZm9ybU5vZGU6IHByZVRyYW5zZm9ybU5vZGVcbn1cblxudmFyIG1vZHVsZXMkMSA9IFtcbiAga2xhc3MkMSxcbiAgc3R5bGUkMSxcbiAgbW9kZWwkMlxuXVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gdGV4dCAoZWwsIGRpcikge1xuICBpZiAoZGlyLnZhbHVlKSB7XG4gICAgYWRkUHJvcChlbCwgJ3RleHRDb250ZW50JywgKFwiX3MoXCIgKyAoZGlyLnZhbHVlKSArIFwiKVwiKSk7XG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGh0bWwgKGVsLCBkaXIpIHtcbiAgaWYgKGRpci52YWx1ZSkge1xuICAgIGFkZFByb3AoZWwsICdpbm5lckhUTUwnLCAoXCJfcyhcIiArIChkaXIudmFsdWUpICsgXCIpXCIpKTtcbiAgfVxufVxuXG52YXIgZGlyZWN0aXZlcyQxID0ge1xuICBtb2RlbDogbW9kZWwsXG4gIHRleHQ6IHRleHQsXG4gIGh0bWw6IGh0bWxcbn1cblxuLyogICovXG5cbnZhciBiYXNlT3B0aW9ucyA9IHtcbiAgZXhwZWN0SFRNTDogdHJ1ZSxcbiAgbW9kdWxlczogbW9kdWxlcyQxLFxuICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzJDEsXG4gIGlzUHJlVGFnOiBpc1ByZVRhZyxcbiAgaXNVbmFyeVRhZzogaXNVbmFyeVRhZyxcbiAgbXVzdFVzZVByb3A6IG11c3RVc2VQcm9wLFxuICBjYW5CZUxlZnRPcGVuVGFnOiBjYW5CZUxlZnRPcGVuVGFnLFxuICBpc1Jlc2VydmVkVGFnOiBpc1Jlc2VydmVkVGFnLFxuICBnZXRUYWdOYW1lc3BhY2U6IGdldFRhZ05hbWVzcGFjZSxcbiAgc3RhdGljS2V5czogZ2VuU3RhdGljS2V5cyhtb2R1bGVzJDEpXG59O1xuXG4vKiAgKi9cblxudmFyIGlzU3RhdGljS2V5O1xudmFyIGlzUGxhdGZvcm1SZXNlcnZlZFRhZztcblxudmFyIGdlblN0YXRpY0tleXNDYWNoZWQgPSBjYWNoZWQoZ2VuU3RhdGljS2V5cyQxKTtcblxuLyoqXG4gKiBHb2FsIG9mIHRoZSBvcHRpbWl6ZXI6IHdhbGsgdGhlIGdlbmVyYXRlZCB0ZW1wbGF0ZSBBU1QgdHJlZVxuICogYW5kIGRldGVjdCBzdWItdHJlZXMgdGhhdCBhcmUgcHVyZWx5IHN0YXRpYywgaS5lLiBwYXJ0cyBvZlxuICogdGhlIERPTSB0aGF0IG5ldmVyIG5lZWRzIHRvIGNoYW5nZS5cbiAqXG4gKiBPbmNlIHdlIGRldGVjdCB0aGVzZSBzdWItdHJlZXMsIHdlIGNhbjpcbiAqXG4gKiAxLiBIb2lzdCB0aGVtIGludG8gY29uc3RhbnRzLCBzbyB0aGF0IHdlIG5vIGxvbmdlciBuZWVkIHRvXG4gKiAgICBjcmVhdGUgZnJlc2ggbm9kZXMgZm9yIHRoZW0gb24gZWFjaCByZS1yZW5kZXI7XG4gKiAyLiBDb21wbGV0ZWx5IHNraXAgdGhlbSBpbiB0aGUgcGF0Y2hpbmcgcHJvY2Vzcy5cbiAqL1xuZnVuY3Rpb24gb3B0aW1pemUgKHJvb3QsIG9wdGlvbnMpIHtcbiAgaWYgKCFyb290KSB7IHJldHVybiB9XG4gIGlzU3RhdGljS2V5ID0gZ2VuU3RhdGljS2V5c0NhY2hlZChvcHRpb25zLnN0YXRpY0tleXMgfHwgJycpO1xuICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87XG4gIC8vIGZpcnN0IHBhc3M6IG1hcmsgYWxsIG5vbi1zdGF0aWMgbm9kZXMuXG4gIG1hcmtTdGF0aWMkMShyb290KTtcbiAgLy8gc2Vjb25kIHBhc3M6IG1hcmsgc3RhdGljIHJvb3RzLlxuICBtYXJrU3RhdGljUm9vdHMocm9vdCwgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBnZW5TdGF0aWNLZXlzJDEgKGtleXMpIHtcbiAgcmV0dXJuIG1ha2VNYXAoXG4gICAgJ3R5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMnICtcbiAgICAoa2V5cyA/ICcsJyArIGtleXMgOiAnJylcbiAgKVxufVxuXG5mdW5jdGlvbiBtYXJrU3RhdGljJDEgKG5vZGUpIHtcbiAgbm9kZS5zdGF0aWMgPSBpc1N0YXRpYyhub2RlKTtcbiAgaWYgKG5vZGUudHlwZSA9PT0gMSkge1xuICAgIC8vIGRvIG5vdCBtYWtlIGNvbXBvbmVudCBzbG90IGNvbnRlbnQgc3RhdGljLiB0aGlzIGF2b2lkc1xuICAgIC8vIDEuIGNvbXBvbmVudHMgbm90IGFibGUgdG8gbXV0YXRlIHNsb3Qgbm9kZXNcbiAgICAvLyAyLiBzdGF0aWMgc2xvdCBjb250ZW50IGZhaWxzIGZvciBob3QtcmVsb2FkaW5nXG4gICAgaWYgKFxuICAgICAgIWlzUGxhdGZvcm1SZXNlcnZlZFRhZyhub2RlLnRhZykgJiZcbiAgICAgIG5vZGUudGFnICE9PSAnc2xvdCcgJiZcbiAgICAgIG5vZGUuYXR0cnNNYXBbJ2lubGluZS10ZW1wbGF0ZSddID09IG51bGxcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgbWFya1N0YXRpYyQxKGNoaWxkKTtcbiAgICAgIGlmICghY2hpbGQuc3RhdGljKSB7XG4gICAgICAgIG5vZGUuc3RhdGljID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChub2RlLmlmQ29uZGl0aW9ucykge1xuICAgICAgZm9yICh2YXIgaSQxID0gMSwgbCQxID0gbm9kZS5pZkNvbmRpdGlvbnMubGVuZ3RoOyBpJDEgPCBsJDE7IGkkMSsrKSB7XG4gICAgICAgIHZhciBibG9jayA9IG5vZGUuaWZDb25kaXRpb25zW2kkMV0uYmxvY2s7XG4gICAgICAgIG1hcmtTdGF0aWMkMShibG9jayk7XG4gICAgICAgIGlmICghYmxvY2suc3RhdGljKSB7XG4gICAgICAgICAgbm9kZS5zdGF0aWMgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBtYXJrU3RhdGljUm9vdHMgKG5vZGUsIGlzSW5Gb3IpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gMSkge1xuICAgIGlmIChub2RlLnN0YXRpYyB8fCBub2RlLm9uY2UpIHtcbiAgICAgIG5vZGUuc3RhdGljSW5Gb3IgPSBpc0luRm9yO1xuICAgIH1cbiAgICAvLyBGb3IgYSBub2RlIHRvIHF1YWxpZnkgYXMgYSBzdGF0aWMgcm9vdCwgaXQgc2hvdWxkIGhhdmUgY2hpbGRyZW4gdGhhdFxuICAgIC8vIGFyZSBub3QganVzdCBzdGF0aWMgdGV4dC4gT3RoZXJ3aXNlIHRoZSBjb3N0IG9mIGhvaXN0aW5nIG91dCB3aWxsXG4gICAgLy8gb3V0d2VpZ2ggdGhlIGJlbmVmaXRzIGFuZCBpdCdzIGJldHRlciBvZmYgdG8ganVzdCBhbHdheXMgcmVuZGVyIGl0IGZyZXNoLlxuICAgIGlmIChub2RlLnN0YXRpYyAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCAmJiAhKFxuICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcbiAgICAgIG5vZGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gM1xuICAgICkpIHtcbiAgICAgIG5vZGUuc3RhdGljUm9vdCA9IHRydWU7XG4gICAgICByZXR1cm5cbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5zdGF0aWNSb290ID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIG1hcmtTdGF0aWNSb290cyhub2RlLmNoaWxkcmVuW2ldLCBpc0luRm9yIHx8ICEhbm9kZS5mb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobm9kZS5pZkNvbmRpdGlvbnMpIHtcbiAgICAgIGZvciAodmFyIGkkMSA9IDEsIGwkMSA9IG5vZGUuaWZDb25kaXRpb25zLmxlbmd0aDsgaSQxIDwgbCQxOyBpJDErKykge1xuICAgICAgICBtYXJrU3RhdGljUm9vdHMobm9kZS5pZkNvbmRpdGlvbnNbaSQxXS5ibG9jaywgaXNJbkZvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzU3RhdGljIChub2RlKSB7XG4gIGlmIChub2RlLnR5cGUgPT09IDIpIHsgLy8gZXhwcmVzc2lvblxuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGlmIChub2RlLnR5cGUgPT09IDMpIHsgLy8gdGV4dFxuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgcmV0dXJuICEhKG5vZGUucHJlIHx8IChcbiAgICAhbm9kZS5oYXNCaW5kaW5ncyAmJiAvLyBubyBkeW5hbWljIGJpbmRpbmdzXG4gICAgIW5vZGUuaWYgJiYgIW5vZGUuZm9yICYmIC8vIG5vdCB2LWlmIG9yIHYtZm9yIG9yIHYtZWxzZVxuICAgICFpc0J1aWx0SW5UYWcobm9kZS50YWcpICYmIC8vIG5vdCBhIGJ1aWx0LWluXG4gICAgaXNQbGF0Zm9ybVJlc2VydmVkVGFnKG5vZGUudGFnKSAmJiAvLyBub3QgYSBjb21wb25lbnRcbiAgICAhaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3Iobm9kZSkgJiZcbiAgICBPYmplY3Qua2V5cyhub2RlKS5ldmVyeShpc1N0YXRpY0tleSlcbiAgKSlcbn1cblxuZnVuY3Rpb24gaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3IgKG5vZGUpIHtcbiAgd2hpbGUgKG5vZGUucGFyZW50KSB7XG4gICAgbm9kZSA9IG5vZGUucGFyZW50O1xuICAgIGlmIChub2RlLnRhZyAhPT0gJ3RlbXBsYXRlJykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChub2RlLmZvcikge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbi8qICAqL1xuXG52YXIgZm5FeHBSRSA9IC9eKFtcXHckX10rfFxcKFteKV0qP1xcKSlcXHMqPT58XmZ1bmN0aW9uXFxzKlxcKC87XG52YXIgc2ltcGxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWydbXiddKj8nXXxcXFtcIlteXCJdKj9cIl18XFxbXFxkK118XFxbW0EtWmEtel8kXVtcXHckXSpdKSokLztcblxuLy8gS2V5Ym9hcmRFdmVudC5rZXlDb2RlIGFsaWFzZXNcbnZhciBrZXlDb2RlcyA9IHtcbiAgZXNjOiAyNyxcbiAgdGFiOiA5LFxuICBlbnRlcjogMTMsXG4gIHNwYWNlOiAzMixcbiAgdXA6IDM4LFxuICBsZWZ0OiAzNyxcbiAgcmlnaHQ6IDM5LFxuICBkb3duOiA0MCxcbiAgJ2RlbGV0ZSc6IFs4LCA0Nl1cbn07XG5cbi8vIEtleWJvYXJkRXZlbnQua2V5IGFsaWFzZXNcbnZhciBrZXlOYW1lcyA9IHtcbiAgZXNjOiAnRXNjYXBlJyxcbiAgdGFiOiAnVGFiJyxcbiAgZW50ZXI6ICdFbnRlcicsXG4gIHNwYWNlOiAnICcsXG4gIHVwOiAnQXJyb3dVcCcsXG4gIGxlZnQ6ICdBcnJvd0xlZnQnLFxuICByaWdodDogJ0Fycm93UmlnaHQnLFxuICBkb3duOiAnQXJyb3dEb3duJyxcbiAgJ2RlbGV0ZSc6IFsnQmFja3NwYWNlJywgJ0RlbGV0ZSddXG59O1xuXG4vLyAjNDg2ODogbW9kaWZpZXJzIHRoYXQgcHJldmVudCB0aGUgZXhlY3V0aW9uIG9mIHRoZSBsaXN0ZW5lclxuLy8gbmVlZCB0byBleHBsaWNpdGx5IHJldHVybiBudWxsIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB3aGV0aGVyIHRvIHJlbW92ZVxuLy8gdGhlIGxpc3RlbmVyIGZvciAub25jZVxudmFyIGdlbkd1YXJkID0gZnVuY3Rpb24gKGNvbmRpdGlvbikgeyByZXR1cm4gKFwiaWYoXCIgKyBjb25kaXRpb24gKyBcIilyZXR1cm4gbnVsbDtcIik7IH07XG5cbnZhciBtb2RpZmllckNvZGUgPSB7XG4gIHN0b3A6ICckZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7JyxcbiAgcHJldmVudDogJyRldmVudC5wcmV2ZW50RGVmYXVsdCgpOycsXG4gIHNlbGY6IGdlbkd1YXJkKFwiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXRcIiksXG4gIGN0cmw6IGdlbkd1YXJkKFwiISRldmVudC5jdHJsS2V5XCIpLFxuICBzaGlmdDogZ2VuR3VhcmQoXCIhJGV2ZW50LnNoaWZ0S2V5XCIpLFxuICBhbHQ6IGdlbkd1YXJkKFwiISRldmVudC5hbHRLZXlcIiksXG4gIG1ldGE6IGdlbkd1YXJkKFwiISRldmVudC5tZXRhS2V5XCIpLFxuICBsZWZ0OiBnZW5HdWFyZChcIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAwXCIpLFxuICBtaWRkbGU6IGdlbkd1YXJkKFwiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDFcIiksXG4gIHJpZ2h0OiBnZW5HdWFyZChcIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAyXCIpXG59O1xuXG5mdW5jdGlvbiBnZW5IYW5kbGVycyAoXG4gIGV2ZW50cyxcbiAgaXNOYXRpdmUsXG4gIHdhcm5cbikge1xuICB2YXIgcmVzID0gaXNOYXRpdmUgPyAnbmF0aXZlT246eycgOiAnb246eyc7XG4gIGZvciAodmFyIG5hbWUgaW4gZXZlbnRzKSB7XG4gICAgcmVzICs9IFwiXFxcIlwiICsgbmFtZSArIFwiXFxcIjpcIiArIChnZW5IYW5kbGVyKG5hbWUsIGV2ZW50c1tuYW1lXSkpICsgXCIsXCI7XG4gIH1cbiAgcmV0dXJuIHJlcy5zbGljZSgwLCAtMSkgKyAnfSdcbn1cblxuZnVuY3Rpb24gZ2VuSGFuZGxlciAoXG4gIG5hbWUsXG4gIGhhbmRsZXJcbikge1xuICBpZiAoIWhhbmRsZXIpIHtcbiAgICByZXR1cm4gJ2Z1bmN0aW9uKCl7fSdcbiAgfVxuXG4gIGlmIChBcnJheS5pc0FycmF5KGhhbmRsZXIpKSB7XG4gICAgcmV0dXJuIChcIltcIiArIChoYW5kbGVyLm1hcChmdW5jdGlvbiAoaGFuZGxlcikgeyByZXR1cm4gZ2VuSGFuZGxlcihuYW1lLCBoYW5kbGVyKTsgfSkuam9pbignLCcpKSArIFwiXVwiKVxuICB9XG5cbiAgdmFyIGlzTWV0aG9kUGF0aCA9IHNpbXBsZVBhdGhSRS50ZXN0KGhhbmRsZXIudmFsdWUpO1xuICB2YXIgaXNGdW5jdGlvbkV4cHJlc3Npb24gPSBmbkV4cFJFLnRlc3QoaGFuZGxlci52YWx1ZSk7XG5cbiAgaWYgKCFoYW5kbGVyLm1vZGlmaWVycykge1xuICAgIGlmIChpc01ldGhvZFBhdGggfHwgaXNGdW5jdGlvbkV4cHJlc3Npb24pIHtcbiAgICAgIHJldHVybiBoYW5kbGVyLnZhbHVlXG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIHJldHVybiAoXCJmdW5jdGlvbigkZXZlbnQpe1wiICsgKGhhbmRsZXIudmFsdWUpICsgXCJ9XCIpIC8vIGlubGluZSBzdGF0ZW1lbnRcbiAgfSBlbHNlIHtcbiAgICB2YXIgY29kZSA9ICcnO1xuICAgIHZhciBnZW5Nb2RpZmllckNvZGUgPSAnJztcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBoYW5kbGVyLm1vZGlmaWVycykge1xuICAgICAgaWYgKG1vZGlmaWVyQ29kZVtrZXldKSB7XG4gICAgICAgIGdlbk1vZGlmaWVyQ29kZSArPSBtb2RpZmllckNvZGVba2V5XTtcbiAgICAgICAgLy8gbGVmdC9yaWdodFxuICAgICAgICBpZiAoa2V5Q29kZXNba2V5XSkge1xuICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2V4YWN0Jykge1xuICAgICAgICB2YXIgbW9kaWZpZXJzID0gKGhhbmRsZXIubW9kaWZpZXJzKTtcbiAgICAgICAgZ2VuTW9kaWZpZXJDb2RlICs9IGdlbkd1YXJkKFxuICAgICAgICAgIFsnY3RybCcsICdzaGlmdCcsICdhbHQnLCAnbWV0YSddXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXlNb2RpZmllcikgeyByZXR1cm4gIW1vZGlmaWVyc1trZXlNb2RpZmllcl07IH0pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrZXlNb2RpZmllcikgeyByZXR1cm4gKFwiJGV2ZW50LlwiICsga2V5TW9kaWZpZXIgKyBcIktleVwiKTsgfSlcbiAgICAgICAgICAgIC5qb2luKCd8fCcpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgICBjb2RlICs9IGdlbktleUZpbHRlcihrZXlzKTtcbiAgICB9XG4gICAgLy8gTWFrZSBzdXJlIG1vZGlmaWVycyBsaWtlIHByZXZlbnQgYW5kIHN0b3AgZ2V0IGV4ZWN1dGVkIGFmdGVyIGtleSBmaWx0ZXJpbmdcbiAgICBpZiAoZ2VuTW9kaWZpZXJDb2RlKSB7XG4gICAgICBjb2RlICs9IGdlbk1vZGlmaWVyQ29kZTtcbiAgICB9XG4gICAgdmFyIGhhbmRsZXJDb2RlID0gaXNNZXRob2RQYXRoXG4gICAgICA/IChcInJldHVybiBcIiArIChoYW5kbGVyLnZhbHVlKSArIFwiKCRldmVudClcIilcbiAgICAgIDogaXNGdW5jdGlvbkV4cHJlc3Npb25cbiAgICAgICAgPyAoXCJyZXR1cm4gKFwiICsgKGhhbmRsZXIudmFsdWUpICsgXCIpKCRldmVudClcIilcbiAgICAgICAgOiBoYW5kbGVyLnZhbHVlO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIHJldHVybiAoXCJmdW5jdGlvbigkZXZlbnQpe1wiICsgY29kZSArIGhhbmRsZXJDb2RlICsgXCJ9XCIpXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuS2V5RmlsdGVyIChrZXlzKSB7XG4gIHJldHVybiAoXCJpZighKCdidXR0b24nIGluICRldmVudCkmJlwiICsgKGtleXMubWFwKGdlbkZpbHRlckNvZGUpLmpvaW4oJyYmJykpICsgXCIpcmV0dXJuIG51bGw7XCIpXG59XG5cbmZ1bmN0aW9uIGdlbkZpbHRlckNvZGUgKGtleSkge1xuICB2YXIga2V5VmFsID0gcGFyc2VJbnQoa2V5LCAxMCk7XG4gIGlmIChrZXlWYWwpIHtcbiAgICByZXR1cm4gKFwiJGV2ZW50LmtleUNvZGUhPT1cIiArIGtleVZhbClcbiAgfVxuICB2YXIga2V5Q29kZSA9IGtleUNvZGVzW2tleV07XG4gIHZhciBrZXlOYW1lID0ga2V5TmFtZXNba2V5XTtcbiAgcmV0dXJuIChcbiAgICBcIl9rKCRldmVudC5rZXlDb2RlLFwiICtcbiAgICAoSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyBcIixcIiArXG4gICAgKEpTT04uc3RyaW5naWZ5KGtleUNvZGUpKSArIFwiLFwiICtcbiAgICBcIiRldmVudC5rZXksXCIgK1xuICAgIFwiXCIgKyAoSlNPTi5zdHJpbmdpZnkoa2V5TmFtZSkpICtcbiAgICBcIilcIlxuICApXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBvbiAoZWwsIGRpcikge1xuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgZGlyLm1vZGlmaWVycykge1xuICAgIHdhcm4oXCJ2LW9uIHdpdGhvdXQgYXJndW1lbnQgZG9lcyBub3Qgc3VwcG9ydCBtb2RpZmllcnMuXCIpO1xuICB9XG4gIGVsLndyYXBMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoY29kZSkgeyByZXR1cm4gKFwiX2coXCIgKyBjb2RlICsgXCIsXCIgKyAoZGlyLnZhbHVlKSArIFwiKVwiKTsgfTtcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGJpbmQkMSAoZWwsIGRpcikge1xuICBlbC53cmFwRGF0YSA9IGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgcmV0dXJuIChcIl9iKFwiICsgY29kZSArIFwiLCdcIiArIChlbC50YWcpICsgXCInLFwiICsgKGRpci52YWx1ZSkgKyBcIixcIiArIChkaXIubW9kaWZpZXJzICYmIGRpci5tb2RpZmllcnMucHJvcCA/ICd0cnVlJyA6ICdmYWxzZScpICsgKGRpci5tb2RpZmllcnMgJiYgZGlyLm1vZGlmaWVycy5zeW5jID8gJyx0cnVlJyA6ICcnKSArIFwiKVwiKVxuICB9O1xufVxuXG4vKiAgKi9cblxudmFyIGJhc2VEaXJlY3RpdmVzID0ge1xuICBvbjogb24sXG4gIGJpbmQ6IGJpbmQkMSxcbiAgY2xvYWs6IG5vb3Bcbn1cblxuLyogICovXG5cbnZhciBDb2RlZ2VuU3RhdGUgPSBmdW5jdGlvbiBDb2RlZ2VuU3RhdGUgKG9wdGlvbnMpIHtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgdGhpcy53YXJuID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuO1xuICB0aGlzLnRyYW5zZm9ybXMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ3RyYW5zZm9ybUNvZGUnKTtcbiAgdGhpcy5kYXRhR2VuRm5zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICdnZW5EYXRhJyk7XG4gIHRoaXMuZGlyZWN0aXZlcyA9IGV4dGVuZChleHRlbmQoe30sIGJhc2VEaXJlY3RpdmVzKSwgb3B0aW9ucy5kaXJlY3RpdmVzKTtcbiAgdmFyIGlzUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87XG4gIHRoaXMubWF5YmVDb21wb25lbnQgPSBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuICFpc1Jlc2VydmVkVGFnKGVsLnRhZyk7IH07XG4gIHRoaXMub25jZUlkID0gMDtcbiAgdGhpcy5zdGF0aWNSZW5kZXJGbnMgPSBbXTtcbn07XG5cblxuXG5mdW5jdGlvbiBnZW5lcmF0ZSAoXG4gIGFzdCxcbiAgb3B0aW9uc1xuKSB7XG4gIHZhciBzdGF0ZSA9IG5ldyBDb2RlZ2VuU3RhdGUob3B0aW9ucyk7XG4gIHZhciBjb2RlID0gYXN0ID8gZ2VuRWxlbWVudChhc3QsIHN0YXRlKSA6ICdfYyhcImRpdlwiKSc7XG4gIHJldHVybiB7XG4gICAgcmVuZGVyOiAoXCJ3aXRoKHRoaXMpe3JldHVybiBcIiArIGNvZGUgKyBcIn1cIiksXG4gICAgc3RhdGljUmVuZGVyRm5zOiBzdGF0ZS5zdGF0aWNSZW5kZXJGbnNcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5FbGVtZW50IChlbCwgc3RhdGUpIHtcbiAgaWYgKGVsLnN0YXRpY1Jvb3QgJiYgIWVsLnN0YXRpY1Byb2Nlc3NlZCkge1xuICAgIHJldHVybiBnZW5TdGF0aWMoZWwsIHN0YXRlKVxuICB9IGVsc2UgaWYgKGVsLm9uY2UgJiYgIWVsLm9uY2VQcm9jZXNzZWQpIHtcbiAgICByZXR1cm4gZ2VuT25jZShlbCwgc3RhdGUpXG4gIH0gZWxzZSBpZiAoZWwuZm9yICYmICFlbC5mb3JQcm9jZXNzZWQpIHtcbiAgICByZXR1cm4gZ2VuRm9yKGVsLCBzdGF0ZSlcbiAgfSBlbHNlIGlmIChlbC5pZiAmJiAhZWwuaWZQcm9jZXNzZWQpIHtcbiAgICByZXR1cm4gZ2VuSWYoZWwsIHN0YXRlKVxuICB9IGVsc2UgaWYgKGVsLnRhZyA9PT0gJ3RlbXBsYXRlJyAmJiAhZWwuc2xvdFRhcmdldCkge1xuICAgIHJldHVybiBnZW5DaGlsZHJlbihlbCwgc3RhdGUpIHx8ICd2b2lkIDAnXG4gIH0gZWxzZSBpZiAoZWwudGFnID09PSAnc2xvdCcpIHtcbiAgICByZXR1cm4gZ2VuU2xvdChlbCwgc3RhdGUpXG4gIH0gZWxzZSB7XG4gICAgLy8gY29tcG9uZW50IG9yIGVsZW1lbnRcbiAgICB2YXIgY29kZTtcbiAgICBpZiAoZWwuY29tcG9uZW50KSB7XG4gICAgICBjb2RlID0gZ2VuQ29tcG9uZW50KGVsLmNvbXBvbmVudCwgZWwsIHN0YXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGRhdGEgPSBlbC5wbGFpbiA/IHVuZGVmaW5lZCA6IGdlbkRhdGEkMihlbCwgc3RhdGUpO1xuXG4gICAgICB2YXIgY2hpbGRyZW4gPSBlbC5pbmxpbmVUZW1wbGF0ZSA/IG51bGwgOiBnZW5DaGlsZHJlbihlbCwgc3RhdGUsIHRydWUpO1xuICAgICAgY29kZSA9IFwiX2MoJ1wiICsgKGVsLnRhZykgKyBcIidcIiArIChkYXRhID8gKFwiLFwiICsgZGF0YSkgOiAnJykgKyAoY2hpbGRyZW4gPyAoXCIsXCIgKyBjaGlsZHJlbikgOiAnJykgKyBcIilcIjtcbiAgICB9XG4gICAgLy8gbW9kdWxlIHRyYW5zZm9ybXNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLnRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvZGUgPSBzdGF0ZS50cmFuc2Zvcm1zW2ldKGVsLCBjb2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvZGVcbiAgfVxufVxuXG4vLyBob2lzdCBzdGF0aWMgc3ViLXRyZWVzIG91dFxuZnVuY3Rpb24gZ2VuU3RhdGljIChlbCwgc3RhdGUpIHtcbiAgZWwuc3RhdGljUHJvY2Vzc2VkID0gdHJ1ZTtcbiAgc3RhdGUuc3RhdGljUmVuZGVyRm5zLnB1c2goKFwid2l0aCh0aGlzKXtyZXR1cm4gXCIgKyAoZ2VuRWxlbWVudChlbCwgc3RhdGUpKSArIFwifVwiKSk7XG4gIHJldHVybiAoXCJfbShcIiArIChzdGF0ZS5zdGF0aWNSZW5kZXJGbnMubGVuZ3RoIC0gMSkgKyAoZWwuc3RhdGljSW5Gb3IgPyAnLHRydWUnIDogJycpICsgXCIpXCIpXG59XG5cbi8vIHYtb25jZVxuZnVuY3Rpb24gZ2VuT25jZSAoZWwsIHN0YXRlKSB7XG4gIGVsLm9uY2VQcm9jZXNzZWQgPSB0cnVlO1xuICBpZiAoZWwuaWYgJiYgIWVsLmlmUHJvY2Vzc2VkKSB7XG4gICAgcmV0dXJuIGdlbklmKGVsLCBzdGF0ZSlcbiAgfSBlbHNlIGlmIChlbC5zdGF0aWNJbkZvcikge1xuICAgIHZhciBrZXkgPSAnJztcbiAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50O1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIGlmIChwYXJlbnQuZm9yKSB7XG4gICAgICAgIGtleSA9IHBhcmVudC5rZXk7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgIH1cbiAgICBpZiAoIWtleSkge1xuICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgc3RhdGUud2FybihcbiAgICAgICAgXCJ2LW9uY2UgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdi1mb3IgdGhhdCBpcyBrZXllZC4gXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gZ2VuRWxlbWVudChlbCwgc3RhdGUpXG4gICAgfVxuICAgIHJldHVybiAoXCJfbyhcIiArIChnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgXCIsXCIgKyAoc3RhdGUub25jZUlkKyspICsgXCIsXCIgKyBrZXkgKyBcIilcIilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2VuU3RhdGljKGVsLCBzdGF0ZSlcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5JZiAoXG4gIGVsLFxuICBzdGF0ZSxcbiAgYWx0R2VuLFxuICBhbHRFbXB0eVxuKSB7XG4gIGVsLmlmUHJvY2Vzc2VkID0gdHJ1ZTsgLy8gYXZvaWQgcmVjdXJzaW9uXG4gIHJldHVybiBnZW5JZkNvbmRpdGlvbnMoZWwuaWZDb25kaXRpb25zLnNsaWNlKCksIHN0YXRlLCBhbHRHZW4sIGFsdEVtcHR5KVxufVxuXG5mdW5jdGlvbiBnZW5JZkNvbmRpdGlvbnMgKFxuICBjb25kaXRpb25zLFxuICBzdGF0ZSxcbiAgYWx0R2VuLFxuICBhbHRFbXB0eVxuKSB7XG4gIGlmICghY29uZGl0aW9ucy5sZW5ndGgpIHtcbiAgICByZXR1cm4gYWx0RW1wdHkgfHwgJ19lKCknXG4gIH1cblxuICB2YXIgY29uZGl0aW9uID0gY29uZGl0aW9ucy5zaGlmdCgpO1xuICBpZiAoY29uZGl0aW9uLmV4cCkge1xuICAgIHJldHVybiAoXCIoXCIgKyAoY29uZGl0aW9uLmV4cCkgKyBcIik/XCIgKyAoZ2VuVGVybmFyeUV4cChjb25kaXRpb24uYmxvY2spKSArIFwiOlwiICsgKGdlbklmQ29uZGl0aW9ucyhjb25kaXRpb25zLCBzdGF0ZSwgYWx0R2VuLCBhbHRFbXB0eSkpKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXCJcIiArIChnZW5UZXJuYXJ5RXhwKGNvbmRpdGlvbi5ibG9jaykpKVxuICB9XG5cbiAgLy8gdi1pZiB3aXRoIHYtb25jZSBzaG91bGQgZ2VuZXJhdGUgY29kZSBsaWtlIChhKT9fbSgwKTpfbSgxKVxuICBmdW5jdGlvbiBnZW5UZXJuYXJ5RXhwIChlbCkge1xuICAgIHJldHVybiBhbHRHZW5cbiAgICAgID8gYWx0R2VuKGVsLCBzdGF0ZSlcbiAgICAgIDogZWwub25jZVxuICAgICAgICA/IGdlbk9uY2UoZWwsIHN0YXRlKVxuICAgICAgICA6IGdlbkVsZW1lbnQoZWwsIHN0YXRlKVxuICB9XG59XG5cbmZ1bmN0aW9uIGdlbkZvciAoXG4gIGVsLFxuICBzdGF0ZSxcbiAgYWx0R2VuLFxuICBhbHRIZWxwZXJcbikge1xuICB2YXIgZXhwID0gZWwuZm9yO1xuICB2YXIgYWxpYXMgPSBlbC5hbGlhcztcbiAgdmFyIGl0ZXJhdG9yMSA9IGVsLml0ZXJhdG9yMSA/IChcIixcIiArIChlbC5pdGVyYXRvcjEpKSA6ICcnO1xuICB2YXIgaXRlcmF0b3IyID0gZWwuaXRlcmF0b3IyID8gKFwiLFwiICsgKGVsLml0ZXJhdG9yMikpIDogJyc7XG5cbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgc3RhdGUubWF5YmVDb21wb25lbnQoZWwpICYmXG4gICAgZWwudGFnICE9PSAnc2xvdCcgJiZcbiAgICBlbC50YWcgIT09ICd0ZW1wbGF0ZScgJiZcbiAgICAhZWwua2V5XG4gICkge1xuICAgIHN0YXRlLndhcm4oXG4gICAgICBcIjxcIiArIChlbC50YWcpICsgXCIgdi1mb3I9XFxcIlwiICsgYWxpYXMgKyBcIiBpbiBcIiArIGV4cCArIFwiXFxcIj46IGNvbXBvbmVudCBsaXN0cyByZW5kZXJlZCB3aXRoIFwiICtcbiAgICAgIFwidi1mb3Igc2hvdWxkIGhhdmUgZXhwbGljaXQga2V5cy4gXCIgK1xuICAgICAgXCJTZWUgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvbGlzdC5odG1sI2tleSBmb3IgbW9yZSBpbmZvLlwiLFxuICAgICAgdHJ1ZSAvKiB0aXAgKi9cbiAgICApO1xuICB9XG5cbiAgZWwuZm9yUHJvY2Vzc2VkID0gdHJ1ZTsgLy8gYXZvaWQgcmVjdXJzaW9uXG4gIHJldHVybiAoYWx0SGVscGVyIHx8ICdfbCcpICsgXCIoKFwiICsgZXhwICsgXCIpLFwiICtcbiAgICBcImZ1bmN0aW9uKFwiICsgYWxpYXMgKyBpdGVyYXRvcjEgKyBpdGVyYXRvcjIgKyBcIil7XCIgK1xuICAgICAgXCJyZXR1cm4gXCIgKyAoKGFsdEdlbiB8fCBnZW5FbGVtZW50KShlbCwgc3RhdGUpKSArXG4gICAgJ30pJ1xufVxuXG5mdW5jdGlvbiBnZW5EYXRhJDIgKGVsLCBzdGF0ZSkge1xuICB2YXIgZGF0YSA9ICd7JztcblxuICAvLyBkaXJlY3RpdmVzIGZpcnN0LlxuICAvLyBkaXJlY3RpdmVzIG1heSBtdXRhdGUgdGhlIGVsJ3Mgb3RoZXIgcHJvcGVydGllcyBiZWZvcmUgdGhleSBhcmUgZ2VuZXJhdGVkLlxuICB2YXIgZGlycyA9IGdlbkRpcmVjdGl2ZXMoZWwsIHN0YXRlKTtcbiAgaWYgKGRpcnMpIHsgZGF0YSArPSBkaXJzICsgJywnOyB9XG5cbiAgLy8ga2V5XG4gIGlmIChlbC5rZXkpIHtcbiAgICBkYXRhICs9IFwia2V5OlwiICsgKGVsLmtleSkgKyBcIixcIjtcbiAgfVxuICAvLyByZWZcbiAgaWYgKGVsLnJlZikge1xuICAgIGRhdGEgKz0gXCJyZWY6XCIgKyAoZWwucmVmKSArIFwiLFwiO1xuICB9XG4gIGlmIChlbC5yZWZJbkZvcikge1xuICAgIGRhdGEgKz0gXCJyZWZJbkZvcjp0cnVlLFwiO1xuICB9XG4gIC8vIHByZVxuICBpZiAoZWwucHJlKSB7XG4gICAgZGF0YSArPSBcInByZTp0cnVlLFwiO1xuICB9XG4gIC8vIHJlY29yZCBvcmlnaW5hbCB0YWcgbmFtZSBmb3IgY29tcG9uZW50cyB1c2luZyBcImlzXCIgYXR0cmlidXRlXG4gIGlmIChlbC5jb21wb25lbnQpIHtcbiAgICBkYXRhICs9IFwidGFnOlxcXCJcIiArIChlbC50YWcpICsgXCJcXFwiLFwiO1xuICB9XG4gIC8vIG1vZHVsZSBkYXRhIGdlbmVyYXRpb24gZnVuY3Rpb25zXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUuZGF0YUdlbkZucy5sZW5ndGg7IGkrKykge1xuICAgIGRhdGEgKz0gc3RhdGUuZGF0YUdlbkZuc1tpXShlbCk7XG4gIH1cbiAgLy8gYXR0cmlidXRlc1xuICBpZiAoZWwuYXR0cnMpIHtcbiAgICBkYXRhICs9IFwiYXR0cnM6e1wiICsgKGdlblByb3BzKGVsLmF0dHJzKSkgKyBcIn0sXCI7XG4gIH1cbiAgLy8gRE9NIHByb3BzXG4gIGlmIChlbC5wcm9wcykge1xuICAgIGRhdGEgKz0gXCJkb21Qcm9wczp7XCIgKyAoZ2VuUHJvcHMoZWwucHJvcHMpKSArIFwifSxcIjtcbiAgfVxuICAvLyBldmVudCBoYW5kbGVyc1xuICBpZiAoZWwuZXZlbnRzKSB7XG4gICAgZGF0YSArPSAoZ2VuSGFuZGxlcnMoZWwuZXZlbnRzLCBmYWxzZSwgc3RhdGUud2FybikpICsgXCIsXCI7XG4gIH1cbiAgaWYgKGVsLm5hdGl2ZUV2ZW50cykge1xuICAgIGRhdGEgKz0gKGdlbkhhbmRsZXJzKGVsLm5hdGl2ZUV2ZW50cywgdHJ1ZSwgc3RhdGUud2FybikpICsgXCIsXCI7XG4gIH1cbiAgLy8gc2xvdCB0YXJnZXRcbiAgLy8gb25seSBmb3Igbm9uLXNjb3BlZCBzbG90c1xuICBpZiAoZWwuc2xvdFRhcmdldCAmJiAhZWwuc2xvdFNjb3BlKSB7XG4gICAgZGF0YSArPSBcInNsb3Q6XCIgKyAoZWwuc2xvdFRhcmdldCkgKyBcIixcIjtcbiAgfVxuICAvLyBzY29wZWQgc2xvdHNcbiAgaWYgKGVsLnNjb3BlZFNsb3RzKSB7XG4gICAgZGF0YSArPSAoZ2VuU2NvcGVkU2xvdHMoZWwuc2NvcGVkU2xvdHMsIHN0YXRlKSkgKyBcIixcIjtcbiAgfVxuICAvLyBjb21wb25lbnQgdi1tb2RlbFxuICBpZiAoZWwubW9kZWwpIHtcbiAgICBkYXRhICs9IFwibW9kZWw6e3ZhbHVlOlwiICsgKGVsLm1vZGVsLnZhbHVlKSArIFwiLGNhbGxiYWNrOlwiICsgKGVsLm1vZGVsLmNhbGxiYWNrKSArIFwiLGV4cHJlc3Npb246XCIgKyAoZWwubW9kZWwuZXhwcmVzc2lvbikgKyBcIn0sXCI7XG4gIH1cbiAgLy8gaW5saW5lLXRlbXBsYXRlXG4gIGlmIChlbC5pbmxpbmVUZW1wbGF0ZSkge1xuICAgIHZhciBpbmxpbmVUZW1wbGF0ZSA9IGdlbklubGluZVRlbXBsYXRlKGVsLCBzdGF0ZSk7XG4gICAgaWYgKGlubGluZVRlbXBsYXRlKSB7XG4gICAgICBkYXRhICs9IGlubGluZVRlbXBsYXRlICsgXCIsXCI7XG4gICAgfVxuICB9XG4gIGRhdGEgPSBkYXRhLnJlcGxhY2UoLywkLywgJycpICsgJ30nO1xuICAvLyB2LWJpbmQgZGF0YSB3cmFwXG4gIGlmIChlbC53cmFwRGF0YSkge1xuICAgIGRhdGEgPSBlbC53cmFwRGF0YShkYXRhKTtcbiAgfVxuICAvLyB2LW9uIGRhdGEgd3JhcFxuICBpZiAoZWwud3JhcExpc3RlbmVycykge1xuICAgIGRhdGEgPSBlbC53cmFwTGlzdGVuZXJzKGRhdGEpO1xuICB9XG4gIHJldHVybiBkYXRhXG59XG5cbmZ1bmN0aW9uIGdlbkRpcmVjdGl2ZXMgKGVsLCBzdGF0ZSkge1xuICB2YXIgZGlycyA9IGVsLmRpcmVjdGl2ZXM7XG4gIGlmICghZGlycykgeyByZXR1cm4gfVxuICB2YXIgcmVzID0gJ2RpcmVjdGl2ZXM6Wyc7XG4gIHZhciBoYXNSdW50aW1lID0gZmFsc2U7XG4gIHZhciBpLCBsLCBkaXIsIG5lZWRSdW50aW1lO1xuICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBkaXIgPSBkaXJzW2ldO1xuICAgIG5lZWRSdW50aW1lID0gdHJ1ZTtcbiAgICB2YXIgZ2VuID0gc3RhdGUuZGlyZWN0aXZlc1tkaXIubmFtZV07XG4gICAgaWYgKGdlbikge1xuICAgICAgLy8gY29tcGlsZS10aW1lIGRpcmVjdGl2ZSB0aGF0IG1hbmlwdWxhdGVzIEFTVC5cbiAgICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBpdCBhbHNvIG5lZWRzIGEgcnVudGltZSBjb3VudGVycGFydC5cbiAgICAgIG5lZWRSdW50aW1lID0gISFnZW4oZWwsIGRpciwgc3RhdGUud2Fybik7XG4gICAgfVxuICAgIGlmIChuZWVkUnVudGltZSkge1xuICAgICAgaGFzUnVudGltZSA9IHRydWU7XG4gICAgICByZXMgKz0gXCJ7bmFtZTpcXFwiXCIgKyAoZGlyLm5hbWUpICsgXCJcXFwiLHJhd05hbWU6XFxcIlwiICsgKGRpci5yYXdOYW1lKSArIFwiXFxcIlwiICsgKGRpci52YWx1ZSA/IChcIix2YWx1ZTooXCIgKyAoZGlyLnZhbHVlKSArIFwiKSxleHByZXNzaW9uOlwiICsgKEpTT04uc3RyaW5naWZ5KGRpci52YWx1ZSkpKSA6ICcnKSArIChkaXIuYXJnID8gKFwiLGFyZzpcXFwiXCIgKyAoZGlyLmFyZykgKyBcIlxcXCJcIikgOiAnJykgKyAoZGlyLm1vZGlmaWVycyA/IChcIixtb2RpZmllcnM6XCIgKyAoSlNPTi5zdHJpbmdpZnkoZGlyLm1vZGlmaWVycykpKSA6ICcnKSArIFwifSxcIjtcbiAgICB9XG4gIH1cbiAgaWYgKGhhc1J1bnRpbWUpIHtcbiAgICByZXR1cm4gcmVzLnNsaWNlKDAsIC0xKSArICddJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbklubGluZVRlbXBsYXRlIChlbCwgc3RhdGUpIHtcbiAgdmFyIGFzdCA9IGVsLmNoaWxkcmVuWzBdO1xuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgKFxuICAgIGVsLmNoaWxkcmVuLmxlbmd0aCAhPT0gMSB8fCBhc3QudHlwZSAhPT0gMVxuICApKSB7XG4gICAgc3RhdGUud2FybignSW5saW5lLXRlbXBsYXRlIGNvbXBvbmVudHMgbXVzdCBoYXZlIGV4YWN0bHkgb25lIGNoaWxkIGVsZW1lbnQuJyk7XG4gIH1cbiAgaWYgKGFzdC50eXBlID09PSAxKSB7XG4gICAgdmFyIGlubGluZVJlbmRlckZucyA9IGdlbmVyYXRlKGFzdCwgc3RhdGUub3B0aW9ucyk7XG4gICAgcmV0dXJuIChcImlubGluZVRlbXBsYXRlOntyZW5kZXI6ZnVuY3Rpb24oKXtcIiArIChpbmxpbmVSZW5kZXJGbnMucmVuZGVyKSArIFwifSxzdGF0aWNSZW5kZXJGbnM6W1wiICsgKGlubGluZVJlbmRlckZucy5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uIChjb2RlKSB7IHJldHVybiAoXCJmdW5jdGlvbigpe1wiICsgY29kZSArIFwifVwiKTsgfSkuam9pbignLCcpKSArIFwiXX1cIilcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5TY29wZWRTbG90cyAoXG4gIHNsb3RzLFxuICBzdGF0ZVxuKSB7XG4gIHJldHVybiAoXCJzY29wZWRTbG90czpfdShbXCIgKyAoT2JqZWN0LmtleXMoc2xvdHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gZ2VuU2NvcGVkU2xvdChrZXksIHNsb3RzW2tleV0sIHN0YXRlKVxuICAgIH0pLmpvaW4oJywnKSkgKyBcIl0pXCIpXG59XG5cbmZ1bmN0aW9uIGdlblNjb3BlZFNsb3QgKFxuICBrZXksXG4gIGVsLFxuICBzdGF0ZVxuKSB7XG4gIGlmIChlbC5mb3IgJiYgIWVsLmZvclByb2Nlc3NlZCkge1xuICAgIHJldHVybiBnZW5Gb3JTY29wZWRTbG90KGtleSwgZWwsIHN0YXRlKVxuICB9XG4gIHZhciBmbiA9IFwiZnVuY3Rpb24oXCIgKyAoU3RyaW5nKGVsLnNsb3RTY29wZSkpICsgXCIpe1wiICtcbiAgICBcInJldHVybiBcIiArIChlbC50YWcgPT09ICd0ZW1wbGF0ZSdcbiAgICAgID8gZWwuaWZcbiAgICAgICAgPyAoKGVsLmlmKSArIFwiP1wiICsgKGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSkgfHwgJ3VuZGVmaW5lZCcpICsgXCI6dW5kZWZpbmVkXCIpXG4gICAgICAgIDogZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlKSB8fCAndW5kZWZpbmVkJ1xuICAgICAgOiBnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgXCJ9XCI7XG4gIHJldHVybiAoXCJ7a2V5OlwiICsga2V5ICsgXCIsZm46XCIgKyBmbiArIFwifVwiKVxufVxuXG5mdW5jdGlvbiBnZW5Gb3JTY29wZWRTbG90IChcbiAga2V5LFxuICBlbCxcbiAgc3RhdGVcbikge1xuICB2YXIgZXhwID0gZWwuZm9yO1xuICB2YXIgYWxpYXMgPSBlbC5hbGlhcztcbiAgdmFyIGl0ZXJhdG9yMSA9IGVsLml0ZXJhdG9yMSA/IChcIixcIiArIChlbC5pdGVyYXRvcjEpKSA6ICcnO1xuICB2YXIgaXRlcmF0b3IyID0gZWwuaXRlcmF0b3IyID8gKFwiLFwiICsgKGVsLml0ZXJhdG9yMikpIDogJyc7XG4gIGVsLmZvclByb2Nlc3NlZCA9IHRydWU7IC8vIGF2b2lkIHJlY3Vyc2lvblxuICByZXR1cm4gXCJfbCgoXCIgKyBleHAgKyBcIiksXCIgK1xuICAgIFwiZnVuY3Rpb24oXCIgKyBhbGlhcyArIGl0ZXJhdG9yMSArIGl0ZXJhdG9yMiArIFwiKXtcIiArXG4gICAgICBcInJldHVybiBcIiArIChnZW5TY29wZWRTbG90KGtleSwgZWwsIHN0YXRlKSkgK1xuICAgICd9KSdcbn1cblxuZnVuY3Rpb24gZ2VuQ2hpbGRyZW4gKFxuICBlbCxcbiAgc3RhdGUsXG4gIGNoZWNrU2tpcCxcbiAgYWx0R2VuRWxlbWVudCxcbiAgYWx0R2VuTm9kZVxuKSB7XG4gIHZhciBjaGlsZHJlbiA9IGVsLmNoaWxkcmVuO1xuICBpZiAoY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgdmFyIGVsJDEgPSBjaGlsZHJlblswXTtcbiAgICAvLyBvcHRpbWl6ZSBzaW5nbGUgdi1mb3JcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG4gICAgICBlbCQxLmZvciAmJlxuICAgICAgZWwkMS50YWcgIT09ICd0ZW1wbGF0ZScgJiZcbiAgICAgIGVsJDEudGFnICE9PSAnc2xvdCdcbiAgICApIHtcbiAgICAgIHJldHVybiAoYWx0R2VuRWxlbWVudCB8fCBnZW5FbGVtZW50KShlbCQxLCBzdGF0ZSlcbiAgICB9XG4gICAgdmFyIG5vcm1hbGl6YXRpb25UeXBlID0gY2hlY2tTa2lwXG4gICAgICA/IGdldE5vcm1hbGl6YXRpb25UeXBlKGNoaWxkcmVuLCBzdGF0ZS5tYXliZUNvbXBvbmVudClcbiAgICAgIDogMDtcbiAgICB2YXIgZ2VuID0gYWx0R2VuTm9kZSB8fCBnZW5Ob2RlO1xuICAgIHJldHVybiAoXCJbXCIgKyAoY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBnZW4oYywgc3RhdGUpOyB9KS5qb2luKCcsJykpICsgXCJdXCIgKyAobm9ybWFsaXphdGlvblR5cGUgPyAoXCIsXCIgKyBub3JtYWxpemF0aW9uVHlwZSkgOiAnJykpXG4gIH1cbn1cblxuLy8gZGV0ZXJtaW5lIHRoZSBub3JtYWxpemF0aW9uIG5lZWRlZCBmb3IgdGhlIGNoaWxkcmVuIGFycmF5LlxuLy8gMDogbm8gbm9ybWFsaXphdGlvbiBuZWVkZWRcbi8vIDE6IHNpbXBsZSBub3JtYWxpemF0aW9uIG5lZWRlZCAocG9zc2libGUgMS1sZXZlbCBkZWVwIG5lc3RlZCBhcnJheSlcbi8vIDI6IGZ1bGwgbm9ybWFsaXphdGlvbiBuZWVkZWRcbmZ1bmN0aW9uIGdldE5vcm1hbGl6YXRpb25UeXBlIChcbiAgY2hpbGRyZW4sXG4gIG1heWJlQ29tcG9uZW50XG4pIHtcbiAgdmFyIHJlcyA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZWwgPSBjaGlsZHJlbltpXTtcbiAgICBpZiAoZWwudHlwZSAhPT0gMSkge1xuICAgICAgY29udGludWVcbiAgICB9XG4gICAgaWYgKG5lZWRzTm9ybWFsaXphdGlvbihlbCkgfHxcbiAgICAgICAgKGVsLmlmQ29uZGl0aW9ucyAmJiBlbC5pZkNvbmRpdGlvbnMuc29tZShmdW5jdGlvbiAoYykgeyByZXR1cm4gbmVlZHNOb3JtYWxpemF0aW9uKGMuYmxvY2spOyB9KSkpIHtcbiAgICAgIHJlcyA9IDI7XG4gICAgICBicmVha1xuICAgIH1cbiAgICBpZiAobWF5YmVDb21wb25lbnQoZWwpIHx8XG4gICAgICAgIChlbC5pZkNvbmRpdGlvbnMgJiYgZWwuaWZDb25kaXRpb25zLnNvbWUoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIG1heWJlQ29tcG9uZW50KGMuYmxvY2spOyB9KSkpIHtcbiAgICAgIHJlcyA9IDE7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gbmVlZHNOb3JtYWxpemF0aW9uIChlbCkge1xuICByZXR1cm4gZWwuZm9yICE9PSB1bmRlZmluZWQgfHwgZWwudGFnID09PSAndGVtcGxhdGUnIHx8IGVsLnRhZyA9PT0gJ3Nsb3QnXG59XG5cbmZ1bmN0aW9uIGdlbk5vZGUgKG5vZGUsIHN0YXRlKSB7XG4gIGlmIChub2RlLnR5cGUgPT09IDEpIHtcbiAgICByZXR1cm4gZ2VuRWxlbWVudChub2RlLCBzdGF0ZSlcbiAgfSBpZiAobm9kZS50eXBlID09PSAzICYmIG5vZGUuaXNDb21tZW50KSB7XG4gICAgcmV0dXJuIGdlbkNvbW1lbnQobm9kZSlcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2VuVGV4dChub2RlKVxuICB9XG59XG5cbmZ1bmN0aW9uIGdlblRleHQgKHRleHQpIHtcbiAgcmV0dXJuIChcIl92KFwiICsgKHRleHQudHlwZSA9PT0gMlxuICAgID8gdGV4dC5leHByZXNzaW9uIC8vIG5vIG5lZWQgZm9yICgpIGJlY2F1c2UgYWxyZWFkeSB3cmFwcGVkIGluIF9zKClcbiAgICA6IHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyhKU09OLnN0cmluZ2lmeSh0ZXh0LnRleHQpKSkgKyBcIilcIilcbn1cblxuZnVuY3Rpb24gZ2VuQ29tbWVudCAoY29tbWVudCkge1xuICByZXR1cm4gKFwiX2UoXCIgKyAoSlNPTi5zdHJpbmdpZnkoY29tbWVudC50ZXh0KSkgKyBcIilcIilcbn1cblxuZnVuY3Rpb24gZ2VuU2xvdCAoZWwsIHN0YXRlKSB7XG4gIHZhciBzbG90TmFtZSA9IGVsLnNsb3ROYW1lIHx8ICdcImRlZmF1bHRcIic7XG4gIHZhciBjaGlsZHJlbiA9IGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSk7XG4gIHZhciByZXMgPSBcIl90KFwiICsgc2xvdE5hbWUgKyAoY2hpbGRyZW4gPyAoXCIsXCIgKyBjaGlsZHJlbikgOiAnJyk7XG4gIHZhciBhdHRycyA9IGVsLmF0dHJzICYmIChcIntcIiArIChlbC5hdHRycy5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuICgoY2FtZWxpemUoYS5uYW1lKSkgKyBcIjpcIiArIChhLnZhbHVlKSk7IH0pLmpvaW4oJywnKSkgKyBcIn1cIik7XG4gIHZhciBiaW5kJCQxID0gZWwuYXR0cnNNYXBbJ3YtYmluZCddO1xuICBpZiAoKGF0dHJzIHx8IGJpbmQkJDEpICYmICFjaGlsZHJlbikge1xuICAgIHJlcyArPSBcIixudWxsXCI7XG4gIH1cbiAgaWYgKGF0dHJzKSB7XG4gICAgcmVzICs9IFwiLFwiICsgYXR0cnM7XG4gIH1cbiAgaWYgKGJpbmQkJDEpIHtcbiAgICByZXMgKz0gKGF0dHJzID8gJycgOiAnLG51bGwnKSArIFwiLFwiICsgYmluZCQkMTtcbiAgfVxuICByZXR1cm4gcmVzICsgJyknXG59XG5cbi8vIGNvbXBvbmVudE5hbWUgaXMgZWwuY29tcG9uZW50LCB0YWtlIGl0IGFzIGFyZ3VtZW50IHRvIHNodW4gZmxvdydzIHBlc3NpbWlzdGljIHJlZmluZW1lbnRcbmZ1bmN0aW9uIGdlbkNvbXBvbmVudCAoXG4gIGNvbXBvbmVudE5hbWUsXG4gIGVsLFxuICBzdGF0ZVxuKSB7XG4gIHZhciBjaGlsZHJlbiA9IGVsLmlubGluZVRlbXBsYXRlID8gbnVsbCA6IGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSwgdHJ1ZSk7XG4gIHJldHVybiAoXCJfYyhcIiArIGNvbXBvbmVudE5hbWUgKyBcIixcIiArIChnZW5EYXRhJDIoZWwsIHN0YXRlKSkgKyAoY2hpbGRyZW4gPyAoXCIsXCIgKyBjaGlsZHJlbikgOiAnJykgKyBcIilcIilcbn1cblxuZnVuY3Rpb24gZ2VuUHJvcHMgKHByb3BzKSB7XG4gIHZhciByZXMgPSAnJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwcm9wID0gcHJvcHNbaV07XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAge1xuICAgICAgcmVzICs9IFwiXFxcIlwiICsgKHByb3AubmFtZSkgKyBcIlxcXCI6XCIgKyAodHJhbnNmb3JtU3BlY2lhbE5ld2xpbmVzKHByb3AudmFsdWUpKSArIFwiLFwiO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzLnNsaWNlKDAsIC0xKVxufVxuXG4vLyAjMzg5NSwgIzQyNjhcbmZ1bmN0aW9uIHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyAodGV4dCkge1xuICByZXR1cm4gdGV4dFxuICAgIC5yZXBsYWNlKC9cXHUyMDI4L2csICdcXFxcdTIwMjgnKVxuICAgIC5yZXBsYWNlKC9cXHUyMDI5L2csICdcXFxcdTIwMjknKVxufVxuXG4vKiAgKi9cblxuLy8gdGhlc2Uga2V5d29yZHMgc2hvdWxkIG5vdCBhcHBlYXIgaW5zaWRlIGV4cHJlc3Npb25zLCBidXQgb3BlcmF0b3JzIGxpa2Vcbi8vIHR5cGVvZiwgaW5zdGFuY2VvZiBhbmQgaW4gYXJlIGFsbG93ZWRcbnZhciBwcm9oaWJpdGVkS2V5d29yZFJFID0gbmV3IFJlZ0V4cCgnXFxcXGInICsgKFxuICAnZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCwnICtcbiAgJ3N1cGVyLHRocm93LHdoaWxlLHlpZWxkLGRlbGV0ZSxleHBvcnQsaW1wb3J0LHJldHVybixzd2l0Y2gsZGVmYXVsdCwnICtcbiAgJ2V4dGVuZHMsZmluYWxseSxjb250aW51ZSxkZWJ1Z2dlcixmdW5jdGlvbixhcmd1bWVudHMnXG4pLnNwbGl0KCcsJykuam9pbignXFxcXGJ8XFxcXGInKSArICdcXFxcYicpO1xuXG4vLyB0aGVzZSB1bmFyeSBvcGVyYXRvcnMgc2hvdWxkIG5vdCBiZSB1c2VkIGFzIHByb3BlcnR5L21ldGhvZCBuYW1lc1xudmFyIHVuYXJ5T3BlcmF0b3JzUkUgPSBuZXcgUmVnRXhwKCdcXFxcYicgKyAoXG4gICdkZWxldGUsdHlwZW9mLHZvaWQnXG4pLnNwbGl0KCcsJykuam9pbignXFxcXHMqXFxcXChbXlxcXFwpXSpcXFxcKXxcXFxcYicpICsgJ1xcXFxzKlxcXFwoW15cXFxcKV0qXFxcXCknKTtcblxuLy8gc3RyaXAgc3RyaW5ncyBpbiBleHByZXNzaW9uc1xudmFyIHN0cmlwU3RyaW5nUkUgPSAvJyg/OlteJ1xcXFxdfFxcXFwuKSonfFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxgKD86W15gXFxcXF18XFxcXC4pKlxcJFxce3xcXH0oPzpbXmBcXFxcXXxcXFxcLikqYHxgKD86W15gXFxcXF18XFxcXC4pKmAvZztcblxuLy8gZGV0ZWN0IHByb2JsZW1hdGljIGV4cHJlc3Npb25zIGluIGEgdGVtcGxhdGVcbmZ1bmN0aW9uIGRldGVjdEVycm9ycyAoYXN0KSB7XG4gIHZhciBlcnJvcnMgPSBbXTtcbiAgaWYgKGFzdCkge1xuICAgIGNoZWNrTm9kZShhc3QsIGVycm9ycyk7XG4gIH1cbiAgcmV0dXJuIGVycm9yc1xufVxuXG5mdW5jdGlvbiBjaGVja05vZGUgKG5vZGUsIGVycm9ycykge1xuICBpZiAobm9kZS50eXBlID09PSAxKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiBub2RlLmF0dHJzTWFwKSB7XG4gICAgICBpZiAoZGlyUkUudGVzdChuYW1lKSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBub2RlLmF0dHJzTWFwW25hbWVdO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBpZiAobmFtZSA9PT0gJ3YtZm9yJykge1xuICAgICAgICAgICAgY2hlY2tGb3Iobm9kZSwgKFwidi1mb3I9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCJcIiksIGVycm9ycyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgIGNoZWNrRXZlbnQodmFsdWUsIChuYW1lICsgXCI9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCJcIiksIGVycm9ycyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrRXhwcmVzc2lvbih2YWx1ZSwgKG5hbWUgKyBcIj1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIlwiKSwgZXJyb3JzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjaGVja05vZGUobm9kZS5jaGlsZHJlbltpXSwgZXJyb3JzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAyKSB7XG4gICAgY2hlY2tFeHByZXNzaW9uKG5vZGUuZXhwcmVzc2lvbiwgbm9kZS50ZXh0LCBlcnJvcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrRXZlbnQgKGV4cCwgdGV4dCwgZXJyb3JzKSB7XG4gIHZhciBzdGlwcGVkID0gZXhwLnJlcGxhY2Uoc3RyaXBTdHJpbmdSRSwgJycpO1xuICB2YXIga2V5d29yZE1hdGNoID0gc3RpcHBlZC5tYXRjaCh1bmFyeU9wZXJhdG9yc1JFKTtcbiAgaWYgKGtleXdvcmRNYXRjaCAmJiBzdGlwcGVkLmNoYXJBdChrZXl3b3JkTWF0Y2guaW5kZXggLSAxKSAhPT0gJyQnKSB7XG4gICAgZXJyb3JzLnB1c2goXG4gICAgICBcImF2b2lkIHVzaW5nIEphdmFTY3JpcHQgdW5hcnkgb3BlcmF0b3IgYXMgcHJvcGVydHkgbmFtZTogXCIgK1xuICAgICAgXCJcXFwiXCIgKyAoa2V5d29yZE1hdGNoWzBdKSArIFwiXFxcIiBpbiBleHByZXNzaW9uIFwiICsgKHRleHQudHJpbSgpKVxuICAgICk7XG4gIH1cbiAgY2hlY2tFeHByZXNzaW9uKGV4cCwgdGV4dCwgZXJyb3JzKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tGb3IgKG5vZGUsIHRleHQsIGVycm9ycykge1xuICBjaGVja0V4cHJlc3Npb24obm9kZS5mb3IgfHwgJycsIHRleHQsIGVycm9ycyk7XG4gIGNoZWNrSWRlbnRpZmllcihub2RlLmFsaWFzLCAndi1mb3IgYWxpYXMnLCB0ZXh0LCBlcnJvcnMpO1xuICBjaGVja0lkZW50aWZpZXIobm9kZS5pdGVyYXRvcjEsICd2LWZvciBpdGVyYXRvcicsIHRleHQsIGVycm9ycyk7XG4gIGNoZWNrSWRlbnRpZmllcihub2RlLml0ZXJhdG9yMiwgJ3YtZm9yIGl0ZXJhdG9yJywgdGV4dCwgZXJyb3JzKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tJZGVudGlmaWVyIChcbiAgaWRlbnQsXG4gIHR5cGUsXG4gIHRleHQsXG4gIGVycm9yc1xuKSB7XG4gIGlmICh0eXBlb2YgaWRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgdHJ5IHtcbiAgICAgIG5ldyBGdW5jdGlvbigoXCJ2YXIgXCIgKyBpZGVudCArIFwiPV9cIikpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGVycm9ycy5wdXNoKChcImludmFsaWQgXCIgKyB0eXBlICsgXCIgXFxcIlwiICsgaWRlbnQgKyBcIlxcXCIgaW4gZXhwcmVzc2lvbjogXCIgKyAodGV4dC50cmltKCkpKSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrRXhwcmVzc2lvbiAoZXhwLCB0ZXh0LCBlcnJvcnMpIHtcbiAgdHJ5IHtcbiAgICBuZXcgRnVuY3Rpb24oKFwicmV0dXJuIFwiICsgZXhwKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB2YXIga2V5d29yZE1hdGNoID0gZXhwLnJlcGxhY2Uoc3RyaXBTdHJpbmdSRSwgJycpLm1hdGNoKHByb2hpYml0ZWRLZXl3b3JkUkUpO1xuICAgIGlmIChrZXl3b3JkTWF0Y2gpIHtcbiAgICAgIGVycm9ycy5wdXNoKFxuICAgICAgICBcImF2b2lkIHVzaW5nIEphdmFTY3JpcHQga2V5d29yZCBhcyBwcm9wZXJ0eSBuYW1lOiBcIiArXG4gICAgICAgIFwiXFxcIlwiICsgKGtleXdvcmRNYXRjaFswXSkgKyBcIlxcXCJcXG4gIFJhdyBleHByZXNzaW9uOiBcIiArICh0ZXh0LnRyaW0oKSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVycm9ycy5wdXNoKFxuICAgICAgICBcImludmFsaWQgZXhwcmVzc2lvbjogXCIgKyAoZS5tZXNzYWdlKSArIFwiIGluXFxuXFxuXCIgK1xuICAgICAgICBcIiAgICBcIiArIGV4cCArIFwiXFxuXFxuXCIgK1xuICAgICAgICBcIiAgUmF3IGV4cHJlc3Npb246IFwiICsgKHRleHQudHJpbSgpKSArIFwiXFxuXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBjcmVhdGVGdW5jdGlvbiAoY29kZSwgZXJyb3JzKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihjb2RlKVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBlcnJvcnMucHVzaCh7IGVycjogZXJyLCBjb2RlOiBjb2RlIH0pO1xuICAgIHJldHVybiBub29wXG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29tcGlsZVRvRnVuY3Rpb25GbiAoY29tcGlsZSkge1xuICB2YXIgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIHJldHVybiBmdW5jdGlvbiBjb21waWxlVG9GdW5jdGlvbnMgKFxuICAgIHRlbXBsYXRlLFxuICAgIG9wdGlvbnMsXG4gICAgdm1cbiAgKSB7XG4gICAgb3B0aW9ucyA9IGV4dGVuZCh7fSwgb3B0aW9ucyk7XG4gICAgdmFyIHdhcm4kJDEgPSBvcHRpb25zLndhcm4gfHwgd2FybjtcbiAgICBkZWxldGUgb3B0aW9ucy53YXJuO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAge1xuICAgICAgLy8gZGV0ZWN0IHBvc3NpYmxlIENTUCByZXN0cmljdGlvblxuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gMScpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuICAgICAgICAgIHdhcm4kJDEoXG4gICAgICAgICAgICAnSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgc3RhbmRhbG9uZSBidWlsZCBvZiBWdWUuanMgaW4gYW4gJyArXG4gICAgICAgICAgICAnZW52aXJvbm1lbnQgd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArXG4gICAgICAgICAgICAnVGhlIHRlbXBsYXRlIGNvbXBpbGVyIGNhbm5vdCB3b3JrIGluIHRoaXMgZW52aXJvbm1lbnQuIENvbnNpZGVyICcgK1xuICAgICAgICAgICAgJ3JlbGF4aW5nIHRoZSBwb2xpY3kgdG8gYWxsb3cgdW5zYWZlLWV2YWwgb3IgcHJlLWNvbXBpbGluZyB5b3VyICcgK1xuICAgICAgICAgICAgJ3RlbXBsYXRlcyBpbnRvIHJlbmRlciBmdW5jdGlvbnMuJ1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjaGVjayBjYWNoZVxuICAgIHZhciBrZXkgPSBvcHRpb25zLmRlbGltaXRlcnNcbiAgICAgID8gU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVycykgKyB0ZW1wbGF0ZVxuICAgICAgOiB0ZW1wbGF0ZTtcbiAgICBpZiAoY2FjaGVba2V5XSkge1xuICAgICAgcmV0dXJuIGNhY2hlW2tleV1cbiAgICB9XG5cbiAgICAvLyBjb21waWxlXG4gICAgdmFyIGNvbXBpbGVkID0gY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7XG5cbiAgICAvLyBjaGVjayBjb21waWxhdGlvbiBlcnJvcnMvdGlwc1xuICAgIHtcbiAgICAgIGlmIChjb21waWxlZC5lcnJvcnMgJiYgY29tcGlsZWQuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICB3YXJuJCQxKFxuICAgICAgICAgIFwiRXJyb3IgY29tcGlsaW5nIHRlbXBsYXRlOlxcblxcblwiICsgdGVtcGxhdGUgKyBcIlxcblxcblwiICtcbiAgICAgICAgICBjb21waWxlZC5lcnJvcnMubWFwKGZ1bmN0aW9uIChlKSB7IHJldHVybiAoXCItIFwiICsgZSk7IH0pLmpvaW4oJ1xcbicpICsgJ1xcbicsXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21waWxlZC50aXBzICYmIGNvbXBpbGVkLnRpcHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbXBpbGVkLnRpcHMuZm9yRWFjaChmdW5jdGlvbiAobXNnKSB7IHJldHVybiB0aXAobXNnLCB2bSk7IH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHR1cm4gY29kZSBpbnRvIGZ1bmN0aW9uc1xuICAgIHZhciByZXMgPSB7fTtcbiAgICB2YXIgZm5HZW5FcnJvcnMgPSBbXTtcbiAgICByZXMucmVuZGVyID0gY3JlYXRlRnVuY3Rpb24oY29tcGlsZWQucmVuZGVyLCBmbkdlbkVycm9ycyk7XG4gICAgcmVzLnN0YXRpY1JlbmRlckZucyA9IGNvbXBpbGVkLnN0YXRpY1JlbmRlckZucy5tYXAoZnVuY3Rpb24gKGNvZGUpIHtcbiAgICAgIHJldHVybiBjcmVhdGVGdW5jdGlvbihjb2RlLCBmbkdlbkVycm9ycylcbiAgICB9KTtcblxuICAgIC8vIGNoZWNrIGZ1bmN0aW9uIGdlbmVyYXRpb24gZXJyb3JzLlxuICAgIC8vIHRoaXMgc2hvdWxkIG9ubHkgaGFwcGVuIGlmIHRoZXJlIGlzIGEgYnVnIGluIHRoZSBjb21waWxlciBpdHNlbGYuXG4gICAgLy8gbW9zdGx5IGZvciBjb2RlZ2VuIGRldmVsb3BtZW50IHVzZVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIHtcbiAgICAgIGlmICgoIWNvbXBpbGVkLmVycm9ycyB8fCAhY29tcGlsZWQuZXJyb3JzLmxlbmd0aCkgJiYgZm5HZW5FcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHdhcm4kJDEoXG4gICAgICAgICAgXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcmVuZGVyIGZ1bmN0aW9uOlxcblxcblwiICtcbiAgICAgICAgICBmbkdlbkVycm9ycy5tYXAoZnVuY3Rpb24gKHJlZikge1xuICAgICAgICAgICAgdmFyIGVyciA9IHJlZi5lcnI7XG4gICAgICAgICAgICB2YXIgY29kZSA9IHJlZi5jb2RlO1xuXG4gICAgICAgICAgICByZXR1cm4gKChlcnIudG9TdHJpbmcoKSkgKyBcIiBpblxcblxcblwiICsgY29kZSArIFwiXFxuXCIpO1xuICAgICAgICB9KS5qb2luKCdcXG4nKSxcbiAgICAgICAgICB2bVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAoY2FjaGVba2V5XSA9IHJlcylcbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gY3JlYXRlQ29tcGlsZXJDcmVhdG9yIChiYXNlQ29tcGlsZSkge1xuICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQ29tcGlsZXIgKGJhc2VPcHRpb25zKSB7XG4gICAgZnVuY3Rpb24gY29tcGlsZSAoXG4gICAgICB0ZW1wbGF0ZSxcbiAgICAgIG9wdGlvbnNcbiAgICApIHtcbiAgICAgIHZhciBmaW5hbE9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKGJhc2VPcHRpb25zKTtcbiAgICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICAgIHZhciB0aXBzID0gW107XG4gICAgICBmaW5hbE9wdGlvbnMud2FybiA9IGZ1bmN0aW9uIChtc2csIHRpcCkge1xuICAgICAgICAodGlwID8gdGlwcyA6IGVycm9ycykucHVzaChtc2cpO1xuICAgICAgfTtcblxuICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWVyZ2UgY3VzdG9tIG1vZHVsZXNcbiAgICAgICAgaWYgKG9wdGlvbnMubW9kdWxlcykge1xuICAgICAgICAgIGZpbmFsT3B0aW9ucy5tb2R1bGVzID1cbiAgICAgICAgICAgIChiYXNlT3B0aW9ucy5tb2R1bGVzIHx8IFtdKS5jb25jYXQob3B0aW9ucy5tb2R1bGVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtZXJnZSBjdXN0b20gZGlyZWN0aXZlc1xuICAgICAgICBpZiAob3B0aW9ucy5kaXJlY3RpdmVzKSB7XG4gICAgICAgICAgZmluYWxPcHRpb25zLmRpcmVjdGl2ZXMgPSBleHRlbmQoXG4gICAgICAgICAgICBPYmplY3QuY3JlYXRlKGJhc2VPcHRpb25zLmRpcmVjdGl2ZXMgfHwgbnVsbCksXG4gICAgICAgICAgICBvcHRpb25zLmRpcmVjdGl2ZXNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvcHkgb3RoZXIgb3B0aW9uc1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucykge1xuICAgICAgICAgIGlmIChrZXkgIT09ICdtb2R1bGVzJyAmJiBrZXkgIT09ICdkaXJlY3RpdmVzJykge1xuICAgICAgICAgICAgZmluYWxPcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBjb21waWxlZCA9IGJhc2VDb21waWxlKHRlbXBsYXRlLCBmaW5hbE9wdGlvbnMpO1xuICAgICAge1xuICAgICAgICBlcnJvcnMucHVzaC5hcHBseShlcnJvcnMsIGRldGVjdEVycm9ycyhjb21waWxlZC5hc3QpKTtcbiAgICAgIH1cbiAgICAgIGNvbXBpbGVkLmVycm9ycyA9IGVycm9ycztcbiAgICAgIGNvbXBpbGVkLnRpcHMgPSB0aXBzO1xuICAgICAgcmV0dXJuIGNvbXBpbGVkXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBpbGU6IGNvbXBpbGUsXG4gICAgICBjb21waWxlVG9GdW5jdGlvbnM6IGNyZWF0ZUNvbXBpbGVUb0Z1bmN0aW9uRm4oY29tcGlsZSlcbiAgICB9XG4gIH1cbn1cblxuLyogICovXG5cbi8vIGBjcmVhdGVDb21waWxlckNyZWF0b3JgIGFsbG93cyBjcmVhdGluZyBjb21waWxlcnMgdGhhdCB1c2UgYWx0ZXJuYXRpdmVcbi8vIHBhcnNlci9vcHRpbWl6ZXIvY29kZWdlbiwgZS5nIHRoZSBTU1Igb3B0aW1pemluZyBjb21waWxlci5cbi8vIEhlcmUgd2UganVzdCBleHBvcnQgYSBkZWZhdWx0IGNvbXBpbGVyIHVzaW5nIHRoZSBkZWZhdWx0IHBhcnRzLlxudmFyIGNyZWF0ZUNvbXBpbGVyID0gY3JlYXRlQ29tcGlsZXJDcmVhdG9yKGZ1bmN0aW9uIGJhc2VDb21waWxlIChcbiAgdGVtcGxhdGUsXG4gIG9wdGlvbnNcbikge1xuICB2YXIgYXN0ID0gcGFyc2UodGVtcGxhdGUudHJpbSgpLCBvcHRpb25zKTtcbiAgaWYgKG9wdGlvbnMub3B0aW1pemUgIT09IGZhbHNlKSB7XG4gICAgb3B0aW1pemUoYXN0LCBvcHRpb25zKTtcbiAgfVxuICB2YXIgY29kZSA9IGdlbmVyYXRlKGFzdCwgb3B0aW9ucyk7XG4gIHJldHVybiB7XG4gICAgYXN0OiBhc3QsXG4gICAgcmVuZGVyOiBjb2RlLnJlbmRlcixcbiAgICBzdGF0aWNSZW5kZXJGbnM6IGNvZGUuc3RhdGljUmVuZGVyRm5zXG4gIH1cbn0pO1xuXG4vKiAgKi9cblxudmFyIHJlZiQxID0gY3JlYXRlQ29tcGlsZXIoYmFzZU9wdGlvbnMpO1xudmFyIGNvbXBpbGVUb0Z1bmN0aW9ucyA9IHJlZiQxLmNvbXBpbGVUb0Z1bmN0aW9ucztcblxuLyogICovXG5cbi8vIGNoZWNrIHdoZXRoZXIgY3VycmVudCBicm93c2VyIGVuY29kZXMgYSBjaGFyIGluc2lkZSBhdHRyaWJ1dGUgdmFsdWVzXG52YXIgZGl2O1xuZnVuY3Rpb24gZ2V0U2hvdWxkRGVjb2RlIChocmVmKSB7XG4gIGRpdiA9IGRpdiB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGl2LmlubmVySFRNTCA9IGhyZWYgPyBcIjxhIGhyZWY9XFxcIlxcblxcXCIvPlwiIDogXCI8ZGl2IGE9XFxcIlxcblxcXCIvPlwiO1xuICByZXR1cm4gZGl2LmlubmVySFRNTC5pbmRleE9mKCcmIzEwOycpID4gMFxufVxuXG4vLyAjMzY2MzogSUUgZW5jb2RlcyBuZXdsaW5lcyBpbnNpZGUgYXR0cmlidXRlIHZhbHVlcyB3aGlsZSBvdGhlciBicm93c2VycyBkb24ndFxudmFyIHNob3VsZERlY29kZU5ld2xpbmVzID0gaW5Ccm93c2VyID8gZ2V0U2hvdWxkRGVjb2RlKGZhbHNlKSA6IGZhbHNlO1xuLy8gIzY4Mjg6IGNocm9tZSBlbmNvZGVzIGNvbnRlbnQgaW4gYVtocmVmXVxudmFyIHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiA9IGluQnJvd3NlciA/IGdldFNob3VsZERlY29kZSh0cnVlKSA6IGZhbHNlO1xuXG4vKiAgKi9cblxudmFyIGlkVG9UZW1wbGF0ZSA9IGNhY2hlZChmdW5jdGlvbiAoaWQpIHtcbiAgdmFyIGVsID0gcXVlcnkoaWQpO1xuICByZXR1cm4gZWwgJiYgZWwuaW5uZXJIVE1MXG59KTtcblxudmFyIG1vdW50ID0gVnVlLnByb3RvdHlwZS4kbW91bnQ7XG5WdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChcbiAgZWwsXG4gIGh5ZHJhdGluZ1xuKSB7XG4gIGVsID0gZWwgJiYgcXVlcnkoZWwpO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkgfHwgZWwgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICBcIkRvIG5vdCBtb3VudCBWdWUgdG8gPGh0bWw+IG9yIDxib2R5PiAtIG1vdW50IHRvIG5vcm1hbCBlbGVtZW50cyBpbnN0ZWFkLlwiXG4gICAgKTtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAvLyByZXNvbHZlIHRlbXBsYXRlL2VsIGFuZCBjb252ZXJ0IHRvIHJlbmRlciBmdW5jdGlvblxuICBpZiAoIW9wdGlvbnMucmVuZGVyKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgICAgIHRlbXBsYXRlID0gaWRUb1RlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgIXRlbXBsYXRlKSB7XG4gICAgICAgICAgICB3YXJuKFxuICAgICAgICAgICAgICAoXCJUZW1wbGF0ZSBlbGVtZW50IG5vdCBmb3VuZCBvciBpcyBlbXB0eTogXCIgKyAob3B0aW9ucy50ZW1wbGF0ZSkpLFxuICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHtcbiAgICAgICAgICB3YXJuKCdpbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjonICsgdGVtcGxhdGUsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbCkge1xuICAgICAgdGVtcGxhdGUgPSBnZXRPdXRlckhUTUwoZWwpO1xuICAgIH1cbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7XG4gICAgICAgIG1hcmsoJ2NvbXBpbGUnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlZiA9IGNvbXBpbGVUb0Z1bmN0aW9ucyh0ZW1wbGF0ZSwge1xuICAgICAgICBzaG91bGREZWNvZGVOZXdsaW5lczogc2hvdWxkRGVjb2RlTmV3bGluZXMsXG4gICAgICAgIHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjogc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmLFxuICAgICAgICBkZWxpbWl0ZXJzOiBvcHRpb25zLmRlbGltaXRlcnMsXG4gICAgICAgIGNvbW1lbnRzOiBvcHRpb25zLmNvbW1lbnRzXG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHZhciByZW5kZXIgPSByZWYucmVuZGVyO1xuICAgICAgdmFyIHN0YXRpY1JlbmRlckZucyA9IHJlZi5zdGF0aWNSZW5kZXJGbnM7XG4gICAgICBvcHRpb25zLnJlbmRlciA9IHJlbmRlcjtcbiAgICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gc3RhdGljUmVuZGVyRm5zO1xuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuICAgICAgICBtYXJrKCdjb21waWxlIGVuZCcpO1xuICAgICAgICBtZWFzdXJlKChcInZ1ZSBcIiArICh0aGlzLl9uYW1lKSArIFwiIGNvbXBpbGVcIiksICdjb21waWxlJywgJ2NvbXBpbGUgZW5kJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBtb3VudC5jYWxsKHRoaXMsIGVsLCBoeWRyYXRpbmcpXG59O1xuXG4vKipcbiAqIEdldCBvdXRlckhUTUwgb2YgZWxlbWVudHMsIHRha2luZyBjYXJlXG4gKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cbiAqL1xuZnVuY3Rpb24gZ2V0T3V0ZXJIVE1MIChlbCkge1xuICBpZiAoZWwub3V0ZXJIVE1MKSB7XG4gICAgcmV0dXJuIGVsLm91dGVySFRNTFxuICB9IGVsc2Uge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcbiAgICByZXR1cm4gY29udGFpbmVyLmlubmVySFRNTFxuICB9XG59XG5cblZ1ZS5jb21waWxlID0gY29tcGlsZVRvRnVuY3Rpb25zO1xuXG5yZXR1cm4gVnVlO1xuXG59KSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Z1ZS9kaXN0L3Z1ZS5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG4vLyBPbiBzb21lIGV4b3RpYyBlbnZpcm9ubWVudHMsIGl0J3Mgbm90IGNsZWFyIHdoaWNoIG9iamVjdCBgc2V0aW1tZWlkYXRlYCB3YXNcbi8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG4vLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAgKiB2dWUtcm91dGVyIHYzLjAuMVxuICAqIChjKSAyMDE3IEV2YW4gWW91XG4gICogQGxpY2Vuc2UgTUlUXG4gICovXG4ndXNlIHN0cmljdCc7XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBhc3NlcnQgKGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcigoXCJbdnVlLXJvdXRlcl0gXCIgKyBtZXNzYWdlKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB3YXJuIChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIWNvbmRpdGlvbikge1xuICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLndhcm4oKFwiW3Z1ZS1yb3V0ZXJdIFwiICsgbWVzc2FnZSkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzRXJyb3IgKGVycikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVycikuaW5kZXhPZignRXJyb3InKSA+IC0xXG59XG5cbnZhciBWaWV3ID0ge1xuICBuYW1lOiAncm91dGVyLXZpZXcnLFxuICBmdW5jdGlvbmFsOiB0cnVlLFxuICBwcm9wczoge1xuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdkZWZhdWx0J1xuICAgIH1cbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKF8sIHJlZikge1xuICAgIHZhciBwcm9wcyA9IHJlZi5wcm9wcztcbiAgICB2YXIgY2hpbGRyZW4gPSByZWYuY2hpbGRyZW47XG4gICAgdmFyIHBhcmVudCA9IHJlZi5wYXJlbnQ7XG4gICAgdmFyIGRhdGEgPSByZWYuZGF0YTtcblxuICAgIGRhdGEucm91dGVyVmlldyA9IHRydWU7XG5cbiAgICAvLyBkaXJlY3RseSB1c2UgcGFyZW50IGNvbnRleHQncyBjcmVhdGVFbGVtZW50KCkgZnVuY3Rpb25cbiAgICAvLyBzbyB0aGF0IGNvbXBvbmVudHMgcmVuZGVyZWQgYnkgcm91dGVyLXZpZXcgY2FuIHJlc29sdmUgbmFtZWQgc2xvdHNcbiAgICB2YXIgaCA9IHBhcmVudC4kY3JlYXRlRWxlbWVudDtcbiAgICB2YXIgbmFtZSA9IHByb3BzLm5hbWU7XG4gICAgdmFyIHJvdXRlID0gcGFyZW50LiRyb3V0ZTtcbiAgICB2YXIgY2FjaGUgPSBwYXJlbnQuX3JvdXRlclZpZXdDYWNoZSB8fCAocGFyZW50Ll9yb3V0ZXJWaWV3Q2FjaGUgPSB7fSk7XG5cbiAgICAvLyBkZXRlcm1pbmUgY3VycmVudCB2aWV3IGRlcHRoLCBhbHNvIGNoZWNrIHRvIHNlZSBpZiB0aGUgdHJlZVxuICAgIC8vIGhhcyBiZWVuIHRvZ2dsZWQgaW5hY3RpdmUgYnV0IGtlcHQtYWxpdmUuXG4gICAgdmFyIGRlcHRoID0gMDtcbiAgICB2YXIgaW5hY3RpdmUgPSBmYWxzZTtcbiAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5fcm91dGVyUm9vdCAhPT0gcGFyZW50KSB7XG4gICAgICBpZiAocGFyZW50LiR2bm9kZSAmJiBwYXJlbnQuJHZub2RlLmRhdGEucm91dGVyVmlldykge1xuICAgICAgICBkZXB0aCsrO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmVudC5faW5hY3RpdmUpIHtcbiAgICAgICAgaW5hY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgfVxuICAgIGRhdGEucm91dGVyVmlld0RlcHRoID0gZGVwdGg7XG5cbiAgICAvLyByZW5kZXIgcHJldmlvdXMgdmlldyBpZiB0aGUgdHJlZSBpcyBpbmFjdGl2ZSBhbmQga2VwdC1hbGl2ZVxuICAgIGlmIChpbmFjdGl2ZSkge1xuICAgICAgcmV0dXJuIGgoY2FjaGVbbmFtZV0sIGRhdGEsIGNoaWxkcmVuKVxuICAgIH1cblxuICAgIHZhciBtYXRjaGVkID0gcm91dGUubWF0Y2hlZFtkZXB0aF07XG4gICAgLy8gcmVuZGVyIGVtcHR5IG5vZGUgaWYgbm8gbWF0Y2hlZCByb3V0ZVxuICAgIGlmICghbWF0Y2hlZCkge1xuICAgICAgY2FjaGVbbmFtZV0gPSBudWxsO1xuICAgICAgcmV0dXJuIGgoKVxuICAgIH1cblxuICAgIHZhciBjb21wb25lbnQgPSBjYWNoZVtuYW1lXSA9IG1hdGNoZWQuY29tcG9uZW50c1tuYW1lXTtcblxuICAgIC8vIGF0dGFjaCBpbnN0YW5jZSByZWdpc3RyYXRpb24gaG9va1xuICAgIC8vIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW4gdGhlIGluc3RhbmNlJ3MgaW5qZWN0ZWQgbGlmZWN5Y2xlIGhvb2tzXG4gICAgZGF0YS5yZWdpc3RlclJvdXRlSW5zdGFuY2UgPSBmdW5jdGlvbiAodm0sIHZhbCkge1xuICAgICAgLy8gdmFsIGNvdWxkIGJlIHVuZGVmaW5lZCBmb3IgdW5yZWdpc3RyYXRpb25cbiAgICAgIHZhciBjdXJyZW50ID0gbWF0Y2hlZC5pbnN0YW5jZXNbbmFtZV07XG4gICAgICBpZiAoXG4gICAgICAgICh2YWwgJiYgY3VycmVudCAhPT0gdm0pIHx8XG4gICAgICAgICghdmFsICYmIGN1cnJlbnQgPT09IHZtKVxuICAgICAgKSB7XG4gICAgICAgIG1hdGNoZWQuaW5zdGFuY2VzW25hbWVdID0gdmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFsc28gcmVnaXN0ZXIgaW5zdGFuY2UgaW4gcHJlcGF0Y2ggaG9va1xuICAgIC8vIGluIGNhc2UgdGhlIHNhbWUgY29tcG9uZW50IGluc3RhbmNlIGlzIHJldXNlZCBhY3Jvc3MgZGlmZmVyZW50IHJvdXRlc1xuICAgIDsoZGF0YS5ob29rIHx8IChkYXRhLmhvb2sgPSB7fSkpLnByZXBhdGNoID0gZnVuY3Rpb24gKF8sIHZub2RlKSB7XG4gICAgICBtYXRjaGVkLmluc3RhbmNlc1tuYW1lXSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuICAgIH07XG5cbiAgICAvLyByZXNvbHZlIHByb3BzXG4gICAgdmFyIHByb3BzVG9QYXNzID0gZGF0YS5wcm9wcyA9IHJlc29sdmVQcm9wcyhyb3V0ZSwgbWF0Y2hlZC5wcm9wcyAmJiBtYXRjaGVkLnByb3BzW25hbWVdKTtcbiAgICBpZiAocHJvcHNUb1Bhc3MpIHtcbiAgICAgIC8vIGNsb25lIHRvIHByZXZlbnQgbXV0YXRpb25cbiAgICAgIHByb3BzVG9QYXNzID0gZGF0YS5wcm9wcyA9IGV4dGVuZCh7fSwgcHJvcHNUb1Bhc3MpO1xuICAgICAgLy8gcGFzcyBub24tZGVjbGFyZWQgcHJvcHMgYXMgYXR0cnNcbiAgICAgIHZhciBhdHRycyA9IGRhdGEuYXR0cnMgPSBkYXRhLmF0dHJzIHx8IHt9O1xuICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzVG9QYXNzKSB7XG4gICAgICAgIGlmICghY29tcG9uZW50LnByb3BzIHx8ICEoa2V5IGluIGNvbXBvbmVudC5wcm9wcykpIHtcbiAgICAgICAgICBhdHRyc1trZXldID0gcHJvcHNUb1Bhc3Nba2V5XTtcbiAgICAgICAgICBkZWxldGUgcHJvcHNUb1Bhc3Nba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBoKGNvbXBvbmVudCwgZGF0YSwgY2hpbGRyZW4pXG4gIH1cbn07XG5cbmZ1bmN0aW9uIHJlc29sdmVQcm9wcyAocm91dGUsIGNvbmZpZykge1xuICBzd2l0Y2ggKHR5cGVvZiBjb25maWcpIHtcbiAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgcmV0dXJuXG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHJldHVybiBjb25maWdcbiAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICByZXR1cm4gY29uZmlnKHJvdXRlKVxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIGNvbmZpZyA/IHJvdXRlLnBhcmFtcyA6IHVuZGVmaW5lZFxuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIFwicHJvcHMgaW4gXFxcIlwiICsgKHJvdXRlLnBhdGgpICsgXCJcXFwiIGlzIGEgXCIgKyAodHlwZW9mIGNvbmZpZykgKyBcIiwgXCIgK1xuICAgICAgICAgIFwiZXhwZWN0aW5nIGFuIG9iamVjdCwgZnVuY3Rpb24gb3IgYm9vbGVhbi5cIlxuICAgICAgICApO1xuICAgICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGV4dGVuZCAodG8sIGZyb20pIHtcbiAgZm9yICh2YXIga2V5IGluIGZyb20pIHtcbiAgICB0b1trZXldID0gZnJvbVtrZXldO1xuICB9XG4gIHJldHVybiB0b1xufVxuXG4vKiAgKi9cblxudmFyIGVuY29kZVJlc2VydmVSRSA9IC9bIScoKSpdL2c7XG52YXIgZW5jb2RlUmVzZXJ2ZVJlcGxhY2VyID0gZnVuY3Rpb24gKGMpIHsgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7IH07XG52YXIgY29tbWFSRSA9IC8lMkMvZztcblxuLy8gZml4ZWQgZW5jb2RlVVJJQ29tcG9uZW50IHdoaWNoIGlzIG1vcmUgY29uZm9ybWFudCB0byBSRkMzOTg2OlxuLy8gLSBlc2NhcGVzIFshJygpKl1cbi8vIC0gcHJlc2VydmUgY29tbWFzXG52YXIgZW5jb2RlID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cilcbiAgLnJlcGxhY2UoZW5jb2RlUmVzZXJ2ZVJFLCBlbmNvZGVSZXNlcnZlUmVwbGFjZXIpXG4gIC5yZXBsYWNlKGNvbW1hUkUsICcsJyk7IH07XG5cbnZhciBkZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG5cbmZ1bmN0aW9uIHJlc29sdmVRdWVyeSAoXG4gIHF1ZXJ5LFxuICBleHRyYVF1ZXJ5LFxuICBfcGFyc2VRdWVyeVxuKSB7XG4gIGlmICggZXh0cmFRdWVyeSA9PT0gdm9pZCAwICkgZXh0cmFRdWVyeSA9IHt9O1xuXG4gIHZhciBwYXJzZSA9IF9wYXJzZVF1ZXJ5IHx8IHBhcnNlUXVlcnk7XG4gIHZhciBwYXJzZWRRdWVyeTtcbiAgdHJ5IHtcbiAgICBwYXJzZWRRdWVyeSA9IHBhcnNlKHF1ZXJ5IHx8ICcnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihmYWxzZSwgZS5tZXNzYWdlKTtcbiAgICBwYXJzZWRRdWVyeSA9IHt9O1xuICB9XG4gIGZvciAodmFyIGtleSBpbiBleHRyYVF1ZXJ5KSB7XG4gICAgcGFyc2VkUXVlcnlba2V5XSA9IGV4dHJhUXVlcnlba2V5XTtcbiAgfVxuICByZXR1cm4gcGFyc2VkUXVlcnlcbn1cblxuZnVuY3Rpb24gcGFyc2VRdWVyeSAocXVlcnkpIHtcbiAgdmFyIHJlcyA9IHt9O1xuXG4gIHF1ZXJ5ID0gcXVlcnkudHJpbSgpLnJlcGxhY2UoL14oXFw/fCN8JikvLCAnJyk7XG5cbiAgaWYgKCFxdWVyeSkge1xuICAgIHJldHVybiByZXNcbiAgfVxuXG4gIHF1ZXJ5LnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbiAocGFyYW0pIHtcbiAgICB2YXIgcGFydHMgPSBwYXJhbS5yZXBsYWNlKC9cXCsvZywgJyAnKS5zcGxpdCgnPScpO1xuICAgIHZhciBrZXkgPSBkZWNvZGUocGFydHMuc2hpZnQoKSk7XG4gICAgdmFyIHZhbCA9IHBhcnRzLmxlbmd0aCA+IDBcbiAgICAgID8gZGVjb2RlKHBhcnRzLmpvaW4oJz0nKSlcbiAgICAgIDogbnVsbDtcblxuICAgIGlmIChyZXNba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXNba2V5XSA9IHZhbDtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmVzW2tleV0pKSB7XG4gICAgICByZXNba2V5XS5wdXNoKHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc1trZXldID0gW3Jlc1trZXldLCB2YWxdO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlRdWVyeSAob2JqKSB7XG4gIHZhciByZXMgPSBvYmogPyBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHZhbCA9IG9ialtrZXldO1xuXG4gICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG5cbiAgICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gZW5jb2RlKGtleSlcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICB2YWwuZm9yRWFjaChmdW5jdGlvbiAodmFsMikge1xuICAgICAgICBpZiAodmFsMiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbDIgPT09IG51bGwpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChlbmNvZGUoa2V5KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodmFsMikpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQuam9pbignJicpXG4gICAgfVxuXG4gICAgcmV0dXJuIGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHZhbClcbiAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lmxlbmd0aCA+IDA7IH0pLmpvaW4oJyYnKSA6IG51bGw7XG4gIHJldHVybiByZXMgPyAoXCI/XCIgKyByZXMpIDogJydcbn1cblxuLyogICovXG5cblxudmFyIHRyYWlsaW5nU2xhc2hSRSA9IC9cXC8/JC87XG5cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlIChcbiAgcmVjb3JkLFxuICBsb2NhdGlvbixcbiAgcmVkaXJlY3RlZEZyb20sXG4gIHJvdXRlclxuKSB7XG4gIHZhciBzdHJpbmdpZnlRdWVyeSQkMSA9IHJvdXRlciAmJiByb3V0ZXIub3B0aW9ucy5zdHJpbmdpZnlRdWVyeTtcblxuICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5xdWVyeSB8fCB7fTtcbiAgdHJ5IHtcbiAgICBxdWVyeSA9IGNsb25lKHF1ZXJ5KTtcbiAgfSBjYXRjaCAoZSkge31cblxuICB2YXIgcm91dGUgPSB7XG4gICAgbmFtZTogbG9jYXRpb24ubmFtZSB8fCAocmVjb3JkICYmIHJlY29yZC5uYW1lKSxcbiAgICBtZXRhOiAocmVjb3JkICYmIHJlY29yZC5tZXRhKSB8fCB7fSxcbiAgICBwYXRoOiBsb2NhdGlvbi5wYXRoIHx8ICcvJyxcbiAgICBoYXNoOiBsb2NhdGlvbi5oYXNoIHx8ICcnLFxuICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICBwYXJhbXM6IGxvY2F0aW9uLnBhcmFtcyB8fCB7fSxcbiAgICBmdWxsUGF0aDogZ2V0RnVsbFBhdGgobG9jYXRpb24sIHN0cmluZ2lmeVF1ZXJ5JCQxKSxcbiAgICBtYXRjaGVkOiByZWNvcmQgPyBmb3JtYXRNYXRjaChyZWNvcmQpIDogW11cbiAgfTtcbiAgaWYgKHJlZGlyZWN0ZWRGcm9tKSB7XG4gICAgcm91dGUucmVkaXJlY3RlZEZyb20gPSBnZXRGdWxsUGF0aChyZWRpcmVjdGVkRnJvbSwgc3RyaW5naWZ5UXVlcnkkJDEpO1xuICB9XG4gIHJldHVybiBPYmplY3QuZnJlZXplKHJvdXRlKVxufVxuXG5mdW5jdGlvbiBjbG9uZSAodmFsdWUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcChjbG9uZSlcbiAgfSBlbHNlIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIHJlcyA9IHt9O1xuICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgcmVzW2tleV0gPSBjbG9uZSh2YWx1ZVtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZVxuICB9XG59XG5cbi8vIHRoZSBzdGFydGluZyByb3V0ZSB0aGF0IHJlcHJlc2VudHMgdGhlIGluaXRpYWwgc3RhdGVcbnZhciBTVEFSVCA9IGNyZWF0ZVJvdXRlKG51bGwsIHtcbiAgcGF0aDogJy8nXG59KTtcblxuZnVuY3Rpb24gZm9ybWF0TWF0Y2ggKHJlY29yZCkge1xuICB2YXIgcmVzID0gW107XG4gIHdoaWxlIChyZWNvcmQpIHtcbiAgICByZXMudW5zaGlmdChyZWNvcmQpO1xuICAgIHJlY29yZCA9IHJlY29yZC5wYXJlbnQ7XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBnZXRGdWxsUGF0aCAoXG4gIHJlZixcbiAgX3N0cmluZ2lmeVF1ZXJ5XG4pIHtcbiAgdmFyIHBhdGggPSByZWYucGF0aDtcbiAgdmFyIHF1ZXJ5ID0gcmVmLnF1ZXJ5OyBpZiAoIHF1ZXJ5ID09PSB2b2lkIDAgKSBxdWVyeSA9IHt9O1xuICB2YXIgaGFzaCA9IHJlZi5oYXNoOyBpZiAoIGhhc2ggPT09IHZvaWQgMCApIGhhc2ggPSAnJztcblxuICB2YXIgc3RyaW5naWZ5ID0gX3N0cmluZ2lmeVF1ZXJ5IHx8IHN0cmluZ2lmeVF1ZXJ5O1xuICByZXR1cm4gKHBhdGggfHwgJy8nKSArIHN0cmluZ2lmeShxdWVyeSkgKyBoYXNoXG59XG5cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlIChhLCBiKSB7XG4gIGlmIChiID09PSBTVEFSVCkge1xuICAgIHJldHVybiBhID09PSBiXG4gIH0gZWxzZSBpZiAoIWIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIGlmIChhLnBhdGggJiYgYi5wYXRoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGEucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJycpID09PSBiLnBhdGgucmVwbGFjZSh0cmFpbGluZ1NsYXNoUkUsICcnKSAmJlxuICAgICAgYS5oYXNoID09PSBiLmhhc2ggJiZcbiAgICAgIGlzT2JqZWN0RXF1YWwoYS5xdWVyeSwgYi5xdWVyeSlcbiAgICApXG4gIH0gZWxzZSBpZiAoYS5uYW1lICYmIGIubmFtZSkge1xuICAgIHJldHVybiAoXG4gICAgICBhLm5hbWUgPT09IGIubmFtZSAmJlxuICAgICAgYS5oYXNoID09PSBiLmhhc2ggJiZcbiAgICAgIGlzT2JqZWN0RXF1YWwoYS5xdWVyeSwgYi5xdWVyeSkgJiZcbiAgICAgIGlzT2JqZWN0RXF1YWwoYS5wYXJhbXMsIGIucGFyYW1zKVxuICAgIClcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBpc09iamVjdEVxdWFsIChhLCBiKSB7XG4gIGlmICggYSA9PT0gdm9pZCAwICkgYSA9IHt9O1xuICBpZiAoIGIgPT09IHZvaWQgMCApIGIgPSB7fTtcblxuICAvLyBoYW5kbGUgbnVsbCB2YWx1ZSAjMTU2NlxuICBpZiAoIWEgfHwgIWIpIHsgcmV0dXJuIGEgPT09IGIgfVxuICB2YXIgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgdmFyIGJLZXlzID0gT2JqZWN0LmtleXMoYik7XG4gIGlmIChhS2V5cy5sZW5ndGggIT09IGJLZXlzLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIHJldHVybiBhS2V5cy5ldmVyeShmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGFWYWwgPSBhW2tleV07XG4gICAgdmFyIGJWYWwgPSBiW2tleV07XG4gICAgLy8gY2hlY2sgbmVzdGVkIGVxdWFsaXR5XG4gICAgaWYgKHR5cGVvZiBhVmFsID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgYlZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBpc09iamVjdEVxdWFsKGFWYWwsIGJWYWwpXG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcoYVZhbCkgPT09IFN0cmluZyhiVmFsKVxuICB9KVxufVxuXG5mdW5jdGlvbiBpc0luY2x1ZGVkUm91dGUgKGN1cnJlbnQsIHRhcmdldCkge1xuICByZXR1cm4gKFxuICAgIGN1cnJlbnQucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJy8nKS5pbmRleE9mKFxuICAgICAgdGFyZ2V0LnBhdGgucmVwbGFjZSh0cmFpbGluZ1NsYXNoUkUsICcvJylcbiAgICApID09PSAwICYmXG4gICAgKCF0YXJnZXQuaGFzaCB8fCBjdXJyZW50Lmhhc2ggPT09IHRhcmdldC5oYXNoKSAmJlxuICAgIHF1ZXJ5SW5jbHVkZXMoY3VycmVudC5xdWVyeSwgdGFyZ2V0LnF1ZXJ5KVxuICApXG59XG5cbmZ1bmN0aW9uIHF1ZXJ5SW5jbHVkZXMgKGN1cnJlbnQsIHRhcmdldCkge1xuICBmb3IgKHZhciBrZXkgaW4gdGFyZ2V0KSB7XG4gICAgaWYgKCEoa2V5IGluIGN1cnJlbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuLyogICovXG5cbi8vIHdvcmsgYXJvdW5kIHdlaXJkIGZsb3cgYnVnXG52YXIgdG9UeXBlcyA9IFtTdHJpbmcsIE9iamVjdF07XG52YXIgZXZlbnRUeXBlcyA9IFtTdHJpbmcsIEFycmF5XTtcblxudmFyIExpbmsgPSB7XG4gIG5hbWU6ICdyb3V0ZXItbGluaycsXG4gIHByb3BzOiB7XG4gICAgdG86IHtcbiAgICAgIHR5cGU6IHRvVHlwZXMsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgdGFnOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnYSdcbiAgICB9LFxuICAgIGV4YWN0OiBCb29sZWFuLFxuICAgIGFwcGVuZDogQm9vbGVhbixcbiAgICByZXBsYWNlOiBCb29sZWFuLFxuICAgIGFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgZXhhY3RBY3RpdmVDbGFzczogU3RyaW5nLFxuICAgIGV2ZW50OiB7XG4gICAgICB0eXBlOiBldmVudFR5cGVzLFxuICAgICAgZGVmYXVsdDogJ2NsaWNrJ1xuICAgIH1cbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKGgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciByb3V0ZXIgPSB0aGlzLiRyb3V0ZXI7XG4gICAgdmFyIGN1cnJlbnQgPSB0aGlzLiRyb3V0ZTtcbiAgICB2YXIgcmVmID0gcm91dGVyLnJlc29sdmUodGhpcy50bywgY3VycmVudCwgdGhpcy5hcHBlbmQpO1xuICAgIHZhciBsb2NhdGlvbiA9IHJlZi5sb2NhdGlvbjtcbiAgICB2YXIgcm91dGUgPSByZWYucm91dGU7XG4gICAgdmFyIGhyZWYgPSByZWYuaHJlZjtcblxuICAgIHZhciBjbGFzc2VzID0ge307XG4gICAgdmFyIGdsb2JhbEFjdGl2ZUNsYXNzID0gcm91dGVyLm9wdGlvbnMubGlua0FjdGl2ZUNsYXNzO1xuICAgIHZhciBnbG9iYWxFeGFjdEFjdGl2ZUNsYXNzID0gcm91dGVyLm9wdGlvbnMubGlua0V4YWN0QWN0aXZlQ2xhc3M7XG4gICAgLy8gU3VwcG9ydCBnbG9iYWwgZW1wdHkgYWN0aXZlIGNsYXNzXG4gICAgdmFyIGFjdGl2ZUNsYXNzRmFsbGJhY2sgPSBnbG9iYWxBY3RpdmVDbGFzcyA9PSBudWxsXG4gICAgICAgICAgICA/ICdyb3V0ZXItbGluay1hY3RpdmUnXG4gICAgICAgICAgICA6IGdsb2JhbEFjdGl2ZUNsYXNzO1xuICAgIHZhciBleGFjdEFjdGl2ZUNsYXNzRmFsbGJhY2sgPSBnbG9iYWxFeGFjdEFjdGl2ZUNsYXNzID09IG51bGxcbiAgICAgICAgICAgID8gJ3JvdXRlci1saW5rLWV4YWN0LWFjdGl2ZSdcbiAgICAgICAgICAgIDogZ2xvYmFsRXhhY3RBY3RpdmVDbGFzcztcbiAgICB2YXIgYWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzID09IG51bGxcbiAgICAgICAgICAgID8gYWN0aXZlQ2xhc3NGYWxsYmFja1xuICAgICAgICAgICAgOiB0aGlzLmFjdGl2ZUNsYXNzO1xuICAgIHZhciBleGFjdEFjdGl2ZUNsYXNzID0gdGhpcy5leGFjdEFjdGl2ZUNsYXNzID09IG51bGxcbiAgICAgICAgICAgID8gZXhhY3RBY3RpdmVDbGFzc0ZhbGxiYWNrXG4gICAgICAgICAgICA6IHRoaXMuZXhhY3RBY3RpdmVDbGFzcztcbiAgICB2YXIgY29tcGFyZVRhcmdldCA9IGxvY2F0aW9uLnBhdGhcbiAgICAgID8gY3JlYXRlUm91dGUobnVsbCwgbG9jYXRpb24sIG51bGwsIHJvdXRlcilcbiAgICAgIDogcm91dGU7XG5cbiAgICBjbGFzc2VzW2V4YWN0QWN0aXZlQ2xhc3NdID0gaXNTYW1lUm91dGUoY3VycmVudCwgY29tcGFyZVRhcmdldCk7XG4gICAgY2xhc3Nlc1thY3RpdmVDbGFzc10gPSB0aGlzLmV4YWN0XG4gICAgICA/IGNsYXNzZXNbZXhhY3RBY3RpdmVDbGFzc11cbiAgICAgIDogaXNJbmNsdWRlZFJvdXRlKGN1cnJlbnQsIGNvbXBhcmVUYXJnZXQpO1xuXG4gICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGd1YXJkRXZlbnQoZSkpIHtcbiAgICAgICAgaWYgKHRoaXMkMS5yZXBsYWNlKSB7XG4gICAgICAgICAgcm91dGVyLnJlcGxhY2UobG9jYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvdXRlci5wdXNoKGxvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgb24gPSB7IGNsaWNrOiBndWFyZEV2ZW50IH07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5ldmVudCkpIHtcbiAgICAgIHRoaXMuZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBvbltlXSA9IGhhbmRsZXI7IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvblt0aGlzLmV2ZW50XSA9IGhhbmRsZXI7XG4gICAgfVxuXG4gICAgdmFyIGRhdGEgPSB7XG4gICAgICBjbGFzczogY2xhc3Nlc1xuICAgIH07XG5cbiAgICBpZiAodGhpcy50YWcgPT09ICdhJykge1xuICAgICAgZGF0YS5vbiA9IG9uO1xuICAgICAgZGF0YS5hdHRycyA9IHsgaHJlZjogaHJlZiB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBmaW5kIHRoZSBmaXJzdCA8YT4gY2hpbGQgYW5kIGFwcGx5IGxpc3RlbmVyIGFuZCBocmVmXG4gICAgICB2YXIgYSA9IGZpbmRBbmNob3IodGhpcy4kc2xvdHMuZGVmYXVsdCk7XG4gICAgICBpZiAoYSkge1xuICAgICAgICAvLyBpbiBjYXNlIHRoZSA8YT4gaXMgYSBzdGF0aWMgbm9kZVxuICAgICAgICBhLmlzU3RhdGljID0gZmFsc2U7XG4gICAgICAgIHZhciBleHRlbmQgPSBfVnVlLnV0aWwuZXh0ZW5kO1xuICAgICAgICB2YXIgYURhdGEgPSBhLmRhdGEgPSBleHRlbmQoe30sIGEuZGF0YSk7XG4gICAgICAgIGFEYXRhLm9uID0gb247XG4gICAgICAgIHZhciBhQXR0cnMgPSBhLmRhdGEuYXR0cnMgPSBleHRlbmQoe30sIGEuZGF0YS5hdHRycyk7XG4gICAgICAgIGFBdHRycy5ocmVmID0gaHJlZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRvZXNuJ3QgaGF2ZSA8YT4gY2hpbGQsIGFwcGx5IGxpc3RlbmVyIHRvIHNlbGZcbiAgICAgICAgZGF0YS5vbiA9IG9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBoKHRoaXMudGFnLCBkYXRhLCB0aGlzLiRzbG90cy5kZWZhdWx0KVxuICB9XG59O1xuXG5mdW5jdGlvbiBndWFyZEV2ZW50IChlKSB7XG4gIC8vIGRvbid0IHJlZGlyZWN0IHdpdGggY29udHJvbCBrZXlzXG4gIGlmIChlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHsgcmV0dXJuIH1cbiAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcbiAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgeyByZXR1cm4gfVxuICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuICBpZiAoZS5idXR0b24gIT09IHVuZGVmaW5lZCAmJiBlLmJ1dHRvbiAhPT0gMCkgeyByZXR1cm4gfVxuICAvLyBkb24ndCByZWRpcmVjdCBpZiBgdGFyZ2V0PVwiX2JsYW5rXCJgXG4gIGlmIChlLmN1cnJlbnRUYXJnZXQgJiYgZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSkge1xuICAgIHZhciB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKTtcbiAgICBpZiAoL1xcYl9ibGFua1xcYi9pLnRlc3QodGFyZ2V0KSkgeyByZXR1cm4gfVxuICB9XG4gIC8vIHRoaXMgbWF5IGJlIGEgV2VleCBldmVudCB3aGljaCBkb2Vzbid0IGhhdmUgdGhpcyBtZXRob2RcbiAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gZmluZEFuY2hvciAoY2hpbGRyZW4pIHtcbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgdmFyIGNoaWxkO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICBpZiAoY2hpbGQudGFnID09PSAnYScpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkXG4gICAgICB9XG4gICAgICBpZiAoY2hpbGQuY2hpbGRyZW4gJiYgKGNoaWxkID0gZmluZEFuY2hvcihjaGlsZC5jaGlsZHJlbikpKSB7XG4gICAgICAgIHJldHVybiBjaGlsZFxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG52YXIgX1Z1ZTtcblxuZnVuY3Rpb24gaW5zdGFsbCAoVnVlKSB7XG4gIGlmIChpbnN0YWxsLmluc3RhbGxlZCAmJiBfVnVlID09PSBWdWUpIHsgcmV0dXJuIH1cbiAgaW5zdGFsbC5pbnN0YWxsZWQgPSB0cnVlO1xuXG4gIF9WdWUgPSBWdWU7XG5cbiAgdmFyIGlzRGVmID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgIT09IHVuZGVmaW5lZDsgfTtcblxuICB2YXIgcmVnaXN0ZXJJbnN0YW5jZSA9IGZ1bmN0aW9uICh2bSwgY2FsbFZhbCkge1xuICAgIHZhciBpID0gdm0uJG9wdGlvbnMuX3BhcmVudFZub2RlO1xuICAgIGlmIChpc0RlZihpKSAmJiBpc0RlZihpID0gaS5kYXRhKSAmJiBpc0RlZihpID0gaS5yZWdpc3RlclJvdXRlSW5zdGFuY2UpKSB7XG4gICAgICBpKHZtLCBjYWxsVmFsKTtcbiAgICB9XG4gIH07XG5cbiAgVnVlLm1peGluKHtcbiAgICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSAoKSB7XG4gICAgICBpZiAoaXNEZWYodGhpcy4kb3B0aW9ucy5yb3V0ZXIpKSB7XG4gICAgICAgIHRoaXMuX3JvdXRlclJvb3QgPSB0aGlzO1xuICAgICAgICB0aGlzLl9yb3V0ZXIgPSB0aGlzLiRvcHRpb25zLnJvdXRlcjtcbiAgICAgICAgdGhpcy5fcm91dGVyLmluaXQodGhpcyk7XG4gICAgICAgIFZ1ZS51dGlsLmRlZmluZVJlYWN0aXZlKHRoaXMsICdfcm91dGUnLCB0aGlzLl9yb3V0ZXIuaGlzdG9yeS5jdXJyZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3JvdXRlclJvb3QgPSAodGhpcy4kcGFyZW50ICYmIHRoaXMuJHBhcmVudC5fcm91dGVyUm9vdCkgfHwgdGhpcztcbiAgICAgIH1cbiAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgdGhpcyk7XG4gICAgfSxcbiAgICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCAoKSB7XG4gICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMpO1xuICAgIH1cbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckcm91dGVyJywge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0ICgpIHsgcmV0dXJuIHRoaXMuX3JvdXRlclJvb3QuX3JvdXRlciB9XG4gIH0pO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJHJvdXRlJywge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0ICgpIHsgcmV0dXJuIHRoaXMuX3JvdXRlclJvb3QuX3JvdXRlIH1cbiAgfSk7XG5cbiAgVnVlLmNvbXBvbmVudCgncm91dGVyLXZpZXcnLCBWaWV3KTtcbiAgVnVlLmNvbXBvbmVudCgncm91dGVyLWxpbmsnLCBMaW5rKTtcblxuICB2YXIgc3RyYXRzID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG4gIC8vIHVzZSB0aGUgc2FtZSBob29rIG1lcmdpbmcgc3RyYXRlZ3kgZm9yIHJvdXRlIGhvb2tzXG4gIHN0cmF0cy5iZWZvcmVSb3V0ZUVudGVyID0gc3RyYXRzLmJlZm9yZVJvdXRlTGVhdmUgPSBzdHJhdHMuYmVmb3JlUm91dGVVcGRhdGUgPSBzdHJhdHMuY3JlYXRlZDtcbn1cblxuLyogICovXG5cbnZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcblxuLyogICovXG5cbmZ1bmN0aW9uIHJlc29sdmVQYXRoIChcbiAgcmVsYXRpdmUsXG4gIGJhc2UsXG4gIGFwcGVuZFxuKSB7XG4gIHZhciBmaXJzdENoYXIgPSByZWxhdGl2ZS5jaGFyQXQoMCk7XG4gIGlmIChmaXJzdENoYXIgPT09ICcvJykge1xuICAgIHJldHVybiByZWxhdGl2ZVxuICB9XG5cbiAgaWYgKGZpcnN0Q2hhciA9PT0gJz8nIHx8IGZpcnN0Q2hhciA9PT0gJyMnKSB7XG4gICAgcmV0dXJuIGJhc2UgKyByZWxhdGl2ZVxuICB9XG5cbiAgdmFyIHN0YWNrID0gYmFzZS5zcGxpdCgnLycpO1xuXG4gIC8vIHJlbW92ZSB0cmFpbGluZyBzZWdtZW50IGlmOlxuICAvLyAtIG5vdCBhcHBlbmRpbmdcbiAgLy8gLSBhcHBlbmRpbmcgdG8gdHJhaWxpbmcgc2xhc2ggKGxhc3Qgc2VnbWVudCBpcyBlbXB0eSlcbiAgaWYgKCFhcHBlbmQgfHwgIXN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdKSB7XG4gICAgc3RhY2sucG9wKCk7XG4gIH1cblxuICAvLyByZXNvbHZlIHJlbGF0aXZlIHBhdGhcbiAgdmFyIHNlZ21lbnRzID0gcmVsYXRpdmUucmVwbGFjZSgvXlxcLy8sICcnKS5zcGxpdCgnLycpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcbiAgICBpZiAoc2VnbWVudCA9PT0gJy4uJykge1xuICAgICAgc3RhY2sucG9wKCk7XG4gICAgfSBlbHNlIGlmIChzZWdtZW50ICE9PSAnLicpIHtcbiAgICAgIHN0YWNrLnB1c2goc2VnbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8gZW5zdXJlIGxlYWRpbmcgc2xhc2hcbiAgaWYgKHN0YWNrWzBdICE9PSAnJykge1xuICAgIHN0YWNrLnVuc2hpZnQoJycpO1xuICB9XG5cbiAgcmV0dXJuIHN0YWNrLmpvaW4oJy8nKVxufVxuXG5mdW5jdGlvbiBwYXJzZVBhdGggKHBhdGgpIHtcbiAgdmFyIGhhc2ggPSAnJztcbiAgdmFyIHF1ZXJ5ID0gJyc7XG5cbiAgdmFyIGhhc2hJbmRleCA9IHBhdGguaW5kZXhPZignIycpO1xuICBpZiAoaGFzaEluZGV4ID49IDApIHtcbiAgICBoYXNoID0gcGF0aC5zbGljZShoYXNoSW5kZXgpO1xuICAgIHBhdGggPSBwYXRoLnNsaWNlKDAsIGhhc2hJbmRleCk7XG4gIH1cblxuICB2YXIgcXVlcnlJbmRleCA9IHBhdGguaW5kZXhPZignPycpO1xuICBpZiAocXVlcnlJbmRleCA+PSAwKSB7XG4gICAgcXVlcnkgPSBwYXRoLnNsaWNlKHF1ZXJ5SW5kZXggKyAxKTtcbiAgICBwYXRoID0gcGF0aC5zbGljZSgwLCBxdWVyeUluZGV4KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGF0aDogcGF0aCxcbiAgICBxdWVyeTogcXVlcnksXG4gICAgaGFzaDogaGFzaFxuICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFuUGF0aCAocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC9cXC8vZywgJy8nKVxufVxuXG52YXIgaXNhcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbi8qKlxuICogRXhwb3NlIGBwYXRoVG9SZWdleHBgLlxuICovXG52YXIgcGF0aFRvUmVnZXhwXzEgPSBwYXRoVG9SZWdleHA7XG52YXIgcGFyc2VfMSA9IHBhcnNlO1xudmFyIGNvbXBpbGVfMSA9IGNvbXBpbGU7XG52YXIgdG9rZW5zVG9GdW5jdGlvbl8xID0gdG9rZW5zVG9GdW5jdGlvbjtcbnZhciB0b2tlbnNUb1JlZ0V4cF8xID0gdG9rZW5zVG9SZWdFeHA7XG5cbi8qKlxuICogVGhlIG1haW4gcGF0aCBtYXRjaGluZyByZWdleHAgdXRpbGl0eS5cbiAqXG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG52YXIgUEFUSF9SRUdFWFAgPSBuZXcgUmVnRXhwKFtcbiAgLy8gTWF0Y2ggZXNjYXBlZCBjaGFyYWN0ZXJzIHRoYXQgd291bGQgb3RoZXJ3aXNlIGFwcGVhciBpbiBmdXR1cmUgbWF0Y2hlcy5cbiAgLy8gVGhpcyBhbGxvd3MgdGhlIHVzZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IHdvbid0IHRyYW5zZm9ybS5cbiAgJyhcXFxcXFxcXC4pJyxcbiAgLy8gTWF0Y2ggRXhwcmVzcy1zdHlsZSBwYXJhbWV0ZXJzIGFuZCB1bi1uYW1lZCBwYXJhbWV0ZXJzIHdpdGggYSBwcmVmaXhcbiAgLy8gYW5kIG9wdGlvbmFsIHN1ZmZpeGVzLiBNYXRjaGVzIGFwcGVhciBhczpcbiAgLy9cbiAgLy8gXCIvOnRlc3QoXFxcXGQrKT9cIiA9PiBbXCIvXCIsIFwidGVzdFwiLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCBcIj9cIiwgdW5kZWZpbmVkXVxuICAvLyBcIi9yb3V0ZShcXFxcZCspXCIgID0+IFt1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG4gIC8vIFwiLypcIiAgICAgICAgICAgID0+IFtcIi9cIiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIipcIl1cbiAgJyhbXFxcXC8uXSk/KD86KD86XFxcXDooXFxcXHcrKSg/OlxcXFwoKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKCldKSspXFxcXCkpP3xcXFxcKCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpXSkrKVxcXFwpKShbKyo/XSk/fChcXFxcKikpJ1xuXS5qb2luKCd8JyksICdnJyk7XG5cbi8qKlxuICogUGFyc2UgYSBzdHJpbmcgZm9yIHRoZSByYXcgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gIHN0clxuICogQHBhcmFtICB7T2JqZWN0PX0gb3B0aW9uc1xuICogQHJldHVybiB7IUFycmF5fVxuICovXG5mdW5jdGlvbiBwYXJzZSAoc3RyLCBvcHRpb25zKSB7XG4gIHZhciB0b2tlbnMgPSBbXTtcbiAgdmFyIGtleSA9IDA7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBwYXRoID0gJyc7XG4gIHZhciBkZWZhdWx0RGVsaW1pdGVyID0gb3B0aW9ucyAmJiBvcHRpb25zLmRlbGltaXRlciB8fCAnLyc7XG4gIHZhciByZXM7XG5cbiAgd2hpbGUgKChyZXMgPSBQQVRIX1JFR0VYUC5leGVjKHN0cikpICE9IG51bGwpIHtcbiAgICB2YXIgbSA9IHJlc1swXTtcbiAgICB2YXIgZXNjYXBlZCA9IHJlc1sxXTtcbiAgICB2YXIgb2Zmc2V0ID0gcmVzLmluZGV4O1xuICAgIHBhdGggKz0gc3RyLnNsaWNlKGluZGV4LCBvZmZzZXQpO1xuICAgIGluZGV4ID0gb2Zmc2V0ICsgbS5sZW5ndGg7XG5cbiAgICAvLyBJZ25vcmUgYWxyZWFkeSBlc2NhcGVkIHNlcXVlbmNlcy5cbiAgICBpZiAoZXNjYXBlZCkge1xuICAgICAgcGF0aCArPSBlc2NhcGVkWzFdO1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICB2YXIgbmV4dCA9IHN0cltpbmRleF07XG4gICAgdmFyIHByZWZpeCA9IHJlc1syXTtcbiAgICB2YXIgbmFtZSA9IHJlc1szXTtcbiAgICB2YXIgY2FwdHVyZSA9IHJlc1s0XTtcbiAgICB2YXIgZ3JvdXAgPSByZXNbNV07XG4gICAgdmFyIG1vZGlmaWVyID0gcmVzWzZdO1xuICAgIHZhciBhc3RlcmlzayA9IHJlc1s3XTtcblxuICAgIC8vIFB1c2ggdGhlIGN1cnJlbnQgcGF0aCBvbnRvIHRoZSB0b2tlbnMuXG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHBhdGgpO1xuICAgICAgcGF0aCA9ICcnO1xuICAgIH1cblxuICAgIHZhciBwYXJ0aWFsID0gcHJlZml4ICE9IG51bGwgJiYgbmV4dCAhPSBudWxsICYmIG5leHQgIT09IHByZWZpeDtcbiAgICB2YXIgcmVwZWF0ID0gbW9kaWZpZXIgPT09ICcrJyB8fCBtb2RpZmllciA9PT0gJyonO1xuICAgIHZhciBvcHRpb25hbCA9IG1vZGlmaWVyID09PSAnPycgfHwgbW9kaWZpZXIgPT09ICcqJztcbiAgICB2YXIgZGVsaW1pdGVyID0gcmVzWzJdIHx8IGRlZmF1bHREZWxpbWl0ZXI7XG4gICAgdmFyIHBhdHRlcm4gPSBjYXB0dXJlIHx8IGdyb3VwO1xuXG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgbmFtZTogbmFtZSB8fCBrZXkrKyxcbiAgICAgIHByZWZpeDogcHJlZml4IHx8ICcnLFxuICAgICAgZGVsaW1pdGVyOiBkZWxpbWl0ZXIsXG4gICAgICBvcHRpb25hbDogb3B0aW9uYWwsXG4gICAgICByZXBlYXQ6IHJlcGVhdCxcbiAgICAgIHBhcnRpYWw6IHBhcnRpYWwsXG4gICAgICBhc3RlcmlzazogISFhc3RlcmlzayxcbiAgICAgIHBhdHRlcm46IHBhdHRlcm4gPyBlc2NhcGVHcm91cChwYXR0ZXJuKSA6IChhc3RlcmlzayA/ICcuKicgOiAnW14nICsgZXNjYXBlU3RyaW5nKGRlbGltaXRlcikgKyAnXSs/JylcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1hdGNoIGFueSBjaGFyYWN0ZXJzIHN0aWxsIHJlbWFpbmluZy5cbiAgaWYgKGluZGV4IDwgc3RyLmxlbmd0aCkge1xuICAgIHBhdGggKz0gc3RyLnN1YnN0cihpbmRleCk7XG4gIH1cblxuICAvLyBJZiB0aGUgcGF0aCBleGlzdHMsIHB1c2ggaXQgb250byB0aGUgZW5kLlxuICBpZiAocGF0aCkge1xuICAgIHRva2Vucy5wdXNoKHBhdGgpO1xuICB9XG5cbiAgcmV0dXJuIHRva2Vuc1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBzdHJpbmcgdG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbiBmb3IgdGhlIHBhdGguXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgICBzdHJcbiAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgICAgb3B0aW9uc1xuICogQHJldHVybiB7IWZ1bmN0aW9uKE9iamVjdD0sIE9iamVjdD0pfVxuICovXG5mdW5jdGlvbiBjb21waWxlIChzdHIsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRva2Vuc1RvRnVuY3Rpb24ocGFyc2Uoc3RyLCBvcHRpb25zKSlcbn1cblxuLyoqXG4gKiBQcmV0dGllciBlbmNvZGluZyBvZiBVUkkgcGF0aCBzZWdtZW50cy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVSSUNvbXBvbmVudFByZXR0eSAoc3RyKSB7XG4gIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bXFwvPyNdL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICB9KVxufVxuXG4vKipcbiAqIEVuY29kZSB0aGUgYXN0ZXJpc2sgcGFyYW1ldGVyLiBTaW1pbGFyIHRvIGBwcmV0dHlgLCBidXQgYWxsb3dzIHNsYXNoZXMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlbmNvZGVBc3RlcmlzayAoc3RyKSB7XG4gIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICB9KVxufVxuXG4vKipcbiAqIEV4cG9zZSBhIG1ldGhvZCBmb3IgdHJhbnNmb3JtaW5nIHRva2VucyBpbnRvIHRoZSBwYXRoIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiB0b2tlbnNUb0Z1bmN0aW9uICh0b2tlbnMpIHtcbiAgLy8gQ29tcGlsZSBhbGwgdGhlIHRva2VucyBpbnRvIHJlZ2V4cHMuXG4gIHZhciBtYXRjaGVzID0gbmV3IEFycmF5KHRva2Vucy5sZW5ndGgpO1xuXG4gIC8vIENvbXBpbGUgYWxsIHRoZSBwYXR0ZXJucyBiZWZvcmUgY29tcGlsYXRpb24uXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHR5cGVvZiB0b2tlbnNbaV0gPT09ICdvYmplY3QnKSB7XG4gICAgICBtYXRjaGVzW2ldID0gbmV3IFJlZ0V4cCgnXig/OicgKyB0b2tlbnNbaV0ucGF0dGVybiArICcpJCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAob2JqLCBvcHRzKSB7XG4gICAgdmFyIHBhdGggPSAnJztcbiAgICB2YXIgZGF0YSA9IG9iaiB8fCB7fTtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdHMgfHwge307XG4gICAgdmFyIGVuY29kZSA9IG9wdGlvbnMucHJldHR5ID8gZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5IDogZW5jb2RlVVJJQ29tcG9uZW50O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXTtcblxuICAgICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcGF0aCArPSB0b2tlbjtcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICB2YXIgdmFsdWUgPSBkYXRhW3Rva2VuLm5hbWVdO1xuICAgICAgdmFyIHNlZ21lbnQ7XG5cbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIGlmICh0b2tlbi5vcHRpb25hbCkge1xuICAgICAgICAgIC8vIFByZXBlbmQgcGFydGlhbCBzZWdtZW50IHByZWZpeGVzLlxuICAgICAgICAgIGlmICh0b2tlbi5wYXJ0aWFsKSB7XG4gICAgICAgICAgICBwYXRoICs9IHRva2VuLnByZWZpeDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gYmUgZGVmaW5lZCcpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlzYXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGlmICghdG9rZW4ucmVwZWF0KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBub3QgcmVwZWF0LCBidXQgcmVjZWl2ZWQgYCcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnYCcpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG5vdCBiZSBlbXB0eScpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWx1ZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIHNlZ21lbnQgPSBlbmNvZGUodmFsdWVbal0pO1xuXG4gICAgICAgICAgaWYgKCFtYXRjaGVzW2ldLnRlc3Qoc2VnbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGFsbCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG1hdGNoIFwiJyArIHRva2VuLnBhdHRlcm4gKyAnXCIsIGJ1dCByZWNlaXZlZCBgJyArIEpTT04uc3RyaW5naWZ5KHNlZ21lbnQpICsgJ2AnKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhdGggKz0gKGogPT09IDAgPyB0b2tlbi5wcmVmaXggOiB0b2tlbi5kZWxpbWl0ZXIpICsgc2VnbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIHNlZ21lbnQgPSB0b2tlbi5hc3RlcmlzayA/IGVuY29kZUFzdGVyaXNrKHZhbHVlKSA6IGVuY29kZSh2YWx1ZSk7XG5cbiAgICAgIGlmICghbWF0Y2hlc1tpXS50ZXN0KHNlZ21lbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbWF0Y2ggXCInICsgdG9rZW4ucGF0dGVybiArICdcIiwgYnV0IHJlY2VpdmVkIFwiJyArIHNlZ21lbnQgKyAnXCInKVxuICAgICAgfVxuXG4gICAgICBwYXRoICs9IHRva2VuLnByZWZpeCArIHNlZ21lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGhcbiAgfVxufVxuXG4vKipcbiAqIEVzY2FwZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzdHJpbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZXNjYXBlU3RyaW5nIChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4rKj89XiE6JHt9KClbXFxdfFxcL1xcXFxdKS9nLCAnXFxcXCQxJylcbn1cblxuLyoqXG4gKiBFc2NhcGUgdGhlIGNhcHR1cmluZyBncm91cCBieSBlc2NhcGluZyBzcGVjaWFsIGNoYXJhY3RlcnMgYW5kIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBncm91cFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVHcm91cCAoZ3JvdXApIHtcbiAgcmV0dXJuIGdyb3VwLnJlcGxhY2UoLyhbPSE6JFxcLygpXSkvZywgJ1xcXFwkMScpXG59XG5cbi8qKlxuICogQXR0YWNoIHRoZSBrZXlzIGFzIGEgcHJvcGVydHkgb2YgdGhlIHJlZ2V4cC5cbiAqXG4gKiBAcGFyYW0gIHshUmVnRXhwfSByZVxuICogQHBhcmFtICB7QXJyYXl9ICAga2V5c1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gYXR0YWNoS2V5cyAocmUsIGtleXMpIHtcbiAgcmUua2V5cyA9IGtleXM7XG4gIHJldHVybiByZVxufVxuXG4vKipcbiAqIEdldCB0aGUgZmxhZ3MgZm9yIGEgcmVnZXhwIGZyb20gdGhlIG9wdGlvbnMuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGZsYWdzIChvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zLnNlbnNpdGl2ZSA/ICcnIDogJ2knXG59XG5cbi8qKlxuICogUHVsbCBvdXQga2V5cyBmcm9tIGEgcmVnZXhwLlxuICpcbiAqIEBwYXJhbSAgeyFSZWdFeHB9IHBhdGhcbiAqIEBwYXJhbSAgeyFBcnJheX0gIGtleXNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9cbmZ1bmN0aW9uIHJlZ2V4cFRvUmVnZXhwIChwYXRoLCBrZXlzKSB7XG4gIC8vIFVzZSBhIG5lZ2F0aXZlIGxvb2thaGVhZCB0byBtYXRjaCBvbmx5IGNhcHR1cmluZyBncm91cHMuXG4gIHZhciBncm91cHMgPSBwYXRoLnNvdXJjZS5tYXRjaCgvXFwoKD8hXFw/KS9nKTtcblxuICBpZiAoZ3JvdXBzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleXMucHVzaCh7XG4gICAgICAgIG5hbWU6IGksXG4gICAgICAgIHByZWZpeDogbnVsbCxcbiAgICAgICAgZGVsaW1pdGVyOiBudWxsLFxuICAgICAgICBvcHRpb25hbDogZmFsc2UsXG4gICAgICAgIHJlcGVhdDogZmFsc2UsXG4gICAgICAgIHBhcnRpYWw6IGZhbHNlLFxuICAgICAgICBhc3RlcmlzazogZmFsc2UsXG4gICAgICAgIHBhdHRlcm46IG51bGxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKHBhdGgsIGtleXMpXG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGFuIGFycmF5IGludG8gYSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IUFycmF5fSAgcGF0aFxuICogQHBhcmFtICB7QXJyYXl9ICAga2V5c1xuICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gYXJyYXlUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICB2YXIgcGFydHMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICBwYXJ0cy5wdXNoKHBhdGhUb1JlZ2V4cChwYXRoW2ldLCBrZXlzLCBvcHRpb25zKS5zb3VyY2UpO1xuICB9XG5cbiAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoJyg/OicgKyBwYXJ0cy5qb2luKCd8JykgKyAnKScsIGZsYWdzKG9wdGlvbnMpKTtcblxuICByZXR1cm4gYXR0YWNoS2V5cyhyZWdleHAsIGtleXMpXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcGF0aCByZWdleHAgZnJvbSBzdHJpbmcgaW5wdXQuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgcGF0aFxuICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gc3RyaW5nVG9SZWdleHAgKHBhdGgsIGtleXMsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRva2Vuc1RvUmVnRXhwKHBhcnNlKHBhdGgsIG9wdGlvbnMpLCBrZXlzLCBvcHRpb25zKVxufVxuXG4vKipcbiAqIEV4cG9zZSBhIGZ1bmN0aW9uIGZvciB0YWtpbmcgdG9rZW5zIGFuZCByZXR1cm5pbmcgYSBSZWdFeHAuXG4gKlxuICogQHBhcmFtICB7IUFycmF5fSAgICAgICAgICB0b2tlbnNcbiAqIEBwYXJhbSAgeyhBcnJheXxPYmplY3QpPX0ga2V5c1xuICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiB0b2tlbnNUb1JlZ0V4cCAodG9rZW5zLCBrZXlzLCBvcHRpb25zKSB7XG4gIGlmICghaXNhcnJheShrZXlzKSkge1xuICAgIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChrZXlzIHx8IG9wdGlvbnMpO1xuICAgIGtleXMgPSBbXTtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBzdHJpY3QgPSBvcHRpb25zLnN0cmljdDtcbiAgdmFyIGVuZCA9IG9wdGlvbnMuZW5kICE9PSBmYWxzZTtcbiAgdmFyIHJvdXRlID0gJyc7XG5cbiAgLy8gSXRlcmF0ZSBvdmVyIHRoZSB0b2tlbnMgYW5kIGNyZWF0ZSBvdXIgcmVnZXhwIHN0cmluZy5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XG5cbiAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgcm91dGUgKz0gZXNjYXBlU3RyaW5nKHRva2VuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHByZWZpeCA9IGVzY2FwZVN0cmluZyh0b2tlbi5wcmVmaXgpO1xuICAgICAgdmFyIGNhcHR1cmUgPSAnKD86JyArIHRva2VuLnBhdHRlcm4gKyAnKSc7XG5cbiAgICAgIGtleXMucHVzaCh0b2tlbik7XG5cbiAgICAgIGlmICh0b2tlbi5yZXBlYXQpIHtcbiAgICAgICAgY2FwdHVyZSArPSAnKD86JyArIHByZWZpeCArIGNhcHR1cmUgKyAnKSonO1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcbiAgICAgICAgaWYgKCF0b2tlbi5wYXJ0aWFsKSB7XG4gICAgICAgICAgY2FwdHVyZSA9ICcoPzonICsgcHJlZml4ICsgJygnICsgY2FwdHVyZSArICcpKT8nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhcHR1cmUgPSBwcmVmaXggKyAnKCcgKyBjYXB0dXJlICsgJyk/JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FwdHVyZSA9IHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKSc7XG4gICAgICB9XG5cbiAgICAgIHJvdXRlICs9IGNhcHR1cmU7XG4gICAgfVxuICB9XG5cbiAgdmFyIGRlbGltaXRlciA9IGVzY2FwZVN0cmluZyhvcHRpb25zLmRlbGltaXRlciB8fCAnLycpO1xuICB2YXIgZW5kc1dpdGhEZWxpbWl0ZXIgPSByb3V0ZS5zbGljZSgtZGVsaW1pdGVyLmxlbmd0aCkgPT09IGRlbGltaXRlcjtcblxuICAvLyBJbiBub24tc3RyaWN0IG1vZGUgd2UgYWxsb3cgYSBzbGFzaCBhdCB0aGUgZW5kIG9mIG1hdGNoLiBJZiB0aGUgcGF0aCB0b1xuICAvLyBtYXRjaCBhbHJlYWR5IGVuZHMgd2l0aCBhIHNsYXNoLCB3ZSByZW1vdmUgaXQgZm9yIGNvbnNpc3RlbmN5LiBUaGUgc2xhc2hcbiAgLy8gaXMgdmFsaWQgYXQgdGhlIGVuZCBvZiBhIHBhdGggbWF0Y2gsIG5vdCBpbiB0aGUgbWlkZGxlLiBUaGlzIGlzIGltcG9ydGFudFxuICAvLyBpbiBub24tZW5kaW5nIG1vZGUsIHdoZXJlIFwiL3Rlc3QvXCIgc2hvdWxkbid0IG1hdGNoIFwiL3Rlc3QvL3JvdXRlXCIuXG4gIGlmICghc3RyaWN0KSB7XG4gICAgcm91dGUgPSAoZW5kc1dpdGhEZWxpbWl0ZXIgPyByb3V0ZS5zbGljZSgwLCAtZGVsaW1pdGVyLmxlbmd0aCkgOiByb3V0ZSkgKyAnKD86JyArIGRlbGltaXRlciArICcoPz0kKSk/JztcbiAgfVxuXG4gIGlmIChlbmQpIHtcbiAgICByb3V0ZSArPSAnJCc7XG4gIH0gZWxzZSB7XG4gICAgLy8gSW4gbm9uLWVuZGluZyBtb2RlLCB3ZSBuZWVkIHRoZSBjYXB0dXJpbmcgZ3JvdXBzIHRvIG1hdGNoIGFzIG11Y2ggYXNcbiAgICAvLyBwb3NzaWJsZSBieSB1c2luZyBhIHBvc2l0aXZlIGxvb2thaGVhZCB0byB0aGUgZW5kIG9yIG5leHQgcGF0aCBzZWdtZW50LlxuICAgIHJvdXRlICs9IHN0cmljdCAmJiBlbmRzV2l0aERlbGltaXRlciA/ICcnIDogJyg/PScgKyBkZWxpbWl0ZXIgKyAnfCQpJztcbiAgfVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKG5ldyBSZWdFeHAoJ14nICsgcm91dGUsIGZsYWdzKG9wdGlvbnMpKSwga2V5cylcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIGdpdmVuIHBhdGggc3RyaW5nLCByZXR1cm5pbmcgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gKlxuICogQW4gZW1wdHkgYXJyYXkgY2FuIGJlIHBhc3NlZCBpbiBmb3IgdGhlIGtleXMsIHdoaWNoIHdpbGwgaG9sZCB0aGVcbiAqIHBsYWNlaG9sZGVyIGtleSBkZXNjcmlwdGlvbnMuIEZvciBleGFtcGxlLCB1c2luZyBgL3VzZXIvOmlkYCwgYGtleXNgIHdpbGxcbiAqIGNvbnRhaW4gYFt7IG5hbWU6ICdpZCcsIGRlbGltaXRlcjogJy8nLCBvcHRpb25hbDogZmFsc2UsIHJlcGVhdDogZmFsc2UgfV1gLlxuICpcbiAqIEBwYXJhbSAgeyhzdHJpbmd8UmVnRXhwfEFycmF5KX0gcGF0aFxuICogQHBhcmFtICB7KEFycmF5fE9iamVjdCk9fSAgICAgICBrZXlzXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSAgICAgICAgICAgICAgIG9wdGlvbnNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9cbmZ1bmN0aW9uIHBhdGhUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICBpZiAoIWlzYXJyYXkoa2V5cykpIHtcbiAgICBvcHRpb25zID0gLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAoa2V5cyB8fCBvcHRpb25zKTtcbiAgICBrZXlzID0gW107XG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBpZiAocGF0aCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgIHJldHVybiByZWdleHBUb1JlZ2V4cChwYXRoLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpKVxuICB9XG5cbiAgaWYgKGlzYXJyYXkocGF0aCkpIHtcbiAgICByZXR1cm4gYXJyYXlUb1JlZ2V4cCgvKiogQHR5cGUgeyFBcnJheX0gKi8gKHBhdGgpLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpLCBvcHRpb25zKVxuICB9XG5cbiAgcmV0dXJuIHN0cmluZ1RvUmVnZXhwKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocGF0aCksIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cyksIG9wdGlvbnMpXG59XG5cbnBhdGhUb1JlZ2V4cF8xLnBhcnNlID0gcGFyc2VfMTtcbnBhdGhUb1JlZ2V4cF8xLmNvbXBpbGUgPSBjb21waWxlXzE7XG5wYXRoVG9SZWdleHBfMS50b2tlbnNUb0Z1bmN0aW9uID0gdG9rZW5zVG9GdW5jdGlvbl8xO1xucGF0aFRvUmVnZXhwXzEudG9rZW5zVG9SZWdFeHAgPSB0b2tlbnNUb1JlZ0V4cF8xO1xuXG4vKiAgKi9cblxuLy8gJGZsb3ctZGlzYWJsZS1saW5lXG52YXIgcmVnZXhwQ29tcGlsZUNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuZnVuY3Rpb24gZmlsbFBhcmFtcyAoXG4gIHBhdGgsXG4gIHBhcmFtcyxcbiAgcm91dGVNc2dcbikge1xuICB0cnkge1xuICAgIHZhciBmaWxsZXIgPVxuICAgICAgcmVnZXhwQ29tcGlsZUNhY2hlW3BhdGhdIHx8XG4gICAgICAocmVnZXhwQ29tcGlsZUNhY2hlW3BhdGhdID0gcGF0aFRvUmVnZXhwXzEuY29tcGlsZShwYXRoKSk7XG4gICAgcmV0dXJuIGZpbGxlcihwYXJhbXMgfHwge30sIHsgcHJldHR5OiB0cnVlIH0pXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FybihmYWxzZSwgKFwibWlzc2luZyBwYXJhbSBmb3IgXCIgKyByb3V0ZU1zZyArIFwiOiBcIiArIChlLm1lc3NhZ2UpKSk7XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZU1hcCAoXG4gIHJvdXRlcyxcbiAgb2xkUGF0aExpc3QsXG4gIG9sZFBhdGhNYXAsXG4gIG9sZE5hbWVNYXBcbikge1xuICAvLyB0aGUgcGF0aCBsaXN0IGlzIHVzZWQgdG8gY29udHJvbCBwYXRoIG1hdGNoaW5nIHByaW9yaXR5XG4gIHZhciBwYXRoTGlzdCA9IG9sZFBhdGhMaXN0IHx8IFtdO1xuICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgdmFyIHBhdGhNYXAgPSBvbGRQYXRoTWFwIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIC8vICRmbG93LWRpc2FibGUtbGluZVxuICB2YXIgbmFtZU1hcCA9IG9sZE5hbWVNYXAgfHwgT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHtcbiAgICBhZGRSb3V0ZVJlY29yZChwYXRoTGlzdCwgcGF0aE1hcCwgbmFtZU1hcCwgcm91dGUpO1xuICB9KTtcblxuICAvLyBlbnN1cmUgd2lsZGNhcmQgcm91dGVzIGFyZSBhbHdheXMgYXQgdGhlIGVuZFxuICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGhMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChwYXRoTGlzdFtpXSA9PT0gJyonKSB7XG4gICAgICBwYXRoTGlzdC5wdXNoKHBhdGhMaXN0LnNwbGljZShpLCAxKVswXSk7XG4gICAgICBsLS07XG4gICAgICBpLS07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRoTGlzdDogcGF0aExpc3QsXG4gICAgcGF0aE1hcDogcGF0aE1hcCxcbiAgICBuYW1lTWFwOiBuYW1lTWFwXG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkUm91dGVSZWNvcmQgKFxuICBwYXRoTGlzdCxcbiAgcGF0aE1hcCxcbiAgbmFtZU1hcCxcbiAgcm91dGUsXG4gIHBhcmVudCxcbiAgbWF0Y2hBc1xuKSB7XG4gIHZhciBwYXRoID0gcm91dGUucGF0aDtcbiAgdmFyIG5hbWUgPSByb3V0ZS5uYW1lO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydChwYXRoICE9IG51bGwsIFwiXFxcInBhdGhcXFwiIGlzIHJlcXVpcmVkIGluIGEgcm91dGUgY29uZmlndXJhdGlvbi5cIik7XG4gICAgYXNzZXJ0KFxuICAgICAgdHlwZW9mIHJvdXRlLmNvbXBvbmVudCAhPT0gJ3N0cmluZycsXG4gICAgICBcInJvdXRlIGNvbmZpZyBcXFwiY29tcG9uZW50XFxcIiBmb3IgcGF0aDogXCIgKyAoU3RyaW5nKHBhdGggfHwgbmFtZSkpICsgXCIgY2Fubm90IGJlIGEgXCIgK1xuICAgICAgXCJzdHJpbmcgaWQuIFVzZSBhbiBhY3R1YWwgY29tcG9uZW50IGluc3RlYWQuXCJcbiAgICApO1xuICB9XG5cbiAgdmFyIHBhdGhUb1JlZ2V4cE9wdGlvbnMgPSByb3V0ZS5wYXRoVG9SZWdleHBPcHRpb25zIHx8IHt9O1xuICB2YXIgbm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgIHBhdGgsXG4gICAgcGFyZW50LFxuICAgIHBhdGhUb1JlZ2V4cE9wdGlvbnMuc3RyaWN0XG4gICk7XG5cbiAgaWYgKHR5cGVvZiByb3V0ZS5jYXNlU2Vuc2l0aXZlID09PSAnYm9vbGVhbicpIHtcbiAgICBwYXRoVG9SZWdleHBPcHRpb25zLnNlbnNpdGl2ZSA9IHJvdXRlLmNhc2VTZW5zaXRpdmU7XG4gIH1cblxuICB2YXIgcmVjb3JkID0ge1xuICAgIHBhdGg6IG5vcm1hbGl6ZWRQYXRoLFxuICAgIHJlZ2V4OiBjb21waWxlUm91dGVSZWdleChub3JtYWxpemVkUGF0aCwgcGF0aFRvUmVnZXhwT3B0aW9ucyksXG4gICAgY29tcG9uZW50czogcm91dGUuY29tcG9uZW50cyB8fCB7IGRlZmF1bHQ6IHJvdXRlLmNvbXBvbmVudCB9LFxuICAgIGluc3RhbmNlczoge30sXG4gICAgbmFtZTogbmFtZSxcbiAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICBtYXRjaEFzOiBtYXRjaEFzLFxuICAgIHJlZGlyZWN0OiByb3V0ZS5yZWRpcmVjdCxcbiAgICBiZWZvcmVFbnRlcjogcm91dGUuYmVmb3JlRW50ZXIsXG4gICAgbWV0YTogcm91dGUubWV0YSB8fCB7fSxcbiAgICBwcm9wczogcm91dGUucHJvcHMgPT0gbnVsbFxuICAgICAgPyB7fVxuICAgICAgOiByb3V0ZS5jb21wb25lbnRzXG4gICAgICAgID8gcm91dGUucHJvcHNcbiAgICAgICAgOiB7IGRlZmF1bHQ6IHJvdXRlLnByb3BzIH1cbiAgfTtcblxuICBpZiAocm91dGUuY2hpbGRyZW4pIHtcbiAgICAvLyBXYXJuIGlmIHJvdXRlIGlzIG5hbWVkLCBkb2VzIG5vdCByZWRpcmVjdCBhbmQgaGFzIGEgZGVmYXVsdCBjaGlsZCByb3V0ZS5cbiAgICAvLyBJZiB1c2VycyBuYXZpZ2F0ZSB0byB0aGlzIHJvdXRlIGJ5IG5hbWUsIHRoZSBkZWZhdWx0IGNoaWxkIHdpbGxcbiAgICAvLyBub3QgYmUgcmVuZGVyZWQgKEdIIElzc3VlICM2MjkpXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChyb3V0ZS5uYW1lICYmICFyb3V0ZS5yZWRpcmVjdCAmJiByb3V0ZS5jaGlsZHJlbi5zb21lKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gL15cXC8/JC8udGVzdChjaGlsZC5wYXRoKTsgfSkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBcIk5hbWVkIFJvdXRlICdcIiArIChyb3V0ZS5uYW1lKSArIFwiJyBoYXMgYSBkZWZhdWx0IGNoaWxkIHJvdXRlLiBcIiArXG4gICAgICAgICAgXCJXaGVuIG5hdmlnYXRpbmcgdG8gdGhpcyBuYW1lZCByb3V0ZSAoOnRvPVxcXCJ7bmFtZTogJ1wiICsgKHJvdXRlLm5hbWUpICsgXCInXFxcIiksIFwiICtcbiAgICAgICAgICBcInRoZSBkZWZhdWx0IGNoaWxkIHJvdXRlIHdpbGwgbm90IGJlIHJlbmRlcmVkLiBSZW1vdmUgdGhlIG5hbWUgZnJvbSBcIiArXG4gICAgICAgICAgXCJ0aGlzIHJvdXRlIGFuZCB1c2UgdGhlIG5hbWUgb2YgdGhlIGRlZmF1bHQgY2hpbGQgcm91dGUgZm9yIG5hbWVkIFwiICtcbiAgICAgICAgICBcImxpbmtzIGluc3RlYWQuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcm91dGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHZhciBjaGlsZE1hdGNoQXMgPSBtYXRjaEFzXG4gICAgICAgID8gY2xlYW5QYXRoKChtYXRjaEFzICsgXCIvXCIgKyAoY2hpbGQucGF0aCkpKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgIGFkZFJvdXRlUmVjb3JkKHBhdGhMaXN0LCBwYXRoTWFwLCBuYW1lTWFwLCBjaGlsZCwgcmVjb3JkLCBjaGlsZE1hdGNoQXMpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKHJvdXRlLmFsaWFzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgYWxpYXNlcyA9IEFycmF5LmlzQXJyYXkocm91dGUuYWxpYXMpXG4gICAgICA/IHJvdXRlLmFsaWFzXG4gICAgICA6IFtyb3V0ZS5hbGlhc107XG5cbiAgICBhbGlhc2VzLmZvckVhY2goZnVuY3Rpb24gKGFsaWFzKSB7XG4gICAgICB2YXIgYWxpYXNSb3V0ZSA9IHtcbiAgICAgICAgcGF0aDogYWxpYXMsXG4gICAgICAgIGNoaWxkcmVuOiByb3V0ZS5jaGlsZHJlblxuICAgICAgfTtcbiAgICAgIGFkZFJvdXRlUmVjb3JkKFxuICAgICAgICBwYXRoTGlzdCxcbiAgICAgICAgcGF0aE1hcCxcbiAgICAgICAgbmFtZU1hcCxcbiAgICAgICAgYWxpYXNSb3V0ZSxcbiAgICAgICAgcGFyZW50LFxuICAgICAgICByZWNvcmQucGF0aCB8fCAnLycgLy8gbWF0Y2hBc1xuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICghcGF0aE1hcFtyZWNvcmQucGF0aF0pIHtcbiAgICBwYXRoTGlzdC5wdXNoKHJlY29yZC5wYXRoKTtcbiAgICBwYXRoTWFwW3JlY29yZC5wYXRoXSA9IHJlY29yZDtcbiAgfVxuXG4gIGlmIChuYW1lKSB7XG4gICAgaWYgKCFuYW1lTWFwW25hbWVdKSB7XG4gICAgICBuYW1lTWFwW25hbWVdID0gcmVjb3JkO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhbWF0Y2hBcykge1xuICAgICAgd2FybihcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwiRHVwbGljYXRlIG5hbWVkIHJvdXRlcyBkZWZpbml0aW9uOiBcIiArXG4gICAgICAgIFwieyBuYW1lOiBcXFwiXCIgKyBuYW1lICsgXCJcXFwiLCBwYXRoOiBcXFwiXCIgKyAocmVjb3JkLnBhdGgpICsgXCJcXFwiIH1cIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcGlsZVJvdXRlUmVnZXggKHBhdGgsIHBhdGhUb1JlZ2V4cE9wdGlvbnMpIHtcbiAgdmFyIHJlZ2V4ID0gcGF0aFRvUmVnZXhwXzEocGF0aCwgW10sIHBhdGhUb1JlZ2V4cE9wdGlvbnMpO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZWdleC5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgd2Fybigha2V5c1trZXkubmFtZV0sIChcIkR1cGxpY2F0ZSBwYXJhbSBrZXlzIGluIHJvdXRlIHdpdGggcGF0aDogXFxcIlwiICsgcGF0aCArIFwiXFxcIlwiKSk7XG4gICAgICBrZXlzW2tleS5uYW1lXSA9IHRydWU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHJlZ2V4XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVBhdGggKHBhdGgsIHBhcmVudCwgc3RyaWN0KSB7XG4gIGlmICghc3RyaWN0KSB7IHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcLyQvLCAnJyk7IH1cbiAgaWYgKHBhdGhbMF0gPT09ICcvJykgeyByZXR1cm4gcGF0aCB9XG4gIGlmIChwYXJlbnQgPT0gbnVsbCkgeyByZXR1cm4gcGF0aCB9XG4gIHJldHVybiBjbGVhblBhdGgoKChwYXJlbnQucGF0aCkgKyBcIi9cIiArIHBhdGgpKVxufVxuXG4vKiAgKi9cblxuXG5mdW5jdGlvbiBub3JtYWxpemVMb2NhdGlvbiAoXG4gIHJhdyxcbiAgY3VycmVudCxcbiAgYXBwZW5kLFxuICByb3V0ZXJcbikge1xuICB2YXIgbmV4dCA9IHR5cGVvZiByYXcgPT09ICdzdHJpbmcnID8geyBwYXRoOiByYXcgfSA6IHJhdztcbiAgLy8gbmFtZWQgdGFyZ2V0XG4gIGlmIChuZXh0Lm5hbWUgfHwgbmV4dC5fbm9ybWFsaXplZCkge1xuICAgIHJldHVybiBuZXh0XG4gIH1cblxuICAvLyByZWxhdGl2ZSBwYXJhbXNcbiAgaWYgKCFuZXh0LnBhdGggJiYgbmV4dC5wYXJhbXMgJiYgY3VycmVudCkge1xuICAgIG5leHQgPSBhc3NpZ24oe30sIG5leHQpO1xuICAgIG5leHQuX25vcm1hbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBwYXJhbXMgPSBhc3NpZ24oYXNzaWduKHt9LCBjdXJyZW50LnBhcmFtcyksIG5leHQucGFyYW1zKTtcbiAgICBpZiAoY3VycmVudC5uYW1lKSB7XG4gICAgICBuZXh0Lm5hbWUgPSBjdXJyZW50Lm5hbWU7XG4gICAgICBuZXh0LnBhcmFtcyA9IHBhcmFtcztcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnQubWF0Y2hlZC5sZW5ndGgpIHtcbiAgICAgIHZhciByYXdQYXRoID0gY3VycmVudC5tYXRjaGVkW2N1cnJlbnQubWF0Y2hlZC5sZW5ndGggLSAxXS5wYXRoO1xuICAgICAgbmV4dC5wYXRoID0gZmlsbFBhcmFtcyhyYXdQYXRoLCBwYXJhbXMsIChcInBhdGggXCIgKyAoY3VycmVudC5wYXRoKSkpO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FybihmYWxzZSwgXCJyZWxhdGl2ZSBwYXJhbXMgbmF2aWdhdGlvbiByZXF1aXJlcyBhIGN1cnJlbnQgcm91dGUuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dFxuICB9XG5cbiAgdmFyIHBhcnNlZFBhdGggPSBwYXJzZVBhdGgobmV4dC5wYXRoIHx8ICcnKTtcbiAgdmFyIGJhc2VQYXRoID0gKGN1cnJlbnQgJiYgY3VycmVudC5wYXRoKSB8fCAnLyc7XG4gIHZhciBwYXRoID0gcGFyc2VkUGF0aC5wYXRoXG4gICAgPyByZXNvbHZlUGF0aChwYXJzZWRQYXRoLnBhdGgsIGJhc2VQYXRoLCBhcHBlbmQgfHwgbmV4dC5hcHBlbmQpXG4gICAgOiBiYXNlUGF0aDtcblxuICB2YXIgcXVlcnkgPSByZXNvbHZlUXVlcnkoXG4gICAgcGFyc2VkUGF0aC5xdWVyeSxcbiAgICBuZXh0LnF1ZXJ5LFxuICAgIHJvdXRlciAmJiByb3V0ZXIub3B0aW9ucy5wYXJzZVF1ZXJ5XG4gICk7XG5cbiAgdmFyIGhhc2ggPSBuZXh0Lmhhc2ggfHwgcGFyc2VkUGF0aC5oYXNoO1xuICBpZiAoaGFzaCAmJiBoYXNoLmNoYXJBdCgwKSAhPT0gJyMnKSB7XG4gICAgaGFzaCA9IFwiI1wiICsgaGFzaDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgX25vcm1hbGl6ZWQ6IHRydWUsXG4gICAgcGF0aDogcGF0aCxcbiAgICBxdWVyeTogcXVlcnksXG4gICAgaGFzaDogaGFzaFxuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2lnbiAoYSwgYikge1xuICBmb3IgKHZhciBrZXkgaW4gYikge1xuICAgIGFba2V5XSA9IGJba2V5XTtcbiAgfVxuICByZXR1cm4gYVxufVxuXG4vKiAgKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVNYXRjaGVyIChcbiAgcm91dGVzLFxuICByb3V0ZXJcbikge1xuICB2YXIgcmVmID0gY3JlYXRlUm91dGVNYXAocm91dGVzKTtcbiAgdmFyIHBhdGhMaXN0ID0gcmVmLnBhdGhMaXN0O1xuICB2YXIgcGF0aE1hcCA9IHJlZi5wYXRoTWFwO1xuICB2YXIgbmFtZU1hcCA9IHJlZi5uYW1lTWFwO1xuXG4gIGZ1bmN0aW9uIGFkZFJvdXRlcyAocm91dGVzKSB7XG4gICAgY3JlYXRlUm91dGVNYXAocm91dGVzLCBwYXRoTGlzdCwgcGF0aE1hcCwgbmFtZU1hcCk7XG4gIH1cblxuICBmdW5jdGlvbiBtYXRjaCAoXG4gICAgcmF3LFxuICAgIGN1cnJlbnRSb3V0ZSxcbiAgICByZWRpcmVjdGVkRnJvbVxuICApIHtcbiAgICB2YXIgbG9jYXRpb24gPSBub3JtYWxpemVMb2NhdGlvbihyYXcsIGN1cnJlbnRSb3V0ZSwgZmFsc2UsIHJvdXRlcik7XG4gICAgdmFyIG5hbWUgPSBsb2NhdGlvbi5uYW1lO1xuXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHZhciByZWNvcmQgPSBuYW1lTWFwW25hbWVdO1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybihyZWNvcmQsIChcIlJvdXRlIHdpdGggbmFtZSAnXCIgKyBuYW1lICsgXCInIGRvZXMgbm90IGV4aXN0XCIpKTtcbiAgICAgIH1cbiAgICAgIGlmICghcmVjb3JkKSB7IHJldHVybiBfY3JlYXRlUm91dGUobnVsbCwgbG9jYXRpb24pIH1cbiAgICAgIHZhciBwYXJhbU5hbWVzID0gcmVjb3JkLnJlZ2V4LmtleXNcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAha2V5Lm9wdGlvbmFsOyB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleS5uYW1lOyB9KTtcblxuICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbi5wYXJhbXMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGxvY2F0aW9uLnBhcmFtcyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudFJvdXRlICYmIHR5cGVvZiBjdXJyZW50Um91dGUucGFyYW1zID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gY3VycmVudFJvdXRlLnBhcmFtcykge1xuICAgICAgICAgIGlmICghKGtleSBpbiBsb2NhdGlvbi5wYXJhbXMpICYmIHBhcmFtTmFtZXMuaW5kZXhPZihrZXkpID4gLTEpIHtcbiAgICAgICAgICAgIGxvY2F0aW9uLnBhcmFtc1trZXldID0gY3VycmVudFJvdXRlLnBhcmFtc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkKSB7XG4gICAgICAgIGxvY2F0aW9uLnBhdGggPSBmaWxsUGFyYW1zKHJlY29yZC5wYXRoLCBsb2NhdGlvbi5wYXJhbXMsIChcIm5hbWVkIHJvdXRlIFxcXCJcIiArIG5hbWUgKyBcIlxcXCJcIikpO1xuICAgICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKHJlY29yZCwgbG9jYXRpb24sIHJlZGlyZWN0ZWRGcm9tKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobG9jYXRpb24ucGF0aCkge1xuICAgICAgbG9jYXRpb24ucGFyYW1zID0ge307XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwYXRoID0gcGF0aExpc3RbaV07XG4gICAgICAgIHZhciByZWNvcmQkMSA9IHBhdGhNYXBbcGF0aF07XG4gICAgICAgIGlmIChtYXRjaFJvdXRlKHJlY29yZCQxLnJlZ2V4LCBsb2NhdGlvbi5wYXRoLCBsb2NhdGlvbi5wYXJhbXMpKSB7XG4gICAgICAgICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShyZWNvcmQkMSwgbG9jYXRpb24sIHJlZGlyZWN0ZWRGcm9tKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIG5vIG1hdGNoXG4gICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbilcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZGlyZWN0IChcbiAgICByZWNvcmQsXG4gICAgbG9jYXRpb25cbiAgKSB7XG4gICAgdmFyIG9yaWdpbmFsUmVkaXJlY3QgPSByZWNvcmQucmVkaXJlY3Q7XG4gICAgdmFyIHJlZGlyZWN0ID0gdHlwZW9mIG9yaWdpbmFsUmVkaXJlY3QgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBvcmlnaW5hbFJlZGlyZWN0KGNyZWF0ZVJvdXRlKHJlY29yZCwgbG9jYXRpb24sIG51bGwsIHJvdXRlcikpXG4gICAgICAgIDogb3JpZ2luYWxSZWRpcmVjdDtcblxuICAgIGlmICh0eXBlb2YgcmVkaXJlY3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZWRpcmVjdCA9IHsgcGF0aDogcmVkaXJlY3QgfTtcbiAgICB9XG5cbiAgICBpZiAoIXJlZGlyZWN0IHx8IHR5cGVvZiByZWRpcmVjdCAhPT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgZmFsc2UsIChcImludmFsaWQgcmVkaXJlY3Qgb3B0aW9uOiBcIiArIChKU09OLnN0cmluZ2lmeShyZWRpcmVjdCkpKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbilcbiAgICB9XG5cbiAgICB2YXIgcmUgPSByZWRpcmVjdDtcbiAgICB2YXIgbmFtZSA9IHJlLm5hbWU7XG4gICAgdmFyIHBhdGggPSByZS5wYXRoO1xuICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnF1ZXJ5O1xuICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcbiAgICB2YXIgcGFyYW1zID0gbG9jYXRpb24ucGFyYW1zO1xuICAgIHF1ZXJ5ID0gcmUuaGFzT3duUHJvcGVydHkoJ3F1ZXJ5JykgPyByZS5xdWVyeSA6IHF1ZXJ5O1xuICAgIGhhc2ggPSByZS5oYXNPd25Qcm9wZXJ0eSgnaGFzaCcpID8gcmUuaGFzaCA6IGhhc2g7XG4gICAgcGFyYW1zID0gcmUuaGFzT3duUHJvcGVydHkoJ3BhcmFtcycpID8gcmUucGFyYW1zIDogcGFyYW1zO1xuXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIC8vIHJlc29sdmVkIG5hbWVkIGRpcmVjdFxuICAgICAgdmFyIHRhcmdldFJlY29yZCA9IG5hbWVNYXBbbmFtZV07XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBhc3NlcnQodGFyZ2V0UmVjb3JkLCAoXCJyZWRpcmVjdCBmYWlsZWQ6IG5hbWVkIHJvdXRlIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgbm90IGZvdW5kLlwiKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2goe1xuICAgICAgICBfbm9ybWFsaXplZDogdHJ1ZSxcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICBoYXNoOiBoYXNoLFxuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfSwgdW5kZWZpbmVkLCBsb2NhdGlvbilcbiAgICB9IGVsc2UgaWYgKHBhdGgpIHtcbiAgICAgIC8vIDEuIHJlc29sdmUgcmVsYXRpdmUgcmVkaXJlY3RcbiAgICAgIHZhciByYXdQYXRoID0gcmVzb2x2ZVJlY29yZFBhdGgocGF0aCwgcmVjb3JkKTtcbiAgICAgIC8vIDIuIHJlc29sdmUgcGFyYW1zXG4gICAgICB2YXIgcmVzb2x2ZWRQYXRoID0gZmlsbFBhcmFtcyhyYXdQYXRoLCBwYXJhbXMsIChcInJlZGlyZWN0IHJvdXRlIHdpdGggcGF0aCBcXFwiXCIgKyByYXdQYXRoICsgXCJcXFwiXCIpKTtcbiAgICAgIC8vIDMuIHJlbWF0Y2ggd2l0aCBleGlzdGluZyBxdWVyeSBhbmQgaGFzaFxuICAgICAgcmV0dXJuIG1hdGNoKHtcbiAgICAgICAgX25vcm1hbGl6ZWQ6IHRydWUsXG4gICAgICAgIHBhdGg6IHJlc29sdmVkUGF0aCxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICBoYXNoOiBoYXNoXG4gICAgICB9LCB1bmRlZmluZWQsIGxvY2F0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKGZhbHNlLCAoXCJpbnZhbGlkIHJlZGlyZWN0IG9wdGlvbjogXCIgKyAoSlNPTi5zdHJpbmdpZnkocmVkaXJlY3QpKSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbilcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhbGlhcyAoXG4gICAgcmVjb3JkLFxuICAgIGxvY2F0aW9uLFxuICAgIG1hdGNoQXNcbiAgKSB7XG4gICAgdmFyIGFsaWFzZWRQYXRoID0gZmlsbFBhcmFtcyhtYXRjaEFzLCBsb2NhdGlvbi5wYXJhbXMsIChcImFsaWFzZWQgcm91dGUgd2l0aCBwYXRoIFxcXCJcIiArIG1hdGNoQXMgKyBcIlxcXCJcIikpO1xuICAgIHZhciBhbGlhc2VkTWF0Y2ggPSBtYXRjaCh7XG4gICAgICBfbm9ybWFsaXplZDogdHJ1ZSxcbiAgICAgIHBhdGg6IGFsaWFzZWRQYXRoXG4gICAgfSk7XG4gICAgaWYgKGFsaWFzZWRNYXRjaCkge1xuICAgICAgdmFyIG1hdGNoZWQgPSBhbGlhc2VkTWF0Y2gubWF0Y2hlZDtcbiAgICAgIHZhciBhbGlhc2VkUmVjb3JkID0gbWF0Y2hlZFttYXRjaGVkLmxlbmd0aCAtIDFdO1xuICAgICAgbG9jYXRpb24ucGFyYW1zID0gYWxpYXNlZE1hdGNoLnBhcmFtcztcbiAgICAgIHJldHVybiBfY3JlYXRlUm91dGUoYWxpYXNlZFJlY29yZCwgbG9jYXRpb24pXG4gICAgfVxuICAgIHJldHVybiBfY3JlYXRlUm91dGUobnVsbCwgbG9jYXRpb24pXG4gIH1cblxuICBmdW5jdGlvbiBfY3JlYXRlUm91dGUgKFxuICAgIHJlY29yZCxcbiAgICBsb2NhdGlvbixcbiAgICByZWRpcmVjdGVkRnJvbVxuICApIHtcbiAgICBpZiAocmVjb3JkICYmIHJlY29yZC5yZWRpcmVjdCkge1xuICAgICAgcmV0dXJuIHJlZGlyZWN0KHJlY29yZCwgcmVkaXJlY3RlZEZyb20gfHwgbG9jYXRpb24pXG4gICAgfVxuICAgIGlmIChyZWNvcmQgJiYgcmVjb3JkLm1hdGNoQXMpIHtcbiAgICAgIHJldHVybiBhbGlhcyhyZWNvcmQsIGxvY2F0aW9uLCByZWNvcmQubWF0Y2hBcylcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZVJvdXRlKHJlY29yZCwgbG9jYXRpb24sIHJlZGlyZWN0ZWRGcm9tLCByb3V0ZXIpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1hdGNoOiBtYXRjaCxcbiAgICBhZGRSb3V0ZXM6IGFkZFJvdXRlc1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hdGNoUm91dGUgKFxuICByZWdleCxcbiAgcGF0aCxcbiAgcGFyYW1zXG4pIHtcbiAgdmFyIG0gPSBwYXRoLm1hdGNoKHJlZ2V4KTtcblxuICBpZiAoIW0pIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIGlmICghcGFyYW1zKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAxLCBsZW4gPSBtLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIGtleSA9IHJlZ2V4LmtleXNbaSAtIDFdO1xuICAgIHZhciB2YWwgPSB0eXBlb2YgbVtpXSA9PT0gJ3N0cmluZycgPyBkZWNvZGVVUklDb21wb25lbnQobVtpXSkgOiBtW2ldO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIHBhcmFtc1trZXkubmFtZV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVJlY29yZFBhdGggKHBhdGgsIHJlY29yZCkge1xuICByZXR1cm4gcmVzb2x2ZVBhdGgocGF0aCwgcmVjb3JkLnBhcmVudCA/IHJlY29yZC5wYXJlbnQucGF0aCA6ICcvJywgdHJ1ZSlcbn1cblxuLyogICovXG5cblxudmFyIHBvc2l0aW9uU3RvcmUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5mdW5jdGlvbiBzZXR1cFNjcm9sbCAoKSB7XG4gIC8vIEZpeCBmb3IgIzE1ODUgZm9yIEZpcmVmb3hcbiAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHsga2V5OiBnZXRTdGF0ZUtleSgpIH0sICcnKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgZnVuY3Rpb24gKGUpIHtcbiAgICBzYXZlU2Nyb2xsUG9zaXRpb24oKTtcbiAgICBpZiAoZS5zdGF0ZSAmJiBlLnN0YXRlLmtleSkge1xuICAgICAgc2V0U3RhdGVLZXkoZS5zdGF0ZS5rZXkpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVNjcm9sbCAoXG4gIHJvdXRlcixcbiAgdG8sXG4gIGZyb20sXG4gIGlzUG9wXG4pIHtcbiAgaWYgKCFyb3V0ZXIuYXBwKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgYmVoYXZpb3IgPSByb3V0ZXIub3B0aW9ucy5zY3JvbGxCZWhhdmlvcjtcbiAgaWYgKCFiZWhhdmlvcikge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQodHlwZW9mIGJlaGF2aW9yID09PSAnZnVuY3Rpb24nLCBcInNjcm9sbEJlaGF2aW9yIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgfVxuXG4gIC8vIHdhaXQgdW50aWwgcmUtcmVuZGVyIGZpbmlzaGVzIGJlZm9yZSBzY3JvbGxpbmdcbiAgcm91dGVyLmFwcC4kbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBwb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7XG4gICAgdmFyIHNob3VsZFNjcm9sbCA9IGJlaGF2aW9yKHRvLCBmcm9tLCBpc1BvcCA/IHBvc2l0aW9uIDogbnVsbCk7XG5cbiAgICBpZiAoIXNob3VsZFNjcm9sbCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzaG91bGRTY3JvbGwudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgc2hvdWxkU2Nyb2xsLnRoZW4oZnVuY3Rpb24gKHNob3VsZFNjcm9sbCkge1xuICAgICAgICBzY3JvbGxUb1Bvc2l0aW9uKChzaG91bGRTY3JvbGwpLCBwb3NpdGlvbik7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgYXNzZXJ0KGZhbHNlLCBlcnIudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY3JvbGxUb1Bvc2l0aW9uKHNob3VsZFNjcm9sbCwgcG9zaXRpb24pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNhdmVTY3JvbGxQb3NpdGlvbiAoKSB7XG4gIHZhciBrZXkgPSBnZXRTdGF0ZUtleSgpO1xuICBpZiAoa2V5KSB7XG4gICAgcG9zaXRpb25TdG9yZVtrZXldID0ge1xuICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxQb3NpdGlvbiAoKSB7XG4gIHZhciBrZXkgPSBnZXRTdGF0ZUtleSgpO1xuICBpZiAoa2V5KSB7XG4gICAgcmV0dXJuIHBvc2l0aW9uU3RvcmVba2V5XVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRQb3NpdGlvbiAoZWwsIG9mZnNldCkge1xuICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBkb2NSZWN0ID0gZG9jRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHZhciBlbFJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIHtcbiAgICB4OiBlbFJlY3QubGVmdCAtIGRvY1JlY3QubGVmdCAtIG9mZnNldC54LFxuICAgIHk6IGVsUmVjdC50b3AgLSBkb2NSZWN0LnRvcCAtIG9mZnNldC55XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNWYWxpZFBvc2l0aW9uIChvYmopIHtcbiAgcmV0dXJuIGlzTnVtYmVyKG9iai54KSB8fCBpc051bWJlcihvYmoueSlcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplUG9zaXRpb24gKG9iaikge1xuICByZXR1cm4ge1xuICAgIHg6IGlzTnVtYmVyKG9iai54KSA/IG9iai54IDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgIHk6IGlzTnVtYmVyKG9iai55KSA/IG9iai55IDogd2luZG93LnBhZ2VZT2Zmc2V0XG4gIH1cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplT2Zmc2V0IChvYmopIHtcbiAgcmV0dXJuIHtcbiAgICB4OiBpc051bWJlcihvYmoueCkgPyBvYmoueCA6IDAsXG4gICAgeTogaXNOdW1iZXIob2JqLnkpID8gb2JqLnkgOiAwXG4gIH1cbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIgKHYpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJ1xufVxuXG5mdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uIChzaG91bGRTY3JvbGwsIHBvc2l0aW9uKSB7XG4gIHZhciBpc09iamVjdCA9IHR5cGVvZiBzaG91bGRTY3JvbGwgPT09ICdvYmplY3QnO1xuICBpZiAoaXNPYmplY3QgJiYgdHlwZW9mIHNob3VsZFNjcm9sbC5zZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNob3VsZFNjcm9sbC5zZWxlY3Rvcik7XG4gICAgaWYgKGVsKSB7XG4gICAgICB2YXIgb2Zmc2V0ID0gc2hvdWxkU2Nyb2xsLm9mZnNldCAmJiB0eXBlb2Ygc2hvdWxkU2Nyb2xsLm9mZnNldCA9PT0gJ29iamVjdCcgPyBzaG91bGRTY3JvbGwub2Zmc2V0IDoge307XG4gICAgICBvZmZzZXQgPSBub3JtYWxpemVPZmZzZXQob2Zmc2V0KTtcbiAgICAgIHBvc2l0aW9uID0gZ2V0RWxlbWVudFBvc2l0aW9uKGVsLCBvZmZzZXQpO1xuICAgIH0gZWxzZSBpZiAoaXNWYWxpZFBvc2l0aW9uKHNob3VsZFNjcm9sbCkpIHtcbiAgICAgIHBvc2l0aW9uID0gbm9ybWFsaXplUG9zaXRpb24oc2hvdWxkU2Nyb2xsKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QgJiYgaXNWYWxpZFBvc2l0aW9uKHNob3VsZFNjcm9sbCkpIHtcbiAgICBwb3NpdGlvbiA9IG5vcm1hbGl6ZVBvc2l0aW9uKHNob3VsZFNjcm9sbCk7XG4gIH1cblxuICBpZiAocG9zaXRpb24pIHtcbiAgICB3aW5kb3cuc2Nyb2xsVG8ocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XG4gIH1cbn1cblxuLyogICovXG5cbnZhciBzdXBwb3J0c1B1c2hTdGF0ZSA9IGluQnJvd3NlciAmJiAoZnVuY3Rpb24gKCkge1xuICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuICBpZiAoXG4gICAgKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignQW5kcm9pZCA0LjAnKSAhPT0gLTEpICYmXG4gICAgdWEuaW5kZXhPZignTW9iaWxlIFNhZmFyaScpICE9PSAtMSAmJlxuICAgIHVhLmluZGV4T2YoJ0Nocm9tZScpID09PSAtMSAmJlxuICAgIHVhLmluZGV4T2YoJ1dpbmRvd3MgUGhvbmUnKSA9PT0gLTFcbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnlcbn0pKCk7XG5cbi8vIHVzZSBVc2VyIFRpbWluZyBhcGkgKGlmIHByZXNlbnQpIGZvciBtb3JlIGFjY3VyYXRlIGtleSBwcmVjaXNpb25cbnZhciBUaW1lID0gaW5Ccm93c2VyICYmIHdpbmRvdy5wZXJmb3JtYW5jZSAmJiB3aW5kb3cucGVyZm9ybWFuY2Uubm93XG4gID8gd2luZG93LnBlcmZvcm1hbmNlXG4gIDogRGF0ZTtcblxudmFyIF9rZXkgPSBnZW5LZXkoKTtcblxuZnVuY3Rpb24gZ2VuS2V5ICgpIHtcbiAgcmV0dXJuIFRpbWUubm93KCkudG9GaXhlZCgzKVxufVxuXG5mdW5jdGlvbiBnZXRTdGF0ZUtleSAoKSB7XG4gIHJldHVybiBfa2V5XG59XG5cbmZ1bmN0aW9uIHNldFN0YXRlS2V5IChrZXkpIHtcbiAgX2tleSA9IGtleTtcbn1cblxuZnVuY3Rpb24gcHVzaFN0YXRlICh1cmwsIHJlcGxhY2UpIHtcbiAgc2F2ZVNjcm9sbFBvc2l0aW9uKCk7XG4gIC8vIHRyeS4uLmNhdGNoIHRoZSBwdXNoU3RhdGUgY2FsbCB0byBnZXQgYXJvdW5kIFNhZmFyaVxuICAvLyBET00gRXhjZXB0aW9uIDE4IHdoZXJlIGl0IGxpbWl0cyB0byAxMDAgcHVzaFN0YXRlIGNhbGxzXG4gIHZhciBoaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gIHRyeSB7XG4gICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHsga2V5OiBfa2V5IH0sICcnLCB1cmwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfa2V5ID0gZ2VuS2V5KCk7XG4gICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7IGtleTogX2tleSB9LCAnJywgdXJsKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB3aW5kb3cubG9jYXRpb25bcmVwbGFjZSA/ICdyZXBsYWNlJyA6ICdhc3NpZ24nXSh1cmwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VTdGF0ZSAodXJsKSB7XG4gIHB1c2hTdGF0ZSh1cmwsIHRydWUpO1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gcnVuUXVldWUgKHF1ZXVlLCBmbiwgY2IpIHtcbiAgdmFyIHN0ZXAgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPj0gcXVldWUubGVuZ3RoKSB7XG4gICAgICBjYigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocXVldWVbaW5kZXhdKSB7XG4gICAgICAgIGZuKHF1ZXVlW2luZGV4XSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHN0ZXAoaW5kZXggKyAxKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGVwKGluZGV4ICsgMSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBzdGVwKDApO1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gcmVzb2x2ZUFzeW5jQ29tcG9uZW50cyAobWF0Y2hlZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7XG4gICAgdmFyIGhhc0FzeW5jID0gZmFsc2U7XG4gICAgdmFyIHBlbmRpbmcgPSAwO1xuICAgIHZhciBlcnJvciA9IG51bGw7XG5cbiAgICBmbGF0TWFwQ29tcG9uZW50cyhtYXRjaGVkLCBmdW5jdGlvbiAoZGVmLCBfLCBtYXRjaCwga2V5KSB7XG4gICAgICAvLyBpZiBpdCdzIGEgZnVuY3Rpb24gYW5kIGRvZXNuJ3QgaGF2ZSBjaWQgYXR0YWNoZWQsXG4gICAgICAvLyBhc3N1bWUgaXQncyBhbiBhc3luYyBjb21wb25lbnQgcmVzb2x2ZSBmdW5jdGlvbi5cbiAgICAgIC8vIHdlIGFyZSBub3QgdXNpbmcgVnVlJ3MgZGVmYXVsdCBhc3luYyByZXNvbHZpbmcgbWVjaGFuaXNtIGJlY2F1c2VcbiAgICAgIC8vIHdlIHdhbnQgdG8gaGFsdCB0aGUgbmF2aWdhdGlvbiB1bnRpbCB0aGUgaW5jb21pbmcgY29tcG9uZW50IGhhcyBiZWVuXG4gICAgICAvLyByZXNvbHZlZC5cbiAgICAgIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIGRlZi5jaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBoYXNBc3luYyA9IHRydWU7XG4gICAgICAgIHBlbmRpbmcrKztcblxuICAgICAgICB2YXIgcmVzb2x2ZSA9IG9uY2UoZnVuY3Rpb24gKHJlc29sdmVkRGVmKSB7XG4gICAgICAgICAgaWYgKGlzRVNNb2R1bGUocmVzb2x2ZWREZWYpKSB7XG4gICAgICAgICAgICByZXNvbHZlZERlZiA9IHJlc29sdmVkRGVmLmRlZmF1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHNhdmUgcmVzb2x2ZWQgb24gYXN5bmMgZmFjdG9yeSBpbiBjYXNlIGl0J3MgdXNlZCBlbHNld2hlcmVcbiAgICAgICAgICBkZWYucmVzb2x2ZWQgPSB0eXBlb2YgcmVzb2x2ZWREZWYgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgID8gcmVzb2x2ZWREZWZcbiAgICAgICAgICAgIDogX1Z1ZS5leHRlbmQocmVzb2x2ZWREZWYpO1xuICAgICAgICAgIG1hdGNoLmNvbXBvbmVudHNba2V5XSA9IHJlc29sdmVkRGVmO1xuICAgICAgICAgIHBlbmRpbmctLTtcbiAgICAgICAgICBpZiAocGVuZGluZyA8PSAwKSB7XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgcmVqZWN0ID0gb25jZShmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgdmFyIG1zZyA9IFwiRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50IFwiICsga2V5ICsgXCI6IFwiICsgcmVhc29uO1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihmYWxzZSwgbXNnKTtcbiAgICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICBlcnJvciA9IGlzRXJyb3IocmVhc29uKVxuICAgICAgICAgICAgICA/IHJlYXNvblxuICAgICAgICAgICAgICA6IG5ldyBFcnJvcihtc2cpO1xuICAgICAgICAgICAgbmV4dChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgcmVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlcyA9IGRlZihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXMudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBuZXcgc3ludGF4IGluIFZ1ZSAyLjNcbiAgICAgICAgICAgIHZhciBjb21wID0gcmVzLmNvbXBvbmVudDtcbiAgICAgICAgICAgIGlmIChjb21wICYmIHR5cGVvZiBjb21wLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgY29tcC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIWhhc0FzeW5jKSB7IG5leHQoKTsgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZsYXRNYXBDb21wb25lbnRzIChcbiAgbWF0Y2hlZCxcbiAgZm5cbikge1xuICByZXR1cm4gZmxhdHRlbihtYXRjaGVkLm1hcChmdW5jdGlvbiAobSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhtLmNvbXBvbmVudHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBmbihcbiAgICAgIG0uY29tcG9uZW50c1trZXldLFxuICAgICAgbS5pbnN0YW5jZXNba2V5XSxcbiAgICAgIG0sIGtleVxuICAgICk7IH0pXG4gIH0pKVxufVxuXG5mdW5jdGlvbiBmbGF0dGVuIChhcnIpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFycilcbn1cblxudmFyIGhhc1N5bWJvbCA9XG4gIHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCc7XG5cbmZ1bmN0aW9uIGlzRVNNb2R1bGUgKG9iaikge1xuICByZXR1cm4gb2JqLl9fZXNNb2R1bGUgfHwgKGhhc1N5bWJvbCAmJiBvYmpbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZScpXG59XG5cbi8vIGluIFdlYnBhY2sgMiwgcmVxdWlyZS5lbnN1cmUgbm93IGFsc28gcmV0dXJucyBhIFByb21pc2Vcbi8vIHNvIHRoZSByZXNvbHZlL3JlamVjdCBmdW5jdGlvbnMgbWF5IGdldCBjYWxsZWQgYW4gZXh0cmEgdGltZVxuLy8gaWYgdGhlIHVzZXIgdXNlcyBhbiBhcnJvdyBmdW5jdGlvbiBzaG9ydGhhbmQgdGhhdCBoYXBwZW5zIHRvXG4vLyByZXR1cm4gdGhhdCBQcm9taXNlLlxuZnVuY3Rpb24gb25jZSAoZm4pIHtcbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTtcblxuICAgIGlmIChjYWxsZWQpIHsgcmV0dXJuIH1cbiAgICBjYWxsZWQgPSB0cnVlO1xuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKVxuICB9XG59XG5cbi8qICAqL1xuXG52YXIgSGlzdG9yeSA9IGZ1bmN0aW9uIEhpc3RvcnkgKHJvdXRlciwgYmFzZSkge1xuICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgdGhpcy5iYXNlID0gbm9ybWFsaXplQmFzZShiYXNlKTtcbiAgLy8gc3RhcnQgd2l0aCBhIHJvdXRlIG9iamVjdCB0aGF0IHN0YW5kcyBmb3IgXCJub3doZXJlXCJcbiAgdGhpcy5jdXJyZW50ID0gU1RBUlQ7XG4gIHRoaXMucGVuZGluZyA9IG51bGw7XG4gIHRoaXMucmVhZHkgPSBmYWxzZTtcbiAgdGhpcy5yZWFkeUNicyA9IFtdO1xuICB0aGlzLnJlYWR5RXJyb3JDYnMgPSBbXTtcbiAgdGhpcy5lcnJvckNicyA9IFtdO1xufTtcblxuSGlzdG9yeS5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuIChjYikge1xuICB0aGlzLmNiID0gY2I7XG59O1xuXG5IaXN0b3J5LnByb3RvdHlwZS5vblJlYWR5ID0gZnVuY3Rpb24gb25SZWFkeSAoY2IsIGVycm9yQ2IpIHtcbiAgaWYgKHRoaXMucmVhZHkpIHtcbiAgICBjYigpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucmVhZHlDYnMucHVzaChjYik7XG4gICAgaWYgKGVycm9yQ2IpIHtcbiAgICAgIHRoaXMucmVhZHlFcnJvckNicy5wdXNoKGVycm9yQ2IpO1xuICAgIH1cbiAgfVxufTtcblxuSGlzdG9yeS5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IgKGVycm9yQ2IpIHtcbiAgdGhpcy5lcnJvckNicy5wdXNoKGVycm9yQ2IpO1xufTtcblxuSGlzdG9yeS5wcm90b3R5cGUudHJhbnNpdGlvblRvID0gZnVuY3Rpb24gdHJhbnNpdGlvblRvIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIHZhciByb3V0ZSA9IHRoaXMucm91dGVyLm1hdGNoKGxvY2F0aW9uLCB0aGlzLmN1cnJlbnQpO1xuICB0aGlzLmNvbmZpcm1UcmFuc2l0aW9uKHJvdXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcyQxLnVwZGF0ZVJvdXRlKHJvdXRlKTtcbiAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuICAgIHRoaXMkMS5lbnN1cmVVUkwoKTtcblxuICAgIC8vIGZpcmUgcmVhZHkgY2JzIG9uY2VcbiAgICBpZiAoIXRoaXMkMS5yZWFkeSkge1xuICAgICAgdGhpcyQxLnJlYWR5ID0gdHJ1ZTtcbiAgICAgIHRoaXMkMS5yZWFkeUNicy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyBjYihyb3V0ZSk7IH0pO1xuICAgIH1cbiAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgIGlmIChvbkFib3J0KSB7XG4gICAgICBvbkFib3J0KGVycik7XG4gICAgfVxuICAgIGlmIChlcnIgJiYgIXRoaXMkMS5yZWFkeSkge1xuICAgICAgdGhpcyQxLnJlYWR5ID0gdHJ1ZTtcbiAgICAgIHRoaXMkMS5yZWFkeUVycm9yQ2JzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IGNiKGVycik7IH0pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5IaXN0b3J5LnByb3RvdHlwZS5jb25maXJtVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2l0aW9uIChyb3V0ZSwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIHZhciBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICB2YXIgYWJvcnQgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGlzRXJyb3IoZXJyKSkge1xuICAgICAgaWYgKHRoaXMkMS5lcnJvckNicy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcyQxLmVycm9yQ2JzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IGNiKGVycik7IH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybihmYWxzZSwgJ3VuY2F1Z2h0IGVycm9yIGR1cmluZyByb3V0ZSBuYXZpZ2F0aW9uOicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9XG4gICAgfVxuICAgIG9uQWJvcnQgJiYgb25BYm9ydChlcnIpO1xuICB9O1xuICBpZiAoXG4gICAgaXNTYW1lUm91dGUocm91dGUsIGN1cnJlbnQpICYmXG4gICAgLy8gaW4gdGhlIGNhc2UgdGhlIHJvdXRlIG1hcCBoYXMgYmVlbiBkeW5hbWljYWxseSBhcHBlbmRlZCB0b1xuICAgIHJvdXRlLm1hdGNoZWQubGVuZ3RoID09PSBjdXJyZW50Lm1hdGNoZWQubGVuZ3RoXG4gICkge1xuICAgIHRoaXMuZW5zdXJlVVJMKCk7XG4gICAgcmV0dXJuIGFib3J0KClcbiAgfVxuXG4gIHZhciByZWYgPSByZXNvbHZlUXVldWUodGhpcy5jdXJyZW50Lm1hdGNoZWQsIHJvdXRlLm1hdGNoZWQpO1xuICAgIHZhciB1cGRhdGVkID0gcmVmLnVwZGF0ZWQ7XG4gICAgdmFyIGRlYWN0aXZhdGVkID0gcmVmLmRlYWN0aXZhdGVkO1xuICAgIHZhciBhY3RpdmF0ZWQgPSByZWYuYWN0aXZhdGVkO1xuXG4gIHZhciBxdWV1ZSA9IFtdLmNvbmNhdChcbiAgICAvLyBpbi1jb21wb25lbnQgbGVhdmUgZ3VhcmRzXG4gICAgZXh0cmFjdExlYXZlR3VhcmRzKGRlYWN0aXZhdGVkKSxcbiAgICAvLyBnbG9iYWwgYmVmb3JlIGhvb2tzXG4gICAgdGhpcy5yb3V0ZXIuYmVmb3JlSG9va3MsXG4gICAgLy8gaW4tY29tcG9uZW50IHVwZGF0ZSBob29rc1xuICAgIGV4dHJhY3RVcGRhdGVIb29rcyh1cGRhdGVkKSxcbiAgICAvLyBpbi1jb25maWcgZW50ZXIgZ3VhcmRzXG4gICAgYWN0aXZhdGVkLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5iZWZvcmVFbnRlcjsgfSksXG4gICAgLy8gYXN5bmMgY29tcG9uZW50c1xuICAgIHJlc29sdmVBc3luY0NvbXBvbmVudHMoYWN0aXZhdGVkKVxuICApO1xuXG4gIHRoaXMucGVuZGluZyA9IHJvdXRlO1xuICB2YXIgaXRlcmF0b3IgPSBmdW5jdGlvbiAoaG9vaywgbmV4dCkge1xuICAgIGlmICh0aGlzJDEucGVuZGluZyAhPT0gcm91dGUpIHtcbiAgICAgIHJldHVybiBhYm9ydCgpXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBob29rKHJvdXRlLCBjdXJyZW50LCBmdW5jdGlvbiAodG8pIHtcbiAgICAgICAgaWYgKHRvID09PSBmYWxzZSB8fCBpc0Vycm9yKHRvKSkge1xuICAgICAgICAgIC8vIG5leHQoZmFsc2UpIC0+IGFib3J0IG5hdmlnYXRpb24sIGVuc3VyZSBjdXJyZW50IFVSTFxuICAgICAgICAgIHRoaXMkMS5lbnN1cmVVUkwodHJ1ZSk7XG4gICAgICAgICAgYWJvcnQodG8pO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHR5cGVvZiB0byA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAodHlwZW9mIHRvID09PSAnb2JqZWN0JyAmJiAoXG4gICAgICAgICAgICB0eXBlb2YgdG8ucGF0aCA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0by5uYW1lID09PSAnc3RyaW5nJ1xuICAgICAgICAgICkpXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIG5leHQoJy8nKSBvciBuZXh0KHsgcGF0aDogJy8nIH0pIC0+IHJlZGlyZWN0XG4gICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRvID09PSAnb2JqZWN0JyAmJiB0by5yZXBsYWNlKSB7XG4gICAgICAgICAgICB0aGlzJDEucmVwbGFjZSh0byk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMkMS5wdXNoKHRvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY29uZmlybSB0cmFuc2l0aW9uIGFuZCBwYXNzIG9uIHRoZSB2YWx1ZVxuICAgICAgICAgIG5leHQodG8pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBhYm9ydChlKTtcbiAgICB9XG4gIH07XG5cbiAgcnVuUXVldWUocXVldWUsIGl0ZXJhdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBvc3RFbnRlckNicyA9IFtdO1xuICAgIHZhciBpc1ZhbGlkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcyQxLmN1cnJlbnQgPT09IHJvdXRlOyB9O1xuICAgIC8vIHdhaXQgdW50aWwgYXN5bmMgY29tcG9uZW50cyBhcmUgcmVzb2x2ZWQgYmVmb3JlXG4gICAgLy8gZXh0cmFjdGluZyBpbi1jb21wb25lbnQgZW50ZXIgZ3VhcmRzXG4gICAgdmFyIGVudGVyR3VhcmRzID0gZXh0cmFjdEVudGVyR3VhcmRzKGFjdGl2YXRlZCwgcG9zdEVudGVyQ2JzLCBpc1ZhbGlkKTtcbiAgICB2YXIgcXVldWUgPSBlbnRlckd1YXJkcy5jb25jYXQodGhpcyQxLnJvdXRlci5yZXNvbHZlSG9va3MpO1xuICAgIHJ1blF1ZXVlKHF1ZXVlLCBpdGVyYXRvciwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMkMS5wZW5kaW5nICE9PSByb3V0ZSkge1xuICAgICAgICByZXR1cm4gYWJvcnQoKVxuICAgICAgfVxuICAgICAgdGhpcyQxLnBlbmRpbmcgPSBudWxsO1xuICAgICAgb25Db21wbGV0ZShyb3V0ZSk7XG4gICAgICBpZiAodGhpcyQxLnJvdXRlci5hcHApIHtcbiAgICAgICAgdGhpcyQxLnJvdXRlci5hcHAuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwb3N0RW50ZXJDYnMuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsgY2IoKTsgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG5cbkhpc3RvcnkucHJvdG90eXBlLnVwZGF0ZVJvdXRlID0gZnVuY3Rpb24gdXBkYXRlUm91dGUgKHJvdXRlKSB7XG4gIHZhciBwcmV2ID0gdGhpcy5jdXJyZW50O1xuICB0aGlzLmN1cnJlbnQgPSByb3V0ZTtcbiAgdGhpcy5jYiAmJiB0aGlzLmNiKHJvdXRlKTtcbiAgdGhpcy5yb3V0ZXIuYWZ0ZXJIb29rcy5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XG4gICAgaG9vayAmJiBob29rKHJvdXRlLCBwcmV2KTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBub3JtYWxpemVCYXNlIChiYXNlKSB7XG4gIGlmICghYmFzZSkge1xuICAgIGlmIChpbkJyb3dzZXIpIHtcbiAgICAgIC8vIHJlc3BlY3QgPGJhc2U+IHRhZ1xuICAgICAgdmFyIGJhc2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTtcbiAgICAgIGJhc2UgPSAoYmFzZUVsICYmIGJhc2VFbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkgfHwgJy8nO1xuICAgICAgLy8gc3RyaXAgZnVsbCBVUkwgb3JpZ2luXG4gICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKC9eaHR0cHM/OlxcL1xcL1teXFwvXSsvLCAnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhc2UgPSAnLyc7XG4gICAgfVxuICB9XG4gIC8vIG1ha2Ugc3VyZSB0aGVyZSdzIHRoZSBzdGFydGluZyBzbGFzaFxuICBpZiAoYmFzZS5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgIGJhc2UgPSAnLycgKyBiYXNlO1xuICB9XG4gIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICByZXR1cm4gYmFzZS5yZXBsYWNlKC9cXC8kLywgJycpXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVRdWV1ZSAoXG4gIGN1cnJlbnQsXG4gIG5leHRcbikge1xuICB2YXIgaTtcbiAgdmFyIG1heCA9IE1hdGgubWF4KGN1cnJlbnQubGVuZ3RoLCBuZXh0Lmxlbmd0aCk7XG4gIGZvciAoaSA9IDA7IGkgPCBtYXg7IGkrKykge1xuICAgIGlmIChjdXJyZW50W2ldICE9PSBuZXh0W2ldKSB7XG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIHVwZGF0ZWQ6IG5leHQuc2xpY2UoMCwgaSksXG4gICAgYWN0aXZhdGVkOiBuZXh0LnNsaWNlKGkpLFxuICAgIGRlYWN0aXZhdGVkOiBjdXJyZW50LnNsaWNlKGkpXG4gIH1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdEd1YXJkcyAoXG4gIHJlY29yZHMsXG4gIG5hbWUsXG4gIGJpbmQsXG4gIHJldmVyc2Vcbikge1xuICB2YXIgZ3VhcmRzID0gZmxhdE1hcENvbXBvbmVudHMocmVjb3JkcywgZnVuY3Rpb24gKGRlZiwgaW5zdGFuY2UsIG1hdGNoLCBrZXkpIHtcbiAgICB2YXIgZ3VhcmQgPSBleHRyYWN0R3VhcmQoZGVmLCBuYW1lKTtcbiAgICBpZiAoZ3VhcmQpIHtcbiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGd1YXJkKVxuICAgICAgICA/IGd1YXJkLm1hcChmdW5jdGlvbiAoZ3VhcmQpIHsgcmV0dXJuIGJpbmQoZ3VhcmQsIGluc3RhbmNlLCBtYXRjaCwga2V5KTsgfSlcbiAgICAgICAgOiBiaW5kKGd1YXJkLCBpbnN0YW5jZSwgbWF0Y2gsIGtleSlcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZmxhdHRlbihyZXZlcnNlID8gZ3VhcmRzLnJldmVyc2UoKSA6IGd1YXJkcylcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEd1YXJkIChcbiAgZGVmLFxuICBrZXlcbikge1xuICBpZiAodHlwZW9mIGRlZiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIGV4dGVuZCBub3cgc28gdGhhdCBnbG9iYWwgbWl4aW5zIGFyZSBhcHBsaWVkLlxuICAgIGRlZiA9IF9WdWUuZXh0ZW5kKGRlZik7XG4gIH1cbiAgcmV0dXJuIGRlZi5vcHRpb25zW2tleV1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdExlYXZlR3VhcmRzIChkZWFjdGl2YXRlZCkge1xuICByZXR1cm4gZXh0cmFjdEd1YXJkcyhkZWFjdGl2YXRlZCwgJ2JlZm9yZVJvdXRlTGVhdmUnLCBiaW5kR3VhcmQsIHRydWUpXG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RVcGRhdGVIb29rcyAodXBkYXRlZCkge1xuICByZXR1cm4gZXh0cmFjdEd1YXJkcyh1cGRhdGVkLCAnYmVmb3JlUm91dGVVcGRhdGUnLCBiaW5kR3VhcmQpXG59XG5cbmZ1bmN0aW9uIGJpbmRHdWFyZCAoZ3VhcmQsIGluc3RhbmNlKSB7XG4gIGlmIChpbnN0YW5jZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBib3VuZFJvdXRlR3VhcmQgKCkge1xuICAgICAgcmV0dXJuIGd1YXJkLmFwcGx5KGluc3RhbmNlLCBhcmd1bWVudHMpXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbnRlckd1YXJkcyAoXG4gIGFjdGl2YXRlZCxcbiAgY2JzLFxuICBpc1ZhbGlkXG4pIHtcbiAgcmV0dXJuIGV4dHJhY3RHdWFyZHMoYWN0aXZhdGVkLCAnYmVmb3JlUm91dGVFbnRlcicsIGZ1bmN0aW9uIChndWFyZCwgXywgbWF0Y2gsIGtleSkge1xuICAgIHJldHVybiBiaW5kRW50ZXJHdWFyZChndWFyZCwgbWF0Y2gsIGtleSwgY2JzLCBpc1ZhbGlkKVxuICB9KVxufVxuXG5mdW5jdGlvbiBiaW5kRW50ZXJHdWFyZCAoXG4gIGd1YXJkLFxuICBtYXRjaCxcbiAga2V5LFxuICBjYnMsXG4gIGlzVmFsaWRcbikge1xuICByZXR1cm4gZnVuY3Rpb24gcm91dGVFbnRlckd1YXJkICh0bywgZnJvbSwgbmV4dCkge1xuICAgIHJldHVybiBndWFyZCh0bywgZnJvbSwgZnVuY3Rpb24gKGNiKSB7XG4gICAgICBuZXh0KGNiKTtcbiAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2JzLnB1c2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vICM3NTBcbiAgICAgICAgICAvLyBpZiBhIHJvdXRlci12aWV3IGlzIHdyYXBwZWQgd2l0aCBhbiBvdXQtaW4gdHJhbnNpdGlvbixcbiAgICAgICAgICAvLyB0aGUgaW5zdGFuY2UgbWF5IG5vdCBoYXZlIGJlZW4gcmVnaXN0ZXJlZCBhdCB0aGlzIHRpbWUuXG4gICAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIHBvbGwgZm9yIHJlZ2lzdHJhdGlvbiB1bnRpbCBjdXJyZW50IHJvdXRlXG4gICAgICAgICAgLy8gaXMgbm8gbG9uZ2VyIHZhbGlkLlxuICAgICAgICAgIHBvbGwoY2IsIG1hdGNoLmluc3RhbmNlcywga2V5LCBpc1ZhbGlkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBwb2xsIChcbiAgY2IsIC8vIHNvbWVob3cgZmxvdyBjYW5ub3QgaW5mZXIgdGhpcyBpcyBhIGZ1bmN0aW9uXG4gIGluc3RhbmNlcyxcbiAga2V5LFxuICBpc1ZhbGlkXG4pIHtcbiAgaWYgKGluc3RhbmNlc1trZXldKSB7XG4gICAgY2IoaW5zdGFuY2VzW2tleV0pO1xuICB9IGVsc2UgaWYgKGlzVmFsaWQoKSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgcG9sbChjYiwgaW5zdGFuY2VzLCBrZXksIGlzVmFsaWQpO1xuICAgIH0sIDE2KTtcbiAgfVxufVxuXG4vKiAgKi9cblxuXG52YXIgSFRNTDVIaXN0b3J5ID0gKGZ1bmN0aW9uIChIaXN0b3J5JCQxKSB7XG4gIGZ1bmN0aW9uIEhUTUw1SGlzdG9yeSAocm91dGVyLCBiYXNlKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICBIaXN0b3J5JCQxLmNhbGwodGhpcywgcm91dGVyLCBiYXNlKTtcblxuICAgIHZhciBleHBlY3RTY3JvbGwgPSByb3V0ZXIub3B0aW9ucy5zY3JvbGxCZWhhdmlvcjtcblxuICAgIGlmIChleHBlY3RTY3JvbGwpIHtcbiAgICAgIHNldHVwU2Nyb2xsKCk7XG4gICAgfVxuXG4gICAgdmFyIGluaXRMb2NhdGlvbiA9IGdldExvY2F0aW9uKHRoaXMuYmFzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBjdXJyZW50ID0gdGhpcyQxLmN1cnJlbnQ7XG5cbiAgICAgIC8vIEF2b2lkaW5nIGZpcnN0IGBwb3BzdGF0ZWAgZXZlbnQgZGlzcGF0Y2hlZCBpbiBzb21lIGJyb3dzZXJzIGJ1dCBmaXJzdFxuICAgICAgLy8gaGlzdG9yeSByb3V0ZSBub3QgdXBkYXRlZCBzaW5jZSBhc3luYyBndWFyZCBhdCB0aGUgc2FtZSB0aW1lLlxuICAgICAgdmFyIGxvY2F0aW9uID0gZ2V0TG9jYXRpb24odGhpcyQxLmJhc2UpO1xuICAgICAgaWYgKHRoaXMkMS5jdXJyZW50ID09PSBTVEFSVCAmJiBsb2NhdGlvbiA9PT0gaW5pdExvY2F0aW9uKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICB0aGlzJDEudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgICAgaWYgKGV4cGVjdFNjcm9sbCkge1xuICAgICAgICAgIGhhbmRsZVNjcm9sbChyb3V0ZXIsIHJvdXRlLCBjdXJyZW50LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoIEhpc3RvcnkkJDEgKSBIVE1MNUhpc3RvcnkuX19wcm90b19fID0gSGlzdG9yeSQkMTtcbiAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEhpc3RvcnkkJDEgJiYgSGlzdG9yeSQkMS5wcm90b3R5cGUgKTtcbiAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEhUTUw1SGlzdG9yeTtcblxuICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28gKG4pIHtcbiAgICB3aW5kb3cuaGlzdG9yeS5nbyhuKTtcbiAgfTtcblxuICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIHJlZiA9IHRoaXM7XG4gICAgdmFyIGZyb21Sb3V0ZSA9IHJlZi5jdXJyZW50O1xuICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgIHB1c2hTdGF0ZShjbGVhblBhdGgodGhpcyQxLmJhc2UgKyByb3V0ZS5mdWxsUGF0aCkpO1xuICAgICAgaGFuZGxlU2Nyb2xsKHRoaXMkMS5yb3V0ZXIsIHJvdXRlLCBmcm9tUm91dGUsIGZhbHNlKTtcbiAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG4gICAgfSwgb25BYm9ydCk7XG4gIH07XG5cbiAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZSAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciByZWYgPSB0aGlzO1xuICAgIHZhciBmcm9tUm91dGUgPSByZWYuY3VycmVudDtcbiAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICByZXBsYWNlU3RhdGUoY2xlYW5QYXRoKHRoaXMkMS5iYXNlICsgcm91dGUuZnVsbFBhdGgpKTtcbiAgICAgIGhhbmRsZVNjcm9sbCh0aGlzJDEucm91dGVyLCByb3V0ZSwgZnJvbVJvdXRlLCBmYWxzZSk7XG4gICAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuICAgIH0sIG9uQWJvcnQpO1xuICB9O1xuXG4gIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZW5zdXJlVVJMID0gZnVuY3Rpb24gZW5zdXJlVVJMIChwdXNoKSB7XG4gICAgaWYgKGdldExvY2F0aW9uKHRoaXMuYmFzZSkgIT09IHRoaXMuY3VycmVudC5mdWxsUGF0aCkge1xuICAgICAgdmFyIGN1cnJlbnQgPSBjbGVhblBhdGgodGhpcy5iYXNlICsgdGhpcy5jdXJyZW50LmZ1bGxQYXRoKTtcbiAgICAgIHB1c2ggPyBwdXNoU3RhdGUoY3VycmVudCkgOiByZXBsYWNlU3RhdGUoY3VycmVudCk7XG4gICAgfVxuICB9O1xuXG4gIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZ2V0Q3VycmVudExvY2F0aW9uID0gZnVuY3Rpb24gZ2V0Q3VycmVudExvY2F0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0TG9jYXRpb24odGhpcy5iYXNlKVxuICB9O1xuXG4gIHJldHVybiBIVE1MNUhpc3Rvcnk7XG59KEhpc3RvcnkpKTtcblxuZnVuY3Rpb24gZ2V0TG9jYXRpb24gKGJhc2UpIHtcbiAgdmFyIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG4gIGlmIChiYXNlICYmIHBhdGguaW5kZXhPZihiYXNlKSA9PT0gMCkge1xuICAgIHBhdGggPSBwYXRoLnNsaWNlKGJhc2UubGVuZ3RoKTtcbiAgfVxuICByZXR1cm4gKHBhdGggfHwgJy8nKSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3aW5kb3cubG9jYXRpb24uaGFzaFxufVxuXG4vKiAgKi9cblxuXG52YXIgSGFzaEhpc3RvcnkgPSAoZnVuY3Rpb24gKEhpc3RvcnkkJDEpIHtcbiAgZnVuY3Rpb24gSGFzaEhpc3RvcnkgKHJvdXRlciwgYmFzZSwgZmFsbGJhY2spIHtcbiAgICBIaXN0b3J5JCQxLmNhbGwodGhpcywgcm91dGVyLCBiYXNlKTtcbiAgICAvLyBjaGVjayBoaXN0b3J5IGZhbGxiYWNrIGRlZXBsaW5raW5nXG4gICAgaWYgKGZhbGxiYWNrICYmIGNoZWNrRmFsbGJhY2sodGhpcy5iYXNlKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGVuc3VyZVNsYXNoKCk7XG4gIH1cblxuICBpZiAoIEhpc3RvcnkkJDEgKSBIYXNoSGlzdG9yeS5fX3Byb3RvX18gPSBIaXN0b3J5JCQxO1xuICBIYXNoSGlzdG9yeS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBIaXN0b3J5JCQxICYmIEhpc3RvcnkkJDEucHJvdG90eXBlICk7XG4gIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEhhc2hIaXN0b3J5O1xuXG4gIC8vIHRoaXMgaXMgZGVsYXllZCB1bnRpbCB0aGUgYXBwIG1vdW50c1xuICAvLyB0byBhdm9pZCB0aGUgaGFzaGNoYW5nZSBsaXN0ZW5lciBiZWluZyBmaXJlZCB0b28gZWFybHlcbiAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnNldHVwTGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMgKCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyO1xuICAgIHZhciBleHBlY3RTY3JvbGwgPSByb3V0ZXIub3B0aW9ucy5zY3JvbGxCZWhhdmlvcjtcbiAgICB2YXIgc3VwcG9ydHNTY3JvbGwgPSBzdXBwb3J0c1B1c2hTdGF0ZSAmJiBleHBlY3RTY3JvbGw7XG5cbiAgICBpZiAoc3VwcG9ydHNTY3JvbGwpIHtcbiAgICAgIHNldHVwU2Nyb2xsKCk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoc3VwcG9ydHNQdXNoU3RhdGUgPyAncG9wc3RhdGUnIDogJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY3VycmVudCA9IHRoaXMkMS5jdXJyZW50O1xuICAgICAgaWYgKCFlbnN1cmVTbGFzaCgpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgdGhpcyQxLnRyYW5zaXRpb25UbyhnZXRIYXNoKCksIGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgICAgICBpZiAoc3VwcG9ydHNTY3JvbGwpIHtcbiAgICAgICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGN1cnJlbnQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3VwcG9ydHNQdXNoU3RhdGUpIHtcbiAgICAgICAgICByZXBsYWNlSGFzaChyb3V0ZS5mdWxsUGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciByZWYgPSB0aGlzO1xuICAgIHZhciBmcm9tUm91dGUgPSByZWYuY3VycmVudDtcbiAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICBwdXNoSGFzaChyb3V0ZS5mdWxsUGF0aCk7XG4gICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGZyb21Sb3V0ZSwgZmFsc2UpO1xuICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcbiAgICB9LCBvbkFib3J0KTtcbiAgfTtcblxuICBIYXNoSGlzdG9yeS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UgKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgcmVmID0gdGhpcztcbiAgICB2YXIgZnJvbVJvdXRlID0gcmVmLmN1cnJlbnQ7XG4gICAgdGhpcy50cmFuc2l0aW9uVG8obG9jYXRpb24sIGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgICAgcmVwbGFjZUhhc2gocm91dGUuZnVsbFBhdGgpO1xuICAgICAgaGFuZGxlU2Nyb2xsKHRoaXMkMS5yb3V0ZXIsIHJvdXRlLCBmcm9tUm91dGUsIGZhbHNlKTtcbiAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG4gICAgfSwgb25BYm9ydCk7XG4gIH07XG5cbiAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28gKG4pIHtcbiAgICB3aW5kb3cuaGlzdG9yeS5nbyhuKTtcbiAgfTtcblxuICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZW5zdXJlVVJMID0gZnVuY3Rpb24gZW5zdXJlVVJMIChwdXNoKSB7XG4gICAgdmFyIGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQuZnVsbFBhdGg7XG4gICAgaWYgKGdldEhhc2goKSAhPT0gY3VycmVudCkge1xuICAgICAgcHVzaCA/IHB1c2hIYXNoKGN1cnJlbnQpIDogcmVwbGFjZUhhc2goY3VycmVudCk7XG4gICAgfVxuICB9O1xuXG4gIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5nZXRDdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbiBnZXRDdXJyZW50TG9jYXRpb24gKCkge1xuICAgIHJldHVybiBnZXRIYXNoKClcbiAgfTtcblxuICByZXR1cm4gSGFzaEhpc3Rvcnk7XG59KEhpc3RvcnkpKTtcblxuZnVuY3Rpb24gY2hlY2tGYWxsYmFjayAoYmFzZSkge1xuICB2YXIgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihiYXNlKTtcbiAgaWYgKCEvXlxcLyMvLnRlc3QobG9jYXRpb24pKSB7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoXG4gICAgICBjbGVhblBhdGgoYmFzZSArICcvIycgKyBsb2NhdGlvbilcbiAgICApO1xuICAgIHJldHVybiB0cnVlXG4gIH1cbn1cblxuZnVuY3Rpb24gZW5zdXJlU2xhc2ggKCkge1xuICB2YXIgcGF0aCA9IGdldEhhc2goKTtcbiAgaWYgKHBhdGguY2hhckF0KDApID09PSAnLycpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIHJlcGxhY2VIYXNoKCcvJyArIHBhdGgpO1xuICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gZ2V0SGFzaCAoKSB7XG4gIC8vIFdlIGNhbid0IHVzZSB3aW5kb3cubG9jYXRpb24uaGFzaCBoZXJlIGJlY2F1c2UgaXQncyBub3RcbiAgLy8gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMgLSBGaXJlZm94IHdpbGwgcHJlLWRlY29kZSBpdCFcbiAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgdmFyIGluZGV4ID0gaHJlZi5pbmRleE9mKCcjJyk7XG4gIHJldHVybiBpbmRleCA9PT0gLTEgPyAnJyA6IGhyZWYuc2xpY2UoaW5kZXggKyAxKVxufVxuXG5mdW5jdGlvbiBnZXRVcmwgKHBhdGgpIHtcbiAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgdmFyIGkgPSBocmVmLmluZGV4T2YoJyMnKTtcbiAgdmFyIGJhc2UgPSBpID49IDAgPyBocmVmLnNsaWNlKDAsIGkpIDogaHJlZjtcbiAgcmV0dXJuIChiYXNlICsgXCIjXCIgKyBwYXRoKVxufVxuXG5mdW5jdGlvbiBwdXNoSGFzaCAocGF0aCkge1xuICBpZiAoc3VwcG9ydHNQdXNoU3RhdGUpIHtcbiAgICBwdXNoU3RhdGUoZ2V0VXJsKHBhdGgpKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHBhdGg7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVwbGFjZUhhc2ggKHBhdGgpIHtcbiAgaWYgKHN1cHBvcnRzUHVzaFN0YXRlKSB7XG4gICAgcmVwbGFjZVN0YXRlKGdldFVybChwYXRoKSk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZ2V0VXJsKHBhdGgpKTtcbiAgfVxufVxuXG4vKiAgKi9cblxuXG52YXIgQWJzdHJhY3RIaXN0b3J5ID0gKGZ1bmN0aW9uIChIaXN0b3J5JCQxKSB7XG4gIGZ1bmN0aW9uIEFic3RyYWN0SGlzdG9yeSAocm91dGVyLCBiYXNlKSB7XG4gICAgSGlzdG9yeSQkMS5jYWxsKHRoaXMsIHJvdXRlciwgYmFzZSk7XG4gICAgdGhpcy5zdGFjayA9IFtdO1xuICAgIHRoaXMuaW5kZXggPSAtMTtcbiAgfVxuXG4gIGlmICggSGlzdG9yeSQkMSApIEFic3RyYWN0SGlzdG9yeS5fX3Byb3RvX18gPSBIaXN0b3J5JCQxO1xuICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSGlzdG9yeSQkMSAmJiBIaXN0b3J5JCQxLnByb3RvdHlwZSApO1xuICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQWJzdHJhY3RIaXN0b3J5O1xuXG4gIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2ggKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICB0aGlzJDEuc3RhY2sgPSB0aGlzJDEuc3RhY2suc2xpY2UoMCwgdGhpcyQxLmluZGV4ICsgMSkuY29uY2F0KHJvdXRlKTtcbiAgICAgIHRoaXMkMS5pbmRleCsrO1xuICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcbiAgICB9LCBvbkFib3J0KTtcbiAgfTtcblxuICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdGhpcy50cmFuc2l0aW9uVG8obG9jYXRpb24sIGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgICAgdGhpcyQxLnN0YWNrID0gdGhpcyQxLnN0YWNrLnNsaWNlKDAsIHRoaXMkMS5pbmRleCkuY29uY2F0KHJvdXRlKTtcbiAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG4gICAgfSwgb25BYm9ydCk7XG4gIH07XG5cbiAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvIChuKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgdGFyZ2V0SW5kZXggPSB0aGlzLmluZGV4ICsgbjtcbiAgICBpZiAodGFyZ2V0SW5kZXggPCAwIHx8IHRhcmdldEluZGV4ID49IHRoaXMuc3RhY2subGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdmFyIHJvdXRlID0gdGhpcy5zdGFja1t0YXJnZXRJbmRleF07XG4gICAgdGhpcy5jb25maXJtVHJhbnNpdGlvbihyb3V0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcyQxLmluZGV4ID0gdGFyZ2V0SW5kZXg7XG4gICAgICB0aGlzJDEudXBkYXRlUm91dGUocm91dGUpO1xuICAgIH0pO1xuICB9O1xuXG4gIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ2V0Q3VycmVudExvY2F0aW9uID0gZnVuY3Rpb24gZ2V0Q3VycmVudExvY2F0aW9uICgpIHtcbiAgICB2YXIgY3VycmVudCA9IHRoaXMuc3RhY2tbdGhpcy5zdGFjay5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gY3VycmVudCA/IGN1cnJlbnQuZnVsbFBhdGggOiAnLydcbiAgfTtcblxuICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmVuc3VyZVVSTCA9IGZ1bmN0aW9uIGVuc3VyZVVSTCAoKSB7XG4gICAgLy8gbm9vcFxuICB9O1xuXG4gIHJldHVybiBBYnN0cmFjdEhpc3Rvcnk7XG59KEhpc3RvcnkpKTtcblxuLyogICovXG5cbnZhciBWdWVSb3V0ZXIgPSBmdW5jdGlvbiBWdWVSb3V0ZXIgKG9wdGlvbnMpIHtcbiAgaWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cbiAgdGhpcy5hcHAgPSBudWxsO1xuICB0aGlzLmFwcHMgPSBbXTtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgdGhpcy5iZWZvcmVIb29rcyA9IFtdO1xuICB0aGlzLnJlc29sdmVIb29rcyA9IFtdO1xuICB0aGlzLmFmdGVySG9va3MgPSBbXTtcbiAgdGhpcy5tYXRjaGVyID0gY3JlYXRlTWF0Y2hlcihvcHRpb25zLnJvdXRlcyB8fCBbXSwgdGhpcyk7XG5cbiAgdmFyIG1vZGUgPSBvcHRpb25zLm1vZGUgfHwgJ2hhc2gnO1xuICB0aGlzLmZhbGxiYWNrID0gbW9kZSA9PT0gJ2hpc3RvcnknICYmICFzdXBwb3J0c1B1c2hTdGF0ZSAmJiBvcHRpb25zLmZhbGxiYWNrICE9PSBmYWxzZTtcbiAgaWYgKHRoaXMuZmFsbGJhY2spIHtcbiAgICBtb2RlID0gJ2hhc2gnO1xuICB9XG4gIGlmICghaW5Ccm93c2VyKSB7XG4gICAgbW9kZSA9ICdhYnN0cmFjdCc7XG4gIH1cbiAgdGhpcy5tb2RlID0gbW9kZTtcblxuICBzd2l0Y2ggKG1vZGUpIHtcbiAgICBjYXNlICdoaXN0b3J5JzpcbiAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIVE1MNUhpc3RvcnkodGhpcywgb3B0aW9ucy5iYXNlKTtcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnaGFzaCc6XG4gICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGFzaEhpc3RvcnkodGhpcywgb3B0aW9ucy5iYXNlLCB0aGlzLmZhbGxiYWNrKTtcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYWJzdHJhY3QnOlxuICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEFic3RyYWN0SGlzdG9yeSh0aGlzLCBvcHRpb25zLmJhc2UpO1xuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAoXCJpbnZhbGlkIG1vZGU6IFwiICsgbW9kZSkpO1xuICAgICAgfVxuICB9XG59O1xuXG52YXIgcHJvdG90eXBlQWNjZXNzb3JzID0geyBjdXJyZW50Um91dGU6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5tYXRjaCA9IGZ1bmN0aW9uIG1hdGNoIChcbiAgcmF3LFxuICBjdXJyZW50LFxuICByZWRpcmVjdGVkRnJvbVxuKSB7XG4gIHJldHVybiB0aGlzLm1hdGNoZXIubWF0Y2gocmF3LCBjdXJyZW50LCByZWRpcmVjdGVkRnJvbSlcbn07XG5cbnByb3RvdHlwZUFjY2Vzc29ycy5jdXJyZW50Um91dGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5oaXN0b3J5ICYmIHRoaXMuaGlzdG9yeS5jdXJyZW50XG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiBpbml0IChhcHAgLyogVnVlIGNvbXBvbmVudCBpbnN0YW5jZSAqLykge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgYXNzZXJ0KFxuICAgIGluc3RhbGwuaW5zdGFsbGVkLFxuICAgIFwibm90IGluc3RhbGxlZC4gTWFrZSBzdXJlIHRvIGNhbGwgYFZ1ZS51c2UoVnVlUm91dGVyKWAgXCIgK1xuICAgIFwiYmVmb3JlIGNyZWF0aW5nIHJvb3QgaW5zdGFuY2UuXCJcbiAgKTtcblxuICB0aGlzLmFwcHMucHVzaChhcHApO1xuXG4gIC8vIG1haW4gYXBwIGFscmVhZHkgaW5pdGlhbGl6ZWQuXG4gIGlmICh0aGlzLmFwcCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdGhpcy5hcHAgPSBhcHA7XG5cbiAgdmFyIGhpc3RvcnkgPSB0aGlzLmhpc3Rvcnk7XG5cbiAgaWYgKGhpc3RvcnkgaW5zdGFuY2VvZiBIVE1MNUhpc3RvcnkpIHtcbiAgICBoaXN0b3J5LnRyYW5zaXRpb25UbyhoaXN0b3J5LmdldEN1cnJlbnRMb2NhdGlvbigpKTtcbiAgfSBlbHNlIGlmIChoaXN0b3J5IGluc3RhbmNlb2YgSGFzaEhpc3RvcnkpIHtcbiAgICB2YXIgc2V0dXBIYXNoTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBoaXN0b3J5LnNldHVwTGlzdGVuZXJzKCk7XG4gICAgfTtcbiAgICBoaXN0b3J5LnRyYW5zaXRpb25UbyhcbiAgICAgIGhpc3RvcnkuZ2V0Q3VycmVudExvY2F0aW9uKCksXG4gICAgICBzZXR1cEhhc2hMaXN0ZW5lcixcbiAgICAgIHNldHVwSGFzaExpc3RlbmVyXG4gICAgKTtcbiAgfVxuXG4gIGhpc3RvcnkubGlzdGVuKGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgIHRoaXMkMS5hcHBzLmZvckVhY2goZnVuY3Rpb24gKGFwcCkge1xuICAgICAgYXBwLl9yb3V0ZSA9IHJvdXRlO1xuICAgIH0pO1xuICB9KTtcbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUuYmVmb3JlRWFjaCA9IGZ1bmN0aW9uIGJlZm9yZUVhY2ggKGZuKSB7XG4gIHJldHVybiByZWdpc3Rlckhvb2sodGhpcy5iZWZvcmVIb29rcywgZm4pXG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLmJlZm9yZVJlc29sdmUgPSBmdW5jdGlvbiBiZWZvcmVSZXNvbHZlIChmbikge1xuICByZXR1cm4gcmVnaXN0ZXJIb29rKHRoaXMucmVzb2x2ZUhvb2tzLCBmbilcbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUuYWZ0ZXJFYWNoID0gZnVuY3Rpb24gYWZ0ZXJFYWNoIChmbikge1xuICByZXR1cm4gcmVnaXN0ZXJIb29rKHRoaXMuYWZ0ZXJIb29rcywgZm4pXG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbiBvblJlYWR5IChjYiwgZXJyb3JDYikge1xuICB0aGlzLmhpc3Rvcnkub25SZWFkeShjYiwgZXJyb3JDYik7XG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yIChlcnJvckNiKSB7XG4gIHRoaXMuaGlzdG9yeS5vbkVycm9yKGVycm9yQ2IpO1xufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcbiAgdGhpcy5oaXN0b3J5LnB1c2gobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpO1xufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZSAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcbiAgdGhpcy5oaXN0b3J5LnJlcGxhY2UobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpO1xufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvIChuKSB7XG4gIHRoaXMuaGlzdG9yeS5nbyhuKTtcbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUuYmFjayA9IGZ1bmN0aW9uIGJhY2sgKCkge1xuICB0aGlzLmdvKC0xKTtcbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUuZm9yd2FyZCA9IGZ1bmN0aW9uIGZvcndhcmQgKCkge1xuICB0aGlzLmdvKDEpO1xufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5nZXRNYXRjaGVkQ29tcG9uZW50cyA9IGZ1bmN0aW9uIGdldE1hdGNoZWRDb21wb25lbnRzICh0bykge1xuICB2YXIgcm91dGUgPSB0b1xuICAgID8gdG8ubWF0Y2hlZFxuICAgICAgPyB0b1xuICAgICAgOiB0aGlzLnJlc29sdmUodG8pLnJvdXRlXG4gICAgOiB0aGlzLmN1cnJlbnRSb3V0ZTtcbiAgaWYgKCFyb3V0ZSkge1xuICAgIHJldHVybiBbXVxuICB9XG4gIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIHJvdXRlLm1hdGNoZWQubWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG0uY29tcG9uZW50cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBtLmNvbXBvbmVudHNba2V5XVxuICAgIH0pXG4gIH0pKVxufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24gcmVzb2x2ZSAoXG4gIHRvLFxuICBjdXJyZW50LFxuICBhcHBlbmRcbikge1xuICB2YXIgbG9jYXRpb24gPSBub3JtYWxpemVMb2NhdGlvbihcbiAgICB0byxcbiAgICBjdXJyZW50IHx8IHRoaXMuaGlzdG9yeS5jdXJyZW50LFxuICAgIGFwcGVuZCxcbiAgICB0aGlzXG4gICk7XG4gIHZhciByb3V0ZSA9IHRoaXMubWF0Y2gobG9jYXRpb24sIGN1cnJlbnQpO1xuICB2YXIgZnVsbFBhdGggPSByb3V0ZS5yZWRpcmVjdGVkRnJvbSB8fCByb3V0ZS5mdWxsUGF0aDtcbiAgdmFyIGJhc2UgPSB0aGlzLmhpc3RvcnkuYmFzZTtcbiAgdmFyIGhyZWYgPSBjcmVhdGVIcmVmKGJhc2UsIGZ1bGxQYXRoLCB0aGlzLm1vZGUpO1xuICByZXR1cm4ge1xuICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICByb3V0ZTogcm91dGUsXG4gICAgaHJlZjogaHJlZixcbiAgICAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdFxuICAgIG5vcm1hbGl6ZWRUbzogbG9jYXRpb24sXG4gICAgcmVzb2x2ZWQ6IHJvdXRlXG4gIH1cbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUuYWRkUm91dGVzID0gZnVuY3Rpb24gYWRkUm91dGVzIChyb3V0ZXMpIHtcbiAgdGhpcy5tYXRjaGVyLmFkZFJvdXRlcyhyb3V0ZXMpO1xuICBpZiAodGhpcy5oaXN0b3J5LmN1cnJlbnQgIT09IFNUQVJUKSB7XG4gICAgdGhpcy5oaXN0b3J5LnRyYW5zaXRpb25Ubyh0aGlzLmhpc3RvcnkuZ2V0Q3VycmVudExvY2F0aW9uKCkpO1xuICB9XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyggVnVlUm91dGVyLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cbmZ1bmN0aW9uIHJlZ2lzdGVySG9vayAobGlzdCwgZm4pIHtcbiAgbGlzdC5wdXNoKGZuKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaSA9IGxpc3QuaW5kZXhPZihmbik7XG4gICAgaWYgKGkgPiAtMSkgeyBsaXN0LnNwbGljZShpLCAxKTsgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhyZWYgKGJhc2UsIGZ1bGxQYXRoLCBtb2RlKSB7XG4gIHZhciBwYXRoID0gbW9kZSA9PT0gJ2hhc2gnID8gJyMnICsgZnVsbFBhdGggOiBmdWxsUGF0aDtcbiAgcmV0dXJuIGJhc2UgPyBjbGVhblBhdGgoYmFzZSArICcvJyArIHBhdGgpIDogcGF0aFxufVxuXG5WdWVSb3V0ZXIuaW5zdGFsbCA9IGluc3RhbGw7XG5WdWVSb3V0ZXIudmVyc2lvbiA9ICczLjAuMSc7XG5cbmlmIChpbkJyb3dzZXIgJiYgd2luZG93LlZ1ZSkge1xuICB3aW5kb3cuVnVlLnVzZShWdWVSb3V0ZXIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZ1ZVJvdXRlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92dWUtcm91dGVyL2Rpc3QvdnVlLXJvdXRlci5jb21tb24uanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9heGlvcycpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBBeGlvcyA9IHJlcXVpcmUoJy4vY29yZS9BeGlvcycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkXG52YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuYXhpb3MuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gIHJldHVybiBjcmVhdGVJbnN0YW5jZSh1dGlscy5tZXJnZShkZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTtcbn07XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsJyk7XG5heGlvcy5DYW5jZWxUb2tlbiA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbFRva2VuJyk7XG5heGlvcy5pc0NhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL2lzQ2FuY2VsJyk7XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5heGlvcy5zcHJlYWQgPSByZXF1aXJlKCcuL2hlbHBlcnMvc3ByZWFkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9heGlvcy5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBpc0J1ZmZlciA9IHJlcXVpcmUoJ2lzLWJ1ZmZlcicpO1xuXG4vKmdsb2JhbCB0b1N0cmluZzp0cnVlKi9cblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuICByZXR1cm4gKHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcpICYmICh2YWwgaW5zdGFuY2VvZiBGb3JtRGF0YSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcbiAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKHZhbC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIE51bWJlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgTnVtYmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIERhdGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0ZpbGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Jsb2IodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyZWFtKHZhbCkge1xuICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcztcbn1cblxuLyoqXG4gKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuICogQHJldHVybnMge1N0cmluZ30gVGhlIFN0cmluZyBmcmVlZCBvZiBleGNlc3Mgd2hpdGVzcGFjZVxuICovXG5mdW5jdGlvbiB0cmltKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqLywgJycpLnJlcGxhY2UoL1xccyokLywgJycpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudFxuICpcbiAqIFRoaXMgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXIsIGFuZCByZWFjdC1uYXRpdmUuXG4gKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuXG4gKlxuICogd2ViIHdvcmtlcnM6XG4gKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWRcbiAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkXG4gKlxuICogcmVhY3QtbmF0aXZlOlxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZSdcbiAqL1xuZnVuY3Rpb24gaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkXG4gKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG4gKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYVxuICovXG5mdW5jdGlvbiBleHRlbmQoYSwgYiwgdGhpc0FyZykge1xuICBmb3JFYWNoKGIsIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG4gICAgaWYgKHRoaXNBcmcgJiYgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhW2tleV0gPSB2YWw7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0FycmF5OiBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcjogaXNCdWZmZXIsXG4gIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG4gIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldyxcbiAgaXNTdHJpbmc6IGlzU3RyaW5nLFxuICBpc051bWJlcjogaXNOdW1iZXIsXG4gIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc0RhdGU6IGlzRGF0ZSxcbiAgaXNGaWxlOiBpc0ZpbGUsXG4gIGlzQmxvYjogaXNCbG9iLFxuICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuICBpc1N0cmVhbTogaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcyxcbiAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuICBmb3JFYWNoOiBmb3JFYWNoLFxuICBtZXJnZTogbWVyZ2UsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICB0cmltOiB0cmltXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJncyk7XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIVxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlclxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cblxuLy8gVGhlIF9pc0J1ZmZlciBjaGVjayBpcyBmb3IgU2FmYXJpIDUtNyBzdXBwb3J0LCBiZWNhdXNlIGl0J3MgbWlzc2luZ1xuLy8gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiAoaXNCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSB8fCAhIW9iai5faXNCdWZmZXIpXG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyIChvYmopIHtcbiAgcmV0dXJuICEhb2JqLmNvbnN0cnVjdG9yICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iailcbn1cblxuLy8gRm9yIE5vZGUgdjAuMTAgc3VwcG9ydC4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseS5cbmZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2lzLWJ1ZmZlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLy4uL2RlZmF1bHRzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgSW50ZXJjZXB0b3JNYW5hZ2VyID0gcmVxdWlyZSgnLi9JbnRlcmNlcHRvck1hbmFnZXInKTtcbnZhciBkaXNwYXRjaFJlcXVlc3QgPSByZXF1aXJlKCcuL2Rpc3BhdGNoUmVxdWVzdCcpO1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZUNvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBBeGlvcyhpbnN0YW5jZUNvbmZpZykge1xuICB0aGlzLmRlZmF1bHRzID0gaW5zdGFuY2VDb25maWc7XG4gIHRoaXMuaW50ZXJjZXB0b3JzID0ge1xuICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxcbiAgICByZXNwb25zZTogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpXG4gIH07XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHNwZWNpZmljIGZvciB0aGlzIHJlcXVlc3QgKG1lcmdlZCB3aXRoIHRoaXMuZGVmYXVsdHMpXG4gKi9cbkF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChjb25maWcpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIC8vIEFsbG93IGZvciBheGlvcygnZXhhbXBsZS91cmwnWywgY29uZmlnXSkgYSBsYSBmZXRjaCBBUElcbiAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uZmlnID0gdXRpbHMubWVyZ2Uoe1xuICAgICAgdXJsOiBhcmd1bWVudHNbMF1cbiAgICB9LCBhcmd1bWVudHNbMV0pO1xuICB9XG5cbiAgY29uZmlnID0gdXRpbHMubWVyZ2UoZGVmYXVsdHMsIHttZXRob2Q6ICdnZXQnfSwgdGhpcy5kZWZhdWx0cywgY29uZmlnKTtcbiAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcblxuICAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG4gIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07XG4gIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuLy8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9BeGlvcy5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgbm9ybWFsaXplSGVhZGVyTmFtZSA9IHJlcXVpcmUoJy4vaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lJyk7XG5cbnZhciBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHtcbiAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG5mdW5jdGlvbiBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgdmFsdWUpIHtcbiAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzKSAmJiB1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzWydDb250ZW50LVR5cGUnXSkpIHtcbiAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCkge1xuICB2YXIgYWRhcHRlcjtcbiAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMveGhyJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gRm9yIG5vZGUgdXNlIEhUVFAgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuL2FkYXB0ZXJzL2h0dHAnKTtcbiAgfVxuICByZXR1cm4gYWRhcHRlcjtcbn1cblxudmFyIGRlZmF1bHRzID0ge1xuICBhZGFwdGVyOiBnZXREZWZhdWx0QWRhcHRlcigpLFxuXG4gIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHtcbiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKTtcbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzU3RyZWFtKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0ZpbGUoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQmxvYihkYXRhKVxuICAgICkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyVmlldyhkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnKTtcbiAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc09iamVjdChkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkgeyAvKiBJZ25vcmUgKi8gfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgLyoqXG4gICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYVxuICAgKiB0aW1lb3V0IGlzIG5vdCBjcmVhdGVkLlxuICAgKi9cbiAgdGltZW91dDogMCxcblxuICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsXG5cbiAgbWF4Q29udGVudExlbmd0aDogLTEsXG5cbiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcbiAgfVxufTtcblxuZGVmYXVsdHMuaGVhZGVycyA9IHtcbiAgY29tbW9uOiB7XG4gICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG4gIH1cbn07XG5cbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0gdXRpbHMubWVyZ2UoREVGQVVMVF9DT05URU5UX1RZUEUpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdHM7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2RlZmF1bHRzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCBub3JtYWxpemVkTmFtZSkge1xuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIodmFsdWUsIG5hbWUpIHtcbiAgICBpZiAobmFtZSAhPT0gbm9ybWFsaXplZE5hbWUgJiYgbmFtZS50b1VwcGVyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICBoZWFkZXJzW25vcm1hbGl6ZWROYW1lXSA9IHZhbHVlO1xuICAgICAgZGVsZXRlIGhlYWRlcnNbbmFtZV07XG4gICAgfVxuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZS5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgc2V0dGxlID0gcmVxdWlyZSgnLi8uLi9jb3JlL3NldHRsZScpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2J1aWxkVVJMJyk7XG52YXIgcGFyc2VIZWFkZXJzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL3BhcnNlSGVhZGVycycpO1xudmFyIGlzVVJMU2FtZU9yaWdpbiA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9pc1VSTFNhbWVPcmlnaW4nKTtcbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4uL2NvcmUvY3JlYXRlRXJyb3InKTtcbnZhciBidG9hID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5idG9hICYmIHdpbmRvdy5idG9hLmJpbmQod2luZG93KSkgfHwgcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2J0b2EnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB4aHJBZGFwdGVyKGNvbmZpZykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZXF1ZXN0RGF0YSA9IGNvbmZpZy5kYXRhO1xuICAgIHZhciByZXF1ZXN0SGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xuXG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpKSB7XG4gICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddOyAvLyBMZXQgdGhlIGJyb3dzZXIgc2V0IGl0XG4gICAgfVxuXG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB2YXIgbG9hZEV2ZW50ID0gJ29ucmVhZHlzdGF0ZWNoYW5nZSc7XG4gICAgdmFyIHhEb21haW4gPSBmYWxzZTtcblxuICAgIC8vIEZvciBJRSA4LzkgQ09SUyBzdXBwb3J0XG4gICAgLy8gT25seSBzdXBwb3J0cyBQT1NUIGFuZCBHRVQgY2FsbHMgYW5kIGRvZXNuJ3QgcmV0dXJucyB0aGUgcmVzcG9uc2UgaGVhZGVycy5cbiAgICAvLyBET04nVCBkbyB0aGlzIGZvciB0ZXN0aW5nIGIvYyBYTUxIdHRwUmVxdWVzdCBpcyBtb2NrZWQsIG5vdCBYRG9tYWluUmVxdWVzdC5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0JyAmJlxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB3aW5kb3cuWERvbWFpblJlcXVlc3QgJiYgISgnd2l0aENyZWRlbnRpYWxzJyBpbiByZXF1ZXN0KSAmJlxuICAgICAgICAhaXNVUkxTYW1lT3JpZ2luKGNvbmZpZy51cmwpKSB7XG4gICAgICByZXF1ZXN0ID0gbmV3IHdpbmRvdy5YRG9tYWluUmVxdWVzdCgpO1xuICAgICAgbG9hZEV2ZW50ID0gJ29ubG9hZCc7XG4gICAgICB4RG9tYWluID0gdHJ1ZTtcbiAgICAgIHJlcXVlc3Qub25wcm9ncmVzcyA9IGZ1bmN0aW9uIGhhbmRsZVByb2dyZXNzKCkge307XG4gICAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7fTtcbiAgICB9XG5cbiAgICAvLyBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uXG4gICAgaWYgKGNvbmZpZy5hdXRoKSB7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCAnJztcbiAgICAgIHZhciBwYXNzd29yZCA9IGNvbmZpZy5hdXRoLnBhc3N3b3JkIHx8ICcnO1xuICAgICAgcmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChjb25maWcudXJsLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpO1xuXG4gICAgLy8gU2V0IHRoZSByZXF1ZXN0IHRpbWVvdXQgaW4gTVNcbiAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcblxuICAgIC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGVcbiAgICByZXF1ZXN0W2xvYWRFdmVudF0gPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuICAgICAgaWYgKCFyZXF1ZXN0IHx8IChyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQgJiYgIXhEb21haW4pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlIHJlcXVlc3QgZXJyb3JlZCBvdXQgYW5kIHdlIGRpZG4ndCBnZXQgYSByZXNwb25zZSwgdGhpcyB3aWxsIGJlXG4gICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcbiAgICAgIC8vIHdpbGwgcmV0dXJuIHN0YXR1cyBhcyAwIGV2ZW4gdGhvdWdoIGl0J3MgYSBzdWNjZXNzZnVsIHJlcXVlc3RcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlXG4gICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzID0gJ2dldEFsbFJlc3BvbnNlSGVhZGVycycgaW4gcmVxdWVzdCA/IHBhcnNlSGVhZGVycyhyZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSA6IG51bGw7XG4gICAgICB2YXIgcmVzcG9uc2VEYXRhID0gIWNvbmZpZy5yZXNwb25zZVR5cGUgfHwgY29uZmlnLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnID8gcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIC8vIElFIHNlbmRzIDEyMjMgaW5zdGVhZCBvZiAyMDQgKGh0dHBzOi8vZ2l0aHViLmNvbS9heGlvcy9heGlvcy9pc3N1ZXMvMjAxKVxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzID09PSAxMjIzID8gMjA0IDogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzID09PSAxMjIzID8gJ05vIENvbnRlbnQnIDogcmVxdWVzdC5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICByZXF1ZXN0OiByZXF1ZXN0XG4gICAgICB9O1xuXG4gICAgICBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcigndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLFxuICAgICAgICByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG4gICAgICB2YXIgY29va2llcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb29raWVzJyk7XG5cbiAgICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cbiAgICAgICAgICBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6XG4gICAgICAgICAgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgIHJlcXVlc3RIZWFkZXJzW2NvbmZpZy54c3JmSGVhZGVyTmFtZV0gPSB4c3JmVmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3RcbiAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHtcbiAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMsIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0RGF0YSA9PT0gJ3VuZGVmaW5lZCcgJiYga2V5LnRvTG93ZXJDYXNlKCkgPT09ICdjb250ZW50LXR5cGUnKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0XG4gICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcud2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEV4cGVjdGVkIERPTUV4Y2VwdGlvbiB0aHJvd24gYnkgYnJvd3NlcnMgbm90IGNvbXBhdGlibGUgWE1MSHR0cFJlcXVlc3QgTGV2ZWwgMi5cbiAgICAgICAgLy8gQnV0LCB0aGlzIGNhbiBiZSBzdXBwcmVzc2VkIGZvciAnanNvbicgdHlwZSBhcyBpdCBjYW4gYmUgcGFyc2VkIGJ5IGRlZmF1bHQgJ3RyYW5zZm9ybVJlc3BvbnNlJyBmdW5jdGlvbi5cbiAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVqZWN0KGNhbmNlbCk7XG4gICAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuL2NyZWF0ZUVycm9yJyk7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcbiAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICAvLyBOb3RlOiBzdGF0dXMgaXMgbm90IGV4cG9zZWQgYnkgWERvbWFpblJlcXVlc3RcbiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgbnVsbCxcbiAgICAgIHJlc3BvbnNlLnJlcXVlc3QsXG4gICAgICByZXNwb25zZVxuICAgICkpO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL3NldHRsZS5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW5oYW5jZUVycm9yID0gcmVxdWlyZSgnLi9lbmhhbmNlRXJyb3InKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgcmVxdWVzdCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlRXJyb3IobWVzc2FnZSwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9jcmVhdGVFcnJvci5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIGVycm9yLmNvbmZpZyA9IGNvbmZpZztcbiAgaWYgKGNvZGUpIHtcbiAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgfVxuICBlcnJvci5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgcmV0dXJuIGVycm9yO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9lbmhhbmNlRXJyb3IuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG4gICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICByZXBsYWNlKC8lMjAvZywgJysnKS5cbiAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG4gICAgcmVwbGFjZSgvJTVEL2dpLCAnXScpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKVxuICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIGlmICghcGFyYW1zKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHZhciBzZXJpYWxpemVkUGFyYW1zO1xuICBpZiAocGFyYW1zU2VyaWFsaXplcikge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7XG4gIH0gZWxzZSBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSkge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgIHV0aWxzLmZvckVhY2gocGFyYW1zLCBmdW5jdGlvbiBzZXJpYWxpemUodmFsLCBrZXkpIHtcbiAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodXRpbHMuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIGtleSA9IGtleSArICdbXSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBbdmFsXTtcbiAgICAgIH1cblxuICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7XG4gICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanNcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZVxuLy8gYy5mLiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVyc1xudmFyIGlnbm9yZUR1cGxpY2F0ZU9mID0gW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl07XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga2V5O1xuICB2YXIgdmFsO1xuICB2YXIgaTtcblxuICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXG4gIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBoYXZlIGZ1bGwgc3VwcG9ydCBvZiB0aGUgQVBJcyBuZWVkZWQgdG8gdGVzdFxuICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkge1xuICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG4gICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgfVxuXG4gICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblxuICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICB9O1xuICAgIH1cblxuICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7XG4gICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9KSgpXG4pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qc1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBidG9hIHBvbHlmaWxsIGZvciBJRTwxMCBjb3VydGVzeSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRjaGFtYmVycy9CYXNlNjQuanNcblxudmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcblxuZnVuY3Rpb24gRSgpIHtcbiAgdGhpcy5tZXNzYWdlID0gJ1N0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3Rlcic7XG59XG5FLnByb3RvdHlwZSA9IG5ldyBFcnJvcjtcbkUucHJvdG90eXBlLmNvZGUgPSA1O1xuRS5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXG5mdW5jdGlvbiBidG9hKGlucHV0KSB7XG4gIHZhciBzdHIgPSBTdHJpbmcoaW5wdXQpO1xuICB2YXIgb3V0cHV0ID0gJyc7XG4gIGZvciAoXG4gICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgYW5kIGNvdW50ZXJcbiAgICB2YXIgYmxvY2ssIGNoYXJDb2RlLCBpZHggPSAwLCBtYXAgPSBjaGFycztcbiAgICAvLyBpZiB0aGUgbmV4dCBzdHIgaW5kZXggZG9lcyBub3QgZXhpc3Q6XG4gICAgLy8gICBjaGFuZ2UgdGhlIG1hcHBpbmcgdGFibGUgdG8gXCI9XCJcbiAgICAvLyAgIGNoZWNrIGlmIGQgaGFzIG5vIGZyYWN0aW9uYWwgZGlnaXRzXG4gICAgc3RyLmNoYXJBdChpZHggfCAwKSB8fCAobWFwID0gJz0nLCBpZHggJSAxKTtcbiAgICAvLyBcIjggLSBpZHggJSAxICogOFwiIGdlbmVyYXRlcyB0aGUgc2VxdWVuY2UgMiwgNCwgNiwgOFxuICAgIG91dHB1dCArPSBtYXAuY2hhckF0KDYzICYgYmxvY2sgPj4gOCAtIGlkeCAlIDEgKiA4KVxuICApIHtcbiAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGlkeCArPSAzIC8gNCk7XG4gICAgaWYgKGNoYXJDb2RlID4gMHhGRikge1xuICAgICAgdGhyb3cgbmV3IEUoKTtcbiAgICB9XG4gICAgYmxvY2sgPSBibG9jayA8PCA4IHwgY2hhckNvZGU7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBidG9hO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2J0b2EuanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG4gIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcbiAgICAgICAgdmFyIGNvb2tpZSA9IFtdO1xuICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ2V4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyZXMpLnRvR01UU3RyaW5nKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKGRvbWFpbikpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnZG9tYWluPScgKyBkb21haW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlY3VyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdzZWN1cmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuICAgICAgfSxcblxuICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7XG4gICAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG4gICAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG4gICAgICB9LFxuXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7XG4gICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52ICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiB7XG4gICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoKSB7fSxcbiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoKSB7IHJldHVybiBudWxsOyB9LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgIH07XG4gIH0pKClcbik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvY29va2llcy5qc1xuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpIHtcbiAgdGhpcy5oYW5kbGVycyA9IFtdO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuICpcbiAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXJcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCkge1xuICB0aGlzLmhhbmRsZXJzLnB1c2goe1xuICAgIGZ1bGZpbGxlZDogZnVsZmlsbGVkLFxuICAgIHJlamVjdGVkOiByZWplY3RlZFxuICB9KTtcbiAgcmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoIC0gMTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFuIGludGVyY2VwdG9yIGZyb20gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIFRoZSBJRCB0aGF0IHdhcyByZXR1cm5lZCBieSBgdXNlYFxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0ID0gZnVuY3Rpb24gZWplY3QoaWQpIHtcbiAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7XG4gICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG4gKlxuICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnlcbiAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHtcbiAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7XG4gICAgaWYgKGggIT09IG51bGwpIHtcbiAgICAgIGZuKGgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEludGVyY2VwdG9yTWFuYWdlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcbnZhciBpc0Fic29sdXRlVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwnKTtcbnZhciBjb21iaW5lVVJMcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb21iaW5lVVJMcycpO1xuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG4gIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIC8vIFN1cHBvcnQgYmFzZVVSTCBjb25maWdcbiAgaWYgKGNvbmZpZy5iYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKGNvbmZpZy51cmwpKSB7XG4gICAgY29uZmlnLnVybCA9IGNvbWJpbmVVUkxzKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcbiAgfVxuXG4gIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG4gIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgY29uZmlnLmRhdGEsXG4gICAgY29uZmlnLmhlYWRlcnMsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShcbiAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnMgfHwge31cbiAgKTtcblxuICB1dGlscy5mb3JFYWNoKFxuICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07XG4gICAgfVxuICApO1xuXG4gIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICByZXNwb25zZS5kYXRhLFxuICAgICAgcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcbiAgICBpZiAoIWlzQ2FuY2VsKHJlYXNvbikpIHtcbiAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8qKlxuICogVHJhbnNmb3JtIHRoZSBkYXRhIGZvciBhIHJlcXVlc3Qgb3IgYSByZXNwb25zZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gZGF0YSBUaGUgZGF0YSB0byBiZSB0cmFuc2Zvcm1lZFxuICogQHBhcmFtIHtBcnJheX0gaGVhZGVycyBUaGUgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3Qgb3IgcmVzcG9uc2VcbiAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb259IGZucyBBIHNpbmdsZSBmdW5jdGlvbiBvciBBcnJheSBvZiBmdW5jdGlvbnNcbiAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybWVkIGRhdGFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGRhdGEsIGhlYWRlcnMsIGZucykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuICAgIGRhdGEgPSBmbihkYXRhLCBoZWFkZXJzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkge1xuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkXFwrXFwtXFwuXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanNcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICovXG5mdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xufVxuXG5DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xufTtcblxuQ2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NhbmNlbC9DYW5jZWwuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIENhbmNlbCA9IHJlcXVpcmUoJy4vQ2FuY2VsJyk7XG5cbi8qKlxuICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHtcbiAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciByZXNvbHZlUHJvbWlzZTtcbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIHZhciB0b2tlbiA9IHRoaXM7XG4gIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG4gICAgaWYgKHRva2VuLnJlYXNvbikge1xuICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcbiAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7XG4gIGlmICh0aGlzLnJlYXNvbikge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBuZXcgYENhbmNlbFRva2VuYCBhbmQgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCxcbiAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuXG4gKi9cbkNhbmNlbFRva2VuLnNvdXJjZSA9IGZ1bmN0aW9uIHNvdXJjZSgpIHtcbiAgdmFyIGNhbmNlbDtcbiAgdmFyIHRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHtcbiAgICBjYW5jZWwgPSBjO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICB0b2tlbjogdG9rZW4sXG4gICAgY2FuY2VsOiBjYW5jZWxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FuY2VsVG9rZW47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuXG4gKlxuICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC5cbiAqXG4gKiAgYGBganNcbiAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9XG4gKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107XG4gKiAgZi5hcHBseShudWxsLCBhcmdzKTtcbiAqICBgYGBcbiAqXG4gKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cbiAqXG4gKiAgYGBganNcbiAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG4gKiAgYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qc1xuLy8gbW9kdWxlIGlkID0gMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFZ1ZSBmcm9tICd2dWUnXG5pbXBvcnQgVnVleCBmcm9tICd2dWV4J1xuXG5WdWUudXNlKFZ1ZXgpXG5cbmNvbnN0IHN0YXRlID0ge1xuICAgIGxvYWRTdGF0dXM6IGZhbHNlXG59XG5cbmNvbnN0IG11dGF0aW9ucyA9IHtcbiAgICAvL2xvYWRpbmflvIDlhbNcbiAgICBMT0FEX1NUQVRVUzogZnVuY3Rpb24oc3RhdGUsZGF0YSl7XG4gICAgICAgIHN0YXRlLmxvYWRTdGF0dXMgPSBkYXRhO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBuZXcgVnVleC5TdG9yZSh7XG4gICAgc3RhdGUsXG4gICAgbXV0YXRpb25zXG59KVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy92dWV4L3N0b3JlLmpzIiwiLyoqXG4gKiB2dWV4IHYzLjAuMVxuICogKGMpIDIwMTcgRXZhbiBZb3VcbiAqIEBsaWNlbnNlIE1JVFxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhcHBseU1peGluID0gZnVuY3Rpb24gKFZ1ZSkge1xuICB2YXIgdmVyc2lvbiA9IE51bWJlcihWdWUudmVyc2lvbi5zcGxpdCgnLicpWzBdKTtcblxuICBpZiAodmVyc2lvbiA+PSAyKSB7XG4gICAgVnVlLm1peGluKHsgYmVmb3JlQ3JlYXRlOiB2dWV4SW5pdCB9KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBvdmVycmlkZSBpbml0IGFuZCBpbmplY3QgdnVleCBpbml0IHByb2NlZHVyZVxuICAgIC8vIGZvciAxLnggYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gICAgdmFyIF9pbml0ID0gVnVlLnByb3RvdHlwZS5faW5pdDtcbiAgICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9O1xuXG4gICAgICBvcHRpb25zLmluaXQgPSBvcHRpb25zLmluaXRcbiAgICAgICAgPyBbdnVleEluaXRdLmNvbmNhdChvcHRpb25zLmluaXQpXG4gICAgICAgIDogdnVleEluaXQ7XG4gICAgICBfaW5pdC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVnVleCBpbml0IGhvb2ssIGluamVjdGVkIGludG8gZWFjaCBpbnN0YW5jZXMgaW5pdCBob29rcyBsaXN0LlxuICAgKi9cblxuICBmdW5jdGlvbiB2dWV4SW5pdCAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgIC8vIHN0b3JlIGluamVjdGlvblxuICAgIGlmIChvcHRpb25zLnN0b3JlKSB7XG4gICAgICB0aGlzLiRzdG9yZSA9IHR5cGVvZiBvcHRpb25zLnN0b3JlID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5zdG9yZSgpXG4gICAgICAgIDogb3B0aW9ucy5zdG9yZTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMucGFyZW50ICYmIG9wdGlvbnMucGFyZW50LiRzdG9yZSkge1xuICAgICAgdGhpcy4kc3RvcmUgPSBvcHRpb25zLnBhcmVudC4kc3RvcmU7XG4gICAgfVxuICB9XG59O1xuXG52YXIgZGV2dG9vbEhvb2sgPVxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblxuZnVuY3Rpb24gZGV2dG9vbFBsdWdpbiAoc3RvcmUpIHtcbiAgaWYgKCFkZXZ0b29sSG9vaykgeyByZXR1cm4gfVxuXG4gIHN0b3JlLl9kZXZ0b29sSG9vayA9IGRldnRvb2xIb29rO1xuXG4gIGRldnRvb2xIb29rLmVtaXQoJ3Z1ZXg6aW5pdCcsIHN0b3JlKTtcblxuICBkZXZ0b29sSG9vay5vbigndnVleDp0cmF2ZWwtdG8tc3RhdGUnLCBmdW5jdGlvbiAodGFyZ2V0U3RhdGUpIHtcbiAgICBzdG9yZS5yZXBsYWNlU3RhdGUodGFyZ2V0U3RhdGUpO1xuICB9KTtcblxuICBzdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKG11dGF0aW9uLCBzdGF0ZSkge1xuICAgIGRldnRvb2xIb29rLmVtaXQoJ3Z1ZXg6bXV0YXRpb24nLCBtdXRhdGlvbiwgc3RhdGUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZpcnN0IGl0ZW0gdGhhdCBwYXNzIHRoZSB0ZXN0XG4gKiBieSBzZWNvbmQgYXJndW1lbnQgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBsaXN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gKiBAcmV0dXJuIHsqfVxuICovXG4vKipcbiAqIERlZXAgY29weSB0aGUgZ2l2ZW4gb2JqZWN0IGNvbnNpZGVyaW5nIGNpcmN1bGFyIHN0cnVjdHVyZS5cbiAqIFRoaXMgZnVuY3Rpb24gY2FjaGVzIGFsbCBuZXN0ZWQgb2JqZWN0cyBhbmQgaXRzIGNvcGllcy5cbiAqIElmIGl0IGRldGVjdHMgY2lyY3VsYXIgc3RydWN0dXJlLCB1c2UgY2FjaGVkIGNvcHkgdG8gYXZvaWQgaW5maW5pdGUgbG9vcC5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBjYWNoZVxuICogQHJldHVybiB7Kn1cbiAqL1xuXG5cbi8qKlxuICogZm9yRWFjaCBmb3Igb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGZvckVhY2hWYWx1ZSAob2JqLCBmbikge1xuICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZm4ob2JqW2tleV0sIGtleSk7IH0pO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdCAob2JqKSB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCdcbn1cblxuZnVuY3Rpb24gaXNQcm9taXNlICh2YWwpIHtcbiAgcmV0dXJuIHZhbCAmJiB0eXBlb2YgdmFsLnRoZW4gPT09ICdmdW5jdGlvbidcbn1cblxuZnVuY3Rpb24gYXNzZXJ0IChjb25kaXRpb24sIG1zZykge1xuICBpZiAoIWNvbmRpdGlvbikgeyB0aHJvdyBuZXcgRXJyb3IoKFwiW3Z1ZXhdIFwiICsgbXNnKSkgfVxufVxuXG52YXIgTW9kdWxlID0gZnVuY3Rpb24gTW9kdWxlIChyYXdNb2R1bGUsIHJ1bnRpbWUpIHtcbiAgdGhpcy5ydW50aW1lID0gcnVudGltZTtcbiAgdGhpcy5fY2hpbGRyZW4gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLl9yYXdNb2R1bGUgPSByYXdNb2R1bGU7XG4gIHZhciByYXdTdGF0ZSA9IHJhd01vZHVsZS5zdGF0ZTtcbiAgdGhpcy5zdGF0ZSA9ICh0eXBlb2YgcmF3U3RhdGUgPT09ICdmdW5jdGlvbicgPyByYXdTdGF0ZSgpIDogcmF3U3RhdGUpIHx8IHt9O1xufTtcblxudmFyIHByb3RvdHlwZUFjY2Vzc29ycyQxID0geyBuYW1lc3BhY2VkOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cbnByb3RvdHlwZUFjY2Vzc29ycyQxLm5hbWVzcGFjZWQuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gISF0aGlzLl9yYXdNb2R1bGUubmFtZXNwYWNlZFxufTtcblxuTW9kdWxlLnByb3RvdHlwZS5hZGRDaGlsZCA9IGZ1bmN0aW9uIGFkZENoaWxkIChrZXksIG1vZHVsZSkge1xuICB0aGlzLl9jaGlsZHJlbltrZXldID0gbW9kdWxlO1xufTtcblxuTW9kdWxlLnByb3RvdHlwZS5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIHJlbW92ZUNoaWxkIChrZXkpIHtcbiAgZGVsZXRlIHRoaXMuX2NoaWxkcmVuW2tleV07XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmdldENoaWxkID0gZnVuY3Rpb24gZ2V0Q2hpbGQgKGtleSkge1xuICByZXR1cm4gdGhpcy5fY2hpbGRyZW5ba2V5XVxufTtcblxuTW9kdWxlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUgKHJhd01vZHVsZSkge1xuICB0aGlzLl9yYXdNb2R1bGUubmFtZXNwYWNlZCA9IHJhd01vZHVsZS5uYW1lc3BhY2VkO1xuICBpZiAocmF3TW9kdWxlLmFjdGlvbnMpIHtcbiAgICB0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucyA9IHJhd01vZHVsZS5hY3Rpb25zO1xuICB9XG4gIGlmIChyYXdNb2R1bGUubXV0YXRpb25zKSB7XG4gICAgdGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucyA9IHJhd01vZHVsZS5tdXRhdGlvbnM7XG4gIH1cbiAgaWYgKHJhd01vZHVsZS5nZXR0ZXJzKSB7XG4gICAgdGhpcy5fcmF3TW9kdWxlLmdldHRlcnMgPSByYXdNb2R1bGUuZ2V0dGVycztcbiAgfVxufTtcblxuTW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoQ2hpbGQgPSBmdW5jdGlvbiBmb3JFYWNoQ2hpbGQgKGZuKSB7XG4gIGZvckVhY2hWYWx1ZSh0aGlzLl9jaGlsZHJlbiwgZm4pO1xufTtcblxuTW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoR2V0dGVyID0gZnVuY3Rpb24gZm9yRWFjaEdldHRlciAoZm4pIHtcbiAgaWYgKHRoaXMuX3Jhd01vZHVsZS5nZXR0ZXJzKSB7XG4gICAgZm9yRWFjaFZhbHVlKHRoaXMuX3Jhd01vZHVsZS5nZXR0ZXJzLCBmbik7XG4gIH1cbn07XG5cbk1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaEFjdGlvbiA9IGZ1bmN0aW9uIGZvckVhY2hBY3Rpb24gKGZuKSB7XG4gIGlmICh0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucykge1xuICAgIGZvckVhY2hWYWx1ZSh0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucywgZm4pO1xuICB9XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmZvckVhY2hNdXRhdGlvbiA9IGZ1bmN0aW9uIGZvckVhY2hNdXRhdGlvbiAoZm4pIHtcbiAgaWYgKHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMpIHtcbiAgICBmb3JFYWNoVmFsdWUodGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucywgZm4pO1xuICB9XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyggTW9kdWxlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzJDEgKTtcblxudmFyIE1vZHVsZUNvbGxlY3Rpb24gPSBmdW5jdGlvbiBNb2R1bGVDb2xsZWN0aW9uIChyYXdSb290TW9kdWxlKSB7XG4gIC8vIHJlZ2lzdGVyIHJvb3QgbW9kdWxlIChWdWV4LlN0b3JlIG9wdGlvbnMpXG4gIHRoaXMucmVnaXN0ZXIoW10sIHJhd1Jvb3RNb2R1bGUsIGZhbHNlKTtcbn07XG5cbk1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKG1vZHVsZSwga2V5KSB7XG4gICAgcmV0dXJuIG1vZHVsZS5nZXRDaGlsZChrZXkpXG4gIH0sIHRoaXMucm9vdClcbn07XG5cbk1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldE5hbWVzcGFjZSA9IGZ1bmN0aW9uIGdldE5hbWVzcGFjZSAocGF0aCkge1xuICB2YXIgbW9kdWxlID0gdGhpcy5yb290O1xuICByZXR1cm4gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwga2V5KSB7XG4gICAgbW9kdWxlID0gbW9kdWxlLmdldENoaWxkKGtleSk7XG4gICAgcmV0dXJuIG5hbWVzcGFjZSArIChtb2R1bGUubmFtZXNwYWNlZCA/IGtleSArICcvJyA6ICcnKVxuICB9LCAnJylcbn07XG5cbk1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSQxIChyYXdSb290TW9kdWxlKSB7XG4gIHVwZGF0ZShbXSwgdGhpcy5yb290LCByYXdSb290TW9kdWxlKTtcbn07XG5cbk1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gcmVnaXN0ZXIgKHBhdGgsIHJhd01vZHVsZSwgcnVudGltZSkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuICAgIGlmICggcnVudGltZSA9PT0gdm9pZCAwICkgcnVudGltZSA9IHRydWU7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnRSYXdNb2R1bGUocGF0aCwgcmF3TW9kdWxlKTtcbiAgfVxuXG4gIHZhciBuZXdNb2R1bGUgPSBuZXcgTW9kdWxlKHJhd01vZHVsZSwgcnVudGltZSk7XG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgIHRoaXMucm9vdCA9IG5ld01vZHVsZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXQocGF0aC5zbGljZSgwLCAtMSkpO1xuICAgIHBhcmVudC5hZGRDaGlsZChwYXRoW3BhdGgubGVuZ3RoIC0gMV0sIG5ld01vZHVsZSk7XG4gIH1cblxuICAvLyByZWdpc3RlciBuZXN0ZWQgbW9kdWxlc1xuICBpZiAocmF3TW9kdWxlLm1vZHVsZXMpIHtcbiAgICBmb3JFYWNoVmFsdWUocmF3TW9kdWxlLm1vZHVsZXMsIGZ1bmN0aW9uIChyYXdDaGlsZE1vZHVsZSwga2V5KSB7XG4gICAgICB0aGlzJDEucmVnaXN0ZXIocGF0aC5jb25jYXQoa2V5KSwgcmF3Q2hpbGRNb2R1bGUsIHJ1bnRpbWUpO1xuICAgIH0pO1xuICB9XG59O1xuXG5Nb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS51bnJlZ2lzdGVyID0gZnVuY3Rpb24gdW5yZWdpc3RlciAocGF0aCkge1xuICB2YXIgcGFyZW50ID0gdGhpcy5nZXQocGF0aC5zbGljZSgwLCAtMSkpO1xuICB2YXIga2V5ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICBpZiAoIXBhcmVudC5nZXRDaGlsZChrZXkpLnJ1bnRpbWUpIHsgcmV0dXJuIH1cblxuICBwYXJlbnQucmVtb3ZlQ2hpbGQoa2V5KTtcbn07XG5cbmZ1bmN0aW9uIHVwZGF0ZSAocGF0aCwgdGFyZ2V0TW9kdWxlLCBuZXdNb2R1bGUpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnRSYXdNb2R1bGUocGF0aCwgbmV3TW9kdWxlKTtcbiAgfVxuXG4gIC8vIHVwZGF0ZSB0YXJnZXQgbW9kdWxlXG4gIHRhcmdldE1vZHVsZS51cGRhdGUobmV3TW9kdWxlKTtcblxuICAvLyB1cGRhdGUgbmVzdGVkIG1vZHVsZXNcbiAgaWYgKG5ld01vZHVsZS5tb2R1bGVzKSB7XG4gICAgZm9yICh2YXIga2V5IGluIG5ld01vZHVsZS5tb2R1bGVzKSB7XG4gICAgICBpZiAoIXRhcmdldE1vZHVsZS5nZXRDaGlsZChrZXkpKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgXCJbdnVleF0gdHJ5aW5nIHRvIGFkZCBhIG5ldyBtb2R1bGUgJ1wiICsga2V5ICsgXCInIG9uIGhvdCByZWxvYWRpbmcsIFwiICtcbiAgICAgICAgICAgICdtYW51YWwgcmVsb2FkIGlzIG5lZWRlZCdcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgdXBkYXRlKFxuICAgICAgICBwYXRoLmNvbmNhdChrZXkpLFxuICAgICAgICB0YXJnZXRNb2R1bGUuZ2V0Q2hpbGQoa2V5KSxcbiAgICAgICAgbmV3TW9kdWxlLm1vZHVsZXNba2V5XVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGZ1bmN0aW9uQXNzZXJ0ID0ge1xuICBhc3NlcnQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nOyB9LFxuICBleHBlY3RlZDogJ2Z1bmN0aW9uJ1xufTtcblxudmFyIG9iamVjdEFzc2VydCA9IHtcbiAgYXNzZXJ0OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5oYW5kbGVyID09PSAnZnVuY3Rpb24nKTsgfSxcbiAgZXhwZWN0ZWQ6ICdmdW5jdGlvbiBvciBvYmplY3Qgd2l0aCBcImhhbmRsZXJcIiBmdW5jdGlvbidcbn07XG5cbnZhciBhc3NlcnRUeXBlcyA9IHtcbiAgZ2V0dGVyczogZnVuY3Rpb25Bc3NlcnQsXG4gIG11dGF0aW9uczogZnVuY3Rpb25Bc3NlcnQsXG4gIGFjdGlvbnM6IG9iamVjdEFzc2VydFxufTtcblxuZnVuY3Rpb24gYXNzZXJ0UmF3TW9kdWxlIChwYXRoLCByYXdNb2R1bGUpIHtcbiAgT2JqZWN0LmtleXMoYXNzZXJ0VHlwZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIGlmICghcmF3TW9kdWxlW2tleV0pIHsgcmV0dXJuIH1cblxuICAgIHZhciBhc3NlcnRPcHRpb25zID0gYXNzZXJ0VHlwZXNba2V5XTtcblxuICAgIGZvckVhY2hWYWx1ZShyYXdNb2R1bGVba2V5XSwgZnVuY3Rpb24gKHZhbHVlLCB0eXBlKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIGFzc2VydE9wdGlvbnMuYXNzZXJ0KHZhbHVlKSxcbiAgICAgICAgbWFrZUFzc2VydGlvbk1lc3NhZ2UocGF0aCwga2V5LCB0eXBlLCB2YWx1ZSwgYXNzZXJ0T3B0aW9ucy5leHBlY3RlZClcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlQXNzZXJ0aW9uTWVzc2FnZSAocGF0aCwga2V5LCB0eXBlLCB2YWx1ZSwgZXhwZWN0ZWQpIHtcbiAgdmFyIGJ1ZiA9IGtleSArIFwiIHNob3VsZCBiZSBcIiArIGV4cGVjdGVkICsgXCIgYnV0IFxcXCJcIiArIGtleSArIFwiLlwiICsgdHlwZSArIFwiXFxcIlwiO1xuICBpZiAocGF0aC5sZW5ndGggPiAwKSB7XG4gICAgYnVmICs9IFwiIGluIG1vZHVsZSBcXFwiXCIgKyAocGF0aC5qb2luKCcuJykpICsgXCJcXFwiXCI7XG4gIH1cbiAgYnVmICs9IFwiIGlzIFwiICsgKEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgKyBcIi5cIjtcbiAgcmV0dXJuIGJ1ZlxufVxuXG52YXIgVnVlOyAvLyBiaW5kIG9uIGluc3RhbGxcblxudmFyIFN0b3JlID0gZnVuY3Rpb24gU3RvcmUgKG9wdGlvbnMpIHtcbiAgdmFyIHRoaXMkMSA9IHRoaXM7XG4gIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9O1xuXG4gIC8vIEF1dG8gaW5zdGFsbCBpZiBpdCBpcyBub3QgZG9uZSB5ZXQgYW5kIGB3aW5kb3dgIGhhcyBgVnVlYC5cbiAgLy8gVG8gYWxsb3cgdXNlcnMgdG8gYXZvaWQgYXV0by1pbnN0YWxsYXRpb24gaW4gc29tZSBjYXNlcyxcbiAgLy8gdGhpcyBjb2RlIHNob3VsZCBiZSBwbGFjZWQgaGVyZS4gU2VlICM3MzFcbiAgaWYgKCFWdWUgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZ1ZSkge1xuICAgIGluc3RhbGwod2luZG93LlZ1ZSk7XG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydChWdWUsIFwibXVzdCBjYWxsIFZ1ZS51c2UoVnVleCkgYmVmb3JlIGNyZWF0aW5nIGEgc3RvcmUgaW5zdGFuY2UuXCIpO1xuICAgIGFzc2VydCh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcsIFwidnVleCByZXF1aXJlcyBhIFByb21pc2UgcG9seWZpbGwgaW4gdGhpcyBicm93c2VyLlwiKTtcbiAgICBhc3NlcnQodGhpcyBpbnN0YW5jZW9mIFN0b3JlLCBcIlN0b3JlIG11c3QgYmUgY2FsbGVkIHdpdGggdGhlIG5ldyBvcGVyYXRvci5cIik7XG4gIH1cblxuICB2YXIgcGx1Z2lucyA9IG9wdGlvbnMucGx1Z2luczsgaWYgKCBwbHVnaW5zID09PSB2b2lkIDAgKSBwbHVnaW5zID0gW107XG4gIHZhciBzdHJpY3QgPSBvcHRpb25zLnN0cmljdDsgaWYgKCBzdHJpY3QgPT09IHZvaWQgMCApIHN0cmljdCA9IGZhbHNlO1xuXG4gIHZhciBzdGF0ZSA9IG9wdGlvbnMuc3RhdGU7IGlmICggc3RhdGUgPT09IHZvaWQgMCApIHN0YXRlID0ge307XG4gIGlmICh0eXBlb2Ygc3RhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBzdGF0ZSA9IHN0YXRlKCkgfHwge307XG4gIH1cblxuICAvLyBzdG9yZSBpbnRlcm5hbCBzdGF0ZVxuICB0aGlzLl9jb21taXR0aW5nID0gZmFsc2U7XG4gIHRoaXMuX2FjdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLl9hY3Rpb25TdWJzY3JpYmVycyA9IFtdO1xuICB0aGlzLl9tdXRhdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLl93cmFwcGVkR2V0dGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuX21vZHVsZXMgPSBuZXcgTW9kdWxlQ29sbGVjdGlvbihvcHRpb25zKTtcbiAgdGhpcy5fbW9kdWxlc05hbWVzcGFjZU1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG4gIHRoaXMuX3dhdGNoZXJWTSA9IG5ldyBWdWUoKTtcblxuICAvLyBiaW5kIGNvbW1pdCBhbmQgZGlzcGF0Y2ggdG8gc2VsZlxuICB2YXIgc3RvcmUgPSB0aGlzO1xuICB2YXIgcmVmID0gdGhpcztcbiAgdmFyIGRpc3BhdGNoID0gcmVmLmRpc3BhdGNoO1xuICB2YXIgY29tbWl0ID0gcmVmLmNvbW1pdDtcbiAgdGhpcy5kaXNwYXRjaCA9IGZ1bmN0aW9uIGJvdW5kRGlzcGF0Y2ggKHR5cGUsIHBheWxvYWQpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2guY2FsbChzdG9yZSwgdHlwZSwgcGF5bG9hZClcbiAgfTtcbiAgdGhpcy5jb21taXQgPSBmdW5jdGlvbiBib3VuZENvbW1pdCAodHlwZSwgcGF5bG9hZCwgb3B0aW9ucykge1xuICAgIHJldHVybiBjb21taXQuY2FsbChzdG9yZSwgdHlwZSwgcGF5bG9hZCwgb3B0aW9ucylcbiAgfTtcblxuICAvLyBzdHJpY3QgbW9kZVxuICB0aGlzLnN0cmljdCA9IHN0cmljdDtcblxuICAvLyBpbml0IHJvb3QgbW9kdWxlLlxuICAvLyB0aGlzIGFsc28gcmVjdXJzaXZlbHkgcmVnaXN0ZXJzIGFsbCBzdWItbW9kdWxlc1xuICAvLyBhbmQgY29sbGVjdHMgYWxsIG1vZHVsZSBnZXR0ZXJzIGluc2lkZSB0aGlzLl93cmFwcGVkR2V0dGVyc1xuICBpbnN0YWxsTW9kdWxlKHRoaXMsIHN0YXRlLCBbXSwgdGhpcy5fbW9kdWxlcy5yb290KTtcblxuICAvLyBpbml0aWFsaXplIHRoZSBzdG9yZSB2bSwgd2hpY2ggaXMgcmVzcG9uc2libGUgZm9yIHRoZSByZWFjdGl2aXR5XG4gIC8vIChhbHNvIHJlZ2lzdGVycyBfd3JhcHBlZEdldHRlcnMgYXMgY29tcHV0ZWQgcHJvcGVydGllcylcbiAgcmVzZXRTdG9yZVZNKHRoaXMsIHN0YXRlKTtcblxuICAvLyBhcHBseSBwbHVnaW5zXG4gIHBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luKSB7IHJldHVybiBwbHVnaW4odGhpcyQxKTsgfSk7XG5cbiAgaWYgKFZ1ZS5jb25maWcuZGV2dG9vbHMpIHtcbiAgICBkZXZ0b29sUGx1Z2luKHRoaXMpO1xuICB9XG59O1xuXG52YXIgcHJvdG90eXBlQWNjZXNzb3JzID0geyBzdGF0ZTogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXG5wcm90b3R5cGVBY2Nlc3NvcnMuc3RhdGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fdm0uX2RhdGEuJCRzdGF0ZVxufTtcblxucHJvdG90eXBlQWNjZXNzb3JzLnN0YXRlLnNldCA9IGZ1bmN0aW9uICh2KSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KGZhbHNlLCBcIlVzZSBzdG9yZS5yZXBsYWNlU3RhdGUoKSB0byBleHBsaWNpdCByZXBsYWNlIHN0b3JlIHN0YXRlLlwiKTtcbiAgfVxufTtcblxuU3RvcmUucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uIGNvbW1pdCAoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucykge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIC8vIGNoZWNrIG9iamVjdC1zdHlsZSBjb21taXRcbiAgdmFyIHJlZiA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucyk7XG4gICAgdmFyIHR5cGUgPSByZWYudHlwZTtcbiAgICB2YXIgcGF5bG9hZCA9IHJlZi5wYXlsb2FkO1xuICAgIHZhciBvcHRpb25zID0gcmVmLm9wdGlvbnM7XG5cbiAgdmFyIG11dGF0aW9uID0geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBwYXlsb2FkIH07XG4gIHZhciBlbnRyeSA9IHRoaXMuX211dGF0aW9uc1t0eXBlXTtcbiAgaWYgKCFlbnRyeSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIG11dGF0aW9uIHR5cGU6IFwiICsgdHlwZSkpO1xuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuICB0aGlzLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcbiAgICBlbnRyeS5mb3JFYWNoKGZ1bmN0aW9uIGNvbW1pdEl0ZXJhdG9yIChoYW5kbGVyKSB7XG4gICAgICBoYW5kbGVyKHBheWxvYWQpO1xuICAgIH0pO1xuICB9KTtcbiAgdGhpcy5fc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIobXV0YXRpb24sIHRoaXMkMS5zdGF0ZSk7IH0pO1xuXG4gIGlmIChcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgb3B0aW9ucyAmJiBvcHRpb25zLnNpbGVudFxuICApIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlt2dWV4XSBtdXRhdGlvbiB0eXBlOiBcIiArIHR5cGUgKyBcIi4gU2lsZW50IG9wdGlvbiBoYXMgYmVlbiByZW1vdmVkLiBcIiArXG4gICAgICAnVXNlIHRoZSBmaWx0ZXIgZnVuY3Rpb25hbGl0eSBpbiB0aGUgdnVlLWRldnRvb2xzJ1xuICAgICk7XG4gIH1cbn07XG5cblN0b3JlLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIGRpc3BhdGNoIChfdHlwZSwgX3BheWxvYWQpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAvLyBjaGVjayBvYmplY3Qtc3R5bGUgZGlzcGF0Y2hcbiAgdmFyIHJlZiA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkKTtcbiAgICB2YXIgdHlwZSA9IHJlZi50eXBlO1xuICAgIHZhciBwYXlsb2FkID0gcmVmLnBheWxvYWQ7XG5cbiAgdmFyIGFjdGlvbiA9IHsgdHlwZTogdHlwZSwgcGF5bG9hZDogcGF5bG9hZCB9O1xuICB2YXIgZW50cnkgPSB0aGlzLl9hY3Rpb25zW3R5cGVdO1xuICBpZiAoIWVudHJ5KSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gYWN0aW9uIHR5cGU6IFwiICsgdHlwZSkpO1xuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuXG4gIHRoaXMuX2FjdGlvblN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHN1YikgeyByZXR1cm4gc3ViKGFjdGlvbiwgdGhpcyQxLnN0YXRlKTsgfSk7XG5cbiAgcmV0dXJuIGVudHJ5Lmxlbmd0aCA+IDFcbiAgICA/IFByb21pc2UuYWxsKGVudHJ5Lm1hcChmdW5jdGlvbiAoaGFuZGxlcikgeyByZXR1cm4gaGFuZGxlcihwYXlsb2FkKTsgfSkpXG4gICAgOiBlbnRyeVswXShwYXlsb2FkKVxufTtcblxuU3RvcmUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZSAoZm4pIHtcbiAgcmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoZm4sIHRoaXMuX3N1YnNjcmliZXJzKVxufTtcblxuU3RvcmUucHJvdG90eXBlLnN1YnNjcmliZUFjdGlvbiA9IGZ1bmN0aW9uIHN1YnNjcmliZUFjdGlvbiAoZm4pIHtcbiAgcmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoZm4sIHRoaXMuX2FjdGlvblN1YnNjcmliZXJzKVxufTtcblxuU3RvcmUucHJvdG90eXBlLndhdGNoID0gZnVuY3Rpb24gd2F0Y2ggKGdldHRlciwgY2IsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydCh0eXBlb2YgZ2V0dGVyID09PSAnZnVuY3Rpb24nLCBcInN0b3JlLndhdGNoIG9ubHkgYWNjZXB0cyBhIGZ1bmN0aW9uLlwiKTtcbiAgfVxuICByZXR1cm4gdGhpcy5fd2F0Y2hlclZNLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBnZXR0ZXIodGhpcyQxLnN0YXRlLCB0aGlzJDEuZ2V0dGVycyk7IH0sIGNiLCBvcHRpb25zKVxufTtcblxuU3RvcmUucHJvdG90eXBlLnJlcGxhY2VTdGF0ZSA9IGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZSAoc3RhdGUpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICB0aGlzLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzJDEuX3ZtLl9kYXRhLiQkc3RhdGUgPSBzdGF0ZTtcbiAgfSk7XG59O1xuXG5TdG9yZS5wcm90b3R5cGUucmVnaXN0ZXJNb2R1bGUgPSBmdW5jdGlvbiByZWdpc3Rlck1vZHVsZSAocGF0aCwgcmF3TW9kdWxlLCBvcHRpb25zKSB7XG4gICAgaWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgeyBwYXRoID0gW3BhdGhdOyB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShwYXRoKSwgXCJtb2R1bGUgcGF0aCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIEFycmF5LlwiKTtcbiAgICBhc3NlcnQocGF0aC5sZW5ndGggPiAwLCAnY2Fubm90IHJlZ2lzdGVyIHRoZSByb290IG1vZHVsZSBieSB1c2luZyByZWdpc3Rlck1vZHVsZS4nKTtcbiAgfVxuXG4gIHRoaXMuX21vZHVsZXMucmVnaXN0ZXIocGF0aCwgcmF3TW9kdWxlKTtcbiAgaW5zdGFsbE1vZHVsZSh0aGlzLCB0aGlzLnN0YXRlLCBwYXRoLCB0aGlzLl9tb2R1bGVzLmdldChwYXRoKSwgb3B0aW9ucy5wcmVzZXJ2ZVN0YXRlKTtcbiAgLy8gcmVzZXQgc3RvcmUgdG8gdXBkYXRlIGdldHRlcnMuLi5cbiAgcmVzZXRTdG9yZVZNKHRoaXMsIHRoaXMuc3RhdGUpO1xufTtcblxuU3RvcmUucHJvdG90eXBlLnVucmVnaXN0ZXJNb2R1bGUgPSBmdW5jdGlvbiB1bnJlZ2lzdGVyTW9kdWxlIChwYXRoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgeyBwYXRoID0gW3BhdGhdOyB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShwYXRoKSwgXCJtb2R1bGUgcGF0aCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIEFycmF5LlwiKTtcbiAgfVxuXG4gIHRoaXMuX21vZHVsZXMudW5yZWdpc3RlcihwYXRoKTtcbiAgdGhpcy5fd2l0aENvbW1pdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhcmVudFN0YXRlID0gZ2V0TmVzdGVkU3RhdGUodGhpcyQxLnN0YXRlLCBwYXRoLnNsaWNlKDAsIC0xKSk7XG4gICAgVnVlLmRlbGV0ZShwYXJlbnRTdGF0ZSwgcGF0aFtwYXRoLmxlbmd0aCAtIDFdKTtcbiAgfSk7XG4gIHJlc2V0U3RvcmUodGhpcyk7XG59O1xuXG5TdG9yZS5wcm90b3R5cGUuaG90VXBkYXRlID0gZnVuY3Rpb24gaG90VXBkYXRlIChuZXdPcHRpb25zKSB7XG4gIHRoaXMuX21vZHVsZXMudXBkYXRlKG5ld09wdGlvbnMpO1xuICByZXNldFN0b3JlKHRoaXMsIHRydWUpO1xufTtcblxuU3RvcmUucHJvdG90eXBlLl93aXRoQ29tbWl0ID0gZnVuY3Rpb24gX3dpdGhDb21taXQgKGZuKSB7XG4gIHZhciBjb21taXR0aW5nID0gdGhpcy5fY29tbWl0dGluZztcbiAgdGhpcy5fY29tbWl0dGluZyA9IHRydWU7XG4gIGZuKCk7XG4gIHRoaXMuX2NvbW1pdHRpbmcgPSBjb21taXR0aW5nO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFN0b3JlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cbmZ1bmN0aW9uIGdlbmVyaWNTdWJzY3JpYmUgKGZuLCBzdWJzKSB7XG4gIGlmIChzdWJzLmluZGV4T2YoZm4pIDwgMCkge1xuICAgIHN1YnMucHVzaChmbik7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaSA9IHN1YnMuaW5kZXhPZihmbik7XG4gICAgaWYgKGkgPiAtMSkge1xuICAgICAgc3Vicy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc2V0U3RvcmUgKHN0b3JlLCBob3QpIHtcbiAgc3RvcmUuX2FjdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBzdG9yZS5fbXV0YXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgc3RvcmUuX3dyYXBwZWRHZXR0ZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgc3RvcmUuX21vZHVsZXNOYW1lc3BhY2VNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgc3RhdGUgPSBzdG9yZS5zdGF0ZTtcbiAgLy8gaW5pdCBhbGwgbW9kdWxlc1xuICBpbnN0YWxsTW9kdWxlKHN0b3JlLCBzdGF0ZSwgW10sIHN0b3JlLl9tb2R1bGVzLnJvb3QsIHRydWUpO1xuICAvLyByZXNldCB2bVxuICByZXNldFN0b3JlVk0oc3RvcmUsIHN0YXRlLCBob3QpO1xufVxuXG5mdW5jdGlvbiByZXNldFN0b3JlVk0gKHN0b3JlLCBzdGF0ZSwgaG90KSB7XG4gIHZhciBvbGRWbSA9IHN0b3JlLl92bTtcblxuICAvLyBiaW5kIHN0b3JlIHB1YmxpYyBnZXR0ZXJzXG4gIHN0b3JlLmdldHRlcnMgPSB7fTtcbiAgdmFyIHdyYXBwZWRHZXR0ZXJzID0gc3RvcmUuX3dyYXBwZWRHZXR0ZXJzO1xuICB2YXIgY29tcHV0ZWQgPSB7fTtcbiAgZm9yRWFjaFZhbHVlKHdyYXBwZWRHZXR0ZXJzLCBmdW5jdGlvbiAoZm4sIGtleSkge1xuICAgIC8vIHVzZSBjb21wdXRlZCB0byBsZXZlcmFnZSBpdHMgbGF6eS1jYWNoaW5nIG1lY2hhbmlzbVxuICAgIGNvbXB1dGVkW2tleV0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmbihzdG9yZSk7IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0b3JlLmdldHRlcnMsIGtleSwge1xuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzdG9yZS5fdm1ba2V5XTsgfSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUgLy8gZm9yIGxvY2FsIGdldHRlcnNcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gdXNlIGEgVnVlIGluc3RhbmNlIHRvIHN0b3JlIHRoZSBzdGF0ZSB0cmVlXG4gIC8vIHN1cHByZXNzIHdhcm5pbmdzIGp1c3QgaW4gY2FzZSB0aGUgdXNlciBoYXMgYWRkZWRcbiAgLy8gc29tZSBmdW5reSBnbG9iYWwgbWl4aW5zXG4gIHZhciBzaWxlbnQgPSBWdWUuY29uZmlnLnNpbGVudDtcbiAgVnVlLmNvbmZpZy5zaWxlbnQgPSB0cnVlO1xuICBzdG9yZS5fdm0gPSBuZXcgVnVlKHtcbiAgICBkYXRhOiB7XG4gICAgICAkJHN0YXRlOiBzdGF0ZVxuICAgIH0sXG4gICAgY29tcHV0ZWQ6IGNvbXB1dGVkXG4gIH0pO1xuICBWdWUuY29uZmlnLnNpbGVudCA9IHNpbGVudDtcblxuICAvLyBlbmFibGUgc3RyaWN0IG1vZGUgZm9yIG5ldyB2bVxuICBpZiAoc3RvcmUuc3RyaWN0KSB7XG4gICAgZW5hYmxlU3RyaWN0TW9kZShzdG9yZSk7XG4gIH1cblxuICBpZiAob2xkVm0pIHtcbiAgICBpZiAoaG90KSB7XG4gICAgICAvLyBkaXNwYXRjaCBjaGFuZ2VzIGluIGFsbCBzdWJzY3JpYmVkIHdhdGNoZXJzXG4gICAgICAvLyB0byBmb3JjZSBnZXR0ZXIgcmUtZXZhbHVhdGlvbiBmb3IgaG90IHJlbG9hZGluZy5cbiAgICAgIHN0b3JlLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb2xkVm0uX2RhdGEuJCRzdGF0ZSA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG4gICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9sZFZtLiRkZXN0cm95KCk7IH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluc3RhbGxNb2R1bGUgKHN0b3JlLCByb290U3RhdGUsIHBhdGgsIG1vZHVsZSwgaG90KSB7XG4gIHZhciBpc1Jvb3QgPSAhcGF0aC5sZW5ndGg7XG4gIHZhciBuYW1lc3BhY2UgPSBzdG9yZS5fbW9kdWxlcy5nZXROYW1lc3BhY2UocGF0aCk7XG5cbiAgLy8gcmVnaXN0ZXIgaW4gbmFtZXNwYWNlIG1hcFxuICBpZiAobW9kdWxlLm5hbWVzcGFjZWQpIHtcbiAgICBzdG9yZS5fbW9kdWxlc05hbWVzcGFjZU1hcFtuYW1lc3BhY2VdID0gbW9kdWxlO1xuICB9XG5cbiAgLy8gc2V0IHN0YXRlXG4gIGlmICghaXNSb290ICYmICFob3QpIHtcbiAgICB2YXIgcGFyZW50U3RhdGUgPSBnZXROZXN0ZWRTdGF0ZShyb290U3RhdGUsIHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICB2YXIgbW9kdWxlTmFtZSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICBzdG9yZS5fd2l0aENvbW1pdChmdW5jdGlvbiAoKSB7XG4gICAgICBWdWUuc2V0KHBhcmVudFN0YXRlLCBtb2R1bGVOYW1lLCBtb2R1bGUuc3RhdGUpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGxvY2FsID0gbW9kdWxlLmNvbnRleHQgPSBtYWtlTG9jYWxDb250ZXh0KHN0b3JlLCBuYW1lc3BhY2UsIHBhdGgpO1xuXG4gIG1vZHVsZS5mb3JFYWNoTXV0YXRpb24oZnVuY3Rpb24gKG11dGF0aW9uLCBrZXkpIHtcbiAgICB2YXIgbmFtZXNwYWNlZFR5cGUgPSBuYW1lc3BhY2UgKyBrZXk7XG4gICAgcmVnaXN0ZXJNdXRhdGlvbihzdG9yZSwgbmFtZXNwYWNlZFR5cGUsIG11dGF0aW9uLCBsb2NhbCk7XG4gIH0pO1xuXG4gIG1vZHVsZS5mb3JFYWNoQWN0aW9uKGZ1bmN0aW9uIChhY3Rpb24sIGtleSkge1xuICAgIHZhciB0eXBlID0gYWN0aW9uLnJvb3QgPyBrZXkgOiBuYW1lc3BhY2UgKyBrZXk7XG4gICAgdmFyIGhhbmRsZXIgPSBhY3Rpb24uaGFuZGxlciB8fCBhY3Rpb247XG4gICAgcmVnaXN0ZXJBY3Rpb24oc3RvcmUsIHR5cGUsIGhhbmRsZXIsIGxvY2FsKTtcbiAgfSk7XG5cbiAgbW9kdWxlLmZvckVhY2hHZXR0ZXIoZnVuY3Rpb24gKGdldHRlciwga2V5KSB7XG4gICAgdmFyIG5hbWVzcGFjZWRUeXBlID0gbmFtZXNwYWNlICsga2V5O1xuICAgIHJlZ2lzdGVyR2V0dGVyKHN0b3JlLCBuYW1lc3BhY2VkVHlwZSwgZ2V0dGVyLCBsb2NhbCk7XG4gIH0pO1xuXG4gIG1vZHVsZS5mb3JFYWNoQ2hpbGQoZnVuY3Rpb24gKGNoaWxkLCBrZXkpIHtcbiAgICBpbnN0YWxsTW9kdWxlKHN0b3JlLCByb290U3RhdGUsIHBhdGguY29uY2F0KGtleSksIGNoaWxkLCBob3QpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBtYWtlIGxvY2FsaXplZCBkaXNwYXRjaCwgY29tbWl0LCBnZXR0ZXJzIGFuZCBzdGF0ZVxuICogaWYgdGhlcmUgaXMgbm8gbmFtZXNwYWNlLCBqdXN0IHVzZSByb290IG9uZXNcbiAqL1xuZnVuY3Rpb24gbWFrZUxvY2FsQ29udGV4dCAoc3RvcmUsIG5hbWVzcGFjZSwgcGF0aCkge1xuICB2YXIgbm9OYW1lc3BhY2UgPSBuYW1lc3BhY2UgPT09ICcnO1xuXG4gIHZhciBsb2NhbCA9IHtcbiAgICBkaXNwYXRjaDogbm9OYW1lc3BhY2UgPyBzdG9yZS5kaXNwYXRjaCA6IGZ1bmN0aW9uIChfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKSB7XG4gICAgICB2YXIgYXJncyA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucyk7XG4gICAgICB2YXIgcGF5bG9hZCA9IGFyZ3MucGF5bG9hZDtcbiAgICAgIHZhciBvcHRpb25zID0gYXJncy5vcHRpb25zO1xuICAgICAgdmFyIHR5cGUgPSBhcmdzLnR5cGU7XG5cbiAgICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5yb290KSB7XG4gICAgICAgIHR5cGUgPSBuYW1lc3BhY2UgKyB0eXBlO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhc3RvcmUuX2FjdGlvbnNbdHlwZV0pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIGxvY2FsIGFjdGlvbiB0eXBlOiBcIiArIChhcmdzLnR5cGUpICsgXCIsIGdsb2JhbCB0eXBlOiBcIiArIHR5cGUpKTtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2godHlwZSwgcGF5bG9hZClcbiAgICB9LFxuXG4gICAgY29tbWl0OiBub05hbWVzcGFjZSA/IHN0b3JlLmNvbW1pdCA6IGZ1bmN0aW9uIChfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKSB7XG4gICAgICB2YXIgYXJncyA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucyk7XG4gICAgICB2YXIgcGF5bG9hZCA9IGFyZ3MucGF5bG9hZDtcbiAgICAgIHZhciBvcHRpb25zID0gYXJncy5vcHRpb25zO1xuICAgICAgdmFyIHR5cGUgPSBhcmdzLnR5cGU7XG5cbiAgICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5yb290KSB7XG4gICAgICAgIHR5cGUgPSBuYW1lc3BhY2UgKyB0eXBlO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhc3RvcmUuX211dGF0aW9uc1t0eXBlXSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gbG9jYWwgbXV0YXRpb24gdHlwZTogXCIgKyAoYXJncy50eXBlKSArIFwiLCBnbG9iYWwgdHlwZTogXCIgKyB0eXBlKSk7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3RvcmUuY29tbWl0KHR5cGUsIHBheWxvYWQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBnZXR0ZXJzIGFuZCBzdGF0ZSBvYmplY3QgbXVzdCBiZSBnb3R0ZW4gbGF6aWx5XG4gIC8vIGJlY2F1c2UgdGhleSB3aWxsIGJlIGNoYW5nZWQgYnkgdm0gdXBkYXRlXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGxvY2FsLCB7XG4gICAgZ2V0dGVyczoge1xuICAgICAgZ2V0OiBub05hbWVzcGFjZVxuICAgICAgICA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLmdldHRlcnM7IH1cbiAgICAgICAgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBtYWtlTG9jYWxHZXR0ZXJzKHN0b3JlLCBuYW1lc3BhY2UpOyB9XG4gICAgfSxcbiAgICBzdGF0ZToge1xuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXROZXN0ZWRTdGF0ZShzdG9yZS5zdGF0ZSwgcGF0aCk7IH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBsb2NhbFxufVxuXG5mdW5jdGlvbiBtYWtlTG9jYWxHZXR0ZXJzIChzdG9yZSwgbmFtZXNwYWNlKSB7XG4gIHZhciBnZXR0ZXJzUHJveHkgPSB7fTtcblxuICB2YXIgc3BsaXRQb3MgPSBuYW1lc3BhY2UubGVuZ3RoO1xuICBPYmplY3Qua2V5cyhzdG9yZS5nZXR0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgLy8gc2tpcCBpZiB0aGUgdGFyZ2V0IGdldHRlciBpcyBub3QgbWF0Y2ggdGhpcyBuYW1lc3BhY2VcbiAgICBpZiAodHlwZS5zbGljZSgwLCBzcGxpdFBvcykgIT09IG5hbWVzcGFjZSkgeyByZXR1cm4gfVxuXG4gICAgLy8gZXh0cmFjdCBsb2NhbCBnZXR0ZXIgdHlwZVxuICAgIHZhciBsb2NhbFR5cGUgPSB0eXBlLnNsaWNlKHNwbGl0UG9zKTtcblxuICAgIC8vIEFkZCBhIHBvcnQgdG8gdGhlIGdldHRlcnMgcHJveHkuXG4gICAgLy8gRGVmaW5lIGFzIGdldHRlciBwcm9wZXJ0eSBiZWNhdXNlXG4gICAgLy8gd2UgZG8gbm90IHdhbnQgdG8gZXZhbHVhdGUgdGhlIGdldHRlcnMgaW4gdGhpcyB0aW1lLlxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXR0ZXJzUHJveHksIGxvY2FsVHlwZSwge1xuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzdG9yZS5nZXR0ZXJzW3R5cGVdOyB9LFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gZ2V0dGVyc1Byb3h5XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyTXV0YXRpb24gKHN0b3JlLCB0eXBlLCBoYW5kbGVyLCBsb2NhbCkge1xuICB2YXIgZW50cnkgPSBzdG9yZS5fbXV0YXRpb25zW3R5cGVdIHx8IChzdG9yZS5fbXV0YXRpb25zW3R5cGVdID0gW10pO1xuICBlbnRyeS5wdXNoKGZ1bmN0aW9uIHdyYXBwZWRNdXRhdGlvbkhhbmRsZXIgKHBheWxvYWQpIHtcbiAgICBoYW5kbGVyLmNhbGwoc3RvcmUsIGxvY2FsLnN0YXRlLCBwYXlsb2FkKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyQWN0aW9uIChzdG9yZSwgdHlwZSwgaGFuZGxlciwgbG9jYWwpIHtcbiAgdmFyIGVudHJ5ID0gc3RvcmUuX2FjdGlvbnNbdHlwZV0gfHwgKHN0b3JlLl9hY3Rpb25zW3R5cGVdID0gW10pO1xuICBlbnRyeS5wdXNoKGZ1bmN0aW9uIHdyYXBwZWRBY3Rpb25IYW5kbGVyIChwYXlsb2FkLCBjYikge1xuICAgIHZhciByZXMgPSBoYW5kbGVyLmNhbGwoc3RvcmUsIHtcbiAgICAgIGRpc3BhdGNoOiBsb2NhbC5kaXNwYXRjaCxcbiAgICAgIGNvbW1pdDogbG9jYWwuY29tbWl0LFxuICAgICAgZ2V0dGVyczogbG9jYWwuZ2V0dGVycyxcbiAgICAgIHN0YXRlOiBsb2NhbC5zdGF0ZSxcbiAgICAgIHJvb3RHZXR0ZXJzOiBzdG9yZS5nZXR0ZXJzLFxuICAgICAgcm9vdFN0YXRlOiBzdG9yZS5zdGF0ZVxuICAgIH0sIHBheWxvYWQsIGNiKTtcbiAgICBpZiAoIWlzUHJvbWlzZShyZXMpKSB7XG4gICAgICByZXMgPSBQcm9taXNlLnJlc29sdmUocmVzKTtcbiAgICB9XG4gICAgaWYgKHN0b3JlLl9kZXZ0b29sSG9vaykge1xuICAgICAgcmV0dXJuIHJlcy5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHN0b3JlLl9kZXZ0b29sSG9vay5lbWl0KCd2dWV4OmVycm9yJywgZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzXG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJHZXR0ZXIgKHN0b3JlLCB0eXBlLCByYXdHZXR0ZXIsIGxvY2FsKSB7XG4gIGlmIChzdG9yZS5fd3JhcHBlZEdldHRlcnNbdHlwZV0pIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gZHVwbGljYXRlIGdldHRlciBrZXk6IFwiICsgdHlwZSkpO1xuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuICBzdG9yZS5fd3JhcHBlZEdldHRlcnNbdHlwZV0gPSBmdW5jdGlvbiB3cmFwcGVkR2V0dGVyIChzdG9yZSkge1xuICAgIHJldHVybiByYXdHZXR0ZXIoXG4gICAgICBsb2NhbC5zdGF0ZSwgLy8gbG9jYWwgc3RhdGVcbiAgICAgIGxvY2FsLmdldHRlcnMsIC8vIGxvY2FsIGdldHRlcnNcbiAgICAgIHN0b3JlLnN0YXRlLCAvLyByb290IHN0YXRlXG4gICAgICBzdG9yZS5nZXR0ZXJzIC8vIHJvb3QgZ2V0dGVyc1xuICAgIClcbiAgfTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlU3RyaWN0TW9kZSAoc3RvcmUpIHtcbiAgc3RvcmUuX3ZtLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9kYXRhLiQkc3RhdGUgfSwgZnVuY3Rpb24gKCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBhc3NlcnQoc3RvcmUuX2NvbW1pdHRpbmcsIFwiRG8gbm90IG11dGF0ZSB2dWV4IHN0b3JlIHN0YXRlIG91dHNpZGUgbXV0YXRpb24gaGFuZGxlcnMuXCIpO1xuICAgIH1cbiAgfSwgeyBkZWVwOiB0cnVlLCBzeW5jOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBnZXROZXN0ZWRTdGF0ZSAoc3RhdGUsIHBhdGgpIHtcbiAgcmV0dXJuIHBhdGgubGVuZ3RoXG4gICAgPyBwYXRoLnJlZHVjZShmdW5jdGlvbiAoc3RhdGUsIGtleSkgeyByZXR1cm4gc3RhdGVba2V5XTsgfSwgc3RhdGUpXG4gICAgOiBzdGF0ZVxufVxuXG5mdW5jdGlvbiB1bmlmeU9iamVjdFN0eWxlICh0eXBlLCBwYXlsb2FkLCBvcHRpb25zKSB7XG4gIGlmIChpc09iamVjdCh0eXBlKSAmJiB0eXBlLnR5cGUpIHtcbiAgICBvcHRpb25zID0gcGF5bG9hZDtcbiAgICBwYXlsb2FkID0gdHlwZTtcbiAgICB0eXBlID0gdHlwZS50eXBlO1xuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnLCAoXCJFeHBlY3RzIHN0cmluZyBhcyB0aGUgdHlwZSwgYnV0IGZvdW5kIFwiICsgKHR5cGVvZiB0eXBlKSArIFwiLlwiKSk7XG4gIH1cblxuICByZXR1cm4geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBwYXlsb2FkLCBvcHRpb25zOiBvcHRpb25zIH1cbn1cblxuZnVuY3Rpb24gaW5zdGFsbCAoX1Z1ZSkge1xuICBpZiAoVnVlICYmIF9WdWUgPT09IFZ1ZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnW3Z1ZXhdIGFscmVhZHkgaW5zdGFsbGVkLiBWdWUudXNlKFZ1ZXgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLidcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVyblxuICB9XG4gIFZ1ZSA9IF9WdWU7XG4gIGFwcGx5TWl4aW4oVnVlKTtcbn1cblxudmFyIG1hcFN0YXRlID0gbm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIHN0YXRlcykge1xuICB2YXIgcmVzID0ge307XG4gIG5vcm1hbGl6ZU1hcChzdGF0ZXMpLmZvckVhY2goZnVuY3Rpb24gKHJlZikge1xuICAgIHZhciBrZXkgPSByZWYua2V5O1xuICAgIHZhciB2YWwgPSByZWYudmFsO1xuXG4gICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRTdGF0ZSAoKSB7XG4gICAgICB2YXIgc3RhdGUgPSB0aGlzLiRzdG9yZS5zdGF0ZTtcbiAgICAgIHZhciBnZXR0ZXJzID0gdGhpcy4kc3RvcmUuZ2V0dGVycztcbiAgICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgdmFyIG1vZHVsZSA9IGdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCAnbWFwU3RhdGUnLCBuYW1lc3BhY2UpO1xuICAgICAgICBpZiAoIW1vZHVsZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHN0YXRlID0gbW9kdWxlLmNvbnRleHQuc3RhdGU7XG4gICAgICAgIGdldHRlcnMgPSBtb2R1bGUuY29udGV4dC5nZXR0ZXJzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB2YWwuY2FsbCh0aGlzLCBzdGF0ZSwgZ2V0dGVycylcbiAgICAgICAgOiBzdGF0ZVt2YWxdXG4gICAgfTtcbiAgICAvLyBtYXJrIHZ1ZXggZ2V0dGVyIGZvciBkZXZ0b29sc1xuICAgIHJlc1trZXldLnZ1ZXggPSB0cnVlO1xuICB9KTtcbiAgcmV0dXJuIHJlc1xufSk7XG5cbnZhciBtYXBNdXRhdGlvbnMgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgbXV0YXRpb25zKSB7XG4gIHZhciByZXMgPSB7fTtcbiAgbm9ybWFsaXplTWFwKG11dGF0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7XG4gICAgdmFyIGtleSA9IHJlZi5rZXk7XG4gICAgdmFyIHZhbCA9IHJlZi52YWw7XG5cbiAgICByZXNba2V5XSA9IGZ1bmN0aW9uIG1hcHBlZE11dGF0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXG4gICAgICB2YXIgY29tbWl0ID0gdGhpcy4kc3RvcmUuY29tbWl0O1xuICAgICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgICB2YXIgbW9kdWxlID0gZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBNdXRhdGlvbnMnLCBuYW1lc3BhY2UpO1xuICAgICAgICBpZiAoIW1vZHVsZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGNvbW1pdCA9IG1vZHVsZS5jb250ZXh0LmNvbW1pdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gdmFsLmFwcGx5KHRoaXMsIFtjb21taXRdLmNvbmNhdChhcmdzKSlcbiAgICAgICAgOiBjb21taXQuYXBwbHkodGhpcy4kc3RvcmUsIFt2YWxdLmNvbmNhdChhcmdzKSlcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIHJlc1xufSk7XG5cbnZhciBtYXBHZXR0ZXJzID0gbm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIGdldHRlcnMpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICBub3JtYWxpemVNYXAoZ2V0dGVycykuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7XG4gICAgdmFyIGtleSA9IHJlZi5rZXk7XG4gICAgdmFyIHZhbCA9IHJlZi52YWw7XG5cbiAgICB2YWwgPSBuYW1lc3BhY2UgKyB2YWw7XG4gICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRHZXR0ZXIgKCkge1xuICAgICAgaWYgKG5hbWVzcGFjZSAmJiAhZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBHZXR0ZXJzJywgbmFtZXNwYWNlKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICEodmFsIGluIHRoaXMuJHN0b3JlLmdldHRlcnMpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gZ2V0dGVyOiBcIiArIHZhbCkpO1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzW3ZhbF1cbiAgICB9O1xuICAgIC8vIG1hcmsgdnVleCBnZXR0ZXIgZm9yIGRldnRvb2xzXG4gICAgcmVzW2tleV0udnVleCA9IHRydWU7XG4gIH0pO1xuICByZXR1cm4gcmVzXG59KTtcblxudmFyIG1hcEFjdGlvbnMgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgYWN0aW9ucykge1xuICB2YXIgcmVzID0ge307XG4gIG5vcm1hbGl6ZU1hcChhY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICB2YXIga2V5ID0gcmVmLmtleTtcbiAgICB2YXIgdmFsID0gcmVmLnZhbDtcblxuICAgIHJlc1trZXldID0gZnVuY3Rpb24gbWFwcGVkQWN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXG4gICAgICB2YXIgZGlzcGF0Y2ggPSB0aGlzLiRzdG9yZS5kaXNwYXRjaDtcbiAgICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgdmFyIG1vZHVsZSA9IGdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCAnbWFwQWN0aW9ucycsIG5hbWVzcGFjZSk7XG4gICAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgZGlzcGF0Y2ggPSBtb2R1bGUuY29udGV4dC5kaXNwYXRjaDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gdmFsLmFwcGx5KHRoaXMsIFtkaXNwYXRjaF0uY29uY2F0KGFyZ3MpKVxuICAgICAgICA6IGRpc3BhdGNoLmFwcGx5KHRoaXMuJHN0b3JlLCBbdmFsXS5jb25jYXQoYXJncykpXG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiByZXNcbn0pO1xuXG52YXIgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMgPSBmdW5jdGlvbiAobmFtZXNwYWNlKSB7IHJldHVybiAoe1xuICBtYXBTdGF0ZTogbWFwU3RhdGUuYmluZChudWxsLCBuYW1lc3BhY2UpLFxuICBtYXBHZXR0ZXJzOiBtYXBHZXR0ZXJzLmJpbmQobnVsbCwgbmFtZXNwYWNlKSxcbiAgbWFwTXV0YXRpb25zOiBtYXBNdXRhdGlvbnMuYmluZChudWxsLCBuYW1lc3BhY2UpLFxuICBtYXBBY3Rpb25zOiBtYXBBY3Rpb25zLmJpbmQobnVsbCwgbmFtZXNwYWNlKVxufSk7IH07XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU1hcCAobWFwKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KG1hcClcbiAgICA/IG1hcC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKHsga2V5OiBrZXksIHZhbDoga2V5IH0pOyB9KVxuICAgIDogT2JqZWN0LmtleXMobWFwKS5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKHsga2V5OiBrZXksIHZhbDogbWFwW2tleV0gfSk7IH0pXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWVzcGFjZSAoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lc3BhY2UsIG1hcCkge1xuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xuICAgICAgbWFwID0gbmFtZXNwYWNlO1xuICAgICAgbmFtZXNwYWNlID0gJyc7XG4gICAgfSBlbHNlIGlmIChuYW1lc3BhY2UuY2hhckF0KG5hbWVzcGFjZS5sZW5ndGggLSAxKSAhPT0gJy8nKSB7XG4gICAgICBuYW1lc3BhY2UgKz0gJy8nO1xuICAgIH1cbiAgICByZXR1cm4gZm4obmFtZXNwYWNlLCBtYXApXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TW9kdWxlQnlOYW1lc3BhY2UgKHN0b3JlLCBoZWxwZXIsIG5hbWVzcGFjZSkge1xuICB2YXIgbW9kdWxlID0gc3RvcmUuX21vZHVsZXNOYW1lc3BhY2VNYXBbbmFtZXNwYWNlXTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIW1vZHVsZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIG1vZHVsZSBuYW1lc3BhY2Ugbm90IGZvdW5kIGluIFwiICsgaGVscGVyICsgXCIoKTogXCIgKyBuYW1lc3BhY2UpKTtcbiAgfVxuICByZXR1cm4gbW9kdWxlXG59XG5cbnZhciBpbmRleCA9IHtcbiAgU3RvcmU6IFN0b3JlLFxuICBpbnN0YWxsOiBpbnN0YWxsLFxuICB2ZXJzaW9uOiAnMy4wLjEnLFxuICBtYXBTdGF0ZTogbWFwU3RhdGUsXG4gIG1hcE11dGF0aW9uczogbWFwTXV0YXRpb25zLFxuICBtYXBHZXR0ZXJzOiBtYXBHZXR0ZXJzLFxuICBtYXBBY3Rpb25zOiBtYXBBY3Rpb25zLFxuICBjcmVhdGVOYW1lc3BhY2VkSGVscGVyczogY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW5kZXg7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdnVleC9kaXN0L3Z1ZXguY29tbW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX192dWVfZXhwb3J0c19fLCBfX3Z1ZV9vcHRpb25zX19cbnZhciBfX3Z1ZV9zdHlsZXNfXyA9IHt9XG5cbi8qIHNjcmlwdCAqL1xuX192dWVfZXhwb3J0c19fID0gcmVxdWlyZShcIiEhYmFiZWwtbG9hZGVyIXZ1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9hcHAudnVlXCIpXG5cbi8qIHRlbXBsYXRlICovXG52YXIgX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyP2lkPWRhdGEtdi1kNjYxYWQ5OCF2dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9hcHAudnVlXCIpXG5fX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9leHBvcnRzX18gPSBfX3Z1ZV9leHBvcnRzX18gfHwge31cbmlmIChcbiAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcIm9iamVjdFwiIHx8XG4gIHR5cGVvZiBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiXG4pIHtcbl9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0XG59XG5pZiAodHlwZW9mIF9fdnVlX29wdGlvbnNfXyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX29wdGlvbnNfXy5vcHRpb25zXG59XG5cbl9fdnVlX29wdGlvbnNfXy5yZW5kZXIgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnJlbmRlclxuX192dWVfb3B0aW9uc19fLnN0YXRpY1JlbmRlckZucyA9IF9fdnVlX3RlbXBsYXRlX18uc3RhdGljUmVuZGVyRm5zXG5cbm1vZHVsZS5leHBvcnRzID0gX192dWVfZXhwb3J0c19fXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcHAudnVlXG4vLyBtb2R1bGUgaWQgPSAzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCI8dGVtcGxhdGU+XG4gIDxkaXYgaWQ9XCJhcHBcIj5cbiAgICA8aDE+e3t0aXRsZX19PC9oMT5cblxuICAgIDxyb3V0ZXItdmlldyBrZWVwLWFsaXZlPjwvcm91dGVyLXZpZXc+XG5cbiAgICA8bG9hZGluZz48L2xvYWRpbmc+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbiAgaW1wb3J0ICcuL3Jlc291cmNlcy9sZXNzL3Jlc2V0Lmxlc3MnXG5cbiAgaW1wb3J0IFZ1ZSBmcm9tICd2dWUnXG5cbiAgaW1wb3J0IGxvYWRpbmcgZnJvbSAnLi9jb21wb25lbnRzL2xvYWRpbmcnXG4gIFZ1ZS5jb21wb25lbnQoJ2xvYWRpbmcnLCBsb2FkaW5nKVxuXG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBkYXRhKCl7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogJ0hlbGxvIFdvcmxkJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuPC9zY3JpcHQ+XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwLnZ1ZT9jOWY1MGNlMiIsInZhciBfX3Z1ZV9leHBvcnRzX18sIF9fdnVlX29wdGlvbnNfX1xudmFyIF9fdnVlX3N0eWxlc19fID0ge31cblxuLyogc2NyaXB0ICovXG5fX3Z1ZV9leHBvcnRzX18gPSByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2xvYWRpbmcudnVlXCIpXG5cbi8qIHRlbXBsYXRlICovXG52YXIgX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyP2lkPWRhdGEtdi05Y2EwY2MwMCF2dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9sb2FkaW5nLnZ1ZVwiKVxuX192dWVfb3B0aW9uc19fID0gX192dWVfZXhwb3J0c19fID0gX192dWVfZXhwb3J0c19fIHx8IHt9XG5pZiAoXG4gIHR5cGVvZiBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdCA9PT0gXCJvYmplY3RcIiB8fFxuICB0eXBlb2YgX192dWVfZXhwb3J0c19fLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIlxuKSB7XG5fX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9leHBvcnRzX18gPSBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdFxufVxuaWYgKHR5cGVvZiBfX3Z1ZV9vcHRpb25zX18gPT09IFwiZnVuY3Rpb25cIikge1xuICBfX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9vcHRpb25zX18ub3B0aW9uc1xufVxuXG5fX3Z1ZV9vcHRpb25zX18ucmVuZGVyID0gX192dWVfdGVtcGxhdGVfXy5yZW5kZXJcbl9fdnVlX29wdGlvbnNfXy5zdGF0aWNSZW5kZXJGbnMgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnN0YXRpY1JlbmRlckZuc1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX2V4cG9ydHNfX1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9sb2FkaW5nLnZ1ZVxuLy8gbW9kdWxlIGlkID0gNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiPHRlbXBsYXRlPlxuICA8ZGl2IGNsYXNzPVwibG9hZGluZ1wiIHYtaWY9XCJsb2FkU3RhdHVzXCI+PC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuICBpbXBvcnQgJy4vbGVzcy9sb2FkaW5nLmxlc3MnXG4gIGltcG9ydCBzdG9yZSBmcm9tICcuLi92dWV4L3N0b3JlJ1xuXG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBjb21wdXRlZDp7XG4gICAgICBsb2FkU3RhdHVzKCl7XG4gICAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5sb2FkU3RhdHVzO1xuICAgICAgfVxuICAgIH1cbiAgfVxuPC9zY3JpcHQ+XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbG9hZGluZy52dWU/OWQ4NzMyYjYiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gKF92bS5sb2FkU3RhdHVzKSA/IF9jKCdkaXYnLCB7XG4gICAgc3RhdGljQ2xhc3M6IFwibG9hZGluZ1wiXG4gIH0pIDogX3ZtLl9lKClcbn0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXIuanM/aWQ9ZGF0YS12LTljYTBjYzAwIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9sb2FkaW5nLnZ1ZVxuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcbiAgcmV0dXJuIF9jKCdkaXYnLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIFwiaWRcIjogXCJhcHBcIlxuICAgIH1cbiAgfSwgW19jKCdoMScsIFtfdm0uX3YoX3ZtLl9zKF92bS50aXRsZSkpXSksIF92bS5fdihcIiBcIiksIF9jKCdyb3V0ZXItdmlldycsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJrZWVwLWFsaXZlXCI6IFwiXCJcbiAgICB9XG4gIH0pLCBfdm0uX3YoXCIgXCIpLCBfYygnbG9hZGluZycpXSwgMSlcbn0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXIuanM/aWQ9ZGF0YS12LWQ2NjFhZDk4IS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9zcmMvYXBwLnZ1ZVxuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fdnVlX2V4cG9ydHNfXywgX192dWVfb3B0aW9uc19fXG52YXIgX192dWVfc3R5bGVzX18gPSB7fVxuXG4vKiBzY3JpcHQgKi9cbl9fdnVlX2V4cG9ydHNfXyA9IHJlcXVpcmUoXCIhIWJhYmVsLWxvYWRlciF2dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5cbi8qIHRlbXBsYXRlICovXG52YXIgX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyP2lkPWRhdGEtdi0xYzgxZjhlOCF2dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXyB8fCB7fVxuaWYgKFxuICB0eXBlb2YgX192dWVfZXhwb3J0c19fLmRlZmF1bHQgPT09IFwib2JqZWN0XCIgfHxcbiAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCJcbikge1xuX192dWVfb3B0aW9uc19fID0gX192dWVfZXhwb3J0c19fID0gX192dWVfZXhwb3J0c19fLmRlZmF1bHRcbn1cbmlmICh0eXBlb2YgX192dWVfb3B0aW9uc19fID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgX192dWVfb3B0aW9uc19fID0gX192dWVfb3B0aW9uc19fLm9wdGlvbnNcbn1cblxuX192dWVfb3B0aW9uc19fLnJlbmRlciA9IF9fdnVlX3RlbXBsYXRlX18ucmVuZGVyXG5fX3Z1ZV9vcHRpb25zX18uc3RhdGljUmVuZGVyRm5zID0gX192dWVfdGVtcGxhdGVfXy5zdGF0aWNSZW5kZXJGbnNcblxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9leHBvcnRzX19cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3ZpZXcvaW5kZXgvaW5kZXgudnVlXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCI8dGVtcGxhdGU+XG4gICAgPGRpdiBjbGFzcz1cImJveFwiPlxuICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgQGNsaWNrPVwic2hvd0xvYWRpbmcoKVwiPuaYvuekumxvYWRpbmc8L2E+XG4gICAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuICBpbXBvcnQgJy4vbGVzcy9pbmRleC5sZXNzJ1xuICBpbXBvcnQgc3RvcmUgZnJvbSAnLi4vLi4vdnVleC9zdG9yZSdcblxuICBleHBvcnQgZGVmYXVsdCB7XG4gICAgbWV0aG9kczp7XG4gICAgICAgIHNob3dMb2FkaW5nOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdMT0FEX1NUQVRVUycsdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gIH1cbjwvc2NyaXB0PlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4LnZ1ZT8zNzg4ZTZkYSIsIm1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG4gIHJldHVybiBfYygnZGl2Jywge1xuICAgIHN0YXRpY0NsYXNzOiBcImJveFwiXG4gIH0sIFtfYygnYScsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJocmVmXCI6IFwiamF2YXNjcmlwdDp2b2lkKDApXCJcbiAgICB9LFxuICAgIG9uOiB7XG4gICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICBfdm0uc2hvd0xvYWRpbmcoKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW192bS5fdihcIuaYvuekumxvYWRpbmdcIildKV0pXG59LHN0YXRpY1JlbmRlckZuczogW119XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Z1ZS1sb2FkZXIvbGliL3RlbXBsYXRlLWNvbXBpbGVyLmpzP2lkPWRhdGEtdi0xYzgxZjhlOCEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vc3JjL3ZpZXcvaW5kZXgvaW5kZXgudnVlXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9