!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n(1);var o=n(4),i=r(o),a=n(7),s=r(a),u=n(8),c=r(u),f=n(34),l=r(f),p=n(36),d=r(p),h=n(49),v=r(h);i.default.use(s.default),i.default.prototype.$http=c.default;var m=[{path:"/index",name:"index",component:v.default},{path:"*",redirect:"/index"}],y=new s.default({routes:m});new i.default({el:"#app",router:y,store:l.default,render:function(t){return t(d.default)}}).$mount("#app")},function(t,e,n){"use strict";t.exports=n(2).polyfill()},function(t,e,n){(function(e,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   v4.2.4+314e4831
	 */
!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function r(t){return"function"==typeof t}function o(t){z=t}function i(t){J=t}function a(){return function(){return e.nextTick(l)}}function s(){return"undefined"!=typeof q?function(){q(l)}:f()}function u(){var t=0,e=new W(l),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=l,function(){return t.port2.postMessage(0)}}function f(){var t=setTimeout;return function(){return t(l,1)}}function l(){for(var t=0;t<H;t+=2){var e=Z[t],n=Z[t+1];e(n),Z[t]=void 0,Z[t+1]=void 0}H=0}function p(){try{var t=Function("return this")().require("vertx");return q=t.runOnLoop||t.runOnContext,s()}catch(t){return f()}}function d(t,e){var n=this,r=new this.constructor(v);void 0===r[tt]&&M(r);var o=n._state;if(o){var i=arguments[o-1];J(function(){return T(o,r,i,n._result)})}else O(n,r,t,e);return r}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return $(n,t),n}function v(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(t){return ot.error=t,ot}}function _(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function b(t,e,n){J(function(t){var r=!1,o=_(n,e,function(n){r||(r=!0,e!==n?$(t,n):C(t,n))},function(e){r||(r=!0,A(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,A(t,o))},t)}function w(t,e){e._state===nt?C(t,e._result):e._state===rt?A(t,e._result):O(e,void 0,function(e){return $(t,e)},function(e){return A(t,e)})}function x(t,e,n){e.constructor===t.constructor&&n===d&&e.constructor.resolve===h?w(t,e):n===ot?(A(t,ot.error),ot.error=null):void 0===n?C(t,e):r(n)?b(t,e,n):C(t,e)}function $(e,n){e===n?A(e,m()):t(n)?x(e,n,g(n)):C(e,n)}function k(t){t._onerror&&t._onerror(t._result),E(t)}function C(t,e){t._state===et&&(t._result=e,t._state=nt,0!==t._subscribers.length&&J(E,t))}function A(t,e){t._state===et&&(t._state=rt,t._result=e,J(k,t))}function O(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+nt]=n,o[i+rt]=r,0===i&&t._state&&J(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?T(n,r,o,i):o(i);t._subscribers.length=0}}function S(t,e){try{return t(e)}catch(t){return ot.error=t,ot}}function T(t,e,n,o){var i=r(n),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=S(n,o),a===ot?(c=!0,s=a.error,a.error=null):u=!0,e===a)return void A(e,y())}else a=o,u=!0;e._state!==et||(i&&u?$(e,a):c?A(e,s):t===nt?C(e,a):t===rt&&A(e,a))}function j(t,e){try{e(function(e){$(t,e)},function(e){A(t,e)})}catch(e){A(t,e)}}function N(){return it++}function M(t){t[tt]=it++,t._state=void 0,t._result=void 0,t._subscribers=[]}function R(){return new Error("Array Methods must be provided an Array")}function L(t){return new at(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function I(t){var e=this,n=new e(v);return A(n,t),n}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(){var t=void 0;if("undefined"!=typeof n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=st}var U=void 0;U=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=U,H=0,q=void 0,z=void 0,J=function(t,e){Z[H]=t,Z[H+1]=e,H+=2,2===H&&(z?z(l):Q())},K="undefined"!=typeof window?window:void 0,G=K||{},W=G.MutationObserver||G.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),Y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),Q=void 0;Q=X?a():W?u():Y?c():void 0===K?p():f();var tt=Math.random().toString(36).substring(2),et=void 0,nt=1,rt=2,ot={error:null},it=0,at=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(v),this.promise[tt]||M(this.promise),B(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&C(this.promise,this._result))):A(this.promise,R())}return t.prototype._enumerate=function(t){for(var e=0;this._state===et&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=g(t);if(o===d&&t._state!==et)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===st){var i=new n(v);x(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===et&&(this._remaining--,t===rt?A(r,n):this._result[e]=n),0===this._remaining&&C(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;O(t,void 0,function(t){return n._settledAt(nt,e,t)},function(t){return n._settledAt(rt,e,t)})},t}(),st=function(){function t(e){this[tt]=N(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&P(),this instanceof t?j(this,e):F())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,n=e.constructor;return e.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},t}();return st.prototype.then=d,st.all=L,st.race=D,st.resolve=h,st.reject=I,st._setScheduler=o,st._setAsap=i,st._asap=J,st.polyfill=V,st.Promise=st,st})}).call(e,n(3),function(){return this}())},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function a(){v&&d&&(v=!1,d.length?h=d.concat(h):m=-1,h.length&&s())}function s(){if(!v){var t=o(a);v=!0;for(var e=h.length;e;){for(d=h,h=[];++m<e;)d&&d[m].run();m=-1,e=h.length}d=null,v=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var f,l,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var d,h=[],v=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new u(t,e)),1!==h.length||v||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){(function(e,n){/*!
	 * Vue.js v2.5.15
	 * (c) 2014-2018 Evan You
	 * Released under the MIT License.
	 */
!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t){return void 0===t||null===t}function r(t){return void 0!==t&&null!==t}function o(t){return t===!0}function i(t){return t===!1}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function s(t){return null!==t&&"object"==typeof t}function u(t){return ji.call(t).slice(8,-1)}function c(t){return"[object Object]"===ji.call(t)}function f(t){return"[object RegExp]"===ji.call(t)}function l(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function h(t,e){for(var n=Object.create(null),r=t.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}function v(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function m(t,e){return Ri.call(t,e)}function y(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}function g(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function _(t,e){return t.bind(e)}function b(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function w(t,e){for(var n in e)t[n]=e[n];return t}function x(t){for(var e={},n=0;n<t.length;n++)t[n]&&w(e,t[n]);return e}function $(t,e,n){}function k(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}function C(t,e){if(t===e)return!0;var n=s(t),r=s(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var o=Array.isArray(t),i=Array.isArray(e);if(o&&i)return t.length===e.length&&t.every(function(t,n){return C(t,e[n])});if(o||i)return!1;var a=Object.keys(t),u=Object.keys(e);return a.length===u.length&&a.every(function(n){return C(t[n],e[n])})}catch(t){return!1}}function A(t,e){for(var n=0;n<t.length;n++)if(C(t[n],e))return n;return-1}function O(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function E(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function S(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function T(t){if(!Ki.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}function j(t){return"function"==typeof t&&/native code/.test(t.toString())}function N(t){wa.target&&xa.push(wa.target),wa.target=t}function M(){wa.target=xa.pop()}function R(t){return new $a(void 0,void 0,void 0,String(t))}function L(t){var e=new $a(t.tag,t.data,t.children,t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.isCloned=!0,e}function D(t){Ta=t}function I(t,e,n){t.__proto__=e}function P(t,e,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];S(t,i,e[i])}}function F(t,e){if(s(t)&&!(t instanceof $a)){var n;return m(t,"__ob__")&&t.__ob__ instanceof ja?n=t.__ob__:Ta&&!ca()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new ja(t)),e&&n&&n.vmCount++,n}}function V(t,e,n,r,o){var i=new wa,a=Object.getOwnPropertyDescriptor(t,e);if(!a||a.configurable!==!1){var s=a&&a.get;s||2!==arguments.length||(n=t[e]);var u=a&&a.set,c=!o&&F(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return wa.target&&(i.depend(),c&&(c.dep.depend(),Array.isArray(e)&&H(e))),e},set:function(e){var a=s?s.call(t):n;e===a||e!==e&&a!==a||(r&&r(),u?u.call(t,e):n=e,c=!o&&F(e),i.notify())}})}}function U(t,e,n){if(Array.isArray(t)||s(t)||pa("Cannot set reactive property on non-object/array value: "+t),Array.isArray(t)&&l(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?(pa("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),n):r?(V(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function B(t,e){if(Array.isArray(t)||s(t)||pa("Cannot delete reactive property on non-object/array value: "+t),Array.isArray(t)&&l(e))return void t.splice(e,1);var n=t.__ob__;return t._isVue||n&&n.vmCount?void pa("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):void(m(t,e)&&(delete t[e],n&&n.dep.notify()))}function H(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&H(e)}function q(t,e){if(!e)return t;for(var n,r,o,i=Object.keys(e),a=0;a<i.length;a++)n=i[a],r=t[n],o=e[n],m(t,n)?c(r)&&c(o)&&q(r,o):U(t,n,o);return t}function z(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,o="function"==typeof t?t.call(n,n):t;return r?q(r,o):o}:e?t?function(){return q("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function J(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function K(t,e,n,r){var o=Object.create(t||null);return e?(Q(r,e,n),w(o,e)):o}function G(t){for(var e in t.components)W(e)}function W(t){/^[a-zA-Z][\w-]*$/.test(t)||pa('Invalid component name: "'+t+'". Component names can only contain alphanumeric characters and the hyphen, and must start with a letter.'),(Ni(t)||Ji.isReservedTag(t))&&pa("Do not use built-in or reserved HTML elements as component id: "+t)}function X(t,e){var n=t.props;if(n){var r,o,i,a={};if(Array.isArray(n))for(r=n.length;r--;)o=n[r],"string"==typeof o?(i=Di(o),a[i]={type:null}):pa("props must be strings when using array syntax.");else if(c(n))for(var s in n)o=n[s],i=Di(s),a[i]=c(o)?o:{type:o};else pa('Invalid value for option "props": expected an Array or an Object, but got '+u(n)+".",e);t.props=a}}function Y(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(c(n))for(var i in n){var a=n[i];r[i]=c(a)?w({from:i},a):{from:a}}else pa('Invalid value for option "inject": expected an Array or an Object, but got '+u(n)+".",e)}}function Z(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}function Q(t,e,n){c(e)||pa('Invalid value for option "'+t+'": expected an Object, but got '+u(e)+".",n)}function tt(t,e,n){function r(r){var o=Na[r]||La;u[r]=o(t[r],e[r],n,r)}G(e),"function"==typeof e&&(e=e.options),X(e,n),Y(e,n),Z(e);var o=e.extends;if(o&&(t=tt(t,o,n)),e.mixins)for(var i=0,a=e.mixins.length;i<a;i++)t=tt(t,e.mixins[i],n);var s,u={};for(s in t)r(s);for(s in e)m(t,s)||r(s);return u}function et(t,e,n,r){if("string"==typeof n){var o=t[e];if(m(o,n))return o[n];var i=Di(n);if(m(o,i))return o[i];var a=Ii(i);if(m(o,a))return o[a];var s=o[n]||o[i]||o[a];return r&&!s&&pa("Failed to resolve "+e.slice(0,-1)+": "+n,t),s}}function nt(t,e,n,r){var o=e[t],i=!m(n,t),a=n[t],s=ut(Boolean,o.type);if(s>-1)if(i&&!m(o,"default"))a=!1;else if(""===a||a===Fi(t)){var u=ut(String,o.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=rt(r,o,t);var c=Ta;D(!0),F(a),D(c)}return ot(o,t,a,r,i),a}function rt(t,e,n){if(m(e,"default")){var r=e.default;return s(r)&&pa('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',t),t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"==typeof r&&"Function"!==at(e.type)?r.call(t):r}}function ot(t,e,n,r,o){if(t.required&&o)return void pa('Missing required prop: "'+e+'"',r);if(null!=n||t.required){var i=t.type,a=!i||i===!0,s=[];if(i){Array.isArray(i)||(i=[i]);for(var c=0;c<i.length&&!a;c++){var f=it(n,i[c]);s.push(f.expectedType||""),a=f.valid}}if(!a)return void pa('Invalid prop: type check failed for prop "'+e+'". Expected '+s.map(Ii).join(", ")+", got "+u(n)+".",r);var l=t.validator;l&&(l(n)||pa('Invalid prop: custom validator check failed for prop "'+e+'".',r))}}function it(t,e){var n,r=at(e);if(Da.test(r)){var o=typeof t;n=o===r.toLowerCase(),n||"object"!==o||(n=t instanceof e)}else n="Object"===r?c(t):"Array"===r?Array.isArray(t):t instanceof e;return{valid:n,expectedType:r}}function at(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function st(t,e){return at(t)===at(e)}function ut(t,e){if(!Array.isArray(e))return st(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(st(e[n],t))return n;return-1}function ct(t,e,n){if(e)for(var r=e;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{var a=o[i].call(r,t,e,n)===!1;if(a)return}catch(t){ft(t,r,"errorCaptured hook")}}ft(t,e,n)}function ft(t,e,n){if(Ji.errorHandler)try{return Ji.errorHandler.call(null,t,e,n)}catch(t){lt(t,null,"config.errorHandler")}lt(t,e,n)}function lt(t,e,n){if(pa("Error in "+n+': "'+t.toString()+'"',e),!Wi&&!Xi||"undefined"==typeof console)throw t;console.error(t)}function pt(){Pa=!1;var t=Ia.slice(0);Ia.length=0;for(var e=0;e<t.length;e++)t[e]()}function dt(t){return t._withTask||(t._withTask=function(){Fa=!0;var e=t.apply(null,arguments);return Fa=!1,e})}function ht(t,e){var n;if(Ia.push(function(){if(t)try{t.call(e)}catch(t){ct(t,e,"nextTick")}else n&&n(e)}),Pa||(Pa=!0,Fa?Ra():Ma()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}function vt(t){mt(t,ts),ts.clear()}function mt(t,e){var n,r,o=Array.isArray(t);if(!(!o&&!s(t)||Object.isFrozen(t)||t instanceof $a)){if(t.__ob__){var i=t.__ob__.dep.id;if(e.has(i))return;e.add(i)}if(o)for(n=t.length;n--;)mt(t[n],e);else for(r=Object.keys(t),n=r.length;n--;)mt(t[r[n]],e)}}function yt(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),o=0;o<r.length;o++)r[o].apply(null,t)}return e.fns=t,e}function gt(e,n,r,o,i){var a,s,u,c,f;for(a in e)s=u=e[a],c=n[a],f=es(a),t(u)?pa('Invalid handler for event "'+f.name+'": got '+String(u),i):t(c)?(t(u.fns)&&(u=e[a]=yt(u)),r(f.name,u,f.once,f.capture,f.passive,f.params)):u!==c&&(c.fns=u,e[a]=c);for(a in n)t(e[a])&&(f=es(a),o(f.name,n[a],f.capture))}function _t(e,n,i){function a(){i.apply(this,arguments),v(s.fns,a)}e instanceof $a&&(e=e.data.hook||(e.data.hook={}));var s,u=e[n];t(u)?s=yt([a]):r(u.fns)&&o(u.merged)?(s=u,s.fns.push(a)):s=yt([u,a]),s.merged=!0,e[n]=s}function bt(e,n,o){var i=n.options.props;if(!t(i)){var a={},s=e.attrs,u=e.props;if(r(s)||r(u))for(var c in i){var f=Fi(c),l=c.toLowerCase();c!==l&&s&&m(s,l)&&da('Prop "'+l+'" is passed to component '+va(o||n)+', but the declared prop name is "'+c+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+f+'" instead of "'+c+'".'),wt(a,u,c,f,!0)||wt(a,s,c,f,!1)}return a}}function wt(t,e,n,o,i){if(r(e)){if(m(e,n))return t[n]=e[n],i||delete e[n],!0;if(m(e,o))return t[n]=e[o],i||delete e[o],!0}return!1}function xt(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function $t(t){return a(t)?[R(t)]:Array.isArray(t)?Ct(t):void 0}function kt(t){return r(t)&&r(t.text)&&i(t.isComment)}function Ct(e,n){var i,s,u,c,f=[];for(i=0;i<e.length;i++)s=e[i],t(s)||"boolean"==typeof s||(u=f.length-1,c=f[u],Array.isArray(s)?s.length>0&&(s=Ct(s,(n||"")+"_"+i),kt(s[0])&&kt(c)&&(f[u]=R(c.text+s[0].text),s.shift()),f.push.apply(f,s)):a(s)?kt(c)?f[u]=R(c.text+s):""!==s&&f.push(R(s)):kt(s)&&kt(c)?f[u]=R(c.text+s.text):(o(e._isVList)&&r(s.tag)&&t(s.key)&&r(n)&&(s.key="__vlist"+n+"_"+i+"__"),f.push(s)));return f}function At(t,e){return(t.__esModule||la&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function Ot(t,e,n,r,o){var i=Ca();return i.asyncFactory=t,i.asyncMeta={data:e,context:n,children:r,tag:o},i}function Et(e,n,i){if(o(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;if(o(e.loading)&&r(e.loadingComp))return e.loadingComp;if(!r(e.contexts)){var a=e.contexts=[i],u=!0,c=function(){for(var t=0,e=a.length;t<e;t++)a[t].$forceUpdate()},f=O(function(t){e.resolved=At(t,n),u||c()}),l=O(function(t){pa("Failed to resolve async component: "+String(e)+(t?"\nReason: "+t:"")),r(e.errorComp)&&(e.error=!0,c())}),p=e(f,l);return s(p)&&("function"==typeof p.then?t(e.resolved)&&p.then(f,l):r(p.component)&&"function"==typeof p.component.then&&(p.component.then(f,l),r(p.error)&&(e.errorComp=At(p.error,n)),r(p.loading)&&(e.loadingComp=At(p.loading,n),0===p.delay?e.loading=!0:setTimeout(function(){t(e.resolved)&&t(e.error)&&(e.loading=!0,c())},p.delay||200)),r(p.timeout)&&setTimeout(function(){t(e.resolved)&&l("timeout ("+p.timeout+"ms)")},p.timeout))),u=!1,e.loading?e.loadingComp:e.resolved}e.contexts.push(i)}function St(t){return t.isComment&&t.asyncFactory}function Tt(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||St(n)))return n}}function jt(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Rt(t,e)}function Nt(t,e,n){n?Qa.$once(t,e):Qa.$on(t,e)}function Mt(t,e){Qa.$off(t,e)}function Rt(t,e,n){Qa=t,gt(e,n||{},Nt,Mt,t),Qa=void 0}function Lt(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this,o=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.$on(t[i],n);else(o._events[t]||(o._events[t]=[])).push(n),e.test(t)&&(o._hasHookEvent=!0);return o},t.prototype.$once=function(t,e){function n(){r.$off(t,n),e.apply(r,arguments)}var r=this;return n.fn=e,r.$on(t,n),r},t.prototype.$off=function(t,e){var n=this,r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(t)){for(var o=0,i=t.length;o<i;o++)n.$off(t[o],e);return r}var a=r._events[t];if(!a)return r;if(!e)return r._events[t]=null,r;if(e)for(var s,u=a.length;u--;)if(s=a[u],s===e||s.fn===e){a.splice(u,1);break}return r},t.prototype.$emit=function(t){var e=this,n=t.toLowerCase();n!==t&&e._events[n]&&da('Event "'+n+'" is emitted in component '+va(e)+' but the handler is registered for "'+t+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+Fi(t)+'" instead of "'+t+'".');var r=e._events[t];if(r){r=r.length>1?b(r):r;for(var o=b(arguments,1),i=0,a=r.length;i<a;i++)try{r[i].apply(e,o)}catch(n){ct(n,e,'event handler for "'+t+'"')}}return e}}function Dt(t,e){var n={};if(!t)return n;for(var r=0,o=t.length;r<o;r++){var i=t[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==e&&i.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(i);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===i.tag?u.push.apply(u,i.children||[]):u.push(i)}}for(var c in n)n[c].every(It)&&delete n[c];return n}function It(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Pt(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?Pt(t[n],e):e[t[n].key]=t[n].fn;return e}function Ft(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Vt(t){t.prototype._update=function(t,e){var n=this;n._isMounted&&Jt(n,"beforeUpdate");var r=n.$el,o=n._vnode,i=ns;ns=n,n._vnode=t,o?n.$el=n.__patch__(o,t):(n.$el=n.__patch__(n.$el,t,e,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),ns=i,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Jt(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||v(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Jt(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Ut(t,e,n){t.$el=e,t.$options.render||(t.$options.render=Ca,t.$options.template&&"#"!==t.$options.template.charAt(0)||t.$options.el||e?pa("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",t):pa("Failed to mount component: template or render function not defined.",t)),Jt(t,"beforeMount");var r;return r=Ji.performance&&Ha?function(){var e=t._name,r=t._uid,o="vue-perf-start:"+r,i="vue-perf-end:"+r;Ha(o);var a=t._render();Ha(i),qa("vue "+e+" render",o,i),Ha(o),t._update(a,n),Ha(i),qa("vue "+e+" patch",o,i)}:function(){t._update(t._render(),n)},new ds(t,r,$,null,!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Jt(t,"mounted")),t}function Bt(t,e,n,r,o){rs=!0;var i=!!(o||t.$options._renderChildren||r.data.scopedSlots||t.$scopedSlots!==Ti);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=o,t.$attrs=r.data.attrs||Ti,t.$listeners=n||Ti,e&&t.$options.props){D(!1);for(var a=t._props,s=t.$options._propKeys||[],u=0;u<s.length;u++){var c=s[u],f=t.$options.props;a[c]=nt(c,f,e,t)}D(!0),t.$options.propsData=e}n=n||Ti;var l=t.$options._parentListeners;t.$options._parentListeners=n,Rt(t,n,l),i&&(t.$slots=Dt(o,r.context),t.$forceUpdate()),rs=!1}function Ht(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function qt(t,e){if(e){if(t._directInactive=!1,Ht(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)qt(t.$children[n]);Jt(t,"activated")}}function zt(t,e){if(!(e&&(t._directInactive=!0,Ht(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)zt(t.$children[n]);Jt(t,"deactivated")}}function Jt(t,e){N();var n=t.$options[e];if(n)for(var r=0,o=n.length;r<o;r++)try{n[r].call(t)}catch(n){ct(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),M()}function Kt(){ls=is.length=as.length=0,ss={},us={},cs=fs=!1}function Gt(){fs=!0;var t,e;for(is.sort(function(t,e){return t.id-e.id}),ls=0;ls<is.length;ls++)if(t=is[ls],e=t.id,ss[e]=null,t.run(),null!=ss[e]&&(us[e]=(us[e]||0)+1,us[e]>os)){pa("You may have an infinite update loop "+(t.user?'in watcher with expression "'+t.expression+'"':"in a component render function."),t.vm);break}var n=as.slice(),r=is.slice();Kt(),Yt(n),Wt(r),fa&&Ji.devtools&&fa.emit("flush")}function Wt(t){for(var e=t.length;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&Jt(r,"updated")}}function Xt(t){t._inactive=!1,as.push(t)}function Yt(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,qt(t[e],!0)}function Zt(t){var e=t.id;if(null==ss[e]){if(ss[e]=!0,fs){for(var n=is.length-1;n>ls&&is[n].id>t.id;)n--;is.splice(n+1,0,t)}else is.push(t);cs||(cs=!0,ht(Gt))}}function Qt(t,e,n){hs.get=function(){return this[e][n]},hs.set=function(t){this[e][n]=t},Object.defineProperty(t,n,hs)}function te(t){t._watchers=[];var e=t.$options;e.props&&ee(t,e.props),e.methods&&se(t,e.methods),e.data?ne(t):F(t._data={},!0),e.computed&&oe(t,e.computed),e.watch&&e.watch!==oa&&ue(t,e.watch)}function ee(t,e){var n=t.$options.propsData||{},r=t._props={},o=t.$options._propKeys=[],i=!t.$parent;i||D(!1);var a=function(i){o.push(i);var a=nt(i,e,n,t),s=Fi(i);(Mi(s)||Ji.isReservedAttr(s))&&pa('"'+s+'" is a reserved attribute and cannot be used as component prop.',t),V(r,i,a,function(){t.$parent&&!rs&&pa("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+i+'"',t)}),i in t||Qt(t,"_props",i)};for(var s in e)a(s);D(!0)}function ne(t){var e=t.$options.data;e=t._data="function"==typeof e?re(e,t):e||{},c(e)||(e={},pa("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",t));for(var n=Object.keys(e),r=t.$options.props,o=t.$options.methods,i=n.length;i--;){var a=n[i];o&&m(o,a)&&pa('Method "'+a+'" has already been defined as a data property.',t),r&&m(r,a)?pa('The data property "'+a+'" is already declared as a prop. Use prop default value instead.',t):E(a)||Qt(t,"_data",a)}F(e,!0)}function re(t,e){N();try{return t.call(e,e)}catch(t){return ct(t,e,"data()"),{}}finally{M()}}function oe(t,e){var n=t._computedWatchers=Object.create(null),r=ca();for(var o in e){var i=e[o],a="function"==typeof i?i:i.get;null==a&&pa('Getter is missing for computed property "'+o+'".',t),r||(n[o]=new ds(t,a||$,$,vs)),o in t?o in t.$data?pa('The computed property "'+o+'" is already defined in data.',t):t.$options.props&&o in t.$options.props&&pa('The computed property "'+o+'" is already defined as a prop.',t):ie(t,o,i)}}function ie(t,e,n){var r=!ca();"function"==typeof n?(hs.get=r?ae(e):n,hs.set=$):(hs.get=n.get?r&&n.cache!==!1?ae(e):n.get:$,hs.set=n.set?n.set:$),hs.set===$&&(hs.set=function(){pa('Computed property "'+e+'" was assigned to but it has no setter.',this)}),Object.defineProperty(t,e,hs)}function ae(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),wa.target&&e.depend(),e.value}}function se(t,e){var n=t.$options.props;for(var r in e)null==e[r]&&pa('Method "'+r+'" has an undefined value in the component definition. Did you reference the function correctly?',t),n&&m(n,r)&&pa('Method "'+r+'" has already been defined as a prop.',t),r in t&&E(r)&&pa('Method "'+r+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),t[r]=null==e[r]?$:Vi(e[r],t)}function ue(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)ce(t,n,r[o]);else ce(t,n,r)}}function ce(t,e,n,r){return c(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function fe(t){var e={};e.get=function(){return this._data};var n={};n.get=function(){return this._props},e.set=function(t){pa("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){pa("$props is readonly.",this)},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=U,t.prototype.$delete=B,t.prototype.$watch=function(t,e,n){var r=this;if(c(e))return ce(r,t,e,n);n=n||{},n.user=!0;var o=new ds(r,t,e,n);return n.immediate&&e.call(r,o.value),function(){o.teardown()}}}function le(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}function pe(t){var e=de(t.$options.inject,t);e&&(D(!1),Object.keys(e).forEach(function(n){V(t,n,e[n],function(){pa('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+n+'"',t)})}),D(!0))}function de(t,e){if(t){for(var n=Object.create(null),r=la?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),o=0;o<r.length;o++){for(var i=r[o],a=t[i].from,s=e;s;){if(s._provided&&m(s._provided,a)){n[i]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[i]){var u=t[i].default;n[i]="function"==typeof u?u.call(e):u}else pa('Injection "'+i+'" not found',e)}return n}}function he(t,e){var n,o,i,a,u;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),o=0,i=t.length;o<i;o++)n[o]=e(t[o],o);else if("number"==typeof t)for(n=new Array(t),o=0;o<t;o++)n[o]=e(o+1,o);else if(s(t))for(a=Object.keys(t),n=new Array(a.length),o=0,i=a.length;o<i;o++)u=a[o],n[o]=e(t[u],u,o);return r(n)&&(n._isVList=!0),n}function ve(t,e,n,r){var o,i=this.$scopedSlots[t];if(i)n=n||{},r&&(s(r)||pa("slot v-bind without argument expects an Object",this),n=w(w({},r),n)),o=i(n)||e;else{var a=this.$slots[t];a&&(a._rendered&&pa('Duplicate presence of slot "'+t+'" found in the same render tree - this will likely cause render errors.',this),a._rendered=!0),o=a||e}var u=n&&n.slot;return u?this.$createElement("template",{slot:u},o):o}function me(t){return et(this.$options,"filters",t,!0)||Bi}function ye(t,e){return Array.isArray(t)?t.indexOf(e)===-1:t!==e}function ge(t,e,n,r,o){var i=Ji.keyCodes[e]||n;return o&&r&&!Ji.keyCodes[e]?ye(o,r):i?ye(i,t):r?Fi(r)!==e:void 0}function _e(t,e,n,r,o){if(n)if(s(n)){Array.isArray(n)&&(n=x(n));var i,a=function(a){if("class"===a||"style"===a||Mi(a))i=t;else{var s=t.attrs&&t.attrs.type;i=r||Ji.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}if(!(a in i)&&(i[a]=n[a],o)){var u=t.on||(t.on={});u["update:"+a]=function(t){n[a]=t}}};for(var u in n)a(u)}else pa("v-bind without argument expects an Object or Array value",this);return t}function be(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?r:(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),xe(r,"__static__"+t,!1),r)}function we(t,e,n){return xe(t,"__once__"+e+(n?"_"+n:""),!0),t}function xe(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&$e(t[r],e+"_"+r,n);else $e(t,e,n)}function $e(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function ke(t,e){if(e)if(c(e)){var n=t.on=t.on?w({},t.on):{};for(var r in e){var o=n[r],i=e[r];n[r]=o?[].concat(o,i):i}}else pa("v-on without argument expects an Object value",this);return t}function Ce(t){t._o=we,t._n=d,t._s=p,t._l=he,t._t=ve,t._q=C,t._i=A,t._m=be,t._f=me,t._k=ge,t._b=_e,t._v=R,t._e=Ca,t._u=Pt,t._g=ke}function Ae(t,e,n,r,i){var a=i.options;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||Ti,this.injections=de(a.inject,r),this.slots=function(){return Dt(n,r)};var s=Object.create(r),u=o(a._compiled),c=!u;u&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||Ti),a._scopeId?this._c=function(t,e,n,o){var i=Le(s,t,e,n,o,c);return i&&!Array.isArray(i)&&(i.fnScopeId=a._scopeId,i.fnContext=r),i}:this._c=function(t,e,n,r){return Le(s,t,e,n,r,c)}}function Oe(t,e,n,o,i){var a=t.options,s={},u=a.props;if(r(u))for(var c in u)s[c]=nt(c,u,e||Ti);else r(n.attrs)&&Se(s,n.attrs),r(n.props)&&Se(s,n.props);var f=new Ae(n,s,i,o,t),l=a.render.call(null,f._c,f);if(l instanceof $a)return Ee(l,n,o,a),l;if(Array.isArray(l)){for(var p=$t(l)||[],d=0;d<p.length;d++)Ee(p[d],n,o,a);return p}}function Ee(t,e,n,r){t.fnContext=n,t.fnOptions=r,e.slot&&((t.data||(t.data={})).slot=e.slot)}function Se(t,e){for(var n in e)t[Di(n)]=e[n]}function Te(e,n,i,a,u){if(!t(e)){var c=i.$options._base;if(s(e)&&(e=c.extend(e)),"function"!=typeof e)return void pa("Invalid Component definition: "+String(e),i);var f;if(t(e.cid)&&(f=e,e=Et(f,c,i),void 0===e))return Ot(f,n,i,a,u);n=n||{},He(e),r(n.model)&&Re(e.options,n);var l=bt(n,e,u);if(o(e.options.functional))return Oe(e,l,n,i,a);var p=n.on;if(n.on=n.nativeOn,o(e.options.abstract)){var d=n.slot;n={},d&&(n.slot=d)}Ne(n);var h=e.options.name||u,v=new $a("vue-component-"+e.cid+(h?"-"+h:""),n,void 0,void 0,void 0,i,{Ctor:e,propsData:l,listeners:p,tag:u,children:a},f);return v}}function je(t,e,n,o){var i={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:n||null,_refElm:o||null},a=t.data.inlineTemplate;return r(a)&&(i.render=a.render,i.staticRenderFns=a.staticRenderFns),new t.componentOptions.Ctor(i)}function Ne(t){t.hook||(t.hook={});for(var e=0;e<ys.length;e++){var n=ys[e],r=t.hook[n],o=ms[n];t.hook[n]=r?Me(o,r):o}}function Me(t,e){return function(n,r,o,i){t(n,r,o,i),e(n,r,o,i)}}function Re(t,e){var n=t.model&&t.model.prop||"value",o=t.model&&t.model.event||"input";(e.props||(e.props={}))[n]=e.model.value;var i=e.on||(e.on={});r(i[o])?i[o]=[e.model.callback].concat(i[o]):i[o]=e.model.callback}function Le(t,e,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=_s),De(t,e,n,r,i)}function De(t,e,n,o,i){if(r(n)&&r(n.__ob__))return pa("Avoid using observed data object as vnode data: "+JSON.stringify(n)+"\nAlways create fresh vnode data objects in each render!",t),Ca();if(r(n)&&r(n.is)&&(e=n.is),!e)return Ca();r(n)&&r(n.key)&&!a(n.key)&&pa("Avoid using non-primitive value as key, use string/number value instead.",t),Array.isArray(o)&&"function"==typeof o[0]&&(n=n||{},n.scopedSlots={default:o[0]},o.length=0),i===_s?o=$t(o):i===gs&&(o=xt(o));var s,u;if("string"==typeof e){var c;u=t.$vnode&&t.$vnode.ns||Ji.getTagNamespace(e),s=Ji.isReservedTag(e)?new $a(Ji.parsePlatformTagName(e),n,o,void 0,void 0,t):r(c=et(t.$options,"components",e))?Te(c,n,t,o,e):new $a(e,n,o,void 0,void 0,t)}else s=Te(e,n,t,o);return Array.isArray(s)?s:r(s)?(r(u)&&Ie(s,u),r(n)&&Pe(n),s):Ca()}function Ie(e,n,i){if(e.ns=n,"foreignObject"===e.tag&&(n=void 0,i=!0),r(e.children))for(var a=0,s=e.children.length;a<s;a++){var u=e.children[a];r(u.tag)&&(t(u.ns)||o(i)&&"svg"!==u.tag)&&Ie(u,n,i)}}function Pe(t){s(t.style)&&vt(t.style),s(t.class)&&vt(t.class)}function Fe(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=Dt(e._renderChildren,r),t.$scopedSlots=Ti,t._c=function(e,n,r,o){return Le(t,e,n,r,o,!1)},t.$createElement=function(e,n,r,o){return Le(t,e,n,r,o,!0)};var o=n&&n.data;V(t,"$attrs",o&&o.attrs||Ti,function(){!rs&&pa("$attrs is readonly.",t)},!0),V(t,"$listeners",e._parentListeners||Ti,function(){!rs&&pa("$listeners is readonly.",t)},!0)}function Ve(t){Ce(t.prototype),t.prototype.$nextTick=function(t){return ht(t,this)},t.prototype._render=function(){var t=this,e=t.$options,n=e.render,r=e._parentVnode;for(var o in t.$slots)t.$slots[o]._rendered=!1;r&&(t.$scopedSlots=r.data.scopedSlots||Ti),t.$vnode=r;var i;try{i=n.call(t._renderProxy,t.$createElement)}catch(e){if(ct(e,t,"render"),t.$options.renderError)try{i=t.$options.renderError.call(t._renderProxy,t.$createElement,e)}catch(e){ct(e,t,"renderError"),i=t._vnode}else i=t._vnode}return i instanceof $a||(Array.isArray(i)&&pa("Multiple root nodes returned from render function. Render function should return a single root node.",t),i=Ca()),i.parent=r,i}}function Ue(t){t.prototype._init=function(t){var e=this;e._uid=bs++;var n,r;Ji.performance&&Ha&&(n="vue-perf-start:"+e._uid,r="vue-perf-end:"+e._uid,Ha(n)),e._isVue=!0,t&&t._isComponent?Be(e,t):e.$options=tt(He(e.constructor),t||{},e),Ja(e),e._self=e,Ft(e),jt(e),Fe(e),Jt(e,"beforeCreate"),pe(e),te(e),le(e),Jt(e,"created"),Ji.performance&&Ha&&(e._name=va(e,!1),Ha(r),qa("vue "+e._name+" init",n,r)),e.$options.el&&e.$mount(e.$options.el)}}function Be(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r,n._parentElm=e._parentElm,n._refElm=e._refElm;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function He(t){var e=t.options;if(t.super){var n=He(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var o=qe(t);o&&w(t.extendOptions,o),e=t.options=tt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function qe(t){var e,n=t.options,r=t.extendOptions,o=t.sealedOptions;for(var i in n)n[i]!==o[i]&&(e||(e={}),e[i]=ze(n[i],r[i],o[i]));return e}function ze(t,e,n){if(Array.isArray(t)){var r=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var o=0;o<t.length;o++)(e.indexOf(t[o])>=0||n.indexOf(t[o])<0)&&r.push(t[o]);return r}return t}function Je(t){this instanceof Je||pa("Vue is a constructor and should be called with the `new` keyword"),this._init(t)}function Ke(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=b(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}function Ge(t){t.mixin=function(t){return this.options=tt(this.options,t),this}}function We(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,o=t._Ctor||(t._Ctor={});if(o[r])return o[r];var i=t.name||n.options.name;i&&W(i);var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),
a.prototype.constructor=a,a.cid=e++,a.options=tt(n.options,t),a.super=n,a.options.props&&Xe(a),a.options.computed&&Ye(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,qi.forEach(function(t){a[t]=n[t]}),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=w({},a.options),o[r]=a,a}}function Xe(t){var e=t.options.props;for(var n in e)Qt(t.prototype,"_props",n)}function Ye(t){var e=t.options.computed;for(var n in e)ie(t.prototype,n,e[n])}function Ze(t){qi.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&W(t),"component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}function Qe(t){return t&&(t.Ctor.options.name||t.tag)}function tn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!f(t)&&t.test(e)}function en(t,e){var n=t.cache,r=t.keys,o=t._vnode;for(var i in n){var a=n[i];if(a){var s=Qe(a.componentOptions);s&&!e(s)&&nn(n,i,r,o)}}}function nn(t,e,n,r){var o=t[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),t[e]=null,v(n,e)}function rn(t){var e={};e.get=function(){return Ji},e.set=function(){pa("Do not replace the Vue.config object, set individual fields instead.")},Object.defineProperty(t,"config",e),t.util={warn:pa,extend:w,mergeOptions:tt,defineReactive:V},t.set=U,t.delete=B,t.nextTick=ht,t.options=Object.create(null),qi.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,w(t.options.components,$s),Ke(t),Ge(t),We(t),Ze(t)}function on(t){for(var e=t.data,n=t,o=t;r(o.componentInstance);)o=o.componentInstance._vnode,o&&o.data&&(e=an(o.data,e));for(;r(n=n.parent);)n&&n.data&&(e=an(e,n.data));return sn(e.staticClass,e.class)}function an(t,e){return{staticClass:un(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function sn(t,e){return r(t)||r(e)?un(t,cn(e)):""}function un(t,e){return t?e?t+" "+e:t:e||""}function cn(t){return Array.isArray(t)?fn(t):s(t)?ln(t):"string"==typeof t?t:""}function fn(t){for(var e,n="",o=0,i=t.length;o<i;o++)r(e=cn(t[o]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function ln(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function pn(t){return qs(t)?"svg":"math"===t?"math":void 0}function dn(t){if(!Wi)return!0;if(Js(t))return!1;if(t=t.toLowerCase(),null!=Ks[t])return Ks[t];var e=document.createElement(t);return t.indexOf("-")>-1?Ks[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Ks[t]=/HTMLUnknownElement/.test(e.toString())}function hn(t){if("string"==typeof t){var e=document.querySelector(t);return e?e:(pa("Cannot find element: "+t),document.createElement("div"))}return t}function vn(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function mn(t,e){return document.createElementNS(Bs[t],e)}function yn(t){return document.createTextNode(t)}function gn(t){return document.createComment(t)}function _n(t,e,n){t.insertBefore(e,n)}function bn(t,e){t.removeChild(e)}function wn(t,e){t.appendChild(e)}function xn(t){return t.parentNode}function $n(t){return t.nextSibling}function kn(t){return t.tagName}function Cn(t,e){t.textContent=e}function An(t,e){t.setAttribute(e,"")}function On(t,e){var n=t.data.ref;if(r(n)){var o=t.context,i=t.componentInstance||t.elm,a=o.$refs;e?Array.isArray(a[n])?v(a[n],i):a[n]===i&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}function En(e,n){return e.key===n.key&&(e.tag===n.tag&&e.isComment===n.isComment&&r(e.data)===r(n.data)&&Sn(e,n)||o(e.isAsyncPlaceholder)&&e.asyncFactory===n.asyncFactory&&t(n.asyncFactory.error))}function Sn(t,e){if("input"!==t.tag)return!0;var n,o=r(n=t.data)&&r(n=n.attrs)&&n.type,i=r(n=e.data)&&r(n=n.attrs)&&n.type;return o===i||Gs(o)&&Gs(i)}function Tn(t,e,n){var o,i,a={};for(o=e;o<=n;++o)i=t[o].key,r(i)&&(a[i]=o);return a}function jn(e){function n(t){return new $a(D.tagName(t).toLowerCase(),{},[],void 0,t)}function i(t,e){function n(){0===--n.listeners&&s(t)}return n.listeners=e,n}function s(t){var e=D.parentNode(t);r(e)&&D.removeChild(e,t)}function u(t,e){return!e&&!t.ns&&!(Ji.ignoredElements.length&&Ji.ignoredElements.some(function(e){return f(e)?e.test(t.tag):e===t.tag}))&&Ji.isUnknownElement(t.tag)}function c(t,e,n,i,a,s,c){if(r(t.elm)&&r(s)&&(t=s[c]=L(t)),t.isRootInsert=!a,!l(t,e,n,i)){var f=t.data,p=t.children,d=t.tag;r(d)?(f&&f.pre&&I++,u(t,I)&&pa("Unknown custom element: <"+d+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',t.context),t.elm=t.ns?D.createElementNS(t.ns,d):D.createElement(d,t),_(t),m(t,p,e),r(f)&&g(t,e),v(n,t.elm,i),f&&f.pre&&I--):o(t.isComment)?(t.elm=D.createComment(t.text),v(n,t.elm,i)):(t.elm=D.createTextNode(t.text),v(n,t.elm,i))}}function l(t,e,n,i){var a=t.data;if(r(a)){var s=r(t.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(t,!1,n,i),r(t.componentInstance))return p(t,e),o(s)&&d(t,e,n,i),!0}}function p(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,y(t)?(g(t,e),_(t)):(On(t),e.push(t))}function d(t,e,n,o){for(var i,a=t;a.componentInstance;)if(a=a.componentInstance._vnode,r(i=a.data)&&r(i=i.transition)){for(i=0;i<M.activate.length;++i)M.activate[i](Ys,a);e.push(a);break}v(n,t.elm,o)}function v(t,e,n){r(t)&&(r(n)?n.parentNode===t&&D.insertBefore(t,e,n):D.appendChild(t,e))}function m(t,e,n){if(Array.isArray(e)){C(e);for(var r=0;r<e.length;++r)c(e[r],n,t.elm,null,!0,e,r)}else a(t.text)&&D.appendChild(t.elm,D.createTextNode(String(t.text)))}function y(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function g(t,e){for(var n=0;n<M.create.length;++n)M.create[n](Ys,t);j=t.data.hook,r(j)&&(r(j.create)&&j.create(Ys,t),r(j.insert)&&e.push(t))}function _(t){var e;if(r(e=t.fnScopeId))D.setStyleScope(t.elm,e);else for(var n=t;n;)r(e=n.context)&&r(e=e.$options._scopeId)&&D.setStyleScope(t.elm,e),n=n.parent;r(e=ns)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&D.setStyleScope(t.elm,e)}function b(t,e,n,r,o,i){for(;r<=o;++r)c(n[r],i,t,e,!1,n,r)}function w(t){var e,n,o=t.data;if(r(o))for(r(e=o.hook)&&r(e=e.destroy)&&e(t),e=0;e<M.destroy.length;++e)M.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)w(t.children[n])}function x(t,e,n,o){for(;n<=o;++n){var i=e[n];r(i)&&(r(i.tag)?($(i),w(i)):s(i.elm))}}function $(t,e){if(r(e)||r(t.data)){var n,o=M.remove.length+1;for(r(e)?e.listeners+=o:e=i(t.elm,o),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&$(n,e),n=0;n<M.remove.length;++n)M.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else s(t.elm)}function k(e,n,o,i,a){var s,u,f,l,p=0,d=0,h=n.length-1,v=n[0],m=n[h],y=o.length-1,g=o[0],_=o[y],w=!a;for(C(o);p<=h&&d<=y;)t(v)?v=n[++p]:t(m)?m=n[--h]:En(v,g)?(O(v,g,i),v=n[++p],g=o[++d]):En(m,_)?(O(m,_,i),m=n[--h],_=o[--y]):En(v,_)?(O(v,_,i),w&&D.insertBefore(e,v.elm,D.nextSibling(m.elm)),v=n[++p],_=o[--y]):En(m,g)?(O(m,g,i),w&&D.insertBefore(e,m.elm,v.elm),m=n[--h],g=o[++d]):(t(s)&&(s=Tn(n,p,h)),u=r(g.key)?s[g.key]:A(g,n,p,h),t(u)?c(g,i,e,v.elm,!1,o,d):(f=n[u],En(f,g)?(O(f,g,i),n[u]=void 0,w&&D.insertBefore(e,f.elm,v.elm)):c(g,i,e,v.elm,!1,o,d)),g=o[++d]);p>h?(l=t(o[y+1])?null:o[y+1].elm,b(e,l,o,d,y,i)):d>y&&x(e,n,p,h)}function C(t){for(var e={},n=0;n<t.length;n++){var o=t[n],i=o.key;r(i)&&(e[i]?pa("Duplicate keys detected: '"+i+"'. This may cause an update error.",o.context):e[i]=!0)}}function A(t,e,n,o){for(var i=n;i<o;i++){var a=e[i];if(r(a)&&En(t,a))return i}}function O(e,n,i,a){if(e!==n){var s=n.elm=e.elm;if(o(e.isAsyncPlaceholder))return void(r(n.asyncFactory.resolved)?S(e.elm,n,i):n.isAsyncPlaceholder=!0);if(o(n.isStatic)&&o(e.isStatic)&&n.key===e.key&&(o(n.isCloned)||o(n.isOnce)))return void(n.componentInstance=e.componentInstance);var u,c=n.data;r(c)&&r(u=c.hook)&&r(u=u.prepatch)&&u(e,n);var f=e.children,l=n.children;if(r(c)&&y(n)){for(u=0;u<M.update.length;++u)M.update[u](e,n);r(u=c.hook)&&r(u=u.update)&&u(e,n)}t(n.text)?r(f)&&r(l)?f!==l&&k(s,f,l,i,a):r(l)?(r(e.text)&&D.setTextContent(s,""),b(s,null,l,0,l.length-1,i)):r(f)?x(s,f,0,f.length-1):r(e.text)&&D.setTextContent(s,""):e.text!==n.text&&D.setTextContent(s,n.text),r(c)&&r(u=c.hook)&&r(u=u.postpatch)&&u(e,n)}}function E(t,e,n){if(o(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}function S(t,e,n,i){var a,s=e.tag,u=e.data,c=e.children;if(i=i||u&&u.pre,e.elm=t,o(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(!T(t,e,i))return!1;if(r(u)&&(r(a=u.hook)&&r(a=a.init)&&a(e,!0),r(a=e.componentInstance)))return p(e,n),!0;if(r(s)){if(r(c))if(t.hasChildNodes())if(r(a=u)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==t.innerHTML)return"undefined"==typeof console||P||(P=!0,console.warn("Parent: ",t),console.warn("server innerHTML: ",a),console.warn("client innerHTML: ",t.innerHTML)),!1}else{for(var f=!0,l=t.firstChild,d=0;d<c.length;d++){if(!l||!S(l,c[d],n,i)){f=!1;break}l=l.nextSibling}if(!f||l)return"undefined"==typeof console||P||(P=!0,console.warn("Parent: ",t),console.warn("Mismatching childNodes vs. VNodes: ",t.childNodes,c)),!1}else m(e,c,n);if(r(u)){var h=!1;for(var v in u)if(!F(v)){h=!0,g(e,n);break}!h&&u.class&&vt(u.class)}}else t.data!==e.text&&(t.data=e.text);return!0}function T(t,e,n){return r(e.tag)?0===e.tag.indexOf("vue-component")||!u(e,n)&&e.tag.toLowerCase()===(t.tagName&&t.tagName.toLowerCase()):t.nodeType===(e.isComment?8:3)}var j,N,M={},R=e.modules,D=e.nodeOps;for(j=0;j<Zs.length;++j)for(M[Zs[j]]=[],N=0;N<R.length;++N)r(R[N][Zs[j]])&&M[Zs[j]].push(R[N][Zs[j]]);var I=0,P=!1,F=h("attrs,class,staticClass,staticStyle,key");return function(e,i,a,s,u,f){if(t(i))return void(r(e)&&w(e));var l=!1,p=[];if(t(e))l=!0,c(i,p,u,f);else{var d=r(e.nodeType);if(!d&&En(e,i))O(e,i,p,s);else{if(d){if(1===e.nodeType&&e.hasAttribute(Hi)&&(e.removeAttribute(Hi),a=!0),o(a)){if(S(e,i,p))return E(i,p,!0),e;pa("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}e=n(e)}var h=e.elm,v=D.parentNode(h);if(c(i,p,h._leaveCb?null:v,D.nextSibling(h)),r(i.parent))for(var m=i.parent,g=y(i);m;){for(var _=0;_<M.destroy.length;++_)M.destroy[_](m);if(m.elm=i.elm,g){for(var b=0;b<M.create.length;++b)M.create[b](Ys,m);var $=m.data.hook.insert;if($.merged)for(var k=1;k<$.fns.length;k++)$.fns[k]()}else On(m);m=m.parent}r(v)?x(v,[e],0,0):r(e.tag)&&w(e)}}return E(i,p,l),i.elm}}function Nn(t,e){(t.data.directives||e.data.directives)&&Mn(t,e)}function Mn(t,e){var n,r,o,i=t===Ys,a=e===Ys,s=Rn(t.data.directives,t.context),u=Rn(e.data.directives,e.context),c=[],f=[];for(n in u)r=s[n],o=u[n],r?(o.oldValue=r.value,Dn(o,"update",e,t),o.def&&o.def.componentUpdated&&f.push(o)):(Dn(o,"bind",e,t),o.def&&o.def.inserted&&c.push(o));if(c.length){var l=function(){for(var n=0;n<c.length;n++)Dn(c[n],"inserted",e,t)};i?_t(e,"insert",l):l()}if(f.length&&_t(e,"postpatch",function(){for(var n=0;n<f.length;n++)Dn(f[n],"componentUpdated",e,t)}),!i)for(n in s)u[n]||Dn(s[n],"unbind",t,t,a)}function Rn(t,e){var n=Object.create(null);if(!t)return n;var r,o;for(r=0;r<t.length;r++)o=t[r],o.modifiers||(o.modifiers=tu),n[Ln(o)]=o,o.def=et(e.$options,"directives",o.name,!0);return n}function Ln(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Dn(t,e,n,r,o){var i=t.def&&t.def[e];if(i)try{i(n.elm,t,n,r,o)}catch(r){ct(r,n.context,"directive "+t.name+" "+e+" hook")}}function In(e,n){var o=n.componentOptions;if(!(r(o)&&o.Ctor.options.inheritAttrs===!1||t(e.data.attrs)&&t(n.data.attrs))){var i,a,s,u=n.elm,c=e.data.attrs||{},f=n.data.attrs||{};r(f.__ob__)&&(f=n.data.attrs=w({},f));for(i in f)a=f[i],s=c[i],s!==a&&Pn(u,i,a);(Qi||ea)&&f.value!==c.value&&Pn(u,"value",f.value);for(i in c)t(f[i])&&(Fs(i)?u.removeAttributeNS(Ps,Vs(i)):Ds(i)||u.removeAttribute(i))}}function Pn(t,e,n){t.tagName.indexOf("-")>-1?Fn(t,e,n):Is(e)?Us(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Ds(e)?t.setAttribute(e,Us(n)||"false"===n?"false":"true"):Fs(e)?Us(n)?t.removeAttributeNS(Ps,Vs(e)):t.setAttributeNS(Ps,e,n):Fn(t,e,n)}function Fn(t,e,n){if(Us(n))t.removeAttribute(e);else{if(Qi&&!ta&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}function Vn(e,n){var o=n.elm,i=n.data,a=e.data;if(!(t(i.staticClass)&&t(i.class)&&(t(a)||t(a.staticClass)&&t(a.class)))){var s=on(n),u=o._transitionClasses;r(u)&&(s=un(s,cn(u))),s!==o._prevClass&&(o.setAttribute("class",s),o._prevClass=s)}}function Un(t){function e(){(a||(a=[])).push(t.slice(h,o).trim()),h=o+1}var n,r,o,i,a,s=!1,u=!1,c=!1,f=!1,l=0,p=0,d=0,h=0;for(o=0;o<t.length;o++)if(r=n,n=t.charCodeAt(o),s)39===n&&92!==r&&(s=!1);else if(u)34===n&&92!==r&&(u=!1);else if(c)96===n&&92!==r&&(c=!1);else if(f)47===n&&92!==r&&(f=!1);else if(124!==n||124===t.charCodeAt(o+1)||124===t.charCodeAt(o-1)||l||p||d){switch(n){case 34:u=!0;break;case 39:s=!0;break;case 96:c=!0;break;case 40:d++;break;case 41:d--;break;case 91:p++;break;case 93:p--;break;case 123:l++;break;case 125:l--}if(47===n){for(var v=o-1,m=void 0;v>=0&&(m=t.charAt(v)," "===m);v--);m&&ou.test(m)||(f=!0)}}else void 0===i?(h=o+1,i=t.slice(0,o).trim()):e();if(void 0===i?i=t.slice(0,o).trim():0!==h&&e(),a)for(o=0;o<a.length;o++)i=Bn(i,a[o]);return i}function Bn(t,e){var n=e.indexOf("(");if(n<0)return'_f("'+e+'")('+t+")";var r=e.slice(0,n),o=e.slice(n+1);return'_f("'+r+'")('+t+(")"!==o?","+o:o)}function Hn(t){console.error("[Vue compiler]: "+t)}function qn(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function zn(t,e,n){(t.props||(t.props=[])).push({name:e,value:n}),t.plain=!1}function Jn(t,e,n){(t.attrs||(t.attrs=[])).push({name:e,value:n}),t.plain=!1}function Kn(t,e,n){t.attrsMap[e]=n,t.attrsList.push({name:e,value:n})}function Gn(t,e,n,r,o,i){(t.directives||(t.directives=[])).push({name:e,rawName:n,value:r,arg:o,modifiers:i}),t.plain=!1}function Wn(t,e,n,r,o,i){r=r||Ti,i&&r.prevent&&r.passive&&i("passive and prevent can't be used together. Passive handler can't prevent default event."),r.capture&&(delete r.capture,e="!"+e),r.once&&(delete r.once,e="~"+e),r.passive&&(delete r.passive,e="&"+e),"click"===e&&(r.right?(e="contextmenu",delete r.right):r.middle&&(e="mouseup"));var a;r.native?(delete r.native,a=t.nativeEvents||(t.nativeEvents={})):a=t.events||(t.events={});var s={value:n.trim()};r!==Ti&&(s.modifiers=r);var u=a[e];Array.isArray(u)?o?u.unshift(s):u.push(s):u?a[e]=o?[s,u]:[u,s]:a[e]=s,t.plain=!1}function Xn(t,e,n){var r=Yn(t,":"+e)||Yn(t,"v-bind:"+e);if(null!=r)return Un(r);if(n!==!1){var o=Yn(t,e);if(null!=o)return JSON.stringify(o)}}function Yn(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var o=t.attrsList,i=0,a=o.length;i<a;i++)if(o[i].name===e){o.splice(i,1);break}return n&&delete t.attrsMap[e],r}function Zn(t,e,n){var r=n||{},o=r.number,i=r.trim,a="$$v",s=a;i&&(s="(typeof "+a+" === 'string'? "+a+".trim(): "+a+")"),o&&(s="_n("+s+")");var u=Qn(e,s);t.model={value:"("+e+")",expression:'"'+e+'"',callback:"function ("+a+") {"+u+"}"}}function Qn(t,e){var n=tr(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function tr(t){if(t=t.trim(),ks=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<ks-1)return Os=t.lastIndexOf("."),Os>-1?{exp:t.slice(0,Os),key:'"'+t.slice(Os+1)+'"'}:{exp:t,key:null};for(Cs=t,Os=Es=Ss=0;!nr();)As=er(),rr(As)?ir(As):91===As&&or(As);return{exp:t.slice(0,Es),key:t.slice(Es+1,Ss)}}function er(){return Cs.charCodeAt(++Os)}function nr(){return Os>=ks}function rr(t){return 34===t||39===t}function or(t){var e=1;for(Es=Os;!nr();)if(t=er(),rr(t))ir(t);else if(91===t&&e++,93===t&&e--,0===e){Ss=Os;break}}function ir(t){for(var e=t;!nr()&&(t=er(),t!==e););}function ar(t,e,n){Ts=n;var r=e.value,o=e.modifiers,i=t.tag,a=t.attrsMap.type;if("input"===i&&"file"===a&&Ts("<"+t.tag+' v-model="'+r+'" type="file">:\nFile inputs are read only. Use a v-on:change listener instead.'),t.component)return Zn(t,r,o),!1;if("select"===i)cr(t,r,o);else if("input"===i&&"checkbox"===a)sr(t,r,o);else if("input"===i&&"radio"===a)ur(t,r,o);else if("input"===i||"textarea"===i)fr(t,r,o);else{if(!Ji.isReservedTag(i))return Zn(t,r,o),!1;Ts("<"+t.tag+' v-model="'+r+"\">: v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.")}return!0}function sr(t,e,n){var r=n&&n.number,o=Xn(t,"value")||"null",i=Xn(t,"true-value")||"true",a=Xn(t,"false-value")||"false";zn(t,"checked","Array.isArray("+e+")?_i("+e+","+o+")>-1"+("true"===i?":("+e+")":":_q("+e+","+i+")")),Wn(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+i+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+o+")":o)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Qn(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Qn(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Qn(e,"$$c")+"}",null,!0)}function ur(t,e,n){var r=n&&n.number,o=Xn(t,"value")||"null";o=r?"_n("+o+")":o,zn(t,"checked","_q("+e+","+o+")"),Wn(t,"change",Qn(e,o),null,!0)}function cr(t,e,n){var r=n&&n.number,o='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(r?"_n(val)":"val")+"})",i="$event.target.multiple ? $$selectedVal : $$selectedVal[0]",a="var $$selectedVal = "+o+";";a=a+" "+Qn(e,i),Wn(t,"change",a,null,!0)}function fr(t,e,n){var r=t.attrsMap.type,o=t.attrsMap["v-bind:value"]||t.attrsMap[":value"],i=t.attrsMap["v-bind:type"]||t.attrsMap[":type"];if(o&&!i){var a=t.attrsMap["v-bind:value"]?"v-bind:value":":value";Ts(a+'="'+o+'" conflicts with v-model on the same element because the latter already expands to a value binding internally')}var s=n||{},u=s.lazy,c=s.number,f=s.trim,l=!u&&"range"!==r,p=u?"change":"range"===r?iu:"input",d="$event.target.value";f&&(d="$event.target.value.trim()"),c&&(d="_n("+d+")");var h=Qn(e,d);l&&(h="if($event.target.composing)return;"+h),zn(t,"value","("+e+")"),Wn(t,p,h,null,!0),(f||c)&&Wn(t,"blur","$forceUpdate()")}function lr(t){if(r(t[iu])){var e=Qi?"change":"input";t[e]=[].concat(t[iu],t[e]||[]),delete t[iu]}r(t[au])&&(t.change=[].concat(t[au],t.change||[]),delete t[au])}function pr(t,e,n){var r=js;return function o(){var i=t.apply(null,arguments);null!==i&&hr(e,o,n,r)}}function dr(t,e,n,r,o){e=dt(e),n&&(e=pr(e,t,r)),js.addEventListener(t,e,ia?{capture:r,passive:o}:r)}function hr(t,e,n,r){(r||js).removeEventListener(t,e._withTask||e,n)}function vr(e,n){if(!t(e.data.on)||!t(n.data.on)){var r=n.data.on||{},o=e.data.on||{};js=n.elm,lr(r),gt(r,o,dr,hr,n.context),js=void 0}}function mr(e,n){if(!t(e.data.domProps)||!t(n.data.domProps)){var o,i,a=n.elm,s=e.data.domProps||{},u=n.data.domProps||{};r(u.__ob__)&&(u=n.data.domProps=w({},u));for(o in s)t(u[o])&&(a[o]="");for(o in u){if(i=u[o],"textContent"===o||"innerHTML"===o){if(n.children&&(n.children.length=0),i===s[o])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===o){a._value=i;var c=t(i)?"":String(i);yr(a,c)&&(a.value=c)}else a[o]=i}}}function yr(t,e){return!t.composing&&("OPTION"===t.tagName||gr(t,e)||_r(t,e))}function gr(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}function _r(t,e){var n=t.value,o=t._vModifiers;if(r(o)){if(o.lazy)return!1;if(o.number)return d(n)!==d(e);if(o.trim)return n.trim()!==e.trim()}return n!==e}function br(t){var e=wr(t.style);return t.staticStyle?w(t.staticStyle,e):e}function wr(t){return Array.isArray(t)?x(t):"string"==typeof t?cu(t):t}function xr(t,e){var n,r={};if(e)for(var o=t;o.componentInstance;)o=o.componentInstance._vnode,o&&o.data&&(n=br(o.data))&&w(r,n);(n=br(t.data))&&w(r,n);for(var i=t;i=i.parent;)i.data&&(n=br(i.data))&&w(r,n);return r}function $r(e,n){var o=n.data,i=e.data;if(!(t(o.staticStyle)&&t(o.style)&&t(i.staticStyle)&&t(i.style))){var a,s,u=n.elm,c=i.staticStyle,f=i.normalizedStyle||i.style||{},l=c||f,p=wr(n.data.style)||{};n.data.normalizedStyle=r(p.__ob__)?w({},p):p;var d=xr(n,!0);for(s in l)t(d[s])&&pu(u,s,"");for(s in d)a=d[s],a!==l[s]&&pu(u,s,null==a?"":a)}}function kr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Cr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Ar(t){if(t){if("object"==typeof t){var e={};return t.css!==!1&&w(e,mu(t.name||"v")),w(e,t),e}return"string"==typeof t?mu(t):void 0}}function Or(t){ku(function(){ku(t)})}function Er(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),kr(t,e))}function Sr(t,e){t._transitionClasses&&v(t._transitionClasses,e),Cr(t,e)}function Tr(t,e,n){var r=jr(t,e),o=r.type,i=r.timeout,a=r.propCount;if(!o)return n();var s=o===gu?wu:$u,u=0,c=function(){t.removeEventListener(s,f),n()},f=function(e){e.target===t&&++u>=a&&c()};setTimeout(function(){u<a&&c()},i+1),t.addEventListener(s,f)}function jr(t,e){var n,r=window.getComputedStyle(t),o=r[bu+"Delay"].split(", "),i=r[bu+"Duration"].split(", "),a=Nr(o,i),s=r[xu+"Delay"].split(", "),u=r[xu+"Duration"].split(", "),c=Nr(s,u),f=0,l=0;e===gu?a>0&&(n=gu,f=a,l=i.length):e===_u?c>0&&(n=_u,f=c,l=u.length):(f=Math.max(a,c),n=f>0?a>c?gu:_u:null,l=n?n===gu?i.length:u.length:0);var p=n===gu&&Cu.test(r[bu+"Property"]);return{type:n,timeout:f,propCount:l,hasTransform:p}}function Nr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return Mr(e)+Mr(t[n])}))}function Mr(t){return 1e3*Number(t.slice(0,-1))}function Rr(e,n){var o=e.elm;r(o._leaveCb)&&(o._leaveCb.cancelled=!0,o._leaveCb());var i=Ar(e.data.transition);if(!t(i)&&!r(o._enterCb)&&1===o.nodeType){for(var a=i.css,u=i.type,c=i.enterClass,f=i.enterToClass,l=i.enterActiveClass,p=i.appearClass,h=i.appearToClass,v=i.appearActiveClass,m=i.beforeEnter,y=i.enter,g=i.afterEnter,_=i.enterCancelled,b=i.beforeAppear,w=i.appear,x=i.afterAppear,$=i.appearCancelled,k=i.duration,C=ns,A=ns.$vnode;A&&A.parent;)A=A.parent,C=A.context;var E=!C._isMounted||!e.isRootInsert;if(!E||w||""===w){var S=E&&p?p:c,T=E&&v?v:l,j=E&&h?h:f,N=E?b||m:m,M=E&&"function"==typeof w?w:y,R=E?x||g:g,L=E?$||_:_,D=d(s(k)?k.enter:k);null!=D&&Dr(D,"enter",e);var I=a!==!1&&!ta,P=Pr(M),F=o._enterCb=O(function(){I&&(Sr(o,j),Sr(o,T)),F.cancelled?(I&&Sr(o,S),L&&L(o)):R&&R(o),o._enterCb=null});e.data.show||_t(e,"insert",function(){var t=o.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),M&&M(o,F)}),N&&N(o),I&&(Er(o,S),Er(o,T),Or(function(){Sr(o,S),F.cancelled||(Er(o,j),P||(Ir(D)?setTimeout(F,D):Tr(o,u,F)))})),e.data.show&&(n&&n(),M&&M(o,F)),I||P||F()}}}function Lr(e,n){function o(){$.cancelled||(e.data.show||((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),h&&h(i),b&&(Er(i,f),Er(i,p),Or(function(){Sr(i,f),$.cancelled||(Er(i,l),w||(Ir(x)?setTimeout($,x):Tr(i,c,$)))})),v&&v(i,$),b||w||$())}var i=e.elm;r(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var a=Ar(e.data.transition);if(t(a)||1!==i.nodeType)return n();if(!r(i._leaveCb)){var u=a.css,c=a.type,f=a.leaveClass,l=a.leaveToClass,p=a.leaveActiveClass,h=a.beforeLeave,v=a.leave,m=a.afterLeave,y=a.leaveCancelled,g=a.delayLeave,_=a.duration,b=u!==!1&&!ta,w=Pr(v),x=d(s(_)?_.leave:_);r(x)&&Dr(x,"leave",e);var $=i._leaveCb=O(function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),b&&(Sr(i,l),Sr(i,p)),$.cancelled?(b&&Sr(i,f),y&&y(i)):(n(),m&&m(i)),i._leaveCb=null});g?g(o):o()}}function Dr(t,e,n){"number"!=typeof t?pa("<transition> explicit "+e+" duration is not a valid number - got "+JSON.stringify(t)+".",n.context):isNaN(t)&&pa("<transition> explicit "+e+" duration is NaN - the duration expression might be incorrect.",n.context)}function Ir(t){return"number"==typeof t&&!isNaN(t)}function Pr(e){if(t(e))return!1;var n=e.fns;return r(n)?Pr(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function Fr(t,e){e.data.show!==!0&&Rr(e)}function Vr(t,e,n){Ur(t,e,n),(Qi||ea)&&setTimeout(function(){Ur(t,e,n)},0)}function Ur(t,e,n){var r=e.value,o=t.multiple;if(o&&!Array.isArray(r))return void pa('<select multiple v-model="'+e.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(r).slice(8,-1),n);for(var i,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],o)i=A(r,Hr(a))>-1,a.selected!==i&&(a.selected=i);else if(C(Hr(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));o||(t.selectedIndex=-1)}function Br(t,e){return e.every(function(e){return!C(e,t)})}function Hr(t){return"_value"in t?t._value:t.value}function qr(t){t.target.composing=!0}function zr(t){t.target.composing&&(t.target.composing=!1,Jr(t.target,"input"))}function Jr(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Kr(t){return!t.componentInstance||t.data&&t.data.transition?t:Kr(t.componentInstance._vnode)}function Gr(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Gr(Tt(e.children)):t}function Wr(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var o=n._parentListeners;for(var i in o)e[Di(i)]=o[i];return e}function Xr(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Yr(t){for(;t=t.parent;)if(t.data.transition)return!0}function Zr(t,e){return e.key===t.key&&e.tag===t.tag}function Qr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function to(t){t.data.newPos=t.elm.getBoundingClientRect()}function eo(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,o=e.top-n.top;if(r||o){t.data.moved=!0;var i=t.elm.style;i.transform=i.WebkitTransform="translate("+r+"px,"+o+"px)",i.transitionDuration="0s"}}function no(t,e){var n=e?Uu(e):Fu;if(n.test(t)){for(var r,o,i,a=[],s=[],u=n.lastIndex=0;r=n.exec(t);){o=r.index,o>u&&(s.push(i=t.slice(u,o)),a.push(JSON.stringify(i)));var c=Un(r[1].trim());a.push("_s("+c+")"),s.push({"@binding":c}),u=o+r[0].length}return u<t.length&&(s.push(i=t.slice(u)),a.push(JSON.stringify(i))),{expression:a.join("+"),tokens:s}}}function ro(t,e){var n=e.warn||Hn,r=Yn(t,"class");if(r){var o=no(r,e.delimiters);o&&n('class="'+r+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.')}r&&(t.staticClass=JSON.stringify(r));var i=Xn(t,"class",!1);i&&(t.classBinding=i)}function oo(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}function io(t,e){var n=e.warn||Hn,r=Yn(t,"style");if(r){var o=no(r,e.delimiters);o&&n('style="'+r+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.'),t.staticStyle=JSON.stringify(cu(r))}var i=Xn(t,"style",!1);i&&(t.styleBinding=i)}function ao(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}function so(t,e){var n=e?_c:gc;return t.replace(n,function(t){return yc[t]})}function uo(t,e){function n(e){p+=e,t=t.substring(e)}function r(){var e=t.match(Yu);if(e){var r={tagName:e[1],attrs:[],start:p};n(e[0].length);for(var o,i;!(o=t.match(Zu))&&(i=t.match(Gu));)n(i[0].length),r.attrs.push(i);if(o)return r.unarySlash=o[1],n(o[0].length),r.end=p,r}}function o(t){var n=t.tagName,r=t.unarySlash;c&&("p"===s&&Ku(n)&&i(s),l(n)&&s===n&&i(n));for(var o=f(n)||!!r,a=t.attrs.length,p=new Array(a),d=0;d<a;d++){var h=t.attrs[d];rc&&h[0].indexOf('""')===-1&&(""===h[3]&&delete h[3],""===h[4]&&delete h[4],""===h[5]&&delete h[5]);var v=h[3]||h[4]||h[5]||"",m="a"===n&&"href"===h[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;p[d]={name:h[1],value:so(v,m)}}o||(u.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:p}),s=n),e.start&&e.start(n,p,o,t.start,t.end)}function i(t,n,r){var o,i;if(null==n&&(n=p),null==r&&(r=p),t&&(i=t.toLowerCase()),t)for(o=u.length-1;o>=0&&u[o].lowerCasedTag!==i;o--);else o=0;if(o>=0){for(var a=u.length-1;a>=o;a--)(a>o||!t)&&e.warn&&e.warn("tag <"+u[a].tag+"> has no matching end tag."),e.end&&e.end(u[a].tag,n,r);u.length=o,s=o&&u[o-1].tag}else"br"===i?e.start&&e.start(t,[],!0,n,r):"p"===i&&(e.start&&e.start(t,[],!1,n,r),e.end&&e.end(t,n,r))}for(var a,s,u=[],c=e.expectHTML,f=e.isUnaryTag||Ui,l=e.canBeLeftOpenTag||Ui,p=0;t;){if(a=t,s&&vc(s)){var d=0,h=s.toLowerCase(),v=mc[h]||(mc[h]=new RegExp("([\\s\\S]*?)(</"+h+"[^>]*>)","i")),m=t.replace(v,function(t,n,r){return d=r.length,vc(h)||"noscript"===h||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),wc(h,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});p+=t.length-m.length,t=m,i(h,p-d,p)}else{var y=t.indexOf("<");if(0===y){if(ec.test(t)){var g=t.indexOf("-->");if(g>=0){e.shouldKeepComment&&e.comment(t.substring(4,g)),n(g+3);continue}}if(nc.test(t)){var _=t.indexOf("]>");if(_>=0){n(_+2);continue}}var b=t.match(tc);if(b){n(b[0].length);continue}var w=t.match(Qu);if(w){var x=p;n(w[0].length),i(w[1],x,p);continue}var $=r();if($){o($),wc(s,t)&&n(1);continue}}var k=void 0,C=void 0,A=void 0;if(y>=0){for(C=t.slice(y);!(Qu.test(C)||Yu.test(C)||ec.test(C)||nc.test(C)||(A=C.indexOf("<",1),A<0));)y+=A,C=t.slice(y);k=t.substring(0,y),n(y)}y<0&&(k=t,t=""),e.chars&&k&&e.chars(k)}if(t===a){e.chars&&e.chars(t),!u.length&&e.warn&&e.warn('Mal-formatted tag at end of template: "'+t+'"');break}}i()}function co(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:So(e),parent:n,children:[]}}function fo(t,e){function n(t){f||(f=!0,oc(t))}function r(t){t.pre&&(u=!1),cc(t.tag)&&(c=!1);for(var n=0;n<uc.length;n++)uc[n](t,e)}oc=e.warn||Hn,cc=e.isPreTag||Ui,fc=e.mustUseProp||Ui,lc=e.getTagNamespace||Ui,ac=qn(e.modules,"transformNode"),sc=qn(e.modules,"preTransformNode"),uc=qn(e.modules,"postTransformNode"),ic=e.delimiters;var o,i,a=[],s=e.preserveWhitespace!==!1,u=!1,c=!1,f=!1;return uo(t,{warn:oc,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,start:function(t,s,f){function l(t){"slot"!==t.tag&&"template"!==t.tag||n("Cannot use <"+t.tag+"> as component root element because it may contain multiple nodes."),t.attrsMap.hasOwnProperty("v-for")&&n("Cannot use v-for on stateful component root element because it renders multiple elements.")}var p=i&&i.ns||lc(t);Qi&&"svg"===p&&(s=No(s));var d=co(t,s,i);p&&(d.ns=p),jo(d)&&!ca()&&(d.forbidden=!0,oc("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <"+t+">, as they will not be parsed."));for(var h=0;h<sc.length;h++)d=sc[h](d,e)||d;if(u||(lo(d),d.pre&&(u=!0)),cc(d.tag)&&(c=!0),u?po(d):d.processed||(yo(d),_o(d),$o(d),ho(d,e)),o?a.length||(o.if&&(d.elseif||d.else)?(l(d),xo(o,{exp:d.elseif,block:d})):n("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.")):(o=d,l(o)),i&&!d.forbidden)if(d.elseif||d.else)bo(d,i);else if(d.slotScope){
i.plain=!1;var v=d.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[v]=d}else i.children.push(d),d.parent=i;f?r(d):(i=d,a.push(d))},end:function(){var t=a[a.length-1],e=t.children[t.children.length-1];e&&3===e.type&&" "===e.text&&!c&&t.children.pop(),a.length-=1,i=a[a.length-1],r(t)},chars:function(e){if(!i)return void(e===t?n("Component template requires a root element, rather than just text."):(e=e.trim())&&n('text "'+e+'" outside root element will be ignored.'));if(!Qi||"textarea"!==i.tag||i.attrsMap.placeholder!==e){var r=i.children;if(e=c||e.trim()?To(i)?e:Tc(e):s&&r.length?" ":""){var o;!u&&" "!==e&&(o=no(e,ic))?r.push({type:2,expression:o.expression,tokens:o.tokens,text:e}):" "===e&&r.length&&" "===r[r.length-1].text||r.push({type:3,text:e})}}},comment:function(t){i.children.push({type:3,text:t,isComment:!0})}}),o}function lo(t){null!=Yn(t,"v-pre")&&(t.pre=!0)}function po(t){var e=t.attrsList.length;if(e)for(var n=t.attrs=new Array(e),r=0;r<e;r++)n[r]={name:t.attrsList[r].name,value:JSON.stringify(t.attrsList[r].value)};else t.pre||(t.plain=!0)}function ho(t,e){vo(t),t.plain=!t.key&&!t.attrsList.length,mo(t),ko(t),Co(t);for(var n=0;n<ac.length;n++)t=ac[n](t,e)||t;Ao(t)}function vo(t){var e=Xn(t,"key");e&&("template"===t.tag&&oc("<template> cannot be keyed. Place the key on real elements instead."),t.key=e)}function mo(t){var e=Xn(t,"ref");e&&(t.ref=e,t.refInFor=Oo(t))}function yo(t){var e;if(e=Yn(t,"v-for")){var n=go(e);n?w(t,n):oc("Invalid v-for expression: "+e)}}function go(t){var e=t.match(kc);if(e){var n={};n.for=e[2].trim();var r=e[1].trim().replace(Ac,""),o=r.match(Cc);return o?(n.alias=r.replace(Cc,""),n.iterator1=o[1].trim(),o[2]&&(n.iterator2=o[2].trim())):n.alias=r,n}}function _o(t){var e=Yn(t,"v-if");if(e)t.if=e,xo(t,{exp:e,block:t});else{null!=Yn(t,"v-else")&&(t.else=!0);var n=Yn(t,"v-else-if");n&&(t.elseif=n)}}function bo(t,e){var n=wo(e.children);n&&n.if?xo(n,{exp:t.elseif,block:t}):oc("v-"+(t.elseif?'else-if="'+t.elseif+'"':"else")+" used on element <"+t.tag+"> without corresponding v-if.")}function wo(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];" "!==t[e].text&&oc('text "'+t[e].text.trim()+'" between v-if and v-else(-if) will be ignored.'),t.pop()}}function xo(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function $o(t){var e=Yn(t,"v-once");null!=e&&(t.once=!0)}function ko(t){if("slot"===t.tag)t.slotName=Xn(t,"name"),t.key&&oc("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.");else{var e;"template"===t.tag?(e=Yn(t,"scope"),e&&oc('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',!0),t.slotScope=e||Yn(t,"slot-scope")):(e=Yn(t,"slot-scope"))&&(t.attrsMap["v-for"]&&oc("Ambiguous combined usage of slot-scope and v-for on <"+t.tag+"> (v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",!0),t.slotScope=e);var n=Xn(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,"template"===t.tag||t.slotScope||Jn(t,"slot",n))}}function Co(t){var e;(e=Xn(t,"is"))&&(t.component=e),null!=Yn(t,"inline-template")&&(t.inlineTemplate=!0)}function Ao(t){var e,n,r,o,i,a,s,u=t.attrsList;for(e=0,n=u.length;e<n;e++)if(r=o=u[e].name,i=u[e].value,$c.test(r))if(t.hasBindings=!0,a=Eo(r),a&&(r=r.replace(Sc,"")),Ec.test(r))r=r.replace(Ec,""),i=Un(i),s=!1,a&&(a.prop&&(s=!0,r=Di(r),"innerHtml"===r&&(r="innerHTML")),a.camel&&(r=Di(r)),a.sync&&Wn(t,"update:"+Di(r),Qn(i,"$event"))),s||!t.component&&fc(t.tag,t.attrsMap.type,r)?zn(t,r,i):Jn(t,r,i);else if(xc.test(r))r=r.replace(xc,""),Wn(t,r,i,a,!1,oc);else{r=r.replace($c,"");var c=r.match(Oc),f=c&&c[1];f&&(r=r.slice(0,-(f.length+1))),Gn(t,r,o,i,f,a),"model"===r&&Mo(t,i)}else{var l=no(i,ic);l&&oc(r+'="'+i+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.'),Jn(t,r,JSON.stringify(i)),!t.component&&"muted"===r&&fc(t.tag,t.attrsMap.type,r)&&zn(t,r,"true")}}function Oo(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}function Eo(t){var e=t.match(Sc);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}function So(t){for(var e={},n=0,r=t.length;n<r;n++)!e[t[n].name]||Qi||ea||oc("duplicate attribute: "+t[n].name),e[t[n].name]=t[n].value;return e}function To(t){return"script"===t.tag||"style"===t.tag}function jo(t){return"style"===t.tag||"script"===t.tag&&(!t.attrsMap.type||"text/javascript"===t.attrsMap.type)}function No(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];jc.test(r.name)||(r.name=r.name.replace(Nc,""),e.push(r))}return e}function Mo(t,e){for(var n=t;n;)n.for&&n.alias===e&&oc("<"+t.tag+' v-model="'+e+'">: You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.'),n=n.parent}function Ro(t,e){if("input"===t.tag){var n=t.attrsMap;if(!n["v-model"])return;var r;if((n[":type"]||n["v-bind:type"])&&(r=Xn(t,"type")),!r&&n["v-bind"]&&(r="("+n["v-bind"]+").type"),r){var o=Yn(t,"v-if",!0),i=o?"&&("+o+")":"",a=null!=Yn(t,"v-else",!0),s=Yn(t,"v-else-if",!0),u=Lo(t);yo(u),Kn(u,"type","checkbox"),ho(u,e),u.processed=!0,u.if="("+r+")==='checkbox'"+i,xo(u,{exp:u.if,block:u});var c=Lo(t);Yn(c,"v-for",!0),Kn(c,"type","radio"),ho(c,e),xo(u,{exp:"("+r+")==='radio'"+i,block:c});var f=Lo(t);return Yn(f,"v-for",!0),Kn(f,":type",r),ho(f,e),xo(u,{exp:o,block:f}),a?u.else=!0:s&&(u.elseif=s),u}}}function Lo(t){return co(t.tag,t.attrsList.slice(),t.parent)}function Do(t,e){e.value&&zn(t,"textContent","_s("+e.value+")")}function Io(t,e){e.value&&zn(t,"innerHTML","_s("+e.value+")")}function Po(t,e){t&&(pc=Ic(e.staticKeys||""),dc=e.isReservedTag||Ui,Vo(t),Uo(t,!1))}function Fo(t){return h("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(t?","+t:""))}function Vo(t){if(t.static=Bo(t),1===t.type){if(!dc(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var e=0,n=t.children.length;e<n;e++){var r=t.children[e];Vo(r),r.static||(t.static=!1)}if(t.ifConditions)for(var o=1,i=t.ifConditions.length;o<i;o++){var a=t.ifConditions[o].block;Vo(a),a.static||(t.static=!1)}}}function Uo(t,e){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=e),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var n=0,r=t.children.length;n<r;n++)Uo(t.children[n],e||!!t.for);if(t.ifConditions)for(var o=1,i=t.ifConditions.length;o<i;o++)Uo(t.ifConditions[o].block,e)}}function Bo(t){return 2!==t.type&&(3===t.type||!(!t.pre&&(t.hasBindings||t.if||t.for||Ni(t.tag)||!dc(t.tag)||Ho(t)||!Object.keys(t).every(pc))))}function Ho(t){for(;t.parent;){if(t=t.parent,"template"!==t.tag)return!1;if(t.for)return!0}return!1}function qo(t,e,n){var r=e?"nativeOn:{":"on:{";for(var o in t)r+='"'+o+'":'+zo(o,t[o])+",";return r.slice(0,-1)+"}"}function zo(t,e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map(function(e){return zo(t,e)}).join(",")+"]";var n=Fc.test(e.value),r=Pc.test(e.value);if(e.modifiers){var o="",i="",a=[];for(var s in e.modifiers)if(Hc[s])i+=Hc[s],Vc[s]&&a.push(s);else if("exact"===s){var u=e.modifiers;i+=Bc(["ctrl","shift","alt","meta"].filter(function(t){return!u[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else a.push(s);a.length&&(o+=Jo(a)),i&&(o+=i);var c=n?"return "+e.value+"($event)":r?"return ("+e.value+")($event)":e.value;return"function($event){"+o+c+"}"}return n||r?e.value:"function($event){"+e.value+"}"}function Jo(t){return"if(!('button' in $event)&&"+t.map(Ko).join("&&")+")return null;"}function Ko(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=Vc[t],r=Uc[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}function Go(t,e){e.modifiers&&pa("v-on without argument does not support modifiers."),t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}}function Wo(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}}function Xo(t,e){var n=new zc(e),r=t?Yo(t,n):'_c("div")';return{render:"with(this){return "+r+"}",staticRenderFns:n.staticRenderFns}}function Yo(t,e){if(t.staticRoot&&!t.staticProcessed)return Zo(t,e);if(t.once&&!t.onceProcessed)return Qo(t,e);if(t.for&&!t.forProcessed)return ni(t,e);if(t.if&&!t.ifProcessed)return ti(t,e);if("template"!==t.tag||t.slotTarget){if("slot"===t.tag)return vi(t,e);var n;if(t.component)n=mi(t.component,t,e);else{var r=t.plain?void 0:ri(t,e),o=t.inlineTemplate?null:ci(t,e,!0);n="_c('"+t.tag+"'"+(r?","+r:"")+(o?","+o:"")+")"}for(var i=0;i<e.transforms.length;i++)n=e.transforms[i](t,n);return n}return ci(t,e)||"void 0"}function Zo(t,e){return t.staticProcessed=!0,e.staticRenderFns.push("with(this){return "+Yo(t,e)+"}"),"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function Qo(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return ti(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+Yo(t,e)+","+e.onceId++ +","+n+")":(e.warn("v-once can only be used inside v-for that is keyed. "),Yo(t,e))}return Zo(t,e)}function ti(t,e,n,r){return t.ifProcessed=!0,ei(t.ifConditions.slice(),e,n,r)}function ei(t,e,n,r){function o(t){return n?n(t,e):t.once?Qo(t,e):Yo(t,e)}if(!t.length)return r||"_e()";var i=t.shift();return i.exp?"("+i.exp+")?"+o(i.block)+":"+ei(t,e,n,r):""+o(i.block)}function ni(t,e,n,r){var o=t.for,i=t.alias,a=t.iterator1?","+t.iterator1:"",s=t.iterator2?","+t.iterator2:"";return e.maybeComponent(t)&&"slot"!==t.tag&&"template"!==t.tag&&!t.key&&e.warn("<"+t.tag+' v-for="'+i+" in "+o+'">: component lists rendered with v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.',!0),t.forProcessed=!0,(r||"_l")+"(("+o+"),function("+i+a+s+"){return "+(n||Yo)(t,e)+"})"}function ri(t,e){var n="{",r=oi(t,e);r&&(n+=r+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var o=0;o<e.dataGenFns.length;o++)n+=e.dataGenFns[o](t);if(t.attrs&&(n+="attrs:{"+yi(t.attrs)+"},"),t.props&&(n+="domProps:{"+yi(t.props)+"},"),t.events&&(n+=qo(t.events,!1,e.warn)+","),t.nativeEvents&&(n+=qo(t.nativeEvents,!0,e.warn)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=ai(t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var i=ii(t,e);i&&(n+=i+",")}return n=n.replace(/,$/,"")+"}",t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function oi(t,e){var n=t.directives;if(n){var r,o,i,a,s="directives:[",u=!1;for(r=0,o=n.length;r<o;r++){i=n[r],a=!0;var c=e.directives[i.name];c&&(a=!!c(t,i,e.warn)),a&&(u=!0,s+='{name:"'+i.name+'",rawName:"'+i.rawName+'"'+(i.value?",value:("+i.value+"),expression:"+JSON.stringify(i.value):"")+(i.arg?',arg:"'+i.arg+'"':"")+(i.modifiers?",modifiers:"+JSON.stringify(i.modifiers):"")+"},")}return u?s.slice(0,-1)+"]":void 0}}function ii(t,e){var n=t.children[0];if(1===t.children.length&&1===n.type||e.warn("Inline-template components must have exactly one child element."),1===n.type){var r=Xo(n,e.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}function ai(t,e){return"scopedSlots:_u(["+Object.keys(t).map(function(n){return si(n,t[n],e)}).join(",")+"])"}function si(t,e,n){if(e.for&&!e.forProcessed)return ui(t,e,n);var r="function("+String(e.slotScope)+"){return "+("template"===e.tag?e.if?e.if+"?"+(ci(e,n)||"undefined")+":undefined":ci(e,n)||"undefined":Yo(e,n))+"}";return"{key:"+t+",fn:"+r+"}"}function ui(t,e,n){var r=e.for,o=e.alias,i=e.iterator1?","+e.iterator1:"",a=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+r+"),function("+o+i+a+"){return "+si(t,e,n)+"})"}function ci(t,e,n,r,o){var i=t.children;if(i.length){var a=i[0];if(1===i.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag)return(r||Yo)(a,e);var s=n?fi(i,e.maybeComponent):0,u=o||pi;return"["+i.map(function(t){return u(t,e)}).join(",")+"]"+(s?","+s:"")}}function fi(t,e){for(var n=0,r=0;r<t.length;r++){var o=t[r];if(1===o.type){if(li(o)||o.ifConditions&&o.ifConditions.some(function(t){return li(t.block)})){n=2;break}(e(o)||o.ifConditions&&o.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}function li(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function pi(t,e){return 1===t.type?Yo(t,e):3===t.type&&t.isComment?hi(t):di(t)}function di(t){return"_v("+(2===t.type?t.expression:gi(JSON.stringify(t.text)))+")"}function hi(t){return"_e("+JSON.stringify(t.text)+")"}function vi(t,e){var n=t.slotName||'"default"',r=ci(t,e),o="_t("+n+(r?","+r:""),i=t.attrs&&"{"+t.attrs.map(function(t){return Di(t.name)+":"+t.value}).join(",")+"}",a=t.attrsMap["v-bind"];return!i&&!a||r||(o+=",null"),i&&(o+=","+i),a&&(o+=(i?"":",null")+","+a),o+")"}function mi(t,e,n){var r=e.inlineTemplate?null:ci(e,n,!0);return"_c("+t+","+ri(e,n)+(r?","+r:"")+")"}function yi(t){for(var e="",n=0;n<t.length;n++){var r=t[n];e+='"'+r.name+'":'+gi(r.value)+","}return e.slice(0,-1)}function gi(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function _i(t){var e=[];return t&&bi(t,e),e}function bi(t,e){if(1===t.type){for(var n in t.attrsMap)if($c.test(n)){var r=t.attrsMap[n];r&&("v-for"===n?xi(t,'v-for="'+r+'"',e):xc.test(n)?wi(r,n+'="'+r+'"',e):ki(r,n+'="'+r+'"',e))}if(t.children)for(var o=0;o<t.children.length;o++)bi(t.children[o],e)}else 2===t.type&&ki(t.expression,t.text,e)}function wi(t,e,n){var r=t.replace(Gc,""),o=r.match(Kc);o&&"$"!==r.charAt(o.index-1)&&n.push('avoid using JavaScript unary operator as property name: "'+o[0]+'" in expression '+e.trim()),ki(t,e,n)}function xi(t,e,n){ki(t.for||"",e,n),$i(t.alias,"v-for alias",e,n),$i(t.iterator1,"v-for iterator",e,n),$i(t.iterator2,"v-for iterator",e,n)}function $i(t,e,n,r){if("string"==typeof t)try{new Function("var "+t+"=_")}catch(o){r.push("invalid "+e+' "'+t+'" in expression: '+n.trim())}}function ki(t,e,n){try{new Function("return "+t)}catch(o){var r=t.replace(Gc,"").match(Jc);r?n.push('avoid using JavaScript keyword as property name: "'+r[0]+'"\n  Raw expression: '+e.trim()):n.push("invalid expression: "+o.message+" in\n\n    "+t+"\n\n  Raw expression: "+e.trim()+"\n")}}function Ci(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),$}}function Ai(t){var e=Object.create(null);return function(n,r,o){r=w({},r);var i=r.warn||pa;delete r.warn;try{new Function("return 1")}catch(t){t.toString().match(/unsafe-eval|CSP/)&&i("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var a=r.delimiters?String(r.delimiters)+n:n;if(e[a])return e[a];var s=t(n,r);s.errors&&s.errors.length&&i("Error compiling template:\n\n"+n+"\n\n"+s.errors.map(function(t){return"- "+t}).join("\n")+"\n",o),s.tips&&s.tips.length&&s.tips.forEach(function(t){return da(t,o)});var u={},c=[];return u.render=Ci(s.render,c),u.staticRenderFns=s.staticRenderFns.map(function(t){return Ci(t,c)}),s.errors&&s.errors.length||!c.length||i("Failed to generate render function:\n\n"+c.map(function(t){var e=t.err,n=t.code;return e.toString()+" in\n\n"+n+"\n"}).join("\n"),o),e[a]=u}}function Oi(t){return function(e){function n(n,r){var o=Object.create(e),i=[],a=[];if(o.warn=function(t,e){(e?a:i).push(t)},r){r.modules&&(o.modules=(e.modules||[]).concat(r.modules)),r.directives&&(o.directives=w(Object.create(e.directives||null),r.directives));for(var s in r)"modules"!==s&&"directives"!==s&&(o[s]=r[s])}var u=t(n,o);return i.push.apply(i,_i(u.ast)),u.errors=i,u.tips=a,u}return{compile:n,compileToFunctions:Ai(n)}}}function Ei(t){return hc=hc||document.createElement("div"),hc.innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',hc.innerHTML.indexOf("&#10;")>0}function Si(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}var Ti=Object.freeze({}),ji=Object.prototype.toString,Ni=h("slot,component",!0),Mi=h("key,ref,slot,slot-scope,is"),Ri=Object.prototype.hasOwnProperty,Li=/-(\w)/g,Di=y(function(t){return t.replace(Li,function(t,e){return e?e.toUpperCase():""})}),Ii=y(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),Pi=/\B([A-Z])/g,Fi=y(function(t){return t.replace(Pi,"-$1").toLowerCase()}),Vi=Function.prototype.bind?_:g,Ui=function(t,e,n){return!1},Bi=function(t){return t},Hi="data-server-rendered",qi=["component","directive","filter"],zi=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],Ji={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Ui,isReservedAttr:Ui,isUnknownElement:Ui,getTagNamespace:$,parsePlatformTagName:Bi,mustUseProp:Ui,_lifecycleHooks:zi},Ki=/[^\w.$]/,Gi="__proto__"in{},Wi="undefined"!=typeof window,Xi="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Yi=Xi&&WXEnvironment.platform.toLowerCase(),Zi=Wi&&window.navigator.userAgent.toLowerCase(),Qi=Zi&&/msie|trident/.test(Zi),ta=Zi&&Zi.indexOf("msie 9.0")>0,ea=Zi&&Zi.indexOf("edge/")>0,na=(Zi&&Zi.indexOf("android")>0||"android"===Yi,Zi&&/iphone|ipad|ipod|ios/.test(Zi)||"ios"===Yi),ra=Zi&&/chrome\/\d+/.test(Zi)&&!ea,oa={}.watch,ia=!1;if(Wi)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){ia=!0}}),window.addEventListener("test-passive",null,aa)}catch(t){}var sa,ua,ca=function(){return void 0===sa&&(sa=!Wi&&!Xi&&"undefined"!=typeof e&&"server"===e.process.env.VUE_ENV),sa},fa=Wi&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,la="undefined"!=typeof Symbol&&j(Symbol)&&"undefined"!=typeof Reflect&&j(Reflect.ownKeys);ua="undefined"!=typeof Set&&j(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return this.set[t]===!0},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var pa=$,da=$,ha=$,va=$,ma="undefined"!=typeof console,ya=/(?:^|[-_])(\w)/g,ga=function(t){return t.replace(ya,function(t){return t.toUpperCase()}).replace(/[-_]/g,"")};pa=function(t,e){var n=e?ha(e):"";Ji.warnHandler?Ji.warnHandler.call(null,t,e,n):ma&&!Ji.silent&&console.error("[Vue warn]: "+t+n)},da=function(t,e){ma&&!Ji.silent&&console.warn("[Vue tip]: "+t+(e?ha(e):""))},va=function(t,e){if(t.$root===t)return"<Root>";var n="function"==typeof t&&null!=t.cid?t.options:t._isVue?t.$options||t.constructor.options:t||{},r=n.name||n._componentTag,o=n.__file;if(!r&&o){var i=o.match(/([^\/\\]+)\.vue$/);r=i&&i[1]}return(r?"<"+ga(r)+">":"<Anonymous>")+(o&&e!==!1?" at "+o:"")};var _a=function(t,e){for(var n="";e;)e%2===1&&(n+=t),e>1&&(t+=t),e>>=1;return n};ha=function(t){if(t._isVue&&t.$parent){for(var e=[],n=0;t;){if(e.length>0){var r=e[e.length-1];if(r.constructor===t.constructor){n++,t=t.$parent;continue}n>0&&(e[e.length-1]=[r,n],n=0)}e.push(t),t=t.$parent}return"\n\nfound in\n\n"+e.map(function(t,e){return""+(0===e?"---> ":_a(" ",5+2*e))+(Array.isArray(t)?va(t[0])+"... ("+t[1]+" recursive calls)":va(t))}).join("\n")}return"\n\n(found in "+va(t)+")"};var ba=0,wa=function(){this.id=ba++,this.subs=[]};wa.prototype.addSub=function(t){this.subs.push(t)},wa.prototype.removeSub=function(t){v(this.subs,t)},wa.prototype.depend=function(){wa.target&&wa.target.addDep(this)},wa.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},wa.target=null;var xa=[],$a=function(t,e,n,r,o,i,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ka={child:{configurable:!0}};ka.child.get=function(){return this.componentInstance},Object.defineProperties($a.prototype,ka);var Ca=function(t){void 0===t&&(t="");var e=new $a;return e.text=t,e.isComment=!0,e},Aa=Array.prototype,Oa=Object.create(Aa),Ea=["push","pop","shift","unshift","splice","sort","reverse"];Ea.forEach(function(t){var e=Aa[t];S(Oa,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var o,i=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2)}return o&&a.observeArray(o),a.dep.notify(),i})});var Sa=Object.getOwnPropertyNames(Oa),Ta=!0,ja=function(t){if(this.value=t,this.dep=new wa,this.vmCount=0,S(t,"__ob__",this),Array.isArray(t)){var e=Gi?I:P;e(t,Oa,Sa),this.observeArray(t)}else this.walk(t)};ja.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)V(t,e[n])},ja.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)F(t[e])};var Na=Ji.optionMergeStrategies;Na.el=Na.propsData=function(t,e,n,r){return n||pa('option "'+r+'" can only be used during instance creation with the `new` keyword.'),La(t,e)},Na.data=function(t,e,n){return n?z(t,e,n):e&&"function"!=typeof e?(pa('The "data" option should be a function that returns a per-instance value in component definitions.',n),t):z(t,e)},zi.forEach(function(t){Na[t]=J}),qi.forEach(function(t){Na[t+"s"]=K}),Na.watch=function(t,e,n,r){if(t===oa&&(t=void 0),e===oa&&(e=void 0),!e)return Object.create(t||null);if(Q(r,e,n),!t)return e;var o={};w(o,t);for(var i in e){var a=o[i],s=e[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},Na.props=Na.methods=Na.inject=Na.computed=function(t,e,n,r){if(e&&Q(r,e,n),!t)return e;var o=Object.create(null);return w(o,t),e&&w(o,e),o},Na.provide=z;var Ma,Ra,La=function(t,e){return void 0===e?t:e},Da=/^(String|Number|Boolean|Function|Symbol)$/,Ia=[],Pa=!1,Fa=!1;if("undefined"!=typeof n&&j(n))Ra=function(){n(pt)};else if("undefined"==typeof MessageChannel||!j(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Ra=function(){setTimeout(pt,0)};else{var Va=new MessageChannel,Ua=Va.port2;Va.port1.onmessage=pt,Ra=function(){Ua.postMessage(1)}}if("undefined"!=typeof Promise&&j(Promise)){var Ba=Promise.resolve();Ma=function(){Ba.then(pt),na&&setTimeout($)}}else Ma=Ra;var Ha,qa,za=Wi&&window.performance;za&&za.mark&&za.measure&&za.clearMarks&&za.clearMeasures&&(Ha=function(t){return za.mark(t)},qa=function(t,e,n){za.measure(t,e,n),za.clearMarks(e),za.clearMarks(n),za.clearMeasures(t)});var Ja,Ka=h("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),Ga=function(t,e){pa('Property or method "'+e+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',t)},Wa="undefined"!=typeof Proxy&&j(Proxy);if(Wa){var Xa=h("stop,prevent,self,ctrl,shift,alt,meta,exact");Ji.keyCodes=new Proxy(Ji.keyCodes,{set:function(t,e,n){return Xa(e)?(pa("Avoid overwriting built-in modifier in config.keyCodes: ."+e),!1):(t[e]=n,!0)}})}var Ya={has:function t(e,n){var t=n in e,r=Ka(n)||"_"===n.charAt(0);return t||r||Ga(e,n),t||!r}},Za={get:function(t,e){return"string"!=typeof e||e in t||Ga(t,e),t[e]}};Ja=function(t){if(Wa){var e=t.$options,n=e.render&&e.render._withStripped?Za:Ya;t._renderProxy=new Proxy(t,n)}else t._renderProxy=t};var Qa,ts=new ua,es=y(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}),ns=null,rs=!1,os=100,is=[],as=[],ss={},us={},cs=!1,fs=!1,ls=0,ps=0,ds=function(t,e,n,r,o){this.vm=t,o&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++ps,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ua,this.newDepIds=new ua,this.expression=e.toString(),"function"==typeof e?this.getter=e:(this.getter=T(e),this.getter||(this.getter=function(){},pa('Failed watching path: "'+e+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',t))),this.value=this.lazy?void 0:this.get()};ds.prototype.get=function(){N(this);var t,e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;ct(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&vt(t),M(),this.cleanupDeps()}return t},ds.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},ds.prototype.cleanupDeps=function(){for(var t=this,e=this.deps.length;e--;){var n=t.deps[e];t.newDepIds.has(n.id)||n.removeSub(t)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},ds.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Zt(this)},ds.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){ct(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},ds.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ds.prototype.depend=function(){for(var t=this,e=this.deps.length;e--;)t.deps[e].depend()},ds.prototype.teardown=function(){var t=this;if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);for(var e=this.deps.length;e--;)t.deps[e].removeSub(t);this.active=!1}};var hs={enumerable:!0,configurable:!0,get:$,set:$},vs={lazy:!0};Ce(Ae.prototype);var ms={init:function(t,e,n,r){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var o=t;ms.prepatch(o,o)}else{var i=t.componentInstance=je(t,ns,n,r);i.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;Bt(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Jt(n,"mounted")),t.data.keepAlive&&(e._isMounted?Xt(n):qt(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?zt(e,!0):e.$destroy())}},ys=Object.keys(ms),gs=1,_s=2,bs=0;Ue(Je),fe(Je),Lt(Je),Vt(Je),Ve(Je);var ws=[String,RegExp,Array],xs={name:"keep-alive",abstract:!0,props:{include:ws,exclude:ws,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){var t=this;for(var e in t.cache)nn(t.cache,e,t.keys)},watch:{include:function(t){en(this,function(e){return tn(t,e)})},exclude:function(t){en(this,function(e){return!tn(t,e)})}},render:function(){var t=this.$slots.default,e=Tt(t),n=e&&e.componentOptions;if(n){var r=Qe(n),o=this,i=o.include,a=o.exclude;if(i&&(!r||!tn(i,r))||a&&r&&tn(a,r))return e;var s=this,u=s.cache,c=s.keys,f=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[f]?(e.componentInstance=u[f].componentInstance,v(c,f),c.push(f)):(u[f]=e,c.push(f),this.max&&c.length>parseInt(this.max)&&nn(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},$s={KeepAlive:xs};rn(Je),Object.defineProperty(Je.prototype,"$isServer",{get:ca}),Object.defineProperty(Je.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Je,"FunctionalRenderContext",{value:Ae}),Je.version="2.5.15";var ks,Cs,As,Os,Es,Ss,Ts,js,Ns,Ms=h("style,class"),Rs=h("input,textarea,option,select,progress"),Ls=function(t,e,n){return"value"===n&&Rs(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Ds=h("contenteditable,draggable,spellcheck"),Is=h("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Ps="http://www.w3.org/1999/xlink",Fs=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Vs=function(t){return Fs(t)?t.slice(6,t.length):""},Us=function(t){return null==t||t===!1},Bs={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Hs=h("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),qs=h("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),zs=function(t){return"pre"===t},Js=function(t){return Hs(t)||qs(t)},Ks=Object.create(null),Gs=h("text,number,password,search,email,tel,url"),Ws=Object.freeze({createElement:vn,createElementNS:mn,createTextNode:yn,createComment:gn,insertBefore:_n,removeChild:bn,appendChild:wn,parentNode:xn,nextSibling:$n,tagName:kn,setTextContent:Cn,setStyleScope:An}),Xs={create:function(t,e){On(e)},update:function(t,e){t.data.ref!==e.data.ref&&(On(t,!0),On(e))},destroy:function(t){On(t,!0)}},Ys=new $a("",{},[]),Zs=["create","activate","update","remove","destroy"],Qs={create:Nn,update:Nn,destroy:function(t){Nn(t,Ys)}},tu=Object.create(null),eu=[Xs,Qs],nu={create:In,update:In},ru={create:Vn,update:Vn},ou=/[\w).+\-_$\]]/,iu="__r",au="__c",su={create:vr,update:vr},uu={create:mr,update:mr},cu=y(function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach(function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}),fu=/^--/,lu=/\s*!important$/,pu=function(t,e,n){if(fu.test(e))t.style.setProperty(e,n);else if(lu.test(n))t.style.setProperty(e,n.replace(lu,""),"important");else{var r=hu(e);if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)t.style[r]=n[o];else t.style[r]=n}},du=["Webkit","Moz","ms"],hu=y(function(t){if(Ns=Ns||document.createElement("div").style,t=Di(t),"filter"!==t&&t in Ns)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<du.length;n++){var r=du[n]+e;if(r in Ns)return r}}),vu={create:$r,update:$r},mu=y(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),yu=Wi&&!ta,gu="transition",_u="animation",bu="transition",wu="transitionend",xu="animation",$u="animationend";
yu&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(bu="WebkitTransition",wu="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(xu="WebkitAnimation",$u="webkitAnimationEnd"));var ku=Wi?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()},Cu=/\b(transform|all)(,|$)/,Au=Wi?{create:Fr,activate:Fr,remove:function(t,e){t.data.show!==!0?Lr(t,e):e()}}:{},Ou=[nu,ru,su,uu,vu,Au],Eu=Ou.concat(eu),Su=jn({nodeOps:Ws,modules:Eu});ta&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Jr(t,"input")});var Tu={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?_t(n,"postpatch",function(){Tu.componentUpdated(t,e,n)}):Vr(t,e,n.context),t._vOptions=[].map.call(t.options,Hr)):("textarea"===n.tag||Gs(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",qr),t.addEventListener("compositionend",zr),t.addEventListener("change",zr),ta&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Vr(t,e,n.context);var r=t._vOptions,o=t._vOptions=[].map.call(t.options,Hr);if(o.some(function(t,e){return!C(t,r[e])})){var i=t.multiple?e.value.some(function(t){return Br(t,o)}):e.value!==e.oldValue&&Br(e.value,o);i&&Jr(t,"change")}}}},ju={bind:function(t,e,n){var r=e.value;n=Kr(n);var o=n.data&&n.data.transition,i=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&o?(n.data.show=!0,Rr(n,function(){t.style.display=i})):t.style.display=r?i:"none"},update:function(t,e,n){var r=e.value,o=e.oldValue;if(!r!=!o){n=Kr(n);var i=n.data&&n.data.transition;i?(n.data.show=!0,r?Rr(n,function(){t.style.display=t.__vOriginalDisplay}):Lr(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,o){o||(t.style.display=t.__vOriginalDisplay)}},Nu={model:Tu,show:ju},Mu={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},Ru={name:"transition",props:Mu,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(function(t){return t.tag||St(t)}),n.length)){n.length>1&&pa("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var r=this.mode;r&&"in-out"!==r&&"out-in"!==r&&pa("invalid <transition> mode: "+r,this.$parent);var o=n[0];if(Yr(this.$vnode))return o;var i=Gr(o);if(!i)return o;if(this._leaving)return Xr(t,o);var s="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?s+"comment":s+i.tag:a(i.key)?0===String(i.key).indexOf(s)?i.key:s+i.key:i.key;var u=(i.data||(i.data={})).transition=Wr(this),c=this._vnode,f=Gr(c);if(i.data.directives&&i.data.directives.some(function(t){return"show"===t.name})&&(i.data.show=!0),f&&f.data&&!Zr(i,f)&&!St(f)&&(!f.componentInstance||!f.componentInstance._vnode.isComment)){var l=f.data.transition=w({},u);if("out-in"===r)return this._leaving=!0,_t(l,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Xr(t,o);if("in-out"===r){if(St(i))return c;var p,d=function(){p()};_t(u,"afterEnter",d),_t(u,"enterCancelled",d),_t(l,"delayLeave",function(t){p=t})}}return o}}},Lu=w({tag:String,moveClass:String},Mu);delete Lu.mode;var Du={props:Lu,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=Wr(this),s=0;s<o.length;s++){var u=o[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))i.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else{var c=u.componentOptions,f=c?c.Ctor.options.name||c.tag||"":u.tag;pa("<transition-group> children must be keyed: <"+f+">")}}if(r){for(var l=[],p=[],d=0;d<r.length;d++){var h=r[d];h.data.transition=a,h.data.pos=h.elm.getBoundingClientRect(),n[h.key]?l.push(h):p.push(h)}this.kept=t(e,null,l),this.removed=p}return t(e,null,i)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Qr),t.forEach(to),t.forEach(eo),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;Er(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(wu,n._moveCb=function t(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(wu,t),n._moveCb=null,Sr(n,e))})}}))},methods:{hasMove:function(t,e){if(!yu)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Cr(n,t)}),kr(n,e),n.style.display="none",this.$el.appendChild(n);var r=jr(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}},Iu={Transition:Ru,TransitionGroup:Du};Je.config.mustUseProp=Ls,Je.config.isReservedTag=Js,Je.config.isReservedAttr=Ms,Je.config.getTagNamespace=pn,Je.config.isUnknownElement=dn,w(Je.options.directives,Nu),w(Je.options.components,Iu),Je.prototype.__patch__=Wi?Su:$,Je.prototype.$mount=function(t,e){return t=t&&Wi?hn(t):void 0,Ut(this,t,e)},Wi&&setTimeout(function(){Ji.devtools&&(fa?fa.emit("init",Je):ra&&console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),Ji.productionTip!==!1&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")},0);var Pu,Fu=/\{\{((?:.|\n)+?)\}\}/g,Vu=/[-.*+?^${}()|[\]\/\\]/g,Uu=y(function(t){var e=t[0].replace(Vu,"\\$&"),n=t[1].replace(Vu,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")}),Bu={staticKeys:["staticClass"],transformNode:ro,genData:oo},Hu={staticKeys:["staticStyle"],transformNode:io,genData:ao},qu={decode:function(t){return Pu=Pu||document.createElement("div"),Pu.innerHTML=t,Pu.textContent}},zu=h("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Ju=h("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Ku=h("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Gu=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Wu="[a-zA-Z_][\\w\\-\\.]*",Xu="((?:"+Wu+"\\:)?"+Wu+")",Yu=new RegExp("^<"+Xu),Zu=/^\s*(\/?)>/,Qu=new RegExp("^<\\/"+Xu+"[^>]*>"),tc=/^<!DOCTYPE [^>]+>/i,ec=/^<!\--/,nc=/^<!\[/,rc=!1;"x".replace(/x(.)?/g,function(t,e){rc=""===e});var oc,ic,ac,sc,uc,cc,fc,lc,pc,dc,hc,vc=h("script,style,textarea",!0),mc={},yc={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},gc=/&(?:lt|gt|quot|amp);/g,_c=/&(?:lt|gt|quot|amp|#10|#9);/g,bc=h("pre,textarea",!0),wc=function(t,e){return t&&bc(t)&&"\n"===e[0]},xc=/^@|^v-on:/,$c=/^v-|^@|^:/,kc=/(.*?)\s+(?:in|of)\s+(.*)/,Cc=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Ac=/^\(|\)$/g,Oc=/:(.*)$/,Ec=/^:|^v-bind:/,Sc=/\.[^.]+/g,Tc=y(qu.decode),jc=/^xmlns:NS\d+/,Nc=/^NS\d+:/,Mc={preTransformNode:Ro},Rc=[Bu,Hu,Mc],Lc={model:ar,text:Do,html:Io},Dc={expectHTML:!0,modules:Rc,directives:Lc,isPreTag:zs,isUnaryTag:zu,mustUseProp:Ls,canBeLeftOpenTag:Ju,isReservedTag:Js,getTagNamespace:pn,staticKeys:k(Rc)},Ic=y(Fo),Pc=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,Fc=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Vc={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Uc={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:"ArrowUp",left:"ArrowLeft",right:"ArrowRight",down:"ArrowDown",delete:["Backspace","Delete"]},Bc=function(t){return"if("+t+")return null;"},Hc={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Bc("$event.target !== $event.currentTarget"),ctrl:Bc("!$event.ctrlKey"),shift:Bc("!$event.shiftKey"),alt:Bc("!$event.altKey"),meta:Bc("!$event.metaKey"),left:Bc("'button' in $event && $event.button !== 0"),middle:Bc("'button' in $event && $event.button !== 1"),right:Bc("'button' in $event && $event.button !== 2")},qc={on:Go,bind:Wo,cloak:$},zc=function(t){this.options=t,this.warn=t.warn||Hn,this.transforms=qn(t.modules,"transformCode"),this.dataGenFns=qn(t.modules,"genData"),this.directives=w(w({},qc),t.directives);var e=t.isReservedTag||Ui;this.maybeComponent=function(t){return!e(t.tag)},this.onceId=0,this.staticRenderFns=[]},Jc=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),Kc=new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),Gc=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g,Wc=Oi(function(t,e){var n=fo(t.trim(),e);e.optimize!==!1&&Po(n,e);var r=Xo(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}}),Xc=Wc(Dc),Yc=Xc.compileToFunctions,Zc=!!Wi&&Ei(!1),Qc=!!Wi&&Ei(!0),tf=y(function(t){var e=hn(t);return e&&e.innerHTML}),ef=Je.prototype.$mount;return Je.prototype.$mount=function(t,e){if(t=t&&hn(t),t===document.body||t===document.documentElement)return pa("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=tf(r),r||pa("Template element not found or is empty: "+n.template,this));else{if(!r.nodeType)return pa("invalid template option:"+r,this),this;r=r.innerHTML}else t&&(r=Si(t));if(r){Ji.performance&&Ha&&Ha("compile");var o=Yc(r,{shouldDecodeNewlines:Zc,shouldDecodeNewlinesForHref:Qc,delimiters:n.delimiters,comments:n.comments},this),i=o.render,a=o.staticRenderFns;n.render=i,n.staticRenderFns=a,Ji.performance&&Ha&&(Ha("compile end"),qa("vue "+this._name+" compile","compile","compile end"))}}return ef.call(this,t,e)},Je.compile=Yc,Je})}).call(e,function(){return this}(),n(5).setImmediate)},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(6),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return v[h]=r,d(h),h++}function o(t){delete v[t]}function i(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(m)setTimeout(a,0,t);else{var e=v[t];if(e){m=!0;try{i(e)}finally{o(t),m=!1}}}}function s(){d=function(t){e.nextTick(function(){a(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),d=function(n){t.postMessage(e+n,"*")}}function f(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;a(e)},d=function(e){t.port2.postMessage(e)}}function l(){var t=y.documentElement;d=function(e){var n=y.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function p(){d=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var d,h=1,v={},m=!1,y=t.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(t);g=g&&g.setTimeout?g:t,"[object process]"==={}.toString.call(t.process)?s():u()?c():t.MessageChannel?f():y&&"onreadystatechange"in y.createElement("script")?l():p(),g.setImmediate=r,g.clearImmediate=o}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(3))},function(t,e,n){(function(e){/**
	  * vue-router v3.0.1
	  * (c) 2017 Evan You
	  * @license MIT
	  */
"use strict";function n(t,e){if(!t)throw new Error("[vue-router] "+e)}function r(t,n){"production"===e.env.NODE_ENV||t||"undefined"!=typeof console&&console.warn("[vue-router] "+n)}function o(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function i(t,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(t);case"boolean":return n?t.params:void 0;default:"production"!==e.env.NODE_ENV&&r(!1,'props in "'+t.path+'" is a '+typeof n+", expecting an object, function or boolean.")}}function a(t,e){for(var n in e)t[n]=e[n];return t}function s(t,n,o){void 0===n&&(n={});var i,a=o||u;try{i=a(t||"")}catch(t){"production"!==e.env.NODE_ENV&&r(!1,t.message),i={}}for(var s in n)i[s]=n[s];return i}function u(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var n=t.replace(/\+/g," ").split("="),r=Vt(n.shift()),o=n.length>0?Vt(n.join("=")):null;void 0===e[r]?e[r]=o:Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]}),e):e}function c(t){var e=t?Object.keys(t).map(function(e){var n=t[e];if(void 0===n)return"";if(null===n)return Ft(e);if(Array.isArray(n)){var r=[];return n.forEach(function(t){void 0!==t&&(null===t?r.push(Ft(e)):r.push(Ft(e)+"="+Ft(t)))}),r.join("&")}return Ft(e)+"="+Ft(n)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}function f(t,e,n,r){var o=r&&r.options.stringifyQuery,i=e.query||{};try{i=l(i)}catch(t){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:i,params:e.params||{},fullPath:d(e,o),matched:t?p(t):[]};return n&&(a.redirectedFrom=d(n,o)),Object.freeze(a)}function l(t){if(Array.isArray(t))return t.map(l);if(t&&"object"==typeof t){var e={};for(var n in t)e[n]=l(t[n]);return e}return t}function p(t){for(var e=[];t;)e.unshift(t),t=t.parent;return e}function d(t,e){var n=t.path,r=t.query;void 0===r&&(r={});var o=t.hash;void 0===o&&(o="");var i=e||c;return(n||"/")+i(r)+o}function h(t,e){return e===Bt?t===e:!!e&&(t.path&&e.path?t.path.replace(Ut,"")===e.path.replace(Ut,"")&&t.hash===e.hash&&v(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&v(t.query,e.query)&&v(t.params,e.params)))}function v(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(n){var r=t[n],o=e[n];return"object"==typeof r&&"object"==typeof o?v(r,o):String(r)===String(o)})}function m(t,e){return 0===t.path.replace(Ut,"/").indexOf(e.path.replace(Ut,"/"))&&(!e.hash||t.hash===e.hash)&&y(t.query,e.query)}function y(t,e){for(var n in e)if(!(n in t))return!1;return!0}function g(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function _(t){if(t)for(var e,n=0;n<t.length;n++){if(e=t[n],"a"===e.tag)return e;if(e.children&&(e=_(e.children)))return e}}function b(t){if(!b.installed||Rt!==t){b.installed=!0,Rt=t;var e=function(t){return void 0!==t},n=function(t,n){var r=t.$options._parentVnode;e(r)&&e(r=r.data)&&e(r=r.registerRouteInstance)&&r(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("router-view",Lt),t.component("router-link",zt);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}function w(t,e,n){var r=t.charAt(0);if("/"===r)return t;if("?"===r||"#"===r)return e+t;var o=e.split("/");n&&o[o.length-1]||o.pop();for(var i=t.replace(/^\//,"").split("/"),a=0;a<i.length;a++){var s=i[a];".."===s?o.pop():"."!==s&&o.push(s)}return""!==o[0]&&o.unshift(""),o.join("/")}function x(t){var e="",n="",r=t.indexOf("#");r>=0&&(e=t.slice(r),t=t.slice(0,r));var o=t.indexOf("?");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{path:t,query:n,hash:e}}function $(t){return t.replace(/\/\//g,"/")}function k(t,e){for(var n,r=[],o=0,i=0,a="",s=e&&e.delimiter||"/";null!=(n=Qt.exec(t));){var u=n[0],c=n[1],f=n.index;if(a+=t.slice(i,f),i=f+u.length,c)a+=c[1];else{var l=t[i],p=n[2],d=n[3],h=n[4],v=n[5],m=n[6],y=n[7];a&&(r.push(a),a="");var g=null!=p&&null!=l&&l!==p,_="+"===m||"*"===m,b="?"===m||"*"===m,w=n[2]||s,x=h||v;r.push({name:d||o++,prefix:p||"",delimiter:w,optional:b,repeat:_,partial:g,asterisk:!!y,pattern:x?T(x):y?".*":"[^"+S(w)+"]+?"})}}return i<t.length&&(a+=t.substr(i)),a&&r.push(a),r}function C(t,e){return E(k(t,e))}function A(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function O(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function E(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",i=n||{},a=r||{},s=a.pretty?A:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!=typeof c){var f,l=i[c.name];if(null==l){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(Kt(l)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<l.length;p++){if(f=s(l[p]),!e[u].test(f))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(f)+"`");o+=(0===p?c.prefix:c.delimiter)+f}}else{if(f=c.asterisk?O(l):s(l),!e[u].test(f))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+f+'"');o+=c.prefix+f}}else o+=c}return o}}function S(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function T(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function j(t,e){return t.keys=e,t}function N(t){return t.sensitive?"":"i"}function M(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return j(t,e)}function R(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(I(t[o],e,n).source);var i=new RegExp("(?:"+r.join("|")+")",N(n));return j(i,e)}function L(t,e,n){return D(k(t,n),e,n)}function D(t,e,n){Kt(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,o=n.end!==!1,i="",a=0;a<t.length;a++){var s=t[a];if("string"==typeof s)i+=S(s);else{var u=S(s.prefix),c="(?:"+s.pattern+")";e.push(s),s.repeat&&(c+="(?:"+u+c+")*"),c=s.optional?s.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")",i+=c}}var f=S(n.delimiter||"/"),l=i.slice(-f.length)===f;return r||(i=(l?i.slice(0,-f.length):i)+"(?:"+f+"(?=$))?"),i+=o?"$":r&&l?"":"(?="+f+"|$)",j(new RegExp("^"+i,N(n)),e)}function I(t,e,n){return Kt(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?M(t,e):Kt(t)?R(t,e,n):L(t,e,n)}function P(t,n,o){try{var i=te[t]||(te[t]=Gt.compile(t));return i(n||{},{pretty:!0})}catch(t){return"production"!==e.env.NODE_ENV&&r(!1,"missing param for "+o+": "+t.message),""}}function F(t,e,n,r){var o=e||[],i=n||Object.create(null),a=r||Object.create(null);t.forEach(function(t){V(o,i,a,t)});for(var s=0,u=o.length;s<u;s++)"*"===o[s]&&(o.push(o.splice(s,1)[0]),u--,s--);return{pathList:o,pathMap:i,nameMap:a}}function V(t,o,i,a,s,u){var c=a.path,f=a.name;"production"!==e.env.NODE_ENV&&(n(null!=c,'"path" is required in a route configuration.'),n("string"!=typeof a.component,'route config "component" for path: '+String(c||f)+" cannot be a string id. Use an actual component instead."));var l=a.pathToRegexpOptions||{},p=B(c,s,l.strict);"boolean"==typeof a.caseSensitive&&(l.sensitive=a.caseSensitive);var d={path:p,regex:U(p,l),components:a.components||{default:a.component},instances:{},name:f,parent:s,matchAs:u,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};if(a.children&&("production"!==e.env.NODE_ENV&&a.name&&!a.redirect&&a.children.some(function(t){return/^\/?$/.test(t.path)})&&r(!1,"Named Route '"+a.name+"' has a default child route. When navigating to this named route (:to=\"{name: '"+a.name+"'\"), the default child route will not be rendered. Remove the name from this route and use the name of the default child route for named links instead."),a.children.forEach(function(e){var n=u?$(u+"/"+e.path):void 0;V(t,o,i,e,d,n)})),void 0!==a.alias){var h=Array.isArray(a.alias)?a.alias:[a.alias];h.forEach(function(e){var n={path:e,children:a.children};V(t,o,i,n,s,d.path||"/")})}o[d.path]||(t.push(d.path),o[d.path]=d),f&&(i[f]?"production"===e.env.NODE_ENV||u||r(!1,'Duplicate named routes definition: { name: "'+f+'", path: "'+d.path+'" }'):i[f]=d)}function U(t,n){var o=Gt(t,[],n);if("production"!==e.env.NODE_ENV){var i=Object.create(null);o.keys.forEach(function(e){r(!i[e.name],'Duplicate param keys in route with path: "'+t+'"'),i[e.name]=!0})}return o}function B(t,e,n){return n||(t=t.replace(/\/$/,"")),"/"===t[0]?t:null==e?t:$(e.path+"/"+t)}function H(t,n,o,i){var a="string"==typeof t?{path:t}:t;if(a.name||a._normalized)return a;if(!a.path&&a.params&&n){a=q({},a),a._normalized=!0;var u=q(q({},n.params),a.params);if(n.name)a.name=n.name,a.params=u;else if(n.matched.length){var c=n.matched[n.matched.length-1].path;a.path=P(c,u,"path "+n.path)}else"production"!==e.env.NODE_ENV&&r(!1,"relative params navigation requires a current route.");return a}var f=x(a.path||""),l=n&&n.path||"/",p=f.path?w(f.path,l,o||a.append):l,d=s(f.query,a.query,i&&i.options.parseQuery),h=a.hash||f.hash;return h&&"#"!==h.charAt(0)&&(h="#"+h),{_normalized:!0,path:p,query:d,hash:h}}function q(t,e){for(var n in e)t[n]=e[n];return t}function z(t,o){function i(t){F(t,p,d,h)}function a(t,n,i){var a=H(t,n,!1,o),s=a.name;if(s){var u=h[s];if("production"!==e.env.NODE_ENV&&r(u,"Route with name '"+s+"' does not exist"),!u)return c(null,a);var f=u.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof a.params&&(a.params={}),n&&"object"==typeof n.params)for(var l in n.params)!(l in a.params)&&f.indexOf(l)>-1&&(a.params[l]=n.params[l]);if(u)return a.path=P(u.path,a.params,'named route "'+s+'"'),c(u,a,i)}else if(a.path){a.params={};for(var v=0;v<p.length;v++){var m=p[v],y=d[m];if(J(y.regex,a.path,a.params))return c(y,a,i)}}return c(null,a)}function s(t,i){var s=t.redirect,u="function"==typeof s?s(f(t,i,null,o)):s;if("string"==typeof u&&(u={path:u}),!u||"object"!=typeof u)return"production"!==e.env.NODE_ENV&&r(!1,"invalid redirect option: "+JSON.stringify(u)),c(null,i);var l=u,p=l.name,d=l.path,v=i.query,m=i.hash,y=i.params;if(v=l.hasOwnProperty("query")?l.query:v,m=l.hasOwnProperty("hash")?l.hash:m,y=l.hasOwnProperty("params")?l.params:y,p){var g=h[p];return"production"!==e.env.NODE_ENV&&n(g,'redirect failed: named route "'+p+'" not found.'),a({_normalized:!0,name:p,query:v,hash:m,params:y},void 0,i)}if(d){var _=K(d,t),b=P(_,y,'redirect route with path "'+_+'"');return a({_normalized:!0,path:b,query:v,hash:m},void 0,i)}return"production"!==e.env.NODE_ENV&&r(!1,"invalid redirect option: "+JSON.stringify(u)),c(null,i)}function u(t,e,n){var r=P(n,e.params,'aliased route with path "'+n+'"'),o=a({_normalized:!0,path:r});if(o){var i=o.matched,s=i[i.length-1];return e.params=o.params,c(s,e)}return c(null,e)}function c(t,e,n){return t&&t.redirect?s(t,n||e):t&&t.matchAs?u(t,e,t.matchAs):f(t,e,n,o)}var l=F(t),p=l.pathList,d=l.pathMap,h=l.nameMap;return{match:a,addRoutes:i}}function J(t,e,n){var r=e.match(t);if(!r)return!1;if(!n)return!0;for(var o=1,i=r.length;o<i;++o){var a=t.keys[o-1],s="string"==typeof r[o]?decodeURIComponent(r[o]):r[o];a&&(n[a.name]=s)}return!0}function K(t,e){return w(t,e.parent?e.parent.path:"/",!0)}function G(){window.history.replaceState({key:it()},""),window.addEventListener("popstate",function(t){X(),t.state&&t.state.key&&at(t.state.key)})}function W(t,r,o,i){if(t.app){var a=t.options.scrollBehavior;a&&("production"!==e.env.NODE_ENV&&n("function"==typeof a,"scrollBehavior must be a function"),t.app.$nextTick(function(){var t=Y(),s=a(r,o,i?t:null);s&&("function"==typeof s.then?s.then(function(e){rt(e,t)}).catch(function(t){"production"!==e.env.NODE_ENV&&n(!1,t.toString())}):rt(s,t))}))}}function X(){var t=it();t&&(ee[t]={x:window.pageXOffset,y:window.pageYOffset})}function Y(){var t=it();if(t)return ee[t]}function Z(t,e){var n=document.documentElement,r=n.getBoundingClientRect(),o=t.getBoundingClientRect();return{x:o.left-r.left-e.x,y:o.top-r.top-e.y}}function Q(t){return nt(t.x)||nt(t.y)}function tt(t){return{x:nt(t.x)?t.x:window.pageXOffset,y:nt(t.y)?t.y:window.pageYOffset}}function et(t){return{x:nt(t.x)?t.x:0,y:nt(t.y)?t.y:0}}function nt(t){return"number"==typeof t}function rt(t,e){var n="object"==typeof t;if(n&&"string"==typeof t.selector){var r=document.querySelector(t.selector);if(r){var o=t.offset&&"object"==typeof t.offset?t.offset:{};o=et(o),e=Z(r,o)}else Q(t)&&(e=tt(t))}else n&&Q(t)&&(e=tt(t));e&&window.scrollTo(e.x,e.y)}function ot(){return re.now().toFixed(3)}function it(){return oe}function at(t){oe=t}function st(t,e){X();var n=window.history;try{e?n.replaceState({key:oe},"",t):(oe=ot(),n.pushState({key:oe},"",t))}catch(n){window.location[e?"replace":"assign"](t)}}function ut(t){st(t,!0)}function ct(t,e,n){var r=function(o){o>=t.length?n():t[o]?e(t[o],function(){r(o+1)}):r(o+1)};r(0)}function ft(t){return function(n,i,a){var s=!1,u=0,c=null;lt(t,function(t,n,i,f){if("function"==typeof t&&void 0===t.cid){s=!0,u++;var l,p=ht(function(e){dt(e)&&(e=e.default),t.resolved="function"==typeof e?e:Rt.extend(e),i.components[f]=e,u--,u<=0&&a()}),d=ht(function(t){var n="Failed to resolve async component "+f+": "+t;"production"!==e.env.NODE_ENV&&r(!1,n),c||(c=o(t)?t:new Error(n),a(c))});try{l=t(p,d)}catch(t){d(t)}if(l)if("function"==typeof l.then)l.then(p,d);else{var h=l.component;h&&"function"==typeof h.then&&h.then(p,d)}}}),s||a()}}function lt(t,e){return pt(t.map(function(t){return Object.keys(t.components).map(function(n){return e(t.components[n],t.instances[n],t,n)})}))}function pt(t){return Array.prototype.concat.apply([],t)}function dt(t){return t.__esModule||ie&&"Module"===t[Symbol.toStringTag]}function ht(t){var e=!1;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(!e)return e=!0,t.apply(this,n)}}function vt(t){if(!t)if(Jt){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function mt(t,e){var n,r=Math.max(t.length,e.length);for(n=0;n<r&&t[n]===e[n];n++);return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}function yt(t,e,n,r){var o=lt(t,function(t,r,o,i){var a=gt(t,e);if(a)return Array.isArray(a)?a.map(function(t){return n(t,r,o,i)}):n(a,r,o,i)});return pt(r?o.reverse():o)}function gt(t,e){return"function"!=typeof t&&(t=Rt.extend(t)),t.options[e]}function _t(t){return yt(t,"beforeRouteLeave",wt,!0)}function bt(t){return yt(t,"beforeRouteUpdate",wt)}function wt(t,e){if(e)return function(){return t.apply(e,arguments)}}function xt(t,e,n){return yt(t,"beforeRouteEnter",function(t,r,o,i){return $t(t,o,i,e,n)})}function $t(t,e,n,r,o){return function(i,a,s){return t(i,a,function(t){s(t),"function"==typeof t&&r.push(function(){kt(t,e.instances,n,o)})})}}function kt(t,e,n,r){e[n]?t(e[n]):r()&&setTimeout(function(){kt(t,e,n,r)},16)}function Ct(t){var e=window.location.pathname;return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}function At(t){var e=Ct(t);if(!/^\/#/.test(e))return window.location.replace($(t+"/#"+e)),!0}function Ot(){var t=Et();return"/"===t.charAt(0)||(jt("/"+t),!1)}function Et(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.slice(e+1)}function St(t){var e=window.location.href,n=e.indexOf("#"),r=n>=0?e.slice(0,n):e;return r+"#"+t}function Tt(t){ne?st(St(t)):window.location.hash=t}function jt(t){ne?ut(St(t)):window.location.replace(St(t))}function Nt(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Mt(t,e,n){var r="hash"===n?"#"+e:e;return t?$(t+"/"+r):r}var Rt,Lt={name:"router-view",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,r=e.children,o=e.parent,s=e.data;s.routerView=!0;for(var u=o.$createElement,c=n.name,f=o.$route,l=o._routerViewCache||(o._routerViewCache={}),p=0,d=!1;o&&o._routerRoot!==o;)o.$vnode&&o.$vnode.data.routerView&&p++,o._inactive&&(d=!0),o=o.$parent;if(s.routerViewDepth=p,d)return u(l[c],s,r);var h=f.matched[p];if(!h)return l[c]=null,u();var v=l[c]=h.components[c];s.registerRouteInstance=function(t,e){var n=h.instances[c];(e&&n!==t||!e&&n===t)&&(h.instances[c]=e)},(s.hook||(s.hook={})).prepatch=function(t,e){h.instances[c]=e.componentInstance};var m=s.props=i(f,h.props&&h.props[c]);if(m){m=s.props=a({},m);var y=s.attrs=s.attrs||{};for(var g in m)v.props&&g in v.props||(y[g]=m[g],delete m[g])}return u(v,s,r)}},Dt=/[!'()*]/g,It=function(t){return"%"+t.charCodeAt(0).toString(16)},Pt=/%2C/g,Ft=function(t){return encodeURIComponent(t).replace(Dt,It).replace(Pt,",")},Vt=decodeURIComponent,Ut=/\/?$/,Bt=f(null,{path:"/"}),Ht=[String,Object],qt=[String,Array],zt={name:"router-link",props:{to:{type:Ht,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:qt,default:"click"}},render:function(t){var e=this,n=this.$router,r=this.$route,o=n.resolve(this.to,r,this.append),i=o.location,a=o.route,s=o.href,u={},c=n.options.linkActiveClass,l=n.options.linkExactActiveClass,p=null==c?"router-link-active":c,d=null==l?"router-link-exact-active":l,v=null==this.activeClass?p:this.activeClass,y=null==this.exactActiveClass?d:this.exactActiveClass,b=i.path?f(null,i,null,n):a;u[y]=h(r,b),u[v]=this.exact?u[y]:m(r,b);var w=function(t){g(t)&&(e.replace?n.replace(i):n.push(i))},x={click:g};Array.isArray(this.event)?this.event.forEach(function(t){x[t]=w}):x[this.event]=w;var $={class:u};if("a"===this.tag)$.on=x,$.attrs={href:s};else{var k=_(this.$slots.default);if(k){k.isStatic=!1;var C=Rt.util.extend,A=k.data=C({},k.data);A.on=x;var O=k.data.attrs=C({},k.data.attrs);O.href=s}else $.on=x}return t(this.tag,$,this.$slots.default)}},Jt="undefined"!=typeof window,Kt=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Gt=I,Wt=k,Xt=C,Yt=E,Zt=D,Qt=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Gt.parse=Wt,Gt.compile=Xt,Gt.tokensToFunction=Yt,Gt.tokensToRegExp=Zt;var te=Object.create(null),ee=Object.create(null),ne=Jt&&function(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")===-1&&t.indexOf("Android 4.0")===-1||t.indexOf("Mobile Safari")===-1||t.indexOf("Chrome")!==-1||t.indexOf("Windows Phone")!==-1)&&(window.history&&"pushState"in window.history)}(),re=Jt&&window.performance&&window.performance.now?window.performance:Date,oe=ot(),ie="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ae=function(t,e){this.router=t,this.base=vt(e),this.current=Bt,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};ae.prototype.listen=function(t){this.cb=t},ae.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},ae.prototype.onError=function(t){this.errorCbs.push(t)},ae.prototype.transitionTo=function(t,e,n){var r=this,o=this.router.match(t,this.current);this.confirmTransition(o,function(){r.updateRoute(o),e&&e(o),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach(function(t){t(o)}))},function(t){n&&n(t),t&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach(function(e){e(t)}))})},ae.prototype.confirmTransition=function(t,e,n){var i=this,a=this.current,s=function(t){o(t)&&(i.errorCbs.length?i.errorCbs.forEach(function(e){e(t)}):(r(!1,"uncaught error during route navigation:"),console.error(t))),n&&n(t)};if(h(t,a)&&t.matched.length===a.matched.length)return this.ensureURL(),s();var u=mt(this.current.matched,t.matched),c=u.updated,f=u.deactivated,l=u.activated,p=[].concat(_t(f),this.router.beforeHooks,bt(c),l.map(function(t){return t.beforeEnter}),ft(l));this.pending=t;var d=function(e,n){if(i.pending!==t)return s();try{e(t,a,function(t){t===!1||o(t)?(i.ensureURL(!0),s(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(s(),"object"==typeof t&&t.replace?i.replace(t):i.push(t)):n(t)})}catch(t){s(t)}};ct(p,d,function(){var n=[],r=function(){return i.current===t},o=xt(l,n,r),a=o.concat(i.router.resolveHooks);ct(a,d,function(){return i.pending!==t?s():(i.pending=null,e(t),void(i.router.app&&i.router.app.$nextTick(function(){n.forEach(function(t){t()})})))})})},ae.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(n){n&&n(t,e)})};var se=function(t){function e(e,n){var r=this;t.call(this,e,n);var o=e.options.scrollBehavior;o&&G();var i=Ct(this.base);window.addEventListener("popstate",function(t){var n=r.current,a=Ct(r.base);r.current===Bt&&a===i||r.transitionTo(a,function(t){o&&W(e,t,n,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var r=this,o=this,i=o.current;this.transitionTo(t,function(t){st($(r.base+t.fullPath)),W(r.router,t,i,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this,o=this,i=o.current;this.transitionTo(t,function(t){ut($(r.base+t.fullPath)),W(r.router,t,i,!1),e&&e(t)},n)},e.prototype.ensureURL=function(t){if(Ct(this.base)!==this.current.fullPath){var e=$(this.base+this.current.fullPath);t?st(e):ut(e)}},e.prototype.getCurrentLocation=function(){return Ct(this.base)},e}(ae),ue=function(t){function e(e,n,r){t.call(this,e,n),r&&At(this.base)||Ot()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router,n=e.options.scrollBehavior,r=ne&&n;r&&G(),window.addEventListener(ne?"popstate":"hashchange",function(){var e=t.current;Ot()&&t.transitionTo(Et(),function(n){r&&W(t.router,n,e,!0),ne||jt(n.fullPath)})})},e.prototype.push=function(t,e,n){var r=this,o=this,i=o.current;this.transitionTo(t,function(t){Tt(t.fullPath),W(r.router,t,i,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this,o=this,i=o.current;this.transitionTo(t,function(t){jt(t.fullPath),W(r.router,t,i,!1),e&&e(t)},n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;Et()!==e&&(t?Tt(e):jt(e))},e.prototype.getCurrentLocation=function(){return Et()},e}(ae),ce=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var r=this;this.transitionTo(t,function(t){r.stack=r.stack.slice(0,r.index+1).concat(t),r.index++,e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this;this.transitionTo(t,function(t){r.stack=r.stack.slice(0,r.index).concat(t),e&&e(t)},n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,function(){e.index=n,e.updateRoute(r)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(ae),fe=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=z(t.routes||[],this);var r=t.mode||"hash";switch(this.fallback="history"===r&&!ne&&t.fallback!==!1,this.fallback&&(r="hash"),Jt||(r="abstract"),this.mode=r,r){case"history":this.history=new se(this,t.base);break;case"hash":this.history=new ue(this,t.base,this.fallback);break;case"abstract":this.history=new ce(this,t.base);break;default:"production"!==e.env.NODE_ENV&&n(!1,"invalid mode: "+r)}},le={currentRoute:{configurable:!0}};fe.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},le.currentRoute.get=function(){return this.history&&this.history.current},fe.prototype.init=function(t){var r=this;if("production"!==e.env.NODE_ENV&&n(b.installed,"not installed. Make sure to call `Vue.use(VueRouter)` before creating root instance."),this.apps.push(t),!this.app){this.app=t;var o=this.history;if(o instanceof se)o.transitionTo(o.getCurrentLocation());else if(o instanceof ue){var i=function(){o.setupListeners()};o.transitionTo(o.getCurrentLocation(),i,i)}o.listen(function(t){r.apps.forEach(function(e){e._route=t})})}},fe.prototype.beforeEach=function(t){return Nt(this.beforeHooks,t)},fe.prototype.beforeResolve=function(t){return Nt(this.resolveHooks,t)},fe.prototype.afterEach=function(t){return Nt(this.afterHooks,t)},fe.prototype.onReady=function(t,e){this.history.onReady(t,e)},fe.prototype.onError=function(t){this.history.onError(t)},fe.prototype.push=function(t,e,n){this.history.push(t,e,n)},fe.prototype.replace=function(t,e,n){this.history.replace(t,e,n)},fe.prototype.go=function(t){this.history.go(t)},fe.prototype.back=function(){this.go(-1)},fe.prototype.forward=function(){this.go(1)},fe.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},fe.prototype.resolve=function(t,e,n){var r=H(t,e||this.history.current,n,this),o=this.match(r,e),i=o.redirectedFrom||o.fullPath,a=this.history.base,s=Mt(a,i,this.mode);return{location:r,route:o,href:s,normalizedTo:r,resolved:o}},fe.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==Bt&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(fe.prototype,le),fe.install=b,fe.version="3.0.1",Jt&&window.Vue&&window.Vue.use(fe),t.exports=fe}).call(e,n(3))},function(t,e,n){t.exports=n(9)},function(t,e,n){"use strict";function r(t){var e=new a(t),n=i(a.prototype.request,e);return o.extend(n,a.prototype,e),o.extend(n,e),n}var o=n(10),i=n(11),a=n(13),s=n(14),u=r(s);u.Axios=a,u.create=function(t){return r(o.merge(s,t))},u.Cancel=n(31),u.CancelToken=n(32),u.isCancel=n(28),u.all=function(t){return Promise.all(t)},u.spread=n(33),t.exports=u,t.exports.default=u},function(t,e,n){"use strict";function r(t){return"[object Array]"===k.call(t)}function o(t){return"[object ArrayBuffer]"===k.call(t)}function i(t){return"undefined"!=typeof FormData&&t instanceof FormData}function a(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function s(t){return"string"==typeof t}function u(t){return"number"==typeof t}function c(t){return"undefined"==typeof t}function f(t){return null!==t&&"object"==typeof t}function l(t){return"[object Date]"===k.call(t)}function p(t){return"[object File]"===k.call(t)}function d(t){return"[object Blob]"===k.call(t)}function h(t){return"[object Function]"===k.call(t)}function v(t){return f(t)&&h(t.pipe)}function m(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function y(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function _(t,e){if(null!==t&&"undefined"!=typeof t)if("object"!=typeof t&&(t=[t]),r(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function b(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=b(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)_(arguments[n],t);return e}function w(t,e,n){return _(e,function(e,r){n&&"function"==typeof e?t[r]=x(e,n):t[r]=e}),t}var x=n(11),$=n(12),k=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:o,isBuffer:$,isFormData:i,isArrayBufferView:a,isString:s,isNumber:u,isObject:f,isUndefined:c,isDate:l,isFile:p,isBlob:d,isFunction:h,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:g,forEach:_,merge:b,extend:w,trim:y}},function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */
t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function r(t){this.defaults=t,this.interceptors={request:new a,response:new a}}var o=n(14),i=n(10),a=n(25),s=n(26);r.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),t=i.merge(o,{method:"get"},this.defaults,t),t.method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head","options"],function(t){r.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function o(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(16):"undefined"!=typeof e&&(t=n(16)),t}var i=n(10),a=n(15),s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:o(),transformRequest:[function(t,e){return a(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){u.headers[t]={}}),i.forEach(["post","put","patch"],function(t){u.headers[t]=i.merge(s)}),t.exports=u}).call(e,n(3))},function(t,e,n){"use strict";var r=n(10);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){(function(e){"use strict";var r=n(10),o=n(17),i=n(20),a=n(21),s=n(22),u=n(18),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(23);t.exports=function(t){return new Promise(function(f,l){var p=t.data,d=t.headers;r.isFormData(p)&&delete d["Content-Type"];var h=new XMLHttpRequest,v="onreadystatechange",m=!1;if("test"===e.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(t.url)||(h=new window.XDomainRequest,v="onload",m=!0,h.onprogress=function(){},h.ontimeout=function(){}),t.auth){var y=t.auth.username||"",g=t.auth.password||"";d.Authorization="Basic "+c(y+":"+g)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h[v]=function(){if(h&&(4===h.readyState||m)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?h.response:h.responseText,r={data:n,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:e,config:t,request:h};o(f,l,r),h=null}},h.onerror=function(){l(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var _=n(24),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?_.read(t.xsrfCookieName):void 0;b&&(d[t.xsrfHeaderName]=b)}if("setRequestHeader"in h&&r.forEach(d,function(t,e){"undefined"==typeof p&&"content-type"===e.toLowerCase()?delete d[e]:h.setRequestHeader(e,t)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){h&&(h.abort(),l(t),h=null)}),void 0===p&&(p=null),h.send(p)})}}).call(e,n(3))},function(t,e,n){"use strict";var r=n(18);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";var r=n(19);t.exports=function(t,e,n,o,i){var a=new Error(t);return r(a,e,n,o,i)}},function(t,e){"use strict";t.exports=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(10);t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(o.isURLSearchParams(e))i=e.toString();else{var a=[];o.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(o.isArray(t)?e+="[]":t=[t],o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),i=a.join("&")}return i&&(t+=(t.indexOf("?")===-1?"?":"&")+i),t}},function(t,e,n){"use strict";var r=n(10),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,a={};return t?(r.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;"set-cookie"===e?a[e]=(a[e]?a[e]:[]).concat([n]):a[e]=a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var r=n(10);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return e=t(window.location.href),function(n){var o=r.isString(n)?t(n):n;return o.protocol===e.protocol&&o.host===e.host}}():function(){return function(){return!0}}()},function(t,e){"use strict";function n(){this.message="String contains an invalid character"}function r(t){for(var e,r,i=String(t),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&e>>8-s%1*8)){if(r=i.charCodeAt(s+=.75),r>255)throw new n;e=e<<8|r}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=r},function(t,e,n){"use strict";var r=n(10);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var o=n(10);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";function r(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var o=n(10),i=n(27),a=n(28),s=n(14),u=n(29),c=n(30);t.exports=function(t){r(t),t.baseURL&&!u(t.url)&&(t.url=c(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=t.adapter||s.adapter;return e(t).then(function(e){return r(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(r(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(10);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,n){"use strict";function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new o(t),e(n.reason))})}var o=n(31);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t,e=new r(function(e){t=e});return{token:e,cancel:t}},t.exports=r},function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=r(o),a=n(35),s=r(a);i.default.use(s.default);var u={loadStatus:!1},c={LOAD_STATUS:function(t,e){t.loadStatus=e}};e.default=new s.default.Store({state:u,mutations:c})},function(t,e,n){(function(e){/**
	 * vuex v3.0.1
	 * (c) 2017 Evan You
	 * @license MIT
	 */
"use strict";function n(t){O&&(t._devtoolHook=O,O.emit("vuex:init",t),O.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(t,e){O.emit("vuex:mutation",t,e)}))}function r(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function o(t){return null!==t&&"object"==typeof t}function i(t){return t&&"function"==typeof t.then}function a(t,e){if(!t)throw new Error("[vuex] "+e)}function s(t,n,r){if("production"!==e.env.NODE_ENV&&u(t,r),n.update(r),r.modules)for(var o in r.modules){if(!n.getChild(o))return void("production"!==e.env.NODE_ENV&&console.warn("[vuex] trying to add a new module '"+o+"' on hot reloading, manual reload is needed"));s(t.concat(o),n.getChild(o),r.modules[o])}}function u(t,e){Object.keys(R).forEach(function(n){if(e[n]){var o=R[n];r(e[n],function(e,r){a(o.assert(e),c(t,n,r,e,o.expected))})}})}function c(t,e,n,r,o){var i=e+" should be "+o+' but "'+e+"."+n+'"';return t.length>0&&(i+=' in module "'+t.join(".")+'"'),i+=" is "+JSON.stringify(r)+"."}function f(t,e){return e.indexOf(t)<0&&e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function l(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;d(t,n,[],t._modules.root,!0),p(t,n,e)}function p(t,e,n){var o=t._vm;t.getters={};var i=t._wrappedGetters,a={};r(i,function(e,n){a[n]=function(){return e(t)},Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})});var s=j.config.silent;j.config.silent=!0,t._vm=new j({data:{$$state:e},computed:a}),j.config.silent=s,t.strict&&_(t),o&&(n&&t._withCommit(function(){o._data.$$state=null}),j.nextTick(function(){return o.$destroy()}))}function d(t,e,n,r,o){var i=!n.length,a=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[a]=r),!i&&!o){var s=b(e,n.slice(0,-1)),u=n[n.length-1];t._withCommit(function(){j.set(s,u,r.state)})}var c=r.context=h(t,a,n);r.forEachMutation(function(e,n){var r=a+n;m(t,r,e,c)}),r.forEachAction(function(e,n){var r=e.root?n:a+n,o=e.handler||e;y(t,r,o,c)}),r.forEachGetter(function(e,n){var r=a+n;g(t,r,e,c)}),r.forEachChild(function(r,i){d(t,e,n.concat(i),r,o)})}function h(t,n,r){var o=""===n,i={dispatch:o?t.dispatch:function(r,o,i){var a=w(r,o,i),s=a.payload,u=a.options,c=a.type;return u&&u.root||(c=n+c,"production"===e.env.NODE_ENV||t._actions[c])?t.dispatch(c,s):void console.error("[vuex] unknown local action type: "+a.type+", global type: "+c)},commit:o?t.commit:function(r,o,i){var a=w(r,o,i),s=a.payload,u=a.options,c=a.type;return u&&u.root||(c=n+c,"production"===e.env.NODE_ENV||t._mutations[c])?void t.commit(c,s,u):void console.error("[vuex] unknown local mutation type: "+a.type+", global type: "+c)}};return Object.defineProperties(i,{getters:{get:o?function(){return t.getters}:function(){return v(t,n)}},state:{get:function(){return b(t.state,r)}}}),i}function v(t,e){var n={},r=e.length;return Object.keys(t.getters).forEach(function(o){if(o.slice(0,r)===e){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[o]},enumerable:!0})}}),n}function m(t,e,n,r){var o=t._mutations[e]||(t._mutations[e]=[]);o.push(function(e){n.call(t,r.state,e)})}function y(t,e,n,r){var o=t._actions[e]||(t._actions[e]=[]);o.push(function(e,o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e,o);return i(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(e){throw t._devtoolHook.emit("vuex:error",e),e}):a})}function g(t,n,r,o){return t._wrappedGetters[n]?void("production"!==e.env.NODE_ENV&&console.error("[vuex] duplicate getter key: "+n)):void(t._wrappedGetters[n]=function(t){return r(o.state,o.getters,t.state,t.getters)})}function _(t){t._vm.$watch(function(){return this._data.$$state},function(){"production"!==e.env.NODE_ENV&&a(t._committing,"Do not mutate vuex store state outside mutation handlers.")},{deep:!0,sync:!0})}function b(t,e){return e.length?e.reduce(function(t,e){return t[e]},t):t}function w(t,n,r){return o(t)&&t.type&&(r=n,n=t,t=t.type),"production"!==e.env.NODE_ENV&&a("string"==typeof t,"Expects string as the type, but found "+typeof t+"."),{type:t,payload:n,options:r}}function x(t){return j&&t===j?void("production"!==e.env.NODE_ENV&&console.error("[vuex] already installed. Vue.use(Vuex) should be called only once.")):(j=t,void A(j))}function $(t){return Array.isArray(t)?t.map(function(t){return{key:t,val:t}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}})}function k(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function C(t,n,r){var o=t._modulesNamespaceMap[r];return"production"===e.env.NODE_ENV||o||console.error("[vuex] module namespace not found in "+n+"(): "+r),o}var A=function(t){function e(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}var n=Number(t.version.split(".")[0]);if(n>=2)t.mixin({beforeCreate:e});else{var r=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[e].concat(t.init):e,r.call(this,t)}}},O="undefined"!=typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,E=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},S={namespaced:{configurable:!0}};S.namespaced.get=function(){return!!this._rawModule.namespaced},E.prototype.addChild=function(t,e){this._children[t]=e},E.prototype.removeChild=function(t){delete this._children[t]},E.prototype.getChild=function(t){return this._children[t]},E.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},E.prototype.forEachChild=function(t){r(this._children,t)},E.prototype.forEachGetter=function(t){this._rawModule.getters&&r(this._rawModule.getters,t)},E.prototype.forEachAction=function(t){this._rawModule.actions&&r(this._rawModule.actions,t)},E.prototype.forEachMutation=function(t){this._rawModule.mutations&&r(this._rawModule.mutations,t)},Object.defineProperties(E.prototype,S);var T=function(t){this.register([],t,!1)};T.prototype.get=function(t){return t.reduce(function(t,e){return t.getChild(e)},this.root)},T.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")},"")},T.prototype.update=function(t){s([],this.root,t)},T.prototype.register=function(t,n,o){var i=this;void 0===o&&(o=!0),"production"!==e.env.NODE_ENV&&u(t,n);var a=new E(n,o);if(0===t.length)this.root=a;else{var s=this.get(t.slice(0,-1));s.addChild(t[t.length-1],a)}n.modules&&r(n.modules,function(e,n){i.register(t.concat(n),e,o)})},T.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];e.getChild(n).runtime&&e.removeChild(n)};var j,N={assert:function(t){return"function"==typeof t},expected:"function"},M={assert:function(t){return"function"==typeof t||"object"==typeof t&&"function"==typeof t.handler},expected:'function or object with "handler" function'},R={getters:N,mutations:N,actions:M},L=function t(r){var o=this;void 0===r&&(r={}),!j&&"undefined"!=typeof window&&window.Vue&&x(window.Vue),"production"!==e.env.NODE_ENV&&(a(j,"must call Vue.use(Vuex) before creating a store instance."),a("undefined"!=typeof Promise,"vuex requires a Promise polyfill in this browser."),a(this instanceof t,"Store must be called with the new operator."));var i=r.plugins;void 0===i&&(i=[]);var s=r.strict;void 0===s&&(s=!1);var u=r.state;void 0===u&&(u={}),"function"==typeof u&&(u=u()||{}),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new T(r),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new j;var c=this,f=this,l=f.dispatch,h=f.commit;this.dispatch=function(t,e){return l.call(c,t,e)},this.commit=function(t,e,n){return h.call(c,t,e,n)},this.strict=s,d(this,u,[],this._modules.root),p(this,u),i.forEach(function(t){return t(o)}),j.config.devtools&&n(this)},D={state:{configurable:!0}};D.state.get=function(){return this._vm._data.$$state},D.state.set=function(t){"production"!==e.env.NODE_ENV&&a(!1,"Use store.replaceState() to explicit replace store state.")},L.prototype.commit=function(t,n,r){var o=this,i=w(t,n,r),a=i.type,s=i.payload,u=i.options,c={type:a,payload:s},f=this._mutations[a];return f?(this._withCommit(function(){f.forEach(function(t){t(s)})}),this._subscribers.forEach(function(t){return t(c,o.state)}),void("production"!==e.env.NODE_ENV&&u&&u.silent&&console.warn("[vuex] mutation type: "+a+". Silent option has been removed. Use the filter functionality in the vue-devtools"))):void("production"!==e.env.NODE_ENV&&console.error("[vuex] unknown mutation type: "+a))},L.prototype.dispatch=function(t,n){var r=this,o=w(t,n),i=o.type,a=o.payload,s={type:i,payload:a},u=this._actions[i];return u?(this._actionSubscribers.forEach(function(t){return t(s,r.state)}),u.length>1?Promise.all(u.map(function(t){return t(a)})):u[0](a)):void("production"!==e.env.NODE_ENV&&console.error("[vuex] unknown action type: "+i))},L.prototype.subscribe=function(t){return f(t,this._subscribers)},L.prototype.subscribeAction=function(t){return f(t,this._actionSubscribers)},L.prototype.watch=function(t,n,r){var o=this;return"production"!==e.env.NODE_ENV&&a("function"==typeof t,"store.watch only accepts a function."),this._watcherVM.$watch(function(){return t(o.state,o.getters)},n,r)},L.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._vm._data.$$state=t})},L.prototype.registerModule=function(t,n,r){void 0===r&&(r={}),"string"==typeof t&&(t=[t]),"production"!==e.env.NODE_ENV&&(a(Array.isArray(t),"module path must be a string or an Array."),a(t.length>0,"cannot register the root module by using registerModule.")),this._modules.register(t,n),d(this,this.state,t,this._modules.get(t),r.preserveState),p(this,this.state)},L.prototype.unregisterModule=function(t){var n=this;"string"==typeof t&&(t=[t]),"production"!==e.env.NODE_ENV&&a(Array.isArray(t),"module path must be a string or an Array."),this._modules.unregister(t),this._withCommit(function(){var e=b(n.state,t.slice(0,-1));j.delete(e,t[t.length-1])}),l(this)},L.prototype.hotUpdate=function(t){this._modules.update(t),l(this,!0)},L.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(L.prototype,D);var I=k(function(t,e){var n={};return $(e).forEach(function(e){var r=e.key,o=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=C(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"==typeof o?o.call(this,e,n):e[o]},n[r].vuex=!0}),n}),P=k(function(t,e){var n={};return $(e).forEach(function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.commit;if(t){var i=C(this.$store,"mapMutations",t);if(!i)return;r=i.context.commit}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}}),n}),F=k(function(t,n){var r={};return $(n).forEach(function(n){var o=n.key,i=n.val;i=t+i,r[o]=function(){if(!t||C(this.$store,"mapGetters",t))return"production"===e.env.NODE_ENV||i in this.$store.getters?this.$store.getters[i]:void console.error("[vuex] unknown getter: "+i)},r[o].vuex=!0}),r}),V=k(function(t,e){var n={};return $(e).forEach(function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var i=C(this.$store,"mapActions",t);if(!i)return;r=i.context.dispatch}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}}),n}),U=function(t){return{mapState:I.bind(null,t),mapGetters:F.bind(null,t),mapMutations:P.bind(null,t),mapActions:V.bind(null,t)}},B={Store:L,install:x,version:"3.0.1",mapState:I,mapMutations:P,mapGetters:F,mapActions:V,createNamespacedHelpers:U};t.exports=B}).call(e,n(3))},function(t,e,n){var r,o;r=n(37);var i=n(48);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(38);var o=n(4),i=r(o),a=n(42),s=r(a);i.default.component("loading",s.default),e.default={data:function(){return{title:"Hello World"}}}},function(t,e){},,,,function(t,e,n){var r,o;r=n(43);var i=n(47);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(44);var o=n(34),i=r(o);e.default={computed:{loadStatus:function(){return i.default.state.loadStatus}}}},function(t,e){},,,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loadStatus?n("div",{staticClass:"loading"}):t._e()},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("h1",[t._v(t._s(t.title))]),t._v(" "),n("router-view",{attrs:{"keep-alive":""}}),t._v(" "),n("loading")],1)},staticRenderFns:[]}},function(t,e,n){var r,o;r=n(50);var i=n(53);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(51);var o=n(34),i=r(o);e.default={created:function(){i.default.commit("LOAD_STATUS",!1)},mounted:function(){this.showLoading()},methods:{showLoading:function(){i.default.commit("LOAD_STATUS",!0)}}}},function(t,e){},,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showLoading()}}},[t._v("显示loading")])])},staticRenderFns:[]}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGFkZTYwMWExMTljYTg2OGEyOTkwIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2VzNi1wcm9taXNlL2F1dG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9lczYtcHJvbWlzZS9kaXN0L2VzNi1wcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vdnVlL2Rpc3QvdnVlLmpzIiwid2VicGFjazovLy8uL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi92dWUtcm91dGVyL2Rpc3QvdnVlLXJvdXRlci5jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9heGlvcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9pcy1idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9BeGlvcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9lbmhhbmNlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2J0b2EuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9pc0Fic29sdXRlVVJMLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Z1ZXgvc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi92dWV4L2Rpc3QvdnVleC5jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC52dWUiLCJ3ZWJwYWNrOi8vL2FwcC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbG9hZGluZy52dWUiLCJ3ZWJwYWNrOi8vL2xvYWRpbmcudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xvYWRpbmcudnVlPzY0MDQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC52dWU/YTk5MSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9pbmRleC9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9pbmRleC9pbmRleC52dWU/MmEwNCJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfdnVlIiwiX3Z1ZTIiLCJfdnVlUm91dGVyIiwiX3Z1ZVJvdXRlcjIiLCJfYXhpb3MiLCJfYXhpb3MyIiwiX3N0b3JlIiwiX3N0b3JlMiIsIl9hcHAiLCJfYXBwMiIsIl9pbmRleCIsIl9pbmRleDIiLCJ1c2UiLCJwcm90b3R5cGUiLCIkaHR0cCIsIl9yb3V0ZXMiLCJwYXRoIiwibmFtZSIsImNvbXBvbmVudCIsInJlZGlyZWN0Iiwicm91dGVyIiwicm91dGVzIiwiZWwiLCJzdG9yZSIsInJlbmRlciIsImgiLCIkbW91bnQiLCJwb2x5ZmlsbCIsInByb2Nlc3MiLCJnbG9iYWwiLCJmYWN0b3J5IiwidGhpcyIsIm9iamVjdE9yRnVuY3Rpb24iLCJ4IiwidHlwZSIsImlzRnVuY3Rpb24iLCJzZXRTY2hlZHVsZXIiLCJzY2hlZHVsZUZuIiwiY3VzdG9tU2NoZWR1bGVyRm4iLCJzZXRBc2FwIiwiYXNhcEZuIiwiYXNhcCIsInVzZU5leHRUaWNrIiwibmV4dFRpY2siLCJmbHVzaCIsInVzZVZlcnR4VGltZXIiLCJ2ZXJ0eE5leHQiLCJ1c2VTZXRUaW1lb3V0IiwidXNlTXV0YXRpb25PYnNlcnZlciIsIml0ZXJhdGlvbnMiLCJvYnNlcnZlciIsIkJyb3dzZXJNdXRhdGlvbk9ic2VydmVyIiwibm9kZSIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJvYnNlcnZlIiwiY2hhcmFjdGVyRGF0YSIsImRhdGEiLCJ1c2VNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwib25tZXNzYWdlIiwicG9ydDIiLCJwb3N0TWVzc2FnZSIsImdsb2JhbFNldFRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaSIsImxlbiIsImNhbGxiYWNrIiwicXVldWUiLCJhcmciLCJ1bmRlZmluZWQiLCJhdHRlbXB0VmVydHgiLCJ2ZXJ0eCIsIkZ1bmN0aW9uIiwicmVxdWlyZSIsInJ1bk9uTG9vcCIsInJ1bk9uQ29udGV4dCIsImUiLCJ0aGVuIiwib25GdWxmaWxsbWVudCIsIm9uUmVqZWN0aW9uIiwicGFyZW50IiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsIm5vb3AiLCJQUk9NSVNFX0lEIiwibWFrZVByb21pc2UiLCJfc3RhdGUiLCJhcmd1bWVudHMiLCJpbnZva2VDYWxsYmFjayIsIl9yZXN1bHQiLCJzdWJzY3JpYmUiLCJyZXNvbHZlJDEiLCJvYmplY3QiLCJDb25zdHJ1Y3RvciIsInByb21pc2UiLCJyZXNvbHZlIiwic2VsZkZ1bGZpbGxtZW50IiwiVHlwZUVycm9yIiwiY2Fubm90UmV0dXJuT3duIiwiZ2V0VGhlbiIsImVycm9yIiwiVFJZX0NBVENIX0VSUk9SIiwidHJ5VGhlbiIsInRoZW4kJDEiLCJ2YWx1ZSIsImZ1bGZpbGxtZW50SGFuZGxlciIsInJlamVjdGlvbkhhbmRsZXIiLCJoYW5kbGVGb3JlaWduVGhlbmFibGUiLCJ0aGVuYWJsZSIsInNlYWxlZCIsImZ1bGZpbGwiLCJyZWFzb24iLCJyZWplY3QiLCJfbGFiZWwiLCJoYW5kbGVPd25UaGVuYWJsZSIsIkZVTEZJTExFRCIsIlJFSkVDVEVEIiwiaGFuZGxlTWF5YmVUaGVuYWJsZSIsIm1heWJlVGhlbmFibGUiLCJwdWJsaXNoUmVqZWN0aW9uIiwiX29uZXJyb3IiLCJwdWJsaXNoIiwiUEVORElORyIsIl9zdWJzY3JpYmVycyIsImxlbmd0aCIsInN1YnNjcmliZXJzIiwic2V0dGxlZCIsImRldGFpbCIsInRyeUNhdGNoIiwiaGFzQ2FsbGJhY2siLCJzdWNjZWVkZWQiLCJmYWlsZWQiLCJpbml0aWFsaXplUHJvbWlzZSIsInJlc29sdmVyIiwibmV4dElkIiwidmFsaWRhdGlvbkVycm9yIiwiRXJyb3IiLCJhbGwiLCJlbnRyaWVzIiwiRW51bWVyYXRvciIsInJhY2UiLCJpc0FycmF5IiwiXyIsInJlamVjdCQxIiwibmVlZHNSZXNvbHZlciIsIm5lZWRzTmV3IiwibG9jYWwiLCJzZWxmIiwiUCIsIlByb21pc2UiLCJwcm9taXNlVG9TdHJpbmciLCJPYmplY3QiLCJ0b1N0cmluZyIsImNhc3QiLCJQcm9taXNlJDEiLCJfaXNBcnJheSIsIkFycmF5Iiwic2NoZWR1bGVGbHVzaCIsImJyb3dzZXJXaW5kb3ciLCJ3aW5kb3ciLCJicm93c2VyR2xvYmFsIiwiTXV0YXRpb25PYnNlcnZlciIsIldlYktpdE11dGF0aW9uT2JzZXJ2ZXIiLCJpc05vZGUiLCJpc1dvcmtlciIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiaW1wb3J0U2NyaXB0cyIsIk1hdGgiLCJyYW5kb20iLCJzdWJzdHJpbmciLCJpbnB1dCIsIl9pbnN0YW5jZUNvbnN0cnVjdG9yIiwiX3JlbWFpbmluZyIsIl9lbnVtZXJhdGUiLCJfZWFjaEVudHJ5IiwiZW50cnkiLCJyZXNvbHZlJCQxIiwiX3RoZW4iLCJfc2V0dGxlZEF0IiwiX3dpbGxTZXR0bGVBdCIsInN0YXRlIiwiZW51bWVyYXRvciIsImNhdGNoIiwiZmluYWxseSIsIl9zZXRTY2hlZHVsZXIiLCJfc2V0QXNhcCIsIl9hc2FwIiwiZGVmYXVsdFNldFRpbW91dCIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwiY29uY2F0IiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwicnVuIiwiSXRlbSIsImFycmF5IiwiYXJncyIsInB1c2giLCJhcHBseSIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsInNldEltbWVkaWF0ZSIsImlzVW5kZWYiLCJ2IiwiaXNEZWYiLCJpc1RydWUiLCJpc0ZhbHNlIiwiaXNQcmltaXRpdmUiLCJpc09iamVjdCIsInRvUmF3VHlwZSIsIl90b1N0cmluZyIsInNsaWNlIiwiaXNQbGFpbk9iamVjdCIsImlzUmVnRXhwIiwiaXNWYWxpZEFycmF5SW5kZXgiLCJ2YWwiLCJuIiwicGFyc2VGbG9hdCIsIlN0cmluZyIsImZsb29yIiwiaXNGaW5pdGUiLCJKU09OIiwic3RyaW5naWZ5IiwidG9OdW1iZXIiLCJpc05hTiIsIm1ha2VNYXAiLCJzdHIiLCJleHBlY3RzTG93ZXJDYXNlIiwibWFwIiwiY3JlYXRlIiwibGlzdCIsInNwbGl0IiwidG9Mb3dlckNhc2UiLCJyZW1vdmUiLCJhcnIiLCJpdGVtIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiaGFzT3duIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJjYWNoZWQiLCJmbiIsImNhY2hlIiwiaGl0IiwicG9seWZpbGxCaW5kIiwiY3R4IiwiYm91bmRGbiIsImEiLCJsIiwiX2xlbmd0aCIsIm5hdGl2ZUJpbmQiLCJiaW5kIiwidG9BcnJheSIsInN0YXJ0IiwicmV0IiwiZXh0ZW5kIiwidG8iLCJfZnJvbSIsInRvT2JqZWN0IiwicmVzIiwiYiIsImdlblN0YXRpY0tleXMiLCJyZWR1Y2UiLCJrZXlzIiwic3RhdGljS2V5cyIsImpvaW4iLCJsb29zZUVxdWFsIiwiaXNPYmplY3RBIiwiaXNPYmplY3RCIiwiaXNBcnJheUEiLCJpc0FycmF5QiIsImV2ZXJ5Iiwia2V5c0EiLCJrZXlzQiIsImxvb3NlSW5kZXhPZiIsImNhbGxlZCIsImlzUmVzZXJ2ZWQiLCJjaGFyQ29kZUF0IiwiZGVmIiwiZW51bWVyYWJsZSIsImRlZmluZVByb3BlcnR5Iiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJwYXJzZVBhdGgiLCJiYWlsUkUiLCJ0ZXN0Iiwic2VnbWVudHMiLCJpc05hdGl2ZSIsIkN0b3IiLCJwdXNoVGFyZ2V0IiwiX3RhcmdldCIsIkRlcCIsInRhcmdldCIsInRhcmdldFN0YWNrIiwicG9wVGFyZ2V0IiwicG9wIiwiY3JlYXRlVGV4dFZOb2RlIiwiVk5vZGUiLCJjbG9uZVZOb2RlIiwidm5vZGUiLCJjbG9uZWQiLCJ0YWciLCJjaGlsZHJlbiIsInRleHQiLCJlbG0iLCJjb250ZXh0IiwiY29tcG9uZW50T3B0aW9ucyIsImFzeW5jRmFjdG9yeSIsIm5zIiwiaXNTdGF0aWMiLCJpc0NvbW1lbnQiLCJmbkNvbnRleHQiLCJmbk9wdGlvbnMiLCJmblNjb3BlSWQiLCJpc0Nsb25lZCIsInRvZ2dsZU9ic2VydmluZyIsInNob3VsZE9ic2VydmUiLCJwcm90b0F1Z21lbnQiLCJzcmMiLCJfX3Byb3RvX18iLCJjb3B5QXVnbWVudCIsImFzUm9vdERhdGEiLCJvYiIsIl9fb2JfXyIsIk9ic2VydmVyIiwiaXNTZXJ2ZXJSZW5kZXJpbmciLCJpc0V4dGVuc2libGUiLCJfaXNWdWUiLCJ2bUNvdW50IiwiZGVmaW5lUmVhY3RpdmUiLCJjdXN0b21TZXR0ZXIiLCJzaGFsbG93IiwiZGVwIiwicHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXR0ZXIiLCJnZXQiLCJzZXR0ZXIiLCJzZXQiLCJjaGlsZE9iIiwiZGVwZW5kIiwiZGVwZW5kQXJyYXkiLCJuZXdWYWwiLCJub3RpZnkiLCJ3YXJuIiwibWF4IiwiZGVsIiwibWVyZ2VEYXRhIiwiZnJvbSIsInRvVmFsIiwiZnJvbVZhbCIsIm1lcmdlRGF0YU9yRm4iLCJwYXJlbnRWYWwiLCJjaGlsZFZhbCIsInZtIiwiaW5zdGFuY2VEYXRhIiwiZGVmYXVsdERhdGEiLCJtZXJnZUhvb2siLCJtZXJnZUFzc2V0cyIsImFzc2VydE9iamVjdFR5cGUiLCJjaGVja0NvbXBvbmVudHMiLCJvcHRpb25zIiwiY29tcG9uZW50cyIsInZhbGlkYXRlQ29tcG9uZW50TmFtZSIsImlzQnVpbHRJblRhZyIsImNvbmZpZyIsImlzUmVzZXJ2ZWRUYWciLCJub3JtYWxpemVQcm9wcyIsInByb3BzIiwiY2FtZWxpemUiLCJub3JtYWxpemVJbmplY3QiLCJpbmplY3QiLCJub3JtYWxpemVkIiwibm9ybWFsaXplRGlyZWN0aXZlcyIsImRpcnMiLCJkaXJlY3RpdmVzIiwidXBkYXRlIiwibWVyZ2VPcHRpb25zIiwibWVyZ2VGaWVsZCIsInN0cmF0Iiwic3RyYXRzIiwiZGVmYXVsdFN0cmF0IiwiZXh0ZW5kc0Zyb20iLCJleHRlbmRzIiwibWl4aW5zIiwicmVzb2x2ZUFzc2V0Iiwid2Fybk1pc3NpbmciLCJhc3NldHMiLCJjYW1lbGl6ZWRJZCIsIlBhc2NhbENhc2VJZCIsImNhcGl0YWxpemUiLCJ2YWxpZGF0ZVByb3AiLCJwcm9wT3B0aW9ucyIsInByb3BzRGF0YSIsInByb3AiLCJhYnNlbnQiLCJib29sZWFuSW5kZXgiLCJnZXRUeXBlSW5kZXgiLCJCb29sZWFuIiwiaHlwaGVuYXRlIiwic3RyaW5nSW5kZXgiLCJnZXRQcm9wRGVmYXVsdFZhbHVlIiwicHJldlNob3VsZE9ic2VydmUiLCJhc3NlcnRQcm9wIiwiJG9wdGlvbnMiLCJfcHJvcHMiLCJnZXRUeXBlIiwicmVxdWlyZWQiLCJ2YWxpZCIsImV4cGVjdGVkVHlwZXMiLCJhc3NlcnRlZFR5cGUiLCJhc3NlcnRUeXBlIiwiZXhwZWN0ZWRUeXBlIiwidmFsaWRhdG9yIiwic2ltcGxlQ2hlY2tSRSIsInQiLCJtYXRjaCIsImlzU2FtZVR5cGUiLCJoYW5kbGVFcnJvciIsImVyciIsImluZm8iLCJjdXIiLCIkcGFyZW50IiwiaG9va3MiLCJlcnJvckNhcHR1cmVkIiwiY2FwdHVyZSIsImdsb2JhbEhhbmRsZUVycm9yIiwiZXJyb3JIYW5kbGVyIiwibG9nRXJyb3IiLCJpbkJyb3dzZXIiLCJpbldlZXgiLCJjb25zb2xlIiwiZmx1c2hDYWxsYmFja3MiLCJwZW5kaW5nIiwiY29waWVzIiwiY2FsbGJhY2tzIiwid2l0aE1hY3JvVGFzayIsIl93aXRoVGFzayIsInVzZU1hY3JvVGFzayIsImNiIiwiX3Jlc29sdmUiLCJtYWNyb1RpbWVyRnVuYyIsIm1pY3JvVGltZXJGdW5jIiwidHJhdmVyc2UiLCJfdHJhdmVyc2UiLCJzZWVuT2JqZWN0cyIsImNsZWFyIiwic2VlbiIsImlzQSIsImlzRnJvemVuIiwiZGVwSWQiLCJoYXMiLCJhZGQiLCJjcmVhdGVGbkludm9rZXIiLCJmbnMiLCJpbnZva2VyIiwiYXJndW1lbnRzJDEiLCJ1cGRhdGVMaXN0ZW5lcnMiLCJvbGRPbiIsInJlbW92ZSQkMSIsIm9sZCIsImV2ZW50Iiwibm9ybWFsaXplRXZlbnQiLCJwYXNzaXZlIiwicGFyYW1zIiwibWVyZ2VWTm9kZUhvb2siLCJob29rS2V5IiwiaG9vayIsIndyYXBwZWRIb29rIiwib2xkSG9vayIsIm1lcmdlZCIsImV4dHJhY3RQcm9wc0Zyb21WTm9kZURhdGEiLCJhdHRycyIsImFsdEtleSIsImtleUluTG93ZXJDYXNlIiwidGlwIiwiZm9ybWF0Q29tcG9uZW50TmFtZSIsImNoZWNrUHJvcCIsImhhc2giLCJwcmVzZXJ2ZSIsInNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuIiwibm9ybWFsaXplQ2hpbGRyZW4iLCJub3JtYWxpemVBcnJheUNoaWxkcmVuIiwiaXNUZXh0Tm9kZSIsIm5lc3RlZEluZGV4IiwibGFzdEluZGV4IiwibGFzdCIsInNoaWZ0IiwiX2lzVkxpc3QiLCJlbnN1cmVDdG9yIiwiY29tcCIsImJhc2UiLCJoYXNTeW1ib2wiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImNyZWF0ZUFzeW5jUGxhY2Vob2xkZXIiLCJjcmVhdGVFbXB0eVZOb2RlIiwiYXN5bmNNZXRhIiwicmVzb2x2ZUFzeW5jQ29tcG9uZW50IiwiYmFzZUN0b3IiLCJlcnJvckNvbXAiLCJyZXNvbHZlZCIsImxvYWRpbmciLCJsb2FkaW5nQ29tcCIsImNvbnRleHRzIiwic3luYyIsImZvcmNlUmVuZGVyIiwiJGZvcmNlVXBkYXRlIiwiZGVsYXkiLCJpc0FzeW5jUGxhY2Vob2xkZXIiLCJnZXRGaXJzdENvbXBvbmVudENoaWxkIiwiaW5pdEV2ZW50cyIsIl9ldmVudHMiLCJfaGFzSG9va0V2ZW50IiwiX3BhcmVudExpc3RlbmVycyIsInVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyIsIiRvbmNlIiwiJG9uIiwicmVtb3ZlJDEiLCIkb2ZmIiwib2xkTGlzdGVuZXJzIiwiZXZlbnRzTWl4aW4iLCJWdWUiLCJob29rUkUiLCJ0aGlzJDEiLCJjYnMiLCJpJDEiLCIkZW1pdCIsImxvd2VyQ2FzZUV2ZW50IiwicmVzb2x2ZVNsb3RzIiwic2xvdHMiLCJzbG90IiwibmFtZSQxIiwiaXNXaGl0ZXNwYWNlIiwicmVzb2x2ZVNjb3BlZFNsb3RzIiwiaW5pdExpZmVjeWNsZSIsImFic3RyYWN0IiwiJGNoaWxkcmVuIiwiJHJvb3QiLCIkcmVmcyIsIl93YXRjaGVyIiwiX2luYWN0aXZlIiwiX2RpcmVjdEluYWN0aXZlIiwiX2lzTW91bnRlZCIsIl9pc0Rlc3Ryb3llZCIsIl9pc0JlaW5nRGVzdHJveWVkIiwibGlmZWN5Y2xlTWl4aW4iLCJfdXBkYXRlIiwiaHlkcmF0aW5nIiwiY2FsbEhvb2siLCJwcmV2RWwiLCIkZWwiLCJwcmV2Vm5vZGUiLCJfdm5vZGUiLCJwcmV2QWN0aXZlSW5zdGFuY2UiLCJhY3RpdmVJbnN0YW5jZSIsIl9fcGF0Y2hfXyIsIl9wYXJlbnRFbG0iLCJfcmVmRWxtIiwiX192dWVfXyIsIiR2bm9kZSIsIiRkZXN0cm95IiwidGVhcmRvd24iLCJfd2F0Y2hlcnMiLCJfZGF0YSIsIm1vdW50Q29tcG9uZW50IiwidGVtcGxhdGUiLCJjaGFyQXQiLCJ1cGRhdGVDb21wb25lbnQiLCJwZXJmb3JtYW5jZSIsIm1hcmsiLCJfbmFtZSIsIl91aWQiLCJzdGFydFRhZyIsImVuZFRhZyIsIl9yZW5kZXIiLCJtZWFzdXJlIiwiV2F0Y2hlciIsInVwZGF0ZUNoaWxkQ29tcG9uZW50IiwicGFyZW50Vm5vZGUiLCJyZW5kZXJDaGlsZHJlbiIsImlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCIsImhhc0NoaWxkcmVuIiwiX3JlbmRlckNoaWxkcmVuIiwic2NvcGVkU2xvdHMiLCIkc2NvcGVkU2xvdHMiLCJlbXB0eU9iamVjdCIsIl9wYXJlbnRWbm9kZSIsIiRhdHRycyIsIiRsaXN0ZW5lcnMiLCJwcm9wS2V5cyIsIl9wcm9wS2V5cyIsIiRzbG90cyIsImlzSW5JbmFjdGl2ZVRyZWUiLCJhY3RpdmF0ZUNoaWxkQ29tcG9uZW50IiwiZGlyZWN0IiwiZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50IiwiaGFuZGxlcnMiLCJqIiwicmVzZXRTY2hlZHVsZXJTdGF0ZSIsImFjdGl2YXRlZENoaWxkcmVuIiwiY2lyY3VsYXIiLCJ3YWl0aW5nIiwiZmx1c2hpbmciLCJmbHVzaFNjaGVkdWxlclF1ZXVlIiwid2F0Y2hlciIsInNvcnQiLCJNQVhfVVBEQVRFX0NPVU5UIiwidXNlciIsImFjdGl2YXRlZFF1ZXVlIiwidXBkYXRlZFF1ZXVlIiwiY2FsbEFjdGl2YXRlZEhvb2tzIiwiY2FsbFVwZGF0ZWRIb29rcyIsImRldnRvb2xzIiwicXVldWVBY3RpdmF0ZWRDb21wb25lbnQiLCJxdWV1ZVdhdGNoZXIiLCJwcm94eSIsInNvdXJjZUtleSIsInNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbiIsImluaXRTdGF0ZSIsIm9wdHMiLCJpbml0UHJvcHMiLCJtZXRob2RzIiwiaW5pdE1ldGhvZHMiLCJpbml0RGF0YSIsImNvbXB1dGVkIiwiaW5pdENvbXB1dGVkIiwid2F0Y2giLCJuYXRpdmVXYXRjaCIsImluaXRXYXRjaCIsInByb3BzT3B0aW9ucyIsImlzUm9vdCIsImxvb3AiLCJoeXBoZW5hdGVkS2V5IiwiaXNSZXNlcnZlZEF0dHJpYnV0ZSIsImlzUmVzZXJ2ZWRBdHRyIiwiZ2V0RGF0YSIsIndhdGNoZXJzIiwiX2NvbXB1dGVkV2F0Y2hlcnMiLCJpc1NTUiIsInVzZXJEZWYiLCJjb21wdXRlZFdhdGNoZXJPcHRpb25zIiwiJGRhdGEiLCJkZWZpbmVDb21wdXRlZCIsInNob3VsZENhY2hlIiwiY3JlYXRlQ29tcHV0ZWRHZXR0ZXIiLCJkaXJ0eSIsImV2YWx1YXRlIiwiaGFuZGxlciIsImNyZWF0ZVdhdGNoZXIiLCJleHBPckZuIiwiJHdhdGNoIiwic3RhdGVNaXhpbiIsImRhdGFEZWYiLCJwcm9wc0RlZiIsIm5ld0RhdGEiLCIkc2V0IiwiJGRlbGV0ZSIsImltbWVkaWF0ZSIsImluaXRQcm92aWRlIiwicHJvdmlkZSIsIl9wcm92aWRlZCIsImluaXRJbmplY3Rpb25zIiwicmVzdWx0IiwicmVzb2x2ZUluamVjdCIsImZvckVhY2giLCJSZWZsZWN0Iiwib3duS2V5cyIsImZpbHRlciIsInByb3ZpZGVLZXkiLCJzb3VyY2UiLCJwcm92aWRlRGVmYXVsdCIsInJlbmRlckxpc3QiLCJyZW5kZXJTbG90IiwiZmFsbGJhY2siLCJiaW5kT2JqZWN0Iiwibm9kZXMiLCJzY29wZWRTbG90Rm4iLCJzbG90Tm9kZXMiLCJfcmVuZGVyZWQiLCIkY3JlYXRlRWxlbWVudCIsInJlc29sdmVGaWx0ZXIiLCJpZGVudGl0eSIsImlzS2V5Tm90TWF0Y2giLCJleHBlY3QiLCJhY3R1YWwiLCJjaGVja0tleUNvZGVzIiwiZXZlbnRLZXlDb2RlIiwiYnVpbHRJbktleUNvZGUiLCJldmVudEtleU5hbWUiLCJidWlsdEluS2V5TmFtZSIsIm1hcHBlZEtleUNvZGUiLCJrZXlDb2RlcyIsImJpbmRPYmplY3RQcm9wcyIsImFzUHJvcCIsImlzU3luYyIsIm11c3RVc2VQcm9wIiwiZG9tUHJvcHMiLCIkZXZlbnQiLCJyZW5kZXJTdGF0aWMiLCJpc0luRm9yIiwiX3N0YXRpY1RyZWVzIiwidHJlZSIsInN0YXRpY1JlbmRlckZucyIsIl9yZW5kZXJQcm94eSIsIm1hcmtTdGF0aWMiLCJtYXJrT25jZSIsImlzT25jZSIsIm1hcmtTdGF0aWNOb2RlIiwiYmluZE9iamVjdExpc3RlbmVycyIsImV4aXN0aW5nIiwib3VycyIsImluc3RhbGxSZW5kZXJIZWxwZXJzIiwiX28iLCJfbiIsIl9zIiwiX2wiLCJfdCIsIl9xIiwiX2kiLCJfbSIsIl9mIiwiX2siLCJfYiIsIl92IiwiX2UiLCJfdSIsIl9nIiwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLCJpbmplY3Rpb25zIiwiY29udGV4dFZtIiwiaXNDb21waWxlZCIsIl9jb21waWxlZCIsIm5lZWROb3JtYWxpemF0aW9uIiwiX3Njb3BlSWQiLCJfYyIsImQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRnVuY3Rpb25hbENvbXBvbmVudCIsIm1lcmdlUHJvcHMiLCJyZW5kZXJDb250ZXh0Iiwic2V0RnVuY3Rpb25hbENvbnRleHRGb3JWTm9kZSIsInZub2RlcyIsImNyZWF0ZUNvbXBvbmVudCIsIl9iYXNlIiwiY2lkIiwicmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyIsIm1vZGVsIiwidHJhbnNmb3JtTW9kZWwiLCJmdW5jdGlvbmFsIiwibmF0aXZlT24iLCJtZXJnZUhvb2tzIiwiY3JlYXRlQ29tcG9uZW50SW5zdGFuY2VGb3JWbm9kZSIsInBhcmVudEVsbSIsInJlZkVsbSIsIl9pc0NvbXBvbmVudCIsImlubGluZVRlbXBsYXRlIiwiaG9va3NUb01lcmdlIiwiZnJvbVBhcmVudCIsImNvbXBvbmVudFZOb2RlSG9va3MiLCJtZXJnZUhvb2skMSIsIm9uZSIsInR3byIsIm5vcm1hbGl6YXRpb25UeXBlIiwiYWx3YXlzTm9ybWFsaXplIiwiQUxXQVlTX05PUk1BTElaRSIsIl9jcmVhdGVFbGVtZW50IiwiaXMiLCJTSU1QTEVfTk9STUFMSVpFIiwiZ2V0VGFnTmFtZXNwYWNlIiwicGFyc2VQbGF0Zm9ybVRhZ05hbWUiLCJhcHBseU5TIiwicmVnaXN0ZXJEZWVwQmluZGluZ3MiLCJmb3JjZSIsInN0eWxlIiwiY2xhc3MiLCJpbml0UmVuZGVyIiwicGFyZW50RGF0YSIsInJlbmRlck1peGluIiwiJG5leHRUaWNrIiwicmVmIiwicmVuZGVyRXJyb3IiLCJpbml0TWl4aW4iLCJfaW5pdCIsInVpZCQzIiwiaW5pdEludGVybmFsQ29tcG9uZW50IiwiaW5pdFByb3h5IiwiX3NlbGYiLCJ2bm9kZUNvbXBvbmVudE9wdGlvbnMiLCJfY29tcG9uZW50VGFnIiwic3VwZXIiLCJzdXBlck9wdGlvbnMiLCJjYWNoZWRTdXBlck9wdGlvbnMiLCJtb2RpZmllZE9wdGlvbnMiLCJyZXNvbHZlTW9kaWZpZWRPcHRpb25zIiwiZXh0ZW5kT3B0aW9ucyIsIm1vZGlmaWVkIiwibGF0ZXN0IiwiZXh0ZW5kZWQiLCJzZWFsZWRPcHRpb25zIiwiZGVkdXBlIiwiaW5pdFVzZSIsInBsdWdpbiIsImluc3RhbGxlZFBsdWdpbnMiLCJfaW5zdGFsbGVkUGx1Z2lucyIsInVuc2hpZnQiLCJpbnN0YWxsIiwiaW5pdE1peGluJDEiLCJtaXhpbiIsImluaXRFeHRlbmQiLCJTdXBlciIsIlN1cGVySWQiLCJjYWNoZWRDdG9ycyIsIl9DdG9yIiwiU3ViIiwiaW5pdFByb3BzJDEiLCJpbml0Q29tcHV0ZWQkMSIsIkFTU0VUX1RZUEVTIiwiQ29tcCIsImluaXRBc3NldFJlZ2lzdGVycyIsImRlZmluaXRpb24iLCJnZXRDb21wb25lbnROYW1lIiwibWF0Y2hlcyIsInBhdHRlcm4iLCJwcnVuZUNhY2hlIiwia2VlcEFsaXZlSW5zdGFuY2UiLCJjYWNoZWROb2RlIiwicHJ1bmVDYWNoZUVudHJ5IiwiY3VycmVudCIsImNhY2hlZCQkMSIsImNvbXBvbmVudEluc3RhbmNlIiwiaW5pdEdsb2JhbEFQSSIsImNvbmZpZ0RlZiIsInV0aWwiLCJkZWxldGUiLCJidWlsdEluQ29tcG9uZW50cyIsImdlbkNsYXNzRm9yVm5vZGUiLCJwYXJlbnROb2RlIiwiY2hpbGROb2RlIiwibWVyZ2VDbGFzc0RhdGEiLCJyZW5kZXJDbGFzcyIsInN0YXRpY0NsYXNzIiwiZHluYW1pY0NsYXNzIiwic3RyaW5naWZ5Q2xhc3MiLCJzdHJpbmdpZnlBcnJheSIsInN0cmluZ2lmeU9iamVjdCIsInN0cmluZ2lmaWVkIiwiaXNTVkciLCJpc1Vua25vd25FbGVtZW50IiwidW5rbm93bkVsZW1lbnRDYWNoZSIsIkhUTUxVbmtub3duRWxlbWVudCIsIkhUTUxFbGVtZW50IiwicXVlcnkiLCJzZWxlY3RlZCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50JDEiLCJ0YWdOYW1lIiwibXVsdGlwbGUiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVFbGVtZW50TlMiLCJuYW1lc3BhY2UiLCJuYW1lc3BhY2VNYXAiLCJjcmVhdGVDb21tZW50IiwiaW5zZXJ0QmVmb3JlIiwibmV3Tm9kZSIsInJlZmVyZW5jZU5vZGUiLCJyZW1vdmVDaGlsZCIsImFwcGVuZENoaWxkIiwibmV4dFNpYmxpbmciLCJzZXRUZXh0Q29udGVudCIsInRleHRDb250ZW50Iiwic2V0U3R5bGVTY29wZSIsInNjb3BlSWQiLCJyZWdpc3RlclJlZiIsImlzUmVtb3ZhbCIsInJlZnMiLCJyZWZJbkZvciIsInNhbWVWbm9kZSIsInNhbWVJbnB1dFR5cGUiLCJ0eXBlQSIsInR5cGVCIiwiaXNUZXh0SW5wdXRUeXBlIiwiY3JlYXRlS2V5VG9PbGRJZHgiLCJiZWdpbklkeCIsImVuZElkeCIsImNyZWF0ZVBhdGNoRnVuY3Rpb24iLCJiYWNrZW5kIiwiZW1wdHlOb2RlQXQiLCJub2RlT3BzIiwiY3JlYXRlUm1DYiIsImNoaWxkRWxtIiwicmVtb3ZlTm9kZSIsImlzVW5rbm93bkVsZW1lbnQkJDEiLCJpblZQcmUiLCJpZ25vcmVkRWxlbWVudHMiLCJzb21lIiwiaWdub3JlIiwiY3JlYXRlRWxtIiwiaW5zZXJ0ZWRWbm9kZVF1ZXVlIiwibmVzdGVkIiwib3duZXJBcnJheSIsImlzUm9vdEluc2VydCIsInByZSIsImNyZWF0aW5nRWxtSW5WUHJlIiwic2V0U2NvcGUiLCJjcmVhdGVDaGlsZHJlbiIsImludm9rZUNyZWF0ZUhvb2tzIiwiaW5zZXJ0IiwiaXNSZWFjdGl2YXRlZCIsImtlZXBBbGl2ZSIsImluaXQiLCJpbml0Q29tcG9uZW50IiwicmVhY3RpdmF0ZUNvbXBvbmVudCIsInBlbmRpbmdJbnNlcnQiLCJpc1BhdGNoYWJsZSIsImlubmVyTm9kZSIsInRyYW5zaXRpb24iLCJhY3RpdmF0ZSIsImVtcHR5Tm9kZSIsInJlZiQkMSIsImNoZWNrRHVwbGljYXRlS2V5cyIsImFuY2VzdG9yIiwiYWRkVm5vZGVzIiwic3RhcnRJZHgiLCJpbnZva2VEZXN0cm95SG9vayIsImRlc3Ryb3kiLCJyZW1vdmVWbm9kZXMiLCJjaCIsInJlbW92ZUFuZEludm9rZVJlbW92ZUhvb2siLCJybSIsInVwZGF0ZUNoaWxkcmVuIiwib2xkQ2giLCJuZXdDaCIsInJlbW92ZU9ubHkiLCJvbGRLZXlUb0lkeCIsImlkeEluT2xkIiwidm5vZGVUb01vdmUiLCJvbGRTdGFydElkeCIsIm5ld1N0YXJ0SWR4Iiwib2xkRW5kSWR4Iiwib2xkU3RhcnRWbm9kZSIsIm9sZEVuZFZub2RlIiwibmV3RW5kSWR4IiwibmV3U3RhcnRWbm9kZSIsIm5ld0VuZFZub2RlIiwiY2FuTW92ZSIsInBhdGNoVm5vZGUiLCJmaW5kSWR4SW5PbGQiLCJzZWVuS2V5cyIsImVuZCIsIm9sZFZub2RlIiwiaHlkcmF0ZSIsInByZXBhdGNoIiwicG9zdHBhdGNoIiwiaW52b2tlSW5zZXJ0SG9vayIsImluaXRpYWwiLCJhc3NlcnROb2RlTWF0Y2giLCJoYXNDaGlsZE5vZGVzIiwiaW5uZXJIVE1MIiwiaHlkcmF0aW9uQmFpbGVkIiwiY2hpbGRyZW5NYXRjaCIsImZpcnN0Q2hpbGQiLCJjaGlsZE5vZGVzIiwiZnVsbEludm9rZSIsImlzUmVuZGVyZWRNb2R1bGUiLCJub2RlVHlwZSIsImlzSW5pdGlhbFBhdGNoIiwiaXNSZWFsRWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsIlNTUl9BVFRSIiwicmVtb3ZlQXR0cmlidXRlIiwib2xkRWxtIiwicGFyZW50RWxtJDEiLCJfbGVhdmVDYiIsInBhdGNoYWJsZSIsImkkMiIsInVwZGF0ZURpcmVjdGl2ZXMiLCJvbGREaXIiLCJpc0NyZWF0ZSIsImlzRGVzdHJveSIsIm9sZERpcnMiLCJub3JtYWxpemVEaXJlY3RpdmVzJDEiLCJuZXdEaXJzIiwiZGlyc1dpdGhJbnNlcnQiLCJkaXJzV2l0aFBvc3RwYXRjaCIsIm9sZFZhbHVlIiwiY2FsbEhvb2skMSIsImNvbXBvbmVudFVwZGF0ZWQiLCJpbnNlcnRlZCIsImNhbGxJbnNlcnQiLCJtb2RpZmllcnMiLCJlbXB0eU1vZGlmaWVycyIsImdldFJhd0Rpck5hbWUiLCJyYXdOYW1lIiwidXBkYXRlQXR0cnMiLCJpbmhlcml0QXR0cnMiLCJvbGRBdHRycyIsInNldEF0dHIiLCJpc0lFIiwiaXNFZGdlIiwiaXNYbGluayIsInJlbW92ZUF0dHJpYnV0ZU5TIiwieGxpbmtOUyIsImdldFhsaW5rUHJvcCIsImlzRW51bWVyYXRlZEF0dHIiLCJiYXNlU2V0QXR0ciIsImlzQm9vbGVhbkF0dHIiLCJpc0ZhbHN5QXR0clZhbHVlIiwic2V0QXR0cmlidXRlTlMiLCJpc0lFOSIsIl9faWVwaCIsImJsb2NrZXIiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVwZGF0ZUNsYXNzIiwib2xkRGF0YSIsImNscyIsInRyYW5zaXRpb25DbGFzcyIsIl90cmFuc2l0aW9uQ2xhc3NlcyIsIl9wcmV2Q2xhc3MiLCJwYXJzZUZpbHRlcnMiLCJleHAiLCJwdXNoRmlsdGVyIiwiZmlsdGVycyIsImxhc3RGaWx0ZXJJbmRleCIsInRyaW0iLCJwcmV2IiwiZXhwcmVzc2lvbiIsImluU2luZ2xlIiwiaW5Eb3VibGUiLCJpblRlbXBsYXRlU3RyaW5nIiwiaW5SZWdleCIsImN1cmx5Iiwic3F1YXJlIiwicGFyZW4iLCJ2YWxpZERpdmlzaW9uQ2hhclJFIiwid3JhcEZpbHRlciIsImJhc2VXYXJuIiwibXNnIiwicGx1Y2tNb2R1bGVGdW5jdGlvbiIsImFkZFByb3AiLCJwbGFpbiIsImFkZEF0dHIiLCJhZGRSYXdBdHRyIiwiYXR0cnNNYXAiLCJhdHRyc0xpc3QiLCJhZGREaXJlY3RpdmUiLCJhZGRIYW5kbGVyIiwiaW1wb3J0YW50IiwicHJldmVudCIsInJpZ2h0IiwibWlkZGxlIiwiZXZlbnRzIiwibmF0aXZlIiwibmF0aXZlRXZlbnRzIiwibmV3SGFuZGxlciIsImdldEJpbmRpbmdBdHRyIiwiZ2V0U3RhdGljIiwiZHluYW1pY1ZhbHVlIiwiZ2V0QW5kUmVtb3ZlQXR0ciIsInN0YXRpY1ZhbHVlIiwicmVtb3ZlRnJvbU1hcCIsImdlbkNvbXBvbmVudE1vZGVsIiwibnVtYmVyIiwiYmFzZVZhbHVlRXhwcmVzc2lvbiIsInZhbHVlRXhwcmVzc2lvbiIsImFzc2lnbm1lbnQiLCJnZW5Bc3NpZ25tZW50Q29kZSIsInBhcnNlTW9kZWwiLCJsYXN0SW5kZXhPZiIsImluZGV4JDEiLCJleHByZXNzaW9uUG9zIiwiZXhwcmVzc2lvbkVuZFBvcyIsImVvZiIsImNociIsIm5leHQiLCJpc1N0cmluZ1N0YXJ0IiwicGFyc2VTdHJpbmciLCJwYXJzZUJyYWNrZXQiLCJpbkJyYWNrZXQiLCJzdHJpbmdRdW90ZSIsIl93YXJuIiwid2FybiQxIiwiZ2VuU2VsZWN0IiwiZ2VuQ2hlY2tib3hNb2RlbCIsImdlblJhZGlvTW9kZWwiLCJnZW5EZWZhdWx0TW9kZWwiLCJ2YWx1ZUJpbmRpbmciLCJ0cnVlVmFsdWVCaW5kaW5nIiwiZmFsc2VWYWx1ZUJpbmRpbmciLCJzZWxlY3RlZFZhbCIsImNvZGUiLCJ2YWx1ZSQxIiwidHlwZUJpbmRpbmciLCJsYXp5IiwibmVlZENvbXBvc2l0aW9uR3VhcmQiLCJSQU5HRV9UT0tFTiIsIm5vcm1hbGl6ZUV2ZW50cyIsIkNIRUNLQk9YX1JBRElPX1RPS0VOIiwiY2hhbmdlIiwiY3JlYXRlT25jZUhhbmRsZXIiLCJ0YXJnZXQkMSIsIm9uY2VIYW5kbGVyIiwicmVtb3ZlJDIiLCJhZGQkMSIsIm9uY2UkJDEiLCJzdXBwb3J0c1Bhc3NpdmUiLCJ1cGRhdGVET01MaXN0ZW5lcnMiLCJ1cGRhdGVET01Qcm9wcyIsIm9sZFByb3BzIiwiX3ZhbHVlIiwic3RyQ3VyIiwic2hvdWxkVXBkYXRlVmFsdWUiLCJjaGVja1ZhbCIsImNvbXBvc2luZyIsImlzTm90SW5Gb2N1c0FuZERpcnR5IiwiaXNEaXJ0eVdpdGhNb2RpZmllcnMiLCJub3RJbkZvY3VzIiwiYWN0aXZlRWxlbWVudCIsIl92TW9kaWZpZXJzIiwibm9ybWFsaXplU3R5bGVEYXRhIiwibm9ybWFsaXplU3R5bGVCaW5kaW5nIiwic3RhdGljU3R5bGUiLCJiaW5kaW5nU3R5bGUiLCJwYXJzZVN0eWxlVGV4dCIsImdldFN0eWxlIiwiY2hlY2tDaGlsZCIsInN0eWxlRGF0YSIsInVwZGF0ZVN0eWxlIiwib2xkU3RhdGljU3R5bGUiLCJvbGRTdHlsZUJpbmRpbmciLCJub3JtYWxpemVkU3R5bGUiLCJvbGRTdHlsZSIsIm5ld1N0eWxlIiwic2V0UHJvcCIsImFkZENsYXNzIiwiY2xhc3NMaXN0IiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQ2xhc3MiLCJ0YXIiLCJyZXBsYWNlIiwicmVzb2x2ZVRyYW5zaXRpb24iLCJjc3MiLCJhdXRvQ3NzVHJhbnNpdGlvbiIsIm5leHRGcmFtZSIsInJhZiIsImFkZFRyYW5zaXRpb25DbGFzcyIsInRyYW5zaXRpb25DbGFzc2VzIiwicmVtb3ZlVHJhbnNpdGlvbkNsYXNzIiwid2hlblRyYW5zaXRpb25FbmRzIiwiZ2V0VHJhbnNpdGlvbkluZm8iLCJwcm9wQ291bnQiLCJUUkFOU0lUSU9OIiwidHJhbnNpdGlvbkVuZEV2ZW50IiwiYW5pbWF0aW9uRW5kRXZlbnQiLCJlbmRlZCIsIm9uRW5kIiwic3R5bGVzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInRyYW5zaXRpb25EZWxheXMiLCJ0cmFuc2l0aW9uUHJvcCIsInRyYW5zaXRpb25EdXJhdGlvbnMiLCJ0cmFuc2l0aW9uVGltZW91dCIsImdldFRpbWVvdXQiLCJhbmltYXRpb25EZWxheXMiLCJhbmltYXRpb25Qcm9wIiwiYW5pbWF0aW9uRHVyYXRpb25zIiwiYW5pbWF0aW9uVGltZW91dCIsIkFOSU1BVElPTiIsImhhc1RyYW5zZm9ybSIsInRyYW5zZm9ybVJFIiwiZGVsYXlzIiwiZHVyYXRpb25zIiwidG9NcyIsInMiLCJOdW1iZXIiLCJlbnRlciIsInRvZ2dsZURpc3BsYXkiLCJjYW5jZWxsZWQiLCJfZW50ZXJDYiIsImVudGVyQ2xhc3MiLCJlbnRlclRvQ2xhc3MiLCJlbnRlckFjdGl2ZUNsYXNzIiwiYXBwZWFyQ2xhc3MiLCJhcHBlYXJUb0NsYXNzIiwiYXBwZWFyQWN0aXZlQ2xhc3MiLCJiZWZvcmVFbnRlciIsImFmdGVyRW50ZXIiLCJlbnRlckNhbmNlbGxlZCIsImJlZm9yZUFwcGVhciIsImFwcGVhciIsImFmdGVyQXBwZWFyIiwiYXBwZWFyQ2FuY2VsbGVkIiwiZHVyYXRpb24iLCJ0cmFuc2l0aW9uTm9kZSIsImlzQXBwZWFyIiwic3RhcnRDbGFzcyIsImFjdGl2ZUNsYXNzIiwidG9DbGFzcyIsImJlZm9yZUVudGVySG9vayIsImVudGVySG9vayIsImFmdGVyRW50ZXJIb29rIiwiZW50ZXJDYW5jZWxsZWRIb29rIiwiZXhwbGljaXRFbnRlckR1cmF0aW9uIiwiY2hlY2tEdXJhdGlvbiIsImV4cGVjdHNDU1MiLCJ1c2VyV2FudHNDb250cm9sIiwiZ2V0SG9va0FyZ3VtZW50c0xlbmd0aCIsInNob3ciLCJwZW5kaW5nTm9kZSIsIl9wZW5kaW5nIiwiaXNWYWxpZER1cmF0aW9uIiwibGVhdmUiLCJwZXJmb3JtTGVhdmUiLCJiZWZvcmVMZWF2ZSIsImxlYXZlQ2xhc3MiLCJsZWF2ZUFjdGl2ZUNsYXNzIiwibGVhdmVUb0NsYXNzIiwiZXhwbGljaXRMZWF2ZUR1cmF0aW9uIiwiYWZ0ZXJMZWF2ZSIsImxlYXZlQ2FuY2VsbGVkIiwiZGVsYXlMZWF2ZSIsImludm9rZXJGbnMiLCJfZW50ZXIiLCJzZXRTZWxlY3RlZCIsImFjdHVhbGx5U2V0U2VsZWN0ZWQiLCJpc011bHRpcGxlIiwib3B0aW9uIiwiZ2V0VmFsdWUiLCJzZWxlY3RlZEluZGV4IiwiaGFzTm9NYXRjaGluZ09wdGlvbiIsIm8iLCJvbkNvbXBvc2l0aW9uU3RhcnQiLCJvbkNvbXBvc2l0aW9uRW5kIiwidHJpZ2dlciIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImxvY2F0ZU5vZGUiLCJnZXRSZWFsQ2hpbGQiLCJjb21wT3B0aW9ucyIsImV4dHJhY3RUcmFuc2l0aW9uRGF0YSIsImtleSQxIiwicGxhY2Vob2xkZXIiLCJyYXdDaGlsZCIsImhhc1BhcmVudFRyYW5zaXRpb24iLCJpc1NhbWVDaGlsZCIsIm9sZENoaWxkIiwiY2FsbFBlbmRpbmdDYnMiLCJfbW92ZUNiIiwicmVjb3JkUG9zaXRpb24iLCJuZXdQb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhcHBseVRyYW5zbGF0aW9uIiwib2xkUG9zIiwicG9zIiwiZHgiLCJsZWZ0IiwiZHkiLCJ0b3AiLCJtb3ZlZCIsInRyYW5zZm9ybSIsIldlYmtpdFRyYW5zZm9ybSIsInRyYW5zaXRpb25EdXJhdGlvbiIsInBhcnNlVGV4dCIsImRlbGltaXRlcnMiLCJ0YWdSRSIsImJ1aWxkUmVnZXgiLCJkZWZhdWx0VGFnUkUiLCJ0b2tlblZhbHVlIiwidG9rZW5zIiwicmF3VG9rZW5zIiwiZXhlYyIsIkBiaW5kaW5nIiwidHJhbnNmb3JtTm9kZSIsImNsYXNzQmluZGluZyIsImdlbkRhdGEiLCJ0cmFuc2Zvcm1Ob2RlJDEiLCJzdHlsZUJpbmRpbmciLCJnZW5EYXRhJDEiLCJkZWNvZGVBdHRyIiwic2hvdWxkRGVjb2RlTmV3bGluZXMiLCJyZSIsImVuY29kZWRBdHRyV2l0aE5ld0xpbmVzIiwiZW5jb2RlZEF0dHIiLCJkZWNvZGluZ01hcCIsInBhcnNlSFRNTCIsImh0bWwiLCJhZHZhbmNlIiwicGFyc2VTdGFydFRhZyIsInN0YXJ0VGFnT3BlbiIsImF0dHIiLCJzdGFydFRhZ0Nsb3NlIiwiYXR0cmlidXRlIiwidW5hcnlTbGFzaCIsImhhbmRsZVN0YXJ0VGFnIiwiZXhwZWN0SFRNTCIsImxhc3RUYWciLCJpc05vblBocmFzaW5nVGFnIiwicGFyc2VFbmRUYWciLCJjYW5CZUxlZnRPcGVuVGFnJCQxIiwidW5hcnkiLCJpc1VuYXJ5VGFnJCQxIiwiSVNfUkVHRVhfQ0FQVFVSSU5HX0JST0tFTiIsInNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiIsInN0YWNrIiwibG93ZXJDYXNlZFRhZyIsImxvd2VyQ2FzZWRUYWdOYW1lIiwiaXNVbmFyeVRhZyIsIm5vIiwiY2FuQmVMZWZ0T3BlblRhZyIsImlzUGxhaW5UZXh0RWxlbWVudCIsImVuZFRhZ0xlbmd0aCIsInN0YWNrZWRUYWciLCJyZVN0YWNrZWRUYWciLCJyZUNhY2hlIiwiUmVnRXhwIiwicmVzdCQxIiwic2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lIiwiY2hhcnMiLCJ0ZXh0RW5kIiwiY29tbWVudCIsImNvbW1lbnRFbmQiLCJzaG91bGRLZWVwQ29tbWVudCIsImNvbmRpdGlvbmFsQ29tbWVudCIsImNvbmRpdGlvbmFsRW5kIiwiZG9jdHlwZU1hdGNoIiwiZG9jdHlwZSIsImVuZFRhZ01hdGNoIiwiY3VySW5kZXgiLCJzdGFydFRhZ01hdGNoIiwicmVzdCIsImNyZWF0ZUFTVEVsZW1lbnQiLCJtYWtlQXR0cnNNYXAiLCJwYXJzZSIsIndhcm5PbmNlIiwid2FybmVkIiwid2FybiQyIiwiY2xvc2VFbGVtZW50IiwiZWxlbWVudCIsInBsYXRmb3JtSXNQcmVUYWciLCJpblByZSIsInBvc3RUcmFuc2Zvcm1zIiwiaXNQcmVUYWciLCJwbGF0Zm9ybU11c3RVc2VQcm9wIiwicGxhdGZvcm1HZXRUYWdOYW1lc3BhY2UiLCJ0cmFuc2Zvcm1zIiwicHJlVHJhbnNmb3JtcyIsInJvb3QiLCJjdXJyZW50UGFyZW50IiwicHJlc2VydmVXaGl0ZXNwYWNlIiwiY29tbWVudHMiLCJjaGVja1Jvb3RDb25zdHJhaW50cyIsImd1YXJkSUVTVkdCdWciLCJpc0ZvcmJpZGRlblRhZyIsImZvcmJpZGRlbiIsInByb2Nlc3NQcmUiLCJwcm9jZXNzUmF3QXR0cnMiLCJwcm9jZXNzZWQiLCJwcm9jZXNzRm9yIiwicHJvY2Vzc0lmIiwicHJvY2Vzc09uY2UiLCJwcm9jZXNzRWxlbWVudCIsImlmIiwiZWxzZWlmIiwiZWxzZSIsImFkZElmQ29uZGl0aW9uIiwiYmxvY2siLCJwcm9jZXNzSWZDb25kaXRpb25zIiwic2xvdFNjb3BlIiwic2xvdFRhcmdldCIsImxhc3ROb2RlIiwiaXNUZXh0VGFnIiwiZGVjb2RlSFRNTENhY2hlZCIsInByb2Nlc3NLZXkiLCJwcm9jZXNzUmVmIiwicHJvY2Vzc1Nsb3QiLCJwcm9jZXNzQ29tcG9uZW50IiwicHJvY2Vzc0F0dHJzIiwiY2hlY2tJbkZvciIsInBhcnNlRm9yIiwiaW5NYXRjaCIsImZvckFsaWFzUkUiLCJmb3IiLCJhbGlhcyIsInN0cmlwUGFyZW5zUkUiLCJpdGVyYXRvck1hdGNoIiwiZm9ySXRlcmF0b3JSRSIsIml0ZXJhdG9yMSIsIml0ZXJhdG9yMiIsImZpbmRQcmV2RWxlbWVudCIsImNvbmRpdGlvbiIsImlmQ29uZGl0aW9ucyIsInNsb3ROYW1lIiwiaXNQcm9wIiwiZGlyUkUiLCJoYXNCaW5kaW5ncyIsInBhcnNlTW9kaWZpZXJzIiwibW9kaWZpZXJSRSIsImJpbmRSRSIsImNhbWVsIiwib25SRSIsImFyZ01hdGNoIiwiYXJnUkUiLCJjaGVja0ZvckFsaWFzTW9kZWwiLCJpZU5TQnVnIiwiaWVOU1ByZWZpeCIsIl9lbCIsInByZVRyYW5zZm9ybU5vZGUiLCJpZkNvbmRpdGlvbiIsImlmQ29uZGl0aW9uRXh0cmEiLCJoYXNFbHNlIiwiZWxzZUlmQ29uZGl0aW9uIiwiYnJhbmNoMCIsImNsb25lQVNURWxlbWVudCIsImJyYW5jaDEiLCJicmFuY2gyIiwib3B0aW1pemUiLCJpc1N0YXRpY0tleSIsImdlblN0YXRpY0tleXNDYWNoZWQiLCJpc1BsYXRmb3JtUmVzZXJ2ZWRUYWciLCJtYXJrU3RhdGljJDEiLCJtYXJrU3RhdGljUm9vdHMiLCJnZW5TdGF0aWNLZXlzJDEiLCJzdGF0aWMiLCJsJDEiLCJzdGF0aWNJbkZvciIsInN0YXRpY1Jvb3QiLCJpc0RpcmVjdENoaWxkT2ZUZW1wbGF0ZUZvciIsImdlbkhhbmRsZXJzIiwiZ2VuSGFuZGxlciIsImlzTWV0aG9kUGF0aCIsInNpbXBsZVBhdGhSRSIsImlzRnVuY3Rpb25FeHByZXNzaW9uIiwiZm5FeHBSRSIsImdlbk1vZGlmaWVyQ29kZSIsIm1vZGlmaWVyQ29kZSIsImdlbkd1YXJkIiwia2V5TW9kaWZpZXIiLCJnZW5LZXlGaWx0ZXIiLCJoYW5kbGVyQ29kZSIsImdlbkZpbHRlckNvZGUiLCJrZXlWYWwiLCJwYXJzZUludCIsImtleUNvZGUiLCJrZXlOYW1lIiwia2V5TmFtZXMiLCJ3cmFwTGlzdGVuZXJzIiwiYmluZCQxIiwid3JhcERhdGEiLCJnZW5lcmF0ZSIsImFzdCIsIkNvZGVnZW5TdGF0ZSIsImdlbkVsZW1lbnQiLCJzdGF0aWNQcm9jZXNzZWQiLCJnZW5TdGF0aWMiLCJvbmNlUHJvY2Vzc2VkIiwiZ2VuT25jZSIsImZvclByb2Nlc3NlZCIsImdlbkZvciIsImlmUHJvY2Vzc2VkIiwiZ2VuSWYiLCJnZW5TbG90IiwiZ2VuQ29tcG9uZW50IiwiZ2VuRGF0YSQyIiwiZ2VuQ2hpbGRyZW4iLCJvbmNlSWQiLCJhbHRHZW4iLCJhbHRFbXB0eSIsImdlbklmQ29uZGl0aW9ucyIsImNvbmRpdGlvbnMiLCJnZW5UZXJuYXJ5RXhwIiwiYWx0SGVscGVyIiwibWF5YmVDb21wb25lbnQiLCJnZW5EaXJlY3RpdmVzIiwiZGF0YUdlbkZucyIsImdlblByb3BzIiwiZ2VuU2NvcGVkU2xvdHMiLCJnZW5JbmxpbmVUZW1wbGF0ZSIsIm5lZWRSdW50aW1lIiwiaGFzUnVudGltZSIsImdlbiIsImlubGluZVJlbmRlckZucyIsImdlblNjb3BlZFNsb3QiLCJnZW5Gb3JTY29wZWRTbG90IiwiY2hlY2tTa2lwIiwiYWx0R2VuRWxlbWVudCIsImFsdEdlbk5vZGUiLCJlbCQxIiwiZ2V0Tm9ybWFsaXphdGlvblR5cGUiLCJnZW5Ob2RlIiwibmVlZHNOb3JtYWxpemF0aW9uIiwiZ2VuQ29tbWVudCIsImdlblRleHQiLCJ0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMiLCJiaW5kJCQxIiwiY29tcG9uZW50TmFtZSIsImRldGVjdEVycm9ycyIsImVycm9ycyIsImNoZWNrTm9kZSIsImNoZWNrRm9yIiwiY2hlY2tFdmVudCIsImNoZWNrRXhwcmVzc2lvbiIsInN0aXBwZWQiLCJzdHJpcFN0cmluZ1JFIiwia2V5d29yZE1hdGNoIiwidW5hcnlPcGVyYXRvcnNSRSIsImNoZWNrSWRlbnRpZmllciIsImlkZW50IiwicHJvaGliaXRlZEtleXdvcmRSRSIsImNyZWF0ZUZ1bmN0aW9uIiwiY3JlYXRlQ29tcGlsZVRvRnVuY3Rpb25GbiIsImNvbXBpbGUiLCJ3YXJuJCQxIiwiY29tcGlsZWQiLCJ0aXBzIiwiZm5HZW5FcnJvcnMiLCJjcmVhdGVDb21waWxlckNyZWF0b3IiLCJiYXNlQ29tcGlsZSIsImJhc2VPcHRpb25zIiwiZmluYWxPcHRpb25zIiwiY29tcGlsZVRvRnVuY3Rpb25zIiwiZ2V0U2hvdWxkRGVjb2RlIiwiaHJlZiIsImRpdiIsImdldE91dGVySFRNTCIsIm91dGVySFRNTCIsImNvbnRhaW5lciIsImNsb25lTm9kZSIsImZyZWV6ZSIsImNhbWVsaXplUkUiLCJ0b1VwcGVyQ2FzZSIsImh5cGhlbmF0ZVJFIiwiTElGRUNZQ0xFX0hPT0tTIiwib3B0aW9uTWVyZ2VTdHJhdGVnaWVzIiwic2lsZW50IiwicHJvZHVjdGlvblRpcCIsIndhcm5IYW5kbGVyIiwiX2xpZmVjeWNsZUhvb2tzIiwiaGFzUHJvdG8iLCJXWEVudmlyb25tZW50IiwicGxhdGZvcm0iLCJ3ZWV4UGxhdGZvcm0iLCJVQSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlzSU9TIiwiaXNDaHJvbWUiLCJfaXNTZXJ2ZXIiLCJfU2V0IiwiVlVFX0VOViIsIl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18iLCJTZXQiLCJnZW5lcmF0ZUNvbXBvbmVudFRyYWNlIiwiaGFzQ29uc29sZSIsImNsYXNzaWZ5UkUiLCJjbGFzc2lmeSIsInRyYWNlIiwiaW5jbHVkZUZpbGUiLCJmaWxlIiwiX19maWxlIiwicmVwZWF0IiwiY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlIiwidWlkIiwic3VicyIsImFkZFN1YiIsInN1YiIsInJlbW92ZVN1YiIsImFkZERlcCIsInJhdyIsInByb3RvdHlwZUFjY2Vzc29ycyIsImRlZmluZVByb3BlcnRpZXMiLCJhcnJheVByb3RvIiwiYXJyYXlNZXRob2RzIiwibWV0aG9kc1RvUGF0Y2giLCJtZXRob2QiLCJvcmlnaW5hbCIsIm9ic2VydmVBcnJheSIsImFycmF5S2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJhdWdtZW50Iiwid2FsayIsIml0ZW1zIiwicG9ydCIsInBlcmYiLCJjbGVhck1hcmtzIiwiY2xlYXJNZWFzdXJlcyIsImFsbG93ZWRHbG9iYWxzIiwid2Fybk5vblByZXNlbnQiLCJoYXNQcm94eSIsIlByb3h5IiwiaXNCdWlsdEluTW9kaWZpZXIiLCJoYXNIYW5kbGVyIiwiaXNBbGxvd2VkIiwiZ2V0SGFuZGxlciIsIl93aXRoU3RyaXBwZWQiLCJ1aWQkMSIsImlzUmVuZGVyV2F0Y2hlciIsImRlZXAiLCJhY3RpdmUiLCJkZXBzIiwibmV3RGVwcyIsImRlcElkcyIsIm5ld0RlcElkcyIsImNsZWFudXBEZXBzIiwidG1wIiwibW91bnRlZE5vZGUiLCJwYXR0ZXJuVHlwZXMiLCJLZWVwQWxpdmUiLCJpbmNsdWRlIiwiZXhjbHVkZSIsImNyZWF0ZWQiLCJkZXN0cm95ZWQiLCJyZWYkMSIsInNzckNvbnRleHQiLCJlbXB0eVN0eWxlIiwiYWNjZXB0VmFsdWUiLCJzdmciLCJtYXRoIiwiaXNIVE1MVGFnIiwiYmFzZU1vZHVsZXMiLCJrbGFzcyIsImNzc1RleHQiLCJsaXN0RGVsaW1pdGVyIiwicHJvcGVydHlEZWxpbWl0ZXIiLCJjc3NWYXJSRSIsImltcG9ydGFudFJFIiwic2V0UHJvcGVydHkiLCJub3JtYWxpemVkTmFtZSIsIm5vcm1hbGl6ZSIsInZlbmRvck5hbWVzIiwiY2FwTmFtZSIsImhhc1RyYW5zaXRpb24iLCJvbnRyYW5zaXRpb25lbmQiLCJvbndlYmtpdHRyYW5zaXRpb25lbmQiLCJvbmFuaW1hdGlvbmVuZCIsIm9ud2Via2l0YW5pbWF0aW9uZW5kIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicGxhdGZvcm1Nb2R1bGVzIiwicGF0Y2giLCJ2bW9kZWwiLCJkaXJlY3RpdmUiLCJfdk9wdGlvbnMiLCJwcmV2T3B0aW9ucyIsImN1ck9wdGlvbnMiLCJuZWVkUmVzZXQiLCJ0cmFuc2l0aW9uJCQxIiwib3JpZ2luYWxEaXNwbGF5IiwiX192T3JpZ2luYWxEaXNwbGF5IiwiZGlzcGxheSIsInVuYmluZCIsInBsYXRmb3JtRGlyZWN0aXZlcyIsInRyYW5zaXRpb25Qcm9wcyIsIm1vZGUiLCJUcmFuc2l0aW9uIiwiX2xlYXZpbmciLCJvbGRSYXdDaGlsZCIsImRlbGF5ZWRMZWF2ZSIsIm1vdmVDbGFzcyIsIlRyYW5zaXRpb25Hcm91cCIsInByZXZDaGlsZHJlbiIsInJhd0NoaWxkcmVuIiwidHJhbnNpdGlvbkRhdGEiLCJrZXB0IiwicmVtb3ZlZCIsImMkMSIsImJlZm9yZVVwZGF0ZSIsInVwZGF0ZWQiLCJoYXNNb3ZlIiwiX3JlZmxvdyIsImJvZHkiLCJvZmZzZXRIZWlnaHQiLCJwcm9wZXJ0eU5hbWUiLCJfaGFzTW92ZSIsImNsb25lIiwicGxhdGZvcm1Db21wb25lbnRzIiwiZGVjb2RlciIsInJlZ2V4RXNjYXBlUkUiLCJvcGVuIiwiY2xvc2UiLCJrbGFzcyQxIiwic3R5bGUkMSIsImhlIiwiZGVjb2RlIiwibmNuYW1lIiwicW5hbWVDYXB0dXJlIiwiZyIsIiZsdDsiLCImZ3Q7IiwiJnF1b3Q7IiwiJmFtcDsiLCImIzEwOyIsIiYjOTsiLCJpc0lnbm9yZU5ld2xpbmVUYWciLCJtb2RlbCQyIiwibW9kdWxlcyQxIiwiZGlyZWN0aXZlcyQxIiwiZXNjIiwidGFiIiwic3BhY2UiLCJ1cCIsImRvd24iLCJzdG9wIiwiY3RybCIsImFsdCIsIm1ldGEiLCJiYXNlRGlyZWN0aXZlcyIsImNsb2FrIiwiY3JlYXRlQ29tcGlsZXIiLCJpZFRvVGVtcGxhdGUiLCJtb3VudCIsImRvY3VtZW50RWxlbWVudCIsIlRpbWVvdXQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJ1bnJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsIl9vblRpbWVvdXQiLCJjbGVhckltbWVkaWF0ZSIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwiaGFuZGxlIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24iLCJjYW5Vc2VQb3N0TWVzc2FnZSIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMiLCJvbGRPbk1lc3NhZ2UiLCJpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbiIsIm1lc3NhZ2VQcmVmaXgiLCJvbkdsb2JhbE1lc3NhZ2UiLCJhdHRhY2hFdmVudCIsImluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uIiwiaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbiIsImRvYyIsInNjcmlwdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsImluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24iLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwiYXNzZXJ0IiwibWVzc2FnZSIsIk5PREVfRU5WIiwiaXNFcnJvciIsInJlc29sdmVQcm9wcyIsInJvdXRlIiwicmVzb2x2ZVF1ZXJ5IiwiZXh0cmFRdWVyeSIsIl9wYXJzZVF1ZXJ5IiwicGFyc2VkUXVlcnkiLCJwYXJzZVF1ZXJ5IiwicGFyYW0iLCJwYXJ0cyIsInN0cmluZ2lmeVF1ZXJ5IiwiZW5jb2RlIiwidmFsMiIsImNyZWF0ZVJvdXRlIiwicmVjb3JkIiwibG9jYXRpb24iLCJyZWRpcmVjdGVkRnJvbSIsInN0cmluZ2lmeVF1ZXJ5JCQxIiwiZnVsbFBhdGgiLCJnZXRGdWxsUGF0aCIsIm1hdGNoZWQiLCJmb3JtYXRNYXRjaCIsIl9zdHJpbmdpZnlRdWVyeSIsImlzU2FtZVJvdXRlIiwiU1RBUlQiLCJ0cmFpbGluZ1NsYXNoUkUiLCJpc09iamVjdEVxdWFsIiwiYUtleXMiLCJiS2V5cyIsImFWYWwiLCJiVmFsIiwiaXNJbmNsdWRlZFJvdXRlIiwicXVlcnlJbmNsdWRlcyIsImd1YXJkRXZlbnQiLCJtZXRhS2V5IiwiY3RybEtleSIsInNoaWZ0S2V5IiwiZGVmYXVsdFByZXZlbnRlZCIsImJ1dHRvbiIsImN1cnJlbnRUYXJnZXQiLCJwcmV2ZW50RGVmYXVsdCIsImZpbmRBbmNob3IiLCJpbnN0YWxsZWQiLCJfVnVlIiwicmVnaXN0ZXJJbnN0YW5jZSIsImNhbGxWYWwiLCJyZWdpc3RlclJvdXRlSW5zdGFuY2UiLCJiZWZvcmVDcmVhdGUiLCJfcm91dGVyUm9vdCIsIl9yb3V0ZXIiLCJoaXN0b3J5IiwiX3JvdXRlIiwiVmlldyIsIkxpbmsiLCJiZWZvcmVSb3V0ZUVudGVyIiwiYmVmb3JlUm91dGVMZWF2ZSIsImJlZm9yZVJvdXRlVXBkYXRlIiwicmVzb2x2ZVBhdGgiLCJyZWxhdGl2ZSIsImFwcGVuZCIsImZpcnN0Q2hhciIsInNlZ21lbnQiLCJoYXNoSW5kZXgiLCJxdWVyeUluZGV4IiwiY2xlYW5QYXRoIiwiZGVmYXVsdERlbGltaXRlciIsImRlbGltaXRlciIsIlBBVEhfUkVHRVhQIiwiZXNjYXBlZCIsIm9mZnNldCIsInByZWZpeCIsImdyb3VwIiwibW9kaWZpZXIiLCJhc3RlcmlzayIsInBhcnRpYWwiLCJvcHRpb25hbCIsImVzY2FwZUdyb3VwIiwiZXNjYXBlU3RyaW5nIiwic3Vic3RyIiwidG9rZW5zVG9GdW5jdGlvbiIsImVuY29kZVVSSUNvbXBvbmVudFByZXR0eSIsImVuY29kZVVSSSIsImVuY29kZUFzdGVyaXNrIiwicHJldHR5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidG9rZW4iLCJpc2FycmF5IiwiYXR0YWNoS2V5cyIsImZsYWdzIiwic2Vuc2l0aXZlIiwicmVnZXhwVG9SZWdleHAiLCJncm91cHMiLCJhcnJheVRvUmVnZXhwIiwicGF0aFRvUmVnZXhwIiwicmVnZXhwIiwic3RyaW5nVG9SZWdleHAiLCJ0b2tlbnNUb1JlZ0V4cCIsInN0cmljdCIsImVuZHNXaXRoRGVsaW1pdGVyIiwiZmlsbFBhcmFtcyIsInJvdXRlTXNnIiwiZmlsbGVyIiwicmVnZXhwQ29tcGlsZUNhY2hlIiwicGF0aFRvUmVnZXhwXzEiLCJjcmVhdGVSb3V0ZU1hcCIsIm9sZFBhdGhMaXN0Iiwib2xkUGF0aE1hcCIsIm9sZE5hbWVNYXAiLCJwYXRoTGlzdCIsInBhdGhNYXAiLCJuYW1lTWFwIiwiYWRkUm91dGVSZWNvcmQiLCJtYXRjaEFzIiwicGF0aFRvUmVnZXhwT3B0aW9ucyIsIm5vcm1hbGl6ZWRQYXRoIiwibm9ybWFsaXplUGF0aCIsImNhc2VTZW5zaXRpdmUiLCJyZWdleCIsImNvbXBpbGVSb3V0ZVJlZ2V4IiwiaW5zdGFuY2VzIiwiY2hpbGRNYXRjaEFzIiwiYWxpYXNlcyIsImFsaWFzUm91dGUiLCJub3JtYWxpemVMb2NhdGlvbiIsIl9ub3JtYWxpemVkIiwiYXNzaWduIiwicmF3UGF0aCIsInBhcnNlZFBhdGgiLCJiYXNlUGF0aCIsImNyZWF0ZU1hdGNoZXIiLCJhZGRSb3V0ZXMiLCJjdXJyZW50Um91dGUiLCJfY3JlYXRlUm91dGUiLCJwYXJhbU5hbWVzIiwicmVjb3JkJDEiLCJtYXRjaFJvdXRlIiwib3JpZ2luYWxSZWRpcmVjdCIsInRhcmdldFJlY29yZCIsInJlc29sdmVSZWNvcmRQYXRoIiwicmVzb2x2ZWRQYXRoIiwiYWxpYXNlZFBhdGgiLCJhbGlhc2VkTWF0Y2giLCJhbGlhc2VkUmVjb3JkIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic2V0dXBTY3JvbGwiLCJyZXBsYWNlU3RhdGUiLCJnZXRTdGF0ZUtleSIsInNhdmVTY3JvbGxQb3NpdGlvbiIsInNldFN0YXRlS2V5IiwiaGFuZGxlU2Nyb2xsIiwiaXNQb3AiLCJhcHAiLCJiZWhhdmlvciIsInNjcm9sbEJlaGF2aW9yIiwicG9zaXRpb24iLCJnZXRTY3JvbGxQb3NpdGlvbiIsInNob3VsZFNjcm9sbCIsInNjcm9sbFRvUG9zaXRpb24iLCJwb3NpdGlvblN0b3JlIiwicGFnZVhPZmZzZXQiLCJ5IiwicGFnZVlPZmZzZXQiLCJnZXRFbGVtZW50UG9zaXRpb24iLCJkb2NFbCIsImRvY1JlY3QiLCJlbFJlY3QiLCJpc1ZhbGlkUG9zaXRpb24iLCJpc051bWJlciIsIm5vcm1hbGl6ZVBvc2l0aW9uIiwibm9ybWFsaXplT2Zmc2V0Iiwic2VsZWN0b3IiLCJzY3JvbGxUbyIsImdlbktleSIsIlRpbWUiLCJub3ciLCJ0b0ZpeGVkIiwiX2tleSIsInB1c2hTdGF0ZSIsInVybCIsInJ1blF1ZXVlIiwic3RlcCIsInJlc29sdmVBc3luY0NvbXBvbmVudHMiLCJoYXNBc3luYyIsImZsYXRNYXBDb21wb25lbnRzIiwicmVzb2x2ZWREZWYiLCJpc0VTTW9kdWxlIiwiZmxhdHRlbiIsIm5vcm1hbGl6ZUJhc2UiLCJiYXNlRWwiLCJyZXNvbHZlUXVldWUiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImV4dHJhY3RHdWFyZHMiLCJyZWNvcmRzIiwicmV2ZXJzZSIsImd1YXJkcyIsImluc3RhbmNlIiwiZ3VhcmQiLCJleHRyYWN0R3VhcmQiLCJleHRyYWN0TGVhdmVHdWFyZHMiLCJiaW5kR3VhcmQiLCJleHRyYWN0VXBkYXRlSG9va3MiLCJleHRyYWN0RW50ZXJHdWFyZHMiLCJpc1ZhbGlkIiwiYmluZEVudGVyR3VhcmQiLCJwb2xsIiwiZ2V0TG9jYXRpb24iLCJwYXRobmFtZSIsInNlYXJjaCIsImNoZWNrRmFsbGJhY2siLCJlbnN1cmVTbGFzaCIsImdldEhhc2giLCJyZXBsYWNlSGFzaCIsImdldFVybCIsInB1c2hIYXNoIiwic3VwcG9ydHNQdXNoU3RhdGUiLCJyZWdpc3Rlckhvb2siLCJjcmVhdGVIcmVmIiwicm91dGVyVmlldyIsIiRyb3V0ZSIsIl9yb3V0ZXJWaWV3Q2FjaGUiLCJkZXB0aCIsImluYWN0aXZlIiwicm91dGVyVmlld0RlcHRoIiwicHJvcHNUb1Bhc3MiLCJlbmNvZGVSZXNlcnZlUkUiLCJlbmNvZGVSZXNlcnZlUmVwbGFjZXIiLCJjb21tYVJFIiwidG9UeXBlcyIsImV2ZW50VHlwZXMiLCJleGFjdCIsImV4YWN0QWN0aXZlQ2xhc3MiLCIkcm91dGVyIiwiY2xhc3NlcyIsImdsb2JhbEFjdGl2ZUNsYXNzIiwibGlua0FjdGl2ZUNsYXNzIiwiZ2xvYmFsRXhhY3RBY3RpdmVDbGFzcyIsImxpbmtFeGFjdEFjdGl2ZUNsYXNzIiwiYWN0aXZlQ2xhc3NGYWxsYmFjayIsImV4YWN0QWN0aXZlQ2xhc3NGYWxsYmFjayIsImNvbXBhcmVUYXJnZXQiLCJjbGljayIsImFEYXRhIiwiYUF0dHJzIiwicGFyc2VfMSIsImNvbXBpbGVfMSIsInRva2Vuc1RvRnVuY3Rpb25fMSIsInRva2Vuc1RvUmVnRXhwXzEiLCJ1YSIsIkRhdGUiLCJIaXN0b3J5IiwicmVhZHkiLCJyZWFkeUNicyIsInJlYWR5RXJyb3JDYnMiLCJlcnJvckNicyIsImxpc3RlbiIsIm9uUmVhZHkiLCJlcnJvckNiIiwib25FcnJvciIsInRyYW5zaXRpb25UbyIsIm9uQ29tcGxldGUiLCJvbkFib3J0IiwiY29uZmlybVRyYW5zaXRpb24iLCJ1cGRhdGVSb3V0ZSIsImVuc3VyZVVSTCIsImFib3J0IiwiYmVmb3JlSG9va3MiLCJpdGVyYXRvciIsInBvc3RFbnRlckNicyIsImVudGVyR3VhcmRzIiwicmVzb2x2ZUhvb2tzIiwiYWZ0ZXJIb29rcyIsIkhUTUw1SGlzdG9yeSIsIkhpc3RvcnkkJDEiLCJleHBlY3RTY3JvbGwiLCJpbml0TG9jYXRpb24iLCJnbyIsImZyb21Sb3V0ZSIsImdldEN1cnJlbnRMb2NhdGlvbiIsIkhhc2hIaXN0b3J5Iiwic2V0dXBMaXN0ZW5lcnMiLCJzdXBwb3J0c1Njcm9sbCIsIkFic3RyYWN0SGlzdG9yeSIsInRhcmdldEluZGV4IiwiVnVlUm91dGVyIiwiYXBwcyIsIm1hdGNoZXIiLCJzZXR1cEhhc2hMaXN0ZW5lciIsImJlZm9yZUVhY2giLCJiZWZvcmVSZXNvbHZlIiwiYWZ0ZXJFYWNoIiwiYmFjayIsImZvcndhcmQiLCJnZXRNYXRjaGVkQ29tcG9uZW50cyIsIm5vcm1hbGl6ZWRUbyIsImNyZWF0ZUluc3RhbmNlIiwiZGVmYXVsdENvbmZpZyIsIkF4aW9zIiwicmVxdWVzdCIsInV0aWxzIiwiZGVmYXVsdHMiLCJheGlvcyIsImluc3RhbmNlQ29uZmlnIiwibWVyZ2UiLCJDYW5jZWwiLCJDYW5jZWxUb2tlbiIsImlzQ2FuY2VsIiwicHJvbWlzZXMiLCJzcHJlYWQiLCJpc0FycmF5QnVmZmVyIiwiaXNGb3JtRGF0YSIsIkZvcm1EYXRhIiwiaXNBcnJheUJ1ZmZlclZpZXciLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsImJ1ZmZlciIsImlzU3RyaW5nIiwiaXNVbmRlZmluZWQiLCJpc0RhdGUiLCJpc0ZpbGUiLCJpc0Jsb2IiLCJpc1N0cmVhbSIsInBpcGUiLCJpc1VSTFNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImlzU3RhbmRhcmRCcm93c2VyRW52IiwicHJvZHVjdCIsImFzc2lnblZhbHVlIiwidGhpc0FyZyIsImlzQnVmZmVyIiwiaXNTbG93QnVmZmVyIiwicmVhZEZsb2F0TEUiLCJfaXNCdWZmZXIiLCJpbnRlcmNlcHRvcnMiLCJJbnRlcmNlcHRvck1hbmFnZXIiLCJyZXNwb25zZSIsImRpc3BhdGNoUmVxdWVzdCIsImNoYWluIiwiaW50ZXJjZXB0b3IiLCJmdWxmaWxsZWQiLCJyZWplY3RlZCIsInNldENvbnRlbnRUeXBlSWZVbnNldCIsImhlYWRlcnMiLCJnZXREZWZhdWx0QWRhcHRlciIsImFkYXB0ZXIiLCJYTUxIdHRwUmVxdWVzdCIsIm5vcm1hbGl6ZUhlYWRlck5hbWUiLCJERUZBVUxUX0NPTlRFTlRfVFlQRSIsIkNvbnRlbnQtVHlwZSIsInRyYW5zZm9ybVJlcXVlc3QiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInhzcmZDb29raWVOYW1lIiwieHNyZkhlYWRlck5hbWUiLCJtYXhDb250ZW50TGVuZ3RoIiwidmFsaWRhdGVTdGF0dXMiLCJzdGF0dXMiLCJjb21tb24iLCJBY2NlcHQiLCJzZXR0bGUiLCJidWlsZFVSTCIsInBhcnNlSGVhZGVycyIsImlzVVJMU2FtZU9yaWdpbiIsImNyZWF0ZUVycm9yIiwiYnRvYSIsInJlcXVlc3REYXRhIiwicmVxdWVzdEhlYWRlcnMiLCJsb2FkRXZlbnQiLCJ4RG9tYWluIiwiWERvbWFpblJlcXVlc3QiLCJvbnByb2dyZXNzIiwib250aW1lb3V0IiwiYXV0aCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJBdXRob3JpemF0aW9uIiwicGFyYW1zU2VyaWFsaXplciIsInJlYWR5U3RhdGUiLCJyZXNwb25zZVVSTCIsInJlc3BvbnNlSGVhZGVycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInJlc3BvbnNlRGF0YSIsInJlc3BvbnNlVHlwZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1c1RleHQiLCJvbmVycm9yIiwiY29va2llcyIsInhzcmZWYWx1ZSIsIndpdGhDcmVkZW50aWFscyIsInJlYWQiLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25Eb3dubG9hZFByb2dyZXNzIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbFRva2VuIiwiY2FuY2VsIiwic2VuZCIsImVuaGFuY2VFcnJvciIsInNlcmlhbGl6ZWRQYXJhbXMiLCJ0b0lTT1N0cmluZyIsImlnbm9yZUR1cGxpY2F0ZU9mIiwicGFyc2VkIiwibGluZSIsInJlc29sdmVVUkwiLCJtc2llIiwidXJsUGFyc2luZ05vZGUiLCJwcm90b2NvbCIsImhvc3QiLCJob3N0bmFtZSIsIm9yaWdpblVSTCIsInJlcXVlc3RVUkwiLCJFIiwiY2hhckNvZGUiLCJvdXRwdXQiLCJpZHgiLCJ3cml0ZSIsImV4cGlyZXMiLCJkb21haW4iLCJzZWN1cmUiLCJjb29raWUiLCJ0b0dNVFN0cmluZyIsImVqZWN0IiwidGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZCIsInRocm93SWZSZXF1ZXN0ZWQiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNBYnNvbHV0ZVVSTCIsImNvbWJpbmVVUkxzIiwiYmFzZVVSTCIsIl9fQ0FOQ0VMX18iLCJyZWxhdGl2ZVVSTCIsImV4ZWN1dG9yIiwicmVzb2x2ZVByb21pc2UiLCJfdnVleCIsIl92dWV4MiIsImxvYWRTdGF0dXMiLCJtdXRhdGlvbnMiLCJMT0FEX1NUQVRVUyIsIlN0b3JlIiwiZGV2dG9vbFBsdWdpbiIsImRldnRvb2xIb29rIiwiX2RldnRvb2xIb29rIiwidGFyZ2V0U3RhdGUiLCJtdXRhdGlvbiIsImZvckVhY2hWYWx1ZSIsImlzUHJvbWlzZSIsInRhcmdldE1vZHVsZSIsIm5ld01vZHVsZSIsImFzc2VydFJhd01vZHVsZSIsImdldENoaWxkIiwicmF3TW9kdWxlIiwiYXNzZXJ0VHlwZXMiLCJhc3NlcnRPcHRpb25zIiwibWFrZUFzc2VydGlvbk1lc3NhZ2UiLCJleHBlY3RlZCIsImJ1ZiIsImdlbmVyaWNTdWJzY3JpYmUiLCJyZXNldFN0b3JlIiwiaG90IiwiX2FjdGlvbnMiLCJfbXV0YXRpb25zIiwiX3dyYXBwZWRHZXR0ZXJzIiwiX21vZHVsZXNOYW1lc3BhY2VNYXAiLCJpbnN0YWxsTW9kdWxlIiwiX21vZHVsZXMiLCJyZXNldFN0b3JlVk0iLCJvbGRWbSIsIl92bSIsImdldHRlcnMiLCJ3cmFwcGVkR2V0dGVycyIsIiQkc3RhdGUiLCJlbmFibGVTdHJpY3RNb2RlIiwiX3dpdGhDb21taXQiLCJyb290U3RhdGUiLCJnZXROYW1lc3BhY2UiLCJuYW1lc3BhY2VkIiwicGFyZW50U3RhdGUiLCJnZXROZXN0ZWRTdGF0ZSIsIm1vZHVsZU5hbWUiLCJtYWtlTG9jYWxDb250ZXh0IiwiZm9yRWFjaE11dGF0aW9uIiwibmFtZXNwYWNlZFR5cGUiLCJyZWdpc3Rlck11dGF0aW9uIiwiZm9yRWFjaEFjdGlvbiIsImFjdGlvbiIsInJlZ2lzdGVyQWN0aW9uIiwiZm9yRWFjaEdldHRlciIsInJlZ2lzdGVyR2V0dGVyIiwiZm9yRWFjaENoaWxkIiwibm9OYW1lc3BhY2UiLCJkaXNwYXRjaCIsIl90eXBlIiwiX3BheWxvYWQiLCJfb3B0aW9ucyIsInVuaWZ5T2JqZWN0U3R5bGUiLCJwYXlsb2FkIiwiY29tbWl0IiwibWFrZUxvY2FsR2V0dGVycyIsImdldHRlcnNQcm94eSIsInNwbGl0UG9zIiwibG9jYWxUeXBlIiwicm9vdEdldHRlcnMiLCJyYXdHZXR0ZXIiLCJfY29tbWl0dGluZyIsImFwcGx5TWl4aW4iLCJub3JtYWxpemVNYXAiLCJub3JtYWxpemVOYW1lc3BhY2UiLCJnZXRNb2R1bGVCeU5hbWVzcGFjZSIsImhlbHBlciIsInZ1ZXhJbml0IiwiJHN0b3JlIiwiTW9kdWxlIiwicnVudGltZSIsIl9jaGlsZHJlbiIsIl9yYXdNb2R1bGUiLCJyYXdTdGF0ZSIsInByb3RvdHlwZUFjY2Vzc29ycyQxIiwiYWRkQ2hpbGQiLCJhY3Rpb25zIiwiTW9kdWxlQ29sbGVjdGlvbiIsInJhd1Jvb3RNb2R1bGUiLCJyZWdpc3RlciIsInJhd0NoaWxkTW9kdWxlIiwidW5yZWdpc3RlciIsImZ1bmN0aW9uQXNzZXJ0Iiwib2JqZWN0QXNzZXJ0IiwicGx1Z2lucyIsIl9hY3Rpb25TdWJzY3JpYmVycyIsIl93YXRjaGVyVk0iLCJzdWJzY3JpYmVBY3Rpb24iLCJyZWdpc3Rlck1vZHVsZSIsInByZXNlcnZlU3RhdGUiLCJ1bnJlZ2lzdGVyTW9kdWxlIiwiaG90VXBkYXRlIiwibmV3T3B0aW9ucyIsImNvbW1pdHRpbmciLCJtYXBTdGF0ZSIsInN0YXRlcyIsInZ1ZXgiLCJtYXBNdXRhdGlvbnMiLCJtYXBHZXR0ZXJzIiwibWFwQWN0aW9ucyIsImNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIiwiX192dWVfZXhwb3J0c19fIiwiX192dWVfb3B0aW9uc19fIiwiX192dWVfdGVtcGxhdGVfXyIsIl9sb2FkaW5nIiwiX2xvYWRpbmcyIiwiX2giLCJrZWVwLWFsaXZlIiwibW91bnRlZCIsInNob3dMb2FkaW5nIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLElBR0FWLEVBQUEsS0RNTSxTQUFVSSxFQUFRRCxFQUFTSCxHQUVoQyxZQTRCQSxTQUFTVyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHRTFFeEZaLEVBQUEsRUFFQSxJQUFBZSxHQUFBZixFQUFBLEdGa0RLZ0IsRUFBUUwsRUFBdUJJLEdFakRwQ0UsRUFBQWpCLEVBQUEsR0ZxREtrQixFQUFjUCxFQUF1Qk0sR0VwRDFDRSxFQUFBbkIsRUFBQSxHRndES29CLEVBQVVULEVBQXVCUSxHRXZEdENFLEVBQUFyQixFQUFBLElGMkRLc0IsRUFBVVgsRUFBdUJVLEdFMUR0Q0UsRUFBQXZCLEVBQUEsSUY4REt3QixFQUFRYixFQUF1QlksR0V6RHBDRSxFQUFBekIsRUFBQSxJRjZESzBCLEVBQVVmLEVBQXVCYyxFRWhFdENULEdBQUFGLFFBQUlhLElBQUpULEVBQUFKLFNBQ0FFLEVBQUFGLFFBQUljLFVBQVVDLE1BQWRULEVBQUFOLE9BSUEsSUFBTWdCLEtBRUVDLEtBQU0sU0FDTkMsS0FBSyxRQUNMQyxzQkFHQUYsS0FBTSxJQUNORyxTQUFVLFdBSVpDLEVBQVMsR0FBQWpCLEdBQUFKLFNBQ1hzQixPQUFPTixHQUdDLElBQUFkLEdB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LCJmaWxlIjoianMvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfdnVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfdnVlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZSk7XG5cdFxuXHR2YXIgX3Z1ZVJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX3Z1ZVJvdXRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92dWVSb3V0ZXIpO1xuXHRcblx0dmFyIF9heGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX2F4aW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F4aW9zKTtcblx0XG5cdHZhciBfc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0XG5cdHZhciBfc3RvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RvcmUpO1xuXHRcblx0dmFyIF9hcHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0XG5cdHZhciBfYXBwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwcCk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfdnVlMi5kZWZhdWx0LnVzZShfdnVlUm91dGVyMi5kZWZhdWx0KTtcblx0X3Z1ZTIuZGVmYXVsdC5wcm90b3R5cGUuJGh0dHAgPSBfYXhpb3MyLmRlZmF1bHQ7XG5cdFxuXHR2YXIgX3JvdXRlcyA9IFt7XG5cdCAgICBwYXRoOiAnL2luZGV4Jyxcblx0ICAgIG5hbWU6ICdpbmRleCcsXG5cdCAgICBjb21wb25lbnQ6IF9pbmRleDIuZGVmYXVsdFxuXHR9LCB7XG5cdCAgICBwYXRoOiAnKicsXG5cdCAgICByZWRpcmVjdDogJy9pbmRleCdcblx0fV07XG5cdFxuXHR2YXIgcm91dGVyID0gbmV3IF92dWVSb3V0ZXIyLmRlZmF1bHQoe1xuXHQgICAgcm91dGVzOiBfcm91dGVzXG5cdH0pO1xuXHRcblx0dmFyIGFwcCA9IG5ldyBfdnVlMi5kZWZhdWx0KHtcblx0ICAgIGVsOiAnI2FwcCcsXG5cdCAgICByb3V0ZXI6IHJvdXRlcixcblx0ICAgIHN0b3JlOiBfc3RvcmUyLmRlZmF1bHQsXG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7XG5cdCAgICAgICAgcmV0dXJuIGgoX2FwcDIuZGVmYXVsdCk7XG5cdCAgICB9XG5cdH0pLiRtb3VudCgnI2FwcCcpO1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBUaGlzIGZpbGUgY2FuIGJlIHJlcXVpcmVkIGluIEJyb3dzZXJpZnkgYW5kIE5vZGUuanMgZm9yIGF1dG9tYXRpYyBwb2x5ZmlsbFxuXHQvLyBUbyB1c2UgaXQ6ICByZXF1aXJlKCdlczYtcHJvbWlzZS9hdXRvJyk7XG5cdCd1c2Ugc3RyaWN0Jztcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLnBvbHlmaWxsKCk7XG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCkgey8qIVxuXHQgKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG5cdCAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG5cdCAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2Vcblx0ICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAdmVyc2lvbiAgIHY0LjIuNCszMTRlNDgzMVxuXHQgKi9cblx0XG5cdChmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdFx0IHRydWUgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdFx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0XHQoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xuXHR9KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuXHQgIHZhciB0eXBlID0gdHlwZW9mIHg7XG5cdCAgcmV0dXJuIHggIT09IG51bGwgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcblx0ICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG5cdH1cblx0XG5cdFxuXHRcblx0dmFyIF9pc0FycmF5ID0gdm9pZCAwO1xuXHRpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0fSBlbHNlIHtcblx0ICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuXHQgIH07XG5cdH1cblx0XG5cdHZhciBpc0FycmF5ID0gX2lzQXJyYXk7XG5cdFxuXHR2YXIgbGVuID0gMDtcblx0dmFyIHZlcnR4TmV4dCA9IHZvaWQgMDtcblx0dmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdm9pZCAwO1xuXHRcblx0dmFyIGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcblx0ICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG5cdCAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG5cdCAgbGVuICs9IDI7XG5cdCAgaWYgKGxlbiA9PT0gMikge1xuXHQgICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuXHQgICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcblx0ICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cblx0ICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuXHQgICAgICBjdXN0b21TY2hlZHVsZXJGbihmbHVzaCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzY2hlZHVsZUZsdXNoKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcblx0ICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG5cdCAgYXNhcCA9IGFzYXBGbjtcblx0fVxuXHRcblx0dmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcblx0dmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xuXHR2YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuXHR2YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cdFxuXHQvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxuXHR2YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXHRcblx0Ly8gbm9kZVxuXHRmdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcblx0ICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcblx0ICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8vIHZlcnR4XG5cdGZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG5cdCAgaWYgKHR5cGVvZiB2ZXJ0eE5leHQgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2ZXJ0eE5leHQoZmx1c2gpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG5cdCAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XG5cdCAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG5cdCAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcblx0ICB9O1xuXHR9XG5cdFxuXHQvLyB3ZWIgd29ya2VyXG5cdGZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuXHQgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcblx0ICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcblx0ICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcblx0ICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5cdGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcblx0ICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xuXHQgICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblx0XG5cdCAgICBjYWxsYmFjayhhcmcpO1xuXHRcblx0ICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuXHQgICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0XG5cdCAgbGVuID0gMDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgdmVydHggPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpLnJlcXVpcmUoJ3ZlcnR4Jyk7XG5cdCAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuXHQgICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIHNjaGVkdWxlRmx1c2ggPSB2b2lkIDA7XG5cdC8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5cdGlmIChpc05vZGUpIHtcblx0ICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcblx0fSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuXHQgIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG5cdH0gZWxzZSBpZiAoaXNXb3JrZXIpIHtcblx0ICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcblx0fSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgXCJmdW5jdGlvblwiID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xuXHR9IGVsc2Uge1xuXHQgIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcblx0ICB2YXIgcGFyZW50ID0gdGhpcztcblx0XG5cdCAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cdFxuXHQgIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG5cdCAgfVxuXHRcblx0ICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblx0XG5cdFxuXHQgIGlmIChfc3RhdGUpIHtcblx0ICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tfc3RhdGUgLSAxXTtcblx0ICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGNoaWxkO1xuXHR9XG5cdFxuXHQvKipcblx0ICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG5cdCAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgIHJlc29sdmUoMSk7XG5cdCAgfSk7XG5cdFxuXHQgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG5cdCAgICAvLyB2YWx1ZSA9PT0gMVxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cdFxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblx0XG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIHZhbHVlID09PSAxXG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIEBtZXRob2QgcmVzb2x2ZVxuXHQgIEBzdGF0aWNcblx0ICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG5cdCAgYHZhbHVlYFxuXHQqL1xuXHRmdW5jdGlvbiByZXNvbHZlJDEob2JqZWN0KSB7XG5cdCAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHRcblx0ICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcblx0ICAgIHJldHVybiBvYmplY3Q7XG5cdCAgfVxuXHRcblx0ICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblx0ICByZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG5cdCAgcmV0dXJuIHByb21pc2U7XG5cdH1cblx0XG5cdHZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIpO1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHR2YXIgUEVORElORyA9IHZvaWQgMDtcblx0dmFyIEZVTEZJTExFRCA9IDE7XG5cdHZhciBSRUpFQ1RFRCA9IDI7XG5cdFxuXHR2YXIgVFJZX0NBVENIX0VSUk9SID0geyBlcnJvcjogbnVsbCB9O1xuXHRcblx0ZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuXHQgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xuXHQgIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSkge1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuXHQgIH0gY2F0Y2ggKGVycm9yKSB7XG5cdCAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlcnJvcjtcblx0ICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0cnlUaGVuKHRoZW4kJDEsIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcblx0ICB0cnkge1xuXHQgICAgdGhlbiQkMS5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJldHVybiBlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuJCQxKSB7XG5cdCAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuXHQgICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuXHQgICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuJCQxLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgIGlmIChzZWFsZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0ICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuXHQgICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIGlmIChzZWFsZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0XG5cdCAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblx0XG5cdCAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuXHQgICAgICBzZWFsZWQgPSB0cnVlO1xuXHQgICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuXHQgICAgfVxuXHQgIH0sIHByb21pc2UpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuXHQgIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xuXHQgICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcblx0ICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcblx0ICAgIHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIHJldHVybiByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKSB7XG5cdCAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkMSA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUkMSkge1xuXHQgICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmICh0aGVuJCQxID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcblx0ICAgICAgcmVqZWN0KHByb21pc2UsIFRSWV9DQVRDSF9FUlJPUi5lcnJvcik7XG5cdCAgICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IG51bGw7XG5cdCAgICB9IGVsc2UgaWYgKHRoZW4kJDEgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJDEpKSB7XG5cdCAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG5cdCAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICByZWplY3QocHJvbWlzZSwgc2VsZkZ1bGZpbGxtZW50KCkpO1xuXHQgIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcblx0ICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcblx0ICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuXHQgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuXHQgIH1cblx0XG5cdCAgcHVibGlzaChwcm9taXNlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuXHQgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG5cdCAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7XG5cdFxuXHQgIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcblx0ICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG5cdCAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7XG5cdCAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXHRcblx0ICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcblx0ICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcblx0ICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblx0XG5cdFxuXHQgIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cdFxuXHQgIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG5cdCAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuXHQgIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblx0XG5cdCAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG5cdCAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHtcblx0ICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcblx0ICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXHRcblx0ICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICB2YXIgY2hpbGQgPSB2b2lkIDAsXG5cdCAgICAgIGNhbGxiYWNrID0gdm9pZCAwLFxuXHQgICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcblx0ICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG5cdCAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblx0XG5cdCAgICBpZiAoY2hpbGQpIHtcblx0ICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY2FsbGJhY2soZGV0YWlsKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcblx0ICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG5cdCAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksXG5cdCAgICAgIHZhbHVlID0gdm9pZCAwLFxuXHQgICAgICBlcnJvciA9IHZvaWQgMCxcblx0ICAgICAgc3VjY2VlZGVkID0gdm9pZCAwLFxuXHQgICAgICBmYWlsZWQgPSB2b2lkIDA7XG5cdFxuXHQgIGlmIChoYXNDYWxsYmFjaykge1xuXHQgICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblx0XG5cdCAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuXHQgICAgICBmYWlsZWQgPSB0cnVlO1xuXHQgICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuXHQgICAgICB2YWx1ZS5lcnJvciA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuXHQgICAgICByZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhbHVlID0gZGV0YWlsO1xuXHQgICAgc3VjY2VlZGVkID0gdHJ1ZTtcblx0ICB9XG5cdFxuXHQgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuXHQgICAgLy8gbm9vcFxuXHQgIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG5cdCAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuXHQgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcblx0ICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuXHQgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuXHQgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG5cdCAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcblx0ICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZWplY3QocHJvbWlzZSwgZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgaWQgPSAwO1xuXHRmdW5jdGlvbiBuZXh0SWQoKSB7XG5cdCAgcmV0dXJuIGlkKys7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcblx0ICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKztcblx0ICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcblx0ICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG5cdCAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuXHQgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xuXHR9XG5cdFxuXHR2YXIgRW51bWVyYXRvciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuXHQgICAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuXHQgICAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXHRcblx0ICAgIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG5cdCAgICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXHQgICAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cdFxuXHQgICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXHRcblx0ICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuXHQgICAgICAgIHRoaXMuX2VudW1lcmF0ZShpbnB1dCk7XG5cdCAgICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuXHQgICAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gX2VudW1lcmF0ZShpbnB1dCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuXHQgICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIEVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbiBfZWFjaEVudHJ5KGVudHJ5LCBpKSB7XG5cdCAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG5cdCAgICB2YXIgcmVzb2x2ZSQkMSA9IGMucmVzb2x2ZTtcblx0XG5cdFxuXHQgICAgaWYgKHJlc29sdmUkJDEgPT09IHJlc29sdmUkMSkge1xuXHQgICAgICB2YXIgX3RoZW4gPSBnZXRUaGVuKGVudHJ5KTtcblx0XG5cdCAgICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcblx0ICAgICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcblx0ICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblx0ICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcblx0ICAgICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlJDEpIHtcblx0ICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuXHQgICAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIF90aGVuKTtcblx0ICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlJCQxKSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVzb2x2ZSQkMShlbnRyeSk7XG5cdCAgICAgICAgfSksIGkpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkMShlbnRyeSksIGkpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiBfc2V0dGxlZEF0KHN0YXRlLCBpLCB2YWx1ZSkge1xuXHQgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cdFxuXHRcblx0ICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuXHQgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblx0XG5cdCAgICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcblx0ICAgICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuXHQgICAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIF93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSkge1xuXHQgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXHRcblx0ICAgIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuXHQgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEVudW1lcmF0b3I7XG5cdH0oKTtcblx0XG5cdC8qKlxuXHQgIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuXHQgIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3Jcblx0ICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcblx0ICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cdFxuXHQgIEV4YW1wbGU6XG5cdFxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuXHQgIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG5cdCAgbGV0IHByb21pc2UzID0gcmVzb2x2ZSgzKTtcblx0ICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblx0XG5cdCAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuXHQgICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG5cdCAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzXG5cdCAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXHRcblx0ICBFeGFtcGxlOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcblx0ICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG5cdCAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuXHQgIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXHRcblx0ICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG5cdCAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcblx0ICB9LCBmdW5jdGlvbihlcnJvcikge1xuXHQgICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgQG1ldGhvZCBhbGxcblx0ICBAc3RhdGljXG5cdCAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuXHQgIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuXHQgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG5cdCAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXG5cdCAgQHN0YXRpY1xuXHQqL1xuXHRmdW5jdGlvbiBhbGwoZW50cmllcykge1xuXHQgIHJldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG5cdCAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxuXHRcblx0ICBFeGFtcGxlOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG5cdCAgICB9LCAyMDApO1xuXHQgIH0pO1xuXHRcblx0ICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcblx0ICAgIH0sIDEwMCk7XG5cdCAgfSk7XG5cdFxuXHQgIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuXHQgICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTFcblx0ICAgIC8vIHdhcyByZXNvbHZlZC5cblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuXHQgIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcblx0ICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG5cdCAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG5cdCAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuXHQgICAgfSwgMjAwKTtcblx0ICB9KTtcblx0XG5cdCAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuXHQgICAgfSwgMTAwKTtcblx0ICB9KTtcblx0XG5cdCAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdCAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuXHQgICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG5cdCAgYGBgXG5cdFxuXHQgIEBtZXRob2QgcmFjZVxuXHQgIEBzdGF0aWNcblx0ICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG5cdCAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkXG5cdCAgcHJvbWlzZSB0byBzZXR0bGUuXG5cdCovXG5cdGZ1bmN0aW9uIHJhY2UoZW50cmllcykge1xuXHQgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblx0XG5cdCAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XG5cdCAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcblx0ICAgICAgcmV0dXJuIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cblx0ICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cdFxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cdCAgfSk7XG5cdFxuXHQgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG5cdCAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcblx0ICB9LCBmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cdFxuXHQgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG5cdCAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcblx0ICB9LCBmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIEBtZXRob2QgcmVqZWN0XG5cdCAgQHN0YXRpY1xuXHQgIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG5cdCAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cblx0Ki9cblx0ZnVuY3Rpb24gcmVqZWN0JDEocmVhc29uKSB7XG5cdCAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHQgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXHQgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgIHJldHVybiBwcm9taXNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuXHQgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbmVlZHNOZXcoKSB7XG5cdCAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuXHQgIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG5cdCAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG5cdCAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cdFxuXHQgIFRlcm1pbm9sb2d5XG5cdCAgLS0tLS0tLS0tLS1cblx0XG5cdCAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cblx0ICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG5cdCAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuXHQgIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuXHQgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cblx0ICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblx0XG5cdCAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXHRcblx0ICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuXHQgIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcblx0ICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblx0XG5cdCAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG5cdCAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuXHQgIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuXHQgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcblx0ICBpdHNlbGYgZnVsZmlsbC5cblx0XG5cdFxuXHQgIEJhc2ljIFVzYWdlOlxuXHQgIC0tLS0tLS0tLS0tLVxuXHRcblx0ICBgYGBqc1xuXHQgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAvLyBvbiBzdWNjZXNzXG5cdCAgICByZXNvbHZlKHZhbHVlKTtcblx0XG5cdCAgICAvLyBvbiBmYWlsdXJlXG5cdCAgICByZWplY3QocmVhc29uKTtcblx0ICB9KTtcblx0XG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAvLyBvbiBmdWxmaWxsbWVudFxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgLy8gb24gcmVqZWN0aW9uXG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIEFkdmFuY2VkIFVzYWdlOlxuXHQgIC0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG5cdCAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cdFxuXHQgIGBgYGpzXG5cdCAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFxuXHQgICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcblx0ICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG5cdCAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG5cdCAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXHQgICAgICB4aHIuc2VuZCgpO1xuXHRcblx0ICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcblx0ICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcblx0ICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG5cdCAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcblx0ICAgIC8vIG9uIGZ1bGZpbGxtZW50XG5cdCAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAvLyBvbiByZWplY3Rpb25cblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblx0XG5cdCAgYGBganNcblx0ICBQcm9taXNlLmFsbChbXG5cdCAgICBnZXRKU09OKCcvcG9zdHMnKSxcblx0ICAgIGdldEpTT04oJy9jb21tZW50cycpXG5cdCAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuXHQgICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuXHQgICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXHRcblx0ICAgIHJldHVybiB2YWx1ZXM7XG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIEBjbGFzcyBQcm9taXNlXG5cdCAgQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZXJcblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQGNvbnN0cnVjdG9yXG5cdCovXG5cdFxuXHR2YXIgUHJvbWlzZSQxID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcblx0ICAgIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcblx0ICAgIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblx0XG5cdCAgICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcblx0ICAgICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcblx0ICAgICAgdGhpcyBpbnN0YW5jZW9mIFByb21pc2UgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG5cdCAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcblx0ICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cdCAgIGBgYGpzXG5cdCAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuXHQgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcblx0ICB9LCBmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcblx0ICB9KTtcblx0ICBgYGBcblx0ICAgQ2hhaW5pbmdcblx0ICAtLS0tLS0tLVxuXHQgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuXHQgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcblx0ICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblx0ICAgYGBganNcblx0ICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgIHJldHVybiB1c2VyLm5hbWU7XG5cdCAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuXHQgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG5cdCAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG5cdCAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2Bcblx0ICB9KTtcblx0ICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG5cdCAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG5cdCAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuXHQgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG5cdCAgfSk7XG5cdCAgYGBgXG5cdCAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG5cdCAgIGBgYGpzXG5cdCAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG5cdCAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG5cdCAgfSk7XG5cdCAgYGBgXG5cdCAgIEFzc2ltaWxhdGlvblxuXHQgIC0tLS0tLS0tLS0tLVxuXHQgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuXHQgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcblx0ICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuXHQgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuXHQgICBgYGBqc1xuXHQgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuXHQgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG5cdCAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG5cdCAgfSk7XG5cdCAgYGBgXG5cdCAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuXHQgICBgYGBqc1xuXHQgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuXHQgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG5cdCAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG5cdCAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuXHQgIH0pO1xuXHQgIGBgYFxuXHQgICBTaW1wbGUgRXhhbXBsZVxuXHQgIC0tLS0tLS0tLS0tLS0tXG5cdCAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblx0ICAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCByZXN1bHQ7XG5cdCAgIHRyeSB7XG5cdCAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG5cdCAgICAvLyBzdWNjZXNzXG5cdCAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAgIC8vIGZhaWx1cmVcblx0ICB9XG5cdCAgYGBgXG5cdCAgIEVycmJhY2sgRXhhbXBsZVxuXHQgICBgYGBqc1xuXHQgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuXHQgICAgaWYgKGVycikge1xuXHQgICAgICAvLyBmYWlsdXJlXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBzdWNjZXNzXG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgYGBgXG5cdCAgIFByb21pc2UgRXhhbXBsZTtcblx0ICAgYGBgamF2YXNjcmlwdFxuXHQgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdCAgICAvLyBzdWNjZXNzXG5cdCAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgIC8vIGZhaWx1cmVcblx0ICB9KTtcblx0ICBgYGBcblx0ICAgQWR2YW5jZWQgRXhhbXBsZVxuXHQgIC0tLS0tLS0tLS0tLS0tXG5cdCAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblx0ICAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBhdXRob3IsIGJvb2tzO1xuXHQgICB0cnkge1xuXHQgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuXHQgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcblx0ICAgIC8vIHN1Y2Nlc3Ncblx0ICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgLy8gZmFpbHVyZVxuXHQgIH1cblx0ICBgYGBcblx0ICAgRXJyYmFjayBFeGFtcGxlXG5cdCAgIGBgYGpzXG5cdCAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcblx0ICAgfVxuXHQgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuXHQgICB9XG5cdCAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuXHQgICAgaWYgKGVycikge1xuXHQgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgIC8vIGZhaWx1cmVcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuXHQgICAgICAgICAgaWYgKGVycikge1xuXHQgICAgICAgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuXHQgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGNhdGNoKGVycm9yKSB7XG5cdCAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgIH1cblx0ICB9KTtcblx0ICBgYGBcblx0ICAgUHJvbWlzZSBFeGFtcGxlO1xuXHQgICBgYGBqYXZhc2NyaXB0XG5cdCAgZmluZEF1dGhvcigpLlxuXHQgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG5cdCAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcblx0ICAgICAgLy8gZm91bmQgYm9va3Ncblx0ICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICB9KTtcblx0ICBgYGBcblx0ICAgQG1ldGhvZCB0aGVuXG5cdCAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcblx0ICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG5cdCAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgIEByZXR1cm4ge1Byb21pc2V9XG5cdCAgKi9cblx0XG5cdCAgLyoqXG5cdCAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuXHQgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG5cdCAgYGBganNcblx0ICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG5cdCAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG5cdCAgfVxuXHQgIC8vIHN5bmNocm9ub3VzXG5cdCAgdHJ5IHtcblx0ICBmaW5kQXV0aG9yKCk7XG5cdCAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgIH1cblx0ICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG5cdCAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICB9KTtcblx0ICBgYGBcblx0ICBAbWV0aG9kIGNhdGNoXG5cdCAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAqL1xuXHRcblx0XG5cdCAgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24pIHtcblx0ICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAgYGZpbmFsbHlgIHdpbGwgYmUgaW52b2tlZCByZWdhcmRsZXNzIG9mIHRoZSBwcm9taXNlJ3MgZmF0ZSBqdXN0IGFzIG5hdGl2ZVxuXHQgICAgdHJ5L2NhdGNoL2ZpbmFsbHkgYmVoYXZlc1xuXHQgIFxuXHQgICAgU3luY2hyb25vdXMgZXhhbXBsZTpcblx0ICBcblx0ICAgIGBgYGpzXG5cdCAgICBmaW5kQXV0aG9yKCkge1xuXHQgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBuZXcgQXV0aG9yKCk7XG5cdCAgICB9XG5cdCAgXG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gZmluZEF1dGhvcigpOyAvLyBzdWNjZWVkIG9yIGZhaWxcblx0ICAgIH0gY2F0Y2goZXJyb3IpIHtcblx0ICAgICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpO1xuXHQgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgLy8gYWx3YXlzIHJ1bnNcblx0ICAgICAgLy8gZG9lc24ndCBhZmZlY3QgdGhlIHJldHVybiB2YWx1ZVxuXHQgICAgfVxuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBBc3luY2hyb25vdXMgZXhhbXBsZTpcblx0ICBcblx0ICAgIGBgYGpzXG5cdCAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpO1xuXHQgICAgfSkuZmluYWxseShmdW5jdGlvbigpe1xuXHQgICAgICAvLyBhdXRob3Igd2FzIGVpdGhlciBmb3VuZCwgb3Igbm90XG5cdCAgICB9KTtcblx0ICAgIGBgYFxuXHQgIFxuXHQgICAgQG1ldGhvZCBmaW5hbGx5XG5cdCAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuXHQgICAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAqL1xuXHRcblx0XG5cdCAgUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseSA9IGZ1bmN0aW9uIF9maW5hbGx5KGNhbGxiYWNrKSB7XG5cdCAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cdCAgICB2YXIgY29uc3RydWN0b3IgPSBwcm9taXNlLmNvbnN0cnVjdG9yO1xuXHRcblx0ICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgfSk7XG5cdCAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRocm93IHJlYXNvbjtcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gUHJvbWlzZTtcblx0fSgpO1xuXHRcblx0UHJvbWlzZSQxLnByb3RvdHlwZS50aGVuID0gdGhlbjtcblx0UHJvbWlzZSQxLmFsbCA9IGFsbDtcblx0UHJvbWlzZSQxLnJhY2UgPSByYWNlO1xuXHRQcm9taXNlJDEucmVzb2x2ZSA9IHJlc29sdmUkMTtcblx0UHJvbWlzZSQxLnJlamVjdCA9IHJlamVjdCQxO1xuXHRQcm9taXNlJDEuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcblx0UHJvbWlzZSQxLl9zZXRBc2FwID0gc2V0QXNhcDtcblx0UHJvbWlzZSQxLl9hc2FwID0gYXNhcDtcblx0XG5cdC8qZ2xvYmFsIHNlbGYqL1xuXHRmdW5jdGlvbiBwb2x5ZmlsbCgpIHtcblx0ICB2YXIgbG9jYWwgPSB2b2lkIDA7XG5cdFxuXHQgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgbG9jYWwgPSBnbG9iYWw7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGxvY2FsID0gc2VsZjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXHRcblx0ICBpZiAoUCkge1xuXHQgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG5cdCAgICB0cnkge1xuXHQgICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAvLyBzaWxlbnRseSBpZ25vcmVkXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMTtcblx0fVxuXHRcblx0Ly8gU3RyYW5nZSBjb21wYXQuLlxuXHRQcm9taXNlJDEucG9seWZpbGwgPSBwb2x5ZmlsbDtcblx0UHJvbWlzZSQxLlByb21pc2UgPSBQcm9taXNlJDE7XG5cdFxuXHRyZXR1cm4gUHJvbWlzZSQxO1xuXHRcblx0fSkpKTtcblx0XG5cdFxuXHRcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwXG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygzKSwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHR2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdFxuXHQvLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcblx0Ly8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG5cdC8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcblx0Ly8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblx0XG5cdHZhciBjYWNoZWRTZXRUaW1lb3V0O1xuXHR2YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXHRcblx0ZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdGZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHQoZnVuY3Rpb24gKCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgIH1cblx0fSAoKSlcblx0ZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcblx0ICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcblx0ICAgICAgICB9IGNhdGNoKGUpe1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0XG5cdH1cblx0ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuXHQgICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH0gY2F0Y2ggKGUpe1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG5cdCAgICAgICAgfSBjYXRjaCAoZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuXHQgICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdFxuXHRcblx0fVxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRwcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgc2V0SW1tZWRpYXRlKSB7LyohXG5cdCAqIFZ1ZS5qcyB2Mi41LjE1XG5cdCAqIChjKSAyMDE0LTIwMTggRXZhbiBZb3Vcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0XHQgdHJ1ZSA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0XHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHRcdChnbG9iYWwuVnVlID0gZmFjdG9yeSgpKTtcblx0fSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBlbXB0eU9iamVjdCA9IE9iamVjdC5mcmVlemUoe30pO1xuXHRcblx0Ly8gdGhlc2UgaGVscGVycyBwcm9kdWNlcyBiZXR0ZXIgdm0gY29kZSBpbiBKUyBlbmdpbmVzIGR1ZSB0byB0aGVpclxuXHQvLyBleHBsaWNpdG5lc3MgYW5kIGZ1bmN0aW9uIGlubGluaW5nXG5cdGZ1bmN0aW9uIGlzVW5kZWYgKHYpIHtcblx0ICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IG51bGxcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNEZWYgKHYpIHtcblx0ICByZXR1cm4gdiAhPT0gdW5kZWZpbmVkICYmIHYgIT09IG51bGxcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNUcnVlICh2KSB7XG5cdCAgcmV0dXJuIHYgPT09IHRydWVcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNGYWxzZSAodikge1xuXHQgIHJldHVybiB2ID09PSBmYWxzZVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdmFsdWUgaXMgcHJpbWl0aXZlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1ByaW1pdGl2ZSAodmFsdWUpIHtcblx0ICByZXR1cm4gKFxuXHQgICAgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fFxuXHQgICAgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fFxuXHQgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICB0eXBlb2YgdmFsdWUgPT09ICdzeW1ib2wnIHx8XG5cdCAgICB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJ1xuXHQgIClcblx0fVxuXHRcblx0LyoqXG5cdCAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuXHQgKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG5cdCAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0IChvYmopIHtcblx0ICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIHJhdyB0eXBlIHN0cmluZyBvZiBhIHZhbHVlIGUuZy4gW29iamVjdCBPYmplY3RdXG5cdCAqL1xuXHR2YXIgX3RvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdGZ1bmN0aW9uIHRvUmF3VHlwZSAodmFsdWUpIHtcblx0ICByZXR1cm4gX3RvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKVxuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuXHQgKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNQbGFpbk9iamVjdCAob2JqKSB7XG5cdCAgcmV0dXJuIF90b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IE9iamVjdF0nXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzUmVnRXhwICh2KSB7XG5cdCAgcmV0dXJuIF90b1N0cmluZy5jYWxsKHYpID09PSAnW29iamVjdCBSZWdFeHBdJ1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdmFsIGlzIGEgdmFsaWQgYXJyYXkgaW5kZXguXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1ZhbGlkQXJyYXlJbmRleCAodmFsKSB7XG5cdCAgdmFyIG4gPSBwYXJzZUZsb2F0KFN0cmluZyh2YWwpKTtcblx0ICByZXR1cm4gbiA+PSAwICYmIE1hdGguZmxvb3IobikgPT09IG4gJiYgaXNGaW5pdGUodmFsKVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHZhbHVlIHRvIGEgc3RyaW5nIHRoYXQgaXMgYWN0dWFsbHkgcmVuZGVyZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b1N0cmluZyAodmFsKSB7XG5cdCAgcmV0dXJuIHZhbCA9PSBudWxsXG5cdCAgICA/ICcnXG5cdCAgICA6IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnXG5cdCAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCBudWxsLCAyKVxuXHQgICAgICA6IFN0cmluZyh2YWwpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgaW5wdXQgdmFsdWUgdG8gYSBudW1iZXIgZm9yIHBlcnNpc3RlbmNlLlxuXHQgKiBJZiB0aGUgY29udmVyc2lvbiBmYWlscywgcmV0dXJuIG9yaWdpbmFsIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvTnVtYmVyICh2YWwpIHtcblx0ICB2YXIgbiA9IHBhcnNlRmxvYXQodmFsKTtcblx0ICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYWtlIGEgbWFwIGFuZCByZXR1cm4gYSBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYSBrZXlcblx0ICogaXMgaW4gdGhhdCBtYXAuXG5cdCAqL1xuXHRmdW5jdGlvbiBtYWtlTWFwIChcblx0ICBzdHIsXG5cdCAgZXhwZWN0c0xvd2VyQ2FzZVxuXHQpIHtcblx0ICB2YXIgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgbGlzdCA9IHN0ci5zcGxpdCgnLCcpO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgbWFwW2xpc3RbaV1dID0gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGV4cGVjdHNMb3dlckNhc2Vcblx0ICAgID8gZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbC50b0xvd2VyQ2FzZSgpXTsgfVxuXHQgICAgOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBtYXBbdmFsXTsgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSB0YWcgaXMgYSBidWlsdC1pbiB0YWcuXG5cdCAqL1xuXHR2YXIgaXNCdWlsdEluVGFnID0gbWFrZU1hcCgnc2xvdCxjb21wb25lbnQnLCB0cnVlKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIGF0dHJpYnV0ZSBpcyBhIHJlc2VydmVkIGF0dHJpYnV0ZS5cblx0ICovXG5cdHZhciBpc1Jlc2VydmVkQXR0cmlidXRlID0gbWFrZU1hcCgna2V5LHJlZixzbG90LHNsb3Qtc2NvcGUsaXMnKTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYW4gaXRlbSBmcm9tIGFuIGFycmF5XG5cdCAqL1xuXHRmdW5jdGlvbiByZW1vdmUgKGFyciwgaXRlbSkge1xuXHQgIGlmIChhcnIubGVuZ3RoKSB7XG5cdCAgICB2YXIgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTtcblx0ICAgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICAgIHJldHVybiBhcnIuc3BsaWNlKGluZGV4LCAxKVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuXHQgKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0ZnVuY3Rpb24gaGFzT3duIChvYmosIGtleSkge1xuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgY2FjaGVkIHZlcnNpb24gb2YgYSBwdXJlIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gY2FjaGVkIChmbikge1xuXHQgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgcmV0dXJuIChmdW5jdGlvbiBjYWNoZWRGbiAoc3RyKSB7XG5cdCAgICB2YXIgaGl0ID0gY2FjaGVbc3RyXTtcblx0ICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKVxuXHQgIH0pXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxpbWl0ZWQgc3RyaW5nLlxuXHQgKi9cblx0dmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG5cdHZhciBjYW1lbGl6ZSA9IGNhY2hlZChmdW5jdGlvbiAoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIGZ1bmN0aW9uIChfLCBjKSB7IHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7IH0pXG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIENhcGl0YWxpemUgYSBzdHJpbmcuXG5cdCAqL1xuXHR2YXIgY2FwaXRhbGl6ZSA9IGNhY2hlZChmdW5jdGlvbiAoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuXHQgKi9cblx0dmFyIGh5cGhlbmF0ZVJFID0gL1xcQihbQS1aXSkvZztcblx0dmFyIGh5cGhlbmF0ZSA9IGNhY2hlZChmdW5jdGlvbiAoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnLSQxJykudG9Mb3dlckNhc2UoKVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUgYmluZCBwb2x5ZmlsbCBmb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IHN1cHBvcnQgaXQuLi4gZS5nLlxuXHQgKiBQaGFudG9tSlMgMS54LiBUZWNobmljYWxseSB3ZSBkb24ndCBuZWVkIHRoaXMgYW55bW9yZSBzaW5jZSBuYXRpdmUgYmluZCBpc1xuXHQgKiBub3cgbW9yZSBwZXJmb3JtYW50IGluIG1vc3QgYnJvd3NlcnMsIGJ1dCByZW1vdmluZyBpdCB3b3VsZCBiZSBicmVha2luZyBmb3Jcblx0ICogY29kZSB0aGF0IHdhcyBhYmxlIHRvIHJ1biBpbiBQaGFudG9tSlMgMS54LCBzbyB0aGlzIG11c3QgYmUga2VwdCBmb3Jcblx0ICogYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5cdCAqL1xuXHRcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ZnVuY3Rpb24gcG9seWZpbGxCaW5kIChmbiwgY3R4KSB7XG5cdCAgZnVuY3Rpb24gYm91bmRGbiAoYSkge1xuXHQgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgcmV0dXJuIGxcblx0ICAgICAgPyBsID4gMVxuXHQgICAgICAgID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpXG5cdCAgICAgICAgOiBmbi5jYWxsKGN0eCwgYSlcblx0ICAgICAgOiBmbi5jYWxsKGN0eClcblx0ICB9XG5cdFxuXHQgIGJvdW5kRm4uX2xlbmd0aCA9IGZuLmxlbmd0aDtcblx0ICByZXR1cm4gYm91bmRGblxuXHR9XG5cdFxuXHRmdW5jdGlvbiBuYXRpdmVCaW5kIChmbiwgY3R4KSB7XG5cdCAgcmV0dXJuIGZuLmJpbmQoY3R4KVxuXHR9XG5cdFxuXHR2YXIgYmluZCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kXG5cdCAgPyBuYXRpdmVCaW5kXG5cdCAgOiBwb2x5ZmlsbEJpbmQ7XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FycmF5IChsaXN0LCBzdGFydCkge1xuXHQgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcblx0ICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1peCBwcm9wZXJ0aWVzIGludG8gdGFyZ2V0IG9iamVjdC5cblx0ICovXG5cdGZ1bmN0aW9uIGV4dGVuZCAodG8sIF9mcm9tKSB7XG5cdCAgZm9yICh2YXIga2V5IGluIF9mcm9tKSB7XG5cdCAgICB0b1trZXldID0gX2Zyb21ba2V5XTtcblx0ICB9XG5cdCAgcmV0dXJuIHRvXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNZXJnZSBhbiBBcnJheSBvZiBPYmplY3RzIGludG8gYSBzaW5nbGUgT2JqZWN0LlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9PYmplY3QgKGFycikge1xuXHQgIHZhciByZXMgPSB7fTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKGFycltpXSkge1xuXHQgICAgICBleHRlbmQocmVzLCBhcnJbaV0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQZXJmb3JtIG5vIG9wZXJhdGlvbi5cblx0ICogU3R1YmJpbmcgYXJncyB0byBtYWtlIEZsb3cgaGFwcHkgd2l0aG91dCBsZWF2aW5nIHVzZWxlc3MgdHJhbnNwaWxlZCBjb2RlXG5cdCAqIHdpdGggLi4ucmVzdCAoaHR0cHM6Ly9mbG93Lm9yZy9ibG9nLzIwMTcvMDUvMDcvU3RyaWN0LUZ1bmN0aW9uLUNhbGwtQXJpdHkvKVxuXHQgKi9cblx0ZnVuY3Rpb24gbm9vcCAoYSwgYiwgYykge31cblx0XG5cdC8qKlxuXHQgKiBBbHdheXMgcmV0dXJuIGZhbHNlLlxuXHQgKi9cblx0dmFyIG5vID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsgcmV0dXJuIGZhbHNlOyB9O1xuXHRcblx0LyoqXG5cdCAqIFJldHVybiBzYW1lIHZhbHVlXG5cdCAqL1xuXHR2YXIgaWRlbnRpdHkgPSBmdW5jdGlvbiAoXykgeyByZXR1cm4gXzsgfTtcblx0XG5cdC8qKlxuXHQgKiBHZW5lcmF0ZSBhIHN0YXRpYyBrZXlzIHN0cmluZyBmcm9tIGNvbXBpbGVyIG1vZHVsZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZW5TdGF0aWNLZXlzIChtb2R1bGVzKSB7XG5cdCAgcmV0dXJuIG1vZHVsZXMucmVkdWNlKGZ1bmN0aW9uIChrZXlzLCBtKSB7XG5cdCAgICByZXR1cm4ga2V5cy5jb25jYXQobS5zdGF0aWNLZXlzIHx8IFtdKVxuXHQgIH0sIFtdKS5qb2luKCcsJylcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuXHQgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG5cdCAqL1xuXHRmdW5jdGlvbiBsb29zZUVxdWFsIChhLCBiKSB7XG5cdCAgaWYgKGEgPT09IGIpIHsgcmV0dXJuIHRydWUgfVxuXHQgIHZhciBpc09iamVjdEEgPSBpc09iamVjdChhKTtcblx0ICB2YXIgaXNPYmplY3RCID0gaXNPYmplY3QoYik7XG5cdCAgaWYgKGlzT2JqZWN0QSAmJiBpc09iamVjdEIpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBpc0FycmF5QSA9IEFycmF5LmlzQXJyYXkoYSk7XG5cdCAgICAgIHZhciBpc0FycmF5QiA9IEFycmF5LmlzQXJyYXkoYik7XG5cdCAgICAgIGlmIChpc0FycmF5QSAmJiBpc0FycmF5Qikge1xuXHQgICAgICAgIHJldHVybiBhLmxlbmd0aCA9PT0gYi5sZW5ndGggJiYgYS5ldmVyeShmdW5jdGlvbiAoZSwgaSkge1xuXHQgICAgICAgICAgcmV0dXJuIGxvb3NlRXF1YWwoZSwgYltpXSlcblx0ICAgICAgICB9KVxuXHQgICAgICB9IGVsc2UgaWYgKCFpc0FycmF5QSAmJiAhaXNBcnJheUIpIHtcblx0ICAgICAgICB2YXIga2V5c0EgPSBPYmplY3Qua2V5cyhhKTtcblx0ICAgICAgICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhiKTtcblx0ICAgICAgICByZXR1cm4ga2V5c0EubGVuZ3RoID09PSBrZXlzQi5sZW5ndGggJiYga2V5c0EuZXZlcnkoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgICAgcmV0dXJuIGxvb3NlRXF1YWwoYVtrZXldLCBiW2tleV0pXG5cdCAgICAgICAgfSlcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoIWlzT2JqZWN0QSAmJiAhaXNPYmplY3RCKSB7XG5cdCAgICByZXR1cm4gU3RyaW5nKGEpID09PSBTdHJpbmcoYilcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsb29zZUluZGV4T2YgKGFyciwgdmFsKSB7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkgeyByZXR1cm4gaSB9XG5cdCAgfVxuXHQgIHJldHVybiAtMVxuXHR9XG5cdFxuXHQvKipcblx0ICogRW5zdXJlIGEgZnVuY3Rpb24gaXMgY2FsbGVkIG9ubHkgb25jZS5cblx0ICovXG5cdGZ1bmN0aW9uIG9uY2UgKGZuKSB7XG5cdCAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIWNhbGxlZCkge1xuXHQgICAgICBjYWxsZWQgPSB0cnVlO1xuXHQgICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIFNTUl9BVFRSID0gJ2RhdGEtc2VydmVyLXJlbmRlcmVkJztcblx0XG5cdHZhciBBU1NFVF9UWVBFUyA9IFtcblx0ICAnY29tcG9uZW50Jyxcblx0ICAnZGlyZWN0aXZlJyxcblx0ICAnZmlsdGVyJ1xuXHRdO1xuXHRcblx0dmFyIExJRkVDWUNMRV9IT09LUyA9IFtcblx0ICAnYmVmb3JlQ3JlYXRlJyxcblx0ICAnY3JlYXRlZCcsXG5cdCAgJ2JlZm9yZU1vdW50Jyxcblx0ICAnbW91bnRlZCcsXG5cdCAgJ2JlZm9yZVVwZGF0ZScsXG5cdCAgJ3VwZGF0ZWQnLFxuXHQgICdiZWZvcmVEZXN0cm95Jyxcblx0ICAnZGVzdHJveWVkJyxcblx0ICAnYWN0aXZhdGVkJyxcblx0ICAnZGVhY3RpdmF0ZWQnLFxuXHQgICdlcnJvckNhcHR1cmVkJ1xuXHRdO1xuXHRcblx0LyogICovXG5cdFxuXHR2YXIgY29uZmlnID0gKHtcblx0ICAvKipcblx0ICAgKiBPcHRpb24gbWVyZ2Ugc3RyYXRlZ2llcyAodXNlZCBpbiBjb3JlL3V0aWwvb3B0aW9ucylcblx0ICAgKi9cblx0ICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICBvcHRpb25NZXJnZVN0cmF0ZWdpZXM6IE9iamVjdC5jcmVhdGUobnVsbCksXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gc3VwcHJlc3Mgd2FybmluZ3MuXG5cdCAgICovXG5cdCAgc2lsZW50OiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogU2hvdyBwcm9kdWN0aW9uIG1vZGUgdGlwIG1lc3NhZ2Ugb24gYm9vdD9cblx0ICAgKi9cblx0ICBwcm9kdWN0aW9uVGlwOiBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBlbmFibGUgZGV2dG9vbHNcblx0ICAgKi9cblx0ICBkZXZ0b29sczogXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gcmVjb3JkIHBlcmZcblx0ICAgKi9cblx0ICBwZXJmb3JtYW5jZTogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEVycm9yIGhhbmRsZXIgZm9yIHdhdGNoZXIgZXJyb3JzXG5cdCAgICovXG5cdCAgZXJyb3JIYW5kbGVyOiBudWxsLFxuXHRcblx0ICAvKipcblx0ICAgKiBXYXJuIGhhbmRsZXIgZm9yIHdhdGNoZXIgd2FybnNcblx0ICAgKi9cblx0ICB3YXJuSGFuZGxlcjogbnVsbCxcblx0XG5cdCAgLyoqXG5cdCAgICogSWdub3JlIGNlcnRhaW4gY3VzdG9tIGVsZW1lbnRzXG5cdCAgICovXG5cdCAgaWdub3JlZEVsZW1lbnRzOiBbXSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3VzdG9tIHVzZXIga2V5IGFsaWFzZXMgZm9yIHYtb25cblx0ICAgKi9cblx0ICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICBrZXlDb2RlczogT2JqZWN0LmNyZWF0ZShudWxsKSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYSB0YWcgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBhcyBhXG5cdCAgICogY29tcG9uZW50LiBUaGlzIGlzIHBsYXRmb3JtLWRlcGVuZGVudCBhbmQgbWF5IGJlIG92ZXJ3cml0dGVuLlxuXHQgICAqL1xuXHQgIGlzUmVzZXJ2ZWRUYWc6IG5vLFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBpZiBhbiBhdHRyaWJ1dGUgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgdXNlZCBhcyBhIGNvbXBvbmVudFxuXHQgICAqIHByb3AuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uXG5cdCAgICovXG5cdCAgaXNSZXNlcnZlZEF0dHI6IG5vLFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBpZiBhIHRhZyBpcyBhbiB1bmtub3duIGVsZW1lbnQuXG5cdCAgICogUGxhdGZvcm0tZGVwZW5kZW50LlxuXHQgICAqL1xuXHQgIGlzVW5rbm93bkVsZW1lbnQ6IG5vLFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgdGhlIG5hbWVzcGFjZSBvZiBhbiBlbGVtZW50XG5cdCAgICovXG5cdCAgZ2V0VGFnTmFtZXNwYWNlOiBub29wLFxuXHRcblx0ICAvKipcblx0ICAgKiBQYXJzZSB0aGUgcmVhbCB0YWcgbmFtZSBmb3IgdGhlIHNwZWNpZmljIHBsYXRmb3JtLlxuXHQgICAqL1xuXHQgIHBhcnNlUGxhdGZvcm1UYWdOYW1lOiBpZGVudGl0eSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYW4gYXR0cmlidXRlIG11c3QgYmUgYm91bmQgdXNpbmcgcHJvcGVydHksIGUuZy4gdmFsdWVcblx0ICAgKiBQbGF0Zm9ybS1kZXBlbmRlbnQuXG5cdCAgICovXG5cdCAgbXVzdFVzZVByb3A6IG5vLFxuXHRcblx0ICAvKipcblx0ICAgKiBFeHBvc2VkIGZvciBsZWdhY3kgcmVhc29uc1xuXHQgICAqL1xuXHQgIF9saWZlY3ljbGVIb29rczogTElGRUNZQ0xFX0hPT0tTXG5cdH0pXG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cblx0ICovXG5cdGZ1bmN0aW9uIGlzUmVzZXJ2ZWQgKHN0cikge1xuXHQgIHZhciBjID0gKHN0ciArICcnKS5jaGFyQ29kZUF0KDApO1xuXHQgIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUZcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHByb3BlcnR5LlxuXHQgKi9cblx0ZnVuY3Rpb24gZGVmIChvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICB2YWx1ZTogdmFsLFxuXHQgICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuXHQgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIHNpbXBsZSBwYXRoLlxuXHQgKi9cblx0dmFyIGJhaWxSRSA9IC9bXlxcdy4kXS87XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aCAocGF0aCkge1xuXHQgIGlmIChiYWlsUkUudGVzdChwYXRoKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKTtcblx0ICByZXR1cm4gZnVuY3Rpb24gKG9iaikge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAoIW9iaikgeyByZXR1cm4gfVxuXHQgICAgICBvYmogPSBvYmpbc2VnbWVudHNbaV1dO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9ialxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyBjYW4gd2UgdXNlIF9fcHJvdG9fXz9cblx0dmFyIGhhc1Byb3RvID0gJ19fcHJvdG9fXycgaW4ge307XG5cdFxuXHQvLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG5cdHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcblx0dmFyIGluV2VleCA9IHR5cGVvZiBXWEVudmlyb25tZW50ICE9PSAndW5kZWZpbmVkJyAmJiAhIVdYRW52aXJvbm1lbnQucGxhdGZvcm07XG5cdHZhciB3ZWV4UGxhdGZvcm0gPSBpbldlZXggJiYgV1hFbnZpcm9ubWVudC5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpO1xuXHR2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcblx0dmFyIGlzSUUgPSBVQSAmJiAvbXNpZXx0cmlkZW50Ly50ZXN0KFVBKTtcblx0dmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG5cdHZhciBpc0VkZ2UgPSBVQSAmJiBVQS5pbmRleE9mKCdlZGdlLycpID4gMDtcblx0dmFyIGlzQW5kcm9pZCA9IChVQSAmJiBVQS5pbmRleE9mKCdhbmRyb2lkJykgPiAwKSB8fCAod2VleFBsYXRmb3JtID09PSAnYW5kcm9pZCcpO1xuXHR2YXIgaXNJT1MgPSAoVUEgJiYgL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KFVBKSkgfHwgKHdlZXhQbGF0Zm9ybSA9PT0gJ2lvcycpO1xuXHR2YXIgaXNDaHJvbWUgPSBVQSAmJiAvY2hyb21lXFwvXFxkKy8udGVzdChVQSkgJiYgIWlzRWRnZTtcblx0XG5cdC8vIEZpcmVmb3ggaGFzIGEgXCJ3YXRjaFwiIGZ1bmN0aW9uIG9uIE9iamVjdC5wcm90b3R5cGUuLi5cblx0dmFyIG5hdGl2ZVdhdGNoID0gKHt9KS53YXRjaDtcblx0XG5cdHZhciBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcblx0aWYgKGluQnJvd3Nlcikge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgb3B0cyA9IHt9O1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdHMsICdwYXNzaXZlJywgKHtcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfSkpOyAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvMjg1XG5cdCAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdC1wYXNzaXZlJywgbnVsbCwgb3B0cyk7XG5cdCAgfSBjYXRjaCAoZSkge31cblx0fVxuXHRcblx0Ly8gdGhpcyBuZWVkcyB0byBiZSBsYXp5LWV2YWxlZCBiZWNhdXNlIHZ1ZSBtYXkgYmUgcmVxdWlyZWQgYmVmb3JlXG5cdC8vIHZ1ZS1zZXJ2ZXItcmVuZGVyZXIgY2FuIHNldCBWVUVfRU5WXG5cdHZhciBfaXNTZXJ2ZXI7XG5cdHZhciBpc1NlcnZlclJlbmRlcmluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoX2lzU2VydmVyID09PSB1bmRlZmluZWQpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFpbkJyb3dzZXIgJiYgIWluV2VleCAmJiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAvLyBkZXRlY3QgcHJlc2VuY2Ugb2YgdnVlLXNlcnZlci1yZW5kZXJlciBhbmQgYXZvaWRcblx0ICAgICAgLy8gV2VicGFjayBzaGltbWluZyB0aGUgcHJvY2Vzc1xuXHQgICAgICBfaXNTZXJ2ZXIgPSBnbG9iYWxbJ3Byb2Nlc3MnXS5lbnYuVlVFX0VOViA9PT0gJ3NlcnZlcic7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBfaXNTZXJ2ZXIgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIF9pc1NlcnZlclxuXHR9O1xuXHRcblx0Ly8gZGV0ZWN0IGRldnRvb2xzXG5cdHZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblx0XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGZ1bmN0aW9uIGlzTmF0aXZlIChDdG9yKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBDdG9yID09PSAnZnVuY3Rpb24nICYmIC9uYXRpdmUgY29kZS8udGVzdChDdG9yLnRvU3RyaW5nKCkpXG5cdH1cblx0XG5cdHZhciBoYXNTeW1ib2wgPVxuXHQgIHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFN5bWJvbCkgJiZcblx0ICB0eXBlb2YgUmVmbGVjdCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUmVmbGVjdC5vd25LZXlzKTtcblx0XG5cdHZhciBfU2V0O1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8gLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdGlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTZXQpKSB7XG5cdCAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG5cdCAgX1NldCA9IFNldDtcblx0fSBlbHNlIHtcblx0ICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG5cdCAgX1NldCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTZXQgKCkge1xuXHQgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICB9XG5cdCAgICBTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIGhhcyAoa2V5KSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNldFtrZXldID09PSB0cnVlXG5cdCAgICB9O1xuXHQgICAgU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQgKGtleSkge1xuXHQgICAgICB0aGlzLnNldFtrZXldID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIgKCkge1xuXHQgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBTZXQ7XG5cdCAgfSgpKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgd2FybiA9IG5vb3A7XG5cdHZhciB0aXAgPSBub29wO1xuXHR2YXIgZ2VuZXJhdGVDb21wb25lbnRUcmFjZSA9IChub29wKTsgLy8gd29yayBhcm91bmQgZmxvdyBjaGVja1xuXHR2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IChub29wKTtcblx0XG5cdHtcblx0ICB2YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcblx0ICB2YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX10pKFxcdykvZztcblx0ICB2YXIgY2xhc3NpZnkgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBzdHJcblx0ICAgIC5yZXBsYWNlKGNsYXNzaWZ5UkUsIGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLnRvVXBwZXJDYXNlKCk7IH0pXG5cdCAgICAucmVwbGFjZSgvWy1fXS9nLCAnJyk7IH07XG5cdFxuXHQgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuXHQgICAgdmFyIHRyYWNlID0gdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnO1xuXHRcblx0ICAgIGlmIChjb25maWcud2FybkhhbmRsZXIpIHtcblx0ICAgICAgY29uZmlnLndhcm5IYW5kbGVyLmNhbGwobnVsbCwgbXNnLCB2bSwgdHJhY2UpO1xuXHQgICAgfSBlbHNlIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCkpIHtcblx0ICAgICAgY29uc29sZS5lcnJvcigoXCJbVnVlIHdhcm5dOiBcIiArIG1zZyArIHRyYWNlKSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgdGlwID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcblx0ICAgIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCkpIHtcblx0ICAgICAgY29uc29sZS53YXJuKFwiW1Z1ZSB0aXBdOiBcIiArIG1zZyArIChcblx0ICAgICAgICB2bSA/IGdlbmVyYXRlQ29tcG9uZW50VHJhY2Uodm0pIDogJydcblx0ICAgICAgKSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSwgaW5jbHVkZUZpbGUpIHtcblx0ICAgIGlmICh2bS4kcm9vdCA9PT0gdm0pIHtcblx0ICAgICAgcmV0dXJuICc8Um9vdD4nXG5cdCAgICB9XG5cdCAgICB2YXIgb3B0aW9ucyA9IHR5cGVvZiB2bSA9PT0gJ2Z1bmN0aW9uJyAmJiB2bS5jaWQgIT0gbnVsbFxuXHQgICAgICA/IHZtLm9wdGlvbnNcblx0ICAgICAgOiB2bS5faXNWdWVcblx0ICAgICAgICA/IHZtLiRvcHRpb25zIHx8IHZtLmNvbnN0cnVjdG9yLm9wdGlvbnNcblx0ICAgICAgICA6IHZtIHx8IHt9O1xuXHQgICAgdmFyIG5hbWUgPSBvcHRpb25zLm5hbWUgfHwgb3B0aW9ucy5fY29tcG9uZW50VGFnO1xuXHQgICAgdmFyIGZpbGUgPSBvcHRpb25zLl9fZmlsZTtcblx0ICAgIGlmICghbmFtZSAmJiBmaWxlKSB7XG5cdCAgICAgIHZhciBtYXRjaCA9IGZpbGUubWF0Y2goLyhbXi9cXFxcXSspXFwudnVlJC8pO1xuXHQgICAgICBuYW1lID0gbWF0Y2ggJiYgbWF0Y2hbMV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIChcblx0ICAgICAgKG5hbWUgPyAoXCI8XCIgKyAoY2xhc3NpZnkobmFtZSkpICsgXCI+XCIpIDogXCI8QW5vbnltb3VzPlwiKSArXG5cdCAgICAgIChmaWxlICYmIGluY2x1ZGVGaWxlICE9PSBmYWxzZSA/IChcIiBhdCBcIiArIGZpbGUpIDogJycpXG5cdCAgICApXG5cdCAgfTtcblx0XG5cdCAgdmFyIHJlcGVhdCA9IGZ1bmN0aW9uIChzdHIsIG4pIHtcblx0ICAgIHZhciByZXMgPSAnJztcblx0ICAgIHdoaWxlIChuKSB7XG5cdCAgICAgIGlmIChuICUgMiA9PT0gMSkgeyByZXMgKz0gc3RyOyB9XG5cdCAgICAgIGlmIChuID4gMSkgeyBzdHIgKz0gc3RyOyB9XG5cdCAgICAgIG4gPj49IDE7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzXG5cdCAgfTtcblx0XG5cdCAgZ2VuZXJhdGVDb21wb25lbnRUcmFjZSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgICAgaWYgKHZtLl9pc1Z1ZSAmJiB2bS4kcGFyZW50KSB7XG5cdCAgICAgIHZhciB0cmVlID0gW107XG5cdCAgICAgIHZhciBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPSAwO1xuXHQgICAgICB3aGlsZSAodm0pIHtcblx0ICAgICAgICBpZiAodHJlZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB2YXIgbGFzdCA9IHRyZWVbdHJlZS5sZW5ndGggLSAxXTtcblx0ICAgICAgICAgIGlmIChsYXN0LmNvbnN0cnVjdG9yID09PSB2bS5jb25zdHJ1Y3Rvcikge1xuXHQgICAgICAgICAgICBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UrKztcblx0ICAgICAgICAgICAgdm0gPSB2bS4kcGFyZW50O1xuXHQgICAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPiAwKSB7XG5cdCAgICAgICAgICAgIHRyZWVbdHJlZS5sZW5ndGggLSAxXSA9IFtsYXN0LCBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2VdO1xuXHQgICAgICAgICAgICBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPSAwO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0cmVlLnB1c2godm0pO1xuXHQgICAgICAgIHZtID0gdm0uJHBhcmVudDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gJ1xcblxcbmZvdW5kIGluXFxuXFxuJyArIHRyZWVcblx0ICAgICAgICAubWFwKGZ1bmN0aW9uICh2bSwgaSkgeyByZXR1cm4gKFwiXCIgKyAoaSA9PT0gMCA/ICctLS0+ICcgOiByZXBlYXQoJyAnLCA1ICsgaSAqIDIpKSArIChBcnJheS5pc0FycmF5KHZtKVxuXHQgICAgICAgICAgICA/ICgoZm9ybWF0Q29tcG9uZW50TmFtZSh2bVswXSkpICsgXCIuLi4gKFwiICsgKHZtWzFdKSArIFwiIHJlY3Vyc2l2ZSBjYWxscylcIilcblx0ICAgICAgICAgICAgOiBmb3JtYXRDb21wb25lbnROYW1lKHZtKSkpOyB9KVxuXHQgICAgICAgIC5qb2luKCdcXG4nKVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIChcIlxcblxcbihmb3VuZCBpbiBcIiArIChmb3JtYXRDb21wb25lbnROYW1lKHZtKSkgKyBcIilcIilcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdFxuXHR2YXIgdWlkID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcblx0ICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cblx0ICovXG5cdHZhciBEZXAgPSBmdW5jdGlvbiBEZXAgKCkge1xuXHQgIHRoaXMuaWQgPSB1aWQrKztcblx0ICB0aGlzLnN1YnMgPSBbXTtcblx0fTtcblx0XG5cdERlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gYWRkU3ViIChzdWIpIHtcblx0ICB0aGlzLnN1YnMucHVzaChzdWIpO1xuXHR9O1xuXHRcblx0RGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiByZW1vdmVTdWIgKHN1Yikge1xuXHQgIHJlbW92ZSh0aGlzLnN1YnMsIHN1Yik7XG5cdH07XG5cdFxuXHREZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uIGRlcGVuZCAoKSB7XG5cdCAgaWYgKERlcC50YXJnZXQpIHtcblx0ICAgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xuXHQgIH1cblx0fTtcblx0XG5cdERlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5ICgpIHtcblx0ICAvLyBzdGFiaWxpemUgdGhlIHN1YnNjcmliZXIgbGlzdCBmaXJzdFxuXHQgIHZhciBzdWJzID0gdGhpcy5zdWJzLnNsaWNlKCk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgc3Vic1tpXS51cGRhdGUoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG5cdC8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcblx0Ly8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5cdERlcC50YXJnZXQgPSBudWxsO1xuXHR2YXIgdGFyZ2V0U3RhY2sgPSBbXTtcblx0XG5cdGZ1bmN0aW9uIHB1c2hUYXJnZXQgKF90YXJnZXQpIHtcblx0ICBpZiAoRGVwLnRhcmdldCkgeyB0YXJnZXRTdGFjay5wdXNoKERlcC50YXJnZXQpOyB9XG5cdCAgRGVwLnRhcmdldCA9IF90YXJnZXQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBvcFRhcmdldCAoKSB7XG5cdCAgRGVwLnRhcmdldCA9IHRhcmdldFN0YWNrLnBvcCgpO1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBWTm9kZSA9IGZ1bmN0aW9uIFZOb2RlIChcblx0ICB0YWcsXG5cdCAgZGF0YSxcblx0ICBjaGlsZHJlbixcblx0ICB0ZXh0LFxuXHQgIGVsbSxcblx0ICBjb250ZXh0LFxuXHQgIGNvbXBvbmVudE9wdGlvbnMsXG5cdCAgYXN5bmNGYWN0b3J5XG5cdCkge1xuXHQgIHRoaXMudGFnID0gdGFnO1xuXHQgIHRoaXMuZGF0YSA9IGRhdGE7XG5cdCAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuXHQgIHRoaXMudGV4dCA9IHRleHQ7XG5cdCAgdGhpcy5lbG0gPSBlbG07XG5cdCAgdGhpcy5ucyA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXHQgIHRoaXMuZm5Db250ZXh0ID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuZm5PcHRpb25zID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuZm5TY29wZUlkID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMua2V5ID0gZGF0YSAmJiBkYXRhLmtleTtcblx0ICB0aGlzLmNvbXBvbmVudE9wdGlvbnMgPSBjb21wb25lbnRPcHRpb25zO1xuXHQgIHRoaXMuY29tcG9uZW50SW5zdGFuY2UgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5yYXcgPSBmYWxzZTtcblx0ICB0aGlzLmlzU3RhdGljID0gZmFsc2U7XG5cdCAgdGhpcy5pc1Jvb3RJbnNlcnQgPSB0cnVlO1xuXHQgIHRoaXMuaXNDb21tZW50ID0gZmFsc2U7XG5cdCAgdGhpcy5pc0Nsb25lZCA9IGZhbHNlO1xuXHQgIHRoaXMuaXNPbmNlID0gZmFsc2U7XG5cdCAgdGhpcy5hc3luY0ZhY3RvcnkgPSBhc3luY0ZhY3Rvcnk7XG5cdCAgdGhpcy5hc3luY01ldGEgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5pc0FzeW5jUGxhY2Vob2xkZXIgPSBmYWxzZTtcblx0fTtcblx0XG5cdHZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IGNoaWxkOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cdFxuXHQvLyBERVBSRUNBVEVEOiBhbGlhcyBmb3IgY29tcG9uZW50SW5zdGFuY2UgZm9yIGJhY2t3YXJkcyBjb21wYXQuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdHByb3RvdHlwZUFjY2Vzc29ycy5jaGlsZC5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHRoaXMuY29tcG9uZW50SW5zdGFuY2Vcblx0fTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBWTm9kZS5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyApO1xuXHRcblx0dmFyIGNyZWF0ZUVtcHR5Vk5vZGUgPSBmdW5jdGlvbiAodGV4dCkge1xuXHQgIGlmICggdGV4dCA9PT0gdm9pZCAwICkgdGV4dCA9ICcnO1xuXHRcblx0ICB2YXIgbm9kZSA9IG5ldyBWTm9kZSgpO1xuXHQgIG5vZGUudGV4dCA9IHRleHQ7XG5cdCAgbm9kZS5pc0NvbW1lbnQgPSB0cnVlO1xuXHQgIHJldHVybiBub2RlXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVUZXh0Vk5vZGUgKHZhbCkge1xuXHQgIHJldHVybiBuZXcgVk5vZGUodW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgU3RyaW5nKHZhbCkpXG5cdH1cblx0XG5cdC8vIG9wdGltaXplZCBzaGFsbG93IGNsb25lXG5cdC8vIHVzZWQgZm9yIHN0YXRpYyBub2RlcyBhbmQgc2xvdCBub2RlcyBiZWNhdXNlIHRoZXkgbWF5IGJlIHJldXNlZCBhY3Jvc3Ncblx0Ly8gbXVsdGlwbGUgcmVuZGVycywgY2xvbmluZyB0aGVtIGF2b2lkcyBlcnJvcnMgd2hlbiBET00gbWFuaXB1bGF0aW9ucyByZWx5XG5cdC8vIG9uIHRoZWlyIGVsbSByZWZlcmVuY2UuXG5cdGZ1bmN0aW9uIGNsb25lVk5vZGUgKHZub2RlKSB7XG5cdCAgdmFyIGNsb25lZCA9IG5ldyBWTm9kZShcblx0ICAgIHZub2RlLnRhZyxcblx0ICAgIHZub2RlLmRhdGEsXG5cdCAgICB2bm9kZS5jaGlsZHJlbixcblx0ICAgIHZub2RlLnRleHQsXG5cdCAgICB2bm9kZS5lbG0sXG5cdCAgICB2bm9kZS5jb250ZXh0LFxuXHQgICAgdm5vZGUuY29tcG9uZW50T3B0aW9ucyxcblx0ICAgIHZub2RlLmFzeW5jRmFjdG9yeVxuXHQgICk7XG5cdCAgY2xvbmVkLm5zID0gdm5vZGUubnM7XG5cdCAgY2xvbmVkLmlzU3RhdGljID0gdm5vZGUuaXNTdGF0aWM7XG5cdCAgY2xvbmVkLmtleSA9IHZub2RlLmtleTtcblx0ICBjbG9uZWQuaXNDb21tZW50ID0gdm5vZGUuaXNDb21tZW50O1xuXHQgIGNsb25lZC5mbkNvbnRleHQgPSB2bm9kZS5mbkNvbnRleHQ7XG5cdCAgY2xvbmVkLmZuT3B0aW9ucyA9IHZub2RlLmZuT3B0aW9ucztcblx0ICBjbG9uZWQuZm5TY29wZUlkID0gdm5vZGUuZm5TY29wZUlkO1xuXHQgIGNsb25lZC5pc0Nsb25lZCA9IHRydWU7XG5cdCAgcmV0dXJuIGNsb25lZFxuXHR9XG5cdFxuXHQvKlxuXHQgKiBub3QgdHlwZSBjaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBmbG93IGRvZXNuJ3QgcGxheSB3ZWxsIHdpdGhcblx0ICogZHluYW1pY2FsbHkgYWNjZXNzaW5nIG1ldGhvZHMgb24gQXJyYXkgcHJvdG90eXBlXG5cdCAqL1xuXHRcblx0dmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cdHZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pO1xuXHRcblx0dmFyIG1ldGhvZHNUb1BhdGNoID0gW1xuXHQgICdwdXNoJyxcblx0ICAncG9wJyxcblx0ICAnc2hpZnQnLFxuXHQgICd1bnNoaWZ0Jyxcblx0ICAnc3BsaWNlJyxcblx0ICAnc29ydCcsXG5cdCAgJ3JldmVyc2UnXG5cdF07XG5cdFxuXHQvKipcblx0ICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG5cdCAqL1xuXHRtZXRob2RzVG9QYXRjaC5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcblx0ICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2Rcblx0ICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG5cdCAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yICgpIHtcblx0ICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXHRcblx0ICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuXHQgICAgdmFyIGluc2VydGVkO1xuXHQgICAgc3dpdGNoIChtZXRob2QpIHtcblx0ICAgICAgY2FzZSAncHVzaCc6XG5cdCAgICAgIGNhc2UgJ3Vuc2hpZnQnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncztcblx0ICAgICAgICBicmVha1xuXHQgICAgICBjYXNlICdzcGxpY2UnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcblx0ICAgICAgICBicmVha1xuXHQgICAgfVxuXHQgICAgaWYgKGluc2VydGVkKSB7IG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7IH1cblx0ICAgIC8vIG5vdGlmeSBjaGFuZ2Vcblx0ICAgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICAgIHJldHVybiByZXN1bHRcblx0ICB9KTtcblx0fSk7XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xuXHRcblx0LyoqXG5cdCAqIEluIHNvbWUgY2FzZXMgd2UgbWF5IHdhbnQgdG8gZGlzYWJsZSBvYnNlcnZhdGlvbiBpbnNpZGUgYSBjb21wb25lbnQnc1xuXHQgKiB1cGRhdGUgY29tcHV0YXRpb24uXG5cdCAqL1xuXHR2YXIgc2hvdWxkT2JzZXJ2ZSA9IHRydWU7XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVPYnNlcnZpbmcgKHZhbHVlKSB7XG5cdCAgc2hvdWxkT2JzZXJ2ZSA9IHZhbHVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBpcyBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG5cdCAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRoZSB0YXJnZXRcblx0ICogb2JqZWN0J3MgcHJvcGVydHkga2V5cyBpbnRvIGdldHRlci9zZXR0ZXJzIHRoYXRcblx0ICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoIHVwZGF0ZXMuXG5cdCAqL1xuXHR2YXIgT2JzZXJ2ZXIgPSBmdW5jdGlvbiBPYnNlcnZlciAodmFsdWUpIHtcblx0ICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG5cdCAgdGhpcy52bUNvdW50ID0gMDtcblx0ICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHZhciBhdWdtZW50ID0gaGFzUHJvdG9cblx0ICAgICAgPyBwcm90b0F1Z21lbnRcblx0ICAgICAgOiBjb3B5QXVnbWVudDtcblx0ICAgIGF1Z21lbnQodmFsdWUsIGFycmF5TWV0aG9kcywgYXJyYXlLZXlzKTtcblx0ICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy53YWxrKHZhbHVlKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogV2FsayB0aHJvdWdoIGVhY2ggcHJvcGVydHkgYW5kIGNvbnZlcnQgdGhlbSBpbnRvXG5cdCAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuXHQgKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cblx0ICovXG5cdE9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gd2FsayAob2JqKSB7XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuXHQgICAgZGVmaW5lUmVhY3RpdmUob2JqLCBrZXlzW2ldKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZSBhIGxpc3Qgb2YgQXJyYXkgaXRlbXMuXG5cdCAqL1xuXHRPYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZUFycmF5ID0gZnVuY3Rpb24gb2JzZXJ2ZUFycmF5IChpdGVtcykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBoZWxwZXJzXG5cdFxuXHQvKipcblx0ICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuXHQgKiB0aGUgcHJvdG90eXBlIGNoYWluIHVzaW5nIF9fcHJvdG9fX1xuXHQgKi9cblx0ZnVuY3Rpb24gcHJvdG9BdWdtZW50ICh0YXJnZXQsIHNyYywga2V5cykge1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cdCAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyYztcblx0ICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgZGVmaW5pbmdcblx0ICogaGlkZGVuIHByb3BlcnRpZXMuXG5cdCAqL1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRmdW5jdGlvbiBjb3B5QXVnbWVudCAodGFyZ2V0LCBzcmMsIGtleXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgIGRlZih0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLFxuXHQgKiByZXR1cm5zIHRoZSBuZXcgb2JzZXJ2ZXIgaWYgc3VjY2Vzc2Z1bGx5IG9ic2VydmVkLFxuXHQgKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cblx0ICovXG5cdGZ1bmN0aW9uIG9ic2VydmUgKHZhbHVlLCBhc1Jvb3REYXRhKSB7XG5cdCAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgdmFsdWUgaW5zdGFuY2VvZiBWTm9kZSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciBvYjtcblx0ICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHtcblx0ICAgIG9iID0gdmFsdWUuX19vYl9fO1xuXHQgIH0gZWxzZSBpZiAoXG5cdCAgICBzaG91bGRPYnNlcnZlICYmXG5cdCAgICAhaXNTZXJ2ZXJSZW5kZXJpbmcoKSAmJlxuXHQgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJlxuXHQgICAgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiZcblx0ICAgICF2YWx1ZS5faXNWdWVcblx0ICApIHtcblx0ICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKGFzUm9vdERhdGEgJiYgb2IpIHtcblx0ICAgIG9iLnZtQ291bnQrKztcblx0ICB9XG5cdCAgcmV0dXJuIG9iXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBhbiBPYmplY3QuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZSAoXG5cdCAgb2JqLFxuXHQgIGtleSxcblx0ICB2YWwsXG5cdCAgY3VzdG9tU2V0dGVyLFxuXHQgIHNoYWxsb3dcblx0KSB7XG5cdCAgdmFyIGRlcCA9IG5ldyBEZXAoKTtcblx0XG5cdCAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cdCAgaWYgKHByb3BlcnR5ICYmIHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG5cdCAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcblx0ICBpZiAoIWdldHRlciAmJiBhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG5cdCAgICB2YWwgPSBvYmpba2V5XTtcblx0ICB9XG5cdCAgdmFyIHNldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LnNldDtcblx0XG5cdCAgdmFyIGNoaWxkT2IgPSAhc2hhbGxvdyAmJiBvYnNlcnZlKHZhbCk7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiByZWFjdGl2ZUdldHRlciAoKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgIGlmIChjaGlsZE9iKSB7XG5cdCAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcblx0ICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgICBkZXBlbmRBcnJheSh2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWx1ZVxuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIgKG5ld1ZhbCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuXHQgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZWxmLWNvbXBhcmUgKi9cblx0ICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUgfHwgKG5ld1ZhbCAhPT0gbmV3VmFsICYmIHZhbHVlICE9PSB2YWx1ZSkpIHtcblx0ICAgICAgICByZXR1cm5cblx0ICAgICAgfVxuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlbGYtY29tcGFyZSAqL1xuXHQgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY3VzdG9tU2V0dGVyKSB7XG5cdCAgICAgICAgY3VzdG9tU2V0dGVyKCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHNldHRlcikge1xuXHQgICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWwgPSBuZXdWYWw7XG5cdCAgICAgIH1cblx0ICAgICAgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUobmV3VmFsKTtcblx0ICAgICAgZGVwLm5vdGlmeSgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHkgYW5kXG5cdCAqIHRyaWdnZXJzIGNoYW5nZSBub3RpZmljYXRpb24gaWYgdGhlIHByb3BlcnR5IGRvZXNuJ3Rcblx0ICogYWxyZWFkeSBleGlzdC5cblx0ICovXG5cdGZ1bmN0aW9uIHNldCAodGFyZ2V0LCBrZXksIHZhbCkge1xuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgIUFycmF5LmlzQXJyYXkodGFyZ2V0KSAmJlxuXHQgICAgIWlzT2JqZWN0KHRhcmdldClcblx0ICApIHtcblx0ICAgIHdhcm4oKFwiQ2Fubm90IHNldCByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBub24tb2JqZWN0L2FycmF5IHZhbHVlOiBcIiArIHRhcmdldCkpO1xuXHQgIH1cblx0ICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHtcblx0ICAgIHRhcmdldC5sZW5ndGggPSBNYXRoLm1heCh0YXJnZXQubGVuZ3RoLCBrZXkpO1xuXHQgICAgdGFyZ2V0LnNwbGljZShrZXksIDEsIHZhbCk7XG5cdCAgICByZXR1cm4gdmFsXG5cdCAgfVxuXHQgIGlmIChrZXkgaW4gdGFyZ2V0ICYmICEoa2V5IGluIE9iamVjdC5wcm90b3R5cGUpKSB7XG5cdCAgICB0YXJnZXRba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybiB2YWxcblx0ICB9XG5cdCAgdmFyIG9iID0gKHRhcmdldCkuX19vYl9fO1xuXHQgIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkge1xuXHQgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgJ0F2b2lkIGFkZGluZyByZWFjdGl2ZSBwcm9wZXJ0aWVzIHRvIGEgVnVlIGluc3RhbmNlIG9yIGl0cyByb290ICRkYXRhICcgK1xuXHQgICAgICAnYXQgcnVudGltZSAtIGRlY2xhcmUgaXQgdXBmcm9udCBpbiB0aGUgZGF0YSBvcHRpb24uJ1xuXHQgICAgKTtcblx0ICAgIHJldHVybiB2YWxcblx0ICB9XG5cdCAgaWYgKCFvYikge1xuXHQgICAgdGFyZ2V0W2tleV0gPSB2YWw7XG5cdCAgICByZXR1cm4gdmFsXG5cdCAgfVxuXHQgIGRlZmluZVJlYWN0aXZlKG9iLnZhbHVlLCBrZXksIHZhbCk7XG5cdCAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWwgKHRhcmdldCwga2V5KSB7XG5cdCAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAhQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmXG5cdCAgICAhaXNPYmplY3QodGFyZ2V0KVxuXHQgICkge1xuXHQgICAgd2FybigoXCJDYW5ub3QgZGVsZXRlIHJlYWN0aXZlIHByb3BlcnR5IG9uIG5vbi1vYmplY3QvYXJyYXkgdmFsdWU6IFwiICsgdGFyZ2V0KSk7XG5cdCAgfVxuXHQgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkgJiYgaXNWYWxpZEFycmF5SW5kZXgoa2V5KSkge1xuXHQgICAgdGFyZ2V0LnNwbGljZShrZXksIDEpO1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciBvYiA9ICh0YXJnZXQpLl9fb2JfXztcblx0ICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCAob2IgJiYgb2Iudm1Db3VudCkpIHtcblx0ICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICdBdm9pZCBkZWxldGluZyBwcm9wZXJ0aWVzIG9uIGEgVnVlIGluc3RhbmNlIG9yIGl0cyByb290ICRkYXRhICcgK1xuXHQgICAgICAnLSBqdXN0IHNldCBpdCB0byBudWxsLidcblx0ICAgICk7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgaWYgKCFoYXNPd24odGFyZ2V0LCBrZXkpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgZGVsZXRlIHRhcmdldFtrZXldO1xuXHQgIGlmICghb2IpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb2xsZWN0IGRlcGVuZGVuY2llcyBvbiBhcnJheSBlbGVtZW50cyB3aGVuIHRoZSBhcnJheSBpcyB0b3VjaGVkLCBzaW5jZVxuXHQgKiB3ZSBjYW5ub3QgaW50ZXJjZXB0IGFycmF5IGVsZW1lbnQgYWNjZXNzIGxpa2UgcHJvcGVydHkgZ2V0dGVycy5cblx0ICovXG5cdGZ1bmN0aW9uIGRlcGVuZEFycmF5ICh2YWx1ZSkge1xuXHQgIGZvciAodmFyIGUgPSAodm9pZCAwKSwgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGUgPSB2YWx1ZVtpXTtcblx0ICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpO1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHtcblx0ICAgICAgZGVwZW5kQXJyYXkoZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG5cdCAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG5cdCAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxuXHQgKi9cblx0dmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG5cdFxuXHQvKipcblx0ICogT3B0aW9ucyB3aXRoIHJlc3RyaWN0aW9uc1xuXHQgKi9cblx0e1xuXHQgIHN0cmF0cy5lbCA9IHN0cmF0cy5wcm9wc0RhdGEgPSBmdW5jdGlvbiAocGFyZW50LCBjaGlsZCwgdm0sIGtleSkge1xuXHQgICAgaWYgKCF2bSkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgIFwib3B0aW9uIFxcXCJcIiArIGtleSArIFwiXFxcIiBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBpbnN0YW5jZSBcIiArXG5cdCAgICAgICAgJ2NyZWF0aW9uIHdpdGggdGhlIGBuZXdgIGtleXdvcmQuJ1xuXHQgICAgICApO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRlZmF1bHRTdHJhdChwYXJlbnQsIGNoaWxkKVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlRGF0YSAodG8sIGZyb20pIHtcblx0ICBpZiAoIWZyb20pIHsgcmV0dXJuIHRvIH1cblx0ICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuXHQgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgIHRvVmFsID0gdG9ba2V5XTtcblx0ICAgIGZyb21WYWwgPSBmcm9tW2tleV07XG5cdCAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuXHQgICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG5cdCAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodG9WYWwpICYmIGlzUGxhaW5PYmplY3QoZnJvbVZhbCkpIHtcblx0ICAgICAgbWVyZ2VEYXRhKHRvVmFsLCBmcm9tVmFsKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRvXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEYXRhXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZURhdGFPckZuIChcblx0ICBwYXJlbnRWYWwsXG5cdCAgY2hpbGRWYWwsXG5cdCAgdm1cblx0KSB7XG5cdCAgaWYgKCF2bSkge1xuXHQgICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnNcblx0ICAgIGlmICghY2hpbGRWYWwpIHtcblx0ICAgICAgcmV0dXJuIHBhcmVudFZhbFxuXHQgICAgfVxuXHQgICAgaWYgKCFwYXJlbnRWYWwpIHtcblx0ICAgICAgcmV0dXJuIGNoaWxkVmFsXG5cdCAgICB9XG5cdCAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG5cdCAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcblx0ICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0b1xuXHQgICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG5cdCAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4gKCkge1xuXHQgICAgICByZXR1cm4gbWVyZ2VEYXRhKFxuXHQgICAgICAgIHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodGhpcywgdGhpcykgOiBjaGlsZFZhbCxcblx0ICAgICAgICB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodGhpcywgdGhpcykgOiBwYXJlbnRWYWxcblx0ICAgICAgKVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4gKCkge1xuXHQgICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuXHQgICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nXG5cdCAgICAgICAgPyBjaGlsZFZhbC5jYWxsKHZtLCB2bSlcblx0ICAgICAgICA6IGNoaWxkVmFsO1xuXHQgICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nXG5cdCAgICAgICAgPyBwYXJlbnRWYWwuY2FsbCh2bSwgdm0pXG5cdCAgICAgICAgOiBwYXJlbnRWYWw7XG5cdCAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcblx0ICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKFxuXHQgIHBhcmVudFZhbCxcblx0ICBjaGlsZFZhbCxcblx0ICB2bVxuXHQpIHtcblx0ICBpZiAoIXZtKSB7XG5cdCAgICBpZiAoY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgJ1RoZSBcImRhdGFcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArXG5cdCAgICAgICAgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArXG5cdCAgICAgICAgJ2RlZmluaXRpb25zLicsXG5cdCAgICAgICAgdm1cblx0ICAgICAgKTtcblx0XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWxcblx0ICAgIH1cblx0ICAgIHJldHVybiBtZXJnZURhdGFPckZuKHBhcmVudFZhbCwgY2hpbGRWYWwpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSlcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBIb29rcyBhbmQgcHJvcHMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZUhvb2sgKFxuXHQgIHBhcmVudFZhbCxcblx0ICBjaGlsZFZhbFxuXHQpIHtcblx0ICByZXR1cm4gY2hpbGRWYWxcblx0ICAgID8gcGFyZW50VmFsXG5cdCAgICAgID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbClcblx0ICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkVmFsKVxuXHQgICAgICAgID8gY2hpbGRWYWxcblx0ICAgICAgICA6IFtjaGlsZFZhbF1cblx0ICAgIDogcGFyZW50VmFsXG5cdH1cblx0XG5cdExJRkVDWUNMRV9IT09LUy5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XG5cdCAgc3RyYXRzW2hvb2tdID0gbWVyZ2VIb29rO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBBc3NldHNcblx0ICpcblx0ICogV2hlbiBhIHZtIGlzIHByZXNlbnQgKGluc3RhbmNlIGNyZWF0aW9uKSwgd2UgbmVlZCB0byBkb1xuXHQgKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG5cdCAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VBc3NldHMgKFxuXHQgIHBhcmVudFZhbCxcblx0ICBjaGlsZFZhbCxcblx0ICB2bSxcblx0ICBrZXlcblx0KSB7XG5cdCAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuXHQgIGlmIChjaGlsZFZhbCkge1xuXHQgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgYXNzZXJ0T2JqZWN0VHlwZShrZXksIGNoaWxkVmFsLCB2bSk7XG5cdCAgICByZXR1cm4gZXh0ZW5kKHJlcywgY2hpbGRWYWwpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiByZXNcblx0ICB9XG5cdH1cblx0XG5cdEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcblx0fSk7XG5cdFxuXHQvKipcblx0ICogV2F0Y2hlcnMuXG5cdCAqXG5cdCAqIFdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcblx0ICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG5cdCAqL1xuXHRzdHJhdHMud2F0Y2ggPSBmdW5jdGlvbiAoXG5cdCAgcGFyZW50VmFsLFxuXHQgIGNoaWxkVmFsLFxuXHQgIHZtLFxuXHQgIGtleVxuXHQpIHtcblx0ICAvLyB3b3JrIGFyb3VuZCBGaXJlZm94J3MgT2JqZWN0LnByb3RvdHlwZS53YXRjaC4uLlxuXHQgIGlmIChwYXJlbnRWYWwgPT09IG5hdGl2ZVdhdGNoKSB7IHBhcmVudFZhbCA9IHVuZGVmaW5lZDsgfVxuXHQgIGlmIChjaGlsZFZhbCA9PT0gbmF0aXZlV2F0Y2gpIHsgY2hpbGRWYWwgPSB1bmRlZmluZWQ7IH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIWNoaWxkVmFsKSB7IHJldHVybiBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKSB9XG5cdCAge1xuXHQgICAgYXNzZXJ0T2JqZWN0VHlwZShrZXksIGNoaWxkVmFsLCB2bSk7XG5cdCAgfVxuXHQgIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgZm9yICh2YXIga2V5JDEgaW4gY2hpbGRWYWwpIHtcblx0ICAgIHZhciBwYXJlbnQgPSByZXRba2V5JDFdO1xuXHQgICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5JDFdO1xuXHQgICAgaWYgKHBhcmVudCAmJiAhQXJyYXkuaXNBcnJheShwYXJlbnQpKSB7XG5cdCAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuXHQgICAgfVxuXHQgICAgcmV0W2tleSQxXSA9IHBhcmVudFxuXHQgICAgICA/IHBhcmVudC5jb25jYXQoY2hpbGQpXG5cdCAgICAgIDogQXJyYXkuaXNBcnJheShjaGlsZCkgPyBjaGlsZCA6IFtjaGlsZF07XG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuXHQgKi9cblx0c3RyYXRzLnByb3BzID1cblx0c3RyYXRzLm1ldGhvZHMgPVxuXHRzdHJhdHMuaW5qZWN0ID1cblx0c3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKFxuXHQgIHBhcmVudFZhbCxcblx0ICBjaGlsZFZhbCxcblx0ICB2bSxcblx0ICBrZXlcblx0KSB7XG5cdCAgaWYgKGNoaWxkVmFsICYmIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTtcblx0ICB9XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHsgcmV0dXJuIGNoaWxkVmFsIH1cblx0ICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGlmIChjaGlsZFZhbCkgeyBleHRlbmQocmV0LCBjaGlsZFZhbCk7IH1cblx0ICByZXR1cm4gcmV0XG5cdH07XG5cdHN0cmF0cy5wcm92aWRlID0gbWVyZ2VEYXRhT3JGbjtcblx0XG5cdC8qKlxuXHQgKiBEZWZhdWx0IHN0cmF0ZWd5LlxuXHQgKi9cblx0dmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWRcblx0ICAgID8gcGFyZW50VmFsXG5cdCAgICA6IGNoaWxkVmFsXG5cdH07XG5cdFxuXHQvKipcblx0ICogVmFsaWRhdGUgY29tcG9uZW50IG5hbWVzXG5cdCAqL1xuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudHMgKG9wdGlvbnMpIHtcblx0ICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5jb21wb25lbnRzKSB7XG5cdCAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoa2V5KTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHZhbGlkYXRlQ29tcG9uZW50TmFtZSAobmFtZSkge1xuXHQgIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICAnSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgK1xuXHQgICAgICAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgdGhlIGh5cGhlbiwgJyArXG5cdCAgICAgICdhbmQgbXVzdCBzdGFydCB3aXRoIGEgbGV0dGVyLidcblx0ICAgICk7XG5cdCAgfVxuXHQgIGlmIChpc0J1aWx0SW5UYWcobmFtZSkgfHwgY29uZmlnLmlzUmVzZXJ2ZWRUYWcobmFtZSkpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgICdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgK1xuXHQgICAgICAnaWQ6ICcgKyBuYW1lXG5cdCAgICApO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuXHQgKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuXHQgKi9cblx0ZnVuY3Rpb24gbm9ybWFsaXplUHJvcHMgKG9wdGlvbnMsIHZtKSB7XG5cdCAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcblx0ICBpZiAoIXByb3BzKSB7IHJldHVybiB9XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIHZhciBpLCB2YWwsIG5hbWU7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMpKSB7XG5cdCAgICBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1tpXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgbmFtZSA9IGNhbWVsaXplKHZhbCk7XG5cdCAgICAgICAgcmVzW25hbWVdID0geyB0eXBlOiBudWxsIH07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgd2FybigncHJvcHMgbXVzdCBiZSBzdHJpbmdzIHdoZW4gdXNpbmcgYXJyYXkgc3ludGF4LicpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuXHQgICAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2tleV07XG5cdCAgICAgIG5hbWUgPSBjYW1lbGl6ZShrZXkpO1xuXHQgICAgICByZXNbbmFtZV0gPSBpc1BsYWluT2JqZWN0KHZhbClcblx0ICAgICAgICA/IHZhbFxuXHQgICAgICAgIDogeyB0eXBlOiB2YWwgfTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgd2Fybihcblx0ICAgICAgXCJJbnZhbGlkIHZhbHVlIGZvciBvcHRpb24gXFxcInByb3BzXFxcIjogZXhwZWN0ZWQgYW4gQXJyYXkgb3IgYW4gT2JqZWN0LCBcIiArXG5cdCAgICAgIFwiYnV0IGdvdCBcIiArICh0b1Jhd1R5cGUocHJvcHMpKSArIFwiLlwiLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICB9XG5cdCAgb3B0aW9ucy5wcm9wcyA9IHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBhbGwgaW5qZWN0aW9ucyBpbnRvIE9iamVjdC1iYXNlZCBmb3JtYXRcblx0ICovXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZUluamVjdCAob3B0aW9ucywgdm0pIHtcblx0ICB2YXIgaW5qZWN0ID0gb3B0aW9ucy5pbmplY3Q7XG5cdCAgaWYgKCFpbmplY3QpIHsgcmV0dXJuIH1cblx0ICB2YXIgbm9ybWFsaXplZCA9IG9wdGlvbnMuaW5qZWN0ID0ge307XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoaW5qZWN0KSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmplY3QubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgbm9ybWFsaXplZFtpbmplY3RbaV1dID0geyBmcm9tOiBpbmplY3RbaV0gfTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QoaW5qZWN0KSkge1xuXHQgICAgZm9yICh2YXIga2V5IGluIGluamVjdCkge1xuXHQgICAgICB2YXIgdmFsID0gaW5qZWN0W2tleV07XG5cdCAgICAgIG5vcm1hbGl6ZWRba2V5XSA9IGlzUGxhaW5PYmplY3QodmFsKVxuXHQgICAgICAgID8gZXh0ZW5kKHsgZnJvbToga2V5IH0sIHZhbClcblx0ICAgICAgICA6IHsgZnJvbTogdmFsIH07XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgIFwiSW52YWxpZCB2YWx1ZSBmb3Igb3B0aW9uIFxcXCJpbmplY3RcXFwiOiBleHBlY3RlZCBhbiBBcnJheSBvciBhbiBPYmplY3QsIFwiICtcblx0ICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZShpbmplY3QpKSArIFwiLlwiLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgcmF3IGZ1bmN0aW9uIGRpcmVjdGl2ZXMgaW50byBvYmplY3QgZm9ybWF0LlxuXHQgKi9cblx0ZnVuY3Rpb24gbm9ybWFsaXplRGlyZWN0aXZlcyAob3B0aW9ucykge1xuXHQgIHZhciBkaXJzID0gb3B0aW9ucy5kaXJlY3RpdmVzO1xuXHQgIGlmIChkaXJzKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gZGlycykge1xuXHQgICAgICB2YXIgZGVmID0gZGlyc1trZXldO1xuXHQgICAgICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIGRpcnNba2V5XSA9IHsgYmluZDogZGVmLCB1cGRhdGU6IGRlZiB9O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRPYmplY3RUeXBlIChuYW1lLCB2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdCAgICB3YXJuKFxuXHQgICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcXFwiXCIgKyBuYW1lICsgXCJcXFwiOiBleHBlY3RlZCBhbiBPYmplY3QsIFwiICtcblx0ICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZSh2YWx1ZSkpICsgXCIuXCIsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cblx0ICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyAoXG5cdCAgcGFyZW50LFxuXHQgIGNoaWxkLFxuXHQgIHZtXG5cdCkge1xuXHQgIHtcblx0ICAgIGNoZWNrQ29tcG9uZW50cyhjaGlsZCk7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIGNoaWxkID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBjaGlsZCA9IGNoaWxkLm9wdGlvbnM7XG5cdCAgfVxuXHRcblx0ICBub3JtYWxpemVQcm9wcyhjaGlsZCwgdm0pO1xuXHQgIG5vcm1hbGl6ZUluamVjdChjaGlsZCwgdm0pO1xuXHQgIG5vcm1hbGl6ZURpcmVjdGl2ZXMoY2hpbGQpO1xuXHQgIHZhciBleHRlbmRzRnJvbSA9IGNoaWxkLmV4dGVuZHM7XG5cdCAgaWYgKGV4dGVuZHNGcm9tKSB7XG5cdCAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBleHRlbmRzRnJvbSwgdm0pO1xuXHQgIH1cblx0ICBpZiAoY2hpbGQubWl4aW5zKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQubWl4aW5zW2ldLCB2bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBvcHRpb25zID0ge307XG5cdCAgdmFyIGtleTtcblx0ICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcblx0ICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gY2hpbGQpIHtcblx0ICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuXHQgICAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIG1lcmdlRmllbGQgKGtleSkge1xuXHQgICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuXHQgICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuXHQgIH1cblx0ICByZXR1cm4gb3B0aW9uc1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzb2x2ZSBhbiBhc3NldC5cblx0ICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG5cdCAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cblx0ICovXG5cdGZ1bmN0aW9uIHJlc29sdmVBc3NldCAoXG5cdCAgb3B0aW9ucyxcblx0ICB0eXBlLFxuXHQgIGlkLFxuXHQgIHdhcm5NaXNzaW5nXG5cdCkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIGFzc2V0cyA9IG9wdGlvbnNbdHlwZV07XG5cdCAgLy8gY2hlY2sgbG9jYWwgcmVnaXN0cmF0aW9uIHZhcmlhdGlvbnMgZmlyc3Rcblx0ICBpZiAoaGFzT3duKGFzc2V0cywgaWQpKSB7IHJldHVybiBhc3NldHNbaWRdIH1cblx0ICB2YXIgY2FtZWxpemVkSWQgPSBjYW1lbGl6ZShpZCk7XG5cdCAgaWYgKGhhc093bihhc3NldHMsIGNhbWVsaXplZElkKSkgeyByZXR1cm4gYXNzZXRzW2NhbWVsaXplZElkXSB9XG5cdCAgdmFyIFBhc2NhbENhc2VJZCA9IGNhcGl0YWxpemUoY2FtZWxpemVkSWQpO1xuXHQgIGlmIChoYXNPd24oYXNzZXRzLCBQYXNjYWxDYXNlSWQpKSB7IHJldHVybiBhc3NldHNbUGFzY2FsQ2FzZUlkXSB9XG5cdCAgLy8gZmFsbGJhY2sgdG8gcHJvdG90eXBlIGNoYWluXG5cdCAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHwgYXNzZXRzW2NhbWVsaXplZElkXSB8fCBhc3NldHNbUGFzY2FsQ2FzZUlkXTtcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuXHQgICAgd2Fybihcblx0ICAgICAgJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCxcblx0ICAgICAgb3B0aW9uc1xuXHQgICAgKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHZhbGlkYXRlUHJvcCAoXG5cdCAga2V5LFxuXHQgIHByb3BPcHRpb25zLFxuXHQgIHByb3BzRGF0YSxcblx0ICB2bVxuXHQpIHtcblx0ICB2YXIgcHJvcCA9IHByb3BPcHRpb25zW2tleV07XG5cdCAgdmFyIGFic2VudCA9ICFoYXNPd24ocHJvcHNEYXRhLCBrZXkpO1xuXHQgIHZhciB2YWx1ZSA9IHByb3BzRGF0YVtrZXldO1xuXHQgIC8vIGJvb2xlYW4gY2FzdGluZ1xuXHQgIHZhciBib29sZWFuSW5kZXggPSBnZXRUeXBlSW5kZXgoQm9vbGVhbiwgcHJvcC50eXBlKTtcblx0ICBpZiAoYm9vbGVhbkluZGV4ID4gLTEpIHtcblx0ICAgIGlmIChhYnNlbnQgJiYgIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG5cdCAgICAgIHZhbHVlID0gZmFsc2U7XG5cdCAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gaHlwaGVuYXRlKGtleSkpIHtcblx0ICAgICAgLy8gb25seSBjYXN0IGVtcHR5IHN0cmluZyAvIHNhbWUgbmFtZSB0byBib29sZWFuIGlmXG5cdCAgICAgIC8vIGJvb2xlYW4gaGFzIGhpZ2hlciBwcmlvcml0eVxuXHQgICAgICB2YXIgc3RyaW5nSW5kZXggPSBnZXRUeXBlSW5kZXgoU3RyaW5nLCBwcm9wLnR5cGUpO1xuXHQgICAgICBpZiAoc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4KSB7XG5cdCAgICAgICAgdmFsdWUgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGNoZWNrIGRlZmF1bHQgdmFsdWVcblx0ICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wLCBrZXkpO1xuXHQgICAgLy8gc2luY2UgdGhlIGRlZmF1bHQgdmFsdWUgaXMgYSBmcmVzaCBjb3B5LFxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIG9ic2VydmUgaXQuXG5cdCAgICB2YXIgcHJldlNob3VsZE9ic2VydmUgPSBzaG91bGRPYnNlcnZlO1xuXHQgICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpO1xuXHQgICAgb2JzZXJ2ZSh2YWx1ZSk7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcocHJldlNob3VsZE9ic2VydmUpO1xuXHQgIH1cblx0ICB7XG5cdCAgICBhc3NlcnRQcm9wKHByb3AsIGtleSwgdmFsdWUsIHZtLCBhYnNlbnQpO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsdWVcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlICh2bSwgcHJvcCwga2V5KSB7XG5cdCAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuXHQgIGlmICghaGFzT3duKHByb3AsICdkZWZhdWx0JykpIHtcblx0ICAgIHJldHVybiB1bmRlZmluZWRcblx0ICB9XG5cdCAgdmFyIGRlZiA9IHByb3AuZGVmYXVsdDtcblx0ICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG5cdCAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGlzT2JqZWN0KGRlZikpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgICdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsga2V5ICsgJ1wiOiAnICtcblx0ICAgICAgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgK1xuXHQgICAgICAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsXG5cdCAgICAgIHZtXG5cdCAgICApO1xuXHQgIH1cblx0ICAvLyB0aGUgcmF3IHByb3AgdmFsdWUgd2FzIGFsc28gdW5kZWZpbmVkIGZyb20gcHJldmlvdXMgcmVuZGVyLFxuXHQgIC8vIHJldHVybiBwcmV2aW91cyBkZWZhdWx0IHZhbHVlIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHdhdGNoZXIgdHJpZ2dlclxuXHQgIGlmICh2bSAmJiB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgJiZcblx0ICAgIHZtLiRvcHRpb25zLnByb3BzRGF0YVtrZXldID09PSB1bmRlZmluZWQgJiZcblx0ICAgIHZtLl9wcm9wc1trZXldICE9PSB1bmRlZmluZWRcblx0ICApIHtcblx0ICAgIHJldHVybiB2bS5fcHJvcHNba2V5XVxuXHQgIH1cblx0ICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuXHQgIC8vIGEgdmFsdWUgaXMgRnVuY3Rpb24gaWYgaXRzIHByb3RvdHlwZSBpcyBmdW5jdGlvbiBldmVuIGFjcm9zcyBkaWZmZXJlbnQgZXhlY3V0aW9uIGNvbnRleHRcblx0ICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBnZXRUeXBlKHByb3AudHlwZSkgIT09ICdGdW5jdGlvbidcblx0ICAgID8gZGVmLmNhbGwodm0pXG5cdCAgICA6IGRlZlxuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuXHQgKi9cblx0ZnVuY3Rpb24gYXNzZXJ0UHJvcCAoXG5cdCAgcHJvcCxcblx0ICBuYW1lLFxuXHQgIHZhbHVlLFxuXHQgIHZtLFxuXHQgIGFic2VudFxuXHQpIHtcblx0ICBpZiAocHJvcC5yZXF1aXJlZCAmJiBhYnNlbnQpIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgICdNaXNzaW5nIHJlcXVpcmVkIHByb3A6IFwiJyArIG5hbWUgKyAnXCInLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcHJvcC5yZXF1aXJlZCkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciB0eXBlID0gcHJvcC50eXBlO1xuXHQgIHZhciB2YWxpZCA9ICF0eXBlIHx8IHR5cGUgPT09IHRydWU7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcblx0ICBpZiAodHlwZSkge1xuXHQgICAgaWYgKCFBcnJheS5pc0FycmF5KHR5cGUpKSB7XG5cdCAgICAgIHR5cGUgPSBbdHlwZV07XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGUubGVuZ3RoICYmICF2YWxpZDsgaSsrKSB7XG5cdCAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcblx0ICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUgfHwgJycpO1xuXHQgICAgICB2YWxpZCA9IGFzc2VydGVkVHlwZS52YWxpZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCF2YWxpZCkge1xuXHQgICAgd2Fybihcblx0ICAgICAgXCJJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIuXCIgK1xuXHQgICAgICBcIiBFeHBlY3RlZCBcIiArIChleHBlY3RlZFR5cGVzLm1hcChjYXBpdGFsaXplKS5qb2luKCcsICcpKSArXG5cdCAgICAgIFwiLCBnb3QgXCIgKyAodG9SYXdUeXBlKHZhbHVlKSkgKyBcIi5cIixcblx0ICAgICAgdm1cblx0ICAgICk7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIHZhbGlkYXRvciA9IHByb3AudmFsaWRhdG9yO1xuXHQgIGlmICh2YWxpZGF0b3IpIHtcblx0ICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgICdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIG5hbWUgKyAnXCIuJyxcblx0ICAgICAgICB2bVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHNpbXBsZUNoZWNrUkUgPSAvXihTdHJpbmd8TnVtYmVyfEJvb2xlYW58RnVuY3Rpb258U3ltYm9sKSQvO1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0VHlwZSAodmFsdWUsIHR5cGUpIHtcblx0ICB2YXIgdmFsaWQ7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZSA9IGdldFR5cGUodHlwZSk7XG5cdCAgaWYgKHNpbXBsZUNoZWNrUkUudGVzdChleHBlY3RlZFR5cGUpKSB7XG5cdCAgICB2YXIgdCA9IHR5cGVvZiB2YWx1ZTtcblx0ICAgIHZhbGlkID0gdCA9PT0gZXhwZWN0ZWRUeXBlLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAvLyBmb3IgcHJpbWl0aXZlIHdyYXBwZXIgb2JqZWN0c1xuXHQgICAgaWYgKCF2YWxpZCAmJiB0ID09PSAnb2JqZWN0Jykge1xuXHQgICAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ09iamVjdCcpIHtcblx0ICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG5cdCAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdBcnJheScpIHtcblx0ICAgIHZhbGlkID0gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgdmFsaWQ6IHZhbGlkLFxuXHQgICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBVc2UgZnVuY3Rpb24gc3RyaW5nIG5hbWUgdG8gY2hlY2sgYnVpbHQtaW4gdHlwZXMsXG5cdCAqIGJlY2F1c2UgYSBzaW1wbGUgZXF1YWxpdHkgY2hlY2sgd2lsbCBmYWlsIHdoZW4gcnVubmluZ1xuXHQgKiBhY3Jvc3MgZGlmZmVyZW50IHZtcyAvIGlmcmFtZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRUeXBlIChmbikge1xuXHQgIHZhciBtYXRjaCA9IGZuICYmIGZuLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb24gKFxcdyspLyk7XG5cdCAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiAnJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1NhbWVUeXBlIChhLCBiKSB7XG5cdCAgcmV0dXJuIGdldFR5cGUoYSkgPT09IGdldFR5cGUoYilcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VHlwZUluZGV4ICh0eXBlLCBleHBlY3RlZFR5cGVzKSB7XG5cdCAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVHlwZXMpKSB7XG5cdCAgICByZXR1cm4gaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzLCB0eXBlKSA/IDAgOiAtMVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMCwgbGVuID0gZXhwZWN0ZWRUeXBlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgaWYgKGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlc1tpXSwgdHlwZSkpIHtcblx0ICAgICAgcmV0dXJuIGlcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcblx0ICBpZiAodm0pIHtcblx0ICAgIHZhciBjdXIgPSB2bTtcblx0ICAgIHdoaWxlICgoY3VyID0gY3VyLiRwYXJlbnQpKSB7XG5cdCAgICAgIHZhciBob29rcyA9IGN1ci4kb3B0aW9ucy5lcnJvckNhcHR1cmVkO1xuXHQgICAgICBpZiAoaG9va3MpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgY2FwdHVyZSA9IGhvb2tzW2ldLmNhbGwoY3VyLCBlcnIsIHZtLCBpbmZvKSA9PT0gZmFsc2U7XG5cdCAgICAgICAgICAgIGlmIChjYXB0dXJlKSB7IHJldHVybiB9XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbEhhbmRsZUVycm9yKGUsIGN1ciwgJ2Vycm9yQ2FwdHVyZWQgaG9vaycpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBnbG9iYWxIYW5kbGVFcnJvcihlcnIsIHZtLCBpbmZvKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2xvYmFsSGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcblx0ICBpZiAoY29uZmlnLmVycm9ySGFuZGxlcikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIGNvbmZpZy5lcnJvckhhbmRsZXIuY2FsbChudWxsLCBlcnIsIHZtLCBpbmZvKVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICBsb2dFcnJvcihlLCBudWxsLCAnY29uZmlnLmVycm9ySGFuZGxlcicpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBsb2dFcnJvcihlcnIsIHZtLCBpbmZvKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbG9nRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcblx0ICB7XG5cdCAgICB3YXJuKChcIkVycm9yIGluIFwiICsgaW5mbyArIFwiOiBcXFwiXCIgKyAoZXJyLnRvU3RyaW5nKCkpICsgXCJcXFwiXCIpLCB2bSk7XG5cdCAgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKChpbkJyb3dzZXIgfHwgaW5XZWV4KSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhyb3cgZXJyXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0LyogZ2xvYmFscyBNZXNzYWdlQ2hhbm5lbCAqL1xuXHRcblx0dmFyIGNhbGxiYWNrcyA9IFtdO1xuXHR2YXIgcGVuZGluZyA9IGZhbHNlO1xuXHRcblx0ZnVuY3Rpb24gZmx1c2hDYWxsYmFja3MgKCkge1xuXHQgIHBlbmRpbmcgPSBmYWxzZTtcblx0ICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuXHQgIGNhbGxiYWNrcy5sZW5ndGggPSAwO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBjb3BpZXNbaV0oKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEhlcmUgd2UgaGF2ZSBhc3luYyBkZWZlcnJpbmcgd3JhcHBlcnMgdXNpbmcgYm90aCBtaWNyb3Rhc2tzIGFuZCAobWFjcm8pIHRhc2tzLlxuXHQvLyBJbiA8IDIuNCB3ZSB1c2VkIG1pY3JvdGFza3MgZXZlcnl3aGVyZSwgYnV0IHRoZXJlIGFyZSBzb21lIHNjZW5hcmlvcyB3aGVyZVxuXHQvLyBtaWNyb3Rhc2tzIGhhdmUgdG9vIGhpZ2ggYSBwcmlvcml0eSBhbmQgZmlyZSBpbiBiZXR3ZWVuIHN1cHBvc2VkbHlcblx0Ly8gc2VxdWVudGlhbCBldmVudHMgKGUuZy4gIzQ1MjEsICM2NjkwKSBvciBldmVuIGJldHdlZW4gYnViYmxpbmcgb2YgdGhlIHNhbWVcblx0Ly8gZXZlbnQgKCM2NTY2KS4gSG93ZXZlciwgdXNpbmcgKG1hY3JvKSB0YXNrcyBldmVyeXdoZXJlIGFsc28gaGFzIHN1YnRsZSBwcm9ibGVtc1xuXHQvLyB3aGVuIHN0YXRlIGlzIGNoYW5nZWQgcmlnaHQgYmVmb3JlIHJlcGFpbnQgKGUuZy4gIzY4MTMsIG91dC1pbiB0cmFuc2l0aW9ucykuXG5cdC8vIEhlcmUgd2UgdXNlIG1pY3JvdGFzayBieSBkZWZhdWx0LCBidXQgZXhwb3NlIGEgd2F5IHRvIGZvcmNlIChtYWNybykgdGFzayB3aGVuXG5cdC8vIG5lZWRlZCAoZS5nLiBpbiBldmVudCBoYW5kbGVycyBhdHRhY2hlZCBieSB2LW9uKS5cblx0dmFyIG1pY3JvVGltZXJGdW5jO1xuXHR2YXIgbWFjcm9UaW1lckZ1bmM7XG5cdHZhciB1c2VNYWNyb1Rhc2sgPSBmYWxzZTtcblx0XG5cdC8vIERldGVybWluZSAobWFjcm8pIHRhc2sgZGVmZXIgaW1wbGVtZW50YXRpb24uXG5cdC8vIFRlY2huaWNhbGx5IHNldEltbWVkaWF0ZSBzaG91bGQgYmUgdGhlIGlkZWFsIGNob2ljZSwgYnV0IGl0J3Mgb25seSBhdmFpbGFibGVcblx0Ly8gaW4gSUUuIFRoZSBvbmx5IHBvbHlmaWxsIHRoYXQgY29uc2lzdGVudGx5IHF1ZXVlcyB0aGUgY2FsbGJhY2sgYWZ0ZXIgYWxsIERPTVxuXHQvLyBldmVudHMgdHJpZ2dlcmVkIGluIHRoZSBzYW1lIGxvb3AgaXMgYnkgdXNpbmcgTWVzc2FnZUNoYW5uZWwuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHRpZiAodHlwZW9mIHNldEltbWVkaWF0ZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoc2V0SW1tZWRpYXRlKSkge1xuXHQgIG1hY3JvVGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuXHQgICAgc2V0SW1tZWRpYXRlKGZsdXNoQ2FsbGJhY2tzKTtcblx0ICB9O1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCcgJiYgKFxuXHQgIGlzTmF0aXZlKE1lc3NhZ2VDaGFubmVsKSB8fFxuXHQgIC8vIFBoYW50b21KU1xuXHQgIE1lc3NhZ2VDaGFubmVsLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE1lc3NhZ2VDaGFubmVsQ29uc3RydWN0b3JdJ1xuXHQpKSB7XG5cdCAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcblx0ICB2YXIgcG9ydCA9IGNoYW5uZWwucG9ydDI7XG5cdCAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaENhbGxiYWNrcztcblx0ICBtYWNyb1RpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHBvcnQucG9zdE1lc3NhZ2UoMSk7XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgIG1hY3JvVGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuXHQgICAgc2V0VGltZW91dChmbHVzaENhbGxiYWNrcywgMCk7XG5cdCAgfTtcblx0fVxuXHRcblx0Ly8gRGV0ZXJtaW5lIG1pY3JvdGFzayBkZWZlciBpbXBsZW1lbnRhdGlvbi5cblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQsICRmbG93LWRpc2FibGUtbGluZSAqL1xuXHRpZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFByb21pc2UpKSB7XG5cdCAgdmFyIHAgPSBQcm9taXNlLnJlc29sdmUoKTtcblx0ICBtaWNyb1RpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHAudGhlbihmbHVzaENhbGxiYWNrcyk7XG5cdCAgICAvLyBpbiBwcm9ibGVtYXRpYyBVSVdlYlZpZXdzLCBQcm9taXNlLnRoZW4gZG9lc24ndCBjb21wbGV0ZWx5IGJyZWFrLCBidXRcblx0ICAgIC8vIGl0IGNhbiBnZXQgc3R1Y2sgaW4gYSB3ZWlyZCBzdGF0ZSB3aGVyZSBjYWxsYmFja3MgYXJlIHB1c2hlZCBpbnRvIHRoZVxuXHQgICAgLy8gbWljcm90YXNrIHF1ZXVlIGJ1dCB0aGUgcXVldWUgaXNuJ3QgYmVpbmcgZmx1c2hlZCwgdW50aWwgdGhlIGJyb3dzZXJcblx0ICAgIC8vIG5lZWRzIHRvIGRvIHNvbWUgb3RoZXIgd29yaywgZS5nLiBoYW5kbGUgYSB0aW1lci4gVGhlcmVmb3JlIHdlIGNhblxuXHQgICAgLy8gXCJmb3JjZVwiIHRoZSBtaWNyb3Rhc2sgcXVldWUgdG8gYmUgZmx1c2hlZCBieSBhZGRpbmcgYW4gZW1wdHkgdGltZXIuXG5cdCAgICBpZiAoaXNJT1MpIHsgc2V0VGltZW91dChub29wKTsgfVxuXHQgIH07XG5cdH0gZWxzZSB7XG5cdCAgLy8gZmFsbGJhY2sgdG8gbWFjcm9cblx0ICBtaWNyb1RpbWVyRnVuYyA9IG1hY3JvVGltZXJGdW5jO1xuXHR9XG5cdFxuXHQvKipcblx0ICogV3JhcCBhIGZ1bmN0aW9uIHNvIHRoYXQgaWYgYW55IGNvZGUgaW5zaWRlIHRyaWdnZXJzIHN0YXRlIGNoYW5nZSxcblx0ICogdGhlIGNoYW5nZXMgYXJlIHF1ZXVlZCB1c2luZyBhIChtYWNybykgdGFzayBpbnN0ZWFkIG9mIGEgbWljcm90YXNrLlxuXHQgKi9cblx0ZnVuY3Rpb24gd2l0aE1hY3JvVGFzayAoZm4pIHtcblx0ICByZXR1cm4gZm4uX3dpdGhUYXNrIHx8IChmbi5fd2l0aFRhc2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB1c2VNYWNyb1Rhc2sgPSB0cnVlO1xuXHQgICAgdmFyIHJlcyA9IGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cdCAgICB1c2VNYWNyb1Rhc2sgPSBmYWxzZTtcblx0ICAgIHJldHVybiByZXNcblx0ICB9KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBuZXh0VGljayAoY2IsIGN0eCkge1xuXHQgIHZhciBfcmVzb2x2ZTtcblx0ICBjYWxsYmFja3MucHVzaChmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoY2IpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBjYi5jYWxsKGN0eCk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBoYW5kbGVFcnJvcihlLCBjdHgsICduZXh0VGljaycpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKF9yZXNvbHZlKSB7XG5cdCAgICAgIF9yZXNvbHZlKGN0eCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgaWYgKCFwZW5kaW5nKSB7XG5cdCAgICBwZW5kaW5nID0gdHJ1ZTtcblx0ICAgIGlmICh1c2VNYWNyb1Rhc2spIHtcblx0ICAgICAgbWFjcm9UaW1lckZ1bmMoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG1pY3JvVGltZXJGdW5jKCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgIGlmICghY2IgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgICAgX3Jlc29sdmUgPSByZXNvbHZlO1xuXHQgICAgfSlcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIG1hcms7XG5cdHZhciBtZWFzdXJlO1xuXHRcblx0e1xuXHQgIHZhciBwZXJmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5wZXJmb3JtYW5jZTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoXG5cdCAgICBwZXJmICYmXG5cdCAgICBwZXJmLm1hcmsgJiZcblx0ICAgIHBlcmYubWVhc3VyZSAmJlxuXHQgICAgcGVyZi5jbGVhck1hcmtzICYmXG5cdCAgICBwZXJmLmNsZWFyTWVhc3VyZXNcblx0ICApIHtcblx0ICAgIG1hcmsgPSBmdW5jdGlvbiAodGFnKSB7IHJldHVybiBwZXJmLm1hcmsodGFnKTsgfTtcblx0ICAgIG1lYXN1cmUgPSBmdW5jdGlvbiAobmFtZSwgc3RhcnRUYWcsIGVuZFRhZykge1xuXHQgICAgICBwZXJmLm1lYXN1cmUobmFtZSwgc3RhcnRUYWcsIGVuZFRhZyk7XG5cdCAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7XG5cdCAgICAgIHBlcmYuY2xlYXJNYXJrcyhlbmRUYWcpO1xuXHQgICAgICBwZXJmLmNsZWFyTWVhc3VyZXMobmFtZSk7XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0Lyogbm90IHR5cGUgY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgZmxvdyBkb2Vzbid0IHBsYXkgd2VsbCB3aXRoIFByb3h5ICovXG5cdFxuXHR2YXIgaW5pdFByb3h5O1xuXHRcblx0e1xuXHQgIHZhciBhbGxvd2VkR2xvYmFscyA9IG1ha2VNYXAoXG5cdCAgICAnSW5maW5pdHksdW5kZWZpbmVkLE5hTixpc0Zpbml0ZSxpc05hTiwnICtcblx0ICAgICdwYXJzZUZsb2F0LHBhcnNlSW50LGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLGVuY29kZVVSSUNvbXBvbmVudCwnICtcblx0ICAgICdNYXRoLE51bWJlcixEYXRlLEFycmF5LE9iamVjdCxCb29sZWFuLFN0cmluZyxSZWdFeHAsTWFwLFNldCxKU09OLEludGwsJyArXG5cdCAgICAncmVxdWlyZScgLy8gZm9yIFdlYnBhY2svQnJvd3NlcmlmeVxuXHQgICk7XG5cdFxuXHQgIHZhciB3YXJuTm9uUHJlc2VudCA9IGZ1bmN0aW9uICh0YXJnZXQsIGtleSkge1xuXHQgICAgd2Fybihcblx0ICAgICAgXCJQcm9wZXJ0eSBvciBtZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIG5vdCBkZWZpbmVkIG9uIHRoZSBpbnN0YW5jZSBidXQgXCIgK1xuXHQgICAgICAncmVmZXJlbmNlZCBkdXJpbmcgcmVuZGVyLiBNYWtlIHN1cmUgdGhhdCB0aGlzIHByb3BlcnR5IGlzIHJlYWN0aXZlLCAnICtcblx0ICAgICAgJ2VpdGhlciBpbiB0aGUgZGF0YSBvcHRpb24sIG9yIGZvciBjbGFzcy1iYXNlZCBjb21wb25lbnRzLCBieSAnICtcblx0ICAgICAgJ2luaXRpYWxpemluZyB0aGUgcHJvcGVydHkuICcgK1xuXHQgICAgICAnU2VlOiBodHRwczovL3Z1ZWpzLm9yZy92Mi9ndWlkZS9yZWFjdGl2aXR5Lmh0bWwjRGVjbGFyaW5nLVJlYWN0aXZlLVByb3BlcnRpZXMuJyxcblx0ICAgICAgdGFyZ2V0XG5cdCAgICApO1xuXHQgIH07XG5cdFxuXHQgIHZhciBoYXNQcm94eSA9XG5cdCAgICB0eXBlb2YgUHJveHkgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFByb3h5KTtcblx0XG5cdCAgaWYgKGhhc1Byb3h5KSB7XG5cdCAgICB2YXIgaXNCdWlsdEluTW9kaWZpZXIgPSBtYWtlTWFwKCdzdG9wLHByZXZlbnQsc2VsZixjdHJsLHNoaWZ0LGFsdCxtZXRhLGV4YWN0Jyk7XG5cdCAgICBjb25maWcua2V5Q29kZXMgPSBuZXcgUHJveHkoY29uZmlnLmtleUNvZGVzLCB7XG5cdCAgICAgIHNldDogZnVuY3Rpb24gc2V0ICh0YXJnZXQsIGtleSwgdmFsdWUpIHtcblx0ICAgICAgICBpZiAoaXNCdWlsdEluTW9kaWZpZXIoa2V5KSkge1xuXHQgICAgICAgICAgd2FybigoXCJBdm9pZCBvdmVyd3JpdGluZyBidWlsdC1pbiBtb2RpZmllciBpbiBjb25maWcua2V5Q29kZXM6IC5cIiArIGtleSkpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRhcmdldFtrZXldID0gdmFsdWU7XG5cdCAgICAgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICB2YXIgaGFzSGFuZGxlciA9IHtcblx0ICAgIGhhczogZnVuY3Rpb24gaGFzICh0YXJnZXQsIGtleSkge1xuXHQgICAgICB2YXIgaGFzID0ga2V5IGluIHRhcmdldDtcblx0ICAgICAgdmFyIGlzQWxsb3dlZCA9IGFsbG93ZWRHbG9iYWxzKGtleSkgfHwga2V5LmNoYXJBdCgwKSA9PT0gJ18nO1xuXHQgICAgICBpZiAoIWhhcyAmJiAhaXNBbGxvd2VkKSB7XG5cdCAgICAgICAgd2Fybk5vblByZXNlbnQodGFyZ2V0LCBrZXkpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBoYXMgfHwgIWlzQWxsb3dlZFxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHZhciBnZXRIYW5kbGVyID0ge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKHRhcmdldCwga2V5KSB7XG5cdCAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiAhKGtleSBpbiB0YXJnZXQpKSB7XG5cdCAgICAgICAgd2Fybk5vblByZXNlbnQodGFyZ2V0LCBrZXkpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0YXJnZXRba2V5XVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGluaXRQcm94eSA9IGZ1bmN0aW9uIGluaXRQcm94eSAodm0pIHtcblx0ICAgIGlmIChoYXNQcm94eSkge1xuXHQgICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggcHJveHkgaGFuZGxlciB0byB1c2Vcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB2bS4kb3B0aW9ucztcblx0ICAgICAgdmFyIGhhbmRsZXJzID0gb3B0aW9ucy5yZW5kZXIgJiYgb3B0aW9ucy5yZW5kZXIuX3dpdGhTdHJpcHBlZFxuXHQgICAgICAgID8gZ2V0SGFuZGxlclxuXHQgICAgICAgIDogaGFzSGFuZGxlcjtcblx0ICAgICAgdm0uX3JlbmRlclByb3h5ID0gbmV3IFByb3h5KHZtLCBoYW5kbGVycyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2bS5fcmVuZGVyUHJveHkgPSB2bTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5cdFxuXHQvKipcblx0ICogUmVjdXJzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcblx0ICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3Rcblx0ICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cblx0ICovXG5cdGZ1bmN0aW9uIHRyYXZlcnNlICh2YWwpIHtcblx0ICBfdHJhdmVyc2UodmFsLCBzZWVuT2JqZWN0cyk7XG5cdCAgc2Vlbk9iamVjdHMuY2xlYXIoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX3RyYXZlcnNlICh2YWwsIHNlZW4pIHtcblx0ICB2YXIgaSwga2V5cztcblx0ICB2YXIgaXNBID0gQXJyYXkuaXNBcnJheSh2YWwpO1xuXHQgIGlmICgoIWlzQSAmJiAhaXNPYmplY3QodmFsKSkgfHwgT2JqZWN0LmlzRnJvemVuKHZhbCkgfHwgdmFsIGluc3RhbmNlb2YgVk5vZGUpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICBpZiAodmFsLl9fb2JfXykge1xuXHQgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XG5cdCAgICBpZiAoc2Vlbi5oYXMoZGVwSWQpKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHQgICAgc2Vlbi5hZGQoZGVwSWQpO1xuXHQgIH1cblx0ICBpZiAoaXNBKSB7XG5cdCAgICBpID0gdmFsLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHsgX3RyYXZlcnNlKHZhbFtpXSwgc2Vlbik7IH1cblx0ICB9IGVsc2Uge1xuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7IF90cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pOyB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBub3JtYWxpemVFdmVudCA9IGNhY2hlZChmdW5jdGlvbiAobmFtZSkge1xuXHQgIHZhciBwYXNzaXZlID0gbmFtZS5jaGFyQXQoMCkgPT09ICcmJztcblx0ICBuYW1lID0gcGFzc2l2ZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lO1xuXHQgIHZhciBvbmNlJCQxID0gbmFtZS5jaGFyQXQoMCkgPT09ICd+JzsgLy8gUHJlZml4ZWQgbGFzdCwgY2hlY2tlZCBmaXJzdFxuXHQgIG5hbWUgPSBvbmNlJCQxID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7XG5cdCAgdmFyIGNhcHR1cmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyEnO1xuXHQgIG5hbWUgPSBjYXB0dXJlID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7XG5cdCAgcmV0dXJuIHtcblx0ICAgIG5hbWU6IG5hbWUsXG5cdCAgICBvbmNlOiBvbmNlJCQxLFxuXHQgICAgY2FwdHVyZTogY2FwdHVyZSxcblx0ICAgIHBhc3NpdmU6IHBhc3NpdmVcblx0ICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlRm5JbnZva2VyIChmbnMpIHtcblx0ICBmdW5jdGlvbiBpbnZva2VyICgpIHtcblx0ICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50cztcblx0XG5cdCAgICB2YXIgZm5zID0gaW52b2tlci5mbnM7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShmbnMpKSB7XG5cdCAgICAgIHZhciBjbG9uZWQgPSBmbnMuc2xpY2UoKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9uZWQubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjbG9uZWRbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzJDEpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyByZXR1cm4gaGFuZGxlciByZXR1cm4gdmFsdWUgZm9yIHNpbmdsZSBoYW5kbGVyc1xuXHQgICAgICByZXR1cm4gZm5zLmFwcGx5KG51bGwsIGFyZ3VtZW50cylcblx0ICAgIH1cblx0ICB9XG5cdCAgaW52b2tlci5mbnMgPSBmbnM7XG5cdCAgcmV0dXJuIGludm9rZXJcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlTGlzdGVuZXJzIChcblx0ICBvbixcblx0ICBvbGRPbixcblx0ICBhZGQsXG5cdCAgcmVtb3ZlJCQxLFxuXHQgIHZtXG5cdCkge1xuXHQgIHZhciBuYW1lLCBkZWYsIGN1ciwgb2xkLCBldmVudDtcblx0ICBmb3IgKG5hbWUgaW4gb24pIHtcblx0ICAgIGRlZiA9IGN1ciA9IG9uW25hbWVdO1xuXHQgICAgb2xkID0gb2xkT25bbmFtZV07XG5cdCAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KG5hbWUpO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoaXNVbmRlZihjdXIpKSB7XG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgXCJJbnZhbGlkIGhhbmRsZXIgZm9yIGV2ZW50IFxcXCJcIiArIChldmVudC5uYW1lKSArIFwiXFxcIjogZ290IFwiICsgU3RyaW5nKGN1ciksXG5cdCAgICAgICAgdm1cblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNVbmRlZihvbGQpKSB7XG5cdCAgICAgIGlmIChpc1VuZGVmKGN1ci5mbnMpKSB7XG5cdCAgICAgICAgY3VyID0gb25bbmFtZV0gPSBjcmVhdGVGbkludm9rZXIoY3VyKTtcblx0ICAgICAgfVxuXHQgICAgICBhZGQoZXZlbnQubmFtZSwgY3VyLCBldmVudC5vbmNlLCBldmVudC5jYXB0dXJlLCBldmVudC5wYXNzaXZlLCBldmVudC5wYXJhbXMpO1xuXHQgICAgfSBlbHNlIGlmIChjdXIgIT09IG9sZCkge1xuXHQgICAgICBvbGQuZm5zID0gY3VyO1xuXHQgICAgICBvbltuYW1lXSA9IG9sZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yIChuYW1lIGluIG9sZE9uKSB7XG5cdCAgICBpZiAoaXNVbmRlZihvbltuYW1lXSkpIHtcblx0ICAgICAgZXZlbnQgPSBub3JtYWxpemVFdmVudChuYW1lKTtcblx0ICAgICAgcmVtb3ZlJCQxKGV2ZW50Lm5hbWUsIG9sZE9uW25hbWVdLCBldmVudC5jYXB0dXJlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VWTm9kZUhvb2sgKGRlZiwgaG9va0tleSwgaG9vaykge1xuXHQgIGlmIChkZWYgaW5zdGFuY2VvZiBWTm9kZSkge1xuXHQgICAgZGVmID0gZGVmLmRhdGEuaG9vayB8fCAoZGVmLmRhdGEuaG9vayA9IHt9KTtcblx0ICB9XG5cdCAgdmFyIGludm9rZXI7XG5cdCAgdmFyIG9sZEhvb2sgPSBkZWZbaG9va0tleV07XG5cdFxuXHQgIGZ1bmN0aW9uIHdyYXBwZWRIb29rICgpIHtcblx0ICAgIGhvb2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIC8vIGltcG9ydGFudDogcmVtb3ZlIG1lcmdlZCBob29rIHRvIGVuc3VyZSBpdCdzIGNhbGxlZCBvbmx5IG9uY2Vcblx0ICAgIC8vIGFuZCBwcmV2ZW50IG1lbW9yeSBsZWFrXG5cdCAgICByZW1vdmUoaW52b2tlci5mbnMsIHdyYXBwZWRIb29rKTtcblx0ICB9XG5cdFxuXHQgIGlmIChpc1VuZGVmKG9sZEhvb2spKSB7XG5cdCAgICAvLyBubyBleGlzdGluZyBob29rXG5cdCAgICBpbnZva2VyID0gY3JlYXRlRm5JbnZva2VyKFt3cmFwcGVkSG9va10pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChpc0RlZihvbGRIb29rLmZucykgJiYgaXNUcnVlKG9sZEhvb2subWVyZ2VkKSkge1xuXHQgICAgICAvLyBhbHJlYWR5IGEgbWVyZ2VkIGludm9rZXJcblx0ICAgICAgaW52b2tlciA9IG9sZEhvb2s7XG5cdCAgICAgIGludm9rZXIuZm5zLnB1c2god3JhcHBlZEhvb2spO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gZXhpc3RpbmcgcGxhaW4gaG9va1xuXHQgICAgICBpbnZva2VyID0gY3JlYXRlRm5JbnZva2VyKFtvbGRIb29rLCB3cmFwcGVkSG9va10pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaW52b2tlci5tZXJnZWQgPSB0cnVlO1xuXHQgIGRlZltob29rS2V5XSA9IGludm9rZXI7XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdFByb3BzRnJvbVZOb2RlRGF0YSAoXG5cdCAgZGF0YSxcblx0ICBDdG9yLFxuXHQgIHRhZ1xuXHQpIHtcblx0ICAvLyB3ZSBhcmUgb25seSBleHRyYWN0aW5nIHJhdyB2YWx1ZXMgaGVyZS5cblx0ICAvLyB2YWxpZGF0aW9uIGFuZCBkZWZhdWx0IHZhbHVlcyBhcmUgaGFuZGxlZCBpbiB0aGUgY2hpbGRcblx0ICAvLyBjb21wb25lbnQgaXRzZWxmLlxuXHQgIHZhciBwcm9wT3B0aW9ucyA9IEN0b3Iub3B0aW9ucy5wcm9wcztcblx0ICBpZiAoaXNVbmRlZihwcm9wT3B0aW9ucykpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIgcmVzID0ge307XG5cdCAgdmFyIGF0dHJzID0gZGF0YS5hdHRycztcblx0ICB2YXIgcHJvcHMgPSBkYXRhLnByb3BzO1xuXHQgIGlmIChpc0RlZihhdHRycykgfHwgaXNEZWYocHJvcHMpKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHtcblx0ICAgICAgdmFyIGFsdEtleSA9IGh5cGhlbmF0ZShrZXkpO1xuXHQgICAgICB7XG5cdCAgICAgICAgdmFyIGtleUluTG93ZXJDYXNlID0ga2V5LnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgaWYgKFxuXHQgICAgICAgICAga2V5ICE9PSBrZXlJbkxvd2VyQ2FzZSAmJlxuXHQgICAgICAgICAgYXR0cnMgJiYgaGFzT3duKGF0dHJzLCBrZXlJbkxvd2VyQ2FzZSlcblx0ICAgICAgICApIHtcblx0ICAgICAgICAgIHRpcChcblx0ICAgICAgICAgICAgXCJQcm9wIFxcXCJcIiArIGtleUluTG93ZXJDYXNlICsgXCJcXFwiIGlzIHBhc3NlZCB0byBjb21wb25lbnQgXCIgK1xuXHQgICAgICAgICAgICAoZm9ybWF0Q29tcG9uZW50TmFtZSh0YWcgfHwgQ3RvcikpICsgXCIsIGJ1dCB0aGUgZGVjbGFyZWQgcHJvcCBuYW1lIGlzXCIgK1xuXHQgICAgICAgICAgICBcIiBcXFwiXCIgKyBrZXkgKyBcIlxcXCIuIFwiICtcblx0ICAgICAgICAgICAgXCJOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCBjYW1lbENhc2VkIFwiICtcblx0ICAgICAgICAgICAgXCJwcm9wcyBuZWVkIHRvIHVzZSB0aGVpciBrZWJhYi1jYXNlIGVxdWl2YWxlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIFwiICtcblx0ICAgICAgICAgICAgXCJ0ZW1wbGF0ZXMuIFlvdSBzaG91bGQgcHJvYmFibHkgdXNlIFxcXCJcIiArIGFsdEtleSArIFwiXFxcIiBpbnN0ZWFkIG9mIFxcXCJcIiArIGtleSArIFwiXFxcIi5cIlxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgY2hlY2tQcm9wKHJlcywgcHJvcHMsIGtleSwgYWx0S2V5LCB0cnVlKSB8fFxuXHQgICAgICBjaGVja1Byb3AocmVzLCBhdHRycywga2V5LCBhbHRLZXksIGZhbHNlKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja1Byb3AgKFxuXHQgIHJlcyxcblx0ICBoYXNoLFxuXHQgIGtleSxcblx0ICBhbHRLZXksXG5cdCAgcHJlc2VydmVcblx0KSB7XG5cdCAgaWYgKGlzRGVmKGhhc2gpKSB7XG5cdCAgICBpZiAoaGFzT3duKGhhc2gsIGtleSkpIHtcblx0ICAgICAgcmVzW2tleV0gPSBoYXNoW2tleV07XG5cdCAgICAgIGlmICghcHJlc2VydmUpIHtcblx0ICAgICAgICBkZWxldGUgaGFzaFtrZXldO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0cnVlXG5cdCAgICB9IGVsc2UgaWYgKGhhc093bihoYXNoLCBhbHRLZXkpKSB7XG5cdCAgICAgIHJlc1trZXldID0gaGFzaFthbHRLZXldO1xuXHQgICAgICBpZiAoIXByZXNlcnZlKSB7XG5cdCAgICAgICAgZGVsZXRlIGhhc2hbYWx0S2V5XTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2Vcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyBUaGUgdGVtcGxhdGUgY29tcGlsZXIgYXR0ZW1wdHMgdG8gbWluaW1pemUgdGhlIG5lZWQgZm9yIG5vcm1hbGl6YXRpb24gYnlcblx0Ly8gc3RhdGljYWxseSBhbmFseXppbmcgdGhlIHRlbXBsYXRlIGF0IGNvbXBpbGUgdGltZS5cblx0Ly9cblx0Ly8gRm9yIHBsYWluIEhUTUwgbWFya3VwLCBub3JtYWxpemF0aW9uIGNhbiBiZSBjb21wbGV0ZWx5IHNraXBwZWQgYmVjYXVzZSB0aGVcblx0Ly8gZ2VuZXJhdGVkIHJlbmRlciBmdW5jdGlvbiBpcyBndWFyYW50ZWVkIHRvIHJldHVybiBBcnJheTxWTm9kZT4uIFRoZXJlIGFyZVxuXHQvLyB0d28gY2FzZXMgd2hlcmUgZXh0cmEgbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQ6XG5cdFxuXHQvLyAxLiBXaGVuIHRoZSBjaGlsZHJlbiBjb250YWlucyBjb21wb25lbnRzIC0gYmVjYXVzZSBhIGZ1bmN0aW9uYWwgY29tcG9uZW50XG5cdC8vIG1heSByZXR1cm4gYW4gQXJyYXkgaW5zdGVhZCBvZiBhIHNpbmdsZSByb290LiBJbiB0aGlzIGNhc2UsIGp1c3QgYSBzaW1wbGVcblx0Ly8gbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQgLSBpZiBhbnkgY2hpbGQgaXMgYW4gQXJyYXksIHdlIGZsYXR0ZW4gdGhlIHdob2xlXG5cdC8vIHRoaW5nIHdpdGggQXJyYXkucHJvdG90eXBlLmNvbmNhdC4gSXQgaXMgZ3VhcmFudGVlZCB0byBiZSBvbmx5IDEtbGV2ZWwgZGVlcFxuXHQvLyBiZWNhdXNlIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBhbHJlYWR5IG5vcm1hbGl6ZSB0aGVpciBvd24gY2hpbGRyZW4uXG5cdGZ1bmN0aW9uIHNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuIChjaGlsZHJlbikge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuW2ldKSkge1xuXHQgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgY2hpbGRyZW4pXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBjaGlsZHJlblxuXHR9XG5cdFxuXHQvLyAyLiBXaGVuIHRoZSBjaGlsZHJlbiBjb250YWlucyBjb25zdHJ1Y3RzIHRoYXQgYWx3YXlzIGdlbmVyYXRlZCBuZXN0ZWQgQXJyYXlzLFxuXHQvLyBlLmcuIDx0ZW1wbGF0ZT4sIDxzbG90Piwgdi1mb3IsIG9yIHdoZW4gdGhlIGNoaWxkcmVuIGlzIHByb3ZpZGVkIGJ5IHVzZXJcblx0Ly8gd2l0aCBoYW5kLXdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9ucyAvIEpTWC4gSW4gc3VjaCBjYXNlcyBhIGZ1bGwgbm9ybWFsaXphdGlvblxuXHQvLyBpcyBuZWVkZWQgdG8gY2F0ZXIgdG8gYWxsIHBvc3NpYmxlIHR5cGVzIG9mIGNoaWxkcmVuIHZhbHVlcy5cblx0ZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7XG5cdCAgcmV0dXJuIGlzUHJpbWl0aXZlKGNoaWxkcmVuKVxuXHQgICAgPyBbY3JlYXRlVGV4dFZOb2RlKGNoaWxkcmVuKV1cblx0ICAgIDogQXJyYXkuaXNBcnJheShjaGlsZHJlbilcblx0ICAgICAgPyBub3JtYWxpemVBcnJheUNoaWxkcmVuKGNoaWxkcmVuKVxuXHQgICAgICA6IHVuZGVmaW5lZFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1RleHROb2RlIChub2RlKSB7XG5cdCAgcmV0dXJuIGlzRGVmKG5vZGUpICYmIGlzRGVmKG5vZGUudGV4dCkgJiYgaXNGYWxzZShub2RlLmlzQ29tbWVudClcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplQXJyYXlDaGlsZHJlbiAoY2hpbGRyZW4sIG5lc3RlZEluZGV4KSB7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIHZhciBpLCBjLCBsYXN0SW5kZXgsIGxhc3Q7XG5cdCAgZm9yIChpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBjID0gY2hpbGRyZW5baV07XG5cdCAgICBpZiAoaXNVbmRlZihjKSB8fCB0eXBlb2YgYyA9PT0gJ2Jvb2xlYW4nKSB7IGNvbnRpbnVlIH1cblx0ICAgIGxhc3RJbmRleCA9IHJlcy5sZW5ndGggLSAxO1xuXHQgICAgbGFzdCA9IHJlc1tsYXN0SW5kZXhdO1xuXHQgICAgLy8gIG5lc3RlZFxuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoYykpIHtcblx0ICAgICAgaWYgKGMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGMgPSBub3JtYWxpemVBcnJheUNoaWxkcmVuKGMsICgobmVzdGVkSW5kZXggfHwgJycpICsgXCJfXCIgKyBpKSk7XG5cdCAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2Rlc1xuXHQgICAgICAgIGlmIChpc1RleHROb2RlKGNbMF0pICYmIGlzVGV4dE5vZGUobGFzdCkpIHtcblx0ICAgICAgICAgIHJlc1tsYXN0SW5kZXhdID0gY3JlYXRlVGV4dFZOb2RlKGxhc3QudGV4dCArIChjWzBdKS50ZXh0KTtcblx0ICAgICAgICAgIGMuc2hpZnQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVzLnB1c2guYXBwbHkocmVzLCBjKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1ByaW1pdGl2ZShjKSkge1xuXHQgICAgICBpZiAoaXNUZXh0Tm9kZShsYXN0KSkge1xuXHQgICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXNcblx0ICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBmb3IgU1NSIGh5ZHJhdGlvbiBiZWNhdXNlIHRleHQgbm9kZXMgYXJlXG5cdCAgICAgICAgLy8gZXNzZW50aWFsbHkgbWVyZ2VkIHdoZW4gcmVuZGVyZWQgdG8gSFRNTCBzdHJpbmdzXG5cdCAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoYyAhPT0gJycpIHtcblx0ICAgICAgICAvLyBjb252ZXJ0IHByaW1pdGl2ZSB0byB2bm9kZVxuXHQgICAgICAgIHJlcy5wdXNoKGNyZWF0ZVRleHRWTm9kZShjKSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChpc1RleHROb2RlKGMpICYmIGlzVGV4dE5vZGUobGFzdCkpIHtcblx0ICAgICAgICAvLyBtZXJnZSBhZGphY2VudCB0ZXh0IG5vZGVzXG5cdCAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYy50ZXh0KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBkZWZhdWx0IGtleSBmb3IgbmVzdGVkIGFycmF5IGNoaWxkcmVuIChsaWtlbHkgZ2VuZXJhdGVkIGJ5IHYtZm9yKVxuXHQgICAgICAgIGlmIChpc1RydWUoY2hpbGRyZW4uX2lzVkxpc3QpICYmXG5cdCAgICAgICAgICBpc0RlZihjLnRhZykgJiZcblx0ICAgICAgICAgIGlzVW5kZWYoYy5rZXkpICYmXG5cdCAgICAgICAgICBpc0RlZihuZXN0ZWRJbmRleCkpIHtcblx0ICAgICAgICAgIGMua2V5ID0gXCJfX3ZsaXN0XCIgKyBuZXN0ZWRJbmRleCArIFwiX1wiICsgaSArIFwiX19cIjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVzLnB1c2goYyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGVuc3VyZUN0b3IgKGNvbXAsIGJhc2UpIHtcblx0ICBpZiAoXG5cdCAgICBjb21wLl9fZXNNb2R1bGUgfHxcblx0ICAgIChoYXNTeW1ib2wgJiYgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJylcblx0ICApIHtcblx0ICAgIGNvbXAgPSBjb21wLmRlZmF1bHQ7XG5cdCAgfVxuXHQgIHJldHVybiBpc09iamVjdChjb21wKVxuXHQgICAgPyBiYXNlLmV4dGVuZChjb21wKVxuXHQgICAgOiBjb21wXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUFzeW5jUGxhY2Vob2xkZXIgKFxuXHQgIGZhY3RvcnksXG5cdCAgZGF0YSxcblx0ICBjb250ZXh0LFxuXHQgIGNoaWxkcmVuLFxuXHQgIHRhZ1xuXHQpIHtcblx0ICB2YXIgbm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTtcblx0ICBub2RlLmFzeW5jRmFjdG9yeSA9IGZhY3Rvcnk7XG5cdCAgbm9kZS5hc3luY01ldGEgPSB7IGRhdGE6IGRhdGEsIGNvbnRleHQ6IGNvbnRleHQsIGNoaWxkcmVuOiBjaGlsZHJlbiwgdGFnOiB0YWcgfTtcblx0ICByZXR1cm4gbm9kZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnQgKFxuXHQgIGZhY3RvcnksXG5cdCAgYmFzZUN0b3IsXG5cdCAgY29udGV4dFxuXHQpIHtcblx0ICBpZiAoaXNUcnVlKGZhY3RvcnkuZXJyb3IpICYmIGlzRGVmKGZhY3RvcnkuZXJyb3JDb21wKSkge1xuXHQgICAgcmV0dXJuIGZhY3RvcnkuZXJyb3JDb21wXG5cdCAgfVxuXHRcblx0ICBpZiAoaXNEZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcblx0ICAgIHJldHVybiBmYWN0b3J5LnJlc29sdmVkXG5cdCAgfVxuXHRcblx0ICBpZiAoaXNUcnVlKGZhY3RvcnkubG9hZGluZykgJiYgaXNEZWYoZmFjdG9yeS5sb2FkaW5nQ29tcCkpIHtcblx0ICAgIHJldHVybiBmYWN0b3J5LmxvYWRpbmdDb21wXG5cdCAgfVxuXHRcblx0ICBpZiAoaXNEZWYoZmFjdG9yeS5jb250ZXh0cykpIHtcblx0ICAgIC8vIGFscmVhZHkgcGVuZGluZ1xuXHQgICAgZmFjdG9yeS5jb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGV4dHMgPSBmYWN0b3J5LmNvbnRleHRzID0gW2NvbnRleHRdO1xuXHQgICAgdmFyIHN5bmMgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBmb3JjZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZXh0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBjb250ZXh0c1tpXS4kZm9yY2VVcGRhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgcmVzb2x2ZSA9IG9uY2UoZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuXHQgICAgICBmYWN0b3J5LnJlc29sdmVkID0gZW5zdXJlQ3RvcihyZXMsIGJhc2VDdG9yKTtcblx0ICAgICAgLy8gaW52b2tlIGNhbGxiYWNrcyBvbmx5IGlmIHRoaXMgaXMgbm90IGEgc3luY2hyb25vdXMgcmVzb2x2ZVxuXHQgICAgICAvLyAoYXN5bmMgcmVzb2x2ZXMgYXJlIHNoaW1tZWQgYXMgc3luY2hyb25vdXMgZHVyaW5nIFNTUilcblx0ICAgICAgaWYgKCFzeW5jKSB7XG5cdCAgICAgICAgZm9yY2VSZW5kZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHJlamVjdCA9IG9uY2UoZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAgIFwiRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50OiBcIiArIChTdHJpbmcoZmFjdG9yeSkpICtcblx0ICAgICAgICAocmVhc29uID8gKFwiXFxuUmVhc29uOiBcIiArIHJlYXNvbikgOiAnJylcblx0ICAgICAgKTtcblx0ICAgICAgaWYgKGlzRGVmKGZhY3RvcnkuZXJyb3JDb21wKSkge1xuXHQgICAgICAgIGZhY3RvcnkuZXJyb3IgPSB0cnVlO1xuXHQgICAgICAgIGZvcmNlUmVuZGVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciByZXMgPSBmYWN0b3J5KHJlc29sdmUsIHJlamVjdCk7XG5cdFxuXHQgICAgaWYgKGlzT2JqZWN0KHJlcykpIHtcblx0ICAgICAgaWYgKHR5cGVvZiByZXMudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIC8vICgpID0+IFByb21pc2Vcblx0ICAgICAgICBpZiAoaXNVbmRlZihmYWN0b3J5LnJlc29sdmVkKSkge1xuXHQgICAgICAgICAgcmVzLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoaXNEZWYocmVzLmNvbXBvbmVudCkgJiYgdHlwZW9mIHJlcy5jb21wb25lbnQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHJlcy5jb21wb25lbnQudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHRcblx0ICAgICAgICBpZiAoaXNEZWYocmVzLmVycm9yKSkge1xuXHQgICAgICAgICAgZmFjdG9yeS5lcnJvckNvbXAgPSBlbnN1cmVDdG9yKHJlcy5lcnJvciwgYmFzZUN0b3IpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGlzRGVmKHJlcy5sb2FkaW5nKSkge1xuXHQgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nQ29tcCA9IGVuc3VyZUN0b3IocmVzLmxvYWRpbmcsIGJhc2VDdG9yKTtcblx0ICAgICAgICAgIGlmIChyZXMuZGVsYXkgPT09IDApIHtcblx0ICAgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nID0gdHJ1ZTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpICYmIGlzVW5kZWYoZmFjdG9yeS5lcnJvcikpIHtcblx0ICAgICAgICAgICAgICAgIGZhY3RvcnkubG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICBmb3JjZVJlbmRlcigpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgcmVzLmRlbGF5IHx8IDIwMCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoaXNEZWYocmVzLnRpbWVvdXQpKSB7XG5cdCAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcblx0ICAgICAgICAgICAgICByZWplY3QoXG5cdCAgICAgICAgICAgICAgICBcInRpbWVvdXQgKFwiICsgKHJlcy50aW1lb3V0KSArIFwibXMpXCJcblx0ICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9LCByZXMudGltZW91dCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgc3luYyA9IGZhbHNlO1xuXHQgICAgLy8gcmV0dXJuIGluIGNhc2UgcmVzb2x2ZWQgc3luY2hyb25vdXNseVxuXHQgICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ1xuXHQgICAgICA/IGZhY3RvcnkubG9hZGluZ0NvbXBcblx0ICAgICAgOiBmYWN0b3J5LnJlc29sdmVkXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGlzQXN5bmNQbGFjZWhvbGRlciAobm9kZSkge1xuXHQgIHJldHVybiBub2RlLmlzQ29tbWVudCAmJiBub2RlLmFzeW5jRmFjdG9yeVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGdldEZpcnN0Q29tcG9uZW50Q2hpbGQgKGNoaWxkcmVuKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBjID0gY2hpbGRyZW5baV07XG5cdCAgICAgIGlmIChpc0RlZihjKSAmJiAoaXNEZWYoYy5jb21wb25lbnRPcHRpb25zKSB8fCBpc0FzeW5jUGxhY2Vob2xkZXIoYykpKSB7XG5cdCAgICAgICAgcmV0dXJuIGNcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRFdmVudHMgKHZtKSB7XG5cdCAgdm0uX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdm0uX2hhc0hvb2tFdmVudCA9IGZhbHNlO1xuXHQgIC8vIGluaXQgcGFyZW50IGF0dGFjaGVkIGV2ZW50c1xuXHQgIHZhciBsaXN0ZW5lcnMgPSB2bS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuXHQgIGlmIChsaXN0ZW5lcnMpIHtcblx0ICAgIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyh2bSwgbGlzdGVuZXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciB0YXJnZXQ7XG5cdFxuXHRmdW5jdGlvbiBhZGQgKGV2ZW50LCBmbiwgb25jZSkge1xuXHQgIGlmIChvbmNlKSB7XG5cdCAgICB0YXJnZXQuJG9uY2UoZXZlbnQsIGZuKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LiRvbihldmVudCwgZm4pO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlJDEgKGV2ZW50LCBmbikge1xuXHQgIHRhcmdldC4kb2ZmKGV2ZW50LCBmbik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyAoXG5cdCAgdm0sXG5cdCAgbGlzdGVuZXJzLFxuXHQgIG9sZExpc3RlbmVyc1xuXHQpIHtcblx0ICB0YXJnZXQgPSB2bTtcblx0ICB1cGRhdGVMaXN0ZW5lcnMobGlzdGVuZXJzLCBvbGRMaXN0ZW5lcnMgfHwge30sIGFkZCwgcmVtb3ZlJDEsIHZtKTtcblx0ICB0YXJnZXQgPSB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcblx0ICB2YXIgaG9va1JFID0gL15ob29rOi87XG5cdCAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZXZlbnQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdGhpcyQxLiRvbihldmVudFtpXSwgZm4pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAodm0uX2V2ZW50c1tldmVudF0gfHwgKHZtLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcblx0ICAgICAgLy8gb3B0aW1pemUgaG9vazpldmVudCBjb3N0IGJ5IHVzaW5nIGEgYm9vbGVhbiBmbGFnIG1hcmtlZCBhdCByZWdpc3RyYXRpb25cblx0ICAgICAgLy8gaW5zdGVhZCBvZiBhIGhhc2ggbG9va3VwXG5cdCAgICAgIGlmIChob29rUkUudGVzdChldmVudCkpIHtcblx0ICAgICAgICB2bS5faGFzSG9va0V2ZW50ID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZtXG5cdCAgfTtcblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBmdW5jdGlvbiBvbiAoKSB7XG5cdCAgICAgIHZtLiRvZmYoZXZlbnQsIG9uKTtcblx0ICAgICAgZm4uYXBwbHkodm0sIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBvbi5mbiA9IGZuO1xuXHQgICAgdm0uJG9uKGV2ZW50LCBvbik7XG5cdCAgICByZXR1cm4gdm1cblx0ICB9O1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgLy8gYWxsXG5cdCAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0ICAgICAgdm0uX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICAgIHJldHVybiB2bVxuXHQgICAgfVxuXHQgICAgLy8gYXJyYXkgb2YgZXZlbnRzXG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBldmVudC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB0aGlzJDEuJG9mZihldmVudFtpXSwgZm4pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2bVxuXHQgICAgfVxuXHQgICAgLy8gc3BlY2lmaWMgZXZlbnRcblx0ICAgIHZhciBjYnMgPSB2bS5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIGlmICghY2JzKSB7XG5cdCAgICAgIHJldHVybiB2bVxuXHQgICAgfVxuXHQgICAgaWYgKCFmbikge1xuXHQgICAgICB2bS5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG5cdCAgICAgIHJldHVybiB2bVxuXHQgICAgfVxuXHQgICAgaWYgKGZuKSB7XG5cdCAgICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcblx0ICAgICAgdmFyIGNiO1xuXHQgICAgICB2YXIgaSQxID0gY2JzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGkkMS0tKSB7XG5cdCAgICAgICAgY2IgPSBjYnNbaSQxXTtcblx0ICAgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuXHQgICAgICAgICAgY2JzLnNwbGljZShpJDEsIDEpO1xuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB2bVxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB7XG5cdCAgICAgIHZhciBsb3dlckNhc2VFdmVudCA9IGV2ZW50LnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgIGlmIChsb3dlckNhc2VFdmVudCAhPT0gZXZlbnQgJiYgdm0uX2V2ZW50c1tsb3dlckNhc2VFdmVudF0pIHtcblx0ICAgICAgICB0aXAoXG5cdCAgICAgICAgICBcIkV2ZW50IFxcXCJcIiArIGxvd2VyQ2FzZUV2ZW50ICsgXCJcXFwiIGlzIGVtaXR0ZWQgaW4gY29tcG9uZW50IFwiICtcblx0ICAgICAgICAgIChmb3JtYXRDb21wb25lbnROYW1lKHZtKSkgKyBcIiBidXQgdGhlIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZCBmb3IgXFxcIlwiICsgZXZlbnQgKyBcIlxcXCIuIFwiICtcblx0ICAgICAgICAgIFwiTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgeW91IGNhbm5vdCB1c2UgXCIgK1xuXHQgICAgICAgICAgXCJ2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gXCIgK1xuXHQgICAgICAgICAgXCJZb3Ugc2hvdWxkIHByb2JhYmx5IHVzZSBcXFwiXCIgKyAoaHlwaGVuYXRlKGV2ZW50KSkgKyBcIlxcXCIgaW5zdGVhZCBvZiBcXFwiXCIgKyBldmVudCArIFwiXFxcIi5cIlxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciBjYnMgPSB2bS5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIGlmIChjYnMpIHtcblx0ICAgICAgY2JzID0gY2JzLmxlbmd0aCA+IDEgPyB0b0FycmF5KGNicykgOiBjYnM7XG5cdCAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgY2JzW2ldLmFwcGx5KHZtLCBhcmdzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgKFwiZXZlbnQgaGFuZGxlciBmb3IgXFxcIlwiICsgZXZlbnQgKyBcIlxcXCJcIikpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZtXG5cdCAgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0XG5cdC8qKlxuXHQgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIHJhdyBjaGlsZHJlbiBWTm9kZXMgaW50byBhIHNsb3Qgb2JqZWN0LlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVzb2x2ZVNsb3RzIChcblx0ICBjaGlsZHJlbixcblx0ICBjb250ZXh0XG5cdCkge1xuXHQgIHZhciBzbG90cyA9IHt9O1xuXHQgIGlmICghY2hpbGRyZW4pIHtcblx0ICAgIHJldHVybiBzbG90c1xuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG5cdCAgICB2YXIgZGF0YSA9IGNoaWxkLmRhdGE7XG5cdCAgICAvLyByZW1vdmUgc2xvdCBhdHRyaWJ1dGUgaWYgdGhlIG5vZGUgaXMgcmVzb2x2ZWQgYXMgYSBWdWUgc2xvdCBub2RlXG5cdCAgICBpZiAoZGF0YSAmJiBkYXRhLmF0dHJzICYmIGRhdGEuYXR0cnMuc2xvdCkge1xuXHQgICAgICBkZWxldGUgZGF0YS5hdHRycy5zbG90O1xuXHQgICAgfVxuXHQgICAgLy8gbmFtZWQgc2xvdHMgc2hvdWxkIG9ubHkgYmUgcmVzcGVjdGVkIGlmIHRoZSB2bm9kZSB3YXMgcmVuZGVyZWQgaW4gdGhlXG5cdCAgICAvLyBzYW1lIGNvbnRleHQuXG5cdCAgICBpZiAoKGNoaWxkLmNvbnRleHQgPT09IGNvbnRleHQgfHwgY2hpbGQuZm5Db250ZXh0ID09PSBjb250ZXh0KSAmJlxuXHQgICAgICBkYXRhICYmIGRhdGEuc2xvdCAhPSBudWxsXG5cdCAgICApIHtcblx0ICAgICAgdmFyIG5hbWUgPSBkYXRhLnNsb3Q7XG5cdCAgICAgIHZhciBzbG90ID0gKHNsb3RzW25hbWVdIHx8IChzbG90c1tuYW1lXSA9IFtdKSk7XG5cdCAgICAgIGlmIChjaGlsZC50YWcgPT09ICd0ZW1wbGF0ZScpIHtcblx0ICAgICAgICBzbG90LnB1c2guYXBwbHkoc2xvdCwgY2hpbGQuY2hpbGRyZW4gfHwgW10pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNsb3QucHVzaChjaGlsZCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIChzbG90cy5kZWZhdWx0IHx8IChzbG90cy5kZWZhdWx0ID0gW10pKS5wdXNoKGNoaWxkKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gaWdub3JlIHNsb3RzIHRoYXQgY29udGFpbnMgb25seSB3aGl0ZXNwYWNlXG5cdCAgZm9yICh2YXIgbmFtZSQxIGluIHNsb3RzKSB7XG5cdCAgICBpZiAoc2xvdHNbbmFtZSQxXS5ldmVyeShpc1doaXRlc3BhY2UpKSB7XG5cdCAgICAgIGRlbGV0ZSBzbG90c1tuYW1lJDFdO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gc2xvdHNcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNXaGl0ZXNwYWNlIChub2RlKSB7XG5cdCAgcmV0dXJuIChub2RlLmlzQ29tbWVudCAmJiAhbm9kZS5hc3luY0ZhY3RvcnkpIHx8IG5vZGUudGV4dCA9PT0gJyAnXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVTY29wZWRTbG90cyAoXG5cdCAgZm5zLCAvLyBzZWUgZmxvdy92bm9kZVxuXHQgIHJlc1xuXHQpIHtcblx0ICByZXMgPSByZXMgfHwge307XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KGZuc1tpXSkpIHtcblx0ICAgICAgcmVzb2x2ZVNjb3BlZFNsb3RzKGZuc1tpXSwgcmVzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlc1tmbnNbaV0ua2V5XSA9IGZuc1tpXS5mbjtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBhY3RpdmVJbnN0YW5jZSA9IG51bGw7XG5cdHZhciBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTtcblx0XG5cdGZ1bmN0aW9uIGluaXRMaWZlY3ljbGUgKHZtKSB7XG5cdCAgdmFyIG9wdGlvbnMgPSB2bS4kb3B0aW9ucztcblx0XG5cdCAgLy8gbG9jYXRlIGZpcnN0IG5vbi1hYnN0cmFjdCBwYXJlbnRcblx0ICB2YXIgcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG5cdCAgaWYgKHBhcmVudCAmJiAhb3B0aW9ucy5hYnN0cmFjdCkge1xuXHQgICAgd2hpbGUgKHBhcmVudC4kb3B0aW9ucy5hYnN0cmFjdCAmJiBwYXJlbnQuJHBhcmVudCkge1xuXHQgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcblx0ICAgIH1cblx0ICAgIHBhcmVudC4kY2hpbGRyZW4ucHVzaCh2bSk7XG5cdCAgfVxuXHRcblx0ICB2bS4kcGFyZW50ID0gcGFyZW50O1xuXHQgIHZtLiRyb290ID0gcGFyZW50ID8gcGFyZW50LiRyb290IDogdm07XG5cdFxuXHQgIHZtLiRjaGlsZHJlbiA9IFtdO1xuXHQgIHZtLiRyZWZzID0ge307XG5cdFxuXHQgIHZtLl93YXRjaGVyID0gbnVsbDtcblx0ICB2bS5faW5hY3RpdmUgPSBudWxsO1xuXHQgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IGZhbHNlO1xuXHQgIHZtLl9pc01vdW50ZWQgPSBmYWxzZTtcblx0ICB2bS5faXNEZXN0cm95ZWQgPSBmYWxzZTtcblx0ICB2bS5faXNCZWluZ0Rlc3Ryb3llZCA9IGZhbHNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG5cdCAgVnVlLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKHZub2RlLCBoeWRyYXRpbmcpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBpZiAodm0uX2lzTW91bnRlZCkge1xuXHQgICAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZVVwZGF0ZScpO1xuXHQgICAgfVxuXHQgICAgdmFyIHByZXZFbCA9IHZtLiRlbDtcblx0ICAgIHZhciBwcmV2Vm5vZGUgPSB2bS5fdm5vZGU7XG5cdCAgICB2YXIgcHJldkFjdGl2ZUluc3RhbmNlID0gYWN0aXZlSW5zdGFuY2U7XG5cdCAgICBhY3RpdmVJbnN0YW5jZSA9IHZtO1xuXHQgICAgdm0uX3Zub2RlID0gdm5vZGU7XG5cdCAgICAvLyBWdWUucHJvdG90eXBlLl9fcGF0Y2hfXyBpcyBpbmplY3RlZCBpbiBlbnRyeSBwb2ludHNcblx0ICAgIC8vIGJhc2VkIG9uIHRoZSByZW5kZXJpbmcgYmFja2VuZCB1c2VkLlxuXHQgICAgaWYgKCFwcmV2Vm5vZGUpIHtcblx0ICAgICAgLy8gaW5pdGlhbCByZW5kZXJcblx0ICAgICAgdm0uJGVsID0gdm0uX19wYXRjaF9fKFxuXHQgICAgICAgIHZtLiRlbCwgdm5vZGUsIGh5ZHJhdGluZywgZmFsc2UgLyogcmVtb3ZlT25seSAqLyxcblx0ICAgICAgICB2bS4kb3B0aW9ucy5fcGFyZW50RWxtLFxuXHQgICAgICAgIHZtLiRvcHRpb25zLl9yZWZFbG1cblx0ICAgICAgKTtcblx0ICAgICAgLy8gbm8gbmVlZCBmb3IgdGhlIHJlZiBub2RlcyBhZnRlciBpbml0aWFsIHBhdGNoXG5cdCAgICAgIC8vIHRoaXMgcHJldmVudHMga2VlcGluZyBhIGRldGFjaGVkIERPTSB0cmVlIGluIG1lbW9yeSAoIzU4NTEpXG5cdCAgICAgIHZtLiRvcHRpb25zLl9wYXJlbnRFbG0gPSB2bS4kb3B0aW9ucy5fcmVmRWxtID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHVwZGF0ZXNcblx0ICAgICAgdm0uJGVsID0gdm0uX19wYXRjaF9fKHByZXZWbm9kZSwgdm5vZGUpO1xuXHQgICAgfVxuXHQgICAgYWN0aXZlSW5zdGFuY2UgPSBwcmV2QWN0aXZlSW5zdGFuY2U7XG5cdCAgICAvLyB1cGRhdGUgX192dWVfXyByZWZlcmVuY2Vcblx0ICAgIGlmIChwcmV2RWwpIHtcblx0ICAgICAgcHJldkVsLl9fdnVlX18gPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHZtLiRlbCkge1xuXHQgICAgICB2bS4kZWwuX192dWVfXyA9IHZtO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgcGFyZW50IGlzIGFuIEhPQywgdXBkYXRlIGl0cyAkZWwgYXMgd2VsbFxuXHQgICAgaWYgKHZtLiR2bm9kZSAmJiB2bS4kcGFyZW50ICYmIHZtLiR2bm9kZSA9PT0gdm0uJHBhcmVudC5fdm5vZGUpIHtcblx0ICAgICAgdm0uJHBhcmVudC4kZWwgPSB2bS4kZWw7XG5cdCAgICB9XG5cdCAgICAvLyB1cGRhdGVkIGhvb2sgaXMgY2FsbGVkIGJ5IHRoZSBzY2hlZHVsZXIgdG8gZW5zdXJlIHRoYXQgY2hpbGRyZW4gYXJlXG5cdCAgICAvLyB1cGRhdGVkIGluIGEgcGFyZW50J3MgdXBkYXRlZCBob29rLlxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGlmICh2bS5fd2F0Y2hlcikge1xuXHQgICAgICB2bS5fd2F0Y2hlci51cGRhdGUoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGlmICh2bS5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0ICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlRGVzdHJveScpO1xuXHQgICAgdm0uX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnRcblx0ICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuXHQgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkICYmICF2bS4kb3B0aW9ucy5hYnN0cmFjdCkge1xuXHQgICAgICByZW1vdmUocGFyZW50LiRjaGlsZHJlbiwgdm0pO1xuXHQgICAgfVxuXHQgICAgLy8gdGVhcmRvd24gd2F0Y2hlcnNcblx0ICAgIGlmICh2bS5fd2F0Y2hlcikge1xuXHQgICAgICB2bS5fd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgdmFyIGkgPSB2bS5fd2F0Y2hlcnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2bS5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG5cdCAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cblx0ICAgIGlmICh2bS5fZGF0YS5fX29iX18pIHtcblx0ICAgICAgdm0uX2RhdGEuX19vYl9fLnZtQ291bnQtLTtcblx0ICAgIH1cblx0ICAgIC8vIGNhbGwgdGhlIGxhc3QgaG9vay4uLlxuXHQgICAgdm0uX2lzRGVzdHJveWVkID0gdHJ1ZTtcblx0ICAgIC8vIGludm9rZSBkZXN0cm95IGhvb2tzIG9uIGN1cnJlbnQgcmVuZGVyZWQgdHJlZVxuXHQgICAgdm0uX19wYXRjaF9fKHZtLl92bm9kZSwgbnVsbCk7XG5cdCAgICAvLyBmaXJlIGRlc3Ryb3llZCBob29rXG5cdCAgICBjYWxsSG9vayh2bSwgJ2Rlc3Ryb3llZCcpO1xuXHQgICAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cblx0ICAgIHZtLiRvZmYoKTtcblx0ICAgIC8vIHJlbW92ZSBfX3Z1ZV9fIHJlZmVyZW5jZVxuXHQgICAgaWYgKHZtLiRlbCkge1xuXHQgICAgICB2bS4kZWwuX192dWVfXyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICAvLyByZWxlYXNlIGNpcmN1bGFyIHJlZmVyZW5jZSAoIzY3NTkpXG5cdCAgICBpZiAodm0uJHZub2RlKSB7XG5cdCAgICAgIHZtLiR2bm9kZS5wYXJlbnQgPSBudWxsO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1vdW50Q29tcG9uZW50IChcblx0ICB2bSxcblx0ICBlbCxcblx0ICBoeWRyYXRpbmdcblx0KSB7XG5cdCAgdm0uJGVsID0gZWw7XG5cdCAgaWYgKCF2bS4kb3B0aW9ucy5yZW5kZXIpIHtcblx0ICAgIHZtLiRvcHRpb25zLnJlbmRlciA9IGNyZWF0ZUVtcHR5Vk5vZGU7XG5cdCAgICB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoKHZtLiRvcHRpb25zLnRlbXBsYXRlICYmIHZtLiRvcHRpb25zLnRlbXBsYXRlLmNoYXJBdCgwKSAhPT0gJyMnKSB8fFxuXHQgICAgICAgIHZtLiRvcHRpb25zLmVsIHx8IGVsKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgICdZb3UgYXJlIHVzaW5nIHRoZSBydW50aW1lLW9ubHkgYnVpbGQgb2YgVnVlIHdoZXJlIHRoZSB0ZW1wbGF0ZSAnICtcblx0ICAgICAgICAgICdjb21waWxlciBpcyBub3QgYXZhaWxhYmxlLiBFaXRoZXIgcHJlLWNvbXBpbGUgdGhlIHRlbXBsYXRlcyBpbnRvICcgK1xuXHQgICAgICAgICAgJ3JlbmRlciBmdW5jdGlvbnMsIG9yIHVzZSB0aGUgY29tcGlsZXItaW5jbHVkZWQgYnVpbGQuJyxcblx0ICAgICAgICAgIHZtXG5cdCAgICAgICAgKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgJ0ZhaWxlZCB0byBtb3VudCBjb21wb25lbnQ6IHRlbXBsYXRlIG9yIHJlbmRlciBmdW5jdGlvbiBub3QgZGVmaW5lZC4nLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIGNhbGxIb29rKHZtLCAnYmVmb3JlTW91bnQnKTtcblx0XG5cdCAgdmFyIHVwZGF0ZUNvbXBvbmVudDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHtcblx0ICAgIHVwZGF0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIG5hbWUgPSB2bS5fbmFtZTtcblx0ICAgICAgdmFyIGlkID0gdm0uX3VpZDtcblx0ICAgICAgdmFyIHN0YXJ0VGFnID0gXCJ2dWUtcGVyZi1zdGFydDpcIiArIGlkO1xuXHQgICAgICB2YXIgZW5kVGFnID0gXCJ2dWUtcGVyZi1lbmQ6XCIgKyBpZDtcblx0XG5cdCAgICAgIG1hcmsoc3RhcnRUYWcpO1xuXHQgICAgICB2YXIgdm5vZGUgPSB2bS5fcmVuZGVyKCk7XG5cdCAgICAgIG1hcmsoZW5kVGFnKTtcblx0ICAgICAgbWVhc3VyZSgoXCJ2dWUgXCIgKyBuYW1lICsgXCIgcmVuZGVyXCIpLCBzdGFydFRhZywgZW5kVGFnKTtcblx0XG5cdCAgICAgIG1hcmsoc3RhcnRUYWcpO1xuXHQgICAgICB2bS5fdXBkYXRlKHZub2RlLCBoeWRyYXRpbmcpO1xuXHQgICAgICBtYXJrKGVuZFRhZyk7XG5cdCAgICAgIG1lYXN1cmUoKFwidnVlIFwiICsgbmFtZSArIFwiIHBhdGNoXCIpLCBzdGFydFRhZywgZW5kVGFnKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHVwZGF0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdm0uX3VwZGF0ZSh2bS5fcmVuZGVyKCksIGh5ZHJhdGluZyk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLy8gd2Ugc2V0IHRoaXMgdG8gdm0uX3dhdGNoZXIgaW5zaWRlIHRoZSB3YXRjaGVyJ3MgY29uc3RydWN0b3Jcblx0ICAvLyBzaW5jZSB0aGUgd2F0Y2hlcidzIGluaXRpYWwgcGF0Y2ggbWF5IGNhbGwgJGZvcmNlVXBkYXRlIChlLmcuIGluc2lkZSBjaGlsZFxuXHQgIC8vIGNvbXBvbmVudCdzIG1vdW50ZWQgaG9vayksIHdoaWNoIHJlbGllcyBvbiB2bS5fd2F0Y2hlciBiZWluZyBhbHJlYWR5IGRlZmluZWRcblx0ICBuZXcgV2F0Y2hlcih2bSwgdXBkYXRlQ29tcG9uZW50LCBub29wLCBudWxsLCB0cnVlIC8qIGlzUmVuZGVyV2F0Y2hlciAqLyk7XG5cdCAgaHlkcmF0aW5nID0gZmFsc2U7XG5cdFxuXHQgIC8vIG1hbnVhbGx5IG1vdW50ZWQgaW5zdGFuY2UsIGNhbGwgbW91bnRlZCBvbiBzZWxmXG5cdCAgLy8gbW91bnRlZCBpcyBjYWxsZWQgZm9yIHJlbmRlci1jcmVhdGVkIGNoaWxkIGNvbXBvbmVudHMgaW4gaXRzIGluc2VydGVkIGhvb2tcblx0ICBpZiAodm0uJHZub2RlID09IG51bGwpIHtcblx0ICAgIHZtLl9pc01vdW50ZWQgPSB0cnVlO1xuXHQgICAgY2FsbEhvb2sodm0sICdtb3VudGVkJyk7XG5cdCAgfVxuXHQgIHJldHVybiB2bVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVDaGlsZENvbXBvbmVudCAoXG5cdCAgdm0sXG5cdCAgcHJvcHNEYXRhLFxuXHQgIGxpc3RlbmVycyxcblx0ICBwYXJlbnRWbm9kZSxcblx0ICByZW5kZXJDaGlsZHJlblxuXHQpIHtcblx0ICB7XG5cdCAgICBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSB0cnVlO1xuXHQgIH1cblx0XG5cdCAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgY29tcG9uZW50IGhhcyBzbG90IGNoaWxkcmVuXG5cdCAgLy8gd2UgbmVlZCB0byBkbyB0aGlzIGJlZm9yZSBvdmVyd3JpdGluZyAkb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW5cblx0ICB2YXIgaGFzQ2hpbGRyZW4gPSAhIShcblx0ICAgIHJlbmRlckNoaWxkcmVuIHx8ICAgICAgICAgICAgICAgLy8gaGFzIG5ldyBzdGF0aWMgc2xvdHNcblx0ICAgIHZtLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiB8fCAgLy8gaGFzIG9sZCBzdGF0aWMgc2xvdHNcblx0ICAgIHBhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHMgfHwgLy8gaGFzIG5ldyBzY29wZWQgc2xvdHNcblx0ICAgIHZtLiRzY29wZWRTbG90cyAhPT0gZW1wdHlPYmplY3QgLy8gaGFzIG9sZCBzY29wZWQgc2xvdHNcblx0ICApO1xuXHRcblx0ICB2bS4kb3B0aW9ucy5fcGFyZW50Vm5vZGUgPSBwYXJlbnRWbm9kZTtcblx0ICB2bS4kdm5vZGUgPSBwYXJlbnRWbm9kZTsgLy8gdXBkYXRlIHZtJ3MgcGxhY2Vob2xkZXIgbm9kZSB3aXRob3V0IHJlLXJlbmRlclxuXHRcblx0ICBpZiAodm0uX3Zub2RlKSB7IC8vIHVwZGF0ZSBjaGlsZCB0cmVlJ3MgcGFyZW50XG5cdCAgICB2bS5fdm5vZGUucGFyZW50ID0gcGFyZW50Vm5vZGU7XG5cdCAgfVxuXHQgIHZtLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiA9IHJlbmRlckNoaWxkcmVuO1xuXHRcblx0ICAvLyB1cGRhdGUgJGF0dHJzIGFuZCAkbGlzdGVuZXJzIGhhc2hcblx0ICAvLyB0aGVzZSBhcmUgYWxzbyByZWFjdGl2ZSBzbyB0aGV5IG1heSB0cmlnZ2VyIGNoaWxkIHVwZGF0ZSBpZiB0aGUgY2hpbGRcblx0ICAvLyB1c2VkIHRoZW0gZHVyaW5nIHJlbmRlclxuXHQgIHZtLiRhdHRycyA9IHBhcmVudFZub2RlLmRhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3Q7XG5cdCAgdm0uJGxpc3RlbmVycyA9IGxpc3RlbmVycyB8fCBlbXB0eU9iamVjdDtcblx0XG5cdCAgLy8gdXBkYXRlIHByb3BzXG5cdCAgaWYgKHByb3BzRGF0YSAmJiB2bS4kb3B0aW9ucy5wcm9wcykge1xuXHQgICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTtcblx0ICAgIHZhciBwcm9wcyA9IHZtLl9wcm9wcztcblx0ICAgIHZhciBwcm9wS2V5cyA9IHZtLiRvcHRpb25zLl9wcm9wS2V5cyB8fCBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcEtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGtleSA9IHByb3BLZXlzW2ldO1xuXHQgICAgICB2YXIgcHJvcE9wdGlvbnMgPSB2bS4kb3B0aW9ucy5wcm9wczsgLy8gd3RmIGZsb3c/XG5cdCAgICAgIHByb3BzW2tleV0gPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wT3B0aW9ucywgcHJvcHNEYXRhLCB2bSk7XG5cdCAgICB9XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG5cdCAgICAvLyBrZWVwIGEgY29weSBvZiByYXcgcHJvcHNEYXRhXG5cdCAgICB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgPSBwcm9wc0RhdGE7XG5cdCAgfVxuXHRcblx0ICAvLyB1cGRhdGUgbGlzdGVuZXJzXG5cdCAgbGlzdGVuZXJzID0gbGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0O1xuXHQgIHZhciBvbGRMaXN0ZW5lcnMgPSB2bS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuXHQgIHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnMgPSBsaXN0ZW5lcnM7XG5cdCAgdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzKHZtLCBsaXN0ZW5lcnMsIG9sZExpc3RlbmVycyk7XG5cdFxuXHQgIC8vIHJlc29sdmUgc2xvdHMgKyBmb3JjZSB1cGRhdGUgaWYgaGFzIGNoaWxkcmVuXG5cdCAgaWYgKGhhc0NoaWxkcmVuKSB7XG5cdCAgICB2bS4kc2xvdHMgPSByZXNvbHZlU2xvdHMocmVuZGVyQ2hpbGRyZW4sIHBhcmVudFZub2RlLmNvbnRleHQpO1xuXHQgICAgdm0uJGZvcmNlVXBkYXRlKCk7XG5cdCAgfVxuXHRcblx0ICB7XG5cdCAgICBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzSW5JbmFjdGl2ZVRyZWUgKHZtKSB7XG5cdCAgd2hpbGUgKHZtICYmICh2bSA9IHZtLiRwYXJlbnQpKSB7XG5cdCAgICBpZiAodm0uX2luYWN0aXZlKSB7IHJldHVybiB0cnVlIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHtcblx0ICBpZiAoZGlyZWN0KSB7XG5cdCAgICB2bS5fZGlyZWN0SW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIGlmIChpc0luSW5hY3RpdmVUcmVlKHZtKSkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHZtLl9kaXJlY3RJbmFjdGl2ZSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIGlmICh2bS5faW5hY3RpdmUgfHwgdm0uX2luYWN0aXZlID09PSBudWxsKSB7XG5cdCAgICB2bS5faW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uJGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQodm0uJGNoaWxkcmVuW2ldKTtcblx0ICAgIH1cblx0ICAgIGNhbGxIb29rKHZtLCAnYWN0aXZhdGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHtcblx0ICBpZiAoZGlyZWN0KSB7XG5cdCAgICB2bS5fZGlyZWN0SW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgaWYgKGlzSW5JbmFjdGl2ZVRyZWUodm0pKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXZtLl9pbmFjdGl2ZSkge1xuXHQgICAgdm0uX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uJGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pO1xuXHQgICAgfVxuXHQgICAgY2FsbEhvb2sodm0sICdkZWFjdGl2YXRlZCcpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsbEhvb2sgKHZtLCBob29rKSB7XG5cdCAgLy8gIzc1NzMgZGlzYWJsZSBkZXAgY29sbGVjdGlvbiB3aGVuIGludm9raW5nIGxpZmVjeWNsZSBob29rc1xuXHQgIHB1c2hUYXJnZXQoKTtcblx0ICB2YXIgaGFuZGxlcnMgPSB2bS4kb3B0aW9uc1tob29rXTtcblx0ICBpZiAoaGFuZGxlcnMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh2bSk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgKGhvb2sgKyBcIiBob29rXCIpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAodm0uX2hhc0hvb2tFdmVudCkge1xuXHQgICAgdm0uJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuXHQgIH1cblx0ICBwb3BUYXJnZXQoKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0dmFyIE1BWF9VUERBVEVfQ09VTlQgPSAxMDA7XG5cdFxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGFjdGl2YXRlZENoaWxkcmVuID0gW107XG5cdHZhciBoYXMgPSB7fTtcblx0dmFyIGNpcmN1bGFyID0ge307XG5cdHZhciB3YWl0aW5nID0gZmFsc2U7XG5cdHZhciBmbHVzaGluZyA9IGZhbHNlO1xuXHR2YXIgaW5kZXggPSAwO1xuXHRcblx0LyoqXG5cdCAqIFJlc2V0IHRoZSBzY2hlZHVsZXIncyBzdGF0ZS5cblx0ICovXG5cdGZ1bmN0aW9uIHJlc2V0U2NoZWR1bGVyU3RhdGUgKCkge1xuXHQgIGluZGV4ID0gcXVldWUubGVuZ3RoID0gYWN0aXZhdGVkQ2hpbGRyZW4ubGVuZ3RoID0gMDtcblx0ICBoYXMgPSB7fTtcblx0ICB7XG5cdCAgICBjaXJjdWxhciA9IHt9O1xuXHQgIH1cblx0ICB3YWl0aW5nID0gZmx1c2hpbmcgPSBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsdXNoIGJvdGggcXVldWVzIGFuZCBydW4gdGhlIHdhdGNoZXJzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZmx1c2hTY2hlZHVsZXJRdWV1ZSAoKSB7XG5cdCAgZmx1c2hpbmcgPSB0cnVlO1xuXHQgIHZhciB3YXRjaGVyLCBpZDtcblx0XG5cdCAgLy8gU29ydCBxdWV1ZSBiZWZvcmUgZmx1c2guXG5cdCAgLy8gVGhpcyBlbnN1cmVzIHRoYXQ6XG5cdCAgLy8gMS4gQ29tcG9uZW50cyBhcmUgdXBkYXRlZCBmcm9tIHBhcmVudCB0byBjaGlsZC4gKGJlY2F1c2UgcGFyZW50IGlzIGFsd2F5c1xuXHQgIC8vICAgIGNyZWF0ZWQgYmVmb3JlIHRoZSBjaGlsZClcblx0ICAvLyAyLiBBIGNvbXBvbmVudCdzIHVzZXIgd2F0Y2hlcnMgYXJlIHJ1biBiZWZvcmUgaXRzIHJlbmRlciB3YXRjaGVyIChiZWNhdXNlXG5cdCAgLy8gICAgdXNlciB3YXRjaGVycyBhcmUgY3JlYXRlZCBiZWZvcmUgdGhlIHJlbmRlciB3YXRjaGVyKVxuXHQgIC8vIDMuIElmIGEgY29tcG9uZW50IGlzIGRlc3Ryb3llZCBkdXJpbmcgYSBwYXJlbnQgY29tcG9uZW50J3Mgd2F0Y2hlciBydW4sXG5cdCAgLy8gICAgaXRzIHdhdGNoZXJzIGNhbiBiZSBza2lwcGVkLlxuXHQgIHF1ZXVlLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuaWQgLSBiLmlkOyB9KTtcblx0XG5cdCAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG5cdCAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG5cdCAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgcXVldWUubGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICB3YXRjaGVyID0gcXVldWVbaW5kZXhdO1xuXHQgICAgaWQgPSB3YXRjaGVyLmlkO1xuXHQgICAgaGFzW2lkXSA9IG51bGw7XG5cdCAgICB3YXRjaGVyLnJ1bigpO1xuXHQgICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuXHQgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuXHQgICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcblx0ICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IE1BWF9VUERBVEVfQ09VTlQpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCAnICsgKFxuXHQgICAgICAgICAgICB3YXRjaGVyLnVzZXJcblx0ICAgICAgICAgICAgICA/IChcImluIHdhdGNoZXIgd2l0aCBleHByZXNzaW9uIFxcXCJcIiArICh3YXRjaGVyLmV4cHJlc3Npb24pICsgXCJcXFwiXCIpXG5cdCAgICAgICAgICAgICAgOiBcImluIGEgY29tcG9uZW50IHJlbmRlciBmdW5jdGlvbi5cIlxuXHQgICAgICAgICAgKSxcblx0ICAgICAgICAgIHdhdGNoZXIudm1cblx0ICAgICAgICApO1xuXHQgICAgICAgIGJyZWFrXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIGtlZXAgY29waWVzIG9mIHBvc3QgcXVldWVzIGJlZm9yZSByZXNldHRpbmcgc3RhdGVcblx0ICB2YXIgYWN0aXZhdGVkUXVldWUgPSBhY3RpdmF0ZWRDaGlsZHJlbi5zbGljZSgpO1xuXHQgIHZhciB1cGRhdGVkUXVldWUgPSBxdWV1ZS5zbGljZSgpO1xuXHRcblx0ICByZXNldFNjaGVkdWxlclN0YXRlKCk7XG5cdFxuXHQgIC8vIGNhbGwgY29tcG9uZW50IHVwZGF0ZWQgYW5kIGFjdGl2YXRlZCBob29rc1xuXHQgIGNhbGxBY3RpdmF0ZWRIb29rcyhhY3RpdmF0ZWRRdWV1ZSk7XG5cdCAgY2FsbFVwZGF0ZWRIb29rcyh1cGRhdGVkUXVldWUpO1xuXHRcblx0ICAvLyBkZXZ0b29sIGhvb2tcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsbFVwZGF0ZWRIb29rcyAocXVldWUpIHtcblx0ICB2YXIgaSA9IHF1ZXVlLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuXHQgICAgdmFyIHZtID0gd2F0Y2hlci52bTtcblx0ICAgIGlmICh2bS5fd2F0Y2hlciA9PT0gd2F0Y2hlciAmJiB2bS5faXNNb3VudGVkKSB7XG5cdCAgICAgIGNhbGxIb29rKHZtLCAndXBkYXRlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFF1ZXVlIGEga2VwdC1hbGl2ZSBjb21wb25lbnQgdGhhdCB3YXMgYWN0aXZhdGVkIGR1cmluZyBwYXRjaC5cblx0ICogVGhlIHF1ZXVlIHdpbGwgYmUgcHJvY2Vzc2VkIGFmdGVyIHRoZSBlbnRpcmUgdHJlZSBoYXMgYmVlbiBwYXRjaGVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gcXVldWVBY3RpdmF0ZWRDb21wb25lbnQgKHZtKSB7XG5cdCAgLy8gc2V0dGluZyBfaW5hY3RpdmUgdG8gZmFsc2UgaGVyZSBzbyB0aGF0IGEgcmVuZGVyIGZ1bmN0aW9uIGNhblxuXHQgIC8vIHJlbHkgb24gY2hlY2tpbmcgd2hldGhlciBpdCdzIGluIGFuIGluYWN0aXZlIHRyZWUgKGUuZy4gcm91dGVyLXZpZXcpXG5cdCAgdm0uX2luYWN0aXZlID0gZmFsc2U7XG5cdCAgYWN0aXZhdGVkQ2hpbGRyZW4ucHVzaCh2bSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbGxBY3RpdmF0ZWRIb29rcyAocXVldWUpIHtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBxdWV1ZVtpXS5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudChxdWV1ZVtpXSwgdHJ1ZSAvKiB0cnVlICovKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuXHQgKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3Ncblx0ICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBxdWV1ZVdhdGNoZXIgKHdhdGNoZXIpIHtcblx0ICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgIGlmIChoYXNbaWRdID09IG51bGwpIHtcblx0ICAgIGhhc1tpZF0gPSB0cnVlO1xuXHQgICAgaWYgKCFmbHVzaGluZykge1xuXHQgICAgICBxdWV1ZS5wdXNoKHdhdGNoZXIpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gaWYgYWxyZWFkeSBmbHVzaGluZywgc3BsaWNlIHRoZSB3YXRjaGVyIGJhc2VkIG9uIGl0cyBpZFxuXHQgICAgICAvLyBpZiBhbHJlYWR5IHBhc3QgaXRzIGlkLCBpdCB3aWxsIGJlIHJ1biBuZXh0IGltbWVkaWF0ZWx5LlxuXHQgICAgICB2YXIgaSA9IHF1ZXVlLmxlbmd0aCAtIDE7XG5cdCAgICAgIHdoaWxlIChpID4gaW5kZXggJiYgcXVldWVbaV0uaWQgPiB3YXRjaGVyLmlkKSB7XG5cdCAgICAgICAgaS0tO1xuXHQgICAgICB9XG5cdCAgICAgIHF1ZXVlLnNwbGljZShpICsgMSwgMCwgd2F0Y2hlcik7XG5cdCAgICB9XG5cdCAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcblx0ICAgIGlmICghd2FpdGluZykge1xuXHQgICAgICB3YWl0aW5nID0gdHJ1ZTtcblx0ICAgICAgbmV4dFRpY2soZmx1c2hTY2hlZHVsZXJRdWV1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciB1aWQkMSA9IDA7XG5cdFxuXHQvKipcblx0ICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG5cdCAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG5cdCAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuXHQgKi9cblx0dmFyIFdhdGNoZXIgPSBmdW5jdGlvbiBXYXRjaGVyIChcblx0ICB2bSxcblx0ICBleHBPckZuLFxuXHQgIGNiLFxuXHQgIG9wdGlvbnMsXG5cdCAgaXNSZW5kZXJXYXRjaGVyXG5cdCkge1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICBpZiAoaXNSZW5kZXJXYXRjaGVyKSB7XG5cdCAgICB2bS5fd2F0Y2hlciA9IHRoaXM7XG5cdCAgfVxuXHQgIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuXHQgIC8vIG9wdGlvbnNcblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgdGhpcy5kZWVwID0gISFvcHRpb25zLmRlZXA7XG5cdCAgICB0aGlzLnVzZXIgPSAhIW9wdGlvbnMudXNlcjtcblx0ICAgIHRoaXMubGF6eSA9ICEhb3B0aW9ucy5sYXp5O1xuXHQgICAgdGhpcy5zeW5jID0gISFvcHRpb25zLnN5bmM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMuZGVlcCA9IHRoaXMudXNlciA9IHRoaXMubGF6eSA9IHRoaXMuc3luYyA9IGZhbHNlO1xuXHQgIH1cblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgdGhpcy5pZCA9ICsrdWlkJDE7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcblx0ICB0aGlzLmFjdGl2ZSA9IHRydWU7XG5cdCAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcblx0ICB0aGlzLmRlcHMgPSBbXTtcblx0ICB0aGlzLm5ld0RlcHMgPSBbXTtcblx0ICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm4udG9TdHJpbmcoKTtcblx0ICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXJcblx0ICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5nZXR0ZXIgPSBwYXJzZVBhdGgoZXhwT3JGbik7XG5cdCAgICBpZiAoIXRoaXMuZ2V0dGVyKSB7XG5cdCAgICAgIHRoaXMuZ2V0dGVyID0gZnVuY3Rpb24gKCkge307XG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgXCJGYWlsZWQgd2F0Y2hpbmcgcGF0aDogXFxcIlwiICsgZXhwT3JGbiArIFwiXFxcIiBcIiArXG5cdCAgICAgICAgJ1dhdGNoZXIgb25seSBhY2NlcHRzIHNpbXBsZSBkb3QtZGVsaW1pdGVkIHBhdGhzLiAnICtcblx0ICAgICAgICAnRm9yIGZ1bGwgY29udHJvbCwgdXNlIGEgZnVuY3Rpb24gaW5zdGVhZC4nLFxuXHQgICAgICAgIHZtXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHRoaXMudmFsdWUgPSB0aGlzLmxhenlcblx0ICAgID8gdW5kZWZpbmVkXG5cdCAgICA6IHRoaXMuZ2V0KCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuXHQgKi9cblx0V2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0ICgpIHtcblx0ICBwdXNoVGFyZ2V0KHRoaXMpO1xuXHQgIHZhciB2YWx1ZTtcblx0ICB2YXIgdm0gPSB0aGlzLnZtO1xuXHQgIHRyeSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwodm0sIHZtKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAodGhpcy51c2VyKSB7XG5cdCAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAoXCJnZXR0ZXIgZm9yIHdhdGNoZXIgXFxcIlwiICsgKHRoaXMuZXhwcmVzc2lvbikgKyBcIlxcXCJcIikpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhyb3cgZVxuXHQgICAgfVxuXHQgIH0gZmluYWxseSB7XG5cdCAgICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcblx0ICAgIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuXHQgICAgaWYgKHRoaXMuZGVlcCkge1xuXHQgICAgICB0cmF2ZXJzZSh2YWx1ZSk7XG5cdCAgICB9XG5cdCAgICBwb3BUYXJnZXQoKTtcblx0ICAgIHRoaXMuY2xlYW51cERlcHMoKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbHVlXG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cblx0ICovXG5cdFdhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIGFkZERlcCAoZGVwKSB7XG5cdCAgdmFyIGlkID0gZGVwLmlkO1xuXHQgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuXHQgICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcblx0ICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7XG5cdCAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cblx0ICovXG5cdFdhdGNoZXIucHJvdG90eXBlLmNsZWFudXBEZXBzID0gZnVuY3Rpb24gY2xlYW51cERlcHMgKCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB2YXIgZGVwID0gdGhpcyQxLmRlcHNbaV07XG5cdCAgICBpZiAoIXRoaXMkMS5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcblx0ICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzJDEpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgdG1wID0gdGhpcy5kZXBJZHM7XG5cdCAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcblx0ICB0aGlzLm5ld0RlcElkcyA9IHRtcDtcblx0ICB0aGlzLm5ld0RlcElkcy5jbGVhcigpO1xuXHQgIHRtcCA9IHRoaXMuZGVwcztcblx0ICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7XG5cdCAgdGhpcy5uZXdEZXBzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLlxuXHQgKi9cblx0V2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlICgpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmICh0aGlzLmxhenkpIHtcblx0ICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXHQgIH0gZWxzZSBpZiAodGhpcy5zeW5jKSB7XG5cdCAgICB0aGlzLnJ1bigpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBxdWV1ZVdhdGNoZXIodGhpcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNjaGVkdWxlciBqb2IgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgc2NoZWR1bGVyLlxuXHQgKi9cblx0V2F0Y2hlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gcnVuICgpIHtcblx0ICBpZiAodGhpcy5hY3RpdmUpIHtcblx0ICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgICBpZiAoXG5cdCAgICAgIHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG5cdCAgICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuXHQgICAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG5cdCAgICAgIC8vIGhhdmUgbXV0YXRlZC5cblx0ICAgICAgaXNPYmplY3QodmFsdWUpIHx8XG5cdCAgICAgIHRoaXMuZGVlcFxuXHQgICAgKSB7XG5cdCAgICAgIC8vIHNldCBuZXcgdmFsdWVcblx0ICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICBpZiAodGhpcy51c2VyKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIGhhbmRsZUVycm9yKGUsIHRoaXMudm0sIChcImNhbGxiYWNrIGZvciB3YXRjaGVyIFxcXCJcIiArICh0aGlzLmV4cHJlc3Npb24pICsgXCJcXFwiXCIpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLlxuXHQgKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG5cdCAqL1xuXHRXYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIGV2YWx1YXRlICgpIHtcblx0ICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKTtcblx0ICB0aGlzLmRpcnR5ID0gZmFsc2U7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG5cdCAqL1xuXHRXYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiBkZXBlbmQgKCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB0aGlzJDEuZGVwc1tpXS5kZXBlbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJzY3JpYmVyIGxpc3QuXG5cdCAqL1xuXHRXYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uIHRlYXJkb3duICgpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICBpZiAodGhpcy5hY3RpdmUpIHtcblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3Rcblx0ICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXRcblx0ICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQuXG5cdCAgICBpZiAoIXRoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWQpIHtcblx0ICAgICAgcmVtb3ZlKHRoaXMudm0uX3dhdGNoZXJzLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcyQxLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMkMSk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbiA9IHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IG5vb3AsXG5cdCAgc2V0OiBub29wXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBwcm94eSAodGFyZ2V0LCBzb3VyY2VLZXksIGtleSkge1xuXHQgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSBmdW5jdGlvbiBwcm94eUdldHRlciAoKSB7XG5cdCAgICByZXR1cm4gdGhpc1tzb3VyY2VLZXldW2tleV1cblx0ICB9O1xuXHQgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBmdW5jdGlvbiBwcm94eVNldHRlciAodmFsKSB7XG5cdCAgICB0aGlzW3NvdXJjZUtleV1ba2V5XSA9IHZhbDtcblx0ICB9O1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdFN0YXRlICh2bSkge1xuXHQgIHZtLl93YXRjaGVycyA9IFtdO1xuXHQgIHZhciBvcHRzID0gdm0uJG9wdGlvbnM7XG5cdCAgaWYgKG9wdHMucHJvcHMpIHsgaW5pdFByb3BzKHZtLCBvcHRzLnByb3BzKTsgfVxuXHQgIGlmIChvcHRzLm1ldGhvZHMpIHsgaW5pdE1ldGhvZHModm0sIG9wdHMubWV0aG9kcyk7IH1cblx0ICBpZiAob3B0cy5kYXRhKSB7XG5cdCAgICBpbml0RGF0YSh2bSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9ic2VydmUodm0uX2RhdGEgPSB7fSwgdHJ1ZSAvKiBhc1Jvb3REYXRhICovKTtcblx0ICB9XG5cdCAgaWYgKG9wdHMuY29tcHV0ZWQpIHsgaW5pdENvbXB1dGVkKHZtLCBvcHRzLmNvbXB1dGVkKTsgfVxuXHQgIGlmIChvcHRzLndhdGNoICYmIG9wdHMud2F0Y2ggIT09IG5hdGl2ZVdhdGNoKSB7XG5cdCAgICBpbml0V2F0Y2godm0sIG9wdHMud2F0Y2gpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdFByb3BzICh2bSwgcHJvcHNPcHRpb25zKSB7XG5cdCAgdmFyIHByb3BzRGF0YSA9IHZtLiRvcHRpb25zLnByb3BzRGF0YSB8fCB7fTtcblx0ICB2YXIgcHJvcHMgPSB2bS5fcHJvcHMgPSB7fTtcblx0ICAvLyBjYWNoZSBwcm9wIGtleXMgc28gdGhhdCBmdXR1cmUgcHJvcHMgdXBkYXRlcyBjYW4gaXRlcmF0ZSB1c2luZyBBcnJheVxuXHQgIC8vIGluc3RlYWQgb2YgZHluYW1pYyBvYmplY3Qga2V5IGVudW1lcmF0aW9uLlxuXHQgIHZhciBrZXlzID0gdm0uJG9wdGlvbnMuX3Byb3BLZXlzID0gW107XG5cdCAgdmFyIGlzUm9vdCA9ICF2bS4kcGFyZW50O1xuXHQgIC8vIHJvb3QgaW5zdGFuY2UgcHJvcHMgc2hvdWxkIGJlIGNvbnZlcnRlZFxuXHQgIGlmICghaXNSb290KSB7XG5cdCAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpO1xuXHQgIH1cblx0ICB2YXIgbG9vcCA9IGZ1bmN0aW9uICgga2V5ICkge1xuXHQgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICB2YXIgdmFsdWUgPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wc09wdGlvbnMsIHByb3BzRGF0YSwgdm0pO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICAgIHtcblx0ICAgICAgdmFyIGh5cGhlbmF0ZWRLZXkgPSBoeXBoZW5hdGUoa2V5KTtcblx0ICAgICAgaWYgKGlzUmVzZXJ2ZWRBdHRyaWJ1dGUoaHlwaGVuYXRlZEtleSkgfHxcblx0ICAgICAgICAgIGNvbmZpZy5pc1Jlc2VydmVkQXR0cihoeXBoZW5hdGVkS2V5KSkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAoXCJcXFwiXCIgKyBoeXBoZW5hdGVkS2V5ICsgXCJcXFwiIGlzIGEgcmVzZXJ2ZWQgYXR0cmlidXRlIGFuZCBjYW5ub3QgYmUgdXNlZCBhcyBjb21wb25lbnQgcHJvcC5cIiksXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgZGVmaW5lUmVhY3RpdmUocHJvcHMsIGtleSwgdmFsdWUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodm0uJHBhcmVudCAmJiAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50KSB7XG5cdCAgICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgICBcIkF2b2lkIG11dGF0aW5nIGEgcHJvcCBkaXJlY3RseSBzaW5jZSB0aGUgdmFsdWUgd2lsbCBiZSBcIiArXG5cdCAgICAgICAgICAgIFwib3ZlcndyaXR0ZW4gd2hlbmV2ZXIgdGhlIHBhcmVudCBjb21wb25lbnQgcmUtcmVuZGVycy4gXCIgK1xuXHQgICAgICAgICAgICBcIkluc3RlYWQsIHVzZSBhIGRhdGEgb3IgY29tcHV0ZWQgcHJvcGVydHkgYmFzZWQgb24gdGhlIHByb3AncyBcIiArXG5cdCAgICAgICAgICAgIFwidmFsdWUuIFByb3AgYmVpbmcgbXV0YXRlZDogXFxcIlwiICsga2V5ICsgXCJcXFwiXCIsXG5cdCAgICAgICAgICAgIHZtXG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICAvLyBzdGF0aWMgcHJvcHMgYXJlIGFscmVhZHkgcHJveGllZCBvbiB0aGUgY29tcG9uZW50J3MgcHJvdG90eXBlXG5cdCAgICAvLyBkdXJpbmcgVnVlLmV4dGVuZCgpLiBXZSBvbmx5IG5lZWQgdG8gcHJveHkgcHJvcHMgZGVmaW5lZCBhdFxuXHQgICAgLy8gaW5zdGFudGlhdGlvbiBoZXJlLlxuXHQgICAgaWYgKCEoa2V5IGluIHZtKSkge1xuXHQgICAgICBwcm94eSh2bSwgXCJfcHJvcHNcIiwga2V5KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmb3IgKHZhciBrZXkgaW4gcHJvcHNPcHRpb25zKSBsb29wKCBrZXkgKTtcblx0ICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluaXREYXRhICh2bSkge1xuXHQgIHZhciBkYXRhID0gdm0uJG9wdGlvbnMuZGF0YTtcblx0ICBkYXRhID0gdm0uX2RhdGEgPSB0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgPyBnZXREYXRhKGRhdGEsIHZtKVxuXHQgICAgOiBkYXRhIHx8IHt9O1xuXHQgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuXHQgICAgZGF0YSA9IHt9O1xuXHQgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0OlxcbicgK1xuXHQgICAgICAnaHR0cHM6Ly92dWVqcy5vcmcvdjIvZ3VpZGUvY29tcG9uZW50cy5odG1sI2RhdGEtTXVzdC1CZS1hLUZ1bmN0aW9uJyxcblx0ICAgICAgdm1cblx0ICAgICk7XG5cdCAgfVxuXHQgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2Vcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuXHQgIHZhciBwcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzO1xuXHQgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcblx0ICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAge1xuXHQgICAgICBpZiAobWV0aG9kcyAmJiBoYXNPd24obWV0aG9kcywga2V5KSkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAoXCJNZXRob2QgXFxcIlwiICsga2V5ICsgXCJcXFwiIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCBhcyBhIGRhdGEgcHJvcGVydHkuXCIpLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAocHJvcHMgJiYgaGFzT3duKHByb3BzLCBrZXkpKSB7XG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgICAgXCJUaGUgZGF0YSBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgYWxyZWFkeSBkZWNsYXJlZCBhcyBhIHByb3AuIFwiICtcblx0ICAgICAgICBcIlVzZSBwcm9wIGRlZmF1bHQgdmFsdWUgaW5zdGVhZC5cIixcblx0ICAgICAgICB2bVxuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgIHByb3h5KHZtLCBcIl9kYXRhXCIsIGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIG9ic2VydmUgZGF0YVxuXHQgIG9ic2VydmUoZGF0YSwgdHJ1ZSAvKiBhc1Jvb3REYXRhICovKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RGF0YSAoZGF0YSwgdm0pIHtcblx0ICAvLyAjNzU3MyBkaXNhYmxlIGRlcCBjb2xsZWN0aW9uIHdoZW4gaW52b2tpbmcgZGF0YSBnZXR0ZXJzXG5cdCAgcHVzaFRhcmdldCgpO1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gZGF0YS5jYWxsKHZtLCB2bSlcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBoYW5kbGVFcnJvcihlLCB2bSwgXCJkYXRhKClcIik7XG5cdCAgICByZXR1cm4ge31cblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcG9wVGFyZ2V0KCk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY29tcHV0ZWRXYXRjaGVyT3B0aW9ucyA9IHsgbGF6eTogdHJ1ZSB9O1xuXHRcblx0ZnVuY3Rpb24gaW5pdENvbXB1dGVkICh2bSwgY29tcHV0ZWQpIHtcblx0ICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICB2YXIgd2F0Y2hlcnMgPSB2bS5fY29tcHV0ZWRXYXRjaGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgLy8gY29tcHV0ZWQgcHJvcGVydGllcyBhcmUganVzdCBnZXR0ZXJzIGR1cmluZyBTU1Jcblx0ICB2YXIgaXNTU1IgPSBpc1NlcnZlclJlbmRlcmluZygpO1xuXHRcblx0ICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcblx0ICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTtcblx0ICAgIHZhciBnZXR0ZXIgPSB0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJyA/IHVzZXJEZWYgOiB1c2VyRGVmLmdldDtcblx0ICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBnZXR0ZXIgPT0gbnVsbCkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgIChcIkdldHRlciBpcyBtaXNzaW5nIGZvciBjb21wdXRlZCBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIuXCIpLFxuXHQgICAgICAgIHZtXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFpc1NTUikge1xuXHQgICAgICAvLyBjcmVhdGUgaW50ZXJuYWwgd2F0Y2hlciBmb3IgdGhlIGNvbXB1dGVkIHByb3BlcnR5LlxuXHQgICAgICB3YXRjaGVyc1trZXldID0gbmV3IFdhdGNoZXIoXG5cdCAgICAgICAgdm0sXG5cdCAgICAgICAgZ2V0dGVyIHx8IG5vb3AsXG5cdCAgICAgICAgbm9vcCxcblx0ICAgICAgICBjb21wdXRlZFdhdGNoZXJPcHRpb25zXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gY29tcG9uZW50LWRlZmluZWQgY29tcHV0ZWQgcHJvcGVydGllcyBhcmUgYWxyZWFkeSBkZWZpbmVkIG9uIHRoZVxuXHQgICAgLy8gY29tcG9uZW50IHByb3RvdHlwZS4gV2Ugb25seSBuZWVkIHRvIGRlZmluZSBjb21wdXRlZCBwcm9wZXJ0aWVzIGRlZmluZWRcblx0ICAgIC8vIGF0IGluc3RhbnRpYXRpb24gaGVyZS5cblx0ICAgIGlmICghKGtleSBpbiB2bSkpIHtcblx0ICAgICAgZGVmaW5lQ29tcHV0ZWQodm0sIGtleSwgdXNlckRlZik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoa2V5IGluIHZtLiRkYXRhKSB7XG5cdCAgICAgICAgd2FybigoXCJUaGUgY29tcHV0ZWQgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIGFscmVhZHkgZGVmaW5lZCBpbiBkYXRhLlwiKSwgdm0pO1xuXHQgICAgICB9IGVsc2UgaWYgKHZtLiRvcHRpb25zLnByb3BzICYmIGtleSBpbiB2bS4kb3B0aW9ucy5wcm9wcykge1xuXHQgICAgICAgIHdhcm4oKFwiVGhlIGNvbXB1dGVkIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIiBpcyBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wLlwiKSwgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkZWZpbmVDb21wdXRlZCAoXG5cdCAgdGFyZ2V0LFxuXHQgIGtleSxcblx0ICB1c2VyRGVmXG5cdCkge1xuXHQgIHZhciBzaG91bGRDYWNoZSA9ICFpc1NlcnZlclJlbmRlcmluZygpO1xuXHQgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IHNob3VsZENhY2hlXG5cdCAgICAgID8gY3JlYXRlQ29tcHV0ZWRHZXR0ZXIoa2V5KVxuXHQgICAgICA6IHVzZXJEZWY7XG5cdCAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gbm9vcDtcblx0ICB9IGVsc2Uge1xuXHQgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IHVzZXJEZWYuZ2V0XG5cdCAgICAgID8gc2hvdWxkQ2FjaGUgJiYgdXNlckRlZi5jYWNoZSAhPT0gZmFsc2Vcblx0ICAgICAgICA/IGNyZWF0ZUNvbXB1dGVkR2V0dGVyKGtleSlcblx0ICAgICAgICA6IHVzZXJEZWYuZ2V0XG5cdCAgICAgIDogbm9vcDtcblx0ICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSB1c2VyRGVmLnNldFxuXHQgICAgICA/IHVzZXJEZWYuc2V0XG5cdCAgICAgIDogbm9vcDtcblx0ICB9XG5cdCAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPT09IG5vb3ApIHtcblx0ICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgKFwiQ29tcHV0ZWQgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIHdhcyBhc3NpZ25lZCB0byBidXQgaXQgaGFzIG5vIHNldHRlci5cIiksXG5cdCAgICAgICAgdGhpc1xuXHQgICAgICApO1xuXHQgICAgfTtcblx0ICB9XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb21wdXRlZEdldHRlciAoa2V5KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyICgpIHtcblx0ICAgIHZhciB3YXRjaGVyID0gdGhpcy5fY29tcHV0ZWRXYXRjaGVycyAmJiB0aGlzLl9jb21wdXRlZFdhdGNoZXJzW2tleV07XG5cdCAgICBpZiAod2F0Y2hlcikge1xuXHQgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuXHQgICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluaXRNZXRob2RzICh2bSwgbWV0aG9kcykge1xuXHQgIHZhciBwcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzO1xuXHQgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG5cdCAgICB7XG5cdCAgICAgIGlmIChtZXRob2RzW2tleV0gPT0gbnVsbCkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICBcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaGFzIGFuIHVuZGVmaW5lZCB2YWx1ZSBpbiB0aGUgY29tcG9uZW50IGRlZmluaXRpb24uIFwiICtcblx0ICAgICAgICAgIFwiRGlkIHlvdSByZWZlcmVuY2UgdGhlIGZ1bmN0aW9uIGNvcnJlY3RseT9cIixcblx0ICAgICAgICAgIHZtXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocHJvcHMgJiYgaGFzT3duKHByb3BzLCBrZXkpKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIChcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgcHJvcC5cIiksXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKChrZXkgaW4gdm0pICYmIGlzUmVzZXJ2ZWQoa2V5KSkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICBcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgY29uZmxpY3RzIHdpdGggYW4gZXhpc3RpbmcgVnVlIGluc3RhbmNlIG1ldGhvZC4gXCIgK1xuXHQgICAgICAgICAgXCJBdm9pZCBkZWZpbmluZyBjb21wb25lbnQgbWV0aG9kcyB0aGF0IHN0YXJ0IHdpdGggXyBvciAkLlwiXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdm1ba2V5XSA9IG1ldGhvZHNba2V5XSA9PSBudWxsID8gbm9vcCA6IGJpbmQobWV0aG9kc1trZXldLCB2bSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0V2F0Y2ggKHZtLCB3YXRjaCkge1xuXHQgIGZvciAodmFyIGtleSBpbiB3YXRjaCkge1xuXHQgICAgdmFyIGhhbmRsZXIgPSB3YXRjaFtrZXldO1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoaGFuZGxlcikpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY3JlYXRlV2F0Y2hlcih2bSwga2V5LCBoYW5kbGVyW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY3JlYXRlV2F0Y2hlcih2bSwga2V5LCBoYW5kbGVyKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVdhdGNoZXIgKFxuXHQgIHZtLFxuXHQgIGV4cE9yRm4sXG5cdCAgaGFuZGxlcixcblx0ICBvcHRpb25zXG5cdCkge1xuXHQgIGlmIChpc1BsYWluT2JqZWN0KGhhbmRsZXIpKSB7XG5cdCAgICBvcHRpb25zID0gaGFuZGxlcjtcblx0ICAgIGhhbmRsZXIgPSBoYW5kbGVyLmhhbmRsZXI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ3N0cmluZycpIHtcblx0ICAgIGhhbmRsZXIgPSB2bVtoYW5kbGVyXTtcblx0ICB9XG5cdCAgcmV0dXJuIHZtLiR3YXRjaChleHBPckZuLCBoYW5kbGVyLCBvcHRpb25zKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcblx0ICAvLyBmbG93IHNvbWVob3cgaGFzIHByb2JsZW1zIHdpdGggZGlyZWN0bHkgZGVjbGFyZWQgZGVmaW5pdGlvbiBvYmplY3Rcblx0ICAvLyB3aGVuIHVzaW5nIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwgc28gd2UgaGF2ZSB0byBwcm9jZWR1cmFsbHkgYnVpbGQgdXBcblx0ICAvLyB0aGUgb2JqZWN0IGhlcmUuXG5cdCAgdmFyIGRhdGFEZWYgPSB7fTtcblx0ICBkYXRhRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2RhdGEgfTtcblx0ICB2YXIgcHJvcHNEZWYgPSB7fTtcblx0ICBwcm9wc0RlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9wcm9wcyB9O1xuXHQgIHtcblx0ICAgIGRhdGFEZWYuc2V0ID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcblx0ICAgICAgd2Fybihcblx0ICAgICAgICAnQXZvaWQgcmVwbGFjaW5nIGluc3RhbmNlIHJvb3QgJGRhdGEuICcgK1xuXHQgICAgICAgICdVc2UgbmVzdGVkIGRhdGEgcHJvcGVydGllcyBpbnN0ZWFkLicsXG5cdCAgICAgICAgdGhpc1xuXHQgICAgICApO1xuXHQgICAgfTtcblx0ICAgIHByb3BzRGVmLnNldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgd2FybihcIiRwcm9wcyBpcyByZWFkb25seS5cIiwgdGhpcyk7XG5cdCAgICB9O1xuXHQgIH1cblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywgZGF0YURlZik7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckcHJvcHMnLCBwcm9wc0RlZik7XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHNldCA9IHNldDtcblx0ICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBkZWw7XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHdhdGNoID0gZnVuY3Rpb24gKFxuXHQgICAgZXhwT3JGbixcblx0ICAgIGNiLFxuXHQgICAgb3B0aW9uc1xuXHQgICkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGlmIChpc1BsYWluT2JqZWN0KGNiKSkge1xuXHQgICAgICByZXR1cm4gY3JlYXRlV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpXG5cdCAgICB9XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgIG9wdGlvbnMudXNlciA9IHRydWU7XG5cdCAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucyk7XG5cdCAgICBpZiAob3B0aW9ucy5pbW1lZGlhdGUpIHtcblx0ICAgICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuICgpIHtcblx0ICAgICAgd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdFByb3ZpZGUgKHZtKSB7XG5cdCAgdmFyIHByb3ZpZGUgPSB2bS4kb3B0aW9ucy5wcm92aWRlO1xuXHQgIGlmIChwcm92aWRlKSB7XG5cdCAgICB2bS5fcHJvdmlkZWQgPSB0eXBlb2YgcHJvdmlkZSA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgICA/IHByb3ZpZGUuY2FsbCh2bSlcblx0ICAgICAgOiBwcm92aWRlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdEluamVjdGlvbnMgKHZtKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHJlc29sdmVJbmplY3Qodm0uJG9wdGlvbnMuaW5qZWN0LCB2bSk7XG5cdCAgaWYgKHJlc3VsdCkge1xuXHQgICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTtcblx0ICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgICAgIHtcblx0ICAgICAgICBkZWZpbmVSZWFjdGl2ZSh2bSwga2V5LCByZXN1bHRba2V5XSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgd2Fybihcblx0ICAgICAgICAgICAgXCJBdm9pZCBtdXRhdGluZyBhbiBpbmplY3RlZCB2YWx1ZSBkaXJlY3RseSBzaW5jZSB0aGUgY2hhbmdlcyB3aWxsIGJlIFwiICtcblx0ICAgICAgICAgICAgXCJvdmVyd3JpdHRlbiB3aGVuZXZlciB0aGUgcHJvdmlkZWQgY29tcG9uZW50IHJlLXJlbmRlcnMuIFwiICtcblx0ICAgICAgICAgICAgXCJpbmplY3Rpb24gYmVpbmcgbXV0YXRlZDogXFxcIlwiICsga2V5ICsgXCJcXFwiXCIsXG5cdCAgICAgICAgICAgIHZtXG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVJbmplY3QgKGluamVjdCwgdm0pIHtcblx0ICBpZiAoaW5qZWN0KSB7XG5cdCAgICAvLyBpbmplY3QgaXMgOmFueSBiZWNhdXNlIGZsb3cgaXMgbm90IHNtYXJ0IGVub3VnaCB0byBmaWd1cmUgb3V0IGNhY2hlZFxuXHQgICAgdmFyIHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICB2YXIga2V5cyA9IGhhc1N5bWJvbFxuXHQgICAgICA/IFJlZmxlY3Qub3duS2V5cyhpbmplY3QpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpbmplY3QsIGtleSkuZW51bWVyYWJsZVxuXHQgICAgICB9KVxuXHQgICAgICA6IE9iamVjdC5rZXlzKGluamVjdCk7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICB2YXIgcHJvdmlkZUtleSA9IGluamVjdFtrZXldLmZyb207XG5cdCAgICAgIHZhciBzb3VyY2UgPSB2bTtcblx0ICAgICAgd2hpbGUgKHNvdXJjZSkge1xuXHQgICAgICAgIGlmIChzb3VyY2UuX3Byb3ZpZGVkICYmIGhhc093bihzb3VyY2UuX3Byb3ZpZGVkLCBwcm92aWRlS2V5KSkge1xuXHQgICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2UuX3Byb3ZpZGVkW3Byb3ZpZGVLZXldO1xuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc291cmNlID0gc291cmNlLiRwYXJlbnQ7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFzb3VyY2UpIHtcblx0ICAgICAgICBpZiAoJ2RlZmF1bHQnIGluIGluamVjdFtrZXldKSB7XG5cdCAgICAgICAgICB2YXIgcHJvdmlkZURlZmF1bHQgPSBpbmplY3Rba2V5XS5kZWZhdWx0O1xuXHQgICAgICAgICAgcmVzdWx0W2tleV0gPSB0eXBlb2YgcHJvdmlkZURlZmF1bHQgPT09ICdmdW5jdGlvbidcblx0ICAgICAgICAgICAgPyBwcm92aWRlRGVmYXVsdC5jYWxsKHZtKVxuXHQgICAgICAgICAgICA6IHByb3ZpZGVEZWZhdWx0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB3YXJuKChcIkluamVjdGlvbiBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgbm90IGZvdW5kXCIpLCB2bSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIHYtZm9yIGxpc3RzLlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVuZGVyTGlzdCAoXG5cdCAgdmFsLFxuXHQgIHJlbmRlclxuXHQpIHtcblx0ICB2YXIgcmV0LCBpLCBsLCBrZXlzLCBrZXk7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSB8fCB0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0ID0gbmV3IEFycmF5KHZhbC5sZW5ndGgpO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IHZhbC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgcmV0W2ldID0gcmVuZGVyKHZhbFtpXSwgaSk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuXHQgICAgcmV0ID0gbmV3IEFycmF5KHZhbCk7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgdmFsOyBpKyspIHtcblx0ICAgICAgcmV0W2ldID0gcmVuZGVyKGkgKyAxLCBpKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkpIHtcblx0ICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuXHQgICAgcmV0ID0gbmV3IEFycmF5KGtleXMubGVuZ3RoKTtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICByZXRbaV0gPSByZW5kZXIodmFsW2tleV0sIGtleSwgaSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChpc0RlZihyZXQpKSB7XG5cdCAgICAocmV0KS5faXNWTGlzdCA9IHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvKipcblx0ICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyA8c2xvdD5cblx0ICovXG5cdGZ1bmN0aW9uIHJlbmRlclNsb3QgKFxuXHQgIG5hbWUsXG5cdCAgZmFsbGJhY2ssXG5cdCAgcHJvcHMsXG5cdCAgYmluZE9iamVjdFxuXHQpIHtcblx0ICB2YXIgc2NvcGVkU2xvdEZuID0gdGhpcy4kc2NvcGVkU2xvdHNbbmFtZV07XG5cdCAgdmFyIG5vZGVzO1xuXHQgIGlmIChzY29wZWRTbG90Rm4pIHsgLy8gc2NvcGVkIHNsb3Rcblx0ICAgIHByb3BzID0gcHJvcHMgfHwge307XG5cdCAgICBpZiAoYmluZE9iamVjdCkge1xuXHQgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgIWlzT2JqZWN0KGJpbmRPYmplY3QpKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgICdzbG90IHYtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0Jyxcblx0ICAgICAgICAgIHRoaXNcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIHByb3BzID0gZXh0ZW5kKGV4dGVuZCh7fSwgYmluZE9iamVjdCksIHByb3BzKTtcblx0ICAgIH1cblx0ICAgIG5vZGVzID0gc2NvcGVkU2xvdEZuKHByb3BzKSB8fCBmYWxsYmFjaztcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHNsb3ROb2RlcyA9IHRoaXMuJHNsb3RzW25hbWVdO1xuXHQgICAgLy8gd2FybiBkdXBsaWNhdGUgc2xvdCB1c2FnZVxuXHQgICAgaWYgKHNsb3ROb2Rlcykge1xuXHQgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgc2xvdE5vZGVzLl9yZW5kZXJlZCkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICBcIkR1cGxpY2F0ZSBwcmVzZW5jZSBvZiBzbG90IFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgZm91bmQgaW4gdGhlIHNhbWUgcmVuZGVyIHRyZWUgXCIgK1xuXHQgICAgICAgICAgXCItIHRoaXMgd2lsbCBsaWtlbHkgY2F1c2UgcmVuZGVyIGVycm9ycy5cIixcblx0ICAgICAgICAgIHRoaXNcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIHNsb3ROb2Rlcy5fcmVuZGVyZWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgbm9kZXMgPSBzbG90Tm9kZXMgfHwgZmFsbGJhY2s7XG5cdCAgfVxuXHRcblx0ICB2YXIgdGFyZ2V0ID0gcHJvcHMgJiYgcHJvcHMuc2xvdDtcblx0ICBpZiAodGFyZ2V0KSB7XG5cdCAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7IHNsb3Q6IHRhcmdldCB9LCBub2Rlcylcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5vZGVzXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIGZpbHRlcnNcblx0ICovXG5cdGZ1bmN0aW9uIHJlc29sdmVGaWx0ZXIgKGlkKSB7XG5cdCAgcmV0dXJuIHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGlkLCB0cnVlKSB8fCBpZGVudGl0eVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGlzS2V5Tm90TWF0Y2ggKGV4cGVjdCwgYWN0dWFsKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoZXhwZWN0KSkge1xuXHQgICAgcmV0dXJuIGV4cGVjdC5pbmRleE9mKGFjdHVhbCkgPT09IC0xXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBleHBlY3QgIT09IGFjdHVhbFxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciBjaGVja2luZyBrZXlDb2RlcyBmcm9tIGNvbmZpZy5cblx0ICogZXhwb3NlZCBhcyBWdWUucHJvdG90eXBlLl9rXG5cdCAqIHBhc3NpbmcgaW4gZXZlbnRLZXlOYW1lIGFzIGxhc3QgYXJndW1lbnQgc2VwYXJhdGVseSBmb3IgYmFja3dhcmRzIGNvbXBhdFxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tLZXlDb2RlcyAoXG5cdCAgZXZlbnRLZXlDb2RlLFxuXHQgIGtleSxcblx0ICBidWlsdEluS2V5Q29kZSxcblx0ICBldmVudEtleU5hbWUsXG5cdCAgYnVpbHRJbktleU5hbWVcblx0KSB7XG5cdCAgdmFyIG1hcHBlZEtleUNvZGUgPSBjb25maWcua2V5Q29kZXNba2V5XSB8fCBidWlsdEluS2V5Q29kZTtcblx0ICBpZiAoYnVpbHRJbktleU5hbWUgJiYgZXZlbnRLZXlOYW1lICYmICFjb25maWcua2V5Q29kZXNba2V5XSkge1xuXHQgICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2goYnVpbHRJbktleU5hbWUsIGV2ZW50S2V5TmFtZSlcblx0ICB9IGVsc2UgaWYgKG1hcHBlZEtleUNvZGUpIHtcblx0ICAgIHJldHVybiBpc0tleU5vdE1hdGNoKG1hcHBlZEtleUNvZGUsIGV2ZW50S2V5Q29kZSlcblx0ICB9IGVsc2UgaWYgKGV2ZW50S2V5TmFtZSkge1xuXHQgICAgcmV0dXJuIGh5cGhlbmF0ZShldmVudEtleU5hbWUpICE9PSBrZXlcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFJ1bnRpbWUgaGVscGVyIGZvciBtZXJnaW5nIHYtYmluZD1cIm9iamVjdFwiIGludG8gYSBWTm9kZSdzIGRhdGEuXG5cdCAqL1xuXHRmdW5jdGlvbiBiaW5kT2JqZWN0UHJvcHMgKFxuXHQgIGRhdGEsXG5cdCAgdGFnLFxuXHQgIHZhbHVlLFxuXHQgIGFzUHJvcCxcblx0ICBpc1N5bmNcblx0KSB7XG5cdCAgaWYgKHZhbHVlKSB7XG5cdCAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAgICd2LWJpbmQgd2l0aG91dCBhcmd1bWVudCBleHBlY3RzIGFuIE9iamVjdCBvciBBcnJheSB2YWx1ZScsXG5cdCAgICAgICAgdGhpc1xuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgICAgdmFsdWUgPSB0b09iamVjdCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGhhc2g7XG5cdCAgICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7XG5cdCAgICAgICAgaWYgKFxuXHQgICAgICAgICAga2V5ID09PSAnY2xhc3MnIHx8XG5cdCAgICAgICAgICBrZXkgPT09ICdzdHlsZScgfHxcblx0ICAgICAgICAgIGlzUmVzZXJ2ZWRBdHRyaWJ1dGUoa2V5KVxuXHQgICAgICAgICkge1xuXHQgICAgICAgICAgaGFzaCA9IGRhdGE7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZhciB0eXBlID0gZGF0YS5hdHRycyAmJiBkYXRhLmF0dHJzLnR5cGU7XG5cdCAgICAgICAgICBoYXNoID0gYXNQcm9wIHx8IGNvbmZpZy5tdXN0VXNlUHJvcCh0YWcsIHR5cGUsIGtleSlcblx0ICAgICAgICAgICAgPyBkYXRhLmRvbVByb3BzIHx8IChkYXRhLmRvbVByb3BzID0ge30pXG5cdCAgICAgICAgICAgIDogZGF0YS5hdHRycyB8fCAoZGF0YS5hdHRycyA9IHt9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCEoa2V5IGluIGhhc2gpKSB7XG5cdCAgICAgICAgICBoYXNoW2tleV0gPSB2YWx1ZVtrZXldO1xuXHRcblx0ICAgICAgICAgIGlmIChpc1N5bmMpIHtcblx0ICAgICAgICAgICAgdmFyIG9uID0gZGF0YS5vbiB8fCAoZGF0YS5vbiA9IHt9KTtcblx0ICAgICAgICAgICAgb25bKFwidXBkYXRlOlwiICsga2V5KV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgdmFsdWVba2V5XSA9ICRldmVudDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIGxvb3AoIGtleSApO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZGF0YVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIHN0YXRpYyB0cmVlcy5cblx0ICovXG5cdGZ1bmN0aW9uIHJlbmRlclN0YXRpYyAoXG5cdCAgaW5kZXgsXG5cdCAgaXNJbkZvclxuXHQpIHtcblx0ICB2YXIgY2FjaGVkID0gdGhpcy5fc3RhdGljVHJlZXMgfHwgKHRoaXMuX3N0YXRpY1RyZWVzID0gW10pO1xuXHQgIHZhciB0cmVlID0gY2FjaGVkW2luZGV4XTtcblx0ICAvLyBpZiBoYXMgYWxyZWFkeS1yZW5kZXJlZCBzdGF0aWMgdHJlZSBhbmQgbm90IGluc2lkZSB2LWZvcixcblx0ICAvLyB3ZSBjYW4gcmV1c2UgdGhlIHNhbWUgdHJlZS5cblx0ICBpZiAodHJlZSAmJiAhaXNJbkZvcikge1xuXHQgICAgcmV0dXJuIHRyZWVcblx0ICB9XG5cdCAgLy8gb3RoZXJ3aXNlLCByZW5kZXIgYSBmcmVzaCB0cmVlLlxuXHQgIHRyZWUgPSBjYWNoZWRbaW5kZXhdID0gdGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbaW5kZXhdLmNhbGwoXG5cdCAgICB0aGlzLl9yZW5kZXJQcm94eSxcblx0ICAgIG51bGwsXG5cdCAgICB0aGlzIC8vIGZvciByZW5kZXIgZm5zIGdlbmVyYXRlZCBmb3IgZnVuY3Rpb25hbCBjb21wb25lbnQgdGVtcGxhdGVzXG5cdCAgKTtcblx0ICBtYXJrU3RhdGljKHRyZWUsIChcIl9fc3RhdGljX19cIiArIGluZGV4KSwgZmFsc2UpO1xuXHQgIHJldHVybiB0cmVlXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSdW50aW1lIGhlbHBlciBmb3Igdi1vbmNlLlxuXHQgKiBFZmZlY3RpdmVseSBpdCBtZWFucyBtYXJraW5nIHRoZSBub2RlIGFzIHN0YXRpYyB3aXRoIGEgdW5pcXVlIGtleS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcmtPbmNlIChcblx0ICB0cmVlLFxuXHQgIGluZGV4LFxuXHQgIGtleVxuXHQpIHtcblx0ICBtYXJrU3RhdGljKHRyZWUsIChcIl9fb25jZV9fXCIgKyBpbmRleCArIChrZXkgPyAoXCJfXCIgKyBrZXkpIDogXCJcIikpLCB0cnVlKTtcblx0ICByZXR1cm4gdHJlZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXJrU3RhdGljIChcblx0ICB0cmVlLFxuXHQgIGtleSxcblx0ICBpc09uY2Vcblx0KSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodHJlZSkpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5sZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAodHJlZVtpXSAmJiB0eXBlb2YgdHJlZVtpXSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBtYXJrU3RhdGljTm9kZSh0cmVlW2ldLCAoa2V5ICsgXCJfXCIgKyBpKSwgaXNPbmNlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBtYXJrU3RhdGljTm9kZSh0cmVlLCBrZXksIGlzT25jZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXJrU3RhdGljTm9kZSAobm9kZSwga2V5LCBpc09uY2UpIHtcblx0ICBub2RlLmlzU3RhdGljID0gdHJ1ZTtcblx0ICBub2RlLmtleSA9IGtleTtcblx0ICBub2RlLmlzT25jZSA9IGlzT25jZTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBiaW5kT2JqZWN0TGlzdGVuZXJzIChkYXRhLCB2YWx1ZSkge1xuXHQgIGlmICh2YWx1ZSkge1xuXHQgICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAgICd2LW9uIHdpdGhvdXQgYXJndW1lbnQgZXhwZWN0cyBhbiBPYmplY3QgdmFsdWUnLFxuXHQgICAgICAgIHRoaXNcblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBvbiA9IGRhdGEub24gPSBkYXRhLm9uID8gZXh0ZW5kKHt9LCBkYXRhLm9uKSA6IHt9O1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcblx0ICAgICAgICB2YXIgZXhpc3RpbmcgPSBvbltrZXldO1xuXHQgICAgICAgIHZhciBvdXJzID0gdmFsdWVba2V5XTtcblx0ICAgICAgICBvbltrZXldID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIG91cnMpIDogb3Vycztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZGF0YVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGluc3RhbGxSZW5kZXJIZWxwZXJzICh0YXJnZXQpIHtcblx0ICB0YXJnZXQuX28gPSBtYXJrT25jZTtcblx0ICB0YXJnZXQuX24gPSB0b051bWJlcjtcblx0ICB0YXJnZXQuX3MgPSB0b1N0cmluZztcblx0ICB0YXJnZXQuX2wgPSByZW5kZXJMaXN0O1xuXHQgIHRhcmdldC5fdCA9IHJlbmRlclNsb3Q7XG5cdCAgdGFyZ2V0Ll9xID0gbG9vc2VFcXVhbDtcblx0ICB0YXJnZXQuX2kgPSBsb29zZUluZGV4T2Y7XG5cdCAgdGFyZ2V0Ll9tID0gcmVuZGVyU3RhdGljO1xuXHQgIHRhcmdldC5fZiA9IHJlc29sdmVGaWx0ZXI7XG5cdCAgdGFyZ2V0Ll9rID0gY2hlY2tLZXlDb2Rlcztcblx0ICB0YXJnZXQuX2IgPSBiaW5kT2JqZWN0UHJvcHM7XG5cdCAgdGFyZ2V0Ll92ID0gY3JlYXRlVGV4dFZOb2RlO1xuXHQgIHRhcmdldC5fZSA9IGNyZWF0ZUVtcHR5Vk5vZGU7XG5cdCAgdGFyZ2V0Ll91ID0gcmVzb2x2ZVNjb3BlZFNsb3RzO1xuXHQgIHRhcmdldC5fZyA9IGJpbmRPYmplY3RMaXN0ZW5lcnM7XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gRnVuY3Rpb25hbFJlbmRlckNvbnRleHQgKFxuXHQgIGRhdGEsXG5cdCAgcHJvcHMsXG5cdCAgY2hpbGRyZW4sXG5cdCAgcGFyZW50LFxuXHQgIEN0b3Jcblx0KSB7XG5cdCAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7XG5cdCAgdGhpcy5kYXRhID0gZGF0YTtcblx0ICB0aGlzLnByb3BzID0gcHJvcHM7XG5cdCAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuXHQgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHQgIHRoaXMubGlzdGVuZXJzID0gZGF0YS5vbiB8fCBlbXB0eU9iamVjdDtcblx0ICB0aGlzLmluamVjdGlvbnMgPSByZXNvbHZlSW5qZWN0KG9wdGlvbnMuaW5qZWN0LCBwYXJlbnQpO1xuXHQgIHRoaXMuc2xvdHMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlU2xvdHMoY2hpbGRyZW4sIHBhcmVudCk7IH07XG5cdFxuXHQgIC8vIGVuc3VyZSB0aGUgY3JlYXRlRWxlbWVudCBmdW5jdGlvbiBpbiBmdW5jdGlvbmFsIGNvbXBvbmVudHNcblx0ICAvLyBnZXRzIGEgdW5pcXVlIGNvbnRleHQgLSB0aGlzIGlzIG5lY2Vzc2FyeSBmb3IgY29ycmVjdCBuYW1lZCBzbG90IGNoZWNrXG5cdCAgdmFyIGNvbnRleHRWbSA9IE9iamVjdC5jcmVhdGUocGFyZW50KTtcblx0ICB2YXIgaXNDb21waWxlZCA9IGlzVHJ1ZShvcHRpb25zLl9jb21waWxlZCk7XG5cdCAgdmFyIG5lZWROb3JtYWxpemF0aW9uID0gIWlzQ29tcGlsZWQ7XG5cdFxuXHQgIC8vIHN1cHBvcnQgZm9yIGNvbXBpbGVkIGZ1bmN0aW9uYWwgdGVtcGxhdGVcblx0ICBpZiAoaXNDb21waWxlZCkge1xuXHQgICAgLy8gZXhwb3NpbmcgJG9wdGlvbnMgZm9yIHJlbmRlclN0YXRpYygpXG5cdCAgICB0aGlzLiRvcHRpb25zID0gb3B0aW9ucztcblx0ICAgIC8vIHByZS1yZXNvbHZlIHNsb3RzIGZvciByZW5kZXJTbG90KClcblx0ICAgIHRoaXMuJHNsb3RzID0gdGhpcy5zbG90cygpO1xuXHQgICAgdGhpcy4kc2NvcGVkU2xvdHMgPSBkYXRhLnNjb3BlZFNsb3RzIHx8IGVtcHR5T2JqZWN0O1xuXHQgIH1cblx0XG5cdCAgaWYgKG9wdGlvbnMuX3Njb3BlSWQpIHtcblx0ICAgIHRoaXMuX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xuXHQgICAgICB2YXIgdm5vZGUgPSBjcmVhdGVFbGVtZW50KGNvbnRleHRWbSwgYSwgYiwgYywgZCwgbmVlZE5vcm1hbGl6YXRpb24pO1xuXHQgICAgICBpZiAodm5vZGUgJiYgIUFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG5cdCAgICAgICAgdm5vZGUuZm5TY29wZUlkID0gb3B0aW9ucy5fc2NvcGVJZDtcblx0ICAgICAgICB2bm9kZS5mbkNvbnRleHQgPSBwYXJlbnQ7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZub2RlXG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLl9jID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7IH07XG5cdCAgfVxuXHR9XG5cdFxuXHRpbnN0YWxsUmVuZGVySGVscGVycyhGdW5jdGlvbmFsUmVuZGVyQ29udGV4dC5wcm90b3R5cGUpO1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlRnVuY3Rpb25hbENvbXBvbmVudCAoXG5cdCAgQ3Rvcixcblx0ICBwcm9wc0RhdGEsXG5cdCAgZGF0YSxcblx0ICBjb250ZXh0Vm0sXG5cdCAgY2hpbGRyZW5cblx0KSB7XG5cdCAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7XG5cdCAgdmFyIHByb3BzID0ge307XG5cdCAgdmFyIHByb3BPcHRpb25zID0gb3B0aW9ucy5wcm9wcztcblx0ICBpZiAoaXNEZWYocHJvcE9wdGlvbnMpKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHtcblx0ICAgICAgcHJvcHNba2V5XSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BPcHRpb25zLCBwcm9wc0RhdGEgfHwgZW1wdHlPYmplY3QpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAoaXNEZWYoZGF0YS5hdHRycykpIHsgbWVyZ2VQcm9wcyhwcm9wcywgZGF0YS5hdHRycyk7IH1cblx0ICAgIGlmIChpc0RlZihkYXRhLnByb3BzKSkgeyBtZXJnZVByb3BzKHByb3BzLCBkYXRhLnByb3BzKTsgfVxuXHQgIH1cblx0XG5cdCAgdmFyIHJlbmRlckNvbnRleHQgPSBuZXcgRnVuY3Rpb25hbFJlbmRlckNvbnRleHQoXG5cdCAgICBkYXRhLFxuXHQgICAgcHJvcHMsXG5cdCAgICBjaGlsZHJlbixcblx0ICAgIGNvbnRleHRWbSxcblx0ICAgIEN0b3Jcblx0ICApO1xuXHRcblx0ICB2YXIgdm5vZGUgPSBvcHRpb25zLnJlbmRlci5jYWxsKG51bGwsIHJlbmRlckNvbnRleHQuX2MsIHJlbmRlckNvbnRleHQpO1xuXHRcblx0ICBpZiAodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkge1xuXHQgICAgc2V0RnVuY3Rpb25hbENvbnRleHRGb3JWTm9kZSh2bm9kZSwgZGF0YSwgY29udGV4dFZtLCBvcHRpb25zKTtcblx0ICAgIHJldHVybiB2bm9kZVxuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2bm9kZSkpIHtcblx0ICAgIHZhciB2bm9kZXMgPSBub3JtYWxpemVDaGlsZHJlbih2bm9kZSkgfHwgW107XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZub2Rlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBzZXRGdW5jdGlvbmFsQ29udGV4dEZvclZOb2RlKHZub2Rlc1tpXSwgZGF0YSwgY29udGV4dFZtLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2bm9kZXNcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldEZ1bmN0aW9uYWxDb250ZXh0Rm9yVk5vZGUgKHZub2RlLCBkYXRhLCB2bSwgb3B0aW9ucykge1xuXHQgIHZub2RlLmZuQ29udGV4dCA9IHZtO1xuXHQgIHZub2RlLmZuT3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgaWYgKGRhdGEuc2xvdCkge1xuXHQgICAgKHZub2RlLmRhdGEgfHwgKHZub2RlLmRhdGEgPSB7fSkpLnNsb3QgPSBkYXRhLnNsb3Q7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtZXJnZVByb3BzICh0bywgZnJvbSkge1xuXHQgIGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdCAgICB0b1tjYW1lbGl6ZShrZXkpXSA9IGZyb21ba2V5XTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0XG5cdFxuXHRcblx0Ly8gUmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBob29rIHRvIHdlZXggbmF0aXZlIHJlbmRlciBlbmdpbmUuXG5cdC8vIFRoZSBob29rIHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IG5hdGl2ZSwgbm90IGphdmFzY3JpcHQuXG5cdFxuXHRcblx0Ly8gVXBkYXRlcyB0aGUgc3RhdGUgb2YgdGhlIGNvbXBvbmVudCB0byB3ZWV4IG5hdGl2ZSByZW5kZXIgZW5naW5lLlxuXHRcblx0LyogICovXG5cdFxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vSGFua3MxMDEwMC93ZWV4LW5hdGl2ZS1kaXJlY3RpdmUvdHJlZS9tYXN0ZXIvY29tcG9uZW50XG5cdFxuXHQvLyBsaXN0ZW5pbmcgb24gbmF0aXZlIGNhbGxiYWNrXG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gaG9va3MgdG8gYmUgaW52b2tlZCBvbiBjb21wb25lbnQgVk5vZGVzIGR1cmluZyBwYXRjaFxuXHR2YXIgY29tcG9uZW50Vk5vZGVIb29rcyA9IHtcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0IChcblx0ICAgIHZub2RlLFxuXHQgICAgaHlkcmF0aW5nLFxuXHQgICAgcGFyZW50RWxtLFxuXHQgICAgcmVmRWxtXG5cdCAgKSB7XG5cdCAgICBpZiAoXG5cdCAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmXG5cdCAgICAgICF2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQgJiZcblx0ICAgICAgdm5vZGUuZGF0YS5rZWVwQWxpdmVcblx0ICAgICkge1xuXHQgICAgICAvLyBrZXB0LWFsaXZlIGNvbXBvbmVudHMsIHRyZWF0IGFzIGEgcGF0Y2hcblx0ICAgICAgdmFyIG1vdW50ZWROb2RlID0gdm5vZGU7IC8vIHdvcmsgYXJvdW5kIGZsb3dcblx0ICAgICAgY29tcG9uZW50Vk5vZGVIb29rcy5wcmVwYXRjaChtb3VudGVkTm9kZSwgbW91bnRlZE5vZGUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlKFxuXHQgICAgICAgIHZub2RlLFxuXHQgICAgICAgIGFjdGl2ZUluc3RhbmNlLFxuXHQgICAgICAgIHBhcmVudEVsbSxcblx0ICAgICAgICByZWZFbG1cblx0ICAgICAgKTtcblx0ICAgICAgY2hpbGQuJG1vdW50KGh5ZHJhdGluZyA/IHZub2RlLmVsbSA6IHVuZGVmaW5lZCwgaHlkcmF0aW5nKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBwcmVwYXRjaDogZnVuY3Rpb24gcHJlcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuXHQgICAgdmFyIGNoaWxkID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBvbGRWbm9kZS5jb21wb25lbnRJbnN0YW5jZTtcblx0ICAgIHVwZGF0ZUNoaWxkQ29tcG9uZW50KFxuXHQgICAgICBjaGlsZCxcblx0ICAgICAgb3B0aW9ucy5wcm9wc0RhdGEsIC8vIHVwZGF0ZWQgcHJvcHNcblx0ICAgICAgb3B0aW9ucy5saXN0ZW5lcnMsIC8vIHVwZGF0ZWQgbGlzdGVuZXJzXG5cdCAgICAgIHZub2RlLCAvLyBuZXcgcGFyZW50IHZub2RlXG5cdCAgICAgIG9wdGlvbnMuY2hpbGRyZW4gLy8gbmV3IGNoaWxkcmVuXG5cdCAgICApO1xuXHQgIH0sXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0ICh2bm9kZSkge1xuXHQgICAgdmFyIGNvbnRleHQgPSB2bm9kZS5jb250ZXh0O1xuXHQgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7XG5cdCAgICBpZiAoIWNvbXBvbmVudEluc3RhbmNlLl9pc01vdW50ZWQpIHtcblx0ICAgICAgY29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZCA9IHRydWU7XG5cdCAgICAgIGNhbGxIb29rKGNvbXBvbmVudEluc3RhbmNlLCAnbW91bnRlZCcpO1xuXHQgICAgfVxuXHQgICAgaWYgKHZub2RlLmRhdGEua2VlcEFsaXZlKSB7XG5cdCAgICAgIGlmIChjb250ZXh0Ll9pc01vdW50ZWQpIHtcblx0ICAgICAgICAvLyB2dWUtcm91dGVyIzEyMTJcblx0ICAgICAgICAvLyBEdXJpbmcgdXBkYXRlcywgYSBrZXB0LWFsaXZlIGNvbXBvbmVudCdzIGNoaWxkIGNvbXBvbmVudHMgbWF5XG5cdCAgICAgICAgLy8gY2hhbmdlLCBzbyBkaXJlY3RseSB3YWxraW5nIHRoZSB0cmVlIGhlcmUgbWF5IGNhbGwgYWN0aXZhdGVkIGhvb2tzXG5cdCAgICAgICAgLy8gb24gaW5jb3JyZWN0IGNoaWxkcmVuLiBJbnN0ZWFkIHdlIHB1c2ggdGhlbSBpbnRvIGEgcXVldWUgd2hpY2ggd2lsbFxuXHQgICAgICAgIC8vIGJlIHByb2Nlc3NlZCBhZnRlciB0aGUgd2hvbGUgcGF0Y2ggcHJvY2VzcyBlbmRlZC5cblx0ICAgICAgICBxdWV1ZUFjdGl2YXRlZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgdHJ1ZSAvKiBkaXJlY3QgKi8pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSAodm5vZGUpIHtcblx0ICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuXHQgICAgaWYgKCFjb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQpIHtcblx0ICAgICAgaWYgKCF2bm9kZS5kYXRhLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIGNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCB0cnVlIC8qIGRpcmVjdCAqLyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaG9va3NUb01lcmdlID0gT2JqZWN0LmtleXMoY29tcG9uZW50Vk5vZGVIb29rcyk7XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKFxuXHQgIEN0b3IsXG5cdCAgZGF0YSxcblx0ICBjb250ZXh0LFxuXHQgIGNoaWxkcmVuLFxuXHQgIHRhZ1xuXHQpIHtcblx0ICBpZiAoaXNVbmRlZihDdG9yKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgYmFzZUN0b3IgPSBjb250ZXh0LiRvcHRpb25zLl9iYXNlO1xuXHRcblx0ICAvLyBwbGFpbiBvcHRpb25zIG9iamVjdDogdHVybiBpdCBpbnRvIGEgY29uc3RydWN0b3Jcblx0ICBpZiAoaXNPYmplY3QoQ3RvcikpIHtcblx0ICAgIEN0b3IgPSBiYXNlQ3Rvci5leHRlbmQoQ3Rvcik7XG5cdCAgfVxuXHRcblx0ICAvLyBpZiBhdCB0aGlzIHN0YWdlIGl0J3Mgbm90IGEgY29uc3RydWN0b3Igb3IgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnksXG5cdCAgLy8gcmVqZWN0LlxuXHQgIGlmICh0eXBlb2YgQ3RvciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAge1xuXHQgICAgICB3YXJuKChcIkludmFsaWQgQ29tcG9uZW50IGRlZmluaXRpb246IFwiICsgKFN0cmluZyhDdG9yKSkpLCBjb250ZXh0KTtcblx0ICAgIH1cblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgLy8gYXN5bmMgY29tcG9uZW50XG5cdCAgdmFyIGFzeW5jRmFjdG9yeTtcblx0ICBpZiAoaXNVbmRlZihDdG9yLmNpZCkpIHtcblx0ICAgIGFzeW5jRmFjdG9yeSA9IEN0b3I7XG5cdCAgICBDdG9yID0gcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGFzeW5jRmFjdG9yeSwgYmFzZUN0b3IsIGNvbnRleHQpO1xuXHQgICAgaWYgKEN0b3IgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAvLyByZXR1cm4gYSBwbGFjZWhvbGRlciBub2RlIGZvciBhc3luYyBjb21wb25lbnQsIHdoaWNoIGlzIHJlbmRlcmVkXG5cdCAgICAgIC8vIGFzIGEgY29tbWVudCBub2RlIGJ1dCBwcmVzZXJ2ZXMgYWxsIHRoZSByYXcgaW5mb3JtYXRpb24gZm9yIHRoZSBub2RlLlxuXHQgICAgICAvLyB0aGUgaW5mb3JtYXRpb24gd2lsbCBiZSB1c2VkIGZvciBhc3luYyBzZXJ2ZXItcmVuZGVyaW5nIGFuZCBoeWRyYXRpb24uXG5cdCAgICAgIHJldHVybiBjcmVhdGVBc3luY1BsYWNlaG9sZGVyKFxuXHQgICAgICAgIGFzeW5jRmFjdG9yeSxcblx0ICAgICAgICBkYXRhLFxuXHQgICAgICAgIGNvbnRleHQsXG5cdCAgICAgICAgY2hpbGRyZW4sXG5cdCAgICAgICAgdGFnXG5cdCAgICAgIClcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGRhdGEgPSBkYXRhIHx8IHt9O1xuXHRcblx0ICAvLyByZXNvbHZlIGNvbnN0cnVjdG9yIG9wdGlvbnMgaW4gY2FzZSBnbG9iYWwgbWl4aW5zIGFyZSBhcHBsaWVkIGFmdGVyXG5cdCAgLy8gY29tcG9uZW50IGNvbnN0cnVjdG9yIGNyZWF0aW9uXG5cdCAgcmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyhDdG9yKTtcblx0XG5cdCAgLy8gdHJhbnNmb3JtIGNvbXBvbmVudCB2LW1vZGVsIGRhdGEgaW50byBwcm9wcyAmIGV2ZW50c1xuXHQgIGlmIChpc0RlZihkYXRhLm1vZGVsKSkge1xuXHQgICAgdHJhbnNmb3JtTW9kZWwoQ3Rvci5vcHRpb25zLCBkYXRhKTtcblx0ICB9XG5cdFxuXHQgIC8vIGV4dHJhY3QgcHJvcHNcblx0ICB2YXIgcHJvcHNEYXRhID0gZXh0cmFjdFByb3BzRnJvbVZOb2RlRGF0YShkYXRhLCBDdG9yLCB0YWcpO1xuXHRcblx0ICAvLyBmdW5jdGlvbmFsIGNvbXBvbmVudFxuXHQgIGlmIChpc1RydWUoQ3Rvci5vcHRpb25zLmZ1bmN0aW9uYWwpKSB7XG5cdCAgICByZXR1cm4gY3JlYXRlRnVuY3Rpb25hbENvbXBvbmVudChDdG9yLCBwcm9wc0RhdGEsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuKVxuXHQgIH1cblx0XG5cdCAgLy8gZXh0cmFjdCBsaXN0ZW5lcnMsIHNpbmNlIHRoZXNlIG5lZWRzIHRvIGJlIHRyZWF0ZWQgYXNcblx0ICAvLyBjaGlsZCBjb21wb25lbnQgbGlzdGVuZXJzIGluc3RlYWQgb2YgRE9NIGxpc3RlbmVyc1xuXHQgIHZhciBsaXN0ZW5lcnMgPSBkYXRhLm9uO1xuXHQgIC8vIHJlcGxhY2Ugd2l0aCBsaXN0ZW5lcnMgd2l0aCAubmF0aXZlIG1vZGlmaWVyXG5cdCAgLy8gc28gaXQgZ2V0cyBwcm9jZXNzZWQgZHVyaW5nIHBhcmVudCBjb21wb25lbnQgcGF0Y2guXG5cdCAgZGF0YS5vbiA9IGRhdGEubmF0aXZlT247XG5cdFxuXHQgIGlmIChpc1RydWUoQ3Rvci5vcHRpb25zLmFic3RyYWN0KSkge1xuXHQgICAgLy8gYWJzdHJhY3QgY29tcG9uZW50cyBkbyBub3Qga2VlcCBhbnl0aGluZ1xuXHQgICAgLy8gb3RoZXIgdGhhbiBwcm9wcyAmIGxpc3RlbmVycyAmIHNsb3Rcblx0XG5cdCAgICAvLyB3b3JrIGFyb3VuZCBmbG93XG5cdCAgICB2YXIgc2xvdCA9IGRhdGEuc2xvdDtcblx0ICAgIGRhdGEgPSB7fTtcblx0ICAgIGlmIChzbG90KSB7XG5cdCAgICAgIGRhdGEuc2xvdCA9IHNsb3Q7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBtZXJnZSBjb21wb25lbnQgbWFuYWdlbWVudCBob29rcyBvbnRvIHRoZSBwbGFjZWhvbGRlciBub2RlXG5cdCAgbWVyZ2VIb29rcyhkYXRhKTtcblx0XG5cdCAgLy8gcmV0dXJuIGEgcGxhY2Vob2xkZXIgdm5vZGVcblx0ICB2YXIgbmFtZSA9IEN0b3Iub3B0aW9ucy5uYW1lIHx8IHRhZztcblx0ICB2YXIgdm5vZGUgPSBuZXcgVk5vZGUoXG5cdCAgICAoXCJ2dWUtY29tcG9uZW50LVwiICsgKEN0b3IuY2lkKSArIChuYW1lID8gKFwiLVwiICsgbmFtZSkgOiAnJykpLFxuXHQgICAgZGF0YSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29udGV4dCxcblx0ICAgIHsgQ3RvcjogQ3RvciwgcHJvcHNEYXRhOiBwcm9wc0RhdGEsIGxpc3RlbmVyczogbGlzdGVuZXJzLCB0YWc6IHRhZywgY2hpbGRyZW46IGNoaWxkcmVuIH0sXG5cdCAgICBhc3luY0ZhY3Rvcnlcblx0ICApO1xuXHRcblx0ICAvLyBXZWV4IHNwZWNpZmljOiBpbnZva2UgcmVjeWNsZS1saXN0IG9wdGltaXplZCBAcmVuZGVyIGZ1bmN0aW9uIGZvclxuXHQgIC8vIGV4dHJhY3RpbmcgY2VsbC1zbG90IHRlbXBsYXRlLlxuXHQgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5rczEwMTAwL3dlZXgtbmF0aXZlLWRpcmVjdGl2ZS90cmVlL21hc3Rlci9jb21wb25lbnRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICByZXR1cm4gdm5vZGVcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2VGb3JWbm9kZSAoXG5cdCAgdm5vZGUsIC8vIHdlIGtub3cgaXQncyBNb3VudGVkQ29tcG9uZW50Vk5vZGUgYnV0IGZsb3cgZG9lc24ndFxuXHQgIHBhcmVudCwgLy8gYWN0aXZlSW5zdGFuY2UgaW4gbGlmZWN5Y2xlIHN0YXRlXG5cdCAgcGFyZW50RWxtLFxuXHQgIHJlZkVsbVxuXHQpIHtcblx0ICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgIF9pc0NvbXBvbmVudDogdHJ1ZSxcblx0ICAgIHBhcmVudDogcGFyZW50LFxuXHQgICAgX3BhcmVudFZub2RlOiB2bm9kZSxcblx0ICAgIF9wYXJlbnRFbG06IHBhcmVudEVsbSB8fCBudWxsLFxuXHQgICAgX3JlZkVsbTogcmVmRWxtIHx8IG51bGxcblx0ICB9O1xuXHQgIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZSByZW5kZXIgZnVuY3Rpb25zXG5cdCAgdmFyIGlubGluZVRlbXBsYXRlID0gdm5vZGUuZGF0YS5pbmxpbmVUZW1wbGF0ZTtcblx0ICBpZiAoaXNEZWYoaW5saW5lVGVtcGxhdGUpKSB7XG5cdCAgICBvcHRpb25zLnJlbmRlciA9IGlubGluZVRlbXBsYXRlLnJlbmRlcjtcblx0ICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gaW5saW5lVGVtcGxhdGUuc3RhdGljUmVuZGVyRm5zO1xuXHQgIH1cblx0ICByZXR1cm4gbmV3IHZub2RlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihvcHRpb25zKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtZXJnZUhvb2tzIChkYXRhKSB7XG5cdCAgaWYgKCFkYXRhLmhvb2spIHtcblx0ICAgIGRhdGEuaG9vayA9IHt9O1xuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzVG9NZXJnZS5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIGtleSA9IGhvb2tzVG9NZXJnZVtpXTtcblx0ICAgIHZhciBmcm9tUGFyZW50ID0gZGF0YS5ob29rW2tleV07XG5cdCAgICB2YXIgb3VycyA9IGNvbXBvbmVudFZOb2RlSG9va3Nba2V5XTtcblx0ICAgIGRhdGEuaG9va1trZXldID0gZnJvbVBhcmVudCA/IG1lcmdlSG9vayQxKG91cnMsIGZyb21QYXJlbnQpIDogb3Vycztcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lcmdlSG9vayQxIChvbmUsIHR3bykge1xuXHQgIHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xuXHQgICAgb25lKGEsIGIsIGMsIGQpO1xuXHQgICAgdHdvKGEsIGIsIGMsIGQpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gdHJhbnNmb3JtIGNvbXBvbmVudCB2LW1vZGVsIGluZm8gKHZhbHVlIGFuZCBjYWxsYmFjaykgaW50b1xuXHQvLyBwcm9wIGFuZCBldmVudCBoYW5kbGVyIHJlc3BlY3RpdmVseS5cblx0ZnVuY3Rpb24gdHJhbnNmb3JtTW9kZWwgKG9wdGlvbnMsIGRhdGEpIHtcblx0ICB2YXIgcHJvcCA9IChvcHRpb25zLm1vZGVsICYmIG9wdGlvbnMubW9kZWwucHJvcCkgfHwgJ3ZhbHVlJztcblx0ICB2YXIgZXZlbnQgPSAob3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLmV2ZW50KSB8fCAnaW5wdXQnOyhkYXRhLnByb3BzIHx8IChkYXRhLnByb3BzID0ge30pKVtwcm9wXSA9IGRhdGEubW9kZWwudmFsdWU7XG5cdCAgdmFyIG9uID0gZGF0YS5vbiB8fCAoZGF0YS5vbiA9IHt9KTtcblx0ICBpZiAoaXNEZWYob25bZXZlbnRdKSkge1xuXHQgICAgb25bZXZlbnRdID0gW2RhdGEubW9kZWwuY2FsbGJhY2tdLmNvbmNhdChvbltldmVudF0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvbltldmVudF0gPSBkYXRhLm1vZGVsLmNhbGxiYWNrO1xuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgU0lNUExFX05PUk1BTElaRSA9IDE7XG5cdHZhciBBTFdBWVNfTk9STUFMSVpFID0gMjtcblx0XG5cdC8vIHdyYXBwZXIgZnVuY3Rpb24gZm9yIHByb3ZpZGluZyBhIG1vcmUgZmxleGlibGUgaW50ZXJmYWNlXG5cdC8vIHdpdGhvdXQgZ2V0dGluZyB5ZWxsZWQgYXQgYnkgZmxvd1xuXHRmdW5jdGlvbiBjcmVhdGVFbGVtZW50IChcblx0ICBjb250ZXh0LFxuXHQgIHRhZyxcblx0ICBkYXRhLFxuXHQgIGNoaWxkcmVuLFxuXHQgIG5vcm1hbGl6YXRpb25UeXBlLFxuXHQgIGFsd2F5c05vcm1hbGl6ZVxuXHQpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSB8fCBpc1ByaW1pdGl2ZShkYXRhKSkge1xuXHQgICAgbm9ybWFsaXphdGlvblR5cGUgPSBjaGlsZHJlbjtcblx0ICAgIGNoaWxkcmVuID0gZGF0YTtcblx0ICAgIGRhdGEgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIGlmIChpc1RydWUoYWx3YXlzTm9ybWFsaXplKSkge1xuXHQgICAgbm9ybWFsaXphdGlvblR5cGUgPSBBTFdBWVNfTk9STUFMSVpFO1xuXHQgIH1cblx0ICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQoY29udGV4dCwgdGFnLCBkYXRhLCBjaGlsZHJlbiwgbm9ybWFsaXphdGlvblR5cGUpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jcmVhdGVFbGVtZW50IChcblx0ICBjb250ZXh0LFxuXHQgIHRhZyxcblx0ICBkYXRhLFxuXHQgIGNoaWxkcmVuLFxuXHQgIG5vcm1hbGl6YXRpb25UeXBlXG5cdCkge1xuXHQgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZigoZGF0YSkuX19vYl9fKSkge1xuXHQgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybihcblx0ICAgICAgXCJBdm9pZCB1c2luZyBvYnNlcnZlZCBkYXRhIG9iamVjdCBhcyB2bm9kZSBkYXRhOiBcIiArIChKU09OLnN0cmluZ2lmeShkYXRhKSkgKyBcIlxcblwiICtcblx0ICAgICAgJ0Fsd2F5cyBjcmVhdGUgZnJlc2ggdm5vZGUgZGF0YSBvYmplY3RzIGluIGVhY2ggcmVuZGVyIScsXG5cdCAgICAgIGNvbnRleHRcblx0ICAgICk7XG5cdCAgICByZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpXG5cdCAgfVxuXHQgIC8vIG9iamVjdCBzeW50YXggaW4gdi1iaW5kXG5cdCAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKGRhdGEuaXMpKSB7XG5cdCAgICB0YWcgPSBkYXRhLmlzO1xuXHQgIH1cblx0ICBpZiAoIXRhZykge1xuXHQgICAgLy8gaW4gY2FzZSBvZiBjb21wb25lbnQgOmlzIHNldCB0byBmYWxzeSB2YWx1ZVxuXHQgICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKVxuXHQgIH1cblx0ICAvLyB3YXJuIGFnYWluc3Qgbm9uLXByaW1pdGl2ZSBrZXlcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgIGlzRGVmKGRhdGEpICYmIGlzRGVmKGRhdGEua2V5KSAmJiAhaXNQcmltaXRpdmUoZGF0YS5rZXkpXG5cdCAgKSB7XG5cdCAgICB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgJ0F2b2lkIHVzaW5nIG5vbi1wcmltaXRpdmUgdmFsdWUgYXMga2V5LCAnICtcblx0ICAgICAgICAndXNlIHN0cmluZy9udW1iZXIgdmFsdWUgaW5zdGVhZC4nLFxuXHQgICAgICAgIGNvbnRleHRcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gc3VwcG9ydCBzaW5nbGUgZnVuY3Rpb24gY2hpbGRyZW4gYXMgZGVmYXVsdCBzY29wZWQgc2xvdFxuXHQgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSAmJlxuXHQgICAgdHlwZW9mIGNoaWxkcmVuWzBdID09PSAnZnVuY3Rpb24nXG5cdCAgKSB7XG5cdCAgICBkYXRhID0gZGF0YSB8fCB7fTtcblx0ICAgIGRhdGEuc2NvcGVkU2xvdHMgPSB7IGRlZmF1bHQ6IGNoaWxkcmVuWzBdIH07XG5cdCAgICBjaGlsZHJlbi5sZW5ndGggPSAwO1xuXHQgIH1cblx0ICBpZiAobm9ybWFsaXphdGlvblR5cGUgPT09IEFMV0FZU19OT1JNQUxJWkUpIHtcblx0ICAgIGNoaWxkcmVuID0gbm9ybWFsaXplQ2hpbGRyZW4oY2hpbGRyZW4pO1xuXHQgIH0gZWxzZSBpZiAobm9ybWFsaXphdGlvblR5cGUgPT09IFNJTVBMRV9OT1JNQUxJWkUpIHtcblx0ICAgIGNoaWxkcmVuID0gc2ltcGxlTm9ybWFsaXplQ2hpbGRyZW4oY2hpbGRyZW4pO1xuXHQgIH1cblx0ICB2YXIgdm5vZGUsIG5zO1xuXHQgIGlmICh0eXBlb2YgdGFnID09PSAnc3RyaW5nJykge1xuXHQgICAgdmFyIEN0b3I7XG5cdCAgICBucyA9IChjb250ZXh0LiR2bm9kZSAmJiBjb250ZXh0LiR2bm9kZS5ucykgfHwgY29uZmlnLmdldFRhZ05hbWVzcGFjZSh0YWcpO1xuXHQgICAgaWYgKGNvbmZpZy5pc1Jlc2VydmVkVGFnKHRhZykpIHtcblx0ICAgICAgLy8gcGxhdGZvcm0gYnVpbHQtaW4gZWxlbWVudHNcblx0ICAgICAgdm5vZGUgPSBuZXcgVk5vZGUoXG5cdCAgICAgICAgY29uZmlnLnBhcnNlUGxhdGZvcm1UYWdOYW1lKHRhZyksIGRhdGEsIGNoaWxkcmVuLFxuXHQgICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0XG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2UgaWYgKGlzRGVmKEN0b3IgPSByZXNvbHZlQXNzZXQoY29udGV4dC4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSkge1xuXHQgICAgICAvLyBjb21wb25lbnRcblx0ICAgICAgdm5vZGUgPSBjcmVhdGVDb21wb25lbnQoQ3RvciwgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4sIHRhZyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyB1bmtub3duIG9yIHVubGlzdGVkIG5hbWVzcGFjZWQgZWxlbWVudHNcblx0ICAgICAgLy8gY2hlY2sgYXQgcnVudGltZSBiZWNhdXNlIGl0IG1heSBnZXQgYXNzaWduZWQgYSBuYW1lc3BhY2Ugd2hlbiBpdHNcblx0ICAgICAgLy8gcGFyZW50IG5vcm1hbGl6ZXMgY2hpbGRyZW5cblx0ICAgICAgdm5vZGUgPSBuZXcgVk5vZGUoXG5cdCAgICAgICAgdGFnLCBkYXRhLCBjaGlsZHJlbixcblx0ICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29udGV4dFxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBkaXJlY3QgY29tcG9uZW50IG9wdGlvbnMgLyBjb25zdHJ1Y3RvclxuXHQgICAgdm5vZGUgPSBjcmVhdGVDb21wb25lbnQodGFnLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbik7XG5cdCAgfVxuXHQgIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkge1xuXHQgICAgcmV0dXJuIHZub2RlXG5cdCAgfSBlbHNlIGlmIChpc0RlZih2bm9kZSkpIHtcblx0ICAgIGlmIChpc0RlZihucykpIHsgYXBwbHlOUyh2bm9kZSwgbnMpOyB9XG5cdCAgICBpZiAoaXNEZWYoZGF0YSkpIHsgcmVnaXN0ZXJEZWVwQmluZGluZ3MoZGF0YSk7IH1cblx0ICAgIHJldHVybiB2bm9kZVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcHBseU5TICh2bm9kZSwgbnMsIGZvcmNlKSB7XG5cdCAgdm5vZGUubnMgPSBucztcblx0ICBpZiAodm5vZGUudGFnID09PSAnZm9yZWlnbk9iamVjdCcpIHtcblx0ICAgIC8vIHVzZSBkZWZhdWx0IG5hbWVzcGFjZSBpbnNpZGUgZm9yZWlnbk9iamVjdFxuXHQgICAgbnMgPSB1bmRlZmluZWQ7XG5cdCAgICBmb3JjZSA9IHRydWU7XG5cdCAgfVxuXHQgIGlmIChpc0RlZih2bm9kZS5jaGlsZHJlbikpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdm5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBjaGlsZCA9IHZub2RlLmNoaWxkcmVuW2ldO1xuXHQgICAgICBpZiAoaXNEZWYoY2hpbGQudGFnKSAmJiAoXG5cdCAgICAgICAgaXNVbmRlZihjaGlsZC5ucykgfHwgKGlzVHJ1ZShmb3JjZSkgJiYgY2hpbGQudGFnICE9PSAnc3ZnJykpKSB7XG5cdCAgICAgICAgYXBwbHlOUyhjaGlsZCwgbnMsIGZvcmNlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0Ly8gcmVmICM1MzE4XG5cdC8vIG5lY2Vzc2FyeSB0byBlbnN1cmUgcGFyZW50IHJlLXJlbmRlciB3aGVuIGRlZXAgYmluZGluZ3MgbGlrZSA6c3R5bGUgYW5kXG5cdC8vIDpjbGFzcyBhcmUgdXNlZCBvbiBzbG90IG5vZGVzXG5cdGZ1bmN0aW9uIHJlZ2lzdGVyRGVlcEJpbmRpbmdzIChkYXRhKSB7XG5cdCAgaWYgKGlzT2JqZWN0KGRhdGEuc3R5bGUpKSB7XG5cdCAgICB0cmF2ZXJzZShkYXRhLnN0eWxlKTtcblx0ICB9XG5cdCAgaWYgKGlzT2JqZWN0KGRhdGEuY2xhc3MpKSB7XG5cdCAgICB0cmF2ZXJzZShkYXRhLmNsYXNzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdFJlbmRlciAodm0pIHtcblx0ICB2bS5fdm5vZGUgPSBudWxsOyAvLyB0aGUgcm9vdCBvZiB0aGUgY2hpbGQgdHJlZVxuXHQgIHZtLl9zdGF0aWNUcmVlcyA9IG51bGw7IC8vIHYtb25jZSBjYWNoZWQgdHJlZXNcblx0ICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zO1xuXHQgIHZhciBwYXJlbnRWbm9kZSA9IHZtLiR2bm9kZSA9IG9wdGlvbnMuX3BhcmVudFZub2RlOyAvLyB0aGUgcGxhY2Vob2xkZXIgbm9kZSBpbiBwYXJlbnQgdHJlZVxuXHQgIHZhciByZW5kZXJDb250ZXh0ID0gcGFyZW50Vm5vZGUgJiYgcGFyZW50Vm5vZGUuY29udGV4dDtcblx0ICB2bS4kc2xvdHMgPSByZXNvbHZlU2xvdHMob3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW4sIHJlbmRlckNvbnRleHQpO1xuXHQgIHZtLiRzY29wZWRTbG90cyA9IGVtcHR5T2JqZWN0O1xuXHQgIC8vIGJpbmQgdGhlIGNyZWF0ZUVsZW1lbnQgZm4gdG8gdGhpcyBpbnN0YW5jZVxuXHQgIC8vIHNvIHRoYXQgd2UgZ2V0IHByb3BlciByZW5kZXIgY29udGV4dCBpbnNpZGUgaXQuXG5cdCAgLy8gYXJncyBvcmRlcjogdGFnLCBkYXRhLCBjaGlsZHJlbiwgbm9ybWFsaXphdGlvblR5cGUsIGFsd2F5c05vcm1hbGl6ZVxuXHQgIC8vIGludGVybmFsIHZlcnNpb24gaXMgdXNlZCBieSByZW5kZXIgZnVuY3Rpb25zIGNvbXBpbGVkIGZyb20gdGVtcGxhdGVzXG5cdCAgdm0uX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudCh2bSwgYSwgYiwgYywgZCwgZmFsc2UpOyB9O1xuXHQgIC8vIG5vcm1hbGl6YXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgZm9yIHRoZSBwdWJsaWMgdmVyc2lvbiwgdXNlZCBpblxuXHQgIC8vIHVzZXItd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zLlxuXHQgIHZtLiRjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodm0sIGEsIGIsIGMsIGQsIHRydWUpOyB9O1xuXHRcblx0ICAvLyAkYXR0cnMgJiAkbGlzdGVuZXJzIGFyZSBleHBvc2VkIGZvciBlYXNpZXIgSE9DIGNyZWF0aW9uLlxuXHQgIC8vIHRoZXkgbmVlZCB0byBiZSByZWFjdGl2ZSBzbyB0aGF0IEhPQ3MgdXNpbmcgdGhlbSBhcmUgYWx3YXlzIHVwZGF0ZWRcblx0ICB2YXIgcGFyZW50RGF0YSA9IHBhcmVudFZub2RlICYmIHBhcmVudFZub2RlLmRhdGE7XG5cdFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAge1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sICckYXR0cnMnLCBwYXJlbnREYXRhICYmIHBhcmVudERhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3QsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgIWlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCAmJiB3YXJuKFwiJGF0dHJzIGlzIHJlYWRvbmx5LlwiLCB2bSk7XG5cdCAgICB9LCB0cnVlKTtcblx0ICAgIGRlZmluZVJlYWN0aXZlKHZtLCAnJGxpc3RlbmVycycsIG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyB8fCBlbXB0eU9iamVjdCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oXCIkbGlzdGVuZXJzIGlzIHJlYWRvbmx5LlwiLCB2bSk7XG5cdCAgICB9LCB0cnVlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbmRlck1peGluIChWdWUpIHtcblx0ICAvLyBpbnN0YWxsIHJ1bnRpbWUgY29udmVuaWVuY2UgaGVscGVyc1xuXHQgIGluc3RhbGxSZW5kZXJIZWxwZXJzKFZ1ZS5wcm90b3R5cGUpO1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuXHQgICAgcmV0dXJuIG5leHRUaWNrKGZuLCB0aGlzKVxuXHQgIH07XG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3JlbmRlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB2YXIgcmVmID0gdm0uJG9wdGlvbnM7XG5cdCAgICB2YXIgcmVuZGVyID0gcmVmLnJlbmRlcjtcblx0ICAgIHZhciBfcGFyZW50Vm5vZGUgPSByZWYuX3BhcmVudFZub2RlO1xuXHRcblx0ICAgIC8vIHJlc2V0IF9yZW5kZXJlZCBmbGFnIG9uIHNsb3RzIGZvciBkdXBsaWNhdGUgc2xvdCBjaGVja1xuXHQgICAge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gdm0uJHNsb3RzKSB7XG5cdCAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgICAgICAgdm0uJHNsb3RzW2tleV0uX3JlbmRlcmVkID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoX3BhcmVudFZub2RlKSB7XG5cdCAgICAgIHZtLiRzY29wZWRTbG90cyA9IF9wYXJlbnRWbm9kZS5kYXRhLnNjb3BlZFNsb3RzIHx8IGVtcHR5T2JqZWN0O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHNldCBwYXJlbnQgdm5vZGUuIHRoaXMgYWxsb3dzIHJlbmRlciBmdW5jdGlvbnMgdG8gaGF2ZSBhY2Nlc3Ncblx0ICAgIC8vIHRvIHRoZSBkYXRhIG9uIHRoZSBwbGFjZWhvbGRlciBub2RlLlxuXHQgICAgdm0uJHZub2RlID0gX3BhcmVudFZub2RlO1xuXHQgICAgLy8gcmVuZGVyIHNlbGZcblx0ICAgIHZhciB2bm9kZTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZub2RlID0gcmVuZGVyLmNhbGwodm0uX3JlbmRlclByb3h5LCB2bS4kY3JlYXRlRWxlbWVudCk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCBcInJlbmRlclwiKTtcblx0ICAgICAgLy8gcmV0dXJuIGVycm9yIHJlbmRlciByZXN1bHQsXG5cdCAgICAgIC8vIG9yIHByZXZpb3VzIHZub2RlIHRvIHByZXZlbnQgcmVuZGVyIGVycm9yIGNhdXNpbmcgYmxhbmsgY29tcG9uZW50XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgICAgIHtcblx0ICAgICAgICBpZiAodm0uJG9wdGlvbnMucmVuZGVyRXJyb3IpIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHZub2RlID0gdm0uJG9wdGlvbnMucmVuZGVyRXJyb3IuY2FsbCh2bS5fcmVuZGVyUHJveHksIHZtLiRjcmVhdGVFbGVtZW50LCBlKTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIFwicmVuZGVyRXJyb3JcIik7XG5cdCAgICAgICAgICAgIHZub2RlID0gdm0uX3Zub2RlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB2bm9kZSA9IHZtLl92bm9kZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHJldHVybiBlbXB0eSB2bm9kZSBpbiBjYXNlIHRoZSByZW5kZXIgZnVuY3Rpb24gZXJyb3JlZCBvdXRcblx0ICAgIGlmICghKHZub2RlIGluc3RhbmNlb2YgVk5vZGUpKSB7XG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBBcnJheS5pc0FycmF5KHZub2RlKSkge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAnTXVsdGlwbGUgcm9vdCBub2RlcyByZXR1cm5lZCBmcm9tIHJlbmRlciBmdW5jdGlvbi4gUmVuZGVyIGZ1bmN0aW9uICcgK1xuXHQgICAgICAgICAgJ3Nob3VsZCByZXR1cm4gYSBzaW5nbGUgcm9vdCBub2RlLicsXG5cdCAgICAgICAgICB2bVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgdm5vZGUgPSBjcmVhdGVFbXB0eVZOb2RlKCk7XG5cdCAgICB9XG5cdCAgICAvLyBzZXQgcGFyZW50XG5cdCAgICB2bm9kZS5wYXJlbnQgPSBfcGFyZW50Vm5vZGU7XG5cdCAgICByZXR1cm4gdm5vZGVcblx0ICB9O1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciB1aWQkMyA9IDA7XG5cdFxuXHRmdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIC8vIGEgdWlkXG5cdCAgICB2bS5fdWlkID0gdWlkJDMrKztcblx0XG5cdCAgICB2YXIgc3RhcnRUYWcsIGVuZFRhZztcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7XG5cdCAgICAgIHN0YXJ0VGFnID0gXCJ2dWUtcGVyZi1zdGFydDpcIiArICh2bS5fdWlkKTtcblx0ICAgICAgZW5kVGFnID0gXCJ2dWUtcGVyZi1lbmQ6XCIgKyAodm0uX3VpZCk7XG5cdCAgICAgIG1hcmsoc3RhcnRUYWcpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG5cdCAgICB2bS5faXNWdWUgPSB0cnVlO1xuXHQgICAgLy8gbWVyZ2Ugb3B0aW9uc1xuXHQgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5faXNDb21wb25lbnQpIHtcblx0ICAgICAgLy8gb3B0aW1pemUgaW50ZXJuYWwgY29tcG9uZW50IGluc3RhbnRpYXRpb25cblx0ICAgICAgLy8gc2luY2UgZHluYW1pYyBvcHRpb25zIG1lcmdpbmcgaXMgcHJldHR5IHNsb3csIGFuZCBub25lIG9mIHRoZVxuXHQgICAgICAvLyBpbnRlcm5hbCBjb21wb25lbnQgb3B0aW9ucyBuZWVkcyBzcGVjaWFsIHRyZWF0bWVudC5cblx0ICAgICAgaW5pdEludGVybmFsQ29tcG9uZW50KHZtLCBvcHRpb25zKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZtLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKFxuXHQgICAgICAgIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnModm0uY29uc3RydWN0b3IpLFxuXHQgICAgICAgIG9wdGlvbnMgfHwge30sXG5cdCAgICAgICAgdm1cblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgICB7XG5cdCAgICAgIGluaXRQcm94eSh2bSk7XG5cdCAgICB9XG5cdCAgICAvLyBleHBvc2UgcmVhbCBzZWxmXG5cdCAgICB2bS5fc2VsZiA9IHZtO1xuXHQgICAgaW5pdExpZmVjeWNsZSh2bSk7XG5cdCAgICBpbml0RXZlbnRzKHZtKTtcblx0ICAgIGluaXRSZW5kZXIodm0pO1xuXHQgICAgY2FsbEhvb2sodm0sICdiZWZvcmVDcmVhdGUnKTtcblx0ICAgIGluaXRJbmplY3Rpb25zKHZtKTsgLy8gcmVzb2x2ZSBpbmplY3Rpb25zIGJlZm9yZSBkYXRhL3Byb3BzXG5cdCAgICBpbml0U3RhdGUodm0pO1xuXHQgICAgaW5pdFByb3ZpZGUodm0pOyAvLyByZXNvbHZlIHByb3ZpZGUgYWZ0ZXIgZGF0YS9wcm9wc1xuXHQgICAgY2FsbEhvb2sodm0sICdjcmVhdGVkJyk7XG5cdFxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHtcblx0ICAgICAgdm0uX25hbWUgPSBmb3JtYXRDb21wb25lbnROYW1lKHZtLCBmYWxzZSk7XG5cdCAgICAgIG1hcmsoZW5kVGFnKTtcblx0ICAgICAgbWVhc3VyZSgoXCJ2dWUgXCIgKyAodm0uX25hbWUpICsgXCIgaW5pdFwiKSwgc3RhcnRUYWcsIGVuZFRhZyk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHZtLiRvcHRpb25zLmVsKSB7XG5cdCAgICAgIHZtLiRtb3VudCh2bS4kb3B0aW9ucy5lbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdEludGVybmFsQ29tcG9uZW50ICh2bSwgb3B0aW9ucykge1xuXHQgIHZhciBvcHRzID0gdm0uJG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKHZtLmNvbnN0cnVjdG9yLm9wdGlvbnMpO1xuXHQgIC8vIGRvaW5nIHRoaXMgYmVjYXVzZSBpdCdzIGZhc3RlciB0aGFuIGR5bmFtaWMgZW51bWVyYXRpb24uXG5cdCAgdmFyIHBhcmVudFZub2RlID0gb3B0aW9ucy5fcGFyZW50Vm5vZGU7XG5cdCAgb3B0cy5wYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcblx0ICBvcHRzLl9wYXJlbnRWbm9kZSA9IHBhcmVudFZub2RlO1xuXHQgIG9wdHMuX3BhcmVudEVsbSA9IG9wdGlvbnMuX3BhcmVudEVsbTtcblx0ICBvcHRzLl9yZWZFbG0gPSBvcHRpb25zLl9yZWZFbG07XG5cdFxuXHQgIHZhciB2bm9kZUNvbXBvbmVudE9wdGlvbnMgPSBwYXJlbnRWbm9kZS5jb21wb25lbnRPcHRpb25zO1xuXHQgIG9wdHMucHJvcHNEYXRhID0gdm5vZGVDb21wb25lbnRPcHRpb25zLnByb3BzRGF0YTtcblx0ICBvcHRzLl9wYXJlbnRMaXN0ZW5lcnMgPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMubGlzdGVuZXJzO1xuXHQgIG9wdHMuX3JlbmRlckNoaWxkcmVuID0gdm5vZGVDb21wb25lbnRPcHRpb25zLmNoaWxkcmVuO1xuXHQgIG9wdHMuX2NvbXBvbmVudFRhZyA9IHZub2RlQ29tcG9uZW50T3B0aW9ucy50YWc7XG5cdFxuXHQgIGlmIChvcHRpb25zLnJlbmRlcikge1xuXHQgICAgb3B0cy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcblx0ICAgIG9wdHMuc3RhdGljUmVuZGVyRm5zID0gb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnM7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zIChDdG9yKSB7XG5cdCAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7XG5cdCAgaWYgKEN0b3Iuc3VwZXIpIHtcblx0ICAgIHZhciBzdXBlck9wdGlvbnMgPSByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKEN0b3Iuc3VwZXIpO1xuXHQgICAgdmFyIGNhY2hlZFN1cGVyT3B0aW9ucyA9IEN0b3Iuc3VwZXJPcHRpb25zO1xuXHQgICAgaWYgKHN1cGVyT3B0aW9ucyAhPT0gY2FjaGVkU3VwZXJPcHRpb25zKSB7XG5cdCAgICAgIC8vIHN1cGVyIG9wdGlvbiBjaGFuZ2VkLFxuXHQgICAgICAvLyBuZWVkIHRvIHJlc29sdmUgbmV3IG9wdGlvbnMuXG5cdCAgICAgIEN0b3Iuc3VwZXJPcHRpb25zID0gc3VwZXJPcHRpb25zO1xuXHQgICAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgYW55IGxhdGUtbW9kaWZpZWQvYXR0YWNoZWQgb3B0aW9ucyAoIzQ5NzYpXG5cdCAgICAgIHZhciBtb2RpZmllZE9wdGlvbnMgPSByZXNvbHZlTW9kaWZpZWRPcHRpb25zKEN0b3IpO1xuXHQgICAgICAvLyB1cGRhdGUgYmFzZSBleHRlbmQgb3B0aW9uc1xuXHQgICAgICBpZiAobW9kaWZpZWRPcHRpb25zKSB7XG5cdCAgICAgICAgZXh0ZW5kKEN0b3IuZXh0ZW5kT3B0aW9ucywgbW9kaWZpZWRPcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICBvcHRpb25zID0gQ3Rvci5vcHRpb25zID0gbWVyZ2VPcHRpb25zKHN1cGVyT3B0aW9ucywgQ3Rvci5leHRlbmRPcHRpb25zKTtcblx0ICAgICAgaWYgKG9wdGlvbnMubmFtZSkge1xuXHQgICAgICAgIG9wdGlvbnMuY29tcG9uZW50c1tvcHRpb25zLm5hbWVdID0gQ3Rvcjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gb3B0aW9uc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlTW9kaWZpZWRPcHRpb25zIChDdG9yKSB7XG5cdCAgdmFyIG1vZGlmaWVkO1xuXHQgIHZhciBsYXRlc3QgPSBDdG9yLm9wdGlvbnM7XG5cdCAgdmFyIGV4dGVuZGVkID0gQ3Rvci5leHRlbmRPcHRpb25zO1xuXHQgIHZhciBzZWFsZWQgPSBDdG9yLnNlYWxlZE9wdGlvbnM7XG5cdCAgZm9yICh2YXIga2V5IGluIGxhdGVzdCkge1xuXHQgICAgaWYgKGxhdGVzdFtrZXldICE9PSBzZWFsZWRba2V5XSkge1xuXHQgICAgICBpZiAoIW1vZGlmaWVkKSB7IG1vZGlmaWVkID0ge307IH1cblx0ICAgICAgbW9kaWZpZWRba2V5XSA9IGRlZHVwZShsYXRlc3Rba2V5XSwgZXh0ZW5kZWRba2V5XSwgc2VhbGVkW2tleV0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbW9kaWZpZWRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGVkdXBlIChsYXRlc3QsIGV4dGVuZGVkLCBzZWFsZWQpIHtcblx0ICAvLyBjb21wYXJlIGxhdGVzdCBhbmQgc2VhbGVkIHRvIGVuc3VyZSBsaWZlY3ljbGUgaG9va3Mgd29uJ3QgYmUgZHVwbGljYXRlZFxuXHQgIC8vIGJldHdlZW4gbWVyZ2VzXG5cdCAgaWYgKEFycmF5LmlzQXJyYXkobGF0ZXN0KSkge1xuXHQgICAgdmFyIHJlcyA9IFtdO1xuXHQgICAgc2VhbGVkID0gQXJyYXkuaXNBcnJheShzZWFsZWQpID8gc2VhbGVkIDogW3NlYWxlZF07XG5cdCAgICBleHRlbmRlZCA9IEFycmF5LmlzQXJyYXkoZXh0ZW5kZWQpID8gZXh0ZW5kZWQgOiBbZXh0ZW5kZWRdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXRlc3QubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgLy8gcHVzaCBvcmlnaW5hbCBvcHRpb25zIGFuZCBub3Qgc2VhbGVkIG9wdGlvbnMgdG8gZXhjbHVkZSBkdXBsaWNhdGVkIG9wdGlvbnNcblx0ICAgICAgaWYgKGV4dGVuZGVkLmluZGV4T2YobGF0ZXN0W2ldKSA+PSAwIHx8IHNlYWxlZC5pbmRleE9mKGxhdGVzdFtpXSkgPCAwKSB7XG5cdCAgICAgICAgcmVzLnB1c2gobGF0ZXN0W2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbGF0ZXN0XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBWdWUgKG9wdGlvbnMpIHtcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICEodGhpcyBpbnN0YW5jZW9mIFZ1ZSlcblx0ICApIHtcblx0ICAgIHdhcm4oJ1Z1ZSBpcyBhIGNvbnN0cnVjdG9yIGFuZCBzaG91bGQgYmUgY2FsbGVkIHdpdGggdGhlIGBuZXdgIGtleXdvcmQnKTtcblx0ICB9XG5cdCAgdGhpcy5faW5pdChvcHRpb25zKTtcblx0fVxuXHRcblx0aW5pdE1peGluKFZ1ZSk7XG5cdHN0YXRlTWl4aW4oVnVlKTtcblx0ZXZlbnRzTWl4aW4oVnVlKTtcblx0bGlmZWN5Y2xlTWl4aW4oVnVlKTtcblx0cmVuZGVyTWl4aW4oVnVlKTtcblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdFVzZSAoVnVlKSB7XG5cdCAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcblx0ICAgIHZhciBpbnN0YWxsZWRQbHVnaW5zID0gKHRoaXMuX2luc3RhbGxlZFBsdWdpbnMgfHwgKHRoaXMuX2luc3RhbGxlZFBsdWdpbnMgPSBbXSkpO1xuXHQgICAgaWYgKGluc3RhbGxlZFBsdWdpbnMuaW5kZXhPZihwbHVnaW4pID4gLTEpIHtcblx0ICAgICAgcmV0dXJuIHRoaXNcblx0ICAgIH1cblx0XG5cdCAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgcGx1Z2luID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIGluc3RhbGxlZFBsdWdpbnMucHVzaChwbHVnaW4pO1xuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9O1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRNaXhpbiQxIChWdWUpIHtcblx0ICBWdWUubWl4aW4gPSBmdW5jdGlvbiAobWl4aW4pIHtcblx0ICAgIHRoaXMub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLm9wdGlvbnMsIG1peGluKTtcblx0ICAgIHJldHVybiB0aGlzXG5cdCAgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0RXh0ZW5kIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWVcblx0ICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG5cdCAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG5cdCAgICovXG5cdCAgVnVlLmNpZCA9IDA7XG5cdCAgdmFyIGNpZCA9IDE7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENsYXNzIGluaGVyaXRhbmNlXG5cdCAgICovXG5cdCAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG5cdCAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTtcblx0ICAgIHZhciBTdXBlciA9IHRoaXM7XG5cdCAgICB2YXIgU3VwZXJJZCA9IFN1cGVyLmNpZDtcblx0ICAgIHZhciBjYWNoZWRDdG9ycyA9IGV4dGVuZE9wdGlvbnMuX0N0b3IgfHwgKGV4dGVuZE9wdGlvbnMuX0N0b3IgPSB7fSk7XG5cdCAgICBpZiAoY2FjaGVkQ3RvcnNbU3VwZXJJZF0pIHtcblx0ICAgICAgcmV0dXJuIGNhY2hlZEN0b3JzW1N1cGVySWRdXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lO1xuXHQgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUpIHtcblx0ICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBTdWIgPSBmdW5jdGlvbiBWdWVDb21wb25lbnQgKG9wdGlvbnMpIHtcblx0ICAgICAgdGhpcy5faW5pdChvcHRpb25zKTtcblx0ICAgIH07XG5cdCAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuXHQgICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1Yjtcblx0ICAgIFN1Yi5jaWQgPSBjaWQrKztcblx0ICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFxuXHQgICAgICBTdXBlci5vcHRpb25zLFxuXHQgICAgICBleHRlbmRPcHRpb25zXG5cdCAgICApO1xuXHQgICAgU3ViWydzdXBlciddID0gU3VwZXI7XG5cdFxuXHQgICAgLy8gRm9yIHByb3BzIGFuZCBjb21wdXRlZCBwcm9wZXJ0aWVzLCB3ZSBkZWZpbmUgdGhlIHByb3h5IGdldHRlcnMgb25cblx0ICAgIC8vIHRoZSBWdWUgaW5zdGFuY2VzIGF0IGV4dGVuc2lvbiB0aW1lLCBvbiB0aGUgZXh0ZW5kZWQgcHJvdG90eXBlLiBUaGlzXG5cdCAgICAvLyBhdm9pZHMgT2JqZWN0LmRlZmluZVByb3BlcnR5IGNhbGxzIGZvciBlYWNoIGluc3RhbmNlIGNyZWF0ZWQuXG5cdCAgICBpZiAoU3ViLm9wdGlvbnMucHJvcHMpIHtcblx0ICAgICAgaW5pdFByb3BzJDEoU3ViKTtcblx0ICAgIH1cblx0ICAgIGlmIChTdWIub3B0aW9ucy5jb21wdXRlZCkge1xuXHQgICAgICBpbml0Q29tcHV0ZWQkMShTdWIpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uL21peGluL3BsdWdpbiB1c2FnZVxuXHQgICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcblx0ICAgIFN1Yi5taXhpbiA9IFN1cGVyLm1peGluO1xuXHQgICAgU3ViLnVzZSA9IFN1cGVyLnVzZTtcblx0XG5cdCAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG5cdCAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG5cdCAgICBBU1NFVF9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdO1xuXHQgICAgfSk7XG5cdCAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG5cdCAgICBpZiAobmFtZSkge1xuXHQgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIHN1cGVyIG9wdGlvbnMgYXQgZXh0ZW5zaW9uIHRpbWUuXG5cdCAgICAvLyBsYXRlciBhdCBpbnN0YW50aWF0aW9uIHdlIGNhbiBjaGVjayBpZiBTdXBlcidzIG9wdGlvbnMgaGF2ZVxuXHQgICAgLy8gYmVlbiB1cGRhdGVkLlxuXHQgICAgU3ViLnN1cGVyT3B0aW9ucyA9IFN1cGVyLm9wdGlvbnM7XG5cdCAgICBTdWIuZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnM7XG5cdCAgICBTdWIuc2VhbGVkT3B0aW9ucyA9IGV4dGVuZCh7fSwgU3ViLm9wdGlvbnMpO1xuXHRcblx0ICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG5cdCAgICBjYWNoZWRDdG9yc1tTdXBlcklkXSA9IFN1Yjtcblx0ICAgIHJldHVybiBTdWJcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0UHJvcHMkMSAoQ29tcCkge1xuXHQgIHZhciBwcm9wcyA9IENvbXAub3B0aW9ucy5wcm9wcztcblx0ICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcblx0ICAgIHByb3h5KENvbXAucHJvdG90eXBlLCBcIl9wcm9wc1wiLCBrZXkpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdENvbXB1dGVkJDEgKENvbXApIHtcblx0ICB2YXIgY29tcHV0ZWQgPSBDb21wLm9wdGlvbnMuY29tcHV0ZWQ7XG5cdCAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG5cdCAgICBkZWZpbmVDb21wdXRlZChDb21wLnByb3RvdHlwZSwga2V5LCBjb21wdXRlZFtrZXldKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdEFzc2V0UmVnaXN0ZXJzIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMuXG5cdCAgICovXG5cdCAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKFxuXHQgICAgICBpZCxcblx0ICAgICAgZGVmaW5pdGlvblxuXHQgICAgKSB7XG5cdCAgICAgIGlmICghZGVmaW5pdGlvbikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGUgPT09ICdjb21wb25lbnQnKSB7XG5cdCAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoaWQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkge1xuXHQgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gZGVmaW5pdGlvbi5uYW1lIHx8IGlkO1xuXHQgICAgICAgICAgZGVmaW5pdGlvbiA9IHRoaXMub3B0aW9ucy5fYmFzZS5leHRlbmQoZGVmaW5pdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0eXBlID09PSAnZGlyZWN0aXZlJyAmJiB0eXBlb2YgZGVmaW5pdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgZGVmaW5pdGlvbiA9IHsgYmluZDogZGVmaW5pdGlvbiwgdXBkYXRlOiBkZWZpbml0aW9uIH07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuXHQgICAgICAgIHJldHVybiBkZWZpbml0aW9uXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZSAob3B0cykge1xuXHQgIHJldHVybiBvcHRzICYmIChvcHRzLkN0b3Iub3B0aW9ucy5uYW1lIHx8IG9wdHMudGFnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXRjaGVzIChwYXR0ZXJuLCBuYW1lKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHtcblx0ICAgIHJldHVybiBwYXR0ZXJuLmluZGV4T2YobmFtZSkgPiAtMVxuXHQgIH0gZWxzZSBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gcGF0dGVybi5zcGxpdCgnLCcpLmluZGV4T2YobmFtZSkgPiAtMVxuXHQgIH0gZWxzZSBpZiAoaXNSZWdFeHAocGF0dGVybikpIHtcblx0ICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSlcblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICByZXR1cm4gZmFsc2Vcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJ1bmVDYWNoZSAoa2VlcEFsaXZlSW5zdGFuY2UsIGZpbHRlcikge1xuXHQgIHZhciBjYWNoZSA9IGtlZXBBbGl2ZUluc3RhbmNlLmNhY2hlO1xuXHQgIHZhciBrZXlzID0ga2VlcEFsaXZlSW5zdGFuY2Uua2V5cztcblx0ICB2YXIgX3Zub2RlID0ga2VlcEFsaXZlSW5zdGFuY2UuX3Zub2RlO1xuXHQgIGZvciAodmFyIGtleSBpbiBjYWNoZSkge1xuXHQgICAgdmFyIGNhY2hlZE5vZGUgPSBjYWNoZVtrZXldO1xuXHQgICAgaWYgKGNhY2hlZE5vZGUpIHtcblx0ICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNhY2hlZE5vZGUuY29tcG9uZW50T3B0aW9ucyk7XG5cdCAgICAgIGlmIChuYW1lICYmICFmaWx0ZXIobmFtZSkpIHtcblx0ICAgICAgICBwcnVuZUNhY2hlRW50cnkoY2FjaGUsIGtleSwga2V5cywgX3Zub2RlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJ1bmVDYWNoZUVudHJ5IChcblx0ICBjYWNoZSxcblx0ICBrZXksXG5cdCAga2V5cyxcblx0ICBjdXJyZW50XG5cdCkge1xuXHQgIHZhciBjYWNoZWQkJDEgPSBjYWNoZVtrZXldO1xuXHQgIGlmIChjYWNoZWQkJDEgJiYgKCFjdXJyZW50IHx8IGNhY2hlZCQkMS50YWcgIT09IGN1cnJlbnQudGFnKSkge1xuXHQgICAgY2FjaGVkJCQxLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7XG5cdCAgfVxuXHQgIGNhY2hlW2tleV0gPSBudWxsO1xuXHQgIHJlbW92ZShrZXlzLCBrZXkpO1xuXHR9XG5cdFxuXHR2YXIgcGF0dGVyblR5cGVzID0gW1N0cmluZywgUmVnRXhwLCBBcnJheV07XG5cdFxuXHR2YXIgS2VlcEFsaXZlID0ge1xuXHQgIG5hbWU6ICdrZWVwLWFsaXZlJyxcblx0ICBhYnN0cmFjdDogdHJ1ZSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIGluY2x1ZGU6IHBhdHRlcm5UeXBlcyxcblx0ICAgIGV4Y2x1ZGU6IHBhdHRlcm5UeXBlcyxcblx0ICAgIG1heDogW1N0cmluZywgTnVtYmVyXVxuXHQgIH0sXG5cdFxuXHQgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQgKCkge1xuXHQgICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICB0aGlzLmtleXMgPSBbXTtcblx0ICB9LFxuXHRcblx0ICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCAoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gdGhpcyQxLmNhY2hlKSB7XG5cdCAgICAgIHBydW5lQ2FjaGVFbnRyeSh0aGlzJDEuY2FjaGUsIGtleSwgdGhpcyQxLmtleXMpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHdhdGNoOiB7XG5cdCAgICBpbmNsdWRlOiBmdW5jdGlvbiBpbmNsdWRlICh2YWwpIHtcblx0ICAgICAgcHJ1bmVDYWNoZSh0aGlzLCBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gbWF0Y2hlcyh2YWwsIG5hbWUpOyB9KTtcblx0ICAgIH0sXG5cdCAgICBleGNsdWRlOiBmdW5jdGlvbiBleGNsdWRlICh2YWwpIHtcblx0ICAgICAgcHJ1bmVDYWNoZSh0aGlzLCBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gIW1hdGNoZXModmFsLCBuYW1lKTsgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKCkge1xuXHQgICAgdmFyIHNsb3QgPSB0aGlzLiRzbG90cy5kZWZhdWx0O1xuXHQgICAgdmFyIHZub2RlID0gZ2V0Rmlyc3RDb21wb25lbnRDaGlsZChzbG90KTtcblx0ICAgIHZhciBjb21wb25lbnRPcHRpb25zID0gdm5vZGUgJiYgdm5vZGUuY29tcG9uZW50T3B0aW9ucztcblx0ICAgIGlmIChjb21wb25lbnRPcHRpb25zKSB7XG5cdCAgICAgIC8vIGNoZWNrIHBhdHRlcm5cblx0ICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNvbXBvbmVudE9wdGlvbnMpO1xuXHQgICAgICB2YXIgcmVmID0gdGhpcztcblx0ICAgICAgdmFyIGluY2x1ZGUgPSByZWYuaW5jbHVkZTtcblx0ICAgICAgdmFyIGV4Y2x1ZGUgPSByZWYuZXhjbHVkZTtcblx0ICAgICAgaWYgKFxuXHQgICAgICAgIC8vIG5vdCBpbmNsdWRlZFxuXHQgICAgICAgIChpbmNsdWRlICYmICghbmFtZSB8fCAhbWF0Y2hlcyhpbmNsdWRlLCBuYW1lKSkpIHx8XG5cdCAgICAgICAgLy8gZXhjbHVkZWRcblx0ICAgICAgICAoZXhjbHVkZSAmJiBuYW1lICYmIG1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpXG5cdCAgICAgICkge1xuXHQgICAgICAgIHJldHVybiB2bm9kZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcmVmJDEgPSB0aGlzO1xuXHQgICAgICB2YXIgY2FjaGUgPSByZWYkMS5jYWNoZTtcblx0ICAgICAgdmFyIGtleXMgPSByZWYkMS5rZXlzO1xuXHQgICAgICB2YXIga2V5ID0gdm5vZGUua2V5ID09IG51bGxcblx0ICAgICAgICAvLyBzYW1lIGNvbnN0cnVjdG9yIG1heSBnZXQgcmVnaXN0ZXJlZCBhcyBkaWZmZXJlbnQgbG9jYWwgY29tcG9uZW50c1xuXHQgICAgICAgIC8vIHNvIGNpZCBhbG9uZSBpcyBub3QgZW5vdWdoICgjMzI2OSlcblx0ICAgICAgICA/IGNvbXBvbmVudE9wdGlvbnMuQ3Rvci5jaWQgKyAoY29tcG9uZW50T3B0aW9ucy50YWcgPyAoXCI6OlwiICsgKGNvbXBvbmVudE9wdGlvbnMudGFnKSkgOiAnJylcblx0ICAgICAgICA6IHZub2RlLmtleTtcblx0ICAgICAgaWYgKGNhY2hlW2tleV0pIHtcblx0ICAgICAgICB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IGNhY2hlW2tleV0uY29tcG9uZW50SW5zdGFuY2U7XG5cdCAgICAgICAgLy8gbWFrZSBjdXJyZW50IGtleSBmcmVzaGVzdFxuXHQgICAgICAgIHJlbW92ZShrZXlzLCBrZXkpO1xuXHQgICAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNhY2hlW2tleV0gPSB2bm9kZTtcblx0ICAgICAgICBrZXlzLnB1c2goa2V5KTtcblx0ICAgICAgICAvLyBwcnVuZSBvbGRlc3QgZW50cnlcblx0ICAgICAgICBpZiAodGhpcy5tYXggJiYga2V5cy5sZW5ndGggPiBwYXJzZUludCh0aGlzLm1heCkpIHtcblx0ICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5c1swXSwga2V5cywgdGhpcy5fdm5vZGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdm5vZGUuZGF0YS5rZWVwQWxpdmUgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZub2RlIHx8IChzbG90ICYmIHNsb3RbMF0pXG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgYnVpbHRJbkNvbXBvbmVudHMgPSB7XG5cdCAgS2VlcEFsaXZlOiBLZWVwQWxpdmVcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBpbml0R2xvYmFsQVBJIChWdWUpIHtcblx0ICAvLyBjb25maWdcblx0ICB2YXIgY29uZmlnRGVmID0ge307XG5cdCAgY29uZmlnRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbmZpZzsgfTtcblx0ICB7XG5cdCAgICBjb25maWdEZWYuc2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgICdEbyBub3QgcmVwbGFjZSB0aGUgVnVlLmNvbmZpZyBvYmplY3QsIHNldCBpbmRpdmlkdWFsIGZpZWxkcyBpbnN0ZWFkLidcblx0ICAgICAgKTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUsICdjb25maWcnLCBjb25maWdEZWYpO1xuXHRcblx0ICAvLyBleHBvc2VkIHV0aWwgbWV0aG9kcy5cblx0ICAvLyBOT1RFOiB0aGVzZSBhcmUgbm90IGNvbnNpZGVyZWQgcGFydCBvZiB0aGUgcHVibGljIEFQSSAtIGF2b2lkIHJlbHlpbmcgb25cblx0ICAvLyB0aGVtIHVubGVzcyB5b3UgYXJlIGF3YXJlIG9mIHRoZSByaXNrLlxuXHQgIFZ1ZS51dGlsID0ge1xuXHQgICAgd2Fybjogd2Fybixcblx0ICAgIGV4dGVuZDogZXh0ZW5kLFxuXHQgICAgbWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG5cdCAgICBkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmVcblx0ICB9O1xuXHRcblx0ICBWdWUuc2V0ID0gc2V0O1xuXHQgIFZ1ZS5kZWxldGUgPSBkZWw7XG5cdCAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cdFxuXHQgIFZ1ZS5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBBU1NFVF9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICBWdWUub3B0aW9uc1t0eXBlICsgJ3MnXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfSk7XG5cdFxuXHQgIC8vIHRoaXMgaXMgdXNlZCB0byBpZGVudGlmeSB0aGUgXCJiYXNlXCIgY29uc3RydWN0b3IgdG8gZXh0ZW5kIGFsbCBwbGFpbi1vYmplY3Rcblx0ICAvLyBjb21wb25lbnRzIHdpdGggaW4gV2VleCdzIG11bHRpLWluc3RhbmNlIHNjZW5hcmlvcy5cblx0ICBWdWUub3B0aW9ucy5fYmFzZSA9IFZ1ZTtcblx0XG5cdCAgZXh0ZW5kKFZ1ZS5vcHRpb25zLmNvbXBvbmVudHMsIGJ1aWx0SW5Db21wb25lbnRzKTtcblx0XG5cdCAgaW5pdFVzZShWdWUpO1xuXHQgIGluaXRNaXhpbiQxKFZ1ZSk7XG5cdCAgaW5pdEV4dGVuZChWdWUpO1xuXHQgIGluaXRBc3NldFJlZ2lzdGVycyhWdWUpO1xuXHR9XG5cdFxuXHRpbml0R2xvYmFsQVBJKFZ1ZSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRpc1NlcnZlcicsIHtcblx0ICBnZXQ6IGlzU2VydmVyUmVuZGVyaW5nXG5cdH0pO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckc3NyQ29udGV4dCcsIHtcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgcmV0dXJuIHRoaXMuJHZub2RlICYmIHRoaXMuJHZub2RlLnNzckNvbnRleHRcblx0ICB9XG5cdH0pO1xuXHRcblx0Ly8gZXhwb3NlIEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0IGZvciBzc3IgcnVudGltZSBoZWxwZXIgaW5zdGFsbGF0aW9uXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUsICdGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCcsIHtcblx0ICB2YWx1ZTogRnVuY3Rpb25hbFJlbmRlckNvbnRleHRcblx0fSk7XG5cdFxuXHRWdWUudmVyc2lvbiA9ICcyLjUuMTUnO1xuXHRcblx0LyogICovXG5cdFxuXHQvLyB0aGVzZSBhcmUgcmVzZXJ2ZWQgZm9yIHdlYiBiZWNhdXNlIHRoZXkgYXJlIGRpcmVjdGx5IGNvbXBpbGVkIGF3YXlcblx0Ly8gZHVyaW5nIHRlbXBsYXRlIGNvbXBpbGF0aW9uXG5cdHZhciBpc1Jlc2VydmVkQXR0ciA9IG1ha2VNYXAoJ3N0eWxlLGNsYXNzJyk7XG5cdFxuXHQvLyBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHVzaW5nIHByb3BzIGZvciBiaW5kaW5nXG5cdHZhciBhY2NlcHRWYWx1ZSA9IG1ha2VNYXAoJ2lucHV0LHRleHRhcmVhLG9wdGlvbixzZWxlY3QscHJvZ3Jlc3MnKTtcblx0dmFyIG11c3RVc2VQcm9wID0gZnVuY3Rpb24gKHRhZywgdHlwZSwgYXR0cikge1xuXHQgIHJldHVybiAoXG5cdCAgICAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBhY2NlcHRWYWx1ZSh0YWcpKSAmJiB0eXBlICE9PSAnYnV0dG9uJyB8fFxuXHQgICAgKGF0dHIgPT09ICdzZWxlY3RlZCcgJiYgdGFnID09PSAnb3B0aW9uJykgfHxcblx0ICAgIChhdHRyID09PSAnY2hlY2tlZCcgJiYgdGFnID09PSAnaW5wdXQnKSB8fFxuXHQgICAgKGF0dHIgPT09ICdtdXRlZCcgJiYgdGFnID09PSAndmlkZW8nKVxuXHQgIClcblx0fTtcblx0XG5cdHZhciBpc0VudW1lcmF0ZWRBdHRyID0gbWFrZU1hcCgnY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrJyk7XG5cdFxuXHR2YXIgaXNCb29sZWFuQXR0ciA9IG1ha2VNYXAoXG5cdCAgJ2FsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsJyArXG5cdCAgJ2RlZmF1bHQsZGVmYXVsdGNoZWNrZWQsZGVmYXVsdG11dGVkLGRlZmF1bHRzZWxlY3RlZCxkZWZlcixkaXNhYmxlZCwnICtcblx0ICAnZW5hYmxlZCxmb3Jtbm92YWxpZGF0ZSxoaWRkZW4saW5kZXRlcm1pbmF0ZSxpbmVydCxpc21hcCxpdGVtc2NvcGUsbG9vcCxtdWx0aXBsZSwnICtcblx0ICAnbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSwnICtcblx0ICAncmVxdWlyZWQscmV2ZXJzZWQsc2NvcGVkLHNlYW1sZXNzLHNlbGVjdGVkLHNvcnRhYmxlLHRyYW5zbGF0ZSwnICtcblx0ICAndHJ1ZXNwZWVkLHR5cGVtdXN0bWF0Y2gsdmlzaWJsZSdcblx0KTtcblx0XG5cdHZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xuXHRcblx0dmFyIGlzWGxpbmsgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgIHJldHVybiBuYW1lLmNoYXJBdCg1KSA9PT0gJzonICYmIG5hbWUuc2xpY2UoMCwgNSkgPT09ICd4bGluaydcblx0fTtcblx0XG5cdHZhciBnZXRYbGlua1Byb3AgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgIHJldHVybiBpc1hsaW5rKG5hbWUpID8gbmFtZS5zbGljZSg2LCBuYW1lLmxlbmd0aCkgOiAnJ1xuXHR9O1xuXHRcblx0dmFyIGlzRmFsc3lBdHRyVmFsdWUgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gZmFsc2Vcblx0fTtcblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gZ2VuQ2xhc3NGb3JWbm9kZSAodm5vZGUpIHtcblx0ICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG5cdCAgdmFyIHBhcmVudE5vZGUgPSB2bm9kZTtcblx0ICB2YXIgY2hpbGROb2RlID0gdm5vZGU7XG5cdCAgd2hpbGUgKGlzRGVmKGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZSkpIHtcblx0ICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG5cdCAgICBpZiAoY2hpbGROb2RlICYmIGNoaWxkTm9kZS5kYXRhKSB7XG5cdCAgICAgIGRhdGEgPSBtZXJnZUNsYXNzRGF0YShjaGlsZE5vZGUuZGF0YSwgZGF0YSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHdoaWxlIChpc0RlZihwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnQpKSB7XG5cdCAgICBpZiAocGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLmRhdGEpIHtcblx0ICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGRhdGEsIHBhcmVudE5vZGUuZGF0YSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZW5kZXJDbGFzcyhkYXRhLnN0YXRpY0NsYXNzLCBkYXRhLmNsYXNzKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtZXJnZUNsYXNzRGF0YSAoY2hpbGQsIHBhcmVudCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBzdGF0aWNDbGFzczogY29uY2F0KGNoaWxkLnN0YXRpY0NsYXNzLCBwYXJlbnQuc3RhdGljQ2xhc3MpLFxuXHQgICAgY2xhc3M6IGlzRGVmKGNoaWxkLmNsYXNzKVxuXHQgICAgICA/IFtjaGlsZC5jbGFzcywgcGFyZW50LmNsYXNzXVxuXHQgICAgICA6IHBhcmVudC5jbGFzc1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVuZGVyQ2xhc3MgKFxuXHQgIHN0YXRpY0NsYXNzLFxuXHQgIGR5bmFtaWNDbGFzc1xuXHQpIHtcblx0ICBpZiAoaXNEZWYoc3RhdGljQ2xhc3MpIHx8IGlzRGVmKGR5bmFtaWNDbGFzcykpIHtcblx0ICAgIHJldHVybiBjb25jYXQoc3RhdGljQ2xhc3MsIHN0cmluZ2lmeUNsYXNzKGR5bmFtaWNDbGFzcykpXG5cdCAgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgcmV0dXJuICcnXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvbmNhdCAoYSwgYikge1xuXHQgIHJldHVybiBhID8gYiA/IChhICsgJyAnICsgYikgOiBhIDogKGIgfHwgJycpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ2lmeUNsYXNzICh2YWx1ZSkge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZ2lmeUFycmF5KHZhbHVlKVxuXHQgIH1cblx0ICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5naWZ5T2JqZWN0KHZhbHVlKVxuXHQgIH1cblx0ICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlXG5cdCAgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgcmV0dXJuICcnXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ2lmeUFycmF5ICh2YWx1ZSkge1xuXHQgIHZhciByZXMgPSAnJztcblx0ICB2YXIgc3RyaW5naWZpZWQ7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGlmIChpc0RlZihzdHJpbmdpZmllZCA9IHN0cmluZ2lmeUNsYXNzKHZhbHVlW2ldKSkgJiYgc3RyaW5naWZpZWQgIT09ICcnKSB7XG5cdCAgICAgIGlmIChyZXMpIHsgcmVzICs9ICcgJzsgfVxuXHQgICAgICByZXMgKz0gc3RyaW5naWZpZWQ7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RyaW5naWZ5T2JqZWN0ICh2YWx1ZSkge1xuXHQgIHZhciByZXMgPSAnJztcblx0ICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcblx0ICAgIGlmICh2YWx1ZVtrZXldKSB7XG5cdCAgICAgIGlmIChyZXMpIHsgcmVzICs9ICcgJzsgfVxuXHQgICAgICByZXMgKz0ga2V5O1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIG5hbWVzcGFjZU1hcCA9IHtcblx0ICBzdmc6ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXG5cdCAgbWF0aDogJ2h0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwnXG5cdH07XG5cdFxuXHR2YXIgaXNIVE1MVGFnID0gbWFrZU1hcChcblx0ICAnaHRtbCxib2R5LGJhc2UsaGVhZCxsaW5rLG1ldGEsc3R5bGUsdGl0bGUsJyArXG5cdCAgJ2FkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbiwnICtcblx0ICAnZGl2LGRkLGRsLGR0LGZpZ2NhcHRpb24sZmlndXJlLHBpY3R1cmUsaHIsaW1nLGxpLG1haW4sb2wscCxwcmUsdWwsJyArXG5cdCAgJ2EsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLGRhdGEsZGZuLGVtLGksa2JkLG1hcmsscSxycCxydCxydGMscnVieSwnICtcblx0ICAncyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sJyArXG5cdCAgJ2VtYmVkLG9iamVjdCxwYXJhbSxzb3VyY2UsY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLCcgK1xuXHQgICdjYXB0aW9uLGNvbCxjb2xncm91cCx0YWJsZSx0aGVhZCx0Ym9keSx0ZCx0aCx0ciwnICtcblx0ICAnYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbiwnICtcblx0ICAnb3V0cHV0LHByb2dyZXNzLHNlbGVjdCx0ZXh0YXJlYSwnICtcblx0ICAnZGV0YWlscyxkaWFsb2csbWVudSxtZW51aXRlbSxzdW1tYXJ5LCcgK1xuXHQgICdjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290J1xuXHQpO1xuXHRcblx0Ly8gdGhpcyBtYXAgaXMgaW50ZW50aW9uYWxseSBzZWxlY3RpdmUsIG9ubHkgY292ZXJpbmcgU1ZHIGVsZW1lbnRzIHRoYXQgbWF5XG5cdC8vIGNvbnRhaW4gY2hpbGQgZWxlbWVudHMuXG5cdHZhciBpc1NWRyA9IG1ha2VNYXAoXG5cdCAgJ3N2ZyxhbmltYXRlLGNpcmNsZSxjbGlwcGF0aCxjdXJzb3IsZGVmcyxkZXNjLGVsbGlwc2UsZmlsdGVyLGZvbnQtZmFjZSwnICtcblx0ICAnZm9yZWlnbk9iamVjdCxnLGdseXBoLGltYWdlLGxpbmUsbWFya2VyLG1hc2ssbWlzc2luZy1nbHlwaCxwYXRoLHBhdHRlcm4sJyArXG5cdCAgJ3BvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXcnLFxuXHQgIHRydWVcblx0KTtcblx0XG5cdHZhciBpc1ByZVRhZyA9IGZ1bmN0aW9uICh0YWcpIHsgcmV0dXJuIHRhZyA9PT0gJ3ByZSc7IH07XG5cdFxuXHR2YXIgaXNSZXNlcnZlZFRhZyA9IGZ1bmN0aW9uICh0YWcpIHtcblx0ICByZXR1cm4gaXNIVE1MVGFnKHRhZykgfHwgaXNTVkcodGFnKVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0VGFnTmFtZXNwYWNlICh0YWcpIHtcblx0ICBpZiAoaXNTVkcodGFnKSkge1xuXHQgICAgcmV0dXJuICdzdmcnXG5cdCAgfVxuXHQgIC8vIGJhc2ljIHN1cHBvcnQgZm9yIE1hdGhNTFxuXHQgIC8vIG5vdGUgaXQgZG9lc24ndCBzdXBwb3J0IG90aGVyIE1hdGhNTCBlbGVtZW50cyBiZWluZyBjb21wb25lbnQgcm9vdHNcblx0ICBpZiAodGFnID09PSAnbWF0aCcpIHtcblx0ICAgIHJldHVybiAnbWF0aCdcblx0ICB9XG5cdH1cblx0XG5cdHZhciB1bmtub3duRWxlbWVudENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ZnVuY3Rpb24gaXNVbmtub3duRWxlbWVudCAodGFnKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFpbkJyb3dzZXIpIHtcblx0ICAgIHJldHVybiB0cnVlXG5cdCAgfVxuXHQgIGlmIChpc1Jlc2VydmVkVGFnKHRhZykpIHtcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0ICB0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddICE9IG51bGwpIHtcblx0ICAgIHJldHVybiB1bmtub3duRWxlbWVudENhY2hlW3RhZ11cblx0ICB9XG5cdCAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuXHQgIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcblx0ICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcblx0ICAgIHJldHVybiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddID0gKFxuXHQgICAgICBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fFxuXHQgICAgICBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50XG5cdCAgICApKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gKHVua25vd25FbGVtZW50Q2FjaGVbdGFnXSA9IC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkpXG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgaXNUZXh0SW5wdXRUeXBlID0gbWFrZU1hcCgndGV4dCxudW1iZXIscGFzc3dvcmQsc2VhcmNoLGVtYWlsLHRlbCx1cmwnKTtcblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LlxuXHQgKi9cblx0ZnVuY3Rpb24gcXVlcnkgKGVsKSB7XG5cdCAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhciBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuXHQgICAgaWYgKCFzZWxlY3RlZCkge1xuXHQgICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuXHQgICAgICAgICdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgZWxcblx0ICAgICAgKTtcblx0ICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2VsZWN0ZWRcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGVsXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQkMSAodGFnTmFtZSwgdm5vZGUpIHtcblx0ICB2YXIgZWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcblx0ICBpZiAodGFnTmFtZSAhPT0gJ3NlbGVjdCcpIHtcblx0ICAgIHJldHVybiBlbG1cblx0ICB9XG5cdCAgLy8gZmFsc2Ugb3IgbnVsbCB3aWxsIHJlbW92ZSB0aGUgYXR0cmlidXRlIGJ1dCB1bmRlZmluZWQgd2lsbCBub3Rcblx0ICBpZiAodm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLmF0dHJzICYmIHZub2RlLmRhdGEuYXR0cnMubXVsdGlwbGUgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgZWxtLnNldEF0dHJpYnV0ZSgnbXVsdGlwbGUnLCAnbXVsdGlwbGUnKTtcblx0ICB9XG5cdCAgcmV0dXJuIGVsbVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVFbGVtZW50TlMgKG5hbWVzcGFjZSwgdGFnTmFtZSkge1xuXHQgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlTWFwW25hbWVzcGFjZV0sIHRhZ05hbWUpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVRleHROb2RlICh0ZXh0KSB7XG5cdCAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnQgKHRleHQpIHtcblx0ICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCh0ZXh0KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnNlcnRCZWZvcmUgKHBhcmVudE5vZGUsIG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpIHtcblx0ICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlLCByZWZlcmVuY2VOb2RlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQ2hpbGQgKG5vZGUsIGNoaWxkKSB7XG5cdCAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFwcGVuZENoaWxkIChub2RlLCBjaGlsZCkge1xuXHQgIG5vZGUuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJlbnROb2RlIChub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUucGFyZW50Tm9kZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBuZXh0U2libGluZyAobm9kZSkge1xuXHQgIHJldHVybiBub2RlLm5leHRTaWJsaW5nXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRhZ05hbWUgKG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZS50YWdOYW1lXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFRleHRDb250ZW50IChub2RlLCB0ZXh0KSB7XG5cdCAgbm9kZS50ZXh0Q29udGVudCA9IHRleHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFN0eWxlU2NvcGUgKG5vZGUsIHNjb3BlSWQpIHtcblx0ICBub2RlLnNldEF0dHJpYnV0ZShzY29wZUlkLCAnJyk7XG5cdH1cblx0XG5cdFxuXHR2YXIgbm9kZU9wcyA9IE9iamVjdC5mcmVlemUoe1xuXHRcdGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQkMSxcblx0XHRjcmVhdGVFbGVtZW50TlM6IGNyZWF0ZUVsZW1lbnROUyxcblx0XHRjcmVhdGVUZXh0Tm9kZTogY3JlYXRlVGV4dE5vZGUsXG5cdFx0Y3JlYXRlQ29tbWVudDogY3JlYXRlQ29tbWVudCxcblx0XHRpbnNlcnRCZWZvcmU6IGluc2VydEJlZm9yZSxcblx0XHRyZW1vdmVDaGlsZDogcmVtb3ZlQ2hpbGQsXG5cdFx0YXBwZW5kQ2hpbGQ6IGFwcGVuZENoaWxkLFxuXHRcdHBhcmVudE5vZGU6IHBhcmVudE5vZGUsXG5cdFx0bmV4dFNpYmxpbmc6IG5leHRTaWJsaW5nLFxuXHRcdHRhZ05hbWU6IHRhZ05hbWUsXG5cdFx0c2V0VGV4dENvbnRlbnQ6IHNldFRleHRDb250ZW50LFxuXHRcdHNldFN0eWxlU2NvcGU6IHNldFN0eWxlU2NvcGVcblx0fSk7XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciByZWYgPSB7XG5cdCAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUgKF8sIHZub2RlKSB7XG5cdCAgICByZWdpc3RlclJlZih2bm9kZSk7XG5cdCAgfSxcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSAob2xkVm5vZGUsIHZub2RlKSB7XG5cdCAgICBpZiAob2xkVm5vZGUuZGF0YS5yZWYgIT09IHZub2RlLmRhdGEucmVmKSB7XG5cdCAgICAgIHJlZ2lzdGVyUmVmKG9sZFZub2RlLCB0cnVlKTtcblx0ICAgICAgcmVnaXN0ZXJSZWYodm5vZGUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSAodm5vZGUpIHtcblx0ICAgIHJlZ2lzdGVyUmVmKHZub2RlLCB0cnVlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlZ2lzdGVyUmVmICh2bm9kZSwgaXNSZW1vdmFsKSB7XG5cdCAgdmFyIGtleSA9IHZub2RlLmRhdGEucmVmO1xuXHQgIGlmICghaXNEZWYoa2V5KSkgeyByZXR1cm4gfVxuXHRcblx0ICB2YXIgdm0gPSB2bm9kZS5jb250ZXh0O1xuXHQgIHZhciByZWYgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSB8fCB2bm9kZS5lbG07XG5cdCAgdmFyIHJlZnMgPSB2bS4kcmVmcztcblx0ICBpZiAoaXNSZW1vdmFsKSB7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShyZWZzW2tleV0pKSB7XG5cdCAgICAgIHJlbW92ZShyZWZzW2tleV0sIHJlZik7XG5cdCAgICB9IGVsc2UgaWYgKHJlZnNba2V5XSA9PT0gcmVmKSB7XG5cdCAgICAgIHJlZnNba2V5XSA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKHZub2RlLmRhdGEucmVmSW5Gb3IpIHtcblx0ICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlZnNba2V5XSkpIHtcblx0ICAgICAgICByZWZzW2tleV0gPSBbcmVmXTtcblx0ICAgICAgfSBlbHNlIGlmIChyZWZzW2tleV0uaW5kZXhPZihyZWYpIDwgMCkge1xuXHQgICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgICAgICAgIHJlZnNba2V5XS5wdXNoKHJlZik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlZnNba2V5XSA9IHJlZjtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBWaXJ0dWFsIERPTSBwYXRjaGluZyBhbGdvcml0aG0gYmFzZWQgb24gU25hYmJkb20gYnlcblx0ICogU2ltb24gRnJpaXMgVmluZHVtIChAcGFsZGVwaW5kKVxuXHQgKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2Vcblx0ICogaHR0cHM6Ly9naXRodWIuY29tL3BhbGRlcGluZC9zbmFiYmRvbS9ibG9iL21hc3Rlci9MSUNFTlNFXG5cdCAqXG5cdCAqIG1vZGlmaWVkIGJ5IEV2YW4gWW91IChAeXl4OTkwODAzKVxuXHQgKlxuXHQgKiBOb3QgdHlwZS1jaGVja2luZyB0aGlzIGJlY2F1c2UgdGhpcyBmaWxlIGlzIHBlcmYtY3JpdGljYWwgYW5kIHRoZSBjb3N0XG5cdCAqIG9mIG1ha2luZyBmbG93IHVuZGVyc3RhbmQgaXQgaXMgbm90IHdvcnRoIGl0LlxuXHQgKi9cblx0XG5cdHZhciBlbXB0eU5vZGUgPSBuZXcgVk5vZGUoJycsIHt9LCBbXSk7XG5cdFxuXHR2YXIgaG9va3MgPSBbJ2NyZWF0ZScsICdhY3RpdmF0ZScsICd1cGRhdGUnLCAncmVtb3ZlJywgJ2Rlc3Ryb3knXTtcblx0XG5cdGZ1bmN0aW9uIHNhbWVWbm9kZSAoYSwgYikge1xuXHQgIHJldHVybiAoXG5cdCAgICBhLmtleSA9PT0gYi5rZXkgJiYgKFxuXHQgICAgICAoXG5cdCAgICAgICAgYS50YWcgPT09IGIudGFnICYmXG5cdCAgICAgICAgYS5pc0NvbW1lbnQgPT09IGIuaXNDb21tZW50ICYmXG5cdCAgICAgICAgaXNEZWYoYS5kYXRhKSA9PT0gaXNEZWYoYi5kYXRhKSAmJlxuXHQgICAgICAgIHNhbWVJbnB1dFR5cGUoYSwgYilcblx0ICAgICAgKSB8fCAoXG5cdCAgICAgICAgaXNUcnVlKGEuaXNBc3luY1BsYWNlaG9sZGVyKSAmJlxuXHQgICAgICAgIGEuYXN5bmNGYWN0b3J5ID09PSBiLmFzeW5jRmFjdG9yeSAmJlxuXHQgICAgICAgIGlzVW5kZWYoYi5hc3luY0ZhY3RvcnkuZXJyb3IpXG5cdCAgICAgIClcblx0ICAgIClcblx0ICApXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNhbWVJbnB1dFR5cGUgKGEsIGIpIHtcblx0ICBpZiAoYS50YWcgIT09ICdpbnB1dCcpIHsgcmV0dXJuIHRydWUgfVxuXHQgIHZhciBpO1xuXHQgIHZhciB0eXBlQSA9IGlzRGVmKGkgPSBhLmRhdGEpICYmIGlzRGVmKGkgPSBpLmF0dHJzKSAmJiBpLnR5cGU7XG5cdCAgdmFyIHR5cGVCID0gaXNEZWYoaSA9IGIuZGF0YSkgJiYgaXNEZWYoaSA9IGkuYXR0cnMpICYmIGkudHlwZTtcblx0ICByZXR1cm4gdHlwZUEgPT09IHR5cGVCIHx8IGlzVGV4dElucHV0VHlwZSh0eXBlQSkgJiYgaXNUZXh0SW5wdXRUeXBlKHR5cGVCKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVLZXlUb09sZElkeCAoY2hpbGRyZW4sIGJlZ2luSWR4LCBlbmRJZHgpIHtcblx0ICB2YXIgaSwga2V5O1xuXHQgIHZhciBtYXAgPSB7fTtcblx0ICBmb3IgKGkgPSBiZWdpbklkeDsgaSA8PSBlbmRJZHg7ICsraSkge1xuXHQgICAga2V5ID0gY2hpbGRyZW5baV0ua2V5O1xuXHQgICAgaWYgKGlzRGVmKGtleSkpIHsgbWFwW2tleV0gPSBpOyB9XG5cdCAgfVxuXHQgIHJldHVybiBtYXBcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlUGF0Y2hGdW5jdGlvbiAoYmFja2VuZCkge1xuXHQgIHZhciBpLCBqO1xuXHQgIHZhciBjYnMgPSB7fTtcblx0XG5cdCAgdmFyIG1vZHVsZXMgPSBiYWNrZW5kLm1vZHVsZXM7XG5cdCAgdmFyIG5vZGVPcHMgPSBiYWNrZW5kLm5vZGVPcHM7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBob29rcy5sZW5ndGg7ICsraSkge1xuXHQgICAgY2JzW2hvb2tzW2ldXSA9IFtdO1xuXHQgICAgZm9yIChqID0gMDsgaiA8IG1vZHVsZXMubGVuZ3RoOyArK2opIHtcblx0ICAgICAgaWYgKGlzRGVmKG1vZHVsZXNbal1baG9va3NbaV1dKSkge1xuXHQgICAgICAgIGNic1tob29rc1tpXV0ucHVzaChtb2R1bGVzW2pdW2hvb2tzW2ldXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGVtcHR5Tm9kZUF0IChlbG0pIHtcblx0ICAgIHJldHVybiBuZXcgVk5vZGUobm9kZU9wcy50YWdOYW1lKGVsbSkudG9Mb3dlckNhc2UoKSwge30sIFtdLCB1bmRlZmluZWQsIGVsbSlcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNyZWF0ZVJtQ2IgKGNoaWxkRWxtLCBsaXN0ZW5lcnMpIHtcblx0ICAgIGZ1bmN0aW9uIHJlbW92ZSAoKSB7XG5cdCAgICAgIGlmICgtLXJlbW92ZS5saXN0ZW5lcnMgPT09IDApIHtcblx0ICAgICAgICByZW1vdmVOb2RlKGNoaWxkRWxtKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmVtb3ZlLmxpc3RlbmVycyA9IGxpc3RlbmVycztcblx0ICAgIHJldHVybiByZW1vdmVcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlbW92ZU5vZGUgKGVsKSB7XG5cdCAgICB2YXIgcGFyZW50ID0gbm9kZU9wcy5wYXJlbnROb2RlKGVsKTtcblx0ICAgIC8vIGVsZW1lbnQgbWF5IGhhdmUgYWxyZWFkeSBiZWVuIHJlbW92ZWQgZHVlIHRvIHYtaHRtbCAvIHYtdGV4dFxuXHQgICAgaWYgKGlzRGVmKHBhcmVudCkpIHtcblx0ICAgICAgbm9kZU9wcy5yZW1vdmVDaGlsZChwYXJlbnQsIGVsKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzVW5rbm93bkVsZW1lbnQkJDEgKHZub2RlLCBpblZQcmUpIHtcblx0ICAgIHJldHVybiAoXG5cdCAgICAgICFpblZQcmUgJiZcblx0ICAgICAgIXZub2RlLm5zICYmXG5cdCAgICAgICEoXG5cdCAgICAgICAgY29uZmlnLmlnbm9yZWRFbGVtZW50cy5sZW5ndGggJiZcblx0ICAgICAgICBjb25maWcuaWdub3JlZEVsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGlnbm9yZSkge1xuXHQgICAgICAgICAgcmV0dXJuIGlzUmVnRXhwKGlnbm9yZSlcblx0ICAgICAgICAgICAgPyBpZ25vcmUudGVzdCh2bm9kZS50YWcpXG5cdCAgICAgICAgICAgIDogaWdub3JlID09PSB2bm9kZS50YWdcblx0ICAgICAgICB9KVxuXHQgICAgICApICYmXG5cdCAgICAgIGNvbmZpZy5pc1Vua25vd25FbGVtZW50KHZub2RlLnRhZylcblx0ICAgIClcblx0ICB9XG5cdFxuXHQgIHZhciBjcmVhdGluZ0VsbUluVlByZSA9IDA7XG5cdFxuXHQgIGZ1bmN0aW9uIGNyZWF0ZUVsbSAoXG5cdCAgICB2bm9kZSxcblx0ICAgIGluc2VydGVkVm5vZGVRdWV1ZSxcblx0ICAgIHBhcmVudEVsbSxcblx0ICAgIHJlZkVsbSxcblx0ICAgIG5lc3RlZCxcblx0ICAgIG93bmVyQXJyYXksXG5cdCAgICBpbmRleFxuXHQgICkge1xuXHQgICAgaWYgKGlzRGVmKHZub2RlLmVsbSkgJiYgaXNEZWYob3duZXJBcnJheSkpIHtcblx0ICAgICAgLy8gVGhpcyB2bm9kZSB3YXMgdXNlZCBpbiBhIHByZXZpb3VzIHJlbmRlciFcblx0ICAgICAgLy8gbm93IGl0J3MgdXNlZCBhcyBhIG5ldyBub2RlLCBvdmVyd3JpdGluZyBpdHMgZWxtIHdvdWxkIGNhdXNlXG5cdCAgICAgIC8vIHBvdGVudGlhbCBwYXRjaCBlcnJvcnMgZG93biB0aGUgcm9hZCB3aGVuIGl0J3MgdXNlZCBhcyBhbiBpbnNlcnRpb25cblx0ICAgICAgLy8gcmVmZXJlbmNlIG5vZGUuIEluc3RlYWQsIHdlIGNsb25lIHRoZSBub2RlIG9uLWRlbWFuZCBiZWZvcmUgY3JlYXRpbmdcblx0ICAgICAgLy8gYXNzb2NpYXRlZCBET00gZWxlbWVudCBmb3IgaXQuXG5cdCAgICAgIHZub2RlID0gb3duZXJBcnJheVtpbmRleF0gPSBjbG9uZVZOb2RlKHZub2RlKTtcblx0ICAgIH1cblx0XG5cdCAgICB2bm9kZS5pc1Jvb3RJbnNlcnQgPSAhbmVzdGVkOyAvLyBmb3IgdHJhbnNpdGlvbiBlbnRlciBjaGVja1xuXHQgICAgaWYgKGNyZWF0ZUNvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSkpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuXHQgICAgdmFyIGNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG5cdCAgICB2YXIgdGFnID0gdm5vZGUudGFnO1xuXHQgICAgaWYgKGlzRGVmKHRhZykpIHtcblx0ICAgICAge1xuXHQgICAgICAgIGlmIChkYXRhICYmIGRhdGEucHJlKSB7XG5cdCAgICAgICAgICBjcmVhdGluZ0VsbUluVlByZSsrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaXNVbmtub3duRWxlbWVudCQkMSh2bm9kZSwgY3JlYXRpbmdFbG1JblZQcmUpKSB7XG5cdCAgICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgICAnVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArXG5cdCAgICAgICAgICAgICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICtcblx0ICAgICAgICAgICAgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyxcblx0ICAgICAgICAgICAgdm5vZGUuY29udGV4dFxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZub2RlLmVsbSA9IHZub2RlLm5zXG5cdCAgICAgICAgPyBub2RlT3BzLmNyZWF0ZUVsZW1lbnROUyh2bm9kZS5ucywgdGFnKVxuXHQgICAgICAgIDogbm9kZU9wcy5jcmVhdGVFbGVtZW50KHRhZywgdm5vZGUpO1xuXHQgICAgICBzZXRTY29wZSh2bm9kZSk7XG5cdFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAge1xuXHQgICAgICAgIGNyZWF0ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICBpZiAoaXNEZWYoZGF0YSkpIHtcblx0ICAgICAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBkYXRhICYmIGRhdGEucHJlKSB7XG5cdCAgICAgICAgY3JlYXRpbmdFbG1JblZQcmUtLTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1RydWUodm5vZGUuaXNDb21tZW50KSkge1xuXHQgICAgICB2bm9kZS5lbG0gPSBub2RlT3BzLmNyZWF0ZUNvbW1lbnQodm5vZGUudGV4dCk7XG5cdCAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZub2RlLmVsbSA9IG5vZGVPcHMuY3JlYXRlVGV4dE5vZGUodm5vZGUudGV4dCk7XG5cdCAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudCAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pIHtcblx0ICAgIHZhciBpID0gdm5vZGUuZGF0YTtcblx0ICAgIGlmIChpc0RlZihpKSkge1xuXHQgICAgICB2YXIgaXNSZWFjdGl2YXRlZCA9IGlzRGVmKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSAmJiBpLmtlZXBBbGl2ZTtcblx0ICAgICAgaWYgKGlzRGVmKGkgPSBpLmhvb2spICYmIGlzRGVmKGkgPSBpLmluaXQpKSB7XG5cdCAgICAgICAgaSh2bm9kZSwgZmFsc2UgLyogaHlkcmF0aW5nICovLCBwYXJlbnRFbG0sIHJlZkVsbSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gYWZ0ZXIgY2FsbGluZyB0aGUgaW5pdCBob29rLCBpZiB0aGUgdm5vZGUgaXMgYSBjaGlsZCBjb21wb25lbnRcblx0ICAgICAgLy8gaXQgc2hvdWxkJ3ZlIGNyZWF0ZWQgYSBjaGlsZCBpbnN0YW5jZSBhbmQgbW91bnRlZCBpdC4gdGhlIGNoaWxkXG5cdCAgICAgIC8vIGNvbXBvbmVudCBhbHNvIGhhcyBzZXQgdGhlIHBsYWNlaG9sZGVyIHZub2RlJ3MgZWxtLlxuXHQgICAgICAvLyBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3QgcmV0dXJuIHRoZSBlbGVtZW50IGFuZCBiZSBkb25lLlxuXHQgICAgICBpZiAoaXNEZWYodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpKSB7XG5cdCAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICBpZiAoaXNUcnVlKGlzUmVhY3RpdmF0ZWQpKSB7XG5cdCAgICAgICAgICByZWFjdGl2YXRlQ29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRydWVcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW5pdENvbXBvbmVudCAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuXHQgICAgaWYgKGlzRGVmKHZub2RlLmRhdGEucGVuZGluZ0luc2VydCkpIHtcblx0ICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2guYXBwbHkoaW5zZXJ0ZWRWbm9kZVF1ZXVlLCB2bm9kZS5kYXRhLnBlbmRpbmdJbnNlcnQpO1xuXHQgICAgICB2bm9kZS5kYXRhLnBlbmRpbmdJbnNlcnQgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdm5vZGUuZWxtID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJGVsO1xuXHQgICAgaWYgKGlzUGF0Y2hhYmxlKHZub2RlKSkge1xuXHQgICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgc2V0U2NvcGUodm5vZGUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gZW1wdHkgY29tcG9uZW50IHJvb3QuXG5cdCAgICAgIC8vIHNraXAgYWxsIGVsZW1lbnQtcmVsYXRlZCBtb2R1bGVzIGV4Y2VwdCBmb3IgcmVmICgjMzQ1NSlcblx0ICAgICAgcmVnaXN0ZXJSZWYodm5vZGUpO1xuXHQgICAgICAvLyBtYWtlIHN1cmUgdG8gaW52b2tlIHRoZSBpbnNlcnQgaG9va1xuXHQgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZWFjdGl2YXRlQ29tcG9uZW50ICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuXHQgICAgdmFyIGk7XG5cdCAgICAvLyBoYWNrIGZvciAjNDMzOTogYSByZWFjdGl2YXRlZCBjb21wb25lbnQgd2l0aCBpbm5lciB0cmFuc2l0aW9uXG5cdCAgICAvLyBkb2VzIG5vdCB0cmlnZ2VyIGJlY2F1c2UgdGhlIGlubmVyIG5vZGUncyBjcmVhdGVkIGhvb2tzIGFyZSBub3QgY2FsbGVkXG5cdCAgICAvLyBhZ2Fpbi4gSXQncyBub3QgaWRlYWwgdG8gaW52b2x2ZSBtb2R1bGUtc3BlY2lmaWMgbG9naWMgaW4gaGVyZSBidXRcblx0ICAgIC8vIHRoZXJlIGRvZXNuJ3Qgc2VlbSB0byBiZSBhIGJldHRlciB3YXkgdG8gZG8gaXQuXG5cdCAgICB2YXIgaW5uZXJOb2RlID0gdm5vZGU7XG5cdCAgICB3aGlsZSAoaW5uZXJOb2RlLmNvbXBvbmVudEluc3RhbmNlKSB7XG5cdCAgICAgIGlubmVyTm9kZSA9IGlubmVyTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG5cdCAgICAgIGlmIChpc0RlZihpID0gaW5uZXJOb2RlLmRhdGEpICYmIGlzRGVmKGkgPSBpLnRyYW5zaXRpb24pKSB7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5hY3RpdmF0ZS5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgICAgY2JzLmFjdGl2YXRlW2ldKGVtcHR5Tm9kZSwgaW5uZXJOb2RlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2goaW5uZXJOb2RlKTtcblx0ICAgICAgICBicmVha1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyB1bmxpa2UgYSBuZXdseSBjcmVhdGVkIGNvbXBvbmVudCxcblx0ICAgIC8vIGEgcmVhY3RpdmF0ZWQga2VlcC1hbGl2ZSBjb21wb25lbnQgZG9lc24ndCBpbnNlcnQgaXRzZWxmXG5cdCAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnNlcnQgKHBhcmVudCwgZWxtLCByZWYkJDEpIHtcblx0ICAgIGlmIChpc0RlZihwYXJlbnQpKSB7XG5cdCAgICAgIGlmIChpc0RlZihyZWYkJDEpKSB7XG5cdCAgICAgICAgaWYgKHJlZiQkMS5wYXJlbnROb2RlID09PSBwYXJlbnQpIHtcblx0ICAgICAgICAgIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudCwgZWxtLCByZWYkJDEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBub2RlT3BzLmFwcGVuZENoaWxkKHBhcmVudCwgZWxtKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlQ2hpbGRyZW4gKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcblx0ICAgICAge1xuXHQgICAgICAgIGNoZWNrRHVwbGljYXRlS2V5cyhjaGlsZHJlbik7XG5cdCAgICAgIH1cblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgIGNyZWF0ZUVsbShjaGlsZHJlbltpXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCB2bm9kZS5lbG0sIG51bGwsIHRydWUsIGNoaWxkcmVuLCBpKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1ByaW1pdGl2ZSh2bm9kZS50ZXh0KSkge1xuXHQgICAgICBub2RlT3BzLmFwcGVuZENoaWxkKHZub2RlLmVsbSwgbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZShTdHJpbmcodm5vZGUudGV4dCkpKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzUGF0Y2hhYmxlICh2bm9kZSkge1xuXHQgICAgd2hpbGUgKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSB7XG5cdCAgICAgIHZub2RlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGlzRGVmKHZub2RlLnRhZylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUNyZWF0ZUhvb2tzICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG5cdCAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjYnMuY3JlYXRlLmxlbmd0aDsgKytpJDEpIHtcblx0ICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgdm5vZGUpO1xuXHQgICAgfVxuXHQgICAgaSA9IHZub2RlLmRhdGEuaG9vazsgLy8gUmV1c2UgdmFyaWFibGVcblx0ICAgIGlmIChpc0RlZihpKSkge1xuXHQgICAgICBpZiAoaXNEZWYoaS5jcmVhdGUpKSB7IGkuY3JlYXRlKGVtcHR5Tm9kZSwgdm5vZGUpOyB9XG5cdCAgICAgIGlmIChpc0RlZihpLmluc2VydCkpIHsgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2godm5vZGUpOyB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBzZXQgc2NvcGUgaWQgYXR0cmlidXRlIGZvciBzY29wZWQgQ1NTLlxuXHQgIC8vIHRoaXMgaXMgaW1wbGVtZW50ZWQgYXMgYSBzcGVjaWFsIGNhc2UgdG8gYXZvaWQgdGhlIG92ZXJoZWFkXG5cdCAgLy8gb2YgZ29pbmcgdGhyb3VnaCB0aGUgbm9ybWFsIGF0dHJpYnV0ZSBwYXRjaGluZyBwcm9jZXNzLlxuXHQgIGZ1bmN0aW9uIHNldFNjb3BlICh2bm9kZSkge1xuXHQgICAgdmFyIGk7XG5cdCAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmZuU2NvcGVJZCkpIHtcblx0ICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgYW5jZXN0b3IgPSB2bm9kZTtcblx0ICAgICAgd2hpbGUgKGFuY2VzdG9yKSB7XG5cdCAgICAgICAgaWYgKGlzRGVmKGkgPSBhbmNlc3Rvci5jb250ZXh0KSAmJiBpc0RlZihpID0gaS4kb3B0aW9ucy5fc2NvcGVJZCkpIHtcblx0ICAgICAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gZm9yIHNsb3QgY29udGVudCB0aGV5IHNob3VsZCBhbHNvIGdldCB0aGUgc2NvcGVJZCBmcm9tIHRoZSBob3N0IGluc3RhbmNlLlxuXHQgICAgaWYgKGlzRGVmKGkgPSBhY3RpdmVJbnN0YW5jZSkgJiZcblx0ICAgICAgaSAhPT0gdm5vZGUuY29udGV4dCAmJlxuXHQgICAgICBpICE9PSB2bm9kZS5mbkNvbnRleHQgJiZcblx0ICAgICAgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpXG5cdCAgICApIHtcblx0ICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBhZGRWbm9kZXMgKHBhcmVudEVsbSwgcmVmRWxtLCB2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuXHQgICAgZm9yICg7IHN0YXJ0SWR4IDw9IGVuZElkeDsgKytzdGFydElkeCkge1xuXHQgICAgICBjcmVhdGVFbG0odm5vZGVzW3N0YXJ0SWR4XSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSwgZmFsc2UsIHZub2Rlcywgc3RhcnRJZHgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW52b2tlRGVzdHJveUhvb2sgKHZub2RlKSB7XG5cdCAgICB2YXIgaSwgajtcblx0ICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcblx0ICAgIGlmIChpc0RlZihkYXRhKSkge1xuXHQgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuZGVzdHJveSkpIHsgaSh2bm9kZSk7IH1cblx0ICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKSB7IGNicy5kZXN0cm95W2ldKHZub2RlKTsgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jaGlsZHJlbikpIHtcblx0ICAgICAgZm9yIChqID0gMDsgaiA8IHZub2RlLmNoaWxkcmVuLmxlbmd0aDsgKytqKSB7XG5cdCAgICAgICAgaW52b2tlRGVzdHJveUhvb2sodm5vZGUuY2hpbGRyZW5bal0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1vdmVWbm9kZXMgKHBhcmVudEVsbSwgdm5vZGVzLCBzdGFydElkeCwgZW5kSWR4KSB7XG5cdCAgICBmb3IgKDsgc3RhcnRJZHggPD0gZW5kSWR4OyArK3N0YXJ0SWR4KSB7XG5cdCAgICAgIHZhciBjaCA9IHZub2Rlc1tzdGFydElkeF07XG5cdCAgICAgIGlmIChpc0RlZihjaCkpIHtcblx0ICAgICAgICBpZiAoaXNEZWYoY2gudGFnKSkge1xuXHQgICAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhjaCk7XG5cdCAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayhjaCk7XG5cdCAgICAgICAgfSBlbHNlIHsgLy8gVGV4dCBub2RlXG5cdCAgICAgICAgICByZW1vdmVOb2RlKGNoLmVsbSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rICh2bm9kZSwgcm0pIHtcblx0ICAgIGlmIChpc0RlZihybSkgfHwgaXNEZWYodm5vZGUuZGF0YSkpIHtcblx0ICAgICAgdmFyIGk7XG5cdCAgICAgIHZhciBsaXN0ZW5lcnMgPSBjYnMucmVtb3ZlLmxlbmd0aCArIDE7XG5cdCAgICAgIGlmIChpc0RlZihybSkpIHtcblx0ICAgICAgICAvLyB3ZSBoYXZlIGEgcmVjdXJzaXZlbHkgcGFzc2VkIGRvd24gcm0gY2FsbGJhY2tcblx0ICAgICAgICAvLyBpbmNyZWFzZSB0aGUgbGlzdGVuZXJzIGNvdW50XG5cdCAgICAgICAgcm0ubGlzdGVuZXJzICs9IGxpc3RlbmVycztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBkaXJlY3RseSByZW1vdmluZ1xuXHQgICAgICAgIHJtID0gY3JlYXRlUm1DYih2bm9kZS5lbG0sIGxpc3RlbmVycyk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gcmVjdXJzaXZlbHkgaW52b2tlIGhvb2tzIG9uIGNoaWxkIGNvbXBvbmVudCByb290IG5vZGVcblx0ICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgJiYgaXNEZWYoaSA9IGkuX3Zub2RlKSAmJiBpc0RlZihpLmRhdGEpKSB7XG5cdCAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhpLCBybSk7XG5cdCAgICAgIH1cblx0ICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5yZW1vdmUubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgICBjYnMucmVtb3ZlW2ldKHZub2RlLCBybSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5kYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnJlbW92ZSkpIHtcblx0ICAgICAgICBpKHZub2RlLCBybSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcm0oKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVtb3ZlTm9kZSh2bm9kZS5lbG0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRyZW4gKHBhcmVudEVsbSwgb2xkQ2gsIG5ld0NoLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpIHtcblx0ICAgIHZhciBvbGRTdGFydElkeCA9IDA7XG5cdCAgICB2YXIgbmV3U3RhcnRJZHggPSAwO1xuXHQgICAgdmFyIG9sZEVuZElkeCA9IG9sZENoLmxlbmd0aCAtIDE7XG5cdCAgICB2YXIgb2xkU3RhcnRWbm9kZSA9IG9sZENoWzBdO1xuXHQgICAgdmFyIG9sZEVuZFZub2RlID0gb2xkQ2hbb2xkRW5kSWR4XTtcblx0ICAgIHZhciBuZXdFbmRJZHggPSBuZXdDaC5sZW5ndGggLSAxO1xuXHQgICAgdmFyIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFswXTtcblx0ICAgIHZhciBuZXdFbmRWbm9kZSA9IG5ld0NoW25ld0VuZElkeF07XG5cdCAgICB2YXIgb2xkS2V5VG9JZHgsIGlkeEluT2xkLCB2bm9kZVRvTW92ZSwgcmVmRWxtO1xuXHRcblx0ICAgIC8vIHJlbW92ZU9ubHkgaXMgYSBzcGVjaWFsIGZsYWcgdXNlZCBvbmx5IGJ5IDx0cmFuc2l0aW9uLWdyb3VwPlxuXHQgICAgLy8gdG8gZW5zdXJlIHJlbW92ZWQgZWxlbWVudHMgc3RheSBpbiBjb3JyZWN0IHJlbGF0aXZlIHBvc2l0aW9uc1xuXHQgICAgLy8gZHVyaW5nIGxlYXZpbmcgdHJhbnNpdGlvbnNcblx0ICAgIHZhciBjYW5Nb3ZlID0gIXJlbW92ZU9ubHk7XG5cdFxuXHQgICAge1xuXHQgICAgICBjaGVja0R1cGxpY2F0ZUtleXMobmV3Q2gpO1xuXHQgICAgfVxuXHRcblx0ICAgIHdoaWxlIChvbGRTdGFydElkeCA8PSBvbGRFbmRJZHggJiYgbmV3U3RhcnRJZHggPD0gbmV3RW5kSWR4KSB7XG5cdCAgICAgIGlmIChpc1VuZGVmKG9sZFN0YXJ0Vm5vZGUpKSB7XG5cdCAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdOyAvLyBWbm9kZSBoYXMgYmVlbiBtb3ZlZCBsZWZ0XG5cdCAgICAgIH0gZWxzZSBpZiAoaXNVbmRlZihvbGRFbmRWbm9kZSkpIHtcblx0ICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcblx0ICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSkpIHtcblx0ICAgICAgICBwYXRjaFZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdO1xuXHQgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcblx0ICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlKSkge1xuXHQgICAgICAgIHBhdGNoVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuXHQgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuXHQgICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgcmlnaHRcblx0ICAgICAgICBwYXRjaFZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld0VuZFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIGNhbk1vdmUgJiYgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgbm9kZU9wcy5uZXh0U2libGluZyhvbGRFbmRWbm9kZS5lbG0pKTtcblx0ICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07XG5cdCAgICAgICAgbmV3RW5kVm5vZGUgPSBuZXdDaFstLW5ld0VuZElkeF07XG5cdCAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZEVuZFZub2RlLCBuZXdTdGFydFZub2RlKSkgeyAvLyBWbm9kZSBtb3ZlZCBsZWZ0XG5cdCAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgb2xkRW5kVm5vZGUuZWxtLCBvbGRTdGFydFZub2RlLmVsbSk7XG5cdCAgICAgICAgb2xkRW5kVm5vZGUgPSBvbGRDaFstLW9sZEVuZElkeF07XG5cdCAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChpc1VuZGVmKG9sZEtleVRvSWR4KSkgeyBvbGRLZXlUb0lkeCA9IGNyZWF0ZUtleVRvT2xkSWR4KG9sZENoLCBvbGRTdGFydElkeCwgb2xkRW5kSWR4KTsgfVxuXHQgICAgICAgIGlkeEluT2xkID0gaXNEZWYobmV3U3RhcnRWbm9kZS5rZXkpXG5cdCAgICAgICAgICA/IG9sZEtleVRvSWR4W25ld1N0YXJ0Vm5vZGUua2V5XVxuXHQgICAgICAgICAgOiBmaW5kSWR4SW5PbGQobmV3U3RhcnRWbm9kZSwgb2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpO1xuXHQgICAgICAgIGlmIChpc1VuZGVmKGlkeEluT2xkKSkgeyAvLyBOZXcgZWxlbWVudFxuXHQgICAgICAgICAgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgZmFsc2UsIG5ld0NoLCBuZXdTdGFydElkeCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZub2RlVG9Nb3ZlID0gb2xkQ2hbaWR4SW5PbGRdO1xuXHQgICAgICAgICAgaWYgKHNhbWVWbm9kZSh2bm9kZVRvTW92ZSwgbmV3U3RhcnRWbm9kZSkpIHtcblx0ICAgICAgICAgICAgcGF0Y2hWbm9kZSh2bm9kZVRvTW92ZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICAgICAgb2xkQ2hbaWR4SW5PbGRdID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgdm5vZGVUb01vdmUuZWxtLCBvbGRTdGFydFZub2RlLmVsbSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBzYW1lIGtleSBidXQgZGlmZmVyZW50IGVsZW1lbnQuIHRyZWF0IGFzIG5ldyBlbGVtZW50XG5cdCAgICAgICAgICAgIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIGZhbHNlLCBuZXdDaCwgbmV3U3RhcnRJZHgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChvbGRTdGFydElkeCA+IG9sZEVuZElkeCkge1xuXHQgICAgICByZWZFbG0gPSBpc1VuZGVmKG5ld0NoW25ld0VuZElkeCArIDFdKSA/IG51bGwgOiBuZXdDaFtuZXdFbmRJZHggKyAxXS5lbG07XG5cdCAgICAgIGFkZFZub2RlcyhwYXJlbnRFbG0sIHJlZkVsbSwgbmV3Q2gsIG5ld1N0YXJ0SWR4LCBuZXdFbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKG5ld1N0YXJ0SWR4ID4gbmV3RW5kSWR4KSB7XG5cdCAgICAgIHJlbW92ZVZub2RlcyhwYXJlbnRFbG0sIG9sZENoLCBvbGRTdGFydElkeCwgb2xkRW5kSWR4KTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNoZWNrRHVwbGljYXRlS2V5cyAoY2hpbGRyZW4pIHtcblx0ICAgIHZhciBzZWVuS2V5cyA9IHt9O1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgdm5vZGUgPSBjaGlsZHJlbltpXTtcblx0ICAgICAgdmFyIGtleSA9IHZub2RlLmtleTtcblx0ICAgICAgaWYgKGlzRGVmKGtleSkpIHtcblx0ICAgICAgICBpZiAoc2VlbktleXNba2V5XSkge1xuXHQgICAgICAgICAgd2Fybihcblx0ICAgICAgICAgICAgKFwiRHVwbGljYXRlIGtleXMgZGV0ZWN0ZWQ6ICdcIiArIGtleSArIFwiJy4gVGhpcyBtYXkgY2F1c2UgYW4gdXBkYXRlIGVycm9yLlwiKSxcblx0ICAgICAgICAgICAgdm5vZGUuY29udGV4dFxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc2VlbktleXNba2V5XSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmaW5kSWR4SW5PbGQgKG5vZGUsIG9sZENoLCBzdGFydCwgZW5kKSB7XG5cdCAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuXHQgICAgICB2YXIgYyA9IG9sZENoW2ldO1xuXHQgICAgICBpZiAoaXNEZWYoYykgJiYgc2FtZVZub2RlKG5vZGUsIGMpKSB7IHJldHVybiBpIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHBhdGNoVm5vZGUgKG9sZFZub2RlLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCByZW1vdmVPbmx5KSB7XG5cdCAgICBpZiAob2xkVm5vZGUgPT09IHZub2RlKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBlbG0gPSB2bm9kZS5lbG0gPSBvbGRWbm9kZS5lbG07XG5cdFxuXHQgICAgaWYgKGlzVHJ1ZShvbGRWbm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIpKSB7XG5cdCAgICAgIGlmIChpc0RlZih2bm9kZS5hc3luY0ZhY3RvcnkucmVzb2x2ZWQpKSB7XG5cdCAgICAgICAgaHlkcmF0ZShvbGRWbm9kZS5lbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZub2RlLmlzQXN5bmNQbGFjZWhvbGRlciA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcmV1c2UgZWxlbWVudCBmb3Igc3RhdGljIHRyZWVzLlxuXHQgICAgLy8gbm90ZSB3ZSBvbmx5IGRvIHRoaXMgaWYgdGhlIHZub2RlIGlzIGNsb25lZCAtXG5cdCAgICAvLyBpZiB0aGUgbmV3IG5vZGUgaXMgbm90IGNsb25lZCBpdCBtZWFucyB0aGUgcmVuZGVyIGZ1bmN0aW9ucyBoYXZlIGJlZW5cblx0ICAgIC8vIHJlc2V0IGJ5IHRoZSBob3QtcmVsb2FkLWFwaSBhbmQgd2UgbmVlZCB0byBkbyBhIHByb3BlciByZS1yZW5kZXIuXG5cdCAgICBpZiAoaXNUcnVlKHZub2RlLmlzU3RhdGljKSAmJlxuXHQgICAgICBpc1RydWUob2xkVm5vZGUuaXNTdGF0aWMpICYmXG5cdCAgICAgIHZub2RlLmtleSA9PT0gb2xkVm5vZGUua2V5ICYmXG5cdCAgICAgIChpc1RydWUodm5vZGUuaXNDbG9uZWQpIHx8IGlzVHJ1ZSh2bm9kZS5pc09uY2UpKVxuXHQgICAgKSB7XG5cdCAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gb2xkVm5vZGUuY29tcG9uZW50SW5zdGFuY2U7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpO1xuXHQgICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuXHQgICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnByZXBhdGNoKSkge1xuXHQgICAgICBpKG9sZFZub2RlLCB2bm9kZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG9sZENoID0gb2xkVm5vZGUuY2hpbGRyZW47XG5cdCAgICB2YXIgY2ggPSB2bm9kZS5jaGlsZHJlbjtcblx0ICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc1BhdGNoYWJsZSh2bm9kZSkpIHtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IGNicy51cGRhdGUubGVuZ3RoOyArK2kpIHsgY2JzLnVwZGF0ZVtpXShvbGRWbm9kZSwgdm5vZGUpOyB9XG5cdCAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS51cGRhdGUpKSB7IGkob2xkVm5vZGUsIHZub2RlKTsgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzVW5kZWYodm5vZGUudGV4dCkpIHtcblx0ICAgICAgaWYgKGlzRGVmKG9sZENoKSAmJiBpc0RlZihjaCkpIHtcblx0ICAgICAgICBpZiAob2xkQ2ggIT09IGNoKSB7IHVwZGF0ZUNoaWxkcmVuKGVsbSwgb2xkQ2gsIGNoLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpOyB9XG5cdCAgICAgIH0gZWxzZSBpZiAoaXNEZWYoY2gpKSB7XG5cdCAgICAgICAgaWYgKGlzRGVmKG9sZFZub2RlLnRleHQpKSB7IG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7IH1cblx0ICAgICAgICBhZGRWbm9kZXMoZWxtLCBudWxsLCBjaCwgMCwgY2gubGVuZ3RoIC0gMSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgfSBlbHNlIGlmIChpc0RlZihvbGRDaCkpIHtcblx0ICAgICAgICByZW1vdmVWbm9kZXMoZWxtLCBvbGRDaCwgMCwgb2xkQ2gubGVuZ3RoIC0gMSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkVm5vZGUudGV4dCkpIHtcblx0ICAgICAgICBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgJycpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKG9sZFZub2RlLnRleHQgIT09IHZub2RlLnRleHQpIHtcblx0ICAgICAgbm9kZU9wcy5zZXRUZXh0Q29udGVudChlbG0sIHZub2RlLnRleHQpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzRGVmKGRhdGEpKSB7XG5cdCAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5wb3N0cGF0Y2gpKSB7IGkob2xkVm5vZGUsIHZub2RlKTsgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW52b2tlSW5zZXJ0SG9vayAodm5vZGUsIHF1ZXVlLCBpbml0aWFsKSB7XG5cdCAgICAvLyBkZWxheSBpbnNlcnQgaG9va3MgZm9yIGNvbXBvbmVudCByb290IG5vZGVzLCBpbnZva2UgdGhlbSBhZnRlciB0aGVcblx0ICAgIC8vIGVsZW1lbnQgaXMgcmVhbGx5IGluc2VydGVkXG5cdCAgICBpZiAoaXNUcnVlKGluaXRpYWwpICYmIGlzRGVmKHZub2RlLnBhcmVudCkpIHtcblx0ICAgICAgdm5vZGUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydCA9IHF1ZXVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgIHF1ZXVlW2ldLmRhdGEuaG9vay5pbnNlcnQocXVldWVbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgaHlkcmF0aW9uQmFpbGVkID0gZmFsc2U7XG5cdCAgLy8gbGlzdCBvZiBtb2R1bGVzIHRoYXQgY2FuIHNraXAgY3JlYXRlIGhvb2sgZHVyaW5nIGh5ZHJhdGlvbiBiZWNhdXNlIHRoZXlcblx0ICAvLyBhcmUgYWxyZWFkeSByZW5kZXJlZCBvbiB0aGUgY2xpZW50IG9yIGhhcyBubyBuZWVkIGZvciBpbml0aWFsaXphdGlvblxuXHQgIC8vIE5vdGU6IHN0eWxlIGlzIGV4Y2x1ZGVkIGJlY2F1c2UgaXQgcmVsaWVzIG9uIGluaXRpYWwgY2xvbmUgZm9yIGZ1dHVyZVxuXHQgIC8vIGRlZXAgdXBkYXRlcyAoIzcwNjMpLlxuXHQgIHZhciBpc1JlbmRlcmVkTW9kdWxlID0gbWFrZU1hcCgnYXR0cnMsY2xhc3Msc3RhdGljQ2xhc3Msc3RhdGljU3R5bGUsa2V5Jyk7XG5cdFxuXHQgIC8vIE5vdGU6IHRoaXMgaXMgYSBicm93c2VyLW9ubHkgZnVuY3Rpb24gc28gd2UgY2FuIGFzc3VtZSBlbG1zIGFyZSBET00gbm9kZXMuXG5cdCAgZnVuY3Rpb24gaHlkcmF0ZSAoZWxtLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpblZQcmUpIHtcblx0ICAgIHZhciBpO1xuXHQgICAgdmFyIHRhZyA9IHZub2RlLnRhZztcblx0ICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcblx0ICAgIHZhciBjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuXHQgICAgaW5WUHJlID0gaW5WUHJlIHx8IChkYXRhICYmIGRhdGEucHJlKTtcblx0ICAgIHZub2RlLmVsbSA9IGVsbTtcblx0XG5cdCAgICBpZiAoaXNUcnVlKHZub2RlLmlzQ29tbWVudCkgJiYgaXNEZWYodm5vZGUuYXN5bmNGYWN0b3J5KSkge1xuXHQgICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlO1xuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgfVxuXHQgICAgLy8gYXNzZXJ0IG5vZGUgbWF0Y2hcblx0ICAgIHtcblx0ICAgICAgaWYgKCFhc3NlcnROb2RlTWF0Y2goZWxtLCB2bm9kZSwgaW5WUHJlKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNEZWYoZGF0YSkpIHtcblx0ICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLmluaXQpKSB7IGkodm5vZGUsIHRydWUgLyogaHlkcmF0aW5nICovKTsgfVxuXHQgICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuXHQgICAgICAgIC8vIGNoaWxkIGNvbXBvbmVudC4gaXQgc2hvdWxkIGhhdmUgaHlkcmF0ZWQgaXRzIG93biB0cmVlLlxuXHQgICAgICAgIGluaXRDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG5cdCAgICAgICAgcmV0dXJuIHRydWVcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzRGVmKHRhZykpIHtcblx0ICAgICAgaWYgKGlzRGVmKGNoaWxkcmVuKSkge1xuXHQgICAgICAgIC8vIGVtcHR5IGVsZW1lbnQsIGFsbG93IGNsaWVudCB0byBwaWNrIHVwIGFuZCBwb3B1bGF0ZSBjaGlsZHJlblxuXHQgICAgICAgIGlmICghZWxtLmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgICAgICAgY3JlYXRlQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyB2LWh0bWwgYW5kIGRvbVByb3BzOiBpbm5lckhUTUxcblx0ICAgICAgICAgIGlmIChpc0RlZihpID0gZGF0YSkgJiYgaXNEZWYoaSA9IGkuZG9tUHJvcHMpICYmIGlzRGVmKGkgPSBpLmlubmVySFRNTCkpIHtcblx0ICAgICAgICAgICAgaWYgKGkgIT09IGVsbS5pbm5lckhUTUwpIHtcblx0ICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICAgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICAgICAgICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICAgICAgICAgICAgIWh5ZHJhdGlvbkJhaWxlZFxuXHQgICAgICAgICAgICAgICkge1xuXHQgICAgICAgICAgICAgICAgaHlkcmF0aW9uQmFpbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUGFyZW50OiAnLCBlbG0pO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdzZXJ2ZXIgaW5uZXJIVE1MOiAnLCBpKTtcblx0ICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignY2xpZW50IGlubmVySFRNTDogJywgZWxtLmlubmVySFRNTCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBpdGVyYXRlIGFuZCBjb21wYXJlIGNoaWxkcmVuIGxpc3RzXG5cdCAgICAgICAgICAgIHZhciBjaGlsZHJlbk1hdGNoID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdmFyIGNoaWxkTm9kZSA9IGVsbS5maXJzdENoaWxkO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7XG5cdCAgICAgICAgICAgICAgaWYgKCFjaGlsZE5vZGUgfHwgIWh5ZHJhdGUoY2hpbGROb2RlLCBjaGlsZHJlbltpJDFdLCBpbnNlcnRlZFZub2RlUXVldWUsIGluVlByZSkpIHtcblx0ICAgICAgICAgICAgICAgIGNoaWxkcmVuTWF0Y2ggPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5uZXh0U2libGluZztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAvLyBpZiBjaGlsZE5vZGUgaXMgbm90IG51bGwsIGl0IG1lYW5zIHRoZSBhY3R1YWwgY2hpbGROb2RlcyBsaXN0IGlzXG5cdCAgICAgICAgICAgIC8vIGxvbmdlciB0aGFuIHRoZSB2aXJ0dWFsIGNoaWxkcmVuIGxpc3QuXG5cdCAgICAgICAgICAgIGlmICghY2hpbGRyZW5NYXRjaCB8fCBjaGlsZE5vZGUpIHtcblx0ICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICAgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICAgICAgICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICAgICAgICAgICAgIWh5ZHJhdGlvbkJhaWxlZFxuXHQgICAgICAgICAgICAgICkge1xuXHQgICAgICAgICAgICAgICAgaHlkcmF0aW9uQmFpbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUGFyZW50OiAnLCBlbG0pO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNaXNtYXRjaGluZyBjaGlsZE5vZGVzIHZzLiBWTm9kZXM6ICcsIGVsbS5jaGlsZE5vZGVzLCBjaGlsZHJlbik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChpc0RlZihkYXRhKSkge1xuXHQgICAgICAgIHZhciBmdWxsSW52b2tlID0gZmFsc2U7XG5cdCAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcblx0ICAgICAgICAgIGlmICghaXNSZW5kZXJlZE1vZHVsZShrZXkpKSB7XG5cdCAgICAgICAgICAgIGZ1bGxJbnZva2UgPSB0cnVlO1xuXHQgICAgICAgICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcblx0ICAgICAgICAgICAgYnJlYWtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFmdWxsSW52b2tlICYmIGRhdGFbJ2NsYXNzJ10pIHtcblx0ICAgICAgICAgIC8vIGVuc3VyZSBjb2xsZWN0aW5nIGRlcHMgZm9yIGRlZXAgY2xhc3MgYmluZGluZ3MgZm9yIGZ1dHVyZSB1cGRhdGVzXG5cdCAgICAgICAgICB0cmF2ZXJzZShkYXRhWydjbGFzcyddKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoZWxtLmRhdGEgIT09IHZub2RlLnRleHQpIHtcblx0ICAgICAgZWxtLmRhdGEgPSB2bm9kZS50ZXh0O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRydWVcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydE5vZGVNYXRjaCAobm9kZSwgdm5vZGUsIGluVlByZSkge1xuXHQgICAgaWYgKGlzRGVmKHZub2RlLnRhZykpIHtcblx0ICAgICAgcmV0dXJuIHZub2RlLnRhZy5pbmRleE9mKCd2dWUtY29tcG9uZW50JykgPT09IDAgfHwgKFxuXHQgICAgICAgICFpc1Vua25vd25FbGVtZW50JCQxKHZub2RlLCBpblZQcmUpICYmXG5cdCAgICAgICAgdm5vZGUudGFnLnRvTG93ZXJDYXNlKCkgPT09IChub2RlLnRhZ05hbWUgJiYgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAodm5vZGUuaXNDb21tZW50ID8gOCA6IDMpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSwgaHlkcmF0aW5nLCByZW1vdmVPbmx5LCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuXHQgICAgaWYgKGlzVW5kZWYodm5vZGUpKSB7XG5cdCAgICAgIGlmIChpc0RlZihvbGRWbm9kZSkpIHsgaW52b2tlRGVzdHJveUhvb2sob2xkVm5vZGUpOyB9XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpc0luaXRpYWxQYXRjaCA9IGZhbHNlO1xuXHQgICAgdmFyIGluc2VydGVkVm5vZGVRdWV1ZSA9IFtdO1xuXHRcblx0ICAgIGlmIChpc1VuZGVmKG9sZFZub2RlKSkge1xuXHQgICAgICAvLyBlbXB0eSBtb3VudCAobGlrZWx5IGFzIGNvbXBvbmVudCksIGNyZWF0ZSBuZXcgcm9vdCBlbGVtZW50XG5cdCAgICAgIGlzSW5pdGlhbFBhdGNoID0gdHJ1ZTtcblx0ICAgICAgY3JlYXRlRWxtKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBpc1JlYWxFbGVtZW50ID0gaXNEZWYob2xkVm5vZGUubm9kZVR5cGUpO1xuXHQgICAgICBpZiAoIWlzUmVhbEVsZW1lbnQgJiYgc2FtZVZub2RlKG9sZFZub2RlLCB2bm9kZSkpIHtcblx0ICAgICAgICAvLyBwYXRjaCBleGlzdGluZyByb290IG5vZGVcblx0ICAgICAgICBwYXRjaFZub2RlKG9sZFZub2RlLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCByZW1vdmVPbmx5KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoaXNSZWFsRWxlbWVudCkge1xuXHQgICAgICAgICAgLy8gbW91bnRpbmcgdG8gYSByZWFsIGVsZW1lbnRcblx0ICAgICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQgYW5kIGlmIHdlIGNhbiBwZXJmb3JtXG5cdCAgICAgICAgICAvLyBhIHN1Y2Nlc3NmdWwgaHlkcmF0aW9uLlxuXHQgICAgICAgICAgaWYgKG9sZFZub2RlLm5vZGVUeXBlID09PSAxICYmIG9sZFZub2RlLmhhc0F0dHJpYnV0ZShTU1JfQVRUUikpIHtcblx0ICAgICAgICAgICAgb2xkVm5vZGUucmVtb3ZlQXR0cmlidXRlKFNTUl9BVFRSKTtcblx0ICAgICAgICAgICAgaHlkcmF0aW5nID0gdHJ1ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChpc1RydWUoaHlkcmF0aW5nKSkge1xuXHQgICAgICAgICAgICBpZiAoaHlkcmF0ZShvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkpIHtcblx0ICAgICAgICAgICAgICBpbnZva2VJbnNlcnRIb29rKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHRydWUpO1xuXHQgICAgICAgICAgICAgIHJldHVybiBvbGRWbm9kZVxuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAgICAgICAnVGhlIGNsaWVudC1zaWRlIHJlbmRlcmVkIHZpcnR1YWwgRE9NIHRyZWUgaXMgbm90IG1hdGNoaW5nICcgK1xuXHQgICAgICAgICAgICAgICAgJ3NlcnZlci1yZW5kZXJlZCBjb250ZW50LiBUaGlzIGlzIGxpa2VseSBjYXVzZWQgYnkgaW5jb3JyZWN0ICcgK1xuXHQgICAgICAgICAgICAgICAgJ0hUTUwgbWFya3VwLCBmb3IgZXhhbXBsZSBuZXN0aW5nIGJsb2NrLWxldmVsIGVsZW1lbnRzIGluc2lkZSAnICtcblx0ICAgICAgICAgICAgICAgICc8cD4sIG9yIG1pc3NpbmcgPHRib2R5Pi4gQmFpbGluZyBoeWRyYXRpb24gYW5kIHBlcmZvcm1pbmcgJyArXG5cdCAgICAgICAgICAgICAgICAnZnVsbCBjbGllbnQtc2lkZSByZW5kZXIuJ1xuXHQgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIGVpdGhlciBub3Qgc2VydmVyLXJlbmRlcmVkLCBvciBoeWRyYXRpb24gZmFpbGVkLlxuXHQgICAgICAgICAgLy8gY3JlYXRlIGFuIGVtcHR5IG5vZGUgYW5kIHJlcGxhY2UgaXRcblx0ICAgICAgICAgIG9sZFZub2RlID0gZW1wdHlOb2RlQXQob2xkVm5vZGUpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gcmVwbGFjaW5nIGV4aXN0aW5nIGVsZW1lbnRcblx0ICAgICAgICB2YXIgb2xkRWxtID0gb2xkVm5vZGUuZWxtO1xuXHQgICAgICAgIHZhciBwYXJlbnRFbG0kMSA9IG5vZGVPcHMucGFyZW50Tm9kZShvbGRFbG0pO1xuXHRcblx0ICAgICAgICAvLyBjcmVhdGUgbmV3IG5vZGVcblx0ICAgICAgICBjcmVhdGVFbG0oXG5cdCAgICAgICAgICB2bm9kZSxcblx0ICAgICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZSxcblx0ICAgICAgICAgIC8vIGV4dHJlbWVseSByYXJlIGVkZ2UgY2FzZTogZG8gbm90IGluc2VydCBpZiBvbGQgZWxlbWVudCBpcyBpbiBhXG5cdCAgICAgICAgICAvLyBsZWF2aW5nIHRyYW5zaXRpb24uIE9ubHkgaGFwcGVucyB3aGVuIGNvbWJpbmluZyB0cmFuc2l0aW9uICtcblx0ICAgICAgICAgIC8vIGtlZXAtYWxpdmUgKyBIT0NzLiAoIzQ1OTApXG5cdCAgICAgICAgICBvbGRFbG0uX2xlYXZlQ2IgPyBudWxsIDogcGFyZW50RWxtJDEsXG5cdCAgICAgICAgICBub2RlT3BzLm5leHRTaWJsaW5nKG9sZEVsbSlcblx0ICAgICAgICApO1xuXHRcblx0ICAgICAgICAvLyB1cGRhdGUgcGFyZW50IHBsYWNlaG9sZGVyIG5vZGUgZWxlbWVudCwgcmVjdXJzaXZlbHlcblx0ICAgICAgICBpZiAoaXNEZWYodm5vZGUucGFyZW50KSkge1xuXHQgICAgICAgICAgdmFyIGFuY2VzdG9yID0gdm5vZGUucGFyZW50O1xuXHQgICAgICAgICAgdmFyIHBhdGNoYWJsZSA9IGlzUGF0Y2hhYmxlKHZub2RlKTtcblx0ICAgICAgICAgIHdoaWxlIChhbmNlc3Rvcikge1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKSB7XG5cdCAgICAgICAgICAgICAgY2JzLmRlc3Ryb3lbaV0oYW5jZXN0b3IpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGFuY2VzdG9yLmVsbSA9IHZub2RlLmVsbTtcblx0ICAgICAgICAgICAgaWYgKHBhdGNoYWJsZSkge1xuXHQgICAgICAgICAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkge1xuXHQgICAgICAgICAgICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgYW5jZXN0b3IpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAvLyAjNjUxM1xuXHQgICAgICAgICAgICAgIC8vIGludm9rZSBpbnNlcnQgaG9va3MgdGhhdCBtYXkgaGF2ZSBiZWVuIG1lcmdlZCBieSBjcmVhdGUgaG9va3MuXG5cdCAgICAgICAgICAgICAgLy8gZS5nLiBmb3IgZGlyZWN0aXZlcyB0aGF0IHVzZXMgdGhlIFwiaW5zZXJ0ZWRcIiBob29rLlxuXHQgICAgICAgICAgICAgIHZhciBpbnNlcnQgPSBhbmNlc3Rvci5kYXRhLmhvb2suaW5zZXJ0O1xuXHQgICAgICAgICAgICAgIGlmIChpbnNlcnQubWVyZ2VkKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBzdGFydCBhdCBpbmRleCAxIHRvIGF2b2lkIHJlLWludm9raW5nIGNvbXBvbmVudCBtb3VudGVkIGhvb2tcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGkkMiA9IDE7IGkkMiA8IGluc2VydC5mbnMubGVuZ3RoOyBpJDIrKykge1xuXHQgICAgICAgICAgICAgICAgICBpbnNlcnQuZm5zW2kkMl0oKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgcmVnaXN0ZXJSZWYoYW5jZXN0b3IpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gZGVzdHJveSBvbGQgbm9kZVxuXHQgICAgICAgIGlmIChpc0RlZihwYXJlbnRFbG0kMSkpIHtcblx0ICAgICAgICAgIHJlbW92ZVZub2RlcyhwYXJlbnRFbG0kMSwgW29sZFZub2RlXSwgMCwgMCk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc0RlZihvbGRWbm9kZS50YWcpKSB7XG5cdCAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayhvbGRWbm9kZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaW52b2tlSW5zZXJ0SG9vayh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpc0luaXRpYWxQYXRjaCk7XG5cdCAgICByZXR1cm4gdm5vZGUuZWxtXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBkaXJlY3RpdmVzID0ge1xuXHQgIGNyZWF0ZTogdXBkYXRlRGlyZWN0aXZlcyxcblx0ICB1cGRhdGU6IHVwZGF0ZURpcmVjdGl2ZXMsXG5cdCAgZGVzdHJveTogZnVuY3Rpb24gdW5iaW5kRGlyZWN0aXZlcyAodm5vZGUpIHtcblx0ICAgIHVwZGF0ZURpcmVjdGl2ZXModm5vZGUsIGVtcHR5Tm9kZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVEaXJlY3RpdmVzIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICBpZiAob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzIHx8IHZub2RlLmRhdGEuZGlyZWN0aXZlcykge1xuXHQgICAgX3VwZGF0ZShvbGRWbm9kZSwgdm5vZGUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3VwZGF0ZSAob2xkVm5vZGUsIHZub2RlKSB7XG5cdCAgdmFyIGlzQ3JlYXRlID0gb2xkVm5vZGUgPT09IGVtcHR5Tm9kZTtcblx0ICB2YXIgaXNEZXN0cm95ID0gdm5vZGUgPT09IGVtcHR5Tm9kZTtcblx0ICB2YXIgb2xkRGlycyA9IG5vcm1hbGl6ZURpcmVjdGl2ZXMkMShvbGRWbm9kZS5kYXRhLmRpcmVjdGl2ZXMsIG9sZFZub2RlLmNvbnRleHQpO1xuXHQgIHZhciBuZXdEaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKHZub2RlLmRhdGEuZGlyZWN0aXZlcywgdm5vZGUuY29udGV4dCk7XG5cdFxuXHQgIHZhciBkaXJzV2l0aEluc2VydCA9IFtdO1xuXHQgIHZhciBkaXJzV2l0aFBvc3RwYXRjaCA9IFtdO1xuXHRcblx0ICB2YXIga2V5LCBvbGREaXIsIGRpcjtcblx0ICBmb3IgKGtleSBpbiBuZXdEaXJzKSB7XG5cdCAgICBvbGREaXIgPSBvbGREaXJzW2tleV07XG5cdCAgICBkaXIgPSBuZXdEaXJzW2tleV07XG5cdCAgICBpZiAoIW9sZERpcikge1xuXHQgICAgICAvLyBuZXcgZGlyZWN0aXZlLCBiaW5kXG5cdCAgICAgIGNhbGxIb29rJDEoZGlyLCAnYmluZCcsIHZub2RlLCBvbGRWbm9kZSk7XG5cdCAgICAgIGlmIChkaXIuZGVmICYmIGRpci5kZWYuaW5zZXJ0ZWQpIHtcblx0ICAgICAgICBkaXJzV2l0aEluc2VydC5wdXNoKGRpcik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIGV4aXN0aW5nIGRpcmVjdGl2ZSwgdXBkYXRlXG5cdCAgICAgIGRpci5vbGRWYWx1ZSA9IG9sZERpci52YWx1ZTtcblx0ICAgICAgY2FsbEhvb2skMShkaXIsICd1cGRhdGUnLCB2bm9kZSwgb2xkVm5vZGUpO1xuXHQgICAgICBpZiAoZGlyLmRlZiAmJiBkaXIuZGVmLmNvbXBvbmVudFVwZGF0ZWQpIHtcblx0ICAgICAgICBkaXJzV2l0aFBvc3RwYXRjaC5wdXNoKGRpcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChkaXJzV2l0aEluc2VydC5sZW5ndGgpIHtcblx0ICAgIHZhciBjYWxsSW5zZXJ0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY2FsbEhvb2skMShkaXJzV2l0aEluc2VydFtpXSwgJ2luc2VydGVkJywgdm5vZGUsIG9sZFZub2RlKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGlmIChpc0NyZWF0ZSkge1xuXHQgICAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ2luc2VydCcsIGNhbGxJbnNlcnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY2FsbEluc2VydCgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGRpcnNXaXRoUG9zdHBhdGNoLmxlbmd0aCkge1xuXHQgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdwb3N0cGF0Y2gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjYWxsSG9vayQxKGRpcnNXaXRoUG9zdHBhdGNoW2ldLCAnY29tcG9uZW50VXBkYXRlZCcsIHZub2RlLCBvbGRWbm9kZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKCFpc0NyZWF0ZSkge1xuXHQgICAgZm9yIChrZXkgaW4gb2xkRGlycykge1xuXHQgICAgICBpZiAoIW5ld0RpcnNba2V5XSkge1xuXHQgICAgICAgIC8vIG5vIGxvbmdlciBwcmVzZW50LCB1bmJpbmRcblx0ICAgICAgICBjYWxsSG9vayQxKG9sZERpcnNba2V5XSwgJ3VuYmluZCcsIG9sZFZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGVtcHR5TW9kaWZpZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZURpcmVjdGl2ZXMkMSAoXG5cdCAgZGlycyxcblx0ICB2bVxuXHQpIHtcblx0ICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBpZiAoIWRpcnMpIHtcblx0ICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgICAgcmV0dXJuIHJlc1xuXHQgIH1cblx0ICB2YXIgaSwgZGlyO1xuXHQgIGZvciAoaSA9IDA7IGkgPCBkaXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBkaXIgPSBkaXJzW2ldO1xuXHQgICAgaWYgKCFkaXIubW9kaWZpZXJzKSB7XG5cdCAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgICAgICBkaXIubW9kaWZpZXJzID0gZW1wdHlNb2RpZmllcnM7XG5cdCAgICB9XG5cdCAgICByZXNbZ2V0UmF3RGlyTmFtZShkaXIpXSA9IGRpcjtcblx0ICAgIGRpci5kZWYgPSByZXNvbHZlQXNzZXQodm0uJG9wdGlvbnMsICdkaXJlY3RpdmVzJywgZGlyLm5hbWUsIHRydWUpO1xuXHQgIH1cblx0ICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFJhd0Rpck5hbWUgKGRpcikge1xuXHQgIHJldHVybiBkaXIucmF3TmFtZSB8fCAoKGRpci5uYW1lKSArIFwiLlwiICsgKE9iamVjdC5rZXlzKGRpci5tb2RpZmllcnMgfHwge30pLmpvaW4oJy4nKSkpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbGxIb29rJDEgKGRpciwgaG9vaywgdm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpIHtcblx0ICB2YXIgZm4gPSBkaXIuZGVmICYmIGRpci5kZWZbaG9va107XG5cdCAgaWYgKGZuKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBmbih2bm9kZS5lbG0sIGRpciwgdm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICBoYW5kbGVFcnJvcihlLCB2bm9kZS5jb250ZXh0LCAoXCJkaXJlY3RpdmUgXCIgKyAoZGlyLm5hbWUpICsgXCIgXCIgKyBob29rICsgXCIgaG9va1wiKSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgYmFzZU1vZHVsZXMgPSBbXG5cdCAgcmVmLFxuXHQgIGRpcmVjdGl2ZXNcblx0XVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVBdHRycyAob2xkVm5vZGUsIHZub2RlKSB7XG5cdCAgdmFyIG9wdHMgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuXHQgIGlmIChpc0RlZihvcHRzKSAmJiBvcHRzLkN0b3Iub3B0aW9ucy5pbmhlcml0QXR0cnMgPT09IGZhbHNlKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgaWYgKGlzVW5kZWYob2xkVm5vZGUuZGF0YS5hdHRycykgJiYgaXNVbmRlZih2bm9kZS5kYXRhLmF0dHJzKSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHZhciBrZXksIGN1ciwgb2xkO1xuXHQgIHZhciBlbG0gPSB2bm9kZS5lbG07XG5cdCAgdmFyIG9sZEF0dHJzID0gb2xkVm5vZGUuZGF0YS5hdHRycyB8fCB7fTtcblx0ICB2YXIgYXR0cnMgPSB2bm9kZS5kYXRhLmF0dHJzIHx8IHt9O1xuXHQgIC8vIGNsb25lIG9ic2VydmVkIG9iamVjdHMsIGFzIHRoZSB1c2VyIHByb2JhYmx5IHdhbnRzIHRvIG11dGF0ZSBpdFxuXHQgIGlmIChpc0RlZihhdHRycy5fX29iX18pKSB7XG5cdCAgICBhdHRycyA9IHZub2RlLmRhdGEuYXR0cnMgPSBleHRlbmQoe30sIGF0dHJzKTtcblx0ICB9XG5cdFxuXHQgIGZvciAoa2V5IGluIGF0dHJzKSB7XG5cdCAgICBjdXIgPSBhdHRyc1trZXldO1xuXHQgICAgb2xkID0gb2xkQXR0cnNba2V5XTtcblx0ICAgIGlmIChvbGQgIT09IGN1cikge1xuXHQgICAgICBzZXRBdHRyKGVsbSwga2V5LCBjdXIpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyAjNDM5MTogaW4gSUU5LCBzZXR0aW5nIHR5cGUgY2FuIHJlc2V0IHZhbHVlIGZvciBpbnB1dFt0eXBlPXJhZGlvXVxuXHQgIC8vICM2NjY2OiBJRS9FZGdlIGZvcmNlcyBwcm9ncmVzcyB2YWx1ZSBkb3duIHRvIDEgYmVmb3JlIHNldHRpbmcgYSBtYXhcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoKGlzSUUgfHwgaXNFZGdlKSAmJiBhdHRycy52YWx1ZSAhPT0gb2xkQXR0cnMudmFsdWUpIHtcblx0ICAgIHNldEF0dHIoZWxtLCAndmFsdWUnLCBhdHRycy52YWx1ZSk7XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIG9sZEF0dHJzKSB7XG5cdCAgICBpZiAoaXNVbmRlZihhdHRyc1trZXldKSkge1xuXHQgICAgICBpZiAoaXNYbGluayhrZXkpKSB7XG5cdCAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsIGdldFhsaW5rUHJvcChrZXkpKTtcblx0ICAgICAgfSBlbHNlIGlmICghaXNFbnVtZXJhdGVkQXR0cihrZXkpKSB7XG5cdCAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRBdHRyIChlbCwga2V5LCB2YWx1ZSkge1xuXHQgIGlmIChlbC50YWdOYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7XG5cdCAgICBiYXNlU2V0QXR0cihlbCwga2V5LCB2YWx1ZSk7XG5cdCAgfSBlbHNlIGlmIChpc0Jvb2xlYW5BdHRyKGtleSkpIHtcblx0ICAgIC8vIHNldCBhdHRyaWJ1dGUgZm9yIGJsYW5rIHZhbHVlXG5cdCAgICAvLyBlLmcuIDxvcHRpb24gZGlzYWJsZWQ+U2VsZWN0IG9uZTwvb3B0aW9uPlxuXHQgICAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gdGVjaG5pY2FsbHkgYWxsb3dmdWxsc2NyZWVuIGlzIGEgYm9vbGVhbiBhdHRyaWJ1dGUgZm9yIDxpZnJhbWU+LFxuXHQgICAgICAvLyBidXQgRmxhc2ggZXhwZWN0cyBhIHZhbHVlIG9mIFwidHJ1ZVwiIHdoZW4gdXNlZCBvbiA8ZW1iZWQ+IHRhZ1xuXHQgICAgICB2YWx1ZSA9IGtleSA9PT0gJ2FsbG93ZnVsbHNjcmVlbicgJiYgZWwudGFnTmFtZSA9PT0gJ0VNQkVEJ1xuXHQgICAgICAgID8gJ3RydWUnXG5cdCAgICAgICAgOiBrZXk7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzRW51bWVyYXRlZEF0dHIoa2V5KSkge1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkgfHwgdmFsdWUgPT09ICdmYWxzZScgPyAnZmFsc2UnIDogJ3RydWUnKTtcblx0ICB9IGVsc2UgaWYgKGlzWGxpbmsoa2V5KSkge1xuXHQgICAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsIGdldFhsaW5rUHJvcChrZXkpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleSwgdmFsdWUpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBiYXNlU2V0QXR0cihlbCwga2V5LCB2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlU2V0QXR0ciAoZWwsIGtleSwgdmFsdWUpIHtcblx0ICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHtcblx0ICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyAjNzEzODogSUUxMCAmIDExIGZpcmVzIGlucHV0IGV2ZW50IHdoZW4gc2V0dGluZyBwbGFjZWhvbGRlciBvblxuXHQgICAgLy8gPHRleHRhcmVhPi4uLiBibG9jayB0aGUgZmlyc3QgaW5wdXQgZXZlbnQgYW5kIHJlbW92ZSB0aGUgYmxvY2tlclxuXHQgICAgLy8gaW1tZWRpYXRlbHkuXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChcblx0ICAgICAgaXNJRSAmJiAhaXNJRTkgJiZcblx0ICAgICAgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJlxuXHQgICAgICBrZXkgPT09ICdwbGFjZWhvbGRlcicgJiYgIWVsLl9faWVwaFxuXHQgICAgKSB7XG5cdCAgICAgIHZhciBibG9ja2VyID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHQgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYmxvY2tlcik7XG5cdCAgICAgIH07XG5cdCAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYmxvY2tlcik7XG5cdCAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgICAgICBlbC5fX2llcGggPSB0cnVlOyAvKiBJRSBwbGFjZWhvbGRlciBwYXRjaGVkICovXG5cdCAgICB9XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgYXR0cnMgPSB7XG5cdCAgY3JlYXRlOiB1cGRhdGVBdHRycyxcblx0ICB1cGRhdGU6IHVwZGF0ZUF0dHJzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlQ2xhc3MgKG9sZFZub2RlLCB2bm9kZSkge1xuXHQgIHZhciBlbCA9IHZub2RlLmVsbTtcblx0ICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG5cdCAgdmFyIG9sZERhdGEgPSBvbGRWbm9kZS5kYXRhO1xuXHQgIGlmIChcblx0ICAgIGlzVW5kZWYoZGF0YS5zdGF0aWNDbGFzcykgJiZcblx0ICAgIGlzVW5kZWYoZGF0YS5jbGFzcykgJiYgKFxuXHQgICAgICBpc1VuZGVmKG9sZERhdGEpIHx8IChcblx0ICAgICAgICBpc1VuZGVmKG9sZERhdGEuc3RhdGljQ2xhc3MpICYmXG5cdCAgICAgICAgaXNVbmRlZihvbGREYXRhLmNsYXNzKVxuXHQgICAgICApXG5cdCAgICApXG5cdCAgKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHZhciBjbHMgPSBnZW5DbGFzc0ZvclZub2RlKHZub2RlKTtcblx0XG5cdCAgLy8gaGFuZGxlIHRyYW5zaXRpb24gY2xhc3Nlc1xuXHQgIHZhciB0cmFuc2l0aW9uQ2xhc3MgPSBlbC5fdHJhbnNpdGlvbkNsYXNzZXM7XG5cdCAgaWYgKGlzRGVmKHRyYW5zaXRpb25DbGFzcykpIHtcblx0ICAgIGNscyA9IGNvbmNhdChjbHMsIHN0cmluZ2lmeUNsYXNzKHRyYW5zaXRpb25DbGFzcykpO1xuXHQgIH1cblx0XG5cdCAgLy8gc2V0IHRoZSBjbGFzc1xuXHQgIGlmIChjbHMgIT09IGVsLl9wcmV2Q2xhc3MpIHtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuXHQgICAgZWwuX3ByZXZDbGFzcyA9IGNscztcblx0ICB9XG5cdH1cblx0XG5cdHZhciBrbGFzcyA9IHtcblx0ICBjcmVhdGU6IHVwZGF0ZUNsYXNzLFxuXHQgIHVwZGF0ZTogdXBkYXRlQ2xhc3Ncblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgdmFsaWREaXZpc2lvbkNoYXJSRSA9IC9bXFx3KS4rXFwtXyRcXF1dLztcblx0XG5cdGZ1bmN0aW9uIHBhcnNlRmlsdGVycyAoZXhwKSB7XG5cdCAgdmFyIGluU2luZ2xlID0gZmFsc2U7XG5cdCAgdmFyIGluRG91YmxlID0gZmFsc2U7XG5cdCAgdmFyIGluVGVtcGxhdGVTdHJpbmcgPSBmYWxzZTtcblx0ICB2YXIgaW5SZWdleCA9IGZhbHNlO1xuXHQgIHZhciBjdXJseSA9IDA7XG5cdCAgdmFyIHNxdWFyZSA9IDA7XG5cdCAgdmFyIHBhcmVuID0gMDtcblx0ICB2YXIgbGFzdEZpbHRlckluZGV4ID0gMDtcblx0ICB2YXIgYywgcHJldiwgaSwgZXhwcmVzc2lvbiwgZmlsdGVycztcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGV4cC5sZW5ndGg7IGkrKykge1xuXHQgICAgcHJldiA9IGM7XG5cdCAgICBjID0gZXhwLmNoYXJDb2RlQXQoaSk7XG5cdCAgICBpZiAoaW5TaW5nbGUpIHtcblx0ICAgICAgaWYgKGMgPT09IDB4MjcgJiYgcHJldiAhPT0gMHg1QykgeyBpblNpbmdsZSA9IGZhbHNlOyB9XG5cdCAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG5cdCAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIHsgaW5Eb3VibGUgPSBmYWxzZTsgfVxuXHQgICAgfSBlbHNlIGlmIChpblRlbXBsYXRlU3RyaW5nKSB7XG5cdCAgICAgIGlmIChjID09PSAweDYwICYmIHByZXYgIT09IDB4NUMpIHsgaW5UZW1wbGF0ZVN0cmluZyA9IGZhbHNlOyB9XG5cdCAgICB9IGVsc2UgaWYgKGluUmVnZXgpIHtcblx0ICAgICAgaWYgKGMgPT09IDB4MmYgJiYgcHJldiAhPT0gMHg1QykgeyBpblJlZ2V4ID0gZmFsc2U7IH1cblx0ICAgIH0gZWxzZSBpZiAoXG5cdCAgICAgIGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuXHQgICAgICBleHAuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiZcblx0ICAgICAgZXhwLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDICYmXG5cdCAgICAgICFjdXJseSAmJiAhc3F1YXJlICYmICFwYXJlblxuXHQgICAgKSB7XG5cdCAgICAgIGlmIChleHByZXNzaW9uID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXG5cdCAgICAgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG5cdCAgICAgICAgZXhwcmVzc2lvbiA9IGV4cC5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHVzaEZpbHRlcigpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlIDB4MjI6IGluRG91YmxlID0gdHJ1ZTsgYnJlYWsgICAgICAgICAvLyBcIlxuXHQgICAgICAgIGNhc2UgMHgyNzogaW5TaW5nbGUgPSB0cnVlOyBicmVhayAgICAgICAgIC8vICdcblx0ICAgICAgICBjYXNlIDB4NjA6IGluVGVtcGxhdGVTdHJpbmcgPSB0cnVlOyBicmVhayAvLyBgXG5cdCAgICAgICAgY2FzZSAweDI4OiBwYXJlbisrOyBicmVhayAgICAgICAgICAgICAgICAgLy8gKFxuXHQgICAgICAgIGNhc2UgMHgyOTogcGFyZW4tLTsgYnJlYWsgICAgICAgICAgICAgICAgIC8vIClcblx0ICAgICAgICBjYXNlIDB4NUI6IHNxdWFyZSsrOyBicmVhayAgICAgICAgICAgICAgICAvLyBbXG5cdCAgICAgICAgY2FzZSAweDVEOiBzcXVhcmUtLTsgYnJlYWsgICAgICAgICAgICAgICAgLy8gXVxuXHQgICAgICAgIGNhc2UgMHg3QjogY3VybHkrKzsgYnJlYWsgICAgICAgICAgICAgICAgIC8vIHtcblx0ICAgICAgICBjYXNlIDB4N0Q6IGN1cmx5LS07IGJyZWFrICAgICAgICAgICAgICAgICAvLyB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGMgPT09IDB4MmYpIHsgLy8gL1xuXHQgICAgICAgIHZhciBqID0gaSAtIDE7XG5cdCAgICAgICAgdmFyIHAgPSAodm9pZCAwKTtcblx0ICAgICAgICAvLyBmaW5kIGZpcnN0IG5vbi13aGl0ZXNwYWNlIHByZXYgY2hhclxuXHQgICAgICAgIGZvciAoOyBqID49IDA7IGotLSkge1xuXHQgICAgICAgICAgcCA9IGV4cC5jaGFyQXQoaik7XG5cdCAgICAgICAgICBpZiAocCAhPT0gJyAnKSB7IGJyZWFrIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFwIHx8ICF2YWxpZERpdmlzaW9uQ2hhclJFLnRlc3QocCkpIHtcblx0ICAgICAgICAgIGluUmVnZXggPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGV4cHJlc3Npb24gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZXhwcmVzc2lvbiA9IGV4cC5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHtcblx0ICAgIHB1c2hGaWx0ZXIoKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHB1c2hGaWx0ZXIgKCkge1xuXHQgICAgKGZpbHRlcnMgfHwgKGZpbHRlcnMgPSBbXSkpLnB1c2goZXhwLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpKTtcblx0ICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuXHQgIH1cblx0XG5cdCAgaWYgKGZpbHRlcnMpIHtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBmaWx0ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGV4cHJlc3Npb24gPSB3cmFwRmlsdGVyKGV4cHJlc3Npb24sIGZpbHRlcnNbaV0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGV4cHJlc3Npb25cblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JhcEZpbHRlciAoZXhwLCBmaWx0ZXIpIHtcblx0ICB2YXIgaSA9IGZpbHRlci5pbmRleE9mKCcoJyk7XG5cdCAgaWYgKGkgPCAwKSB7XG5cdCAgICAvLyBfZjogcmVzb2x2ZUZpbHRlclxuXHQgICAgcmV0dXJuIChcIl9mKFxcXCJcIiArIGZpbHRlciArIFwiXFxcIikoXCIgKyBleHAgKyBcIilcIilcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIG5hbWUgPSBmaWx0ZXIuc2xpY2UoMCwgaSk7XG5cdCAgICB2YXIgYXJncyA9IGZpbHRlci5zbGljZShpICsgMSk7XG5cdCAgICByZXR1cm4gKFwiX2YoXFxcIlwiICsgbmFtZSArIFwiXFxcIikoXCIgKyBleHAgKyAoYXJncyAhPT0gJyknID8gJywnICsgYXJncyA6IGFyZ3MpKVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBiYXNlV2FybiAobXNnKSB7XG5cdCAgY29uc29sZS5lcnJvcigoXCJbVnVlIGNvbXBpbGVyXTogXCIgKyBtc2cpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGx1Y2tNb2R1bGVGdW5jdGlvbiAoXG5cdCAgbW9kdWxlcyxcblx0ICBrZXlcblx0KSB7XG5cdCAgcmV0dXJuIG1vZHVsZXNcblx0ICAgID8gbW9kdWxlcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG1ba2V5XTsgfSkuZmlsdGVyKGZ1bmN0aW9uIChfKSB7IHJldHVybiBfOyB9KVxuXHQgICAgOiBbXVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRQcm9wIChlbCwgbmFtZSwgdmFsdWUpIHtcblx0ICAoZWwucHJvcHMgfHwgKGVsLnByb3BzID0gW10pKS5wdXNoKHsgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlIH0pO1xuXHQgIGVsLnBsYWluID0gZmFsc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZEF0dHIgKGVsLCBuYW1lLCB2YWx1ZSkge1xuXHQgIChlbC5hdHRycyB8fCAoZWwuYXR0cnMgPSBbXSkpLnB1c2goeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUgfSk7XG5cdCAgZWwucGxhaW4gPSBmYWxzZTtcblx0fVxuXHRcblx0Ly8gYWRkIGEgcmF3IGF0dHIgKHVzZSB0aGlzIGluIHByZVRyYW5zZm9ybXMpXG5cdGZ1bmN0aW9uIGFkZFJhd0F0dHIgKGVsLCBuYW1lLCB2YWx1ZSkge1xuXHQgIGVsLmF0dHJzTWFwW25hbWVdID0gdmFsdWU7XG5cdCAgZWwuYXR0cnNMaXN0LnB1c2goeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZERpcmVjdGl2ZSAoXG5cdCAgZWwsXG5cdCAgbmFtZSxcblx0ICByYXdOYW1lLFxuXHQgIHZhbHVlLFxuXHQgIGFyZyxcblx0ICBtb2RpZmllcnNcblx0KSB7XG5cdCAgKGVsLmRpcmVjdGl2ZXMgfHwgKGVsLmRpcmVjdGl2ZXMgPSBbXSkpLnB1c2goeyBuYW1lOiBuYW1lLCByYXdOYW1lOiByYXdOYW1lLCB2YWx1ZTogdmFsdWUsIGFyZzogYXJnLCBtb2RpZmllcnM6IG1vZGlmaWVycyB9KTtcblx0ICBlbC5wbGFpbiA9IGZhbHNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRIYW5kbGVyIChcblx0ICBlbCxcblx0ICBuYW1lLFxuXHQgIHZhbHVlLFxuXHQgIG1vZGlmaWVycyxcblx0ICBpbXBvcnRhbnQsXG5cdCAgd2FyblxuXHQpIHtcblx0ICBtb2RpZmllcnMgPSBtb2RpZmllcnMgfHwgZW1wdHlPYmplY3Q7XG5cdCAgLy8gd2FybiBwcmV2ZW50IGFuZCBwYXNzaXZlIG1vZGlmaWVyXG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKFxuXHQgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybiAmJlxuXHQgICAgbW9kaWZpZXJzLnByZXZlbnQgJiYgbW9kaWZpZXJzLnBhc3NpdmVcblx0ICApIHtcblx0ICAgIHdhcm4oXG5cdCAgICAgICdwYXNzaXZlIGFuZCBwcmV2ZW50IGNhblxcJ3QgYmUgdXNlZCB0b2dldGhlci4gJyArXG5cdCAgICAgICdQYXNzaXZlIGhhbmRsZXIgY2FuXFwndCBwcmV2ZW50IGRlZmF1bHQgZXZlbnQuJ1xuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIC8vIGNoZWNrIGNhcHR1cmUgbW9kaWZpZXJcblx0ICBpZiAobW9kaWZpZXJzLmNhcHR1cmUpIHtcblx0ICAgIGRlbGV0ZSBtb2RpZmllcnMuY2FwdHVyZTtcblx0ICAgIG5hbWUgPSAnIScgKyBuYW1lOyAvLyBtYXJrIHRoZSBldmVudCBhcyBjYXB0dXJlZFxuXHQgIH1cblx0ICBpZiAobW9kaWZpZXJzLm9uY2UpIHtcblx0ICAgIGRlbGV0ZSBtb2RpZmllcnMub25jZTtcblx0ICAgIG5hbWUgPSAnficgKyBuYW1lOyAvLyBtYXJrIHRoZSBldmVudCBhcyBvbmNlXG5cdCAgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChtb2RpZmllcnMucGFzc2l2ZSkge1xuXHQgICAgZGVsZXRlIG1vZGlmaWVycy5wYXNzaXZlO1xuXHQgICAgbmFtZSA9ICcmJyArIG5hbWU7IC8vIG1hcmsgdGhlIGV2ZW50IGFzIHBhc3NpdmVcblx0ICB9XG5cdFxuXHQgIC8vIG5vcm1hbGl6ZSBjbGljay5yaWdodCBhbmQgY2xpY2subWlkZGxlIHNpbmNlIHRoZXkgZG9uJ3QgYWN0dWFsbHkgZmlyZVxuXHQgIC8vIHRoaXMgaXMgdGVjaG5pY2FsbHkgYnJvd3Nlci1zcGVjaWZpYywgYnV0IGF0IGxlYXN0IGZvciBub3cgYnJvd3NlcnMgYXJlXG5cdCAgLy8gdGhlIG9ubHkgdGFyZ2V0IGVudnMgdGhhdCBoYXZlIHJpZ2h0L21pZGRsZSBjbGlja3MuXG5cdCAgaWYgKG5hbWUgPT09ICdjbGljaycpIHtcblx0ICAgIGlmIChtb2RpZmllcnMucmlnaHQpIHtcblx0ICAgICAgbmFtZSA9ICdjb250ZXh0bWVudSc7XG5cdCAgICAgIGRlbGV0ZSBtb2RpZmllcnMucmlnaHQ7XG5cdCAgICB9IGVsc2UgaWYgKG1vZGlmaWVycy5taWRkbGUpIHtcblx0ICAgICAgbmFtZSA9ICdtb3VzZXVwJztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBldmVudHM7XG5cdCAgaWYgKG1vZGlmaWVycy5uYXRpdmUpIHtcblx0ICAgIGRlbGV0ZSBtb2RpZmllcnMubmF0aXZlO1xuXHQgICAgZXZlbnRzID0gZWwubmF0aXZlRXZlbnRzIHx8IChlbC5uYXRpdmVFdmVudHMgPSB7fSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGV2ZW50cyA9IGVsLmV2ZW50cyB8fCAoZWwuZXZlbnRzID0ge30pO1xuXHQgIH1cblx0XG5cdCAgdmFyIG5ld0hhbmRsZXIgPSB7XG5cdCAgICB2YWx1ZTogdmFsdWUudHJpbSgpXG5cdCAgfTtcblx0ICBpZiAobW9kaWZpZXJzICE9PSBlbXB0eU9iamVjdCkge1xuXHQgICAgbmV3SGFuZGxlci5tb2RpZmllcnMgPSBtb2RpZmllcnM7XG5cdCAgfVxuXHRcblx0ICB2YXIgaGFuZGxlcnMgPSBldmVudHNbbmFtZV07XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoaGFuZGxlcnMpKSB7XG5cdCAgICBpbXBvcnRhbnQgPyBoYW5kbGVycy51bnNoaWZ0KG5ld0hhbmRsZXIpIDogaGFuZGxlcnMucHVzaChuZXdIYW5kbGVyKTtcblx0ICB9IGVsc2UgaWYgKGhhbmRsZXJzKSB7XG5cdCAgICBldmVudHNbbmFtZV0gPSBpbXBvcnRhbnQgPyBbbmV3SGFuZGxlciwgaGFuZGxlcnNdIDogW2hhbmRsZXJzLCBuZXdIYW5kbGVyXTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZXZlbnRzW25hbWVdID0gbmV3SGFuZGxlcjtcblx0ICB9XG5cdFxuXHQgIGVsLnBsYWluID0gZmFsc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEJpbmRpbmdBdHRyIChcblx0ICBlbCxcblx0ICBuYW1lLFxuXHQgIGdldFN0YXRpY1xuXHQpIHtcblx0ICB2YXIgZHluYW1pY1ZhbHVlID1cblx0ICAgIGdldEFuZFJlbW92ZUF0dHIoZWwsICc6JyArIG5hbWUpIHx8XG5cdCAgICBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1iaW5kOicgKyBuYW1lKTtcblx0ICBpZiAoZHluYW1pY1ZhbHVlICE9IG51bGwpIHtcblx0ICAgIHJldHVybiBwYXJzZUZpbHRlcnMoZHluYW1pY1ZhbHVlKVxuXHQgIH0gZWxzZSBpZiAoZ2V0U3RhdGljICE9PSBmYWxzZSkge1xuXHQgICAgdmFyIHN0YXRpY1ZhbHVlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgbmFtZSk7XG5cdCAgICBpZiAoc3RhdGljVmFsdWUgIT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RhdGljVmFsdWUpXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBub3RlOiB0aGlzIG9ubHkgcmVtb3ZlcyB0aGUgYXR0ciBmcm9tIHRoZSBBcnJheSAoYXR0cnNMaXN0KSBzbyB0aGF0IGl0XG5cdC8vIGRvZXNuJ3QgZ2V0IHByb2Nlc3NlZCBieSBwcm9jZXNzQXR0cnMuXG5cdC8vIEJ5IGRlZmF1bHQgaXQgZG9lcyBOT1QgcmVtb3ZlIGl0IGZyb20gdGhlIG1hcCAoYXR0cnNNYXApIGJlY2F1c2UgdGhlIG1hcCBpc1xuXHQvLyBuZWVkZWQgZHVyaW5nIGNvZGVnZW4uXG5cdGZ1bmN0aW9uIGdldEFuZFJlbW92ZUF0dHIgKFxuXHQgIGVsLFxuXHQgIG5hbWUsXG5cdCAgcmVtb3ZlRnJvbU1hcFxuXHQpIHtcblx0ICB2YXIgdmFsO1xuXHQgIGlmICgodmFsID0gZWwuYXR0cnNNYXBbbmFtZV0pICE9IG51bGwpIHtcblx0ICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0O1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBpZiAobGlzdFtpXS5uYW1lID09PSBuYW1lKSB7XG5cdCAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgYnJlYWtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAocmVtb3ZlRnJvbU1hcCkge1xuXHQgICAgZGVsZXRlIGVsLmF0dHJzTWFwW25hbWVdO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0LyoqXG5cdCAqIENyb3NzLXBsYXRmb3JtIGNvZGUgZ2VuZXJhdGlvbiBmb3IgY29tcG9uZW50IHYtbW9kZWxcblx0ICovXG5cdGZ1bmN0aW9uIGdlbkNvbXBvbmVudE1vZGVsIChcblx0ICBlbCxcblx0ICB2YWx1ZSxcblx0ICBtb2RpZmllcnNcblx0KSB7XG5cdCAgdmFyIHJlZiA9IG1vZGlmaWVycyB8fCB7fTtcblx0ICB2YXIgbnVtYmVyID0gcmVmLm51bWJlcjtcblx0ICB2YXIgdHJpbSA9IHJlZi50cmltO1xuXHRcblx0ICB2YXIgYmFzZVZhbHVlRXhwcmVzc2lvbiA9ICckJHYnO1xuXHQgIHZhciB2YWx1ZUV4cHJlc3Npb24gPSBiYXNlVmFsdWVFeHByZXNzaW9uO1xuXHQgIGlmICh0cmltKSB7XG5cdCAgICB2YWx1ZUV4cHJlc3Npb24gPVxuXHQgICAgICBcIih0eXBlb2YgXCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgXCIgPT09ICdzdHJpbmcnXCIgK1xuXHQgICAgICBcIj8gXCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgXCIudHJpbSgpXCIgK1xuXHQgICAgICBcIjogXCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgXCIpXCI7XG5cdCAgfVxuXHQgIGlmIChudW1iZXIpIHtcblx0ICAgIHZhbHVlRXhwcmVzc2lvbiA9IFwiX24oXCIgKyB2YWx1ZUV4cHJlc3Npb24gKyBcIilcIjtcblx0ICB9XG5cdCAgdmFyIGFzc2lnbm1lbnQgPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVFeHByZXNzaW9uKTtcblx0XG5cdCAgZWwubW9kZWwgPSB7XG5cdCAgICB2YWx1ZTogKFwiKFwiICsgdmFsdWUgKyBcIilcIiksXG5cdCAgICBleHByZXNzaW9uOiAoXCJcXFwiXCIgKyB2YWx1ZSArIFwiXFxcIlwiKSxcblx0ICAgIGNhbGxiYWNrOiAoXCJmdW5jdGlvbiAoXCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgXCIpIHtcIiArIGFzc2lnbm1lbnQgKyBcIn1cIilcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3Jvc3MtcGxhdGZvcm0gY29kZWdlbiBoZWxwZXIgZm9yIGdlbmVyYXRpbmcgdi1tb2RlbCB2YWx1ZSBhc3NpZ25tZW50IGNvZGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZW5Bc3NpZ25tZW50Q29kZSAoXG5cdCAgdmFsdWUsXG5cdCAgYXNzaWdubWVudFxuXHQpIHtcblx0ICB2YXIgcmVzID0gcGFyc2VNb2RlbCh2YWx1ZSk7XG5cdCAgaWYgKHJlcy5rZXkgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAodmFsdWUgKyBcIj1cIiArIGFzc2lnbm1lbnQpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAoXCIkc2V0KFwiICsgKHJlcy5leHApICsgXCIsIFwiICsgKHJlcy5rZXkpICsgXCIsIFwiICsgYXNzaWdubWVudCArIFwiKVwiKVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgdi1tb2RlbCBleHByZXNzaW9uIGludG8gYSBiYXNlIHBhdGggYW5kIGEgZmluYWwga2V5IHNlZ21lbnQuXG5cdCAqIEhhbmRsZXMgYm90aCBkb3QtcGF0aCBhbmQgcG9zc2libGUgc3F1YXJlIGJyYWNrZXRzLlxuXHQgKlxuXHQgKiBQb3NzaWJsZSBjYXNlczpcblx0ICpcblx0ICogLSB0ZXN0XG5cdCAqIC0gdGVzdFtrZXldXG5cdCAqIC0gdGVzdFt0ZXN0MVtrZXldXVxuXHQgKiAtIHRlc3RbXCJhXCJdW2tleV1cblx0ICogLSB4eHgudGVzdFthW2FdLnRlc3QxW2tleV1dXG5cdCAqIC0gdGVzdC54eHguYVtcImFzYVwiXVt0ZXN0MVtrZXldXVxuXHQgKlxuXHQgKi9cblx0XG5cdHZhciBsZW47XG5cdHZhciBzdHI7XG5cdHZhciBjaHI7XG5cdHZhciBpbmRleCQxO1xuXHR2YXIgZXhwcmVzc2lvblBvcztcblx0dmFyIGV4cHJlc3Npb25FbmRQb3M7XG5cdFxuXHRcblx0XG5cdGZ1bmN0aW9uIHBhcnNlTW9kZWwgKHZhbCkge1xuXHQgIC8vIEZpeCBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlL3B1bGwvNzczMFxuXHQgIC8vIGFsbG93IHYtbW9kZWw9XCJvYmoudmFsIFwiICh0cmFpbGluZyB3aGl0ZXNwYWNlKVxuXHQgIHZhbCA9IHZhbC50cmltKCk7XG5cdCAgbGVuID0gdmFsLmxlbmd0aDtcblx0XG5cdCAgaWYgKHZhbC5pbmRleE9mKCdbJykgPCAwIHx8IHZhbC5sYXN0SW5kZXhPZignXScpIDwgbGVuIC0gMSkge1xuXHQgICAgaW5kZXgkMSA9IHZhbC5sYXN0SW5kZXhPZignLicpO1xuXHQgICAgaWYgKGluZGV4JDEgPiAtMSkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGV4cDogdmFsLnNsaWNlKDAsIGluZGV4JDEpLFxuXHQgICAgICAgIGtleTogJ1wiJyArIHZhbC5zbGljZShpbmRleCQxICsgMSkgKyAnXCInXG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgZXhwOiB2YWwsXG5cdCAgICAgICAga2V5OiBudWxsXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHN0ciA9IHZhbDtcblx0ICBpbmRleCQxID0gZXhwcmVzc2lvblBvcyA9IGV4cHJlc3Npb25FbmRQb3MgPSAwO1xuXHRcblx0ICB3aGlsZSAoIWVvZigpKSB7XG5cdCAgICBjaHIgPSBuZXh0KCk7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChpc1N0cmluZ1N0YXJ0KGNocikpIHtcblx0ICAgICAgcGFyc2VTdHJpbmcoY2hyKTtcblx0ICAgIH0gZWxzZSBpZiAoY2hyID09PSAweDVCKSB7XG5cdCAgICAgIHBhcnNlQnJhY2tldChjaHIpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIGV4cDogdmFsLnNsaWNlKDAsIGV4cHJlc3Npb25Qb3MpLFxuXHQgICAga2V5OiB2YWwuc2xpY2UoZXhwcmVzc2lvblBvcyArIDEsIGV4cHJlc3Npb25FbmRQb3MpXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBuZXh0ICgpIHtcblx0ICByZXR1cm4gc3RyLmNoYXJDb2RlQXQoKytpbmRleCQxKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBlb2YgKCkge1xuXHQgIHJldHVybiBpbmRleCQxID49IGxlblxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1N0cmluZ1N0YXJ0IChjaHIpIHtcblx0ICByZXR1cm4gY2hyID09PSAweDIyIHx8IGNociA9PT0gMHgyN1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZUJyYWNrZXQgKGNocikge1xuXHQgIHZhciBpbkJyYWNrZXQgPSAxO1xuXHQgIGV4cHJlc3Npb25Qb3MgPSBpbmRleCQxO1xuXHQgIHdoaWxlICghZW9mKCkpIHtcblx0ICAgIGNociA9IG5leHQoKTtcblx0ICAgIGlmIChpc1N0cmluZ1N0YXJ0KGNocikpIHtcblx0ICAgICAgcGFyc2VTdHJpbmcoY2hyKTtcblx0ICAgICAgY29udGludWVcblx0ICAgIH1cblx0ICAgIGlmIChjaHIgPT09IDB4NUIpIHsgaW5CcmFja2V0Kys7IH1cblx0ICAgIGlmIChjaHIgPT09IDB4NUQpIHsgaW5CcmFja2V0LS07IH1cblx0ICAgIGlmIChpbkJyYWNrZXQgPT09IDApIHtcblx0ICAgICAgZXhwcmVzc2lvbkVuZFBvcyA9IGluZGV4JDE7XG5cdCAgICAgIGJyZWFrXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZVN0cmluZyAoY2hyKSB7XG5cdCAgdmFyIHN0cmluZ1F1b3RlID0gY2hyO1xuXHQgIHdoaWxlICghZW9mKCkpIHtcblx0ICAgIGNociA9IG5leHQoKTtcblx0ICAgIGlmIChjaHIgPT09IHN0cmluZ1F1b3RlKSB7XG5cdCAgICAgIGJyZWFrXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciB3YXJuJDE7XG5cdFxuXHQvLyBpbiBzb21lIGNhc2VzLCB0aGUgZXZlbnQgdXNlZCBoYXMgdG8gYmUgZGV0ZXJtaW5lZCBhdCBydW50aW1lXG5cdC8vIHNvIHdlIHVzZWQgc29tZSByZXNlcnZlZCB0b2tlbnMgZHVyaW5nIGNvbXBpbGUuXG5cdHZhciBSQU5HRV9UT0tFTiA9ICdfX3InO1xuXHR2YXIgQ0hFQ0tCT1hfUkFESU9fVE9LRU4gPSAnX19jJztcblx0XG5cdGZ1bmN0aW9uIG1vZGVsIChcblx0ICBlbCxcblx0ICBkaXIsXG5cdCAgX3dhcm5cblx0KSB7XG5cdCAgd2FybiQxID0gX3dhcm47XG5cdCAgdmFyIHZhbHVlID0gZGlyLnZhbHVlO1xuXHQgIHZhciBtb2RpZmllcnMgPSBkaXIubW9kaWZpZXJzO1xuXHQgIHZhciB0YWcgPSBlbC50YWc7XG5cdCAgdmFyIHR5cGUgPSBlbC5hdHRyc01hcC50eXBlO1xuXHRcblx0ICB7XG5cdCAgICAvLyBpbnB1dHMgd2l0aCB0eXBlPVwiZmlsZVwiIGFyZSByZWFkIG9ubHkgYW5kIHNldHRpbmcgdGhlIGlucHV0J3Ncblx0ICAgIC8vIHZhbHVlIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG5cdCAgICBpZiAodGFnID09PSAnaW5wdXQnICYmIHR5cGUgPT09ICdmaWxlJykge1xuXHQgICAgICB3YXJuJDEoXG5cdCAgICAgICAgXCI8XCIgKyAoZWwudGFnKSArIFwiIHYtbW9kZWw9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCIgdHlwZT1cXFwiZmlsZVxcXCI+OlxcblwiICtcblx0ICAgICAgICBcIkZpbGUgaW5wdXRzIGFyZSByZWFkIG9ubHkuIFVzZSBhIHYtb246Y2hhbmdlIGxpc3RlbmVyIGluc3RlYWQuXCJcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChlbC5jb21wb25lbnQpIHtcblx0ICAgIGdlbkNvbXBvbmVudE1vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTtcblx0ICAgIC8vIGNvbXBvbmVudCB2LW1vZGVsIGRvZXNuJ3QgbmVlZCBleHRyYSBydW50aW1lXG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3NlbGVjdCcpIHtcblx0ICAgIGdlblNlbGVjdChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG5cdCAgfSBlbHNlIGlmICh0YWcgPT09ICdpbnB1dCcgJiYgdHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuXHQgICAgZ2VuQ2hlY2tib3hNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG5cdCAgfSBlbHNlIGlmICh0YWcgPT09ICdpbnB1dCcgJiYgdHlwZSA9PT0gJ3JhZGlvJykge1xuXHQgICAgZ2VuUmFkaW9Nb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG5cdCAgfSBlbHNlIGlmICh0YWcgPT09ICdpbnB1dCcgfHwgdGFnID09PSAndGV4dGFyZWEnKSB7XG5cdCAgICBnZW5EZWZhdWx0TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpO1xuXHQgIH0gZWxzZSBpZiAoIWNvbmZpZy5pc1Jlc2VydmVkVGFnKHRhZykpIHtcblx0ICAgIGdlbkNvbXBvbmVudE1vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTtcblx0ICAgIC8vIGNvbXBvbmVudCB2LW1vZGVsIGRvZXNuJ3QgbmVlZCBleHRyYSBydW50aW1lXG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9IGVsc2Uge1xuXHQgICAgd2FybiQxKFxuXHQgICAgICBcIjxcIiArIChlbC50YWcpICsgXCIgdi1tb2RlbD1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIj46IFwiICtcblx0ICAgICAgXCJ2LW1vZGVsIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBlbGVtZW50IHR5cGUuIFwiICtcblx0ICAgICAgJ0lmIHlvdSBhcmUgd29ya2luZyB3aXRoIGNvbnRlbnRlZGl0YWJsZSwgaXRcXCdzIHJlY29tbWVuZGVkIHRvICcgK1xuXHQgICAgICAnd3JhcCBhIGxpYnJhcnkgZGVkaWNhdGVkIGZvciB0aGF0IHB1cnBvc2UgaW5zaWRlIGEgY3VzdG9tIGNvbXBvbmVudC4nXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgLy8gZW5zdXJlIHJ1bnRpbWUgZGlyZWN0aXZlIG1ldGFkYXRhXG5cdCAgcmV0dXJuIHRydWVcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuQ2hlY2tib3hNb2RlbCAoXG5cdCAgZWwsXG5cdCAgdmFsdWUsXG5cdCAgbW9kaWZpZXJzXG5cdCkge1xuXHQgIHZhciBudW1iZXIgPSBtb2RpZmllcnMgJiYgbW9kaWZpZXJzLm51bWJlcjtcblx0ICB2YXIgdmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICd2YWx1ZScpIHx8ICdudWxsJztcblx0ICB2YXIgdHJ1ZVZhbHVlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAndHJ1ZS12YWx1ZScpIHx8ICd0cnVlJztcblx0ICB2YXIgZmFsc2VWYWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2ZhbHNlLXZhbHVlJykgfHwgJ2ZhbHNlJztcblx0ICBhZGRQcm9wKGVsLCAnY2hlY2tlZCcsXG5cdCAgICBcIkFycmF5LmlzQXJyYXkoXCIgKyB2YWx1ZSArIFwiKVwiICtcblx0ICAgIFwiP19pKFwiICsgdmFsdWUgKyBcIixcIiArIHZhbHVlQmluZGluZyArIFwiKT4tMVwiICsgKFxuXHQgICAgICB0cnVlVmFsdWVCaW5kaW5nID09PSAndHJ1ZSdcblx0ICAgICAgICA/IChcIjooXCIgKyB2YWx1ZSArIFwiKVwiKVxuXHQgICAgICAgIDogKFwiOl9xKFwiICsgdmFsdWUgKyBcIixcIiArIHRydWVWYWx1ZUJpbmRpbmcgKyBcIilcIilcblx0ICAgIClcblx0ICApO1xuXHQgIGFkZEhhbmRsZXIoZWwsICdjaGFuZ2UnLFxuXHQgICAgXCJ2YXIgJCRhPVwiICsgdmFsdWUgKyBcIixcIiArXG5cdCAgICAgICAgJyQkZWw9JGV2ZW50LnRhcmdldCwnICtcblx0ICAgICAgICBcIiQkYz0kJGVsLmNoZWNrZWQ/KFwiICsgdHJ1ZVZhbHVlQmluZGluZyArIFwiKTooXCIgKyBmYWxzZVZhbHVlQmluZGluZyArIFwiKTtcIiArXG5cdCAgICAnaWYoQXJyYXkuaXNBcnJheSgkJGEpKXsnICtcblx0ICAgICAgXCJ2YXIgJCR2PVwiICsgKG51bWJlciA/ICdfbignICsgdmFsdWVCaW5kaW5nICsgJyknIDogdmFsdWVCaW5kaW5nKSArIFwiLFwiICtcblx0ICAgICAgICAgICckJGk9X2koJCRhLCQkdik7JyArXG5cdCAgICAgIFwiaWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKFwiICsgKGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCAnJCRhLmNvbmNhdChbJCR2XSknKSkgKyBcIil9XCIgK1xuXHQgICAgICBcImVsc2V7JCRpPi0xJiYoXCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGEuc2xpY2UoMCwkJGkpLmNvbmNhdCgkJGEuc2xpY2UoJCRpKzEpKScpKSArIFwiKX1cIiArXG5cdCAgICBcIn1lbHNle1wiICsgKGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCAnJCRjJykpICsgXCJ9XCIsXG5cdCAgICBudWxsLCB0cnVlXG5cdCAgKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuUmFkaW9Nb2RlbCAoXG5cdCAgZWwsXG5cdCAgdmFsdWUsXG5cdCAgbW9kaWZpZXJzXG5cdCkge1xuXHQgIHZhciBudW1iZXIgPSBtb2RpZmllcnMgJiYgbW9kaWZpZXJzLm51bWJlcjtcblx0ICB2YXIgdmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICd2YWx1ZScpIHx8ICdudWxsJztcblx0ICB2YWx1ZUJpbmRpbmcgPSBudW1iZXIgPyAoXCJfbihcIiArIHZhbHVlQmluZGluZyArIFwiKVwiKSA6IHZhbHVlQmluZGluZztcblx0ICBhZGRQcm9wKGVsLCAnY2hlY2tlZCcsIChcIl9xKFwiICsgdmFsdWUgKyBcIixcIiArIHZhbHVlQmluZGluZyArIFwiKVwiKSk7XG5cdCAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsIGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCB2YWx1ZUJpbmRpbmcpLCBudWxsLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuU2VsZWN0IChcblx0ICBlbCxcblx0ICB2YWx1ZSxcblx0ICBtb2RpZmllcnNcblx0KSB7XG5cdCAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyO1xuXHQgIHZhciBzZWxlY3RlZFZhbCA9IFwiQXJyYXkucHJvdG90eXBlLmZpbHRlclwiICtcblx0ICAgIFwiLmNhbGwoJGV2ZW50LnRhcmdldC5vcHRpb25zLGZ1bmN0aW9uKG8pe3JldHVybiBvLnNlbGVjdGVkfSlcIiArXG5cdCAgICBcIi5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9IFxcXCJfdmFsdWVcXFwiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7XCIgK1xuXHQgICAgXCJyZXR1cm4gXCIgKyAobnVtYmVyID8gJ19uKHZhbCknIDogJ3ZhbCcpICsgXCJ9KVwiO1xuXHRcblx0ICB2YXIgYXNzaWdubWVudCA9ICckZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0nO1xuXHQgIHZhciBjb2RlID0gXCJ2YXIgJCRzZWxlY3RlZFZhbCA9IFwiICsgc2VsZWN0ZWRWYWwgKyBcIjtcIjtcblx0ICBjb2RlID0gY29kZSArIFwiIFwiICsgKGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCBhc3NpZ25tZW50KSk7XG5cdCAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsIGNvZGUsIG51bGwsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5EZWZhdWx0TW9kZWwgKFxuXHQgIGVsLFxuXHQgIHZhbHVlLFxuXHQgIG1vZGlmaWVyc1xuXHQpIHtcblx0ICB2YXIgdHlwZSA9IGVsLmF0dHJzTWFwLnR5cGU7XG5cdFxuXHQgIC8vIHdhcm4gaWYgdi1iaW5kOnZhbHVlIGNvbmZsaWN0cyB3aXRoIHYtbW9kZWxcblx0ICAvLyBleGNlcHQgZm9yIGlucHV0cyB3aXRoIHYtYmluZDp0eXBlXG5cdCAge1xuXHQgICAgdmFyIHZhbHVlJDEgPSBlbC5hdHRyc01hcFsndi1iaW5kOnZhbHVlJ10gfHwgZWwuYXR0cnNNYXBbJzp2YWx1ZSddO1xuXHQgICAgdmFyIHR5cGVCaW5kaW5nID0gZWwuYXR0cnNNYXBbJ3YtYmluZDp0eXBlJ10gfHwgZWwuYXR0cnNNYXBbJzp0eXBlJ107XG5cdCAgICBpZiAodmFsdWUkMSAmJiAhdHlwZUJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGJpbmRpbmcgPSBlbC5hdHRyc01hcFsndi1iaW5kOnZhbHVlJ10gPyAndi1iaW5kOnZhbHVlJyA6ICc6dmFsdWUnO1xuXHQgICAgICB3YXJuJDEoXG5cdCAgICAgICAgYmluZGluZyArIFwiPVxcXCJcIiArIHZhbHVlJDEgKyBcIlxcXCIgY29uZmxpY3RzIHdpdGggdi1tb2RlbCBvbiB0aGUgc2FtZSBlbGVtZW50IFwiICtcblx0ICAgICAgICAnYmVjYXVzZSB0aGUgbGF0dGVyIGFscmVhZHkgZXhwYW5kcyB0byBhIHZhbHVlIGJpbmRpbmcgaW50ZXJuYWxseSdcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciByZWYgPSBtb2RpZmllcnMgfHwge307XG5cdCAgdmFyIGxhenkgPSByZWYubGF6eTtcblx0ICB2YXIgbnVtYmVyID0gcmVmLm51bWJlcjtcblx0ICB2YXIgdHJpbSA9IHJlZi50cmltO1xuXHQgIHZhciBuZWVkQ29tcG9zaXRpb25HdWFyZCA9ICFsYXp5ICYmIHR5cGUgIT09ICdyYW5nZSc7XG5cdCAgdmFyIGV2ZW50ID0gbGF6eVxuXHQgICAgPyAnY2hhbmdlJ1xuXHQgICAgOiB0eXBlID09PSAncmFuZ2UnXG5cdCAgICAgID8gUkFOR0VfVE9LRU5cblx0ICAgICAgOiAnaW5wdXQnO1xuXHRcblx0ICB2YXIgdmFsdWVFeHByZXNzaW9uID0gJyRldmVudC50YXJnZXQudmFsdWUnO1xuXHQgIGlmICh0cmltKSB7XG5cdCAgICB2YWx1ZUV4cHJlc3Npb24gPSBcIiRldmVudC50YXJnZXQudmFsdWUudHJpbSgpXCI7XG5cdCAgfVxuXHQgIGlmIChudW1iZXIpIHtcblx0ICAgIHZhbHVlRXhwcmVzc2lvbiA9IFwiX24oXCIgKyB2YWx1ZUV4cHJlc3Npb24gKyBcIilcIjtcblx0ICB9XG5cdFxuXHQgIHZhciBjb2RlID0gZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIHZhbHVlRXhwcmVzc2lvbik7XG5cdCAgaWYgKG5lZWRDb21wb3NpdGlvbkd1YXJkKSB7XG5cdCAgICBjb2RlID0gXCJpZigkZXZlbnQudGFyZ2V0LmNvbXBvc2luZylyZXR1cm47XCIgKyBjb2RlO1xuXHQgIH1cblx0XG5cdCAgYWRkUHJvcChlbCwgJ3ZhbHVlJywgKFwiKFwiICsgdmFsdWUgKyBcIilcIikpO1xuXHQgIGFkZEhhbmRsZXIoZWwsIGV2ZW50LCBjb2RlLCBudWxsLCB0cnVlKTtcblx0ICBpZiAodHJpbSB8fCBudW1iZXIpIHtcblx0ICAgIGFkZEhhbmRsZXIoZWwsICdibHVyJywgJyRmb3JjZVVwZGF0ZSgpJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIG5vcm1hbGl6ZSB2LW1vZGVsIGV2ZW50IHRva2VucyB0aGF0IGNhbiBvbmx5IGJlIGRldGVybWluZWQgYXQgcnVudGltZS5cblx0Ly8gaXQncyBpbXBvcnRhbnQgdG8gcGxhY2UgdGhlIGV2ZW50IGFzIHRoZSBmaXJzdCBpbiB0aGUgYXJyYXkgYmVjYXVzZVxuXHQvLyB0aGUgd2hvbGUgcG9pbnQgaXMgZW5zdXJpbmcgdGhlIHYtbW9kZWwgY2FsbGJhY2sgZ2V0cyBjYWxsZWQgYmVmb3JlXG5cdC8vIHVzZXItYXR0YWNoZWQgaGFuZGxlcnMuXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50cyAob24pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNEZWYob25bUkFOR0VfVE9LRU5dKSkge1xuXHQgICAgLy8gSUUgaW5wdXRbdHlwZT1yYW5nZV0gb25seSBzdXBwb3J0cyBgY2hhbmdlYCBldmVudFxuXHQgICAgdmFyIGV2ZW50ID0gaXNJRSA/ICdjaGFuZ2UnIDogJ2lucHV0Jztcblx0ICAgIG9uW2V2ZW50XSA9IFtdLmNvbmNhdChvbltSQU5HRV9UT0tFTl0sIG9uW2V2ZW50XSB8fCBbXSk7XG5cdCAgICBkZWxldGUgb25bUkFOR0VfVE9LRU5dO1xuXHQgIH1cblx0ICAvLyBUaGlzIHdhcyBvcmlnaW5hbGx5IGludGVuZGVkIHRvIGZpeCAjNDUyMSBidXQgbm8gbG9uZ2VyIG5lY2Vzc2FyeVxuXHQgIC8vIGFmdGVyIDIuNS4gS2VlcGluZyBpdCBmb3IgYmFja3dhcmRzIGNvbXBhdCB3aXRoIGdlbmVyYXRlZCBjb2RlIGZyb20gPCAyLjRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNEZWYob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dKSkge1xuXHQgICAgb24uY2hhbmdlID0gW10uY29uY2F0KG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXSwgb24uY2hhbmdlIHx8IFtdKTtcblx0ICAgIGRlbGV0ZSBvbltDSEVDS0JPWF9SQURJT19UT0tFTl07XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdGFyZ2V0JDE7XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVPbmNlSGFuZGxlciAoaGFuZGxlciwgZXZlbnQsIGNhcHR1cmUpIHtcblx0ICB2YXIgX3RhcmdldCA9IHRhcmdldCQxOyAvLyBzYXZlIGN1cnJlbnQgdGFyZ2V0IGVsZW1lbnQgaW4gY2xvc3VyZVxuXHQgIHJldHVybiBmdW5jdGlvbiBvbmNlSGFuZGxlciAoKSB7XG5cdCAgICB2YXIgcmVzID0gaGFuZGxlci5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHQgICAgaWYgKHJlcyAhPT0gbnVsbCkge1xuXHQgICAgICByZW1vdmUkMihldmVudCwgb25jZUhhbmRsZXIsIGNhcHR1cmUsIF90YXJnZXQpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkJDEgKFxuXHQgIGV2ZW50LFxuXHQgIGhhbmRsZXIsXG5cdCAgb25jZSQkMSxcblx0ICBjYXB0dXJlLFxuXHQgIHBhc3NpdmVcblx0KSB7XG5cdCAgaGFuZGxlciA9IHdpdGhNYWNyb1Rhc2soaGFuZGxlcik7XG5cdCAgaWYgKG9uY2UkJDEpIHsgaGFuZGxlciA9IGNyZWF0ZU9uY2VIYW5kbGVyKGhhbmRsZXIsIGV2ZW50LCBjYXB0dXJlKTsgfVxuXHQgIHRhcmdldCQxLmFkZEV2ZW50TGlzdGVuZXIoXG5cdCAgICBldmVudCxcblx0ICAgIGhhbmRsZXIsXG5cdCAgICBzdXBwb3J0c1Bhc3NpdmVcblx0ICAgICAgPyB7IGNhcHR1cmU6IGNhcHR1cmUsIHBhc3NpdmU6IHBhc3NpdmUgfVxuXHQgICAgICA6IGNhcHR1cmVcblx0ICApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmUkMiAoXG5cdCAgZXZlbnQsXG5cdCAgaGFuZGxlcixcblx0ICBjYXB0dXJlLFxuXHQgIF90YXJnZXRcblx0KSB7XG5cdCAgKF90YXJnZXQgfHwgdGFyZ2V0JDEpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG5cdCAgICBldmVudCxcblx0ICAgIGhhbmRsZXIuX3dpdGhUYXNrIHx8IGhhbmRsZXIsXG5cdCAgICBjYXB0dXJlXG5cdCAgKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlRE9NTGlzdGVuZXJzIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLm9uKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEub24pKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIG9uID0gdm5vZGUuZGF0YS5vbiB8fCB7fTtcblx0ICB2YXIgb2xkT24gPSBvbGRWbm9kZS5kYXRhLm9uIHx8IHt9O1xuXHQgIHRhcmdldCQxID0gdm5vZGUuZWxtO1xuXHQgIG5vcm1hbGl6ZUV2ZW50cyhvbik7XG5cdCAgdXBkYXRlTGlzdGVuZXJzKG9uLCBvbGRPbiwgYWRkJDEsIHJlbW92ZSQyLCB2bm9kZS5jb250ZXh0KTtcblx0ICB0YXJnZXQkMSA9IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0dmFyIGV2ZW50cyA9IHtcblx0ICBjcmVhdGU6IHVwZGF0ZURPTUxpc3RlbmVycyxcblx0ICB1cGRhdGU6IHVwZGF0ZURPTUxpc3RlbmVyc1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZURPTVByb3BzIChvbGRWbm9kZSwgdm5vZGUpIHtcblx0ICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmRvbVByb3BzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuZG9tUHJvcHMpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIGtleSwgY3VyO1xuXHQgIHZhciBlbG0gPSB2bm9kZS5lbG07XG5cdCAgdmFyIG9sZFByb3BzID0gb2xkVm5vZGUuZGF0YS5kb21Qcm9wcyB8fCB7fTtcblx0ICB2YXIgcHJvcHMgPSB2bm9kZS5kYXRhLmRvbVByb3BzIHx8IHt9O1xuXHQgIC8vIGNsb25lIG9ic2VydmVkIG9iamVjdHMsIGFzIHRoZSB1c2VyIHByb2JhYmx5IHdhbnRzIHRvIG11dGF0ZSBpdFxuXHQgIGlmIChpc0RlZihwcm9wcy5fX29iX18pKSB7XG5cdCAgICBwcm9wcyA9IHZub2RlLmRhdGEuZG9tUHJvcHMgPSBleHRlbmQoe30sIHByb3BzKTtcblx0ICB9XG5cdFxuXHQgIGZvciAoa2V5IGluIG9sZFByb3BzKSB7XG5cdCAgICBpZiAoaXNVbmRlZihwcm9wc1trZXldKSkge1xuXHQgICAgICBlbG1ba2V5XSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBwcm9wcykge1xuXHQgICAgY3VyID0gcHJvcHNba2V5XTtcblx0ICAgIC8vIGlnbm9yZSBjaGlsZHJlbiBpZiB0aGUgbm9kZSBoYXMgdGV4dENvbnRlbnQgb3IgaW5uZXJIVE1MLFxuXHQgICAgLy8gYXMgdGhlc2Ugd2lsbCB0aHJvdyBhd2F5IGV4aXN0aW5nIERPTSBub2RlcyBhbmQgY2F1c2UgcmVtb3ZhbCBlcnJvcnNcblx0ICAgIC8vIG9uIHN1YnNlcXVlbnQgcGF0Y2hlcyAoIzMzNjApXG5cdCAgICBpZiAoa2V5ID09PSAndGV4dENvbnRlbnQnIHx8IGtleSA9PT0gJ2lubmVySFRNTCcpIHtcblx0ICAgICAgaWYgKHZub2RlLmNoaWxkcmVuKSB7IHZub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7IH1cblx0ICAgICAgaWYgKGN1ciA9PT0gb2xkUHJvcHNba2V5XSkgeyBjb250aW51ZSB9XG5cdCAgICAgIC8vICM2NjAxIHdvcmsgYXJvdW5kIENocm9tZSB2ZXJzaW9uIDw9IDU1IGJ1ZyB3aGVyZSBzaW5nbGUgdGV4dE5vZGVcblx0ICAgICAgLy8gcmVwbGFjZWQgYnkgaW5uZXJIVE1ML3RleHRDb250ZW50IHJldGFpbnMgaXRzIHBhcmVudE5vZGUgcHJvcGVydHlcblx0ICAgICAgaWYgKGVsbS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIGVsbS5yZW1vdmVDaGlsZChlbG0uY2hpbGROb2Rlc1swXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoa2V5ID09PSAndmFsdWUnKSB7XG5cdCAgICAgIC8vIHN0b3JlIHZhbHVlIGFzIF92YWx1ZSBhcyB3ZWxsIHNpbmNlXG5cdCAgICAgIC8vIG5vbi1zdHJpbmcgdmFsdWVzIHdpbGwgYmUgc3RyaW5naWZpZWRcblx0ICAgICAgZWxtLl92YWx1ZSA9IGN1cjtcblx0ICAgICAgLy8gYXZvaWQgcmVzZXR0aW5nIGN1cnNvciBwb3NpdGlvbiB3aGVuIHZhbHVlIGlzIHRoZSBzYW1lXG5cdCAgICAgIHZhciBzdHJDdXIgPSBpc1VuZGVmKGN1cikgPyAnJyA6IFN0cmluZyhjdXIpO1xuXHQgICAgICBpZiAoc2hvdWxkVXBkYXRlVmFsdWUoZWxtLCBzdHJDdXIpKSB7XG5cdCAgICAgICAgZWxtLnZhbHVlID0gc3RyQ3VyO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbG1ba2V5XSA9IGN1cjtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIGNoZWNrIHBsYXRmb3Jtcy93ZWIvdXRpbC9hdHRycy5qcyBhY2NlcHRWYWx1ZVxuXHRcblx0XG5cdGZ1bmN0aW9uIHNob3VsZFVwZGF0ZVZhbHVlIChlbG0sIGNoZWNrVmFsKSB7XG5cdCAgcmV0dXJuICghZWxtLmNvbXBvc2luZyAmJiAoXG5cdCAgICBlbG0udGFnTmFtZSA9PT0gJ09QVElPTicgfHxcblx0ICAgIGlzTm90SW5Gb2N1c0FuZERpcnR5KGVsbSwgY2hlY2tWYWwpIHx8XG5cdCAgICBpc0RpcnR5V2l0aE1vZGlmaWVycyhlbG0sIGNoZWNrVmFsKVxuXHQgICkpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzTm90SW5Gb2N1c0FuZERpcnR5IChlbG0sIGNoZWNrVmFsKSB7XG5cdCAgLy8gcmV0dXJuIHRydWUgd2hlbiB0ZXh0Ym94ICgubnVtYmVyIGFuZCAudHJpbSkgbG9zZXMgZm9jdXMgYW5kIGl0cyB2YWx1ZSBpc1xuXHQgIC8vIG5vdCBlcXVhbCB0byB0aGUgdXBkYXRlZCB2YWx1ZVxuXHQgIHZhciBub3RJbkZvY3VzID0gdHJ1ZTtcblx0ICAvLyAjNjE1N1xuXHQgIC8vIHdvcmsgYXJvdW5kIElFIGJ1ZyB3aGVuIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGluIGFuIGlmcmFtZVxuXHQgIHRyeSB7IG5vdEluRm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSBlbG07IH0gY2F0Y2ggKGUpIHt9XG5cdCAgcmV0dXJuIG5vdEluRm9jdXMgJiYgZWxtLnZhbHVlICE9PSBjaGVja1ZhbFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0RpcnR5V2l0aE1vZGlmaWVycyAoZWxtLCBuZXdWYWwpIHtcblx0ICB2YXIgdmFsdWUgPSBlbG0udmFsdWU7XG5cdCAgdmFyIG1vZGlmaWVycyA9IGVsbS5fdk1vZGlmaWVyczsgLy8gaW5qZWN0ZWQgYnkgdi1tb2RlbCBydW50aW1lXG5cdCAgaWYgKGlzRGVmKG1vZGlmaWVycykpIHtcblx0ICAgIGlmIChtb2RpZmllcnMubGF6eSkge1xuXHQgICAgICAvLyBpbnB1dHMgd2l0aCBsYXp5IHNob3VsZCBvbmx5IGJlIHVwZGF0ZWQgd2hlbiBub3QgaW4gZm9jdXNcblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICB9XG5cdCAgICBpZiAobW9kaWZpZXJzLm51bWJlcikge1xuXHQgICAgICByZXR1cm4gdG9OdW1iZXIodmFsdWUpICE9PSB0b051bWJlcihuZXdWYWwpXG5cdCAgICB9XG5cdCAgICBpZiAobW9kaWZpZXJzLnRyaW0pIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlLnRyaW0oKSAhPT0gbmV3VmFsLnRyaW0oKVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdmFsdWUgIT09IG5ld1ZhbFxuXHR9XG5cdFxuXHR2YXIgZG9tUHJvcHMgPSB7XG5cdCAgY3JlYXRlOiB1cGRhdGVET01Qcm9wcyxcblx0ICB1cGRhdGU6IHVwZGF0ZURPTVByb3BzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIHBhcnNlU3R5bGVUZXh0ID0gY2FjaGVkKGZ1bmN0aW9uIChjc3NUZXh0KSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIHZhciBsaXN0RGVsaW1pdGVyID0gLzsoPyFbXihdKlxcKSkvZztcblx0ICB2YXIgcHJvcGVydHlEZWxpbWl0ZXIgPSAvOiguKykvO1xuXHQgIGNzc1RleHQuc3BsaXQobGlzdERlbGltaXRlcikuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgaWYgKGl0ZW0pIHtcblx0ICAgICAgdmFyIHRtcCA9IGl0ZW0uc3BsaXQocHJvcGVydHlEZWxpbWl0ZXIpO1xuXHQgICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmVzW3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHJlc1xuXHR9KTtcblx0XG5cdC8vIG1lcmdlIHN0YXRpYyBhbmQgZHluYW1pYyBzdHlsZSBkYXRhIG9uIHRoZSBzYW1lIHZub2RlXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlRGF0YSAoZGF0YSkge1xuXHQgIHZhciBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlQmluZGluZyhkYXRhLnN0eWxlKTtcblx0ICAvLyBzdGF0aWMgc3R5bGUgaXMgcHJlLXByb2Nlc3NlZCBpbnRvIGFuIG9iamVjdCBkdXJpbmcgY29tcGlsYXRpb25cblx0ICAvLyBhbmQgaXMgYWx3YXlzIGEgZnJlc2ggb2JqZWN0LCBzbyBpdCdzIHNhZmUgdG8gbWVyZ2UgaW50byBpdFxuXHQgIHJldHVybiBkYXRhLnN0YXRpY1N0eWxlXG5cdCAgICA/IGV4dGVuZChkYXRhLnN0YXRpY1N0eWxlLCBzdHlsZSlcblx0ICAgIDogc3R5bGVcblx0fVxuXHRcblx0Ly8gbm9ybWFsaXplIHBvc3NpYmxlIGFycmF5IC8gc3RyaW5nIHZhbHVlcyBpbnRvIE9iamVjdFxuXHRmdW5jdGlvbiBub3JtYWxpemVTdHlsZUJpbmRpbmcgKGJpbmRpbmdTdHlsZSkge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KGJpbmRpbmdTdHlsZSkpIHtcblx0ICAgIHJldHVybiB0b09iamVjdChiaW5kaW5nU3R5bGUpXG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgYmluZGluZ1N0eWxlID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHBhcnNlU3R5bGVUZXh0KGJpbmRpbmdTdHlsZSlcblx0ICB9XG5cdCAgcmV0dXJuIGJpbmRpbmdTdHlsZVxuXHR9XG5cdFxuXHQvKipcblx0ICogcGFyZW50IGNvbXBvbmVudCBzdHlsZSBzaG91bGQgYmUgYWZ0ZXIgY2hpbGQnc1xuXHQgKiBzbyB0aGF0IHBhcmVudCBjb21wb25lbnQncyBzdHlsZSBjb3VsZCBvdmVycmlkZSBpdFxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0U3R5bGUgKHZub2RlLCBjaGVja0NoaWxkKSB7XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIHZhciBzdHlsZURhdGE7XG5cdFxuXHQgIGlmIChjaGVja0NoaWxkKSB7XG5cdCAgICB2YXIgY2hpbGROb2RlID0gdm5vZGU7XG5cdCAgICB3aGlsZSAoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSB7XG5cdCAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG5cdCAgICAgIGlmIChcblx0ICAgICAgICBjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEgJiZcblx0ICAgICAgICAoc3R5bGVEYXRhID0gbm9ybWFsaXplU3R5bGVEYXRhKGNoaWxkTm9kZS5kYXRhKSlcblx0ICAgICAgKSB7XG5cdCAgICAgICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEodm5vZGUuZGF0YSkpKSB7XG5cdCAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHBhcmVudE5vZGUgPSB2bm9kZTtcblx0ICB3aGlsZSAoKHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudCkpIHtcblx0ICAgIGlmIChwYXJlbnROb2RlLmRhdGEgJiYgKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YShwYXJlbnROb2RlLmRhdGEpKSkge1xuXHQgICAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGNzc1ZhclJFID0gL14tLS87XG5cdHZhciBpbXBvcnRhbnRSRSA9IC9cXHMqIWltcG9ydGFudCQvO1xuXHR2YXIgc2V0UHJvcCA9IGZ1bmN0aW9uIChlbCwgbmFtZSwgdmFsKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGNzc1ZhclJFLnRlc3QobmFtZSkpIHtcblx0ICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbCk7XG5cdCAgfSBlbHNlIGlmIChpbXBvcnRhbnRSRS50ZXN0KHZhbCkpIHtcblx0ICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbC5yZXBsYWNlKGltcG9ydGFudFJFLCAnJyksICdpbXBvcnRhbnQnKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplKG5hbWUpO1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuXHQgICAgICAvLyBTdXBwb3J0IHZhbHVlcyBhcnJheSBjcmVhdGVkIGJ5IGF1dG9wcmVmaXhlciwgZS5nLlxuXHQgICAgICAvLyB7ZGlzcGxheTogW1wiLXdlYmtpdC1ib3hcIiwgXCItbXMtZmxleGJveFwiLCBcImZsZXhcIl19XG5cdCAgICAgIC8vIFNldCB0aGVtIG9uZSBieSBvbmUsIGFuZCB0aGUgYnJvd3NlciB3aWxsIG9ubHkgc2V0IHRob3NlIGl0IGNhbiByZWNvZ25pemVcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHZhbC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgIGVsLnN0eWxlW25vcm1hbGl6ZWROYW1lXSA9IHZhbFtpXTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuc3R5bGVbbm9ybWFsaXplZE5hbWVdID0gdmFsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciB2ZW5kb3JOYW1lcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xuXHRcblx0dmFyIGVtcHR5U3R5bGU7XG5cdHZhciBub3JtYWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHByb3ApIHtcblx0ICBlbXB0eVN0eWxlID0gZW1wdHlTdHlsZSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcblx0ICBwcm9wID0gY2FtZWxpemUocHJvcCk7XG5cdCAgaWYgKHByb3AgIT09ICdmaWx0ZXInICYmIChwcm9wIGluIGVtcHR5U3R5bGUpKSB7XG5cdCAgICByZXR1cm4gcHJvcFxuXHQgIH1cblx0ICB2YXIgY2FwTmFtZSA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnNsaWNlKDEpO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVuZG9yTmFtZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBuYW1lID0gdmVuZG9yTmFtZXNbaV0gKyBjYXBOYW1lO1xuXHQgICAgaWYgKG5hbWUgaW4gZW1wdHlTdHlsZSkge1xuXHQgICAgICByZXR1cm4gbmFtZVxuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVTdHlsZSAob2xkVm5vZGUsIHZub2RlKSB7XG5cdCAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuXHQgIHZhciBvbGREYXRhID0gb2xkVm5vZGUuZGF0YTtcblx0XG5cdCAgaWYgKGlzVW5kZWYoZGF0YS5zdGF0aWNTdHlsZSkgJiYgaXNVbmRlZihkYXRhLnN0eWxlKSAmJlxuXHQgICAgaXNVbmRlZihvbGREYXRhLnN0YXRpY1N0eWxlKSAmJiBpc1VuZGVmKG9sZERhdGEuc3R5bGUpXG5cdCAgKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHZhciBjdXIsIG5hbWU7XG5cdCAgdmFyIGVsID0gdm5vZGUuZWxtO1xuXHQgIHZhciBvbGRTdGF0aWNTdHlsZSA9IG9sZERhdGEuc3RhdGljU3R5bGU7XG5cdCAgdmFyIG9sZFN0eWxlQmluZGluZyA9IG9sZERhdGEubm9ybWFsaXplZFN0eWxlIHx8IG9sZERhdGEuc3R5bGUgfHwge307XG5cdFxuXHQgIC8vIGlmIHN0YXRpYyBzdHlsZSBleGlzdHMsIHN0eWxlYmluZGluZyBhbHJlYWR5IG1lcmdlZCBpbnRvIGl0IHdoZW4gZG9pbmcgbm9ybWFsaXplU3R5bGVEYXRhXG5cdCAgdmFyIG9sZFN0eWxlID0gb2xkU3RhdGljU3R5bGUgfHwgb2xkU3R5bGVCaW5kaW5nO1xuXHRcblx0ICB2YXIgc3R5bGUgPSBub3JtYWxpemVTdHlsZUJpbmRpbmcodm5vZGUuZGF0YS5zdHlsZSkgfHwge307XG5cdFxuXHQgIC8vIHN0b3JlIG5vcm1hbGl6ZWQgc3R5bGUgdW5kZXIgYSBkaWZmZXJlbnQga2V5IGZvciBuZXh0IGRpZmZcblx0ICAvLyBtYWtlIHN1cmUgdG8gY2xvbmUgaXQgaWYgaXQncyByZWFjdGl2ZSwgc2luY2UgdGhlIHVzZXIgbGlrZWx5IHdhbnRzXG5cdCAgLy8gdG8gbXV0YXRlIGl0LlxuXHQgIHZub2RlLmRhdGEubm9ybWFsaXplZFN0eWxlID0gaXNEZWYoc3R5bGUuX19vYl9fKVxuXHQgICAgPyBleHRlbmQoe30sIHN0eWxlKVxuXHQgICAgOiBzdHlsZTtcblx0XG5cdCAgdmFyIG5ld1N0eWxlID0gZ2V0U3R5bGUodm5vZGUsIHRydWUpO1xuXHRcblx0ICBmb3IgKG5hbWUgaW4gb2xkU3R5bGUpIHtcblx0ICAgIGlmIChpc1VuZGVmKG5ld1N0eWxlW25hbWVdKSkge1xuXHQgICAgICBzZXRQcm9wKGVsLCBuYW1lLCAnJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAobmFtZSBpbiBuZXdTdHlsZSkge1xuXHQgICAgY3VyID0gbmV3U3R5bGVbbmFtZV07XG5cdCAgICBpZiAoY3VyICE9PSBvbGRTdHlsZVtuYW1lXSkge1xuXHQgICAgICAvLyBpZTkgc2V0dGluZyB0byBudWxsIGhhcyBubyBlZmZlY3QsIG11c3QgdXNlIGVtcHR5IHN0cmluZ1xuXHQgICAgICBzZXRQcm9wKGVsLCBuYW1lLCBjdXIgPT0gbnVsbCA/ICcnIDogY3VyKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBzdHlsZSA9IHtcblx0ICBjcmVhdGU6IHVwZGF0ZVN0eWxlLFxuXHQgIHVwZGF0ZTogdXBkYXRlU3R5bGVcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvKipcblx0ICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgU1ZHIHNpbmNlIGNsYXNzTGlzdCBpcyBub3Qgc3VwcG9ydGVkIG9uXG5cdCAqIFNWRyBlbGVtZW50cyBpbiBJRVxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbHMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIWNscyB8fCAhKGNscyA9IGNscy50cmltKCkpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKGVsLmNsYXNzTGlzdCkge1xuXHQgICAgaWYgKGNscy5pbmRleE9mKCcgJykgPiAtMSkge1xuXHQgICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7IHJldHVybiBlbC5jbGFzc0xpc3QuYWRkKGMpOyB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9IFwiIFwiICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyBcIiBcIjtcblx0ICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgKGN1ciArIGNscykudHJpbSgpKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBTVkcgc2luY2UgY2xhc3NMaXN0IGlzIG5vdCBzdXBwb3J0ZWQgb25cblx0ICogU1ZHIGVsZW1lbnRzIGluIElFXG5cdCAqL1xuXHRmdW5jdGlvbiByZW1vdmVDbGFzcyAoZWwsIGNscykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghY2xzIHx8ICEoY2xzID0gY2xzLnRyaW0oKSkpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBpZiAoY2xzLmluZGV4T2YoJyAnKSA+IC0xKSB7XG5cdCAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5yZW1vdmUoYyk7IH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFlbC5jbGFzc0xpc3QubGVuZ3RoKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9IFwiIFwiICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyBcIiBcIjtcblx0ICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG5cdCAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG5cdCAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcblx0ICAgIH1cblx0ICAgIGN1ciA9IGN1ci50cmltKCk7XG5cdCAgICBpZiAoY3VyKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjdXIpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvbiAoZGVmKSB7XG5cdCAgaWYgKCFkZWYpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmICh0eXBlb2YgZGVmID09PSAnb2JqZWN0Jykge1xuXHQgICAgdmFyIHJlcyA9IHt9O1xuXHQgICAgaWYgKGRlZi5jc3MgIT09IGZhbHNlKSB7XG5cdCAgICAgIGV4dGVuZChyZXMsIGF1dG9Dc3NUcmFuc2l0aW9uKGRlZi5uYW1lIHx8ICd2JykpO1xuXHQgICAgfVxuXHQgICAgZXh0ZW5kKHJlcywgZGVmKTtcblx0ICAgIHJldHVybiByZXNcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBkZWYgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gYXV0b0Nzc1RyYW5zaXRpb24oZGVmKVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGF1dG9Dc3NUcmFuc2l0aW9uID0gY2FjaGVkKGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGVudGVyQ2xhc3M6IChuYW1lICsgXCItZW50ZXJcIiksXG5cdCAgICBlbnRlclRvQ2xhc3M6IChuYW1lICsgXCItZW50ZXItdG9cIiksXG5cdCAgICBlbnRlckFjdGl2ZUNsYXNzOiAobmFtZSArIFwiLWVudGVyLWFjdGl2ZVwiKSxcblx0ICAgIGxlYXZlQ2xhc3M6IChuYW1lICsgXCItbGVhdmVcIiksXG5cdCAgICBsZWF2ZVRvQ2xhc3M6IChuYW1lICsgXCItbGVhdmUtdG9cIiksXG5cdCAgICBsZWF2ZUFjdGl2ZUNsYXNzOiAobmFtZSArIFwiLWxlYXZlLWFjdGl2ZVwiKVxuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgaGFzVHJhbnNpdGlvbiA9IGluQnJvd3NlciAmJiAhaXNJRTk7XG5cdHZhciBUUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xuXHR2YXIgQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG5cdFxuXHQvLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5cdHZhciB0cmFuc2l0aW9uUHJvcCA9ICd0cmFuc2l0aW9uJztcblx0dmFyIHRyYW5zaXRpb25FbmRFdmVudCA9ICd0cmFuc2l0aW9uZW5kJztcblx0dmFyIGFuaW1hdGlvblByb3AgPSAnYW5pbWF0aW9uJztcblx0dmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gJ2FuaW1hdGlvbmVuZCc7XG5cdGlmIChoYXNUcmFuc2l0aW9uKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJlxuXHQgICAgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkXG5cdCAgKSB7XG5cdCAgICB0cmFuc2l0aW9uUHJvcCA9ICdXZWJraXRUcmFuc2l0aW9uJztcblx0ICAgIHRyYW5zaXRpb25FbmRFdmVudCA9ICd3ZWJraXRUcmFuc2l0aW9uRW5kJztcblx0ICB9XG5cdCAgaWYgKHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmXG5cdCAgICB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZFxuXHQgICkge1xuXHQgICAgYW5pbWF0aW9uUHJvcCA9ICdXZWJraXRBbmltYXRpb24nO1xuXHQgICAgYW5pbWF0aW9uRW5kRXZlbnQgPSAnd2Via2l0QW5pbWF0aW9uRW5kJztcblx0ICB9XG5cdH1cblx0XG5cdC8vIGJpbmRpbmcgdG8gd2luZG93IGlzIG5lY2Vzc2FyeSB0byBtYWtlIGhvdCByZWxvYWQgd29yayBpbiBJRSBpbiBzdHJpY3QgbW9kZVxuXHR2YXIgcmFmID0gaW5Ccm93c2VyXG5cdCAgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lXG5cdCAgICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpXG5cdCAgICA6IHNldFRpbWVvdXRcblx0ICA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4oKTsgfTtcblx0XG5cdGZ1bmN0aW9uIG5leHRGcmFtZSAoZm4pIHtcblx0ICByYWYoZnVuY3Rpb24gKCkge1xuXHQgICAgcmFmKGZuKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkVHJhbnNpdGlvbkNsYXNzIChlbCwgY2xzKSB7XG5cdCAgdmFyIHRyYW5zaXRpb25DbGFzc2VzID0gZWwuX3RyYW5zaXRpb25DbGFzc2VzIHx8IChlbC5fdHJhbnNpdGlvbkNsYXNzZXMgPSBbXSk7XG5cdCAgaWYgKHRyYW5zaXRpb25DbGFzc2VzLmluZGV4T2YoY2xzKSA8IDApIHtcblx0ICAgIHRyYW5zaXRpb25DbGFzc2VzLnB1c2goY2xzKTtcblx0ICAgIGFkZENsYXNzKGVsLCBjbHMpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlVHJhbnNpdGlvbkNsYXNzIChlbCwgY2xzKSB7XG5cdCAgaWYgKGVsLl90cmFuc2l0aW9uQ2xhc3Nlcykge1xuXHQgICAgcmVtb3ZlKGVsLl90cmFuc2l0aW9uQ2xhc3NlcywgY2xzKTtcblx0ICB9XG5cdCAgcmVtb3ZlQ2xhc3MoZWwsIGNscyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyAoXG5cdCAgZWwsXG5cdCAgZXhwZWN0ZWRUeXBlLFxuXHQgIGNiXG5cdCkge1xuXHQgIHZhciByZWYgPSBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKTtcblx0ICB2YXIgdHlwZSA9IHJlZi50eXBlO1xuXHQgIHZhciB0aW1lb3V0ID0gcmVmLnRpbWVvdXQ7XG5cdCAgdmFyIHByb3BDb3VudCA9IHJlZi5wcm9wQ291bnQ7XG5cdCAgaWYgKCF0eXBlKSB7IHJldHVybiBjYigpIH1cblx0ICB2YXIgZXZlbnQgPSB0eXBlID09PSBUUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG5cdCAgdmFyIGVuZGVkID0gMDtcblx0ICB2YXIgZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgb25FbmQpO1xuXHQgICAgY2IoKTtcblx0ICB9O1xuXHQgIHZhciBvbkVuZCA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG5cdCAgICAgIGlmICgrK2VuZGVkID49IHByb3BDb3VudCkge1xuXHQgICAgICAgIGVuZCgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkge1xuXHQgICAgICBlbmQoKTtcblx0ICAgIH1cblx0ICB9LCB0aW1lb3V0ICsgMSk7XG5cdCAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgb25FbmQpO1xuXHR9XG5cdFxuXHR2YXIgdHJhbnNmb3JtUkUgPSAvXFxiKHRyYW5zZm9ybXxhbGwpKCx8JCkvO1xuXHRcblx0ZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkluZm8gKGVsLCBleHBlY3RlZFR5cGUpIHtcblx0ICB2YXIgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuXHQgIHZhciB0cmFuc2l0aW9uRGVsYXlzID0gc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ0RlbGF5J10uc3BsaXQoJywgJyk7XG5cdCAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbnMgPSBzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nXS5zcGxpdCgnLCAnKTtcblx0ICB2YXIgdHJhbnNpdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KHRyYW5zaXRpb25EZWxheXMsIHRyYW5zaXRpb25EdXJhdGlvbnMpO1xuXHQgIHZhciBhbmltYXRpb25EZWxheXMgPSBzdHlsZXNbYW5pbWF0aW9uUHJvcCArICdEZWxheSddLnNwbGl0KCcsICcpO1xuXHQgIHZhciBhbmltYXRpb25EdXJhdGlvbnMgPSBzdHlsZXNbYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbiddLnNwbGl0KCcsICcpO1xuXHQgIHZhciBhbmltYXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dChhbmltYXRpb25EZWxheXMsIGFuaW1hdGlvbkR1cmF0aW9ucyk7XG5cdFxuXHQgIHZhciB0eXBlO1xuXHQgIHZhciB0aW1lb3V0ID0gMDtcblx0ICB2YXIgcHJvcENvdW50ID0gMDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoZXhwZWN0ZWRUeXBlID09PSBUUkFOU0lUSU9OKSB7XG5cdCAgICBpZiAodHJhbnNpdGlvblRpbWVvdXQgPiAwKSB7XG5cdCAgICAgIHR5cGUgPSBUUkFOU0lUSU9OO1xuXHQgICAgICB0aW1lb3V0ID0gdHJhbnNpdGlvblRpbWVvdXQ7XG5cdCAgICAgIHByb3BDb3VudCA9IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHtcblx0ICAgIGlmIChhbmltYXRpb25UaW1lb3V0ID4gMCkge1xuXHQgICAgICB0eXBlID0gQU5JTUFUSU9OO1xuXHQgICAgICB0aW1lb3V0ID0gYW5pbWF0aW9uVGltZW91dDtcblx0ICAgICAgcHJvcENvdW50ID0gYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aDtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTtcblx0ICAgIHR5cGUgPSB0aW1lb3V0ID4gMFxuXHQgICAgICA/IHRyYW5zaXRpb25UaW1lb3V0ID4gYW5pbWF0aW9uVGltZW91dFxuXHQgICAgICAgID8gVFJBTlNJVElPTlxuXHQgICAgICAgIDogQU5JTUFUSU9OXG5cdCAgICAgIDogbnVsbDtcblx0ICAgIHByb3BDb3VudCA9IHR5cGVcblx0ICAgICAgPyB0eXBlID09PSBUUkFOU0lUSU9OXG5cdCAgICAgICAgPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aFxuXHQgICAgICAgIDogYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aFxuXHQgICAgICA6IDA7XG5cdCAgfVxuXHQgIHZhciBoYXNUcmFuc2Zvcm0gPVxuXHQgICAgdHlwZSA9PT0gVFJBTlNJVElPTiAmJlxuXHQgICAgdHJhbnNmb3JtUkUudGVzdChzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnUHJvcGVydHknXSk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHR5cGU6IHR5cGUsXG5cdCAgICB0aW1lb3V0OiB0aW1lb3V0LFxuXHQgICAgcHJvcENvdW50OiBwcm9wQ291bnQsXG5cdCAgICBoYXNUcmFuc2Zvcm06IGhhc1RyYW5zZm9ybVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VGltZW91dCAoZGVsYXlzLCBkdXJhdGlvbnMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkge1xuXHQgICAgZGVsYXlzID0gZGVsYXlzLmNvbmNhdChkZWxheXMpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIGR1cmF0aW9ucy5tYXAoZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgIHJldHVybiB0b01zKGQpICsgdG9NcyhkZWxheXNbaV0pXG5cdCAgfSkpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvTXMgKHMpIHtcblx0ICByZXR1cm4gTnVtYmVyKHMuc2xpY2UoMCwgLTEpKSAqIDEwMDBcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBlbnRlciAodm5vZGUsIHRvZ2dsZURpc3BsYXkpIHtcblx0ICB2YXIgZWwgPSB2bm9kZS5lbG07XG5cdFxuXHQgIC8vIGNhbGwgbGVhdmUgY2FsbGJhY2sgbm93XG5cdCAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkge1xuXHQgICAgZWwuX2xlYXZlQ2IuY2FuY2VsbGVkID0gdHJ1ZTtcblx0ICAgIGVsLl9sZWF2ZUNiKCk7XG5cdCAgfVxuXHRcblx0ICB2YXIgZGF0YSA9IHJlc29sdmVUcmFuc2l0aW9uKHZub2RlLmRhdGEudHJhbnNpdGlvbik7XG5cdCAgaWYgKGlzVW5kZWYoZGF0YSkpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzRGVmKGVsLl9lbnRlckNiKSB8fCBlbC5ub2RlVHlwZSAhPT0gMSkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgY3NzID0gZGF0YS5jc3M7XG5cdCAgdmFyIHR5cGUgPSBkYXRhLnR5cGU7XG5cdCAgdmFyIGVudGVyQ2xhc3MgPSBkYXRhLmVudGVyQ2xhc3M7XG5cdCAgdmFyIGVudGVyVG9DbGFzcyA9IGRhdGEuZW50ZXJUb0NsYXNzO1xuXHQgIHZhciBlbnRlckFjdGl2ZUNsYXNzID0gZGF0YS5lbnRlckFjdGl2ZUNsYXNzO1xuXHQgIHZhciBhcHBlYXJDbGFzcyA9IGRhdGEuYXBwZWFyQ2xhc3M7XG5cdCAgdmFyIGFwcGVhclRvQ2xhc3MgPSBkYXRhLmFwcGVhclRvQ2xhc3M7XG5cdCAgdmFyIGFwcGVhckFjdGl2ZUNsYXNzID0gZGF0YS5hcHBlYXJBY3RpdmVDbGFzcztcblx0ICB2YXIgYmVmb3JlRW50ZXIgPSBkYXRhLmJlZm9yZUVudGVyO1xuXHQgIHZhciBlbnRlciA9IGRhdGEuZW50ZXI7XG5cdCAgdmFyIGFmdGVyRW50ZXIgPSBkYXRhLmFmdGVyRW50ZXI7XG5cdCAgdmFyIGVudGVyQ2FuY2VsbGVkID0gZGF0YS5lbnRlckNhbmNlbGxlZDtcblx0ICB2YXIgYmVmb3JlQXBwZWFyID0gZGF0YS5iZWZvcmVBcHBlYXI7XG5cdCAgdmFyIGFwcGVhciA9IGRhdGEuYXBwZWFyO1xuXHQgIHZhciBhZnRlckFwcGVhciA9IGRhdGEuYWZ0ZXJBcHBlYXI7XG5cdCAgdmFyIGFwcGVhckNhbmNlbGxlZCA9IGRhdGEuYXBwZWFyQ2FuY2VsbGVkO1xuXHQgIHZhciBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247XG5cdFxuXHQgIC8vIGFjdGl2ZUluc3RhbmNlIHdpbGwgYWx3YXlzIGJlIHRoZSA8dHJhbnNpdGlvbj4gY29tcG9uZW50IG1hbmFnaW5nIHRoaXNcblx0ICAvLyB0cmFuc2l0aW9uLiBPbmUgZWRnZSBjYXNlIHRvIGNoZWNrIGlzIHdoZW4gdGhlIDx0cmFuc2l0aW9uPiBpcyBwbGFjZWRcblx0ICAvLyBhcyB0aGUgcm9vdCBub2RlIG9mIGEgY2hpbGQgY29tcG9uZW50LiBJbiB0aGF0IGNhc2Ugd2UgbmVlZCB0byBjaGVja1xuXHQgIC8vIDx0cmFuc2l0aW9uPidzIHBhcmVudCBmb3IgYXBwZWFyIGNoZWNrLlxuXHQgIHZhciBjb250ZXh0ID0gYWN0aXZlSW5zdGFuY2U7XG5cdCAgdmFyIHRyYW5zaXRpb25Ob2RlID0gYWN0aXZlSW5zdGFuY2UuJHZub2RlO1xuXHQgIHdoaWxlICh0cmFuc2l0aW9uTm9kZSAmJiB0cmFuc2l0aW9uTm9kZS5wYXJlbnQpIHtcblx0ICAgIHRyYW5zaXRpb25Ob2RlID0gdHJhbnNpdGlvbk5vZGUucGFyZW50O1xuXHQgICAgY29udGV4dCA9IHRyYW5zaXRpb25Ob2RlLmNvbnRleHQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgaXNBcHBlYXIgPSAhY29udGV4dC5faXNNb3VudGVkIHx8ICF2bm9kZS5pc1Jvb3RJbnNlcnQ7XG5cdFxuXHQgIGlmIChpc0FwcGVhciAmJiAhYXBwZWFyICYmIGFwcGVhciAhPT0gJycpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIHN0YXJ0Q2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJDbGFzc1xuXHQgICAgPyBhcHBlYXJDbGFzc1xuXHQgICAgOiBlbnRlckNsYXNzO1xuXHQgIHZhciBhY3RpdmVDbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhckFjdGl2ZUNsYXNzXG5cdCAgICA/IGFwcGVhckFjdGl2ZUNsYXNzXG5cdCAgICA6IGVudGVyQWN0aXZlQ2xhc3M7XG5cdCAgdmFyIHRvQ2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJUb0NsYXNzXG5cdCAgICA/IGFwcGVhclRvQ2xhc3Ncblx0ICAgIDogZW50ZXJUb0NsYXNzO1xuXHRcblx0ICB2YXIgYmVmb3JlRW50ZXJIb29rID0gaXNBcHBlYXJcblx0ICAgID8gKGJlZm9yZUFwcGVhciB8fCBiZWZvcmVFbnRlcilcblx0ICAgIDogYmVmb3JlRW50ZXI7XG5cdCAgdmFyIGVudGVySG9vayA9IGlzQXBwZWFyXG5cdCAgICA/ICh0eXBlb2YgYXBwZWFyID09PSAnZnVuY3Rpb24nID8gYXBwZWFyIDogZW50ZXIpXG5cdCAgICA6IGVudGVyO1xuXHQgIHZhciBhZnRlckVudGVySG9vayA9IGlzQXBwZWFyXG5cdCAgICA/IChhZnRlckFwcGVhciB8fCBhZnRlckVudGVyKVxuXHQgICAgOiBhZnRlckVudGVyO1xuXHQgIHZhciBlbnRlckNhbmNlbGxlZEhvb2sgPSBpc0FwcGVhclxuXHQgICAgPyAoYXBwZWFyQ2FuY2VsbGVkIHx8IGVudGVyQ2FuY2VsbGVkKVxuXHQgICAgOiBlbnRlckNhbmNlbGxlZDtcblx0XG5cdCAgdmFyIGV4cGxpY2l0RW50ZXJEdXJhdGlvbiA9IHRvTnVtYmVyKFxuXHQgICAgaXNPYmplY3QoZHVyYXRpb24pXG5cdCAgICAgID8gZHVyYXRpb24uZW50ZXJcblx0ICAgICAgOiBkdXJhdGlvblxuXHQgICk7XG5cdFxuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBleHBsaWNpdEVudGVyRHVyYXRpb24gIT0gbnVsbCkge1xuXHQgICAgY2hlY2tEdXJhdGlvbihleHBsaWNpdEVudGVyRHVyYXRpb24sICdlbnRlcicsIHZub2RlKTtcblx0ICB9XG5cdFxuXHQgIHZhciBleHBlY3RzQ1NTID0gY3NzICE9PSBmYWxzZSAmJiAhaXNJRTk7XG5cdCAgdmFyIHVzZXJXYW50c0NvbnRyb2wgPSBnZXRIb29rQXJndW1lbnRzTGVuZ3RoKGVudGVySG9vayk7XG5cdFxuXHQgIHZhciBjYiA9IGVsLl9lbnRlckNiID0gb25jZShmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoZXhwZWN0c0NTUykge1xuXHQgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIHRvQ2xhc3MpO1xuXHQgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTtcblx0ICAgIH1cblx0ICAgIGlmIChjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgaWYgKGV4cGVjdHNDU1MpIHtcblx0ICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIHN0YXJ0Q2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICAgIGVudGVyQ2FuY2VsbGVkSG9vayAmJiBlbnRlckNhbmNlbGxlZEhvb2soZWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYWZ0ZXJFbnRlckhvb2sgJiYgYWZ0ZXJFbnRlckhvb2soZWwpO1xuXHQgICAgfVxuXHQgICAgZWwuX2VudGVyQ2IgPSBudWxsO1xuXHQgIH0pO1xuXHRcblx0ICBpZiAoIXZub2RlLmRhdGEuc2hvdykge1xuXHQgICAgLy8gcmVtb3ZlIHBlbmRpbmcgbGVhdmUgZWxlbWVudCBvbiBlbnRlciBieSBpbmplY3RpbmcgYW4gaW5zZXJ0IGhvb2tcblx0ICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAnaW5zZXJ0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTtcblx0ICAgICAgdmFyIHBlbmRpbmdOb2RlID0gcGFyZW50ICYmIHBhcmVudC5fcGVuZGluZyAmJiBwYXJlbnQuX3BlbmRpbmdbdm5vZGUua2V5XTtcblx0ICAgICAgaWYgKHBlbmRpbmdOb2RlICYmXG5cdCAgICAgICAgcGVuZGluZ05vZGUudGFnID09PSB2bm9kZS50YWcgJiZcblx0ICAgICAgICBwZW5kaW5nTm9kZS5lbG0uX2xlYXZlQ2Jcblx0ICAgICAgKSB7XG5cdCAgICAgICAgcGVuZGluZ05vZGUuZWxtLl9sZWF2ZUNiKCk7XG5cdCAgICAgIH1cblx0ICAgICAgZW50ZXJIb29rICYmIGVudGVySG9vayhlbCwgY2IpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvLyBzdGFydCBlbnRlciB0cmFuc2l0aW9uXG5cdCAgYmVmb3JlRW50ZXJIb29rICYmIGJlZm9yZUVudGVySG9vayhlbCk7XG5cdCAgaWYgKGV4cGVjdHNDU1MpIHtcblx0ICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgc3RhcnRDbGFzcyk7XG5cdCAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTtcblx0ICAgIG5leHRGcmFtZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgc3RhcnRDbGFzcyk7XG5cdCAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG5cdCAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCB0b0NsYXNzKTtcblx0ICAgICAgICBpZiAoIXVzZXJXYW50c0NvbnRyb2wpIHtcblx0ICAgICAgICAgIGlmIChpc1ZhbGlkRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uKSkge1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCBleHBsaWNpdEVudGVyRHVyYXRpb24pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBjYik7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGlmICh2bm9kZS5kYXRhLnNob3cpIHtcblx0ICAgIHRvZ2dsZURpc3BsYXkgJiYgdG9nZ2xlRGlzcGxheSgpO1xuXHQgICAgZW50ZXJIb29rICYmIGVudGVySG9vayhlbCwgY2IpO1xuXHQgIH1cblx0XG5cdCAgaWYgKCFleHBlY3RzQ1NTICYmICF1c2VyV2FudHNDb250cm9sKSB7XG5cdCAgICBjYigpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbGVhdmUgKHZub2RlLCBybSkge1xuXHQgIHZhciBlbCA9IHZub2RlLmVsbTtcblx0XG5cdCAgLy8gY2FsbCBlbnRlciBjYWxsYmFjayBub3dcblx0ICBpZiAoaXNEZWYoZWwuX2VudGVyQ2IpKSB7XG5cdCAgICBlbC5fZW50ZXJDYi5jYW5jZWxsZWQgPSB0cnVlO1xuXHQgICAgZWwuX2VudGVyQ2IoKTtcblx0ICB9XG5cdFxuXHQgIHZhciBkYXRhID0gcmVzb2x2ZVRyYW5zaXRpb24odm5vZGUuZGF0YS50cmFuc2l0aW9uKTtcblx0ICBpZiAoaXNVbmRlZihkYXRhKSB8fCBlbC5ub2RlVHlwZSAhPT0gMSkge1xuXHQgICAgcmV0dXJuIHJtKClcblx0ICB9XG5cdFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc0RlZihlbC5fbGVhdmVDYikpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIGNzcyA9IGRhdGEuY3NzO1xuXHQgIHZhciB0eXBlID0gZGF0YS50eXBlO1xuXHQgIHZhciBsZWF2ZUNsYXNzID0gZGF0YS5sZWF2ZUNsYXNzO1xuXHQgIHZhciBsZWF2ZVRvQ2xhc3MgPSBkYXRhLmxlYXZlVG9DbGFzcztcblx0ICB2YXIgbGVhdmVBY3RpdmVDbGFzcyA9IGRhdGEubGVhdmVBY3RpdmVDbGFzcztcblx0ICB2YXIgYmVmb3JlTGVhdmUgPSBkYXRhLmJlZm9yZUxlYXZlO1xuXHQgIHZhciBsZWF2ZSA9IGRhdGEubGVhdmU7XG5cdCAgdmFyIGFmdGVyTGVhdmUgPSBkYXRhLmFmdGVyTGVhdmU7XG5cdCAgdmFyIGxlYXZlQ2FuY2VsbGVkID0gZGF0YS5sZWF2ZUNhbmNlbGxlZDtcblx0ICB2YXIgZGVsYXlMZWF2ZSA9IGRhdGEuZGVsYXlMZWF2ZTtcblx0ICB2YXIgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uO1xuXHRcblx0ICB2YXIgZXhwZWN0c0NTUyA9IGNzcyAhPT0gZmFsc2UgJiYgIWlzSUU5O1xuXHQgIHZhciB1c2VyV2FudHNDb250cm9sID0gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChsZWF2ZSk7XG5cdFxuXHQgIHZhciBleHBsaWNpdExlYXZlRHVyYXRpb24gPSB0b051bWJlcihcblx0ICAgIGlzT2JqZWN0KGR1cmF0aW9uKVxuXHQgICAgICA/IGR1cmF0aW9uLmxlYXZlXG5cdCAgICAgIDogZHVyYXRpb25cblx0ICApO1xuXHRcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgaXNEZWYoZXhwbGljaXRMZWF2ZUR1cmF0aW9uKSkge1xuXHQgICAgY2hlY2tEdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24sICdsZWF2ZScsIHZub2RlKTtcblx0ICB9XG5cdFxuXHQgIHZhciBjYiA9IGVsLl9sZWF2ZUNiID0gb25jZShmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLl9wZW5kaW5nKSB7XG5cdCAgICAgIGVsLnBhcmVudE5vZGUuX3BlbmRpbmdbdm5vZGUua2V5XSA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAoZXhwZWN0c0NTUykge1xuXHQgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG5cdCAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG5cdCAgICB9XG5cdCAgICBpZiAoY2IuY2FuY2VsbGVkKSB7XG5cdCAgICAgIGlmIChleHBlY3RzQ1NTKSB7XG5cdCAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgICBsZWF2ZUNhbmNlbGxlZCAmJiBsZWF2ZUNhbmNlbGxlZChlbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBybSgpO1xuXHQgICAgICBhZnRlckxlYXZlICYmIGFmdGVyTGVhdmUoZWwpO1xuXHQgICAgfVxuXHQgICAgZWwuX2xlYXZlQ2IgPSBudWxsO1xuXHQgIH0pO1xuXHRcblx0ICBpZiAoZGVsYXlMZWF2ZSkge1xuXHQgICAgZGVsYXlMZWF2ZShwZXJmb3JtTGVhdmUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwZXJmb3JtTGVhdmUoKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHBlcmZvcm1MZWF2ZSAoKSB7XG5cdCAgICAvLyB0aGUgZGVsYXllZCBsZWF2ZSBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gY2FuY2VsbGVkXG5cdCAgICBpZiAoY2IuY2FuY2VsbGVkKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHQgICAgLy8gcmVjb3JkIGxlYXZpbmcgZWxlbWVudFxuXHQgICAgaWYgKCF2bm9kZS5kYXRhLnNob3cpIHtcblx0ICAgICAgKGVsLnBhcmVudE5vZGUuX3BlbmRpbmcgfHwgKGVsLnBhcmVudE5vZGUuX3BlbmRpbmcgPSB7fSkpWyh2bm9kZS5rZXkpXSA9IHZub2RlO1xuXHQgICAgfVxuXHQgICAgYmVmb3JlTGVhdmUgJiYgYmVmb3JlTGVhdmUoZWwpO1xuXHQgICAgaWYgKGV4cGVjdHNDU1MpIHtcblx0ICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTtcblx0ICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTtcblx0ICAgICAgbmV4dEZyYW1lKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQ2xhc3MpO1xuXHQgICAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG5cdCAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG5cdCAgICAgICAgICBpZiAoIXVzZXJXYW50c0NvbnRyb2wpIHtcblx0ICAgICAgICAgICAgaWYgKGlzVmFsaWREdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24pKSB7XG5cdCAgICAgICAgICAgICAgc2V0VGltZW91dChjYiwgZXhwbGljaXRMZWF2ZUR1cmF0aW9uKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGNiKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBsZWF2ZSAmJiBsZWF2ZShlbCwgY2IpO1xuXHQgICAgaWYgKCFleHBlY3RzQ1NTICYmICF1c2VyV2FudHNDb250cm9sKSB7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBvbmx5IHVzZWQgaW4gZGV2IG1vZGVcblx0ZnVuY3Rpb24gY2hlY2tEdXJhdGlvbiAodmFsLCBuYW1lLCB2bm9kZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsICE9PSAnbnVtYmVyJykge1xuXHQgICAgd2Fybihcblx0ICAgICAgXCI8dHJhbnNpdGlvbj4gZXhwbGljaXQgXCIgKyBuYW1lICsgXCIgZHVyYXRpb24gaXMgbm90IGEgdmFsaWQgbnVtYmVyIC0gXCIgK1xuXHQgICAgICBcImdvdCBcIiArIChKU09OLnN0cmluZ2lmeSh2YWwpKSArIFwiLlwiLFxuXHQgICAgICB2bm9kZS5jb250ZXh0XG5cdCAgICApO1xuXHQgIH0gZWxzZSBpZiAoaXNOYU4odmFsKSkge1xuXHQgICAgd2Fybihcblx0ICAgICAgXCI8dHJhbnNpdGlvbj4gZXhwbGljaXQgXCIgKyBuYW1lICsgXCIgZHVyYXRpb24gaXMgTmFOIC0gXCIgK1xuXHQgICAgICAndGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LicsXG5cdCAgICAgIHZub2RlLmNvbnRleHRcblx0ICAgICk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1ZhbGlkRHVyYXRpb24gKHZhbCkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsKVxuXHR9XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIGEgdHJhbnNpdGlvbiBob29rJ3MgYXJndW1lbnQgbGVuZ3RoLiBUaGUgaG9vayBtYXkgYmU6XG5cdCAqIC0gYSBtZXJnZWQgaG9vayAoaW52b2tlcikgd2l0aCB0aGUgb3JpZ2luYWwgaW4gLmZuc1xuXHQgKiAtIGEgd3JhcHBlZCBjb21wb25lbnQgbWV0aG9kIChjaGVjayAuX2xlbmd0aClcblx0ICogLSBhIHBsYWluIGZ1bmN0aW9uICgubGVuZ3RoKVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aCAoZm4pIHtcblx0ICBpZiAoaXNVbmRlZihmbikpIHtcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0ICB2YXIgaW52b2tlckZucyA9IGZuLmZucztcblx0ICBpZiAoaXNEZWYoaW52b2tlckZucykpIHtcblx0ICAgIC8vIGludm9rZXJcblx0ICAgIHJldHVybiBnZXRIb29rQXJndW1lbnRzTGVuZ3RoKFxuXHQgICAgICBBcnJheS5pc0FycmF5KGludm9rZXJGbnMpXG5cdCAgICAgICAgPyBpbnZva2VyRm5zWzBdXG5cdCAgICAgICAgOiBpbnZva2VyRm5zXG5cdCAgICApXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAoZm4uX2xlbmd0aCB8fCBmbi5sZW5ndGgpID4gMVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX2VudGVyIChfLCB2bm9kZSkge1xuXHQgIGlmICh2bm9kZS5kYXRhLnNob3cgIT09IHRydWUpIHtcblx0ICAgIGVudGVyKHZub2RlKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uID0gaW5Ccm93c2VyID8ge1xuXHQgIGNyZWF0ZTogX2VudGVyLFxuXHQgIGFjdGl2YXRlOiBfZW50ZXIsXG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUkJDEgKHZub2RlLCBybSkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICAgIGlmICh2bm9kZS5kYXRhLnNob3cgIT09IHRydWUpIHtcblx0ICAgICAgbGVhdmUodm5vZGUsIHJtKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJtKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9IDoge31cblx0XG5cdHZhciBwbGF0Zm9ybU1vZHVsZXMgPSBbXG5cdCAgYXR0cnMsXG5cdCAga2xhc3MsXG5cdCAgZXZlbnRzLFxuXHQgIGRvbVByb3BzLFxuXHQgIHN0eWxlLFxuXHQgIHRyYW5zaXRpb25cblx0XVxuXHRcblx0LyogICovXG5cdFxuXHQvLyB0aGUgZGlyZWN0aXZlIG1vZHVsZSBzaG91bGQgYmUgYXBwbGllZCBsYXN0LCBhZnRlciBhbGxcblx0Ly8gYnVpbHQtaW4gbW9kdWxlcyBoYXZlIGJlZW4gYXBwbGllZC5cblx0dmFyIG1vZHVsZXMgPSBwbGF0Zm9ybU1vZHVsZXMuY29uY2F0KGJhc2VNb2R1bGVzKTtcblx0XG5cdHZhciBwYXRjaCA9IGNyZWF0ZVBhdGNoRnVuY3Rpb24oeyBub2RlT3BzOiBub2RlT3BzLCBtb2R1bGVzOiBtb2R1bGVzIH0pO1xuXHRcblx0LyoqXG5cdCAqIE5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBsaWtlIGF0dGFjaGluZ1xuXHQgKiBwcm9wZXJ0aWVzIHRvIEVsZW1lbnRzLlxuXHQgKi9cblx0XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHRpZiAoaXNJRTkpIHtcblx0ICAvLyBodHRwOi8vd3d3Lm1hdHRzNDExLmNvbS9wb3N0L2ludGVybmV0LWV4cGxvcmVyLTktb25pbnB1dC9cblx0ICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHQgICAgaWYgKGVsICYmIGVsLnZtb2RlbCkge1xuXHQgICAgICB0cmlnZ2VyKGVsLCAnaW5wdXQnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0ICBpbnNlcnRlZDogZnVuY3Rpb24gaW5zZXJ0ZWQgKGVsLCBiaW5kaW5nLCB2bm9kZSwgb2xkVm5vZGUpIHtcblx0ICAgIGlmICh2bm9kZS50YWcgPT09ICdzZWxlY3QnKSB7XG5cdCAgICAgIC8vICM2OTAzXG5cdCAgICAgIGlmIChvbGRWbm9kZS5lbG0gJiYgIW9sZFZub2RlLmVsbS5fdk9wdGlvbnMpIHtcblx0ICAgICAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ3Bvc3RwYXRjaCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGRpcmVjdGl2ZS5jb21wb25lbnRVcGRhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLmNvbnRleHQpO1xuXHQgICAgICB9XG5cdCAgICAgIGVsLl92T3B0aW9ucyA9IFtdLm1hcC5jYWxsKGVsLm9wdGlvbnMsIGdldFZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAodm5vZGUudGFnID09PSAndGV4dGFyZWEnIHx8IGlzVGV4dElucHV0VHlwZShlbC50eXBlKSkge1xuXHQgICAgICBlbC5fdk1vZGlmaWVycyA9IGJpbmRpbmcubW9kaWZpZXJzO1xuXHQgICAgICBpZiAoIWJpbmRpbmcubW9kaWZpZXJzLmxhenkpIHtcblx0ICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbnN0YXJ0Jywgb25Db21wb3NpdGlvblN0YXJ0KTtcblx0ICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbmVuZCcsIG9uQ29tcG9zaXRpb25FbmQpO1xuXHQgICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW5cblx0ICAgICAgICAvLyBzd2l0Y2hpbmcgZm9jdXMgYmVmb3JlIGNvbmZpcm1pbmcgY29tcG9zaXRpb24gY2hvaWNlXG5cdCAgICAgICAgLy8gdGhpcyBhbHNvIGZpeGVzIHRoZSBpc3N1ZSB3aGVyZSBzb21lIGJyb3dzZXJzIGUuZy4gaU9TIENocm9tZVxuXHQgICAgICAgIC8vIGZpcmVzIFwiY2hhbmdlXCIgaW5zdGVhZCBvZiBcImlucHV0XCIgb24gYXV0b2NvbXBsZXRlLlxuXHQgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQ29tcG9zaXRpb25FbmQpO1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChpc0lFOSkge1xuXHQgICAgICAgICAgZWwudm1vZGVsID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBjb21wb25lbnRVcGRhdGVkOiBmdW5jdGlvbiBjb21wb25lbnRVcGRhdGVkIChlbCwgYmluZGluZywgdm5vZGUpIHtcblx0ICAgIGlmICh2bm9kZS50YWcgPT09ICdzZWxlY3QnKSB7XG5cdCAgICAgIHNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bm9kZS5jb250ZXh0KTtcblx0ICAgICAgLy8gaW4gY2FzZSB0aGUgb3B0aW9ucyByZW5kZXJlZCBieSB2LWZvciBoYXZlIGNoYW5nZWQsXG5cdCAgICAgIC8vIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgdmFsdWUgaXMgb3V0LW9mLXN5bmMgd2l0aCB0aGUgcmVuZGVyZWQgb3B0aW9ucy5cblx0ICAgICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGZpbHRlciBvdXQgdmFsdWVzIHRoYXQgbm8gbG9uZ2VyIGhhcyBhIG1hdGNoaW5nXG5cdCAgICAgIC8vIG9wdGlvbiBpbiB0aGUgRE9NLlxuXHQgICAgICB2YXIgcHJldk9wdGlvbnMgPSBlbC5fdk9wdGlvbnM7XG5cdCAgICAgIHZhciBjdXJPcHRpb25zID0gZWwuX3ZPcHRpb25zID0gW10ubWFwLmNhbGwoZWwub3B0aW9ucywgZ2V0VmFsdWUpO1xuXHQgICAgICBpZiAoY3VyT3B0aW9ucy5zb21lKGZ1bmN0aW9uIChvLCBpKSB7IHJldHVybiAhbG9vc2VFcXVhbChvLCBwcmV2T3B0aW9uc1tpXSk7IH0pKSB7XG5cdCAgICAgICAgLy8gdHJpZ2dlciBjaGFuZ2UgZXZlbnQgaWZcblx0ICAgICAgICAvLyBubyBtYXRjaGluZyBvcHRpb24gZm91bmQgZm9yIGF0IGxlYXN0IG9uZSB2YWx1ZVxuXHQgICAgICAgIHZhciBuZWVkUmVzZXQgPSBlbC5tdWx0aXBsZVxuXHQgICAgICAgICAgPyBiaW5kaW5nLnZhbHVlLnNvbWUoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGhhc05vTWF0Y2hpbmdPcHRpb24odiwgY3VyT3B0aW9ucyk7IH0pXG5cdCAgICAgICAgICA6IGJpbmRpbmcudmFsdWUgIT09IGJpbmRpbmcub2xkVmFsdWUgJiYgaGFzTm9NYXRjaGluZ09wdGlvbihiaW5kaW5nLnZhbHVlLCBjdXJPcHRpb25zKTtcblx0ICAgICAgICBpZiAobmVlZFJlc2V0KSB7XG5cdCAgICAgICAgICB0cmlnZ2VyKGVsLCAnY2hhbmdlJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gc2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkge1xuXHQgIGFjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZtKTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNJRSB8fCBpc0VkZ2UpIHtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBhY3R1YWxseVNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bSk7XG5cdCAgICB9LCAwKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFjdHVhbGx5U2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkge1xuXHQgIHZhciB2YWx1ZSA9IGJpbmRpbmcudmFsdWU7XG5cdCAgdmFyIGlzTXVsdGlwbGUgPSBlbC5tdWx0aXBsZTtcblx0ICBpZiAoaXNNdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgIFwiPHNlbGVjdCBtdWx0aXBsZSB2LW1vZGVsPVxcXCJcIiArIChiaW5kaW5nLmV4cHJlc3Npb24pICsgXCJcXFwiPiBcIiArXG5cdCAgICAgIFwiZXhwZWN0cyBhbiBBcnJheSB2YWx1ZSBmb3IgaXRzIGJpbmRpbmcsIGJ1dCBnb3QgXCIgKyAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSkpLFxuXHQgICAgICB2bVxuXHQgICAgKTtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0ICB2YXIgc2VsZWN0ZWQsIG9wdGlvbjtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvcHRpb24gPSBlbC5vcHRpb25zW2ldO1xuXHQgICAgaWYgKGlzTXVsdGlwbGUpIHtcblx0ICAgICAgc2VsZWN0ZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIGdldFZhbHVlKG9wdGlvbikpID4gLTE7XG5cdCAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQgIT09IHNlbGVjdGVkKSB7XG5cdCAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChsb29zZUVxdWFsKGdldFZhbHVlKG9wdGlvbiksIHZhbHVlKSkge1xuXHQgICAgICAgIGlmIChlbC5zZWxlY3RlZEluZGV4ICE9PSBpKSB7XG5cdCAgICAgICAgICBlbC5zZWxlY3RlZEluZGV4ID0gaTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFpc011bHRpcGxlKSB7XG5cdCAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYXNOb01hdGNoaW5nT3B0aW9uICh2YWx1ZSwgb3B0aW9ucykge1xuXHQgIHJldHVybiBvcHRpb25zLmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhbG9vc2VFcXVhbChvLCB2YWx1ZSk7IH0pXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFZhbHVlIChvcHRpb24pIHtcblx0ICByZXR1cm4gJ192YWx1ZScgaW4gb3B0aW9uXG5cdCAgICA/IG9wdGlvbi5fdmFsdWVcblx0ICAgIDogb3B0aW9uLnZhbHVlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9uQ29tcG9zaXRpb25TdGFydCAoZSkge1xuXHQgIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9uQ29tcG9zaXRpb25FbmQgKGUpIHtcblx0ICAvLyBwcmV2ZW50IHRyaWdnZXJpbmcgYW4gaW5wdXQgZXZlbnQgZm9yIG5vIHJlYXNvblxuXHQgIGlmICghZS50YXJnZXQuY29tcG9zaW5nKSB7IHJldHVybiB9XG5cdCAgZS50YXJnZXQuY29tcG9zaW5nID0gZmFsc2U7XG5cdCAgdHJpZ2dlcihlLnRhcmdldCwgJ2lucHV0Jyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRyaWdnZXIgKGVsLCB0eXBlKSB7XG5cdCAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuXHQgIGUuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpO1xuXHQgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gcmVjdXJzaXZlbHkgc2VhcmNoIGZvciBwb3NzaWJsZSB0cmFuc2l0aW9uIGRlZmluZWQgaW5zaWRlIHRoZSBjb21wb25lbnQgcm9vdFxuXHRmdW5jdGlvbiBsb2NhdGVOb2RlICh2bm9kZSkge1xuXHQgIHJldHVybiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSAmJiAoIXZub2RlLmRhdGEgfHwgIXZub2RlLmRhdGEudHJhbnNpdGlvbilcblx0ICAgID8gbG9jYXRlTm9kZSh2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpXG5cdCAgICA6IHZub2RlXG5cdH1cblx0XG5cdHZhciBzaG93ID0ge1xuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQgKGVsLCByZWYsIHZub2RlKSB7XG5cdCAgICB2YXIgdmFsdWUgPSByZWYudmFsdWU7XG5cdFxuXHQgICAgdm5vZGUgPSBsb2NhdGVOb2RlKHZub2RlKTtcblx0ICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247XG5cdCAgICB2YXIgb3JpZ2luYWxEaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5ID1cblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJycgOiBlbC5zdHlsZS5kaXNwbGF5O1xuXHQgICAgaWYgKHZhbHVlICYmIHRyYW5zaXRpb24kJDEpIHtcblx0ICAgICAgdm5vZGUuZGF0YS5zaG93ID0gdHJ1ZTtcblx0ICAgICAgZW50ZXIodm5vZGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5O1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IG9yaWdpbmFsRGlzcGxheSA6ICdub25lJztcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSAoZWwsIHJlZiwgdm5vZGUpIHtcblx0ICAgIHZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcblx0ICAgIHZhciBvbGRWYWx1ZSA9IHJlZi5vbGRWYWx1ZTtcblx0XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghdmFsdWUgPT09ICFvbGRWYWx1ZSkgeyByZXR1cm4gfVxuXHQgICAgdm5vZGUgPSBsb2NhdGVOb2RlKHZub2RlKTtcblx0ICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247XG5cdCAgICBpZiAodHJhbnNpdGlvbiQkMSkge1xuXHQgICAgICB2bm9kZS5kYXRhLnNob3cgPSB0cnVlO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICBlbnRlcih2bm9kZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IGVsLl9fdk9yaWdpbmFsRGlzcGxheTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsZWF2ZSh2bm9kZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWwuX192T3JpZ2luYWxEaXNwbGF5IDogJ25vbmUnO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kIChcblx0ICAgIGVsLFxuXHQgICAgYmluZGluZyxcblx0ICAgIHZub2RlLFxuXHQgICAgb2xkVm5vZGUsXG5cdCAgICBpc0Rlc3Ryb3lcblx0ICApIHtcblx0ICAgIGlmICghaXNEZXN0cm95KSB7XG5cdCAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgcGxhdGZvcm1EaXJlY3RpdmVzID0ge1xuXHQgIG1vZGVsOiBkaXJlY3RpdmUsXG5cdCAgc2hvdzogc2hvd1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIFByb3ZpZGVzIHRyYW5zaXRpb24gc3VwcG9ydCBmb3IgYSBzaW5nbGUgZWxlbWVudC9jb21wb25lbnQuXG5cdC8vIHN1cHBvcnRzIHRyYW5zaXRpb24gbW9kZSAob3V0LWluIC8gaW4tb3V0KVxuXHRcblx0dmFyIHRyYW5zaXRpb25Qcm9wcyA9IHtcblx0ICBuYW1lOiBTdHJpbmcsXG5cdCAgYXBwZWFyOiBCb29sZWFuLFxuXHQgIGNzczogQm9vbGVhbixcblx0ICBtb2RlOiBTdHJpbmcsXG5cdCAgdHlwZTogU3RyaW5nLFxuXHQgIGVudGVyQ2xhc3M6IFN0cmluZyxcblx0ICBsZWF2ZUNsYXNzOiBTdHJpbmcsXG5cdCAgZW50ZXJUb0NsYXNzOiBTdHJpbmcsXG5cdCAgbGVhdmVUb0NsYXNzOiBTdHJpbmcsXG5cdCAgZW50ZXJBY3RpdmVDbGFzczogU3RyaW5nLFxuXHQgIGxlYXZlQWN0aXZlQ2xhc3M6IFN0cmluZyxcblx0ICBhcHBlYXJDbGFzczogU3RyaW5nLFxuXHQgIGFwcGVhckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG5cdCAgYXBwZWFyVG9DbGFzczogU3RyaW5nLFxuXHQgIGR1cmF0aW9uOiBbTnVtYmVyLCBTdHJpbmcsIE9iamVjdF1cblx0fTtcblx0XG5cdC8vIGluIGNhc2UgdGhlIGNoaWxkIGlzIGFsc28gYW4gYWJzdHJhY3QgY29tcG9uZW50LCBlLmcuIDxrZWVwLWFsaXZlPlxuXHQvLyB3ZSB3YW50IHRvIHJlY3Vyc2l2ZWx5IHJldHJpZXZlIHRoZSByZWFsIGNvbXBvbmVudCB0byBiZSByZW5kZXJlZFxuXHRmdW5jdGlvbiBnZXRSZWFsQ2hpbGQgKHZub2RlKSB7XG5cdCAgdmFyIGNvbXBPcHRpb25zID0gdm5vZGUgJiYgdm5vZGUuY29tcG9uZW50T3B0aW9ucztcblx0ICBpZiAoY29tcE9wdGlvbnMgJiYgY29tcE9wdGlvbnMuQ3Rvci5vcHRpb25zLmFic3RyYWN0KSB7XG5cdCAgICByZXR1cm4gZ2V0UmVhbENoaWxkKGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoY29tcE9wdGlvbnMuY2hpbGRyZW4pKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gdm5vZGVcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RUcmFuc2l0aW9uRGF0YSAoY29tcCkge1xuXHQgIHZhciBkYXRhID0ge307XG5cdCAgdmFyIG9wdGlvbnMgPSBjb21wLiRvcHRpb25zO1xuXHQgIC8vIHByb3BzXG5cdCAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMucHJvcHNEYXRhKSB7XG5cdCAgICBkYXRhW2tleV0gPSBjb21wW2tleV07XG5cdCAgfVxuXHQgIC8vIGV2ZW50cy5cblx0ICAvLyBleHRyYWN0IGxpc3RlbmVycyBhbmQgcGFzcyB0aGVtIGRpcmVjdGx5IHRvIHRoZSB0cmFuc2l0aW9uIG1ldGhvZHNcblx0ICB2YXIgbGlzdGVuZXJzID0gb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuXHQgIGZvciAodmFyIGtleSQxIGluIGxpc3RlbmVycykge1xuXHQgICAgZGF0YVtjYW1lbGl6ZShrZXkkMSldID0gbGlzdGVuZXJzW2tleSQxXTtcblx0ICB9XG5cdCAgcmV0dXJuIGRhdGFcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGxhY2Vob2xkZXIgKGgsIHJhd0NoaWxkKSB7XG5cdCAgaWYgKC9cXGQta2VlcC1hbGl2ZSQvLnRlc3QocmF3Q2hpbGQudGFnKSkge1xuXHQgICAgcmV0dXJuIGgoJ2tlZXAtYWxpdmUnLCB7XG5cdCAgICAgIHByb3BzOiByYXdDaGlsZC5jb21wb25lbnRPcHRpb25zLnByb3BzRGF0YVxuXHQgICAgfSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhc1BhcmVudFRyYW5zaXRpb24gKHZub2RlKSB7XG5cdCAgd2hpbGUgKCh2bm9kZSA9IHZub2RlLnBhcmVudCkpIHtcblx0ICAgIGlmICh2bm9kZS5kYXRhLnRyYW5zaXRpb24pIHtcblx0ICAgICAgcmV0dXJuIHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU2FtZUNoaWxkIChjaGlsZCwgb2xkQ2hpbGQpIHtcblx0ICByZXR1cm4gb2xkQ2hpbGQua2V5ID09PSBjaGlsZC5rZXkgJiYgb2xkQ2hpbGQudGFnID09PSBjaGlsZC50YWdcblx0fVxuXHRcblx0dmFyIFRyYW5zaXRpb24gPSB7XG5cdCAgbmFtZTogJ3RyYW5zaXRpb24nLFxuXHQgIHByb3BzOiB0cmFuc2l0aW9uUHJvcHMsXG5cdCAgYWJzdHJhY3Q6IHRydWUsXG5cdFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0O1xuXHQgICAgaWYgKCFjaGlsZHJlbikge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICAvLyBmaWx0ZXIgb3V0IHRleHQgbm9kZXMgKHBvc3NpYmxlIHdoaXRlc3BhY2VzKVxuXHQgICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMudGFnIHx8IGlzQXN5bmNQbGFjZWhvbGRlcihjKTsgfSk7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdhcm4gbXVsdGlwbGUgZWxlbWVudHNcblx0ICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjaGlsZHJlbi5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgJzx0cmFuc2l0aW9uPiBjYW4gb25seSBiZSB1c2VkIG9uIGEgc2luZ2xlIGVsZW1lbnQuIFVzZSAnICtcblx0ICAgICAgICAnPHRyYW5zaXRpb24tZ3JvdXA+IGZvciBsaXN0cy4nLFxuXHQgICAgICAgIHRoaXMuJHBhcmVudFxuXHQgICAgICApO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBtb2RlID0gdGhpcy5tb2RlO1xuXHRcblx0ICAgIC8vIHdhcm4gaW52YWxpZCBtb2RlXG5cdCAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcblx0ICAgICAgbW9kZSAmJiBtb2RlICE9PSAnaW4tb3V0JyAmJiBtb2RlICE9PSAnb3V0LWluJ1xuXHQgICAgKSB7XG5cdCAgICAgIHdhcm4oXG5cdCAgICAgICAgJ2ludmFsaWQgPHRyYW5zaXRpb24+IG1vZGU6ICcgKyBtb2RlLFxuXHQgICAgICAgIHRoaXMuJHBhcmVudFxuXHQgICAgICApO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByYXdDaGlsZCA9IGNoaWxkcmVuWzBdO1xuXHRcblx0ICAgIC8vIGlmIHRoaXMgaXMgYSBjb21wb25lbnQgcm9vdCBub2RlIGFuZCB0aGUgY29tcG9uZW50J3Ncblx0ICAgIC8vIHBhcmVudCBjb250YWluZXIgbm9kZSBhbHNvIGhhcyB0cmFuc2l0aW9uLCBza2lwLlxuXHQgICAgaWYgKGhhc1BhcmVudFRyYW5zaXRpb24odGhpcy4kdm5vZGUpKSB7XG5cdCAgICAgIHJldHVybiByYXdDaGlsZFxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFwcGx5IHRyYW5zaXRpb24gZGF0YSB0byBjaGlsZFxuXHQgICAgLy8gdXNlIGdldFJlYWxDaGlsZCgpIHRvIGlnbm9yZSBhYnN0cmFjdCBjb21wb25lbnRzIGUuZy4ga2VlcC1hbGl2ZVxuXHQgICAgdmFyIGNoaWxkID0gZ2V0UmVhbENoaWxkKHJhd0NoaWxkKTtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFjaGlsZCkge1xuXHQgICAgICByZXR1cm4gcmF3Q2hpbGRcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodGhpcy5fbGVhdmluZykge1xuXHQgICAgICByZXR1cm4gcGxhY2Vob2xkZXIoaCwgcmF3Q2hpbGQpXG5cdCAgICB9XG5cdFxuXHQgICAgLy8gZW5zdXJlIGEga2V5IHRoYXQgaXMgdW5pcXVlIHRvIHRoZSB2bm9kZSB0eXBlIGFuZCB0byB0aGlzIHRyYW5zaXRpb25cblx0ICAgIC8vIGNvbXBvbmVudCBpbnN0YW5jZS4gVGhpcyBrZXkgd2lsbCBiZSB1c2VkIHRvIHJlbW92ZSBwZW5kaW5nIGxlYXZpbmcgbm9kZXNcblx0ICAgIC8vIGR1cmluZyBlbnRlcmluZy5cblx0ICAgIHZhciBpZCA9IFwiX190cmFuc2l0aW9uLVwiICsgKHRoaXMuX3VpZCkgKyBcIi1cIjtcblx0ICAgIGNoaWxkLmtleSA9IGNoaWxkLmtleSA9PSBudWxsXG5cdCAgICAgID8gY2hpbGQuaXNDb21tZW50XG5cdCAgICAgICAgPyBpZCArICdjb21tZW50J1xuXHQgICAgICAgIDogaWQgKyBjaGlsZC50YWdcblx0ICAgICAgOiBpc1ByaW1pdGl2ZShjaGlsZC5rZXkpXG5cdCAgICAgICAgPyAoU3RyaW5nKGNoaWxkLmtleSkuaW5kZXhPZihpZCkgPT09IDAgPyBjaGlsZC5rZXkgOiBpZCArIGNoaWxkLmtleSlcblx0ICAgICAgICA6IGNoaWxkLmtleTtcblx0XG5cdCAgICB2YXIgZGF0YSA9IChjaGlsZC5kYXRhIHx8IChjaGlsZC5kYXRhID0ge30pKS50cmFuc2l0aW9uID0gZXh0cmFjdFRyYW5zaXRpb25EYXRhKHRoaXMpO1xuXHQgICAgdmFyIG9sZFJhd0NoaWxkID0gdGhpcy5fdm5vZGU7XG5cdCAgICB2YXIgb2xkQ2hpbGQgPSBnZXRSZWFsQ2hpbGQob2xkUmF3Q2hpbGQpO1xuXHRcblx0ICAgIC8vIG1hcmsgdi1zaG93XG5cdCAgICAvLyBzbyB0aGF0IHRoZSB0cmFuc2l0aW9uIG1vZHVsZSBjYW4gaGFuZCBvdmVyIHRoZSBjb250cm9sIHRvIHRoZSBkaXJlY3RpdmVcblx0ICAgIGlmIChjaGlsZC5kYXRhLmRpcmVjdGl2ZXMgJiYgY2hpbGQuZGF0YS5kaXJlY3RpdmVzLnNvbWUoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQubmFtZSA9PT0gJ3Nob3cnOyB9KSkge1xuXHQgICAgICBjaGlsZC5kYXRhLnNob3cgPSB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChcblx0ICAgICAgb2xkQ2hpbGQgJiZcblx0ICAgICAgb2xkQ2hpbGQuZGF0YSAmJlxuXHQgICAgICAhaXNTYW1lQ2hpbGQoY2hpbGQsIG9sZENoaWxkKSAmJlxuXHQgICAgICAhaXNBc3luY1BsYWNlaG9sZGVyKG9sZENoaWxkKSAmJlxuXHQgICAgICAvLyAjNjY4NyBjb21wb25lbnQgcm9vdCBpcyBhIGNvbW1lbnQgbm9kZVxuXHQgICAgICAhKG9sZENoaWxkLmNvbXBvbmVudEluc3RhbmNlICYmIG9sZENoaWxkLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpXG5cdCAgICApIHtcblx0ICAgICAgLy8gcmVwbGFjZSBvbGQgY2hpbGQgdHJhbnNpdGlvbiBkYXRhIHdpdGggZnJlc2ggb25lXG5cdCAgICAgIC8vIGltcG9ydGFudCBmb3IgZHluYW1pYyB0cmFuc2l0aW9ucyFcblx0ICAgICAgdmFyIG9sZERhdGEgPSBvbGRDaGlsZC5kYXRhLnRyYW5zaXRpb24gPSBleHRlbmQoe30sIGRhdGEpO1xuXHQgICAgICAvLyBoYW5kbGUgdHJhbnNpdGlvbiBtb2RlXG5cdCAgICAgIGlmIChtb2RlID09PSAnb3V0LWluJykge1xuXHQgICAgICAgIC8vIHJldHVybiBwbGFjZWhvbGRlciBub2RlIGFuZCBxdWV1ZSB1cGRhdGUgd2hlbiBsZWF2ZSBmaW5pc2hlc1xuXHQgICAgICAgIHRoaXMuX2xlYXZpbmcgPSB0cnVlO1xuXHQgICAgICAgIG1lcmdlVk5vZGVIb29rKG9sZERhdGEsICdhZnRlckxlYXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdGhpcyQxLl9sZWF2aW5nID0gZmFsc2U7XG5cdCAgICAgICAgICB0aGlzJDEuJGZvcmNlVXBkYXRlKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyKGgsIHJhd0NoaWxkKVxuXHQgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdpbi1vdXQnKSB7XG5cdCAgICAgICAgaWYgKGlzQXN5bmNQbGFjZWhvbGRlcihjaGlsZCkpIHtcblx0ICAgICAgICAgIHJldHVybiBvbGRSYXdDaGlsZFxuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgZGVsYXllZExlYXZlO1xuXHQgICAgICAgIHZhciBwZXJmb3JtTGVhdmUgPSBmdW5jdGlvbiAoKSB7IGRlbGF5ZWRMZWF2ZSgpOyB9O1xuXHQgICAgICAgIG1lcmdlVk5vZGVIb29rKGRhdGEsICdhZnRlckVudGVyJywgcGVyZm9ybUxlYXZlKTtcblx0ICAgICAgICBtZXJnZVZOb2RlSG9vayhkYXRhLCAnZW50ZXJDYW5jZWxsZWQnLCBwZXJmb3JtTGVhdmUpO1xuXHQgICAgICAgIG1lcmdlVk5vZGVIb29rKG9sZERhdGEsICdkZWxheUxlYXZlJywgZnVuY3Rpb24gKGxlYXZlKSB7IGRlbGF5ZWRMZWF2ZSA9IGxlYXZlOyB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByYXdDaGlsZFxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyBQcm92aWRlcyB0cmFuc2l0aW9uIHN1cHBvcnQgZm9yIGxpc3QgaXRlbXMuXG5cdC8vIHN1cHBvcnRzIG1vdmUgdHJhbnNpdGlvbnMgdXNpbmcgdGhlIEZMSVAgdGVjaG5pcXVlLlxuXHRcblx0Ly8gQmVjYXVzZSB0aGUgdmRvbSdzIGNoaWxkcmVuIHVwZGF0ZSBhbGdvcml0aG0gaXMgXCJ1bnN0YWJsZVwiIC0gaS5lLlxuXHQvLyBpdCBkb2Vzbid0IGd1YXJhbnRlZSB0aGUgcmVsYXRpdmUgcG9zaXRpb25pbmcgb2YgcmVtb3ZlZCBlbGVtZW50cyxcblx0Ly8gd2UgZm9yY2UgdHJhbnNpdGlvbi1ncm91cCB0byB1cGRhdGUgaXRzIGNoaWxkcmVuIGludG8gdHdvIHBhc3Nlczpcblx0Ly8gaW4gdGhlIGZpcnN0IHBhc3MsIHdlIHJlbW92ZSBhbGwgbm9kZXMgdGhhdCBuZWVkIHRvIGJlIHJlbW92ZWQsXG5cdC8vIHRyaWdnZXJpbmcgdGhlaXIgbGVhdmluZyB0cmFuc2l0aW9uOyBpbiB0aGUgc2Vjb25kIHBhc3MsIHdlIGluc2VydC9tb3ZlXG5cdC8vIGludG8gdGhlIGZpbmFsIGRlc2lyZWQgc3RhdGUuIFRoaXMgd2F5IGluIHRoZSBzZWNvbmQgcGFzcyByZW1vdmVkXG5cdC8vIG5vZGVzIHdpbGwgcmVtYWluIHdoZXJlIHRoZXkgc2hvdWxkIGJlLlxuXHRcblx0dmFyIHByb3BzID0gZXh0ZW5kKHtcblx0ICB0YWc6IFN0cmluZyxcblx0ICBtb3ZlQ2xhc3M6IFN0cmluZ1xuXHR9LCB0cmFuc2l0aW9uUHJvcHMpO1xuXHRcblx0ZGVsZXRlIHByb3BzLm1vZGU7XG5cdFxuXHR2YXIgVHJhbnNpdGlvbkdyb3VwID0ge1xuXHQgIHByb3BzOiBwcm9wcyxcblx0XG5cdCAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKGgpIHtcblx0ICAgIHZhciB0YWcgPSB0aGlzLnRhZyB8fCB0aGlzLiR2bm9kZS5kYXRhLnRhZyB8fCAnc3Bhbic7XG5cdCAgICB2YXIgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgIHZhciBwcmV2Q2hpbGRyZW4gPSB0aGlzLnByZXZDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47XG5cdCAgICB2YXIgcmF3Q2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0IHx8IFtdO1xuXHQgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbiA9IFtdO1xuXHQgICAgdmFyIHRyYW5zaXRpb25EYXRhID0gZXh0cmFjdFRyYW5zaXRpb25EYXRhKHRoaXMpO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGMgPSByYXdDaGlsZHJlbltpXTtcblx0ICAgICAgaWYgKGMudGFnKSB7XG5cdCAgICAgICAgaWYgKGMua2V5ICE9IG51bGwgJiYgU3RyaW5nKGMua2V5KS5pbmRleE9mKCdfX3ZsaXN0JykgIT09IDApIHtcblx0ICAgICAgICAgIGNoaWxkcmVuLnB1c2goYyk7XG5cdCAgICAgICAgICBtYXBbYy5rZXldID0gY1xuXHQgICAgICAgICAgOyhjLmRhdGEgfHwgKGMuZGF0YSA9IHt9KSkudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25EYXRhO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB2YXIgb3B0cyA9IGMuY29tcG9uZW50T3B0aW9ucztcblx0ICAgICAgICAgIHZhciBuYW1lID0gb3B0cyA/IChvcHRzLkN0b3Iub3B0aW9ucy5uYW1lIHx8IG9wdHMudGFnIHx8ICcnKSA6IGMudGFnO1xuXHQgICAgICAgICAgd2FybigoXCI8dHJhbnNpdGlvbi1ncm91cD4gY2hpbGRyZW4gbXVzdCBiZSBrZXllZDogPFwiICsgbmFtZSArIFwiPlwiKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHByZXZDaGlsZHJlbikge1xuXHQgICAgICB2YXIga2VwdCA9IFtdO1xuXHQgICAgICB2YXIgcmVtb3ZlZCA9IFtdO1xuXHQgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBwcmV2Q2hpbGRyZW4ubGVuZ3RoOyBpJDErKykge1xuXHQgICAgICAgIHZhciBjJDEgPSBwcmV2Q2hpbGRyZW5baSQxXTtcblx0ICAgICAgICBjJDEuZGF0YS50cmFuc2l0aW9uID0gdHJhbnNpdGlvbkRhdGE7XG5cdCAgICAgICAgYyQxLmRhdGEucG9zID0gYyQxLmVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICAgICAgICBpZiAobWFwW2MkMS5rZXldKSB7XG5cdCAgICAgICAgICBrZXB0LnB1c2goYyQxKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmVtb3ZlZC5wdXNoKGMkMSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMua2VwdCA9IGgodGFnLCBudWxsLCBrZXB0KTtcblx0ICAgICAgdGhpcy5yZW1vdmVkID0gcmVtb3ZlZDtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gaCh0YWcsIG51bGwsIGNoaWxkcmVuKVxuXHQgIH0sXG5cdFxuXHQgIGJlZm9yZVVwZGF0ZTogZnVuY3Rpb24gYmVmb3JlVXBkYXRlICgpIHtcblx0ICAgIC8vIGZvcmNlIHJlbW92aW5nIHBhc3Ncblx0ICAgIHRoaXMuX19wYXRjaF9fKFxuXHQgICAgICB0aGlzLl92bm9kZSxcblx0ICAgICAgdGhpcy5rZXB0LFxuXHQgICAgICBmYWxzZSwgLy8gaHlkcmF0aW5nXG5cdCAgICAgIHRydWUgLy8gcmVtb3ZlT25seSAoIWltcG9ydGFudCwgYXZvaWRzIHVubmVjZXNzYXJ5IG1vdmVzKVxuXHQgICAgKTtcblx0ICAgIHRoaXMuX3Zub2RlID0gdGhpcy5rZXB0O1xuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQgKCkge1xuXHQgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcmV2Q2hpbGRyZW47XG5cdCAgICB2YXIgbW92ZUNsYXNzID0gdGhpcy5tb3ZlQ2xhc3MgfHwgKCh0aGlzLm5hbWUgfHwgJ3YnKSArICctbW92ZScpO1xuXHQgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGggfHwgIXRoaXMuaGFzTW92ZShjaGlsZHJlblswXS5lbG0sIG1vdmVDbGFzcykpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgLy8gd2UgZGl2aWRlIHRoZSB3b3JrIGludG8gdGhyZWUgbG9vcHMgdG8gYXZvaWQgbWl4aW5nIERPTSByZWFkcyBhbmQgd3JpdGVzXG5cdCAgICAvLyBpbiBlYWNoIGl0ZXJhdGlvbiAtIHdoaWNoIGhlbHBzIHByZXZlbnQgbGF5b3V0IHRocmFzaGluZy5cblx0ICAgIGNoaWxkcmVuLmZvckVhY2goY2FsbFBlbmRpbmdDYnMpO1xuXHQgICAgY2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7XG5cdCAgICBjaGlsZHJlbi5mb3JFYWNoKGFwcGx5VHJhbnNsYXRpb24pO1xuXHRcblx0ICAgIC8vIGZvcmNlIHJlZmxvdyB0byBwdXQgZXZlcnl0aGluZyBpbiBwb3NpdGlvblxuXHQgICAgLy8gYXNzaWduIHRvIHRoaXMgdG8gYXZvaWQgYmVpbmcgcmVtb3ZlZCBpbiB0cmVlLXNoYWtpbmdcblx0ICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuXHQgICAgdGhpcy5fcmVmbG93ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7XG5cdFxuXHQgICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuXHQgICAgICBpZiAoYy5kYXRhLm1vdmVkKSB7XG5cdCAgICAgICAgdmFyIGVsID0gYy5lbG07XG5cdCAgICAgICAgdmFyIHMgPSBlbC5zdHlsZTtcblx0ICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7XG5cdCAgICAgICAgcy50cmFuc2Zvcm0gPSBzLldlYmtpdFRyYW5zZm9ybSA9IHMudHJhbnNpdGlvbkR1cmF0aW9uID0gJyc7XG5cdCAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsIGVsLl9tb3ZlQ2IgPSBmdW5jdGlvbiBjYiAoZSkge1xuXHQgICAgICAgICAgaWYgKCFlIHx8IC90cmFuc2Zvcm0kLy50ZXN0KGUucHJvcGVydHlOYW1lKSkge1xuXHQgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmRFdmVudCwgY2IpO1xuXHQgICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDtcblx0ICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICBoYXNNb3ZlOiBmdW5jdGlvbiBoYXNNb3ZlIChlbCwgbW92ZUNsYXNzKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoIWhhc1RyYW5zaXRpb24pIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgICAgfVxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHRoaXMuX2hhc01vdmUpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5faGFzTW92ZVxuXHQgICAgICB9XG5cdCAgICAgIC8vIERldGVjdCB3aGV0aGVyIGFuIGVsZW1lbnQgd2l0aCB0aGUgbW92ZSBjbGFzcyBhcHBsaWVkIGhhc1xuXHQgICAgICAvLyBDU1MgdHJhbnNpdGlvbnMuIFNpbmNlIHRoZSBlbGVtZW50IG1heSBiZSBpbnNpZGUgYW4gZW50ZXJpbmdcblx0ICAgICAgLy8gdHJhbnNpdGlvbiBhdCB0aGlzIHZlcnkgbW9tZW50LCB3ZSBtYWtlIGEgY2xvbmUgb2YgaXQgYW5kIHJlbW92ZVxuXHQgICAgICAvLyBhbGwgb3RoZXIgdHJhbnNpdGlvbiBjbGFzc2VzIGFwcGxpZWQgdG8gZW5zdXJlIG9ubHkgdGhlIG1vdmUgY2xhc3Ncblx0ICAgICAgLy8gaXMgYXBwbGllZC5cblx0ICAgICAgdmFyIGNsb25lID0gZWwuY2xvbmVOb2RlKCk7XG5cdCAgICAgIGlmIChlbC5fdHJhbnNpdGlvbkNsYXNzZXMpIHtcblx0ICAgICAgICBlbC5fdHJhbnNpdGlvbkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7IHJlbW92ZUNsYXNzKGNsb25lLCBjbHMpOyB9KTtcblx0ICAgICAgfVxuXHQgICAgICBhZGRDbGFzcyhjbG9uZSwgbW92ZUNsYXNzKTtcblx0ICAgICAgY2xvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ICAgICAgdGhpcy4kZWwuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuXHQgICAgICB2YXIgaW5mbyA9IGdldFRyYW5zaXRpb25JbmZvKGNsb25lKTtcblx0ICAgICAgdGhpcy4kZWwucmVtb3ZlQ2hpbGQoY2xvbmUpO1xuXHQgICAgICByZXR1cm4gKHRoaXMuX2hhc01vdmUgPSBpbmZvLmhhc1RyYW5zZm9ybSlcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbGxQZW5kaW5nQ2JzIChjKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGMuZWxtLl9tb3ZlQ2IpIHtcblx0ICAgIGMuZWxtLl9tb3ZlQ2IoKTtcblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGMuZWxtLl9lbnRlckNiKSB7XG5cdCAgICBjLmVsbS5fZW50ZXJDYigpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVjb3JkUG9zaXRpb24gKGMpIHtcblx0ICBjLmRhdGEubmV3UG9zID0gYy5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFwcGx5VHJhbnNsYXRpb24gKGMpIHtcblx0ICB2YXIgb2xkUG9zID0gYy5kYXRhLnBvcztcblx0ICB2YXIgbmV3UG9zID0gYy5kYXRhLm5ld1Bvcztcblx0ICB2YXIgZHggPSBvbGRQb3MubGVmdCAtIG5ld1Bvcy5sZWZ0O1xuXHQgIHZhciBkeSA9IG9sZFBvcy50b3AgLSBuZXdQb3MudG9wO1xuXHQgIGlmIChkeCB8fCBkeSkge1xuXHQgICAgYy5kYXRhLm1vdmVkID0gdHJ1ZTtcblx0ICAgIHZhciBzID0gYy5lbG0uc3R5bGU7XG5cdCAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyBkeCArIFwicHgsXCIgKyBkeSArIFwicHgpXCI7XG5cdCAgICBzLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwcyc7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgcGxhdGZvcm1Db21wb25lbnRzID0ge1xuXHQgIFRyYW5zaXRpb246IFRyYW5zaXRpb24sXG5cdCAgVHJhbnNpdGlvbkdyb3VwOiBUcmFuc2l0aW9uR3JvdXBcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyBpbnN0YWxsIHBsYXRmb3JtIHNwZWNpZmljIHV0aWxzXG5cdFZ1ZS5jb25maWcubXVzdFVzZVByb3AgPSBtdXN0VXNlUHJvcDtcblx0VnVlLmNvbmZpZy5pc1Jlc2VydmVkVGFnID0gaXNSZXNlcnZlZFRhZztcblx0VnVlLmNvbmZpZy5pc1Jlc2VydmVkQXR0ciA9IGlzUmVzZXJ2ZWRBdHRyO1xuXHRWdWUuY29uZmlnLmdldFRhZ05hbWVzcGFjZSA9IGdldFRhZ05hbWVzcGFjZTtcblx0VnVlLmNvbmZpZy5pc1Vua25vd25FbGVtZW50ID0gaXNVbmtub3duRWxlbWVudDtcblx0XG5cdC8vIGluc3RhbGwgcGxhdGZvcm0gcnVudGltZSBkaXJlY3RpdmVzICYgY29tcG9uZW50c1xuXHRleHRlbmQoVnVlLm9wdGlvbnMuZGlyZWN0aXZlcywgcGxhdGZvcm1EaXJlY3RpdmVzKTtcblx0ZXh0ZW5kKFZ1ZS5vcHRpb25zLmNvbXBvbmVudHMsIHBsYXRmb3JtQ29tcG9uZW50cyk7XG5cdFxuXHQvLyBpbnN0YWxsIHBsYXRmb3JtIHBhdGNoIGZ1bmN0aW9uXG5cdFZ1ZS5wcm90b3R5cGUuX19wYXRjaF9fID0gaW5Ccm93c2VyID8gcGF0Y2ggOiBub29wO1xuXHRcblx0Ly8gcHVibGljIG1vdW50IG1ldGhvZFxuXHRWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChcblx0ICBlbCxcblx0ICBoeWRyYXRpbmdcblx0KSB7XG5cdCAgZWwgPSBlbCAmJiBpbkJyb3dzZXIgPyBxdWVyeShlbCkgOiB1bmRlZmluZWQ7XG5cdCAgcmV0dXJuIG1vdW50Q29tcG9uZW50KHRoaXMsIGVsLCBoeWRyYXRpbmcpXG5cdH07XG5cdFxuXHQvLyBkZXZ0b29scyBnbG9iYWwgaG9va1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRpZiAoaW5Ccm93c2VyKSB7XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICAgIGlmIChkZXZ0b29scykge1xuXHQgICAgICAgIGRldnRvb2xzLmVtaXQoJ2luaXQnLCBWdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKFxuXHQgICAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAndGVzdCcgJiZcblx0ICAgICAgICBpc0Nocm9tZVxuXHQgICAgICApIHtcblx0ICAgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXShcblx0ICAgICAgICAgICdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGV4dGVuc2lvbiBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICtcblx0ICAgICAgICAgICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJ1xuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgICBcImRldmVsb3BtZW50XCIgIT09ICd0ZXN0JyAmJlxuXHQgICAgICBjb25maWcucHJvZHVjdGlvblRpcCAhPT0gZmFsc2UgJiZcblx0ICAgICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnXG5cdCAgICApIHtcblx0ICAgICAgY29uc29sZVtjb25zb2xlLmluZm8gPyAnaW5mbycgOiAnbG9nJ10oXG5cdCAgICAgICAgXCJZb3UgYXJlIHJ1bm5pbmcgVnVlIGluIGRldmVsb3BtZW50IG1vZGUuXFxuXCIgK1xuXHQgICAgICAgIFwiTWFrZSBzdXJlIHRvIHR1cm4gb24gcHJvZHVjdGlvbiBtb2RlIHdoZW4gZGVwbG95aW5nIGZvciBwcm9kdWN0aW9uLlxcblwiICtcblx0ICAgICAgICBcIlNlZSBtb3JlIHRpcHMgYXQgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvZGVwbG95bWVudC5odG1sXCJcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9LCAwKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgZGVmYXVsdFRhZ1JFID0gL1xce1xceygoPzoufFxcbikrPylcXH1cXH0vZztcblx0dmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXHRcblx0dmFyIGJ1aWxkUmVnZXggPSBjYWNoZWQoZnVuY3Rpb24gKGRlbGltaXRlcnMpIHtcblx0ICB2YXIgb3BlbiA9IGRlbGltaXRlcnNbMF0ucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG5cdCAgdmFyIGNsb3NlID0gZGVsaW1pdGVyc1sxXS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcblx0ICByZXR1cm4gbmV3IFJlZ0V4cChvcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyBjbG9zZSwgJ2cnKVxuXHR9KTtcblx0XG5cdFxuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZXh0IChcblx0ICB0ZXh0LFxuXHQgIGRlbGltaXRlcnNcblx0KSB7XG5cdCAgdmFyIHRhZ1JFID0gZGVsaW1pdGVycyA/IGJ1aWxkUmVnZXgoZGVsaW1pdGVycykgOiBkZWZhdWx0VGFnUkU7XG5cdCAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgdmFyIHRva2VucyA9IFtdO1xuXHQgIHZhciByYXdUb2tlbnMgPSBbXTtcblx0ICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcblx0ICB2YXIgbWF0Y2gsIGluZGV4LCB0b2tlblZhbHVlO1xuXHQgIHdoaWxlICgobWF0Y2ggPSB0YWdSRS5leGVjKHRleHQpKSkge1xuXHQgICAgaW5kZXggPSBtYXRjaC5pbmRleDtcblx0ICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuXHQgICAgaWYgKGluZGV4ID4gbGFzdEluZGV4KSB7XG5cdCAgICAgIHJhd1Rva2Vucy5wdXNoKHRva2VuVmFsdWUgPSB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpKTtcblx0ICAgICAgdG9rZW5zLnB1c2goSlNPTi5zdHJpbmdpZnkodG9rZW5WYWx1ZSkpO1xuXHQgICAgfVxuXHQgICAgLy8gdGFnIHRva2VuXG5cdCAgICB2YXIgZXhwID0gcGFyc2VGaWx0ZXJzKG1hdGNoWzFdLnRyaW0oKSk7XG5cdCAgICB0b2tlbnMucHVzaCgoXCJfcyhcIiArIGV4cCArIFwiKVwiKSk7XG5cdCAgICByYXdUb2tlbnMucHVzaCh7ICdAYmluZGluZyc6IGV4cCB9KTtcblx0ICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXHQgIH1cblx0ICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHtcblx0ICAgIHJhd1Rva2Vucy5wdXNoKHRva2VuVmFsdWUgPSB0ZXh0LnNsaWNlKGxhc3RJbmRleCkpO1xuXHQgICAgdG9rZW5zLnB1c2goSlNPTi5zdHJpbmdpZnkodG9rZW5WYWx1ZSkpO1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgZXhwcmVzc2lvbjogdG9rZW5zLmpvaW4oJysnKSxcblx0ICAgIHRva2VuczogcmF3VG9rZW5zXG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGUgKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHdhcm4gPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47XG5cdCAgdmFyIHN0YXRpY0NsYXNzID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ2NsYXNzJyk7XG5cdCAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHN0YXRpY0NsYXNzKSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VUZXh0KHN0YXRpY0NsYXNzLCBvcHRpb25zLmRlbGltaXRlcnMpO1xuXHQgICAgaWYgKHJlcykge1xuXHQgICAgICB3YXJuKFxuXHQgICAgICAgIFwiY2xhc3M9XFxcIlwiICsgc3RhdGljQ2xhc3MgKyBcIlxcXCI6IFwiICtcblx0ICAgICAgICAnSW50ZXJwb2xhdGlvbiBpbnNpZGUgYXR0cmlidXRlcyBoYXMgYmVlbiByZW1vdmVkLiAnICtcblx0ICAgICAgICAnVXNlIHYtYmluZCBvciB0aGUgY29sb24gc2hvcnRoYW5kIGluc3RlYWQuIEZvciBleGFtcGxlLCAnICtcblx0ICAgICAgICAnaW5zdGVhZCBvZiA8ZGl2IGNsYXNzPVwie3sgdmFsIH19XCI+LCB1c2UgPGRpdiA6Y2xhc3M9XCJ2YWxcIj4uJ1xuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoc3RhdGljQ2xhc3MpIHtcblx0ICAgIGVsLnN0YXRpY0NsYXNzID0gSlNPTi5zdHJpbmdpZnkoc3RhdGljQ2xhc3MpO1xuXHQgIH1cblx0ICB2YXIgY2xhc3NCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdjbGFzcycsIGZhbHNlIC8qIGdldFN0YXRpYyAqLyk7XG5cdCAgaWYgKGNsYXNzQmluZGluZykge1xuXHQgICAgZWwuY2xhc3NCaW5kaW5nID0gY2xhc3NCaW5kaW5nO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuRGF0YSAoZWwpIHtcblx0ICB2YXIgZGF0YSA9ICcnO1xuXHQgIGlmIChlbC5zdGF0aWNDbGFzcykge1xuXHQgICAgZGF0YSArPSBcInN0YXRpY0NsYXNzOlwiICsgKGVsLnN0YXRpY0NsYXNzKSArIFwiLFwiO1xuXHQgIH1cblx0ICBpZiAoZWwuY2xhc3NCaW5kaW5nKSB7XG5cdCAgICBkYXRhICs9IFwiY2xhc3M6XCIgKyAoZWwuY2xhc3NCaW5kaW5nKSArIFwiLFwiO1xuXHQgIH1cblx0ICByZXR1cm4gZGF0YVxuXHR9XG5cdFxuXHR2YXIga2xhc3MkMSA9IHtcblx0ICBzdGF0aWNLZXlzOiBbJ3N0YXRpY0NsYXNzJ10sXG5cdCAgdHJhbnNmb3JtTm9kZTogdHJhbnNmb3JtTm9kZSxcblx0ICBnZW5EYXRhOiBnZW5EYXRhXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNmb3JtTm9kZSQxIChlbCwgb3B0aW9ucykge1xuXHQgIHZhciB3YXJuID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuO1xuXHQgIHZhciBzdGF0aWNTdHlsZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzdHlsZScpO1xuXHQgIGlmIChzdGF0aWNTdHlsZSkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICB7XG5cdCAgICAgIHZhciByZXMgPSBwYXJzZVRleHQoc3RhdGljU3R5bGUsIG9wdGlvbnMuZGVsaW1pdGVycyk7XG5cdCAgICAgIGlmIChyZXMpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgXCJzdHlsZT1cXFwiXCIgKyBzdGF0aWNTdHlsZSArIFwiXFxcIjogXCIgK1xuXHQgICAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArXG5cdCAgICAgICAgICAnVXNlIHYtYmluZCBvciB0aGUgY29sb24gc2hvcnRoYW5kIGluc3RlYWQuIEZvciBleGFtcGxlLCAnICtcblx0ICAgICAgICAgICdpbnN0ZWFkIG9mIDxkaXYgc3R5bGU9XCJ7eyB2YWwgfX1cIj4sIHVzZSA8ZGl2IDpzdHlsZT1cInZhbFwiPi4nXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZWwuc3RhdGljU3R5bGUgPSBKU09OLnN0cmluZ2lmeShwYXJzZVN0eWxlVGV4dChzdGF0aWNTdHlsZSkpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHN0eWxlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnc3R5bGUnLCBmYWxzZSAvKiBnZXRTdGF0aWMgKi8pO1xuXHQgIGlmIChzdHlsZUJpbmRpbmcpIHtcblx0ICAgIGVsLnN0eWxlQmluZGluZyA9IHN0eWxlQmluZGluZztcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbkRhdGEkMSAoZWwpIHtcblx0ICB2YXIgZGF0YSA9ICcnO1xuXHQgIGlmIChlbC5zdGF0aWNTdHlsZSkge1xuXHQgICAgZGF0YSArPSBcInN0YXRpY1N0eWxlOlwiICsgKGVsLnN0YXRpY1N0eWxlKSArIFwiLFwiO1xuXHQgIH1cblx0ICBpZiAoZWwuc3R5bGVCaW5kaW5nKSB7XG5cdCAgICBkYXRhICs9IFwic3R5bGU6KFwiICsgKGVsLnN0eWxlQmluZGluZykgKyBcIiksXCI7XG5cdCAgfVxuXHQgIHJldHVybiBkYXRhXG5cdH1cblx0XG5cdHZhciBzdHlsZSQxID0ge1xuXHQgIHN0YXRpY0tleXM6IFsnc3RhdGljU3R5bGUnXSxcblx0ICB0cmFuc2Zvcm1Ob2RlOiB0cmFuc2Zvcm1Ob2RlJDEsXG5cdCAgZ2VuRGF0YTogZ2VuRGF0YSQxXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGRlY29kZXI7XG5cdFxuXHR2YXIgaGUgPSB7XG5cdCAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUgKGh0bWwpIHtcblx0ICAgIGRlY29kZXIgPSBkZWNvZGVyIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgZGVjb2Rlci5pbm5lckhUTUwgPSBodG1sO1xuXHQgICAgcmV0dXJuIGRlY29kZXIudGV4dENvbnRlbnRcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGlzVW5hcnlUYWcgPSBtYWtlTWFwKFxuXHQgICdhcmVhLGJhc2UsYnIsY29sLGVtYmVkLGZyYW1lLGhyLGltZyxpbnB1dCxpc2luZGV4LGtleWdlbiwnICtcblx0ICAnbGluayxtZXRhLHBhcmFtLHNvdXJjZSx0cmFjayx3YnInXG5cdCk7XG5cdFxuXHQvLyBFbGVtZW50cyB0aGF0IHlvdSBjYW4sIGludGVudGlvbmFsbHksIGxlYXZlIG9wZW5cblx0Ly8gKGFuZCB3aGljaCBjbG9zZSB0aGVtc2VsdmVzKVxuXHR2YXIgY2FuQmVMZWZ0T3BlblRhZyA9IG1ha2VNYXAoXG5cdCAgJ2NvbGdyb3VwLGRkLGR0LGxpLG9wdGlvbnMscCx0ZCx0Zm9vdCx0aCx0aGVhZCx0cixzb3VyY2UnXG5cdCk7XG5cdFxuXHQvLyBIVE1MNSB0YWdzIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbCNlbGVtZW50cy0zXG5cdC8vIFBocmFzaW5nIENvbnRlbnQgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZG9tLmh0bWwjcGhyYXNpbmctY29udGVudFxuXHR2YXIgaXNOb25QaHJhc2luZ1RhZyA9IG1ha2VNYXAoXG5cdCAgJ2FkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCwnICtcblx0ICAnZGV0YWlscyxkaWFsb2csZGl2LGRsLGR0LGZpZWxkc2V0LGZpZ2NhcHRpb24sZmlndXJlLGZvb3Rlcixmb3JtLCcgK1xuXHQgICdoMSxoMixoMyxoNCxoNSxoNixoZWFkLGhlYWRlcixoZ3JvdXAsaHIsaHRtbCxsZWdlbmQsbGksbWVudWl0ZW0sbWV0YSwnICtcblx0ICAnb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLCcgK1xuXHQgICd0aXRsZSx0cix0cmFjaydcblx0KTtcblx0XG5cdC8qKlxuXHQgKiBOb3QgdHlwZS1jaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBpdCdzIG1vc3RseSB2ZW5kb3IgY29kZS5cblx0ICovXG5cdFxuXHQvKiFcblx0ICogSFRNTCBQYXJzZXIgQnkgSm9obiBSZXNpZyAoZWpvaG4ub3JnKVxuXHQgKiBNb2RpZmllZCBieSBKdXJpeSBcImthbmdheFwiIFpheXRzZXZcblx0ICogT3JpZ2luYWwgY29kZSBieSBFcmlrIEFydmlkc3NvbiwgTW96aWxsYSBQdWJsaWMgTGljZW5zZVxuXHQgKiBodHRwOi8vZXJpay5lYWUubmV0L3NpbXBsZWh0bWxwYXJzZXIvc2ltcGxlaHRtbHBhcnNlci5qc1xuXHQgKi9cblx0XG5cdC8vIFJlZ3VsYXIgRXhwcmVzc2lvbnMgZm9yIHBhcnNpbmcgdGFncyBhbmQgYXR0cmlidXRlc1xuXHR2YXIgYXR0cmlidXRlID0gL15cXHMqKFteXFxzXCInPD5cXC89XSspKD86XFxzKig9KVxccyooPzpcIihbXlwiXSopXCIrfCcoW14nXSopJyt8KFteXFxzXCInPTw+YF0rKSkpPy87XG5cdC8vIGNvdWxkIHVzZSBodHRwczovL3d3dy53My5vcmcvVFIvMTk5OS9SRUMteG1sLW5hbWVzLTE5OTkwMTE0LyNOVC1RTmFtZVxuXHQvLyBidXQgZm9yIFZ1ZSB0ZW1wbGF0ZXMgd2UgY2FuIGVuZm9yY2UgYSBzaW1wbGUgY2hhcnNldFxuXHR2YXIgbmNuYW1lID0gJ1thLXpBLVpfXVtcXFxcd1xcXFwtXFxcXC5dKic7XG5cdHZhciBxbmFtZUNhcHR1cmUgPSBcIigoPzpcIiArIG5jbmFtZSArIFwiXFxcXDopP1wiICsgbmNuYW1lICsgXCIpXCI7XG5cdHZhciBzdGFydFRhZ09wZW4gPSBuZXcgUmVnRXhwKChcIl48XCIgKyBxbmFtZUNhcHR1cmUpKTtcblx0dmFyIHN0YXJ0VGFnQ2xvc2UgPSAvXlxccyooXFwvPyk+Lztcblx0dmFyIGVuZFRhZyA9IG5ldyBSZWdFeHAoKFwiXjxcXFxcL1wiICsgcW5hbWVDYXB0dXJlICsgXCJbXj5dKj5cIikpO1xuXHR2YXIgZG9jdHlwZSA9IC9ePCFET0NUWVBFIFtePl0rPi9pO1xuXHQvLyAjNzI5ODogZXNjYXBlIC0gdG8gYXZvaWQgYmVpbmcgcGFzZWQgYXMgSFRNTCBjb21tZW50IHdoZW4gaW5saW5lZCBpbiBwYWdlXG5cdHZhciBjb21tZW50ID0gL148IVxcLS0vO1xuXHR2YXIgY29uZGl0aW9uYWxDb21tZW50ID0gL148IVxcWy87XG5cdFxuXHR2YXIgSVNfUkVHRVhfQ0FQVFVSSU5HX0JST0tFTiA9IGZhbHNlO1xuXHQneCcucmVwbGFjZSgveCguKT8vZywgZnVuY3Rpb24gKG0sIGcpIHtcblx0ICBJU19SRUdFWF9DQVBUVVJJTkdfQlJPS0VOID0gZyA9PT0gJyc7XG5cdH0pO1xuXHRcblx0Ly8gU3BlY2lhbCBFbGVtZW50cyAoY2FuIGNvbnRhaW4gYW55dGhpbmcpXG5cdHZhciBpc1BsYWluVGV4dEVsZW1lbnQgPSBtYWtlTWFwKCdzY3JpcHQsc3R5bGUsdGV4dGFyZWEnLCB0cnVlKTtcblx0dmFyIHJlQ2FjaGUgPSB7fTtcblx0XG5cdHZhciBkZWNvZGluZ01hcCA9IHtcblx0ICAnJmx0Oyc6ICc8Jyxcblx0ICAnJmd0Oyc6ICc+Jyxcblx0ICAnJnF1b3Q7JzogJ1wiJyxcblx0ICAnJmFtcDsnOiAnJicsXG5cdCAgJyYjMTA7JzogJ1xcbicsXG5cdCAgJyYjOTsnOiAnXFx0J1xuXHR9O1xuXHR2YXIgZW5jb2RlZEF0dHIgPSAvJig/Omx0fGd0fHF1b3R8YW1wKTsvZztcblx0dmFyIGVuY29kZWRBdHRyV2l0aE5ld0xpbmVzID0gLyYoPzpsdHxndHxxdW90fGFtcHwjMTB8IzkpOy9nO1xuXHRcblx0Ly8gIzU5OTJcblx0dmFyIGlzSWdub3JlTmV3bGluZVRhZyA9IG1ha2VNYXAoJ3ByZSx0ZXh0YXJlYScsIHRydWUpO1xuXHR2YXIgc2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lID0gZnVuY3Rpb24gKHRhZywgaHRtbCkgeyByZXR1cm4gdGFnICYmIGlzSWdub3JlTmV3bGluZVRhZyh0YWcpICYmIGh0bWxbMF0gPT09ICdcXG4nOyB9O1xuXHRcblx0ZnVuY3Rpb24gZGVjb2RlQXR0ciAodmFsdWUsIHNob3VsZERlY29kZU5ld2xpbmVzKSB7XG5cdCAgdmFyIHJlID0gc2hvdWxkRGVjb2RlTmV3bGluZXMgPyBlbmNvZGVkQXR0cldpdGhOZXdMaW5lcyA6IGVuY29kZWRBdHRyO1xuXHQgIHJldHVybiB2YWx1ZS5yZXBsYWNlKHJlLCBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIGRlY29kaW5nTWFwW21hdGNoXTsgfSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VIVE1MIChodG1sLCBvcHRpb25zKSB7XG5cdCAgdmFyIHN0YWNrID0gW107XG5cdCAgdmFyIGV4cGVjdEhUTUwgPSBvcHRpb25zLmV4cGVjdEhUTUw7XG5cdCAgdmFyIGlzVW5hcnlUYWckJDEgPSBvcHRpb25zLmlzVW5hcnlUYWcgfHwgbm87XG5cdCAgdmFyIGNhbkJlTGVmdE9wZW5UYWckJDEgPSBvcHRpb25zLmNhbkJlTGVmdE9wZW5UYWcgfHwgbm87XG5cdCAgdmFyIGluZGV4ID0gMDtcblx0ICB2YXIgbGFzdCwgbGFzdFRhZztcblx0ICB3aGlsZSAoaHRtbCkge1xuXHQgICAgbGFzdCA9IGh0bWw7XG5cdCAgICAvLyBNYWtlIHN1cmUgd2UncmUgbm90IGluIGEgcGxhaW50ZXh0IGNvbnRlbnQgZWxlbWVudCBsaWtlIHNjcmlwdC9zdHlsZVxuXHQgICAgaWYgKCFsYXN0VGFnIHx8ICFpc1BsYWluVGV4dEVsZW1lbnQobGFzdFRhZykpIHtcblx0ICAgICAgdmFyIHRleHRFbmQgPSBodG1sLmluZGV4T2YoJzwnKTtcblx0ICAgICAgaWYgKHRleHRFbmQgPT09IDApIHtcblx0ICAgICAgICAvLyBDb21tZW50OlxuXHQgICAgICAgIGlmIChjb21tZW50LnRlc3QoaHRtbCkpIHtcblx0ICAgICAgICAgIHZhciBjb21tZW50RW5kID0gaHRtbC5pbmRleE9mKCctLT4nKTtcblx0XG5cdCAgICAgICAgICBpZiAoY29tbWVudEVuZCA+PSAwKSB7XG5cdCAgICAgICAgICAgIGlmIChvcHRpb25zLnNob3VsZEtlZXBDb21tZW50KSB7XG5cdCAgICAgICAgICAgICAgb3B0aW9ucy5jb21tZW50KGh0bWwuc3Vic3RyaW5nKDQsIGNvbW1lbnRFbmQpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBhZHZhbmNlKGNvbW1lbnRFbmQgKyAzKTtcblx0ICAgICAgICAgICAgY29udGludWVcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29uZGl0aW9uYWxfY29tbWVudCNEb3dubGV2ZWwtcmV2ZWFsZWRfY29uZGl0aW9uYWxfY29tbWVudFxuXHQgICAgICAgIGlmIChjb25kaXRpb25hbENvbW1lbnQudGVzdChodG1sKSkge1xuXHQgICAgICAgICAgdmFyIGNvbmRpdGlvbmFsRW5kID0gaHRtbC5pbmRleE9mKCddPicpO1xuXHRcblx0ICAgICAgICAgIGlmIChjb25kaXRpb25hbEVuZCA+PSAwKSB7XG5cdCAgICAgICAgICAgIGFkdmFuY2UoY29uZGl0aW9uYWxFbmQgKyAyKTtcblx0ICAgICAgICAgICAgY29udGludWVcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIERvY3R5cGU6XG5cdCAgICAgICAgdmFyIGRvY3R5cGVNYXRjaCA9IGh0bWwubWF0Y2goZG9jdHlwZSk7XG5cdCAgICAgICAgaWYgKGRvY3R5cGVNYXRjaCkge1xuXHQgICAgICAgICAgYWR2YW5jZShkb2N0eXBlTWF0Y2hbMF0ubGVuZ3RoKTtcblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBFbmQgdGFnOlxuXHQgICAgICAgIHZhciBlbmRUYWdNYXRjaCA9IGh0bWwubWF0Y2goZW5kVGFnKTtcblx0ICAgICAgICBpZiAoZW5kVGFnTWF0Y2gpIHtcblx0ICAgICAgICAgIHZhciBjdXJJbmRleCA9IGluZGV4O1xuXHQgICAgICAgICAgYWR2YW5jZShlbmRUYWdNYXRjaFswXS5sZW5ndGgpO1xuXHQgICAgICAgICAgcGFyc2VFbmRUYWcoZW5kVGFnTWF0Y2hbMV0sIGN1ckluZGV4LCBpbmRleCk7XG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gU3RhcnQgdGFnOlxuXHQgICAgICAgIHZhciBzdGFydFRhZ01hdGNoID0gcGFyc2VTdGFydFRhZygpO1xuXHQgICAgICAgIGlmIChzdGFydFRhZ01hdGNoKSB7XG5cdCAgICAgICAgICBoYW5kbGVTdGFydFRhZyhzdGFydFRhZ01hdGNoKTtcblx0ICAgICAgICAgIGlmIChzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUobGFzdFRhZywgaHRtbCkpIHtcblx0ICAgICAgICAgICAgYWR2YW5jZSgxKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgdGV4dCA9ICh2b2lkIDApLCByZXN0ID0gKHZvaWQgMCksIG5leHQgPSAodm9pZCAwKTtcblx0ICAgICAgaWYgKHRleHRFbmQgPj0gMCkge1xuXHQgICAgICAgIHJlc3QgPSBodG1sLnNsaWNlKHRleHRFbmQpO1xuXHQgICAgICAgIHdoaWxlIChcblx0ICAgICAgICAgICFlbmRUYWcudGVzdChyZXN0KSAmJlxuXHQgICAgICAgICAgIXN0YXJ0VGFnT3Blbi50ZXN0KHJlc3QpICYmXG5cdCAgICAgICAgICAhY29tbWVudC50ZXN0KHJlc3QpICYmXG5cdCAgICAgICAgICAhY29uZGl0aW9uYWxDb21tZW50LnRlc3QocmVzdClcblx0ICAgICAgICApIHtcblx0ICAgICAgICAgIC8vIDwgaW4gcGxhaW4gdGV4dCwgYmUgZm9yZ2l2aW5nIGFuZCB0cmVhdCBpdCBhcyB0ZXh0XG5cdCAgICAgICAgICBuZXh0ID0gcmVzdC5pbmRleE9mKCc8JywgMSk7XG5cdCAgICAgICAgICBpZiAobmV4dCA8IDApIHsgYnJlYWsgfVxuXHQgICAgICAgICAgdGV4dEVuZCArPSBuZXh0O1xuXHQgICAgICAgICAgcmVzdCA9IGh0bWwuc2xpY2UodGV4dEVuZCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRleHQgPSBodG1sLnN1YnN0cmluZygwLCB0ZXh0RW5kKTtcblx0ICAgICAgICBhZHZhbmNlKHRleHRFbmQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGV4dEVuZCA8IDApIHtcblx0ICAgICAgICB0ZXh0ID0gaHRtbDtcblx0ICAgICAgICBodG1sID0gJyc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChvcHRpb25zLmNoYXJzICYmIHRleHQpIHtcblx0ICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgZW5kVGFnTGVuZ3RoID0gMDtcblx0ICAgICAgdmFyIHN0YWNrZWRUYWcgPSBsYXN0VGFnLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgIHZhciByZVN0YWNrZWRUYWcgPSByZUNhY2hlW3N0YWNrZWRUYWddIHx8IChyZUNhY2hlW3N0YWNrZWRUYWddID0gbmV3IFJlZ0V4cCgnKFtcXFxcc1xcXFxTXSo/KSg8LycgKyBzdGFja2VkVGFnICsgJ1tePl0qPiknLCAnaScpKTtcblx0ICAgICAgdmFyIHJlc3QkMSA9IGh0bWwucmVwbGFjZShyZVN0YWNrZWRUYWcsIGZ1bmN0aW9uIChhbGwsIHRleHQsIGVuZFRhZykge1xuXHQgICAgICAgIGVuZFRhZ0xlbmd0aCA9IGVuZFRhZy5sZW5ndGg7XG5cdCAgICAgICAgaWYgKCFpc1BsYWluVGV4dEVsZW1lbnQoc3RhY2tlZFRhZykgJiYgc3RhY2tlZFRhZyAhPT0gJ25vc2NyaXB0Jykge1xuXHQgICAgICAgICAgdGV4dCA9IHRleHRcblx0ICAgICAgICAgICAgLnJlcGxhY2UoLzwhXFwtLShbXFxzXFxTXSo/KS0tPi9nLCAnJDEnKSAvLyAjNzI5OFxuXHQgICAgICAgICAgICAucmVwbGFjZSgvPCFcXFtDREFUQVxcWyhbXFxzXFxTXSo/KV1dPi9nLCAnJDEnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHNob3VsZElnbm9yZUZpcnN0TmV3bGluZShzdGFja2VkVGFnLCB0ZXh0KSkge1xuXHQgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChvcHRpb25zLmNoYXJzKSB7XG5cdCAgICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gJydcblx0ICAgICAgfSk7XG5cdCAgICAgIGluZGV4ICs9IGh0bWwubGVuZ3RoIC0gcmVzdCQxLmxlbmd0aDtcblx0ICAgICAgaHRtbCA9IHJlc3QkMTtcblx0ICAgICAgcGFyc2VFbmRUYWcoc3RhY2tlZFRhZywgaW5kZXggLSBlbmRUYWdMZW5ndGgsIGluZGV4KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoaHRtbCA9PT0gbGFzdCkge1xuXHQgICAgICBvcHRpb25zLmNoYXJzICYmIG9wdGlvbnMuY2hhcnMoaHRtbCk7XG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiAhc3RhY2subGVuZ3RoICYmIG9wdGlvbnMud2Fybikge1xuXHQgICAgICAgIG9wdGlvbnMud2FybigoXCJNYWwtZm9ybWF0dGVkIHRhZyBhdCBlbmQgb2YgdGVtcGxhdGU6IFxcXCJcIiArIGh0bWwgKyBcIlxcXCJcIikpO1xuXHQgICAgICB9XG5cdCAgICAgIGJyZWFrXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBDbGVhbiB1cCBhbnkgcmVtYWluaW5nIHRhZ3Ncblx0ICBwYXJzZUVuZFRhZygpO1xuXHRcblx0ICBmdW5jdGlvbiBhZHZhbmNlIChuKSB7XG5cdCAgICBpbmRleCArPSBuO1xuXHQgICAgaHRtbCA9IGh0bWwuc3Vic3RyaW5nKG4pO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcGFyc2VTdGFydFRhZyAoKSB7XG5cdCAgICB2YXIgc3RhcnQgPSBodG1sLm1hdGNoKHN0YXJ0VGFnT3Blbik7XG5cdCAgICBpZiAoc3RhcnQpIHtcblx0ICAgICAgdmFyIG1hdGNoID0ge1xuXHQgICAgICAgIHRhZ05hbWU6IHN0YXJ0WzFdLFxuXHQgICAgICAgIGF0dHJzOiBbXSxcblx0ICAgICAgICBzdGFydDogaW5kZXhcblx0ICAgICAgfTtcblx0ICAgICAgYWR2YW5jZShzdGFydFswXS5sZW5ndGgpO1xuXHQgICAgICB2YXIgZW5kLCBhdHRyO1xuXHQgICAgICB3aGlsZSAoIShlbmQgPSBodG1sLm1hdGNoKHN0YXJ0VGFnQ2xvc2UpKSAmJiAoYXR0ciA9IGh0bWwubWF0Y2goYXR0cmlidXRlKSkpIHtcblx0ICAgICAgICBhZHZhbmNlKGF0dHJbMF0ubGVuZ3RoKTtcblx0ICAgICAgICBtYXRjaC5hdHRycy5wdXNoKGF0dHIpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChlbmQpIHtcblx0ICAgICAgICBtYXRjaC51bmFyeVNsYXNoID0gZW5kWzFdO1xuXHQgICAgICAgIGFkdmFuY2UoZW5kWzBdLmxlbmd0aCk7XG5cdCAgICAgICAgbWF0Y2guZW5kID0gaW5kZXg7XG5cdCAgICAgICAgcmV0dXJuIG1hdGNoXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGhhbmRsZVN0YXJ0VGFnIChtYXRjaCkge1xuXHQgICAgdmFyIHRhZ05hbWUgPSBtYXRjaC50YWdOYW1lO1xuXHQgICAgdmFyIHVuYXJ5U2xhc2ggPSBtYXRjaC51bmFyeVNsYXNoO1xuXHRcblx0ICAgIGlmIChleHBlY3RIVE1MKSB7XG5cdCAgICAgIGlmIChsYXN0VGFnID09PSAncCcgJiYgaXNOb25QaHJhc2luZ1RhZyh0YWdOYW1lKSkge1xuXHQgICAgICAgIHBhcnNlRW5kVGFnKGxhc3RUYWcpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChjYW5CZUxlZnRPcGVuVGFnJCQxKHRhZ05hbWUpICYmIGxhc3RUYWcgPT09IHRhZ05hbWUpIHtcblx0ICAgICAgICBwYXJzZUVuZFRhZyh0YWdOYW1lKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciB1bmFyeSA9IGlzVW5hcnlUYWckJDEodGFnTmFtZSkgfHwgISF1bmFyeVNsYXNoO1xuXHRcblx0ICAgIHZhciBsID0gbWF0Y2guYXR0cnMubGVuZ3RoO1xuXHQgICAgdmFyIGF0dHJzID0gbmV3IEFycmF5KGwpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGFyZ3MgPSBtYXRjaC5hdHRyc1tpXTtcblx0ICAgICAgLy8gaGFja2lzaCB3b3JrIGFyb3VuZCBGRiBidWcgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MzY5Nzc4XG5cdCAgICAgIGlmIChJU19SRUdFWF9DQVBUVVJJTkdfQlJPS0VOICYmIGFyZ3NbMF0uaW5kZXhPZignXCJcIicpID09PSAtMSkge1xuXHQgICAgICAgIGlmIChhcmdzWzNdID09PSAnJykgeyBkZWxldGUgYXJnc1szXTsgfVxuXHQgICAgICAgIGlmIChhcmdzWzRdID09PSAnJykgeyBkZWxldGUgYXJnc1s0XTsgfVxuXHQgICAgICAgIGlmIChhcmdzWzVdID09PSAnJykgeyBkZWxldGUgYXJnc1s1XTsgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhciB2YWx1ZSA9IGFyZ3NbM10gfHwgYXJnc1s0XSB8fCBhcmdzWzVdIHx8ICcnO1xuXHQgICAgICB2YXIgc2hvdWxkRGVjb2RlTmV3bGluZXMgPSB0YWdOYW1lID09PSAnYScgJiYgYXJnc1sxXSA9PT0gJ2hyZWYnXG5cdCAgICAgICAgPyBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZlxuXHQgICAgICAgIDogb3B0aW9ucy5zaG91bGREZWNvZGVOZXdsaW5lcztcblx0ICAgICAgYXR0cnNbaV0gPSB7XG5cdCAgICAgICAgbmFtZTogYXJnc1sxXSxcblx0ICAgICAgICB2YWx1ZTogZGVjb2RlQXR0cih2YWx1ZSwgc2hvdWxkRGVjb2RlTmV3bGluZXMpXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCF1bmFyeSkge1xuXHQgICAgICBzdGFjay5wdXNoKHsgdGFnOiB0YWdOYW1lLCBsb3dlckNhc2VkVGFnOiB0YWdOYW1lLnRvTG93ZXJDYXNlKCksIGF0dHJzOiBhdHRycyB9KTtcblx0ICAgICAgbGFzdFRhZyA9IHRhZ05hbWU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHtcblx0ICAgICAgb3B0aW9ucy5zdGFydCh0YWdOYW1lLCBhdHRycywgdW5hcnksIG1hdGNoLnN0YXJ0LCBtYXRjaC5lbmQpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcGFyc2VFbmRUYWcgKHRhZ05hbWUsIHN0YXJ0LCBlbmQpIHtcblx0ICAgIHZhciBwb3MsIGxvd2VyQ2FzZWRUYWdOYW1lO1xuXHQgICAgaWYgKHN0YXJ0ID09IG51bGwpIHsgc3RhcnQgPSBpbmRleDsgfVxuXHQgICAgaWYgKGVuZCA9PSBudWxsKSB7IGVuZCA9IGluZGV4OyB9XG5cdFxuXHQgICAgaWYgKHRhZ05hbWUpIHtcblx0ICAgICAgbG93ZXJDYXNlZFRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gRmluZCB0aGUgY2xvc2VzdCBvcGVuZWQgdGFnIG9mIHRoZSBzYW1lIHR5cGVcblx0ICAgIGlmICh0YWdOYW1lKSB7XG5cdCAgICAgIGZvciAocG9zID0gc3RhY2subGVuZ3RoIC0gMTsgcG9zID49IDA7IHBvcy0tKSB7XG5cdCAgICAgICAgaWYgKHN0YWNrW3Bvc10ubG93ZXJDYXNlZFRhZyA9PT0gbG93ZXJDYXNlZFRhZ05hbWUpIHtcblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBJZiBubyB0YWcgbmFtZSBpcyBwcm92aWRlZCwgY2xlYW4gc2hvcFxuXHQgICAgICBwb3MgPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwb3MgPj0gMCkge1xuXHQgICAgICAvLyBDbG9zZSBhbGwgdGhlIG9wZW4gZWxlbWVudHMsIHVwIHRoZSBzdGFja1xuXHQgICAgICBmb3IgKHZhciBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSBwb3M7IGktLSkge1xuXHQgICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgICAgICAgKGkgPiBwb3MgfHwgIXRhZ05hbWUpICYmXG5cdCAgICAgICAgICBvcHRpb25zLndhcm5cblx0ICAgICAgICApIHtcblx0ICAgICAgICAgIG9wdGlvbnMud2Fybihcblx0ICAgICAgICAgICAgKFwidGFnIDxcIiArIChzdGFja1tpXS50YWcpICsgXCI+IGhhcyBubyBtYXRjaGluZyBlbmQgdGFnLlwiKVxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKG9wdGlvbnMuZW5kKSB7XG5cdCAgICAgICAgICBvcHRpb25zLmVuZChzdGFja1tpXS50YWcsIHN0YXJ0LCBlbmQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUmVtb3ZlIHRoZSBvcGVuIGVsZW1lbnRzIGZyb20gdGhlIHN0YWNrXG5cdCAgICAgIHN0YWNrLmxlbmd0aCA9IHBvcztcblx0ICAgICAgbGFzdFRhZyA9IHBvcyAmJiBzdGFja1twb3MgLSAxXS50YWc7XG5cdCAgICB9IGVsc2UgaWYgKGxvd2VyQ2FzZWRUYWdOYW1lID09PSAnYnInKSB7XG5cdCAgICAgIGlmIChvcHRpb25zLnN0YXJ0KSB7XG5cdCAgICAgICAgb3B0aW9ucy5zdGFydCh0YWdOYW1lLCBbXSwgdHJ1ZSwgc3RhcnQsIGVuZCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAobG93ZXJDYXNlZFRhZ05hbWUgPT09ICdwJykge1xuXHQgICAgICBpZiAob3B0aW9ucy5zdGFydCkge1xuXHQgICAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgW10sIGZhbHNlLCBzdGFydCwgZW5kKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAob3B0aW9ucy5lbmQpIHtcblx0ICAgICAgICBvcHRpb25zLmVuZCh0YWdOYW1lLCBzdGFydCwgZW5kKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgb25SRSA9IC9eQHxedi1vbjovO1xuXHR2YXIgZGlyUkUgPSAvXnYtfF5AfF46Lztcblx0dmFyIGZvckFsaWFzUkUgPSAvKC4qPylcXHMrKD86aW58b2YpXFxzKyguKikvO1xuXHR2YXIgZm9ySXRlcmF0b3JSRSA9IC8sKFteLFxcfVxcXV0qKSg/OiwoW14sXFx9XFxdXSopKT8kLztcblx0dmFyIHN0cmlwUGFyZW5zUkUgPSAvXlxcKHxcXCkkL2c7XG5cdFxuXHR2YXIgYXJnUkUgPSAvOiguKikkLztcblx0dmFyIGJpbmRSRSA9IC9eOnxedi1iaW5kOi87XG5cdHZhciBtb2RpZmllclJFID0gL1xcLlteLl0rL2c7XG5cdFxuXHR2YXIgZGVjb2RlSFRNTENhY2hlZCA9IGNhY2hlZChoZS5kZWNvZGUpO1xuXHRcblx0Ly8gY29uZmlndXJhYmxlIHN0YXRlXG5cdHZhciB3YXJuJDI7XG5cdHZhciBkZWxpbWl0ZXJzO1xuXHR2YXIgdHJhbnNmb3Jtcztcblx0dmFyIHByZVRyYW5zZm9ybXM7XG5cdHZhciBwb3N0VHJhbnNmb3Jtcztcblx0dmFyIHBsYXRmb3JtSXNQcmVUYWc7XG5cdHZhciBwbGF0Zm9ybU11c3RVc2VQcm9wO1xuXHR2YXIgcGxhdGZvcm1HZXRUYWdOYW1lc3BhY2U7XG5cdFxuXHRcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUFTVEVsZW1lbnQgKFxuXHQgIHRhZyxcblx0ICBhdHRycyxcblx0ICBwYXJlbnRcblx0KSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHR5cGU6IDEsXG5cdCAgICB0YWc6IHRhZyxcblx0ICAgIGF0dHJzTGlzdDogYXR0cnMsXG5cdCAgICBhdHRyc01hcDogbWFrZUF0dHJzTWFwKGF0dHJzKSxcblx0ICAgIHBhcmVudDogcGFyZW50LFxuXHQgICAgY2hpbGRyZW46IFtdXG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBIVE1MIHN0cmluZyB0byBBU1QuXG5cdCAqL1xuXHRmdW5jdGlvbiBwYXJzZSAoXG5cdCAgdGVtcGxhdGUsXG5cdCAgb3B0aW9uc1xuXHQpIHtcblx0ICB3YXJuJDIgPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47XG5cdFxuXHQgIHBsYXRmb3JtSXNQcmVUYWcgPSBvcHRpb25zLmlzUHJlVGFnIHx8IG5vO1xuXHQgIHBsYXRmb3JtTXVzdFVzZVByb3AgPSBvcHRpb25zLm11c3RVc2VQcm9wIHx8IG5vO1xuXHQgIHBsYXRmb3JtR2V0VGFnTmFtZXNwYWNlID0gb3B0aW9ucy5nZXRUYWdOYW1lc3BhY2UgfHwgbm87XG5cdFxuXHQgIHRyYW5zZm9ybXMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ3RyYW5zZm9ybU5vZGUnKTtcblx0ICBwcmVUcmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICdwcmVUcmFuc2Zvcm1Ob2RlJyk7XG5cdCAgcG9zdFRyYW5zZm9ybXMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ3Bvc3RUcmFuc2Zvcm1Ob2RlJyk7XG5cdFxuXHQgIGRlbGltaXRlcnMgPSBvcHRpb25zLmRlbGltaXRlcnM7XG5cdFxuXHQgIHZhciBzdGFjayA9IFtdO1xuXHQgIHZhciBwcmVzZXJ2ZVdoaXRlc3BhY2UgPSBvcHRpb25zLnByZXNlcnZlV2hpdGVzcGFjZSAhPT0gZmFsc2U7XG5cdCAgdmFyIHJvb3Q7XG5cdCAgdmFyIGN1cnJlbnRQYXJlbnQ7XG5cdCAgdmFyIGluVlByZSA9IGZhbHNlO1xuXHQgIHZhciBpblByZSA9IGZhbHNlO1xuXHQgIHZhciB3YXJuZWQgPSBmYWxzZTtcblx0XG5cdCAgZnVuY3Rpb24gd2Fybk9uY2UgKG1zZykge1xuXHQgICAgaWYgKCF3YXJuZWQpIHtcblx0ICAgICAgd2FybmVkID0gdHJ1ZTtcblx0ICAgICAgd2FybiQyKG1zZyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjbG9zZUVsZW1lbnQgKGVsZW1lbnQpIHtcblx0ICAgIC8vIGNoZWNrIHByZSBzdGF0ZVxuXHQgICAgaWYgKGVsZW1lbnQucHJlKSB7XG5cdCAgICAgIGluVlByZSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgaWYgKHBsYXRmb3JtSXNQcmVUYWcoZWxlbWVudC50YWcpKSB7XG5cdCAgICAgIGluUHJlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICAvLyBhcHBseSBwb3N0LXRyYW5zZm9ybXNcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdFRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgcG9zdFRyYW5zZm9ybXNbaV0oZWxlbWVudCwgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBwYXJzZUhUTUwodGVtcGxhdGUsIHtcblx0ICAgIHdhcm46IHdhcm4kMixcblx0ICAgIGV4cGVjdEhUTUw6IG9wdGlvbnMuZXhwZWN0SFRNTCxcblx0ICAgIGlzVW5hcnlUYWc6IG9wdGlvbnMuaXNVbmFyeVRhZyxcblx0ICAgIGNhbkJlTGVmdE9wZW5UYWc6IG9wdGlvbnMuY2FuQmVMZWZ0T3BlblRhZyxcblx0ICAgIHNob3VsZERlY29kZU5ld2xpbmVzOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzLFxuXHQgICAgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixcblx0ICAgIHNob3VsZEtlZXBDb21tZW50OiBvcHRpb25zLmNvbW1lbnRzLFxuXHQgICAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0ICh0YWcsIGF0dHJzLCB1bmFyeSkge1xuXHQgICAgICAvLyBjaGVjayBuYW1lc3BhY2UuXG5cdCAgICAgIC8vIGluaGVyaXQgcGFyZW50IG5zIGlmIHRoZXJlIGlzIG9uZVxuXHQgICAgICB2YXIgbnMgPSAoY3VycmVudFBhcmVudCAmJiBjdXJyZW50UGFyZW50Lm5zKSB8fCBwbGF0Zm9ybUdldFRhZ05hbWVzcGFjZSh0YWcpO1xuXHRcblx0ICAgICAgLy8gaGFuZGxlIElFIHN2ZyBidWdcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChpc0lFICYmIG5zID09PSAnc3ZnJykge1xuXHQgICAgICAgIGF0dHJzID0gZ3VhcmRJRVNWR0J1ZyhhdHRycyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBlbGVtZW50ID0gY3JlYXRlQVNURWxlbWVudCh0YWcsIGF0dHJzLCBjdXJyZW50UGFyZW50KTtcblx0ICAgICAgaWYgKG5zKSB7XG5cdCAgICAgICAgZWxlbWVudC5ucyA9IG5zO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoaXNGb3JiaWRkZW5UYWcoZWxlbWVudCkgJiYgIWlzU2VydmVyUmVuZGVyaW5nKCkpIHtcblx0ICAgICAgICBlbGVtZW50LmZvcmJpZGRlbiA9IHRydWU7XG5cdCAgICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybiQyKFxuXHQgICAgICAgICAgJ1RlbXBsYXRlcyBzaG91bGQgb25seSBiZSByZXNwb25zaWJsZSBmb3IgbWFwcGluZyB0aGUgc3RhdGUgdG8gdGhlICcgK1xuXHQgICAgICAgICAgJ1VJLiBBdm9pZCBwbGFjaW5nIHRhZ3Mgd2l0aCBzaWRlLWVmZmVjdHMgaW4geW91ciB0ZW1wbGF0ZXMsIHN1Y2ggYXMgJyArXG5cdCAgICAgICAgICBcIjxcIiArIHRhZyArIFwiPlwiICsgJywgYXMgdGhleSB3aWxsIG5vdCBiZSBwYXJzZWQuJ1xuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGFwcGx5IHByZS10cmFuc2Zvcm1zXG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJlVHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGVsZW1lbnQgPSBwcmVUcmFuc2Zvcm1zW2ldKGVsZW1lbnQsIG9wdGlvbnMpIHx8IGVsZW1lbnQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghaW5WUHJlKSB7XG5cdCAgICAgICAgcHJvY2Vzc1ByZShlbGVtZW50KTtcblx0ICAgICAgICBpZiAoZWxlbWVudC5wcmUpIHtcblx0ICAgICAgICAgIGluVlByZSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChwbGF0Zm9ybUlzUHJlVGFnKGVsZW1lbnQudGFnKSkge1xuXHQgICAgICAgIGluUHJlID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoaW5WUHJlKSB7XG5cdCAgICAgICAgcHJvY2Vzc1Jhd0F0dHJzKGVsZW1lbnQpO1xuXHQgICAgICB9IGVsc2UgaWYgKCFlbGVtZW50LnByb2Nlc3NlZCkge1xuXHQgICAgICAgIC8vIHN0cnVjdHVyYWwgZGlyZWN0aXZlc1xuXHQgICAgICAgIHByb2Nlc3NGb3IoZWxlbWVudCk7XG5cdCAgICAgICAgcHJvY2Vzc0lmKGVsZW1lbnQpO1xuXHQgICAgICAgIHByb2Nlc3NPbmNlKGVsZW1lbnQpO1xuXHQgICAgICAgIC8vIGVsZW1lbnQtc2NvcGUgc3R1ZmZcblx0ICAgICAgICBwcm9jZXNzRWxlbWVudChlbGVtZW50LCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZnVuY3Rpb24gY2hlY2tSb290Q29uc3RyYWludHMgKGVsKSB7XG5cdCAgICAgICAge1xuXHQgICAgICAgICAgaWYgKGVsLnRhZyA9PT0gJ3Nsb3QnIHx8IGVsLnRhZyA9PT0gJ3RlbXBsYXRlJykge1xuXHQgICAgICAgICAgICB3YXJuT25jZShcblx0ICAgICAgICAgICAgICBcIkNhbm5vdCB1c2UgPFwiICsgKGVsLnRhZykgKyBcIj4gYXMgY29tcG9uZW50IHJvb3QgZWxlbWVudCBiZWNhdXNlIGl0IG1heSBcIiArXG5cdCAgICAgICAgICAgICAgJ2NvbnRhaW4gbXVsdGlwbGUgbm9kZXMuJ1xuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKGVsLmF0dHJzTWFwLmhhc093blByb3BlcnR5KCd2LWZvcicpKSB7XG5cdCAgICAgICAgICAgIHdhcm5PbmNlKFxuXHQgICAgICAgICAgICAgICdDYW5ub3QgdXNlIHYtZm9yIG9uIHN0YXRlZnVsIGNvbXBvbmVudCByb290IGVsZW1lbnQgYmVjYXVzZSAnICtcblx0ICAgICAgICAgICAgICAnaXQgcmVuZGVycyBtdWx0aXBsZSBlbGVtZW50cy4nXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyB0cmVlIG1hbmFnZW1lbnRcblx0ICAgICAgaWYgKCFyb290KSB7XG5cdCAgICAgICAgcm9vdCA9IGVsZW1lbnQ7XG5cdCAgICAgICAgY2hlY2tSb290Q29uc3RyYWludHMocm9vdCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoIXN0YWNrLmxlbmd0aCkge1xuXHQgICAgICAgIC8vIGFsbG93IHJvb3QgZWxlbWVudHMgd2l0aCB2LWlmLCB2LWVsc2UtaWYgYW5kIHYtZWxzZVxuXHQgICAgICAgIGlmIChyb290LmlmICYmIChlbGVtZW50LmVsc2VpZiB8fCBlbGVtZW50LmVsc2UpKSB7XG5cdCAgICAgICAgICBjaGVja1Jvb3RDb25zdHJhaW50cyhlbGVtZW50KTtcblx0ICAgICAgICAgIGFkZElmQ29uZGl0aW9uKHJvb3QsIHtcblx0ICAgICAgICAgICAgZXhwOiBlbGVtZW50LmVsc2VpZixcblx0ICAgICAgICAgICAgYmxvY2s6IGVsZW1lbnRcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB3YXJuT25jZShcblx0ICAgICAgICAgICAgXCJDb21wb25lbnQgdGVtcGxhdGUgc2hvdWxkIGNvbnRhaW4gZXhhY3RseSBvbmUgcm9vdCBlbGVtZW50LiBcIiArXG5cdCAgICAgICAgICAgIFwiSWYgeW91IGFyZSB1c2luZyB2LWlmIG9uIG11bHRpcGxlIGVsZW1lbnRzLCBcIiArXG5cdCAgICAgICAgICAgIFwidXNlIHYtZWxzZS1pZiB0byBjaGFpbiB0aGVtIGluc3RlYWQuXCJcblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChjdXJyZW50UGFyZW50ICYmICFlbGVtZW50LmZvcmJpZGRlbikge1xuXHQgICAgICAgIGlmIChlbGVtZW50LmVsc2VpZiB8fCBlbGVtZW50LmVsc2UpIHtcblx0ICAgICAgICAgIHByb2Nlc3NJZkNvbmRpdGlvbnMoZWxlbWVudCwgY3VycmVudFBhcmVudCk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnNsb3RTY29wZSkgeyAvLyBzY29wZWQgc2xvdFxuXHQgICAgICAgICAgY3VycmVudFBhcmVudC5wbGFpbiA9IGZhbHNlO1xuXHQgICAgICAgICAgdmFyIG5hbWUgPSBlbGVtZW50LnNsb3RUYXJnZXQgfHwgJ1wiZGVmYXVsdFwiJzsoY3VycmVudFBhcmVudC5zY29wZWRTbG90cyB8fCAoY3VycmVudFBhcmVudC5zY29wZWRTbG90cyA9IHt9KSlbbmFtZV0gPSBlbGVtZW50O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjdXJyZW50UGFyZW50LmNoaWxkcmVuLnB1c2goZWxlbWVudCk7XG5cdCAgICAgICAgICBlbGVtZW50LnBhcmVudCA9IGN1cnJlbnRQYXJlbnQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmICghdW5hcnkpIHtcblx0ICAgICAgICBjdXJyZW50UGFyZW50ID0gZWxlbWVudDtcblx0ICAgICAgICBzdGFjay5wdXNoKGVsZW1lbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNsb3NlRWxlbWVudChlbGVtZW50KTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBlbmQ6IGZ1bmN0aW9uIGVuZCAoKSB7XG5cdCAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyB3aGl0ZXNwYWNlXG5cdCAgICAgIHZhciBlbGVtZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG5cdCAgICAgIHZhciBsYXN0Tm9kZSA9IGVsZW1lbnQuY2hpbGRyZW5bZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggLSAxXTtcblx0ICAgICAgaWYgKGxhc3ROb2RlICYmIGxhc3ROb2RlLnR5cGUgPT09IDMgJiYgbGFzdE5vZGUudGV4dCA9PT0gJyAnICYmICFpblByZSkge1xuXHQgICAgICAgIGVsZW1lbnQuY2hpbGRyZW4ucG9wKCk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gcG9wIHN0YWNrXG5cdCAgICAgIHN0YWNrLmxlbmd0aCAtPSAxO1xuXHQgICAgICBjdXJyZW50UGFyZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG5cdCAgICAgIGNsb3NlRWxlbWVudChlbGVtZW50KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgY2hhcnM6IGZ1bmN0aW9uIGNoYXJzICh0ZXh0KSB7XG5cdCAgICAgIGlmICghY3VycmVudFBhcmVudCkge1xuXHQgICAgICAgIHtcblx0ICAgICAgICAgIGlmICh0ZXh0ID09PSB0ZW1wbGF0ZSkge1xuXHQgICAgICAgICAgICB3YXJuT25jZShcblx0ICAgICAgICAgICAgICAnQ29tcG9uZW50IHRlbXBsYXRlIHJlcXVpcmVzIGEgcm9vdCBlbGVtZW50LCByYXRoZXIgdGhhbiBqdXN0IHRleHQuJ1xuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICgodGV4dCA9IHRleHQudHJpbSgpKSkge1xuXHQgICAgICAgICAgICB3YXJuT25jZShcblx0ICAgICAgICAgICAgICAoXCJ0ZXh0IFxcXCJcIiArIHRleHQgKyBcIlxcXCIgb3V0c2lkZSByb290IGVsZW1lbnQgd2lsbCBiZSBpZ25vcmVkLlwiKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm5cblx0ICAgICAgfVxuXHQgICAgICAvLyBJRSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWdcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChpc0lFICYmXG5cdCAgICAgICAgY3VycmVudFBhcmVudC50YWcgPT09ICd0ZXh0YXJlYScgJiZcblx0ICAgICAgICBjdXJyZW50UGFyZW50LmF0dHJzTWFwLnBsYWNlaG9sZGVyID09PSB0ZXh0XG5cdCAgICAgICkge1xuXHQgICAgICAgIHJldHVyblxuXHQgICAgICB9XG5cdCAgICAgIHZhciBjaGlsZHJlbiA9IGN1cnJlbnRQYXJlbnQuY2hpbGRyZW47XG5cdCAgICAgIHRleHQgPSBpblByZSB8fCB0ZXh0LnRyaW0oKVxuXHQgICAgICAgID8gaXNUZXh0VGFnKGN1cnJlbnRQYXJlbnQpID8gdGV4dCA6IGRlY29kZUhUTUxDYWNoZWQodGV4dClcblx0ICAgICAgICAvLyBvbmx5IHByZXNlcnZlIHdoaXRlc3BhY2UgaWYgaXRzIG5vdCByaWdodCBhZnRlciBhIHN0YXJ0aW5nIHRhZ1xuXHQgICAgICAgIDogcHJlc2VydmVXaGl0ZXNwYWNlICYmIGNoaWxkcmVuLmxlbmd0aCA/ICcgJyA6ICcnO1xuXHQgICAgICBpZiAodGV4dCkge1xuXHQgICAgICAgIHZhciByZXM7XG5cdCAgICAgICAgaWYgKCFpblZQcmUgJiYgdGV4dCAhPT0gJyAnICYmIChyZXMgPSBwYXJzZVRleHQodGV4dCwgZGVsaW1pdGVycykpKSB7XG5cdCAgICAgICAgICBjaGlsZHJlbi5wdXNoKHtcblx0ICAgICAgICAgICAgdHlwZTogMixcblx0ICAgICAgICAgICAgZXhwcmVzc2lvbjogcmVzLmV4cHJlc3Npb24sXG5cdCAgICAgICAgICAgIHRva2VuczogcmVzLnRva2Vucyxcblx0ICAgICAgICAgICAgdGV4dDogdGV4dFxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0ZXh0ICE9PSAnICcgfHwgIWNoaWxkcmVuLmxlbmd0aCB8fCBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXS50ZXh0ICE9PSAnICcpIHtcblx0ICAgICAgICAgIGNoaWxkcmVuLnB1c2goe1xuXHQgICAgICAgICAgICB0eXBlOiAzLFxuXHQgICAgICAgICAgICB0ZXh0OiB0ZXh0XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBjb21tZW50OiBmdW5jdGlvbiBjb21tZW50ICh0ZXh0KSB7XG5cdCAgICAgIGN1cnJlbnRQYXJlbnQuY2hpbGRyZW4ucHVzaCh7XG5cdCAgICAgICAgdHlwZTogMyxcblx0ICAgICAgICB0ZXh0OiB0ZXh0LFxuXHQgICAgICAgIGlzQ29tbWVudDogdHJ1ZVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gcm9vdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzUHJlIChlbCkge1xuXHQgIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1wcmUnKSAhPSBudWxsKSB7XG5cdCAgICBlbC5wcmUgPSB0cnVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1Jhd0F0dHJzIChlbCkge1xuXHQgIHZhciBsID0gZWwuYXR0cnNMaXN0Lmxlbmd0aDtcblx0ICBpZiAobCkge1xuXHQgICAgdmFyIGF0dHJzID0gZWwuYXR0cnMgPSBuZXcgQXJyYXkobCk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBhdHRyc1tpXSA9IHtcblx0ICAgICAgICBuYW1lOiBlbC5hdHRyc0xpc3RbaV0ubmFtZSxcblx0ICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoZWwuYXR0cnNMaXN0W2ldLnZhbHVlKVxuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoIWVsLnByZSkge1xuXHQgICAgLy8gbm9uIHJvb3Qgbm9kZSBpbiBwcmUgYmxvY2tzIHdpdGggbm8gYXR0cmlidXRlc1xuXHQgICAgZWwucGxhaW4gPSB0cnVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0VsZW1lbnQgKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICBwcm9jZXNzS2V5KGVsZW1lbnQpO1xuXHRcblx0ICAvLyBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGEgcGxhaW4gZWxlbWVudCBhZnRlclxuXHQgIC8vIHJlbW92aW5nIHN0cnVjdHVyYWwgYXR0cmlidXRlc1xuXHQgIGVsZW1lbnQucGxhaW4gPSAhZWxlbWVudC5rZXkgJiYgIWVsZW1lbnQuYXR0cnNMaXN0Lmxlbmd0aDtcblx0XG5cdCAgcHJvY2Vzc1JlZihlbGVtZW50KTtcblx0ICBwcm9jZXNzU2xvdChlbGVtZW50KTtcblx0ICBwcm9jZXNzQ29tcG9uZW50KGVsZW1lbnQpO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xuXHQgICAgZWxlbWVudCA9IHRyYW5zZm9ybXNbaV0oZWxlbWVudCwgb3B0aW9ucykgfHwgZWxlbWVudDtcblx0ICB9XG5cdCAgcHJvY2Vzc0F0dHJzKGVsZW1lbnQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzS2V5IChlbCkge1xuXHQgIHZhciBleHAgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2tleScpO1xuXHQgIGlmIChleHApIHtcblx0ICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBlbC50YWcgPT09ICd0ZW1wbGF0ZScpIHtcblx0ICAgICAgd2FybiQyKFwiPHRlbXBsYXRlPiBjYW5ub3QgYmUga2V5ZWQuIFBsYWNlIHRoZSBrZXkgb24gcmVhbCBlbGVtZW50cyBpbnN0ZWFkLlwiKTtcblx0ICAgIH1cblx0ICAgIGVsLmtleSA9IGV4cDtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NSZWYgKGVsKSB7XG5cdCAgdmFyIHJlZiA9IGdldEJpbmRpbmdBdHRyKGVsLCAncmVmJyk7XG5cdCAgaWYgKHJlZikge1xuXHQgICAgZWwucmVmID0gcmVmO1xuXHQgICAgZWwucmVmSW5Gb3IgPSBjaGVja0luRm9yKGVsKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NGb3IgKGVsKSB7XG5cdCAgdmFyIGV4cDtcblx0ICBpZiAoKGV4cCA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWZvcicpKSkge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRm9yKGV4cCk7XG5cdCAgICBpZiAocmVzKSB7XG5cdCAgICAgIGV4dGVuZChlbCwgcmVzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHdhcm4kMihcblx0ICAgICAgICAoXCJJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb246IFwiICsgZXhwKVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0XG5cdFxuXHRmdW5jdGlvbiBwYXJzZUZvciAoZXhwKSB7XG5cdCAgdmFyIGluTWF0Y2ggPSBleHAubWF0Y2goZm9yQWxpYXNSRSk7XG5cdCAgaWYgKCFpbk1hdGNoKSB7IHJldHVybiB9XG5cdCAgdmFyIHJlcyA9IHt9O1xuXHQgIHJlcy5mb3IgPSBpbk1hdGNoWzJdLnRyaW0oKTtcblx0ICB2YXIgYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKS5yZXBsYWNlKHN0cmlwUGFyZW5zUkUsICcnKTtcblx0ICB2YXIgaXRlcmF0b3JNYXRjaCA9IGFsaWFzLm1hdGNoKGZvckl0ZXJhdG9yUkUpO1xuXHQgIGlmIChpdGVyYXRvck1hdGNoKSB7XG5cdCAgICByZXMuYWxpYXMgPSBhbGlhcy5yZXBsYWNlKGZvckl0ZXJhdG9yUkUsICcnKTtcblx0ICAgIHJlcy5pdGVyYXRvcjEgPSBpdGVyYXRvck1hdGNoWzFdLnRyaW0oKTtcblx0ICAgIGlmIChpdGVyYXRvck1hdGNoWzJdKSB7XG5cdCAgICAgIHJlcy5pdGVyYXRvcjIgPSBpdGVyYXRvck1hdGNoWzJdLnRyaW0oKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgcmVzLmFsaWFzID0gYWxpYXM7XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0lmIChlbCkge1xuXHQgIHZhciBleHAgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1pZicpO1xuXHQgIGlmIChleHApIHtcblx0ICAgIGVsLmlmID0gZXhwO1xuXHQgICAgYWRkSWZDb25kaXRpb24oZWwsIHtcblx0ICAgICAgZXhwOiBleHAsXG5cdCAgICAgIGJsb2NrOiBlbFxuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlJykgIT0gbnVsbCkge1xuXHQgICAgICBlbC5lbHNlID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHZhciBlbHNlaWYgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlLWlmJyk7XG5cdCAgICBpZiAoZWxzZWlmKSB7XG5cdCAgICAgIGVsLmVsc2VpZiA9IGVsc2VpZjtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NJZkNvbmRpdGlvbnMgKGVsLCBwYXJlbnQpIHtcblx0ICB2YXIgcHJldiA9IGZpbmRQcmV2RWxlbWVudChwYXJlbnQuY2hpbGRyZW4pO1xuXHQgIGlmIChwcmV2ICYmIHByZXYuaWYpIHtcblx0ICAgIGFkZElmQ29uZGl0aW9uKHByZXYsIHtcblx0ICAgICAgZXhwOiBlbC5lbHNlaWYsXG5cdCAgICAgIGJsb2NrOiBlbFxuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHdhcm4kMihcblx0ICAgICAgXCJ2LVwiICsgKGVsLmVsc2VpZiA/ICgnZWxzZS1pZj1cIicgKyBlbC5lbHNlaWYgKyAnXCInKSA6ICdlbHNlJykgKyBcIiBcIiArXG5cdCAgICAgIFwidXNlZCBvbiBlbGVtZW50IDxcIiArIChlbC50YWcpICsgXCI+IHdpdGhvdXQgY29ycmVzcG9uZGluZyB2LWlmLlwiXG5cdCAgICApO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZmluZFByZXZFbGVtZW50IChjaGlsZHJlbikge1xuXHQgIHZhciBpID0gY2hpbGRyZW4ubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmIChjaGlsZHJlbltpXS50eXBlID09PSAxKSB7XG5cdCAgICAgIHJldHVybiBjaGlsZHJlbltpXVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNoaWxkcmVuW2ldLnRleHQgIT09ICcgJykge1xuXHQgICAgICAgIHdhcm4kMihcblx0ICAgICAgICAgIFwidGV4dCBcXFwiXCIgKyAoY2hpbGRyZW5baV0udGV4dC50cmltKCkpICsgXCJcXFwiIGJldHdlZW4gdi1pZiBhbmQgdi1lbHNlKC1pZikgXCIgK1xuXHQgICAgICAgICAgXCJ3aWxsIGJlIGlnbm9yZWQuXCJcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIGNoaWxkcmVuLnBvcCgpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkSWZDb25kaXRpb24gKGVsLCBjb25kaXRpb24pIHtcblx0ICBpZiAoIWVsLmlmQ29uZGl0aW9ucykge1xuXHQgICAgZWwuaWZDb25kaXRpb25zID0gW107XG5cdCAgfVxuXHQgIGVsLmlmQ29uZGl0aW9ucy5wdXNoKGNvbmRpdGlvbik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NPbmNlIChlbCkge1xuXHQgIHZhciBvbmNlJCQxID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3Ytb25jZScpO1xuXHQgIGlmIChvbmNlJCQxICE9IG51bGwpIHtcblx0ICAgIGVsLm9uY2UgPSB0cnVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1Nsb3QgKGVsKSB7XG5cdCAgaWYgKGVsLnRhZyA9PT0gJ3Nsb3QnKSB7XG5cdCAgICBlbC5zbG90TmFtZSA9IGdldEJpbmRpbmdBdHRyKGVsLCAnbmFtZScpO1xuXHQgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVsLmtleSkge1xuXHQgICAgICB3YXJuJDIoXG5cdCAgICAgICAgXCJga2V5YCBkb2VzIG5vdCB3b3JrIG9uIDxzbG90PiBiZWNhdXNlIHNsb3RzIGFyZSBhYnN0cmFjdCBvdXRsZXRzIFwiICtcblx0ICAgICAgICBcImFuZCBjYW4gcG9zc2libHkgZXhwYW5kIGludG8gbXVsdGlwbGUgZWxlbWVudHMuIFwiICtcblx0ICAgICAgICBcIlVzZSB0aGUga2V5IG9uIGEgd3JhcHBpbmcgZWxlbWVudCBpbnN0ZWFkLlwiXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzbG90U2NvcGU7XG5cdCAgICBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnKSB7XG5cdCAgICAgIHNsb3RTY29wZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzY29wZScpO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHNsb3RTY29wZSkge1xuXHQgICAgICAgIHdhcm4kMihcblx0ICAgICAgICAgIFwidGhlIFxcXCJzY29wZVxcXCIgYXR0cmlidXRlIGZvciBzY29wZWQgc2xvdHMgaGF2ZSBiZWVuIGRlcHJlY2F0ZWQgYW5kIFwiICtcblx0ICAgICAgICAgIFwicmVwbGFjZWQgYnkgXFxcInNsb3Qtc2NvcGVcXFwiIHNpbmNlIDIuNS4gVGhlIG5ldyBcXFwic2xvdC1zY29wZVxcXCIgYXR0cmlidXRlIFwiICtcblx0ICAgICAgICAgIFwiY2FuIGFsc28gYmUgdXNlZCBvbiBwbGFpbiBlbGVtZW50cyBpbiBhZGRpdGlvbiB0byA8dGVtcGxhdGU+IHRvIFwiICtcblx0ICAgICAgICAgIFwiZGVub3RlIHNjb3BlZCBzbG90cy5cIixcblx0ICAgICAgICAgIHRydWVcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICAgIGVsLnNsb3RTY29wZSA9IHNsb3RTY29wZSB8fCBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc2xvdC1zY29wZScpO1xuXHQgICAgfSBlbHNlIGlmICgoc2xvdFNjb3BlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3Nsb3Qtc2NvcGUnKSkpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBlbC5hdHRyc01hcFsndi1mb3InXSkge1xuXHQgICAgICAgIHdhcm4kMihcblx0ICAgICAgICAgIFwiQW1iaWd1b3VzIGNvbWJpbmVkIHVzYWdlIG9mIHNsb3Qtc2NvcGUgYW5kIHYtZm9yIG9uIDxcIiArIChlbC50YWcpICsgXCI+IFwiICtcblx0ICAgICAgICAgIFwiKHYtZm9yIHRha2VzIGhpZ2hlciBwcmlvcml0eSkuIFVzZSBhIHdyYXBwZXIgPHRlbXBsYXRlPiBmb3IgdGhlIFwiICtcblx0ICAgICAgICAgIFwic2NvcGVkIHNsb3QgdG8gbWFrZSBpdCBjbGVhcmVyLlwiLFxuXHQgICAgICAgICAgdHJ1ZVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgICAgZWwuc2xvdFNjb3BlID0gc2xvdFNjb3BlO1xuXHQgICAgfVxuXHQgICAgdmFyIHNsb3RUYXJnZXQgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3Nsb3QnKTtcblx0ICAgIGlmIChzbG90VGFyZ2V0KSB7XG5cdCAgICAgIGVsLnNsb3RUYXJnZXQgPSBzbG90VGFyZ2V0ID09PSAnXCJcIicgPyAnXCJkZWZhdWx0XCInIDogc2xvdFRhcmdldDtcblx0ICAgICAgLy8gcHJlc2VydmUgc2xvdCBhcyBhbiBhdHRyaWJ1dGUgZm9yIG5hdGl2ZSBzaGFkb3cgRE9NIGNvbXBhdFxuXHQgICAgICAvLyBvbmx5IGZvciBub24tc2NvcGVkIHNsb3RzLlxuXHQgICAgICBpZiAoZWwudGFnICE9PSAndGVtcGxhdGUnICYmICFlbC5zbG90U2NvcGUpIHtcblx0ICAgICAgICBhZGRBdHRyKGVsLCAnc2xvdCcsIHNsb3RUYXJnZXQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzQ29tcG9uZW50IChlbCkge1xuXHQgIHZhciBiaW5kaW5nO1xuXHQgIGlmICgoYmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnaXMnKSkpIHtcblx0ICAgIGVsLmNvbXBvbmVudCA9IGJpbmRpbmc7XG5cdCAgfVxuXHQgIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAnaW5saW5lLXRlbXBsYXRlJykgIT0gbnVsbCkge1xuXHQgICAgZWwuaW5saW5lVGVtcGxhdGUgPSB0cnVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0F0dHJzIChlbCkge1xuXHQgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0O1xuXHQgIHZhciBpLCBsLCBuYW1lLCByYXdOYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBpc1Byb3A7XG5cdCAgZm9yIChpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBuYW1lID0gcmF3TmFtZSA9IGxpc3RbaV0ubmFtZTtcblx0ICAgIHZhbHVlID0gbGlzdFtpXS52YWx1ZTtcblx0ICAgIGlmIChkaXJSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgIC8vIG1hcmsgZWxlbWVudCBhcyBkeW5hbWljXG5cdCAgICAgIGVsLmhhc0JpbmRpbmdzID0gdHJ1ZTtcblx0ICAgICAgLy8gbW9kaWZpZXJzXG5cdCAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xuXHQgICAgICBpZiAobW9kaWZpZXJzKSB7XG5cdCAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7IC8vIHYtYmluZFxuXHQgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XG5cdCAgICAgICAgdmFsdWUgPSBwYXJzZUZpbHRlcnModmFsdWUpO1xuXHQgICAgICAgIGlzUHJvcCA9IGZhbHNlO1xuXHQgICAgICAgIGlmIChtb2RpZmllcnMpIHtcblx0ICAgICAgICAgIGlmIChtb2RpZmllcnMucHJvcCkge1xuXHQgICAgICAgICAgICBpc1Byb3AgPSB0cnVlO1xuXHQgICAgICAgICAgICBuYW1lID0gY2FtZWxpemUobmFtZSk7XG5cdCAgICAgICAgICAgIGlmIChuYW1lID09PSAnaW5uZXJIdG1sJykgeyBuYW1lID0gJ2lubmVySFRNTCc7IH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChtb2RpZmllcnMuY2FtZWwpIHtcblx0ICAgICAgICAgICAgbmFtZSA9IGNhbWVsaXplKG5hbWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKG1vZGlmaWVycy5zeW5jKSB7XG5cdCAgICAgICAgICAgIGFkZEhhbmRsZXIoXG5cdCAgICAgICAgICAgICAgZWwsXG5cdCAgICAgICAgICAgICAgKFwidXBkYXRlOlwiICsgKGNhbWVsaXplKG5hbWUpKSksXG5cdCAgICAgICAgICAgICAgZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIFwiJGV2ZW50XCIpXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc1Byb3AgfHwgKFxuXHQgICAgICAgICAgIWVsLmNvbXBvbmVudCAmJiBwbGF0Zm9ybU11c3RVc2VQcm9wKGVsLnRhZywgZWwuYXR0cnNNYXAudHlwZSwgbmFtZSlcblx0ICAgICAgICApKSB7XG5cdCAgICAgICAgICBhZGRQcm9wKGVsLCBuYW1lLCB2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGFkZEF0dHIoZWwsIG5hbWUsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAob25SRS50ZXN0KG5hbWUpKSB7IC8vIHYtb25cblx0ICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcblx0ICAgICAgICBhZGRIYW5kbGVyKGVsLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBmYWxzZSwgd2FybiQyKTtcblx0ICAgICAgfSBlbHNlIHsgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcblx0ICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGRpclJFLCAnJyk7XG5cdCAgICAgICAgLy8gcGFyc2UgYXJnXG5cdCAgICAgICAgdmFyIGFyZ01hdGNoID0gbmFtZS5tYXRjaChhcmdSRSk7XG5cdCAgICAgICAgdmFyIGFyZyA9IGFyZ01hdGNoICYmIGFyZ01hdGNoWzFdO1xuXHQgICAgICAgIGlmIChhcmcpIHtcblx0ICAgICAgICAgIG5hbWUgPSBuYW1lLnNsaWNlKDAsIC0oYXJnLmxlbmd0aCArIDEpKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYWRkRGlyZWN0aXZlKGVsLCBuYW1lLCByYXdOYW1lLCB2YWx1ZSwgYXJnLCBtb2RpZmllcnMpO1xuXHQgICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnbW9kZWwnKSB7XG5cdCAgICAgICAgICBjaGVja0ZvckFsaWFzTW9kZWwoZWwsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIGxpdGVyYWwgYXR0cmlidXRlXG5cdCAgICAgIHtcblx0ICAgICAgICB2YXIgcmVzID0gcGFyc2VUZXh0KHZhbHVlLCBkZWxpbWl0ZXJzKTtcblx0ICAgICAgICBpZiAocmVzKSB7XG5cdCAgICAgICAgICB3YXJuJDIoXG5cdCAgICAgICAgICAgIG5hbWUgKyBcIj1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIjogXCIgK1xuXHQgICAgICAgICAgICAnSW50ZXJwb2xhdGlvbiBpbnNpZGUgYXR0cmlidXRlcyBoYXMgYmVlbiByZW1vdmVkLiAnICtcblx0ICAgICAgICAgICAgJ1VzZSB2LWJpbmQgb3IgdGhlIGNvbG9uIHNob3J0aGFuZCBpbnN0ZWFkLiBGb3IgZXhhbXBsZSwgJyArXG5cdCAgICAgICAgICAgICdpbnN0ZWFkIG9mIDxkaXYgaWQ9XCJ7eyB2YWwgfX1cIj4sIHVzZSA8ZGl2IDppZD1cInZhbFwiPi4nXG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBhZGRBdHRyKGVsLCBuYW1lLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuXHQgICAgICAvLyAjNjg4NyBmaXJlZm94IGRvZXNuJ3QgdXBkYXRlIG11dGVkIHN0YXRlIGlmIHNldCB2aWEgYXR0cmlidXRlXG5cdCAgICAgIC8vIGV2ZW4gaW1tZWRpYXRlbHkgYWZ0ZXIgZWxlbWVudCBjcmVhdGlvblxuXHQgICAgICBpZiAoIWVsLmNvbXBvbmVudCAmJlxuXHQgICAgICAgICAgbmFtZSA9PT0gJ211dGVkJyAmJlxuXHQgICAgICAgICAgcGxhdGZvcm1NdXN0VXNlUHJvcChlbC50YWcsIGVsLmF0dHJzTWFwLnR5cGUsIG5hbWUpKSB7XG5cdCAgICAgICAgYWRkUHJvcChlbCwgbmFtZSwgJ3RydWUnKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tJbkZvciAoZWwpIHtcblx0ICB2YXIgcGFyZW50ID0gZWw7XG5cdCAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgaWYgKHBhcmVudC5mb3IgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgfVxuXHQgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzIChuYW1lKSB7XG5cdCAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTtcblx0ICBpZiAobWF0Y2gpIHtcblx0ICAgIHZhciByZXQgPSB7fTtcblx0ICAgIG1hdGNoLmZvckVhY2goZnVuY3Rpb24gKG0pIHsgcmV0W20uc2xpY2UoMSldID0gdHJ1ZTsgfSk7XG5cdCAgICByZXR1cm4gcmV0XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQXR0cnNNYXAgKGF0dHJzKSB7XG5cdCAgdmFyIG1hcCA9IHt9O1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpZiAoXG5cdCAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICAgIG1hcFthdHRyc1tpXS5uYW1lXSAmJiAhaXNJRSAmJiAhaXNFZGdlXG5cdCAgICApIHtcblx0ICAgICAgd2FybiQyKCdkdXBsaWNhdGUgYXR0cmlidXRlOiAnICsgYXR0cnNbaV0ubmFtZSk7XG5cdCAgICB9XG5cdCAgICBtYXBbYXR0cnNbaV0ubmFtZV0gPSBhdHRyc1tpXS52YWx1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIG1hcFxuXHR9XG5cdFxuXHQvLyBmb3Igc2NyaXB0IChlLmcuIHR5cGU9XCJ4L3RlbXBsYXRlXCIpIG9yIHN0eWxlLCBkbyBub3QgZGVjb2RlIGNvbnRlbnRcblx0ZnVuY3Rpb24gaXNUZXh0VGFnIChlbCkge1xuXHQgIHJldHVybiBlbC50YWcgPT09ICdzY3JpcHQnIHx8IGVsLnRhZyA9PT0gJ3N0eWxlJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0ZvcmJpZGRlblRhZyAoZWwpIHtcblx0ICByZXR1cm4gKFxuXHQgICAgZWwudGFnID09PSAnc3R5bGUnIHx8XG5cdCAgICAoZWwudGFnID09PSAnc2NyaXB0JyAmJiAoXG5cdCAgICAgICFlbC5hdHRyc01hcC50eXBlIHx8XG5cdCAgICAgIGVsLmF0dHJzTWFwLnR5cGUgPT09ICd0ZXh0L2phdmFzY3JpcHQnXG5cdCAgICApKVxuXHQgIClcblx0fVxuXHRcblx0dmFyIGllTlNCdWcgPSAvXnhtbG5zOk5TXFxkKy87XG5cdHZhciBpZU5TUHJlZml4ID0gL15OU1xcZCs6Lztcblx0XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGZ1bmN0aW9uIGd1YXJkSUVTVkdCdWcgKGF0dHJzKSB7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBhdHRyID0gYXR0cnNbaV07XG5cdCAgICBpZiAoIWllTlNCdWcudGVzdChhdHRyLm5hbWUpKSB7XG5cdCAgICAgIGF0dHIubmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKGllTlNQcmVmaXgsICcnKTtcblx0ICAgICAgcmVzLnB1c2goYXR0cik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tGb3JBbGlhc01vZGVsIChlbCwgdmFsdWUpIHtcblx0ICB2YXIgX2VsID0gZWw7XG5cdCAgd2hpbGUgKF9lbCkge1xuXHQgICAgaWYgKF9lbC5mb3IgJiYgX2VsLmFsaWFzID09PSB2YWx1ZSkge1xuXHQgICAgICB3YXJuJDIoXG5cdCAgICAgICAgXCI8XCIgKyAoZWwudGFnKSArIFwiIHYtbW9kZWw9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCI+OiBcIiArXG5cdCAgICAgICAgXCJZb3UgYXJlIGJpbmRpbmcgdi1tb2RlbCBkaXJlY3RseSB0byBhIHYtZm9yIGl0ZXJhdGlvbiBhbGlhcy4gXCIgK1xuXHQgICAgICAgIFwiVGhpcyB3aWxsIG5vdCBiZSBhYmxlIHRvIG1vZGlmeSB0aGUgdi1mb3Igc291cmNlIGFycmF5IGJlY2F1c2UgXCIgK1xuXHQgICAgICAgIFwid3JpdGluZyB0byB0aGUgYWxpYXMgaXMgbGlrZSBtb2RpZnlpbmcgYSBmdW5jdGlvbiBsb2NhbCB2YXJpYWJsZS4gXCIgK1xuXHQgICAgICAgIFwiQ29uc2lkZXIgdXNpbmcgYW4gYXJyYXkgb2Ygb2JqZWN0cyBhbmQgdXNlIHYtbW9kZWwgb24gYW4gb2JqZWN0IHByb3BlcnR5IGluc3RlYWQuXCJcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIF9lbCA9IF9lbC5wYXJlbnQ7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8qKlxuXHQgKiBFeHBhbmQgaW5wdXRbdi1tb2RlbF0gd2l0aCBkeWFubWljIHR5cGUgYmluZGluZ3MgaW50byB2LWlmLWVsc2UgY2hhaW5zXG5cdCAqIFR1cm4gdGhpczpcblx0ICogICA8aW5wdXQgdi1tb2RlbD1cImRhdGFbdHlwZV1cIiA6dHlwZT1cInR5cGVcIj5cblx0ICogaW50byB0aGlzOlxuXHQgKiAgIDxpbnB1dCB2LWlmPVwidHlwZSA9PT0gJ2NoZWNrYm94J1wiIHR5cGU9XCJjaGVja2JveFwiIHYtbW9kZWw9XCJkYXRhW3R5cGVdXCI+XG5cdCAqICAgPGlucHV0IHYtZWxzZS1pZj1cInR5cGUgPT09ICdyYWRpbydcIiB0eXBlPVwicmFkaW9cIiB2LW1vZGVsPVwiZGF0YVt0eXBlXVwiPlxuXHQgKiAgIDxpbnB1dCB2LWVsc2UgOnR5cGU9XCJ0eXBlXCIgdi1tb2RlbD1cImRhdGFbdHlwZV1cIj5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcmVUcmFuc2Zvcm1Ob2RlIChlbCwgb3B0aW9ucykge1xuXHQgIGlmIChlbC50YWcgPT09ICdpbnB1dCcpIHtcblx0ICAgIHZhciBtYXAgPSBlbC5hdHRyc01hcDtcblx0ICAgIGlmICghbWFwWyd2LW1vZGVsJ10pIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHR5cGVCaW5kaW5nO1xuXHQgICAgaWYgKG1hcFsnOnR5cGUnXSB8fCBtYXBbJ3YtYmluZDp0eXBlJ10pIHtcblx0ICAgICAgdHlwZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3R5cGUnKTtcblx0ICAgIH1cblx0ICAgIGlmICghdHlwZUJpbmRpbmcgJiYgbWFwWyd2LWJpbmQnXSkge1xuXHQgICAgICB0eXBlQmluZGluZyA9IFwiKFwiICsgKG1hcFsndi1iaW5kJ10pICsgXCIpLnR5cGVcIjtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodHlwZUJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGlmQ29uZGl0aW9uID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtaWYnLCB0cnVlKTtcblx0ICAgICAgdmFyIGlmQ29uZGl0aW9uRXh0cmEgPSBpZkNvbmRpdGlvbiA/IChcIiYmKFwiICsgaWZDb25kaXRpb24gKyBcIilcIikgOiBcIlwiO1xuXHQgICAgICB2YXIgaGFzRWxzZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWVsc2UnLCB0cnVlKSAhPSBudWxsO1xuXHQgICAgICB2YXIgZWxzZUlmQ29uZGl0aW9uID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZWxzZS1pZicsIHRydWUpO1xuXHQgICAgICAvLyAxLiBjaGVja2JveFxuXHQgICAgICB2YXIgYnJhbmNoMCA9IGNsb25lQVNURWxlbWVudChlbCk7XG5cdCAgICAgIC8vIHByb2Nlc3MgZm9yIG9uIHRoZSBtYWluIG5vZGVcblx0ICAgICAgcHJvY2Vzc0ZvcihicmFuY2gwKTtcblx0ICAgICAgYWRkUmF3QXR0cihicmFuY2gwLCAndHlwZScsICdjaGVja2JveCcpO1xuXHQgICAgICBwcm9jZXNzRWxlbWVudChicmFuY2gwLCBvcHRpb25zKTtcblx0ICAgICAgYnJhbmNoMC5wcm9jZXNzZWQgPSB0cnVlOyAvLyBwcmV2ZW50IGl0IGZyb20gZG91YmxlLXByb2Nlc3NlZFxuXHQgICAgICBicmFuY2gwLmlmID0gXCIoXCIgKyB0eXBlQmluZGluZyArIFwiKT09PSdjaGVja2JveCdcIiArIGlmQ29uZGl0aW9uRXh0cmE7XG5cdCAgICAgIGFkZElmQ29uZGl0aW9uKGJyYW5jaDAsIHtcblx0ICAgICAgICBleHA6IGJyYW5jaDAuaWYsXG5cdCAgICAgICAgYmxvY2s6IGJyYW5jaDBcblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIDIuIGFkZCByYWRpbyBlbHNlLWlmIGNvbmRpdGlvblxuXHQgICAgICB2YXIgYnJhbmNoMSA9IGNsb25lQVNURWxlbWVudChlbCk7XG5cdCAgICAgIGdldEFuZFJlbW92ZUF0dHIoYnJhbmNoMSwgJ3YtZm9yJywgdHJ1ZSk7XG5cdCAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMSwgJ3R5cGUnLCAncmFkaW8nKTtcblx0ICAgICAgcHJvY2Vzc0VsZW1lbnQoYnJhbmNoMSwgb3B0aW9ucyk7XG5cdCAgICAgIGFkZElmQ29uZGl0aW9uKGJyYW5jaDAsIHtcblx0ICAgICAgICBleHA6IFwiKFwiICsgdHlwZUJpbmRpbmcgKyBcIik9PT0ncmFkaW8nXCIgKyBpZkNvbmRpdGlvbkV4dHJhLFxuXHQgICAgICAgIGJsb2NrOiBicmFuY2gxXG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyAzLiBvdGhlclxuXHQgICAgICB2YXIgYnJhbmNoMiA9IGNsb25lQVNURWxlbWVudChlbCk7XG5cdCAgICAgIGdldEFuZFJlbW92ZUF0dHIoYnJhbmNoMiwgJ3YtZm9yJywgdHJ1ZSk7XG5cdCAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMiwgJzp0eXBlJywgdHlwZUJpbmRpbmcpO1xuXHQgICAgICBwcm9jZXNzRWxlbWVudChicmFuY2gyLCBvcHRpb25zKTtcblx0ICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwge1xuXHQgICAgICAgIGV4cDogaWZDb25kaXRpb24sXG5cdCAgICAgICAgYmxvY2s6IGJyYW5jaDJcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBpZiAoaGFzRWxzZSkge1xuXHQgICAgICAgIGJyYW5jaDAuZWxzZSA9IHRydWU7XG5cdCAgICAgIH0gZWxzZSBpZiAoZWxzZUlmQ29uZGl0aW9uKSB7XG5cdCAgICAgICAgYnJhbmNoMC5lbHNlaWYgPSBlbHNlSWZDb25kaXRpb247XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBicmFuY2gwXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjbG9uZUFTVEVsZW1lbnQgKGVsKSB7XG5cdCAgcmV0dXJuIGNyZWF0ZUFTVEVsZW1lbnQoZWwudGFnLCBlbC5hdHRyc0xpc3Quc2xpY2UoKSwgZWwucGFyZW50KVxuXHR9XG5cdFxuXHR2YXIgbW9kZWwkMiA9IHtcblx0ICBwcmVUcmFuc2Zvcm1Ob2RlOiBwcmVUcmFuc2Zvcm1Ob2RlXG5cdH1cblx0XG5cdHZhciBtb2R1bGVzJDEgPSBbXG5cdCAga2xhc3MkMSxcblx0ICBzdHlsZSQxLFxuXHQgIG1vZGVsJDJcblx0XVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiB0ZXh0IChlbCwgZGlyKSB7XG5cdCAgaWYgKGRpci52YWx1ZSkge1xuXHQgICAgYWRkUHJvcChlbCwgJ3RleHRDb250ZW50JywgKFwiX3MoXCIgKyAoZGlyLnZhbHVlKSArIFwiKVwiKSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGh0bWwgKGVsLCBkaXIpIHtcblx0ICBpZiAoZGlyLnZhbHVlKSB7XG5cdCAgICBhZGRQcm9wKGVsLCAnaW5uZXJIVE1MJywgKFwiX3MoXCIgKyAoZGlyLnZhbHVlKSArIFwiKVwiKSk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgZGlyZWN0aXZlcyQxID0ge1xuXHQgIG1vZGVsOiBtb2RlbCxcblx0ICB0ZXh0OiB0ZXh0LFxuXHQgIGh0bWw6IGh0bWxcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgYmFzZU9wdGlvbnMgPSB7XG5cdCAgZXhwZWN0SFRNTDogdHJ1ZSxcblx0ICBtb2R1bGVzOiBtb2R1bGVzJDEsXG5cdCAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyQxLFxuXHQgIGlzUHJlVGFnOiBpc1ByZVRhZyxcblx0ICBpc1VuYXJ5VGFnOiBpc1VuYXJ5VGFnLFxuXHQgIG11c3RVc2VQcm9wOiBtdXN0VXNlUHJvcCxcblx0ICBjYW5CZUxlZnRPcGVuVGFnOiBjYW5CZUxlZnRPcGVuVGFnLFxuXHQgIGlzUmVzZXJ2ZWRUYWc6IGlzUmVzZXJ2ZWRUYWcsXG5cdCAgZ2V0VGFnTmFtZXNwYWNlOiBnZXRUYWdOYW1lc3BhY2UsXG5cdCAgc3RhdGljS2V5czogZ2VuU3RhdGljS2V5cyhtb2R1bGVzJDEpXG5cdH07XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBpc1N0YXRpY0tleTtcblx0dmFyIGlzUGxhdGZvcm1SZXNlcnZlZFRhZztcblx0XG5cdHZhciBnZW5TdGF0aWNLZXlzQ2FjaGVkID0gY2FjaGVkKGdlblN0YXRpY0tleXMkMSk7XG5cdFxuXHQvKipcblx0ICogR29hbCBvZiB0aGUgb3B0aW1pemVyOiB3YWxrIHRoZSBnZW5lcmF0ZWQgdGVtcGxhdGUgQVNUIHRyZWVcblx0ICogYW5kIGRldGVjdCBzdWItdHJlZXMgdGhhdCBhcmUgcHVyZWx5IHN0YXRpYywgaS5lLiBwYXJ0cyBvZlxuXHQgKiB0aGUgRE9NIHRoYXQgbmV2ZXIgbmVlZHMgdG8gY2hhbmdlLlxuXHQgKlxuXHQgKiBPbmNlIHdlIGRldGVjdCB0aGVzZSBzdWItdHJlZXMsIHdlIGNhbjpcblx0ICpcblx0ICogMS4gSG9pc3QgdGhlbSBpbnRvIGNvbnN0YW50cywgc28gdGhhdCB3ZSBubyBsb25nZXIgbmVlZCB0b1xuXHQgKiAgICBjcmVhdGUgZnJlc2ggbm9kZXMgZm9yIHRoZW0gb24gZWFjaCByZS1yZW5kZXI7XG5cdCAqIDIuIENvbXBsZXRlbHkgc2tpcCB0aGVtIGluIHRoZSBwYXRjaGluZyBwcm9jZXNzLlxuXHQgKi9cblx0ZnVuY3Rpb24gb3B0aW1pemUgKHJvb3QsIG9wdGlvbnMpIHtcblx0ICBpZiAoIXJvb3QpIHsgcmV0dXJuIH1cblx0ICBpc1N0YXRpY0tleSA9IGdlblN0YXRpY0tleXNDYWNoZWQob3B0aW9ucy5zdGF0aWNLZXlzIHx8ICcnKTtcblx0ICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87XG5cdCAgLy8gZmlyc3QgcGFzczogbWFyayBhbGwgbm9uLXN0YXRpYyBub2Rlcy5cblx0ICBtYXJrU3RhdGljJDEocm9vdCk7XG5cdCAgLy8gc2Vjb25kIHBhc3M6IG1hcmsgc3RhdGljIHJvb3RzLlxuXHQgIG1hcmtTdGF0aWNSb290cyhyb290LCBmYWxzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlblN0YXRpY0tleXMkMSAoa2V5cykge1xuXHQgIHJldHVybiBtYWtlTWFwKFxuXHQgICAgJ3R5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMnICtcblx0ICAgIChrZXlzID8gJywnICsga2V5cyA6ICcnKVxuXHQgIClcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFya1N0YXRpYyQxIChub2RlKSB7XG5cdCAgbm9kZS5zdGF0aWMgPSBpc1N0YXRpYyhub2RlKTtcblx0ICBpZiAobm9kZS50eXBlID09PSAxKSB7XG5cdCAgICAvLyBkbyBub3QgbWFrZSBjb21wb25lbnQgc2xvdCBjb250ZW50IHN0YXRpYy4gdGhpcyBhdm9pZHNcblx0ICAgIC8vIDEuIGNvbXBvbmVudHMgbm90IGFibGUgdG8gbXV0YXRlIHNsb3Qgbm9kZXNcblx0ICAgIC8vIDIuIHN0YXRpYyBzbG90IGNvbnRlbnQgZmFpbHMgZm9yIGhvdC1yZWxvYWRpbmdcblx0ICAgIGlmIChcblx0ICAgICAgIWlzUGxhdGZvcm1SZXNlcnZlZFRhZyhub2RlLnRhZykgJiZcblx0ICAgICAgbm9kZS50YWcgIT09ICdzbG90JyAmJlxuXHQgICAgICBub2RlLmF0dHJzTWFwWydpbmxpbmUtdGVtcGxhdGUnXSA9PSBudWxsXG5cdCAgICApIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG5cdCAgICAgIG1hcmtTdGF0aWMkMShjaGlsZCk7XG5cdCAgICAgIGlmICghY2hpbGQuc3RhdGljKSB7XG5cdCAgICAgICAgbm9kZS5zdGF0aWMgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKG5vZGUuaWZDb25kaXRpb25zKSB7XG5cdCAgICAgIGZvciAodmFyIGkkMSA9IDEsIGwkMSA9IG5vZGUuaWZDb25kaXRpb25zLmxlbmd0aDsgaSQxIDwgbCQxOyBpJDErKykge1xuXHQgICAgICAgIHZhciBibG9jayA9IG5vZGUuaWZDb25kaXRpb25zW2kkMV0uYmxvY2s7XG5cdCAgICAgICAgbWFya1N0YXRpYyQxKGJsb2NrKTtcblx0ICAgICAgICBpZiAoIWJsb2NrLnN0YXRpYykge1xuXHQgICAgICAgICAgbm9kZS5zdGF0aWMgPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hcmtTdGF0aWNSb290cyAobm9kZSwgaXNJbkZvcikge1xuXHQgIGlmIChub2RlLnR5cGUgPT09IDEpIHtcblx0ICAgIGlmIChub2RlLnN0YXRpYyB8fCBub2RlLm9uY2UpIHtcblx0ICAgICAgbm9kZS5zdGF0aWNJbkZvciA9IGlzSW5Gb3I7XG5cdCAgICB9XG5cdCAgICAvLyBGb3IgYSBub2RlIHRvIHF1YWxpZnkgYXMgYSBzdGF0aWMgcm9vdCwgaXQgc2hvdWxkIGhhdmUgY2hpbGRyZW4gdGhhdFxuXHQgICAgLy8gYXJlIG5vdCBqdXN0IHN0YXRpYyB0ZXh0LiBPdGhlcndpc2UgdGhlIGNvc3Qgb2YgaG9pc3Rpbmcgb3V0IHdpbGxcblx0ICAgIC8vIG91dHdlaWdoIHRoZSBiZW5lZml0cyBhbmQgaXQncyBiZXR0ZXIgb2ZmIHRvIGp1c3QgYWx3YXlzIHJlbmRlciBpdCBmcmVzaC5cblx0ICAgIGlmIChub2RlLnN0YXRpYyAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCAmJiAhKFxuXHQgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJlxuXHQgICAgICBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09IDNcblx0ICAgICkpIHtcblx0ICAgICAgbm9kZS5zdGF0aWNSb290ID0gdHJ1ZTtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBub2RlLnN0YXRpY1Jvb3QgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBtYXJrU3RhdGljUm9vdHMobm9kZS5jaGlsZHJlbltpXSwgaXNJbkZvciB8fCAhIW5vZGUuZm9yKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKG5vZGUuaWZDb25kaXRpb25zKSB7XG5cdCAgICAgIGZvciAodmFyIGkkMSA9IDEsIGwkMSA9IG5vZGUuaWZDb25kaXRpb25zLmxlbmd0aDsgaSQxIDwgbCQxOyBpJDErKykge1xuXHQgICAgICAgIG1hcmtTdGF0aWNSb290cyhub2RlLmlmQ29uZGl0aW9uc1tpJDFdLmJsb2NrLCBpc0luRm9yKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNTdGF0aWMgKG5vZGUpIHtcblx0ICBpZiAobm9kZS50eXBlID09PSAyKSB7IC8vIGV4cHJlc3Npb25cblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0ICBpZiAobm9kZS50eXBlID09PSAzKSB7IC8vIHRleHRcblx0ICAgIHJldHVybiB0cnVlXG5cdCAgfVxuXHQgIHJldHVybiAhIShub2RlLnByZSB8fCAoXG5cdCAgICAhbm9kZS5oYXNCaW5kaW5ncyAmJiAvLyBubyBkeW5hbWljIGJpbmRpbmdzXG5cdCAgICAhbm9kZS5pZiAmJiAhbm9kZS5mb3IgJiYgLy8gbm90IHYtaWYgb3Igdi1mb3Igb3Igdi1lbHNlXG5cdCAgICAhaXNCdWlsdEluVGFnKG5vZGUudGFnKSAmJiAvLyBub3QgYSBidWlsdC1pblxuXHQgICAgaXNQbGF0Zm9ybVJlc2VydmVkVGFnKG5vZGUudGFnKSAmJiAvLyBub3QgYSBjb21wb25lbnRcblx0ICAgICFpc0RpcmVjdENoaWxkT2ZUZW1wbGF0ZUZvcihub2RlKSAmJlxuXHQgICAgT2JqZWN0LmtleXMobm9kZSkuZXZlcnkoaXNTdGF0aWNLZXkpXG5cdCAgKSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3IgKG5vZGUpIHtcblx0ICB3aGlsZSAobm9kZS5wYXJlbnQpIHtcblx0ICAgIG5vZGUgPSBub2RlLnBhcmVudDtcblx0ICAgIGlmIChub2RlLnRhZyAhPT0gJ3RlbXBsYXRlJykge1xuXHQgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgIH1cblx0ICAgIGlmIChub2RlLmZvcikge1xuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2Vcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgZm5FeHBSRSA9IC9eKFtcXHckX10rfFxcKFteKV0qP1xcKSlcXHMqPT58XmZ1bmN0aW9uXFxzKlxcKC87XG5cdHZhciBzaW1wbGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJ1teJ10qPyddfFxcW1wiW15cIl0qP1wiXXxcXFtcXGQrXXxcXFtbQS1aYS16XyRdW1xcdyRdKl0pKiQvO1xuXHRcblx0Ly8gS2V5Ym9hcmRFdmVudC5rZXlDb2RlIGFsaWFzZXNcblx0dmFyIGtleUNvZGVzID0ge1xuXHQgIGVzYzogMjcsXG5cdCAgdGFiOiA5LFxuXHQgIGVudGVyOiAxMyxcblx0ICBzcGFjZTogMzIsXG5cdCAgdXA6IDM4LFxuXHQgIGxlZnQ6IDM3LFxuXHQgIHJpZ2h0OiAzOSxcblx0ICBkb3duOiA0MCxcblx0ICAnZGVsZXRlJzogWzgsIDQ2XVxuXHR9O1xuXHRcblx0Ly8gS2V5Ym9hcmRFdmVudC5rZXkgYWxpYXNlc1xuXHR2YXIga2V5TmFtZXMgPSB7XG5cdCAgZXNjOiAnRXNjYXBlJyxcblx0ICB0YWI6ICdUYWInLFxuXHQgIGVudGVyOiAnRW50ZXInLFxuXHQgIHNwYWNlOiAnICcsXG5cdCAgdXA6ICdBcnJvd1VwJyxcblx0ICBsZWZ0OiAnQXJyb3dMZWZ0Jyxcblx0ICByaWdodDogJ0Fycm93UmlnaHQnLFxuXHQgIGRvd246ICdBcnJvd0Rvd24nLFxuXHQgICdkZWxldGUnOiBbJ0JhY2tzcGFjZScsICdEZWxldGUnXVxuXHR9O1xuXHRcblx0Ly8gIzQ4Njg6IG1vZGlmaWVycyB0aGF0IHByZXZlbnQgdGhlIGV4ZWN1dGlvbiBvZiB0aGUgbGlzdGVuZXJcblx0Ly8gbmVlZCB0byBleHBsaWNpdGx5IHJldHVybiBudWxsIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB3aGV0aGVyIHRvIHJlbW92ZVxuXHQvLyB0aGUgbGlzdGVuZXIgZm9yIC5vbmNlXG5cdHZhciBnZW5HdWFyZCA9IGZ1bmN0aW9uIChjb25kaXRpb24pIHsgcmV0dXJuIChcImlmKFwiICsgY29uZGl0aW9uICsgXCIpcmV0dXJuIG51bGw7XCIpOyB9O1xuXHRcblx0dmFyIG1vZGlmaWVyQ29kZSA9IHtcblx0ICBzdG9wOiAnJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOycsXG5cdCAgcHJldmVudDogJyRldmVudC5wcmV2ZW50RGVmYXVsdCgpOycsXG5cdCAgc2VsZjogZ2VuR3VhcmQoXCIkZXZlbnQudGFyZ2V0ICE9PSAkZXZlbnQuY3VycmVudFRhcmdldFwiKSxcblx0ICBjdHJsOiBnZW5HdWFyZChcIiEkZXZlbnQuY3RybEtleVwiKSxcblx0ICBzaGlmdDogZ2VuR3VhcmQoXCIhJGV2ZW50LnNoaWZ0S2V5XCIpLFxuXHQgIGFsdDogZ2VuR3VhcmQoXCIhJGV2ZW50LmFsdEtleVwiKSxcblx0ICBtZXRhOiBnZW5HdWFyZChcIiEkZXZlbnQubWV0YUtleVwiKSxcblx0ICBsZWZ0OiBnZW5HdWFyZChcIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAwXCIpLFxuXHQgIG1pZGRsZTogZ2VuR3VhcmQoXCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMVwiKSxcblx0ICByaWdodDogZ2VuR3VhcmQoXCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMlwiKVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2VuSGFuZGxlcnMgKFxuXHQgIGV2ZW50cyxcblx0ICBpc05hdGl2ZSxcblx0ICB3YXJuXG5cdCkge1xuXHQgIHZhciByZXMgPSBpc05hdGl2ZSA/ICduYXRpdmVPbjp7JyA6ICdvbjp7Jztcblx0ICBmb3IgKHZhciBuYW1lIGluIGV2ZW50cykge1xuXHQgICAgcmVzICs9IFwiXFxcIlwiICsgbmFtZSArIFwiXFxcIjpcIiArIChnZW5IYW5kbGVyKG5hbWUsIGV2ZW50c1tuYW1lXSkpICsgXCIsXCI7XG5cdCAgfVxuXHQgIHJldHVybiByZXMuc2xpY2UoMCwgLTEpICsgJ30nXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbkhhbmRsZXIgKFxuXHQgIG5hbWUsXG5cdCAgaGFuZGxlclxuXHQpIHtcblx0ICBpZiAoIWhhbmRsZXIpIHtcblx0ICAgIHJldHVybiAnZnVuY3Rpb24oKXt9J1xuXHQgIH1cblx0XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoaGFuZGxlcikpIHtcblx0ICAgIHJldHVybiAoXCJbXCIgKyAoaGFuZGxlci5tYXAoZnVuY3Rpb24gKGhhbmRsZXIpIHsgcmV0dXJuIGdlbkhhbmRsZXIobmFtZSwgaGFuZGxlcik7IH0pLmpvaW4oJywnKSkgKyBcIl1cIilcblx0ICB9XG5cdFxuXHQgIHZhciBpc01ldGhvZFBhdGggPSBzaW1wbGVQYXRoUkUudGVzdChoYW5kbGVyLnZhbHVlKTtcblx0ICB2YXIgaXNGdW5jdGlvbkV4cHJlc3Npb24gPSBmbkV4cFJFLnRlc3QoaGFuZGxlci52YWx1ZSk7XG5cdFxuXHQgIGlmICghaGFuZGxlci5tb2RpZmllcnMpIHtcblx0ICAgIGlmIChpc01ldGhvZFBhdGggfHwgaXNGdW5jdGlvbkV4cHJlc3Npb24pIHtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXIudmFsdWVcblx0ICAgIH1cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgcmV0dXJuIChcImZ1bmN0aW9uKCRldmVudCl7XCIgKyAoaGFuZGxlci52YWx1ZSkgKyBcIn1cIikgLy8gaW5saW5lIHN0YXRlbWVudFxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29kZSA9ICcnO1xuXHQgICAgdmFyIGdlbk1vZGlmaWVyQ29kZSA9ICcnO1xuXHQgICAgdmFyIGtleXMgPSBbXTtcblx0ICAgIGZvciAodmFyIGtleSBpbiBoYW5kbGVyLm1vZGlmaWVycykge1xuXHQgICAgICBpZiAobW9kaWZpZXJDb2RlW2tleV0pIHtcblx0ICAgICAgICBnZW5Nb2RpZmllckNvZGUgKz0gbW9kaWZpZXJDb2RlW2tleV07XG5cdCAgICAgICAgLy8gbGVmdC9yaWdodFxuXHQgICAgICAgIGlmIChrZXlDb2Rlc1trZXldKSB7XG5cdCAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZXhhY3QnKSB7XG5cdCAgICAgICAgdmFyIG1vZGlmaWVycyA9IChoYW5kbGVyLm1vZGlmaWVycyk7XG5cdCAgICAgICAgZ2VuTW9kaWZpZXJDb2RlICs9IGdlbkd1YXJkKFxuXHQgICAgICAgICAgWydjdHJsJywgJ3NoaWZ0JywgJ2FsdCcsICdtZXRhJ11cblx0ICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5TW9kaWZpZXIpIHsgcmV0dXJuICFtb2RpZmllcnNba2V5TW9kaWZpZXJdOyB9KVxuXHQgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrZXlNb2RpZmllcikgeyByZXR1cm4gKFwiJGV2ZW50LlwiICsga2V5TW9kaWZpZXIgKyBcIktleVwiKTsgfSlcblx0ICAgICAgICAgICAgLmpvaW4oJ3x8Jylcblx0ICAgICAgICApO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoa2V5cy5sZW5ndGgpIHtcblx0ICAgICAgY29kZSArPSBnZW5LZXlGaWx0ZXIoa2V5cyk7XG5cdCAgICB9XG5cdCAgICAvLyBNYWtlIHN1cmUgbW9kaWZpZXJzIGxpa2UgcHJldmVudCBhbmQgc3RvcCBnZXQgZXhlY3V0ZWQgYWZ0ZXIga2V5IGZpbHRlcmluZ1xuXHQgICAgaWYgKGdlbk1vZGlmaWVyQ29kZSkge1xuXHQgICAgICBjb2RlICs9IGdlbk1vZGlmaWVyQ29kZTtcblx0ICAgIH1cblx0ICAgIHZhciBoYW5kbGVyQ29kZSA9IGlzTWV0aG9kUGF0aFxuXHQgICAgICA/IChcInJldHVybiBcIiArIChoYW5kbGVyLnZhbHVlKSArIFwiKCRldmVudClcIilcblx0ICAgICAgOiBpc0Z1bmN0aW9uRXhwcmVzc2lvblxuXHQgICAgICAgID8gKFwicmV0dXJuIChcIiArIChoYW5kbGVyLnZhbHVlKSArIFwiKSgkZXZlbnQpXCIpXG5cdCAgICAgICAgOiBoYW5kbGVyLnZhbHVlO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICByZXR1cm4gKFwiZnVuY3Rpb24oJGV2ZW50KXtcIiArIGNvZGUgKyBoYW5kbGVyQ29kZSArIFwifVwiKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuS2V5RmlsdGVyIChrZXlzKSB7XG5cdCAgcmV0dXJuIChcImlmKCEoJ2J1dHRvbicgaW4gJGV2ZW50KSYmXCIgKyAoa2V5cy5tYXAoZ2VuRmlsdGVyQ29kZSkuam9pbignJiYnKSkgKyBcIilyZXR1cm4gbnVsbDtcIilcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuRmlsdGVyQ29kZSAoa2V5KSB7XG5cdCAgdmFyIGtleVZhbCA9IHBhcnNlSW50KGtleSwgMTApO1xuXHQgIGlmIChrZXlWYWwpIHtcblx0ICAgIHJldHVybiAoXCIkZXZlbnQua2V5Q29kZSE9PVwiICsga2V5VmFsKVxuXHQgIH1cblx0ICB2YXIga2V5Q29kZSA9IGtleUNvZGVzW2tleV07XG5cdCAgdmFyIGtleU5hbWUgPSBrZXlOYW1lc1trZXldO1xuXHQgIHJldHVybiAoXG5cdCAgICBcIl9rKCRldmVudC5rZXlDb2RlLFwiICtcblx0ICAgIChKU09OLnN0cmluZ2lmeShrZXkpKSArIFwiLFwiICtcblx0ICAgIChKU09OLnN0cmluZ2lmeShrZXlDb2RlKSkgKyBcIixcIiArXG5cdCAgICBcIiRldmVudC5rZXksXCIgK1xuXHQgICAgXCJcIiArIChKU09OLnN0cmluZ2lmeShrZXlOYW1lKSkgK1xuXHQgICAgXCIpXCJcblx0ICApXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gb24gKGVsLCBkaXIpIHtcblx0ICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgZGlyLm1vZGlmaWVycykge1xuXHQgICAgd2FybihcInYtb24gd2l0aG91dCBhcmd1bWVudCBkb2VzIG5vdCBzdXBwb3J0IG1vZGlmaWVycy5cIik7XG5cdCAgfVxuXHQgIGVsLndyYXBMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoY29kZSkgeyByZXR1cm4gKFwiX2coXCIgKyBjb2RlICsgXCIsXCIgKyAoZGlyLnZhbHVlKSArIFwiKVwiKTsgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBiaW5kJDEgKGVsLCBkaXIpIHtcblx0ICBlbC53cmFwRGF0YSA9IGZ1bmN0aW9uIChjb2RlKSB7XG5cdCAgICByZXR1cm4gKFwiX2IoXCIgKyBjb2RlICsgXCIsJ1wiICsgKGVsLnRhZykgKyBcIicsXCIgKyAoZGlyLnZhbHVlKSArIFwiLFwiICsgKGRpci5tb2RpZmllcnMgJiYgZGlyLm1vZGlmaWVycy5wcm9wID8gJ3RydWUnIDogJ2ZhbHNlJykgKyAoZGlyLm1vZGlmaWVycyAmJiBkaXIubW9kaWZpZXJzLnN5bmMgPyAnLHRydWUnIDogJycpICsgXCIpXCIpXG5cdCAgfTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgYmFzZURpcmVjdGl2ZXMgPSB7XG5cdCAgb246IG9uLFxuXHQgIGJpbmQ6IGJpbmQkMSxcblx0ICBjbG9hazogbm9vcFxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBDb2RlZ2VuU3RhdGUgPSBmdW5jdGlvbiBDb2RlZ2VuU3RhdGUgKG9wdGlvbnMpIHtcblx0ICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgIHRoaXMud2FybiA9IG9wdGlvbnMud2FybiB8fCBiYXNlV2Fybjtcblx0ICB0aGlzLnRyYW5zZm9ybXMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ3RyYW5zZm9ybUNvZGUnKTtcblx0ICB0aGlzLmRhdGFHZW5GbnMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ2dlbkRhdGEnKTtcblx0ICB0aGlzLmRpcmVjdGl2ZXMgPSBleHRlbmQoZXh0ZW5kKHt9LCBiYXNlRGlyZWN0aXZlcyksIG9wdGlvbnMuZGlyZWN0aXZlcyk7XG5cdCAgdmFyIGlzUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87XG5cdCAgdGhpcy5tYXliZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gIWlzUmVzZXJ2ZWRUYWcoZWwudGFnKTsgfTtcblx0ICB0aGlzLm9uY2VJZCA9IDA7XG5cdCAgdGhpcy5zdGF0aWNSZW5kZXJGbnMgPSBbXTtcblx0fTtcblx0XG5cdFxuXHRcblx0ZnVuY3Rpb24gZ2VuZXJhdGUgKFxuXHQgIGFzdCxcblx0ICBvcHRpb25zXG5cdCkge1xuXHQgIHZhciBzdGF0ZSA9IG5ldyBDb2RlZ2VuU3RhdGUob3B0aW9ucyk7XG5cdCAgdmFyIGNvZGUgPSBhc3QgPyBnZW5FbGVtZW50KGFzdCwgc3RhdGUpIDogJ19jKFwiZGl2XCIpJztcblx0ICByZXR1cm4ge1xuXHQgICAgcmVuZGVyOiAoXCJ3aXRoKHRoaXMpe3JldHVybiBcIiArIGNvZGUgKyBcIn1cIiksXG5cdCAgICBzdGF0aWNSZW5kZXJGbnM6IHN0YXRlLnN0YXRpY1JlbmRlckZuc1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuRWxlbWVudCAoZWwsIHN0YXRlKSB7XG5cdCAgaWYgKGVsLnN0YXRpY1Jvb3QgJiYgIWVsLnN0YXRpY1Byb2Nlc3NlZCkge1xuXHQgICAgcmV0dXJuIGdlblN0YXRpYyhlbCwgc3RhdGUpXG5cdCAgfSBlbHNlIGlmIChlbC5vbmNlICYmICFlbC5vbmNlUHJvY2Vzc2VkKSB7XG5cdCAgICByZXR1cm4gZ2VuT25jZShlbCwgc3RhdGUpXG5cdCAgfSBlbHNlIGlmIChlbC5mb3IgJiYgIWVsLmZvclByb2Nlc3NlZCkge1xuXHQgICAgcmV0dXJuIGdlbkZvcihlbCwgc3RhdGUpXG5cdCAgfSBlbHNlIGlmIChlbC5pZiAmJiAhZWwuaWZQcm9jZXNzZWQpIHtcblx0ICAgIHJldHVybiBnZW5JZihlbCwgc3RhdGUpXG5cdCAgfSBlbHNlIGlmIChlbC50YWcgPT09ICd0ZW1wbGF0ZScgJiYgIWVsLnNsb3RUYXJnZXQpIHtcblx0ICAgIHJldHVybiBnZW5DaGlsZHJlbihlbCwgc3RhdGUpIHx8ICd2b2lkIDAnXG5cdCAgfSBlbHNlIGlmIChlbC50YWcgPT09ICdzbG90Jykge1xuXHQgICAgcmV0dXJuIGdlblNsb3QoZWwsIHN0YXRlKVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBjb21wb25lbnQgb3IgZWxlbWVudFxuXHQgICAgdmFyIGNvZGU7XG5cdCAgICBpZiAoZWwuY29tcG9uZW50KSB7XG5cdCAgICAgIGNvZGUgPSBnZW5Db21wb25lbnQoZWwuY29tcG9uZW50LCBlbCwgc3RhdGUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGRhdGEgPSBlbC5wbGFpbiA/IHVuZGVmaW5lZCA6IGdlbkRhdGEkMihlbCwgc3RhdGUpO1xuXHRcblx0ICAgICAgdmFyIGNoaWxkcmVuID0gZWwuaW5saW5lVGVtcGxhdGUgPyBudWxsIDogZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlLCB0cnVlKTtcblx0ICAgICAgY29kZSA9IFwiX2MoJ1wiICsgKGVsLnRhZykgKyBcIidcIiArIChkYXRhID8gKFwiLFwiICsgZGF0YSkgOiAnJykgKyAoY2hpbGRyZW4gPyAoXCIsXCIgKyBjaGlsZHJlbikgOiAnJykgKyBcIilcIjtcblx0ICAgIH1cblx0ICAgIC8vIG1vZHVsZSB0cmFuc2Zvcm1zXG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLnRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgY29kZSA9IHN0YXRlLnRyYW5zZm9ybXNbaV0oZWwsIGNvZGUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGNvZGVcblx0ICB9XG5cdH1cblx0XG5cdC8vIGhvaXN0IHN0YXRpYyBzdWItdHJlZXMgb3V0XG5cdGZ1bmN0aW9uIGdlblN0YXRpYyAoZWwsIHN0YXRlKSB7XG5cdCAgZWwuc3RhdGljUHJvY2Vzc2VkID0gdHJ1ZTtcblx0ICBzdGF0ZS5zdGF0aWNSZW5kZXJGbnMucHVzaCgoXCJ3aXRoKHRoaXMpe3JldHVybiBcIiArIChnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgXCJ9XCIpKTtcblx0ICByZXR1cm4gKFwiX20oXCIgKyAoc3RhdGUuc3RhdGljUmVuZGVyRm5zLmxlbmd0aCAtIDEpICsgKGVsLnN0YXRpY0luRm9yID8gJyx0cnVlJyA6ICcnKSArIFwiKVwiKVxuXHR9XG5cdFxuXHQvLyB2LW9uY2Vcblx0ZnVuY3Rpb24gZ2VuT25jZSAoZWwsIHN0YXRlKSB7XG5cdCAgZWwub25jZVByb2Nlc3NlZCA9IHRydWU7XG5cdCAgaWYgKGVsLmlmICYmICFlbC5pZlByb2Nlc3NlZCkge1xuXHQgICAgcmV0dXJuIGdlbklmKGVsLCBzdGF0ZSlcblx0ICB9IGVsc2UgaWYgKGVsLnN0YXRpY0luRm9yKSB7XG5cdCAgICB2YXIga2V5ID0gJyc7XG5cdCAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50O1xuXHQgICAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgICBpZiAocGFyZW50LmZvcikge1xuXHQgICAgICAgIGtleSA9IHBhcmVudC5rZXk7XG5cdCAgICAgICAgYnJlYWtcblx0ICAgICAgfVxuXHQgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuXHQgICAgfVxuXHQgICAgaWYgKCFrZXkpIHtcblx0ICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgc3RhdGUud2Fybihcblx0ICAgICAgICBcInYtb25jZSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB2LWZvciB0aGF0IGlzIGtleWVkLiBcIlxuXHQgICAgICApO1xuXHQgICAgICByZXR1cm4gZ2VuRWxlbWVudChlbCwgc3RhdGUpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gKFwiX28oXCIgKyAoZ2VuRWxlbWVudChlbCwgc3RhdGUpKSArIFwiLFwiICsgKHN0YXRlLm9uY2VJZCsrKSArIFwiLFwiICsga2V5ICsgXCIpXCIpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBnZW5TdGF0aWMoZWwsIHN0YXRlKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuSWYgKFxuXHQgIGVsLFxuXHQgIHN0YXRlLFxuXHQgIGFsdEdlbixcblx0ICBhbHRFbXB0eVxuXHQpIHtcblx0ICBlbC5pZlByb2Nlc3NlZCA9IHRydWU7IC8vIGF2b2lkIHJlY3Vyc2lvblxuXHQgIHJldHVybiBnZW5JZkNvbmRpdGlvbnMoZWwuaWZDb25kaXRpb25zLnNsaWNlKCksIHN0YXRlLCBhbHRHZW4sIGFsdEVtcHR5KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5JZkNvbmRpdGlvbnMgKFxuXHQgIGNvbmRpdGlvbnMsXG5cdCAgc3RhdGUsXG5cdCAgYWx0R2VuLFxuXHQgIGFsdEVtcHR5XG5cdCkge1xuXHQgIGlmICghY29uZGl0aW9ucy5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBhbHRFbXB0eSB8fCAnX2UoKSdcblx0ICB9XG5cdFxuXHQgIHZhciBjb25kaXRpb24gPSBjb25kaXRpb25zLnNoaWZ0KCk7XG5cdCAgaWYgKGNvbmRpdGlvbi5leHApIHtcblx0ICAgIHJldHVybiAoXCIoXCIgKyAoY29uZGl0aW9uLmV4cCkgKyBcIik/XCIgKyAoZ2VuVGVybmFyeUV4cChjb25kaXRpb24uYmxvY2spKSArIFwiOlwiICsgKGdlbklmQ29uZGl0aW9ucyhjb25kaXRpb25zLCBzdGF0ZSwgYWx0R2VuLCBhbHRFbXB0eSkpKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gKFwiXCIgKyAoZ2VuVGVybmFyeUV4cChjb25kaXRpb24uYmxvY2spKSlcblx0ICB9XG5cdFxuXHQgIC8vIHYtaWYgd2l0aCB2LW9uY2Ugc2hvdWxkIGdlbmVyYXRlIGNvZGUgbGlrZSAoYSk/X20oMCk6X20oMSlcblx0ICBmdW5jdGlvbiBnZW5UZXJuYXJ5RXhwIChlbCkge1xuXHQgICAgcmV0dXJuIGFsdEdlblxuXHQgICAgICA/IGFsdEdlbihlbCwgc3RhdGUpXG5cdCAgICAgIDogZWwub25jZVxuXHQgICAgICAgID8gZ2VuT25jZShlbCwgc3RhdGUpXG5cdCAgICAgICAgOiBnZW5FbGVtZW50KGVsLCBzdGF0ZSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbkZvciAoXG5cdCAgZWwsXG5cdCAgc3RhdGUsXG5cdCAgYWx0R2VuLFxuXHQgIGFsdEhlbHBlclxuXHQpIHtcblx0ICB2YXIgZXhwID0gZWwuZm9yO1xuXHQgIHZhciBhbGlhcyA9IGVsLmFsaWFzO1xuXHQgIHZhciBpdGVyYXRvcjEgPSBlbC5pdGVyYXRvcjEgPyAoXCIsXCIgKyAoZWwuaXRlcmF0b3IxKSkgOiAnJztcblx0ICB2YXIgaXRlcmF0b3IyID0gZWwuaXRlcmF0b3IyID8gKFwiLFwiICsgKGVsLml0ZXJhdG9yMikpIDogJyc7XG5cdFxuXHQgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuXHQgICAgc3RhdGUubWF5YmVDb21wb25lbnQoZWwpICYmXG5cdCAgICBlbC50YWcgIT09ICdzbG90JyAmJlxuXHQgICAgZWwudGFnICE9PSAndGVtcGxhdGUnICYmXG5cdCAgICAhZWwua2V5XG5cdCAgKSB7XG5cdCAgICBzdGF0ZS53YXJuKFxuXHQgICAgICBcIjxcIiArIChlbC50YWcpICsgXCIgdi1mb3I9XFxcIlwiICsgYWxpYXMgKyBcIiBpbiBcIiArIGV4cCArIFwiXFxcIj46IGNvbXBvbmVudCBsaXN0cyByZW5kZXJlZCB3aXRoIFwiICtcblx0ICAgICAgXCJ2LWZvciBzaG91bGQgaGF2ZSBleHBsaWNpdCBrZXlzLiBcIiArXG5cdCAgICAgIFwiU2VlIGh0dHBzOi8vdnVlanMub3JnL2d1aWRlL2xpc3QuaHRtbCNrZXkgZm9yIG1vcmUgaW5mby5cIixcblx0ICAgICAgdHJ1ZSAvKiB0aXAgKi9cblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBlbC5mb3JQcm9jZXNzZWQgPSB0cnVlOyAvLyBhdm9pZCByZWN1cnNpb25cblx0ICByZXR1cm4gKGFsdEhlbHBlciB8fCAnX2wnKSArIFwiKChcIiArIGV4cCArIFwiKSxcIiArXG5cdCAgICBcImZ1bmN0aW9uKFwiICsgYWxpYXMgKyBpdGVyYXRvcjEgKyBpdGVyYXRvcjIgKyBcIil7XCIgK1xuXHQgICAgICBcInJldHVybiBcIiArICgoYWx0R2VuIHx8IGdlbkVsZW1lbnQpKGVsLCBzdGF0ZSkpICtcblx0ICAgICd9KSdcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuRGF0YSQyIChlbCwgc3RhdGUpIHtcblx0ICB2YXIgZGF0YSA9ICd7Jztcblx0XG5cdCAgLy8gZGlyZWN0aXZlcyBmaXJzdC5cblx0ICAvLyBkaXJlY3RpdmVzIG1heSBtdXRhdGUgdGhlIGVsJ3Mgb3RoZXIgcHJvcGVydGllcyBiZWZvcmUgdGhleSBhcmUgZ2VuZXJhdGVkLlxuXHQgIHZhciBkaXJzID0gZ2VuRGlyZWN0aXZlcyhlbCwgc3RhdGUpO1xuXHQgIGlmIChkaXJzKSB7IGRhdGEgKz0gZGlycyArICcsJzsgfVxuXHRcblx0ICAvLyBrZXlcblx0ICBpZiAoZWwua2V5KSB7XG5cdCAgICBkYXRhICs9IFwia2V5OlwiICsgKGVsLmtleSkgKyBcIixcIjtcblx0ICB9XG5cdCAgLy8gcmVmXG5cdCAgaWYgKGVsLnJlZikge1xuXHQgICAgZGF0YSArPSBcInJlZjpcIiArIChlbC5yZWYpICsgXCIsXCI7XG5cdCAgfVxuXHQgIGlmIChlbC5yZWZJbkZvcikge1xuXHQgICAgZGF0YSArPSBcInJlZkluRm9yOnRydWUsXCI7XG5cdCAgfVxuXHQgIC8vIHByZVxuXHQgIGlmIChlbC5wcmUpIHtcblx0ICAgIGRhdGEgKz0gXCJwcmU6dHJ1ZSxcIjtcblx0ICB9XG5cdCAgLy8gcmVjb3JkIG9yaWdpbmFsIHRhZyBuYW1lIGZvciBjb21wb25lbnRzIHVzaW5nIFwiaXNcIiBhdHRyaWJ1dGVcblx0ICBpZiAoZWwuY29tcG9uZW50KSB7XG5cdCAgICBkYXRhICs9IFwidGFnOlxcXCJcIiArIChlbC50YWcpICsgXCJcXFwiLFwiO1xuXHQgIH1cblx0ICAvLyBtb2R1bGUgZGF0YSBnZW5lcmF0aW9uIGZ1bmN0aW9uc1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUuZGF0YUdlbkZucy5sZW5ndGg7IGkrKykge1xuXHQgICAgZGF0YSArPSBzdGF0ZS5kYXRhR2VuRm5zW2ldKGVsKTtcblx0ICB9XG5cdCAgLy8gYXR0cmlidXRlc1xuXHQgIGlmIChlbC5hdHRycykge1xuXHQgICAgZGF0YSArPSBcImF0dHJzOntcIiArIChnZW5Qcm9wcyhlbC5hdHRycykpICsgXCJ9LFwiO1xuXHQgIH1cblx0ICAvLyBET00gcHJvcHNcblx0ICBpZiAoZWwucHJvcHMpIHtcblx0ICAgIGRhdGEgKz0gXCJkb21Qcm9wczp7XCIgKyAoZ2VuUHJvcHMoZWwucHJvcHMpKSArIFwifSxcIjtcblx0ICB9XG5cdCAgLy8gZXZlbnQgaGFuZGxlcnNcblx0ICBpZiAoZWwuZXZlbnRzKSB7XG5cdCAgICBkYXRhICs9IChnZW5IYW5kbGVycyhlbC5ldmVudHMsIGZhbHNlLCBzdGF0ZS53YXJuKSkgKyBcIixcIjtcblx0ICB9XG5cdCAgaWYgKGVsLm5hdGl2ZUV2ZW50cykge1xuXHQgICAgZGF0YSArPSAoZ2VuSGFuZGxlcnMoZWwubmF0aXZlRXZlbnRzLCB0cnVlLCBzdGF0ZS53YXJuKSkgKyBcIixcIjtcblx0ICB9XG5cdCAgLy8gc2xvdCB0YXJnZXRcblx0ICAvLyBvbmx5IGZvciBub24tc2NvcGVkIHNsb3RzXG5cdCAgaWYgKGVsLnNsb3RUYXJnZXQgJiYgIWVsLnNsb3RTY29wZSkge1xuXHQgICAgZGF0YSArPSBcInNsb3Q6XCIgKyAoZWwuc2xvdFRhcmdldCkgKyBcIixcIjtcblx0ICB9XG5cdCAgLy8gc2NvcGVkIHNsb3RzXG5cdCAgaWYgKGVsLnNjb3BlZFNsb3RzKSB7XG5cdCAgICBkYXRhICs9IChnZW5TY29wZWRTbG90cyhlbC5zY29wZWRTbG90cywgc3RhdGUpKSArIFwiLFwiO1xuXHQgIH1cblx0ICAvLyBjb21wb25lbnQgdi1tb2RlbFxuXHQgIGlmIChlbC5tb2RlbCkge1xuXHQgICAgZGF0YSArPSBcIm1vZGVsOnt2YWx1ZTpcIiArIChlbC5tb2RlbC52YWx1ZSkgKyBcIixjYWxsYmFjazpcIiArIChlbC5tb2RlbC5jYWxsYmFjaykgKyBcIixleHByZXNzaW9uOlwiICsgKGVsLm1vZGVsLmV4cHJlc3Npb24pICsgXCJ9LFwiO1xuXHQgIH1cblx0ICAvLyBpbmxpbmUtdGVtcGxhdGVcblx0ICBpZiAoZWwuaW5saW5lVGVtcGxhdGUpIHtcblx0ICAgIHZhciBpbmxpbmVUZW1wbGF0ZSA9IGdlbklubGluZVRlbXBsYXRlKGVsLCBzdGF0ZSk7XG5cdCAgICBpZiAoaW5saW5lVGVtcGxhdGUpIHtcblx0ICAgICAgZGF0YSArPSBpbmxpbmVUZW1wbGF0ZSArIFwiLFwiO1xuXHQgICAgfVxuXHQgIH1cblx0ICBkYXRhID0gZGF0YS5yZXBsYWNlKC8sJC8sICcnKSArICd9Jztcblx0ICAvLyB2LWJpbmQgZGF0YSB3cmFwXG5cdCAgaWYgKGVsLndyYXBEYXRhKSB7XG5cdCAgICBkYXRhID0gZWwud3JhcERhdGEoZGF0YSk7XG5cdCAgfVxuXHQgIC8vIHYtb24gZGF0YSB3cmFwXG5cdCAgaWYgKGVsLndyYXBMaXN0ZW5lcnMpIHtcblx0ICAgIGRhdGEgPSBlbC53cmFwTGlzdGVuZXJzKGRhdGEpO1xuXHQgIH1cblx0ICByZXR1cm4gZGF0YVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5EaXJlY3RpdmVzIChlbCwgc3RhdGUpIHtcblx0ICB2YXIgZGlycyA9IGVsLmRpcmVjdGl2ZXM7XG5cdCAgaWYgKCFkaXJzKSB7IHJldHVybiB9XG5cdCAgdmFyIHJlcyA9ICdkaXJlY3RpdmVzOlsnO1xuXHQgIHZhciBoYXNSdW50aW1lID0gZmFsc2U7XG5cdCAgdmFyIGksIGwsIGRpciwgbmVlZFJ1bnRpbWU7XG5cdCAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBkaXIgPSBkaXJzW2ldO1xuXHQgICAgbmVlZFJ1bnRpbWUgPSB0cnVlO1xuXHQgICAgdmFyIGdlbiA9IHN0YXRlLmRpcmVjdGl2ZXNbZGlyLm5hbWVdO1xuXHQgICAgaWYgKGdlbikge1xuXHQgICAgICAvLyBjb21waWxlLXRpbWUgZGlyZWN0aXZlIHRoYXQgbWFuaXB1bGF0ZXMgQVNULlxuXHQgICAgICAvLyByZXR1cm5zIHRydWUgaWYgaXQgYWxzbyBuZWVkcyBhIHJ1bnRpbWUgY291bnRlcnBhcnQuXG5cdCAgICAgIG5lZWRSdW50aW1lID0gISFnZW4oZWwsIGRpciwgc3RhdGUud2Fybik7XG5cdCAgICB9XG5cdCAgICBpZiAobmVlZFJ1bnRpbWUpIHtcblx0ICAgICAgaGFzUnVudGltZSA9IHRydWU7XG5cdCAgICAgIHJlcyArPSBcIntuYW1lOlxcXCJcIiArIChkaXIubmFtZSkgKyBcIlxcXCIscmF3TmFtZTpcXFwiXCIgKyAoZGlyLnJhd05hbWUpICsgXCJcXFwiXCIgKyAoZGlyLnZhbHVlID8gKFwiLHZhbHVlOihcIiArIChkaXIudmFsdWUpICsgXCIpLGV4cHJlc3Npb246XCIgKyAoSlNPTi5zdHJpbmdpZnkoZGlyLnZhbHVlKSkpIDogJycpICsgKGRpci5hcmcgPyAoXCIsYXJnOlxcXCJcIiArIChkaXIuYXJnKSArIFwiXFxcIlwiKSA6ICcnKSArIChkaXIubW9kaWZpZXJzID8gKFwiLG1vZGlmaWVyczpcIiArIChKU09OLnN0cmluZ2lmeShkaXIubW9kaWZpZXJzKSkpIDogJycpICsgXCJ9LFwiO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoaGFzUnVudGltZSkge1xuXHQgICAgcmV0dXJuIHJlcy5zbGljZSgwLCAtMSkgKyAnXSdcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbklubGluZVRlbXBsYXRlIChlbCwgc3RhdGUpIHtcblx0ICB2YXIgYXN0ID0gZWwuY2hpbGRyZW5bMF07XG5cdCAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIChcblx0ICAgIGVsLmNoaWxkcmVuLmxlbmd0aCAhPT0gMSB8fCBhc3QudHlwZSAhPT0gMVxuXHQgICkpIHtcblx0ICAgIHN0YXRlLndhcm4oJ0lubGluZS10ZW1wbGF0ZSBjb21wb25lbnRzIG11c3QgaGF2ZSBleGFjdGx5IG9uZSBjaGlsZCBlbGVtZW50LicpO1xuXHQgIH1cblx0ICBpZiAoYXN0LnR5cGUgPT09IDEpIHtcblx0ICAgIHZhciBpbmxpbmVSZW5kZXJGbnMgPSBnZW5lcmF0ZShhc3QsIHN0YXRlLm9wdGlvbnMpO1xuXHQgICAgcmV0dXJuIChcImlubGluZVRlbXBsYXRlOntyZW5kZXI6ZnVuY3Rpb24oKXtcIiArIChpbmxpbmVSZW5kZXJGbnMucmVuZGVyKSArIFwifSxzdGF0aWNSZW5kZXJGbnM6W1wiICsgKGlubGluZVJlbmRlckZucy5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uIChjb2RlKSB7IHJldHVybiAoXCJmdW5jdGlvbigpe1wiICsgY29kZSArIFwifVwiKTsgfSkuam9pbignLCcpKSArIFwiXX1cIilcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlblNjb3BlZFNsb3RzIChcblx0ICBzbG90cyxcblx0ICBzdGF0ZVxuXHQpIHtcblx0ICByZXR1cm4gKFwic2NvcGVkU2xvdHM6X3UoW1wiICsgKE9iamVjdC5rZXlzKHNsb3RzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gZ2VuU2NvcGVkU2xvdChrZXksIHNsb3RzW2tleV0sIHN0YXRlKVxuXHQgICAgfSkuam9pbignLCcpKSArIFwiXSlcIilcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuU2NvcGVkU2xvdCAoXG5cdCAga2V5LFxuXHQgIGVsLFxuXHQgIHN0YXRlXG5cdCkge1xuXHQgIGlmIChlbC5mb3IgJiYgIWVsLmZvclByb2Nlc3NlZCkge1xuXHQgICAgcmV0dXJuIGdlbkZvclNjb3BlZFNsb3Qoa2V5LCBlbCwgc3RhdGUpXG5cdCAgfVxuXHQgIHZhciBmbiA9IFwiZnVuY3Rpb24oXCIgKyAoU3RyaW5nKGVsLnNsb3RTY29wZSkpICsgXCIpe1wiICtcblx0ICAgIFwicmV0dXJuIFwiICsgKGVsLnRhZyA9PT0gJ3RlbXBsYXRlJ1xuXHQgICAgICA/IGVsLmlmXG5cdCAgICAgICAgPyAoKGVsLmlmKSArIFwiP1wiICsgKGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSkgfHwgJ3VuZGVmaW5lZCcpICsgXCI6dW5kZWZpbmVkXCIpXG5cdCAgICAgICAgOiBnZW5DaGlsZHJlbihlbCwgc3RhdGUpIHx8ICd1bmRlZmluZWQnXG5cdCAgICAgIDogZ2VuRWxlbWVudChlbCwgc3RhdGUpKSArIFwifVwiO1xuXHQgIHJldHVybiAoXCJ7a2V5OlwiICsga2V5ICsgXCIsZm46XCIgKyBmbiArIFwifVwiKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5Gb3JTY29wZWRTbG90IChcblx0ICBrZXksXG5cdCAgZWwsXG5cdCAgc3RhdGVcblx0KSB7XG5cdCAgdmFyIGV4cCA9IGVsLmZvcjtcblx0ICB2YXIgYWxpYXMgPSBlbC5hbGlhcztcblx0ICB2YXIgaXRlcmF0b3IxID0gZWwuaXRlcmF0b3IxID8gKFwiLFwiICsgKGVsLml0ZXJhdG9yMSkpIDogJyc7XG5cdCAgdmFyIGl0ZXJhdG9yMiA9IGVsLml0ZXJhdG9yMiA/IChcIixcIiArIChlbC5pdGVyYXRvcjIpKSA6ICcnO1xuXHQgIGVsLmZvclByb2Nlc3NlZCA9IHRydWU7IC8vIGF2b2lkIHJlY3Vyc2lvblxuXHQgIHJldHVybiBcIl9sKChcIiArIGV4cCArIFwiKSxcIiArXG5cdCAgICBcImZ1bmN0aW9uKFwiICsgYWxpYXMgKyBpdGVyYXRvcjEgKyBpdGVyYXRvcjIgKyBcIil7XCIgK1xuXHQgICAgICBcInJldHVybiBcIiArIChnZW5TY29wZWRTbG90KGtleSwgZWwsIHN0YXRlKSkgK1xuXHQgICAgJ30pJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5DaGlsZHJlbiAoXG5cdCAgZWwsXG5cdCAgc3RhdGUsXG5cdCAgY2hlY2tTa2lwLFxuXHQgIGFsdEdlbkVsZW1lbnQsXG5cdCAgYWx0R2VuTm9kZVxuXHQpIHtcblx0ICB2YXIgY2hpbGRyZW4gPSBlbC5jaGlsZHJlbjtcblx0ICBpZiAoY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdCAgICB2YXIgZWwkMSA9IGNoaWxkcmVuWzBdO1xuXHQgICAgLy8gb3B0aW1pemUgc2luZ2xlIHYtZm9yXG5cdCAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG5cdCAgICAgIGVsJDEuZm9yICYmXG5cdCAgICAgIGVsJDEudGFnICE9PSAndGVtcGxhdGUnICYmXG5cdCAgICAgIGVsJDEudGFnICE9PSAnc2xvdCdcblx0ICAgICkge1xuXHQgICAgICByZXR1cm4gKGFsdEdlbkVsZW1lbnQgfHwgZ2VuRWxlbWVudCkoZWwkMSwgc3RhdGUpXG5cdCAgICB9XG5cdCAgICB2YXIgbm9ybWFsaXphdGlvblR5cGUgPSBjaGVja1NraXBcblx0ICAgICAgPyBnZXROb3JtYWxpemF0aW9uVHlwZShjaGlsZHJlbiwgc3RhdGUubWF5YmVDb21wb25lbnQpXG5cdCAgICAgIDogMDtcblx0ICAgIHZhciBnZW4gPSBhbHRHZW5Ob2RlIHx8IGdlbk5vZGU7XG5cdCAgICByZXR1cm4gKFwiW1wiICsgKGNoaWxkcmVuLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gZ2VuKGMsIHN0YXRlKTsgfSkuam9pbignLCcpKSArIFwiXVwiICsgKG5vcm1hbGl6YXRpb25UeXBlID8gKFwiLFwiICsgbm9ybWFsaXphdGlvblR5cGUpIDogJycpKVxuXHQgIH1cblx0fVxuXHRcblx0Ly8gZGV0ZXJtaW5lIHRoZSBub3JtYWxpemF0aW9uIG5lZWRlZCBmb3IgdGhlIGNoaWxkcmVuIGFycmF5LlxuXHQvLyAwOiBubyBub3JtYWxpemF0aW9uIG5lZWRlZFxuXHQvLyAxOiBzaW1wbGUgbm9ybWFsaXphdGlvbiBuZWVkZWQgKHBvc3NpYmxlIDEtbGV2ZWwgZGVlcCBuZXN0ZWQgYXJyYXkpXG5cdC8vIDI6IGZ1bGwgbm9ybWFsaXphdGlvbiBuZWVkZWRcblx0ZnVuY3Rpb24gZ2V0Tm9ybWFsaXphdGlvblR5cGUgKFxuXHQgIGNoaWxkcmVuLFxuXHQgIG1heWJlQ29tcG9uZW50XG5cdCkge1xuXHQgIHZhciByZXMgPSAwO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBlbCA9IGNoaWxkcmVuW2ldO1xuXHQgICAgaWYgKGVsLnR5cGUgIT09IDEpIHtcblx0ICAgICAgY29udGludWVcblx0ICAgIH1cblx0ICAgIGlmIChuZWVkc05vcm1hbGl6YXRpb24oZWwpIHx8XG5cdCAgICAgICAgKGVsLmlmQ29uZGl0aW9ucyAmJiBlbC5pZkNvbmRpdGlvbnMuc29tZShmdW5jdGlvbiAoYykgeyByZXR1cm4gbmVlZHNOb3JtYWxpemF0aW9uKGMuYmxvY2spOyB9KSkpIHtcblx0ICAgICAgcmVzID0gMjtcblx0ICAgICAgYnJlYWtcblx0ICAgIH1cblx0ICAgIGlmIChtYXliZUNvbXBvbmVudChlbCkgfHxcblx0ICAgICAgICAoZWwuaWZDb25kaXRpb25zICYmIGVsLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uIChjKSB7IHJldHVybiBtYXliZUNvbXBvbmVudChjLmJsb2NrKTsgfSkpKSB7XG5cdCAgICAgIHJlcyA9IDE7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0ZnVuY3Rpb24gbmVlZHNOb3JtYWxpemF0aW9uIChlbCkge1xuXHQgIHJldHVybiBlbC5mb3IgIT09IHVuZGVmaW5lZCB8fCBlbC50YWcgPT09ICd0ZW1wbGF0ZScgfHwgZWwudGFnID09PSAnc2xvdCdcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuTm9kZSAobm9kZSwgc3RhdGUpIHtcblx0ICBpZiAobm9kZS50eXBlID09PSAxKSB7XG5cdCAgICByZXR1cm4gZ2VuRWxlbWVudChub2RlLCBzdGF0ZSlcblx0ICB9IGlmIChub2RlLnR5cGUgPT09IDMgJiYgbm9kZS5pc0NvbW1lbnQpIHtcblx0ICAgIHJldHVybiBnZW5Db21tZW50KG5vZGUpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBnZW5UZXh0KG5vZGUpXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5UZXh0ICh0ZXh0KSB7XG5cdCAgcmV0dXJuIChcIl92KFwiICsgKHRleHQudHlwZSA9PT0gMlxuXHQgICAgPyB0ZXh0LmV4cHJlc3Npb24gLy8gbm8gbmVlZCBmb3IgKCkgYmVjYXVzZSBhbHJlYWR5IHdyYXBwZWQgaW4gX3MoKVxuXHQgICAgOiB0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMoSlNPTi5zdHJpbmdpZnkodGV4dC50ZXh0KSkpICsgXCIpXCIpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdlbkNvbW1lbnQgKGNvbW1lbnQpIHtcblx0ICByZXR1cm4gKFwiX2UoXCIgKyAoSlNPTi5zdHJpbmdpZnkoY29tbWVudC50ZXh0KSkgKyBcIilcIilcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2VuU2xvdCAoZWwsIHN0YXRlKSB7XG5cdCAgdmFyIHNsb3ROYW1lID0gZWwuc2xvdE5hbWUgfHwgJ1wiZGVmYXVsdFwiJztcblx0ICB2YXIgY2hpbGRyZW4gPSBnZW5DaGlsZHJlbihlbCwgc3RhdGUpO1xuXHQgIHZhciByZXMgPSBcIl90KFwiICsgc2xvdE5hbWUgKyAoY2hpbGRyZW4gPyAoXCIsXCIgKyBjaGlsZHJlbikgOiAnJyk7XG5cdCAgdmFyIGF0dHJzID0gZWwuYXR0cnMgJiYgKFwie1wiICsgKGVsLmF0dHJzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gKChjYW1lbGl6ZShhLm5hbWUpKSArIFwiOlwiICsgKGEudmFsdWUpKTsgfSkuam9pbignLCcpKSArIFwifVwiKTtcblx0ICB2YXIgYmluZCQkMSA9IGVsLmF0dHJzTWFwWyd2LWJpbmQnXTtcblx0ICBpZiAoKGF0dHJzIHx8IGJpbmQkJDEpICYmICFjaGlsZHJlbikge1xuXHQgICAgcmVzICs9IFwiLG51bGxcIjtcblx0ICB9XG5cdCAgaWYgKGF0dHJzKSB7XG5cdCAgICByZXMgKz0gXCIsXCIgKyBhdHRycztcblx0ICB9XG5cdCAgaWYgKGJpbmQkJDEpIHtcblx0ICAgIHJlcyArPSAoYXR0cnMgPyAnJyA6ICcsbnVsbCcpICsgXCIsXCIgKyBiaW5kJCQxO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzICsgJyknXG5cdH1cblx0XG5cdC8vIGNvbXBvbmVudE5hbWUgaXMgZWwuY29tcG9uZW50LCB0YWtlIGl0IGFzIGFyZ3VtZW50IHRvIHNodW4gZmxvdydzIHBlc3NpbWlzdGljIHJlZmluZW1lbnRcblx0ZnVuY3Rpb24gZ2VuQ29tcG9uZW50IChcblx0ICBjb21wb25lbnROYW1lLFxuXHQgIGVsLFxuXHQgIHN0YXRlXG5cdCkge1xuXHQgIHZhciBjaGlsZHJlbiA9IGVsLmlubGluZVRlbXBsYXRlID8gbnVsbCA6IGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSwgdHJ1ZSk7XG5cdCAgcmV0dXJuIChcIl9jKFwiICsgY29tcG9uZW50TmFtZSArIFwiLFwiICsgKGdlbkRhdGEkMihlbCwgc3RhdGUpKSArIChjaGlsZHJlbiA/IChcIixcIiArIGNoaWxkcmVuKSA6ICcnKSArIFwiKVwiKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZW5Qcm9wcyAocHJvcHMpIHtcblx0ICB2YXIgcmVzID0gJyc7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHByb3AgPSBwcm9wc1tpXTtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAge1xuXHQgICAgICByZXMgKz0gXCJcXFwiXCIgKyAocHJvcC5uYW1lKSArIFwiXFxcIjpcIiArICh0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMocHJvcC52YWx1ZSkpICsgXCIsXCI7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXMuc2xpY2UoMCwgLTEpXG5cdH1cblx0XG5cdC8vICMzODk1LCAjNDI2OFxuXHRmdW5jdGlvbiB0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMgKHRleHQpIHtcblx0ICByZXR1cm4gdGV4dFxuXHQgICAgLnJlcGxhY2UoL1xcdTIwMjgvZywgJ1xcXFx1MjAyOCcpXG5cdCAgICAucmVwbGFjZSgvXFx1MjAyOS9nLCAnXFxcXHUyMDI5Jylcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyB0aGVzZSBrZXl3b3JkcyBzaG91bGQgbm90IGFwcGVhciBpbnNpZGUgZXhwcmVzc2lvbnMsIGJ1dCBvcGVyYXRvcnMgbGlrZVxuXHQvLyB0eXBlb2YsIGluc3RhbmNlb2YgYW5kIGluIGFyZSBhbGxvd2VkXG5cdHZhciBwcm9oaWJpdGVkS2V5d29yZFJFID0gbmV3IFJlZ0V4cCgnXFxcXGInICsgKFxuXHQgICdkbyxpZixmb3IsbGV0LG5ldyx0cnksdmFyLGNhc2UsZWxzZSx3aXRoLGF3YWl0LGJyZWFrLGNhdGNoLGNsYXNzLGNvbnN0LCcgK1xuXHQgICdzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsJyArXG5cdCAgJ2V4dGVuZHMsZmluYWxseSxjb250aW51ZSxkZWJ1Z2dlcixmdW5jdGlvbixhcmd1bWVudHMnXG5cdCkuc3BsaXQoJywnKS5qb2luKCdcXFxcYnxcXFxcYicpICsgJ1xcXFxiJyk7XG5cdFxuXHQvLyB0aGVzZSB1bmFyeSBvcGVyYXRvcnMgc2hvdWxkIG5vdCBiZSB1c2VkIGFzIHByb3BlcnR5L21ldGhvZCBuYW1lc1xuXHR2YXIgdW5hcnlPcGVyYXRvcnNSRSA9IG5ldyBSZWdFeHAoJ1xcXFxiJyArIChcblx0ICAnZGVsZXRlLHR5cGVvZix2b2lkJ1xuXHQpLnNwbGl0KCcsJykuam9pbignXFxcXHMqXFxcXChbXlxcXFwpXSpcXFxcKXxcXFxcYicpICsgJ1xcXFxzKlxcXFwoW15cXFxcKV0qXFxcXCknKTtcblx0XG5cdC8vIHN0cmlwIHN0cmluZ3MgaW4gZXhwcmVzc2lvbnNcblx0dmFyIHN0cmlwU3RyaW5nUkUgPSAvJyg/OlteJ1xcXFxdfFxcXFwuKSonfFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxgKD86W15gXFxcXF18XFxcXC4pKlxcJFxce3xcXH0oPzpbXmBcXFxcXXxcXFxcLikqYHxgKD86W15gXFxcXF18XFxcXC4pKmAvZztcblx0XG5cdC8vIGRldGVjdCBwcm9ibGVtYXRpYyBleHByZXNzaW9ucyBpbiBhIHRlbXBsYXRlXG5cdGZ1bmN0aW9uIGRldGVjdEVycm9ycyAoYXN0KSB7XG5cdCAgdmFyIGVycm9ycyA9IFtdO1xuXHQgIGlmIChhc3QpIHtcblx0ICAgIGNoZWNrTm9kZShhc3QsIGVycm9ycyk7XG5cdCAgfVxuXHQgIHJldHVybiBlcnJvcnNcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tOb2RlIChub2RlLCBlcnJvcnMpIHtcblx0ICBpZiAobm9kZS50eXBlID09PSAxKSB7XG5cdCAgICBmb3IgKHZhciBuYW1lIGluIG5vZGUuYXR0cnNNYXApIHtcblx0ICAgICAgaWYgKGRpclJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICB2YXIgdmFsdWUgPSBub2RlLmF0dHJzTWFwW25hbWVdO1xuXHQgICAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgICAgaWYgKG5hbWUgPT09ICd2LWZvcicpIHtcblx0ICAgICAgICAgICAgY2hlY2tGb3Iobm9kZSwgKFwidi1mb3I9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCJcIiksIGVycm9ycyk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKG9uUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgICAgICBjaGVja0V2ZW50KHZhbHVlLCAobmFtZSArIFwiPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiXCIpLCBlcnJvcnMpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2hlY2tFeHByZXNzaW9uKHZhbHVlLCAobmFtZSArIFwiPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiXCIpLCBlcnJvcnMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY2hlY2tOb2RlKG5vZGUuY2hpbGRyZW5baV0sIGVycm9ycyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gMikge1xuXHQgICAgY2hlY2tFeHByZXNzaW9uKG5vZGUuZXhwcmVzc2lvbiwgbm9kZS50ZXh0LCBlcnJvcnMpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tFdmVudCAoZXhwLCB0ZXh0LCBlcnJvcnMpIHtcblx0ICB2YXIgc3RpcHBlZCA9IGV4cC5yZXBsYWNlKHN0cmlwU3RyaW5nUkUsICcnKTtcblx0ICB2YXIga2V5d29yZE1hdGNoID0gc3RpcHBlZC5tYXRjaCh1bmFyeU9wZXJhdG9yc1JFKTtcblx0ICBpZiAoa2V5d29yZE1hdGNoICYmIHN0aXBwZWQuY2hhckF0KGtleXdvcmRNYXRjaC5pbmRleCAtIDEpICE9PSAnJCcpIHtcblx0ICAgIGVycm9ycy5wdXNoKFxuXHQgICAgICBcImF2b2lkIHVzaW5nIEphdmFTY3JpcHQgdW5hcnkgb3BlcmF0b3IgYXMgcHJvcGVydHkgbmFtZTogXCIgK1xuXHQgICAgICBcIlxcXCJcIiArIChrZXl3b3JkTWF0Y2hbMF0pICsgXCJcXFwiIGluIGV4cHJlc3Npb24gXCIgKyAodGV4dC50cmltKCkpXG5cdCAgICApO1xuXHQgIH1cblx0ICBjaGVja0V4cHJlc3Npb24oZXhwLCB0ZXh0LCBlcnJvcnMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0ZvciAobm9kZSwgdGV4dCwgZXJyb3JzKSB7XG5cdCAgY2hlY2tFeHByZXNzaW9uKG5vZGUuZm9yIHx8ICcnLCB0ZXh0LCBlcnJvcnMpO1xuXHQgIGNoZWNrSWRlbnRpZmllcihub2RlLmFsaWFzLCAndi1mb3IgYWxpYXMnLCB0ZXh0LCBlcnJvcnMpO1xuXHQgIGNoZWNrSWRlbnRpZmllcihub2RlLml0ZXJhdG9yMSwgJ3YtZm9yIGl0ZXJhdG9yJywgdGV4dCwgZXJyb3JzKTtcblx0ICBjaGVja0lkZW50aWZpZXIobm9kZS5pdGVyYXRvcjIsICd2LWZvciBpdGVyYXRvcicsIHRleHQsIGVycm9ycyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrSWRlbnRpZmllciAoXG5cdCAgaWRlbnQsXG5cdCAgdHlwZSxcblx0ICB0ZXh0LFxuXHQgIGVycm9yc1xuXHQpIHtcblx0ICBpZiAodHlwZW9mIGlkZW50ID09PSAnc3RyaW5nJykge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgbmV3IEZ1bmN0aW9uKChcInZhciBcIiArIGlkZW50ICsgXCI9X1wiKSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIGVycm9ycy5wdXNoKChcImludmFsaWQgXCIgKyB0eXBlICsgXCIgXFxcIlwiICsgaWRlbnQgKyBcIlxcXCIgaW4gZXhwcmVzc2lvbjogXCIgKyAodGV4dC50cmltKCkpKSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0V4cHJlc3Npb24gKGV4cCwgdGV4dCwgZXJyb3JzKSB7XG5cdCAgdHJ5IHtcblx0ICAgIG5ldyBGdW5jdGlvbigoXCJyZXR1cm4gXCIgKyBleHApKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB2YXIga2V5d29yZE1hdGNoID0gZXhwLnJlcGxhY2Uoc3RyaXBTdHJpbmdSRSwgJycpLm1hdGNoKHByb2hpYml0ZWRLZXl3b3JkUkUpO1xuXHQgICAgaWYgKGtleXdvcmRNYXRjaCkge1xuXHQgICAgICBlcnJvcnMucHVzaChcblx0ICAgICAgICBcImF2b2lkIHVzaW5nIEphdmFTY3JpcHQga2V5d29yZCBhcyBwcm9wZXJ0eSBuYW1lOiBcIiArXG5cdCAgICAgICAgXCJcXFwiXCIgKyAoa2V5d29yZE1hdGNoWzBdKSArIFwiXFxcIlxcbiAgUmF3IGV4cHJlc3Npb246IFwiICsgKHRleHQudHJpbSgpKVxuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZXJyb3JzLnB1c2goXG5cdCAgICAgICAgXCJpbnZhbGlkIGV4cHJlc3Npb246IFwiICsgKGUubWVzc2FnZSkgKyBcIiBpblxcblxcblwiICtcblx0ICAgICAgICBcIiAgICBcIiArIGV4cCArIFwiXFxuXFxuXCIgK1xuXHQgICAgICAgIFwiICBSYXcgZXhwcmVzc2lvbjogXCIgKyAodGV4dC50cmltKCkpICsgXCJcXG5cIlxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbiAoY29kZSwgZXJyb3JzKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oY29kZSlcblx0ICB9IGNhdGNoIChlcnIpIHtcblx0ICAgIGVycm9ycy5wdXNoKHsgZXJyOiBlcnIsIGNvZGU6IGNvZGUgfSk7XG5cdCAgICByZXR1cm4gbm9vcFxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQ29tcGlsZVRvRnVuY3Rpb25GbiAoY29tcGlsZSkge1xuXHQgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiBjb21waWxlVG9GdW5jdGlvbnMgKFxuXHQgICAgdGVtcGxhdGUsXG5cdCAgICBvcHRpb25zLFxuXHQgICAgdm1cblx0ICApIHtcblx0ICAgIG9wdGlvbnMgPSBleHRlbmQoe30sIG9wdGlvbnMpO1xuXHQgICAgdmFyIHdhcm4kJDEgPSBvcHRpb25zLndhcm4gfHwgd2Fybjtcblx0ICAgIGRlbGV0ZSBvcHRpb25zLndhcm47XG5cdFxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICB7XG5cdCAgICAgIC8vIGRldGVjdCBwb3NzaWJsZSBDU1AgcmVzdHJpY3Rpb25cblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBuZXcgRnVuY3Rpb24oJ3JldHVybiAxJyk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuXHQgICAgICAgICAgd2FybiQkMShcblx0ICAgICAgICAgICAgJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdGhlIHN0YW5kYWxvbmUgYnVpbGQgb2YgVnVlLmpzIGluIGFuICcgK1xuXHQgICAgICAgICAgICAnZW52aXJvbm1lbnQgd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArXG5cdCAgICAgICAgICAgICdUaGUgdGVtcGxhdGUgY29tcGlsZXIgY2Fubm90IHdvcmsgaW4gdGhpcyBlbnZpcm9ubWVudC4gQ29uc2lkZXIgJyArXG5cdCAgICAgICAgICAgICdyZWxheGluZyB0aGUgcG9saWN5IHRvIGFsbG93IHVuc2FmZS1ldmFsIG9yIHByZS1jb21waWxpbmcgeW91ciAnICtcblx0ICAgICAgICAgICAgJ3RlbXBsYXRlcyBpbnRvIHJlbmRlciBmdW5jdGlvbnMuJ1xuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBjaGVjayBjYWNoZVxuXHQgICAgdmFyIGtleSA9IG9wdGlvbnMuZGVsaW1pdGVyc1xuXHQgICAgICA/IFN0cmluZyhvcHRpb25zLmRlbGltaXRlcnMpICsgdGVtcGxhdGVcblx0ICAgICAgOiB0ZW1wbGF0ZTtcblx0ICAgIGlmIChjYWNoZVtrZXldKSB7XG5cdCAgICAgIHJldHVybiBjYWNoZVtrZXldXG5cdCAgICB9XG5cdFxuXHQgICAgLy8gY29tcGlsZVxuXHQgICAgdmFyIGNvbXBpbGVkID0gY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7XG5cdFxuXHQgICAgLy8gY2hlY2sgY29tcGlsYXRpb24gZXJyb3JzL3RpcHNcblx0ICAgIHtcblx0ICAgICAgaWYgKGNvbXBpbGVkLmVycm9ycyAmJiBjb21waWxlZC5lcnJvcnMubGVuZ3RoKSB7XG5cdCAgICAgICAgd2FybiQkMShcblx0ICAgICAgICAgIFwiRXJyb3IgY29tcGlsaW5nIHRlbXBsYXRlOlxcblxcblwiICsgdGVtcGxhdGUgKyBcIlxcblxcblwiICtcblx0ICAgICAgICAgIGNvbXBpbGVkLmVycm9ycy5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIChcIi0gXCIgKyBlKTsgfSkuam9pbignXFxuJykgKyAnXFxuJyxcblx0ICAgICAgICAgIHZtXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoY29tcGlsZWQudGlwcyAmJiBjb21waWxlZC50aXBzLmxlbmd0aCkge1xuXHQgICAgICAgIGNvbXBpbGVkLnRpcHMuZm9yRWFjaChmdW5jdGlvbiAobXNnKSB7IHJldHVybiB0aXAobXNnLCB2bSk7IH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdHVybiBjb2RlIGludG8gZnVuY3Rpb25zXG5cdCAgICB2YXIgcmVzID0ge307XG5cdCAgICB2YXIgZm5HZW5FcnJvcnMgPSBbXTtcblx0ICAgIHJlcy5yZW5kZXIgPSBjcmVhdGVGdW5jdGlvbihjb21waWxlZC5yZW5kZXIsIGZuR2VuRXJyb3JzKTtcblx0ICAgIHJlcy5zdGF0aWNSZW5kZXJGbnMgPSBjb21waWxlZC5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uIChjb2RlKSB7XG5cdCAgICAgIHJldHVybiBjcmVhdGVGdW5jdGlvbihjb2RlLCBmbkdlbkVycm9ycylcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIGNoZWNrIGZ1bmN0aW9uIGdlbmVyYXRpb24gZXJyb3JzLlxuXHQgICAgLy8gdGhpcyBzaG91bGQgb25seSBoYXBwZW4gaWYgdGhlcmUgaXMgYSBidWcgaW4gdGhlIGNvbXBpbGVyIGl0c2VsZi5cblx0ICAgIC8vIG1vc3RseSBmb3IgY29kZWdlbiBkZXZlbG9wbWVudCB1c2Vcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAge1xuXHQgICAgICBpZiAoKCFjb21waWxlZC5lcnJvcnMgfHwgIWNvbXBpbGVkLmVycm9ycy5sZW5ndGgpICYmIGZuR2VuRXJyb3JzLmxlbmd0aCkge1xuXHQgICAgICAgIHdhcm4kJDEoXG5cdCAgICAgICAgICBcIkZhaWxlZCB0byBnZW5lcmF0ZSByZW5kZXIgZnVuY3Rpb246XFxuXFxuXCIgK1xuXHQgICAgICAgICAgZm5HZW5FcnJvcnMubWFwKGZ1bmN0aW9uIChyZWYpIHtcblx0ICAgICAgICAgICAgdmFyIGVyciA9IHJlZi5lcnI7XG5cdCAgICAgICAgICAgIHZhciBjb2RlID0gcmVmLmNvZGU7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gKChlcnIudG9TdHJpbmcoKSkgKyBcIiBpblxcblxcblwiICsgY29kZSArIFwiXFxuXCIpO1xuXHQgICAgICAgIH0pLmpvaW4oJ1xcbicpLFxuXHQgICAgICAgICAgdm1cblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIChjYWNoZVtrZXldID0gcmVzKVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb21waWxlckNyZWF0b3IgKGJhc2VDb21waWxlKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZUNvbXBpbGVyIChiYXNlT3B0aW9ucykge1xuXHQgICAgZnVuY3Rpb24gY29tcGlsZSAoXG5cdCAgICAgIHRlbXBsYXRlLFxuXHQgICAgICBvcHRpb25zXG5cdCAgICApIHtcblx0ICAgICAgdmFyIGZpbmFsT3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoYmFzZU9wdGlvbnMpO1xuXHQgICAgICB2YXIgZXJyb3JzID0gW107XG5cdCAgICAgIHZhciB0aXBzID0gW107XG5cdCAgICAgIGZpbmFsT3B0aW9ucy53YXJuID0gZnVuY3Rpb24gKG1zZywgdGlwKSB7XG5cdCAgICAgICAgKHRpcCA/IHRpcHMgOiBlcnJvcnMpLnB1c2gobXNnKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIGlmIChvcHRpb25zKSB7XG5cdCAgICAgICAgLy8gbWVyZ2UgY3VzdG9tIG1vZHVsZXNcblx0ICAgICAgICBpZiAob3B0aW9ucy5tb2R1bGVzKSB7XG5cdCAgICAgICAgICBmaW5hbE9wdGlvbnMubW9kdWxlcyA9XG5cdCAgICAgICAgICAgIChiYXNlT3B0aW9ucy5tb2R1bGVzIHx8IFtdKS5jb25jYXQob3B0aW9ucy5tb2R1bGVzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gbWVyZ2UgY3VzdG9tIGRpcmVjdGl2ZXNcblx0ICAgICAgICBpZiAob3B0aW9ucy5kaXJlY3RpdmVzKSB7XG5cdCAgICAgICAgICBmaW5hbE9wdGlvbnMuZGlyZWN0aXZlcyA9IGV4dGVuZChcblx0ICAgICAgICAgICAgT2JqZWN0LmNyZWF0ZShiYXNlT3B0aW9ucy5kaXJlY3RpdmVzIHx8IG51bGwpLFxuXHQgICAgICAgICAgICBvcHRpb25zLmRpcmVjdGl2ZXNcblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGNvcHkgb3RoZXIgb3B0aW9uc1xuXHQgICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG5cdCAgICAgICAgICBpZiAoa2V5ICE9PSAnbW9kdWxlcycgJiYga2V5ICE9PSAnZGlyZWN0aXZlcycpIHtcblx0ICAgICAgICAgICAgZmluYWxPcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgY29tcGlsZWQgPSBiYXNlQ29tcGlsZSh0ZW1wbGF0ZSwgZmluYWxPcHRpb25zKTtcblx0ICAgICAge1xuXHQgICAgICAgIGVycm9ycy5wdXNoLmFwcGx5KGVycm9ycywgZGV0ZWN0RXJyb3JzKGNvbXBpbGVkLmFzdCkpO1xuXHQgICAgICB9XG5cdCAgICAgIGNvbXBpbGVkLmVycm9ycyA9IGVycm9ycztcblx0ICAgICAgY29tcGlsZWQudGlwcyA9IHRpcHM7XG5cdCAgICAgIHJldHVybiBjb21waWxlZFxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGNvbXBpbGU6IGNvbXBpbGUsXG5cdCAgICAgIGNvbXBpbGVUb0Z1bmN0aW9uczogY3JlYXRlQ29tcGlsZVRvRnVuY3Rpb25Gbihjb21waWxlKVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHQvLyBgY3JlYXRlQ29tcGlsZXJDcmVhdG9yYCBhbGxvd3MgY3JlYXRpbmcgY29tcGlsZXJzIHRoYXQgdXNlIGFsdGVybmF0aXZlXG5cdC8vIHBhcnNlci9vcHRpbWl6ZXIvY29kZWdlbiwgZS5nIHRoZSBTU1Igb3B0aW1pemluZyBjb21waWxlci5cblx0Ly8gSGVyZSB3ZSBqdXN0IGV4cG9ydCBhIGRlZmF1bHQgY29tcGlsZXIgdXNpbmcgdGhlIGRlZmF1bHQgcGFydHMuXG5cdHZhciBjcmVhdGVDb21waWxlciA9IGNyZWF0ZUNvbXBpbGVyQ3JlYXRvcihmdW5jdGlvbiBiYXNlQ29tcGlsZSAoXG5cdCAgdGVtcGxhdGUsXG5cdCAgb3B0aW9uc1xuXHQpIHtcblx0ICB2YXIgYXN0ID0gcGFyc2UodGVtcGxhdGUudHJpbSgpLCBvcHRpb25zKTtcblx0ICBpZiAob3B0aW9ucy5vcHRpbWl6ZSAhPT0gZmFsc2UpIHtcblx0ICAgIG9wdGltaXplKGFzdCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHZhciBjb2RlID0gZ2VuZXJhdGUoYXN0LCBvcHRpb25zKTtcblx0ICByZXR1cm4ge1xuXHQgICAgYXN0OiBhc3QsXG5cdCAgICByZW5kZXI6IGNvZGUucmVuZGVyLFxuXHQgICAgc3RhdGljUmVuZGVyRm5zOiBjb2RlLnN0YXRpY1JlbmRlckZuc1xuXHQgIH1cblx0fSk7XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciByZWYkMSA9IGNyZWF0ZUNvbXBpbGVyKGJhc2VPcHRpb25zKTtcblx0dmFyIGNvbXBpbGVUb0Z1bmN0aW9ucyA9IHJlZiQxLmNvbXBpbGVUb0Z1bmN0aW9ucztcblx0XG5cdC8qICAqL1xuXHRcblx0Ly8gY2hlY2sgd2hldGhlciBjdXJyZW50IGJyb3dzZXIgZW5jb2RlcyBhIGNoYXIgaW5zaWRlIGF0dHJpYnV0ZSB2YWx1ZXNcblx0dmFyIGRpdjtcblx0ZnVuY3Rpb24gZ2V0U2hvdWxkRGVjb2RlIChocmVmKSB7XG5cdCAgZGl2ID0gZGl2IHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgIGRpdi5pbm5lckhUTUwgPSBocmVmID8gXCI8YSBocmVmPVxcXCJcXG5cXFwiLz5cIiA6IFwiPGRpdiBhPVxcXCJcXG5cXFwiLz5cIjtcblx0ICByZXR1cm4gZGl2LmlubmVySFRNTC5pbmRleE9mKCcmIzEwOycpID4gMFxuXHR9XG5cdFxuXHQvLyAjMzY2MzogSUUgZW5jb2RlcyBuZXdsaW5lcyBpbnNpZGUgYXR0cmlidXRlIHZhbHVlcyB3aGlsZSBvdGhlciBicm93c2VycyBkb24ndFxuXHR2YXIgc2hvdWxkRGVjb2RlTmV3bGluZXMgPSBpbkJyb3dzZXIgPyBnZXRTaG91bGREZWNvZGUoZmFsc2UpIDogZmFsc2U7XG5cdC8vICM2ODI4OiBjaHJvbWUgZW5jb2RlcyBjb250ZW50IGluIGFbaHJlZl1cblx0dmFyIHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiA9IGluQnJvd3NlciA/IGdldFNob3VsZERlY29kZSh0cnVlKSA6IGZhbHNlO1xuXHRcblx0LyogICovXG5cdFxuXHR2YXIgaWRUb1RlbXBsYXRlID0gY2FjaGVkKGZ1bmN0aW9uIChpZCkge1xuXHQgIHZhciBlbCA9IHF1ZXJ5KGlkKTtcblx0ICByZXR1cm4gZWwgJiYgZWwuaW5uZXJIVE1MXG5cdH0pO1xuXHRcblx0dmFyIG1vdW50ID0gVnVlLnByb3RvdHlwZS4kbW91bnQ7XG5cdFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKFxuXHQgIGVsLFxuXHQgIGh5ZHJhdGluZ1xuXHQpIHtcblx0ICBlbCA9IGVsICYmIHF1ZXJ5KGVsKTtcblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGVsID09PSBkb2N1bWVudC5ib2R5IHx8IGVsID09PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcblx0ICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG5cdCAgICAgIFwiRG8gbm90IG1vdW50IFZ1ZSB0byA8aHRtbD4gb3IgPGJvZHk+IC0gbW91bnQgdG8gbm9ybWFsIGVsZW1lbnRzIGluc3RlYWQuXCJcblx0ICAgICk7XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgIC8vIHJlc29sdmUgdGVtcGxhdGUvZWwgYW5kIGNvbnZlcnQgdG8gcmVuZGVyIGZ1bmN0aW9uXG5cdCAgaWYgKCFvcHRpb25zLnJlbmRlcikge1xuXHQgICAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcblx0ICAgIGlmICh0ZW1wbGF0ZSkge1xuXHQgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIGlmICh0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuXHQgICAgICAgICAgdGVtcGxhdGUgPSBpZFRvVGVtcGxhdGUodGVtcGxhdGUpO1xuXHQgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgIXRlbXBsYXRlKSB7XG5cdCAgICAgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICAgICAgKFwiVGVtcGxhdGUgZWxlbWVudCBub3QgZm91bmQgb3IgaXMgZW1wdHk6IFwiICsgKG9wdGlvbnMudGVtcGxhdGUpKSxcblx0ICAgICAgICAgICAgICB0aGlzXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG5cdCAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5pbm5lckhUTUw7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAge1xuXHQgICAgICAgICAgd2FybignaW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246JyArIHRlbXBsYXRlLCB0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXNcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChlbCkge1xuXHQgICAgICB0ZW1wbGF0ZSA9IGdldE91dGVySFRNTChlbCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGVtcGxhdGUpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuXHQgICAgICAgIG1hcmsoJ2NvbXBpbGUnKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHJlZiA9IGNvbXBpbGVUb0Z1bmN0aW9ucyh0ZW1wbGF0ZSwge1xuXHQgICAgICAgIHNob3VsZERlY29kZU5ld2xpbmVzOiBzaG91bGREZWNvZGVOZXdsaW5lcyxcblx0ICAgICAgICBzaG91bGREZWNvZGVOZXdsaW5lc0ZvckhyZWY6IHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixcblx0ICAgICAgICBkZWxpbWl0ZXJzOiBvcHRpb25zLmRlbGltaXRlcnMsXG5cdCAgICAgICAgY29tbWVudHM6IG9wdGlvbnMuY29tbWVudHNcblx0ICAgICAgfSwgdGhpcyk7XG5cdCAgICAgIHZhciByZW5kZXIgPSByZWYucmVuZGVyO1xuXHQgICAgICB2YXIgc3RhdGljUmVuZGVyRm5zID0gcmVmLnN0YXRpY1JlbmRlckZucztcblx0ICAgICAgb3B0aW9ucy5yZW5kZXIgPSByZW5kZXI7XG5cdCAgICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gc3RhdGljUmVuZGVyRm5zO1xuXHRcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuXHQgICAgICAgIG1hcmsoJ2NvbXBpbGUgZW5kJyk7XG5cdCAgICAgICAgbWVhc3VyZSgoXCJ2dWUgXCIgKyAodGhpcy5fbmFtZSkgKyBcIiBjb21waWxlXCIpLCAnY29tcGlsZScsICdjb21waWxlIGVuZCcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBtb3VudC5jYWxsKHRoaXMsIGVsLCBoeWRyYXRpbmcpXG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcblx0ICogb2YgU1ZHIGVsZW1lbnRzIGluIElFIGFzIHdlbGwuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRPdXRlckhUTUwgKGVsKSB7XG5cdCAgaWYgKGVsLm91dGVySFRNTCkge1xuXHQgICAgcmV0dXJuIGVsLm91dGVySFRNTFxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcblx0ICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MXG5cdCAgfVxuXHR9XG5cdFxuXHRWdWUuY29tcGlsZSA9IGNvbXBpbGVUb0Z1bmN0aW9ucztcblx0XG5cdHJldHVybiBWdWU7XG5cdFxuXHR9KSkpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oNSkuc2V0SW1tZWRpYXRlKSlcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge3ZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblx0XG5cdC8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cdFxuXHRleHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG5cdH07XG5cdGV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcblx0fTtcblx0ZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuXHRleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG5cdCAgaWYgKHRpbWVvdXQpIHtcblx0ICAgIHRpbWVvdXQuY2xvc2UoKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG5cdCAgdGhpcy5faWQgPSBpZDtcblx0ICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcblx0fVxuXHRUaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5cdFRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5cdGV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcblx0fTtcblx0XG5cdGV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG5cdH07XG5cdFxuXHRleHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0XG5cdCAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG5cdCAgaWYgKG1zZWNzID49IDApIHtcblx0ICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcblx0ICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcblx0ICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcblx0ICAgIH0sIG1zZWNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdC8vIE9uIHNvbWUgZXhvdGljIGVudmlyb25tZW50cywgaXQncyBub3QgY2xlYXIgd2hpY2ggb2JqZWN0IGBzZXRpbW1laWRhdGVgIHdhc1xuXHQvLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuXHQvLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuXHRleHBvcnRzLnNldEltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSkgfHxcblx0ICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlKSB8fFxuXHQgICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcblx0ZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlKSB8fFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlKSB8fFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuXHQgICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcblx0ICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cdCAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cdFxuXHQgICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG5cdCAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuXHQgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG5cdCAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcblx0ICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuXHQgICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcblx0ICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG5cdCAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW4odGFzaykge1xuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG5cdCAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuXHQgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcblx0ICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG5cdCAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cblx0ICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG5cdCAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG5cdCAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgICAgICAgICBpZiAodGFzaykge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuXHQgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcblx0ICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG5cdCAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG5cdCAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcblx0ICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHRcblx0ICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcblx0ICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG5cdCAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuXHQgICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuXHQgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuXHQgICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuXHQgICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cdFxuXHQgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuXHQgICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcblx0ICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXHRcblx0ICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHRcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG5cdCAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcblx0ICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXHRcblx0ICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcblx0ICAgICAgICAvLyBGb3IgSUUgNuKAkzhcblx0ICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cdFxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHQgICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblx0fSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMykpKVxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgICogdnVlLXJvdXRlciB2My4wLjFcblx0ICAqIChjKSAyMDE3IEV2YW4gWW91XG5cdCAgKiBAbGljZW5zZSBNSVRcblx0ICAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIGFzc2VydCAoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG5cdCAgaWYgKCFjb25kaXRpb24pIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigoXCJbdnVlLXJvdXRlcl0gXCIgKyBtZXNzYWdlKSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdhcm4gKGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFjb25kaXRpb24pIHtcblx0ICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLndhcm4oKFwiW3Z1ZS1yb3V0ZXJdIFwiICsgbWVzc2FnZSkpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNFcnJvciAoZXJyKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlcnIpLmluZGV4T2YoJ0Vycm9yJykgPiAtMVxuXHR9XG5cdFxuXHR2YXIgVmlldyA9IHtcblx0ICBuYW1lOiAncm91dGVyLXZpZXcnLFxuXHQgIGZ1bmN0aW9uYWw6IHRydWUsXG5cdCAgcHJvcHM6IHtcblx0ICAgIG5hbWU6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICBkZWZhdWx0OiAnZGVmYXVsdCdcblx0ICAgIH1cblx0ICB9LFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChfLCByZWYpIHtcblx0ICAgIHZhciBwcm9wcyA9IHJlZi5wcm9wcztcblx0ICAgIHZhciBjaGlsZHJlbiA9IHJlZi5jaGlsZHJlbjtcblx0ICAgIHZhciBwYXJlbnQgPSByZWYucGFyZW50O1xuXHQgICAgdmFyIGRhdGEgPSByZWYuZGF0YTtcblx0XG5cdCAgICBkYXRhLnJvdXRlclZpZXcgPSB0cnVlO1xuXHRcblx0ICAgIC8vIGRpcmVjdGx5IHVzZSBwYXJlbnQgY29udGV4dCdzIGNyZWF0ZUVsZW1lbnQoKSBmdW5jdGlvblxuXHQgICAgLy8gc28gdGhhdCBjb21wb25lbnRzIHJlbmRlcmVkIGJ5IHJvdXRlci12aWV3IGNhbiByZXNvbHZlIG5hbWVkIHNsb3RzXG5cdCAgICB2YXIgaCA9IHBhcmVudC4kY3JlYXRlRWxlbWVudDtcblx0ICAgIHZhciBuYW1lID0gcHJvcHMubmFtZTtcblx0ICAgIHZhciByb3V0ZSA9IHBhcmVudC4kcm91dGU7XG5cdCAgICB2YXIgY2FjaGUgPSBwYXJlbnQuX3JvdXRlclZpZXdDYWNoZSB8fCAocGFyZW50Ll9yb3V0ZXJWaWV3Q2FjaGUgPSB7fSk7XG5cdFxuXHQgICAgLy8gZGV0ZXJtaW5lIGN1cnJlbnQgdmlldyBkZXB0aCwgYWxzbyBjaGVjayB0byBzZWUgaWYgdGhlIHRyZWVcblx0ICAgIC8vIGhhcyBiZWVuIHRvZ2dsZWQgaW5hY3RpdmUgYnV0IGtlcHQtYWxpdmUuXG5cdCAgICB2YXIgZGVwdGggPSAwO1xuXHQgICAgdmFyIGluYWN0aXZlID0gZmFsc2U7XG5cdCAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5fcm91dGVyUm9vdCAhPT0gcGFyZW50KSB7XG5cdCAgICAgIGlmIChwYXJlbnQuJHZub2RlICYmIHBhcmVudC4kdm5vZGUuZGF0YS5yb3V0ZXJWaWV3KSB7XG5cdCAgICAgICAgZGVwdGgrKztcblx0ICAgICAgfVxuXHQgICAgICBpZiAocGFyZW50Ll9pbmFjdGl2ZSkge1xuXHQgICAgICAgIGluYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcblx0ICAgIH1cblx0ICAgIGRhdGEucm91dGVyVmlld0RlcHRoID0gZGVwdGg7XG5cdFxuXHQgICAgLy8gcmVuZGVyIHByZXZpb3VzIHZpZXcgaWYgdGhlIHRyZWUgaXMgaW5hY3RpdmUgYW5kIGtlcHQtYWxpdmVcblx0ICAgIGlmIChpbmFjdGl2ZSkge1xuXHQgICAgICByZXR1cm4gaChjYWNoZVtuYW1lXSwgZGF0YSwgY2hpbGRyZW4pXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1hdGNoZWQgPSByb3V0ZS5tYXRjaGVkW2RlcHRoXTtcblx0ICAgIC8vIHJlbmRlciBlbXB0eSBub2RlIGlmIG5vIG1hdGNoZWQgcm91dGVcblx0ICAgIGlmICghbWF0Y2hlZCkge1xuXHQgICAgICBjYWNoZVtuYW1lXSA9IG51bGw7XG5cdCAgICAgIHJldHVybiBoKClcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY29tcG9uZW50ID0gY2FjaGVbbmFtZV0gPSBtYXRjaGVkLmNvbXBvbmVudHNbbmFtZV07XG5cdFxuXHQgICAgLy8gYXR0YWNoIGluc3RhbmNlIHJlZ2lzdHJhdGlvbiBob29rXG5cdCAgICAvLyB0aGlzIHdpbGwgYmUgY2FsbGVkIGluIHRoZSBpbnN0YW5jZSdzIGluamVjdGVkIGxpZmVjeWNsZSBob29rc1xuXHQgICAgZGF0YS5yZWdpc3RlclJvdXRlSW5zdGFuY2UgPSBmdW5jdGlvbiAodm0sIHZhbCkge1xuXHQgICAgICAvLyB2YWwgY291bGQgYmUgdW5kZWZpbmVkIGZvciB1bnJlZ2lzdHJhdGlvblxuXHQgICAgICB2YXIgY3VycmVudCA9IG1hdGNoZWQuaW5zdGFuY2VzW25hbWVdO1xuXHQgICAgICBpZiAoXG5cdCAgICAgICAgKHZhbCAmJiBjdXJyZW50ICE9PSB2bSkgfHxcblx0ICAgICAgICAoIXZhbCAmJiBjdXJyZW50ID09PSB2bSlcblx0ICAgICAgKSB7XG5cdCAgICAgICAgbWF0Y2hlZC5pbnN0YW5jZXNbbmFtZV0gPSB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBhbHNvIHJlZ2lzdGVyIGluc3RhbmNlIGluIHByZXBhdGNoIGhvb2tcblx0ICAgIC8vIGluIGNhc2UgdGhlIHNhbWUgY29tcG9uZW50IGluc3RhbmNlIGlzIHJldXNlZCBhY3Jvc3MgZGlmZmVyZW50IHJvdXRlc1xuXHQgICAgOyhkYXRhLmhvb2sgfHwgKGRhdGEuaG9vayA9IHt9KSkucHJlcGF0Y2ggPSBmdW5jdGlvbiAoXywgdm5vZGUpIHtcblx0ICAgICAgbWF0Y2hlZC5pbnN0YW5jZXNbbmFtZV0gPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gcmVzb2x2ZSBwcm9wc1xuXHQgICAgdmFyIHByb3BzVG9QYXNzID0gZGF0YS5wcm9wcyA9IHJlc29sdmVQcm9wcyhyb3V0ZSwgbWF0Y2hlZC5wcm9wcyAmJiBtYXRjaGVkLnByb3BzW25hbWVdKTtcblx0ICAgIGlmIChwcm9wc1RvUGFzcykge1xuXHQgICAgICAvLyBjbG9uZSB0byBwcmV2ZW50IG11dGF0aW9uXG5cdCAgICAgIHByb3BzVG9QYXNzID0gZGF0YS5wcm9wcyA9IGV4dGVuZCh7fSwgcHJvcHNUb1Bhc3MpO1xuXHQgICAgICAvLyBwYXNzIG5vbi1kZWNsYXJlZCBwcm9wcyBhcyBhdHRyc1xuXHQgICAgICB2YXIgYXR0cnMgPSBkYXRhLmF0dHJzID0gZGF0YS5hdHRycyB8fCB7fTtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzVG9QYXNzKSB7XG5cdCAgICAgICAgaWYgKCFjb21wb25lbnQucHJvcHMgfHwgIShrZXkgaW4gY29tcG9uZW50LnByb3BzKSkge1xuXHQgICAgICAgICAgYXR0cnNba2V5XSA9IHByb3BzVG9QYXNzW2tleV07XG5cdCAgICAgICAgICBkZWxldGUgcHJvcHNUb1Bhc3Nba2V5XTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gaChjb21wb25lbnQsIGRhdGEsIGNoaWxkcmVuKVxuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVQcm9wcyAocm91dGUsIGNvbmZpZykge1xuXHQgIHN3aXRjaCAodHlwZW9mIGNvbmZpZykge1xuXHQgICAgY2FzZSAndW5kZWZpbmVkJzpcblx0ICAgICAgcmV0dXJuXG5cdCAgICBjYXNlICdvYmplY3QnOlxuXHQgICAgICByZXR1cm4gY29uZmlnXG5cdCAgICBjYXNlICdmdW5jdGlvbic6XG5cdCAgICAgIHJldHVybiBjb25maWcocm91dGUpXG5cdCAgICBjYXNlICdib29sZWFuJzpcblx0ICAgICAgcmV0dXJuIGNvbmZpZyA/IHJvdXRlLnBhcmFtcyA6IHVuZGVmaW5lZFxuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB3YXJuKFxuXHQgICAgICAgICAgZmFsc2UsXG5cdCAgICAgICAgICBcInByb3BzIGluIFxcXCJcIiArIChyb3V0ZS5wYXRoKSArIFwiXFxcIiBpcyBhIFwiICsgKHR5cGVvZiBjb25maWcpICsgXCIsIFwiICtcblx0ICAgICAgICAgIFwiZXhwZWN0aW5nIGFuIG9iamVjdCwgZnVuY3Rpb24gb3IgYm9vbGVhbi5cIlxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZCAodG8sIGZyb20pIHtcblx0ICBmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuXHQgICAgdG9ba2V5XSA9IGZyb21ba2V5XTtcblx0ICB9XG5cdCAgcmV0dXJuIHRvXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIGVuY29kZVJlc2VydmVSRSA9IC9bIScoKSpdL2c7XG5cdHZhciBlbmNvZGVSZXNlcnZlUmVwbGFjZXIgPSBmdW5jdGlvbiAoYykgeyByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KTsgfTtcblx0dmFyIGNvbW1hUkUgPSAvJTJDL2c7XG5cdFxuXHQvLyBmaXhlZCBlbmNvZGVVUklDb21wb25lbnQgd2hpY2ggaXMgbW9yZSBjb25mb3JtYW50IHRvIFJGQzM5ODY6XG5cdC8vIC0gZXNjYXBlcyBbIScoKSpdXG5cdC8vIC0gcHJlc2VydmUgY29tbWFzXG5cdHZhciBlbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKVxuXHQgIC5yZXBsYWNlKGVuY29kZVJlc2VydmVSRSwgZW5jb2RlUmVzZXJ2ZVJlcGxhY2VyKVxuXHQgIC5yZXBsYWNlKGNvbW1hUkUsICcsJyk7IH07XG5cdFxuXHR2YXIgZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50O1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVF1ZXJ5IChcblx0ICBxdWVyeSxcblx0ICBleHRyYVF1ZXJ5LFxuXHQgIF9wYXJzZVF1ZXJ5XG5cdCkge1xuXHQgIGlmICggZXh0cmFRdWVyeSA9PT0gdm9pZCAwICkgZXh0cmFRdWVyeSA9IHt9O1xuXHRcblx0ICB2YXIgcGFyc2UgPSBfcGFyc2VRdWVyeSB8fCBwYXJzZVF1ZXJ5O1xuXHQgIHZhciBwYXJzZWRRdWVyeTtcblx0ICB0cnkge1xuXHQgICAgcGFyc2VkUXVlcnkgPSBwYXJzZShxdWVyeSB8fCAnJyk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGZhbHNlLCBlLm1lc3NhZ2UpO1xuXHQgICAgcGFyc2VkUXVlcnkgPSB7fTtcblx0ICB9XG5cdCAgZm9yICh2YXIga2V5IGluIGV4dHJhUXVlcnkpIHtcblx0ICAgIHBhcnNlZFF1ZXJ5W2tleV0gPSBleHRyYVF1ZXJ5W2tleV07XG5cdCAgfVxuXHQgIHJldHVybiBwYXJzZWRRdWVyeVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZVF1ZXJ5IChxdWVyeSkge1xuXHQgIHZhciByZXMgPSB7fTtcblx0XG5cdCAgcXVlcnkgPSBxdWVyeS50cmltKCkucmVwbGFjZSgvXihcXD98I3wmKS8sICcnKTtcblx0XG5cdCAgaWYgKCFxdWVyeSkge1xuXHQgICAgcmV0dXJuIHJlc1xuXHQgIH1cblx0XG5cdCAgcXVlcnkuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuXHQgICAgdmFyIHBhcnRzID0gcGFyYW0ucmVwbGFjZSgvXFwrL2csICcgJykuc3BsaXQoJz0nKTtcblx0ICAgIHZhciBrZXkgPSBkZWNvZGUocGFydHMuc2hpZnQoKSk7XG5cdCAgICB2YXIgdmFsID0gcGFydHMubGVuZ3RoID4gMFxuXHQgICAgICA/IGRlY29kZShwYXJ0cy5qb2luKCc9JykpXG5cdCAgICAgIDogbnVsbDtcblx0XG5cdCAgICBpZiAocmVzW2tleV0gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICByZXNba2V5XSA9IHZhbDtcblx0ICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXNba2V5XSkpIHtcblx0ICAgICAgcmVzW2tleV0ucHVzaCh2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzW2tleV0gPSBbcmVzW2tleV0sIHZhbF07XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RyaW5naWZ5UXVlcnkgKG9iaikge1xuXHQgIHZhciByZXMgPSBvYmogPyBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB2YXIgdmFsID0gb2JqW2tleV07XG5cdFxuXHQgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHJldHVybiAnJ1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh2YWwgPT09IG51bGwpIHtcblx0ICAgICAgcmV0dXJuIGVuY29kZShrZXkpXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuXHQgICAgICB2YXIgcmVzdWx0ID0gW107XG5cdCAgICAgIHZhbC5mb3JFYWNoKGZ1bmN0aW9uICh2YWwyKSB7XG5cdCAgICAgICAgaWYgKHZhbDIgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh2YWwyID09PSBudWxsKSB7XG5cdCAgICAgICAgICByZXN1bHQucHVzaChlbmNvZGUoa2V5KSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHZhbDIpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oJyYnKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2YWwpXG5cdCAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lmxlbmd0aCA+IDA7IH0pLmpvaW4oJyYnKSA6IG51bGw7XG5cdCAgcmV0dXJuIHJlcyA/IChcIj9cIiArIHJlcykgOiAnJ1xuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdFxuXHR2YXIgdHJhaWxpbmdTbGFzaFJFID0gL1xcLz8kLztcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVJvdXRlIChcblx0ICByZWNvcmQsXG5cdCAgbG9jYXRpb24sXG5cdCAgcmVkaXJlY3RlZEZyb20sXG5cdCAgcm91dGVyXG5cdCkge1xuXHQgIHZhciBzdHJpbmdpZnlRdWVyeSQkMSA9IHJvdXRlciAmJiByb3V0ZXIub3B0aW9ucy5zdHJpbmdpZnlRdWVyeTtcblx0XG5cdCAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24ucXVlcnkgfHwge307XG5cdCAgdHJ5IHtcblx0ICAgIHF1ZXJ5ID0gY2xvbmUocXVlcnkpO1xuXHQgIH0gY2F0Y2ggKGUpIHt9XG5cdFxuXHQgIHZhciByb3V0ZSA9IHtcblx0ICAgIG5hbWU6IGxvY2F0aW9uLm5hbWUgfHwgKHJlY29yZCAmJiByZWNvcmQubmFtZSksXG5cdCAgICBtZXRhOiAocmVjb3JkICYmIHJlY29yZC5tZXRhKSB8fCB7fSxcblx0ICAgIHBhdGg6IGxvY2F0aW9uLnBhdGggfHwgJy8nLFxuXHQgICAgaGFzaDogbG9jYXRpb24uaGFzaCB8fCAnJyxcblx0ICAgIHF1ZXJ5OiBxdWVyeSxcblx0ICAgIHBhcmFtczogbG9jYXRpb24ucGFyYW1zIHx8IHt9LFxuXHQgICAgZnVsbFBhdGg6IGdldEZ1bGxQYXRoKGxvY2F0aW9uLCBzdHJpbmdpZnlRdWVyeSQkMSksXG5cdCAgICBtYXRjaGVkOiByZWNvcmQgPyBmb3JtYXRNYXRjaChyZWNvcmQpIDogW11cblx0ICB9O1xuXHQgIGlmIChyZWRpcmVjdGVkRnJvbSkge1xuXHQgICAgcm91dGUucmVkaXJlY3RlZEZyb20gPSBnZXRGdWxsUGF0aChyZWRpcmVjdGVkRnJvbSwgc3RyaW5naWZ5UXVlcnkkJDEpO1xuXHQgIH1cblx0ICByZXR1cm4gT2JqZWN0LmZyZWV6ZShyb3V0ZSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2xvbmUgKHZhbHVlKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gdmFsdWUubWFwKGNsb25lKVxuXHQgIH0gZWxzZSBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuXHQgICAgdmFyIHJlcyA9IHt9O1xuXHQgICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG5cdCAgICAgIHJlc1trZXldID0gY2xvbmUodmFsdWVba2V5XSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB2YWx1ZVxuXHQgIH1cblx0fVxuXHRcblx0Ly8gdGhlIHN0YXJ0aW5nIHJvdXRlIHRoYXQgcmVwcmVzZW50cyB0aGUgaW5pdGlhbCBzdGF0ZVxuXHR2YXIgU1RBUlQgPSBjcmVhdGVSb3V0ZShudWxsLCB7XG5cdCAgcGF0aDogJy8nXG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TWF0Y2ggKHJlY29yZCkge1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICB3aGlsZSAocmVjb3JkKSB7XG5cdCAgICByZXMudW5zaGlmdChyZWNvcmQpO1xuXHQgICAgcmVjb3JkID0gcmVjb3JkLnBhcmVudDtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRGdWxsUGF0aCAoXG5cdCAgcmVmLFxuXHQgIF9zdHJpbmdpZnlRdWVyeVxuXHQpIHtcblx0ICB2YXIgcGF0aCA9IHJlZi5wYXRoO1xuXHQgIHZhciBxdWVyeSA9IHJlZi5xdWVyeTsgaWYgKCBxdWVyeSA9PT0gdm9pZCAwICkgcXVlcnkgPSB7fTtcblx0ICB2YXIgaGFzaCA9IHJlZi5oYXNoOyBpZiAoIGhhc2ggPT09IHZvaWQgMCApIGhhc2ggPSAnJztcblx0XG5cdCAgdmFyIHN0cmluZ2lmeSA9IF9zdHJpbmdpZnlRdWVyeSB8fCBzdHJpbmdpZnlRdWVyeTtcblx0ICByZXR1cm4gKHBhdGggfHwgJy8nKSArIHN0cmluZ2lmeShxdWVyeSkgKyBoYXNoXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU2FtZVJvdXRlIChhLCBiKSB7XG5cdCAgaWYgKGIgPT09IFNUQVJUKSB7XG5cdCAgICByZXR1cm4gYSA9PT0gYlxuXHQgIH0gZWxzZSBpZiAoIWIpIHtcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH0gZWxzZSBpZiAoYS5wYXRoICYmIGIucGF0aCkge1xuXHQgICAgcmV0dXJuIChcblx0ICAgICAgYS5wYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnJykgPT09IGIucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJycpICYmXG5cdCAgICAgIGEuaGFzaCA9PT0gYi5oYXNoICYmXG5cdCAgICAgIGlzT2JqZWN0RXF1YWwoYS5xdWVyeSwgYi5xdWVyeSlcblx0ICAgIClcblx0ICB9IGVsc2UgaWYgKGEubmFtZSAmJiBiLm5hbWUpIHtcblx0ICAgIHJldHVybiAoXG5cdCAgICAgIGEubmFtZSA9PT0gYi5uYW1lICYmXG5cdCAgICAgIGEuaGFzaCA9PT0gYi5oYXNoICYmXG5cdCAgICAgIGlzT2JqZWN0RXF1YWwoYS5xdWVyeSwgYi5xdWVyeSkgJiZcblx0ICAgICAgaXNPYmplY3RFcXVhbChhLnBhcmFtcywgYi5wYXJhbXMpXG5cdCAgICApXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3RFcXVhbCAoYSwgYikge1xuXHQgIGlmICggYSA9PT0gdm9pZCAwICkgYSA9IHt9O1xuXHQgIGlmICggYiA9PT0gdm9pZCAwICkgYiA9IHt9O1xuXHRcblx0ICAvLyBoYW5kbGUgbnVsbCB2YWx1ZSAjMTU2NlxuXHQgIGlmICghYSB8fCAhYikgeyByZXR1cm4gYSA9PT0gYiB9XG5cdCAgdmFyIGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XG5cdCAgdmFyIGJLZXlzID0gT2JqZWN0LmtleXMoYik7XG5cdCAgaWYgKGFLZXlzLmxlbmd0aCAhPT0gYktleXMubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdCAgcmV0dXJuIGFLZXlzLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHZhciBhVmFsID0gYVtrZXldO1xuXHQgICAgdmFyIGJWYWwgPSBiW2tleV07XG5cdCAgICAvLyBjaGVjayBuZXN0ZWQgZXF1YWxpdHlcblx0ICAgIGlmICh0eXBlb2YgYVZhbCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGJWYWwgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpc09iamVjdEVxdWFsKGFWYWwsIGJWYWwpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gU3RyaW5nKGFWYWwpID09PSBTdHJpbmcoYlZhbClcblx0ICB9KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0luY2x1ZGVkUm91dGUgKGN1cnJlbnQsIHRhcmdldCkge1xuXHQgIHJldHVybiAoXG5cdCAgICBjdXJyZW50LnBhdGgucmVwbGFjZSh0cmFpbGluZ1NsYXNoUkUsICcvJykuaW5kZXhPZihcblx0ICAgICAgdGFyZ2V0LnBhdGgucmVwbGFjZSh0cmFpbGluZ1NsYXNoUkUsICcvJylcblx0ICAgICkgPT09IDAgJiZcblx0ICAgICghdGFyZ2V0Lmhhc2ggfHwgY3VycmVudC5oYXNoID09PSB0YXJnZXQuaGFzaCkgJiZcblx0ICAgIHF1ZXJ5SW5jbHVkZXMoY3VycmVudC5xdWVyeSwgdGFyZ2V0LnF1ZXJ5KVxuXHQgIClcblx0fVxuXHRcblx0ZnVuY3Rpb24gcXVlcnlJbmNsdWRlcyAoY3VycmVudCwgdGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIga2V5IGluIHRhcmdldCkge1xuXHQgICAgaWYgKCEoa2V5IGluIGN1cnJlbnQpKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdC8vIHdvcmsgYXJvdW5kIHdlaXJkIGZsb3cgYnVnXG5cdHZhciB0b1R5cGVzID0gW1N0cmluZywgT2JqZWN0XTtcblx0dmFyIGV2ZW50VHlwZXMgPSBbU3RyaW5nLCBBcnJheV07XG5cdFxuXHR2YXIgTGluayA9IHtcblx0ICBuYW1lOiAncm91dGVyLWxpbmsnLFxuXHQgIHByb3BzOiB7XG5cdCAgICB0bzoge1xuXHQgICAgICB0eXBlOiB0b1R5cGVzLFxuXHQgICAgICByZXF1aXJlZDogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIHRhZzoge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIGRlZmF1bHQ6ICdhJ1xuXHQgICAgfSxcblx0ICAgIGV4YWN0OiBCb29sZWFuLFxuXHQgICAgYXBwZW5kOiBCb29sZWFuLFxuXHQgICAgcmVwbGFjZTogQm9vbGVhbixcblx0ICAgIGFjdGl2ZUNsYXNzOiBTdHJpbmcsXG5cdCAgICBleGFjdEFjdGl2ZUNsYXNzOiBTdHJpbmcsXG5cdCAgICBldmVudDoge1xuXHQgICAgICB0eXBlOiBldmVudFR5cGVzLFxuXHQgICAgICBkZWZhdWx0OiAnY2xpY2snXG5cdCAgICB9XG5cdCAgfSxcblx0ICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoaCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHJvdXRlciA9IHRoaXMuJHJvdXRlcjtcblx0ICAgIHZhciBjdXJyZW50ID0gdGhpcy4kcm91dGU7XG5cdCAgICB2YXIgcmVmID0gcm91dGVyLnJlc29sdmUodGhpcy50bywgY3VycmVudCwgdGhpcy5hcHBlbmQpO1xuXHQgICAgdmFyIGxvY2F0aW9uID0gcmVmLmxvY2F0aW9uO1xuXHQgICAgdmFyIHJvdXRlID0gcmVmLnJvdXRlO1xuXHQgICAgdmFyIGhyZWYgPSByZWYuaHJlZjtcblx0XG5cdCAgICB2YXIgY2xhc3NlcyA9IHt9O1xuXHQgICAgdmFyIGdsb2JhbEFjdGl2ZUNsYXNzID0gcm91dGVyLm9wdGlvbnMubGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgdmFyIGdsb2JhbEV4YWN0QWN0aXZlQ2xhc3MgPSByb3V0ZXIub3B0aW9ucy5saW5rRXhhY3RBY3RpdmVDbGFzcztcblx0ICAgIC8vIFN1cHBvcnQgZ2xvYmFsIGVtcHR5IGFjdGl2ZSBjbGFzc1xuXHQgICAgdmFyIGFjdGl2ZUNsYXNzRmFsbGJhY2sgPSBnbG9iYWxBY3RpdmVDbGFzcyA9PSBudWxsXG5cdCAgICAgICAgICAgID8gJ3JvdXRlci1saW5rLWFjdGl2ZSdcblx0ICAgICAgICAgICAgOiBnbG9iYWxBY3RpdmVDbGFzcztcblx0ICAgIHZhciBleGFjdEFjdGl2ZUNsYXNzRmFsbGJhY2sgPSBnbG9iYWxFeGFjdEFjdGl2ZUNsYXNzID09IG51bGxcblx0ICAgICAgICAgICAgPyAncm91dGVyLWxpbmstZXhhY3QtYWN0aXZlJ1xuXHQgICAgICAgICAgICA6IGdsb2JhbEV4YWN0QWN0aXZlQ2xhc3M7XG5cdCAgICB2YXIgYWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzID09IG51bGxcblx0ICAgICAgICAgICAgPyBhY3RpdmVDbGFzc0ZhbGxiYWNrXG5cdCAgICAgICAgICAgIDogdGhpcy5hY3RpdmVDbGFzcztcblx0ICAgIHZhciBleGFjdEFjdGl2ZUNsYXNzID0gdGhpcy5leGFjdEFjdGl2ZUNsYXNzID09IG51bGxcblx0ICAgICAgICAgICAgPyBleGFjdEFjdGl2ZUNsYXNzRmFsbGJhY2tcblx0ICAgICAgICAgICAgOiB0aGlzLmV4YWN0QWN0aXZlQ2xhc3M7XG5cdCAgICB2YXIgY29tcGFyZVRhcmdldCA9IGxvY2F0aW9uLnBhdGhcblx0ICAgICAgPyBjcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbiwgbnVsbCwgcm91dGVyKVxuXHQgICAgICA6IHJvdXRlO1xuXHRcblx0ICAgIGNsYXNzZXNbZXhhY3RBY3RpdmVDbGFzc10gPSBpc1NhbWVSb3V0ZShjdXJyZW50LCBjb21wYXJlVGFyZ2V0KTtcblx0ICAgIGNsYXNzZXNbYWN0aXZlQ2xhc3NdID0gdGhpcy5leGFjdFxuXHQgICAgICA/IGNsYXNzZXNbZXhhY3RBY3RpdmVDbGFzc11cblx0ICAgICAgOiBpc0luY2x1ZGVkUm91dGUoY3VycmVudCwgY29tcGFyZVRhcmdldCk7XG5cdFxuXHQgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBpZiAoZ3VhcmRFdmVudChlKSkge1xuXHQgICAgICAgIGlmICh0aGlzJDEucmVwbGFjZSkge1xuXHQgICAgICAgICAgcm91dGVyLnJlcGxhY2UobG9jYXRpb24pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByb3V0ZXIucHVzaChsb2NhdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBvbiA9IHsgY2xpY2s6IGd1YXJkRXZlbnQgfTtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuZXZlbnQpKSB7XG5cdCAgICAgIHRoaXMuZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBvbltlXSA9IGhhbmRsZXI7IH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb25bdGhpcy5ldmVudF0gPSBoYW5kbGVyO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkYXRhID0ge1xuXHQgICAgICBjbGFzczogY2xhc3Nlc1xuXHQgICAgfTtcblx0XG5cdCAgICBpZiAodGhpcy50YWcgPT09ICdhJykge1xuXHQgICAgICBkYXRhLm9uID0gb247XG5cdCAgICAgIGRhdGEuYXR0cnMgPSB7IGhyZWY6IGhyZWYgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIGZpbmQgdGhlIGZpcnN0IDxhPiBjaGlsZCBhbmQgYXBwbHkgbGlzdGVuZXIgYW5kIGhyZWZcblx0ICAgICAgdmFyIGEgPSBmaW5kQW5jaG9yKHRoaXMuJHNsb3RzLmRlZmF1bHQpO1xuXHQgICAgICBpZiAoYSkge1xuXHQgICAgICAgIC8vIGluIGNhc2UgdGhlIDxhPiBpcyBhIHN0YXRpYyBub2RlXG5cdCAgICAgICAgYS5pc1N0YXRpYyA9IGZhbHNlO1xuXHQgICAgICAgIHZhciBleHRlbmQgPSBfVnVlLnV0aWwuZXh0ZW5kO1xuXHQgICAgICAgIHZhciBhRGF0YSA9IGEuZGF0YSA9IGV4dGVuZCh7fSwgYS5kYXRhKTtcblx0ICAgICAgICBhRGF0YS5vbiA9IG9uO1xuXHQgICAgICAgIHZhciBhQXR0cnMgPSBhLmRhdGEuYXR0cnMgPSBleHRlbmQoe30sIGEuZGF0YS5hdHRycyk7XG5cdCAgICAgICAgYUF0dHJzLmhyZWYgPSBocmVmO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIGRvZXNuJ3QgaGF2ZSA8YT4gY2hpbGQsIGFwcGx5IGxpc3RlbmVyIHRvIHNlbGZcblx0ICAgICAgICBkYXRhLm9uID0gb247XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gaCh0aGlzLnRhZywgZGF0YSwgdGhpcy4kc2xvdHMuZGVmYXVsdClcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBndWFyZEV2ZW50IChlKSB7XG5cdCAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcblx0ICBpZiAoZS5tZXRhS2V5IHx8IGUuYWx0S2V5IHx8IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5KSB7IHJldHVybiB9XG5cdCAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcblx0ICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7IHJldHVybiB9XG5cdCAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcblx0ICBpZiAoZS5idXR0b24gIT09IHVuZGVmaW5lZCAmJiBlLmJ1dHRvbiAhPT0gMCkgeyByZXR1cm4gfVxuXHQgIC8vIGRvbid0IHJlZGlyZWN0IGlmIGB0YXJnZXQ9XCJfYmxhbmtcImBcblx0ICBpZiAoZS5jdXJyZW50VGFyZ2V0ICYmIGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUpIHtcblx0ICAgIHZhciB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKTtcblx0ICAgIGlmICgvXFxiX2JsYW5rXFxiL2kudGVzdCh0YXJnZXQpKSB7IHJldHVybiB9XG5cdCAgfVxuXHQgIC8vIHRoaXMgbWF5IGJlIGEgV2VleCBldmVudCB3aGljaCBkb2Vzbid0IGhhdmUgdGhpcyBtZXRob2Rcblx0ICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmaW5kQW5jaG9yIChjaGlsZHJlbikge1xuXHQgIGlmIChjaGlsZHJlbikge1xuXHQgICAgdmFyIGNoaWxkO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHQgICAgICBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHQgICAgICBpZiAoY2hpbGQudGFnID09PSAnYScpIHtcblx0ICAgICAgICByZXR1cm4gY2hpbGRcblx0ICAgICAgfVxuXHQgICAgICBpZiAoY2hpbGQuY2hpbGRyZW4gJiYgKGNoaWxkID0gZmluZEFuY2hvcihjaGlsZC5jaGlsZHJlbikpKSB7XG5cdCAgICAgICAgcmV0dXJuIGNoaWxkXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBfVnVlO1xuXHRcblx0ZnVuY3Rpb24gaW5zdGFsbCAoVnVlKSB7XG5cdCAgaWYgKGluc3RhbGwuaW5zdGFsbGVkICYmIF9WdWUgPT09IFZ1ZSkgeyByZXR1cm4gfVxuXHQgIGluc3RhbGwuaW5zdGFsbGVkID0gdHJ1ZTtcblx0XG5cdCAgX1Z1ZSA9IFZ1ZTtcblx0XG5cdCAgdmFyIGlzRGVmID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgIT09IHVuZGVmaW5lZDsgfTtcblx0XG5cdCAgdmFyIHJlZ2lzdGVySW5zdGFuY2UgPSBmdW5jdGlvbiAodm0sIGNhbGxWYWwpIHtcblx0ICAgIHZhciBpID0gdm0uJG9wdGlvbnMuX3BhcmVudFZub2RlO1xuXHQgICAgaWYgKGlzRGVmKGkpICYmIGlzRGVmKGkgPSBpLmRhdGEpICYmIGlzRGVmKGkgPSBpLnJlZ2lzdGVyUm91dGVJbnN0YW5jZSkpIHtcblx0ICAgICAgaSh2bSwgY2FsbFZhbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgVnVlLm1peGluKHtcblx0ICAgIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlICgpIHtcblx0ICAgICAgaWYgKGlzRGVmKHRoaXMuJG9wdGlvbnMucm91dGVyKSkge1xuXHQgICAgICAgIHRoaXMuX3JvdXRlclJvb3QgPSB0aGlzO1xuXHQgICAgICAgIHRoaXMuX3JvdXRlciA9IHRoaXMuJG9wdGlvbnMucm91dGVyO1xuXHQgICAgICAgIHRoaXMuX3JvdXRlci5pbml0KHRoaXMpO1xuXHQgICAgICAgIFZ1ZS51dGlsLmRlZmluZVJlYWN0aXZlKHRoaXMsICdfcm91dGUnLCB0aGlzLl9yb3V0ZXIuaGlzdG9yeS5jdXJyZW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLl9yb3V0ZXJSb290ID0gKHRoaXMuJHBhcmVudCAmJiB0aGlzLiRwYXJlbnQuX3JvdXRlclJvb3QpIHx8IHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCB0aGlzKTtcblx0ICAgIH0sXG5cdCAgICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCAoKSB7XG5cdCAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJHJvdXRlcicsIHtcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0ICgpIHsgcmV0dXJuIHRoaXMuX3JvdXRlclJvb3QuX3JvdXRlciB9XG5cdCAgfSk7XG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJHJvdXRlJywge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkgeyByZXR1cm4gdGhpcy5fcm91dGVyUm9vdC5fcm91dGUgfVxuXHQgIH0pO1xuXHRcblx0ICBWdWUuY29tcG9uZW50KCdyb3V0ZXItdmlldycsIFZpZXcpO1xuXHQgIFZ1ZS5jb21wb25lbnQoJ3JvdXRlci1saW5rJywgTGluayk7XG5cdFxuXHQgIHZhciBzdHJhdHMgPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztcblx0ICAvLyB1c2UgdGhlIHNhbWUgaG9vayBtZXJnaW5nIHN0cmF0ZWd5IGZvciByb3V0ZSBob29rc1xuXHQgIHN0cmF0cy5iZWZvcmVSb3V0ZUVudGVyID0gc3RyYXRzLmJlZm9yZVJvdXRlTGVhdmUgPSBzdHJhdHMuYmVmb3JlUm91dGVVcGRhdGUgPSBzdHJhdHMuY3JlYXRlZDtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHR2YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG5cdFxuXHQvKiAgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVQYXRoIChcblx0ICByZWxhdGl2ZSxcblx0ICBiYXNlLFxuXHQgIGFwcGVuZFxuXHQpIHtcblx0ICB2YXIgZmlyc3RDaGFyID0gcmVsYXRpdmUuY2hhckF0KDApO1xuXHQgIGlmIChmaXJzdENoYXIgPT09ICcvJykge1xuXHQgICAgcmV0dXJuIHJlbGF0aXZlXG5cdCAgfVxuXHRcblx0ICBpZiAoZmlyc3RDaGFyID09PSAnPycgfHwgZmlyc3RDaGFyID09PSAnIycpIHtcblx0ICAgIHJldHVybiBiYXNlICsgcmVsYXRpdmVcblx0ICB9XG5cdFxuXHQgIHZhciBzdGFjayA9IGJhc2Uuc3BsaXQoJy8nKTtcblx0XG5cdCAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNlZ21lbnQgaWY6XG5cdCAgLy8gLSBub3QgYXBwZW5kaW5nXG5cdCAgLy8gLSBhcHBlbmRpbmcgdG8gdHJhaWxpbmcgc2xhc2ggKGxhc3Qgc2VnbWVudCBpcyBlbXB0eSlcblx0ICBpZiAoIWFwcGVuZCB8fCAhc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0pIHtcblx0ICAgIHN0YWNrLnBvcCgpO1xuXHQgIH1cblx0XG5cdCAgLy8gcmVzb2x2ZSByZWxhdGl2ZSBwYXRoXG5cdCAgdmFyIHNlZ21lbnRzID0gcmVsYXRpdmUucmVwbGFjZSgvXlxcLy8sICcnKS5zcGxpdCgnLycpO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG5cdCAgICBpZiAoc2VnbWVudCA9PT0gJy4uJykge1xuXHQgICAgICBzdGFjay5wb3AoKTtcblx0ICAgIH0gZWxzZSBpZiAoc2VnbWVudCAhPT0gJy4nKSB7XG5cdCAgICAgIHN0YWNrLnB1c2goc2VnbWVudCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBlbnN1cmUgbGVhZGluZyBzbGFzaFxuXHQgIGlmIChzdGFja1swXSAhPT0gJycpIHtcblx0ICAgIHN0YWNrLnVuc2hpZnQoJycpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHN0YWNrLmpvaW4oJy8nKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZVBhdGggKHBhdGgpIHtcblx0ICB2YXIgaGFzaCA9ICcnO1xuXHQgIHZhciBxdWVyeSA9ICcnO1xuXHRcblx0ICB2YXIgaGFzaEluZGV4ID0gcGF0aC5pbmRleE9mKCcjJyk7XG5cdCAgaWYgKGhhc2hJbmRleCA+PSAwKSB7XG5cdCAgICBoYXNoID0gcGF0aC5zbGljZShoYXNoSW5kZXgpO1xuXHQgICAgcGF0aCA9IHBhdGguc2xpY2UoMCwgaGFzaEluZGV4KTtcblx0ICB9XG5cdFxuXHQgIHZhciBxdWVyeUluZGV4ID0gcGF0aC5pbmRleE9mKCc/Jyk7XG5cdCAgaWYgKHF1ZXJ5SW5kZXggPj0gMCkge1xuXHQgICAgcXVlcnkgPSBwYXRoLnNsaWNlKHF1ZXJ5SW5kZXggKyAxKTtcblx0ICAgIHBhdGggPSBwYXRoLnNsaWNlKDAsIHF1ZXJ5SW5kZXgpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIHBhdGg6IHBhdGgsXG5cdCAgICBxdWVyeTogcXVlcnksXG5cdCAgICBoYXNoOiBoYXNoXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjbGVhblBhdGggKHBhdGgpIHtcblx0ICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC9cXC8vZywgJy8nKVxuXHR9XG5cdFxuXHR2YXIgaXNhcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV4cG9zZSBgcGF0aFRvUmVnZXhwYC5cblx0ICovXG5cdHZhciBwYXRoVG9SZWdleHBfMSA9IHBhdGhUb1JlZ2V4cDtcblx0dmFyIHBhcnNlXzEgPSBwYXJzZTtcblx0dmFyIGNvbXBpbGVfMSA9IGNvbXBpbGU7XG5cdHZhciB0b2tlbnNUb0Z1bmN0aW9uXzEgPSB0b2tlbnNUb0Z1bmN0aW9uO1xuXHR2YXIgdG9rZW5zVG9SZWdFeHBfMSA9IHRva2Vuc1RvUmVnRXhwO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBtYWluIHBhdGggbWF0Y2hpbmcgcmVnZXhwIHV0aWxpdHkuXG5cdCAqXG5cdCAqIEB0eXBlIHtSZWdFeHB9XG5cdCAqL1xuXHR2YXIgUEFUSF9SRUdFWFAgPSBuZXcgUmVnRXhwKFtcblx0ICAvLyBNYXRjaCBlc2NhcGVkIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBvdGhlcndpc2UgYXBwZWFyIGluIGZ1dHVyZSBtYXRjaGVzLlxuXHQgIC8vIFRoaXMgYWxsb3dzIHRoZSB1c2VyIHRvIGVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgdGhhdCB3b24ndCB0cmFuc2Zvcm0uXG5cdCAgJyhcXFxcXFxcXC4pJyxcblx0ICAvLyBNYXRjaCBFeHByZXNzLXN0eWxlIHBhcmFtZXRlcnMgYW5kIHVuLW5hbWVkIHBhcmFtZXRlcnMgd2l0aCBhIHByZWZpeFxuXHQgIC8vIGFuZCBvcHRpb25hbCBzdWZmaXhlcy4gTWF0Y2hlcyBhcHBlYXIgYXM6XG5cdCAgLy9cblx0ICAvLyBcIi86dGVzdChcXFxcZCspP1wiID0+IFtcIi9cIiwgXCJ0ZXN0XCIsIFwiXFxkK1wiLCB1bmRlZmluZWQsIFwiP1wiLCB1bmRlZmluZWRdXG5cdCAgLy8gXCIvcm91dGUoXFxcXGQrKVwiICA9PiBbdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgXCJcXGQrXCIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuXHQgIC8vIFwiLypcIiAgICAgICAgICAgID0+IFtcIi9cIiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIipcIl1cblx0ICAnKFtcXFxcLy5dKT8oPzooPzpcXFxcOihcXFxcdyspKD86XFxcXCgoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKV0pKylcXFxcKSk/fFxcXFwoKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKCldKSspXFxcXCkpKFsrKj9dKT98KFxcXFwqKSknXG5cdF0uam9pbignfCcpLCAnZycpO1xuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgc3RyaW5nIGZvciB0aGUgcmF3IHRva2Vucy5cblx0ICpcblx0ICogQHBhcmFtICB7c3RyaW5nfSAgc3RyXG5cdCAqIEBwYXJhbSAge09iamVjdD19IG9wdGlvbnNcblx0ICogQHJldHVybiB7IUFycmF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gcGFyc2UgKHN0ciwgb3B0aW9ucykge1xuXHQgIHZhciB0b2tlbnMgPSBbXTtcblx0ICB2YXIga2V5ID0gMDtcblx0ICB2YXIgaW5kZXggPSAwO1xuXHQgIHZhciBwYXRoID0gJyc7XG5cdCAgdmFyIGRlZmF1bHREZWxpbWl0ZXIgPSBvcHRpb25zICYmIG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcvJztcblx0ICB2YXIgcmVzO1xuXHRcblx0ICB3aGlsZSAoKHJlcyA9IFBBVEhfUkVHRVhQLmV4ZWMoc3RyKSkgIT0gbnVsbCkge1xuXHQgICAgdmFyIG0gPSByZXNbMF07XG5cdCAgICB2YXIgZXNjYXBlZCA9IHJlc1sxXTtcblx0ICAgIHZhciBvZmZzZXQgPSByZXMuaW5kZXg7XG5cdCAgICBwYXRoICs9IHN0ci5zbGljZShpbmRleCwgb2Zmc2V0KTtcblx0ICAgIGluZGV4ID0gb2Zmc2V0ICsgbS5sZW5ndGg7XG5cdFxuXHQgICAgLy8gSWdub3JlIGFscmVhZHkgZXNjYXBlZCBzZXF1ZW5jZXMuXG5cdCAgICBpZiAoZXNjYXBlZCkge1xuXHQgICAgICBwYXRoICs9IGVzY2FwZWRbMV07XG5cdCAgICAgIGNvbnRpbnVlXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5leHQgPSBzdHJbaW5kZXhdO1xuXHQgICAgdmFyIHByZWZpeCA9IHJlc1syXTtcblx0ICAgIHZhciBuYW1lID0gcmVzWzNdO1xuXHQgICAgdmFyIGNhcHR1cmUgPSByZXNbNF07XG5cdCAgICB2YXIgZ3JvdXAgPSByZXNbNV07XG5cdCAgICB2YXIgbW9kaWZpZXIgPSByZXNbNl07XG5cdCAgICB2YXIgYXN0ZXJpc2sgPSByZXNbN107XG5cdFxuXHQgICAgLy8gUHVzaCB0aGUgY3VycmVudCBwYXRoIG9udG8gdGhlIHRva2Vucy5cblx0ICAgIGlmIChwYXRoKSB7XG5cdCAgICAgIHRva2Vucy5wdXNoKHBhdGgpO1xuXHQgICAgICBwYXRoID0gJyc7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHBhcnRpYWwgPSBwcmVmaXggIT0gbnVsbCAmJiBuZXh0ICE9IG51bGwgJiYgbmV4dCAhPT0gcHJlZml4O1xuXHQgICAgdmFyIHJlcGVhdCA9IG1vZGlmaWVyID09PSAnKycgfHwgbW9kaWZpZXIgPT09ICcqJztcblx0ICAgIHZhciBvcHRpb25hbCA9IG1vZGlmaWVyID09PSAnPycgfHwgbW9kaWZpZXIgPT09ICcqJztcblx0ICAgIHZhciBkZWxpbWl0ZXIgPSByZXNbMl0gfHwgZGVmYXVsdERlbGltaXRlcjtcblx0ICAgIHZhciBwYXR0ZXJuID0gY2FwdHVyZSB8fCBncm91cDtcblx0XG5cdCAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgIG5hbWU6IG5hbWUgfHwga2V5KyssXG5cdCAgICAgIHByZWZpeDogcHJlZml4IHx8ICcnLFxuXHQgICAgICBkZWxpbWl0ZXI6IGRlbGltaXRlcixcblx0ICAgICAgb3B0aW9uYWw6IG9wdGlvbmFsLFxuXHQgICAgICByZXBlYXQ6IHJlcGVhdCxcblx0ICAgICAgcGFydGlhbDogcGFydGlhbCxcblx0ICAgICAgYXN0ZXJpc2s6ICEhYXN0ZXJpc2ssXG5cdCAgICAgIHBhdHRlcm46IHBhdHRlcm4gPyBlc2NhcGVHcm91cChwYXR0ZXJuKSA6IChhc3RlcmlzayA/ICcuKicgOiAnW14nICsgZXNjYXBlU3RyaW5nKGRlbGltaXRlcikgKyAnXSs/Jylcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgLy8gTWF0Y2ggYW55IGNoYXJhY3RlcnMgc3RpbGwgcmVtYWluaW5nLlxuXHQgIGlmIChpbmRleCA8IHN0ci5sZW5ndGgpIHtcblx0ICAgIHBhdGggKz0gc3RyLnN1YnN0cihpbmRleCk7XG5cdCAgfVxuXHRcblx0ICAvLyBJZiB0aGUgcGF0aCBleGlzdHMsIHB1c2ggaXQgb250byB0aGUgZW5kLlxuXHQgIGlmIChwYXRoKSB7XG5cdCAgICB0b2tlbnMucHVzaChwYXRoKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0b2tlbnNcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBzdHJpbmcgdG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbiBmb3IgdGhlIHBhdGguXG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gICAgICAgICAgICAgc3RyXG5cdCAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgICAgb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHshZnVuY3Rpb24oT2JqZWN0PSwgT2JqZWN0PSl9XG5cdCAqL1xuXHRmdW5jdGlvbiBjb21waWxlIChzdHIsIG9wdGlvbnMpIHtcblx0ICByZXR1cm4gdG9rZW5zVG9GdW5jdGlvbihwYXJzZShzdHIsIG9wdGlvbnMpKVxuXHR9XG5cdFxuXHQvKipcblx0ICogUHJldHRpZXIgZW5jb2Rpbmcgb2YgVVJJIHBhdGggc2VnbWVudHMuXG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ31cblx0ICogQHJldHVybiB7c3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5IChzdHIpIHtcblx0ICByZXR1cm4gZW5jb2RlVVJJKHN0cikucmVwbGFjZSgvW1xcLz8jXS9nLCBmdW5jdGlvbiAoYykge1xuXHQgICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuXHQgIH0pXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFbmNvZGUgdGhlIGFzdGVyaXNrIHBhcmFtZXRlci4gU2ltaWxhciB0byBgcHJldHR5YCwgYnV0IGFsbG93cyBzbGFzaGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9XG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGVuY29kZUFzdGVyaXNrIChzdHIpIHtcblx0ICByZXR1cm4gZW5jb2RlVVJJKHN0cikucmVwbGFjZSgvWz8jXS9nLCBmdW5jdGlvbiAoYykge1xuXHQgICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuXHQgIH0pXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHBvc2UgYSBtZXRob2QgZm9yIHRyYW5zZm9ybWluZyB0b2tlbnMgaW50byB0aGUgcGF0aCBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIHRva2Vuc1RvRnVuY3Rpb24gKHRva2Vucykge1xuXHQgIC8vIENvbXBpbGUgYWxsIHRoZSB0b2tlbnMgaW50byByZWdleHBzLlxuXHQgIHZhciBtYXRjaGVzID0gbmV3IEFycmF5KHRva2Vucy5sZW5ndGgpO1xuXHRcblx0ICAvLyBDb21waWxlIGFsbCB0aGUgcGF0dGVybnMgYmVmb3JlIGNvbXBpbGF0aW9uLlxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBpZiAodHlwZW9mIHRva2Vuc1tpXSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgbWF0Y2hlc1tpXSA9IG5ldyBSZWdFeHAoJ14oPzonICsgdG9rZW5zW2ldLnBhdHRlcm4gKyAnKSQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAob2JqLCBvcHRzKSB7XG5cdCAgICB2YXIgcGF0aCA9ICcnO1xuXHQgICAgdmFyIGRhdGEgPSBvYmogfHwge307XG5cdCAgICB2YXIgb3B0aW9ucyA9IG9wdHMgfHwge307XG5cdCAgICB2YXIgZW5jb2RlID0gb3B0aW9ucy5wcmV0dHkgPyBlbmNvZGVVUklDb21wb25lbnRQcmV0dHkgOiBlbmNvZGVVUklDb21wb25lbnQ7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBwYXRoICs9IHRva2VuO1xuXHRcblx0ICAgICAgICBjb250aW51ZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgdmFsdWUgPSBkYXRhW3Rva2VuLm5hbWVdO1xuXHQgICAgICB2YXIgc2VnbWVudDtcblx0XG5cdCAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdCAgICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7XG5cdCAgICAgICAgICAvLyBQcmVwZW5kIHBhcnRpYWwgc2VnbWVudCBwcmVmaXhlcy5cblx0ICAgICAgICAgIGlmICh0b2tlbi5wYXJ0aWFsKSB7XG5cdCAgICAgICAgICAgIHBhdGggKz0gdG9rZW4ucHJlZml4O1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gYmUgZGVmaW5lZCcpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoaXNhcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICBpZiAoIXRva2VuLnJlcGVhdCkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBub3QgcmVwZWF0LCBidXQgcmVjZWl2ZWQgYCcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnYCcpXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcblx0ICAgICAgICAgICAgY29udGludWVcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbm90IGJlIGVtcHR5Jylcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgIHNlZ21lbnQgPSBlbmNvZGUodmFsdWVbal0pO1xuXHRcblx0ICAgICAgICAgIGlmICghbWF0Y2hlc1tpXS50ZXN0KHNlZ21lbnQpKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGFsbCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG1hdGNoIFwiJyArIHRva2VuLnBhdHRlcm4gKyAnXCIsIGJ1dCByZWNlaXZlZCBgJyArIEpTT04uc3RyaW5naWZ5KHNlZ21lbnQpICsgJ2AnKVxuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHBhdGggKz0gKGogPT09IDAgPyB0b2tlbi5wcmVmaXggOiB0b2tlbi5kZWxpbWl0ZXIpICsgc2VnbWVudDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHNlZ21lbnQgPSB0b2tlbi5hc3RlcmlzayA/IGVuY29kZUFzdGVyaXNrKHZhbHVlKSA6IGVuY29kZSh2YWx1ZSk7XG5cdFxuXHQgICAgICBpZiAoIW1hdGNoZXNbaV0udGVzdChzZWdtZW50KSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbWF0Y2ggXCInICsgdG9rZW4ucGF0dGVybiArICdcIiwgYnV0IHJlY2VpdmVkIFwiJyArIHNlZ21lbnQgKyAnXCInKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBwYXRoICs9IHRva2VuLnByZWZpeCArIHNlZ21lbnQ7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHBhdGhcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFc2NhcGUgYSByZWd1bGFyIGV4cHJlc3Npb24gc3RyaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBlc2NhcGVTdHJpbmcgKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZSgvKFsuKyo/PV4hOiR7fSgpW1xcXXxcXC9cXFxcXSkvZywgJ1xcXFwkMScpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFc2NhcGUgdGhlIGNhcHR1cmluZyBncm91cCBieSBlc2NhcGluZyBzcGVjaWFsIGNoYXJhY3RlcnMgYW5kIG1lYW5pbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gZ3JvdXBcblx0ICogQHJldHVybiB7c3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gZXNjYXBlR3JvdXAgKGdyb3VwKSB7XG5cdCAgcmV0dXJuIGdyb3VwLnJlcGxhY2UoLyhbPSE6JFxcLygpXSkvZywgJ1xcXFwkMScpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdHRhY2ggdGhlIGtleXMgYXMgYSBwcm9wZXJ0eSBvZiB0aGUgcmVnZXhwLlxuXHQgKlxuXHQgKiBAcGFyYW0gIHshUmVnRXhwfSByZVxuXHQgKiBAcGFyYW0gIHtBcnJheX0gICBrZXlzXG5cdCAqIEByZXR1cm4geyFSZWdFeHB9XG5cdCAqL1xuXHRmdW5jdGlvbiBhdHRhY2hLZXlzIChyZSwga2V5cykge1xuXHQgIHJlLmtleXMgPSBrZXlzO1xuXHQgIHJldHVybiByZVxuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSBmbGFncyBmb3IgYSByZWdleHAgZnJvbSB0aGUgb3B0aW9ucy5cblx0ICpcblx0ICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGZsYWdzIChvcHRpb25zKSB7XG5cdCAgcmV0dXJuIG9wdGlvbnMuc2Vuc2l0aXZlID8gJycgOiAnaSdcblx0fVxuXHRcblx0LyoqXG5cdCAqIFB1bGwgb3V0IGtleXMgZnJvbSBhIHJlZ2V4cC5cblx0ICpcblx0ICogQHBhcmFtICB7IVJlZ0V4cH0gcGF0aFxuXHQgKiBAcGFyYW0gIHshQXJyYXl9ICBrZXlzXG5cdCAqIEByZXR1cm4geyFSZWdFeHB9XG5cdCAqL1xuXHRmdW5jdGlvbiByZWdleHBUb1JlZ2V4cCAocGF0aCwga2V5cykge1xuXHQgIC8vIFVzZSBhIG5lZ2F0aXZlIGxvb2thaGVhZCB0byBtYXRjaCBvbmx5IGNhcHR1cmluZyBncm91cHMuXG5cdCAgdmFyIGdyb3VwcyA9IHBhdGguc291cmNlLm1hdGNoKC9cXCgoPyFcXD8pL2cpO1xuXHRcblx0ICBpZiAoZ3JvdXBzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBrZXlzLnB1c2goe1xuXHQgICAgICAgIG5hbWU6IGksXG5cdCAgICAgICAgcHJlZml4OiBudWxsLFxuXHQgICAgICAgIGRlbGltaXRlcjogbnVsbCxcblx0ICAgICAgICBvcHRpb25hbDogZmFsc2UsXG5cdCAgICAgICAgcmVwZWF0OiBmYWxzZSxcblx0ICAgICAgICBwYXJ0aWFsOiBmYWxzZSxcblx0ICAgICAgICBhc3RlcmlzazogZmFsc2UsXG5cdCAgICAgICAgcGF0dGVybjogbnVsbFxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBhdHRhY2hLZXlzKHBhdGgsIGtleXMpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUcmFuc2Zvcm0gYW4gYXJyYXkgaW50byBhIHJlZ2V4cC5cblx0ICpcblx0ICogQHBhcmFtICB7IUFycmF5fSAgcGF0aFxuXHQgKiBAcGFyYW0gIHtBcnJheX0gICBrZXlzXG5cdCAqIEBwYXJhbSAgeyFPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7IVJlZ0V4cH1cblx0ICovXG5cdGZ1bmN0aW9uIGFycmF5VG9SZWdleHAgKHBhdGgsIGtleXMsIG9wdGlvbnMpIHtcblx0ICB2YXIgcGFydHMgPSBbXTtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBwYXJ0cy5wdXNoKHBhdGhUb1JlZ2V4cChwYXRoW2ldLCBrZXlzLCBvcHRpb25zKS5zb3VyY2UpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoJyg/OicgKyBwYXJ0cy5qb2luKCd8JykgKyAnKScsIGZsYWdzKG9wdGlvbnMpKTtcblx0XG5cdCAgcmV0dXJuIGF0dGFjaEtleXMocmVnZXhwLCBrZXlzKVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgcGF0aCByZWdleHAgZnJvbSBzdHJpbmcgaW5wdXQuXG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gIHBhdGhcblx0ICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuXHQgKiBAcGFyYW0gIHshT2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4geyFSZWdFeHB9XG5cdCAqL1xuXHRmdW5jdGlvbiBzdHJpbmdUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuXHQgIHJldHVybiB0b2tlbnNUb1JlZ0V4cChwYXJzZShwYXRoLCBvcHRpb25zKSwga2V5cywgb3B0aW9ucylcblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4cG9zZSBhIGZ1bmN0aW9uIGZvciB0YWtpbmcgdG9rZW5zIGFuZCByZXR1cm5pbmcgYSBSZWdFeHAuXG5cdCAqXG5cdCAqIEBwYXJhbSAgeyFBcnJheX0gICAgICAgICAgdG9rZW5zXG5cdCAqIEBwYXJhbSAgeyhBcnJheXxPYmplY3QpPX0ga2V5c1xuXHQgKiBAcGFyYW0gIHtPYmplY3Q9fSAgICAgICAgIG9wdGlvbnNcblx0ICogQHJldHVybiB7IVJlZ0V4cH1cblx0ICovXG5cdGZ1bmN0aW9uIHRva2Vuc1RvUmVnRXhwICh0b2tlbnMsIGtleXMsIG9wdGlvbnMpIHtcblx0ICBpZiAoIWlzYXJyYXkoa2V5cykpIHtcblx0ICAgIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChrZXlzIHx8IG9wdGlvbnMpO1xuXHQgICAga2V5cyA9IFtdO1xuXHQgIH1cblx0XG5cdCAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgIHZhciBzdHJpY3QgPSBvcHRpb25zLnN0cmljdDtcblx0ICB2YXIgZW5kID0gb3B0aW9ucy5lbmQgIT09IGZhbHNlO1xuXHQgIHZhciByb3V0ZSA9ICcnO1xuXHRcblx0ICAvLyBJdGVyYXRlIG92ZXIgdGhlIHRva2VucyBhbmQgY3JlYXRlIG91ciByZWdleHAgc3RyaW5nLlxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XG5cdFxuXHQgICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgcm91dGUgKz0gZXNjYXBlU3RyaW5nKHRva2VuKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBwcmVmaXggPSBlc2NhcGVTdHJpbmcodG9rZW4ucHJlZml4KTtcblx0ICAgICAgdmFyIGNhcHR1cmUgPSAnKD86JyArIHRva2VuLnBhdHRlcm4gKyAnKSc7XG5cdFxuXHQgICAgICBrZXlzLnB1c2godG9rZW4pO1xuXHRcblx0ICAgICAgaWYgKHRva2VuLnJlcGVhdCkge1xuXHQgICAgICAgIGNhcHR1cmUgKz0gJyg/OicgKyBwcmVmaXggKyBjYXB0dXJlICsgJykqJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7XG5cdCAgICAgICAgaWYgKCF0b2tlbi5wYXJ0aWFsKSB7XG5cdCAgICAgICAgICBjYXB0dXJlID0gJyg/OicgKyBwcmVmaXggKyAnKCcgKyBjYXB0dXJlICsgJykpPyc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGNhcHR1cmUgPSBwcmVmaXggKyAnKCcgKyBjYXB0dXJlICsgJyk/Jztcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY2FwdHVyZSA9IHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKSc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJvdXRlICs9IGNhcHR1cmU7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgZGVsaW1pdGVyID0gZXNjYXBlU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcvJyk7XG5cdCAgdmFyIGVuZHNXaXRoRGVsaW1pdGVyID0gcm91dGUuc2xpY2UoLWRlbGltaXRlci5sZW5ndGgpID09PSBkZWxpbWl0ZXI7XG5cdFxuXHQgIC8vIEluIG5vbi1zdHJpY3QgbW9kZSB3ZSBhbGxvdyBhIHNsYXNoIGF0IHRoZSBlbmQgb2YgbWF0Y2guIElmIHRoZSBwYXRoIHRvXG5cdCAgLy8gbWF0Y2ggYWxyZWFkeSBlbmRzIHdpdGggYSBzbGFzaCwgd2UgcmVtb3ZlIGl0IGZvciBjb25zaXN0ZW5jeS4gVGhlIHNsYXNoXG5cdCAgLy8gaXMgdmFsaWQgYXQgdGhlIGVuZCBvZiBhIHBhdGggbWF0Y2gsIG5vdCBpbiB0aGUgbWlkZGxlLiBUaGlzIGlzIGltcG9ydGFudFxuXHQgIC8vIGluIG5vbi1lbmRpbmcgbW9kZSwgd2hlcmUgXCIvdGVzdC9cIiBzaG91bGRuJ3QgbWF0Y2ggXCIvdGVzdC8vcm91dGVcIi5cblx0ICBpZiAoIXN0cmljdCkge1xuXHQgICAgcm91dGUgPSAoZW5kc1dpdGhEZWxpbWl0ZXIgPyByb3V0ZS5zbGljZSgwLCAtZGVsaW1pdGVyLmxlbmd0aCkgOiByb3V0ZSkgKyAnKD86JyArIGRlbGltaXRlciArICcoPz0kKSk/Jztcblx0ICB9XG5cdFxuXHQgIGlmIChlbmQpIHtcblx0ICAgIHJvdXRlICs9ICckJztcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gSW4gbm9uLWVuZGluZyBtb2RlLCB3ZSBuZWVkIHRoZSBjYXB0dXJpbmcgZ3JvdXBzIHRvIG1hdGNoIGFzIG11Y2ggYXNcblx0ICAgIC8vIHBvc3NpYmxlIGJ5IHVzaW5nIGEgcG9zaXRpdmUgbG9va2FoZWFkIHRvIHRoZSBlbmQgb3IgbmV4dCBwYXRoIHNlZ21lbnQuXG5cdCAgICByb3V0ZSArPSBzdHJpY3QgJiYgZW5kc1dpdGhEZWxpbWl0ZXIgPyAnJyA6ICcoPz0nICsgZGVsaW1pdGVyICsgJ3wkKSc7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYXR0YWNoS2V5cyhuZXcgUmVnRXhwKCdeJyArIHJvdXRlLCBmbGFncyhvcHRpb25zKSksIGtleXMpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgdGhlIGdpdmVuIHBhdGggc3RyaW5nLCByZXR1cm5pbmcgYSByZWd1bGFyIGV4cHJlc3Npb24uXG5cdCAqXG5cdCAqIEFuIGVtcHR5IGFycmF5IGNhbiBiZSBwYXNzZWQgaW4gZm9yIHRoZSBrZXlzLCB3aGljaCB3aWxsIGhvbGQgdGhlXG5cdCAqIHBsYWNlaG9sZGVyIGtleSBkZXNjcmlwdGlvbnMuIEZvciBleGFtcGxlLCB1c2luZyBgL3VzZXIvOmlkYCwgYGtleXNgIHdpbGxcblx0ICogY29udGFpbiBgW3sgbmFtZTogJ2lkJywgZGVsaW1pdGVyOiAnLycsIG9wdGlvbmFsOiBmYWxzZSwgcmVwZWF0OiBmYWxzZSB9XWAuXG5cdCAqXG5cdCAqIEBwYXJhbSAgeyhzdHJpbmd8UmVnRXhwfEFycmF5KX0gcGF0aFxuXHQgKiBAcGFyYW0gIHsoQXJyYXl8T2JqZWN0KT19ICAgICAgIGtleXNcblx0ICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICAgICAgICBvcHRpb25zXG5cdCAqIEByZXR1cm4geyFSZWdFeHB9XG5cdCAqL1xuXHRmdW5jdGlvbiBwYXRoVG9SZWdleHAgKHBhdGgsIGtleXMsIG9wdGlvbnMpIHtcblx0ICBpZiAoIWlzYXJyYXkoa2V5cykpIHtcblx0ICAgIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChrZXlzIHx8IG9wdGlvbnMpO1xuXHQgICAga2V5cyA9IFtdO1xuXHQgIH1cblx0XG5cdCAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgIGlmIChwYXRoIGluc3RhbmNlb2YgUmVnRXhwKSB7XG5cdCAgICByZXR1cm4gcmVnZXhwVG9SZWdleHAocGF0aCwgLyoqIEB0eXBlIHshQXJyYXl9ICovIChrZXlzKSlcblx0ICB9XG5cdFxuXHQgIGlmIChpc2FycmF5KHBhdGgpKSB7XG5cdCAgICByZXR1cm4gYXJyYXlUb1JlZ2V4cCgvKiogQHR5cGUgeyFBcnJheX0gKi8gKHBhdGgpLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpLCBvcHRpb25zKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHN0cmluZ1RvUmVnZXhwKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocGF0aCksIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cyksIG9wdGlvbnMpXG5cdH1cblx0XG5cdHBhdGhUb1JlZ2V4cF8xLnBhcnNlID0gcGFyc2VfMTtcblx0cGF0aFRvUmVnZXhwXzEuY29tcGlsZSA9IGNvbXBpbGVfMTtcblx0cGF0aFRvUmVnZXhwXzEudG9rZW5zVG9GdW5jdGlvbiA9IHRva2Vuc1RvRnVuY3Rpb25fMTtcblx0cGF0aFRvUmVnZXhwXzEudG9rZW5zVG9SZWdFeHAgPSB0b2tlbnNUb1JlZ0V4cF8xO1xuXHRcblx0LyogICovXG5cdFxuXHQvLyAkZmxvdy1kaXNhYmxlLWxpbmVcblx0dmFyIHJlZ2V4cENvbXBpbGVDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHRmdW5jdGlvbiBmaWxsUGFyYW1zIChcblx0ICBwYXRoLFxuXHQgIHBhcmFtcyxcblx0ICByb3V0ZU1zZ1xuXHQpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIGZpbGxlciA9XG5cdCAgICAgIHJlZ2V4cENvbXBpbGVDYWNoZVtwYXRoXSB8fFxuXHQgICAgICAocmVnZXhwQ29tcGlsZUNhY2hlW3BhdGhdID0gcGF0aFRvUmVnZXhwXzEuY29tcGlsZShwYXRoKSk7XG5cdCAgICByZXR1cm4gZmlsbGVyKHBhcmFtcyB8fCB7fSwgeyBwcmV0dHk6IHRydWUgfSlcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuKGZhbHNlLCAoXCJtaXNzaW5nIHBhcmFtIGZvciBcIiArIHJvdXRlTXNnICsgXCI6IFwiICsgKGUubWVzc2FnZSkpKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiAnJ1xuXHQgIH1cblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVSb3V0ZU1hcCAoXG5cdCAgcm91dGVzLFxuXHQgIG9sZFBhdGhMaXN0LFxuXHQgIG9sZFBhdGhNYXAsXG5cdCAgb2xkTmFtZU1hcFxuXHQpIHtcblx0ICAvLyB0aGUgcGF0aCBsaXN0IGlzIHVzZWQgdG8gY29udHJvbCBwYXRoIG1hdGNoaW5nIHByaW9yaXR5XG5cdCAgdmFyIHBhdGhMaXN0ID0gb2xkUGF0aExpc3QgfHwgW107XG5cdCAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgdmFyIHBhdGhNYXAgPSBvbGRQYXRoTWFwIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG5cdCAgdmFyIG5hbWVNYXAgPSBvbGROYW1lTWFwIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQgIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkge1xuXHQgICAgYWRkUm91dGVSZWNvcmQocGF0aExpc3QsIHBhdGhNYXAsIG5hbWVNYXAsIHJvdXRlKTtcblx0ICB9KTtcblx0XG5cdCAgLy8gZW5zdXJlIHdpbGRjYXJkIHJvdXRlcyBhcmUgYWx3YXlzIGF0IHRoZSBlbmRcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGhMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaWYgKHBhdGhMaXN0W2ldID09PSAnKicpIHtcblx0ICAgICAgcGF0aExpc3QucHVzaChwYXRoTGlzdC5zcGxpY2UoaSwgMSlbMF0pO1xuXHQgICAgICBsLS07XG5cdCAgICAgIGktLTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB7XG5cdCAgICBwYXRoTGlzdDogcGF0aExpc3QsXG5cdCAgICBwYXRoTWFwOiBwYXRoTWFwLFxuXHQgICAgbmFtZU1hcDogbmFtZU1hcFxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkUm91dGVSZWNvcmQgKFxuXHQgIHBhdGhMaXN0LFxuXHQgIHBhdGhNYXAsXG5cdCAgbmFtZU1hcCxcblx0ICByb3V0ZSxcblx0ICBwYXJlbnQsXG5cdCAgbWF0Y2hBc1xuXHQpIHtcblx0ICB2YXIgcGF0aCA9IHJvdXRlLnBhdGg7XG5cdCAgdmFyIG5hbWUgPSByb3V0ZS5uYW1lO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnQocGF0aCAhPSBudWxsLCBcIlxcXCJwYXRoXFxcIiBpcyByZXF1aXJlZCBpbiBhIHJvdXRlIGNvbmZpZ3VyYXRpb24uXCIpO1xuXHQgICAgYXNzZXJ0KFxuXHQgICAgICB0eXBlb2Ygcm91dGUuY29tcG9uZW50ICE9PSAnc3RyaW5nJyxcblx0ICAgICAgXCJyb3V0ZSBjb25maWcgXFxcImNvbXBvbmVudFxcXCIgZm9yIHBhdGg6IFwiICsgKFN0cmluZyhwYXRoIHx8IG5hbWUpKSArIFwiIGNhbm5vdCBiZSBhIFwiICtcblx0ICAgICAgXCJzdHJpbmcgaWQuIFVzZSBhbiBhY3R1YWwgY29tcG9uZW50IGluc3RlYWQuXCJcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICB2YXIgcGF0aFRvUmVnZXhwT3B0aW9ucyA9IHJvdXRlLnBhdGhUb1JlZ2V4cE9wdGlvbnMgfHwge307XG5cdCAgdmFyIG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplUGF0aChcblx0ICAgIHBhdGgsXG5cdCAgICBwYXJlbnQsXG5cdCAgICBwYXRoVG9SZWdleHBPcHRpb25zLnN0cmljdFxuXHQgICk7XG5cdFxuXHQgIGlmICh0eXBlb2Ygcm91dGUuY2FzZVNlbnNpdGl2ZSA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICBwYXRoVG9SZWdleHBPcHRpb25zLnNlbnNpdGl2ZSA9IHJvdXRlLmNhc2VTZW5zaXRpdmU7XG5cdCAgfVxuXHRcblx0ICB2YXIgcmVjb3JkID0ge1xuXHQgICAgcGF0aDogbm9ybWFsaXplZFBhdGgsXG5cdCAgICByZWdleDogY29tcGlsZVJvdXRlUmVnZXgobm9ybWFsaXplZFBhdGgsIHBhdGhUb1JlZ2V4cE9wdGlvbnMpLFxuXHQgICAgY29tcG9uZW50czogcm91dGUuY29tcG9uZW50cyB8fCB7IGRlZmF1bHQ6IHJvdXRlLmNvbXBvbmVudCB9LFxuXHQgICAgaW5zdGFuY2VzOiB7fSxcblx0ICAgIG5hbWU6IG5hbWUsXG5cdCAgICBwYXJlbnQ6IHBhcmVudCxcblx0ICAgIG1hdGNoQXM6IG1hdGNoQXMsXG5cdCAgICByZWRpcmVjdDogcm91dGUucmVkaXJlY3QsXG5cdCAgICBiZWZvcmVFbnRlcjogcm91dGUuYmVmb3JlRW50ZXIsXG5cdCAgICBtZXRhOiByb3V0ZS5tZXRhIHx8IHt9LFxuXHQgICAgcHJvcHM6IHJvdXRlLnByb3BzID09IG51bGxcblx0ICAgICAgPyB7fVxuXHQgICAgICA6IHJvdXRlLmNvbXBvbmVudHNcblx0ICAgICAgICA/IHJvdXRlLnByb3BzXG5cdCAgICAgICAgOiB7IGRlZmF1bHQ6IHJvdXRlLnByb3BzIH1cblx0ICB9O1xuXHRcblx0ICBpZiAocm91dGUuY2hpbGRyZW4pIHtcblx0ICAgIC8vIFdhcm4gaWYgcm91dGUgaXMgbmFtZWQsIGRvZXMgbm90IHJlZGlyZWN0IGFuZCBoYXMgYSBkZWZhdWx0IGNoaWxkIHJvdXRlLlxuXHQgICAgLy8gSWYgdXNlcnMgbmF2aWdhdGUgdG8gdGhpcyByb3V0ZSBieSBuYW1lLCB0aGUgZGVmYXVsdCBjaGlsZCB3aWxsXG5cdCAgICAvLyBub3QgYmUgcmVuZGVyZWQgKEdIIElzc3VlICM2MjkpXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAocm91dGUubmFtZSAmJiAhcm91dGUucmVkaXJlY3QgJiYgcm91dGUuY2hpbGRyZW4uc29tZShmdW5jdGlvbiAoY2hpbGQpIHsgcmV0dXJuIC9eXFwvPyQvLnRlc3QoY2hpbGQucGF0aCk7IH0pKSB7XG5cdCAgICAgICAgd2Fybihcblx0ICAgICAgICAgIGZhbHNlLFxuXHQgICAgICAgICAgXCJOYW1lZCBSb3V0ZSAnXCIgKyAocm91dGUubmFtZSkgKyBcIicgaGFzIGEgZGVmYXVsdCBjaGlsZCByb3V0ZS4gXCIgK1xuXHQgICAgICAgICAgXCJXaGVuIG5hdmlnYXRpbmcgdG8gdGhpcyBuYW1lZCByb3V0ZSAoOnRvPVxcXCJ7bmFtZTogJ1wiICsgKHJvdXRlLm5hbWUpICsgXCInXFxcIiksIFwiICtcblx0ICAgICAgICAgIFwidGhlIGRlZmF1bHQgY2hpbGQgcm91dGUgd2lsbCBub3QgYmUgcmVuZGVyZWQuIFJlbW92ZSB0aGUgbmFtZSBmcm9tIFwiICtcblx0ICAgICAgICAgIFwidGhpcyByb3V0ZSBhbmQgdXNlIHRoZSBuYW1lIG9mIHRoZSBkZWZhdWx0IGNoaWxkIHJvdXRlIGZvciBuYW1lZCBcIiArXG5cdCAgICAgICAgICBcImxpbmtzIGluc3RlYWQuXCJcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByb3V0ZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuXHQgICAgICB2YXIgY2hpbGRNYXRjaEFzID0gbWF0Y2hBc1xuXHQgICAgICAgID8gY2xlYW5QYXRoKChtYXRjaEFzICsgXCIvXCIgKyAoY2hpbGQucGF0aCkpKVxuXHQgICAgICAgIDogdW5kZWZpbmVkO1xuXHQgICAgICBhZGRSb3V0ZVJlY29yZChwYXRoTGlzdCwgcGF0aE1hcCwgbmFtZU1hcCwgY2hpbGQsIHJlY29yZCwgY2hpbGRNYXRjaEFzKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKHJvdXRlLmFsaWFzICE9PSB1bmRlZmluZWQpIHtcblx0ICAgIHZhciBhbGlhc2VzID0gQXJyYXkuaXNBcnJheShyb3V0ZS5hbGlhcylcblx0ICAgICAgPyByb3V0ZS5hbGlhc1xuXHQgICAgICA6IFtyb3V0ZS5hbGlhc107XG5cdFxuXHQgICAgYWxpYXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChhbGlhcykge1xuXHQgICAgICB2YXIgYWxpYXNSb3V0ZSA9IHtcblx0ICAgICAgICBwYXRoOiBhbGlhcyxcblx0ICAgICAgICBjaGlsZHJlbjogcm91dGUuY2hpbGRyZW5cblx0ICAgICAgfTtcblx0ICAgICAgYWRkUm91dGVSZWNvcmQoXG5cdCAgICAgICAgcGF0aExpc3QsXG5cdCAgICAgICAgcGF0aE1hcCxcblx0ICAgICAgICBuYW1lTWFwLFxuXHQgICAgICAgIGFsaWFzUm91dGUsXG5cdCAgICAgICAgcGFyZW50LFxuXHQgICAgICAgIHJlY29yZC5wYXRoIHx8ICcvJyAvLyBtYXRjaEFzXG5cdCAgICAgICk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGlmICghcGF0aE1hcFtyZWNvcmQucGF0aF0pIHtcblx0ICAgIHBhdGhMaXN0LnB1c2gocmVjb3JkLnBhdGgpO1xuXHQgICAgcGF0aE1hcFtyZWNvcmQucGF0aF0gPSByZWNvcmQ7XG5cdCAgfVxuXHRcblx0ICBpZiAobmFtZSkge1xuXHQgICAgaWYgKCFuYW1lTWFwW25hbWVdKSB7XG5cdCAgICAgIG5hbWVNYXBbbmFtZV0gPSByZWNvcmQ7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIW1hdGNoQXMpIHtcblx0ICAgICAgd2Fybihcblx0ICAgICAgICBmYWxzZSxcblx0ICAgICAgICBcIkR1cGxpY2F0ZSBuYW1lZCByb3V0ZXMgZGVmaW5pdGlvbjogXCIgK1xuXHQgICAgICAgIFwieyBuYW1lOiBcXFwiXCIgKyBuYW1lICsgXCJcXFwiLCBwYXRoOiBcXFwiXCIgKyAocmVjb3JkLnBhdGgpICsgXCJcXFwiIH1cIlxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVJvdXRlUmVnZXggKHBhdGgsIHBhdGhUb1JlZ2V4cE9wdGlvbnMpIHtcblx0ICB2YXIgcmVnZXggPSBwYXRoVG9SZWdleHBfMShwYXRoLCBbXSwgcGF0aFRvUmVnZXhwT3B0aW9ucyk7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgIHJlZ2V4LmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHdhcm4oIWtleXNba2V5Lm5hbWVdLCAoXCJEdXBsaWNhdGUgcGFyYW0ga2V5cyBpbiByb3V0ZSB3aXRoIHBhdGg6IFxcXCJcIiArIHBhdGggKyBcIlxcXCJcIikpO1xuXHQgICAgICBrZXlzW2tleS5uYW1lXSA9IHRydWU7XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlZ2V4XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZVBhdGggKHBhdGgsIHBhcmVudCwgc3RyaWN0KSB7XG5cdCAgaWYgKCFzdHJpY3QpIHsgcGF0aCA9IHBhdGgucmVwbGFjZSgvXFwvJC8sICcnKTsgfVxuXHQgIGlmIChwYXRoWzBdID09PSAnLycpIHsgcmV0dXJuIHBhdGggfVxuXHQgIGlmIChwYXJlbnQgPT0gbnVsbCkgeyByZXR1cm4gcGF0aCB9XG5cdCAgcmV0dXJuIGNsZWFuUGF0aCgoKHBhcmVudC5wYXRoKSArIFwiL1wiICsgcGF0aCkpXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZUxvY2F0aW9uIChcblx0ICByYXcsXG5cdCAgY3VycmVudCxcblx0ICBhcHBlbmQsXG5cdCAgcm91dGVyXG5cdCkge1xuXHQgIHZhciBuZXh0ID0gdHlwZW9mIHJhdyA9PT0gJ3N0cmluZycgPyB7IHBhdGg6IHJhdyB9IDogcmF3O1xuXHQgIC8vIG5hbWVkIHRhcmdldFxuXHQgIGlmIChuZXh0Lm5hbWUgfHwgbmV4dC5fbm9ybWFsaXplZCkge1xuXHQgICAgcmV0dXJuIG5leHRcblx0ICB9XG5cdFxuXHQgIC8vIHJlbGF0aXZlIHBhcmFtc1xuXHQgIGlmICghbmV4dC5wYXRoICYmIG5leHQucGFyYW1zICYmIGN1cnJlbnQpIHtcblx0ICAgIG5leHQgPSBhc3NpZ24oe30sIG5leHQpO1xuXHQgICAgbmV4dC5fbm9ybWFsaXplZCA9IHRydWU7XG5cdCAgICB2YXIgcGFyYW1zID0gYXNzaWduKGFzc2lnbih7fSwgY3VycmVudC5wYXJhbXMpLCBuZXh0LnBhcmFtcyk7XG5cdCAgICBpZiAoY3VycmVudC5uYW1lKSB7XG5cdCAgICAgIG5leHQubmFtZSA9IGN1cnJlbnQubmFtZTtcblx0ICAgICAgbmV4dC5wYXJhbXMgPSBwYXJhbXM7XG5cdCAgICB9IGVsc2UgaWYgKGN1cnJlbnQubWF0Y2hlZC5sZW5ndGgpIHtcblx0ICAgICAgdmFyIHJhd1BhdGggPSBjdXJyZW50Lm1hdGNoZWRbY3VycmVudC5tYXRjaGVkLmxlbmd0aCAtIDFdLnBhdGg7XG5cdCAgICAgIG5leHQucGF0aCA9IGZpbGxQYXJhbXMocmF3UGF0aCwgcGFyYW1zLCAoXCJwYXRoIFwiICsgKGN1cnJlbnQucGF0aCkpKTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuKGZhbHNlLCBcInJlbGF0aXZlIHBhcmFtcyBuYXZpZ2F0aW9uIHJlcXVpcmVzIGEgY3VycmVudCByb3V0ZS5cIik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV4dFxuXHQgIH1cblx0XG5cdCAgdmFyIHBhcnNlZFBhdGggPSBwYXJzZVBhdGgobmV4dC5wYXRoIHx8ICcnKTtcblx0ICB2YXIgYmFzZVBhdGggPSAoY3VycmVudCAmJiBjdXJyZW50LnBhdGgpIHx8ICcvJztcblx0ICB2YXIgcGF0aCA9IHBhcnNlZFBhdGgucGF0aFxuXHQgICAgPyByZXNvbHZlUGF0aChwYXJzZWRQYXRoLnBhdGgsIGJhc2VQYXRoLCBhcHBlbmQgfHwgbmV4dC5hcHBlbmQpXG5cdCAgICA6IGJhc2VQYXRoO1xuXHRcblx0ICB2YXIgcXVlcnkgPSByZXNvbHZlUXVlcnkoXG5cdCAgICBwYXJzZWRQYXRoLnF1ZXJ5LFxuXHQgICAgbmV4dC5xdWVyeSxcblx0ICAgIHJvdXRlciAmJiByb3V0ZXIub3B0aW9ucy5wYXJzZVF1ZXJ5XG5cdCAgKTtcblx0XG5cdCAgdmFyIGhhc2ggPSBuZXh0Lmhhc2ggfHwgcGFyc2VkUGF0aC5oYXNoO1xuXHQgIGlmIChoYXNoICYmIGhhc2guY2hhckF0KDApICE9PSAnIycpIHtcblx0ICAgIGhhc2ggPSBcIiNcIiArIGhhc2g7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4ge1xuXHQgICAgX25vcm1hbGl6ZWQ6IHRydWUsXG5cdCAgICBwYXRoOiBwYXRoLFxuXHQgICAgcXVlcnk6IHF1ZXJ5LFxuXHQgICAgaGFzaDogaGFzaFxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYXNzaWduIChhLCBiKSB7XG5cdCAgZm9yICh2YXIga2V5IGluIGIpIHtcblx0ICAgIGFba2V5XSA9IGJba2V5XTtcblx0ICB9XG5cdCAgcmV0dXJuIGFcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTWF0Y2hlciAoXG5cdCAgcm91dGVzLFxuXHQgIHJvdXRlclxuXHQpIHtcblx0ICB2YXIgcmVmID0gY3JlYXRlUm91dGVNYXAocm91dGVzKTtcblx0ICB2YXIgcGF0aExpc3QgPSByZWYucGF0aExpc3Q7XG5cdCAgdmFyIHBhdGhNYXAgPSByZWYucGF0aE1hcDtcblx0ICB2YXIgbmFtZU1hcCA9IHJlZi5uYW1lTWFwO1xuXHRcblx0ICBmdW5jdGlvbiBhZGRSb3V0ZXMgKHJvdXRlcykge1xuXHQgICAgY3JlYXRlUm91dGVNYXAocm91dGVzLCBwYXRoTGlzdCwgcGF0aE1hcCwgbmFtZU1hcCk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtYXRjaCAoXG5cdCAgICByYXcsXG5cdCAgICBjdXJyZW50Um91dGUsXG5cdCAgICByZWRpcmVjdGVkRnJvbVxuXHQgICkge1xuXHQgICAgdmFyIGxvY2F0aW9uID0gbm9ybWFsaXplTG9jYXRpb24ocmF3LCBjdXJyZW50Um91dGUsIGZhbHNlLCByb3V0ZXIpO1xuXHQgICAgdmFyIG5hbWUgPSBsb2NhdGlvbi5uYW1lO1xuXHRcblx0ICAgIGlmIChuYW1lKSB7XG5cdCAgICAgIHZhciByZWNvcmQgPSBuYW1lTWFwW25hbWVdO1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4ocmVjb3JkLCAoXCJSb3V0ZSB3aXRoIG5hbWUgJ1wiICsgbmFtZSArIFwiJyBkb2VzIG5vdCBleGlzdFwiKSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFyZWNvcmQpIHsgcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbikgfVxuXHQgICAgICB2YXIgcGFyYW1OYW1lcyA9IHJlY29yZC5yZWdleC5rZXlzXG5cdCAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAha2V5Lm9wdGlvbmFsOyB9KVxuXHQgICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5Lm5hbWU7IH0pO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbi5wYXJhbXMgIT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgbG9jYXRpb24ucGFyYW1zID0ge307XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChjdXJyZW50Um91dGUgJiYgdHlwZW9mIGN1cnJlbnRSb3V0ZS5wYXJhbXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgZm9yICh2YXIga2V5IGluIGN1cnJlbnRSb3V0ZS5wYXJhbXMpIHtcblx0ICAgICAgICAgIGlmICghKGtleSBpbiBsb2NhdGlvbi5wYXJhbXMpICYmIHBhcmFtTmFtZXMuaW5kZXhPZihrZXkpID4gLTEpIHtcblx0ICAgICAgICAgICAgbG9jYXRpb24ucGFyYW1zW2tleV0gPSBjdXJyZW50Um91dGUucGFyYW1zW2tleV07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocmVjb3JkKSB7XG5cdCAgICAgICAgbG9jYXRpb24ucGF0aCA9IGZpbGxQYXJhbXMocmVjb3JkLnBhdGgsIGxvY2F0aW9uLnBhcmFtcywgKFwibmFtZWQgcm91dGUgXFxcIlwiICsgbmFtZSArIFwiXFxcIlwiKSk7XG5cdCAgICAgICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShyZWNvcmQsIGxvY2F0aW9uLCByZWRpcmVjdGVkRnJvbSlcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5wYXRoKSB7XG5cdCAgICAgIGxvY2F0aW9uLnBhcmFtcyA9IHt9O1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhMaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHBhdGggPSBwYXRoTGlzdFtpXTtcblx0ICAgICAgICB2YXIgcmVjb3JkJDEgPSBwYXRoTWFwW3BhdGhdO1xuXHQgICAgICAgIGlmIChtYXRjaFJvdXRlKHJlY29yZCQxLnJlZ2V4LCBsb2NhdGlvbi5wYXRoLCBsb2NhdGlvbi5wYXJhbXMpKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKHJlY29yZCQxLCBsb2NhdGlvbiwgcmVkaXJlY3RlZEZyb20pXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBubyBtYXRjaFxuXHQgICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbilcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlZGlyZWN0IChcblx0ICAgIHJlY29yZCxcblx0ICAgIGxvY2F0aW9uXG5cdCAgKSB7XG5cdCAgICB2YXIgb3JpZ2luYWxSZWRpcmVjdCA9IHJlY29yZC5yZWRpcmVjdDtcblx0ICAgIHZhciByZWRpcmVjdCA9IHR5cGVvZiBvcmlnaW5hbFJlZGlyZWN0ID09PSAnZnVuY3Rpb24nXG5cdCAgICAgICAgPyBvcmlnaW5hbFJlZGlyZWN0KGNyZWF0ZVJvdXRlKHJlY29yZCwgbG9jYXRpb24sIG51bGwsIHJvdXRlcikpXG5cdCAgICAgICAgOiBvcmlnaW5hbFJlZGlyZWN0O1xuXHRcblx0ICAgIGlmICh0eXBlb2YgcmVkaXJlY3QgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHJlZGlyZWN0ID0geyBwYXRoOiByZWRpcmVjdCB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghcmVkaXJlY3QgfHwgdHlwZW9mIHJlZGlyZWN0ICE9PSAnb2JqZWN0Jykge1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oXG5cdCAgICAgICAgICBmYWxzZSwgKFwiaW52YWxpZCByZWRpcmVjdCBvcHRpb246IFwiICsgKEpTT04uc3RyaW5naWZ5KHJlZGlyZWN0KSkpXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsIGxvY2F0aW9uKVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZSA9IHJlZGlyZWN0O1xuXHQgICAgdmFyIG5hbWUgPSByZS5uYW1lO1xuXHQgICAgdmFyIHBhdGggPSByZS5wYXRoO1xuXHQgICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24ucXVlcnk7XG5cdCAgICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cdCAgICB2YXIgcGFyYW1zID0gbG9jYXRpb24ucGFyYW1zO1xuXHQgICAgcXVlcnkgPSByZS5oYXNPd25Qcm9wZXJ0eSgncXVlcnknKSA/IHJlLnF1ZXJ5IDogcXVlcnk7XG5cdCAgICBoYXNoID0gcmUuaGFzT3duUHJvcGVydHkoJ2hhc2gnKSA/IHJlLmhhc2ggOiBoYXNoO1xuXHQgICAgcGFyYW1zID0gcmUuaGFzT3duUHJvcGVydHkoJ3BhcmFtcycpID8gcmUucGFyYW1zIDogcGFyYW1zO1xuXHRcblx0ICAgIGlmIChuYW1lKSB7XG5cdCAgICAgIC8vIHJlc29sdmVkIG5hbWVkIGRpcmVjdFxuXHQgICAgICB2YXIgdGFyZ2V0UmVjb3JkID0gbmFtZU1hcFtuYW1lXTtcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBhc3NlcnQodGFyZ2V0UmVjb3JkLCAoXCJyZWRpcmVjdCBmYWlsZWQ6IG5hbWVkIHJvdXRlIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgbm90IGZvdW5kLlwiKSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1hdGNoKHtcblx0ICAgICAgICBfbm9ybWFsaXplZDogdHJ1ZSxcblx0ICAgICAgICBuYW1lOiBuYW1lLFxuXHQgICAgICAgIHF1ZXJ5OiBxdWVyeSxcblx0ICAgICAgICBoYXNoOiBoYXNoLFxuXHQgICAgICAgIHBhcmFtczogcGFyYW1zXG5cdCAgICAgIH0sIHVuZGVmaW5lZCwgbG9jYXRpb24pXG5cdCAgICB9IGVsc2UgaWYgKHBhdGgpIHtcblx0ICAgICAgLy8gMS4gcmVzb2x2ZSByZWxhdGl2ZSByZWRpcmVjdFxuXHQgICAgICB2YXIgcmF3UGF0aCA9IHJlc29sdmVSZWNvcmRQYXRoKHBhdGgsIHJlY29yZCk7XG5cdCAgICAgIC8vIDIuIHJlc29sdmUgcGFyYW1zXG5cdCAgICAgIHZhciByZXNvbHZlZFBhdGggPSBmaWxsUGFyYW1zKHJhd1BhdGgsIHBhcmFtcywgKFwicmVkaXJlY3Qgcm91dGUgd2l0aCBwYXRoIFxcXCJcIiArIHJhd1BhdGggKyBcIlxcXCJcIikpO1xuXHQgICAgICAvLyAzLiByZW1hdGNoIHdpdGggZXhpc3RpbmcgcXVlcnkgYW5kIGhhc2hcblx0ICAgICAgcmV0dXJuIG1hdGNoKHtcblx0ICAgICAgICBfbm9ybWFsaXplZDogdHJ1ZSxcblx0ICAgICAgICBwYXRoOiByZXNvbHZlZFBhdGgsXG5cdCAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuXHQgICAgICAgIGhhc2g6IGhhc2hcblx0ICAgICAgfSwgdW5kZWZpbmVkLCBsb2NhdGlvbilcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybihmYWxzZSwgKFwiaW52YWxpZCByZWRpcmVjdCBvcHRpb246IFwiICsgKEpTT04uc3RyaW5naWZ5KHJlZGlyZWN0KSkpKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsIGxvY2F0aW9uKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYWxpYXMgKFxuXHQgICAgcmVjb3JkLFxuXHQgICAgbG9jYXRpb24sXG5cdCAgICBtYXRjaEFzXG5cdCAgKSB7XG5cdCAgICB2YXIgYWxpYXNlZFBhdGggPSBmaWxsUGFyYW1zKG1hdGNoQXMsIGxvY2F0aW9uLnBhcmFtcywgKFwiYWxpYXNlZCByb3V0ZSB3aXRoIHBhdGggXFxcIlwiICsgbWF0Y2hBcyArIFwiXFxcIlwiKSk7XG5cdCAgICB2YXIgYWxpYXNlZE1hdGNoID0gbWF0Y2goe1xuXHQgICAgICBfbm9ybWFsaXplZDogdHJ1ZSxcblx0ICAgICAgcGF0aDogYWxpYXNlZFBhdGhcblx0ICAgIH0pO1xuXHQgICAgaWYgKGFsaWFzZWRNYXRjaCkge1xuXHQgICAgICB2YXIgbWF0Y2hlZCA9IGFsaWFzZWRNYXRjaC5tYXRjaGVkO1xuXHQgICAgICB2YXIgYWxpYXNlZFJlY29yZCA9IG1hdGNoZWRbbWF0Y2hlZC5sZW5ndGggLSAxXTtcblx0ICAgICAgbG9jYXRpb24ucGFyYW1zID0gYWxpYXNlZE1hdGNoLnBhcmFtcztcblx0ICAgICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShhbGlhc2VkUmVjb3JkLCBsb2NhdGlvbilcblx0ICAgIH1cblx0ICAgIHJldHVybiBfY3JlYXRlUm91dGUobnVsbCwgbG9jYXRpb24pXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBfY3JlYXRlUm91dGUgKFxuXHQgICAgcmVjb3JkLFxuXHQgICAgbG9jYXRpb24sXG5cdCAgICByZWRpcmVjdGVkRnJvbVxuXHQgICkge1xuXHQgICAgaWYgKHJlY29yZCAmJiByZWNvcmQucmVkaXJlY3QpIHtcblx0ICAgICAgcmV0dXJuIHJlZGlyZWN0KHJlY29yZCwgcmVkaXJlY3RlZEZyb20gfHwgbG9jYXRpb24pXG5cdCAgICB9XG5cdCAgICBpZiAocmVjb3JkICYmIHJlY29yZC5tYXRjaEFzKSB7XG5cdCAgICAgIHJldHVybiBhbGlhcyhyZWNvcmQsIGxvY2F0aW9uLCByZWNvcmQubWF0Y2hBcylcblx0ICAgIH1cblx0ICAgIHJldHVybiBjcmVhdGVSb3V0ZShyZWNvcmQsIGxvY2F0aW9uLCByZWRpcmVjdGVkRnJvbSwgcm91dGVyKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIG1hdGNoOiBtYXRjaCxcblx0ICAgIGFkZFJvdXRlczogYWRkUm91dGVzXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXRjaFJvdXRlIChcblx0ICByZWdleCxcblx0ICBwYXRoLFxuXHQgIHBhcmFtc1xuXHQpIHtcblx0ICB2YXIgbSA9IHBhdGgubWF0Y2gocmVnZXgpO1xuXHRcblx0ICBpZiAoIW0pIHtcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH0gZWxzZSBpZiAoIXBhcmFtcykge1xuXHQgICAgcmV0dXJuIHRydWVcblx0ICB9XG5cdFxuXHQgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBtLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICB2YXIga2V5ID0gcmVnZXgua2V5c1tpIC0gMV07XG5cdCAgICB2YXIgdmFsID0gdHlwZW9mIG1baV0gPT09ICdzdHJpbmcnID8gZGVjb2RlVVJJQ29tcG9uZW50KG1baV0pIDogbVtpXTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgcGFyYW1zW2tleS5uYW1lXSA9IHZhbDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB0cnVlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVSZWNvcmRQYXRoIChwYXRoLCByZWNvcmQpIHtcblx0ICByZXR1cm4gcmVzb2x2ZVBhdGgocGF0aCwgcmVjb3JkLnBhcmVudCA/IHJlY29yZC5wYXJlbnQucGF0aCA6ICcvJywgdHJ1ZSlcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRcblx0dmFyIHBvc2l0aW9uU3RvcmUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0ZnVuY3Rpb24gc2V0dXBTY3JvbGwgKCkge1xuXHQgIC8vIEZpeCBmb3IgIzE1ODUgZm9yIEZpcmVmb3hcblx0ICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBrZXk6IGdldFN0YXRlS2V5KCkgfSwgJycpO1xuXHQgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICBzYXZlU2Nyb2xsUG9zaXRpb24oKTtcblx0ICAgIGlmIChlLnN0YXRlICYmIGUuc3RhdGUua2V5KSB7XG5cdCAgICAgIHNldFN0YXRlS2V5KGUuc3RhdGUua2V5KTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlU2Nyb2xsIChcblx0ICByb3V0ZXIsXG5cdCAgdG8sXG5cdCAgZnJvbSxcblx0ICBpc1BvcFxuXHQpIHtcblx0ICBpZiAoIXJvdXRlci5hcHApIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIGJlaGF2aW9yID0gcm91dGVyLm9wdGlvbnMuc2Nyb2xsQmVoYXZpb3I7XG5cdCAgaWYgKCFiZWhhdmlvcikge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgYXNzZXJ0KHR5cGVvZiBiZWhhdmlvciA9PT0gJ2Z1bmN0aW9uJywgXCJzY3JvbGxCZWhhdmlvciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHRcblx0ICAvLyB3YWl0IHVudGlsIHJlLXJlbmRlciBmaW5pc2hlcyBiZWZvcmUgc2Nyb2xsaW5nXG5cdCAgcm91dGVyLmFwcC4kbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTtcblx0ICAgIHZhciBzaG91bGRTY3JvbGwgPSBiZWhhdmlvcih0bywgZnJvbSwgaXNQb3AgPyBwb3NpdGlvbiA6IG51bGwpO1xuXHRcblx0ICAgIGlmICghc2hvdWxkU2Nyb2xsKSB7XG5cdCAgICAgIHJldHVyblxuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0eXBlb2Ygc2hvdWxkU2Nyb2xsLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgc2hvdWxkU2Nyb2xsLnRoZW4oZnVuY3Rpb24gKHNob3VsZFNjcm9sbCkge1xuXHQgICAgICAgIHNjcm9sbFRvUG9zaXRpb24oKHNob3VsZFNjcm9sbCksIHBvc2l0aW9uKTtcblx0ICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICBhc3NlcnQoZmFsc2UsIGVyci50b1N0cmluZygpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc2Nyb2xsVG9Qb3NpdGlvbihzaG91bGRTY3JvbGwsIHBvc2l0aW9uKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2F2ZVNjcm9sbFBvc2l0aW9uICgpIHtcblx0ICB2YXIga2V5ID0gZ2V0U3RhdGVLZXkoKTtcblx0ICBpZiAoa2V5KSB7XG5cdCAgICBwb3NpdGlvblN0b3JlW2tleV0gPSB7XG5cdCAgICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCxcblx0ICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0U2Nyb2xsUG9zaXRpb24gKCkge1xuXHQgIHZhciBrZXkgPSBnZXRTdGF0ZUtleSgpO1xuXHQgIGlmIChrZXkpIHtcblx0ICAgIHJldHVybiBwb3NpdGlvblN0b3JlW2tleV1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEVsZW1lbnRQb3NpdGlvbiAoZWwsIG9mZnNldCkge1xuXHQgIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0ICB2YXIgZG9jUmVjdCA9IGRvY0VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgIHZhciBlbFJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICByZXR1cm4ge1xuXHQgICAgeDogZWxSZWN0LmxlZnQgLSBkb2NSZWN0LmxlZnQgLSBvZmZzZXQueCxcblx0ICAgIHk6IGVsUmVjdC50b3AgLSBkb2NSZWN0LnRvcCAtIG9mZnNldC55XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1ZhbGlkUG9zaXRpb24gKG9iaikge1xuXHQgIHJldHVybiBpc051bWJlcihvYmoueCkgfHwgaXNOdW1iZXIob2JqLnkpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZVBvc2l0aW9uIChvYmopIHtcblx0ICByZXR1cm4ge1xuXHQgICAgeDogaXNOdW1iZXIob2JqLngpID8gb2JqLnggOiB3aW5kb3cucGFnZVhPZmZzZXQsXG5cdCAgICB5OiBpc051bWJlcihvYmoueSkgPyBvYmoueSA6IHdpbmRvdy5wYWdlWU9mZnNldFxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplT2Zmc2V0IChvYmopIHtcblx0ICByZXR1cm4ge1xuXHQgICAgeDogaXNOdW1iZXIob2JqLngpID8gb2JqLnggOiAwLFxuXHQgICAgeTogaXNOdW1iZXIob2JqLnkpID8gb2JqLnkgOiAwXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlciAodikge1xuXHQgIHJldHVybiB0eXBlb2YgdiA9PT0gJ251bWJlcidcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2Nyb2xsVG9Qb3NpdGlvbiAoc2hvdWxkU2Nyb2xsLCBwb3NpdGlvbikge1xuXHQgIHZhciBpc09iamVjdCA9IHR5cGVvZiBzaG91bGRTY3JvbGwgPT09ICdvYmplY3QnO1xuXHQgIGlmIChpc09iamVjdCAmJiB0eXBlb2Ygc2hvdWxkU2Nyb2xsLnNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuXHQgICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzaG91bGRTY3JvbGwuc2VsZWN0b3IpO1xuXHQgICAgaWYgKGVsKSB7XG5cdCAgICAgIHZhciBvZmZzZXQgPSBzaG91bGRTY3JvbGwub2Zmc2V0ICYmIHR5cGVvZiBzaG91bGRTY3JvbGwub2Zmc2V0ID09PSAnb2JqZWN0JyA/IHNob3VsZFNjcm9sbC5vZmZzZXQgOiB7fTtcblx0ICAgICAgb2Zmc2V0ID0gbm9ybWFsaXplT2Zmc2V0KG9mZnNldCk7XG5cdCAgICAgIHBvc2l0aW9uID0gZ2V0RWxlbWVudFBvc2l0aW9uKGVsLCBvZmZzZXQpO1xuXHQgICAgfSBlbHNlIGlmIChpc1ZhbGlkUG9zaXRpb24oc2hvdWxkU2Nyb2xsKSkge1xuXHQgICAgICBwb3NpdGlvbiA9IG5vcm1hbGl6ZVBvc2l0aW9uKHNob3VsZFNjcm9sbCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdCAmJiBpc1ZhbGlkUG9zaXRpb24oc2hvdWxkU2Nyb2xsKSkge1xuXHQgICAgcG9zaXRpb24gPSBub3JtYWxpemVQb3NpdGlvbihzaG91bGRTY3JvbGwpO1xuXHQgIH1cblx0XG5cdCAgaWYgKHBvc2l0aW9uKSB7XG5cdCAgICB3aW5kb3cuc2Nyb2xsVG8ocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdHZhciBzdXBwb3J0c1B1c2hTdGF0ZSA9IGluQnJvd3NlciAmJiAoZnVuY3Rpb24gKCkge1xuXHQgIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXHRcblx0ICBpZiAoXG5cdCAgICAodWEuaW5kZXhPZignQW5kcm9pZCAyLicpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdBbmRyb2lkIDQuMCcpICE9PSAtMSkgJiZcblx0ICAgIHVhLmluZGV4T2YoJ01vYmlsZSBTYWZhcmknKSAhPT0gLTEgJiZcblx0ICAgIHVhLmluZGV4T2YoJ0Nocm9tZScpID09PSAtMSAmJlxuXHQgICAgdWEuaW5kZXhPZignV2luZG93cyBQaG9uZScpID09PSAtMVxuXHQgICkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnlcblx0fSkoKTtcblx0XG5cdC8vIHVzZSBVc2VyIFRpbWluZyBhcGkgKGlmIHByZXNlbnQpIGZvciBtb3JlIGFjY3VyYXRlIGtleSBwcmVjaXNpb25cblx0dmFyIFRpbWUgPSBpbkJyb3dzZXIgJiYgd2luZG93LnBlcmZvcm1hbmNlICYmIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3dcblx0ICA/IHdpbmRvdy5wZXJmb3JtYW5jZVxuXHQgIDogRGF0ZTtcblx0XG5cdHZhciBfa2V5ID0gZ2VuS2V5KCk7XG5cdFxuXHRmdW5jdGlvbiBnZW5LZXkgKCkge1xuXHQgIHJldHVybiBUaW1lLm5vdygpLnRvRml4ZWQoMylcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0U3RhdGVLZXkgKCkge1xuXHQgIHJldHVybiBfa2V5XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFN0YXRlS2V5IChrZXkpIHtcblx0ICBfa2V5ID0ga2V5O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwdXNoU3RhdGUgKHVybCwgcmVwbGFjZSkge1xuXHQgIHNhdmVTY3JvbGxQb3NpdGlvbigpO1xuXHQgIC8vIHRyeS4uLmNhdGNoIHRoZSBwdXNoU3RhdGUgY2FsbCB0byBnZXQgYXJvdW5kIFNhZmFyaVxuXHQgIC8vIERPTSBFeGNlcHRpb24gMTggd2hlcmUgaXQgbGltaXRzIHRvIDEwMCBwdXNoU3RhdGUgY2FsbHNcblx0ICB2YXIgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuXHQgIHRyeSB7XG5cdCAgICBpZiAocmVwbGFjZSkge1xuXHQgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7IGtleTogX2tleSB9LCAnJywgdXJsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIF9rZXkgPSBnZW5LZXkoKTtcblx0ICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoeyBrZXk6IF9rZXkgfSwgJycsIHVybCk7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgd2luZG93LmxvY2F0aW9uW3JlcGxhY2UgPyAncmVwbGFjZScgOiAnYXNzaWduJ10odXJsKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZSAodXJsKSB7XG5cdCAgcHVzaFN0YXRlKHVybCwgdHJ1ZSk7XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0ZnVuY3Rpb24gcnVuUXVldWUgKHF1ZXVlLCBmbiwgY2IpIHtcblx0ICB2YXIgc3RlcCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHQgICAgaWYgKGluZGV4ID49IHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKHF1ZXVlW2luZGV4XSkge1xuXHQgICAgICAgIGZuKHF1ZXVlW2luZGV4XSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgc3RlcChpbmRleCArIDEpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0ZXAoaW5kZXggKyAxKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdCAgc3RlcCgwKTtcblx0fVxuXHRcblx0LyogICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnRzIChtYXRjaGVkKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkge1xuXHQgICAgdmFyIGhhc0FzeW5jID0gZmFsc2U7XG5cdCAgICB2YXIgcGVuZGluZyA9IDA7XG5cdCAgICB2YXIgZXJyb3IgPSBudWxsO1xuXHRcblx0ICAgIGZsYXRNYXBDb21wb25lbnRzKG1hdGNoZWQsIGZ1bmN0aW9uIChkZWYsIF8sIG1hdGNoLCBrZXkpIHtcblx0ICAgICAgLy8gaWYgaXQncyBhIGZ1bmN0aW9uIGFuZCBkb2Vzbid0IGhhdmUgY2lkIGF0dGFjaGVkLFxuXHQgICAgICAvLyBhc3N1bWUgaXQncyBhbiBhc3luYyBjb21wb25lbnQgcmVzb2x2ZSBmdW5jdGlvbi5cblx0ICAgICAgLy8gd2UgYXJlIG5vdCB1c2luZyBWdWUncyBkZWZhdWx0IGFzeW5jIHJlc29sdmluZyBtZWNoYW5pc20gYmVjYXVzZVxuXHQgICAgICAvLyB3ZSB3YW50IHRvIGhhbHQgdGhlIG5hdmlnYXRpb24gdW50aWwgdGhlIGluY29taW5nIGNvbXBvbmVudCBoYXMgYmVlblxuXHQgICAgICAvLyByZXNvbHZlZC5cblx0ICAgICAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgZGVmLmNpZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgaGFzQXN5bmMgPSB0cnVlO1xuXHQgICAgICAgIHBlbmRpbmcrKztcblx0XG5cdCAgICAgICAgdmFyIHJlc29sdmUgPSBvbmNlKGZ1bmN0aW9uIChyZXNvbHZlZERlZikge1xuXHQgICAgICAgICAgaWYgKGlzRVNNb2R1bGUocmVzb2x2ZWREZWYpKSB7XG5cdCAgICAgICAgICAgIHJlc29sdmVkRGVmID0gcmVzb2x2ZWREZWYuZGVmYXVsdDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIHNhdmUgcmVzb2x2ZWQgb24gYXN5bmMgZmFjdG9yeSBpbiBjYXNlIGl0J3MgdXNlZCBlbHNld2hlcmVcblx0ICAgICAgICAgIGRlZi5yZXNvbHZlZCA9IHR5cGVvZiByZXNvbHZlZERlZiA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgICAgICAgICA/IHJlc29sdmVkRGVmXG5cdCAgICAgICAgICAgIDogX1Z1ZS5leHRlbmQocmVzb2x2ZWREZWYpO1xuXHQgICAgICAgICAgbWF0Y2guY29tcG9uZW50c1trZXldID0gcmVzb2x2ZWREZWY7XG5cdCAgICAgICAgICBwZW5kaW5nLS07XG5cdCAgICAgICAgICBpZiAocGVuZGluZyA8PSAwKSB7XG5cdCAgICAgICAgICAgIG5leHQoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdmFyIHJlamVjdCA9IG9uY2UoZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgICAgdmFyIG1zZyA9IFwiRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50IFwiICsga2V5ICsgXCI6IFwiICsgcmVhc29uO1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGZhbHNlLCBtc2cpO1xuXHQgICAgICAgICAgaWYgKCFlcnJvcikge1xuXHQgICAgICAgICAgICBlcnJvciA9IGlzRXJyb3IocmVhc29uKVxuXHQgICAgICAgICAgICAgID8gcmVhc29uXG5cdCAgICAgICAgICAgICAgOiBuZXcgRXJyb3IobXNnKTtcblx0ICAgICAgICAgICAgbmV4dChlcnJvcik7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHZhciByZXM7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJlcyA9IGRlZihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIHJlamVjdChlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlcykge1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiByZXMudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICByZXMudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgLy8gbmV3IHN5bnRheCBpbiBWdWUgMi4zXG5cdCAgICAgICAgICAgIHZhciBjb21wID0gcmVzLmNvbXBvbmVudDtcblx0ICAgICAgICAgICAgaWYgKGNvbXAgJiYgdHlwZW9mIGNvbXAudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgIGNvbXAudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBpZiAoIWhhc0FzeW5jKSB7IG5leHQoKTsgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZmxhdE1hcENvbXBvbmVudHMgKFxuXHQgIG1hdGNoZWQsXG5cdCAgZm5cblx0KSB7XG5cdCAgcmV0dXJuIGZsYXR0ZW4obWF0Y2hlZC5tYXAoZnVuY3Rpb24gKG0pIHtcblx0ICAgIHJldHVybiBPYmplY3Qua2V5cyhtLmNvbXBvbmVudHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBmbihcblx0ICAgICAgbS5jb21wb25lbnRzW2tleV0sXG5cdCAgICAgIG0uaW5zdGFuY2VzW2tleV0sXG5cdCAgICAgIG0sIGtleVxuXHQgICAgKTsgfSlcblx0ICB9KSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gZmxhdHRlbiAoYXJyKSB7XG5cdCAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFycilcblx0fVxuXHRcblx0dmFyIGhhc1N5bWJvbCA9XG5cdCAgdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHQgIHR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWcgPT09ICdzeW1ib2wnO1xuXHRcblx0ZnVuY3Rpb24gaXNFU01vZHVsZSAob2JqKSB7XG5cdCAgcmV0dXJuIG9iai5fX2VzTW9kdWxlIHx8IChoYXNTeW1ib2wgJiYgb2JqW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnKVxuXHR9XG5cdFxuXHQvLyBpbiBXZWJwYWNrIDIsIHJlcXVpcmUuZW5zdXJlIG5vdyBhbHNvIHJldHVybnMgYSBQcm9taXNlXG5cdC8vIHNvIHRoZSByZXNvbHZlL3JlamVjdCBmdW5jdGlvbnMgbWF5IGdldCBjYWxsZWQgYW4gZXh0cmEgdGltZVxuXHQvLyBpZiB0aGUgdXNlciB1c2VzIGFuIGFycm93IGZ1bmN0aW9uIHNob3J0aGFuZCB0aGF0IGhhcHBlbnMgdG9cblx0Ly8gcmV0dXJuIHRoYXQgUHJvbWlzZS5cblx0ZnVuY3Rpb24gb25jZSAoZm4pIHtcblx0ICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXHRcblx0ICAgIGlmIChjYWxsZWQpIHsgcmV0dXJuIH1cblx0ICAgIGNhbGxlZCA9IHRydWU7XG5cdCAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJncylcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0dmFyIEhpc3RvcnkgPSBmdW5jdGlvbiBIaXN0b3J5IChyb3V0ZXIsIGJhc2UpIHtcblx0ICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcblx0ICB0aGlzLmJhc2UgPSBub3JtYWxpemVCYXNlKGJhc2UpO1xuXHQgIC8vIHN0YXJ0IHdpdGggYSByb3V0ZSBvYmplY3QgdGhhdCBzdGFuZHMgZm9yIFwibm93aGVyZVwiXG5cdCAgdGhpcy5jdXJyZW50ID0gU1RBUlQ7XG5cdCAgdGhpcy5wZW5kaW5nID0gbnVsbDtcblx0ICB0aGlzLnJlYWR5ID0gZmFsc2U7XG5cdCAgdGhpcy5yZWFkeUNicyA9IFtdO1xuXHQgIHRoaXMucmVhZHlFcnJvckNicyA9IFtdO1xuXHQgIHRoaXMuZXJyb3JDYnMgPSBbXTtcblx0fTtcblx0XG5cdEhpc3RvcnkucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbiAoY2IpIHtcblx0ICB0aGlzLmNiID0gY2I7XG5cdH07XG5cdFxuXHRIaXN0b3J5LnByb3RvdHlwZS5vblJlYWR5ID0gZnVuY3Rpb24gb25SZWFkeSAoY2IsIGVycm9yQ2IpIHtcblx0ICBpZiAodGhpcy5yZWFkeSkge1xuXHQgICAgY2IoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5yZWFkeUNicy5wdXNoKGNiKTtcblx0ICAgIGlmIChlcnJvckNiKSB7XG5cdCAgICAgIHRoaXMucmVhZHlFcnJvckNicy5wdXNoKGVycm9yQ2IpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdEhpc3RvcnkucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yIChlcnJvckNiKSB7XG5cdCAgdGhpcy5lcnJvckNicy5wdXNoKGVycm9yQ2IpO1xuXHR9O1xuXHRcblx0SGlzdG9yeS5wcm90b3R5cGUudHJhbnNpdGlvblRvID0gZnVuY3Rpb24gdHJhbnNpdGlvblRvIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIHZhciByb3V0ZSA9IHRoaXMucm91dGVyLm1hdGNoKGxvY2F0aW9uLCB0aGlzLmN1cnJlbnQpO1xuXHQgIHRoaXMuY29uZmlybVRyYW5zaXRpb24ocm91dGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMkMS51cGRhdGVSb3V0ZShyb3V0ZSk7XG5cdCAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuXHQgICAgdGhpcyQxLmVuc3VyZVVSTCgpO1xuXHRcblx0ICAgIC8vIGZpcmUgcmVhZHkgY2JzIG9uY2Vcblx0ICAgIGlmICghdGhpcyQxLnJlYWR5KSB7XG5cdCAgICAgIHRoaXMkMS5yZWFkeSA9IHRydWU7XG5cdCAgICAgIHRoaXMkMS5yZWFkeUNicy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyBjYihyb3V0ZSk7IH0pO1xuXHQgICAgfVxuXHQgIH0sIGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgIGlmIChvbkFib3J0KSB7XG5cdCAgICAgIG9uQWJvcnQoZXJyKTtcblx0ICAgIH1cblx0ICAgIGlmIChlcnIgJiYgIXRoaXMkMS5yZWFkeSkge1xuXHQgICAgICB0aGlzJDEucmVhZHkgPSB0cnVlO1xuXHQgICAgICB0aGlzJDEucmVhZHlFcnJvckNicy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyBjYihlcnIpOyB9KTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblx0XG5cdEhpc3RvcnkucHJvdG90eXBlLmNvbmZpcm1UcmFuc2l0aW9uID0gZnVuY3Rpb24gY29uZmlybVRyYW5zaXRpb24gKHJvdXRlLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgdmFyIGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG5cdCAgdmFyIGFib3J0ID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgaWYgKGlzRXJyb3IoZXJyKSkge1xuXHQgICAgICBpZiAodGhpcyQxLmVycm9yQ2JzLmxlbmd0aCkge1xuXHQgICAgICAgIHRoaXMkMS5lcnJvckNicy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyBjYihlcnIpOyB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3YXJuKGZhbHNlLCAndW5jYXVnaHQgZXJyb3IgZHVyaW5nIHJvdXRlIG5hdmlnYXRpb246Jyk7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBvbkFib3J0ICYmIG9uQWJvcnQoZXJyKTtcblx0ICB9O1xuXHQgIGlmIChcblx0ICAgIGlzU2FtZVJvdXRlKHJvdXRlLCBjdXJyZW50KSAmJlxuXHQgICAgLy8gaW4gdGhlIGNhc2UgdGhlIHJvdXRlIG1hcCBoYXMgYmVlbiBkeW5hbWljYWxseSBhcHBlbmRlZCB0b1xuXHQgICAgcm91dGUubWF0Y2hlZC5sZW5ndGggPT09IGN1cnJlbnQubWF0Y2hlZC5sZW5ndGhcblx0ICApIHtcblx0ICAgIHRoaXMuZW5zdXJlVVJMKCk7XG5cdCAgICByZXR1cm4gYWJvcnQoKVxuXHQgIH1cblx0XG5cdCAgdmFyIHJlZiA9IHJlc29sdmVRdWV1ZSh0aGlzLmN1cnJlbnQubWF0Y2hlZCwgcm91dGUubWF0Y2hlZCk7XG5cdCAgICB2YXIgdXBkYXRlZCA9IHJlZi51cGRhdGVkO1xuXHQgICAgdmFyIGRlYWN0aXZhdGVkID0gcmVmLmRlYWN0aXZhdGVkO1xuXHQgICAgdmFyIGFjdGl2YXRlZCA9IHJlZi5hY3RpdmF0ZWQ7XG5cdFxuXHQgIHZhciBxdWV1ZSA9IFtdLmNvbmNhdChcblx0ICAgIC8vIGluLWNvbXBvbmVudCBsZWF2ZSBndWFyZHNcblx0ICAgIGV4dHJhY3RMZWF2ZUd1YXJkcyhkZWFjdGl2YXRlZCksXG5cdCAgICAvLyBnbG9iYWwgYmVmb3JlIGhvb2tzXG5cdCAgICB0aGlzLnJvdXRlci5iZWZvcmVIb29rcyxcblx0ICAgIC8vIGluLWNvbXBvbmVudCB1cGRhdGUgaG9va3Ncblx0ICAgIGV4dHJhY3RVcGRhdGVIb29rcyh1cGRhdGVkKSxcblx0ICAgIC8vIGluLWNvbmZpZyBlbnRlciBndWFyZHNcblx0ICAgIGFjdGl2YXRlZC5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uYmVmb3JlRW50ZXI7IH0pLFxuXHQgICAgLy8gYXN5bmMgY29tcG9uZW50c1xuXHQgICAgcmVzb2x2ZUFzeW5jQ29tcG9uZW50cyhhY3RpdmF0ZWQpXG5cdCAgKTtcblx0XG5cdCAgdGhpcy5wZW5kaW5nID0gcm91dGU7XG5cdCAgdmFyIGl0ZXJhdG9yID0gZnVuY3Rpb24gKGhvb2ssIG5leHQpIHtcblx0ICAgIGlmICh0aGlzJDEucGVuZGluZyAhPT0gcm91dGUpIHtcblx0ICAgICAgcmV0dXJuIGFib3J0KClcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgIGhvb2socm91dGUsIGN1cnJlbnQsIGZ1bmN0aW9uICh0bykge1xuXHQgICAgICAgIGlmICh0byA9PT0gZmFsc2UgfHwgaXNFcnJvcih0bykpIHtcblx0ICAgICAgICAgIC8vIG5leHQoZmFsc2UpIC0+IGFib3J0IG5hdmlnYXRpb24sIGVuc3VyZSBjdXJyZW50IFVSTFxuXHQgICAgICAgICAgdGhpcyQxLmVuc3VyZVVSTCh0cnVlKTtcblx0ICAgICAgICAgIGFib3J0KHRvKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKFxuXHQgICAgICAgICAgdHlwZW9mIHRvID09PSAnc3RyaW5nJyB8fFxuXHQgICAgICAgICAgKHR5cGVvZiB0byA9PT0gJ29iamVjdCcgJiYgKFxuXHQgICAgICAgICAgICB0eXBlb2YgdG8ucGF0aCA9PT0gJ3N0cmluZycgfHxcblx0ICAgICAgICAgICAgdHlwZW9mIHRvLm5hbWUgPT09ICdzdHJpbmcnXG5cdCAgICAgICAgICApKVxuXHQgICAgICAgICkge1xuXHQgICAgICAgICAgLy8gbmV4dCgnLycpIG9yIG5leHQoeyBwYXRoOiAnLycgfSkgLT4gcmVkaXJlY3Rcblx0ICAgICAgICAgIGFib3J0KCk7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIHRvID09PSAnb2JqZWN0JyAmJiB0by5yZXBsYWNlKSB7XG5cdCAgICAgICAgICAgIHRoaXMkMS5yZXBsYWNlKHRvKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMkMS5wdXNoKHRvKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gY29uZmlybSB0cmFuc2l0aW9uIGFuZCBwYXNzIG9uIHRoZSB2YWx1ZVxuXHQgICAgICAgICAgbmV4dCh0byk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgYWJvcnQoZSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgcnVuUXVldWUocXVldWUsIGl0ZXJhdG9yLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgcG9zdEVudGVyQ2JzID0gW107XG5cdCAgICB2YXIgaXNWYWxpZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMkMS5jdXJyZW50ID09PSByb3V0ZTsgfTtcblx0ICAgIC8vIHdhaXQgdW50aWwgYXN5bmMgY29tcG9uZW50cyBhcmUgcmVzb2x2ZWQgYmVmb3JlXG5cdCAgICAvLyBleHRyYWN0aW5nIGluLWNvbXBvbmVudCBlbnRlciBndWFyZHNcblx0ICAgIHZhciBlbnRlckd1YXJkcyA9IGV4dHJhY3RFbnRlckd1YXJkcyhhY3RpdmF0ZWQsIHBvc3RFbnRlckNicywgaXNWYWxpZCk7XG5cdCAgICB2YXIgcXVldWUgPSBlbnRlckd1YXJkcy5jb25jYXQodGhpcyQxLnJvdXRlci5yZXNvbHZlSG9va3MpO1xuXHQgICAgcnVuUXVldWUocXVldWUsIGl0ZXJhdG9yLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGlzJDEucGVuZGluZyAhPT0gcm91dGUpIHtcblx0ICAgICAgICByZXR1cm4gYWJvcnQoKVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMkMS5wZW5kaW5nID0gbnVsbDtcblx0ICAgICAgb25Db21wbGV0ZShyb3V0ZSk7XG5cdCAgICAgIGlmICh0aGlzJDEucm91dGVyLmFwcCkge1xuXHQgICAgICAgIHRoaXMkMS5yb3V0ZXIuYXBwLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBwb3N0RW50ZXJDYnMuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsgY2IoKTsgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0SGlzdG9yeS5wcm90b3R5cGUudXBkYXRlUm91dGUgPSBmdW5jdGlvbiB1cGRhdGVSb3V0ZSAocm91dGUpIHtcblx0ICB2YXIgcHJldiA9IHRoaXMuY3VycmVudDtcblx0ICB0aGlzLmN1cnJlbnQgPSByb3V0ZTtcblx0ICB0aGlzLmNiICYmIHRoaXMuY2Iocm91dGUpO1xuXHQgIHRoaXMucm91dGVyLmFmdGVySG9va3MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuXHQgICAgaG9vayAmJiBob29rKHJvdXRlLCBwcmV2KTtcblx0ICB9KTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZUJhc2UgKGJhc2UpIHtcblx0ICBpZiAoIWJhc2UpIHtcblx0ICAgIGlmIChpbkJyb3dzZXIpIHtcblx0ICAgICAgLy8gcmVzcGVjdCA8YmFzZT4gdGFnXG5cdCAgICAgIHZhciBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG5cdCAgICAgIGJhc2UgPSAoYmFzZUVsICYmIGJhc2VFbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkgfHwgJy8nO1xuXHQgICAgICAvLyBzdHJpcCBmdWxsIFVSTCBvcmlnaW5cblx0ICAgICAgYmFzZSA9IGJhc2UucmVwbGFjZSgvXmh0dHBzPzpcXC9cXC9bXlxcL10rLywgJycpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYmFzZSA9ICcvJztcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gbWFrZSBzdXJlIHRoZXJlJ3MgdGhlIHN0YXJ0aW5nIHNsYXNoXG5cdCAgaWYgKGJhc2UuY2hhckF0KDApICE9PSAnLycpIHtcblx0ICAgIGJhc2UgPSAnLycgKyBiYXNlO1xuXHQgIH1cblx0ICAvLyByZW1vdmUgdHJhaWxpbmcgc2xhc2hcblx0ICByZXR1cm4gYmFzZS5yZXBsYWNlKC9cXC8kLywgJycpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVRdWV1ZSAoXG5cdCAgY3VycmVudCxcblx0ICBuZXh0XG5cdCkge1xuXHQgIHZhciBpO1xuXHQgIHZhciBtYXggPSBNYXRoLm1heChjdXJyZW50Lmxlbmd0aCwgbmV4dC5sZW5ndGgpO1xuXHQgIGZvciAoaSA9IDA7IGkgPCBtYXg7IGkrKykge1xuXHQgICAgaWYgKGN1cnJlbnRbaV0gIT09IG5leHRbaV0pIHtcblx0ICAgICAgYnJlYWtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHtcblx0ICAgIHVwZGF0ZWQ6IG5leHQuc2xpY2UoMCwgaSksXG5cdCAgICBhY3RpdmF0ZWQ6IG5leHQuc2xpY2UoaSksXG5cdCAgICBkZWFjdGl2YXRlZDogY3VycmVudC5zbGljZShpKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEd1YXJkcyAoXG5cdCAgcmVjb3Jkcyxcblx0ICBuYW1lLFxuXHQgIGJpbmQsXG5cdCAgcmV2ZXJzZVxuXHQpIHtcblx0ICB2YXIgZ3VhcmRzID0gZmxhdE1hcENvbXBvbmVudHMocmVjb3JkcywgZnVuY3Rpb24gKGRlZiwgaW5zdGFuY2UsIG1hdGNoLCBrZXkpIHtcblx0ICAgIHZhciBndWFyZCA9IGV4dHJhY3RHdWFyZChkZWYsIG5hbWUpO1xuXHQgICAgaWYgKGd1YXJkKSB7XG5cdCAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGd1YXJkKVxuXHQgICAgICAgID8gZ3VhcmQubWFwKGZ1bmN0aW9uIChndWFyZCkgeyByZXR1cm4gYmluZChndWFyZCwgaW5zdGFuY2UsIG1hdGNoLCBrZXkpOyB9KVxuXHQgICAgICAgIDogYmluZChndWFyZCwgaW5zdGFuY2UsIG1hdGNoLCBrZXkpXG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIGZsYXR0ZW4ocmV2ZXJzZSA/IGd1YXJkcy5yZXZlcnNlKCkgOiBndWFyZHMpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RHdWFyZCAoXG5cdCAgZGVmLFxuXHQgIGtleVxuXHQpIHtcblx0ICBpZiAodHlwZW9mIGRlZiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgLy8gZXh0ZW5kIG5vdyBzbyB0aGF0IGdsb2JhbCBtaXhpbnMgYXJlIGFwcGxpZWQuXG5cdCAgICBkZWYgPSBfVnVlLmV4dGVuZChkZWYpO1xuXHQgIH1cblx0ICByZXR1cm4gZGVmLm9wdGlvbnNba2V5XVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0TGVhdmVHdWFyZHMgKGRlYWN0aXZhdGVkKSB7XG5cdCAgcmV0dXJuIGV4dHJhY3RHdWFyZHMoZGVhY3RpdmF0ZWQsICdiZWZvcmVSb3V0ZUxlYXZlJywgYmluZEd1YXJkLCB0cnVlKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0VXBkYXRlSG9va3MgKHVwZGF0ZWQpIHtcblx0ICByZXR1cm4gZXh0cmFjdEd1YXJkcyh1cGRhdGVkLCAnYmVmb3JlUm91dGVVcGRhdGUnLCBiaW5kR3VhcmQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJpbmRHdWFyZCAoZ3VhcmQsIGluc3RhbmNlKSB7XG5cdCAgaWYgKGluc3RhbmNlKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gYm91bmRSb3V0ZUd1YXJkICgpIHtcblx0ICAgICAgcmV0dXJuIGd1YXJkLmFwcGx5KGluc3RhbmNlLCBhcmd1bWVudHMpXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0RW50ZXJHdWFyZHMgKFxuXHQgIGFjdGl2YXRlZCxcblx0ICBjYnMsXG5cdCAgaXNWYWxpZFxuXHQpIHtcblx0ICByZXR1cm4gZXh0cmFjdEd1YXJkcyhhY3RpdmF0ZWQsICdiZWZvcmVSb3V0ZUVudGVyJywgZnVuY3Rpb24gKGd1YXJkLCBfLCBtYXRjaCwga2V5KSB7XG5cdCAgICByZXR1cm4gYmluZEVudGVyR3VhcmQoZ3VhcmQsIG1hdGNoLCBrZXksIGNicywgaXNWYWxpZClcblx0ICB9KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiaW5kRW50ZXJHdWFyZCAoXG5cdCAgZ3VhcmQsXG5cdCAgbWF0Y2gsXG5cdCAga2V5LFxuXHQgIGNicyxcblx0ICBpc1ZhbGlkXG5cdCkge1xuXHQgIHJldHVybiBmdW5jdGlvbiByb3V0ZUVudGVyR3VhcmQgKHRvLCBmcm9tLCBuZXh0KSB7XG5cdCAgICByZXR1cm4gZ3VhcmQodG8sIGZyb20sIGZ1bmN0aW9uIChjYikge1xuXHQgICAgICBuZXh0KGNiKTtcblx0ICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIGNicy5wdXNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIC8vICM3NTBcblx0ICAgICAgICAgIC8vIGlmIGEgcm91dGVyLXZpZXcgaXMgd3JhcHBlZCB3aXRoIGFuIG91dC1pbiB0cmFuc2l0aW9uLFxuXHQgICAgICAgICAgLy8gdGhlIGluc3RhbmNlIG1heSBub3QgaGF2ZSBiZWVuIHJlZ2lzdGVyZWQgYXQgdGhpcyB0aW1lLlxuXHQgICAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIHBvbGwgZm9yIHJlZ2lzdHJhdGlvbiB1bnRpbCBjdXJyZW50IHJvdXRlXG5cdCAgICAgICAgICAvLyBpcyBubyBsb25nZXIgdmFsaWQuXG5cdCAgICAgICAgICBwb2xsKGNiLCBtYXRjaC5pbnN0YW5jZXMsIGtleSwgaXNWYWxpZCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0pXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwb2xsIChcblx0ICBjYiwgLy8gc29tZWhvdyBmbG93IGNhbm5vdCBpbmZlciB0aGlzIGlzIGEgZnVuY3Rpb25cblx0ICBpbnN0YW5jZXMsXG5cdCAga2V5LFxuXHQgIGlzVmFsaWRcblx0KSB7XG5cdCAgaWYgKGluc3RhbmNlc1trZXldKSB7XG5cdCAgICBjYihpbnN0YW5jZXNba2V5XSk7XG5cdCAgfSBlbHNlIGlmIChpc1ZhbGlkKCkpIHtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBwb2xsKGNiLCBpbnN0YW5jZXMsIGtleSwgaXNWYWxpZCk7XG5cdCAgICB9LCAxNik7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiAgKi9cblx0XG5cdFxuXHR2YXIgSFRNTDVIaXN0b3J5ID0gKGZ1bmN0aW9uIChIaXN0b3J5JCQxKSB7XG5cdCAgZnVuY3Rpb24gSFRNTDVIaXN0b3J5IChyb3V0ZXIsIGJhc2UpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIEhpc3RvcnkkJDEuY2FsbCh0aGlzLCByb3V0ZXIsIGJhc2UpO1xuXHRcblx0ICAgIHZhciBleHBlY3RTY3JvbGwgPSByb3V0ZXIub3B0aW9ucy5zY3JvbGxCZWhhdmlvcjtcblx0XG5cdCAgICBpZiAoZXhwZWN0U2Nyb2xsKSB7XG5cdCAgICAgIHNldHVwU2Nyb2xsKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGluaXRMb2NhdGlvbiA9IGdldExvY2F0aW9uKHRoaXMuYmFzZSk7XG5cdCAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB2YXIgY3VycmVudCA9IHRoaXMkMS5jdXJyZW50O1xuXHRcblx0ICAgICAgLy8gQXZvaWRpbmcgZmlyc3QgYHBvcHN0YXRlYCBldmVudCBkaXNwYXRjaGVkIGluIHNvbWUgYnJvd3NlcnMgYnV0IGZpcnN0XG5cdCAgICAgIC8vIGhpc3Rvcnkgcm91dGUgbm90IHVwZGF0ZWQgc2luY2UgYXN5bmMgZ3VhcmQgYXQgdGhlIHNhbWUgdGltZS5cblx0ICAgICAgdmFyIGxvY2F0aW9uID0gZ2V0TG9jYXRpb24odGhpcyQxLmJhc2UpO1xuXHQgICAgICBpZiAodGhpcyQxLmN1cnJlbnQgPT09IFNUQVJUICYmIGxvY2F0aW9uID09PSBpbml0TG9jYXRpb24pIHtcblx0ICAgICAgICByZXR1cm5cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcyQxLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgICAgaWYgKGV4cGVjdFNjcm9sbCkge1xuXHQgICAgICAgICAgaGFuZGxlU2Nyb2xsKHJvdXRlciwgcm91dGUsIGN1cnJlbnQsIHRydWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGlmICggSGlzdG9yeSQkMSApIEhUTUw1SGlzdG9yeS5fX3Byb3RvX18gPSBIaXN0b3J5JCQxO1xuXHQgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBIaXN0b3J5JCQxICYmIEhpc3RvcnkkJDEucHJvdG90eXBlICk7XG5cdCAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEhUTUw1SGlzdG9yeTtcblx0XG5cdCAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvIChuKSB7XG5cdCAgICB3aW5kb3cuaGlzdG9yeS5nbyhuKTtcblx0ICB9O1xuXHRcblx0ICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHJlZiA9IHRoaXM7XG5cdCAgICB2YXIgZnJvbVJvdXRlID0gcmVmLmN1cnJlbnQ7XG5cdCAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgIHB1c2hTdGF0ZShjbGVhblBhdGgodGhpcyQxLmJhc2UgKyByb3V0ZS5mdWxsUGF0aCkpO1xuXHQgICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGZyb21Sb3V0ZSwgZmFsc2UpO1xuXHQgICAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuXHQgICAgfSwgb25BYm9ydCk7XG5cdCAgfTtcblx0XG5cdCAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZSAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHZhciByZWYgPSB0aGlzO1xuXHQgICAgdmFyIGZyb21Sb3V0ZSA9IHJlZi5jdXJyZW50O1xuXHQgICAgdGhpcy50cmFuc2l0aW9uVG8obG9jYXRpb24sIGZ1bmN0aW9uIChyb3V0ZSkge1xuXHQgICAgICByZXBsYWNlU3RhdGUoY2xlYW5QYXRoKHRoaXMkMS5iYXNlICsgcm91dGUuZnVsbFBhdGgpKTtcblx0ICAgICAgaGFuZGxlU2Nyb2xsKHRoaXMkMS5yb3V0ZXIsIHJvdXRlLCBmcm9tUm91dGUsIGZhbHNlKTtcblx0ICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcblx0ICAgIH0sIG9uQWJvcnQpO1xuXHQgIH07XG5cdFxuXHQgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZW5zdXJlVVJMID0gZnVuY3Rpb24gZW5zdXJlVVJMIChwdXNoKSB7XG5cdCAgICBpZiAoZ2V0TG9jYXRpb24odGhpcy5iYXNlKSAhPT0gdGhpcy5jdXJyZW50LmZ1bGxQYXRoKSB7XG5cdCAgICAgIHZhciBjdXJyZW50ID0gY2xlYW5QYXRoKHRoaXMuYmFzZSArIHRoaXMuY3VycmVudC5mdWxsUGF0aCk7XG5cdCAgICAgIHB1c2ggPyBwdXNoU3RhdGUoY3VycmVudCkgOiByZXBsYWNlU3RhdGUoY3VycmVudCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nZXRDdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbiBnZXRDdXJyZW50TG9jYXRpb24gKCkge1xuXHQgICAgcmV0dXJuIGdldExvY2F0aW9uKHRoaXMuYmFzZSlcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gSFRNTDVIaXN0b3J5O1xuXHR9KEhpc3RvcnkpKTtcblx0XG5cdGZ1bmN0aW9uIGdldExvY2F0aW9uIChiYXNlKSB7XG5cdCAgdmFyIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cdCAgaWYgKGJhc2UgJiYgcGF0aC5pbmRleE9mKGJhc2UpID09PSAwKSB7XG5cdCAgICBwYXRoID0gcGF0aC5zbGljZShiYXNlLmxlbmd0aCk7XG5cdCAgfVxuXHQgIHJldHVybiAocGF0aCB8fCAnLycpICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoXG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0XG5cdHZhciBIYXNoSGlzdG9yeSA9IChmdW5jdGlvbiAoSGlzdG9yeSQkMSkge1xuXHQgIGZ1bmN0aW9uIEhhc2hIaXN0b3J5IChyb3V0ZXIsIGJhc2UsIGZhbGxiYWNrKSB7XG5cdCAgICBIaXN0b3J5JCQxLmNhbGwodGhpcywgcm91dGVyLCBiYXNlKTtcblx0ICAgIC8vIGNoZWNrIGhpc3RvcnkgZmFsbGJhY2sgZGVlcGxpbmtpbmdcblx0ICAgIGlmIChmYWxsYmFjayAmJiBjaGVja0ZhbGxiYWNrKHRoaXMuYmFzZSkpIHtcblx0ICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdCAgICBlbnN1cmVTbGFzaCgpO1xuXHQgIH1cblx0XG5cdCAgaWYgKCBIaXN0b3J5JCQxICkgSGFzaEhpc3RvcnkuX19wcm90b19fID0gSGlzdG9yeSQkMTtcblx0ICBIYXNoSGlzdG9yeS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBIaXN0b3J5JCQxICYmIEhpc3RvcnkkJDEucHJvdG90eXBlICk7XG5cdCAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSGFzaEhpc3Rvcnk7XG5cdFxuXHQgIC8vIHRoaXMgaXMgZGVsYXllZCB1bnRpbCB0aGUgYXBwIG1vdW50c1xuXHQgIC8vIHRvIGF2b2lkIHRoZSBoYXNoY2hhbmdlIGxpc3RlbmVyIGJlaW5nIGZpcmVkIHRvbyBlYXJseVxuXHQgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5zZXR1cExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldHVwTGlzdGVuZXJzICgpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcblx0ICAgIHZhciBleHBlY3RTY3JvbGwgPSByb3V0ZXIub3B0aW9ucy5zY3JvbGxCZWhhdmlvcjtcblx0ICAgIHZhciBzdXBwb3J0c1Njcm9sbCA9IHN1cHBvcnRzUHVzaFN0YXRlICYmIGV4cGVjdFNjcm9sbDtcblx0XG5cdCAgICBpZiAoc3VwcG9ydHNTY3JvbGwpIHtcblx0ICAgICAgc2V0dXBTY3JvbGwoKTtcblx0ICAgIH1cblx0XG5cdCAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihzdXBwb3J0c1B1c2hTdGF0ZSA/ICdwb3BzdGF0ZScgOiAnaGFzaGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzJDEuY3VycmVudDtcblx0ICAgICAgaWYgKCFlbnN1cmVTbGFzaCgpKSB7XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcyQxLnRyYW5zaXRpb25UbyhnZXRIYXNoKCksIGZ1bmN0aW9uIChyb3V0ZSkge1xuXHQgICAgICAgIGlmIChzdXBwb3J0c1Njcm9sbCkge1xuXHQgICAgICAgICAgaGFuZGxlU2Nyb2xsKHRoaXMkMS5yb3V0ZXIsIHJvdXRlLCBjdXJyZW50LCB0cnVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFzdXBwb3J0c1B1c2hTdGF0ZSkge1xuXHQgICAgICAgICAgcmVwbGFjZUhhc2gocm91dGUuZnVsbFBhdGgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICBIYXNoSGlzdG9yeS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2ggKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB2YXIgcmVmID0gdGhpcztcblx0ICAgIHZhciBmcm9tUm91dGUgPSByZWYuY3VycmVudDtcblx0ICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcblx0ICAgICAgcHVzaEhhc2gocm91dGUuZnVsbFBhdGgpO1xuXHQgICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGZyb21Sb3V0ZSwgZmFsc2UpO1xuXHQgICAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuXHQgICAgfSwgb25BYm9ydCk7XG5cdCAgfTtcblx0XG5cdCAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHJlZiA9IHRoaXM7XG5cdCAgICB2YXIgZnJvbVJvdXRlID0gcmVmLmN1cnJlbnQ7XG5cdCAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgIHJlcGxhY2VIYXNoKHJvdXRlLmZ1bGxQYXRoKTtcblx0ICAgICAgaGFuZGxlU2Nyb2xsKHRoaXMkMS5yb3V0ZXIsIHJvdXRlLCBmcm9tUm91dGUsIGZhbHNlKTtcblx0ICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcblx0ICAgIH0sIG9uQWJvcnQpO1xuXHQgIH07XG5cdFxuXHQgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvIChuKSB7XG5cdCAgICB3aW5kb3cuaGlzdG9yeS5nbyhuKTtcblx0ICB9O1xuXHRcblx0ICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZW5zdXJlVVJMID0gZnVuY3Rpb24gZW5zdXJlVVJMIChwdXNoKSB7XG5cdCAgICB2YXIgY3VycmVudCA9IHRoaXMuY3VycmVudC5mdWxsUGF0aDtcblx0ICAgIGlmIChnZXRIYXNoKCkgIT09IGN1cnJlbnQpIHtcblx0ICAgICAgcHVzaCA/IHB1c2hIYXNoKGN1cnJlbnQpIDogcmVwbGFjZUhhc2goY3VycmVudCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdldEN1cnJlbnRMb2NhdGlvbiA9IGZ1bmN0aW9uIGdldEN1cnJlbnRMb2NhdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gZ2V0SGFzaCgpXG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEhhc2hIaXN0b3J5O1xuXHR9KEhpc3RvcnkpKTtcblx0XG5cdGZ1bmN0aW9uIGNoZWNrRmFsbGJhY2sgKGJhc2UpIHtcblx0ICB2YXIgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihiYXNlKTtcblx0ICBpZiAoIS9eXFwvIy8udGVzdChsb2NhdGlvbikpIHtcblx0ICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKFxuXHQgICAgICBjbGVhblBhdGgoYmFzZSArICcvIycgKyBsb2NhdGlvbilcblx0ICAgICk7XG5cdCAgICByZXR1cm4gdHJ1ZVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5zdXJlU2xhc2ggKCkge1xuXHQgIHZhciBwYXRoID0gZ2V0SGFzaCgpO1xuXHQgIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJy8nKSB7XG5cdCAgICByZXR1cm4gdHJ1ZVxuXHQgIH1cblx0ICByZXBsYWNlSGFzaCgnLycgKyBwYXRoKTtcblx0ICByZXR1cm4gZmFsc2Vcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0SGFzaCAoKSB7XG5cdCAgLy8gV2UgY2FuJ3QgdXNlIHdpbmRvdy5sb2NhdGlvbi5oYXNoIGhlcmUgYmVjYXVzZSBpdCdzIG5vdFxuXHQgIC8vIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzIC0gRmlyZWZveCB3aWxsIHByZS1kZWNvZGUgaXQhXG5cdCAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0ICB2YXIgaW5kZXggPSBocmVmLmluZGV4T2YoJyMnKTtcblx0ICByZXR1cm4gaW5kZXggPT09IC0xID8gJycgOiBocmVmLnNsaWNlKGluZGV4ICsgMSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VXJsIChwYXRoKSB7XG5cdCAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0ICB2YXIgaSA9IGhyZWYuaW5kZXhPZignIycpO1xuXHQgIHZhciBiYXNlID0gaSA+PSAwID8gaHJlZi5zbGljZSgwLCBpKSA6IGhyZWY7XG5cdCAgcmV0dXJuIChiYXNlICsgXCIjXCIgKyBwYXRoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwdXNoSGFzaCAocGF0aCkge1xuXHQgIGlmIChzdXBwb3J0c1B1c2hTdGF0ZSkge1xuXHQgICAgcHVzaFN0YXRlKGdldFVybChwYXRoKSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcGF0aDtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlcGxhY2VIYXNoIChwYXRoKSB7XG5cdCAgaWYgKHN1cHBvcnRzUHVzaFN0YXRlKSB7XG5cdCAgICByZXBsYWNlU3RhdGUoZ2V0VXJsKHBhdGgpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZ2V0VXJsKHBhdGgpKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qICAqL1xuXHRcblx0XG5cdHZhciBBYnN0cmFjdEhpc3RvcnkgPSAoZnVuY3Rpb24gKEhpc3RvcnkkJDEpIHtcblx0ICBmdW5jdGlvbiBBYnN0cmFjdEhpc3RvcnkgKHJvdXRlciwgYmFzZSkge1xuXHQgICAgSGlzdG9yeSQkMS5jYWxsKHRoaXMsIHJvdXRlciwgYmFzZSk7XG5cdCAgICB0aGlzLnN0YWNrID0gW107XG5cdCAgICB0aGlzLmluZGV4ID0gLTE7XG5cdCAgfVxuXHRcblx0ICBpZiAoIEhpc3RvcnkkJDEgKSBBYnN0cmFjdEhpc3RvcnkuX19wcm90b19fID0gSGlzdG9yeSQkMTtcblx0ICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSGlzdG9yeSQkMSAmJiBIaXN0b3J5JCQxLnByb3RvdHlwZSApO1xuXHQgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBYnN0cmFjdEhpc3Rvcnk7XG5cdFxuXHQgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2ggKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgIHRoaXMkMS5zdGFjayA9IHRoaXMkMS5zdGFjay5zbGljZSgwLCB0aGlzJDEuaW5kZXggKyAxKS5jb25jYXQocm91dGUpO1xuXHQgICAgICB0aGlzJDEuaW5kZXgrKztcblx0ICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcblx0ICAgIH0sIG9uQWJvcnQpO1xuXHQgIH07XG5cdFxuXHQgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UgKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgIHRoaXMkMS5zdGFjayA9IHRoaXMkMS5zdGFjay5zbGljZSgwLCB0aGlzJDEuaW5kZXgpLmNvbmNhdChyb3V0ZSk7XG5cdCAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG5cdCAgICB9LCBvbkFib3J0KTtcblx0ICB9O1xuXHRcblx0ICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28gKG4pIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAgIHZhciB0YXJnZXRJbmRleCA9IHRoaXMuaW5kZXggKyBuO1xuXHQgICAgaWYgKHRhcmdldEluZGV4IDwgMCB8fCB0YXJnZXRJbmRleCA+PSB0aGlzLnN0YWNrLmxlbmd0aCkge1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0ICAgIHZhciByb3V0ZSA9IHRoaXMuc3RhY2tbdGFyZ2V0SW5kZXhdO1xuXHQgICAgdGhpcy5jb25maXJtVHJhbnNpdGlvbihyb3V0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzJDEuaW5kZXggPSB0YXJnZXRJbmRleDtcblx0ICAgICAgdGhpcyQxLnVwZGF0ZVJvdXRlKHJvdXRlKTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ2V0Q3VycmVudExvY2F0aW9uID0gZnVuY3Rpb24gZ2V0Q3VycmVudExvY2F0aW9uICgpIHtcblx0ICAgIHZhciBjdXJyZW50ID0gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdO1xuXHQgICAgcmV0dXJuIGN1cnJlbnQgPyBjdXJyZW50LmZ1bGxQYXRoIDogJy8nXG5cdCAgfTtcblx0XG5cdCAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5lbnN1cmVVUkwgPSBmdW5jdGlvbiBlbnN1cmVVUkwgKCkge1xuXHQgICAgLy8gbm9vcFxuXHQgIH07XG5cdFxuXHQgIHJldHVybiBBYnN0cmFjdEhpc3Rvcnk7XG5cdH0oSGlzdG9yeSkpO1xuXHRcblx0LyogICovXG5cdFxuXHR2YXIgVnVlUm91dGVyID0gZnVuY3Rpb24gVnVlUm91dGVyIChvcHRpb25zKSB7XG5cdCAgaWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cdFxuXHQgIHRoaXMuYXBwID0gbnVsbDtcblx0ICB0aGlzLmFwcHMgPSBbXTtcblx0ICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgIHRoaXMuYmVmb3JlSG9va3MgPSBbXTtcblx0ICB0aGlzLnJlc29sdmVIb29rcyA9IFtdO1xuXHQgIHRoaXMuYWZ0ZXJIb29rcyA9IFtdO1xuXHQgIHRoaXMubWF0Y2hlciA9IGNyZWF0ZU1hdGNoZXIob3B0aW9ucy5yb3V0ZXMgfHwgW10sIHRoaXMpO1xuXHRcblx0ICB2YXIgbW9kZSA9IG9wdGlvbnMubW9kZSB8fCAnaGFzaCc7XG5cdCAgdGhpcy5mYWxsYmFjayA9IG1vZGUgPT09ICdoaXN0b3J5JyAmJiAhc3VwcG9ydHNQdXNoU3RhdGUgJiYgb3B0aW9ucy5mYWxsYmFjayAhPT0gZmFsc2U7XG5cdCAgaWYgKHRoaXMuZmFsbGJhY2spIHtcblx0ICAgIG1vZGUgPSAnaGFzaCc7XG5cdCAgfVxuXHQgIGlmICghaW5Ccm93c2VyKSB7XG5cdCAgICBtb2RlID0gJ2Fic3RyYWN0Jztcblx0ICB9XG5cdCAgdGhpcy5tb2RlID0gbW9kZTtcblx0XG5cdCAgc3dpdGNoIChtb2RlKSB7XG5cdCAgICBjYXNlICdoaXN0b3J5Jzpcblx0ICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhUTUw1SGlzdG9yeSh0aGlzLCBvcHRpb25zLmJhc2UpO1xuXHQgICAgICBicmVha1xuXHQgICAgY2FzZSAnaGFzaCc6XG5cdCAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIYXNoSGlzdG9yeSh0aGlzLCBvcHRpb25zLmJhc2UsIHRoaXMuZmFsbGJhY2spO1xuXHQgICAgICBicmVha1xuXHQgICAgY2FzZSAnYWJzdHJhY3QnOlxuXHQgICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgQWJzdHJhY3RIaXN0b3J5KHRoaXMsIG9wdGlvbnMuYmFzZSk7XG5cdCAgICAgIGJyZWFrXG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGFzc2VydChmYWxzZSwgKFwiaW52YWxpZCBtb2RlOiBcIiArIG1vZGUpKTtcblx0ICAgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IGN1cnJlbnRSb3V0ZTogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5tYXRjaCA9IGZ1bmN0aW9uIG1hdGNoIChcblx0ICByYXcsXG5cdCAgY3VycmVudCxcblx0ICByZWRpcmVjdGVkRnJvbVxuXHQpIHtcblx0ICByZXR1cm4gdGhpcy5tYXRjaGVyLm1hdGNoKHJhdywgY3VycmVudCwgcmVkaXJlY3RlZEZyb20pXG5cdH07XG5cdFxuXHRwcm90b3R5cGVBY2Nlc3NvcnMuY3VycmVudFJvdXRlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gdGhpcy5oaXN0b3J5ICYmIHRoaXMuaGlzdG9yeS5jdXJyZW50XG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiBpbml0IChhcHAgLyogVnVlIGNvbXBvbmVudCBpbnN0YW5jZSAqLykge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgYXNzZXJ0KFxuXHQgICAgaW5zdGFsbC5pbnN0YWxsZWQsXG5cdCAgICBcIm5vdCBpbnN0YWxsZWQuIE1ha2Ugc3VyZSB0byBjYWxsIGBWdWUudXNlKFZ1ZVJvdXRlcilgIFwiICtcblx0ICAgIFwiYmVmb3JlIGNyZWF0aW5nIHJvb3QgaW5zdGFuY2UuXCJcblx0ICApO1xuXHRcblx0ICB0aGlzLmFwcHMucHVzaChhcHApO1xuXHRcblx0ICAvLyBtYWluIGFwcCBhbHJlYWR5IGluaXRpYWxpemVkLlxuXHQgIGlmICh0aGlzLmFwcCkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB0aGlzLmFwcCA9IGFwcDtcblx0XG5cdCAgdmFyIGhpc3RvcnkgPSB0aGlzLmhpc3Rvcnk7XG5cdFxuXHQgIGlmIChoaXN0b3J5IGluc3RhbmNlb2YgSFRNTDVIaXN0b3J5KSB7XG5cdCAgICBoaXN0b3J5LnRyYW5zaXRpb25UbyhoaXN0b3J5LmdldEN1cnJlbnRMb2NhdGlvbigpKTtcblx0ICB9IGVsc2UgaWYgKGhpc3RvcnkgaW5zdGFuY2VvZiBIYXNoSGlzdG9yeSkge1xuXHQgICAgdmFyIHNldHVwSGFzaExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBoaXN0b3J5LnNldHVwTGlzdGVuZXJzKCk7XG5cdCAgICB9O1xuXHQgICAgaGlzdG9yeS50cmFuc2l0aW9uVG8oXG5cdCAgICAgIGhpc3RvcnkuZ2V0Q3VycmVudExvY2F0aW9uKCksXG5cdCAgICAgIHNldHVwSGFzaExpc3RlbmVyLFxuXHQgICAgICBzZXR1cEhhc2hMaXN0ZW5lclxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIGhpc3RvcnkubGlzdGVuKGZ1bmN0aW9uIChyb3V0ZSkge1xuXHQgICAgdGhpcyQxLmFwcHMuZm9yRWFjaChmdW5jdGlvbiAoYXBwKSB7XG5cdCAgICAgIGFwcC5fcm91dGUgPSByb3V0ZTtcblx0ICAgIH0pO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5iZWZvcmVFYWNoID0gZnVuY3Rpb24gYmVmb3JlRWFjaCAoZm4pIHtcblx0ICByZXR1cm4gcmVnaXN0ZXJIb29rKHRoaXMuYmVmb3JlSG9va3MsIGZuKVxuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5iZWZvcmVSZXNvbHZlID0gZnVuY3Rpb24gYmVmb3JlUmVzb2x2ZSAoZm4pIHtcblx0ICByZXR1cm4gcmVnaXN0ZXJIb29rKHRoaXMucmVzb2x2ZUhvb2tzLCBmbilcblx0fTtcblx0XG5cdFZ1ZVJvdXRlci5wcm90b3R5cGUuYWZ0ZXJFYWNoID0gZnVuY3Rpb24gYWZ0ZXJFYWNoIChmbikge1xuXHQgIHJldHVybiByZWdpc3Rlckhvb2sodGhpcy5hZnRlckhvb2tzLCBmbilcblx0fTtcblx0XG5cdFZ1ZVJvdXRlci5wcm90b3R5cGUub25SZWFkeSA9IGZ1bmN0aW9uIG9uUmVhZHkgKGNiLCBlcnJvckNiKSB7XG5cdCAgdGhpcy5oaXN0b3J5Lm9uUmVhZHkoY2IsIGVycm9yQ2IpO1xuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gb25FcnJvciAoZXJyb3JDYikge1xuXHQgIHRoaXMuaGlzdG9yeS5vbkVycm9yKGVycm9yQ2IpO1xuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcblx0ICB0aGlzLmhpc3RvcnkucHVzaChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCk7XG5cdH07XG5cdFxuXHRWdWVSb3V0ZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuXHQgIHRoaXMuaGlzdG9yeS5yZXBsYWNlKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KTtcblx0fTtcblx0XG5cdFZ1ZVJvdXRlci5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyAobikge1xuXHQgIHRoaXMuaGlzdG9yeS5nbyhuKTtcblx0fTtcblx0XG5cdFZ1ZVJvdXRlci5wcm90b3R5cGUuYmFjayA9IGZ1bmN0aW9uIGJhY2sgKCkge1xuXHQgIHRoaXMuZ28oLTEpO1xuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5mb3J3YXJkID0gZnVuY3Rpb24gZm9yd2FyZCAoKSB7XG5cdCAgdGhpcy5nbygxKTtcblx0fTtcblx0XG5cdFZ1ZVJvdXRlci5wcm90b3R5cGUuZ2V0TWF0Y2hlZENvbXBvbmVudHMgPSBmdW5jdGlvbiBnZXRNYXRjaGVkQ29tcG9uZW50cyAodG8pIHtcblx0ICB2YXIgcm91dGUgPSB0b1xuXHQgICAgPyB0by5tYXRjaGVkXG5cdCAgICAgID8gdG9cblx0ICAgICAgOiB0aGlzLnJlc29sdmUodG8pLnJvdXRlXG5cdCAgICA6IHRoaXMuY3VycmVudFJvdXRlO1xuXHQgIGlmICghcm91dGUpIHtcblx0ICAgIHJldHVybiBbXVxuXHQgIH1cblx0ICByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCByb3V0ZS5tYXRjaGVkLm1hcChmdW5jdGlvbiAobSkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5rZXlzKG0uY29tcG9uZW50cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuIG0uY29tcG9uZW50c1trZXldXG5cdCAgICB9KVxuXHQgIH0pKVxuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24gcmVzb2x2ZSAoXG5cdCAgdG8sXG5cdCAgY3VycmVudCxcblx0ICBhcHBlbmRcblx0KSB7XG5cdCAgdmFyIGxvY2F0aW9uID0gbm9ybWFsaXplTG9jYXRpb24oXG5cdCAgICB0byxcblx0ICAgIGN1cnJlbnQgfHwgdGhpcy5oaXN0b3J5LmN1cnJlbnQsXG5cdCAgICBhcHBlbmQsXG5cdCAgICB0aGlzXG5cdCAgKTtcblx0ICB2YXIgcm91dGUgPSB0aGlzLm1hdGNoKGxvY2F0aW9uLCBjdXJyZW50KTtcblx0ICB2YXIgZnVsbFBhdGggPSByb3V0ZS5yZWRpcmVjdGVkRnJvbSB8fCByb3V0ZS5mdWxsUGF0aDtcblx0ICB2YXIgYmFzZSA9IHRoaXMuaGlzdG9yeS5iYXNlO1xuXHQgIHZhciBocmVmID0gY3JlYXRlSHJlZihiYXNlLCBmdWxsUGF0aCwgdGhpcy5tb2RlKTtcblx0ICByZXR1cm4ge1xuXHQgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuXHQgICAgcm91dGU6IHJvdXRlLFxuXHQgICAgaHJlZjogaHJlZixcblx0ICAgIC8vIGZvciBiYWNrd2FyZHMgY29tcGF0XG5cdCAgICBub3JtYWxpemVkVG86IGxvY2F0aW9uLFxuXHQgICAgcmVzb2x2ZWQ6IHJvdXRlXG5cdCAgfVxuXHR9O1xuXHRcblx0VnVlUm91dGVyLnByb3RvdHlwZS5hZGRSb3V0ZXMgPSBmdW5jdGlvbiBhZGRSb3V0ZXMgKHJvdXRlcykge1xuXHQgIHRoaXMubWF0Y2hlci5hZGRSb3V0ZXMocm91dGVzKTtcblx0ICBpZiAodGhpcy5oaXN0b3J5LmN1cnJlbnQgIT09IFNUQVJUKSB7XG5cdCAgICB0aGlzLmhpc3RvcnkudHJhbnNpdGlvblRvKHRoaXMuaGlzdG9yeS5nZXRDdXJyZW50TG9jYXRpb24oKSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFZ1ZVJvdXRlci5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyApO1xuXHRcblx0ZnVuY3Rpb24gcmVnaXN0ZXJIb29rIChsaXN0LCBmbikge1xuXHQgIGxpc3QucHVzaChmbik7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBpID0gbGlzdC5pbmRleE9mKGZuKTtcblx0ICAgIGlmIChpID4gLTEpIHsgbGlzdC5zcGxpY2UoaSwgMSk7IH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUhyZWYgKGJhc2UsIGZ1bGxQYXRoLCBtb2RlKSB7XG5cdCAgdmFyIHBhdGggPSBtb2RlID09PSAnaGFzaCcgPyAnIycgKyBmdWxsUGF0aCA6IGZ1bGxQYXRoO1xuXHQgIHJldHVybiBiYXNlID8gY2xlYW5QYXRoKGJhc2UgKyAnLycgKyBwYXRoKSA6IHBhdGhcblx0fVxuXHRcblx0VnVlUm91dGVyLmluc3RhbGwgPSBpbnN0YWxsO1xuXHRWdWVSb3V0ZXIudmVyc2lvbiA9ICczLjAuMSc7XG5cdFxuXHRpZiAoaW5Ccm93c2VyICYmIHdpbmRvdy5WdWUpIHtcblx0ICB3aW5kb3cuVnVlLnVzZShWdWVSb3V0ZXIpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZ1ZVJvdXRlcjtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKSlcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIGJpbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIEF4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdHZhciBkZWZhdWx0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuXHQgKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3Ncblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRDb25maWcpIHtcblx0ICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcblx0ICB2YXIgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTtcblx0XG5cdCAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2Vcblx0ICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCk7XG5cdFxuXHQgIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuXHQgIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCk7XG5cdFxuXHQgIHJldHVybiBpbnN0YW5jZTtcblx0fVxuXHRcblx0Ly8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkXG5cdHZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtcblx0XG5cdC8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuXHRheGlvcy5BeGlvcyA9IEF4aW9zO1xuXHRcblx0Ly8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuXHRheGlvcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcblx0ICByZXR1cm4gY3JlYXRlSW5zdGFuY2UodXRpbHMubWVyZ2UoZGVmYXVsdHMsIGluc3RhbmNlQ29uZmlnKSk7XG5cdH07XG5cdFxuXHQvLyBFeHBvc2UgQ2FuY2VsICYgQ2FuY2VsVG9rZW5cblx0YXhpb3MuQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdGF4aW9zLkNhbmNlbFRva2VuID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdGF4aW9zLmlzQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHQvLyBFeHBvc2UgYWxsL3NwcmVhZFxuXHRheGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcblx0ICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXHR9O1xuXHRheGlvcy5zcHJlYWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cdFxuXHQvLyBBbGxvdyB1c2Ugb2YgZGVmYXVsdCBpbXBvcnQgc3ludGF4IGluIFR5cGVTY3JpcHRcblx0bW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgaXNCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdC8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqL1xuXHRcblx0Ly8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3Ncblx0XG5cdHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuXHQgIHJldHVybiAodHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJykgJiYgKHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcblx0ICB2YXIgcmVzdWx0O1xuXHQgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcblx0ICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKHZhbC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcik7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdW5kZWZpbmVkXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3Rcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG5cdCAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0RhdGUodmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGaWxlXSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2Jcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNCbG9iKHZhbCkge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3Rcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNVUkxTZWFyY2hQYXJhbXModmFsKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmltKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyovLCAnJykucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnRcblx0ICpcblx0ICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cblx0ICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLlxuXHQgKlxuXHQgKiB3ZWIgd29ya2Vyczpcblx0ICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkXG5cdCAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkXG5cdCAqXG5cdCAqIHJlYWN0LW5hdGl2ZTpcblx0ICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZSdcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkge1xuXHQgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJykge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gKFxuXHQgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0ICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCdcblx0ICApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uXG5cdCAqXG5cdCAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3Npbmdcblx0ICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uXG5cdCAqXG5cdCAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG5cdCAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW1cblx0ICovXG5cdGZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuXHQgIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuXHQgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuXHQgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG5cdCAgICBvYmogPSBbb2JqXTtcblx0ICB9XG5cdFxuXHQgIGlmIChpc0FycmF5KG9iaikpIHtcblx0ICAgIC8vIEl0ZXJhdGUgb3ZlciBhcnJheSB2YWx1ZXNcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG5cdCAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG5cdCAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWNjZXB0cyB2YXJhcmdzIGV4cGVjdGluZyBlYWNoIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCwgdGhlblxuXHQgKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cblx0ICpcblx0ICogV2hlbiBtdWx0aXBsZSBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUga2V5IHRoZSBsYXRlciBvYmplY3QgaW5cblx0ICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiB2YXIgcmVzdWx0ID0gbWVyZ2Uoe2ZvbzogMTIzfSwge2ZvbzogNDU2fSk7XG5cdCAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuXHQgKiBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHQgIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG5cdCAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cblx0ICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG5cdCAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYVxuXHQgKi9cblx0ZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHtcblx0ICBmb3JFYWNoKGIsIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG5cdCAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGFba2V5XSA9IHZhbDtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gYTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgaXNBcnJheTogaXNBcnJheSxcblx0ICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLFxuXHQgIGlzQnVmZmVyOiBpc0J1ZmZlcixcblx0ICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLFxuXHQgIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldyxcblx0ICBpc1N0cmluZzogaXNTdHJpbmcsXG5cdCAgaXNOdW1iZXI6IGlzTnVtYmVyLFxuXHQgIGlzT2JqZWN0OiBpc09iamVjdCxcblx0ICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWQsXG5cdCAgaXNEYXRlOiBpc0RhdGUsXG5cdCAgaXNGaWxlOiBpc0ZpbGUsXG5cdCAgaXNCbG9iOiBpc0Jsb2IsXG5cdCAgaXNGdW5jdGlvbjogaXNGdW5jdGlvbixcblx0ICBpc1N0cmVhbTogaXNTdHJlYW0sXG5cdCAgaXNVUkxTZWFyY2hQYXJhbXM6IGlzVVJMU2VhcmNoUGFyYW1zLFxuXHQgIGlzU3RhbmRhcmRCcm93c2VyRW52OiBpc1N0YW5kYXJkQnJvd3NlckVudixcblx0ICBmb3JFYWNoOiBmb3JFYWNoLFxuXHQgIG1lcmdlOiBtZXJnZSxcblx0ICBleHRlbmQ6IGV4dGVuZCxcblx0ICB0cmltOiB0cmltXG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuXHQgIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmdzKTtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlclxuXHQgKlxuXHQgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPlxuXHQgKiBAbGljZW5zZSAgTUlUXG5cdCAqL1xuXHRcblx0Ly8gVGhlIF9pc0J1ZmZlciBjaGVjayBpcyBmb3IgU2FmYXJpIDUtNyBzdXBwb3J0LCBiZWNhdXNlIGl0J3MgbWlzc2luZ1xuXHQvLyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLiBSZW1vdmUgdGhpcyBldmVudHVhbGx5XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuXHQgIHJldHVybiBvYmogIT0gbnVsbCAmJiAoaXNCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSB8fCAhIW9iai5faXNCdWZmZXIpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzQnVmZmVyIChvYmopIHtcblx0ICByZXR1cm4gISFvYmouY29uc3RydWN0b3IgJiYgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKVxuXHR9XG5cdFxuXHQvLyBGb3IgTm9kZSB2MC4xMCBzdXBwb3J0LiBSZW1vdmUgdGhpcyBldmVudHVhbGx5LlxuXHRmdW5jdGlvbiBpc1Nsb3dCdWZmZXIgKG9iaikge1xuXHQgIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxuXHR9XG5cblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBkZWZhdWx0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIEludGVyY2VwdG9yTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHR2YXIgZGlzcGF0Y2hSZXF1ZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZUNvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuXHQgKi9cblx0ZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcblx0ICB0aGlzLmRlZmF1bHRzID0gaW5zdGFuY2VDb25maWc7XG5cdCAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG5cdCAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG5cdCAgICByZXNwb25zZTogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpXG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERpc3BhdGNoIGEgcmVxdWVzdFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcblx0ICovXG5cdEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChjb25maWcpIHtcblx0ICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cblx0ICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG5cdCAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBjb25maWcgPSB1dGlscy5tZXJnZSh7XG5cdCAgICAgIHVybDogYXJndW1lbnRzWzBdXG5cdCAgICB9LCBhcmd1bWVudHNbMV0pO1xuXHQgIH1cblx0XG5cdCAgY29uZmlnID0gdXRpbHMubWVyZ2UoZGVmYXVsdHMsIHttZXRob2Q6ICdnZXQnfSwgdGhpcy5kZWZhdWx0cywgY29uZmlnKTtcblx0ICBjb25maWcubWV0aG9kID0gY29uZmlnLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuXHRcblx0ICAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG5cdCAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcblx0ICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXHRcblx0ICB0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24gdW5zaGlmdFJlcXVlc3RJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcblx0ICAgIGNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG5cdCAgfSk7XG5cdFxuXHQgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG5cdCAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuXHQgIH0pO1xuXHRcblx0ICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG5cdCAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHByb21pc2U7XG5cdH07XG5cdFxuXHQvLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcblx0dXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG5cdCAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cblx0ICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG5cdCAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuXHQgICAgICBtZXRob2Q6IG1ldGhvZCxcblx0ICAgICAgdXJsOiB1cmxcblx0ICAgIH0pKTtcblx0ICB9O1xuXHR9KTtcblx0XG5cdHV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG5cdCAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cblx0ICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XG5cdCAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuXHQgICAgICBtZXRob2Q6IG1ldGhvZCxcblx0ICAgICAgdXJsOiB1cmwsXG5cdCAgICAgIGRhdGE6IGRhdGFcblx0ICAgIH0pKTtcblx0ICB9O1xuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQXhpb3M7XG5cblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHR2YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7XG5cdCAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgdmFsdWUpIHtcblx0ICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuXHQgICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCkge1xuXHQgIHZhciBhZGFwdGVyO1xuXHQgIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG5cdCAgICBhZGFwdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcblx0ICAgIGFkYXB0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0ICB9XG5cdCAgcmV0dXJuIGFkYXB0ZXI7XG5cdH1cblx0XG5cdHZhciBkZWZhdWx0cyA9IHtcblx0ICBhZGFwdGVyOiBnZXREZWZhdWx0QWRhcHRlcigpLFxuXHRcblx0ICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG5cdCAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKTtcblx0ICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8XG5cdCAgICAgIHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcblx0ICAgICAgdXRpbHMuaXNCdWZmZXIoZGF0YSkgfHxcblx0ICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcblx0ICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG5cdCAgICAgIHV0aWxzLmlzQmxvYihkYXRhKVxuXHQgICAgKSB7XG5cdCAgICAgIHJldHVybiBkYXRhO1xuXHQgICAgfVxuXHQgICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG5cdCAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcblx0ICAgIH1cblx0ICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuXHQgICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG5cdCAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG5cdCAgICB9XG5cdCAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkpIHtcblx0ICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnKTtcblx0ICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdCAgfV0sXG5cdFxuXHQgIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuXHQgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG5cdCAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHsgLyogSWdub3JlICovIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXRhO1xuXHQgIH1dLFxuXHRcblx0ICAvKipcblx0ICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIGFib3J0IGEgcmVxdWVzdC4gSWYgc2V0IHRvIDAgKGRlZmF1bHQpIGFcblx0ICAgKiB0aW1lb3V0IGlzIG5vdCBjcmVhdGVkLlxuXHQgICAqL1xuXHQgIHRpbWVvdXQ6IDAsXG5cdFxuXHQgIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG5cdCAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXHRcblx0ICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcblx0XG5cdCAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuXHQgICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwO1xuXHQgIH1cblx0fTtcblx0XG5cdGRlZmF1bHRzLmhlYWRlcnMgPSB7XG5cdCAgY29tbW9uOiB7XG5cdCAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKidcblx0ICB9XG5cdH07XG5cdFxuXHR1dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG5cdCAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG5cdH0pO1xuXHRcblx0dXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcblx0ICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB1dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKSlcblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG5cdCAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7XG5cdCAgICBpZiAobmFtZSAhPT0gbm9ybWFsaXplZE5hbWUgJiYgbmFtZS50b1VwcGVyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG5cdCAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG5cdCAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgc2V0dGxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdHZhciBidWlsZFVSTCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgcGFyc2VIZWFkZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdHZhciBpc1VSTFNhbWVPcmlnaW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0dmFyIGNyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciBidG9hID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5idG9hICYmIHdpbmRvdy5idG9hLmJpbmQod2luZG93KSkgfHwgX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG5cdCAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgIHZhciByZXF1ZXN0RGF0YSA9IGNvbmZpZy5kYXRhO1xuXHQgICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG5cdFxuXHQgICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpKSB7XG5cdCAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHQgICAgdmFyIGxvYWRFdmVudCA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnO1xuXHQgICAgdmFyIHhEb21haW4gPSBmYWxzZTtcblx0XG5cdCAgICAvLyBGb3IgSUUgOC85IENPUlMgc3VwcG9ydFxuXHQgICAgLy8gT25seSBzdXBwb3J0cyBQT1NUIGFuZCBHRVQgY2FsbHMgYW5kIGRvZXNuJ3QgcmV0dXJucyB0aGUgcmVzcG9uc2UgaGVhZGVycy5cblx0ICAgIC8vIERPTidUIGRvIHRoaXMgZm9yIHRlc3RpbmcgYi9jIFhNTEh0dHBSZXF1ZXN0IGlzIG1vY2tlZCwgbm90IFhEb21haW5SZXF1ZXN0LlxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcgJiZcblx0ICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICAgIHdpbmRvdy5YRG9tYWluUmVxdWVzdCAmJiAhKCd3aXRoQ3JlZGVudGlhbHMnIGluIHJlcXVlc3QpICYmXG5cdCAgICAgICAgIWlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkge1xuXHQgICAgICByZXF1ZXN0ID0gbmV3IHdpbmRvdy5YRG9tYWluUmVxdWVzdCgpO1xuXHQgICAgICBsb2FkRXZlbnQgPSAnb25sb2FkJztcblx0ICAgICAgeERvbWFpbiA9IHRydWU7XG5cdCAgICAgIHJlcXVlc3Qub25wcm9ncmVzcyA9IGZ1bmN0aW9uIGhhbmRsZVByb2dyZXNzKCkge307XG5cdCAgICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHt9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cblx0ICAgIGlmIChjb25maWcuYXV0aCkge1xuXHQgICAgICB2YXIgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCAnJztcblx0ICAgICAgdmFyIHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmQgfHwgJyc7XG5cdCAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblx0XG5cdCAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuXHQgICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cdFxuXHQgICAgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZVxuXHQgICAgcmVxdWVzdFtsb2FkRXZlbnRdID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcblx0ICAgICAgaWYgKCFyZXF1ZXN0IHx8IChyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQgJiYgIXhEb21haW4pKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcblx0ICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcblx0ICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcblx0ICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuXHQgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlXG5cdCAgICAgIHZhciByZXNwb25zZUhlYWRlcnMgPSAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ID8gcGFyc2VIZWFkZXJzKHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpIDogbnVsbDtcblx0ICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcblx0ICAgICAgdmFyIHJlc3BvbnNlID0ge1xuXHQgICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcblx0ICAgICAgICAvLyBJRSBzZW5kcyAxMjIzIGluc3RlYWQgb2YgMjA0IChodHRwczovL2dpdGh1Yi5jb20vYXhpb3MvYXhpb3MvaXNzdWVzLzIwMSlcblx0ICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzID09PSAxMjIzID8gMjA0IDogcmVxdWVzdC5zdGF0dXMsXG5cdCAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXMgPT09IDEyMjMgPyAnTm8gQ29udGVudCcgOiByZXF1ZXN0LnN0YXR1c1RleHQsXG5cdCAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuXHQgICAgICAgIGNvbmZpZzogY29uZmlnLFxuXHQgICAgICAgIHJlcXVlc3Q6IHJlcXVlc3Rcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKTtcblx0XG5cdCAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3Rcblx0ICAgICAgcmVxdWVzdCA9IG51bGw7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcblx0ICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuXHQgICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcblx0ICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG5cdCAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXHRcblx0ICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuXHQgICAgICByZXF1ZXN0ID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gSGFuZGxlIHRpbWVvdXRcblx0ICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcblx0ICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCcsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsXG5cdCAgICAgICAgcmVxdWVzdCkpO1xuXHRcblx0ICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuXHQgICAgICByZXF1ZXN0ID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG5cdCAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cblx0ICAgIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG5cdCAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuXHQgICAgICB2YXIgY29va2llcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0ICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG5cdCAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/XG5cdCAgICAgICAgICBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6XG5cdCAgICAgICAgICB1bmRlZmluZWQ7XG5cdFxuXHQgICAgICBpZiAoeHNyZlZhbHVlKSB7XG5cdCAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG5cdCAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHtcblx0ICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuXHQgICAgICAgICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuXHQgICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0XG5cdCAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuXHQgICAgaWYgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpIHtcblx0ICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWRcblx0ICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgLy8gRXhwZWN0ZWQgRE9NRXhjZXB0aW9uIHRocm93biBieSBicm93c2VycyBub3QgY29tcGF0aWJsZSBYTUxIdHRwUmVxdWVzdCBMZXZlbCAyLlxuXHQgICAgICAgIC8vIEJ1dCwgdGhpcyBjYW4gYmUgc3VwcHJlc3NlZCBmb3IgJ2pzb24nIHR5cGUgYXMgaXQgY2FuIGJlIHBhcnNlZCBieSBkZWZhdWx0ICd0cmFuc2Zvcm1SZXNwb25zZScgZnVuY3Rpb24uXG5cdCAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuXHQgICAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG5cdCAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG5cdCAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG5cdCAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcblx0ICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuXHQgICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7XG5cdCAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXF1ZXN0LmFib3J0KCk7XG5cdCAgICAgICAgcmVqZWN0KGNhbmNlbCk7XG5cdCAgICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuXHQgICAgICAgIHJlcXVlc3QgPSBudWxsO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuXHQgICAgcmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhKTtcblx0ICB9KTtcblx0fTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKSlcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBjcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0LyoqXG5cdCAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG5cdCAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuXHQgIC8vIE5vdGU6IHN0YXR1cyBpcyBub3QgZXhwb3NlZCBieSBYRG9tYWluUmVxdWVzdFxuXHQgIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8ICF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG5cdCAgICByZXNvbHZlKHJlc3BvbnNlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuXHQgICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuXHQgICAgICByZXNwb25zZS5jb25maWcsXG5cdCAgICAgIG51bGwsXG5cdCAgICAgIHJlc3BvbnNlLnJlcXVlc3QsXG5cdCAgICAgIHJlc3BvbnNlXG5cdCAgICApKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlbmhhbmNlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgcmVxdWVzdCBhbmQgcmVzcG9uc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cblx0ICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlRXJyb3IobWVzc2FnZSwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuXHQgIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcblx0ICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIFRoZSBlcnJvciB0byB1cGRhdGUuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG5cdCAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuXHQgIGlmIChjb2RlKSB7XG5cdCAgICBlcnJvci5jb2RlID0gY29kZTtcblx0ICB9XG5cdCAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG5cdCAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcblx0ICByZXR1cm4gZXJyb3I7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0ZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuXHQgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cblx0ICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cblx0ICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cblx0ICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuXHQgICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuXHQgICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG5cdCAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG5cdCAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG5cdCAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG5cdCAgaWYgKCFwYXJhbXMpIHtcblx0ICAgIHJldHVybiB1cmw7XG5cdCAgfVxuXHRcblx0ICB2YXIgc2VyaWFsaXplZFBhcmFtcztcblx0ICBpZiAocGFyYW1zU2VyaWFsaXplcikge1xuXHQgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcblx0ICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcblx0ICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHBhcnRzID0gW107XG5cdFxuXHQgICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuXHQgICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodXRpbHMuaXNBcnJheSh2YWwpKSB7XG5cdCAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWwgPSBbdmFsXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuXHQgICAgICAgIGlmICh1dGlscy5pc0RhdGUodikpIHtcblx0ICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuXHQgICAgICAgICAgdiA9IEpTT04uc3RyaW5naWZ5KHYpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFydHMuam9pbignJicpO1xuXHQgIH1cblx0XG5cdCAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHtcblx0ICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcblx0ICB9XG5cdFxuXHQgIHJldHVybiB1cmw7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0Ly8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcblx0Ly8gYy5mLiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVyc1xuXHR2YXIgaWdub3JlRHVwbGljYXRlT2YgPSBbXG5cdCAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcblx0ICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG5cdCAgJ2xhc3QtbW9kaWZpZWQnLCAnbG9jYXRpb24nLCAnbWF4LWZvcndhcmRzJywgJ3Byb3h5LWF1dGhvcml6YXRpb24nLFxuXHQgICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5cdF07XG5cdFxuXHQvKipcblx0ICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuXHQgKlxuXHQgKiBgYGBcblx0ICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcblx0ICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXG5cdCAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcblx0ICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcblx0ICogYGBgXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcblx0ICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3Rcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcblx0ICB2YXIgcGFyc2VkID0ge307XG5cdCAgdmFyIGtleTtcblx0ICB2YXIgdmFsO1xuXHQgIHZhciBpO1xuXHRcblx0ICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXHRcblx0ICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkge1xuXHQgICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuXHQgICAga2V5ID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cigwLCBpKSkudG9Mb3dlckNhc2UoKTtcblx0ICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcblx0XG5cdCAgICBpZiAoa2V5KSB7XG5cdCAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcblx0ICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gcGFyc2VkO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKFxuXHQgIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXHRcblx0ICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3Rcblx0ICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cblx0ICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuXHQgICAgdmFyIG1zaWUgPSAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXHQgICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXHQgICAgdmFyIG9yaWdpblVSTDtcblx0XG5cdCAgICAvKipcblx0ICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzXG5cdCAgICAqXG5cdCAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcblx0ICAgICogQHJldHVybnMge09iamVjdH1cblx0ICAgICovXG5cdCAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkge1xuXHQgICAgICB2YXIgaHJlZiA9IHVybDtcblx0XG5cdCAgICAgIGlmIChtc2llKSB7XG5cdCAgICAgICAgLy8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllc1xuXHQgICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXHQgICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblx0XG5cdCAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuXHQgICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG5cdCAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcblx0ICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG5cdCAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcblx0ICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG5cdCAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcblx0ICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG5cdCAgICAgICAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcblx0ICAgICAgICAgICAgICAgICAgJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblx0XG5cdCAgICAvKipcblx0ICAgICogRGV0ZXJtaW5lIGlmIGEgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGN1cnJlbnQgbG9jYXRpb25cblx0ICAgICpcblx0ICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0XG5cdCAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luLCBvdGhlcndpc2UgZmFsc2Vcblx0ICAgICovXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHtcblx0ICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcblx0ICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuXHQgICAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVVJMLmhvc3QpO1xuXHQgICAgfTtcblx0ICB9KSgpIDpcblx0XG5cdCAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cblx0ICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHQgIH0pKClcblx0KTtcblxuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gYnRvYSBwb2x5ZmlsbCBmb3IgSUU8MTAgY291cnRlc3kgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkY2hhbWJlcnMvQmFzZTY0LmpzXG5cdFxuXHR2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nO1xuXHRcblx0ZnVuY3Rpb24gRSgpIHtcblx0ICB0aGlzLm1lc3NhZ2UgPSAnU3RyaW5nIGNvbnRhaW5zIGFuIGludmFsaWQgY2hhcmFjdGVyJztcblx0fVxuXHRFLnByb3RvdHlwZSA9IG5ldyBFcnJvcjtcblx0RS5wcm90b3R5cGUuY29kZSA9IDU7XG5cdEUucHJvdG90eXBlLm5hbWUgPSAnSW52YWxpZENoYXJhY3RlckVycm9yJztcblx0XG5cdGZ1bmN0aW9uIGJ0b2EoaW5wdXQpIHtcblx0ICB2YXIgc3RyID0gU3RyaW5nKGlucHV0KTtcblx0ICB2YXIgb3V0cHV0ID0gJyc7XG5cdCAgZm9yIChcblx0ICAgIC8vIGluaXRpYWxpemUgcmVzdWx0IGFuZCBjb3VudGVyXG5cdCAgICB2YXIgYmxvY2ssIGNoYXJDb2RlLCBpZHggPSAwLCBtYXAgPSBjaGFycztcblx0ICAgIC8vIGlmIHRoZSBuZXh0IHN0ciBpbmRleCBkb2VzIG5vdCBleGlzdDpcblx0ICAgIC8vICAgY2hhbmdlIHRoZSBtYXBwaW5nIHRhYmxlIHRvIFwiPVwiXG5cdCAgICAvLyAgIGNoZWNrIGlmIGQgaGFzIG5vIGZyYWN0aW9uYWwgZGlnaXRzXG5cdCAgICBzdHIuY2hhckF0KGlkeCB8IDApIHx8IChtYXAgPSAnPScsIGlkeCAlIDEpO1xuXHQgICAgLy8gXCI4IC0gaWR4ICUgMSAqIDhcIiBnZW5lcmF0ZXMgdGhlIHNlcXVlbmNlIDIsIDQsIDYsIDhcblx0ICAgIG91dHB1dCArPSBtYXAuY2hhckF0KDYzICYgYmxvY2sgPj4gOCAtIGlkeCAlIDEgKiA4KVxuXHQgICkge1xuXHQgICAgY2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChpZHggKz0gMyAvIDQpO1xuXHQgICAgaWYgKGNoYXJDb2RlID4gMHhGRikge1xuXHQgICAgICB0aHJvdyBuZXcgRSgpO1xuXHQgICAgfVxuXHQgICAgYmxvY2sgPSBibG9jayA8PCA4IHwgY2hhckNvZGU7XG5cdCAgfVxuXHQgIHJldHVybiBvdXRwdXQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYnRvYTtcblxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IChcblx0ICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblx0XG5cdCAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG5cdCAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcblx0ICAgICAgICB2YXIgY29va2llID0gW107XG5cdCAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXHRcblx0ICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcblx0ICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkge1xuXHQgICAgICAgICAgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKGRvbWFpbikpIHtcblx0ICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG5cdCAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuXHQgICAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG5cdCAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcblx0ICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH0pKCkgOlxuXHRcblx0ICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG5cdCAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuXHQgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcblx0ICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuXHQgICAgfTtcblx0ICB9KSgpXG5cdCk7XG5cblxuLyoqKi8gfSksXG4vKiAyNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0ZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuXHQgIHRoaXMuaGFuZGxlcnMgPSBbXTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuXHQgKlxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyXG5cdCAqL1xuXHRJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG5cdCAgdGhpcy5oYW5kbGVycy5wdXNoKHtcblx0ICAgIGZ1bGZpbGxlZDogZnVsZmlsbGVkLFxuXHQgICAgcmVqZWN0ZWQ6IHJlamVjdGVkXG5cdCAgfSk7XG5cdCAgcmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoIC0gMTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGlkIFRoZSBJRCB0aGF0IHdhcyByZXR1cm5lZCBieSBgdXNlYFxuXHQgKi9cblx0SW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5lamVjdCA9IGZ1bmN0aW9uIGVqZWN0KGlkKSB7XG5cdCAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7XG5cdCAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG5cdCAqXG5cdCAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55XG5cdCAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvclxuXHQgKi9cblx0SW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuXHQgIHV0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCkge1xuXHQgICAgaWYgKGggIT09IG51bGwpIHtcblx0ICAgICAgZm4oaCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEludGVyY2VwdG9yTWFuYWdlcjtcblxuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB0cmFuc2Zvcm1EYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciBpc0NhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgZGVmYXVsdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGlzQWJzb2x1dGVVUkwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dmFyIGNvbWJpbmVVUkxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdFxuXHQvKipcblx0ICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cblx0ICovXG5cdGZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG5cdCAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuXHQgICAgY29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEaXNwYXRjaCBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB1c2luZyB0aGUgY29uZmlndXJlZCBhZGFwdGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuXHQgKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcblx0ICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cdFxuXHQgIC8vIFN1cHBvcnQgYmFzZVVSTCBjb25maWdcblx0ICBpZiAoY29uZmlnLmJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwoY29uZmlnLnVybCkpIHtcblx0ICAgIGNvbmZpZy51cmwgPSBjb21iaW5lVVJMcyhjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG5cdCAgfVxuXHRcblx0ICAvLyBFbnN1cmUgaGVhZGVycyBleGlzdFxuXHQgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cdFxuXHQgIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcblx0ICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG5cdCAgICBjb25maWcuZGF0YSxcblx0ICAgIGNvbmZpZy5oZWFkZXJzLFxuXHQgICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3Rcblx0ICApO1xuXHRcblx0ICAvLyBGbGF0dGVuIGhlYWRlcnNcblx0ICBjb25maWcuaGVhZGVycyA9IHV0aWxzLm1lcmdlKFxuXHQgICAgY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LFxuXHQgICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG5cdCAgICBjb25maWcuaGVhZGVycyB8fCB7fVxuXHQgICk7XG5cdFxuXHQgIHV0aWxzLmZvckVhY2goXG5cdCAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcblx0ICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuXHQgICAgICBkZWxldGUgY29uZmlnLmhlYWRlcnNbbWV0aG9kXTtcblx0ICAgIH1cblx0ICApO1xuXHRcblx0ICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7XG5cdFxuXHQgIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG5cdCAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cdFxuXHQgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcblx0ICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuXHQgICAgICByZXNwb25zZS5kYXRhLFxuXHQgICAgICByZXNwb25zZS5oZWFkZXJzLFxuXHQgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2Vcblx0ICAgICk7XG5cdFxuXHQgICAgcmV0dXJuIHJlc3BvbnNlO1xuXHQgIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcblx0ICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuXHQgICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cdFxuXHQgICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuXHQgICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuXHQgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcblx0ICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuXHQgICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsXG5cdCAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2Vcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG5cdCAgfSk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqXG5cdCAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2Vcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlXG5cdCAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb259IGZucyBBIHNpbmdsZSBmdW5jdGlvbiBvciBBcnJheSBvZiBmdW5jdGlvbnNcblx0ICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGRhdGEsIGhlYWRlcnMsIGZucykge1xuXHQgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuXHQgIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcblx0ICAgIGRhdGEgPSBmbihkYXRhLCBoZWFkZXJzKTtcblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcblx0ICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGVcblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuXHQgIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cblx0ICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWRcblx0ICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cblx0ICByZXR1cm4gL14oW2Etel1bYS16XFxkXFwrXFwtXFwuXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG5cdCAgcmV0dXJuIHJlbGF0aXZlVVJMXG5cdCAgICA/IGJhc2VVUkwucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKVxuXHQgICAgOiBiYXNlVVJMO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG5cdCAqXG5cdCAqIEBjbGFzc1xuXHQgKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkge1xuXHQgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdH1cblx0XG5cdENhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcblx0ICByZXR1cm4gJ0NhbmNlbCcgKyAodGhpcy5tZXNzYWdlID8gJzogJyArIHRoaXMubWVzc2FnZSA6ICcnKTtcblx0fTtcblx0XG5cdENhbmNlbC5wcm90b3R5cGUuX19DQU5DRUxfXyA9IHRydWU7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcblxuXG4vKioqLyB9KSxcbi8qIDMyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIENhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRcblx0LyoqXG5cdCAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG5cdCAqXG5cdCAqIEBjbGFzc1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBDYW5jZWxUb2tlbihleGVjdXRvcikge1xuXHQgIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcblx0ICB9XG5cdFxuXHQgIHZhciByZXNvbHZlUHJvbWlzZTtcblx0ICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNlRXhlY3V0b3IocmVzb2x2ZSkge1xuXHQgICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuXHQgIH0pO1xuXHRcblx0ICB2YXIgdG9rZW4gPSB0aGlzO1xuXHQgIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG5cdCAgICBpZiAodG9rZW4ucmVhc29uKSB7XG5cdCAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcblx0ICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuXHQgKi9cblx0Q2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkge1xuXHQgIGlmICh0aGlzLnJlYXNvbikge1xuXHQgICAgdGhyb3cgdGhpcy5yZWFzb247XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBuZXcgYENhbmNlbFRva2VuYCBhbmQgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCxcblx0ICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC5cblx0ICovXG5cdENhbmNlbFRva2VuLnNvdXJjZSA9IGZ1bmN0aW9uIHNvdXJjZSgpIHtcblx0ICB2YXIgY2FuY2VsO1xuXHQgIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG5cdCAgICBjYW5jZWwgPSBjO1xuXHQgIH0pO1xuXHQgIHJldHVybiB7XG5cdCAgICB0b2tlbjogdG9rZW4sXG5cdCAgICBjYW5jZWw6IGNhbmNlbFxuXHQgIH07XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuXG5cbi8qKiovIH0pLFxuLyogMzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cblx0ICpcblx0ICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC5cblx0ICpcblx0ICogIGBgYGpzXG5cdCAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9XG5cdCAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcblx0ICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG5cdCAqICBgYGBcblx0ICpcblx0ICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG5cdCAqXG5cdCAqICBgYGBqc1xuXHQgKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuXHQgKiAgYGBgXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn1cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG5cdCAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF92dWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF92dWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdnVlKTtcblx0XG5cdHZhciBfdnVleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHRcblx0dmFyIF92dWV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdF92dWUyLmRlZmF1bHQudXNlKF92dWV4Mi5kZWZhdWx0KTtcblx0XG5cdHZhciBzdGF0ZSA9IHtcblx0ICAgIGxvYWRTdGF0dXM6IGZhbHNlXG5cdH07XG5cdFxuXHR2YXIgbXV0YXRpb25zID0ge1xuXHQgICAgLy9sb2FkaW5n5byA5YWzXG5cdCAgICBMT0FEX1NUQVRVUzogZnVuY3Rpb24gTE9BRF9TVEFUVVMoc3RhdGUsIGRhdGEpIHtcblx0ICAgICAgICBzdGF0ZS5sb2FkU3RhdHVzID0gZGF0YTtcblx0ICAgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IG5ldyBfdnVleDIuZGVmYXVsdC5TdG9yZSh7XG5cdCAgICBzdGF0ZTogc3RhdGUsXG5cdCAgICBtdXRhdGlvbnM6IG11dGF0aW9uc1xuXHR9KTtcblxuLyoqKi8gfSksXG4vKiAzNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIHZ1ZXggdjMuMC4xXG5cdCAqIChjKSAyMDE3IEV2YW4gWW91XG5cdCAqIEBsaWNlbnNlIE1JVFxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFwcGx5TWl4aW4gPSBmdW5jdGlvbiAoVnVlKSB7XG5cdCAgdmFyIHZlcnNpb24gPSBOdW1iZXIoVnVlLnZlcnNpb24uc3BsaXQoJy4nKVswXSk7XG5cdFxuXHQgIGlmICh2ZXJzaW9uID49IDIpIHtcblx0ICAgIFZ1ZS5taXhpbih7IGJlZm9yZUNyZWF0ZTogdnVleEluaXQgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIG92ZXJyaWRlIGluaXQgYW5kIGluamVjdCB2dWV4IGluaXQgcHJvY2VkdXJlXG5cdCAgICAvLyBmb3IgMS54IGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXHQgICAgdmFyIF9pbml0ID0gVnVlLnByb3RvdHlwZS5faW5pdDtcblx0ICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblx0XG5cdCAgICAgIG9wdGlvbnMuaW5pdCA9IG9wdGlvbnMuaW5pdFxuXHQgICAgICAgID8gW3Z1ZXhJbml0XS5jb25jYXQob3B0aW9ucy5pbml0KVxuXHQgICAgICAgIDogdnVleEluaXQ7XG5cdCAgICAgIF9pbml0LmNhbGwodGhpcywgb3B0aW9ucyk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogVnVleCBpbml0IGhvb2ssIGluamVjdGVkIGludG8gZWFjaCBpbnN0YW5jZXMgaW5pdCBob29rcyBsaXN0LlxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiB2dWV4SW5pdCAoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdCAgICAvLyBzdG9yZSBpbmplY3Rpb25cblx0ICAgIGlmIChvcHRpb25zLnN0b3JlKSB7XG5cdCAgICAgIHRoaXMuJHN0b3JlID0gdHlwZW9mIG9wdGlvbnMuc3RvcmUgPT09ICdmdW5jdGlvbidcblx0ICAgICAgICA/IG9wdGlvbnMuc3RvcmUoKVxuXHQgICAgICAgIDogb3B0aW9ucy5zdG9yZTtcblx0ICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQuJHN0b3JlKSB7XG5cdCAgICAgIHRoaXMuJHN0b3JlID0gb3B0aW9ucy5wYXJlbnQuJHN0b3JlO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBkZXZ0b29sSG9vayA9XG5cdCAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0ICB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblx0XG5cdGZ1bmN0aW9uIGRldnRvb2xQbHVnaW4gKHN0b3JlKSB7XG5cdCAgaWYgKCFkZXZ0b29sSG9vaykgeyByZXR1cm4gfVxuXHRcblx0ICBzdG9yZS5fZGV2dG9vbEhvb2sgPSBkZXZ0b29sSG9vaztcblx0XG5cdCAgZGV2dG9vbEhvb2suZW1pdCgndnVleDppbml0Jywgc3RvcmUpO1xuXHRcblx0ICBkZXZ0b29sSG9vay5vbigndnVleDp0cmF2ZWwtdG8tc3RhdGUnLCBmdW5jdGlvbiAodGFyZ2V0U3RhdGUpIHtcblx0ICAgIHN0b3JlLnJlcGxhY2VTdGF0ZSh0YXJnZXRTdGF0ZSk7XG5cdCAgfSk7XG5cdFxuXHQgIHN0b3JlLnN1YnNjcmliZShmdW5jdGlvbiAobXV0YXRpb24sIHN0YXRlKSB7XG5cdCAgICBkZXZ0b29sSG9vay5lbWl0KCd2dWV4Om11dGF0aW9uJywgbXV0YXRpb24sIHN0YXRlKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgZmlyc3QgaXRlbSB0aGF0IHBhc3MgdGhlIHRlc3Rcblx0ICogYnkgc2Vjb25kIGFyZ3VtZW50IGZ1bmN0aW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGxpc3Rcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0LyoqXG5cdCAqIERlZXAgY29weSB0aGUgZ2l2ZW4gb2JqZWN0IGNvbnNpZGVyaW5nIGNpcmN1bGFyIHN0cnVjdHVyZS5cblx0ICogVGhpcyBmdW5jdGlvbiBjYWNoZXMgYWxsIG5lc3RlZCBvYmplY3RzIGFuZCBpdHMgY29waWVzLlxuXHQgKiBJZiBpdCBkZXRlY3RzIGNpcmN1bGFyIHN0cnVjdHVyZSwgdXNlIGNhY2hlZCBjb3B5IHRvIGF2b2lkIGluZmluaXRlIGxvb3AuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gY2FjaGVcblx0ICogQHJldHVybiB7Kn1cblx0ICovXG5cdFxuXHRcblx0LyoqXG5cdCAqIGZvckVhY2ggZm9yIG9iamVjdFxuXHQgKi9cblx0ZnVuY3Rpb24gZm9yRWFjaFZhbHVlIChvYmosIGZuKSB7XG5cdCAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZuKG9ialtrZXldLCBrZXkpOyB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3QgKG9iaikge1xuXHQgIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCdcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNQcm9taXNlICh2YWwpIHtcblx0ICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwudGhlbiA9PT0gJ2Z1bmN0aW9uJ1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc3NlcnQgKGNvbmRpdGlvbiwgbXNnKSB7XG5cdCAgaWYgKCFjb25kaXRpb24pIHsgdGhyb3cgbmV3IEVycm9yKChcIlt2dWV4XSBcIiArIG1zZykpIH1cblx0fVxuXHRcblx0dmFyIE1vZHVsZSA9IGZ1bmN0aW9uIE1vZHVsZSAocmF3TW9kdWxlLCBydW50aW1lKSB7XG5cdCAgdGhpcy5ydW50aW1lID0gcnVudGltZTtcblx0ICB0aGlzLl9jaGlsZHJlbiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdGhpcy5fcmF3TW9kdWxlID0gcmF3TW9kdWxlO1xuXHQgIHZhciByYXdTdGF0ZSA9IHJhd01vZHVsZS5zdGF0ZTtcblx0ICB0aGlzLnN0YXRlID0gKHR5cGVvZiByYXdTdGF0ZSA9PT0gJ2Z1bmN0aW9uJyA/IHJhd1N0YXRlKCkgOiByYXdTdGF0ZSkgfHwge307XG5cdH07XG5cdFxuXHR2YXIgcHJvdG90eXBlQWNjZXNzb3JzJDEgPSB7IG5hbWVzcGFjZWQ6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTtcblx0XG5cdHByb3RvdHlwZUFjY2Vzc29ycyQxLm5hbWVzcGFjZWQuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiAhIXRoaXMuX3Jhd01vZHVsZS5uYW1lc3BhY2VkXG5cdH07XG5cdFxuXHRNb2R1bGUucHJvdG90eXBlLmFkZENoaWxkID0gZnVuY3Rpb24gYWRkQ2hpbGQgKGtleSwgbW9kdWxlKSB7XG5cdCAgdGhpcy5fY2hpbGRyZW5ba2V5XSA9IG1vZHVsZTtcblx0fTtcblx0XG5cdE1vZHVsZS5wcm90b3R5cGUucmVtb3ZlQ2hpbGQgPSBmdW5jdGlvbiByZW1vdmVDaGlsZCAoa2V5KSB7XG5cdCAgZGVsZXRlIHRoaXMuX2NoaWxkcmVuW2tleV07XG5cdH07XG5cdFxuXHRNb2R1bGUucHJvdG90eXBlLmdldENoaWxkID0gZnVuY3Rpb24gZ2V0Q2hpbGQgKGtleSkge1xuXHQgIHJldHVybiB0aGlzLl9jaGlsZHJlbltrZXldXG5cdH07XG5cdFxuXHRNb2R1bGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAocmF3TW9kdWxlKSB7XG5cdCAgdGhpcy5fcmF3TW9kdWxlLm5hbWVzcGFjZWQgPSByYXdNb2R1bGUubmFtZXNwYWNlZDtcblx0ICBpZiAocmF3TW9kdWxlLmFjdGlvbnMpIHtcblx0ICAgIHRoaXMuX3Jhd01vZHVsZS5hY3Rpb25zID0gcmF3TW9kdWxlLmFjdGlvbnM7XG5cdCAgfVxuXHQgIGlmIChyYXdNb2R1bGUubXV0YXRpb25zKSB7XG5cdCAgICB0aGlzLl9yYXdNb2R1bGUubXV0YXRpb25zID0gcmF3TW9kdWxlLm11dGF0aW9ucztcblx0ICB9XG5cdCAgaWYgKHJhd01vZHVsZS5nZXR0ZXJzKSB7XG5cdCAgICB0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycyA9IHJhd01vZHVsZS5nZXR0ZXJzO1xuXHQgIH1cblx0fTtcblx0XG5cdE1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaENoaWxkID0gZnVuY3Rpb24gZm9yRWFjaENoaWxkIChmbikge1xuXHQgIGZvckVhY2hWYWx1ZSh0aGlzLl9jaGlsZHJlbiwgZm4pO1xuXHR9O1xuXHRcblx0TW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoR2V0dGVyID0gZnVuY3Rpb24gZm9yRWFjaEdldHRlciAoZm4pIHtcblx0ICBpZiAodGhpcy5fcmF3TW9kdWxlLmdldHRlcnMpIHtcblx0ICAgIGZvckVhY2hWYWx1ZSh0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycywgZm4pO1xuXHQgIH1cblx0fTtcblx0XG5cdE1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaEFjdGlvbiA9IGZ1bmN0aW9uIGZvckVhY2hBY3Rpb24gKGZuKSB7XG5cdCAgaWYgKHRoaXMuX3Jhd01vZHVsZS5hY3Rpb25zKSB7XG5cdCAgICBmb3JFYWNoVmFsdWUodGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMsIGZuKTtcblx0ICB9XG5cdH07XG5cdFxuXHRNb2R1bGUucHJvdG90eXBlLmZvckVhY2hNdXRhdGlvbiA9IGZ1bmN0aW9uIGZvckVhY2hNdXRhdGlvbiAoZm4pIHtcblx0ICBpZiAodGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucykge1xuXHQgICAgZm9yRWFjaFZhbHVlKHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMsIGZuKTtcblx0ICB9XG5cdH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggTW9kdWxlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzJDEgKTtcblx0XG5cdHZhciBNb2R1bGVDb2xsZWN0aW9uID0gZnVuY3Rpb24gTW9kdWxlQ29sbGVjdGlvbiAocmF3Um9vdE1vZHVsZSkge1xuXHQgIC8vIHJlZ2lzdGVyIHJvb3QgbW9kdWxlIChWdWV4LlN0b3JlIG9wdGlvbnMpXG5cdCAgdGhpcy5yZWdpc3RlcihbXSwgcmF3Um9vdE1vZHVsZSwgZmFsc2UpO1xuXHR9O1xuXHRcblx0TW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0IChwYXRoKSB7XG5cdCAgcmV0dXJuIHBhdGgucmVkdWNlKGZ1bmN0aW9uIChtb2R1bGUsIGtleSkge1xuXHQgICAgcmV0dXJuIG1vZHVsZS5nZXRDaGlsZChrZXkpXG5cdCAgfSwgdGhpcy5yb290KVxuXHR9O1xuXHRcblx0TW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TmFtZXNwYWNlID0gZnVuY3Rpb24gZ2V0TmFtZXNwYWNlIChwYXRoKSB7XG5cdCAgdmFyIG1vZHVsZSA9IHRoaXMucm9vdDtcblx0ICByZXR1cm4gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwga2V5KSB7XG5cdCAgICBtb2R1bGUgPSBtb2R1bGUuZ2V0Q2hpbGQoa2V5KTtcblx0ICAgIHJldHVybiBuYW1lc3BhY2UgKyAobW9kdWxlLm5hbWVzcGFjZWQgPyBrZXkgKyAnLycgOiAnJylcblx0ICB9LCAnJylcblx0fTtcblx0XG5cdE1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSQxIChyYXdSb290TW9kdWxlKSB7XG5cdCAgdXBkYXRlKFtdLCB0aGlzLnJvb3QsIHJhd1Jvb3RNb2R1bGUpO1xuXHR9O1xuXHRcblx0TW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3RlciAocGF0aCwgcmF3TW9kdWxlLCBydW50aW1lKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0ICAgIGlmICggcnVudGltZSA9PT0gdm9pZCAwICkgcnVudGltZSA9IHRydWU7XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnRSYXdNb2R1bGUocGF0aCwgcmF3TW9kdWxlKTtcblx0ICB9XG5cdFxuXHQgIHZhciBuZXdNb2R1bGUgPSBuZXcgTW9kdWxlKHJhd01vZHVsZSwgcnVudGltZSk7XG5cdCAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG5cdCAgICB0aGlzLnJvb3QgPSBuZXdNb2R1bGU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldChwYXRoLnNsaWNlKDAsIC0xKSk7XG5cdCAgICBwYXJlbnQuYWRkQ2hpbGQocGF0aFtwYXRoLmxlbmd0aCAtIDFdLCBuZXdNb2R1bGUpO1xuXHQgIH1cblx0XG5cdCAgLy8gcmVnaXN0ZXIgbmVzdGVkIG1vZHVsZXNcblx0ICBpZiAocmF3TW9kdWxlLm1vZHVsZXMpIHtcblx0ICAgIGZvckVhY2hWYWx1ZShyYXdNb2R1bGUubW9kdWxlcywgZnVuY3Rpb24gKHJhd0NoaWxkTW9kdWxlLCBrZXkpIHtcblx0ICAgICAgdGhpcyQxLnJlZ2lzdGVyKHBhdGguY29uY2F0KGtleSksIHJhd0NoaWxkTW9kdWxlLCBydW50aW1lKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdE1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLnVucmVnaXN0ZXIgPSBmdW5jdGlvbiB1bnJlZ2lzdGVyIChwYXRoKSB7XG5cdCAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0KHBhdGguc2xpY2UoMCwgLTEpKTtcblx0ICB2YXIga2V5ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuXHQgIGlmICghcGFyZW50LmdldENoaWxkKGtleSkucnVudGltZSkgeyByZXR1cm4gfVxuXHRcblx0ICBwYXJlbnQucmVtb3ZlQ2hpbGQoa2V5KTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZSAocGF0aCwgdGFyZ2V0TW9kdWxlLCBuZXdNb2R1bGUpIHtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgYXNzZXJ0UmF3TW9kdWxlKHBhdGgsIG5ld01vZHVsZSk7XG5cdCAgfVxuXHRcblx0ICAvLyB1cGRhdGUgdGFyZ2V0IG1vZHVsZVxuXHQgIHRhcmdldE1vZHVsZS51cGRhdGUobmV3TW9kdWxlKTtcblx0XG5cdCAgLy8gdXBkYXRlIG5lc3RlZCBtb2R1bGVzXG5cdCAgaWYgKG5ld01vZHVsZS5tb2R1bGVzKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gbmV3TW9kdWxlLm1vZHVsZXMpIHtcblx0ICAgICAgaWYgKCF0YXJnZXRNb2R1bGUuZ2V0Q2hpbGQoa2V5KSkge1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICBjb25zb2xlLndhcm4oXG5cdCAgICAgICAgICAgIFwiW3Z1ZXhdIHRyeWluZyB0byBhZGQgYSBuZXcgbW9kdWxlICdcIiArIGtleSArIFwiJyBvbiBob3QgcmVsb2FkaW5nLCBcIiArXG5cdCAgICAgICAgICAgICdtYW51YWwgcmVsb2FkIGlzIG5lZWRlZCdcblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVyblxuXHQgICAgICB9XG5cdCAgICAgIHVwZGF0ZShcblx0ICAgICAgICBwYXRoLmNvbmNhdChrZXkpLFxuXHQgICAgICAgIHRhcmdldE1vZHVsZS5nZXRDaGlsZChrZXkpLFxuXHQgICAgICAgIG5ld01vZHVsZS5tb2R1bGVzW2tleV1cblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBmdW5jdGlvbkFzc2VydCA9IHtcblx0ICBhc3NlcnQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nOyB9LFxuXHQgIGV4cGVjdGVkOiAnZnVuY3Rpb24nXG5cdH07XG5cdFxuXHR2YXIgb2JqZWN0QXNzZXJ0ID0ge1xuXHQgIGFzc2VydDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgfHxcblx0ICAgICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5oYW5kbGVyID09PSAnZnVuY3Rpb24nKTsgfSxcblx0ICBleHBlY3RlZDogJ2Z1bmN0aW9uIG9yIG9iamVjdCB3aXRoIFwiaGFuZGxlclwiIGZ1bmN0aW9uJ1xuXHR9O1xuXHRcblx0dmFyIGFzc2VydFR5cGVzID0ge1xuXHQgIGdldHRlcnM6IGZ1bmN0aW9uQXNzZXJ0LFxuXHQgIG11dGF0aW9uczogZnVuY3Rpb25Bc3NlcnQsXG5cdCAgYWN0aW9uczogb2JqZWN0QXNzZXJ0XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRSYXdNb2R1bGUgKHBhdGgsIHJhd01vZHVsZSkge1xuXHQgIE9iamVjdC5rZXlzKGFzc2VydFR5cGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghcmF3TW9kdWxlW2tleV0pIHsgcmV0dXJuIH1cblx0XG5cdCAgICB2YXIgYXNzZXJ0T3B0aW9ucyA9IGFzc2VydFR5cGVzW2tleV07XG5cdFxuXHQgICAgZm9yRWFjaFZhbHVlKHJhd01vZHVsZVtrZXldLCBmdW5jdGlvbiAodmFsdWUsIHR5cGUpIHtcblx0ICAgICAgYXNzZXJ0KFxuXHQgICAgICAgIGFzc2VydE9wdGlvbnMuYXNzZXJ0KHZhbHVlKSxcblx0ICAgICAgICBtYWtlQXNzZXJ0aW9uTWVzc2FnZShwYXRoLCBrZXksIHR5cGUsIHZhbHVlLCBhc3NlcnRPcHRpb25zLmV4cGVjdGVkKVxuXHQgICAgICApO1xuXHQgICAgfSk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VBc3NlcnRpb25NZXNzYWdlIChwYXRoLCBrZXksIHR5cGUsIHZhbHVlLCBleHBlY3RlZCkge1xuXHQgIHZhciBidWYgPSBrZXkgKyBcIiBzaG91bGQgYmUgXCIgKyBleHBlY3RlZCArIFwiIGJ1dCBcXFwiXCIgKyBrZXkgKyBcIi5cIiArIHR5cGUgKyBcIlxcXCJcIjtcblx0ICBpZiAocGF0aC5sZW5ndGggPiAwKSB7XG5cdCAgICBidWYgKz0gXCIgaW4gbW9kdWxlIFxcXCJcIiArIChwYXRoLmpvaW4oJy4nKSkgKyBcIlxcXCJcIjtcblx0ICB9XG5cdCAgYnVmICs9IFwiIGlzIFwiICsgKEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgKyBcIi5cIjtcblx0ICByZXR1cm4gYnVmXG5cdH1cblx0XG5cdHZhciBWdWU7IC8vIGJpbmQgb24gaW5zdGFsbFxuXHRcblx0dmFyIFN0b3JlID0gZnVuY3Rpb24gU3RvcmUgKG9wdGlvbnMpIHtcblx0ICB2YXIgdGhpcyQxID0gdGhpcztcblx0ICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblx0XG5cdCAgLy8gQXV0byBpbnN0YWxsIGlmIGl0IGlzIG5vdCBkb25lIHlldCBhbmQgYHdpbmRvd2AgaGFzIGBWdWVgLlxuXHQgIC8vIFRvIGFsbG93IHVzZXJzIHRvIGF2b2lkIGF1dG8taW5zdGFsbGF0aW9uIGluIHNvbWUgY2FzZXMsXG5cdCAgLy8gdGhpcyBjb2RlIHNob3VsZCBiZSBwbGFjZWQgaGVyZS4gU2VlICM3MzFcblx0ICBpZiAoIVZ1ZSAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7XG5cdCAgICBpbnN0YWxsKHdpbmRvdy5WdWUpO1xuXHQgIH1cblx0XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGFzc2VydChWdWUsIFwibXVzdCBjYWxsIFZ1ZS51c2UoVnVleCkgYmVmb3JlIGNyZWF0aW5nIGEgc3RvcmUgaW5zdGFuY2UuXCIpO1xuXHQgICAgYXNzZXJ0KHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJywgXCJ2dWV4IHJlcXVpcmVzIGEgUHJvbWlzZSBwb2x5ZmlsbCBpbiB0aGlzIGJyb3dzZXIuXCIpO1xuXHQgICAgYXNzZXJ0KHRoaXMgaW5zdGFuY2VvZiBTdG9yZSwgXCJTdG9yZSBtdXN0IGJlIGNhbGxlZCB3aXRoIHRoZSBuZXcgb3BlcmF0b3IuXCIpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnM7IGlmICggcGx1Z2lucyA9PT0gdm9pZCAwICkgcGx1Z2lucyA9IFtdO1xuXHQgIHZhciBzdHJpY3QgPSBvcHRpb25zLnN0cmljdDsgaWYgKCBzdHJpY3QgPT09IHZvaWQgMCApIHN0cmljdCA9IGZhbHNlO1xuXHRcblx0ICB2YXIgc3RhdGUgPSBvcHRpb25zLnN0YXRlOyBpZiAoIHN0YXRlID09PSB2b2lkIDAgKSBzdGF0ZSA9IHt9O1xuXHQgIGlmICh0eXBlb2Ygc3RhdGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHN0YXRlID0gc3RhdGUoKSB8fCB7fTtcblx0ICB9XG5cdFxuXHQgIC8vIHN0b3JlIGludGVybmFsIHN0YXRlXG5cdCAgdGhpcy5fY29tbWl0dGluZyA9IGZhbHNlO1xuXHQgIHRoaXMuX2FjdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHRoaXMuX2FjdGlvblN1YnNjcmliZXJzID0gW107XG5cdCAgdGhpcy5fbXV0YXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB0aGlzLl93cmFwcGVkR2V0dGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdGhpcy5fbW9kdWxlcyA9IG5ldyBNb2R1bGVDb2xsZWN0aW9uKG9wdGlvbnMpO1xuXHQgIHRoaXMuX21vZHVsZXNOYW1lc3BhY2VNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cdCAgdGhpcy5fd2F0Y2hlclZNID0gbmV3IFZ1ZSgpO1xuXHRcblx0ICAvLyBiaW5kIGNvbW1pdCBhbmQgZGlzcGF0Y2ggdG8gc2VsZlxuXHQgIHZhciBzdG9yZSA9IHRoaXM7XG5cdCAgdmFyIHJlZiA9IHRoaXM7XG5cdCAgdmFyIGRpc3BhdGNoID0gcmVmLmRpc3BhdGNoO1xuXHQgIHZhciBjb21taXQgPSByZWYuY29tbWl0O1xuXHQgIHRoaXMuZGlzcGF0Y2ggPSBmdW5jdGlvbiBib3VuZERpc3BhdGNoICh0eXBlLCBwYXlsb2FkKSB7XG5cdCAgICByZXR1cm4gZGlzcGF0Y2guY2FsbChzdG9yZSwgdHlwZSwgcGF5bG9hZClcblx0ICB9O1xuXHQgIHRoaXMuY29tbWl0ID0gZnVuY3Rpb24gYm91bmRDb21taXQgKHR5cGUsIHBheWxvYWQsIG9wdGlvbnMpIHtcblx0ICAgIHJldHVybiBjb21taXQuY2FsbChzdG9yZSwgdHlwZSwgcGF5bG9hZCwgb3B0aW9ucylcblx0ICB9O1xuXHRcblx0ICAvLyBzdHJpY3QgbW9kZVxuXHQgIHRoaXMuc3RyaWN0ID0gc3RyaWN0O1xuXHRcblx0ICAvLyBpbml0IHJvb3QgbW9kdWxlLlxuXHQgIC8vIHRoaXMgYWxzbyByZWN1cnNpdmVseSByZWdpc3RlcnMgYWxsIHN1Yi1tb2R1bGVzXG5cdCAgLy8gYW5kIGNvbGxlY3RzIGFsbCBtb2R1bGUgZ2V0dGVycyBpbnNpZGUgdGhpcy5fd3JhcHBlZEdldHRlcnNcblx0ICBpbnN0YWxsTW9kdWxlKHRoaXMsIHN0YXRlLCBbXSwgdGhpcy5fbW9kdWxlcy5yb290KTtcblx0XG5cdCAgLy8gaW5pdGlhbGl6ZSB0aGUgc3RvcmUgdm0sIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgcmVhY3Rpdml0eVxuXHQgIC8vIChhbHNvIHJlZ2lzdGVycyBfd3JhcHBlZEdldHRlcnMgYXMgY29tcHV0ZWQgcHJvcGVydGllcylcblx0ICByZXNldFN0b3JlVk0odGhpcywgc3RhdGUpO1xuXHRcblx0ICAvLyBhcHBseSBwbHVnaW5zXG5cdCAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHsgcmV0dXJuIHBsdWdpbih0aGlzJDEpOyB9KTtcblx0XG5cdCAgaWYgKFZ1ZS5jb25maWcuZGV2dG9vbHMpIHtcblx0ICAgIGRldnRvb2xQbHVnaW4odGhpcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgc3RhdGU6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTtcblx0XG5cdHByb3RvdHlwZUFjY2Vzc29ycy5zdGF0ZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHRoaXMuX3ZtLl9kYXRhLiQkc3RhdGVcblx0fTtcblx0XG5cdHByb3RvdHlwZUFjY2Vzc29ycy5zdGF0ZS5zZXQgPSBmdW5jdGlvbiAodikge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnQoZmFsc2UsIFwiVXNlIHN0b3JlLnJlcGxhY2VTdGF0ZSgpIHRvIGV4cGxpY2l0IHJlcGxhY2Ugc3RvcmUgc3RhdGUuXCIpO1xuXHQgIH1cblx0fTtcblx0XG5cdFN0b3JlLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiBjb21taXQgKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICAvLyBjaGVjayBvYmplY3Qtc3R5bGUgY29tbWl0XG5cdCAgdmFyIHJlZiA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucyk7XG5cdCAgICB2YXIgdHlwZSA9IHJlZi50eXBlO1xuXHQgICAgdmFyIHBheWxvYWQgPSByZWYucGF5bG9hZDtcblx0ICAgIHZhciBvcHRpb25zID0gcmVmLm9wdGlvbnM7XG5cdFxuXHQgIHZhciBtdXRhdGlvbiA9IHsgdHlwZTogdHlwZSwgcGF5bG9hZDogcGF5bG9hZCB9O1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuX211dGF0aW9uc1t0eXBlXTtcblx0ICBpZiAoIWVudHJ5KSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIG11dGF0aW9uIHR5cGU6IFwiICsgdHlwZSkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHQgIHRoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuXHQgICAgZW50cnkuZm9yRWFjaChmdW5jdGlvbiBjb21taXRJdGVyYXRvciAoaGFuZGxlcikge1xuXHQgICAgICBoYW5kbGVyKHBheWxvYWQpO1xuXHQgICAgfSk7XG5cdCAgfSk7XG5cdCAgdGhpcy5fc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIobXV0YXRpb24sIHRoaXMkMS5zdGF0ZSk7IH0pO1xuXHRcblx0ICBpZiAoXG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG5cdCAgICBvcHRpb25zICYmIG9wdGlvbnMuc2lsZW50XG5cdCAgKSB7XG5cdCAgICBjb25zb2xlLndhcm4oXG5cdCAgICAgIFwiW3Z1ZXhdIG11dGF0aW9uIHR5cGU6IFwiICsgdHlwZSArIFwiLiBTaWxlbnQgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWQuIFwiICtcblx0ICAgICAgJ1VzZSB0aGUgZmlsdGVyIGZ1bmN0aW9uYWxpdHkgaW4gdGhlIHZ1ZS1kZXZ0b29scydcblx0ICAgICk7XG5cdCAgfVxuXHR9O1xuXHRcblx0U3RvcmUucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gZGlzcGF0Y2ggKF90eXBlLCBfcGF5bG9hZCkge1xuXHQgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cdFxuXHQgIC8vIGNoZWNrIG9iamVjdC1zdHlsZSBkaXNwYXRjaFxuXHQgIHZhciByZWYgPSB1bmlmeU9iamVjdFN0eWxlKF90eXBlLCBfcGF5bG9hZCk7XG5cdCAgICB2YXIgdHlwZSA9IHJlZi50eXBlO1xuXHQgICAgdmFyIHBheWxvYWQgPSByZWYucGF5bG9hZDtcblx0XG5cdCAgdmFyIGFjdGlvbiA9IHsgdHlwZTogdHlwZSwgcGF5bG9hZDogcGF5bG9hZCB9O1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuX2FjdGlvbnNbdHlwZV07XG5cdCAgaWYgKCFlbnRyeSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gdW5rbm93biBhY3Rpb24gdHlwZTogXCIgKyB0eXBlKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHRoaXMuX2FjdGlvblN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHN1YikgeyByZXR1cm4gc3ViKGFjdGlvbiwgdGhpcyQxLnN0YXRlKTsgfSk7XG5cdFxuXHQgIHJldHVybiBlbnRyeS5sZW5ndGggPiAxXG5cdCAgICA/IFByb21pc2UuYWxsKGVudHJ5Lm1hcChmdW5jdGlvbiAoaGFuZGxlcikgeyByZXR1cm4gaGFuZGxlcihwYXlsb2FkKTsgfSkpXG5cdCAgICA6IGVudHJ5WzBdKHBheWxvYWQpXG5cdH07XG5cdFxuXHRTdG9yZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gc3Vic2NyaWJlIChmbikge1xuXHQgIHJldHVybiBnZW5lcmljU3Vic2NyaWJlKGZuLCB0aGlzLl9zdWJzY3JpYmVycylcblx0fTtcblx0XG5cdFN0b3JlLnByb3RvdHlwZS5zdWJzY3JpYmVBY3Rpb24gPSBmdW5jdGlvbiBzdWJzY3JpYmVBY3Rpb24gKGZuKSB7XG5cdCAgcmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoZm4sIHRoaXMuX2FjdGlvblN1YnNjcmliZXJzKVxuXHR9O1xuXHRcblx0U3RvcmUucHJvdG90eXBlLndhdGNoID0gZnVuY3Rpb24gd2F0Y2ggKGdldHRlciwgY2IsIG9wdGlvbnMpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgYXNzZXJ0KHR5cGVvZiBnZXR0ZXIgPT09ICdmdW5jdGlvbicsIFwic3RvcmUud2F0Y2ggb25seSBhY2NlcHRzIGEgZnVuY3Rpb24uXCIpO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcy5fd2F0Y2hlclZNLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBnZXR0ZXIodGhpcyQxLnN0YXRlLCB0aGlzJDEuZ2V0dGVycyk7IH0sIGNiLCBvcHRpb25zKVxuXHR9O1xuXHRcblx0U3RvcmUucHJvdG90eXBlLnJlcGxhY2VTdGF0ZSA9IGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZSAoc3RhdGUpIHtcblx0ICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXHRcblx0ICB0aGlzLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMkMS5fdm0uX2RhdGEuJCRzdGF0ZSA9IHN0YXRlO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0U3RvcmUucHJvdG90eXBlLnJlZ2lzdGVyTW9kdWxlID0gZnVuY3Rpb24gcmVnaXN0ZXJNb2R1bGUgKHBhdGgsIHJhd01vZHVsZSwgb3B0aW9ucykge1xuXHQgICAgaWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cdFxuXHQgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHsgcGF0aCA9IFtwYXRoXTsgfVxuXHRcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkocGF0aCksIFwibW9kdWxlIHBhdGggbXVzdCBiZSBhIHN0cmluZyBvciBhbiBBcnJheS5cIik7XG5cdCAgICBhc3NlcnQocGF0aC5sZW5ndGggPiAwLCAnY2Fubm90IHJlZ2lzdGVyIHRoZSByb290IG1vZHVsZSBieSB1c2luZyByZWdpc3Rlck1vZHVsZS4nKTtcblx0ICB9XG5cdFxuXHQgIHRoaXMuX21vZHVsZXMucmVnaXN0ZXIocGF0aCwgcmF3TW9kdWxlKTtcblx0ICBpbnN0YWxsTW9kdWxlKHRoaXMsIHRoaXMuc3RhdGUsIHBhdGgsIHRoaXMuX21vZHVsZXMuZ2V0KHBhdGgpLCBvcHRpb25zLnByZXNlcnZlU3RhdGUpO1xuXHQgIC8vIHJlc2V0IHN0b3JlIHRvIHVwZGF0ZSBnZXR0ZXJzLi4uXG5cdCAgcmVzZXRTdG9yZVZNKHRoaXMsIHRoaXMuc3RhdGUpO1xuXHR9O1xuXHRcblx0U3RvcmUucHJvdG90eXBlLnVucmVnaXN0ZXJNb2R1bGUgPSBmdW5jdGlvbiB1bnJlZ2lzdGVyTW9kdWxlIChwYXRoKSB7XG5cdCAgICB2YXIgdGhpcyQxID0gdGhpcztcblx0XG5cdCAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgeyBwYXRoID0gW3BhdGhdOyB9XG5cdFxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShwYXRoKSwgXCJtb2R1bGUgcGF0aCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIEFycmF5LlwiKTtcblx0ICB9XG5cdFxuXHQgIHRoaXMuX21vZHVsZXMudW5yZWdpc3RlcihwYXRoKTtcblx0ICB0aGlzLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBwYXJlbnRTdGF0ZSA9IGdldE5lc3RlZFN0YXRlKHRoaXMkMS5zdGF0ZSwgcGF0aC5zbGljZSgwLCAtMSkpO1xuXHQgICAgVnVlLmRlbGV0ZShwYXJlbnRTdGF0ZSwgcGF0aFtwYXRoLmxlbmd0aCAtIDFdKTtcblx0ICB9KTtcblx0ICByZXNldFN0b3JlKHRoaXMpO1xuXHR9O1xuXHRcblx0U3RvcmUucHJvdG90eXBlLmhvdFVwZGF0ZSA9IGZ1bmN0aW9uIGhvdFVwZGF0ZSAobmV3T3B0aW9ucykge1xuXHQgIHRoaXMuX21vZHVsZXMudXBkYXRlKG5ld09wdGlvbnMpO1xuXHQgIHJlc2V0U3RvcmUodGhpcywgdHJ1ZSk7XG5cdH07XG5cdFxuXHRTdG9yZS5wcm90b3R5cGUuX3dpdGhDb21taXQgPSBmdW5jdGlvbiBfd2l0aENvbW1pdCAoZm4pIHtcblx0ICB2YXIgY29tbWl0dGluZyA9IHRoaXMuX2NvbW1pdHRpbmc7XG5cdCAgdGhpcy5fY29tbWl0dGluZyA9IHRydWU7XG5cdCAgZm4oKTtcblx0ICB0aGlzLl9jb21taXR0aW5nID0gY29tbWl0dGluZztcblx0fTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBTdG9yZS5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyApO1xuXHRcblx0ZnVuY3Rpb24gZ2VuZXJpY1N1YnNjcmliZSAoZm4sIHN1YnMpIHtcblx0ICBpZiAoc3Vicy5pbmRleE9mKGZuKSA8IDApIHtcblx0ICAgIHN1YnMucHVzaChmbik7XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgaSA9IHN1YnMuaW5kZXhPZihmbik7XG5cdCAgICBpZiAoaSA+IC0xKSB7XG5cdCAgICAgIHN1YnMuc3BsaWNlKGksIDEpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzZXRTdG9yZSAoc3RvcmUsIGhvdCkge1xuXHQgIHN0b3JlLl9hY3Rpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBzdG9yZS5fbXV0YXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBzdG9yZS5fd3JhcHBlZEdldHRlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgc3RhdGUgPSBzdG9yZS5zdGF0ZTtcblx0ICAvLyBpbml0IGFsbCBtb2R1bGVzXG5cdCAgaW5zdGFsbE1vZHVsZShzdG9yZSwgc3RhdGUsIFtdLCBzdG9yZS5fbW9kdWxlcy5yb290LCB0cnVlKTtcblx0ICAvLyByZXNldCB2bVxuXHQgIHJlc2V0U3RvcmVWTShzdG9yZSwgc3RhdGUsIGhvdCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc2V0U3RvcmVWTSAoc3RvcmUsIHN0YXRlLCBob3QpIHtcblx0ICB2YXIgb2xkVm0gPSBzdG9yZS5fdm07XG5cdFxuXHQgIC8vIGJpbmQgc3RvcmUgcHVibGljIGdldHRlcnNcblx0ICBzdG9yZS5nZXR0ZXJzID0ge307XG5cdCAgdmFyIHdyYXBwZWRHZXR0ZXJzID0gc3RvcmUuX3dyYXBwZWRHZXR0ZXJzO1xuXHQgIHZhciBjb21wdXRlZCA9IHt9O1xuXHQgIGZvckVhY2hWYWx1ZSh3cmFwcGVkR2V0dGVycywgZnVuY3Rpb24gKGZuLCBrZXkpIHtcblx0ICAgIC8vIHVzZSBjb21wdXRlZCB0byBsZXZlcmFnZSBpdHMgbGF6eS1jYWNoaW5nIG1lY2hhbmlzbVxuXHQgICAgY29tcHV0ZWRba2V5XSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuKHN0b3JlKTsgfTtcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZS5nZXR0ZXJzLCBrZXksIHtcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzdG9yZS5fdm1ba2V5XTsgfSxcblx0ICAgICAgZW51bWVyYWJsZTogdHJ1ZSAvLyBmb3IgbG9jYWwgZ2V0dGVyc1xuXHQgICAgfSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8vIHVzZSBhIFZ1ZSBpbnN0YW5jZSB0byBzdG9yZSB0aGUgc3RhdGUgdHJlZVxuXHQgIC8vIHN1cHByZXNzIHdhcm5pbmdzIGp1c3QgaW4gY2FzZSB0aGUgdXNlciBoYXMgYWRkZWRcblx0ICAvLyBzb21lIGZ1bmt5IGdsb2JhbCBtaXhpbnNcblx0ICB2YXIgc2lsZW50ID0gVnVlLmNvbmZpZy5zaWxlbnQ7XG5cdCAgVnVlLmNvbmZpZy5zaWxlbnQgPSB0cnVlO1xuXHQgIHN0b3JlLl92bSA9IG5ldyBWdWUoe1xuXHQgICAgZGF0YToge1xuXHQgICAgICAkJHN0YXRlOiBzdGF0ZVxuXHQgICAgfSxcblx0ICAgIGNvbXB1dGVkOiBjb21wdXRlZFxuXHQgIH0pO1xuXHQgIFZ1ZS5jb25maWcuc2lsZW50ID0gc2lsZW50O1xuXHRcblx0ICAvLyBlbmFibGUgc3RyaWN0IG1vZGUgZm9yIG5ldyB2bVxuXHQgIGlmIChzdG9yZS5zdHJpY3QpIHtcblx0ICAgIGVuYWJsZVN0cmljdE1vZGUoc3RvcmUpO1xuXHQgIH1cblx0XG5cdCAgaWYgKG9sZFZtKSB7XG5cdCAgICBpZiAoaG90KSB7XG5cdCAgICAgIC8vIGRpc3BhdGNoIGNoYW5nZXMgaW4gYWxsIHN1YnNjcmliZWQgd2F0Y2hlcnNcblx0ICAgICAgLy8gdG8gZm9yY2UgZ2V0dGVyIHJlLWV2YWx1YXRpb24gZm9yIGhvdCByZWxvYWRpbmcuXG5cdCAgICAgIHN0b3JlLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBvbGRWbS5fZGF0YS4kJHN0YXRlID0gbnVsbDtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgeyByZXR1cm4gb2xkVm0uJGRlc3Ryb3koKTsgfSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnN0YWxsTW9kdWxlIChzdG9yZSwgcm9vdFN0YXRlLCBwYXRoLCBtb2R1bGUsIGhvdCkge1xuXHQgIHZhciBpc1Jvb3QgPSAhcGF0aC5sZW5ndGg7XG5cdCAgdmFyIG5hbWVzcGFjZSA9IHN0b3JlLl9tb2R1bGVzLmdldE5hbWVzcGFjZShwYXRoKTtcblx0XG5cdCAgLy8gcmVnaXN0ZXIgaW4gbmFtZXNwYWNlIG1hcFxuXHQgIGlmIChtb2R1bGUubmFtZXNwYWNlZCkge1xuXHQgICAgc3RvcmUuX21vZHVsZXNOYW1lc3BhY2VNYXBbbmFtZXNwYWNlXSA9IG1vZHVsZTtcblx0ICB9XG5cdFxuXHQgIC8vIHNldCBzdGF0ZVxuXHQgIGlmICghaXNSb290ICYmICFob3QpIHtcblx0ICAgIHZhciBwYXJlbnRTdGF0ZSA9IGdldE5lc3RlZFN0YXRlKHJvb3RTdGF0ZSwgcGF0aC5zbGljZSgwLCAtMSkpO1xuXHQgICAgdmFyIG1vZHVsZU5hbWUgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG5cdCAgICBzdG9yZS5fd2l0aENvbW1pdChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIFZ1ZS5zZXQocGFyZW50U3RhdGUsIG1vZHVsZU5hbWUsIG1vZHVsZS5zdGF0ZSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIHZhciBsb2NhbCA9IG1vZHVsZS5jb250ZXh0ID0gbWFrZUxvY2FsQ29udGV4dChzdG9yZSwgbmFtZXNwYWNlLCBwYXRoKTtcblx0XG5cdCAgbW9kdWxlLmZvckVhY2hNdXRhdGlvbihmdW5jdGlvbiAobXV0YXRpb24sIGtleSkge1xuXHQgICAgdmFyIG5hbWVzcGFjZWRUeXBlID0gbmFtZXNwYWNlICsga2V5O1xuXHQgICAgcmVnaXN0ZXJNdXRhdGlvbihzdG9yZSwgbmFtZXNwYWNlZFR5cGUsIG11dGF0aW9uLCBsb2NhbCk7XG5cdCAgfSk7XG5cdFxuXHQgIG1vZHVsZS5mb3JFYWNoQWN0aW9uKGZ1bmN0aW9uIChhY3Rpb24sIGtleSkge1xuXHQgICAgdmFyIHR5cGUgPSBhY3Rpb24ucm9vdCA/IGtleSA6IG5hbWVzcGFjZSArIGtleTtcblx0ICAgIHZhciBoYW5kbGVyID0gYWN0aW9uLmhhbmRsZXIgfHwgYWN0aW9uO1xuXHQgICAgcmVnaXN0ZXJBY3Rpb24oc3RvcmUsIHR5cGUsIGhhbmRsZXIsIGxvY2FsKTtcblx0ICB9KTtcblx0XG5cdCAgbW9kdWxlLmZvckVhY2hHZXR0ZXIoZnVuY3Rpb24gKGdldHRlciwga2V5KSB7XG5cdCAgICB2YXIgbmFtZXNwYWNlZFR5cGUgPSBuYW1lc3BhY2UgKyBrZXk7XG5cdCAgICByZWdpc3RlckdldHRlcihzdG9yZSwgbmFtZXNwYWNlZFR5cGUsIGdldHRlciwgbG9jYWwpO1xuXHQgIH0pO1xuXHRcblx0ICBtb2R1bGUuZm9yRWFjaENoaWxkKGZ1bmN0aW9uIChjaGlsZCwga2V5KSB7XG5cdCAgICBpbnN0YWxsTW9kdWxlKHN0b3JlLCByb290U3RhdGUsIHBhdGguY29uY2F0KGtleSksIGNoaWxkLCBob3QpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogbWFrZSBsb2NhbGl6ZWQgZGlzcGF0Y2gsIGNvbW1pdCwgZ2V0dGVycyBhbmQgc3RhdGVcblx0ICogaWYgdGhlcmUgaXMgbm8gbmFtZXNwYWNlLCBqdXN0IHVzZSByb290IG9uZXNcblx0ICovXG5cdGZ1bmN0aW9uIG1ha2VMb2NhbENvbnRleHQgKHN0b3JlLCBuYW1lc3BhY2UsIHBhdGgpIHtcblx0ICB2YXIgbm9OYW1lc3BhY2UgPSBuYW1lc3BhY2UgPT09ICcnO1xuXHRcblx0ICB2YXIgbG9jYWwgPSB7XG5cdCAgICBkaXNwYXRjaDogbm9OYW1lc3BhY2UgPyBzdG9yZS5kaXNwYXRjaCA6IGZ1bmN0aW9uIChfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKSB7XG5cdCAgICAgIHZhciBhcmdzID0gdW5pZnlPYmplY3RTdHlsZShfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKTtcblx0ICAgICAgdmFyIHBheWxvYWQgPSBhcmdzLnBheWxvYWQ7XG5cdCAgICAgIHZhciBvcHRpb25zID0gYXJncy5vcHRpb25zO1xuXHQgICAgICB2YXIgdHlwZSA9IGFyZ3MudHlwZTtcblx0XG5cdCAgICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5yb290KSB7XG5cdCAgICAgICAgdHlwZSA9IG5hbWVzcGFjZSArIHR5cGU7XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXN0b3JlLl9hY3Rpb25zW3R5cGVdKSB7XG5cdCAgICAgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIGxvY2FsIGFjdGlvbiB0eXBlOiBcIiArIChhcmdzLnR5cGUpICsgXCIsIGdsb2JhbCB0eXBlOiBcIiArIHR5cGUpKTtcblx0ICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKHR5cGUsIHBheWxvYWQpXG5cdCAgICB9LFxuXHRcblx0ICAgIGNvbW1pdDogbm9OYW1lc3BhY2UgPyBzdG9yZS5jb21taXQgOiBmdW5jdGlvbiAoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucykge1xuXHQgICAgICB2YXIgYXJncyA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucyk7XG5cdCAgICAgIHZhciBwYXlsb2FkID0gYXJncy5wYXlsb2FkO1xuXHQgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3Mub3B0aW9ucztcblx0ICAgICAgdmFyIHR5cGUgPSBhcmdzLnR5cGU7XG5cdFxuXHQgICAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMucm9vdCkge1xuXHQgICAgICAgIHR5cGUgPSBuYW1lc3BhY2UgKyB0eXBlO1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFzdG9yZS5fbXV0YXRpb25zW3R5cGVdKSB7XG5cdCAgICAgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIGxvY2FsIG11dGF0aW9uIHR5cGU6IFwiICsgKGFyZ3MudHlwZSkgKyBcIiwgZ2xvYmFsIHR5cGU6IFwiICsgdHlwZSkpO1xuXHQgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBzdG9yZS5jb21taXQodHlwZSwgcGF5bG9hZCwgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLy8gZ2V0dGVycyBhbmQgc3RhdGUgb2JqZWN0IG11c3QgYmUgZ290dGVuIGxhemlseVxuXHQgIC8vIGJlY2F1c2UgdGhleSB3aWxsIGJlIGNoYW5nZWQgYnkgdm0gdXBkYXRlXG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobG9jYWwsIHtcblx0ICAgIGdldHRlcnM6IHtcblx0ICAgICAgZ2V0OiBub05hbWVzcGFjZVxuXHQgICAgICAgID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RvcmUuZ2V0dGVyczsgfVxuXHQgICAgICAgIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbWFrZUxvY2FsR2V0dGVycyhzdG9yZSwgbmFtZXNwYWNlKTsgfVxuXHQgICAgfSxcblx0ICAgIHN0YXRlOiB7XG5cdCAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TmVzdGVkU3RhdGUoc3RvcmUuc3RhdGUsIHBhdGgpOyB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBsb2NhbFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTG9jYWxHZXR0ZXJzIChzdG9yZSwgbmFtZXNwYWNlKSB7XG5cdCAgdmFyIGdldHRlcnNQcm94eSA9IHt9O1xuXHRcblx0ICB2YXIgc3BsaXRQb3MgPSBuYW1lc3BhY2UubGVuZ3RoO1xuXHQgIE9iamVjdC5rZXlzKHN0b3JlLmdldHRlcnMpLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgIC8vIHNraXAgaWYgdGhlIHRhcmdldCBnZXR0ZXIgaXMgbm90IG1hdGNoIHRoaXMgbmFtZXNwYWNlXG5cdCAgICBpZiAodHlwZS5zbGljZSgwLCBzcGxpdFBvcykgIT09IG5hbWVzcGFjZSkgeyByZXR1cm4gfVxuXHRcblx0ICAgIC8vIGV4dHJhY3QgbG9jYWwgZ2V0dGVyIHR5cGVcblx0ICAgIHZhciBsb2NhbFR5cGUgPSB0eXBlLnNsaWNlKHNwbGl0UG9zKTtcblx0XG5cdCAgICAvLyBBZGQgYSBwb3J0IHRvIHRoZSBnZXR0ZXJzIHByb3h5LlxuXHQgICAgLy8gRGVmaW5lIGFzIGdldHRlciBwcm9wZXJ0eSBiZWNhdXNlXG5cdCAgICAvLyB3ZSBkbyBub3Qgd2FudCB0byBldmFsdWF0ZSB0aGUgZ2V0dGVycyBpbiB0aGlzIHRpbWUuXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2V0dGVyc1Byb3h5LCBsb2NhbFR5cGUsIHtcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzdG9yZS5nZXR0ZXJzW3R5cGVdOyB9LFxuXHQgICAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGdldHRlcnNQcm94eVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWdpc3Rlck11dGF0aW9uIChzdG9yZSwgdHlwZSwgaGFuZGxlciwgbG9jYWwpIHtcblx0ICB2YXIgZW50cnkgPSBzdG9yZS5fbXV0YXRpb25zW3R5cGVdIHx8IChzdG9yZS5fbXV0YXRpb25zW3R5cGVdID0gW10pO1xuXHQgIGVudHJ5LnB1c2goZnVuY3Rpb24gd3JhcHBlZE11dGF0aW9uSGFuZGxlciAocGF5bG9hZCkge1xuXHQgICAgaGFuZGxlci5jYWxsKHN0b3JlLCBsb2NhbC5zdGF0ZSwgcGF5bG9hZCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlZ2lzdGVyQWN0aW9uIChzdG9yZSwgdHlwZSwgaGFuZGxlciwgbG9jYWwpIHtcblx0ICB2YXIgZW50cnkgPSBzdG9yZS5fYWN0aW9uc1t0eXBlXSB8fCAoc3RvcmUuX2FjdGlvbnNbdHlwZV0gPSBbXSk7XG5cdCAgZW50cnkucHVzaChmdW5jdGlvbiB3cmFwcGVkQWN0aW9uSGFuZGxlciAocGF5bG9hZCwgY2IpIHtcblx0ICAgIHZhciByZXMgPSBoYW5kbGVyLmNhbGwoc3RvcmUsIHtcblx0ICAgICAgZGlzcGF0Y2g6IGxvY2FsLmRpc3BhdGNoLFxuXHQgICAgICBjb21taXQ6IGxvY2FsLmNvbW1pdCxcblx0ICAgICAgZ2V0dGVyczogbG9jYWwuZ2V0dGVycyxcblx0ICAgICAgc3RhdGU6IGxvY2FsLnN0YXRlLFxuXHQgICAgICByb290R2V0dGVyczogc3RvcmUuZ2V0dGVycyxcblx0ICAgICAgcm9vdFN0YXRlOiBzdG9yZS5zdGF0ZVxuXHQgICAgfSwgcGF5bG9hZCwgY2IpO1xuXHQgICAgaWYgKCFpc1Byb21pc2UocmVzKSkge1xuXHQgICAgICByZXMgPSBQcm9taXNlLnJlc29sdmUocmVzKTtcblx0ICAgIH1cblx0ICAgIGlmIChzdG9yZS5fZGV2dG9vbEhvb2spIHtcblx0ICAgICAgcmV0dXJuIHJlcy5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgc3RvcmUuX2RldnRvb2xIb29rLmVtaXQoJ3Z1ZXg6ZXJyb3InLCBlcnIpO1xuXHQgICAgICAgIHRocm93IGVyclxuXHQgICAgICB9KVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHJlc1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWdpc3RlckdldHRlciAoc3RvcmUsIHR5cGUsIHJhd0dldHRlciwgbG9jYWwpIHtcblx0ICBpZiAoc3RvcmUuX3dyYXBwZWRHZXR0ZXJzW3R5cGVdKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSBkdXBsaWNhdGUgZ2V0dGVyIGtleTogXCIgKyB0eXBlKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgc3RvcmUuX3dyYXBwZWRHZXR0ZXJzW3R5cGVdID0gZnVuY3Rpb24gd3JhcHBlZEdldHRlciAoc3RvcmUpIHtcblx0ICAgIHJldHVybiByYXdHZXR0ZXIoXG5cdCAgICAgIGxvY2FsLnN0YXRlLCAvLyBsb2NhbCBzdGF0ZVxuXHQgICAgICBsb2NhbC5nZXR0ZXJzLCAvLyBsb2NhbCBnZXR0ZXJzXG5cdCAgICAgIHN0b3JlLnN0YXRlLCAvLyByb290IHN0YXRlXG5cdCAgICAgIHN0b3JlLmdldHRlcnMgLy8gcm9vdCBnZXR0ZXJzXG5cdCAgICApXG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlU3RyaWN0TW9kZSAoc3RvcmUpIHtcblx0ICBzdG9yZS5fdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2RhdGEuJCRzdGF0ZSB9LCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBhc3NlcnQoc3RvcmUuX2NvbW1pdHRpbmcsIFwiRG8gbm90IG11dGF0ZSB2dWV4IHN0b3JlIHN0YXRlIG91dHNpZGUgbXV0YXRpb24gaGFuZGxlcnMuXCIpO1xuXHQgICAgfVxuXHQgIH0sIHsgZGVlcDogdHJ1ZSwgc3luYzogdHJ1ZSB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0TmVzdGVkU3RhdGUgKHN0YXRlLCBwYXRoKSB7XG5cdCAgcmV0dXJuIHBhdGgubGVuZ3RoXG5cdCAgICA/IHBhdGgucmVkdWNlKGZ1bmN0aW9uIChzdGF0ZSwga2V5KSB7IHJldHVybiBzdGF0ZVtrZXldOyB9LCBzdGF0ZSlcblx0ICAgIDogc3RhdGVcblx0fVxuXHRcblx0ZnVuY3Rpb24gdW5pZnlPYmplY3RTdHlsZSAodHlwZSwgcGF5bG9hZCwgb3B0aW9ucykge1xuXHQgIGlmIChpc09iamVjdCh0eXBlKSAmJiB0eXBlLnR5cGUpIHtcblx0ICAgIG9wdGlvbnMgPSBwYXlsb2FkO1xuXHQgICAgcGF5bG9hZCA9IHR5cGU7XG5cdCAgICB0eXBlID0gdHlwZS50eXBlO1xuXHQgIH1cblx0XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGFzc2VydCh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycsIChcIkV4cGVjdHMgc3RyaW5nIGFzIHRoZSB0eXBlLCBidXQgZm91bmQgXCIgKyAodHlwZW9mIHR5cGUpICsgXCIuXCIpKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB7IHR5cGU6IHR5cGUsIHBheWxvYWQ6IHBheWxvYWQsIG9wdGlvbnM6IG9wdGlvbnMgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnN0YWxsIChfVnVlKSB7XG5cdCAgaWYgKFZ1ZSAmJiBfVnVlID09PSBWdWUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoXG5cdCAgICAgICAgJ1t2dWV4XSBhbHJlYWR5IGluc3RhbGxlZC4gVnVlLnVzZShWdWV4KSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdCAgVnVlID0gX1Z1ZTtcblx0ICBhcHBseU1peGluKFZ1ZSk7XG5cdH1cblx0XG5cdHZhciBtYXBTdGF0ZSA9IG5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBzdGF0ZXMpIHtcblx0ICB2YXIgcmVzID0ge307XG5cdCAgbm9ybWFsaXplTWFwKHN0YXRlcykuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7XG5cdCAgICB2YXIga2V5ID0gcmVmLmtleTtcblx0ICAgIHZhciB2YWwgPSByZWYudmFsO1xuXHRcblx0ICAgIHJlc1trZXldID0gZnVuY3Rpb24gbWFwcGVkU3RhdGUgKCkge1xuXHQgICAgICB2YXIgc3RhdGUgPSB0aGlzLiRzdG9yZS5zdGF0ZTtcblx0ICAgICAgdmFyIGdldHRlcnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzO1xuXHQgICAgICBpZiAobmFtZXNwYWNlKSB7XG5cdCAgICAgICAgdmFyIG1vZHVsZSA9IGdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCAnbWFwU3RhdGUnLCBuYW1lc3BhY2UpO1xuXHQgICAgICAgIGlmICghbW9kdWxlKSB7XG5cdCAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhdGUgPSBtb2R1bGUuY29udGV4dC5zdGF0ZTtcblx0ICAgICAgICBnZXR0ZXJzID0gbW9kdWxlLmNvbnRleHQuZ2V0dGVycztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgICAgID8gdmFsLmNhbGwodGhpcywgc3RhdGUsIGdldHRlcnMpXG5cdCAgICAgICAgOiBzdGF0ZVt2YWxdXG5cdCAgICB9O1xuXHQgICAgLy8gbWFyayB2dWV4IGdldHRlciBmb3IgZGV2dG9vbHNcblx0ICAgIHJlc1trZXldLnZ1ZXggPSB0cnVlO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXNcblx0fSk7XG5cdFxuXHR2YXIgbWFwTXV0YXRpb25zID0gbm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIG11dGF0aW9ucykge1xuXHQgIHZhciByZXMgPSB7fTtcblx0ICBub3JtYWxpemVNYXAobXV0YXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcblx0ICAgIHZhciBrZXkgPSByZWYua2V5O1xuXHQgICAgdmFyIHZhbCA9IHJlZi52YWw7XG5cdFxuXHQgICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRNdXRhdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07XG5cdFxuXHQgICAgICB2YXIgY29tbWl0ID0gdGhpcy4kc3RvcmUuY29tbWl0O1xuXHQgICAgICBpZiAobmFtZXNwYWNlKSB7XG5cdCAgICAgICAgdmFyIG1vZHVsZSA9IGdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCAnbWFwTXV0YXRpb25zJywgbmFtZXNwYWNlKTtcblx0ICAgICAgICBpZiAoIW1vZHVsZSkge1xuXHQgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNvbW1pdCA9IG1vZHVsZS5jb250ZXh0LmNvbW1pdDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgICAgID8gdmFsLmFwcGx5KHRoaXMsIFtjb21taXRdLmNvbmNhdChhcmdzKSlcblx0ICAgICAgICA6IGNvbW1pdC5hcHBseSh0aGlzLiRzdG9yZSwgW3ZhbF0uY29uY2F0KGFyZ3MpKVxuXHQgICAgfTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzXG5cdH0pO1xuXHRcblx0dmFyIG1hcEdldHRlcnMgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgZ2V0dGVycykge1xuXHQgIHZhciByZXMgPSB7fTtcblx0ICBub3JtYWxpemVNYXAoZ2V0dGVycykuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7XG5cdCAgICB2YXIga2V5ID0gcmVmLmtleTtcblx0ICAgIHZhciB2YWwgPSByZWYudmFsO1xuXHRcblx0ICAgIHZhbCA9IG5hbWVzcGFjZSArIHZhbDtcblx0ICAgIHJlc1trZXldID0gZnVuY3Rpb24gbWFwcGVkR2V0dGVyICgpIHtcblx0ICAgICAgaWYgKG5hbWVzcGFjZSAmJiAhZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBHZXR0ZXJzJywgbmFtZXNwYWNlKSkge1xuXHQgICAgICAgIHJldHVyblxuXHQgICAgICB9XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICEodmFsIGluIHRoaXMuJHN0b3JlLmdldHRlcnMpKSB7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gdW5rbm93biBnZXR0ZXI6IFwiICsgdmFsKSk7XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbdmFsXVxuXHQgICAgfTtcblx0ICAgIC8vIG1hcmsgdnVleCBnZXR0ZXIgZm9yIGRldnRvb2xzXG5cdCAgICByZXNba2V5XS52dWV4ID0gdHJ1ZTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzXG5cdH0pO1xuXHRcblx0dmFyIG1hcEFjdGlvbnMgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgYWN0aW9ucykge1xuXHQgIHZhciByZXMgPSB7fTtcblx0ICBub3JtYWxpemVNYXAoYWN0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7XG5cdCAgICB2YXIga2V5ID0gcmVmLmtleTtcblx0ICAgIHZhciB2YWwgPSByZWYudmFsO1xuXHRcblx0ICAgIHJlc1trZXldID0gZnVuY3Rpb24gbWFwcGVkQWN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTtcblx0XG5cdCAgICAgIHZhciBkaXNwYXRjaCA9IHRoaXMuJHN0b3JlLmRpc3BhdGNoO1xuXHQgICAgICBpZiAobmFtZXNwYWNlKSB7XG5cdCAgICAgICAgdmFyIG1vZHVsZSA9IGdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCAnbWFwQWN0aW9ucycsIG5hbWVzcGFjZSk7XG5cdCAgICAgICAgaWYgKCFtb2R1bGUpIHtcblx0ICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblx0ICAgICAgICBkaXNwYXRjaCA9IG1vZHVsZS5jb250ZXh0LmRpc3BhdGNoO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nXG5cdCAgICAgICAgPyB2YWwuYXBwbHkodGhpcywgW2Rpc3BhdGNoXS5jb25jYXQoYXJncykpXG5cdCAgICAgICAgOiBkaXNwYXRjaC5hcHBseSh0aGlzLiRzdG9yZSwgW3ZhbF0uY29uY2F0KGFyZ3MpKVxuXHQgICAgfTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzXG5cdH0pO1xuXHRcblx0dmFyIGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzID0gZnVuY3Rpb24gKG5hbWVzcGFjZSkgeyByZXR1cm4gKHtcblx0ICBtYXBTdGF0ZTogbWFwU3RhdGUuYmluZChudWxsLCBuYW1lc3BhY2UpLFxuXHQgIG1hcEdldHRlcnM6IG1hcEdldHRlcnMuYmluZChudWxsLCBuYW1lc3BhY2UpLFxuXHQgIG1hcE11dGF0aW9uczogbWFwTXV0YXRpb25zLmJpbmQobnVsbCwgbmFtZXNwYWNlKSxcblx0ICBtYXBBY3Rpb25zOiBtYXBBY3Rpb25zLmJpbmQobnVsbCwgbmFtZXNwYWNlKVxuXHR9KTsgfTtcblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZU1hcCAobWFwKSB7XG5cdCAgcmV0dXJuIEFycmF5LmlzQXJyYXkobWFwKVxuXHQgICAgPyBtYXAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuICh7IGtleToga2V5LCB2YWw6IGtleSB9KTsgfSlcblx0ICAgIDogT2JqZWN0LmtleXMobWFwKS5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKHsga2V5OiBrZXksIHZhbDogbWFwW2tleV0gfSk7IH0pXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWVzcGFjZSAoZm4pIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gKG5hbWVzcGFjZSwgbWFwKSB7XG5cdCAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgbWFwID0gbmFtZXNwYWNlO1xuXHQgICAgICBuYW1lc3BhY2UgPSAnJztcblx0ICAgIH0gZWxzZSBpZiAobmFtZXNwYWNlLmNoYXJBdChuYW1lc3BhY2UubGVuZ3RoIC0gMSkgIT09ICcvJykge1xuXHQgICAgICBuYW1lc3BhY2UgKz0gJy8nO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZuKG5hbWVzcGFjZSwgbWFwKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0TW9kdWxlQnlOYW1lc3BhY2UgKHN0b3JlLCBoZWxwZXIsIG5hbWVzcGFjZSkge1xuXHQgIHZhciBtb2R1bGUgPSBzdG9yZS5fbW9kdWxlc05hbWVzcGFjZU1hcFtuYW1lc3BhY2VdO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFtb2R1bGUpIHtcblx0ICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIG1vZHVsZSBuYW1lc3BhY2Ugbm90IGZvdW5kIGluIFwiICsgaGVscGVyICsgXCIoKTogXCIgKyBuYW1lc3BhY2UpKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1vZHVsZVxuXHR9XG5cdFxuXHR2YXIgaW5kZXggPSB7XG5cdCAgU3RvcmU6IFN0b3JlLFxuXHQgIGluc3RhbGw6IGluc3RhbGwsXG5cdCAgdmVyc2lvbjogJzMuMC4xJyxcblx0ICBtYXBTdGF0ZTogbWFwU3RhdGUsXG5cdCAgbWFwTXV0YXRpb25zOiBtYXBNdXRhdGlvbnMsXG5cdCAgbWFwR2V0dGVyczogbWFwR2V0dGVycyxcblx0ICBtYXBBY3Rpb25zOiBtYXBBY3Rpb25zLFxuXHQgIGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzOiBjcmVhdGVOYW1lc3BhY2VkSGVscGVyc1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbmRleDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKSlcblxuLyoqKi8gfSksXG4vKiAzNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9leHBvcnRzX18sIF9fdnVlX29wdGlvbnNfX1xuXHR2YXIgX192dWVfc3R5bGVzX18gPSB7fVxuXHRcblx0Lyogc2NyaXB0ICovXG5cdF9fdnVlX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpXG5cdFxuXHQvKiB0ZW1wbGF0ZSAqL1xuXHR2YXIgX192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpXG5cdF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXyB8fCB7fVxuXHRpZiAoXG5cdCAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcIm9iamVjdFwiIHx8XG5cdCAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0XG5cdH1cblx0aWYgKHR5cGVvZiBfX3Z1ZV9vcHRpb25zX18gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgIF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX29wdGlvbnNfXy5vcHRpb25zXG5cdH1cblx0XG5cdF9fdnVlX29wdGlvbnNfXy5yZW5kZXIgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnJlbmRlclxuXHRfX3Z1ZV9vcHRpb25zX18uc3RhdGljUmVuZGVyRm5zID0gX192dWVfdGVtcGxhdGVfXy5zdGF0aWNSZW5kZXJGbnNcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfZXhwb3J0c19fXG5cblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdFxuXHR2YXIgX3Z1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3Z1ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92dWUpO1xuXHRcblx0dmFyIF9sb2FkaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHR2YXIgX2xvYWRpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9hZGluZyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X3Z1ZTIuZGVmYXVsdC5jb21wb25lbnQoJ2xvYWRpbmcnLCBfbG9hZGluZzIuZGVmYXVsdCk7IC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHRpdGxlOiAnSGVsbG8gV29ybGQnXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiAzOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuLyogMzkgKi8sXG4vKiA0MCAqLyxcbi8qIDQxICovLFxuLyogNDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfZXhwb3J0c19fLCBfX3Z1ZV9vcHRpb25zX19cblx0dmFyIF9fdnVlX3N0eWxlc19fID0ge31cblx0XG5cdC8qIHNjcmlwdCAqL1xuXHRfX3Z1ZV9leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKVxuXHRcblx0LyogdGVtcGxhdGUgKi9cblx0dmFyIF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KVxuXHRfX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9leHBvcnRzX18gPSBfX3Z1ZV9leHBvcnRzX18gfHwge31cblx0aWYgKFxuXHQgIHR5cGVvZiBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdCA9PT0gXCJvYmplY3RcIiB8fFxuXHQgIHR5cGVvZiBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRfX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9leHBvcnRzX18gPSBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdFxuXHR9XG5cdGlmICh0eXBlb2YgX192dWVfb3B0aW9uc19fID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICBfX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9vcHRpb25zX18ub3B0aW9uc1xuXHR9XG5cdFxuXHRfX3Z1ZV9vcHRpb25zX18ucmVuZGVyID0gX192dWVfdGVtcGxhdGVfXy5yZW5kZXJcblx0X192dWVfb3B0aW9uc19fLnN0YXRpY1JlbmRlckZucyA9IF9fdnVlX3RlbXBsYXRlX18uc3RhdGljUmVuZGVyRm5zXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX2V4cG9ydHNfX1xuXG5cbi8qKiovIH0pLFxuLyogNDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHRcblx0dmFyIF9zdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0dmFyIF9zdG9yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdG9yZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly9cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wdXRlZDoge1xuXHQgICAgbG9hZFN0YXR1czogZnVuY3Rpb24gbG9hZFN0YXR1cygpIHtcblx0ICAgICAgcmV0dXJuIF9zdG9yZTIuZGVmYXVsdC5zdGF0ZS5sb2FkU3RhdHVzO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiA0NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuLyogNDUgKi8sXG4vKiA0NiAqLyxcbi8qIDQ3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHM9e3JlbmRlcjpmdW5jdGlvbiAoKXt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtcblx0ICByZXR1cm4gKF92bS5sb2FkU3RhdHVzKSA/IF9jKCdkaXYnLCB7XG5cdCAgICBzdGF0aWNDbGFzczogXCJsb2FkaW5nXCJcblx0ICB9KSA6IF92bS5fZSgpXG5cdH0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuLyoqKi8gfSksXG4vKiA0OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG5cdCAgcmV0dXJuIF9jKCdkaXYnLCB7XG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcImlkXCI6IFwiYXBwXCJcblx0ICAgIH1cblx0ICB9LCBbX2MoJ2gxJywgW192bS5fdihfdm0uX3MoX3ZtLnRpdGxlKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3JvdXRlci12aWV3Jywge1xuXHQgICAgYXR0cnM6IHtcblx0ICAgICAgXCJrZWVwLWFsaXZlXCI6IFwiXCJcblx0ICAgIH1cblx0ICB9KSwgX3ZtLl92KFwiIFwiKSwgX2MoJ2xvYWRpbmcnKV0sIDEpXG5cdH0sc3RhdGljUmVuZGVyRm5zOiBbXX1cblxuLyoqKi8gfSksXG4vKiA0OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9leHBvcnRzX18sIF9fdnVlX29wdGlvbnNfX1xuXHR2YXIgX192dWVfc3R5bGVzX18gPSB7fVxuXHRcblx0Lyogc2NyaXB0ICovXG5cdF9fdnVlX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdFxuXHQvKiB0ZW1wbGF0ZSAqL1xuXHR2YXIgX192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpXG5cdF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXyB8fCB7fVxuXHRpZiAoXG5cdCAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcIm9iamVjdFwiIHx8XG5cdCAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0XG5cdH1cblx0aWYgKHR5cGVvZiBfX3Z1ZV9vcHRpb25zX18gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgIF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX29wdGlvbnNfXy5vcHRpb25zXG5cdH1cblx0XG5cdF9fdnVlX29wdGlvbnNfXy5yZW5kZXIgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnJlbmRlclxuXHRfX3Z1ZV9vcHRpb25zX18uc3RhdGljUmVuZGVyRm5zID0gX192dWVfdGVtcGxhdGVfXy5zdGF0aWNSZW5kZXJGbnNcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfZXhwb3J0c19fXG5cblxuLyoqKi8gfSksXG4vKiA1MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0XG5cdHZhciBfc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0XG5cdHZhciBfc3RvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RvcmUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vXG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuXHQgICAgICAgIF9zdG9yZTIuZGVmYXVsdC5jb21taXQoJ0xPQURfU1RBVFVTJywgZmFsc2UpO1xuXHQgICAgfSxcblx0ICAgIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7XG5cdCAgICAgICAgdGhpcy5zaG93TG9hZGluZygpO1xuXHQgICAgfSxcblx0XG5cdFxuXHQgICAgbWV0aG9kczoge1xuXHQgICAgICAgIHNob3dMb2FkaW5nOiBmdW5jdGlvbiBzaG93TG9hZGluZygpIHtcblx0ICAgICAgICAgICAgX3N0b3JlMi5kZWZhdWx0LmNvbW1pdCgnTE9BRF9TVEFUVVMnLCB0cnVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDUyICovLFxuLyogNTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuXHQgIHJldHVybiBfYygnZGl2Jywge1xuXHQgICAgc3RhdGljQ2xhc3M6IFwiYm94XCJcblx0ICB9LCBbX2MoJ2EnLCB7XG5cdCAgICBhdHRyczoge1xuXHQgICAgICBcImhyZWZcIjogXCJqYXZhc2NyaXB0OnZvaWQoMClcIlxuXHQgICAgfSxcblx0ICAgIG9uOiB7XG5cdCAgICAgIFwiY2xpY2tcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG5cdCAgICAgICAgX3ZtLnNob3dMb2FkaW5nKClcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIFtfdm0uX3YoXCLmmL7npLpsb2FkaW5nXCIpXSldKVxuXHR9LHN0YXRpY1JlbmRlckZuczogW119XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvaW5kZXguanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgYWRlNjAxYTExOWNhODY4YTI5OTAiLCJpbXBvcnQgJ2VzNi1wcm9taXNlL2F1dG8nXG5cbmltcG9ydCBWdWUgZnJvbSAndnVlJ1xuaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJ1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuaW1wb3J0IHN0b3JlIGZyb20gJy4vdnVleC9zdG9yZSdcbmltcG9ydCBBcHAgZnJvbSAnLi9hcHAnXG5cblZ1ZS51c2UoVnVlUm91dGVyKTtcblZ1ZS5wcm90b3R5cGUuJGh0dHAgPSBheGlvcztcblxuaW1wb3J0IGluZGV4IGZyb20gJy4vdmlldy9pbmRleC9pbmRleC52dWUnXG5cbmNvbnN0IF9yb3V0ZXMgPSBbXG4gICAge1xuICAgICAgICBwYXRoOiAnL2luZGV4JyxcbiAgICAgICAgbmFtZTonaW5kZXgnLFxuICAgICAgICBjb21wb25lbnQ6IGluZGV4XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBhdGg6ICcqJyxcbiAgICAgICAgcmVkaXJlY3Q6ICcvaW5kZXgnXG4gICAgfVxuXTtcblxuY29uc3Qgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7XG4gICAgcm91dGVzOl9yb3V0ZXNcbn0pXG5cbmNvbnN0IGFwcCA9IG5ldyBWdWUoe1xuICAgICAgICBlbDogJyNhcHAnLFxuICAgICAgICByb3V0ZXIsXG4gICAgICAgIHN0b3JlLFxuICAgICAgICByZW5kZXI6IGggPT4gaChBcHApXG59KS4kbW91bnQoJyNhcHAnKVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LmpzIiwiLy8gVGhpcyBmaWxlIGNhbiBiZSByZXF1aXJlZCBpbiBCcm93c2VyaWZ5IGFuZCBOb2RlLmpzIGZvciBhdXRvbWF0aWMgcG9seWZpbGxcbi8vIFRvIHVzZSBpdDogIHJlcXVpcmUoJ2VzNi1wcm9taXNlL2F1dG8nKTtcbid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi8nKS5wb2x5ZmlsbCgpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2VzNi1wcm9taXNlL2F1dG8uanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICB2NC4yLjQrMzE0ZTQ4MzFcbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHg7XG4gIHJldHVybiB4ICE9PSBudWxsICYmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnZnVuY3Rpb24nKTtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuXG5cbnZhciBfaXNBcnJheSA9IHZvaWQgMDtcbmlmIChBcnJheS5pc0FycmF5KSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xufVxuXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG52YXIgbGVuID0gMDtcbnZhciB2ZXJ0eE5leHQgPSB2b2lkIDA7XG52YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB2b2lkIDA7XG5cbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG4gIGxlbiArPSAyO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG59XG5cbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG4gIGFzYXAgPSBhc2FwRm47XG59XG5cbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG52YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgdmVydHggPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpLnJlcXVpcmUoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCA9IHZvaWQgMDtcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAoaXNOb2RlKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcbn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG4gIH1cblxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuXG4gIGlmIChfc3RhdGUpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbX3N0YXRlIC0gMV07XG4gICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkO1xufVxuXG4vKipcbiAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZVxuICBwYXNzZWQgYHZhbHVlYC4gSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlc29sdmUoMSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKDEpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVzb2x2ZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSB2YWx1ZSB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aFxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlblxuICBgdmFsdWVgXG4qL1xuZnVuY3Rpb24gcmVzb2x2ZSQxKG9iamVjdCkge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cblxuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMik7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgUEVORElORyA9IHZvaWQgMDtcbnZhciBGVUxGSUxMRUQgPSAxO1xudmFyIFJFSkVDVEVEID0gMjtcblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IHsgZXJyb3I6IG51bGwgfTtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlcnJvcjtcbiAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeVRoZW4odGhlbiQkMSwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICB0cnkge1xuICAgIHRoZW4kJDEuY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbiQkMSkge1xuICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiQkMSwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcblxuICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9XG4gIH0sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICByZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpIHtcbiAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkMSA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUkMSkge1xuICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGVuJCQxID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBUUllfQ0FUQ0hfRVJST1IuZXJyb3IpO1xuICAgICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKHRoZW4kJDEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkMSkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICByZWplY3QocHJvbWlzZSwgc2VsZkZ1bGZpbGxtZW50KCkpO1xuICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpO1xuICB9IGVsc2Uge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcbiAgfVxuXG4gIHB1Ymxpc2gocHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEO1xuXG4gIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHByb21pc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9zdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG5cbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB2b2lkIDAsXG4gICAgICBjYWxsYmFjayA9IHZvaWQgMCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgdmFsdWUgPSB2b2lkIDAsXG4gICAgICBlcnJvciA9IHZvaWQgMCxcbiAgICAgIHN1Y2NlZWRlZCA9IHZvaWQgMCxcbiAgICAgIGZhaWxlZCA9IHZvaWQgMDtcblxuICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgaWYgKHZhbHVlID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgdmFsdWUuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChmYWlsZWQpIHtcbiAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICB0cnkge1xuICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZWplY3QocHJvbWlzZSwgZSk7XG4gIH1cbn1cblxudmFyIGlkID0gMDtcbmZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgcmV0dXJuIGlkKys7XG59XG5cbmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG59XG5cbnZhciBFbnVtZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cbiAgICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuICAgICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgICB9XG5cbiAgICBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICAgIHRoaXMuX2VudW1lcmF0ZShpbnB1dCk7XG4gICAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG4gICAgfVxuICB9XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uIF9lbnVtZXJhdGUoaW5wdXQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuICAgIH1cbiAgfTtcblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gX2VhY2hFbnRyeShlbnRyeSwgaSkge1xuICAgIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgICB2YXIgcmVzb2x2ZSQkMSA9IGMucmVzb2x2ZTtcblxuXG4gICAgaWYgKHJlc29sdmUkJDEgPT09IHJlc29sdmUkMSkge1xuICAgICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7XG5cbiAgICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcbiAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UkMSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuICAgICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkMSkge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlJCQxKGVudHJ5KTtcbiAgICAgICAgfSksIGkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkMShlbnRyeSksIGkpO1xuICAgIH1cbiAgfTtcblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gX3NldHRsZWRBdChzdGF0ZSwgaSwgdmFsdWUpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblxuXG4gICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgIH1cbiAgfTtcblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKSB7XG4gICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gICAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIEVudW1lcmF0b3I7XG59KCk7XG5cbi8qKlxuICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2hcbiAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcbiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xuICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3NcbiAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoXCIzXCIpKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09IFwiMlwiXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGFsbFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XG4gIHJldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuICAgIC8vIHdhcyByZXNvbHZlZC5cbiAgfSk7XG4gIGBgYFxuXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcbiAgfSk7XG4gIGBgYFxuXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcbiAgcHJvbWlzZSB0byBzZXR0bGUuXG4qL1xuZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cbiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVqZWN0XG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuXG4qL1xuZnVuY3Rpb24gcmVqZWN0JDEocmVhc29uKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG5lZWRzUmVzb2x2ZXIoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTtcbn1cblxuZnVuY3Rpb24gbmVlZHNOZXcoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG59XG5cbi8qKlxuICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG4gIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICBUZXJtaW5vbG9neVxuICAtLS0tLS0tLS0tLVxuXG4gIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cbiAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblxuICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcbiAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxuICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcbiAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuICBpdHNlbGYgZnVsZmlsbC5cblxuXG4gIEJhc2ljIFVzYWdlOlxuICAtLS0tLS0tLS0tLS1cblxuICBgYGBqc1xuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIC8vIG9uIHN1Y2Nlc3NcbiAgICByZXNvbHZlKHZhbHVlKTtcblxuICAgIC8vIG9uIGZhaWx1cmVcbiAgICByZWplY3QocmVhc29uKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBBZHZhbmNlZCBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tLS0tXG5cbiAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICBgYGBqc1xuICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgYGBganNcbiAgUHJvbWlzZS5hbGwoW1xuICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgIGdldEpTT04oJy9jb21tZW50cycpXG4gIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcbiAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfSk7XG4gIGBgYFxuXG4gIEBjbGFzcyBQcm9taXNlXG4gIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmVyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQGNvbnN0cnVjdG9yXG4qL1xuXG52YXIgUHJvbWlzZSQxID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gICAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICAgIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBuZWVkc1Jlc29sdmVyKCk7XG4gICAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICB9KTtcbiAgYGBgXG4gICBDaGFpbmluZ1xuICAtLS0tLS0tLVxuICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHJldHVybiB1c2VyLm5hbWU7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICB9KTtcbiAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG4gIH0pO1xuICBgYGBcbiAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gbmV2ZXIgcmVhY2hlZFxuICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gIH0pO1xuICBgYGBcbiAgIEFzc2ltaWxhdGlvblxuICAtLS0tLS0tLS0tLS1cbiAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICB9KTtcbiAgYGBgXG4gICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gIH0pO1xuICBgYGBcbiAgIFNpbXBsZSBFeGFtcGxlXG4gIC0tLS0tLS0tLS0tLS0tXG4gICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gICBgYGBqYXZhc2NyaXB0XG4gIGxldCByZXN1bHQ7XG4gICB0cnkge1xuICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcbiAgICAvLyBzdWNjZXNzXG4gIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgLy8gZmFpbHVyZVxuICB9XG4gIGBgYFxuICAgRXJyYmFjayBFeGFtcGxlXG4gICBgYGBqc1xuICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICBpZiAoZXJyKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9XG4gIH0pO1xuICBgYGBcbiAgIFByb21pc2UgRXhhbXBsZTtcbiAgIGBgYGphdmFzY3JpcHRcbiAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBzdWNjZXNzXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gZmFpbHVyZVxuICB9KTtcbiAgYGBgXG4gICBBZHZhbmNlZCBFeGFtcGxlXG4gIC0tLS0tLS0tLS0tLS0tXG4gICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gICBgYGBqYXZhc2NyaXB0XG4gIGxldCBhdXRob3IsIGJvb2tzO1xuICAgdHJ5IHtcbiAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAvLyBzdWNjZXNzXG4gIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgLy8gZmFpbHVyZVxuICB9XG4gIGBgYFxuICAgRXJyYmFjayBFeGFtcGxlXG4gICBgYGBqc1xuICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuICAgfVxuICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgIH1cbiAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG4gICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgLy8gc3VjY2Vzc1xuICAgIH1cbiAgfSk7XG4gIGBgYFxuICAgUHJvbWlzZSBFeGFtcGxlO1xuICAgYGBgamF2YXNjcmlwdFxuICBmaW5kQXV0aG9yKCkuXG4gICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAvLyBmb3VuZCBib29rc1xuICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gIH0pO1xuICBgYGBcbiAgIEBtZXRob2QgdGhlblxuICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cblxuICAvKipcbiAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICBgYGBqc1xuICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG4gIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICB9XG4gIC8vIHN5bmNocm9ub3VzXG4gIHRyeSB7XG4gIGZpbmRBdXRob3IoKTtcbiAgfSBjYXRjaChyZWFzb24pIHtcbiAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgfVxuICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG4gIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICB9KTtcbiAgYGBgXG4gIEBtZXRob2QgY2F0Y2hcbiAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuXG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICBgZmluYWxseWAgd2lsbCBiZSBpbnZva2VkIHJlZ2FyZGxlc3Mgb2YgdGhlIHByb21pc2UncyBmYXRlIGp1c3QgYXMgbmF0aXZlXG4gICAgdHJ5L2NhdGNoL2ZpbmFsbHkgYmVoYXZlc1xuICBcbiAgICBTeW5jaHJvbm91cyBleGFtcGxlOlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRBdXRob3IoKSB7XG4gICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQXV0aG9yKCk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZpbmRBdXRob3IoKTsgLy8gc3VjY2VlZCBvciBmYWlsXG4gICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBhbHdheXMgcnVuc1xuICAgICAgLy8gZG9lc24ndCBhZmZlY3QgdGhlIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgQXN5bmNocm9ub3VzIGV4YW1wbGU6XG4gIFxuICAgIGBgYGpzXG4gICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICByZXR1cm4gZmluZE90aGVyQXV0aGVyKCk7XG4gICAgfSkuZmluYWxseShmdW5jdGlvbigpe1xuICAgICAgLy8gYXV0aG9yIHdhcyBlaXRoZXIgZm91bmQsIG9yIG5vdFxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIGZpbmFsbHlcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG5cblxuICBQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5ID0gZnVuY3Rpb24gX2ZpbmFsbHkoY2FsbGJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gcHJvbWlzZS5jb25zdHJ1Y3RvcjtcblxuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBQcm9taXNlO1xufSgpO1xuXG5Qcm9taXNlJDEucHJvdG90eXBlLnRoZW4gPSB0aGVuO1xuUHJvbWlzZSQxLmFsbCA9IGFsbDtcblByb21pc2UkMS5yYWNlID0gcmFjZTtcblByb21pc2UkMS5yZXNvbHZlID0gcmVzb2x2ZSQxO1xuUHJvbWlzZSQxLnJlamVjdCA9IHJlamVjdCQxO1xuUHJvbWlzZSQxLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlJDEuX3NldEFzYXAgPSBzZXRBc2FwO1xuUHJvbWlzZSQxLl9hc2FwID0gYXNhcDtcblxuLypnbG9iYWwgc2VsZiovXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgdmFyIGxvY2FsID0gdm9pZCAwO1xuXG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gZ2xvYmFsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gc2VsZjtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gIGlmIChQKSB7XG4gICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgIH1cblxuICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMTtcbn1cblxuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZSQxLnBvbHlmaWxsID0gcG9seWZpbGw7XG5Qcm9taXNlJDEuUHJvbWlzZSA9IFByb21pc2UkMTtcblxucmV0dXJuIFByb21pc2UkMTtcblxufSkpKTtcblxuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcFxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9wcm9jZXNzL2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohXG4gKiBWdWUuanMgdjIuNS4xNVxuICogKGMpIDIwMTQtMjAxOCBFdmFuIFlvdVxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChnbG9iYWwuVnVlID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4vKiAgKi9cblxudmFyIGVtcHR5T2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG5cbi8vIHRoZXNlIGhlbHBlcnMgcHJvZHVjZXMgYmV0dGVyIHZtIGNvZGUgaW4gSlMgZW5naW5lcyBkdWUgdG8gdGhlaXJcbi8vIGV4cGxpY2l0bmVzcyBhbmQgZnVuY3Rpb24gaW5saW5pbmdcbmZ1bmN0aW9uIGlzVW5kZWYgKHYpIHtcbiAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsXG59XG5cbmZ1bmN0aW9uIGlzRGVmICh2KSB7XG4gIHJldHVybiB2ICE9PSB1bmRlZmluZWQgJiYgdiAhPT0gbnVsbFxufVxuXG5mdW5jdGlvbiBpc1RydWUgKHYpIHtcbiAgcmV0dXJuIHYgPT09IHRydWVcbn1cblxuZnVuY3Rpb24gaXNGYWxzZSAodikge1xuICByZXR1cm4gdiA9PT0gZmFsc2Vcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB2YWx1ZSBpcyBwcmltaXRpdmVcbiAqL1xuZnVuY3Rpb24gaXNQcmltaXRpdmUgKHZhbHVlKSB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHxcbiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdzeW1ib2wnIHx8XG4gICAgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbidcbiAgKVxufVxuXG4vKipcbiAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxuICogaXMgYSBKU09OLWNvbXBsaWFudCB0eXBlLlxuICovXG5mdW5jdGlvbiBpc09iamVjdCAob2JqKSB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCdcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHJhdyB0eXBlIHN0cmluZyBvZiBhIHZhbHVlIGUuZy4gW29iamVjdCBPYmplY3RdXG4gKi9cbnZhciBfdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5mdW5jdGlvbiB0b1Jhd1R5cGUgKHZhbHVlKSB7XG4gIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpXG59XG5cbi8qKlxuICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAqL1xuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCAob2JqKSB7XG4gIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBPYmplY3RdJ1xufVxuXG5mdW5jdGlvbiBpc1JlZ0V4cCAodikge1xuICByZXR1cm4gX3RvU3RyaW5nLmNhbGwodikgPT09ICdbb2JqZWN0IFJlZ0V4cF0nXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdmFsIGlzIGEgdmFsaWQgYXJyYXkgaW5kZXguXG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRBcnJheUluZGV4ICh2YWwpIHtcbiAgdmFyIG4gPSBwYXJzZUZsb2F0KFN0cmluZyh2YWwpKTtcbiAgcmV0dXJuIG4gPj0gMCAmJiBNYXRoLmZsb29yKG4pID09PSBuICYmIGlzRmluaXRlKHZhbClcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgdmFsdWUgdG8gYSBzdHJpbmcgdGhhdCBpcyBhY3R1YWxseSByZW5kZXJlZC5cbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcgKHZhbCkge1xuICByZXR1cm4gdmFsID09IG51bGxcbiAgICA/ICcnXG4gICAgOiB0eXBlb2YgdmFsID09PSAnb2JqZWN0J1xuICAgICAgPyBKU09OLnN0cmluZ2lmeSh2YWwsIG51bGwsIDIpXG4gICAgICA6IFN0cmluZyh2YWwpXG59XG5cbi8qKlxuICogQ29udmVydCBhIGlucHV0IHZhbHVlIHRvIGEgbnVtYmVyIGZvciBwZXJzaXN0ZW5jZS5cbiAqIElmIHRoZSBjb252ZXJzaW9uIGZhaWxzLCByZXR1cm4gb3JpZ2luYWwgc3RyaW5nLlxuICovXG5mdW5jdGlvbiB0b051bWJlciAodmFsKSB7XG4gIHZhciBuID0gcGFyc2VGbG9hdCh2YWwpO1xuICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuXG59XG5cbi8qKlxuICogTWFrZSBhIG1hcCBhbmQgcmV0dXJuIGEgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGEga2V5XG4gKiBpcyBpbiB0aGF0IG1hcC5cbiAqL1xuZnVuY3Rpb24gbWFrZU1hcCAoXG4gIHN0cixcbiAgZXhwZWN0c0xvd2VyQ2FzZVxuKSB7XG4gIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgbGlzdCA9IHN0ci5zcGxpdCgnLCcpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBtYXBbbGlzdFtpXV0gPSB0cnVlO1xuICB9XG4gIHJldHVybiBleHBlY3RzTG93ZXJDYXNlXG4gICAgPyBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBtYXBbdmFsLnRvTG93ZXJDYXNlKCldOyB9XG4gICAgOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBtYXBbdmFsXTsgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdGFnIGlzIGEgYnVpbHQtaW4gdGFnLlxuICovXG52YXIgaXNCdWlsdEluVGFnID0gbWFrZU1hcCgnc2xvdCxjb21wb25lbnQnLCB0cnVlKTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIGF0dHJpYnV0ZSBpcyBhIHJlc2VydmVkIGF0dHJpYnV0ZS5cbiAqL1xudmFyIGlzUmVzZXJ2ZWRBdHRyaWJ1dGUgPSBtYWtlTWFwKCdrZXkscmVmLHNsb3Qsc2xvdC1zY29wZSxpcycpO1xuXG4vKipcbiAqIFJlbW92ZSBhbiBpdGVtIGZyb20gYW4gYXJyYXlcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlIChhcnIsIGl0ZW0pIHtcbiAgaWYgKGFyci5sZW5ndGgpIHtcbiAgICB2YXIgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgcmV0dXJuIGFyci5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5mdW5jdGlvbiBoYXNPd24gKG9iaiwga2V5KSB7XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIGNhY2hlZCB2ZXJzaW9uIG9mIGEgcHVyZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY2FjaGVkIChmbikge1xuICB2YXIgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gKGZ1bmN0aW9uIGNhY2hlZEZuIChzdHIpIHtcbiAgICB2YXIgaGl0ID0gY2FjaGVbc3RyXTtcbiAgICByZXR1cm4gaGl0IHx8IChjYWNoZVtzdHJdID0gZm4oc3RyKSlcbiAgfSlcbn1cblxuLyoqXG4gKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxpbWl0ZWQgc3RyaW5nLlxuICovXG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcbnZhciBjYW1lbGl6ZSA9IGNhY2hlZChmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCBmdW5jdGlvbiAoXywgYykgeyByZXR1cm4gYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnOyB9KVxufSk7XG5cbi8qKlxuICogQ2FwaXRhbGl6ZSBhIHN0cmluZy5cbiAqL1xudmFyIGNhcGl0YWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpXG59KTtcblxuLyoqXG4gKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuICovXG52YXIgaHlwaGVuYXRlUkUgPSAvXFxCKFtBLVpdKS9nO1xudmFyIGh5cGhlbmF0ZSA9IGNhY2hlZChmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJy0kMScpLnRvTG93ZXJDYXNlKClcbn0pO1xuXG4vKipcbiAqIFNpbXBsZSBiaW5kIHBvbHlmaWxsIGZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3Qgc3VwcG9ydCBpdC4uLiBlLmcuXG4gKiBQaGFudG9tSlMgMS54LiBUZWNobmljYWxseSB3ZSBkb24ndCBuZWVkIHRoaXMgYW55bW9yZSBzaW5jZSBuYXRpdmUgYmluZCBpc1xuICogbm93IG1vcmUgcGVyZm9ybWFudCBpbiBtb3N0IGJyb3dzZXJzLCBidXQgcmVtb3ZpbmcgaXQgd291bGQgYmUgYnJlYWtpbmcgZm9yXG4gKiBjb2RlIHRoYXQgd2FzIGFibGUgdG8gcnVuIGluIFBoYW50b21KUyAxLngsIHNvIHRoaXMgbXVzdCBiZSBrZXB0IGZvclxuICogYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gKi9cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIHBvbHlmaWxsQmluZCAoZm4sIGN0eCkge1xuICBmdW5jdGlvbiBib3VuZEZuIChhKSB7XG4gICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHJldHVybiBsXG4gICAgICA/IGwgPiAxXG4gICAgICAgID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpXG4gICAgICAgIDogZm4uY2FsbChjdHgsIGEpXG4gICAgICA6IGZuLmNhbGwoY3R4KVxuICB9XG5cbiAgYm91bmRGbi5fbGVuZ3RoID0gZm4ubGVuZ3RoO1xuICByZXR1cm4gYm91bmRGblxufVxuXG5mdW5jdGlvbiBuYXRpdmVCaW5kIChmbiwgY3R4KSB7XG4gIHJldHVybiBmbi5iaW5kKGN0eClcbn1cblxudmFyIGJpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZFxuICA/IG5hdGl2ZUJpbmRcbiAgOiBwb2x5ZmlsbEJpbmQ7XG5cbi8qKlxuICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXkgKGxpc3QsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuICB9XG4gIHJldHVybiByZXRcbn1cblxuLyoqXG4gKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZCAodG8sIF9mcm9tKSB7XG4gIGZvciAodmFyIGtleSBpbiBfZnJvbSkge1xuICAgIHRvW2tleV0gPSBfZnJvbVtrZXldO1xuICB9XG4gIHJldHVybiB0b1xufVxuXG4vKipcbiAqIE1lcmdlIGFuIEFycmF5IG9mIE9iamVjdHMgaW50byBhIHNpbmdsZSBPYmplY3QuXG4gKi9cbmZ1bmN0aW9uIHRvT2JqZWN0IChhcnIpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnJbaV0pIHtcbiAgICAgIGV4dGVuZChyZXMsIGFycltpXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyoqXG4gKiBQZXJmb3JtIG5vIG9wZXJhdGlvbi5cbiAqIFN0dWJiaW5nIGFyZ3MgdG8gbWFrZSBGbG93IGhhcHB5IHdpdGhvdXQgbGVhdmluZyB1c2VsZXNzIHRyYW5zcGlsZWQgY29kZVxuICogd2l0aCAuLi5yZXN0IChodHRwczovL2Zsb3cub3JnL2Jsb2cvMjAxNy8wNS8wNy9TdHJpY3QtRnVuY3Rpb24tQ2FsbC1Bcml0eS8pXG4gKi9cbmZ1bmN0aW9uIG5vb3AgKGEsIGIsIGMpIHt9XG5cbi8qKlxuICogQWx3YXlzIHJldHVybiBmYWxzZS5cbiAqL1xudmFyIG5vID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsgcmV0dXJuIGZhbHNlOyB9O1xuXG4vKipcbiAqIFJldHVybiBzYW1lIHZhbHVlXG4gKi9cbnZhciBpZGVudGl0eSA9IGZ1bmN0aW9uIChfKSB7IHJldHVybiBfOyB9O1xuXG4vKipcbiAqIEdlbmVyYXRlIGEgc3RhdGljIGtleXMgc3RyaW5nIGZyb20gY29tcGlsZXIgbW9kdWxlcy5cbiAqL1xuZnVuY3Rpb24gZ2VuU3RhdGljS2V5cyAobW9kdWxlcykge1xuICByZXR1cm4gbW9kdWxlcy5yZWR1Y2UoZnVuY3Rpb24gKGtleXMsIG0pIHtcbiAgICByZXR1cm4ga2V5cy5jb25jYXQobS5zdGF0aWNLZXlzIHx8IFtdKVxuICB9LCBbXSkuam9pbignLCcpXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG4gKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG4gKi9cbmZ1bmN0aW9uIGxvb3NlRXF1YWwgKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHsgcmV0dXJuIHRydWUgfVxuICB2YXIgaXNPYmplY3RBID0gaXNPYmplY3QoYSk7XG4gIHZhciBpc09iamVjdEIgPSBpc09iamVjdChiKTtcbiAgaWYgKGlzT2JqZWN0QSAmJiBpc09iamVjdEIpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIGlzQXJyYXlBID0gQXJyYXkuaXNBcnJheShhKTtcbiAgICAgIHZhciBpc0FycmF5QiA9IEFycmF5LmlzQXJyYXkoYik7XG4gICAgICBpZiAoaXNBcnJheUEgJiYgaXNBcnJheUIpIHtcbiAgICAgICAgcmV0dXJuIGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KGZ1bmN0aW9uIChlLCBpKSB7XG4gICAgICAgICAgcmV0dXJuIGxvb3NlRXF1YWwoZSwgYltpXSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoIWlzQXJyYXlBICYmICFpc0FycmF5Qikge1xuICAgICAgICB2YXIga2V5c0EgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgdmFyIGtleXNCID0gT2JqZWN0LmtleXMoYik7XG4gICAgICAgIHJldHVybiBrZXlzQS5sZW5ndGggPT09IGtleXNCLmxlbmd0aCAmJiBrZXlzQS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgcmV0dXJuIGxvb3NlRXF1YWwoYVtrZXldLCBiW2tleV0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9IGVsc2UgaWYgKCFpc09iamVjdEEgJiYgIWlzT2JqZWN0Qikge1xuICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGxvb3NlSW5kZXhPZiAoYXJyLCB2YWwpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobG9vc2VFcXVhbChhcnJbaV0sIHZhbCkpIHsgcmV0dXJuIGkgfVxuICB9XG4gIHJldHVybiAtMVxufVxuXG4vKipcbiAqIEVuc3VyZSBhIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbmx5IG9uY2UuXG4gKi9cbmZ1bmN0aW9uIG9uY2UgKGZuKSB7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG59XG5cbnZhciBTU1JfQVRUUiA9ICdkYXRhLXNlcnZlci1yZW5kZXJlZCc7XG5cbnZhciBBU1NFVF9UWVBFUyA9IFtcbiAgJ2NvbXBvbmVudCcsXG4gICdkaXJlY3RpdmUnLFxuICAnZmlsdGVyJ1xuXTtcblxudmFyIExJRkVDWUNMRV9IT09LUyA9IFtcbiAgJ2JlZm9yZUNyZWF0ZScsXG4gICdjcmVhdGVkJyxcbiAgJ2JlZm9yZU1vdW50JyxcbiAgJ21vdW50ZWQnLFxuICAnYmVmb3JlVXBkYXRlJyxcbiAgJ3VwZGF0ZWQnLFxuICAnYmVmb3JlRGVzdHJveScsXG4gICdkZXN0cm95ZWQnLFxuICAnYWN0aXZhdGVkJyxcbiAgJ2RlYWN0aXZhdGVkJyxcbiAgJ2Vycm9yQ2FwdHVyZWQnXG5dO1xuXG4vKiAgKi9cblxudmFyIGNvbmZpZyA9ICh7XG4gIC8qKlxuICAgKiBPcHRpb24gbWVyZ2Ugc3RyYXRlZ2llcyAodXNlZCBpbiBjb3JlL3V0aWwvb3B0aW9ucylcbiAgICovXG4gIC8vICRmbG93LWRpc2FibGUtbGluZVxuICBvcHRpb25NZXJnZVN0cmF0ZWdpZXM6IE9iamVjdC5jcmVhdGUobnVsbCksXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3VwcHJlc3Mgd2FybmluZ3MuXG4gICAqL1xuICBzaWxlbnQ6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBTaG93IHByb2R1Y3Rpb24gbW9kZSB0aXAgbWVzc2FnZSBvbiBib290P1xuICAgKi9cbiAgcHJvZHVjdGlvblRpcDogXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIGRldnRvb2xzXG4gICAqL1xuICBkZXZ0b29sczogXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcmVjb3JkIHBlcmZcbiAgICovXG4gIHBlcmZvcm1hbmNlOiBmYWxzZSxcblxuICAvKipcbiAgICogRXJyb3IgaGFuZGxlciBmb3Igd2F0Y2hlciBlcnJvcnNcbiAgICovXG4gIGVycm9ySGFuZGxlcjogbnVsbCxcblxuICAvKipcbiAgICogV2FybiBoYW5kbGVyIGZvciB3YXRjaGVyIHdhcm5zXG4gICAqL1xuICB3YXJuSGFuZGxlcjogbnVsbCxcblxuICAvKipcbiAgICogSWdub3JlIGNlcnRhaW4gY3VzdG9tIGVsZW1lbnRzXG4gICAqL1xuICBpZ25vcmVkRWxlbWVudHM6IFtdLFxuXG4gIC8qKlxuICAgKiBDdXN0b20gdXNlciBrZXkgYWxpYXNlcyBmb3Igdi1vblxuICAgKi9cbiAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gIGtleUNvZGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHRhZyBpcyByZXNlcnZlZCBzbyB0aGF0IGl0IGNhbm5vdCBiZSByZWdpc3RlcmVkIGFzIGFcbiAgICogY29tcG9uZW50LiBUaGlzIGlzIHBsYXRmb3JtLWRlcGVuZGVudCBhbmQgbWF5IGJlIG92ZXJ3cml0dGVuLlxuICAgKi9cbiAgaXNSZXNlcnZlZFRhZzogbm8sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGF0dHJpYnV0ZSBpcyByZXNlcnZlZCBzbyB0aGF0IGl0IGNhbm5vdCBiZSB1c2VkIGFzIGEgY29tcG9uZW50XG4gICAqIHByb3AuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uXG4gICAqL1xuICBpc1Jlc2VydmVkQXR0cjogbm8sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdGFnIGlzIGFuIHVua25vd24gZWxlbWVudC5cbiAgICogUGxhdGZvcm0tZGVwZW5kZW50LlxuICAgKi9cbiAgaXNVbmtub3duRWxlbWVudDogbm8sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbmFtZXNwYWNlIG9mIGFuIGVsZW1lbnRcbiAgICovXG4gIGdldFRhZ05hbWVzcGFjZTogbm9vcCxcblxuICAvKipcbiAgICogUGFyc2UgdGhlIHJlYWwgdGFnIG5hbWUgZm9yIHRoZSBzcGVjaWZpYyBwbGF0Zm9ybS5cbiAgICovXG4gIHBhcnNlUGxhdGZvcm1UYWdOYW1lOiBpZGVudGl0eSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gYXR0cmlidXRlIG11c3QgYmUgYm91bmQgdXNpbmcgcHJvcGVydHksIGUuZy4gdmFsdWVcbiAgICogUGxhdGZvcm0tZGVwZW5kZW50LlxuICAgKi9cbiAgbXVzdFVzZVByb3A6IG5vLFxuXG4gIC8qKlxuICAgKiBFeHBvc2VkIGZvciBsZWdhY3kgcmVhc29uc1xuICAgKi9cbiAgX2xpZmVjeWNsZUhvb2tzOiBMSUZFQ1lDTEVfSE9PS1Ncbn0pXG5cbi8qICAqL1xuXG4vKipcbiAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuICovXG5mdW5jdGlvbiBpc1Jlc2VydmVkIChzdHIpIHtcbiAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG4gIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUZcbn1cblxuLyoqXG4gKiBEZWZpbmUgYSBwcm9wZXJ0eS5cbiAqL1xuZnVuY3Rpb24gZGVmIChvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIHZhbHVlOiB2YWwsXG4gICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuLyoqXG4gKiBQYXJzZSBzaW1wbGUgcGF0aC5cbiAqL1xudmFyIGJhaWxSRSA9IC9bXlxcdy4kXS87XG5mdW5jdGlvbiBwYXJzZVBhdGggKHBhdGgpIHtcbiAgaWYgKGJhaWxSRS50ZXN0KHBhdGgpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLicpO1xuICByZXR1cm4gZnVuY3Rpb24gKG9iaikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghb2JqKSB7IHJldHVybiB9XG4gICAgICBvYmogPSBvYmpbc2VnbWVudHNbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gb2JqXG4gIH1cbn1cblxuLyogICovXG5cbi8vIGNhbiB3ZSB1c2UgX19wcm90b19fP1xudmFyIGhhc1Byb3RvID0gJ19fcHJvdG9fXycgaW4ge307XG5cbi8vIEJyb3dzZXIgZW52aXJvbm1lbnQgc25pZmZpbmdcbnZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbnZhciBpbldlZXggPSB0eXBlb2YgV1hFbnZpcm9ubWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgISFXWEVudmlyb25tZW50LnBsYXRmb3JtO1xudmFyIHdlZXhQbGF0Zm9ybSA9IGluV2VleCAmJiBXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCk7XG52YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbnZhciBpc0lFID0gVUEgJiYgL21zaWV8dHJpZGVudC8udGVzdChVQSk7XG52YXIgaXNJRTkgPSBVQSAmJiBVQS5pbmRleE9mKCdtc2llIDkuMCcpID4gMDtcbnZhciBpc0VkZ2UgPSBVQSAmJiBVQS5pbmRleE9mKCdlZGdlLycpID4gMDtcbnZhciBpc0FuZHJvaWQgPSAoVUEgJiYgVUEuaW5kZXhPZignYW5kcm9pZCcpID4gMCkgfHwgKHdlZXhQbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnKTtcbnZhciBpc0lPUyA9IChVQSAmJiAvaXBob25lfGlwYWR8aXBvZHxpb3MvLnRlc3QoVUEpKSB8fCAod2VleFBsYXRmb3JtID09PSAnaW9zJyk7XG52YXIgaXNDaHJvbWUgPSBVQSAmJiAvY2hyb21lXFwvXFxkKy8udGVzdChVQSkgJiYgIWlzRWRnZTtcblxuLy8gRmlyZWZveCBoYXMgYSBcIndhdGNoXCIgZnVuY3Rpb24gb24gT2JqZWN0LnByb3RvdHlwZS4uLlxudmFyIG5hdGl2ZVdhdGNoID0gKHt9KS53YXRjaDtcblxudmFyIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuaWYgKGluQnJvd3Nlcikge1xuICB0cnkge1xuICAgIHZhciBvcHRzID0ge307XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdHMsICdwYXNzaXZlJywgKHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0ICgpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KSk7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mbG93L2lzc3Vlcy8yODVcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdC1wYXNzaXZlJywgbnVsbCwgb3B0cyk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59XG5cbi8vIHRoaXMgbmVlZHMgdG8gYmUgbGF6eS1ldmFsZWQgYmVjYXVzZSB2dWUgbWF5IGJlIHJlcXVpcmVkIGJlZm9yZVxuLy8gdnVlLXNlcnZlci1yZW5kZXJlciBjYW4gc2V0IFZVRV9FTlZcbnZhciBfaXNTZXJ2ZXI7XG52YXIgaXNTZXJ2ZXJSZW5kZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChfaXNTZXJ2ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghaW5Ccm93c2VyICYmICFpbldlZXggJiYgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGRldGVjdCBwcmVzZW5jZSBvZiB2dWUtc2VydmVyLXJlbmRlcmVyIGFuZCBhdm9pZFxuICAgICAgLy8gV2VicGFjayBzaGltbWluZyB0aGUgcHJvY2Vzc1xuICAgICAgX2lzU2VydmVyID0gZ2xvYmFsWydwcm9jZXNzJ10uZW52LlZVRV9FTlYgPT09ICdzZXJ2ZXInO1xuICAgIH0gZWxzZSB7XG4gICAgICBfaXNTZXJ2ZXIgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIF9pc1NlcnZlclxufTtcblxuLy8gZGV0ZWN0IGRldnRvb2xzXG52YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBpc05hdGl2ZSAoQ3Rvcikge1xuICByZXR1cm4gdHlwZW9mIEN0b3IgPT09ICdmdW5jdGlvbicgJiYgL25hdGl2ZSBjb2RlLy50ZXN0KEN0b3IudG9TdHJpbmcoKSlcbn1cblxudmFyIGhhc1N5bWJvbCA9XG4gIHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFN5bWJvbCkgJiZcbiAgdHlwZW9mIFJlZmxlY3QgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFJlZmxlY3Qub3duS2V5cyk7XG5cbnZhciBfU2V0O1xuLyogaXN0YW5idWwgaWdub3JlIGlmICovIC8vICRmbG93LWRpc2FibGUtbGluZVxuaWYgKHR5cGVvZiBTZXQgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFNldCkpIHtcbiAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG4gIF9TZXQgPSBTZXQ7XG59IGVsc2Uge1xuICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG4gIF9TZXQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNldCAoKSB7XG4gICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICAgIFNldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gaGFzIChrZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldFtrZXldID09PSB0cnVlXG4gICAgfTtcbiAgICBTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCAoa2V5KSB7XG4gICAgICB0aGlzLnNldFtrZXldID0gdHJ1ZTtcbiAgICB9O1xuICAgIFNldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhciAoKSB7XG4gICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTZXQ7XG4gIH0oKSk7XG59XG5cbi8qICAqL1xuXG52YXIgd2FybiA9IG5vb3A7XG52YXIgdGlwID0gbm9vcDtcbnZhciBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlID0gKG5vb3ApOyAvLyB3b3JrIGFyb3VuZCBmbG93IGNoZWNrXG52YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IChub29wKTtcblxue1xuICB2YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcbiAgdmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9dKShcXHcpL2c7XG4gIHZhciBjbGFzc2lmeSA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0clxuICAgIC5yZXBsYWNlKGNsYXNzaWZ5UkUsIGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLnRvVXBwZXJDYXNlKCk7IH0pXG4gICAgLnJlcGxhY2UoL1stX10vZywgJycpOyB9O1xuXG4gIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuICAgIHZhciB0cmFjZSA9IHZtID8gZ2VuZXJhdGVDb21wb25lbnRUcmFjZSh2bSkgOiAnJztcblxuICAgIGlmIChjb25maWcud2FybkhhbmRsZXIpIHtcbiAgICAgIGNvbmZpZy53YXJuSGFuZGxlci5jYWxsKG51bGwsIG1zZywgdm0sIHRyYWNlKTtcbiAgICB9IGVsc2UgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkge1xuICAgICAgY29uc29sZS5lcnJvcigoXCJbVnVlIHdhcm5dOiBcIiArIG1zZyArIHRyYWNlKSk7XG4gICAgfVxuICB9O1xuXG4gIHRpcCA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG4gICAgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkge1xuICAgICAgY29uc29sZS53YXJuKFwiW1Z1ZSB0aXBdOiBcIiArIG1zZyArIChcbiAgICAgICAgdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnXG4gICAgICApKTtcbiAgICB9XG4gIH07XG5cbiAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSwgaW5jbHVkZUZpbGUpIHtcbiAgICBpZiAodm0uJHJvb3QgPT09IHZtKSB7XG4gICAgICByZXR1cm4gJzxSb290PidcbiAgICB9XG4gICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygdm0gPT09ICdmdW5jdGlvbicgJiYgdm0uY2lkICE9IG51bGxcbiAgICAgID8gdm0ub3B0aW9uc1xuICAgICAgOiB2bS5faXNWdWVcbiAgICAgICAgPyB2bS4kb3B0aW9ucyB8fCB2bS5jb25zdHJ1Y3Rvci5vcHRpb25zXG4gICAgICAgIDogdm0gfHwge307XG4gICAgdmFyIG5hbWUgPSBvcHRpb25zLm5hbWUgfHwgb3B0aW9ucy5fY29tcG9uZW50VGFnO1xuICAgIHZhciBmaWxlID0gb3B0aW9ucy5fX2ZpbGU7XG4gICAgaWYgKCFuYW1lICYmIGZpbGUpIHtcbiAgICAgIHZhciBtYXRjaCA9IGZpbGUubWF0Y2goLyhbXi9cXFxcXSspXFwudnVlJC8pO1xuICAgICAgbmFtZSA9IG1hdGNoICYmIG1hdGNoWzFdO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAobmFtZSA/IChcIjxcIiArIChjbGFzc2lmeShuYW1lKSkgKyBcIj5cIikgOiBcIjxBbm9ueW1vdXM+XCIpICtcbiAgICAgIChmaWxlICYmIGluY2x1ZGVGaWxlICE9PSBmYWxzZSA/IChcIiBhdCBcIiArIGZpbGUpIDogJycpXG4gICAgKVxuICB9O1xuXG4gIHZhciByZXBlYXQgPSBmdW5jdGlvbiAoc3RyLCBuKSB7XG4gICAgdmFyIHJlcyA9ICcnO1xuICAgIHdoaWxlIChuKSB7XG4gICAgICBpZiAobiAlIDIgPT09IDEpIHsgcmVzICs9IHN0cjsgfVxuICAgICAgaWYgKG4gPiAxKSB7IHN0ciArPSBzdHI7IH1cbiAgICAgIG4gPj49IDE7XG4gICAgfVxuICAgIHJldHVybiByZXNcbiAgfTtcblxuICBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgaWYgKHZtLl9pc1Z1ZSAmJiB2bS4kcGFyZW50KSB7XG4gICAgICB2YXIgdHJlZSA9IFtdO1xuICAgICAgdmFyIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA9IDA7XG4gICAgICB3aGlsZSAodm0pIHtcbiAgICAgICAgaWYgKHRyZWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciBsYXN0ID0gdHJlZVt0cmVlLmxlbmd0aCAtIDFdO1xuICAgICAgICAgIGlmIChsYXN0LmNvbnN0cnVjdG9yID09PSB2bS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlKys7XG4gICAgICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID4gMCkge1xuICAgICAgICAgICAgdHJlZVt0cmVlLmxlbmd0aCAtIDFdID0gW2xhc3QsIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZV07XG4gICAgICAgICAgICBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmVlLnB1c2godm0pO1xuICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gJ1xcblxcbmZvdW5kIGluXFxuXFxuJyArIHRyZWVcbiAgICAgICAgLm1hcChmdW5jdGlvbiAodm0sIGkpIHsgcmV0dXJuIChcIlwiICsgKGkgPT09IDAgPyAnLS0tPiAnIDogcmVwZWF0KCcgJywgNSArIGkgKiAyKSkgKyAoQXJyYXkuaXNBcnJheSh2bSlcbiAgICAgICAgICAgID8gKChmb3JtYXRDb21wb25lbnROYW1lKHZtWzBdKSkgKyBcIi4uLiAoXCIgKyAodm1bMV0pICsgXCIgcmVjdXJzaXZlIGNhbGxzKVwiKVxuICAgICAgICAgICAgOiBmb3JtYXRDb21wb25lbnROYW1lKHZtKSkpOyB9KVxuICAgICAgICAuam9pbignXFxuJylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcIlxcblxcbihmb3VuZCBpbiBcIiArIChmb3JtYXRDb21wb25lbnROYW1lKHZtKSkgKyBcIilcIilcbiAgICB9XG4gIH07XG59XG5cbi8qICAqL1xuXG5cbnZhciB1aWQgPSAwO1xuXG4vKipcbiAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cbiAqL1xudmFyIERlcCA9IGZ1bmN0aW9uIERlcCAoKSB7XG4gIHRoaXMuaWQgPSB1aWQrKztcbiAgdGhpcy5zdWJzID0gW107XG59O1xuXG5EZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIGFkZFN1YiAoc3ViKSB7XG4gIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG59O1xuXG5EZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIHJlbW92ZVN1YiAoc3ViKSB7XG4gIHJlbW92ZSh0aGlzLnN1YnMsIHN1Yik7XG59O1xuXG5EZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uIGRlcGVuZCAoKSB7XG4gIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG4gIH1cbn07XG5cbkRlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5ICgpIHtcbiAgLy8gc3RhYmlsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3RcbiAgdmFyIHN1YnMgPSB0aGlzLnN1YnMuc2xpY2UoKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHN1YnNbaV0udXBkYXRlKCk7XG4gIH1cbn07XG5cbi8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cbi8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcbi8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuRGVwLnRhcmdldCA9IG51bGw7XG52YXIgdGFyZ2V0U3RhY2sgPSBbXTtcblxuZnVuY3Rpb24gcHVzaFRhcmdldCAoX3RhcmdldCkge1xuICBpZiAoRGVwLnRhcmdldCkgeyB0YXJnZXRTdGFjay5wdXNoKERlcC50YXJnZXQpOyB9XG4gIERlcC50YXJnZXQgPSBfdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBwb3BUYXJnZXQgKCkge1xuICBEZXAudGFyZ2V0ID0gdGFyZ2V0U3RhY2sucG9wKCk7XG59XG5cbi8qICAqL1xuXG52YXIgVk5vZGUgPSBmdW5jdGlvbiBWTm9kZSAoXG4gIHRhZyxcbiAgZGF0YSxcbiAgY2hpbGRyZW4sXG4gIHRleHQsXG4gIGVsbSxcbiAgY29udGV4dCxcbiAgY29tcG9uZW50T3B0aW9ucyxcbiAgYXN5bmNGYWN0b3J5XG4pIHtcbiAgdGhpcy50YWcgPSB0YWc7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgdGhpcy5lbG0gPSBlbG07XG4gIHRoaXMubnMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIHRoaXMuZm5Db250ZXh0ID0gdW5kZWZpbmVkO1xuICB0aGlzLmZuT3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5mblNjb3BlSWQgPSB1bmRlZmluZWQ7XG4gIHRoaXMua2V5ID0gZGF0YSAmJiBkYXRhLmtleTtcbiAgdGhpcy5jb21wb25lbnRPcHRpb25zID0gY29tcG9uZW50T3B0aW9ucztcbiAgdGhpcy5jb21wb25lbnRJbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQ7XG4gIHRoaXMucmF3ID0gZmFsc2U7XG4gIHRoaXMuaXNTdGF0aWMgPSBmYWxzZTtcbiAgdGhpcy5pc1Jvb3RJbnNlcnQgPSB0cnVlO1xuICB0aGlzLmlzQ29tbWVudCA9IGZhbHNlO1xuICB0aGlzLmlzQ2xvbmVkID0gZmFsc2U7XG4gIHRoaXMuaXNPbmNlID0gZmFsc2U7XG4gIHRoaXMuYXN5bmNGYWN0b3J5ID0gYXN5bmNGYWN0b3J5O1xuICB0aGlzLmFzeW5jTWV0YSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5pc0FzeW5jUGxhY2Vob2xkZXIgPSBmYWxzZTtcbn07XG5cbnZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IGNoaWxkOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cbi8vIERFUFJFQ0FURUQ6IGFsaWFzIGZvciBjb21wb25lbnRJbnN0YW5jZSBmb3IgYmFja3dhcmRzIGNvbXBhdC5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5wcm90b3R5cGVBY2Nlc3NvcnMuY2hpbGQuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZVxufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFZOb2RlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cbnZhciBjcmVhdGVFbXB0eVZOb2RlID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgaWYgKCB0ZXh0ID09PSB2b2lkIDAgKSB0ZXh0ID0gJyc7XG5cbiAgdmFyIG5vZGUgPSBuZXcgVk5vZGUoKTtcbiAgbm9kZS50ZXh0ID0gdGV4dDtcbiAgbm9kZS5pc0NvbW1lbnQgPSB0cnVlO1xuICByZXR1cm4gbm9kZVxufTtcblxuZnVuY3Rpb24gY3JlYXRlVGV4dFZOb2RlICh2YWwpIHtcbiAgcmV0dXJuIG5ldyBWTm9kZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBTdHJpbmcodmFsKSlcbn1cblxuLy8gb3B0aW1pemVkIHNoYWxsb3cgY2xvbmVcbi8vIHVzZWQgZm9yIHN0YXRpYyBub2RlcyBhbmQgc2xvdCBub2RlcyBiZWNhdXNlIHRoZXkgbWF5IGJlIHJldXNlZCBhY3Jvc3Ncbi8vIG11bHRpcGxlIHJlbmRlcnMsIGNsb25pbmcgdGhlbSBhdm9pZHMgZXJyb3JzIHdoZW4gRE9NIG1hbmlwdWxhdGlvbnMgcmVseVxuLy8gb24gdGhlaXIgZWxtIHJlZmVyZW5jZS5cbmZ1bmN0aW9uIGNsb25lVk5vZGUgKHZub2RlKSB7XG4gIHZhciBjbG9uZWQgPSBuZXcgVk5vZGUoXG4gICAgdm5vZGUudGFnLFxuICAgIHZub2RlLmRhdGEsXG4gICAgdm5vZGUuY2hpbGRyZW4sXG4gICAgdm5vZGUudGV4dCxcbiAgICB2bm9kZS5lbG0sXG4gICAgdm5vZGUuY29udGV4dCxcbiAgICB2bm9kZS5jb21wb25lbnRPcHRpb25zLFxuICAgIHZub2RlLmFzeW5jRmFjdG9yeVxuICApO1xuICBjbG9uZWQubnMgPSB2bm9kZS5ucztcbiAgY2xvbmVkLmlzU3RhdGljID0gdm5vZGUuaXNTdGF0aWM7XG4gIGNsb25lZC5rZXkgPSB2bm9kZS5rZXk7XG4gIGNsb25lZC5pc0NvbW1lbnQgPSB2bm9kZS5pc0NvbW1lbnQ7XG4gIGNsb25lZC5mbkNvbnRleHQgPSB2bm9kZS5mbkNvbnRleHQ7XG4gIGNsb25lZC5mbk9wdGlvbnMgPSB2bm9kZS5mbk9wdGlvbnM7XG4gIGNsb25lZC5mblNjb3BlSWQgPSB2bm9kZS5mblNjb3BlSWQ7XG4gIGNsb25lZC5pc0Nsb25lZCA9IHRydWU7XG4gIHJldHVybiBjbG9uZWRcbn1cblxuLypcbiAqIG5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBwbGF5IHdlbGwgd2l0aFxuICogZHluYW1pY2FsbHkgYWNjZXNzaW5nIG1ldGhvZHMgb24gQXJyYXkgcHJvdG90eXBlXG4gKi9cblxudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG52YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKTtcblxudmFyIG1ldGhvZHNUb1BhdGNoID0gW1xuICAncHVzaCcsXG4gICdwb3AnLFxuICAnc2hpZnQnLFxuICAndW5zaGlmdCcsXG4gICdzcGxpY2UnLFxuICAnc29ydCcsXG4gICdyZXZlcnNlJ1xuXTtcblxuLyoqXG4gKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcbiAqL1xubWV0aG9kc1RvUGF0Y2guZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG4gIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvciAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXG4gICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuICAgIHZhciBpbnNlcnRlZDtcbiAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgY2FzZSAncHVzaCc6XG4gICAgICBjYXNlICd1bnNoaWZ0JzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3BsaWNlJzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuICAgICAgICBicmVha1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQpIHsgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTsgfVxuICAgIC8vIG5vdGlmeSBjaGFuZ2VcbiAgICBvYi5kZXAubm90aWZ5KCk7XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9KTtcbn0pO1xuXG4vKiAgKi9cblxudmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cbi8qKlxuICogSW4gc29tZSBjYXNlcyB3ZSBtYXkgd2FudCB0byBkaXNhYmxlIG9ic2VydmF0aW9uIGluc2lkZSBhIGNvbXBvbmVudCdzXG4gKiB1cGRhdGUgY29tcHV0YXRpb24uXG4gKi9cbnZhciBzaG91bGRPYnNlcnZlID0gdHJ1ZTtcblxuZnVuY3Rpb24gdG9nZ2xlT2JzZXJ2aW5nICh2YWx1ZSkge1xuICBzaG91bGRPYnNlcnZlID0gdmFsdWU7XG59XG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBpcyBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG4gKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0aGUgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoIHVwZGF0ZXMuXG4gKi9cbnZhciBPYnNlcnZlciA9IGZ1bmN0aW9uIE9ic2VydmVyICh2YWx1ZSkge1xuICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuICB0aGlzLnZtQ291bnQgPSAwO1xuICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90b1xuICAgICAgPyBwcm90b0F1Z21lbnRcbiAgICAgIDogY29weUF1Z21lbnQ7XG4gICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpO1xuICB9XG59O1xuXG4vKipcbiAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG4gKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cbiAqL1xuT2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiB3YWxrIChvYmopIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBkZWZpbmVSZWFjdGl2ZShvYmosIGtleXNbaV0pO1xuICB9XG59O1xuXG4vKipcbiAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuICovXG5PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZUFycmF5ID0gZnVuY3Rpb24gb2JzZXJ2ZUFycmF5IChpdGVtcykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuICB9XG59O1xuXG4vLyBoZWxwZXJzXG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cbiAqL1xuZnVuY3Rpb24gcHJvdG9BdWdtZW50ICh0YXJnZXQsIHNyYywga2V5cykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG59XG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG4gKiBoaWRkZW4gcHJvcGVydGllcy5cbiAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGNvcHlBdWdtZW50ICh0YXJnZXQsIHNyYywga2V5cykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqL1xuZnVuY3Rpb24gb2JzZXJ2ZSAodmFsdWUsIGFzUm9vdERhdGEpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgdmFsdWUgaW5zdGFuY2VvZiBWTm9kZSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciBvYjtcbiAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG4gICAgb2IgPSB2YWx1ZS5fX29iX187XG4gIH0gZWxzZSBpZiAoXG4gICAgc2hvdWxkT2JzZXJ2ZSAmJlxuICAgICFpc1NlcnZlclJlbmRlcmluZygpICYmXG4gICAgKEFycmF5LmlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJlxuICAgIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmXG4gICAgIXZhbHVlLl9pc1Z1ZVxuICApIHtcbiAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG4gIH1cbiAgaWYgKGFzUm9vdERhdGEgJiYgb2IpIHtcbiAgICBvYi52bUNvdW50Kys7XG4gIH1cbiAgcmV0dXJuIG9iXG59XG5cbi8qKlxuICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuICovXG5mdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZSAoXG4gIG9iaixcbiAga2V5LFxuICB2YWwsXG4gIGN1c3RvbVNldHRlcixcbiAgc2hhbGxvd1xuKSB7XG4gIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cbiAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcbiAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcbiAgaWYgKCFnZXR0ZXIgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIHZhbCA9IG9ialtrZXldO1xuICB9XG4gIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cbiAgdmFyIGNoaWxkT2IgPSAhc2hhbGxvdyAmJiBvYnNlcnZlKHZhbCk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIgKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIGRlcC5kZXBlbmQoKTtcbiAgICAgICAgaWYgKGNoaWxkT2IpIHtcbiAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGRlcGVuZEFycmF5KHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlciAobmV3VmFsKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlICovXG4gICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSB8fCAobmV3VmFsICE9PSBuZXdWYWwgJiYgdmFsdWUgIT09IHZhbHVlKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tc2VsZi1jb21wYXJlICovXG4gICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY3VzdG9tU2V0dGVyKSB7XG4gICAgICAgIGN1c3RvbVNldHRlcigpO1xuICAgICAgfVxuICAgICAgaWYgKHNldHRlcikge1xuICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBuZXdWYWw7XG4gICAgICB9XG4gICAgICBjaGlsZE9iID0gIXNoYWxsb3cgJiYgb2JzZXJ2ZShuZXdWYWwpO1xuICAgICAgZGVwLm5vdGlmeSgpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHkgYW5kXG4gKiB0cmlnZ2VycyBjaGFuZ2Ugbm90aWZpY2F0aW9uIGlmIHRoZSBwcm9wZXJ0eSBkb2Vzbid0XG4gKiBhbHJlYWR5IGV4aXN0LlxuICovXG5mdW5jdGlvbiBzZXQgKHRhcmdldCwga2V5LCB2YWwpIHtcbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgIUFycmF5LmlzQXJyYXkodGFyZ2V0KSAmJlxuICAgICFpc09iamVjdCh0YXJnZXQpXG4gICkge1xuICAgIHdhcm4oKFwiQ2Fubm90IHNldCByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBub24tb2JqZWN0L2FycmF5IHZhbHVlOiBcIiArIHRhcmdldCkpO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkgJiYgaXNWYWxpZEFycmF5SW5kZXgoa2V5KSkge1xuICAgIHRhcmdldC5sZW5ndGggPSBNYXRoLm1heCh0YXJnZXQubGVuZ3RoLCBrZXkpO1xuICAgIHRhcmdldC5zcGxpY2Uoa2V5LCAxLCB2YWwpO1xuICAgIHJldHVybiB2YWxcbiAgfVxuICBpZiAoa2V5IGluIHRhcmdldCAmJiAhKGtleSBpbiBPYmplY3QucHJvdG90eXBlKSkge1xuICAgIHRhcmdldFtrZXldID0gdmFsO1xuICAgIHJldHVybiB2YWxcbiAgfVxuICB2YXIgb2IgPSAodGFyZ2V0KS5fX29iX187XG4gIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkge1xuICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAnQXZvaWQgYWRkaW5nIHJlYWN0aXZlIHByb3BlcnRpZXMgdG8gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArXG4gICAgICAnYXQgcnVudGltZSAtIGRlY2xhcmUgaXQgdXBmcm9udCBpbiB0aGUgZGF0YSBvcHRpb24uJ1xuICAgICk7XG4gICAgcmV0dXJuIHZhbFxuICB9XG4gIGlmICghb2IpIHtcbiAgICB0YXJnZXRba2V5XSA9IHZhbDtcbiAgICByZXR1cm4gdmFsXG4gIH1cbiAgZGVmaW5lUmVhY3RpdmUob2IudmFsdWUsIGtleSwgdmFsKTtcbiAgb2IuZGVwLm5vdGlmeSgpO1xuICByZXR1cm4gdmFsXG59XG5cbi8qKlxuICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cbiAqL1xuZnVuY3Rpb24gZGVsICh0YXJnZXQsIGtleSkge1xuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmXG4gICAgIWlzT2JqZWN0KHRhcmdldClcbiAgKSB7XG4gICAgd2FybigoXCJDYW5ub3QgZGVsZXRlIHJlYWN0aXZlIHByb3BlcnR5IG9uIG5vbi1vYmplY3QvYXJyYXkgdmFsdWU6IFwiICsgdGFyZ2V0KSk7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSAmJiBpc1ZhbGlkQXJyYXlJbmRleChrZXkpKSB7XG4gICAgdGFyZ2V0LnNwbGljZShrZXksIDEpO1xuICAgIHJldHVyblxuICB9XG4gIHZhciBvYiA9ICh0YXJnZXQpLl9fb2JfXztcbiAgaWYgKHRhcmdldC5faXNWdWUgfHwgKG9iICYmIG9iLnZtQ291bnQpKSB7XG4gICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICdBdm9pZCBkZWxldGluZyBwcm9wZXJ0aWVzIG9uIGEgVnVlIGluc3RhbmNlIG9yIGl0cyByb290ICRkYXRhICcgK1xuICAgICAgJy0ganVzdCBzZXQgaXQgdG8gbnVsbC4nXG4gICAgKTtcbiAgICByZXR1cm5cbiAgfVxuICBpZiAoIWhhc093bih0YXJnZXQsIGtleSkpIHtcbiAgICByZXR1cm5cbiAgfVxuICBkZWxldGUgdGFyZ2V0W2tleV07XG4gIGlmICghb2IpIHtcbiAgICByZXR1cm5cbiAgfVxuICBvYi5kZXAubm90aWZ5KCk7XG59XG5cbi8qKlxuICogQ29sbGVjdCBkZXBlbmRlbmNpZXMgb24gYXJyYXkgZWxlbWVudHMgd2hlbiB0aGUgYXJyYXkgaXMgdG91Y2hlZCwgc2luY2VcbiAqIHdlIGNhbm5vdCBpbnRlcmNlcHQgYXJyYXkgZWxlbWVudCBhY2Nlc3MgbGlrZSBwcm9wZXJ0eSBnZXR0ZXJzLlxuICovXG5mdW5jdGlvbiBkZXBlbmRBcnJheSAodmFsdWUpIHtcbiAgZm9yICh2YXIgZSA9ICh2b2lkIDApLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGUgPSB2YWx1ZVtpXTtcbiAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkge1xuICAgICAgZGVwZW5kQXJyYXkoZSk7XG4gICAgfVxuICB9XG59XG5cbi8qICAqL1xuXG4vKipcbiAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcbiAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG4gKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cbiAqL1xudmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG5cbi8qKlxuICogT3B0aW9ucyB3aXRoIHJlc3RyaWN0aW9uc1xuICovXG57XG4gIHN0cmF0cy5lbCA9IHN0cmF0cy5wcm9wc0RhdGEgPSBmdW5jdGlvbiAocGFyZW50LCBjaGlsZCwgdm0sIGtleSkge1xuICAgIGlmICghdm0pIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIFwib3B0aW9uIFxcXCJcIiArIGtleSArIFwiXFxcIiBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBpbnN0YW5jZSBcIiArXG4gICAgICAgICdjcmVhdGlvbiB3aXRoIHRoZSBgbmV3YCBrZXl3b3JkLidcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0U3RyYXQocGFyZW50LCBjaGlsZClcbiAgfTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VEYXRhICh0bywgZnJvbSkge1xuICBpZiAoIWZyb20pIHsgcmV0dXJuIHRvIH1cbiAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IGtleXNbaV07XG4gICAgdG9WYWwgPSB0b1trZXldO1xuICAgIGZyb21WYWwgPSBmcm9tW2tleV07XG4gICAgaWYgKCFoYXNPd24odG8sIGtleSkpIHtcbiAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodG9WYWwpICYmIGlzUGxhaW5PYmplY3QoZnJvbVZhbCkpIHtcbiAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0b1xufVxuXG4vKipcbiAqIERhdGFcbiAqL1xuZnVuY3Rpb24gbWVyZ2VEYXRhT3JGbiAoXG4gIHBhcmVudFZhbCxcbiAgY2hpbGRWYWwsXG4gIHZtXG4pIHtcbiAgaWYgKCF2bSkge1xuICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG4gICAgaWYgKCFjaGlsZFZhbCkge1xuICAgICAgcmV0dXJuIHBhcmVudFZhbFxuICAgIH1cbiAgICBpZiAoIXBhcmVudFZhbCkge1xuICAgICAgcmV0dXJuIGNoaWxkVmFsXG4gICAgfVxuICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcbiAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cbiAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2VcbiAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuICgpIHtcbiAgICAgIHJldHVybiBtZXJnZURhdGEoXG4gICAgICAgIHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodGhpcywgdGhpcykgOiBjaGlsZFZhbCxcbiAgICAgICAgdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHRoaXMsIHRoaXMpIDogcGFyZW50VmFsXG4gICAgICApXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbiAoKSB7XG4gICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IGNoaWxkVmFsLmNhbGwodm0sIHZtKVxuICAgICAgICA6IGNoaWxkVmFsO1xuICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IHBhcmVudFZhbC5jYWxsKHZtLCB2bSlcbiAgICAgICAgOiBwYXJlbnRWYWw7XG4gICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XG4gICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5zdHJhdHMuZGF0YSA9IGZ1bmN0aW9uIChcbiAgcGFyZW50VmFsLFxuICBjaGlsZFZhbCxcbiAgdm1cbikge1xuICBpZiAoIXZtKSB7XG4gICAgaWYgKGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICAgJ1RoZSBcImRhdGFcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArXG4gICAgICAgICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgK1xuICAgICAgICAnZGVmaW5pdGlvbnMuJyxcbiAgICAgICAgdm1cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBwYXJlbnRWYWxcbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlRGF0YU9yRm4ocGFyZW50VmFsLCBjaGlsZFZhbClcbiAgfVxuXG4gIHJldHVybiBtZXJnZURhdGFPckZuKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKVxufTtcblxuLyoqXG4gKiBIb29rcyBhbmQgcHJvcHMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG4gKi9cbmZ1bmN0aW9uIG1lcmdlSG9vayAoXG4gIHBhcmVudFZhbCxcbiAgY2hpbGRWYWxcbikge1xuICByZXR1cm4gY2hpbGRWYWxcbiAgICA/IHBhcmVudFZhbFxuICAgICAgPyBwYXJlbnRWYWwuY29uY2F0KGNoaWxkVmFsKVxuICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkVmFsKVxuICAgICAgICA/IGNoaWxkVmFsXG4gICAgICAgIDogW2NoaWxkVmFsXVxuICAgIDogcGFyZW50VmFsXG59XG5cbkxJRkVDWUNMRV9IT09LUy5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XG4gIHN0cmF0c1tob29rXSA9IG1lcmdlSG9vaztcbn0pO1xuXG4vKipcbiAqIEFzc2V0c1xuICpcbiAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cbiAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2VcbiAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBtZXJnZUFzc2V0cyAoXG4gIHBhcmVudFZhbCxcbiAgY2hpbGRWYWwsXG4gIHZtLFxuICBrZXlcbikge1xuICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG4gIGlmIChjaGlsZFZhbCkge1xuICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGFzc2VydE9iamVjdFR5cGUoa2V5LCBjaGlsZFZhbCwgdm0pO1xuICAgIHJldHVybiBleHRlbmQocmVzLCBjaGlsZFZhbClcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmVzXG4gIH1cbn1cblxuQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcbn0pO1xuXG4vKipcbiAqIFdhdGNoZXJzLlxuICpcbiAqIFdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcbiAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuICovXG5zdHJhdHMud2F0Y2ggPSBmdW5jdGlvbiAoXG4gIHBhcmVudFZhbCxcbiAgY2hpbGRWYWwsXG4gIHZtLFxuICBrZXlcbikge1xuICAvLyB3b3JrIGFyb3VuZCBGaXJlZm94J3MgT2JqZWN0LnByb3RvdHlwZS53YXRjaC4uLlxuICBpZiAocGFyZW50VmFsID09PSBuYXRpdmVXYXRjaCkgeyBwYXJlbnRWYWwgPSB1bmRlZmluZWQ7IH1cbiAgaWYgKGNoaWxkVmFsID09PSBuYXRpdmVXYXRjaCkgeyBjaGlsZFZhbCA9IHVuZGVmaW5lZDsgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFjaGlsZFZhbCkgeyByZXR1cm4gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCkgfVxuICB7XG4gICAgYXNzZXJ0T2JqZWN0VHlwZShrZXksIGNoaWxkVmFsLCB2bSk7XG4gIH1cbiAgaWYgKCFwYXJlbnRWYWwpIHsgcmV0dXJuIGNoaWxkVmFsIH1cbiAgdmFyIHJldCA9IHt9O1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBmb3IgKHZhciBrZXkkMSBpbiBjaGlsZFZhbCkge1xuICAgIHZhciBwYXJlbnQgPSByZXRba2V5JDFdO1xuICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleSQxXTtcbiAgICBpZiAocGFyZW50ICYmICFBcnJheS5pc0FycmF5KHBhcmVudCkpIHtcbiAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICByZXRba2V5JDFdID0gcGFyZW50XG4gICAgICA/IHBhcmVudC5jb25jYXQoY2hpbGQpXG4gICAgICA6IEFycmF5LmlzQXJyYXkoY2hpbGQpID8gY2hpbGQgOiBbY2hpbGRdO1xuICB9XG4gIHJldHVybiByZXRcbn07XG5cbi8qKlxuICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cbiAqL1xuc3RyYXRzLnByb3BzID1cbnN0cmF0cy5tZXRob2RzID1cbnN0cmF0cy5pbmplY3QgPVxuc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKFxuICBwYXJlbnRWYWwsXG4gIGNoaWxkVmFsLFxuICB2bSxcbiAga2V5XG4pIHtcbiAgaWYgKGNoaWxkVmFsICYmIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0T2JqZWN0VHlwZShrZXksIGNoaWxkVmFsLCB2bSk7XG4gIH1cbiAgaWYgKCFwYXJlbnRWYWwpIHsgcmV0dXJuIGNoaWxkVmFsIH1cbiAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gIGlmIChjaGlsZFZhbCkgeyBleHRlbmQocmV0LCBjaGlsZFZhbCk7IH1cbiAgcmV0dXJuIHJldFxufTtcbnN0cmF0cy5wcm92aWRlID0gbWVyZ2VEYXRhT3JGbjtcblxuLyoqXG4gKiBEZWZhdWx0IHN0cmF0ZWd5LlxuICovXG52YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWRcbiAgICA/IHBhcmVudFZhbFxuICAgIDogY2hpbGRWYWxcbn07XG5cbi8qKlxuICogVmFsaWRhdGUgY29tcG9uZW50IG5hbWVzXG4gKi9cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50cyAob3B0aW9ucykge1xuICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5jb21wb25lbnRzKSB7XG4gICAgdmFsaWRhdGVDb21wb25lbnROYW1lKGtleSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lIChuYW1lKSB7XG4gIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG4gICAgd2FybihcbiAgICAgICdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArXG4gICAgICAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgdGhlIGh5cGhlbiwgJyArXG4gICAgICAnYW5kIG11c3Qgc3RhcnQgd2l0aCBhIGxldHRlci4nXG4gICAgKTtcbiAgfVxuICBpZiAoaXNCdWlsdEluVGFnKG5hbWUpIHx8IGNvbmZpZy5pc1Jlc2VydmVkVGFnKG5hbWUpKSB7XG4gICAgd2FybihcbiAgICAgICdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgK1xuICAgICAgJ2lkOiAnICsgbmFtZVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcbiAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BzIChvcHRpb25zLCB2bSkge1xuICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICBpZiAoIXByb3BzKSB7IHJldHVybiB9XG4gIHZhciByZXMgPSB7fTtcbiAgdmFyIGksIHZhbCwgbmFtZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMpKSB7XG4gICAgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBuYW1lID0gY2FtZWxpemUodmFsKTtcbiAgICAgICAgcmVzW25hbWVdID0geyB0eXBlOiBudWxsIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKCdwcm9wcyBtdXN0IGJlIHN0cmluZ3Mgd2hlbiB1c2luZyBhcnJheSBzeW50YXguJyk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocHJvcHMpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7XG4gICAgICB2YWwgPSBwcm9wc1trZXldO1xuICAgICAgbmFtZSA9IGNhbWVsaXplKGtleSk7XG4gICAgICByZXNbbmFtZV0gPSBpc1BsYWluT2JqZWN0KHZhbClcbiAgICAgICAgPyB2YWxcbiAgICAgICAgOiB7IHR5cGU6IHZhbCB9O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB3YXJuKFxuICAgICAgXCJJbnZhbGlkIHZhbHVlIGZvciBvcHRpb24gXFxcInByb3BzXFxcIjogZXhwZWN0ZWQgYW4gQXJyYXkgb3IgYW4gT2JqZWN0LCBcIiArXG4gICAgICBcImJ1dCBnb3QgXCIgKyAodG9SYXdUeXBlKHByb3BzKSkgKyBcIi5cIixcbiAgICAgIHZtXG4gICAgKTtcbiAgfVxuICBvcHRpb25zLnByb3BzID0gcmVzO1xufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSBhbGwgaW5qZWN0aW9ucyBpbnRvIE9iamVjdC1iYXNlZCBmb3JtYXRcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplSW5qZWN0IChvcHRpb25zLCB2bSkge1xuICB2YXIgaW5qZWN0ID0gb3B0aW9ucy5pbmplY3Q7XG4gIGlmICghaW5qZWN0KSB7IHJldHVybiB9XG4gIHZhciBub3JtYWxpemVkID0gb3B0aW9ucy5pbmplY3QgPSB7fTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5qZWN0KSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5qZWN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBub3JtYWxpemVkW2luamVjdFtpXV0gPSB7IGZyb206IGluamVjdFtpXSB9O1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KGluamVjdCkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gaW5qZWN0KSB7XG4gICAgICB2YXIgdmFsID0gaW5qZWN0W2tleV07XG4gICAgICBub3JtYWxpemVkW2tleV0gPSBpc1BsYWluT2JqZWN0KHZhbClcbiAgICAgICAgPyBleHRlbmQoeyBmcm9tOiBrZXkgfSwgdmFsKVxuICAgICAgICA6IHsgZnJvbTogdmFsIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHdhcm4oXG4gICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcXFwiaW5qZWN0XFxcIjogZXhwZWN0ZWQgYW4gQXJyYXkgb3IgYW4gT2JqZWN0LCBcIiArXG4gICAgICBcImJ1dCBnb3QgXCIgKyAodG9SYXdUeXBlKGluamVjdCkpICsgXCIuXCIsXG4gICAgICB2bVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgcmF3IGZ1bmN0aW9uIGRpcmVjdGl2ZXMgaW50byBvYmplY3QgZm9ybWF0LlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVEaXJlY3RpdmVzIChvcHRpb25zKSB7XG4gIHZhciBkaXJzID0gb3B0aW9ucy5kaXJlY3RpdmVzO1xuICBpZiAoZGlycykge1xuICAgIGZvciAodmFyIGtleSBpbiBkaXJzKSB7XG4gICAgICB2YXIgZGVmID0gZGlyc1trZXldO1xuICAgICAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZGlyc1trZXldID0geyBiaW5kOiBkZWYsIHVwZGF0ZTogZGVmIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydE9iamVjdFR5cGUgKG5hbWUsIHZhbHVlLCB2bSkge1xuICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgd2FybihcbiAgICAgIFwiSW52YWxpZCB2YWx1ZSBmb3Igb3B0aW9uIFxcXCJcIiArIG5hbWUgKyBcIlxcXCI6IGV4cGVjdGVkIGFuIE9iamVjdCwgXCIgK1xuICAgICAgXCJidXQgZ290IFwiICsgKHRvUmF3VHlwZSh2YWx1ZSkpICsgXCIuXCIsXG4gICAgICB2bVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG4gKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuICovXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMgKFxuICBwYXJlbnQsXG4gIGNoaWxkLFxuICB2bVxuKSB7XG4gIHtcbiAgICBjaGVja0NvbXBvbmVudHMoY2hpbGQpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNoaWxkID0gY2hpbGQub3B0aW9ucztcbiAgfVxuXG4gIG5vcm1hbGl6ZVByb3BzKGNoaWxkLCB2bSk7XG4gIG5vcm1hbGl6ZUluamVjdChjaGlsZCwgdm0pO1xuICBub3JtYWxpemVEaXJlY3RpdmVzKGNoaWxkKTtcbiAgdmFyIGV4dGVuZHNGcm9tID0gY2hpbGQuZXh0ZW5kcztcbiAgaWYgKGV4dGVuZHNGcm9tKSB7XG4gICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgZXh0ZW5kc0Zyb20sIHZtKTtcbiAgfVxuICBpZiAoY2hpbGQubWl4aW5zKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZC5taXhpbnNbaV0sIHZtKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgdmFyIGtleTtcbiAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG4gICAgbWVyZ2VGaWVsZChrZXkpO1xuICB9XG4gIGZvciAoa2V5IGluIGNoaWxkKSB7XG4gICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG4gICAgICBtZXJnZUZpZWxkKGtleSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG1lcmdlRmllbGQgKGtleSkge1xuICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcbiAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnNcbn1cblxuLyoqXG4gKiBSZXNvbHZlIGFuIGFzc2V0LlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG4gKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVBc3NldCAoXG4gIG9wdGlvbnMsXG4gIHR5cGUsXG4gIGlkLFxuICB3YXJuTWlzc2luZ1xuKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVyblxuICB9XG4gIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xuICAvLyBjaGVjayBsb2NhbCByZWdpc3RyYXRpb24gdmFyaWF0aW9ucyBmaXJzdFxuICBpZiAoaGFzT3duKGFzc2V0cywgaWQpKSB7IHJldHVybiBhc3NldHNbaWRdIH1cbiAgdmFyIGNhbWVsaXplZElkID0gY2FtZWxpemUoaWQpO1xuICBpZiAoaGFzT3duKGFzc2V0cywgY2FtZWxpemVkSWQpKSB7IHJldHVybiBhc3NldHNbY2FtZWxpemVkSWRdIH1cbiAgdmFyIFBhc2NhbENhc2VJZCA9IGNhcGl0YWxpemUoY2FtZWxpemVkSWQpO1xuICBpZiAoaGFzT3duKGFzc2V0cywgUGFzY2FsQ2FzZUlkKSkgeyByZXR1cm4gYXNzZXRzW1Bhc2NhbENhc2VJZF0gfVxuICAvLyBmYWxsYmFjayB0byBwcm90b3R5cGUgY2hhaW5cbiAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHwgYXNzZXRzW2NhbWVsaXplZElkXSB8fCBhc3NldHNbUGFzY2FsQ2FzZUlkXTtcbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICB3YXJuKFxuICAgICAgJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcCAoXG4gIGtleSxcbiAgcHJvcE9wdGlvbnMsXG4gIHByb3BzRGF0YSxcbiAgdm1cbikge1xuICB2YXIgcHJvcCA9IHByb3BPcHRpb25zW2tleV07XG4gIHZhciBhYnNlbnQgPSAhaGFzT3duKHByb3BzRGF0YSwga2V5KTtcbiAgdmFyIHZhbHVlID0gcHJvcHNEYXRhW2tleV07XG4gIC8vIGJvb2xlYW4gY2FzdGluZ1xuICB2YXIgYm9vbGVhbkluZGV4ID0gZ2V0VHlwZUluZGV4KEJvb2xlYW4sIHByb3AudHlwZSk7XG4gIGlmIChib29sZWFuSW5kZXggPiAtMSkge1xuICAgIGlmIChhYnNlbnQgJiYgIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG4gICAgICB2YWx1ZSA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSBoeXBoZW5hdGUoa2V5KSkge1xuICAgICAgLy8gb25seSBjYXN0IGVtcHR5IHN0cmluZyAvIHNhbWUgbmFtZSB0byBib29sZWFuIGlmXG4gICAgICAvLyBib29sZWFuIGhhcyBoaWdoZXIgcHJpb3JpdHlcbiAgICAgIHZhciBzdHJpbmdJbmRleCA9IGdldFR5cGVJbmRleChTdHJpbmcsIHByb3AudHlwZSk7XG4gICAgICBpZiAoc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4KSB7XG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gY2hlY2sgZGVmYXVsdCB2YWx1ZVxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCwga2V5KTtcbiAgICAvLyBzaW5jZSB0aGUgZGVmYXVsdCB2YWx1ZSBpcyBhIGZyZXNoIGNvcHksXG4gICAgLy8gbWFrZSBzdXJlIHRvIG9ic2VydmUgaXQuXG4gICAgdmFyIHByZXZTaG91bGRPYnNlcnZlID0gc2hvdWxkT2JzZXJ2ZTtcbiAgICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG4gICAgb2JzZXJ2ZSh2YWx1ZSk7XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKHByZXZTaG91bGRPYnNlcnZlKTtcbiAgfVxuICB7XG4gICAgYXNzZXJ0UHJvcChwcm9wLCBrZXksIHZhbHVlLCB2bSwgYWJzZW50KTtcbiAgfVxuICByZXR1cm4gdmFsdWVcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuICovXG5mdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlICh2bSwgcHJvcCwga2V5KSB7XG4gIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcbiAgaWYgKCFoYXNPd24ocHJvcCwgJ2RlZmF1bHQnKSkge1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuICB2YXIgZGVmID0gcHJvcC5kZWZhdWx0O1xuICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG4gIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBpc09iamVjdChkZWYpKSB7XG4gICAgd2FybihcbiAgICAgICdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsga2V5ICsgJ1wiOiAnICtcbiAgICAgICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICtcbiAgICAgICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJyxcbiAgICAgIHZtXG4gICAgKTtcbiAgfVxuICAvLyB0aGUgcmF3IHByb3AgdmFsdWUgd2FzIGFsc28gdW5kZWZpbmVkIGZyb20gcHJldmlvdXMgcmVuZGVyLFxuICAvLyByZXR1cm4gcHJldmlvdXMgZGVmYXVsdCB2YWx1ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSB3YXRjaGVyIHRyaWdnZXJcbiAgaWYgKHZtICYmIHZtLiRvcHRpb25zLnByb3BzRGF0YSAmJlxuICAgIHZtLiRvcHRpb25zLnByb3BzRGF0YVtrZXldID09PSB1bmRlZmluZWQgJiZcbiAgICB2bS5fcHJvcHNba2V5XSAhPT0gdW5kZWZpbmVkXG4gICkge1xuICAgIHJldHVybiB2bS5fcHJvcHNba2V5XVxuICB9XG4gIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG4gIC8vIGEgdmFsdWUgaXMgRnVuY3Rpb24gaWYgaXRzIHByb3RvdHlwZSBpcyBmdW5jdGlvbiBldmVuIGFjcm9zcyBkaWZmZXJlbnQgZXhlY3V0aW9uIGNvbnRleHRcbiAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgZ2V0VHlwZShwcm9wLnR5cGUpICE9PSAnRnVuY3Rpb24nXG4gICAgPyBkZWYuY2FsbCh2bSlcbiAgICA6IGRlZlxufVxuXG4vKipcbiAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cbiAqL1xuZnVuY3Rpb24gYXNzZXJ0UHJvcCAoXG4gIHByb3AsXG4gIG5hbWUsXG4gIHZhbHVlLFxuICB2bSxcbiAgYWJzZW50XG4pIHtcbiAgaWYgKHByb3AucmVxdWlyZWQgJiYgYWJzZW50KSB7XG4gICAgd2FybihcbiAgICAgICdNaXNzaW5nIHJlcXVpcmVkIHByb3A6IFwiJyArIG5hbWUgKyAnXCInLFxuICAgICAgdm1cbiAgICApO1xuICAgIHJldHVyblxuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsICYmICFwcm9wLnJlcXVpcmVkKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIHR5cGUgPSBwcm9wLnR5cGU7XG4gIHZhciB2YWxpZCA9ICF0eXBlIHx8IHR5cGUgPT09IHRydWU7XG4gIHZhciBleHBlY3RlZFR5cGVzID0gW107XG4gIGlmICh0eXBlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICB0eXBlID0gW3R5cGVdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGUubGVuZ3RoICYmICF2YWxpZDsgaSsrKSB7XG4gICAgICB2YXIgYXNzZXJ0ZWRUeXBlID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZVtpXSk7XG4gICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSB8fCAnJyk7XG4gICAgICB2YWxpZCA9IGFzc2VydGVkVHlwZS52YWxpZDtcbiAgICB9XG4gIH1cbiAgaWYgKCF2YWxpZCkge1xuICAgIHdhcm4oXG4gICAgICBcIkludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXFxcIlwiICsgbmFtZSArIFwiXFxcIi5cIiArXG4gICAgICBcIiBFeHBlY3RlZCBcIiArIChleHBlY3RlZFR5cGVzLm1hcChjYXBpdGFsaXplKS5qb2luKCcsICcpKSArXG4gICAgICBcIiwgZ290IFwiICsgKHRvUmF3VHlwZSh2YWx1ZSkpICsgXCIuXCIsXG4gICAgICB2bVxuICAgICk7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIHZhbGlkYXRvciA9IHByb3AudmFsaWRhdG9yO1xuICBpZiAodmFsaWRhdG9yKSB7XG4gICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG4gICAgICB3YXJuKFxuICAgICAgICAnSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBuYW1lICsgJ1wiLicsXG4gICAgICAgIHZtXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG52YXIgc2ltcGxlQ2hlY2tSRSA9IC9eKFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbnxGdW5jdGlvbnxTeW1ib2wpJC87XG5cbmZ1bmN0aW9uIGFzc2VydFR5cGUgKHZhbHVlLCB0eXBlKSB7XG4gIHZhciB2YWxpZDtcbiAgdmFyIGV4cGVjdGVkVHlwZSA9IGdldFR5cGUodHlwZSk7XG4gIGlmIChzaW1wbGVDaGVja1JFLnRlc3QoZXhwZWN0ZWRUeXBlKSkge1xuICAgIHZhciB0ID0gdHlwZW9mIHZhbHVlO1xuICAgIHZhbGlkID0gdCA9PT0gZXhwZWN0ZWRUeXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgLy8gZm9yIHByaW1pdGl2ZSB3cmFwcGVyIG9iamVjdHNcbiAgICBpZiAoIXZhbGlkICYmIHQgPT09ICdvYmplY3QnKSB7XG4gICAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnT2JqZWN0Jykge1xuICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnQXJyYXknKSB7XG4gICAgdmFsaWQgPSBBcnJheS5pc0FycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHZhbGlkOiB2YWxpZCxcbiAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZVxuICB9XG59XG5cbi8qKlxuICogVXNlIGZ1bmN0aW9uIHN0cmluZyBuYW1lIHRvIGNoZWNrIGJ1aWx0LWluIHR5cGVzLFxuICogYmVjYXVzZSBhIHNpbXBsZSBlcXVhbGl0eSBjaGVjayB3aWxsIGZhaWwgd2hlbiBydW5uaW5nXG4gKiBhY3Jvc3MgZGlmZmVyZW50IHZtcyAvIGlmcmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGdldFR5cGUgKGZuKSB7XG4gIHZhciBtYXRjaCA9IGZuICYmIGZuLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb24gKFxcdyspLyk7XG4gIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogJydcbn1cblxuZnVuY3Rpb24gaXNTYW1lVHlwZSAoYSwgYikge1xuICByZXR1cm4gZ2V0VHlwZShhKSA9PT0gZ2V0VHlwZShiKVxufVxuXG5mdW5jdGlvbiBnZXRUeXBlSW5kZXggKHR5cGUsIGV4cGVjdGVkVHlwZXMpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVHlwZXMpKSB7XG4gICAgcmV0dXJuIGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlcywgdHlwZSkgPyAwIDogLTFcbiAgfVxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gZXhwZWN0ZWRUeXBlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChpc1NhbWVUeXBlKGV4cGVjdGVkVHlwZXNbaV0sIHR5cGUpKSB7XG4gICAgICByZXR1cm4gaVxuICAgIH1cbiAgfVxuICByZXR1cm4gLTFcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGhhbmRsZUVycm9yIChlcnIsIHZtLCBpbmZvKSB7XG4gIGlmICh2bSkge1xuICAgIHZhciBjdXIgPSB2bTtcbiAgICB3aGlsZSAoKGN1ciA9IGN1ci4kcGFyZW50KSkge1xuICAgICAgdmFyIGhvb2tzID0gY3VyLiRvcHRpb25zLmVycm9yQ2FwdHVyZWQ7XG4gICAgICBpZiAoaG9va3MpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob29rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgY2FwdHVyZSA9IGhvb2tzW2ldLmNhbGwoY3VyLCBlcnIsIHZtLCBpbmZvKSA9PT0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoY2FwdHVyZSkgeyByZXR1cm4gfVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGdsb2JhbEhhbmRsZUVycm9yKGUsIGN1ciwgJ2Vycm9yQ2FwdHVyZWQgaG9vaycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBnbG9iYWxIYW5kbGVFcnJvcihlcnIsIHZtLCBpbmZvKTtcbn1cblxuZnVuY3Rpb24gZ2xvYmFsSGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHtcbiAgaWYgKGNvbmZpZy5lcnJvckhhbmRsZXIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGNvbmZpZy5lcnJvckhhbmRsZXIuY2FsbChudWxsLCBlcnIsIHZtLCBpbmZvKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ0Vycm9yKGUsIG51bGwsICdjb25maWcuZXJyb3JIYW5kbGVyJyk7XG4gICAgfVxuICB9XG4gIGxvZ0Vycm9yKGVyciwgdm0sIGluZm8pO1xufVxuXG5mdW5jdGlvbiBsb2dFcnJvciAoZXJyLCB2bSwgaW5mbykge1xuICB7XG4gICAgd2FybigoXCJFcnJvciBpbiBcIiArIGluZm8gKyBcIjogXFxcIlwiICsgKGVyci50b1N0cmluZygpKSArIFwiXFxcIlwiKSwgdm0pO1xuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmICgoaW5Ccm93c2VyIHx8IGluV2VleCkgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IGVyclxuICB9XG59XG5cbi8qICAqL1xuLyogZ2xvYmFscyBNZXNzYWdlQ2hhbm5lbCAqL1xuXG52YXIgY2FsbGJhY2tzID0gW107XG52YXIgcGVuZGluZyA9IGZhbHNlO1xuXG5mdW5jdGlvbiBmbHVzaENhbGxiYWNrcyAoKSB7XG4gIHBlbmRpbmcgPSBmYWxzZTtcbiAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcbiAgY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29waWVzW2ldKCk7XG4gIH1cbn1cblxuLy8gSGVyZSB3ZSBoYXZlIGFzeW5jIGRlZmVycmluZyB3cmFwcGVycyB1c2luZyBib3RoIG1pY3JvdGFza3MgYW5kIChtYWNybykgdGFza3MuXG4vLyBJbiA8IDIuNCB3ZSB1c2VkIG1pY3JvdGFza3MgZXZlcnl3aGVyZSwgYnV0IHRoZXJlIGFyZSBzb21lIHNjZW5hcmlvcyB3aGVyZVxuLy8gbWljcm90YXNrcyBoYXZlIHRvbyBoaWdoIGEgcHJpb3JpdHkgYW5kIGZpcmUgaW4gYmV0d2VlbiBzdXBwb3NlZGx5XG4vLyBzZXF1ZW50aWFsIGV2ZW50cyAoZS5nLiAjNDUyMSwgIzY2OTApIG9yIGV2ZW4gYmV0d2VlbiBidWJibGluZyBvZiB0aGUgc2FtZVxuLy8gZXZlbnQgKCM2NTY2KS4gSG93ZXZlciwgdXNpbmcgKG1hY3JvKSB0YXNrcyBldmVyeXdoZXJlIGFsc28gaGFzIHN1YnRsZSBwcm9ibGVtc1xuLy8gd2hlbiBzdGF0ZSBpcyBjaGFuZ2VkIHJpZ2h0IGJlZm9yZSByZXBhaW50IChlLmcuICM2ODEzLCBvdXQtaW4gdHJhbnNpdGlvbnMpLlxuLy8gSGVyZSB3ZSB1c2UgbWljcm90YXNrIGJ5IGRlZmF1bHQsIGJ1dCBleHBvc2UgYSB3YXkgdG8gZm9yY2UgKG1hY3JvKSB0YXNrIHdoZW5cbi8vIG5lZWRlZCAoZS5nLiBpbiBldmVudCBoYW5kbGVycyBhdHRhY2hlZCBieSB2LW9uKS5cbnZhciBtaWNyb1RpbWVyRnVuYztcbnZhciBtYWNyb1RpbWVyRnVuYztcbnZhciB1c2VNYWNyb1Rhc2sgPSBmYWxzZTtcblxuLy8gRGV0ZXJtaW5lIChtYWNybykgdGFzayBkZWZlciBpbXBsZW1lbnRhdGlvbi5cbi8vIFRlY2huaWNhbGx5IHNldEltbWVkaWF0ZSBzaG91bGQgYmUgdGhlIGlkZWFsIGNob2ljZSwgYnV0IGl0J3Mgb25seSBhdmFpbGFibGVcbi8vIGluIElFLiBUaGUgb25seSBwb2x5ZmlsbCB0aGF0IGNvbnNpc3RlbnRseSBxdWV1ZXMgdGhlIGNhbGxiYWNrIGFmdGVyIGFsbCBET01cbi8vIGV2ZW50cyB0cmlnZ2VyZWQgaW4gdGhlIHNhbWUgbG9vcCBpcyBieSB1c2luZyBNZXNzYWdlQ2hhbm5lbC5cbi8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKHNldEltbWVkaWF0ZSkpIHtcbiAgbWFjcm9UaW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2V0SW1tZWRpYXRlKGZsdXNoQ2FsbGJhY2tzKTtcbiAgfTtcbn0gZWxzZSBpZiAodHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJyAmJiAoXG4gIGlzTmF0aXZlKE1lc3NhZ2VDaGFubmVsKSB8fFxuICAvLyBQaGFudG9tSlNcbiAgTWVzc2FnZUNoYW5uZWwudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgTWVzc2FnZUNoYW5uZWxDb25zdHJ1Y3Rvcl0nXG4pKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIHZhciBwb3J0ID0gY2hhbm5lbC5wb3J0MjtcbiAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaENhbGxiYWNrcztcbiAgbWFjcm9UaW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcG9ydC5wb3N0TWVzc2FnZSgxKTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIG1hY3JvVGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgIHNldFRpbWVvdXQoZmx1c2hDYWxsYmFja3MsIDApO1xuICB9O1xufVxuXG4vLyBEZXRlcm1pbmUgbWljcm90YXNrIGRlZmVyIGltcGxlbWVudGF0aW9uLlxuLyogaXN0YW5idWwgaWdub3JlIG5leHQsICRmbG93LWRpc2FibGUtbGluZSAqL1xuaWYgKHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShQcm9taXNlKSkge1xuICB2YXIgcCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICBtaWNyb1RpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICBwLnRoZW4oZmx1c2hDYWxsYmFja3MpO1xuICAgIC8vIGluIHByb2JsZW1hdGljIFVJV2ViVmlld3MsIFByb21pc2UudGhlbiBkb2Vzbid0IGNvbXBsZXRlbHkgYnJlYWssIGJ1dFxuICAgIC8vIGl0IGNhbiBnZXQgc3R1Y2sgaW4gYSB3ZWlyZCBzdGF0ZSB3aGVyZSBjYWxsYmFja3MgYXJlIHB1c2hlZCBpbnRvIHRoZVxuICAgIC8vIG1pY3JvdGFzayBxdWV1ZSBidXQgdGhlIHF1ZXVlIGlzbid0IGJlaW5nIGZsdXNoZWQsIHVudGlsIHRoZSBicm93c2VyXG4gICAgLy8gbmVlZHMgdG8gZG8gc29tZSBvdGhlciB3b3JrLCBlLmcuIGhhbmRsZSBhIHRpbWVyLiBUaGVyZWZvcmUgd2UgY2FuXG4gICAgLy8gXCJmb3JjZVwiIHRoZSBtaWNyb3Rhc2sgcXVldWUgdG8gYmUgZmx1c2hlZCBieSBhZGRpbmcgYW4gZW1wdHkgdGltZXIuXG4gICAgaWYgKGlzSU9TKSB7IHNldFRpbWVvdXQobm9vcCk7IH1cbiAgfTtcbn0gZWxzZSB7XG4gIC8vIGZhbGxiYWNrIHRvIG1hY3JvXG4gIG1pY3JvVGltZXJGdW5jID0gbWFjcm9UaW1lckZ1bmM7XG59XG5cbi8qKlxuICogV3JhcCBhIGZ1bmN0aW9uIHNvIHRoYXQgaWYgYW55IGNvZGUgaW5zaWRlIHRyaWdnZXJzIHN0YXRlIGNoYW5nZSxcbiAqIHRoZSBjaGFuZ2VzIGFyZSBxdWV1ZWQgdXNpbmcgYSAobWFjcm8pIHRhc2sgaW5zdGVhZCBvZiBhIG1pY3JvdGFzay5cbiAqL1xuZnVuY3Rpb24gd2l0aE1hY3JvVGFzayAoZm4pIHtcbiAgcmV0dXJuIGZuLl93aXRoVGFzayB8fCAoZm4uX3dpdGhUYXNrID0gZnVuY3Rpb24gKCkge1xuICAgIHVzZU1hY3JvVGFzayA9IHRydWU7XG4gICAgdmFyIHJlcyA9IGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgdXNlTWFjcm9UYXNrID0gZmFsc2U7XG4gICAgcmV0dXJuIHJlc1xuICB9KVxufVxuXG5mdW5jdGlvbiBuZXh0VGljayAoY2IsIGN0eCkge1xuICB2YXIgX3Jlc29sdmU7XG4gIGNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY2IpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNiLmNhbGwoY3R4KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZSwgY3R4LCAnbmV4dFRpY2snKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKF9yZXNvbHZlKSB7XG4gICAgICBfcmVzb2x2ZShjdHgpO1xuICAgIH1cbiAgfSk7XG4gIGlmICghcGVuZGluZykge1xuICAgIHBlbmRpbmcgPSB0cnVlO1xuICAgIGlmICh1c2VNYWNyb1Rhc2spIHtcbiAgICAgIG1hY3JvVGltZXJGdW5jKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pY3JvVGltZXJGdW5jKCk7XG4gICAgfVxuICB9XG4gIC8vICRmbG93LWRpc2FibGUtbGluZVxuICBpZiAoIWNiICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pXG4gIH1cbn1cblxuLyogICovXG5cbnZhciBtYXJrO1xudmFyIG1lYXN1cmU7XG5cbntcbiAgdmFyIHBlcmYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnBlcmZvcm1hbmNlO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKFxuICAgIHBlcmYgJiZcbiAgICBwZXJmLm1hcmsgJiZcbiAgICBwZXJmLm1lYXN1cmUgJiZcbiAgICBwZXJmLmNsZWFyTWFya3MgJiZcbiAgICBwZXJmLmNsZWFyTWVhc3VyZXNcbiAgKSB7XG4gICAgbWFyayA9IGZ1bmN0aW9uICh0YWcpIHsgcmV0dXJuIHBlcmYubWFyayh0YWcpOyB9O1xuICAgIG1lYXN1cmUgPSBmdW5jdGlvbiAobmFtZSwgc3RhcnRUYWcsIGVuZFRhZykge1xuICAgICAgcGVyZi5tZWFzdXJlKG5hbWUsIHN0YXJ0VGFnLCBlbmRUYWcpO1xuICAgICAgcGVyZi5jbGVhck1hcmtzKHN0YXJ0VGFnKTtcbiAgICAgIHBlcmYuY2xlYXJNYXJrcyhlbmRUYWcpO1xuICAgICAgcGVyZi5jbGVhck1lYXN1cmVzKG5hbWUpO1xuICAgIH07XG4gIH1cbn1cblxuLyogbm90IHR5cGUgY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgZmxvdyBkb2Vzbid0IHBsYXkgd2VsbCB3aXRoIFByb3h5ICovXG5cbnZhciBpbml0UHJveHk7XG5cbntcbiAgdmFyIGFsbG93ZWRHbG9iYWxzID0gbWFrZU1hcChcbiAgICAnSW5maW5pdHksdW5kZWZpbmVkLE5hTixpc0Zpbml0ZSxpc05hTiwnICtcbiAgICAncGFyc2VGbG9hdCxwYXJzZUludCxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSxlbmNvZGVVUklDb21wb25lbnQsJyArXG4gICAgJ01hdGgsTnVtYmVyLERhdGUsQXJyYXksT2JqZWN0LEJvb2xlYW4sU3RyaW5nLFJlZ0V4cCxNYXAsU2V0LEpTT04sSW50bCwnICtcbiAgICAncmVxdWlyZScgLy8gZm9yIFdlYnBhY2svQnJvd3NlcmlmeVxuICApO1xuXG4gIHZhciB3YXJuTm9uUHJlc2VudCA9IGZ1bmN0aW9uICh0YXJnZXQsIGtleSkge1xuICAgIHdhcm4oXG4gICAgICBcIlByb3BlcnR5IG9yIG1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgbm90IGRlZmluZWQgb24gdGhlIGluc3RhbmNlIGJ1dCBcIiArXG4gICAgICAncmVmZXJlbmNlZCBkdXJpbmcgcmVuZGVyLiBNYWtlIHN1cmUgdGhhdCB0aGlzIHByb3BlcnR5IGlzIHJlYWN0aXZlLCAnICtcbiAgICAgICdlaXRoZXIgaW4gdGhlIGRhdGEgb3B0aW9uLCBvciBmb3IgY2xhc3MtYmFzZWQgY29tcG9uZW50cywgYnkgJyArXG4gICAgICAnaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eS4gJyArXG4gICAgICAnU2VlOiBodHRwczovL3Z1ZWpzLm9yZy92Mi9ndWlkZS9yZWFjdGl2aXR5Lmh0bWwjRGVjbGFyaW5nLVJlYWN0aXZlLVByb3BlcnRpZXMuJyxcbiAgICAgIHRhcmdldFxuICAgICk7XG4gIH07XG5cbiAgdmFyIGhhc1Byb3h5ID1cbiAgICB0eXBlb2YgUHJveHkgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFByb3h5KTtcblxuICBpZiAoaGFzUHJveHkpIHtcbiAgICB2YXIgaXNCdWlsdEluTW9kaWZpZXIgPSBtYWtlTWFwKCdzdG9wLHByZXZlbnQsc2VsZixjdHJsLHNoaWZ0LGFsdCxtZXRhLGV4YWN0Jyk7XG4gICAgY29uZmlnLmtleUNvZGVzID0gbmV3IFByb3h5KGNvbmZpZy5rZXlDb2Rlcywge1xuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQgKHRhcmdldCwga2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAoaXNCdWlsdEluTW9kaWZpZXIoa2V5KSkge1xuICAgICAgICAgIHdhcm4oKFwiQXZvaWQgb3ZlcndyaXRpbmcgYnVpbHQtaW4gbW9kaWZpZXIgaW4gY29uZmlnLmtleUNvZGVzOiAuXCIgKyBrZXkpKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhciBoYXNIYW5kbGVyID0ge1xuICAgIGhhczogZnVuY3Rpb24gaGFzICh0YXJnZXQsIGtleSkge1xuICAgICAgdmFyIGhhcyA9IGtleSBpbiB0YXJnZXQ7XG4gICAgICB2YXIgaXNBbGxvd2VkID0gYWxsb3dlZEdsb2JhbHMoa2V5KSB8fCBrZXkuY2hhckF0KDApID09PSAnXyc7XG4gICAgICBpZiAoIWhhcyAmJiAhaXNBbGxvd2VkKSB7XG4gICAgICAgIHdhcm5Ob25QcmVzZW50KHRhcmdldCwga2V5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXMgfHwgIWlzQWxsb3dlZFxuICAgIH1cbiAgfTtcblxuICB2YXIgZ2V0SGFuZGxlciA9IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCAodGFyZ2V0LCBrZXkpIHtcbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiAhKGtleSBpbiB0YXJnZXQpKSB7XG4gICAgICAgIHdhcm5Ob25QcmVzZW50KHRhcmdldCwga2V5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXJnZXRba2V5XVxuICAgIH1cbiAgfTtcblxuICBpbml0UHJveHkgPSBmdW5jdGlvbiBpbml0UHJveHkgKHZtKSB7XG4gICAgaWYgKGhhc1Byb3h5KSB7XG4gICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggcHJveHkgaGFuZGxlciB0byB1c2VcbiAgICAgIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7XG4gICAgICB2YXIgaGFuZGxlcnMgPSBvcHRpb25zLnJlbmRlciAmJiBvcHRpb25zLnJlbmRlci5fd2l0aFN0cmlwcGVkXG4gICAgICAgID8gZ2V0SGFuZGxlclxuICAgICAgICA6IGhhc0hhbmRsZXI7XG4gICAgICB2bS5fcmVuZGVyUHJveHkgPSBuZXcgUHJveHkodm0sIGhhbmRsZXJzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdm0uX3JlbmRlclByb3h5ID0gdm07XG4gICAgfVxuICB9O1xufVxuXG4vKiAgKi9cblxudmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcblxuLyoqXG4gKiBSZWN1cnNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3RcbiAqIGlzIGNvbGxlY3RlZCBhcyBhIFwiZGVlcFwiIGRlcGVuZGVuY3kuXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlICh2YWwpIHtcbiAgX3RyYXZlcnNlKHZhbCwgc2Vlbk9iamVjdHMpO1xuICBzZWVuT2JqZWN0cy5jbGVhcigpO1xufVxuXG5mdW5jdGlvbiBfdHJhdmVyc2UgKHZhbCwgc2Vlbikge1xuICB2YXIgaSwga2V5cztcbiAgdmFyIGlzQSA9IEFycmF5LmlzQXJyYXkodmFsKTtcbiAgaWYgKCghaXNBICYmICFpc09iamVjdCh2YWwpKSB8fCBPYmplY3QuaXNGcm96ZW4odmFsKSB8fCB2YWwgaW5zdGFuY2VvZiBWTm9kZSkge1xuICAgIHJldHVyblxuICB9XG4gIGlmICh2YWwuX19vYl9fKSB7XG4gICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XG4gICAgaWYgKHNlZW4uaGFzKGRlcElkKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHNlZW4uYWRkKGRlcElkKTtcbiAgfVxuICBpZiAoaXNBKSB7XG4gICAgaSA9IHZhbC5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkgeyBfdHJhdmVyc2UodmFsW2ldLCBzZWVuKTsgfVxuICB9IGVsc2Uge1xuICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7IF90cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pOyB9XG4gIH1cbn1cblxuLyogICovXG5cbnZhciBub3JtYWxpemVFdmVudCA9IGNhY2hlZChmdW5jdGlvbiAobmFtZSkge1xuICB2YXIgcGFzc2l2ZSA9IG5hbWUuY2hhckF0KDApID09PSAnJic7XG4gIG5hbWUgPSBwYXNzaXZlID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7XG4gIHZhciBvbmNlJCQxID0gbmFtZS5jaGFyQXQoMCkgPT09ICd+JzsgLy8gUHJlZml4ZWQgbGFzdCwgY2hlY2tlZCBmaXJzdFxuICBuYW1lID0gb25jZSQkMSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lO1xuICB2YXIgY2FwdHVyZSA9IG5hbWUuY2hhckF0KDApID09PSAnISc7XG4gIG5hbWUgPSBjYXB0dXJlID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7XG4gIHJldHVybiB7XG4gICAgbmFtZTogbmFtZSxcbiAgICBvbmNlOiBvbmNlJCQxLFxuICAgIGNhcHR1cmU6IGNhcHR1cmUsXG4gICAgcGFzc2l2ZTogcGFzc2l2ZVxuICB9XG59KTtcblxuZnVuY3Rpb24gY3JlYXRlRm5JbnZva2VyIChmbnMpIHtcbiAgZnVuY3Rpb24gaW52b2tlciAoKSB7XG4gICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXG4gICAgdmFyIGZucyA9IGludm9rZXIuZm5zO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZucykpIHtcbiAgICAgIHZhciBjbG9uZWQgPSBmbnMuc2xpY2UoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvbmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNsb25lZFtpXS5hcHBseShudWxsLCBhcmd1bWVudHMkMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJldHVybiBoYW5kbGVyIHJldHVybiB2YWx1ZSBmb3Igc2luZ2xlIGhhbmRsZXJzXG4gICAgICByZXR1cm4gZm5zLmFwcGx5KG51bGwsIGFyZ3VtZW50cylcbiAgICB9XG4gIH1cbiAgaW52b2tlci5mbnMgPSBmbnM7XG4gIHJldHVybiBpbnZva2VyXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpc3RlbmVycyAoXG4gIG9uLFxuICBvbGRPbixcbiAgYWRkLFxuICByZW1vdmUkJDEsXG4gIHZtXG4pIHtcbiAgdmFyIG5hbWUsIGRlZiwgY3VyLCBvbGQsIGV2ZW50O1xuICBmb3IgKG5hbWUgaW4gb24pIHtcbiAgICBkZWYgPSBjdXIgPSBvbltuYW1lXTtcbiAgICBvbGQgPSBvbGRPbltuYW1lXTtcbiAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KG5hbWUpO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChpc1VuZGVmKGN1cikpIHtcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgIFwiSW52YWxpZCBoYW5kbGVyIGZvciBldmVudCBcXFwiXCIgKyAoZXZlbnQubmFtZSkgKyBcIlxcXCI6IGdvdCBcIiArIFN0cmluZyhjdXIpLFxuICAgICAgICB2bVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGlzVW5kZWYob2xkKSkge1xuICAgICAgaWYgKGlzVW5kZWYoY3VyLmZucykpIHtcbiAgICAgICAgY3VyID0gb25bbmFtZV0gPSBjcmVhdGVGbkludm9rZXIoY3VyKTtcbiAgICAgIH1cbiAgICAgIGFkZChldmVudC5uYW1lLCBjdXIsIGV2ZW50Lm9uY2UsIGV2ZW50LmNhcHR1cmUsIGV2ZW50LnBhc3NpdmUsIGV2ZW50LnBhcmFtcyk7XG4gICAgfSBlbHNlIGlmIChjdXIgIT09IG9sZCkge1xuICAgICAgb2xkLmZucyA9IGN1cjtcbiAgICAgIG9uW25hbWVdID0gb2xkO1xuICAgIH1cbiAgfVxuICBmb3IgKG5hbWUgaW4gb2xkT24pIHtcbiAgICBpZiAoaXNVbmRlZihvbltuYW1lXSkpIHtcbiAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQobmFtZSk7XG4gICAgICByZW1vdmUkJDEoZXZlbnQubmFtZSwgb2xkT25bbmFtZV0sIGV2ZW50LmNhcHR1cmUpO1xuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gbWVyZ2VWTm9kZUhvb2sgKGRlZiwgaG9va0tleSwgaG9vaykge1xuICBpZiAoZGVmIGluc3RhbmNlb2YgVk5vZGUpIHtcbiAgICBkZWYgPSBkZWYuZGF0YS5ob29rIHx8IChkZWYuZGF0YS5ob29rID0ge30pO1xuICB9XG4gIHZhciBpbnZva2VyO1xuICB2YXIgb2xkSG9vayA9IGRlZltob29rS2V5XTtcblxuICBmdW5jdGlvbiB3cmFwcGVkSG9vayAoKSB7XG4gICAgaG9vay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIC8vIGltcG9ydGFudDogcmVtb3ZlIG1lcmdlZCBob29rIHRvIGVuc3VyZSBpdCdzIGNhbGxlZCBvbmx5IG9uY2VcbiAgICAvLyBhbmQgcHJldmVudCBtZW1vcnkgbGVha1xuICAgIHJlbW92ZShpbnZva2VyLmZucywgd3JhcHBlZEhvb2spO1xuICB9XG5cbiAgaWYgKGlzVW5kZWYob2xkSG9vaykpIHtcbiAgICAvLyBubyBleGlzdGluZyBob29rXG4gICAgaW52b2tlciA9IGNyZWF0ZUZuSW52b2tlcihbd3JhcHBlZEhvb2tdKTtcbiAgfSBlbHNlIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNEZWYob2xkSG9vay5mbnMpICYmIGlzVHJ1ZShvbGRIb29rLm1lcmdlZCkpIHtcbiAgICAgIC8vIGFscmVhZHkgYSBtZXJnZWQgaW52b2tlclxuICAgICAgaW52b2tlciA9IG9sZEhvb2s7XG4gICAgICBpbnZva2VyLmZucy5wdXNoKHdyYXBwZWRIb29rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZXhpc3RpbmcgcGxhaW4gaG9va1xuICAgICAgaW52b2tlciA9IGNyZWF0ZUZuSW52b2tlcihbb2xkSG9vaywgd3JhcHBlZEhvb2tdKTtcbiAgICB9XG4gIH1cblxuICBpbnZva2VyLm1lcmdlZCA9IHRydWU7XG4gIGRlZltob29rS2V5XSA9IGludm9rZXI7XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhIChcbiAgZGF0YSxcbiAgQ3RvcixcbiAgdGFnXG4pIHtcbiAgLy8gd2UgYXJlIG9ubHkgZXh0cmFjdGluZyByYXcgdmFsdWVzIGhlcmUuXG4gIC8vIHZhbGlkYXRpb24gYW5kIGRlZmF1bHQgdmFsdWVzIGFyZSBoYW5kbGVkIGluIHRoZSBjaGlsZFxuICAvLyBjb21wb25lbnQgaXRzZWxmLlxuICB2YXIgcHJvcE9wdGlvbnMgPSBDdG9yLm9wdGlvbnMucHJvcHM7XG4gIGlmIChpc1VuZGVmKHByb3BPcHRpb25zKSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciByZXMgPSB7fTtcbiAgdmFyIGF0dHJzID0gZGF0YS5hdHRycztcbiAgdmFyIHByb3BzID0gZGF0YS5wcm9wcztcbiAgaWYgKGlzRGVmKGF0dHJzKSB8fCBpc0RlZihwcm9wcykpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHtcbiAgICAgIHZhciBhbHRLZXkgPSBoeXBoZW5hdGUoa2V5KTtcbiAgICAgIHtcbiAgICAgICAgdmFyIGtleUluTG93ZXJDYXNlID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBrZXkgIT09IGtleUluTG93ZXJDYXNlICYmXG4gICAgICAgICAgYXR0cnMgJiYgaGFzT3duKGF0dHJzLCBrZXlJbkxvd2VyQ2FzZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGlwKFxuICAgICAgICAgICAgXCJQcm9wIFxcXCJcIiArIGtleUluTG93ZXJDYXNlICsgXCJcXFwiIGlzIHBhc3NlZCB0byBjb21wb25lbnQgXCIgK1xuICAgICAgICAgICAgKGZvcm1hdENvbXBvbmVudE5hbWUodGFnIHx8IEN0b3IpKSArIFwiLCBidXQgdGhlIGRlY2xhcmVkIHByb3AgbmFtZSBpc1wiICtcbiAgICAgICAgICAgIFwiIFxcXCJcIiArIGtleSArIFwiXFxcIi4gXCIgK1xuICAgICAgICAgICAgXCJOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCBjYW1lbENhc2VkIFwiICtcbiAgICAgICAgICAgIFwicHJvcHMgbmVlZCB0byB1c2UgdGhlaXIga2ViYWItY2FzZSBlcXVpdmFsZW50cyB3aGVuIHVzaW5nIGluLURPTSBcIiArXG4gICAgICAgICAgICBcInRlbXBsYXRlcy4gWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXFxcIlwiICsgYWx0S2V5ICsgXCJcXFwiIGluc3RlYWQgb2YgXFxcIlwiICsga2V5ICsgXCJcXFwiLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2hlY2tQcm9wKHJlcywgcHJvcHMsIGtleSwgYWx0S2V5LCB0cnVlKSB8fFxuICAgICAgY2hlY2tQcm9wKHJlcywgYXR0cnMsIGtleSwgYWx0S2V5LCBmYWxzZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gY2hlY2tQcm9wIChcbiAgcmVzLFxuICBoYXNoLFxuICBrZXksXG4gIGFsdEtleSxcbiAgcHJlc2VydmVcbikge1xuICBpZiAoaXNEZWYoaGFzaCkpIHtcbiAgICBpZiAoaGFzT3duKGhhc2gsIGtleSkpIHtcbiAgICAgIHJlc1trZXldID0gaGFzaFtrZXldO1xuICAgICAgaWYgKCFwcmVzZXJ2ZSkge1xuICAgICAgICBkZWxldGUgaGFzaFtrZXldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2UgaWYgKGhhc093bihoYXNoLCBhbHRLZXkpKSB7XG4gICAgICByZXNba2V5XSA9IGhhc2hbYWx0S2V5XTtcbiAgICAgIGlmICghcHJlc2VydmUpIHtcbiAgICAgICAgZGVsZXRlIGhhc2hbYWx0S2V5XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG4vKiAgKi9cblxuLy8gVGhlIHRlbXBsYXRlIGNvbXBpbGVyIGF0dGVtcHRzIHRvIG1pbmltaXplIHRoZSBuZWVkIGZvciBub3JtYWxpemF0aW9uIGJ5XG4vLyBzdGF0aWNhbGx5IGFuYWx5emluZyB0aGUgdGVtcGxhdGUgYXQgY29tcGlsZSB0aW1lLlxuLy9cbi8vIEZvciBwbGFpbiBIVE1MIG1hcmt1cCwgbm9ybWFsaXphdGlvbiBjYW4gYmUgY29tcGxldGVseSBza2lwcGVkIGJlY2F1c2UgdGhlXG4vLyBnZW5lcmF0ZWQgcmVuZGVyIGZ1bmN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gcmV0dXJuIEFycmF5PFZOb2RlPi4gVGhlcmUgYXJlXG4vLyB0d28gY2FzZXMgd2hlcmUgZXh0cmEgbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQ6XG5cbi8vIDEuIFdoZW4gdGhlIGNoaWxkcmVuIGNvbnRhaW5zIGNvbXBvbmVudHMgLSBiZWNhdXNlIGEgZnVuY3Rpb25hbCBjb21wb25lbnRcbi8vIG1heSByZXR1cm4gYW4gQXJyYXkgaW5zdGVhZCBvZiBhIHNpbmdsZSByb290LiBJbiB0aGlzIGNhc2UsIGp1c3QgYSBzaW1wbGVcbi8vIG5vcm1hbGl6YXRpb24gaXMgbmVlZGVkIC0gaWYgYW55IGNoaWxkIGlzIGFuIEFycmF5LCB3ZSBmbGF0dGVuIHRoZSB3aG9sZVxuLy8gdGhpbmcgd2l0aCBBcnJheS5wcm90b3R5cGUuY29uY2F0LiBJdCBpcyBndWFyYW50ZWVkIHRvIGJlIG9ubHkgMS1sZXZlbCBkZWVwXG4vLyBiZWNhdXNlIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBhbHJlYWR5IG5vcm1hbGl6ZSB0aGVpciBvd24gY2hpbGRyZW4uXG5mdW5jdGlvbiBzaW1wbGVOb3JtYWxpemVDaGlsZHJlbiAoY2hpbGRyZW4pIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuW2ldKSkge1xuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGNoaWxkcmVuKVxuICAgIH1cbiAgfVxuICByZXR1cm4gY2hpbGRyZW5cbn1cblxuLy8gMi4gV2hlbiB0aGUgY2hpbGRyZW4gY29udGFpbnMgY29uc3RydWN0cyB0aGF0IGFsd2F5cyBnZW5lcmF0ZWQgbmVzdGVkIEFycmF5cyxcbi8vIGUuZy4gPHRlbXBsYXRlPiwgPHNsb3Q+LCB2LWZvciwgb3Igd2hlbiB0aGUgY2hpbGRyZW4gaXMgcHJvdmlkZWQgYnkgdXNlclxuLy8gd2l0aCBoYW5kLXdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9ucyAvIEpTWC4gSW4gc3VjaCBjYXNlcyBhIGZ1bGwgbm9ybWFsaXphdGlvblxuLy8gaXMgbmVlZGVkIHRvIGNhdGVyIHRvIGFsbCBwb3NzaWJsZSB0eXBlcyBvZiBjaGlsZHJlbiB2YWx1ZXMuXG5mdW5jdGlvbiBub3JtYWxpemVDaGlsZHJlbiAoY2hpbGRyZW4pIHtcbiAgcmV0dXJuIGlzUHJpbWl0aXZlKGNoaWxkcmVuKVxuICAgID8gW2NyZWF0ZVRleHRWTm9kZShjaGlsZHJlbildXG4gICAgOiBBcnJheS5pc0FycmF5KGNoaWxkcmVuKVxuICAgICAgPyBub3JtYWxpemVBcnJheUNoaWxkcmVuKGNoaWxkcmVuKVxuICAgICAgOiB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gaXNUZXh0Tm9kZSAobm9kZSkge1xuICByZXR1cm4gaXNEZWYobm9kZSkgJiYgaXNEZWYobm9kZS50ZXh0KSAmJiBpc0ZhbHNlKG5vZGUuaXNDb21tZW50KVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVBcnJheUNoaWxkcmVuIChjaGlsZHJlbiwgbmVzdGVkSW5kZXgpIHtcbiAgdmFyIHJlcyA9IFtdO1xuICB2YXIgaSwgYywgbGFzdEluZGV4LCBsYXN0O1xuICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBjID0gY2hpbGRyZW5baV07XG4gICAgaWYgKGlzVW5kZWYoYykgfHwgdHlwZW9mIGMgPT09ICdib29sZWFuJykgeyBjb250aW51ZSB9XG4gICAgbGFzdEluZGV4ID0gcmVzLmxlbmd0aCAtIDE7XG4gICAgbGFzdCA9IHJlc1tsYXN0SW5kZXhdO1xuICAgIC8vICBuZXN0ZWRcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjKSkge1xuICAgICAgaWYgKGMubGVuZ3RoID4gMCkge1xuICAgICAgICBjID0gbm9ybWFsaXplQXJyYXlDaGlsZHJlbihjLCAoKG5lc3RlZEluZGV4IHx8ICcnKSArIFwiX1wiICsgaSkpO1xuICAgICAgICAvLyBtZXJnZSBhZGphY2VudCB0ZXh0IG5vZGVzXG4gICAgICAgIGlmIChpc1RleHROb2RlKGNbMF0pICYmIGlzVGV4dE5vZGUobGFzdCkpIHtcbiAgICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyAoY1swXSkudGV4dCk7XG4gICAgICAgICAgYy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5wdXNoLmFwcGx5KHJlcywgYyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1ByaW1pdGl2ZShjKSkge1xuICAgICAgaWYgKGlzVGV4dE5vZGUobGFzdCkpIHtcbiAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2Rlc1xuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBmb3IgU1NSIGh5ZHJhdGlvbiBiZWNhdXNlIHRleHQgbm9kZXMgYXJlXG4gICAgICAgIC8vIGVzc2VudGlhbGx5IG1lcmdlZCB3aGVuIHJlbmRlcmVkIHRvIEhUTUwgc3RyaW5nc1xuICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyBjKTtcbiAgICAgIH0gZWxzZSBpZiAoYyAhPT0gJycpIHtcbiAgICAgICAgLy8gY29udmVydCBwcmltaXRpdmUgdG8gdm5vZGVcbiAgICAgICAgcmVzLnB1c2goY3JlYXRlVGV4dFZOb2RlKGMpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzVGV4dE5vZGUoYykgJiYgaXNUZXh0Tm9kZShsYXN0KSkge1xuICAgICAgICAvLyBtZXJnZSBhZGphY2VudCB0ZXh0IG5vZGVzXG4gICAgICAgIHJlc1tsYXN0SW5kZXhdID0gY3JlYXRlVGV4dFZOb2RlKGxhc3QudGV4dCArIGMudGV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZWZhdWx0IGtleSBmb3IgbmVzdGVkIGFycmF5IGNoaWxkcmVuIChsaWtlbHkgZ2VuZXJhdGVkIGJ5IHYtZm9yKVxuICAgICAgICBpZiAoaXNUcnVlKGNoaWxkcmVuLl9pc1ZMaXN0KSAmJlxuICAgICAgICAgIGlzRGVmKGMudGFnKSAmJlxuICAgICAgICAgIGlzVW5kZWYoYy5rZXkpICYmXG4gICAgICAgICAgaXNEZWYobmVzdGVkSW5kZXgpKSB7XG4gICAgICAgICAgYy5rZXkgPSBcIl9fdmxpc3RcIiArIG5lc3RlZEluZGV4ICsgXCJfXCIgKyBpICsgXCJfX1wiO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5wdXNoKGMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBlbnN1cmVDdG9yIChjb21wLCBiYXNlKSB7XG4gIGlmIChcbiAgICBjb21wLl9fZXNNb2R1bGUgfHxcbiAgICAoaGFzU3ltYm9sICYmIGNvbXBbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZScpXG4gICkge1xuICAgIGNvbXAgPSBjb21wLmRlZmF1bHQ7XG4gIH1cbiAgcmV0dXJuIGlzT2JqZWN0KGNvbXApXG4gICAgPyBiYXNlLmV4dGVuZChjb21wKVxuICAgIDogY29tcFxufVxuXG5mdW5jdGlvbiBjcmVhdGVBc3luY1BsYWNlaG9sZGVyIChcbiAgZmFjdG9yeSxcbiAgZGF0YSxcbiAgY29udGV4dCxcbiAgY2hpbGRyZW4sXG4gIHRhZ1xuKSB7XG4gIHZhciBub2RlID0gY3JlYXRlRW1wdHlWTm9kZSgpO1xuICBub2RlLmFzeW5jRmFjdG9yeSA9IGZhY3Rvcnk7XG4gIG5vZGUuYXN5bmNNZXRhID0geyBkYXRhOiBkYXRhLCBjb250ZXh0OiBjb250ZXh0LCBjaGlsZHJlbjogY2hpbGRyZW4sIHRhZzogdGFnIH07XG4gIHJldHVybiBub2RlXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudCAoXG4gIGZhY3RvcnksXG4gIGJhc2VDdG9yLFxuICBjb250ZXh0XG4pIHtcbiAgaWYgKGlzVHJ1ZShmYWN0b3J5LmVycm9yKSAmJiBpc0RlZihmYWN0b3J5LmVycm9yQ29tcCkpIHtcbiAgICByZXR1cm4gZmFjdG9yeS5lcnJvckNvbXBcbiAgfVxuXG4gIGlmIChpc0RlZihmYWN0b3J5LnJlc29sdmVkKSkge1xuICAgIHJldHVybiBmYWN0b3J5LnJlc29sdmVkXG4gIH1cblxuICBpZiAoaXNUcnVlKGZhY3RvcnkubG9hZGluZykgJiYgaXNEZWYoZmFjdG9yeS5sb2FkaW5nQ29tcCkpIHtcbiAgICByZXR1cm4gZmFjdG9yeS5sb2FkaW5nQ29tcFxuICB9XG5cbiAgaWYgKGlzRGVmKGZhY3RvcnkuY29udGV4dHMpKSB7XG4gICAgLy8gYWxyZWFkeSBwZW5kaW5nXG4gICAgZmFjdG9yeS5jb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb250ZXh0cyA9IGZhY3RvcnkuY29udGV4dHMgPSBbY29udGV4dF07XG4gICAgdmFyIHN5bmMgPSB0cnVlO1xuXG4gICAgdmFyIGZvcmNlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZXh0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29udGV4dHNbaV0uJGZvcmNlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciByZXNvbHZlID0gb25jZShmdW5jdGlvbiAocmVzKSB7XG4gICAgICAvLyBjYWNoZSByZXNvbHZlZFxuICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IGVuc3VyZUN0b3IocmVzLCBiYXNlQ3Rvcik7XG4gICAgICAvLyBpbnZva2UgY2FsbGJhY2tzIG9ubHkgaWYgdGhpcyBpcyBub3QgYSBzeW5jaHJvbm91cyByZXNvbHZlXG4gICAgICAvLyAoYXN5bmMgcmVzb2x2ZXMgYXJlIHNoaW1tZWQgYXMgc3luY2hyb25vdXMgZHVyaW5nIFNTUilcbiAgICAgIGlmICghc3luYykge1xuICAgICAgICBmb3JjZVJlbmRlcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHJlamVjdCA9IG9uY2UoZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICAgXCJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQ6IFwiICsgKFN0cmluZyhmYWN0b3J5KSkgK1xuICAgICAgICAocmVhc29uID8gKFwiXFxuUmVhc29uOiBcIiArIHJlYXNvbikgOiAnJylcbiAgICAgICk7XG4gICAgICBpZiAoaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7XG4gICAgICAgIGZhY3RvcnkuZXJyb3IgPSB0cnVlO1xuICAgICAgICBmb3JjZVJlbmRlcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHJlcyA9IGZhY3RvcnkocmVzb2x2ZSwgcmVqZWN0KTtcblxuICAgIGlmIChpc09iamVjdChyZXMpKSB7XG4gICAgICBpZiAodHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vICgpID0+IFByb21pc2VcbiAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcbiAgICAgICAgICByZXMudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzRGVmKHJlcy5jb21wb25lbnQpICYmIHR5cGVvZiByZXMuY29tcG9uZW50LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmVzLmNvbXBvbmVudC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cbiAgICAgICAgaWYgKGlzRGVmKHJlcy5lcnJvcikpIHtcbiAgICAgICAgICBmYWN0b3J5LmVycm9yQ29tcCA9IGVuc3VyZUN0b3IocmVzLmVycm9yLCBiYXNlQ3Rvcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNEZWYocmVzLmxvYWRpbmcpKSB7XG4gICAgICAgICAgZmFjdG9yeS5sb2FkaW5nQ29tcCA9IGVuc3VyZUN0b3IocmVzLmxvYWRpbmcsIGJhc2VDdG9yKTtcbiAgICAgICAgICBpZiAocmVzLmRlbGF5ID09PSAwKSB7XG4gICAgICAgICAgICBmYWN0b3J5LmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkgJiYgaXNVbmRlZihmYWN0b3J5LmVycm9yKSkge1xuICAgICAgICAgICAgICAgIGZhY3RvcnkubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yY2VSZW5kZXIoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgcmVzLmRlbGF5IHx8IDIwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmKHJlcy50aW1lb3V0KSkge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgIFwidGltZW91dCAoXCIgKyAocmVzLnRpbWVvdXQpICsgXCJtcylcIlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHJlcy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHN5bmMgPSBmYWxzZTtcbiAgICAvLyByZXR1cm4gaW4gY2FzZSByZXNvbHZlZCBzeW5jaHJvbm91c2x5XG4gICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ1xuICAgICAgPyBmYWN0b3J5LmxvYWRpbmdDb21wXG4gICAgICA6IGZhY3RvcnkucmVzb2x2ZWRcbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaXNBc3luY1BsYWNlaG9sZGVyIChub2RlKSB7XG4gIHJldHVybiBub2RlLmlzQ29tbWVudCAmJiBub2RlLmFzeW5jRmFjdG9yeVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gZ2V0Rmlyc3RDb21wb25lbnRDaGlsZCAoY2hpbGRyZW4pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGMgPSBjaGlsZHJlbltpXTtcbiAgICAgIGlmIChpc0RlZihjKSAmJiAoaXNEZWYoYy5jb21wb25lbnRPcHRpb25zKSB8fCBpc0FzeW5jUGxhY2Vob2xkZXIoYykpKSB7XG4gICAgICAgIHJldHVybiBjXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qICAqL1xuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdEV2ZW50cyAodm0pIHtcbiAgdm0uX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZtLl9oYXNIb29rRXZlbnQgPSBmYWxzZTtcbiAgLy8gaW5pdCBwYXJlbnQgYXR0YWNoZWQgZXZlbnRzXG4gIHZhciBsaXN0ZW5lcnMgPSB2bS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO1xuICBpZiAobGlzdGVuZXJzKSB7XG4gICAgdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzKHZtLCBsaXN0ZW5lcnMpO1xuICB9XG59XG5cbnZhciB0YXJnZXQ7XG5cbmZ1bmN0aW9uIGFkZCAoZXZlbnQsIGZuLCBvbmNlKSB7XG4gIGlmIChvbmNlKSB7XG4gICAgdGFyZ2V0LiRvbmNlKGV2ZW50LCBmbik7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LiRvbihldmVudCwgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSQxIChldmVudCwgZm4pIHtcbiAgdGFyZ2V0LiRvZmYoZXZlbnQsIGZuKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzIChcbiAgdm0sXG4gIGxpc3RlbmVycyxcbiAgb2xkTGlzdGVuZXJzXG4pIHtcbiAgdGFyZ2V0ID0gdm07XG4gIHVwZGF0ZUxpc3RlbmVycyhsaXN0ZW5lcnMsIG9sZExpc3RlbmVycyB8fCB7fSwgYWRkLCByZW1vdmUkMSwgdm0pO1xuICB0YXJnZXQgPSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcbiAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGV2ZW50Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzJDEuJG9uKGV2ZW50W2ldLCBmbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICh2bS5fZXZlbnRzW2V2ZW50XSB8fCAodm0uX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuICAgICAgLy8gb3B0aW1pemUgaG9vazpldmVudCBjb3N0IGJ5IHVzaW5nIGEgYm9vbGVhbiBmbGFnIG1hcmtlZCBhdCByZWdpc3RyYXRpb25cbiAgICAgIC8vIGluc3RlYWQgb2YgYSBoYXNoIGxvb2t1cFxuICAgICAgaWYgKGhvb2tSRS50ZXN0KGV2ZW50KSkge1xuICAgICAgICB2bS5faGFzSG9va0V2ZW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZtXG4gIH07XG5cbiAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGZ1bmN0aW9uIG9uICgpIHtcbiAgICAgIHZtLiRvZmYoZXZlbnQsIG9uKTtcbiAgICAgIGZuLmFwcGx5KHZtLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBvbi5mbiA9IGZuO1xuICAgIHZtLiRvbihldmVudCwgb24pO1xuICAgIHJldHVybiB2bVxuICB9O1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgLy8gYWxsXG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICB2bS5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIHJldHVybiB2bVxuICAgIH1cbiAgICAvLyBhcnJheSBvZiBldmVudHNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZXZlbnQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMkMS4kb2ZmKGV2ZW50W2ldLCBmbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm1cbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgICB2YXIgY2JzID0gdm0uX2V2ZW50c1tldmVudF07XG4gICAgaWYgKCFjYnMpIHtcbiAgICAgIHJldHVybiB2bVxuICAgIH1cbiAgICBpZiAoIWZuKSB7XG4gICAgICB2bS5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG4gICAgICByZXR1cm4gdm1cbiAgICB9XG4gICAgaWYgKGZuKSB7XG4gICAgICAvLyBzcGVjaWZpYyBoYW5kbGVyXG4gICAgICB2YXIgY2I7XG4gICAgICB2YXIgaSQxID0gY2JzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpJDEtLSkge1xuICAgICAgICBjYiA9IGNic1tpJDFdO1xuICAgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgICAgIGNicy5zcGxpY2UoaSQxLCAxKTtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2bVxuICB9O1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHtcbiAgICAgIHZhciBsb3dlckNhc2VFdmVudCA9IGV2ZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAobG93ZXJDYXNlRXZlbnQgIT09IGV2ZW50ICYmIHZtLl9ldmVudHNbbG93ZXJDYXNlRXZlbnRdKSB7XG4gICAgICAgIHRpcChcbiAgICAgICAgICBcIkV2ZW50IFxcXCJcIiArIGxvd2VyQ2FzZUV2ZW50ICsgXCJcXFwiIGlzIGVtaXR0ZWQgaW4gY29tcG9uZW50IFwiICtcbiAgICAgICAgICAoZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpICsgXCIgYnV0IHRoZSBoYW5kbGVyIGlzIHJlZ2lzdGVyZWQgZm9yIFxcXCJcIiArIGV2ZW50ICsgXCJcXFwiLiBcIiArXG4gICAgICAgICAgXCJOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCB5b3UgY2Fubm90IHVzZSBcIiArXG4gICAgICAgICAgXCJ2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gXCIgK1xuICAgICAgICAgIFwiWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXFxcIlwiICsgKGh5cGhlbmF0ZShldmVudCkpICsgXCJcXFwiIGluc3RlYWQgb2YgXFxcIlwiICsgZXZlbnQgKyBcIlxcXCIuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNicyA9IHZtLl9ldmVudHNbZXZlbnRdO1xuICAgIGlmIChjYnMpIHtcbiAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xuICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjYnNbaV0uYXBwbHkodm0sIGFyZ3MpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIChcImV2ZW50IGhhbmRsZXIgZm9yIFxcXCJcIiArIGV2ZW50ICsgXCJcXFwiXCIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdm1cbiAgfTtcbn1cblxuLyogICovXG5cblxuXG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciByZXNvbHZpbmcgcmF3IGNoaWxkcmVuIFZOb2RlcyBpbnRvIGEgc2xvdCBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVTbG90cyAoXG4gIGNoaWxkcmVuLFxuICBjb250ZXh0XG4pIHtcbiAgdmFyIHNsb3RzID0ge307XG4gIGlmICghY2hpbGRyZW4pIHtcbiAgICByZXR1cm4gc2xvdHNcbiAgfVxuICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgIHZhciBkYXRhID0gY2hpbGQuZGF0YTtcbiAgICAvLyByZW1vdmUgc2xvdCBhdHRyaWJ1dGUgaWYgdGhlIG5vZGUgaXMgcmVzb2x2ZWQgYXMgYSBWdWUgc2xvdCBub2RlXG4gICAgaWYgKGRhdGEgJiYgZGF0YS5hdHRycyAmJiBkYXRhLmF0dHJzLnNsb3QpIHtcbiAgICAgIGRlbGV0ZSBkYXRhLmF0dHJzLnNsb3Q7XG4gICAgfVxuICAgIC8vIG5hbWVkIHNsb3RzIHNob3VsZCBvbmx5IGJlIHJlc3BlY3RlZCBpZiB0aGUgdm5vZGUgd2FzIHJlbmRlcmVkIGluIHRoZVxuICAgIC8vIHNhbWUgY29udGV4dC5cbiAgICBpZiAoKGNoaWxkLmNvbnRleHQgPT09IGNvbnRleHQgfHwgY2hpbGQuZm5Db250ZXh0ID09PSBjb250ZXh0KSAmJlxuICAgICAgZGF0YSAmJiBkYXRhLnNsb3QgIT0gbnVsbFxuICAgICkge1xuICAgICAgdmFyIG5hbWUgPSBkYXRhLnNsb3Q7XG4gICAgICB2YXIgc2xvdCA9IChzbG90c1tuYW1lXSB8fCAoc2xvdHNbbmFtZV0gPSBbXSkpO1xuICAgICAgaWYgKGNoaWxkLnRhZyA9PT0gJ3RlbXBsYXRlJykge1xuICAgICAgICBzbG90LnB1c2guYXBwbHkoc2xvdCwgY2hpbGQuY2hpbGRyZW4gfHwgW10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xvdC5wdXNoKGNoaWxkKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgKHNsb3RzLmRlZmF1bHQgfHwgKHNsb3RzLmRlZmF1bHQgPSBbXSkpLnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfVxuICAvLyBpZ25vcmUgc2xvdHMgdGhhdCBjb250YWlucyBvbmx5IHdoaXRlc3BhY2VcbiAgZm9yICh2YXIgbmFtZSQxIGluIHNsb3RzKSB7XG4gICAgaWYgKHNsb3RzW25hbWUkMV0uZXZlcnkoaXNXaGl0ZXNwYWNlKSkge1xuICAgICAgZGVsZXRlIHNsb3RzW25hbWUkMV07XG4gICAgfVxuICB9XG4gIHJldHVybiBzbG90c1xufVxuXG5mdW5jdGlvbiBpc1doaXRlc3BhY2UgKG5vZGUpIHtcbiAgcmV0dXJuIChub2RlLmlzQ29tbWVudCAmJiAhbm9kZS5hc3luY0ZhY3RvcnkpIHx8IG5vZGUudGV4dCA9PT0gJyAnXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVTY29wZWRTbG90cyAoXG4gIGZucywgLy8gc2VlIGZsb3cvdm5vZGVcbiAgcmVzXG4pIHtcbiAgcmVzID0gcmVzIHx8IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGZucy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZuc1tpXSkpIHtcbiAgICAgIHJlc29sdmVTY29wZWRTbG90cyhmbnNbaV0sIHJlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc1tmbnNbaV0ua2V5XSA9IGZuc1tpXS5mbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG4vKiAgKi9cblxudmFyIGFjdGl2ZUluc3RhbmNlID0gbnVsbDtcbnZhciBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTtcblxuZnVuY3Rpb24gaW5pdExpZmVjeWNsZSAodm0pIHtcbiAgdmFyIG9wdGlvbnMgPSB2bS4kb3B0aW9ucztcblxuICAvLyBsb2NhdGUgZmlyc3Qgbm9uLWFic3RyYWN0IHBhcmVudFxuICB2YXIgcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG4gIGlmIChwYXJlbnQgJiYgIW9wdGlvbnMuYWJzdHJhY3QpIHtcbiAgICB3aGlsZSAocGFyZW50LiRvcHRpb25zLmFic3RyYWN0ICYmIHBhcmVudC4kcGFyZW50KSB7XG4gICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcbiAgICB9XG4gICAgcGFyZW50LiRjaGlsZHJlbi5wdXNoKHZtKTtcbiAgfVxuXG4gIHZtLiRwYXJlbnQgPSBwYXJlbnQ7XG4gIHZtLiRyb290ID0gcGFyZW50ID8gcGFyZW50LiRyb290IDogdm07XG5cbiAgdm0uJGNoaWxkcmVuID0gW107XG4gIHZtLiRyZWZzID0ge307XG5cbiAgdm0uX3dhdGNoZXIgPSBudWxsO1xuICB2bS5faW5hY3RpdmUgPSBudWxsO1xuICB2bS5fZGlyZWN0SW5hY3RpdmUgPSBmYWxzZTtcbiAgdm0uX2lzTW91bnRlZCA9IGZhbHNlO1xuICB2bS5faXNEZXN0cm95ZWQgPSBmYWxzZTtcbiAgdm0uX2lzQmVpbmdEZXN0cm95ZWQgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuICBWdWUucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAodm5vZGUsIGh5ZHJhdGluZykge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKHZtLl9pc01vdW50ZWQpIHtcbiAgICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlVXBkYXRlJyk7XG4gICAgfVxuICAgIHZhciBwcmV2RWwgPSB2bS4kZWw7XG4gICAgdmFyIHByZXZWbm9kZSA9IHZtLl92bm9kZTtcbiAgICB2YXIgcHJldkFjdGl2ZUluc3RhbmNlID0gYWN0aXZlSW5zdGFuY2U7XG4gICAgYWN0aXZlSW5zdGFuY2UgPSB2bTtcbiAgICB2bS5fdm5vZGUgPSB2bm9kZTtcbiAgICAvLyBWdWUucHJvdG90eXBlLl9fcGF0Y2hfXyBpcyBpbmplY3RlZCBpbiBlbnRyeSBwb2ludHNcbiAgICAvLyBiYXNlZCBvbiB0aGUgcmVuZGVyaW5nIGJhY2tlbmQgdXNlZC5cbiAgICBpZiAoIXByZXZWbm9kZSkge1xuICAgICAgLy8gaW5pdGlhbCByZW5kZXJcbiAgICAgIHZtLiRlbCA9IHZtLl9fcGF0Y2hfXyhcbiAgICAgICAgdm0uJGVsLCB2bm9kZSwgaHlkcmF0aW5nLCBmYWxzZSAvKiByZW1vdmVPbmx5ICovLFxuICAgICAgICB2bS4kb3B0aW9ucy5fcGFyZW50RWxtLFxuICAgICAgICB2bS4kb3B0aW9ucy5fcmVmRWxtXG4gICAgICApO1xuICAgICAgLy8gbm8gbmVlZCBmb3IgdGhlIHJlZiBub2RlcyBhZnRlciBpbml0aWFsIHBhdGNoXG4gICAgICAvLyB0aGlzIHByZXZlbnRzIGtlZXBpbmcgYSBkZXRhY2hlZCBET00gdHJlZSBpbiBtZW1vcnkgKCM1ODUxKVxuICAgICAgdm0uJG9wdGlvbnMuX3BhcmVudEVsbSA9IHZtLiRvcHRpb25zLl9yZWZFbG0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGVzXG4gICAgICB2bS4kZWwgPSB2bS5fX3BhdGNoX18ocHJldlZub2RlLCB2bm9kZSk7XG4gICAgfVxuICAgIGFjdGl2ZUluc3RhbmNlID0gcHJldkFjdGl2ZUluc3RhbmNlO1xuICAgIC8vIHVwZGF0ZSBfX3Z1ZV9fIHJlZmVyZW5jZVxuICAgIGlmIChwcmV2RWwpIHtcbiAgICAgIHByZXZFbC5fX3Z1ZV9fID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHZtLiRlbCkge1xuICAgICAgdm0uJGVsLl9fdnVlX18gPSB2bTtcbiAgICB9XG4gICAgLy8gaWYgcGFyZW50IGlzIGFuIEhPQywgdXBkYXRlIGl0cyAkZWwgYXMgd2VsbFxuICAgIGlmICh2bS4kdm5vZGUgJiYgdm0uJHBhcmVudCAmJiB2bS4kdm5vZGUgPT09IHZtLiRwYXJlbnQuX3Zub2RlKSB7XG4gICAgICB2bS4kcGFyZW50LiRlbCA9IHZtLiRlbDtcbiAgICB9XG4gICAgLy8gdXBkYXRlZCBob29rIGlzIGNhbGxlZCBieSB0aGUgc2NoZWR1bGVyIHRvIGVuc3VyZSB0aGF0IGNoaWxkcmVuIGFyZVxuICAgIC8vIHVwZGF0ZWQgaW4gYSBwYXJlbnQncyB1cGRhdGVkIGhvb2suXG4gIH07XG5cbiAgVnVlLnByb3RvdHlwZS4kZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBpZiAodm0uX3dhdGNoZXIpIHtcbiAgICAgIHZtLl93YXRjaGVyLnVwZGF0ZSgpO1xuICAgIH1cbiAgfTtcblxuICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKHZtLl9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY2FsbEhvb2sodm0sICdiZWZvcmVEZXN0cm95Jyk7XG4gICAgdm0uX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50XG4gICAgdmFyIHBhcmVudCA9IHZtLiRwYXJlbnQ7XG4gICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkICYmICF2bS4kb3B0aW9ucy5hYnN0cmFjdCkge1xuICAgICAgcmVtb3ZlKHBhcmVudC4kY2hpbGRyZW4sIHZtKTtcbiAgICB9XG4gICAgLy8gdGVhcmRvd24gd2F0Y2hlcnNcbiAgICBpZiAodm0uX3dhdGNoZXIpIHtcbiAgICAgIHZtLl93YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIHZhciBpID0gdm0uX3dhdGNoZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2bS5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSBmcm9tIGRhdGEgb2JcbiAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cbiAgICBpZiAodm0uX2RhdGEuX19vYl9fKSB7XG4gICAgICB2bS5fZGF0YS5fX29iX18udm1Db3VudC0tO1xuICAgIH1cbiAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cbiAgICB2bS5faXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgIC8vIGludm9rZSBkZXN0cm95IGhvb2tzIG9uIGN1cnJlbnQgcmVuZGVyZWQgdHJlZVxuICAgIHZtLl9fcGF0Y2hfXyh2bS5fdm5vZGUsIG51bGwpO1xuICAgIC8vIGZpcmUgZGVzdHJveWVkIGhvb2tcbiAgICBjYWxsSG9vayh2bSwgJ2Rlc3Ryb3llZCcpO1xuICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG4gICAgdm0uJG9mZigpO1xuICAgIC8vIHJlbW92ZSBfX3Z1ZV9fIHJlZmVyZW5jZVxuICAgIGlmICh2bS4kZWwpIHtcbiAgICAgIHZtLiRlbC5fX3Z1ZV9fID0gbnVsbDtcbiAgICB9XG4gICAgLy8gcmVsZWFzZSBjaXJjdWxhciByZWZlcmVuY2UgKCM2NzU5KVxuICAgIGlmICh2bS4kdm5vZGUpIHtcbiAgICAgIHZtLiR2bm9kZS5wYXJlbnQgPSBudWxsO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gbW91bnRDb21wb25lbnQgKFxuICB2bSxcbiAgZWwsXG4gIGh5ZHJhdGluZ1xuKSB7XG4gIHZtLiRlbCA9IGVsO1xuICBpZiAoIXZtLiRvcHRpb25zLnJlbmRlcikge1xuICAgIHZtLiRvcHRpb25zLnJlbmRlciA9IGNyZWF0ZUVtcHR5Vk5vZGU7XG4gICAge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoKHZtLiRvcHRpb25zLnRlbXBsYXRlICYmIHZtLiRvcHRpb25zLnRlbXBsYXRlLmNoYXJBdCgwKSAhPT0gJyMnKSB8fFxuICAgICAgICB2bS4kb3B0aW9ucy5lbCB8fCBlbCkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgICdZb3UgYXJlIHVzaW5nIHRoZSBydW50aW1lLW9ubHkgYnVpbGQgb2YgVnVlIHdoZXJlIHRoZSB0ZW1wbGF0ZSAnICtcbiAgICAgICAgICAnY29tcGlsZXIgaXMgbm90IGF2YWlsYWJsZS4gRWl0aGVyIHByZS1jb21waWxlIHRoZSB0ZW1wbGF0ZXMgaW50byAnICtcbiAgICAgICAgICAncmVuZGVyIGZ1bmN0aW9ucywgb3IgdXNlIHRoZSBjb21waWxlci1pbmNsdWRlZCBidWlsZC4nLFxuICAgICAgICAgIHZtXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgICdGYWlsZWQgdG8gbW91bnQgY29tcG9uZW50OiB0ZW1wbGF0ZSBvciByZW5kZXIgZnVuY3Rpb24gbm90IGRlZmluZWQuJyxcbiAgICAgICAgICB2bVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjYWxsSG9vayh2bSwgJ2JlZm9yZU1vdW50Jyk7XG5cbiAgdmFyIHVwZGF0ZUNvbXBvbmVudDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuICAgIHVwZGF0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBuYW1lID0gdm0uX25hbWU7XG4gICAgICB2YXIgaWQgPSB2bS5fdWlkO1xuICAgICAgdmFyIHN0YXJ0VGFnID0gXCJ2dWUtcGVyZi1zdGFydDpcIiArIGlkO1xuICAgICAgdmFyIGVuZFRhZyA9IFwidnVlLXBlcmYtZW5kOlwiICsgaWQ7XG5cbiAgICAgIG1hcmsoc3RhcnRUYWcpO1xuICAgICAgdmFyIHZub2RlID0gdm0uX3JlbmRlcigpO1xuICAgICAgbWFyayhlbmRUYWcpO1xuICAgICAgbWVhc3VyZSgoXCJ2dWUgXCIgKyBuYW1lICsgXCIgcmVuZGVyXCIpLCBzdGFydFRhZywgZW5kVGFnKTtcblxuICAgICAgbWFyayhzdGFydFRhZyk7XG4gICAgICB2bS5fdXBkYXRlKHZub2RlLCBoeWRyYXRpbmcpO1xuICAgICAgbWFyayhlbmRUYWcpO1xuICAgICAgbWVhc3VyZSgoXCJ2dWUgXCIgKyBuYW1lICsgXCIgcGF0Y2hcIiksIHN0YXJ0VGFnLCBlbmRUYWcpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdXBkYXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdm0uX3VwZGF0ZSh2bS5fcmVuZGVyKCksIGh5ZHJhdGluZyk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIHdlIHNldCB0aGlzIHRvIHZtLl93YXRjaGVyIGluc2lkZSB0aGUgd2F0Y2hlcidzIGNvbnN0cnVjdG9yXG4gIC8vIHNpbmNlIHRoZSB3YXRjaGVyJ3MgaW5pdGlhbCBwYXRjaCBtYXkgY2FsbCAkZm9yY2VVcGRhdGUgKGUuZy4gaW5zaWRlIGNoaWxkXG4gIC8vIGNvbXBvbmVudCdzIG1vdW50ZWQgaG9vayksIHdoaWNoIHJlbGllcyBvbiB2bS5fd2F0Y2hlciBiZWluZyBhbHJlYWR5IGRlZmluZWRcbiAgbmV3IFdhdGNoZXIodm0sIHVwZGF0ZUNvbXBvbmVudCwgbm9vcCwgbnVsbCwgdHJ1ZSAvKiBpc1JlbmRlcldhdGNoZXIgKi8pO1xuICBoeWRyYXRpbmcgPSBmYWxzZTtcblxuICAvLyBtYW51YWxseSBtb3VudGVkIGluc3RhbmNlLCBjYWxsIG1vdW50ZWQgb24gc2VsZlxuICAvLyBtb3VudGVkIGlzIGNhbGxlZCBmb3IgcmVuZGVyLWNyZWF0ZWQgY2hpbGQgY29tcG9uZW50cyBpbiBpdHMgaW5zZXJ0ZWQgaG9va1xuICBpZiAodm0uJHZub2RlID09IG51bGwpIHtcbiAgICB2bS5faXNNb3VudGVkID0gdHJ1ZTtcbiAgICBjYWxsSG9vayh2bSwgJ21vdW50ZWQnKTtcbiAgfVxuICByZXR1cm4gdm1cbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2hpbGRDb21wb25lbnQgKFxuICB2bSxcbiAgcHJvcHNEYXRhLFxuICBsaXN0ZW5lcnMsXG4gIHBhcmVudFZub2RlLFxuICByZW5kZXJDaGlsZHJlblxuKSB7XG4gIHtcbiAgICBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSB0cnVlO1xuICB9XG5cbiAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgY29tcG9uZW50IGhhcyBzbG90IGNoaWxkcmVuXG4gIC8vIHdlIG5lZWQgdG8gZG8gdGhpcyBiZWZvcmUgb3ZlcndyaXRpbmcgJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuXG4gIHZhciBoYXNDaGlsZHJlbiA9ICEhKFxuICAgIHJlbmRlckNoaWxkcmVuIHx8ICAgICAgICAgICAgICAgLy8gaGFzIG5ldyBzdGF0aWMgc2xvdHNcbiAgICB2bS4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW4gfHwgIC8vIGhhcyBvbGQgc3RhdGljIHNsb3RzXG4gICAgcGFyZW50Vm5vZGUuZGF0YS5zY29wZWRTbG90cyB8fCAvLyBoYXMgbmV3IHNjb3BlZCBzbG90c1xuICAgIHZtLiRzY29wZWRTbG90cyAhPT0gZW1wdHlPYmplY3QgLy8gaGFzIG9sZCBzY29wZWQgc2xvdHNcbiAgKTtcblxuICB2bS4kb3B0aW9ucy5fcGFyZW50Vm5vZGUgPSBwYXJlbnRWbm9kZTtcbiAgdm0uJHZub2RlID0gcGFyZW50Vm5vZGU7IC8vIHVwZGF0ZSB2bSdzIHBsYWNlaG9sZGVyIG5vZGUgd2l0aG91dCByZS1yZW5kZXJcblxuICBpZiAodm0uX3Zub2RlKSB7IC8vIHVwZGF0ZSBjaGlsZCB0cmVlJ3MgcGFyZW50XG4gICAgdm0uX3Zub2RlLnBhcmVudCA9IHBhcmVudFZub2RlO1xuICB9XG4gIHZtLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiA9IHJlbmRlckNoaWxkcmVuO1xuXG4gIC8vIHVwZGF0ZSAkYXR0cnMgYW5kICRsaXN0ZW5lcnMgaGFzaFxuICAvLyB0aGVzZSBhcmUgYWxzbyByZWFjdGl2ZSBzbyB0aGV5IG1heSB0cmlnZ2VyIGNoaWxkIHVwZGF0ZSBpZiB0aGUgY2hpbGRcbiAgLy8gdXNlZCB0aGVtIGR1cmluZyByZW5kZXJcbiAgdm0uJGF0dHJzID0gcGFyZW50Vm5vZGUuZGF0YS5hdHRycyB8fCBlbXB0eU9iamVjdDtcbiAgdm0uJGxpc3RlbmVycyA9IGxpc3RlbmVycyB8fCBlbXB0eU9iamVjdDtcblxuICAvLyB1cGRhdGUgcHJvcHNcbiAgaWYgKHByb3BzRGF0YSAmJiB2bS4kb3B0aW9ucy5wcm9wcykge1xuICAgIHRvZ2dsZU9ic2VydmluZyhmYWxzZSk7XG4gICAgdmFyIHByb3BzID0gdm0uX3Byb3BzO1xuICAgIHZhciBwcm9wS2V5cyA9IHZtLiRvcHRpb25zLl9wcm9wS2V5cyB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gcHJvcEtleXNbaV07XG4gICAgICB2YXIgcHJvcE9wdGlvbnMgPSB2bS4kb3B0aW9ucy5wcm9wczsgLy8gd3RmIGZsb3c/XG4gICAgICBwcm9wc1trZXldID0gdmFsaWRhdGVQcm9wKGtleSwgcHJvcE9wdGlvbnMsIHByb3BzRGF0YSwgdm0pO1xuICAgIH1cbiAgICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG4gICAgLy8ga2VlcCBhIGNvcHkgb2YgcmF3IHByb3BzRGF0YVxuICAgIHZtLiRvcHRpb25zLnByb3BzRGF0YSA9IHByb3BzRGF0YTtcbiAgfVxuXG4gIC8vIHVwZGF0ZSBsaXN0ZW5lcnNcbiAgbGlzdGVuZXJzID0gbGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0O1xuICB2YXIgb2xkTGlzdGVuZXJzID0gdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycztcbiAgdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyA9IGxpc3RlbmVycztcbiAgdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzKHZtLCBsaXN0ZW5lcnMsIG9sZExpc3RlbmVycyk7XG5cbiAgLy8gcmVzb2x2ZSBzbG90cyArIGZvcmNlIHVwZGF0ZSBpZiBoYXMgY2hpbGRyZW5cbiAgaWYgKGhhc0NoaWxkcmVuKSB7XG4gICAgdm0uJHNsb3RzID0gcmVzb2x2ZVNsb3RzKHJlbmRlckNoaWxkcmVuLCBwYXJlbnRWbm9kZS5jb250ZXh0KTtcbiAgICB2bS4kZm9yY2VVcGRhdGUoKTtcbiAgfVxuXG4gIHtcbiAgICBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0luSW5hY3RpdmVUcmVlICh2bSkge1xuICB3aGlsZSAodm0gJiYgKHZtID0gdm0uJHBhcmVudCkpIHtcbiAgICBpZiAodm0uX2luYWN0aXZlKSB7IHJldHVybiB0cnVlIH1cbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gYWN0aXZhdGVDaGlsZENvbXBvbmVudCAodm0sIGRpcmVjdCkge1xuICBpZiAoZGlyZWN0KSB7XG4gICAgdm0uX2RpcmVjdEluYWN0aXZlID0gZmFsc2U7XG4gICAgaWYgKGlzSW5JbmFjdGl2ZVRyZWUodm0pKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gIH0gZWxzZSBpZiAodm0uX2RpcmVjdEluYWN0aXZlKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgaWYgKHZtLl9pbmFjdGl2ZSB8fCB2bS5faW5hY3RpdmUgPT09IG51bGwpIHtcbiAgICB2bS5faW5hY3RpdmUgPSBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLiRjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pO1xuICAgIH1cbiAgICBjYWxsSG9vayh2bSwgJ2FjdGl2YXRlZCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCAodm0sIGRpcmVjdCkge1xuICBpZiAoZGlyZWN0KSB7XG4gICAgdm0uX2RpcmVjdEluYWN0aXZlID0gdHJ1ZTtcbiAgICBpZiAoaXNJbkluYWN0aXZlVHJlZSh2bSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuICBpZiAoIXZtLl9pbmFjdGl2ZSkge1xuICAgIHZtLl9pbmFjdGl2ZSA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS4kY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pO1xuICAgIH1cbiAgICBjYWxsSG9vayh2bSwgJ2RlYWN0aXZhdGVkJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsbEhvb2sgKHZtLCBob29rKSB7XG4gIC8vICM3NTczIGRpc2FibGUgZGVwIGNvbGxlY3Rpb24gd2hlbiBpbnZva2luZyBsaWZlY3ljbGUgaG9va3NcbiAgcHVzaFRhcmdldCgpO1xuICB2YXIgaGFuZGxlcnMgPSB2bS4kb3B0aW9uc1tob29rXTtcbiAgaWYgKGhhbmRsZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodm0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgKGhvb2sgKyBcIiBob29rXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKHZtLl9oYXNIb29rRXZlbnQpIHtcbiAgICB2bS4kZW1pdCgnaG9vazonICsgaG9vayk7XG4gIH1cbiAgcG9wVGFyZ2V0KCk7XG59XG5cbi8qICAqL1xuXG5cbnZhciBNQVhfVVBEQVRFX0NPVU5UID0gMTAwO1xuXG52YXIgcXVldWUgPSBbXTtcbnZhciBhY3RpdmF0ZWRDaGlsZHJlbiA9IFtdO1xudmFyIGhhcyA9IHt9O1xudmFyIGNpcmN1bGFyID0ge307XG52YXIgd2FpdGluZyA9IGZhbHNlO1xudmFyIGZsdXNoaW5nID0gZmFsc2U7XG52YXIgaW5kZXggPSAwO1xuXG4vKipcbiAqIFJlc2V0IHRoZSBzY2hlZHVsZXIncyBzdGF0ZS5cbiAqL1xuZnVuY3Rpb24gcmVzZXRTY2hlZHVsZXJTdGF0ZSAoKSB7XG4gIGluZGV4ID0gcXVldWUubGVuZ3RoID0gYWN0aXZhdGVkQ2hpbGRyZW4ubGVuZ3RoID0gMDtcbiAgaGFzID0ge307XG4gIHtcbiAgICBjaXJjdWxhciA9IHt9O1xuICB9XG4gIHdhaXRpbmcgPSBmbHVzaGluZyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIEZsdXNoIGJvdGggcXVldWVzIGFuZCBydW4gdGhlIHdhdGNoZXJzLlxuICovXG5mdW5jdGlvbiBmbHVzaFNjaGVkdWxlclF1ZXVlICgpIHtcbiAgZmx1c2hpbmcgPSB0cnVlO1xuICB2YXIgd2F0Y2hlciwgaWQ7XG5cbiAgLy8gU29ydCBxdWV1ZSBiZWZvcmUgZmx1c2guXG4gIC8vIFRoaXMgZW5zdXJlcyB0aGF0OlxuICAvLyAxLiBDb21wb25lbnRzIGFyZSB1cGRhdGVkIGZyb20gcGFyZW50IHRvIGNoaWxkLiAoYmVjYXVzZSBwYXJlbnQgaXMgYWx3YXlzXG4gIC8vICAgIGNyZWF0ZWQgYmVmb3JlIHRoZSBjaGlsZClcbiAgLy8gMi4gQSBjb21wb25lbnQncyB1c2VyIHdhdGNoZXJzIGFyZSBydW4gYmVmb3JlIGl0cyByZW5kZXIgd2F0Y2hlciAoYmVjYXVzZVxuICAvLyAgICB1c2VyIHdhdGNoZXJzIGFyZSBjcmVhdGVkIGJlZm9yZSB0aGUgcmVuZGVyIHdhdGNoZXIpXG4gIC8vIDMuIElmIGEgY29tcG9uZW50IGlzIGRlc3Ryb3llZCBkdXJpbmcgYSBwYXJlbnQgY29tcG9uZW50J3Mgd2F0Y2hlciBydW4sXG4gIC8vICAgIGl0cyB3YXRjaGVycyBjYW4gYmUgc2tpcHBlZC5cbiAgcXVldWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5pZCAtIGIuaWQ7IH0pO1xuXG4gIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcbiAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgcXVldWUubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgd2F0Y2hlciA9IHF1ZXVlW2luZGV4XTtcbiAgICBpZCA9IHdhdGNoZXIuaWQ7XG4gICAgaGFzW2lkXSA9IG51bGw7XG4gICAgd2F0Y2hlci5ydW4oKTtcbiAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXG4gICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG4gICAgICBpZiAoY2lyY3VsYXJbaWRdID4gTUFYX1VQREFURV9DT1VOVCkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgICdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgJyArIChcbiAgICAgICAgICAgIHdhdGNoZXIudXNlclxuICAgICAgICAgICAgICA/IChcImluIHdhdGNoZXIgd2l0aCBleHByZXNzaW9uIFxcXCJcIiArICh3YXRjaGVyLmV4cHJlc3Npb24pICsgXCJcXFwiXCIpXG4gICAgICAgICAgICAgIDogXCJpbiBhIGNvbXBvbmVudCByZW5kZXIgZnVuY3Rpb24uXCJcbiAgICAgICAgICApLFxuICAgICAgICAgIHdhdGNoZXIudm1cbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBrZWVwIGNvcGllcyBvZiBwb3N0IHF1ZXVlcyBiZWZvcmUgcmVzZXR0aW5nIHN0YXRlXG4gIHZhciBhY3RpdmF0ZWRRdWV1ZSA9IGFjdGl2YXRlZENoaWxkcmVuLnNsaWNlKCk7XG4gIHZhciB1cGRhdGVkUXVldWUgPSBxdWV1ZS5zbGljZSgpO1xuXG4gIHJlc2V0U2NoZWR1bGVyU3RhdGUoKTtcblxuICAvLyBjYWxsIGNvbXBvbmVudCB1cGRhdGVkIGFuZCBhY3RpdmF0ZWQgaG9va3NcbiAgY2FsbEFjdGl2YXRlZEhvb2tzKGFjdGl2YXRlZFF1ZXVlKTtcbiAgY2FsbFVwZGF0ZWRIb29rcyh1cGRhdGVkUXVldWUpO1xuXG4gIC8vIGRldnRvb2wgaG9va1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsbFVwZGF0ZWRIb29rcyAocXVldWUpIHtcbiAgdmFyIGkgPSBxdWV1ZS5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuICAgIHZhciB2bSA9IHdhdGNoZXIudm07XG4gICAgaWYgKHZtLl93YXRjaGVyID09PSB3YXRjaGVyICYmIHZtLl9pc01vdW50ZWQpIHtcbiAgICAgIGNhbGxIb29rKHZtLCAndXBkYXRlZCcpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFF1ZXVlIGEga2VwdC1hbGl2ZSBjb21wb25lbnQgdGhhdCB3YXMgYWN0aXZhdGVkIGR1cmluZyBwYXRjaC5cbiAqIFRoZSBxdWV1ZSB3aWxsIGJlIHByb2Nlc3NlZCBhZnRlciB0aGUgZW50aXJlIHRyZWUgaGFzIGJlZW4gcGF0Y2hlZC5cbiAqL1xuZnVuY3Rpb24gcXVldWVBY3RpdmF0ZWRDb21wb25lbnQgKHZtKSB7XG4gIC8vIHNldHRpbmcgX2luYWN0aXZlIHRvIGZhbHNlIGhlcmUgc28gdGhhdCBhIHJlbmRlciBmdW5jdGlvbiBjYW5cbiAgLy8gcmVseSBvbiBjaGVja2luZyB3aGV0aGVyIGl0J3MgaW4gYW4gaW5hY3RpdmUgdHJlZSAoZS5nLiByb3V0ZXItdmlldylcbiAgdm0uX2luYWN0aXZlID0gZmFsc2U7XG4gIGFjdGl2YXRlZENoaWxkcmVuLnB1c2godm0pO1xufVxuXG5mdW5jdGlvbiBjYWxsQWN0aXZhdGVkSG9va3MgKHF1ZXVlKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICBxdWV1ZVtpXS5faW5hY3RpdmUgPSB0cnVlO1xuICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQocXVldWVbaV0sIHRydWUgLyogdHJ1ZSAqLyk7XG4gIH1cbn1cblxuLyoqXG4gKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG4gKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cbiAqL1xuZnVuY3Rpb24gcXVldWVXYXRjaGVyICh3YXRjaGVyKSB7XG4gIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gIGlmIChoYXNbaWRdID09IG51bGwpIHtcbiAgICBoYXNbaWRdID0gdHJ1ZTtcbiAgICBpZiAoIWZsdXNoaW5nKSB7XG4gICAgICBxdWV1ZS5wdXNoKHdhdGNoZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiBhbHJlYWR5IGZsdXNoaW5nLCBzcGxpY2UgdGhlIHdhdGNoZXIgYmFzZWQgb24gaXRzIGlkXG4gICAgICAvLyBpZiBhbHJlYWR5IHBhc3QgaXRzIGlkLCBpdCB3aWxsIGJlIHJ1biBuZXh0IGltbWVkaWF0ZWx5LlxuICAgICAgdmFyIGkgPSBxdWV1ZS5sZW5ndGggLSAxO1xuICAgICAgd2hpbGUgKGkgPiBpbmRleCAmJiBxdWV1ZVtpXS5pZCA+IHdhdGNoZXIuaWQpIHtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgICAgcXVldWUuc3BsaWNlKGkgKyAxLCAwLCB3YXRjaGVyKTtcbiAgICB9XG4gICAgLy8gcXVldWUgdGhlIGZsdXNoXG4gICAgaWYgKCF3YWl0aW5nKSB7XG4gICAgICB3YWl0aW5nID0gdHJ1ZTtcbiAgICAgIG5leHRUaWNrKGZsdXNoU2NoZWR1bGVyUXVldWUpO1xuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxudmFyIHVpZCQxID0gMDtcblxuLyoqXG4gKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcbiAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG4gKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy5cbiAqL1xudmFyIFdhdGNoZXIgPSBmdW5jdGlvbiBXYXRjaGVyIChcbiAgdm0sXG4gIGV4cE9yRm4sXG4gIGNiLFxuICBvcHRpb25zLFxuICBpc1JlbmRlcldhdGNoZXJcbikge1xuICB0aGlzLnZtID0gdm07XG4gIGlmIChpc1JlbmRlcldhdGNoZXIpIHtcbiAgICB2bS5fd2F0Y2hlciA9IHRoaXM7XG4gIH1cbiAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG4gIC8vIG9wdGlvbnNcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRlZXAgPSAhIW9wdGlvbnMuZGVlcDtcbiAgICB0aGlzLnVzZXIgPSAhIW9wdGlvbnMudXNlcjtcbiAgICB0aGlzLmxhenkgPSAhIW9wdGlvbnMubGF6eTtcbiAgICB0aGlzLnN5bmMgPSAhIW9wdGlvbnMuc3luYztcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmRlZXAgPSB0aGlzLnVzZXIgPSB0aGlzLmxhenkgPSB0aGlzLnN5bmMgPSBmYWxzZTtcbiAgfVxuICB0aGlzLmNiID0gY2I7XG4gIHRoaXMuaWQgPSArK3VpZCQxOyAvLyB1aWQgZm9yIGJhdGNoaW5nXG4gIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcbiAgdGhpcy5kZXBzID0gW107XG4gIHRoaXMubmV3RGVwcyA9IFtdO1xuICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG4gIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbi50b1N0cmluZygpO1xuICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXJcbiAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuZ2V0dGVyID0gcGFyc2VQYXRoKGV4cE9yRm4pO1xuICAgIGlmICghdGhpcy5nZXR0ZXIpIHtcbiAgICAgIHRoaXMuZ2V0dGVyID0gZnVuY3Rpb24gKCkge307XG4gICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgICBcIkZhaWxlZCB3YXRjaGluZyBwYXRoOiBcXFwiXCIgKyBleHBPckZuICsgXCJcXFwiIFwiICtcbiAgICAgICAgJ1dhdGNoZXIgb25seSBhY2NlcHRzIHNpbXBsZSBkb3QtZGVsaW1pdGVkIHBhdGhzLiAnICtcbiAgICAgICAgJ0ZvciBmdWxsIGNvbnRyb2wsIHVzZSBhIGZ1bmN0aW9uIGluc3RlYWQuJyxcbiAgICAgICAgdm1cbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHRoaXMudmFsdWUgPSB0aGlzLmxhenlcbiAgICA/IHVuZGVmaW5lZFxuICAgIDogdGhpcy5nZXQoKTtcbn07XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuICovXG5XYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKCkge1xuICBwdXNoVGFyZ2V0KHRoaXMpO1xuICB2YXIgdmFsdWU7XG4gIHZhciB2bSA9IHRoaXMudm07XG4gIHRyeSB7XG4gICAgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHZtLCB2bSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAodGhpcy51c2VyKSB7XG4gICAgICBoYW5kbGVFcnJvcihlLCB2bSwgKFwiZ2V0dGVyIGZvciB3YXRjaGVyIFxcXCJcIiArICh0aGlzLmV4cHJlc3Npb24pICsgXCJcXFwiXCIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcbiAgICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcbiAgICBpZiAodGhpcy5kZWVwKSB7XG4gICAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gICAgfVxuICAgIHBvcFRhcmdldCgpO1xuICAgIHRoaXMuY2xlYW51cERlcHMoKTtcbiAgfVxuICByZXR1cm4gdmFsdWVcbn07XG5cbi8qKlxuICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cbiAqL1xuV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gYWRkRGVwIChkZXApIHtcbiAgdmFyIGlkID0gZGVwLmlkO1xuICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcbiAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7XG4gICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG4gICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuICovXG5XYXRjaGVyLnByb3RvdHlwZS5jbGVhbnVwRGVwcyA9IGZ1bmN0aW9uIGNsZWFudXBEZXBzICgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgZGVwID0gdGhpcyQxLmRlcHNbaV07XG4gICAgaWYgKCF0aGlzJDEubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG4gICAgICBkZXAucmVtb3ZlU3ViKHRoaXMkMSk7XG4gICAgfVxuICB9XG4gIHZhciB0bXAgPSB0aGlzLmRlcElkcztcbiAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcbiAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG4gIHRtcCA9IHRoaXMuZGVwcztcbiAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuICB0aGlzLm5ld0RlcHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmICh0aGlzLmxhenkpIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgfSBlbHNlIGlmICh0aGlzLnN5bmMpIHtcbiAgICB0aGlzLnJ1bigpO1xuICB9IGVsc2Uge1xuICAgIHF1ZXVlV2F0Y2hlcih0aGlzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTY2hlZHVsZXIgam9iIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBzY2hlZHVsZXIuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIHJ1biAoKSB7XG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7XG4gICAgaWYgKFxuICAgICAgdmFsdWUgIT09IHRoaXMudmFsdWUgfHxcbiAgICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuICAgICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuICAgICAgLy8gaGF2ZSBtdXRhdGVkLlxuICAgICAgaXNPYmplY3QodmFsdWUpIHx8XG4gICAgICB0aGlzLmRlZXBcbiAgICApIHtcbiAgICAgIC8vIHNldCBuZXcgdmFsdWVcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICBpZiAodGhpcy51c2VyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBoYW5kbGVFcnJvcihlLCB0aGlzLnZtLCAoXCJjYWxsYmFjayBmb3Igd2F0Y2hlciBcXFwiXCIgKyAodGhpcy5leHByZXNzaW9uKSArIFwiXFxcIlwiKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG4gKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG4gKi9cbldhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gZXZhbHVhdGUgKCkge1xuICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKTtcbiAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xufTtcblxuLyoqXG4gKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cbiAqL1xuV2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gZGVwZW5kICgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB0aGlzJDEuZGVwc1tpXS5kZXBlbmQoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YnNjcmliZXIgbGlzdC5cbiAqL1xuV2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiB0ZWFyZG93biAoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXRcbiAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkLlxuICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgcmVtb3ZlKHRoaXMudm0uX3dhdGNoZXJzLCB0aGlzKTtcbiAgICB9XG4gICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMkMS5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzJDEpO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB9XG59O1xuXG4vKiAgKi9cblxudmFyIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbiA9IHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlLFxuICBnZXQ6IG5vb3AsXG4gIHNldDogbm9vcFxufTtcblxuZnVuY3Rpb24gcHJveHkgKHRhcmdldCwgc291cmNlS2V5LCBrZXkpIHtcbiAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IGZ1bmN0aW9uIHByb3h5R2V0dGVyICgpIHtcbiAgICByZXR1cm4gdGhpc1tzb3VyY2VLZXldW2tleV1cbiAgfTtcbiAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IGZ1bmN0aW9uIHByb3h5U2V0dGVyICh2YWwpIHtcbiAgICB0aGlzW3NvdXJjZUtleV1ba2V5XSA9IHZhbDtcbiAgfTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pO1xufVxuXG5mdW5jdGlvbiBpbml0U3RhdGUgKHZtKSB7XG4gIHZtLl93YXRjaGVycyA9IFtdO1xuICB2YXIgb3B0cyA9IHZtLiRvcHRpb25zO1xuICBpZiAob3B0cy5wcm9wcykgeyBpbml0UHJvcHModm0sIG9wdHMucHJvcHMpOyB9XG4gIGlmIChvcHRzLm1ldGhvZHMpIHsgaW5pdE1ldGhvZHModm0sIG9wdHMubWV0aG9kcyk7IH1cbiAgaWYgKG9wdHMuZGF0YSkge1xuICAgIGluaXREYXRhKHZtKTtcbiAgfSBlbHNlIHtcbiAgICBvYnNlcnZlKHZtLl9kYXRhID0ge30sIHRydWUgLyogYXNSb290RGF0YSAqLyk7XG4gIH1cbiAgaWYgKG9wdHMuY29tcHV0ZWQpIHsgaW5pdENvbXB1dGVkKHZtLCBvcHRzLmNvbXB1dGVkKTsgfVxuICBpZiAob3B0cy53YXRjaCAmJiBvcHRzLndhdGNoICE9PSBuYXRpdmVXYXRjaCkge1xuICAgIGluaXRXYXRjaCh2bSwgb3B0cy53YXRjaCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdFByb3BzICh2bSwgcHJvcHNPcHRpb25zKSB7XG4gIHZhciBwcm9wc0RhdGEgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgfHwge307XG4gIHZhciBwcm9wcyA9IHZtLl9wcm9wcyA9IHt9O1xuICAvLyBjYWNoZSBwcm9wIGtleXMgc28gdGhhdCBmdXR1cmUgcHJvcHMgdXBkYXRlcyBjYW4gaXRlcmF0ZSB1c2luZyBBcnJheVxuICAvLyBpbnN0ZWFkIG9mIGR5bmFtaWMgb2JqZWN0IGtleSBlbnVtZXJhdGlvbi5cbiAgdmFyIGtleXMgPSB2bS4kb3B0aW9ucy5fcHJvcEtleXMgPSBbXTtcbiAgdmFyIGlzUm9vdCA9ICF2bS4kcGFyZW50O1xuICAvLyByb290IGluc3RhbmNlIHByb3BzIHNob3VsZCBiZSBjb252ZXJ0ZWRcbiAgaWYgKCFpc1Jvb3QpIHtcbiAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpO1xuICB9XG4gIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7XG4gICAga2V5cy5wdXNoKGtleSk7XG4gICAgdmFyIHZhbHVlID0gdmFsaWRhdGVQcm9wKGtleSwgcHJvcHNPcHRpb25zLCBwcm9wc0RhdGEsIHZtKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIHtcbiAgICAgIHZhciBoeXBoZW5hdGVkS2V5ID0gaHlwaGVuYXRlKGtleSk7XG4gICAgICBpZiAoaXNSZXNlcnZlZEF0dHJpYnV0ZShoeXBoZW5hdGVkS2V5KSB8fFxuICAgICAgICAgIGNvbmZpZy5pc1Jlc2VydmVkQXR0cihoeXBoZW5hdGVkS2V5KSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIChcIlxcXCJcIiArIGh5cGhlbmF0ZWRLZXkgKyBcIlxcXCIgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUgYW5kIGNhbm5vdCBiZSB1c2VkIGFzIGNvbXBvbmVudCBwcm9wLlwiKSxcbiAgICAgICAgICB2bVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgZGVmaW5lUmVhY3RpdmUocHJvcHMsIGtleSwgdmFsdWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLiRwYXJlbnQgJiYgIWlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCkge1xuICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICBcIkF2b2lkIG11dGF0aW5nIGEgcHJvcCBkaXJlY3RseSBzaW5jZSB0aGUgdmFsdWUgd2lsbCBiZSBcIiArXG4gICAgICAgICAgICBcIm92ZXJ3cml0dGVuIHdoZW5ldmVyIHRoZSBwYXJlbnQgY29tcG9uZW50IHJlLXJlbmRlcnMuIFwiICtcbiAgICAgICAgICAgIFwiSW5zdGVhZCwgdXNlIGEgZGF0YSBvciBjb21wdXRlZCBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgcHJvcCdzIFwiICtcbiAgICAgICAgICAgIFwidmFsdWUuIFByb3AgYmVpbmcgbXV0YXRlZDogXFxcIlwiICsga2V5ICsgXCJcXFwiXCIsXG4gICAgICAgICAgICB2bVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBzdGF0aWMgcHJvcHMgYXJlIGFscmVhZHkgcHJveGllZCBvbiB0aGUgY29tcG9uZW50J3MgcHJvdG90eXBlXG4gICAgLy8gZHVyaW5nIFZ1ZS5leHRlbmQoKS4gV2Ugb25seSBuZWVkIHRvIHByb3h5IHByb3BzIGRlZmluZWQgYXRcbiAgICAvLyBpbnN0YW50aWF0aW9uIGhlcmUuXG4gICAgaWYgKCEoa2V5IGluIHZtKSkge1xuICAgICAgcHJveHkodm0sIFwiX3Byb3BzXCIsIGtleSk7XG4gICAgfVxuICB9O1xuXG4gIGZvciAodmFyIGtleSBpbiBwcm9wc09wdGlvbnMpIGxvb3AoIGtleSApO1xuICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGluaXREYXRhICh2bSkge1xuICB2YXIgZGF0YSA9IHZtLiRvcHRpb25zLmRhdGE7XG4gIGRhdGEgPSB2bS5fZGF0YSA9IHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nXG4gICAgPyBnZXREYXRhKGRhdGEsIHZtKVxuICAgIDogZGF0YSB8fCB7fTtcbiAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgZGF0YSA9IHt9O1xuICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAnZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3Q6XFxuJyArXG4gICAgICAnaHR0cHM6Ly92dWVqcy5vcmcvdjIvZ3VpZGUvY29tcG9uZW50cy5odG1sI2RhdGEtTXVzdC1CZS1hLUZ1bmN0aW9uJyxcbiAgICAgIHZtXG4gICAgKTtcbiAgfVxuICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gIHZhciBwcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzO1xuICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICB7XG4gICAgICBpZiAobWV0aG9kcyAmJiBoYXNPd24obWV0aG9kcywga2V5KSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIChcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgZGF0YSBwcm9wZXJ0eS5cIiksXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb3BzICYmIGhhc093bihwcm9wcywga2V5KSkge1xuICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICAgXCJUaGUgZGF0YSBwcm9wZXJ0eSBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaXMgYWxyZWFkeSBkZWNsYXJlZCBhcyBhIHByb3AuIFwiICtcbiAgICAgICAgXCJVc2UgcHJvcCBkZWZhdWx0IHZhbHVlIGluc3RlYWQuXCIsXG4gICAgICAgIHZtXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgcHJveHkodm0sIFwiX2RhdGFcIiwga2V5KTtcbiAgICB9XG4gIH1cbiAgLy8gb2JzZXJ2ZSBkYXRhXG4gIG9ic2VydmUoZGF0YSwgdHJ1ZSAvKiBhc1Jvb3REYXRhICovKTtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YSAoZGF0YSwgdm0pIHtcbiAgLy8gIzc1NzMgZGlzYWJsZSBkZXAgY29sbGVjdGlvbiB3aGVuIGludm9raW5nIGRhdGEgZ2V0dGVyc1xuICBwdXNoVGFyZ2V0KCk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRhdGEuY2FsbCh2bSwgdm0pXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBoYW5kbGVFcnJvcihlLCB2bSwgXCJkYXRhKClcIik7XG4gICAgcmV0dXJuIHt9XG4gIH0gZmluYWxseSB7XG4gICAgcG9wVGFyZ2V0KCk7XG4gIH1cbn1cblxudmFyIGNvbXB1dGVkV2F0Y2hlck9wdGlvbnMgPSB7IGxhenk6IHRydWUgfTtcblxuZnVuY3Rpb24gaW5pdENvbXB1dGVkICh2bSwgY29tcHV0ZWQpIHtcbiAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gIHZhciB3YXRjaGVycyA9IHZtLl9jb21wdXRlZFdhdGNoZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgLy8gY29tcHV0ZWQgcHJvcGVydGllcyBhcmUganVzdCBnZXR0ZXJzIGR1cmluZyBTU1JcbiAgdmFyIGlzU1NSID0gaXNTZXJ2ZXJSZW5kZXJpbmcoKTtcblxuICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcbiAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG4gICAgdmFyIGdldHRlciA9IHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nID8gdXNlckRlZiA6IHVzZXJEZWYuZ2V0O1xuICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBnZXR0ZXIgPT0gbnVsbCkge1xuICAgICAgd2FybihcbiAgICAgICAgKFwiR2V0dGVyIGlzIG1pc3NpbmcgZm9yIGNvbXB1dGVkIHByb3BlcnR5IFxcXCJcIiArIGtleSArIFwiXFxcIi5cIiksXG4gICAgICAgIHZtXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghaXNTU1IpIHtcbiAgICAgIC8vIGNyZWF0ZSBpbnRlcm5hbCB3YXRjaGVyIGZvciB0aGUgY29tcHV0ZWQgcHJvcGVydHkuXG4gICAgICB3YXRjaGVyc1trZXldID0gbmV3IFdhdGNoZXIoXG4gICAgICAgIHZtLFxuICAgICAgICBnZXR0ZXIgfHwgbm9vcCxcbiAgICAgICAgbm9vcCxcbiAgICAgICAgY29tcHV0ZWRXYXRjaGVyT3B0aW9uc1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBjb21wb25lbnQtZGVmaW5lZCBjb21wdXRlZCBwcm9wZXJ0aWVzIGFyZSBhbHJlYWR5IGRlZmluZWQgb24gdGhlXG4gICAgLy8gY29tcG9uZW50IHByb3RvdHlwZS4gV2Ugb25seSBuZWVkIHRvIGRlZmluZSBjb21wdXRlZCBwcm9wZXJ0aWVzIGRlZmluZWRcbiAgICAvLyBhdCBpbnN0YW50aWF0aW9uIGhlcmUuXG4gICAgaWYgKCEoa2V5IGluIHZtKSkge1xuICAgICAgZGVmaW5lQ29tcHV0ZWQodm0sIGtleSwgdXNlckRlZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChrZXkgaW4gdm0uJGRhdGEpIHtcbiAgICAgICAgd2FybigoXCJUaGUgY29tcHV0ZWQgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIGFscmVhZHkgZGVmaW5lZCBpbiBkYXRhLlwiKSwgdm0pO1xuICAgICAgfSBlbHNlIGlmICh2bS4kb3B0aW9ucy5wcm9wcyAmJiBrZXkgaW4gdm0uJG9wdGlvbnMucHJvcHMpIHtcbiAgICAgICAgd2FybigoXCJUaGUgY29tcHV0ZWQgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIGlzIGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3AuXCIpLCB2bSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRlZmluZUNvbXB1dGVkIChcbiAgdGFyZ2V0LFxuICBrZXksXG4gIHVzZXJEZWZcbikge1xuICB2YXIgc2hvdWxkQ2FjaGUgPSAhaXNTZXJ2ZXJSZW5kZXJpbmcoKTtcbiAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IHNob3VsZENhY2hlXG4gICAgICA/IGNyZWF0ZUNvbXB1dGVkR2V0dGVyKGtleSlcbiAgICAgIDogdXNlckRlZjtcbiAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gbm9vcDtcbiAgfSBlbHNlIHtcbiAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gdXNlckRlZi5nZXRcbiAgICAgID8gc2hvdWxkQ2FjaGUgJiYgdXNlckRlZi5jYWNoZSAhPT0gZmFsc2VcbiAgICAgICAgPyBjcmVhdGVDb21wdXRlZEdldHRlcihrZXkpXG4gICAgICAgIDogdXNlckRlZi5nZXRcbiAgICAgIDogbm9vcDtcbiAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gdXNlckRlZi5zZXRcbiAgICAgID8gdXNlckRlZi5zZXRcbiAgICAgIDogbm9vcDtcbiAgfVxuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPT09IG5vb3ApIHtcbiAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgd2FybihcbiAgICAgICAgKFwiQ29tcHV0ZWQgcHJvcGVydHkgXFxcIlwiICsga2V5ICsgXCJcXFwiIHdhcyBhc3NpZ25lZCB0byBidXQgaXQgaGFzIG5vIHNldHRlci5cIiksXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgfTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbXB1dGVkR2V0dGVyIChrZXkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyICgpIHtcbiAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX2NvbXB1dGVkV2F0Y2hlcnMgJiYgdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1trZXldO1xuICAgIGlmICh3YXRjaGVyKSB7XG4gICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuICAgICAgICB3YXRjaGVyLmV2YWx1YXRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoRGVwLnRhcmdldCkge1xuICAgICAgICB3YXRjaGVyLmRlcGVuZCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWVcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdE1ldGhvZHMgKHZtLCBtZXRob2RzKSB7XG4gIHZhciBwcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzO1xuICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykge1xuICAgIHtcbiAgICAgIGlmIChtZXRob2RzW2tleV0gPT0gbnVsbCkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIFwiTWV0aG9kIFxcXCJcIiArIGtleSArIFwiXFxcIiBoYXMgYW4gdW5kZWZpbmVkIHZhbHVlIGluIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbi4gXCIgK1xuICAgICAgICAgIFwiRGlkIHlvdSByZWZlcmVuY2UgdGhlIGZ1bmN0aW9uIGNvcnJlY3RseT9cIixcbiAgICAgICAgICB2bVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BzICYmIGhhc093bihwcm9wcywga2V5KSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIChcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgcHJvcC5cIiksXG4gICAgICAgICAgdm1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICgoa2V5IGluIHZtKSAmJiBpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBcIk1ldGhvZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgY29uZmxpY3RzIHdpdGggYW4gZXhpc3RpbmcgVnVlIGluc3RhbmNlIG1ldGhvZC4gXCIgK1xuICAgICAgICAgIFwiQXZvaWQgZGVmaW5pbmcgY29tcG9uZW50IG1ldGhvZHMgdGhhdCBzdGFydCB3aXRoIF8gb3IgJC5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICB2bVtrZXldID0gbWV0aG9kc1trZXldID09IG51bGwgPyBub29wIDogYmluZChtZXRob2RzW2tleV0sIHZtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0V2F0Y2ggKHZtLCB3YXRjaCkge1xuICBmb3IgKHZhciBrZXkgaW4gd2F0Y2gpIHtcbiAgICB2YXIgaGFuZGxlciA9IHdhdGNoW2tleV07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaGFuZGxlcikpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlci5sZW5ndGg7IGkrKykge1xuICAgICAgICBjcmVhdGVXYXRjaGVyKHZtLCBrZXksIGhhbmRsZXJbaV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjcmVhdGVXYXRjaGVyKHZtLCBrZXksIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVXYXRjaGVyIChcbiAgdm0sXG4gIGV4cE9yRm4sXG4gIGhhbmRsZXIsXG4gIG9wdGlvbnNcbikge1xuICBpZiAoaXNQbGFpbk9iamVjdChoYW5kbGVyKSkge1xuICAgIG9wdGlvbnMgPSBoYW5kbGVyO1xuICAgIGhhbmRsZXIgPSBoYW5kbGVyLmhhbmRsZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnc3RyaW5nJykge1xuICAgIGhhbmRsZXIgPSB2bVtoYW5kbGVyXTtcbiAgfVxuICByZXR1cm4gdm0uJHdhdGNoKGV4cE9yRm4sIGhhbmRsZXIsIG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuICAvLyBmbG93IHNvbWVob3cgaGFzIHByb2JsZW1zIHdpdGggZGlyZWN0bHkgZGVjbGFyZWQgZGVmaW5pdGlvbiBvYmplY3RcbiAgLy8gd2hlbiB1c2luZyBPYmplY3QuZGVmaW5lUHJvcGVydHksIHNvIHdlIGhhdmUgdG8gcHJvY2VkdXJhbGx5IGJ1aWxkIHVwXG4gIC8vIHRoZSBvYmplY3QgaGVyZS5cbiAgdmFyIGRhdGFEZWYgPSB7fTtcbiAgZGF0YURlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9kYXRhIH07XG4gIHZhciBwcm9wc0RlZiA9IHt9O1xuICBwcm9wc0RlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9wcm9wcyB9O1xuICB7XG4gICAgZGF0YURlZi5zZXQgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuICAgICAgd2FybihcbiAgICAgICAgJ0F2b2lkIHJlcGxhY2luZyBpbnN0YW5jZSByb290ICRkYXRhLiAnICtcbiAgICAgICAgJ1VzZSBuZXN0ZWQgZGF0YSBwcm9wZXJ0aWVzIGluc3RlYWQuJyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcbiAgICB9O1xuICAgIHByb3BzRGVmLnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdhcm4oXCIkcHJvcHMgaXMgcmVhZG9ubHkuXCIsIHRoaXMpO1xuICAgIH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckZGF0YScsIGRhdGFEZWYpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRwcm9wcycsIHByb3BzRGVmKTtcblxuICBWdWUucHJvdG90eXBlLiRzZXQgPSBzZXQ7XG4gIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGRlbDtcblxuICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChcbiAgICBleHBPckZuLFxuICAgIGNiLFxuICAgIG9wdGlvbnNcbiAgKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBpZiAoaXNQbGFpbk9iamVjdChjYikpIHtcbiAgICAgIHJldHVybiBjcmVhdGVXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucylcbiAgICB9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgb3B0aW9ucy51c2VyID0gdHJ1ZTtcbiAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMuaW1tZWRpYXRlKSB7XG4gICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbiAoKSB7XG4gICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICB9O1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdFByb3ZpZGUgKHZtKSB7XG4gIHZhciBwcm92aWRlID0gdm0uJG9wdGlvbnMucHJvdmlkZTtcbiAgaWYgKHByb3ZpZGUpIHtcbiAgICB2bS5fcHJvdmlkZWQgPSB0eXBlb2YgcHJvdmlkZSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgPyBwcm92aWRlLmNhbGwodm0pXG4gICAgICA6IHByb3ZpZGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdEluamVjdGlvbnMgKHZtKSB7XG4gIHZhciByZXN1bHQgPSByZXNvbHZlSW5qZWN0KHZtLiRvcHRpb25zLmluamVjdCwgdm0pO1xuICBpZiAocmVzdWx0KSB7XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTtcbiAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUodm0sIGtleSwgcmVzdWx0W2tleV0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3YXJuKFxuICAgICAgICAgICAgXCJBdm9pZCBtdXRhdGluZyBhbiBpbmplY3RlZCB2YWx1ZSBkaXJlY3RseSBzaW5jZSB0aGUgY2hhbmdlcyB3aWxsIGJlIFwiICtcbiAgICAgICAgICAgIFwib3ZlcndyaXR0ZW4gd2hlbmV2ZXIgdGhlIHByb3ZpZGVkIGNvbXBvbmVudCByZS1yZW5kZXJzLiBcIiArXG4gICAgICAgICAgICBcImluamVjdGlvbiBiZWluZyBtdXRhdGVkOiBcXFwiXCIgKyBrZXkgKyBcIlxcXCJcIixcbiAgICAgICAgICAgIHZtXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVJbmplY3QgKGluamVjdCwgdm0pIHtcbiAgaWYgKGluamVjdCkge1xuICAgIC8vIGluamVjdCBpcyA6YW55IGJlY2F1c2UgZmxvdyBpcyBub3Qgc21hcnQgZW5vdWdoIHRvIGZpZ3VyZSBvdXQgY2FjaGVkXG4gICAgdmFyIHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdmFyIGtleXMgPSBoYXNTeW1ib2xcbiAgICAgID8gUmVmbGVjdC5vd25LZXlzKGluamVjdCkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaW5qZWN0LCBrZXkpLmVudW1lcmFibGVcbiAgICAgIH0pXG4gICAgICA6IE9iamVjdC5rZXlzKGluamVjdCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgdmFyIHByb3ZpZGVLZXkgPSBpbmplY3Rba2V5XS5mcm9tO1xuICAgICAgdmFyIHNvdXJjZSA9IHZtO1xuICAgICAgd2hpbGUgKHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLl9wcm92aWRlZCAmJiBoYXNPd24oc291cmNlLl9wcm92aWRlZCwgcHJvdmlkZUtleSkpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHNvdXJjZS5fcHJvdmlkZWRbcHJvdmlkZUtleV07XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBzb3VyY2UgPSBzb3VyY2UuJHBhcmVudDtcbiAgICAgIH1cbiAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgIGlmICgnZGVmYXVsdCcgaW4gaW5qZWN0W2tleV0pIHtcbiAgICAgICAgICB2YXIgcHJvdmlkZURlZmF1bHQgPSBpbmplY3Rba2V5XS5kZWZhdWx0O1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gdHlwZW9mIHByb3ZpZGVEZWZhdWx0ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICA/IHByb3ZpZGVEZWZhdWx0LmNhbGwodm0pXG4gICAgICAgICAgICA6IHByb3ZpZGVEZWZhdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdhcm4oKFwiSW5qZWN0aW9uIFxcXCJcIiArIGtleSArIFwiXFxcIiBub3QgZm91bmRcIiksIHZtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbn1cblxuLyogICovXG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyB2LWZvciBsaXN0cy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTGlzdCAoXG4gIHZhbCxcbiAgcmVuZGVyXG4pIHtcbiAgdmFyIHJldCwgaSwgbCwga2V5cywga2V5O1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpIHx8IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0ID0gbmV3IEFycmF5KHZhbC5sZW5ndGgpO1xuICAgIGZvciAoaSA9IDAsIGwgPSB2YWwubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICByZXRbaV0gPSByZW5kZXIodmFsW2ldLCBpKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICByZXQgPSBuZXcgQXJyYXkodmFsKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdmFsOyBpKyspIHtcbiAgICAgIHJldFtpXSA9IHJlbmRlcihpICsgMSwgaSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkpIHtcbiAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICByZXQgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICAgIGZvciAoaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIHJldFtpXSA9IHJlbmRlcih2YWxba2V5XSwga2V5LCBpKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzRGVmKHJldCkpIHtcbiAgICAocmV0KS5faXNWTGlzdCA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIDxzbG90PlxuICovXG5mdW5jdGlvbiByZW5kZXJTbG90IChcbiAgbmFtZSxcbiAgZmFsbGJhY2ssXG4gIHByb3BzLFxuICBiaW5kT2JqZWN0XG4pIHtcbiAgdmFyIHNjb3BlZFNsb3RGbiA9IHRoaXMuJHNjb3BlZFNsb3RzW25hbWVdO1xuICB2YXIgbm9kZXM7XG4gIGlmIChzY29wZWRTbG90Rm4pIHsgLy8gc2NvcGVkIHNsb3RcbiAgICBwcm9wcyA9IHByb3BzIHx8IHt9O1xuICAgIGlmIChiaW5kT2JqZWN0KSB7XG4gICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgIWlzT2JqZWN0KGJpbmRPYmplY3QpKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgJ3Nsb3Qgdi1iaW5kIHdpdGhvdXQgYXJndW1lbnQgZXhwZWN0cyBhbiBPYmplY3QnLFxuICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHByb3BzID0gZXh0ZW5kKGV4dGVuZCh7fSwgYmluZE9iamVjdCksIHByb3BzKTtcbiAgICB9XG4gICAgbm9kZXMgPSBzY29wZWRTbG90Rm4ocHJvcHMpIHx8IGZhbGxiYWNrO1xuICB9IGVsc2Uge1xuICAgIHZhciBzbG90Tm9kZXMgPSB0aGlzLiRzbG90c1tuYW1lXTtcbiAgICAvLyB3YXJuIGR1cGxpY2F0ZSBzbG90IHVzYWdlXG4gICAgaWYgKHNsb3ROb2Rlcykge1xuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHNsb3ROb2Rlcy5fcmVuZGVyZWQpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBcIkR1cGxpY2F0ZSBwcmVzZW5jZSBvZiBzbG90IFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgZm91bmQgaW4gdGhlIHNhbWUgcmVuZGVyIHRyZWUgXCIgK1xuICAgICAgICAgIFwiLSB0aGlzIHdpbGwgbGlrZWx5IGNhdXNlIHJlbmRlciBlcnJvcnMuXCIsXG4gICAgICAgICAgdGhpc1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgc2xvdE5vZGVzLl9yZW5kZXJlZCA9IHRydWU7XG4gICAgfVxuICAgIG5vZGVzID0gc2xvdE5vZGVzIHx8IGZhbGxiYWNrO1xuICB9XG5cbiAgdmFyIHRhcmdldCA9IHByb3BzICYmIHByb3BzLnNsb3Q7XG4gIGlmICh0YXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7IHNsb3Q6IHRhcmdldCB9LCBub2RlcylcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbm9kZXNcbiAgfVxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIGZpbHRlcnNcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUZpbHRlciAoaWQpIHtcbiAgcmV0dXJuIHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGlkLCB0cnVlKSB8fCBpZGVudGl0eVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaXNLZXlOb3RNYXRjaCAoZXhwZWN0LCBhY3R1YWwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZXhwZWN0KSkge1xuICAgIHJldHVybiBleHBlY3QuaW5kZXhPZihhY3R1YWwpID09PSAtMVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBleHBlY3QgIT09IGFjdHVhbFxuICB9XG59XG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIGNoZWNraW5nIGtleUNvZGVzIGZyb20gY29uZmlnLlxuICogZXhwb3NlZCBhcyBWdWUucHJvdG90eXBlLl9rXG4gKiBwYXNzaW5nIGluIGV2ZW50S2V5TmFtZSBhcyBsYXN0IGFyZ3VtZW50IHNlcGFyYXRlbHkgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqL1xuZnVuY3Rpb24gY2hlY2tLZXlDb2RlcyAoXG4gIGV2ZW50S2V5Q29kZSxcbiAga2V5LFxuICBidWlsdEluS2V5Q29kZSxcbiAgZXZlbnRLZXlOYW1lLFxuICBidWlsdEluS2V5TmFtZVxuKSB7XG4gIHZhciBtYXBwZWRLZXlDb2RlID0gY29uZmlnLmtleUNvZGVzW2tleV0gfHwgYnVpbHRJbktleUNvZGU7XG4gIGlmIChidWlsdEluS2V5TmFtZSAmJiBldmVudEtleU5hbWUgJiYgIWNvbmZpZy5rZXlDb2Rlc1trZXldKSB7XG4gICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2goYnVpbHRJbktleU5hbWUsIGV2ZW50S2V5TmFtZSlcbiAgfSBlbHNlIGlmIChtYXBwZWRLZXlDb2RlKSB7XG4gICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2gobWFwcGVkS2V5Q29kZSwgZXZlbnRLZXlDb2RlKVxuICB9IGVsc2UgaWYgKGV2ZW50S2V5TmFtZSkge1xuICAgIHJldHVybiBoeXBoZW5hdGUoZXZlbnRLZXlOYW1lKSAhPT0ga2V5XG4gIH1cbn1cblxuLyogICovXG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIG1lcmdpbmcgdi1iaW5kPVwib2JqZWN0XCIgaW50byBhIFZOb2RlJ3MgZGF0YS5cbiAqL1xuZnVuY3Rpb24gYmluZE9iamVjdFByb3BzIChcbiAgZGF0YSxcbiAgdGFnLFxuICB2YWx1ZSxcbiAgYXNQcm9wLFxuICBpc1N5bmNcbikge1xuICBpZiAodmFsdWUpIHtcbiAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICAgJ3YtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IG9yIEFycmF5IHZhbHVlJyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gdG9PYmplY3QodmFsdWUpO1xuICAgICAgfVxuICAgICAgdmFyIGhhc2g7XG4gICAgICB2YXIgbG9vcCA9IGZ1bmN0aW9uICgga2V5ICkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAga2V5ID09PSAnY2xhc3MnIHx8XG4gICAgICAgICAga2V5ID09PSAnc3R5bGUnIHx8XG4gICAgICAgICAgaXNSZXNlcnZlZEF0dHJpYnV0ZShrZXkpXG4gICAgICAgICkge1xuICAgICAgICAgIGhhc2ggPSBkYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0eXBlID0gZGF0YS5hdHRycyAmJiBkYXRhLmF0dHJzLnR5cGU7XG4gICAgICAgICAgaGFzaCA9IGFzUHJvcCB8fCBjb25maWcubXVzdFVzZVByb3AodGFnLCB0eXBlLCBrZXkpXG4gICAgICAgICAgICA/IGRhdGEuZG9tUHJvcHMgfHwgKGRhdGEuZG9tUHJvcHMgPSB7fSlcbiAgICAgICAgICAgIDogZGF0YS5hdHRycyB8fCAoZGF0YS5hdHRycyA9IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShrZXkgaW4gaGFzaCkpIHtcbiAgICAgICAgICBoYXNoW2tleV0gPSB2YWx1ZVtrZXldO1xuXG4gICAgICAgICAgaWYgKGlzU3luYykge1xuICAgICAgICAgICAgdmFyIG9uID0gZGF0YS5vbiB8fCAoZGF0YS5vbiA9IHt9KTtcbiAgICAgICAgICAgIG9uWyhcInVwZGF0ZTpcIiArIGtleSldID0gZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgICB2YWx1ZVtrZXldID0gJGV2ZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgbG9vcCgga2V5ICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBkYXRhXG59XG5cbi8qICAqL1xuXG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgc3RhdGljIHRyZWVzLlxuICovXG5mdW5jdGlvbiByZW5kZXJTdGF0aWMgKFxuICBpbmRleCxcbiAgaXNJbkZvclxuKSB7XG4gIHZhciBjYWNoZWQgPSB0aGlzLl9zdGF0aWNUcmVlcyB8fCAodGhpcy5fc3RhdGljVHJlZXMgPSBbXSk7XG4gIHZhciB0cmVlID0gY2FjaGVkW2luZGV4XTtcbiAgLy8gaWYgaGFzIGFscmVhZHktcmVuZGVyZWQgc3RhdGljIHRyZWUgYW5kIG5vdCBpbnNpZGUgdi1mb3IsXG4gIC8vIHdlIGNhbiByZXVzZSB0aGUgc2FtZSB0cmVlLlxuICBpZiAodHJlZSAmJiAhaXNJbkZvcikge1xuICAgIHJldHVybiB0cmVlXG4gIH1cbiAgLy8gb3RoZXJ3aXNlLCByZW5kZXIgYSBmcmVzaCB0cmVlLlxuICB0cmVlID0gY2FjaGVkW2luZGV4XSA9IHRoaXMuJG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zW2luZGV4XS5jYWxsKFxuICAgIHRoaXMuX3JlbmRlclByb3h5LFxuICAgIG51bGwsXG4gICAgdGhpcyAvLyBmb3IgcmVuZGVyIGZucyBnZW5lcmF0ZWQgZm9yIGZ1bmN0aW9uYWwgY29tcG9uZW50IHRlbXBsYXRlc1xuICApO1xuICBtYXJrU3RhdGljKHRyZWUsIChcIl9fc3RhdGljX19cIiArIGluZGV4KSwgZmFsc2UpO1xuICByZXR1cm4gdHJlZVxufVxuXG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciB2LW9uY2UuXG4gKiBFZmZlY3RpdmVseSBpdCBtZWFucyBtYXJraW5nIHRoZSBub2RlIGFzIHN0YXRpYyB3aXRoIGEgdW5pcXVlIGtleS5cbiAqL1xuZnVuY3Rpb24gbWFya09uY2UgKFxuICB0cmVlLFxuICBpbmRleCxcbiAga2V5XG4pIHtcbiAgbWFya1N0YXRpYyh0cmVlLCAoXCJfX29uY2VfX1wiICsgaW5kZXggKyAoa2V5ID8gKFwiX1wiICsga2V5KSA6IFwiXCIpKSwgdHJ1ZSk7XG4gIHJldHVybiB0cmVlXG59XG5cbmZ1bmN0aW9uIG1hcmtTdGF0aWMgKFxuICB0cmVlLFxuICBrZXksXG4gIGlzT25jZVxuKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHRyZWUpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodHJlZVtpXSAmJiB0eXBlb2YgdHJlZVtpXSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgbWFya1N0YXRpY05vZGUodHJlZVtpXSwgKGtleSArIFwiX1wiICsgaSksIGlzT25jZSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG1hcmtTdGF0aWNOb2RlKHRyZWUsIGtleSwgaXNPbmNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXJrU3RhdGljTm9kZSAobm9kZSwga2V5LCBpc09uY2UpIHtcbiAgbm9kZS5pc1N0YXRpYyA9IHRydWU7XG4gIG5vZGUua2V5ID0ga2V5O1xuICBub2RlLmlzT25jZSA9IGlzT25jZTtcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGJpbmRPYmplY3RMaXN0ZW5lcnMgKGRhdGEsIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSkge1xuICAgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oXG4gICAgICAgICd2LW9uIHdpdGhvdXQgYXJndW1lbnQgZXhwZWN0cyBhbiBPYmplY3QgdmFsdWUnLFxuICAgICAgICB0aGlzXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb24gPSBkYXRhLm9uID0gZGF0YS5vbiA/IGV4dGVuZCh7fSwgZGF0YS5vbikgOiB7fTtcbiAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgICB2YXIgZXhpc3RpbmcgPSBvbltrZXldO1xuICAgICAgICB2YXIgb3VycyA9IHZhbHVlW2tleV07XG4gICAgICAgIG9uW2tleV0gPSBleGlzdGluZyA/IFtdLmNvbmNhdChleGlzdGluZywgb3VycykgOiBvdXJzO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZGF0YVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5zdGFsbFJlbmRlckhlbHBlcnMgKHRhcmdldCkge1xuICB0YXJnZXQuX28gPSBtYXJrT25jZTtcbiAgdGFyZ2V0Ll9uID0gdG9OdW1iZXI7XG4gIHRhcmdldC5fcyA9IHRvU3RyaW5nO1xuICB0YXJnZXQuX2wgPSByZW5kZXJMaXN0O1xuICB0YXJnZXQuX3QgPSByZW5kZXJTbG90O1xuICB0YXJnZXQuX3EgPSBsb29zZUVxdWFsO1xuICB0YXJnZXQuX2kgPSBsb29zZUluZGV4T2Y7XG4gIHRhcmdldC5fbSA9IHJlbmRlclN0YXRpYztcbiAgdGFyZ2V0Ll9mID0gcmVzb2x2ZUZpbHRlcjtcbiAgdGFyZ2V0Ll9rID0gY2hlY2tLZXlDb2RlcztcbiAgdGFyZ2V0Ll9iID0gYmluZE9iamVjdFByb3BzO1xuICB0YXJnZXQuX3YgPSBjcmVhdGVUZXh0Vk5vZGU7XG4gIHRhcmdldC5fZSA9IGNyZWF0ZUVtcHR5Vk5vZGU7XG4gIHRhcmdldC5fdSA9IHJlc29sdmVTY29wZWRTbG90cztcbiAgdGFyZ2V0Ll9nID0gYmluZE9iamVjdExpc3RlbmVycztcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0IChcbiAgZGF0YSxcbiAgcHJvcHMsXG4gIGNoaWxkcmVuLFxuICBwYXJlbnQsXG4gIEN0b3Jcbikge1xuICB2YXIgb3B0aW9ucyA9IEN0b3Iub3B0aW9ucztcbiAgdGhpcy5kYXRhID0gZGF0YTtcbiAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICB0aGlzLmxpc3RlbmVycyA9IGRhdGEub24gfHwgZW1wdHlPYmplY3Q7XG4gIHRoaXMuaW5qZWN0aW9ucyA9IHJlc29sdmVJbmplY3Qob3B0aW9ucy5pbmplY3QsIHBhcmVudCk7XG4gIHRoaXMuc2xvdHMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlU2xvdHMoY2hpbGRyZW4sIHBhcmVudCk7IH07XG5cbiAgLy8gZW5zdXJlIHRoZSBjcmVhdGVFbGVtZW50IGZ1bmN0aW9uIGluIGZ1bmN0aW9uYWwgY29tcG9uZW50c1xuICAvLyBnZXRzIGEgdW5pcXVlIGNvbnRleHQgLSB0aGlzIGlzIG5lY2Vzc2FyeSBmb3IgY29ycmVjdCBuYW1lZCBzbG90IGNoZWNrXG4gIHZhciBjb250ZXh0Vm0gPSBPYmplY3QuY3JlYXRlKHBhcmVudCk7XG4gIHZhciBpc0NvbXBpbGVkID0gaXNUcnVlKG9wdGlvbnMuX2NvbXBpbGVkKTtcbiAgdmFyIG5lZWROb3JtYWxpemF0aW9uID0gIWlzQ29tcGlsZWQ7XG5cbiAgLy8gc3VwcG9ydCBmb3IgY29tcGlsZWQgZnVuY3Rpb25hbCB0ZW1wbGF0ZVxuICBpZiAoaXNDb21waWxlZCkge1xuICAgIC8vIGV4cG9zaW5nICRvcHRpb25zIGZvciByZW5kZXJTdGF0aWMoKVxuICAgIHRoaXMuJG9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIHByZS1yZXNvbHZlIHNsb3RzIGZvciByZW5kZXJTbG90KClcbiAgICB0aGlzLiRzbG90cyA9IHRoaXMuc2xvdHMoKTtcbiAgICB0aGlzLiRzY29wZWRTbG90cyA9IGRhdGEuc2NvcGVkU2xvdHMgfHwgZW1wdHlPYmplY3Q7XG4gIH1cblxuICBpZiAob3B0aW9ucy5fc2NvcGVJZCkge1xuICAgIHRoaXMuX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xuICAgICAgdmFyIHZub2RlID0gY3JlYXRlRWxlbWVudChjb250ZXh0Vm0sIGEsIGIsIGMsIGQsIG5lZWROb3JtYWxpemF0aW9uKTtcbiAgICAgIGlmICh2bm9kZSAmJiAhQXJyYXkuaXNBcnJheSh2bm9kZSkpIHtcbiAgICAgICAgdm5vZGUuZm5TY29wZUlkID0gb3B0aW9ucy5fc2NvcGVJZDtcbiAgICAgICAgdm5vZGUuZm5Db250ZXh0ID0gcGFyZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZub2RlXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9jID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7IH07XG4gIH1cbn1cblxuaW5zdGFsbFJlbmRlckhlbHBlcnMoRnVuY3Rpb25hbFJlbmRlckNvbnRleHQucHJvdG90eXBlKTtcblxuZnVuY3Rpb24gY3JlYXRlRnVuY3Rpb25hbENvbXBvbmVudCAoXG4gIEN0b3IsXG4gIHByb3BzRGF0YSxcbiAgZGF0YSxcbiAgY29udGV4dFZtLFxuICBjaGlsZHJlblxuKSB7XG4gIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zO1xuICB2YXIgcHJvcHMgPSB7fTtcbiAgdmFyIHByb3BPcHRpb25zID0gb3B0aW9ucy5wcm9wcztcbiAgaWYgKGlzRGVmKHByb3BPcHRpb25zKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wT3B0aW9ucykge1xuICAgICAgcHJvcHNba2V5XSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BPcHRpb25zLCBwcm9wc0RhdGEgfHwgZW1wdHlPYmplY3QpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoaXNEZWYoZGF0YS5hdHRycykpIHsgbWVyZ2VQcm9wcyhwcm9wcywgZGF0YS5hdHRycyk7IH1cbiAgICBpZiAoaXNEZWYoZGF0YS5wcm9wcykpIHsgbWVyZ2VQcm9wcyhwcm9wcywgZGF0YS5wcm9wcyk7IH1cbiAgfVxuXG4gIHZhciByZW5kZXJDb250ZXh0ID0gbmV3IEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0KFxuICAgIGRhdGEsXG4gICAgcHJvcHMsXG4gICAgY2hpbGRyZW4sXG4gICAgY29udGV4dFZtLFxuICAgIEN0b3JcbiAgKTtcblxuICB2YXIgdm5vZGUgPSBvcHRpb25zLnJlbmRlci5jYWxsKG51bGwsIHJlbmRlckNvbnRleHQuX2MsIHJlbmRlckNvbnRleHQpO1xuXG4gIGlmICh2bm9kZSBpbnN0YW5jZW9mIFZOb2RlKSB7XG4gICAgc2V0RnVuY3Rpb25hbENvbnRleHRGb3JWTm9kZSh2bm9kZSwgZGF0YSwgY29udGV4dFZtLCBvcHRpb25zKTtcbiAgICByZXR1cm4gdm5vZGVcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkge1xuICAgIHZhciB2bm9kZXMgPSBub3JtYWxpemVDaGlsZHJlbih2bm9kZSkgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNldEZ1bmN0aW9uYWxDb250ZXh0Rm9yVk5vZGUodm5vZGVzW2ldLCBkYXRhLCBjb250ZXh0Vm0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGVzXG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0RnVuY3Rpb25hbENvbnRleHRGb3JWTm9kZSAodm5vZGUsIGRhdGEsIHZtLCBvcHRpb25zKSB7XG4gIHZub2RlLmZuQ29udGV4dCA9IHZtO1xuICB2bm9kZS5mbk9wdGlvbnMgPSBvcHRpb25zO1xuICBpZiAoZGF0YS5zbG90KSB7XG4gICAgKHZub2RlLmRhdGEgfHwgKHZub2RlLmRhdGEgPSB7fSkpLnNsb3QgPSBkYXRhLnNsb3Q7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWVyZ2VQcm9wcyAodG8sIGZyb20pIHtcbiAgZm9yICh2YXIga2V5IGluIGZyb20pIHtcbiAgICB0b1tjYW1lbGl6ZShrZXkpXSA9IGZyb21ba2V5XTtcbiAgfVxufVxuXG4vKiAgKi9cblxuXG5cblxuLy8gUmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBob29rIHRvIHdlZXggbmF0aXZlIHJlbmRlciBlbmdpbmUuXG4vLyBUaGUgaG9vayB3aWxsIGJlIHRyaWdnZXJlZCBieSBuYXRpdmUsIG5vdCBqYXZhc2NyaXB0LlxuXG5cbi8vIFVwZGF0ZXMgdGhlIHN0YXRlIG9mIHRoZSBjb21wb25lbnQgdG8gd2VleCBuYXRpdmUgcmVuZGVyIGVuZ2luZS5cblxuLyogICovXG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5rczEwMTAwL3dlZXgtbmF0aXZlLWRpcmVjdGl2ZS90cmVlL21hc3Rlci9jb21wb25lbnRcblxuLy8gbGlzdGVuaW5nIG9uIG5hdGl2ZSBjYWxsYmFja1xuXG4vKiAgKi9cblxuLyogICovXG5cbi8vIGhvb2tzIHRvIGJlIGludm9rZWQgb24gY29tcG9uZW50IFZOb2RlcyBkdXJpbmcgcGF0Y2hcbnZhciBjb21wb25lbnRWTm9kZUhvb2tzID0ge1xuICBpbml0OiBmdW5jdGlvbiBpbml0IChcbiAgICB2bm9kZSxcbiAgICBoeWRyYXRpbmcsXG4gICAgcGFyZW50RWxtLFxuICAgIHJlZkVsbVxuICApIHtcbiAgICBpZiAoXG4gICAgICB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSAmJlxuICAgICAgIXZub2RlLmNvbXBvbmVudEluc3RhbmNlLl9pc0Rlc3Ryb3llZCAmJlxuICAgICAgdm5vZGUuZGF0YS5rZWVwQWxpdmVcbiAgICApIHtcbiAgICAgIC8vIGtlcHQtYWxpdmUgY29tcG9uZW50cywgdHJlYXQgYXMgYSBwYXRjaFxuICAgICAgdmFyIG1vdW50ZWROb2RlID0gdm5vZGU7IC8vIHdvcmsgYXJvdW5kIGZsb3dcbiAgICAgIGNvbXBvbmVudFZOb2RlSG9va3MucHJlcGF0Y2gobW91bnRlZE5vZGUsIG1vdW50ZWROb2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlKFxuICAgICAgICB2bm9kZSxcbiAgICAgICAgYWN0aXZlSW5zdGFuY2UsXG4gICAgICAgIHBhcmVudEVsbSxcbiAgICAgICAgcmVmRWxtXG4gICAgICApO1xuICAgICAgY2hpbGQuJG1vdW50KGh5ZHJhdGluZyA/IHZub2RlLmVsbSA6IHVuZGVmaW5lZCwgaHlkcmF0aW5nKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJlcGF0Y2g6IGZ1bmN0aW9uIHByZXBhdGNoIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG4gICAgdmFyIGNoaWxkID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBvbGRWbm9kZS5jb21wb25lbnRJbnN0YW5jZTtcbiAgICB1cGRhdGVDaGlsZENvbXBvbmVudChcbiAgICAgIGNoaWxkLFxuICAgICAgb3B0aW9ucy5wcm9wc0RhdGEsIC8vIHVwZGF0ZWQgcHJvcHNcbiAgICAgIG9wdGlvbnMubGlzdGVuZXJzLCAvLyB1cGRhdGVkIGxpc3RlbmVyc1xuICAgICAgdm5vZGUsIC8vIG5ldyBwYXJlbnQgdm5vZGVcbiAgICAgIG9wdGlvbnMuY2hpbGRyZW4gLy8gbmV3IGNoaWxkcmVuXG4gICAgKTtcbiAgfSxcblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCAodm5vZGUpIHtcbiAgICB2YXIgY29udGV4dCA9IHZub2RlLmNvbnRleHQ7XG4gICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7XG4gICAgaWYgKCFjb21wb25lbnRJbnN0YW5jZS5faXNNb3VudGVkKSB7XG4gICAgICBjb21wb25lbnRJbnN0YW5jZS5faXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgIGNhbGxIb29rKGNvbXBvbmVudEluc3RhbmNlLCAnbW91bnRlZCcpO1xuICAgIH1cbiAgICBpZiAodm5vZGUuZGF0YS5rZWVwQWxpdmUpIHtcbiAgICAgIGlmIChjb250ZXh0Ll9pc01vdW50ZWQpIHtcbiAgICAgICAgLy8gdnVlLXJvdXRlciMxMjEyXG4gICAgICAgIC8vIER1cmluZyB1cGRhdGVzLCBhIGtlcHQtYWxpdmUgY29tcG9uZW50J3MgY2hpbGQgY29tcG9uZW50cyBtYXlcbiAgICAgICAgLy8gY2hhbmdlLCBzbyBkaXJlY3RseSB3YWxraW5nIHRoZSB0cmVlIGhlcmUgbWF5IGNhbGwgYWN0aXZhdGVkIGhvb2tzXG4gICAgICAgIC8vIG9uIGluY29ycmVjdCBjaGlsZHJlbi4gSW5zdGVhZCB3ZSBwdXNoIHRoZW0gaW50byBhIHF1ZXVlIHdoaWNoIHdpbGxcbiAgICAgICAgLy8gYmUgcHJvY2Vzc2VkIGFmdGVyIHRoZSB3aG9sZSBwYXRjaCBwcm9jZXNzIGVuZGVkLlxuICAgICAgICBxdWV1ZUFjdGl2YXRlZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCB0cnVlIC8qIGRpcmVjdCAqLyk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3kgKHZub2RlKSB7XG4gICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7XG4gICAgaWYgKCFjb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQpIHtcbiAgICAgIGlmICghdm5vZGUuZGF0YS5rZWVwQWxpdmUpIHtcbiAgICAgICAgY29tcG9uZW50SW5zdGFuY2UuJGRlc3Ryb3koKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgdHJ1ZSAvKiBkaXJlY3QgKi8pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxudmFyIGhvb2tzVG9NZXJnZSA9IE9iamVjdC5rZXlzKGNvbXBvbmVudFZOb2RlSG9va3MpO1xuXG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKFxuICBDdG9yLFxuICBkYXRhLFxuICBjb250ZXh0LFxuICBjaGlsZHJlbixcbiAgdGFnXG4pIHtcbiAgaWYgKGlzVW5kZWYoQ3RvcikpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBiYXNlQ3RvciA9IGNvbnRleHQuJG9wdGlvbnMuX2Jhc2U7XG5cbiAgLy8gcGxhaW4gb3B0aW9ucyBvYmplY3Q6IHR1cm4gaXQgaW50byBhIGNvbnN0cnVjdG9yXG4gIGlmIChpc09iamVjdChDdG9yKSkge1xuICAgIEN0b3IgPSBiYXNlQ3Rvci5leHRlbmQoQ3Rvcik7XG4gIH1cblxuICAvLyBpZiBhdCB0aGlzIHN0YWdlIGl0J3Mgbm90IGEgY29uc3RydWN0b3Igb3IgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnksXG4gIC8vIHJlamVjdC5cbiAgaWYgKHR5cGVvZiBDdG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAge1xuICAgICAgd2FybigoXCJJbnZhbGlkIENvbXBvbmVudCBkZWZpbml0aW9uOiBcIiArIChTdHJpbmcoQ3RvcikpKSwgY29udGV4dCk7XG4gICAgfVxuICAgIHJldHVyblxuICB9XG5cbiAgLy8gYXN5bmMgY29tcG9uZW50XG4gIHZhciBhc3luY0ZhY3Rvcnk7XG4gIGlmIChpc1VuZGVmKEN0b3IuY2lkKSkge1xuICAgIGFzeW5jRmFjdG9yeSA9IEN0b3I7XG4gICAgQ3RvciA9IHJlc29sdmVBc3luY0NvbXBvbmVudChhc3luY0ZhY3RvcnksIGJhc2VDdG9yLCBjb250ZXh0KTtcbiAgICBpZiAoQ3RvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyByZXR1cm4gYSBwbGFjZWhvbGRlciBub2RlIGZvciBhc3luYyBjb21wb25lbnQsIHdoaWNoIGlzIHJlbmRlcmVkXG4gICAgICAvLyBhcyBhIGNvbW1lbnQgbm9kZSBidXQgcHJlc2VydmVzIGFsbCB0aGUgcmF3IGluZm9ybWF0aW9uIGZvciB0aGUgbm9kZS5cbiAgICAgIC8vIHRoZSBpbmZvcm1hdGlvbiB3aWxsIGJlIHVzZWQgZm9yIGFzeW5jIHNlcnZlci1yZW5kZXJpbmcgYW5kIGh5ZHJhdGlvbi5cbiAgICAgIHJldHVybiBjcmVhdGVBc3luY1BsYWNlaG9sZGVyKFxuICAgICAgICBhc3luY0ZhY3RvcnksXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGNoaWxkcmVuLFxuICAgICAgICB0YWdcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBkYXRhID0gZGF0YSB8fCB7fTtcblxuICAvLyByZXNvbHZlIGNvbnN0cnVjdG9yIG9wdGlvbnMgaW4gY2FzZSBnbG9iYWwgbWl4aW5zIGFyZSBhcHBsaWVkIGFmdGVyXG4gIC8vIGNvbXBvbmVudCBjb25zdHJ1Y3RvciBjcmVhdGlvblxuICByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKEN0b3IpO1xuXG4gIC8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBkYXRhIGludG8gcHJvcHMgJiBldmVudHNcbiAgaWYgKGlzRGVmKGRhdGEubW9kZWwpKSB7XG4gICAgdHJhbnNmb3JtTW9kZWwoQ3Rvci5vcHRpb25zLCBkYXRhKTtcbiAgfVxuXG4gIC8vIGV4dHJhY3QgcHJvcHNcbiAgdmFyIHByb3BzRGF0YSA9IGV4dHJhY3RQcm9wc0Zyb21WTm9kZURhdGEoZGF0YSwgQ3RvciwgdGFnKTtcblxuICAvLyBmdW5jdGlvbmFsIGNvbXBvbmVudFxuICBpZiAoaXNUcnVlKEN0b3Iub3B0aW9ucy5mdW5jdGlvbmFsKSkge1xuICAgIHJldHVybiBjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50KEN0b3IsIHByb3BzRGF0YSwgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4pXG4gIH1cblxuICAvLyBleHRyYWN0IGxpc3RlbmVycywgc2luY2UgdGhlc2UgbmVlZHMgdG8gYmUgdHJlYXRlZCBhc1xuICAvLyBjaGlsZCBjb21wb25lbnQgbGlzdGVuZXJzIGluc3RlYWQgb2YgRE9NIGxpc3RlbmVyc1xuICB2YXIgbGlzdGVuZXJzID0gZGF0YS5vbjtcbiAgLy8gcmVwbGFjZSB3aXRoIGxpc3RlbmVycyB3aXRoIC5uYXRpdmUgbW9kaWZpZXJcbiAgLy8gc28gaXQgZ2V0cyBwcm9jZXNzZWQgZHVyaW5nIHBhcmVudCBjb21wb25lbnQgcGF0Y2guXG4gIGRhdGEub24gPSBkYXRhLm5hdGl2ZU9uO1xuXG4gIGlmIChpc1RydWUoQ3Rvci5vcHRpb25zLmFic3RyYWN0KSkge1xuICAgIC8vIGFic3RyYWN0IGNvbXBvbmVudHMgZG8gbm90IGtlZXAgYW55dGhpbmdcbiAgICAvLyBvdGhlciB0aGFuIHByb3BzICYgbGlzdGVuZXJzICYgc2xvdFxuXG4gICAgLy8gd29yayBhcm91bmQgZmxvd1xuICAgIHZhciBzbG90ID0gZGF0YS5zbG90O1xuICAgIGRhdGEgPSB7fTtcbiAgICBpZiAoc2xvdCkge1xuICAgICAgZGF0YS5zbG90ID0gc2xvdDtcbiAgICB9XG4gIH1cblxuICAvLyBtZXJnZSBjb21wb25lbnQgbWFuYWdlbWVudCBob29rcyBvbnRvIHRoZSBwbGFjZWhvbGRlciBub2RlXG4gIG1lcmdlSG9va3MoZGF0YSk7XG5cbiAgLy8gcmV0dXJuIGEgcGxhY2Vob2xkZXIgdm5vZGVcbiAgdmFyIG5hbWUgPSBDdG9yLm9wdGlvbnMubmFtZSB8fCB0YWc7XG4gIHZhciB2bm9kZSA9IG5ldyBWTm9kZShcbiAgICAoXCJ2dWUtY29tcG9uZW50LVwiICsgKEN0b3IuY2lkKSArIChuYW1lID8gKFwiLVwiICsgbmFtZSkgOiAnJykpLFxuICAgIGRhdGEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHQsXG4gICAgeyBDdG9yOiBDdG9yLCBwcm9wc0RhdGE6IHByb3BzRGF0YSwgbGlzdGVuZXJzOiBsaXN0ZW5lcnMsIHRhZzogdGFnLCBjaGlsZHJlbjogY2hpbGRyZW4gfSxcbiAgICBhc3luY0ZhY3RvcnlcbiAgKTtcblxuICAvLyBXZWV4IHNwZWNpZmljOiBpbnZva2UgcmVjeWNsZS1saXN0IG9wdGltaXplZCBAcmVuZGVyIGZ1bmN0aW9uIGZvclxuICAvLyBleHRyYWN0aW5nIGNlbGwtc2xvdCB0ZW1wbGF0ZS5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0hhbmtzMTAxMDAvd2VleC1uYXRpdmUtZGlyZWN0aXZlL3RyZWUvbWFzdGVyL2NvbXBvbmVudFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgcmV0dXJuIHZub2RlXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlRm9yVm5vZGUgKFxuICB2bm9kZSwgLy8gd2Uga25vdyBpdCdzIE1vdW50ZWRDb21wb25lbnRWTm9kZSBidXQgZmxvdyBkb2Vzbid0XG4gIHBhcmVudCwgLy8gYWN0aXZlSW5zdGFuY2UgaW4gbGlmZWN5Y2xlIHN0YXRlXG4gIHBhcmVudEVsbSxcbiAgcmVmRWxtXG4pIHtcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgX2lzQ29tcG9uZW50OiB0cnVlLFxuICAgIHBhcmVudDogcGFyZW50LFxuICAgIF9wYXJlbnRWbm9kZTogdm5vZGUsXG4gICAgX3BhcmVudEVsbTogcGFyZW50RWxtIHx8IG51bGwsXG4gICAgX3JlZkVsbTogcmVmRWxtIHx8IG51bGxcbiAgfTtcbiAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlIHJlbmRlciBmdW5jdGlvbnNcbiAgdmFyIGlubGluZVRlbXBsYXRlID0gdm5vZGUuZGF0YS5pbmxpbmVUZW1wbGF0ZTtcbiAgaWYgKGlzRGVmKGlubGluZVRlbXBsYXRlKSkge1xuICAgIG9wdGlvbnMucmVuZGVyID0gaW5saW5lVGVtcGxhdGUucmVuZGVyO1xuICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gaW5saW5lVGVtcGxhdGUuc3RhdGljUmVuZGVyRm5zO1xuICB9XG4gIHJldHVybiBuZXcgdm5vZGUuY29tcG9uZW50T3B0aW9ucy5DdG9yKG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIG1lcmdlSG9va3MgKGRhdGEpIHtcbiAgaWYgKCFkYXRhLmhvb2spIHtcbiAgICBkYXRhLmhvb2sgPSB7fTtcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzVG9NZXJnZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBob29rc1RvTWVyZ2VbaV07XG4gICAgdmFyIGZyb21QYXJlbnQgPSBkYXRhLmhvb2tba2V5XTtcbiAgICB2YXIgb3VycyA9IGNvbXBvbmVudFZOb2RlSG9va3Nba2V5XTtcbiAgICBkYXRhLmhvb2tba2V5XSA9IGZyb21QYXJlbnQgPyBtZXJnZUhvb2skMShvdXJzLCBmcm9tUGFyZW50KSA6IG91cnM7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWVyZ2VIb29rJDEgKG9uZSwgdHdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xuICAgIG9uZShhLCBiLCBjLCBkKTtcbiAgICB0d28oYSwgYiwgYywgZCk7XG4gIH1cbn1cblxuLy8gdHJhbnNmb3JtIGNvbXBvbmVudCB2LW1vZGVsIGluZm8gKHZhbHVlIGFuZCBjYWxsYmFjaykgaW50b1xuLy8gcHJvcCBhbmQgZXZlbnQgaGFuZGxlciByZXNwZWN0aXZlbHkuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Nb2RlbCAob3B0aW9ucywgZGF0YSkge1xuICB2YXIgcHJvcCA9IChvcHRpb25zLm1vZGVsICYmIG9wdGlvbnMubW9kZWwucHJvcCkgfHwgJ3ZhbHVlJztcbiAgdmFyIGV2ZW50ID0gKG9wdGlvbnMubW9kZWwgJiYgb3B0aW9ucy5tb2RlbC5ldmVudCkgfHwgJ2lucHV0JzsoZGF0YS5wcm9wcyB8fCAoZGF0YS5wcm9wcyA9IHt9KSlbcHJvcF0gPSBkYXRhLm1vZGVsLnZhbHVlO1xuICB2YXIgb24gPSBkYXRhLm9uIHx8IChkYXRhLm9uID0ge30pO1xuICBpZiAoaXNEZWYob25bZXZlbnRdKSkge1xuICAgIG9uW2V2ZW50XSA9IFtkYXRhLm1vZGVsLmNhbGxiYWNrXS5jb25jYXQob25bZXZlbnRdKTtcbiAgfSBlbHNlIHtcbiAgICBvbltldmVudF0gPSBkYXRhLm1vZGVsLmNhbGxiYWNrO1xuICB9XG59XG5cbi8qICAqL1xuXG52YXIgU0lNUExFX05PUk1BTElaRSA9IDE7XG52YXIgQUxXQVlTX05PUk1BTElaRSA9IDI7XG5cbi8vIHdyYXBwZXIgZnVuY3Rpb24gZm9yIHByb3ZpZGluZyBhIG1vcmUgZmxleGlibGUgaW50ZXJmYWNlXG4vLyB3aXRob3V0IGdldHRpbmcgeWVsbGVkIGF0IGJ5IGZsb3dcbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQgKFxuICBjb250ZXh0LFxuICB0YWcsXG4gIGRhdGEsXG4gIGNoaWxkcmVuLFxuICBub3JtYWxpemF0aW9uVHlwZSxcbiAgYWx3YXlzTm9ybWFsaXplXG4pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkgfHwgaXNQcmltaXRpdmUoZGF0YSkpIHtcbiAgICBub3JtYWxpemF0aW9uVHlwZSA9IGNoaWxkcmVuO1xuICAgIGNoaWxkcmVuID0gZGF0YTtcbiAgICBkYXRhID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChpc1RydWUoYWx3YXlzTm9ybWFsaXplKSkge1xuICAgIG5vcm1hbGl6YXRpb25UeXBlID0gQUxXQVlTX05PUk1BTElaRTtcbiAgfVxuICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQoY29udGV4dCwgdGFnLCBkYXRhLCBjaGlsZHJlbiwgbm9ybWFsaXphdGlvblR5cGUpXG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVFbGVtZW50IChcbiAgY29udGV4dCxcbiAgdGFnLFxuICBkYXRhLFxuICBjaGlsZHJlbixcbiAgbm9ybWFsaXphdGlvblR5cGVcbikge1xuICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoKGRhdGEpLl9fb2JfXykpIHtcbiAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgXCJBdm9pZCB1c2luZyBvYnNlcnZlZCBkYXRhIG9iamVjdCBhcyB2bm9kZSBkYXRhOiBcIiArIChKU09OLnN0cmluZ2lmeShkYXRhKSkgKyBcIlxcblwiICtcbiAgICAgICdBbHdheXMgY3JlYXRlIGZyZXNoIHZub2RlIGRhdGEgb2JqZWN0cyBpbiBlYWNoIHJlbmRlciEnLFxuICAgICAgY29udGV4dFxuICAgICk7XG4gICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKVxuICB9XG4gIC8vIG9iamVjdCBzeW50YXggaW4gdi1iaW5kXG4gIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihkYXRhLmlzKSkge1xuICAgIHRhZyA9IGRhdGEuaXM7XG4gIH1cbiAgaWYgKCF0YWcpIHtcbiAgICAvLyBpbiBjYXNlIG9mIGNvbXBvbmVudCA6aXMgc2V0IHRvIGZhbHN5IHZhbHVlXG4gICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKVxuICB9XG4gIC8vIHdhcm4gYWdhaW5zdCBub24tcHJpbWl0aXZlIGtleVxuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICBpc0RlZihkYXRhKSAmJiBpc0RlZihkYXRhLmtleSkgJiYgIWlzUHJpbWl0aXZlKGRhdGEua2V5KVxuICApIHtcbiAgICB7XG4gICAgICB3YXJuKFxuICAgICAgICAnQXZvaWQgdXNpbmcgbm9uLXByaW1pdGl2ZSB2YWx1ZSBhcyBrZXksICcgK1xuICAgICAgICAndXNlIHN0cmluZy9udW1iZXIgdmFsdWUgaW5zdGVhZC4nLFxuICAgICAgICBjb250ZXh0XG4gICAgICApO1xuICAgIH1cbiAgfVxuICAvLyBzdXBwb3J0IHNpbmdsZSBmdW5jdGlvbiBjaGlsZHJlbiBhcyBkZWZhdWx0IHNjb3BlZCBzbG90XG4gIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSAmJlxuICAgIHR5cGVvZiBjaGlsZHJlblswXSA9PT0gJ2Z1bmN0aW9uJ1xuICApIHtcbiAgICBkYXRhID0gZGF0YSB8fCB7fTtcbiAgICBkYXRhLnNjb3BlZFNsb3RzID0geyBkZWZhdWx0OiBjaGlsZHJlblswXSB9O1xuICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7XG4gIH1cbiAgaWYgKG5vcm1hbGl6YXRpb25UeXBlID09PSBBTFdBWVNfTk9STUFMSVpFKSB7XG4gICAgY2hpbGRyZW4gPSBub3JtYWxpemVDaGlsZHJlbihjaGlsZHJlbik7XG4gIH0gZWxzZSBpZiAobm9ybWFsaXphdGlvblR5cGUgPT09IFNJTVBMRV9OT1JNQUxJWkUpIHtcbiAgICBjaGlsZHJlbiA9IHNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuKGNoaWxkcmVuKTtcbiAgfVxuICB2YXIgdm5vZGUsIG5zO1xuICBpZiAodHlwZW9mIHRhZyA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgQ3RvcjtcbiAgICBucyA9IChjb250ZXh0LiR2bm9kZSAmJiBjb250ZXh0LiR2bm9kZS5ucykgfHwgY29uZmlnLmdldFRhZ05hbWVzcGFjZSh0YWcpO1xuICAgIGlmIChjb25maWcuaXNSZXNlcnZlZFRhZyh0YWcpKSB7XG4gICAgICAvLyBwbGF0Zm9ybSBidWlsdC1pbiBlbGVtZW50c1xuICAgICAgdm5vZGUgPSBuZXcgVk5vZGUoXG4gICAgICAgIGNvbmZpZy5wYXJzZVBsYXRmb3JtVGFnTmFtZSh0YWcpLCBkYXRhLCBjaGlsZHJlbixcbiAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHRcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChpc0RlZihDdG9yID0gcmVzb2x2ZUFzc2V0KGNvbnRleHQuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkpIHtcbiAgICAgIC8vIGNvbXBvbmVudFxuICAgICAgdm5vZGUgPSBjcmVhdGVDb21wb25lbnQoQ3RvciwgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4sIHRhZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVua25vd24gb3IgdW5saXN0ZWQgbmFtZXNwYWNlZCBlbGVtZW50c1xuICAgICAgLy8gY2hlY2sgYXQgcnVudGltZSBiZWNhdXNlIGl0IG1heSBnZXQgYXNzaWduZWQgYSBuYW1lc3BhY2Ugd2hlbiBpdHNcbiAgICAgIC8vIHBhcmVudCBub3JtYWxpemVzIGNoaWxkcmVuXG4gICAgICB2bm9kZSA9IG5ldyBWTm9kZShcbiAgICAgICAgdGFnLCBkYXRhLCBjaGlsZHJlbixcbiAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHRcbiAgICAgICk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGRpcmVjdCBjb21wb25lbnQgb3B0aW9ucyAvIGNvbnN0cnVjdG9yXG4gICAgdm5vZGUgPSBjcmVhdGVDb21wb25lbnQodGFnLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbik7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUpKSB7XG4gICAgcmV0dXJuIHZub2RlXG4gIH0gZWxzZSBpZiAoaXNEZWYodm5vZGUpKSB7XG4gICAgaWYgKGlzRGVmKG5zKSkgeyBhcHBseU5TKHZub2RlLCBucyk7IH1cbiAgICBpZiAoaXNEZWYoZGF0YSkpIHsgcmVnaXN0ZXJEZWVwQmluZGluZ3MoZGF0YSk7IH1cbiAgICByZXR1cm4gdm5vZGVcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpXG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlOUyAodm5vZGUsIG5zLCBmb3JjZSkge1xuICB2bm9kZS5ucyA9IG5zO1xuICBpZiAodm5vZGUudGFnID09PSAnZm9yZWlnbk9iamVjdCcpIHtcbiAgICAvLyB1c2UgZGVmYXVsdCBuYW1lc3BhY2UgaW5zaWRlIGZvcmVpZ25PYmplY3RcbiAgICBucyA9IHVuZGVmaW5lZDtcbiAgICBmb3JjZSA9IHRydWU7XG4gIH1cbiAgaWYgKGlzRGVmKHZub2RlLmNoaWxkcmVuKSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdm5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSB2bm9kZS5jaGlsZHJlbltpXTtcbiAgICAgIGlmIChpc0RlZihjaGlsZC50YWcpICYmIChcbiAgICAgICAgaXNVbmRlZihjaGlsZC5ucykgfHwgKGlzVHJ1ZShmb3JjZSkgJiYgY2hpbGQudGFnICE9PSAnc3ZnJykpKSB7XG4gICAgICAgIGFwcGx5TlMoY2hpbGQsIG5zLCBmb3JjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIHJlZiAjNTMxOFxuLy8gbmVjZXNzYXJ5IHRvIGVuc3VyZSBwYXJlbnQgcmUtcmVuZGVyIHdoZW4gZGVlcCBiaW5kaW5ncyBsaWtlIDpzdHlsZSBhbmRcbi8vIDpjbGFzcyBhcmUgdXNlZCBvbiBzbG90IG5vZGVzXG5mdW5jdGlvbiByZWdpc3RlckRlZXBCaW5kaW5ncyAoZGF0YSkge1xuICBpZiAoaXNPYmplY3QoZGF0YS5zdHlsZSkpIHtcbiAgICB0cmF2ZXJzZShkYXRhLnN0eWxlKTtcbiAgfVxuICBpZiAoaXNPYmplY3QoZGF0YS5jbGFzcykpIHtcbiAgICB0cmF2ZXJzZShkYXRhLmNsYXNzKTtcbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdFJlbmRlciAodm0pIHtcbiAgdm0uX3Zub2RlID0gbnVsbDsgLy8gdGhlIHJvb3Qgb2YgdGhlIGNoaWxkIHRyZWVcbiAgdm0uX3N0YXRpY1RyZWVzID0gbnVsbDsgLy8gdi1vbmNlIGNhY2hlZCB0cmVlc1xuICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zO1xuICB2YXIgcGFyZW50Vm5vZGUgPSB2bS4kdm5vZGUgPSBvcHRpb25zLl9wYXJlbnRWbm9kZTsgLy8gdGhlIHBsYWNlaG9sZGVyIG5vZGUgaW4gcGFyZW50IHRyZWVcbiAgdmFyIHJlbmRlckNvbnRleHQgPSBwYXJlbnRWbm9kZSAmJiBwYXJlbnRWbm9kZS5jb250ZXh0O1xuICB2bS4kc2xvdHMgPSByZXNvbHZlU2xvdHMob3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW4sIHJlbmRlckNvbnRleHQpO1xuICB2bS4kc2NvcGVkU2xvdHMgPSBlbXB0eU9iamVjdDtcbiAgLy8gYmluZCB0aGUgY3JlYXRlRWxlbWVudCBmbiB0byB0aGlzIGluc3RhbmNlXG4gIC8vIHNvIHRoYXQgd2UgZ2V0IHByb3BlciByZW5kZXIgY29udGV4dCBpbnNpZGUgaXQuXG4gIC8vIGFyZ3Mgb3JkZXI6IHRhZywgZGF0YSwgY2hpbGRyZW4sIG5vcm1hbGl6YXRpb25UeXBlLCBhbHdheXNOb3JtYWxpemVcbiAgLy8gaW50ZXJuYWwgdmVyc2lvbiBpcyB1c2VkIGJ5IHJlbmRlciBmdW5jdGlvbnMgY29tcGlsZWQgZnJvbSB0ZW1wbGF0ZXNcbiAgdm0uX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudCh2bSwgYSwgYiwgYywgZCwgZmFsc2UpOyB9O1xuICAvLyBub3JtYWxpemF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIGZvciB0aGUgcHVibGljIHZlcnNpb24sIHVzZWQgaW5cbiAgLy8gdXNlci13cml0dGVuIHJlbmRlciBmdW5jdGlvbnMuXG4gIHZtLiRjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodm0sIGEsIGIsIGMsIGQsIHRydWUpOyB9O1xuXG4gIC8vICRhdHRycyAmICRsaXN0ZW5lcnMgYXJlIGV4cG9zZWQgZm9yIGVhc2llciBIT0MgY3JlYXRpb24uXG4gIC8vIHRoZXkgbmVlZCB0byBiZSByZWFjdGl2ZSBzbyB0aGF0IEhPQ3MgdXNpbmcgdGhlbSBhcmUgYWx3YXlzIHVwZGF0ZWRcbiAgdmFyIHBhcmVudERhdGEgPSBwYXJlbnRWbm9kZSAmJiBwYXJlbnRWbm9kZS5kYXRhO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIHtcbiAgICBkZWZpbmVSZWFjdGl2ZSh2bSwgJyRhdHRycycsIHBhcmVudERhdGEgJiYgcGFyZW50RGF0YS5hdHRycyB8fCBlbXB0eU9iamVjdCwgZnVuY3Rpb24gKCkge1xuICAgICAgIWlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCAmJiB3YXJuKFwiJGF0dHJzIGlzIHJlYWRvbmx5LlwiLCB2bSk7XG4gICAgfSwgdHJ1ZSk7XG4gICAgZGVmaW5lUmVhY3RpdmUodm0sICckbGlzdGVuZXJzJywgb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oXCIkbGlzdGVuZXJzIGlzIHJlYWRvbmx5LlwiLCB2bSk7XG4gICAgfSwgdHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyTWl4aW4gKFZ1ZSkge1xuICAvLyBpbnN0YWxsIHJ1bnRpbWUgY29udmVuaWVuY2UgaGVscGVyc1xuICBpbnN0YWxsUmVuZGVySGVscGVycyhWdWUucHJvdG90eXBlKTtcblxuICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiBuZXh0VGljayhmbiwgdGhpcylcbiAgfTtcblxuICBWdWUucHJvdG90eXBlLl9yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2YXIgcmVmID0gdm0uJG9wdGlvbnM7XG4gICAgdmFyIHJlbmRlciA9IHJlZi5yZW5kZXI7XG4gICAgdmFyIF9wYXJlbnRWbm9kZSA9IHJlZi5fcGFyZW50Vm5vZGU7XG5cbiAgICAvLyByZXNldCBfcmVuZGVyZWQgZmxhZyBvbiBzbG90cyBmb3IgZHVwbGljYXRlIHNsb3QgY2hlY2tcbiAgICB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdm0uJHNsb3RzKSB7XG4gICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuICAgICAgICB2bS4kc2xvdHNba2V5XS5fcmVuZGVyZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoX3BhcmVudFZub2RlKSB7XG4gICAgICB2bS4kc2NvcGVkU2xvdHMgPSBfcGFyZW50Vm5vZGUuZGF0YS5zY29wZWRTbG90cyB8fCBlbXB0eU9iamVjdDtcbiAgICB9XG5cbiAgICAvLyBzZXQgcGFyZW50IHZub2RlLiB0aGlzIGFsbG93cyByZW5kZXIgZnVuY3Rpb25zIHRvIGhhdmUgYWNjZXNzXG4gICAgLy8gdG8gdGhlIGRhdGEgb24gdGhlIHBsYWNlaG9sZGVyIG5vZGUuXG4gICAgdm0uJHZub2RlID0gX3BhcmVudFZub2RlO1xuICAgIC8vIHJlbmRlciBzZWxmXG4gICAgdmFyIHZub2RlO1xuICAgIHRyeSB7XG4gICAgICB2bm9kZSA9IHJlbmRlci5jYWxsKHZtLl9yZW5kZXJQcm94eSwgdm0uJGNyZWF0ZUVsZW1lbnQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCBcInJlbmRlclwiKTtcbiAgICAgIC8vIHJldHVybiBlcnJvciByZW5kZXIgcmVzdWx0LFxuICAgICAgLy8gb3IgcHJldmlvdXMgdm5vZGUgdG8gcHJldmVudCByZW5kZXIgZXJyb3IgY2F1c2luZyBibGFuayBjb21wb25lbnRcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICB7XG4gICAgICAgIGlmICh2bS4kb3B0aW9ucy5yZW5kZXJFcnJvcikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2bm9kZSA9IHZtLiRvcHRpb25zLnJlbmRlckVycm9yLmNhbGwodm0uX3JlbmRlclByb3h5LCB2bS4kY3JlYXRlRWxlbWVudCwgZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIFwicmVuZGVyRXJyb3JcIik7XG4gICAgICAgICAgICB2bm9kZSA9IHZtLl92bm9kZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm5vZGUgPSB2bS5fdm5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcmV0dXJuIGVtcHR5IHZub2RlIGluIGNhc2UgdGhlIHJlbmRlciBmdW5jdGlvbiBlcnJvcmVkIG91dFxuICAgIGlmICghKHZub2RlIGluc3RhbmNlb2YgVk5vZGUpKSB7XG4gICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgQXJyYXkuaXNBcnJheSh2bm9kZSkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICAnTXVsdGlwbGUgcm9vdCBub2RlcyByZXR1cm5lZCBmcm9tIHJlbmRlciBmdW5jdGlvbi4gUmVuZGVyIGZ1bmN0aW9uICcgK1xuICAgICAgICAgICdzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHJvb3Qgbm9kZS4nLFxuICAgICAgICAgIHZtXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB2bm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTtcbiAgICB9XG4gICAgLy8gc2V0IHBhcmVudFxuICAgIHZub2RlLnBhcmVudCA9IF9wYXJlbnRWbm9kZTtcbiAgICByZXR1cm4gdm5vZGVcbiAgfTtcbn1cblxuLyogICovXG5cbnZhciB1aWQkMyA9IDA7XG5cbmZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG4gIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgLy8gYSB1aWRcbiAgICB2bS5fdWlkID0gdWlkJDMrKztcblxuICAgIHZhciBzdGFydFRhZywgZW5kVGFnO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuICAgICAgc3RhcnRUYWcgPSBcInZ1ZS1wZXJmLXN0YXJ0OlwiICsgKHZtLl91aWQpO1xuICAgICAgZW5kVGFnID0gXCJ2dWUtcGVyZi1lbmQ6XCIgKyAodm0uX3VpZCk7XG4gICAgICBtYXJrKHN0YXJ0VGFnKTtcbiAgICB9XG5cbiAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxuICAgIHZtLl9pc1Z1ZSA9IHRydWU7XG4gICAgLy8gbWVyZ2Ugb3B0aW9uc1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuX2lzQ29tcG9uZW50KSB7XG4gICAgICAvLyBvcHRpbWl6ZSBpbnRlcm5hbCBjb21wb25lbnQgaW5zdGFudGlhdGlvblxuICAgICAgLy8gc2luY2UgZHluYW1pYyBvcHRpb25zIG1lcmdpbmcgaXMgcHJldHR5IHNsb3csIGFuZCBub25lIG9mIHRoZVxuICAgICAgLy8gaW50ZXJuYWwgY29tcG9uZW50IG9wdGlvbnMgbmVlZHMgc3BlY2lhbCB0cmVhdG1lbnQuXG4gICAgICBpbml0SW50ZXJuYWxDb21wb25lbnQodm0sIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2bS4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhcbiAgICAgICAgcmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyh2bS5jb25zdHJ1Y3RvciksXG4gICAgICAgIG9wdGlvbnMgfHwge30sXG4gICAgICAgIHZtXG4gICAgICApO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIHtcbiAgICAgIGluaXRQcm94eSh2bSk7XG4gICAgfVxuICAgIC8vIGV4cG9zZSByZWFsIHNlbGZcbiAgICB2bS5fc2VsZiA9IHZtO1xuICAgIGluaXRMaWZlY3ljbGUodm0pO1xuICAgIGluaXRFdmVudHModm0pO1xuICAgIGluaXRSZW5kZXIodm0pO1xuICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlQ3JlYXRlJyk7XG4gICAgaW5pdEluamVjdGlvbnModm0pOyAvLyByZXNvbHZlIGluamVjdGlvbnMgYmVmb3JlIGRhdGEvcHJvcHNcbiAgICBpbml0U3RhdGUodm0pO1xuICAgIGluaXRQcm92aWRlKHZtKTsgLy8gcmVzb2x2ZSBwcm92aWRlIGFmdGVyIGRhdGEvcHJvcHNcbiAgICBjYWxsSG9vayh2bSwgJ2NyZWF0ZWQnKTtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykge1xuICAgICAgdm0uX25hbWUgPSBmb3JtYXRDb21wb25lbnROYW1lKHZtLCBmYWxzZSk7XG4gICAgICBtYXJrKGVuZFRhZyk7XG4gICAgICBtZWFzdXJlKChcInZ1ZSBcIiArICh2bS5fbmFtZSkgKyBcIiBpbml0XCIpLCBzdGFydFRhZywgZW5kVGFnKTtcbiAgICB9XG5cbiAgICBpZiAodm0uJG9wdGlvbnMuZWwpIHtcbiAgICAgIHZtLiRtb3VudCh2bS4kb3B0aW9ucy5lbCk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBpbml0SW50ZXJuYWxDb21wb25lbnQgKHZtLCBvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gdm0uJG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKHZtLmNvbnN0cnVjdG9yLm9wdGlvbnMpO1xuICAvLyBkb2luZyB0aGlzIGJlY2F1c2UgaXQncyBmYXN0ZXIgdGhhbiBkeW5hbWljIGVudW1lcmF0aW9uLlxuICB2YXIgcGFyZW50Vm5vZGUgPSBvcHRpb25zLl9wYXJlbnRWbm9kZTtcbiAgb3B0cy5wYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgb3B0cy5fcGFyZW50Vm5vZGUgPSBwYXJlbnRWbm9kZTtcbiAgb3B0cy5fcGFyZW50RWxtID0gb3B0aW9ucy5fcGFyZW50RWxtO1xuICBvcHRzLl9yZWZFbG0gPSBvcHRpb25zLl9yZWZFbG07XG5cbiAgdmFyIHZub2RlQ29tcG9uZW50T3B0aW9ucyA9IHBhcmVudFZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG4gIG9wdHMucHJvcHNEYXRhID0gdm5vZGVDb21wb25lbnRPcHRpb25zLnByb3BzRGF0YTtcbiAgb3B0cy5fcGFyZW50TGlzdGVuZXJzID0gdm5vZGVDb21wb25lbnRPcHRpb25zLmxpc3RlbmVycztcbiAgb3B0cy5fcmVuZGVyQ2hpbGRyZW4gPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMuY2hpbGRyZW47XG4gIG9wdHMuX2NvbXBvbmVudFRhZyA9IHZub2RlQ29tcG9uZW50T3B0aW9ucy50YWc7XG5cbiAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgb3B0cy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICBvcHRzLnN0YXRpY1JlbmRlckZucyA9IG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMgKEN0b3IpIHtcbiAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7XG4gIGlmIChDdG9yLnN1cGVyKSB7XG4gICAgdmFyIHN1cGVyT3B0aW9ucyA9IHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvci5zdXBlcik7XG4gICAgdmFyIGNhY2hlZFN1cGVyT3B0aW9ucyA9IEN0b3Iuc3VwZXJPcHRpb25zO1xuICAgIGlmIChzdXBlck9wdGlvbnMgIT09IGNhY2hlZFN1cGVyT3B0aW9ucykge1xuICAgICAgLy8gc3VwZXIgb3B0aW9uIGNoYW5nZWQsXG4gICAgICAvLyBuZWVkIHRvIHJlc29sdmUgbmV3IG9wdGlvbnMuXG4gICAgICBDdG9yLnN1cGVyT3B0aW9ucyA9IHN1cGVyT3B0aW9ucztcbiAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgbGF0ZS1tb2RpZmllZC9hdHRhY2hlZCBvcHRpb25zICgjNDk3NilcbiAgICAgIHZhciBtb2RpZmllZE9wdGlvbnMgPSByZXNvbHZlTW9kaWZpZWRPcHRpb25zKEN0b3IpO1xuICAgICAgLy8gdXBkYXRlIGJhc2UgZXh0ZW5kIG9wdGlvbnNcbiAgICAgIGlmIChtb2RpZmllZE9wdGlvbnMpIHtcbiAgICAgICAgZXh0ZW5kKEN0b3IuZXh0ZW5kT3B0aW9ucywgbW9kaWZpZWRPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoc3VwZXJPcHRpb25zLCBDdG9yLmV4dGVuZE9wdGlvbnMpO1xuICAgICAgaWYgKG9wdGlvbnMubmFtZSkge1xuICAgICAgICBvcHRpb25zLmNvbXBvbmVudHNbb3B0aW9ucy5uYW1lXSA9IEN0b3I7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvcHRpb25zXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVNb2RpZmllZE9wdGlvbnMgKEN0b3IpIHtcbiAgdmFyIG1vZGlmaWVkO1xuICB2YXIgbGF0ZXN0ID0gQ3Rvci5vcHRpb25zO1xuICB2YXIgZXh0ZW5kZWQgPSBDdG9yLmV4dGVuZE9wdGlvbnM7XG4gIHZhciBzZWFsZWQgPSBDdG9yLnNlYWxlZE9wdGlvbnM7XG4gIGZvciAodmFyIGtleSBpbiBsYXRlc3QpIHtcbiAgICBpZiAobGF0ZXN0W2tleV0gIT09IHNlYWxlZFtrZXldKSB7XG4gICAgICBpZiAoIW1vZGlmaWVkKSB7IG1vZGlmaWVkID0ge307IH1cbiAgICAgIG1vZGlmaWVkW2tleV0gPSBkZWR1cGUobGF0ZXN0W2tleV0sIGV4dGVuZGVkW2tleV0sIHNlYWxlZFtrZXldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1vZGlmaWVkXG59XG5cbmZ1bmN0aW9uIGRlZHVwZSAobGF0ZXN0LCBleHRlbmRlZCwgc2VhbGVkKSB7XG4gIC8vIGNvbXBhcmUgbGF0ZXN0IGFuZCBzZWFsZWQgdG8gZW5zdXJlIGxpZmVjeWNsZSBob29rcyB3b24ndCBiZSBkdXBsaWNhdGVkXG4gIC8vIGJldHdlZW4gbWVyZ2VzXG4gIGlmIChBcnJheS5pc0FycmF5KGxhdGVzdCkpIHtcbiAgICB2YXIgcmVzID0gW107XG4gICAgc2VhbGVkID0gQXJyYXkuaXNBcnJheShzZWFsZWQpID8gc2VhbGVkIDogW3NlYWxlZF07XG4gICAgZXh0ZW5kZWQgPSBBcnJheS5pc0FycmF5KGV4dGVuZGVkKSA/IGV4dGVuZGVkIDogW2V4dGVuZGVkXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhdGVzdC5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gcHVzaCBvcmlnaW5hbCBvcHRpb25zIGFuZCBub3Qgc2VhbGVkIG9wdGlvbnMgdG8gZXhjbHVkZSBkdXBsaWNhdGVkIG9wdGlvbnNcbiAgICAgIGlmIChleHRlbmRlZC5pbmRleE9mKGxhdGVzdFtpXSkgPj0gMCB8fCBzZWFsZWQuaW5kZXhPZihsYXRlc3RbaV0pIDwgMCkge1xuICAgICAgICByZXMucHVzaChsYXRlc3RbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxhdGVzdFxuICB9XG59XG5cbmZ1bmN0aW9uIFZ1ZSAob3B0aW9ucykge1xuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAhKHRoaXMgaW5zdGFuY2VvZiBWdWUpXG4gICkge1xuICAgIHdhcm4oJ1Z1ZSBpcyBhIGNvbnN0cnVjdG9yIGFuZCBzaG91bGQgYmUgY2FsbGVkIHdpdGggdGhlIGBuZXdgIGtleXdvcmQnKTtcbiAgfVxuICB0aGlzLl9pbml0KG9wdGlvbnMpO1xufVxuXG5pbml0TWl4aW4oVnVlKTtcbnN0YXRlTWl4aW4oVnVlKTtcbmV2ZW50c01peGluKFZ1ZSk7XG5saWZlY3ljbGVNaXhpbihWdWUpO1xucmVuZGVyTWl4aW4oVnVlKTtcblxuLyogICovXG5cbmZ1bmN0aW9uIGluaXRVc2UgKFZ1ZSkge1xuICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAgIHZhciBpbnN0YWxsZWRQbHVnaW5zID0gKHRoaXMuX2luc3RhbGxlZFBsdWdpbnMgfHwgKHRoaXMuX2luc3RhbGxlZFBsdWdpbnMgPSBbXSkpO1xuICAgIGlmIChpbnN0YWxsZWRQbHVnaW5zLmluZGV4T2YocGx1Z2luKSA+IC0xKSB7XG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICBpZiAodHlwZW9mIHBsdWdpbi5pbnN0YWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHBsdWdpbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnN0YWxsZWRQbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICByZXR1cm4gdGhpc1xuICB9O1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaW5pdE1peGluJDEgKFZ1ZSkge1xuICBWdWUubWl4aW4gPSBmdW5jdGlvbiAobWl4aW4pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5vcHRpb25zLCBtaXhpbik7XG4gICAgcmV0dXJuIHRoaXNcbiAgfTtcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGluaXRFeHRlbmQgKFZ1ZSkge1xuICAvKipcbiAgICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG4gICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcbiAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG4gICAqL1xuICBWdWUuY2lkID0gMDtcbiAgdmFyIGNpZCA9IDE7XG5cbiAgLyoqXG4gICAqIENsYXNzIGluaGVyaXRhbmNlXG4gICAqL1xuICBWdWUuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcbiAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgU3VwZXIgPSB0aGlzO1xuICAgIHZhciBTdXBlcklkID0gU3VwZXIuY2lkO1xuICAgIHZhciBjYWNoZWRDdG9ycyA9IGV4dGVuZE9wdGlvbnMuX0N0b3IgfHwgKGV4dGVuZE9wdGlvbnMuX0N0b3IgPSB7fSk7XG4gICAgaWYgKGNhY2hlZEN0b3JzW1N1cGVySWRdKSB7XG4gICAgICByZXR1cm4gY2FjaGVkQ3RvcnNbU3VwZXJJZF1cbiAgICB9XG5cbiAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7XG4gICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUpIHtcbiAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShuYW1lKTtcbiAgICB9XG5cbiAgICB2YXIgU3ViID0gZnVuY3Rpb24gVnVlQ29tcG9uZW50IChvcHRpb25zKSB7XG4gICAgICB0aGlzLl9pbml0KG9wdGlvbnMpO1xuICAgIH07XG4gICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuICAgIFN1Yi5jaWQgPSBjaWQrKztcbiAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhcbiAgICAgIFN1cGVyLm9wdGlvbnMsXG4gICAgICBleHRlbmRPcHRpb25zXG4gICAgKTtcbiAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcblxuICAgIC8vIEZvciBwcm9wcyBhbmQgY29tcHV0ZWQgcHJvcGVydGllcywgd2UgZGVmaW5lIHRoZSBwcm94eSBnZXR0ZXJzIG9uXG4gICAgLy8gdGhlIFZ1ZSBpbnN0YW5jZXMgYXQgZXh0ZW5zaW9uIHRpbWUsIG9uIHRoZSBleHRlbmRlZCBwcm90b3R5cGUuIFRoaXNcbiAgICAvLyBhdm9pZHMgT2JqZWN0LmRlZmluZVByb3BlcnR5IGNhbGxzIGZvciBlYWNoIGluc3RhbmNlIGNyZWF0ZWQuXG4gICAgaWYgKFN1Yi5vcHRpb25zLnByb3BzKSB7XG4gICAgICBpbml0UHJvcHMkMShTdWIpO1xuICAgIH1cbiAgICBpZiAoU3ViLm9wdGlvbnMuY29tcHV0ZWQpIHtcbiAgICAgIGluaXRDb21wdXRlZCQxKFN1Yik7XG4gICAgfVxuXG4gICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb24vbWl4aW4vcGx1Z2luIHVzYWdlXG4gICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcbiAgICBTdWIubWl4aW4gPSBTdXBlci5taXhpbjtcbiAgICBTdWIudXNlID0gU3VwZXIudXNlO1xuXG4gICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cbiAgICBBU1NFVF9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcbiAgICB9KTtcbiAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7XG4gICAgfVxuXG4gICAgLy8ga2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgc3VwZXIgb3B0aW9ucyBhdCBleHRlbnNpb24gdGltZS5cbiAgICAvLyBsYXRlciBhdCBpbnN0YW50aWF0aW9uIHdlIGNhbiBjaGVjayBpZiBTdXBlcidzIG9wdGlvbnMgaGF2ZVxuICAgIC8vIGJlZW4gdXBkYXRlZC5cbiAgICBTdWIuc3VwZXJPcHRpb25zID0gU3VwZXIub3B0aW9ucztcbiAgICBTdWIuZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnM7XG4gICAgU3ViLnNlYWxlZE9wdGlvbnMgPSBleHRlbmQoe30sIFN1Yi5vcHRpb25zKTtcblxuICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG4gICAgY2FjaGVkQ3RvcnNbU3VwZXJJZF0gPSBTdWI7XG4gICAgcmV0dXJuIFN1YlxuICB9O1xufVxuXG5mdW5jdGlvbiBpbml0UHJvcHMkMSAoQ29tcCkge1xuICB2YXIgcHJvcHMgPSBDb21wLm9wdGlvbnMucHJvcHM7XG4gIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuICAgIHByb3h5KENvbXAucHJvdG90eXBlLCBcIl9wcm9wc1wiLCBrZXkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRDb21wdXRlZCQxIChDb21wKSB7XG4gIHZhciBjb21wdXRlZCA9IENvbXAub3B0aW9ucy5jb21wdXRlZDtcbiAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG4gICAgZGVmaW5lQ29tcHV0ZWQoQ29tcC5wcm90b3R5cGUsIGtleSwgY29tcHV0ZWRba2V5XSk7XG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGluaXRBc3NldFJlZ2lzdGVycyAoVnVlKSB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMuXG4gICAqL1xuICBBU1NFVF9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKFxuICAgICAgaWQsXG4gICAgICBkZWZpbml0aW9uXG4gICAgKSB7XG4gICAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgdHlwZSA9PT0gJ2NvbXBvbmVudCcpIHtcbiAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG4gICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gZGVmaW5pdGlvbi5uYW1lIHx8IGlkO1xuICAgICAgICAgIGRlZmluaXRpb24gPSB0aGlzLm9wdGlvbnMuX2Jhc2UuZXh0ZW5kKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnZGlyZWN0aXZlJyAmJiB0eXBlb2YgZGVmaW5pdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRlZmluaXRpb24gPSB7IGJpbmQ6IGRlZmluaXRpb24sIHVwZGF0ZTogZGVmaW5pdGlvbiB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvblxuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZSAob3B0cykge1xuICByZXR1cm4gb3B0cyAmJiAob3B0cy5DdG9yLm9wdGlvbnMubmFtZSB8fCBvcHRzLnRhZylcbn1cblxuZnVuY3Rpb24gbWF0Y2hlcyAocGF0dGVybiwgbmFtZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkge1xuICAgIHJldHVybiBwYXR0ZXJuLmluZGV4T2YobmFtZSkgPiAtMVxuICB9IGVsc2UgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KCcsJykuaW5kZXhPZihuYW1lKSA+IC0xXG4gIH0gZWxzZSBpZiAoaXNSZWdFeHAocGF0dGVybikpIHtcbiAgICByZXR1cm4gcGF0dGVybi50ZXN0KG5hbWUpXG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIHBydW5lQ2FjaGUgKGtlZXBBbGl2ZUluc3RhbmNlLCBmaWx0ZXIpIHtcbiAgdmFyIGNhY2hlID0ga2VlcEFsaXZlSW5zdGFuY2UuY2FjaGU7XG4gIHZhciBrZXlzID0ga2VlcEFsaXZlSW5zdGFuY2Uua2V5cztcbiAgdmFyIF92bm9kZSA9IGtlZXBBbGl2ZUluc3RhbmNlLl92bm9kZTtcbiAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7XG4gICAgdmFyIGNhY2hlZE5vZGUgPSBjYWNoZVtrZXldO1xuICAgIGlmIChjYWNoZWROb2RlKSB7XG4gICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY2FjaGVkTm9kZS5jb21wb25lbnRPcHRpb25zKTtcbiAgICAgIGlmIChuYW1lICYmICFmaWx0ZXIobmFtZSkpIHtcbiAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXksIGtleXMsIF92bm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeSAoXG4gIGNhY2hlLFxuICBrZXksXG4gIGtleXMsXG4gIGN1cnJlbnRcbikge1xuICB2YXIgY2FjaGVkJCQxID0gY2FjaGVba2V5XTtcbiAgaWYgKGNhY2hlZCQkMSAmJiAoIWN1cnJlbnQgfHwgY2FjaGVkJCQxLnRhZyAhPT0gY3VycmVudC50YWcpKSB7XG4gICAgY2FjaGVkJCQxLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7XG4gIH1cbiAgY2FjaGVba2V5XSA9IG51bGw7XG4gIHJlbW92ZShrZXlzLCBrZXkpO1xufVxuXG52YXIgcGF0dGVyblR5cGVzID0gW1N0cmluZywgUmVnRXhwLCBBcnJheV07XG5cbnZhciBLZWVwQWxpdmUgPSB7XG4gIG5hbWU6ICdrZWVwLWFsaXZlJyxcbiAgYWJzdHJhY3Q6IHRydWUsXG5cbiAgcHJvcHM6IHtcbiAgICBpbmNsdWRlOiBwYXR0ZXJuVHlwZXMsXG4gICAgZXhjbHVkZTogcGF0dGVyblR5cGVzLFxuICAgIG1heDogW1N0cmluZywgTnVtYmVyXVxuICB9LFxuXG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQgKCkge1xuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMua2V5cyA9IFtdO1xuICB9LFxuXG4gIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkICgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIGZvciAodmFyIGtleSBpbiB0aGlzJDEuY2FjaGUpIHtcbiAgICAgIHBydW5lQ2FjaGVFbnRyeSh0aGlzJDEuY2FjaGUsIGtleSwgdGhpcyQxLmtleXMpO1xuICAgIH1cbiAgfSxcblxuICB3YXRjaDoge1xuICAgIGluY2x1ZGU6IGZ1bmN0aW9uIGluY2x1ZGUgKHZhbCkge1xuICAgICAgcHJ1bmVDYWNoZSh0aGlzLCBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gbWF0Y2hlcyh2YWwsIG5hbWUpOyB9KTtcbiAgICB9LFxuICAgIGV4Y2x1ZGU6IGZ1bmN0aW9uIGV4Y2x1ZGUgKHZhbCkge1xuICAgICAgcHJ1bmVDYWNoZSh0aGlzLCBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gIW1hdGNoZXModmFsLCBuYW1lKTsgfSk7XG4gICAgfVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyICgpIHtcbiAgICB2YXIgc2xvdCA9IHRoaXMuJHNsb3RzLmRlZmF1bHQ7XG4gICAgdmFyIHZub2RlID0gZ2V0Rmlyc3RDb21wb25lbnRDaGlsZChzbG90KTtcbiAgICB2YXIgY29tcG9uZW50T3B0aW9ucyA9IHZub2RlICYmIHZub2RlLmNvbXBvbmVudE9wdGlvbnM7XG4gICAgaWYgKGNvbXBvbmVudE9wdGlvbnMpIHtcbiAgICAgIC8vIGNoZWNrIHBhdHRlcm5cbiAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnRPcHRpb25zKTtcbiAgICAgIHZhciByZWYgPSB0aGlzO1xuICAgICAgdmFyIGluY2x1ZGUgPSByZWYuaW5jbHVkZTtcbiAgICAgIHZhciBleGNsdWRlID0gcmVmLmV4Y2x1ZGU7XG4gICAgICBpZiAoXG4gICAgICAgIC8vIG5vdCBpbmNsdWRlZFxuICAgICAgICAoaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpKSB8fFxuICAgICAgICAvLyBleGNsdWRlZFxuICAgICAgICAoZXhjbHVkZSAmJiBuYW1lICYmIG1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHZub2RlXG4gICAgICB9XG5cbiAgICAgIHZhciByZWYkMSA9IHRoaXM7XG4gICAgICB2YXIgY2FjaGUgPSByZWYkMS5jYWNoZTtcbiAgICAgIHZhciBrZXlzID0gcmVmJDEua2V5cztcbiAgICAgIHZhciBrZXkgPSB2bm9kZS5rZXkgPT0gbnVsbFxuICAgICAgICAvLyBzYW1lIGNvbnN0cnVjdG9yIG1heSBnZXQgcmVnaXN0ZXJlZCBhcyBkaWZmZXJlbnQgbG9jYWwgY29tcG9uZW50c1xuICAgICAgICAvLyBzbyBjaWQgYWxvbmUgaXMgbm90IGVub3VnaCAoIzMyNjkpXG4gICAgICAgID8gY29tcG9uZW50T3B0aW9ucy5DdG9yLmNpZCArIChjb21wb25lbnRPcHRpb25zLnRhZyA/IChcIjo6XCIgKyAoY29tcG9uZW50T3B0aW9ucy50YWcpKSA6ICcnKVxuICAgICAgICA6IHZub2RlLmtleTtcbiAgICAgIGlmIChjYWNoZVtrZXldKSB7XG4gICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gY2FjaGVba2V5XS5jb21wb25lbnRJbnN0YW5jZTtcbiAgICAgICAgLy8gbWFrZSBjdXJyZW50IGtleSBmcmVzaGVzdFxuICAgICAgICByZW1vdmUoa2V5cywga2V5KTtcbiAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWNoZVtrZXldID0gdm5vZGU7XG4gICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAvLyBwcnVuZSBvbGRlc3QgZW50cnlcbiAgICAgICAgaWYgKHRoaXMubWF4ICYmIGtleXMubGVuZ3RoID4gcGFyc2VJbnQodGhpcy5tYXgpKSB7XG4gICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXlzWzBdLCBrZXlzLCB0aGlzLl92bm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdm5vZGUuZGF0YS5rZWVwQWxpdmUgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGUgfHwgKHNsb3QgJiYgc2xvdFswXSlcbiAgfVxufVxuXG52YXIgYnVpbHRJbkNvbXBvbmVudHMgPSB7XG4gIEtlZXBBbGl2ZTogS2VlcEFsaXZlXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBpbml0R2xvYmFsQVBJIChWdWUpIHtcbiAgLy8gY29uZmlnXG4gIHZhciBjb25maWdEZWYgPSB7fTtcbiAgY29uZmlnRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbmZpZzsgfTtcbiAge1xuICAgIGNvbmZpZ0RlZi5zZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB3YXJuKFxuICAgICAgICAnRG8gbm90IHJlcGxhY2UgdGhlIFZ1ZS5jb25maWcgb2JqZWN0LCBzZXQgaW5kaXZpZHVhbCBmaWVsZHMgaW5zdGVhZC4nXG4gICAgICApO1xuICAgIH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ2NvbmZpZycsIGNvbmZpZ0RlZik7XG5cbiAgLy8gZXhwb3NlZCB1dGlsIG1ldGhvZHMuXG4gIC8vIE5PVEU6IHRoZXNlIGFyZSBub3QgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBwdWJsaWMgQVBJIC0gYXZvaWQgcmVseWluZyBvblxuICAvLyB0aGVtIHVubGVzcyB5b3UgYXJlIGF3YXJlIG9mIHRoZSByaXNrLlxuICBWdWUudXRpbCA9IHtcbiAgICB3YXJuOiB3YXJuLFxuICAgIGV4dGVuZDogZXh0ZW5kLFxuICAgIG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuICAgIGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZVxuICB9O1xuXG4gIFZ1ZS5zZXQgPSBzZXQ7XG4gIFZ1ZS5kZWxldGUgPSBkZWw7XG4gIFZ1ZS5uZXh0VGljayA9IG5leHRUaWNrO1xuXG4gIFZ1ZS5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIFZ1ZS5vcHRpb25zW3R5cGUgKyAncyddID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfSk7XG5cbiAgLy8gdGhpcyBpcyB1c2VkIHRvIGlkZW50aWZ5IHRoZSBcImJhc2VcIiBjb25zdHJ1Y3RvciB0byBleHRlbmQgYWxsIHBsYWluLW9iamVjdFxuICAvLyBjb21wb25lbnRzIHdpdGggaW4gV2VleCdzIG11bHRpLWluc3RhbmNlIHNjZW5hcmlvcy5cbiAgVnVlLm9wdGlvbnMuX2Jhc2UgPSBWdWU7XG5cbiAgZXh0ZW5kKFZ1ZS5vcHRpb25zLmNvbXBvbmVudHMsIGJ1aWx0SW5Db21wb25lbnRzKTtcblxuICBpbml0VXNlKFZ1ZSk7XG4gIGluaXRNaXhpbiQxKFZ1ZSk7XG4gIGluaXRFeHRlbmQoVnVlKTtcbiAgaW5pdEFzc2V0UmVnaXN0ZXJzKFZ1ZSk7XG59XG5cbmluaXRHbG9iYWxBUEkoVnVlKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckaXNTZXJ2ZXInLCB7XG4gIGdldDogaXNTZXJ2ZXJSZW5kZXJpbmdcbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRzc3JDb250ZXh0Jywge1xuICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm4gdGhpcy4kdm5vZGUgJiYgdGhpcy4kdm5vZGUuc3NyQ29udGV4dFxuICB9XG59KTtcblxuLy8gZXhwb3NlIEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0IGZvciBzc3IgcnVudGltZSBoZWxwZXIgaW5zdGFsbGF0aW9uXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLCAnRnVuY3Rpb25hbFJlbmRlckNvbnRleHQnLCB7XG4gIHZhbHVlOiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dFxufSk7XG5cblZ1ZS52ZXJzaW9uID0gJzIuNS4xNSc7XG5cbi8qICAqL1xuXG4vLyB0aGVzZSBhcmUgcmVzZXJ2ZWQgZm9yIHdlYiBiZWNhdXNlIHRoZXkgYXJlIGRpcmVjdGx5IGNvbXBpbGVkIGF3YXlcbi8vIGR1cmluZyB0ZW1wbGF0ZSBjb21waWxhdGlvblxudmFyIGlzUmVzZXJ2ZWRBdHRyID0gbWFrZU1hcCgnc3R5bGUsY2xhc3MnKTtcblxuLy8gYXR0cmlidXRlcyB0aGF0IHNob3VsZCBiZSB1c2luZyBwcm9wcyBmb3IgYmluZGluZ1xudmFyIGFjY2VwdFZhbHVlID0gbWFrZU1hcCgnaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcycpO1xudmFyIG11c3RVc2VQcm9wID0gZnVuY3Rpb24gKHRhZywgdHlwZSwgYXR0cikge1xuICByZXR1cm4gKFxuICAgIChhdHRyID09PSAndmFsdWUnICYmIGFjY2VwdFZhbHVlKHRhZykpICYmIHR5cGUgIT09ICdidXR0b24nIHx8XG4gICAgKGF0dHIgPT09ICdzZWxlY3RlZCcgJiYgdGFnID09PSAnb3B0aW9uJykgfHxcbiAgICAoYXR0ciA9PT0gJ2NoZWNrZWQnICYmIHRhZyA9PT0gJ2lucHV0JykgfHxcbiAgICAoYXR0ciA9PT0gJ211dGVkJyAmJiB0YWcgPT09ICd2aWRlbycpXG4gIClcbn07XG5cbnZhciBpc0VudW1lcmF0ZWRBdHRyID0gbWFrZU1hcCgnY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrJyk7XG5cbnZhciBpc0Jvb2xlYW5BdHRyID0gbWFrZU1hcChcbiAgJ2FsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsJyArXG4gICdkZWZhdWx0LGRlZmF1bHRjaGVja2VkLGRlZmF1bHRtdXRlZCxkZWZhdWx0c2VsZWN0ZWQsZGVmZXIsZGlzYWJsZWQsJyArXG4gICdlbmFibGVkLGZvcm1ub3ZhbGlkYXRlLGhpZGRlbixpbmRldGVybWluYXRlLGluZXJ0LGlzbWFwLGl0ZW1zY29wZSxsb29wLG11bHRpcGxlLCcgK1xuICAnbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSwnICtcbiAgJ3JlcXVpcmVkLHJldmVyc2VkLHNjb3BlZCxzZWFtbGVzcyxzZWxlY3RlZCxzb3J0YWJsZSx0cmFuc2xhdGUsJyArXG4gICd0cnVlc3BlZWQsdHlwZW11c3RtYXRjaCx2aXNpYmxlJ1xuKTtcblxudmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG5cbnZhciBpc1hsaW5rID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIG5hbWUuY2hhckF0KDUpID09PSAnOicgJiYgbmFtZS5zbGljZSgwLCA1KSA9PT0gJ3hsaW5rJ1xufTtcblxudmFyIGdldFhsaW5rUHJvcCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiBpc1hsaW5rKG5hbWUpID8gbmFtZS5zbGljZSg2LCBuYW1lLmxlbmd0aCkgOiAnJ1xufTtcblxudmFyIGlzRmFsc3lBdHRyVmFsdWUgPSBmdW5jdGlvbiAodmFsKSB7XG4gIHJldHVybiB2YWwgPT0gbnVsbCB8fCB2YWwgPT09IGZhbHNlXG59O1xuXG4vKiAgKi9cblxuZnVuY3Rpb24gZ2VuQ2xhc3NGb3JWbm9kZSAodm5vZGUpIHtcbiAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuICB2YXIgcGFyZW50Tm9kZSA9IHZub2RlO1xuICB2YXIgY2hpbGROb2RlID0gdm5vZGU7XG4gIHdoaWxlIChpc0RlZihjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UpKSB7XG4gICAgY2hpbGROb2RlID0gY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtcbiAgICBpZiAoY2hpbGROb2RlICYmIGNoaWxkTm9kZS5kYXRhKSB7XG4gICAgICBkYXRhID0gbWVyZ2VDbGFzc0RhdGEoY2hpbGROb2RlLmRhdGEsIGRhdGEpO1xuICAgIH1cbiAgfVxuICB3aGlsZSAoaXNEZWYocGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50KSkge1xuICAgIGlmIChwYXJlbnROb2RlICYmIHBhcmVudE5vZGUuZGF0YSkge1xuICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGRhdGEsIHBhcmVudE5vZGUuZGF0YSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZW5kZXJDbGFzcyhkYXRhLnN0YXRpY0NsYXNzLCBkYXRhLmNsYXNzKVxufVxuXG5mdW5jdGlvbiBtZXJnZUNsYXNzRGF0YSAoY2hpbGQsIHBhcmVudCkge1xuICByZXR1cm4ge1xuICAgIHN0YXRpY0NsYXNzOiBjb25jYXQoY2hpbGQuc3RhdGljQ2xhc3MsIHBhcmVudC5zdGF0aWNDbGFzcyksXG4gICAgY2xhc3M6IGlzRGVmKGNoaWxkLmNsYXNzKVxuICAgICAgPyBbY2hpbGQuY2xhc3MsIHBhcmVudC5jbGFzc11cbiAgICAgIDogcGFyZW50LmNsYXNzXG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2xhc3MgKFxuICBzdGF0aWNDbGFzcyxcbiAgZHluYW1pY0NsYXNzXG4pIHtcbiAgaWYgKGlzRGVmKHN0YXRpY0NsYXNzKSB8fCBpc0RlZihkeW5hbWljQ2xhc3MpKSB7XG4gICAgcmV0dXJuIGNvbmNhdChzdGF0aWNDbGFzcywgc3RyaW5naWZ5Q2xhc3MoZHluYW1pY0NsYXNzKSlcbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICByZXR1cm4gJydcbn1cblxuZnVuY3Rpb24gY29uY2F0IChhLCBiKSB7XG4gIHJldHVybiBhID8gYiA/IChhICsgJyAnICsgYikgOiBhIDogKGIgfHwgJycpXG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeUNsYXNzICh2YWx1ZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gc3RyaW5naWZ5QXJyYXkodmFsdWUpXG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiBzdHJpbmdpZnlPYmplY3QodmFsdWUpXG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICByZXR1cm4gJydcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5QXJyYXkgKHZhbHVlKSB7XG4gIHZhciByZXMgPSAnJztcbiAgdmFyIHN0cmluZ2lmaWVkO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChpc0RlZihzdHJpbmdpZmllZCA9IHN0cmluZ2lmeUNsYXNzKHZhbHVlW2ldKSkgJiYgc3RyaW5naWZpZWQgIT09ICcnKSB7XG4gICAgICBpZiAocmVzKSB7IHJlcyArPSAnICc7IH1cbiAgICAgIHJlcyArPSBzdHJpbmdpZmllZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlPYmplY3QgKHZhbHVlKSB7XG4gIHZhciByZXMgPSAnJztcbiAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlW2tleV0pIHtcbiAgICAgIGlmIChyZXMpIHsgcmVzICs9ICcgJzsgfVxuICAgICAgcmVzICs9IGtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG4vKiAgKi9cblxudmFyIG5hbWVzcGFjZU1hcCA9IHtcbiAgc3ZnOiAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFxuICBtYXRoOiAnaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCdcbn07XG5cbnZhciBpc0hUTUxUYWcgPSBtYWtlTWFwKFxuICAnaHRtbCxib2R5LGJhc2UsaGVhZCxsaW5rLG1ldGEsc3R5bGUsdGl0bGUsJyArXG4gICdhZGRyZXNzLGFydGljbGUsYXNpZGUsZm9vdGVyLGhlYWRlcixoMSxoMixoMyxoNCxoNSxoNixoZ3JvdXAsbmF2LHNlY3Rpb24sJyArXG4gICdkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCwnICtcbiAgJ2EsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLGRhdGEsZGZuLGVtLGksa2JkLG1hcmsscSxycCxydCxydGMscnVieSwnICtcbiAgJ3Msc2FtcCxzbWFsbCxzcGFuLHN0cm9uZyxzdWIsc3VwLHRpbWUsdSx2YXIsd2JyLGFyZWEsYXVkaW8sbWFwLHRyYWNrLHZpZGVvLCcgK1xuICAnZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsJyArXG4gICdjYXB0aW9uLGNvbCxjb2xncm91cCx0YWJsZSx0aGVhZCx0Ym9keSx0ZCx0aCx0ciwnICtcbiAgJ2J1dHRvbixkYXRhbGlzdCxmaWVsZHNldCxmb3JtLGlucHV0LGxhYmVsLGxlZ2VuZCxtZXRlcixvcHRncm91cCxvcHRpb24sJyArXG4gICdvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLCcgK1xuICAnZGV0YWlscyxkaWFsb2csbWVudSxtZW51aXRlbSxzdW1tYXJ5LCcgK1xuICAnY29udGVudCxlbGVtZW50LHNoYWRvdyx0ZW1wbGF0ZSxibG9ja3F1b3RlLGlmcmFtZSx0Zm9vdCdcbik7XG5cbi8vIHRoaXMgbWFwIGlzIGludGVudGlvbmFsbHkgc2VsZWN0aXZlLCBvbmx5IGNvdmVyaW5nIFNWRyBlbGVtZW50cyB0aGF0IG1heVxuLy8gY29udGFpbiBjaGlsZCBlbGVtZW50cy5cbnZhciBpc1NWRyA9IG1ha2VNYXAoXG4gICdzdmcsYW5pbWF0ZSxjaXJjbGUsY2xpcHBhdGgsY3Vyc29yLGRlZnMsZGVzYyxlbGxpcHNlLGZpbHRlcixmb250LWZhY2UsJyArXG4gICdmb3JlaWduT2JqZWN0LGcsZ2x5cGgsaW1hZ2UsbGluZSxtYXJrZXIsbWFzayxtaXNzaW5nLWdseXBoLHBhdGgscGF0dGVybiwnICtcbiAgJ3BvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXcnLFxuICB0cnVlXG4pO1xuXG52YXIgaXNQcmVUYWcgPSBmdW5jdGlvbiAodGFnKSB7IHJldHVybiB0YWcgPT09ICdwcmUnOyB9O1xuXG52YXIgaXNSZXNlcnZlZFRhZyA9IGZ1bmN0aW9uICh0YWcpIHtcbiAgcmV0dXJuIGlzSFRNTFRhZyh0YWcpIHx8IGlzU1ZHKHRhZylcbn07XG5cbmZ1bmN0aW9uIGdldFRhZ05hbWVzcGFjZSAodGFnKSB7XG4gIGlmIChpc1NWRyh0YWcpKSB7XG4gICAgcmV0dXJuICdzdmcnXG4gIH1cbiAgLy8gYmFzaWMgc3VwcG9ydCBmb3IgTWF0aE1MXG4gIC8vIG5vdGUgaXQgZG9lc24ndCBzdXBwb3J0IG90aGVyIE1hdGhNTCBlbGVtZW50cyBiZWluZyBjb21wb25lbnQgcm9vdHNcbiAgaWYgKHRhZyA9PT0gJ21hdGgnKSB7XG4gICAgcmV0dXJuICdtYXRoJ1xuICB9XG59XG5cbnZhciB1bmtub3duRWxlbWVudENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmZ1bmN0aW9uIGlzVW5rbm93bkVsZW1lbnQgKHRhZykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFpbkJyb3dzZXIpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIGlmIChpc1Jlc2VydmVkVGFnKHRhZykpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICB0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gIT0gbnVsbCkge1xuICAgIHJldHVybiB1bmtub3duRWxlbWVudENhY2hlW3RhZ11cbiAgfVxuICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG4gICAgcmV0dXJuICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gPSAoXG4gICAgICBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fFxuICAgICAgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudFxuICAgICkpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gPSAvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpKVxuICB9XG59XG5cbnZhciBpc1RleHRJbnB1dFR5cGUgPSBtYWtlTWFwKCd0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCcpO1xuXG4vKiAgKi9cblxuLyoqXG4gKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cbiAqL1xuZnVuY3Rpb24gcXVlcnkgKGVsKSB7XG4gIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG4gICAgaWYgKCFzZWxlY3RlZCkge1xuICAgICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgICAgJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBlbFxuICAgICAgKTtcbiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIH1cbiAgICByZXR1cm4gc2VsZWN0ZWRcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZWxcbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudCQxICh0YWdOYW1lLCB2bm9kZSkge1xuICB2YXIgZWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgaWYgKHRhZ05hbWUgIT09ICdzZWxlY3QnKSB7XG4gICAgcmV0dXJuIGVsbVxuICB9XG4gIC8vIGZhbHNlIG9yIG51bGwgd2lsbCByZW1vdmUgdGhlIGF0dHJpYnV0ZSBidXQgdW5kZWZpbmVkIHdpbGwgbm90XG4gIGlmICh2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEuYXR0cnMgJiYgdm5vZGUuZGF0YS5hdHRycy5tdWx0aXBsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZWxtLnNldEF0dHJpYnV0ZSgnbXVsdGlwbGUnLCAnbXVsdGlwbGUnKTtcbiAgfVxuICByZXR1cm4gZWxtXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyAobmFtZXNwYWNlLCB0YWdOYW1lKSB7XG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlTWFwW25hbWVzcGFjZV0sIHRhZ05hbWUpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHROb2RlICh0ZXh0KSB7XG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21tZW50ICh0ZXh0KSB7XG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVDb21tZW50KHRleHQpXG59XG5cbmZ1bmN0aW9uIGluc2VydEJlZm9yZSAocGFyZW50Tm9kZSwgbmV3Tm9kZSwgcmVmZXJlbmNlTm9kZSkge1xuICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlLCByZWZlcmVuY2VOb2RlKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ2hpbGQgKG5vZGUsIGNoaWxkKSB7XG4gIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xufVxuXG5mdW5jdGlvbiBhcHBlbmRDaGlsZCAobm9kZSwgY2hpbGQpIHtcbiAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7XG59XG5cbmZ1bmN0aW9uIHBhcmVudE5vZGUgKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUucGFyZW50Tm9kZVxufVxuXG5mdW5jdGlvbiBuZXh0U2libGluZyAobm9kZSkge1xuICByZXR1cm4gbm9kZS5uZXh0U2libGluZ1xufVxuXG5mdW5jdGlvbiB0YWdOYW1lIChub2RlKSB7XG4gIHJldHVybiBub2RlLnRhZ05hbWVcbn1cblxuZnVuY3Rpb24gc2V0VGV4dENvbnRlbnQgKG5vZGUsIHRleHQpIHtcbiAgbm9kZS50ZXh0Q29udGVudCA9IHRleHQ7XG59XG5cbmZ1bmN0aW9uIHNldFN0eWxlU2NvcGUgKG5vZGUsIHNjb3BlSWQpIHtcbiAgbm9kZS5zZXRBdHRyaWJ1dGUoc2NvcGVJZCwgJycpO1xufVxuXG5cbnZhciBub2RlT3BzID0gT2JqZWN0LmZyZWV6ZSh7XG5cdGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQkMSxcblx0Y3JlYXRlRWxlbWVudE5TOiBjcmVhdGVFbGVtZW50TlMsXG5cdGNyZWF0ZVRleHROb2RlOiBjcmVhdGVUZXh0Tm9kZSxcblx0Y3JlYXRlQ29tbWVudDogY3JlYXRlQ29tbWVudCxcblx0aW5zZXJ0QmVmb3JlOiBpbnNlcnRCZWZvcmUsXG5cdHJlbW92ZUNoaWxkOiByZW1vdmVDaGlsZCxcblx0YXBwZW5kQ2hpbGQ6IGFwcGVuZENoaWxkLFxuXHRwYXJlbnROb2RlOiBwYXJlbnROb2RlLFxuXHRuZXh0U2libGluZzogbmV4dFNpYmxpbmcsXG5cdHRhZ05hbWU6IHRhZ05hbWUsXG5cdHNldFRleHRDb250ZW50OiBzZXRUZXh0Q29udGVudCxcblx0c2V0U3R5bGVTY29wZTogc2V0U3R5bGVTY29wZVxufSk7XG5cbi8qICAqL1xuXG52YXIgcmVmID0ge1xuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSAoXywgdm5vZGUpIHtcbiAgICByZWdpc3RlclJlZih2bm9kZSk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgICBpZiAob2xkVm5vZGUuZGF0YS5yZWYgIT09IHZub2RlLmRhdGEucmVmKSB7XG4gICAgICByZWdpc3RlclJlZihvbGRWbm9kZSwgdHJ1ZSk7XG4gICAgICByZWdpc3RlclJlZih2bm9kZSk7XG4gICAgfVxuICB9LFxuICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95ICh2bm9kZSkge1xuICAgIHJlZ2lzdGVyUmVmKHZub2RlLCB0cnVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWdpc3RlclJlZiAodm5vZGUsIGlzUmVtb3ZhbCkge1xuICB2YXIga2V5ID0gdm5vZGUuZGF0YS5yZWY7XG4gIGlmICghaXNEZWYoa2V5KSkgeyByZXR1cm4gfVxuXG4gIHZhciB2bSA9IHZub2RlLmNvbnRleHQ7XG4gIHZhciByZWYgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSB8fCB2bm9kZS5lbG07XG4gIHZhciByZWZzID0gdm0uJHJlZnM7XG4gIGlmIChpc1JlbW92YWwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZWZzW2tleV0pKSB7XG4gICAgICByZW1vdmUocmVmc1trZXldLCByZWYpO1xuICAgIH0gZWxzZSBpZiAocmVmc1trZXldID09PSByZWYpIHtcbiAgICAgIHJlZnNba2V5XSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZub2RlLmRhdGEucmVmSW5Gb3IpIHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShyZWZzW2tleV0pKSB7XG4gICAgICAgIHJlZnNba2V5XSA9IFtyZWZdO1xuICAgICAgfSBlbHNlIGlmIChyZWZzW2tleV0uaW5kZXhPZihyZWYpIDwgMCkge1xuICAgICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICAgICAgcmVmc1trZXldLnB1c2gocmVmKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVmc1trZXldID0gcmVmO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFZpcnR1YWwgRE9NIHBhdGNoaW5nIGFsZ29yaXRobSBiYXNlZCBvbiBTbmFiYmRvbSBieVxuICogU2ltb24gRnJpaXMgVmluZHVtIChAcGFsZGVwaW5kKVxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcGFsZGVwaW5kL3NuYWJiZG9tL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqXG4gKiBtb2RpZmllZCBieSBFdmFuIFlvdSAoQHl5eDk5MDgwMylcbiAqXG4gKiBOb3QgdHlwZS1jaGVja2luZyB0aGlzIGJlY2F1c2UgdGhpcyBmaWxlIGlzIHBlcmYtY3JpdGljYWwgYW5kIHRoZSBjb3N0XG4gKiBvZiBtYWtpbmcgZmxvdyB1bmRlcnN0YW5kIGl0IGlzIG5vdCB3b3J0aCBpdC5cbiAqL1xuXG52YXIgZW1wdHlOb2RlID0gbmV3IFZOb2RlKCcnLCB7fSwgW10pO1xuXG52YXIgaG9va3MgPSBbJ2NyZWF0ZScsICdhY3RpdmF0ZScsICd1cGRhdGUnLCAncmVtb3ZlJywgJ2Rlc3Ryb3knXTtcblxuZnVuY3Rpb24gc2FtZVZub2RlIChhLCBiKSB7XG4gIHJldHVybiAoXG4gICAgYS5rZXkgPT09IGIua2V5ICYmIChcbiAgICAgIChcbiAgICAgICAgYS50YWcgPT09IGIudGFnICYmXG4gICAgICAgIGEuaXNDb21tZW50ID09PSBiLmlzQ29tbWVudCAmJlxuICAgICAgICBpc0RlZihhLmRhdGEpID09PSBpc0RlZihiLmRhdGEpICYmXG4gICAgICAgIHNhbWVJbnB1dFR5cGUoYSwgYilcbiAgICAgICkgfHwgKFxuICAgICAgICBpc1RydWUoYS5pc0FzeW5jUGxhY2Vob2xkZXIpICYmXG4gICAgICAgIGEuYXN5bmNGYWN0b3J5ID09PSBiLmFzeW5jRmFjdG9yeSAmJlxuICAgICAgICBpc1VuZGVmKGIuYXN5bmNGYWN0b3J5LmVycm9yKVxuICAgICAgKVxuICAgIClcbiAgKVxufVxuXG5mdW5jdGlvbiBzYW1lSW5wdXRUeXBlIChhLCBiKSB7XG4gIGlmIChhLnRhZyAhPT0gJ2lucHV0JykgeyByZXR1cm4gdHJ1ZSB9XG4gIHZhciBpO1xuICB2YXIgdHlwZUEgPSBpc0RlZihpID0gYS5kYXRhKSAmJiBpc0RlZihpID0gaS5hdHRycykgJiYgaS50eXBlO1xuICB2YXIgdHlwZUIgPSBpc0RlZihpID0gYi5kYXRhKSAmJiBpc0RlZihpID0gaS5hdHRycykgJiYgaS50eXBlO1xuICByZXR1cm4gdHlwZUEgPT09IHR5cGVCIHx8IGlzVGV4dElucHV0VHlwZSh0eXBlQSkgJiYgaXNUZXh0SW5wdXRUeXBlKHR5cGVCKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVLZXlUb09sZElkeCAoY2hpbGRyZW4sIGJlZ2luSWR4LCBlbmRJZHgpIHtcbiAgdmFyIGksIGtleTtcbiAgdmFyIG1hcCA9IHt9O1xuICBmb3IgKGkgPSBiZWdpbklkeDsgaSA8PSBlbmRJZHg7ICsraSkge1xuICAgIGtleSA9IGNoaWxkcmVuW2ldLmtleTtcbiAgICBpZiAoaXNEZWYoa2V5KSkgeyBtYXBba2V5XSA9IGk7IH1cbiAgfVxuICByZXR1cm4gbWFwXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBhdGNoRnVuY3Rpb24gKGJhY2tlbmQpIHtcbiAgdmFyIGksIGo7XG4gIHZhciBjYnMgPSB7fTtcblxuICB2YXIgbW9kdWxlcyA9IGJhY2tlbmQubW9kdWxlcztcbiAgdmFyIG5vZGVPcHMgPSBiYWNrZW5kLm5vZGVPcHM7XG5cbiAgZm9yIChpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgKytpKSB7XG4gICAgY2JzW2hvb2tzW2ldXSA9IFtdO1xuICAgIGZvciAoaiA9IDA7IGogPCBtb2R1bGVzLmxlbmd0aDsgKytqKSB7XG4gICAgICBpZiAoaXNEZWYobW9kdWxlc1tqXVtob29rc1tpXV0pKSB7XG4gICAgICAgIGNic1tob29rc1tpXV0ucHVzaChtb2R1bGVzW2pdW2hvb2tzW2ldXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZW1wdHlOb2RlQXQgKGVsbSkge1xuICAgIHJldHVybiBuZXcgVk5vZGUobm9kZU9wcy50YWdOYW1lKGVsbSkudG9Mb3dlckNhc2UoKSwge30sIFtdLCB1bmRlZmluZWQsIGVsbSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVJtQ2IgKGNoaWxkRWxtLCBsaXN0ZW5lcnMpIHtcbiAgICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgICAgaWYgKC0tcmVtb3ZlLmxpc3RlbmVycyA9PT0gMCkge1xuICAgICAgICByZW1vdmVOb2RlKGNoaWxkRWxtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlLmxpc3RlbmVycyA9IGxpc3RlbmVycztcbiAgICByZXR1cm4gcmVtb3ZlXG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVOb2RlIChlbCkge1xuICAgIHZhciBwYXJlbnQgPSBub2RlT3BzLnBhcmVudE5vZGUoZWwpO1xuICAgIC8vIGVsZW1lbnQgbWF5IGhhdmUgYWxyZWFkeSBiZWVuIHJlbW92ZWQgZHVlIHRvIHYtaHRtbCAvIHYtdGV4dFxuICAgIGlmIChpc0RlZihwYXJlbnQpKSB7XG4gICAgICBub2RlT3BzLnJlbW92ZUNoaWxkKHBhcmVudCwgZWwpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVW5rbm93bkVsZW1lbnQkJDEgKHZub2RlLCBpblZQcmUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgIWluVlByZSAmJlxuICAgICAgIXZub2RlLm5zICYmXG4gICAgICAhKFxuICAgICAgICBjb25maWcuaWdub3JlZEVsZW1lbnRzLmxlbmd0aCAmJlxuICAgICAgICBjb25maWcuaWdub3JlZEVsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGlnbm9yZSkge1xuICAgICAgICAgIHJldHVybiBpc1JlZ0V4cChpZ25vcmUpXG4gICAgICAgICAgICA/IGlnbm9yZS50ZXN0KHZub2RlLnRhZylcbiAgICAgICAgICAgIDogaWdub3JlID09PSB2bm9kZS50YWdcbiAgICAgICAgfSlcbiAgICAgICkgJiZcbiAgICAgIGNvbmZpZy5pc1Vua25vd25FbGVtZW50KHZub2RlLnRhZylcbiAgICApXG4gIH1cblxuICB2YXIgY3JlYXRpbmdFbG1JblZQcmUgPSAwO1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUVsbSAoXG4gICAgdm5vZGUsXG4gICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLFxuICAgIHBhcmVudEVsbSxcbiAgICByZWZFbG0sXG4gICAgbmVzdGVkLFxuICAgIG93bmVyQXJyYXksXG4gICAgaW5kZXhcbiAgKSB7XG4gICAgaWYgKGlzRGVmKHZub2RlLmVsbSkgJiYgaXNEZWYob3duZXJBcnJheSkpIHtcbiAgICAgIC8vIFRoaXMgdm5vZGUgd2FzIHVzZWQgaW4gYSBwcmV2aW91cyByZW5kZXIhXG4gICAgICAvLyBub3cgaXQncyB1c2VkIGFzIGEgbmV3IG5vZGUsIG92ZXJ3cml0aW5nIGl0cyBlbG0gd291bGQgY2F1c2VcbiAgICAgIC8vIHBvdGVudGlhbCBwYXRjaCBlcnJvcnMgZG93biB0aGUgcm9hZCB3aGVuIGl0J3MgdXNlZCBhcyBhbiBpbnNlcnRpb25cbiAgICAgIC8vIHJlZmVyZW5jZSBub2RlLiBJbnN0ZWFkLCB3ZSBjbG9uZSB0aGUgbm9kZSBvbi1kZW1hbmQgYmVmb3JlIGNyZWF0aW5nXG4gICAgICAvLyBhc3NvY2lhdGVkIERPTSBlbGVtZW50IGZvciBpdC5cbiAgICAgIHZub2RlID0gb3duZXJBcnJheVtpbmRleF0gPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgICB9XG5cbiAgICB2bm9kZS5pc1Jvb3RJbnNlcnQgPSAhbmVzdGVkOyAvLyBmb3IgdHJhbnNpdGlvbiBlbnRlciBjaGVja1xuICAgIGlmIChjcmVhdGVDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG4gICAgdmFyIGNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG4gICAgdmFyIHRhZyA9IHZub2RlLnRhZztcbiAgICBpZiAoaXNEZWYodGFnKSkge1xuICAgICAge1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnByZSkge1xuICAgICAgICAgIGNyZWF0aW5nRWxtSW5WUHJlKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVW5rbm93bkVsZW1lbnQkJDEodm5vZGUsIGNyZWF0aW5nRWxtSW5WUHJlKSkge1xuICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICAnVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArXG4gICAgICAgICAgICAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArXG4gICAgICAgICAgICAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nLFxuICAgICAgICAgICAgdm5vZGUuY29udGV4dFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdm5vZGUuZWxtID0gdm5vZGUubnNcbiAgICAgICAgPyBub2RlT3BzLmNyZWF0ZUVsZW1lbnROUyh2bm9kZS5ucywgdGFnKVxuICAgICAgICA6IG5vZGVPcHMuY3JlYXRlRWxlbWVudCh0YWcsIHZub2RlKTtcbiAgICAgIHNldFNjb3BlKHZub2RlKTtcblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICB7XG4gICAgICAgIGNyZWF0ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7XG4gICAgICAgICAgaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgZGF0YSAmJiBkYXRhLnByZSkge1xuICAgICAgICBjcmVhdGluZ0VsbUluVlByZS0tO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNUcnVlKHZub2RlLmlzQ29tbWVudCkpIHtcbiAgICAgIHZub2RlLmVsbSA9IG5vZGVPcHMuY3JlYXRlQ29tbWVudCh2bm9kZS50ZXh0KTtcbiAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdm5vZGUuZWxtID0gbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZSh2bm9kZS50ZXh0KTtcbiAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSB7XG4gICAgdmFyIGkgPSB2bm9kZS5kYXRhO1xuICAgIGlmIChpc0RlZihpKSkge1xuICAgICAgdmFyIGlzUmVhY3RpdmF0ZWQgPSBpc0RlZih2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgJiYgaS5rZWVwQWxpdmU7XG4gICAgICBpZiAoaXNEZWYoaSA9IGkuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHtcbiAgICAgICAgaSh2bm9kZSwgZmFsc2UgLyogaHlkcmF0aW5nICovLCBwYXJlbnRFbG0sIHJlZkVsbSk7XG4gICAgICB9XG4gICAgICAvLyBhZnRlciBjYWxsaW5nIHRoZSBpbml0IGhvb2ssIGlmIHRoZSB2bm9kZSBpcyBhIGNoaWxkIGNvbXBvbmVudFxuICAgICAgLy8gaXQgc2hvdWxkJ3ZlIGNyZWF0ZWQgYSBjaGlsZCBpbnN0YW5jZSBhbmQgbW91bnRlZCBpdC4gdGhlIGNoaWxkXG4gICAgICAvLyBjb21wb25lbnQgYWxzbyBoYXMgc2V0IHRoZSBwbGFjZWhvbGRlciB2bm9kZSdzIGVsbS5cbiAgICAgIC8vIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdCByZXR1cm4gdGhlIGVsZW1lbnQgYW5kIGJlIGRvbmUuXG4gICAgICBpZiAoaXNEZWYodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpKSB7XG4gICAgICAgIGluaXRDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgIGlmIChpc1RydWUoaXNSZWFjdGl2YXRlZCkpIHtcbiAgICAgICAgICByZWFjdGl2YXRlQ29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpIHtcbiAgICBpZiAoaXNEZWYodm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0KSkge1xuICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2guYXBwbHkoaW5zZXJ0ZWRWbm9kZVF1ZXVlLCB2bm9kZS5kYXRhLnBlbmRpbmdJbnNlcnQpO1xuICAgICAgdm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0ID0gbnVsbDtcbiAgICB9XG4gICAgdm5vZGUuZWxtID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJGVsO1xuICAgIGlmIChpc1BhdGNoYWJsZSh2bm9kZSkpIHtcbiAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgc2V0U2NvcGUodm5vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBlbXB0eSBjb21wb25lbnQgcm9vdC5cbiAgICAgIC8vIHNraXAgYWxsIGVsZW1lbnQtcmVsYXRlZCBtb2R1bGVzIGV4Y2VwdCBmb3IgcmVmICgjMzQ1NSlcbiAgICAgIHJlZ2lzdGVyUmVmKHZub2RlKTtcbiAgICAgIC8vIG1ha2Ugc3VyZSB0byBpbnZva2UgdGhlIGluc2VydCBob29rXG4gICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhY3RpdmF0ZUNvbXBvbmVudCAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pIHtcbiAgICB2YXIgaTtcbiAgICAvLyBoYWNrIGZvciAjNDMzOTogYSByZWFjdGl2YXRlZCBjb21wb25lbnQgd2l0aCBpbm5lciB0cmFuc2l0aW9uXG4gICAgLy8gZG9lcyBub3QgdHJpZ2dlciBiZWNhdXNlIHRoZSBpbm5lciBub2RlJ3MgY3JlYXRlZCBob29rcyBhcmUgbm90IGNhbGxlZFxuICAgIC8vIGFnYWluLiBJdCdzIG5vdCBpZGVhbCB0byBpbnZvbHZlIG1vZHVsZS1zcGVjaWZpYyBsb2dpYyBpbiBoZXJlIGJ1dFxuICAgIC8vIHRoZXJlIGRvZXNuJ3Qgc2VlbSB0byBiZSBhIGJldHRlciB3YXkgdG8gZG8gaXQuXG4gICAgdmFyIGlubmVyTm9kZSA9IHZub2RlO1xuICAgIHdoaWxlIChpbm5lck5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgIGlubmVyTm9kZSA9IGlubmVyTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG4gICAgICBpZiAoaXNEZWYoaSA9IGlubmVyTm9kZS5kYXRhKSAmJiBpc0RlZihpID0gaS50cmFuc2l0aW9uKSkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmFjdGl2YXRlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgY2JzLmFjdGl2YXRlW2ldKGVtcHR5Tm9kZSwgaW5uZXJOb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaChpbm5lck5vZGUpO1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICAvLyB1bmxpa2UgYSBuZXdseSBjcmVhdGVkIGNvbXBvbmVudCxcbiAgICAvLyBhIHJlYWN0aXZhdGVkIGtlZXAtYWxpdmUgY29tcG9uZW50IGRvZXNuJ3QgaW5zZXJ0IGl0c2VsZlxuICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluc2VydCAocGFyZW50LCBlbG0sIHJlZiQkMSkge1xuICAgIGlmIChpc0RlZihwYXJlbnQpKSB7XG4gICAgICBpZiAoaXNEZWYocmVmJCQxKSkge1xuICAgICAgICBpZiAocmVmJCQxLnBhcmVudE5vZGUgPT09IHBhcmVudCkge1xuICAgICAgICAgIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudCwgZWxtLCByZWYkJDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlT3BzLmFwcGVuZENoaWxkKHBhcmVudCwgZWxtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVDaGlsZHJlbiAodm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgIHtcbiAgICAgICAgY2hlY2tEdXBsaWNhdGVLZXlzKGNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY3JlYXRlRWxtKGNoaWxkcmVuW2ldLCBpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmVsbSwgbnVsbCwgdHJ1ZSwgY2hpbGRyZW4sIGkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNQcmltaXRpdmUodm5vZGUudGV4dCkpIHtcbiAgICAgIG5vZGVPcHMuYXBwZW5kQ2hpbGQodm5vZGUuZWxtLCBub2RlT3BzLmNyZWF0ZVRleHROb2RlKFN0cmluZyh2bm9kZS50ZXh0KSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzUGF0Y2hhYmxlICh2bm9kZSkge1xuICAgIHdoaWxlICh2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgdm5vZGUgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7XG4gICAgfVxuICAgIHJldHVybiBpc0RlZih2bm9kZS50YWcpXG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VDcmVhdGVIb29rcyAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkge1xuICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgdm5vZGUpO1xuICAgIH1cbiAgICBpID0gdm5vZGUuZGF0YS5ob29rOyAvLyBSZXVzZSB2YXJpYWJsZVxuICAgIGlmIChpc0RlZihpKSkge1xuICAgICAgaWYgKGlzRGVmKGkuY3JlYXRlKSkgeyBpLmNyZWF0ZShlbXB0eU5vZGUsIHZub2RlKTsgfVxuICAgICAgaWYgKGlzRGVmKGkuaW5zZXJ0KSkgeyBpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSk7IH1cbiAgICB9XG4gIH1cblxuICAvLyBzZXQgc2NvcGUgaWQgYXR0cmlidXRlIGZvciBzY29wZWQgQ1NTLlxuICAvLyB0aGlzIGlzIGltcGxlbWVudGVkIGFzIGEgc3BlY2lhbCBjYXNlIHRvIGF2b2lkIHRoZSBvdmVyaGVhZFxuICAvLyBvZiBnb2luZyB0aHJvdWdoIHRoZSBub3JtYWwgYXR0cmlidXRlIHBhdGNoaW5nIHByb2Nlc3MuXG4gIGZ1bmN0aW9uIHNldFNjb3BlICh2bm9kZSkge1xuICAgIHZhciBpO1xuICAgIGlmIChpc0RlZihpID0gdm5vZGUuZm5TY29wZUlkKSkge1xuICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhbmNlc3RvciA9IHZub2RlO1xuICAgICAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgICAgIGlmIChpc0RlZihpID0gYW5jZXN0b3IuY29udGV4dCkgJiYgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpKSB7XG4gICAgICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGZvciBzbG90IGNvbnRlbnQgdGhleSBzaG91bGQgYWxzbyBnZXQgdGhlIHNjb3BlSWQgZnJvbSB0aGUgaG9zdCBpbnN0YW5jZS5cbiAgICBpZiAoaXNEZWYoaSA9IGFjdGl2ZUluc3RhbmNlKSAmJlxuICAgICAgaSAhPT0gdm5vZGUuY29udGV4dCAmJlxuICAgICAgaSAhPT0gdm5vZGUuZm5Db250ZXh0ICYmXG4gICAgICBpc0RlZihpID0gaS4kb3B0aW9ucy5fc2NvcGVJZClcbiAgICApIHtcbiAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFZub2RlcyAocGFyZW50RWxtLCByZWZFbG0sIHZub2Rlcywgc3RhcnRJZHgsIGVuZElkeCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG4gICAgZm9yICg7IHN0YXJ0SWR4IDw9IGVuZElkeDsgKytzdGFydElkeCkge1xuICAgICAgY3JlYXRlRWxtKHZub2Rlc1tzdGFydElkeF0sIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0sIGZhbHNlLCB2bm9kZXMsIHN0YXJ0SWR4KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VEZXN0cm95SG9vayAodm5vZGUpIHtcbiAgICB2YXIgaSwgajtcbiAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XG4gICAgaWYgKGlzRGVmKGRhdGEpKSB7XG4gICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuZGVzdHJveSkpIHsgaSh2bm9kZSk7IH1cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMuZGVzdHJveS5sZW5ndGg7ICsraSkgeyBjYnMuZGVzdHJveVtpXSh2bm9kZSk7IH1cbiAgICB9XG4gICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jaGlsZHJlbikpIHtcbiAgICAgIGZvciAoaiA9IDA7IGogPCB2bm9kZS5jaGlsZHJlbi5sZW5ndGg7ICsraikge1xuICAgICAgICBpbnZva2VEZXN0cm95SG9vayh2bm9kZS5jaGlsZHJlbltqXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlVm5vZGVzIChwYXJlbnRFbG0sIHZub2Rlcywgc3RhcnRJZHgsIGVuZElkeCkge1xuICAgIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHtcbiAgICAgIHZhciBjaCA9IHZub2Rlc1tzdGFydElkeF07XG4gICAgICBpZiAoaXNEZWYoY2gpKSB7XG4gICAgICAgIGlmIChpc0RlZihjaC50YWcpKSB7XG4gICAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhjaCk7XG4gICAgICAgICAgaW52b2tlRGVzdHJveUhvb2soY2gpO1xuICAgICAgICB9IGVsc2UgeyAvLyBUZXh0IG5vZGVcbiAgICAgICAgICByZW1vdmVOb2RlKGNoLmVsbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rICh2bm9kZSwgcm0pIHtcbiAgICBpZiAoaXNEZWYocm0pIHx8IGlzRGVmKHZub2RlLmRhdGEpKSB7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBsaXN0ZW5lcnMgPSBjYnMucmVtb3ZlLmxlbmd0aCArIDE7XG4gICAgICBpZiAoaXNEZWYocm0pKSB7XG4gICAgICAgIC8vIHdlIGhhdmUgYSByZWN1cnNpdmVseSBwYXNzZWQgZG93biBybSBjYWxsYmFja1xuICAgICAgICAvLyBpbmNyZWFzZSB0aGUgbGlzdGVuZXJzIGNvdW50XG4gICAgICAgIHJtLmxpc3RlbmVycyArPSBsaXN0ZW5lcnM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkaXJlY3RseSByZW1vdmluZ1xuICAgICAgICBybSA9IGNyZWF0ZVJtQ2Iodm5vZGUuZWxtLCBsaXN0ZW5lcnMpO1xuICAgICAgfVxuICAgICAgLy8gcmVjdXJzaXZlbHkgaW52b2tlIGhvb2tzIG9uIGNoaWxkIGNvbXBvbmVudCByb290IG5vZGVcbiAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UpICYmIGlzRGVmKGkgPSBpLl92bm9kZSkgJiYgaXNEZWYoaS5kYXRhKSkge1xuICAgICAgICByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rKGksIHJtKTtcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMucmVtb3ZlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNicy5yZW1vdmVbaV0odm5vZGUsIHJtKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5yZW1vdmUpKSB7XG4gICAgICAgIGkodm5vZGUsIHJtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJtKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZU5vZGUodm5vZGUuZWxtKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVDaGlsZHJlbiAocGFyZW50RWxtLCBvbGRDaCwgbmV3Q2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSkge1xuICAgIHZhciBvbGRTdGFydElkeCA9IDA7XG4gICAgdmFyIG5ld1N0YXJ0SWR4ID0gMDtcbiAgICB2YXIgb2xkRW5kSWR4ID0gb2xkQ2gubGVuZ3RoIC0gMTtcbiAgICB2YXIgb2xkU3RhcnRWbm9kZSA9IG9sZENoWzBdO1xuICAgIHZhciBvbGRFbmRWbm9kZSA9IG9sZENoW29sZEVuZElkeF07XG4gICAgdmFyIG5ld0VuZElkeCA9IG5ld0NoLmxlbmd0aCAtIDE7XG4gICAgdmFyIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFswXTtcbiAgICB2YXIgbmV3RW5kVm5vZGUgPSBuZXdDaFtuZXdFbmRJZHhdO1xuICAgIHZhciBvbGRLZXlUb0lkeCwgaWR4SW5PbGQsIHZub2RlVG9Nb3ZlLCByZWZFbG07XG5cbiAgICAvLyByZW1vdmVPbmx5IGlzIGEgc3BlY2lhbCBmbGFnIHVzZWQgb25seSBieSA8dHJhbnNpdGlvbi1ncm91cD5cbiAgICAvLyB0byBlbnN1cmUgcmVtb3ZlZCBlbGVtZW50cyBzdGF5IGluIGNvcnJlY3QgcmVsYXRpdmUgcG9zaXRpb25zXG4gICAgLy8gZHVyaW5nIGxlYXZpbmcgdHJhbnNpdGlvbnNcbiAgICB2YXIgY2FuTW92ZSA9ICFyZW1vdmVPbmx5O1xuXG4gICAge1xuICAgICAgY2hlY2tEdXBsaWNhdGVLZXlzKG5ld0NoKTtcbiAgICB9XG5cbiAgICB3aGlsZSAob2xkU3RhcnRJZHggPD0gb2xkRW5kSWR4ICYmIG5ld1N0YXJ0SWR4IDw9IG5ld0VuZElkeCkge1xuICAgICAgaWYgKGlzVW5kZWYob2xkU3RhcnRWbm9kZSkpIHtcbiAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdOyAvLyBWbm9kZSBoYXMgYmVlbiBtb3ZlZCBsZWZ0XG4gICAgICB9IGVsc2UgaWYgKGlzVW5kZWYob2xkRW5kVm5vZGUpKSB7XG4gICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSkpIHtcbiAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07XG4gICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcbiAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZEVuZFZub2RlLCBuZXdFbmRWbm9kZSkpIHtcbiAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuICAgICAgICBuZXdFbmRWbm9kZSA9IG5ld0NoWy0tbmV3RW5kSWR4XTtcbiAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld0VuZFZub2RlKSkgeyAvLyBWbm9kZSBtb3ZlZCByaWdodFxuICAgICAgICBwYXRjaFZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld0VuZFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIG5vZGVPcHMubmV4dFNpYmxpbmcob2xkRW5kVm5vZGUuZWxtKSk7XG4gICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTtcbiAgICAgICAgbmV3RW5kVm5vZGUgPSBuZXdDaFstLW5ld0VuZElkeF07XG4gICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgbGVmdFxuICAgICAgICBwYXRjaFZub2RlKG9sZEVuZFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgb2xkRW5kVm5vZGUuZWxtLCBvbGRTdGFydFZub2RlLmVsbSk7XG4gICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNVbmRlZihvbGRLZXlUb0lkeCkpIHsgb2xkS2V5VG9JZHggPSBjcmVhdGVLZXlUb09sZElkeChvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7IH1cbiAgICAgICAgaWR4SW5PbGQgPSBpc0RlZihuZXdTdGFydFZub2RlLmtleSlcbiAgICAgICAgICA/IG9sZEtleVRvSWR4W25ld1N0YXJ0Vm5vZGUua2V5XVxuICAgICAgICAgIDogZmluZElkeEluT2xkKG5ld1N0YXJ0Vm5vZGUsIG9sZENoLCBvbGRTdGFydElkeCwgb2xkRW5kSWR4KTtcbiAgICAgICAgaWYgKGlzVW5kZWYoaWR4SW5PbGQpKSB7IC8vIE5ldyBlbGVtZW50XG4gICAgICAgICAgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgZmFsc2UsIG5ld0NoLCBuZXdTdGFydElkeCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm5vZGVUb01vdmUgPSBvbGRDaFtpZHhJbk9sZF07XG4gICAgICAgICAgaWYgKHNhbWVWbm9kZSh2bm9kZVRvTW92ZSwgbmV3U3RhcnRWbm9kZSkpIHtcbiAgICAgICAgICAgIHBhdGNoVm5vZGUodm5vZGVUb01vdmUsIG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgICAgICBvbGRDaFtpZHhJbk9sZF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgdm5vZGVUb01vdmUuZWxtLCBvbGRTdGFydFZub2RlLmVsbSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNhbWUga2V5IGJ1dCBkaWZmZXJlbnQgZWxlbWVudC4gdHJlYXQgYXMgbmV3IGVsZW1lbnRcbiAgICAgICAgICAgIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIGZhbHNlLCBuZXdDaCwgbmV3U3RhcnRJZHgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvbGRTdGFydElkeCA+IG9sZEVuZElkeCkge1xuICAgICAgcmVmRWxtID0gaXNVbmRlZihuZXdDaFtuZXdFbmRJZHggKyAxXSkgPyBudWxsIDogbmV3Q2hbbmV3RW5kSWR4ICsgMV0uZWxtO1xuICAgICAgYWRkVm5vZGVzKHBhcmVudEVsbSwgcmVmRWxtLCBuZXdDaCwgbmV3U3RhcnRJZHgsIG5ld0VuZElkeCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICB9IGVsc2UgaWYgKG5ld1N0YXJ0SWR4ID4gbmV3RW5kSWR4KSB7XG4gICAgICByZW1vdmVWbm9kZXMocGFyZW50RWxtLCBvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tEdXBsaWNhdGVLZXlzIChjaGlsZHJlbikge1xuICAgIHZhciBzZWVuS2V5cyA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2bm9kZSA9IGNoaWxkcmVuW2ldO1xuICAgICAgdmFyIGtleSA9IHZub2RlLmtleTtcbiAgICAgIGlmIChpc0RlZihrZXkpKSB7XG4gICAgICAgIGlmIChzZWVuS2V5c1trZXldKSB7XG4gICAgICAgICAgd2FybihcbiAgICAgICAgICAgIChcIkR1cGxpY2F0ZSBrZXlzIGRldGVjdGVkOiAnXCIgKyBrZXkgKyBcIicuIFRoaXMgbWF5IGNhdXNlIGFuIHVwZGF0ZSBlcnJvci5cIiksXG4gICAgICAgICAgICB2bm9kZS5jb250ZXh0XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWVuS2V5c1trZXldID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRJZHhJbk9sZCAobm9kZSwgb2xkQ2gsIHN0YXJ0LCBlbmQpIHtcbiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdmFyIGMgPSBvbGRDaFtpXTtcbiAgICAgIGlmIChpc0RlZihjKSAmJiBzYW1lVm5vZGUobm9kZSwgYykpIHsgcmV0dXJuIGkgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdGNoVm5vZGUgKG9sZFZub2RlLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCByZW1vdmVPbmx5KSB7XG4gICAgaWYgKG9sZFZub2RlID09PSB2bm9kZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdmFyIGVsbSA9IHZub2RlLmVsbSA9IG9sZFZub2RlLmVsbTtcblxuICAgIGlmIChpc1RydWUob2xkVm5vZGUuaXNBc3luY1BsYWNlaG9sZGVyKSkge1xuICAgICAgaWYgKGlzRGVmKHZub2RlLmFzeW5jRmFjdG9yeS5yZXNvbHZlZCkpIHtcbiAgICAgICAgaHlkcmF0ZShvbGRWbm9kZS5lbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm5vZGUuaXNBc3luY1BsYWNlaG9sZGVyID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIHJldXNlIGVsZW1lbnQgZm9yIHN0YXRpYyB0cmVlcy5cbiAgICAvLyBub3RlIHdlIG9ubHkgZG8gdGhpcyBpZiB0aGUgdm5vZGUgaXMgY2xvbmVkIC1cbiAgICAvLyBpZiB0aGUgbmV3IG5vZGUgaXMgbm90IGNsb25lZCBpdCBtZWFucyB0aGUgcmVuZGVyIGZ1bmN0aW9ucyBoYXZlIGJlZW5cbiAgICAvLyByZXNldCBieSB0aGUgaG90LXJlbG9hZC1hcGkgYW5kIHdlIG5lZWQgdG8gZG8gYSBwcm9wZXIgcmUtcmVuZGVyLlxuICAgIGlmIChpc1RydWUodm5vZGUuaXNTdGF0aWMpICYmXG4gICAgICBpc1RydWUob2xkVm5vZGUuaXNTdGF0aWMpICYmXG4gICAgICB2bm9kZS5rZXkgPT09IG9sZFZub2RlLmtleSAmJlxuICAgICAgKGlzVHJ1ZSh2bm9kZS5pc0Nsb25lZCkgfHwgaXNUcnVlKHZub2RlLmlzT25jZSkpXG4gICAgKSB7XG4gICAgICB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IG9sZFZub2RlLmNvbXBvbmVudEluc3RhbmNlO1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdmFyIGk7XG4gICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5wcmVwYXRjaCkpIHtcbiAgICAgIGkob2xkVm5vZGUsIHZub2RlKTtcbiAgICB9XG5cbiAgICB2YXIgb2xkQ2ggPSBvbGRWbm9kZS5jaGlsZHJlbjtcbiAgICB2YXIgY2ggPSB2bm9kZS5jaGlsZHJlbjtcbiAgICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNQYXRjaGFibGUodm5vZGUpKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLnVwZGF0ZS5sZW5ndGg7ICsraSkgeyBjYnMudXBkYXRlW2ldKG9sZFZub2RlLCB2bm9kZSk7IH1cbiAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS51cGRhdGUpKSB7IGkob2xkVm5vZGUsIHZub2RlKTsgfVxuICAgIH1cbiAgICBpZiAoaXNVbmRlZih2bm9kZS50ZXh0KSkge1xuICAgICAgaWYgKGlzRGVmKG9sZENoKSAmJiBpc0RlZihjaCkpIHtcbiAgICAgICAgaWYgKG9sZENoICE9PSBjaCkgeyB1cGRhdGVDaGlsZHJlbihlbG0sIG9sZENoLCBjaCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCByZW1vdmVPbmx5KTsgfVxuICAgICAgfSBlbHNlIGlmIChpc0RlZihjaCkpIHtcbiAgICAgICAgaWYgKGlzRGVmKG9sZFZub2RlLnRleHQpKSB7IG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7IH1cbiAgICAgICAgYWRkVm5vZGVzKGVsbSwgbnVsbCwgY2gsIDAsIGNoLmxlbmd0aCAtIDEsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGlzRGVmKG9sZENoKSkge1xuICAgICAgICByZW1vdmVWbm9kZXMoZWxtLCBvbGRDaCwgMCwgb2xkQ2gubGVuZ3RoIC0gMSk7XG4gICAgICB9IGVsc2UgaWYgKGlzRGVmKG9sZFZub2RlLnRleHQpKSB7XG4gICAgICAgIG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvbGRWbm9kZS50ZXh0ICE9PSB2bm9kZS50ZXh0KSB7XG4gICAgICBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgdm5vZGUudGV4dCk7XG4gICAgfVxuICAgIGlmIChpc0RlZihkYXRhKSkge1xuICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnBvc3RwYXRjaCkpIHsgaShvbGRWbm9kZSwgdm5vZGUpOyB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlSW5zZXJ0SG9vayAodm5vZGUsIHF1ZXVlLCBpbml0aWFsKSB7XG4gICAgLy8gZGVsYXkgaW5zZXJ0IGhvb2tzIGZvciBjb21wb25lbnQgcm9vdCBub2RlcywgaW52b2tlIHRoZW0gYWZ0ZXIgdGhlXG4gICAgLy8gZWxlbWVudCBpcyByZWFsbHkgaW5zZXJ0ZWRcbiAgICBpZiAoaXNUcnVlKGluaXRpYWwpICYmIGlzRGVmKHZub2RlLnBhcmVudCkpIHtcbiAgICAgIHZub2RlLnBhcmVudC5kYXRhLnBlbmRpbmdJbnNlcnQgPSBxdWV1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBxdWV1ZVtpXS5kYXRhLmhvb2suaW5zZXJ0KHF1ZXVlW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgaHlkcmF0aW9uQmFpbGVkID0gZmFsc2U7XG4gIC8vIGxpc3Qgb2YgbW9kdWxlcyB0aGF0IGNhbiBza2lwIGNyZWF0ZSBob29rIGR1cmluZyBoeWRyYXRpb24gYmVjYXVzZSB0aGV5XG4gIC8vIGFyZSBhbHJlYWR5IHJlbmRlcmVkIG9uIHRoZSBjbGllbnQgb3IgaGFzIG5vIG5lZWQgZm9yIGluaXRpYWxpemF0aW9uXG4gIC8vIE5vdGU6IHN0eWxlIGlzIGV4Y2x1ZGVkIGJlY2F1c2UgaXQgcmVsaWVzIG9uIGluaXRpYWwgY2xvbmUgZm9yIGZ1dHVyZVxuICAvLyBkZWVwIHVwZGF0ZXMgKCM3MDYzKS5cbiAgdmFyIGlzUmVuZGVyZWRNb2R1bGUgPSBtYWtlTWFwKCdhdHRycyxjbGFzcyxzdGF0aWNDbGFzcyxzdGF0aWNTdHlsZSxrZXknKTtcblxuICAvLyBOb3RlOiB0aGlzIGlzIGEgYnJvd3Nlci1vbmx5IGZ1bmN0aW9uIHNvIHdlIGNhbiBhc3N1bWUgZWxtcyBhcmUgRE9NIG5vZGVzLlxuICBmdW5jdGlvbiBoeWRyYXRlIChlbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGluVlByZSkge1xuICAgIHZhciBpO1xuICAgIHZhciB0YWcgPSB2bm9kZS50YWc7XG4gICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuICAgIHZhciBjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICAgIGluVlByZSA9IGluVlByZSB8fCAoZGF0YSAmJiBkYXRhLnByZSk7XG4gICAgdm5vZGUuZWxtID0gZWxtO1xuXG4gICAgaWYgKGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpICYmIGlzRGVmKHZub2RlLmFzeW5jRmFjdG9yeSkpIHtcbiAgICAgIHZub2RlLmlzQXN5bmNQbGFjZWhvbGRlciA9IHRydWU7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICAvLyBhc3NlcnQgbm9kZSBtYXRjaFxuICAgIHtcbiAgICAgIGlmICghYXNzZXJ0Tm9kZU1hdGNoKGVsbSwgdm5vZGUsIGluVlByZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc0RlZihkYXRhKSkge1xuICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLmluaXQpKSB7IGkodm5vZGUsIHRydWUgLyogaHlkcmF0aW5nICovKTsgfVxuICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkpIHtcbiAgICAgICAgLy8gY2hpbGQgY29tcG9uZW50LiBpdCBzaG91bGQgaGF2ZSBoeWRyYXRlZCBpdHMgb3duIHRyZWUuXG4gICAgICAgIGluaXRDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc0RlZih0YWcpKSB7XG4gICAgICBpZiAoaXNEZWYoY2hpbGRyZW4pKSB7XG4gICAgICAgIC8vIGVtcHR5IGVsZW1lbnQsIGFsbG93IGNsaWVudCB0byBwaWNrIHVwIGFuZCBwb3B1bGF0ZSBjaGlsZHJlblxuICAgICAgICBpZiAoIWVsbS5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICBjcmVhdGVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4sIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdi1odG1sIGFuZCBkb21Qcm9wczogaW5uZXJIVE1MXG4gICAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhKSAmJiBpc0RlZihpID0gaS5kb21Qcm9wcykgJiYgaXNEZWYoaSA9IGkuaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgaWYgKGkgIT09IGVsbS5pbm5lckhUTUwpIHtcbiAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICAgICFoeWRyYXRpb25CYWlsZWRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaHlkcmF0aW9uQmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BhcmVudDogJywgZWxtKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3NlcnZlciBpbm5lckhUTUw6ICcsIGkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignY2xpZW50IGlubmVySFRNTDogJywgZWxtLmlubmVySFRNTCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGl0ZXJhdGUgYW5kIGNvbXBhcmUgY2hpbGRyZW4gbGlzdHNcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbk1hdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBjaGlsZE5vZGUgPSBlbG0uZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNoaWxkcmVuLmxlbmd0aDsgaSQxKyspIHtcbiAgICAgICAgICAgICAgaWYgKCFjaGlsZE5vZGUgfHwgIWh5ZHJhdGUoY2hpbGROb2RlLCBjaGlsZHJlbltpJDFdLCBpbnNlcnRlZFZub2RlUXVldWUsIGluVlByZSkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbk1hdGNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiBjaGlsZE5vZGUgaXMgbm90IG51bGwsIGl0IG1lYW5zIHRoZSBhY3R1YWwgY2hpbGROb2RlcyBsaXN0IGlzXG4gICAgICAgICAgICAvLyBsb25nZXIgdGhhbiB0aGUgdmlydHVhbCBjaGlsZHJlbiBsaXN0LlxuICAgICAgICAgICAgaWYgKCFjaGlsZHJlbk1hdGNoIHx8IGNoaWxkTm9kZSkge1xuICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgIWh5ZHJhdGlvbkJhaWxlZFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBoeWRyYXRpb25CYWlsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUGFyZW50OiAnLCBlbG0pO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWlzbWF0Y2hpbmcgY2hpbGROb2RlcyB2cy4gVk5vZGVzOiAnLCBlbG0uY2hpbGROb2RlcywgY2hpbGRyZW4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7XG4gICAgICAgIHZhciBmdWxsSW52b2tlID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgaWYgKCFpc1JlbmRlcmVkTW9kdWxlKGtleSkpIHtcbiAgICAgICAgICAgIGZ1bGxJbnZva2UgPSB0cnVlO1xuICAgICAgICAgICAgaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZ1bGxJbnZva2UgJiYgZGF0YVsnY2xhc3MnXSkge1xuICAgICAgICAgIC8vIGVuc3VyZSBjb2xsZWN0aW5nIGRlcHMgZm9yIGRlZXAgY2xhc3MgYmluZGluZ3MgZm9yIGZ1dHVyZSB1cGRhdGVzXG4gICAgICAgICAgdHJhdmVyc2UoZGF0YVsnY2xhc3MnXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVsbS5kYXRhICE9PSB2bm9kZS50ZXh0KSB7XG4gICAgICBlbG0uZGF0YSA9IHZub2RlLnRleHQ7XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBhc3NlcnROb2RlTWF0Y2ggKG5vZGUsIHZub2RlLCBpblZQcmUpIHtcbiAgICBpZiAoaXNEZWYodm5vZGUudGFnKSkge1xuICAgICAgcmV0dXJuIHZub2RlLnRhZy5pbmRleE9mKCd2dWUtY29tcG9uZW50JykgPT09IDAgfHwgKFxuICAgICAgICAhaXNVbmtub3duRWxlbWVudCQkMSh2bm9kZSwgaW5WUHJlKSAmJlxuICAgICAgICB2bm9kZS50YWcudG9Mb3dlckNhc2UoKSA9PT0gKG5vZGUudGFnTmFtZSAmJiBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSlcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09ICh2bm9kZS5pc0NvbW1lbnQgPyA4IDogMylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSwgaHlkcmF0aW5nLCByZW1vdmVPbmx5LCBwYXJlbnRFbG0sIHJlZkVsbSkge1xuICAgIGlmIChpc1VuZGVmKHZub2RlKSkge1xuICAgICAgaWYgKGlzRGVmKG9sZFZub2RlKSkgeyBpbnZva2VEZXN0cm95SG9vayhvbGRWbm9kZSk7IH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBpc0luaXRpYWxQYXRjaCA9IGZhbHNlO1xuICAgIHZhciBpbnNlcnRlZFZub2RlUXVldWUgPSBbXTtcblxuICAgIGlmIChpc1VuZGVmKG9sZFZub2RlKSkge1xuICAgICAgLy8gZW1wdHkgbW91bnQgKGxpa2VseSBhcyBjb21wb25lbnQpLCBjcmVhdGUgbmV3IHJvb3QgZWxlbWVudFxuICAgICAgaXNJbml0aWFsUGF0Y2ggPSB0cnVlO1xuICAgICAgY3JlYXRlRWxtKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGlzUmVhbEVsZW1lbnQgPSBpc0RlZihvbGRWbm9kZS5ub2RlVHlwZSk7XG4gICAgICBpZiAoIWlzUmVhbEVsZW1lbnQgJiYgc2FtZVZub2RlKG9sZFZub2RlLCB2bm9kZSkpIHtcbiAgICAgICAgLy8gcGF0Y2ggZXhpc3Rpbmcgcm9vdCBub2RlXG4gICAgICAgIHBhdGNoVm5vZGUob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzUmVhbEVsZW1lbnQpIHtcbiAgICAgICAgICAvLyBtb3VudGluZyB0byBhIHJlYWwgZWxlbWVudFxuICAgICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQgYW5kIGlmIHdlIGNhbiBwZXJmb3JtXG4gICAgICAgICAgLy8gYSBzdWNjZXNzZnVsIGh5ZHJhdGlvbi5cbiAgICAgICAgICBpZiAob2xkVm5vZGUubm9kZVR5cGUgPT09IDEgJiYgb2xkVm5vZGUuaGFzQXR0cmlidXRlKFNTUl9BVFRSKSkge1xuICAgICAgICAgICAgb2xkVm5vZGUucmVtb3ZlQXR0cmlidXRlKFNTUl9BVFRSKTtcbiAgICAgICAgICAgIGh5ZHJhdGluZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1RydWUoaHlkcmF0aW5nKSkge1xuICAgICAgICAgICAgaWYgKGh5ZHJhdGUob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpKSB7XG4gICAgICAgICAgICAgIGludm9rZUluc2VydEhvb2sodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIHJldHVybiBvbGRWbm9kZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd2FybihcbiAgICAgICAgICAgICAgICAnVGhlIGNsaWVudC1zaWRlIHJlbmRlcmVkIHZpcnR1YWwgRE9NIHRyZWUgaXMgbm90IG1hdGNoaW5nICcgK1xuICAgICAgICAgICAgICAgICdzZXJ2ZXItcmVuZGVyZWQgY29udGVudC4gVGhpcyBpcyBsaWtlbHkgY2F1c2VkIGJ5IGluY29ycmVjdCAnICtcbiAgICAgICAgICAgICAgICAnSFRNTCBtYXJrdXAsIGZvciBleGFtcGxlIG5lc3RpbmcgYmxvY2stbGV2ZWwgZWxlbWVudHMgaW5zaWRlICcgK1xuICAgICAgICAgICAgICAgICc8cD4sIG9yIG1pc3NpbmcgPHRib2R5Pi4gQmFpbGluZyBoeWRyYXRpb24gYW5kIHBlcmZvcm1pbmcgJyArXG4gICAgICAgICAgICAgICAgJ2Z1bGwgY2xpZW50LXNpZGUgcmVuZGVyLidcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gZWl0aGVyIG5vdCBzZXJ2ZXItcmVuZGVyZWQsIG9yIGh5ZHJhdGlvbiBmYWlsZWQuXG4gICAgICAgICAgLy8gY3JlYXRlIGFuIGVtcHR5IG5vZGUgYW5kIHJlcGxhY2UgaXRcbiAgICAgICAgICBvbGRWbm9kZSA9IGVtcHR5Tm9kZUF0KG9sZFZub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlcGxhY2luZyBleGlzdGluZyBlbGVtZW50XG4gICAgICAgIHZhciBvbGRFbG0gPSBvbGRWbm9kZS5lbG07XG4gICAgICAgIHZhciBwYXJlbnRFbG0kMSA9IG5vZGVPcHMucGFyZW50Tm9kZShvbGRFbG0pO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBuZXcgbm9kZVxuICAgICAgICBjcmVhdGVFbG0oXG4gICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLFxuICAgICAgICAgIC8vIGV4dHJlbWVseSByYXJlIGVkZ2UgY2FzZTogZG8gbm90IGluc2VydCBpZiBvbGQgZWxlbWVudCBpcyBpbiBhXG4gICAgICAgICAgLy8gbGVhdmluZyB0cmFuc2l0aW9uLiBPbmx5IGhhcHBlbnMgd2hlbiBjb21iaW5pbmcgdHJhbnNpdGlvbiArXG4gICAgICAgICAgLy8ga2VlcC1hbGl2ZSArIEhPQ3MuICgjNDU5MClcbiAgICAgICAgICBvbGRFbG0uX2xlYXZlQ2IgPyBudWxsIDogcGFyZW50RWxtJDEsXG4gICAgICAgICAgbm9kZU9wcy5uZXh0U2libGluZyhvbGRFbG0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHBhcmVudCBwbGFjZWhvbGRlciBub2RlIGVsZW1lbnQsIHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChpc0RlZih2bm9kZS5wYXJlbnQpKSB7XG4gICAgICAgICAgdmFyIGFuY2VzdG9yID0gdm5vZGUucGFyZW50O1xuICAgICAgICAgIHZhciBwYXRjaGFibGUgPSBpc1BhdGNoYWJsZSh2bm9kZSk7XG4gICAgICAgICAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgIGNicy5kZXN0cm95W2ldKGFuY2VzdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFuY2VzdG9yLmVsbSA9IHZub2RlLmVsbTtcbiAgICAgICAgICAgIGlmIChwYXRjaGFibGUpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgY2JzLmNyZWF0ZS5sZW5ndGg7ICsraSQxKSB7XG4gICAgICAgICAgICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgYW5jZXN0b3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vICM2NTEzXG4gICAgICAgICAgICAgIC8vIGludm9rZSBpbnNlcnQgaG9va3MgdGhhdCBtYXkgaGF2ZSBiZWVuIG1lcmdlZCBieSBjcmVhdGUgaG9va3MuXG4gICAgICAgICAgICAgIC8vIGUuZy4gZm9yIGRpcmVjdGl2ZXMgdGhhdCB1c2VzIHRoZSBcImluc2VydGVkXCIgaG9vay5cbiAgICAgICAgICAgICAgdmFyIGluc2VydCA9IGFuY2VzdG9yLmRhdGEuaG9vay5pbnNlcnQ7XG4gICAgICAgICAgICAgIGlmIChpbnNlcnQubWVyZ2VkKSB7XG4gICAgICAgICAgICAgICAgLy8gc3RhcnQgYXQgaW5kZXggMSB0byBhdm9pZCByZS1pbnZva2luZyBjb21wb25lbnQgbW91bnRlZCBob29rXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSQyID0gMTsgaSQyIDwgaW5zZXJ0LmZucy5sZW5ndGg7IGkkMisrKSB7XG4gICAgICAgICAgICAgICAgICBpbnNlcnQuZm5zW2kkMl0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlZ2lzdGVyUmVmKGFuY2VzdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRlc3Ryb3kgb2xkIG5vZGVcbiAgICAgICAgaWYgKGlzRGVmKHBhcmVudEVsbSQxKSkge1xuICAgICAgICAgIHJlbW92ZVZub2RlcyhwYXJlbnRFbG0kMSwgW29sZFZub2RlXSwgMCwgMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkVm5vZGUudGFnKSkge1xuICAgICAgICAgIGludm9rZURlc3Ryb3lIb29rKG9sZFZub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGludm9rZUluc2VydEhvb2sodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgaXNJbml0aWFsUGF0Y2gpO1xuICAgIHJldHVybiB2bm9kZS5lbG1cbiAgfVxufVxuXG4vKiAgKi9cblxudmFyIGRpcmVjdGl2ZXMgPSB7XG4gIGNyZWF0ZTogdXBkYXRlRGlyZWN0aXZlcyxcbiAgdXBkYXRlOiB1cGRhdGVEaXJlY3RpdmVzLFxuICBkZXN0cm95OiBmdW5jdGlvbiB1bmJpbmREaXJlY3RpdmVzICh2bm9kZSkge1xuICAgIHVwZGF0ZURpcmVjdGl2ZXModm5vZGUsIGVtcHR5Tm9kZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlRGlyZWN0aXZlcyAob2xkVm5vZGUsIHZub2RlKSB7XG4gIGlmIChvbGRWbm9kZS5kYXRhLmRpcmVjdGl2ZXMgfHwgdm5vZGUuZGF0YS5kaXJlY3RpdmVzKSB7XG4gICAgX3VwZGF0ZShvbGRWbm9kZSwgdm5vZGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF91cGRhdGUgKG9sZFZub2RlLCB2bm9kZSkge1xuICB2YXIgaXNDcmVhdGUgPSBvbGRWbm9kZSA9PT0gZW1wdHlOb2RlO1xuICB2YXIgaXNEZXN0cm95ID0gdm5vZGUgPT09IGVtcHR5Tm9kZTtcbiAgdmFyIG9sZERpcnMgPSBub3JtYWxpemVEaXJlY3RpdmVzJDEob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzLCBvbGRWbm9kZS5jb250ZXh0KTtcbiAgdmFyIG5ld0RpcnMgPSBub3JtYWxpemVEaXJlY3RpdmVzJDEodm5vZGUuZGF0YS5kaXJlY3RpdmVzLCB2bm9kZS5jb250ZXh0KTtcblxuICB2YXIgZGlyc1dpdGhJbnNlcnQgPSBbXTtcbiAgdmFyIGRpcnNXaXRoUG9zdHBhdGNoID0gW107XG5cbiAgdmFyIGtleSwgb2xkRGlyLCBkaXI7XG4gIGZvciAoa2V5IGluIG5ld0RpcnMpIHtcbiAgICBvbGREaXIgPSBvbGREaXJzW2tleV07XG4gICAgZGlyID0gbmV3RGlyc1trZXldO1xuICAgIGlmICghb2xkRGlyKSB7XG4gICAgICAvLyBuZXcgZGlyZWN0aXZlLCBiaW5kXG4gICAgICBjYWxsSG9vayQxKGRpciwgJ2JpbmQnLCB2bm9kZSwgb2xkVm5vZGUpO1xuICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5pbnNlcnRlZCkge1xuICAgICAgICBkaXJzV2l0aEluc2VydC5wdXNoKGRpcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGV4aXN0aW5nIGRpcmVjdGl2ZSwgdXBkYXRlXG4gICAgICBkaXIub2xkVmFsdWUgPSBvbGREaXIudmFsdWU7XG4gICAgICBjYWxsSG9vayQxKGRpciwgJ3VwZGF0ZScsIHZub2RlLCBvbGRWbm9kZSk7XG4gICAgICBpZiAoZGlyLmRlZiAmJiBkaXIuZGVmLmNvbXBvbmVudFVwZGF0ZWQpIHtcbiAgICAgICAgZGlyc1dpdGhQb3N0cGF0Y2gucHVzaChkaXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkaXJzV2l0aEluc2VydC5sZW5ndGgpIHtcbiAgICB2YXIgY2FsbEluc2VydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlyc1dpdGhJbnNlcnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbEhvb2skMShkaXJzV2l0aEluc2VydFtpXSwgJ2luc2VydGVkJywgdm5vZGUsIG9sZFZub2RlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChpc0NyZWF0ZSkge1xuICAgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdpbnNlcnQnLCBjYWxsSW5zZXJ0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbEluc2VydCgpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkaXJzV2l0aFBvc3RwYXRjaC5sZW5ndGgpIHtcbiAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ3Bvc3RwYXRjaCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbEhvb2skMShkaXJzV2l0aFBvc3RwYXRjaFtpXSwgJ2NvbXBvbmVudFVwZGF0ZWQnLCB2bm9kZSwgb2xkVm5vZGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKCFpc0NyZWF0ZSkge1xuICAgIGZvciAoa2V5IGluIG9sZERpcnMpIHtcbiAgICAgIGlmICghbmV3RGlyc1trZXldKSB7XG4gICAgICAgIC8vIG5vIGxvbmdlciBwcmVzZW50LCB1bmJpbmRcbiAgICAgICAgY2FsbEhvb2skMShvbGREaXJzW2tleV0sICd1bmJpbmQnLCBvbGRWbm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnZhciBlbXB0eU1vZGlmaWVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZURpcmVjdGl2ZXMkMSAoXG4gIGRpcnMsXG4gIHZtXG4pIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGlmICghZGlycykge1xuICAgIC8vICRmbG93LWRpc2FibGUtbGluZVxuICAgIHJldHVybiByZXNcbiAgfVxuICB2YXIgaSwgZGlyO1xuICBmb3IgKGkgPSAwOyBpIDwgZGlycy5sZW5ndGg7IGkrKykge1xuICAgIGRpciA9IGRpcnNbaV07XG4gICAgaWYgKCFkaXIubW9kaWZpZXJzKSB7XG4gICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICAgIGRpci5tb2RpZmllcnMgPSBlbXB0eU1vZGlmaWVycztcbiAgICB9XG4gICAgcmVzW2dldFJhd0Rpck5hbWUoZGlyKV0gPSBkaXI7XG4gICAgZGlyLmRlZiA9IHJlc29sdmVBc3NldCh2bS4kb3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXIubmFtZSwgdHJ1ZSk7XG4gIH1cbiAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gZ2V0UmF3RGlyTmFtZSAoZGlyKSB7XG4gIHJldHVybiBkaXIucmF3TmFtZSB8fCAoKGRpci5uYW1lKSArIFwiLlwiICsgKE9iamVjdC5rZXlzKGRpci5tb2RpZmllcnMgfHwge30pLmpvaW4oJy4nKSkpXG59XG5cbmZ1bmN0aW9uIGNhbGxIb29rJDEgKGRpciwgaG9vaywgdm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpIHtcbiAgdmFyIGZuID0gZGlyLmRlZiAmJiBkaXIuZGVmW2hvb2tdO1xuICBpZiAoZm4pIHtcbiAgICB0cnkge1xuICAgICAgZm4odm5vZGUuZWxtLCBkaXIsIHZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBoYW5kbGVFcnJvcihlLCB2bm9kZS5jb250ZXh0LCAoXCJkaXJlY3RpdmUgXCIgKyAoZGlyLm5hbWUpICsgXCIgXCIgKyBob29rICsgXCIgaG9va1wiKSk7XG4gICAgfVxuICB9XG59XG5cbnZhciBiYXNlTW9kdWxlcyA9IFtcbiAgcmVmLFxuICBkaXJlY3RpdmVzXG5dXG5cbi8qICAqL1xuXG5mdW5jdGlvbiB1cGRhdGVBdHRycyAob2xkVm5vZGUsIHZub2RlKSB7XG4gIHZhciBvcHRzID0gdm5vZGUuY29tcG9uZW50T3B0aW9ucztcbiAgaWYgKGlzRGVmKG9wdHMpICYmIG9wdHMuQ3Rvci5vcHRpb25zLmluaGVyaXRBdHRycyA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm5cbiAgfVxuICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmF0dHJzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuYXR0cnMpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIGtleSwgY3VyLCBvbGQ7XG4gIHZhciBlbG0gPSB2bm9kZS5lbG07XG4gIHZhciBvbGRBdHRycyA9IG9sZFZub2RlLmRhdGEuYXR0cnMgfHwge307XG4gIHZhciBhdHRycyA9IHZub2RlLmRhdGEuYXR0cnMgfHwge307XG4gIC8vIGNsb25lIG9ic2VydmVkIG9iamVjdHMsIGFzIHRoZSB1c2VyIHByb2JhYmx5IHdhbnRzIHRvIG11dGF0ZSBpdFxuICBpZiAoaXNEZWYoYXR0cnMuX19vYl9fKSkge1xuICAgIGF0dHJzID0gdm5vZGUuZGF0YS5hdHRycyA9IGV4dGVuZCh7fSwgYXR0cnMpO1xuICB9XG5cbiAgZm9yIChrZXkgaW4gYXR0cnMpIHtcbiAgICBjdXIgPSBhdHRyc1trZXldO1xuICAgIG9sZCA9IG9sZEF0dHJzW2tleV07XG4gICAgaWYgKG9sZCAhPT0gY3VyKSB7XG4gICAgICBzZXRBdHRyKGVsbSwga2V5LCBjdXIpO1xuICAgIH1cbiAgfVxuICAvLyAjNDM5MTogaW4gSUU5LCBzZXR0aW5nIHR5cGUgY2FuIHJlc2V0IHZhbHVlIGZvciBpbnB1dFt0eXBlPXJhZGlvXVxuICAvLyAjNjY2NjogSUUvRWRnZSBmb3JjZXMgcHJvZ3Jlc3MgdmFsdWUgZG93biB0byAxIGJlZm9yZSBzZXR0aW5nIGEgbWF4XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoKGlzSUUgfHwgaXNFZGdlKSAmJiBhdHRycy52YWx1ZSAhPT0gb2xkQXR0cnMudmFsdWUpIHtcbiAgICBzZXRBdHRyKGVsbSwgJ3ZhbHVlJywgYXR0cnMudmFsdWUpO1xuICB9XG4gIGZvciAoa2V5IGluIG9sZEF0dHJzKSB7XG4gICAgaWYgKGlzVW5kZWYoYXR0cnNba2V5XSkpIHtcbiAgICAgIGlmIChpc1hsaW5rKGtleSkpIHtcbiAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsIGdldFhsaW5rUHJvcChrZXkpKTtcbiAgICAgIH0gZWxzZSBpZiAoIWlzRW51bWVyYXRlZEF0dHIoa2V5KSkge1xuICAgICAgICBlbG0ucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNldEF0dHIgKGVsLCBrZXksIHZhbHVlKSB7XG4gIGlmIChlbC50YWdOYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgYmFzZVNldEF0dHIoZWwsIGtleSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKGlzQm9vbGVhbkF0dHIoa2V5KSkge1xuICAgIC8vIHNldCBhdHRyaWJ1dGUgZm9yIGJsYW5rIHZhbHVlXG4gICAgLy8gZS5nLiA8b3B0aW9uIGRpc2FibGVkPlNlbGVjdCBvbmU8L29wdGlvbj5cbiAgICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0ZWNobmljYWxseSBhbGxvd2Z1bGxzY3JlZW4gaXMgYSBib29sZWFuIGF0dHJpYnV0ZSBmb3IgPGlmcmFtZT4sXG4gICAgICAvLyBidXQgRmxhc2ggZXhwZWN0cyBhIHZhbHVlIG9mIFwidHJ1ZVwiIHdoZW4gdXNlZCBvbiA8ZW1iZWQ+IHRhZ1xuICAgICAgdmFsdWUgPSBrZXkgPT09ICdhbGxvd2Z1bGxzY3JlZW4nICYmIGVsLnRhZ05hbWUgPT09ICdFTUJFRCdcbiAgICAgICAgPyAndHJ1ZSdcbiAgICAgICAgOiBrZXk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRW51bWVyYXRlZEF0dHIoa2V5KSkge1xuICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpIHx8IHZhbHVlID09PSAnZmFsc2UnID8gJ2ZhbHNlJyA6ICd0cnVlJyk7XG4gIH0gZWxzZSBpZiAoaXNYbGluayhrZXkpKSB7XG4gICAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBnZXRYbGlua1Byb3Aoa2V5KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBiYXNlU2V0QXR0cihlbCwga2V5LCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZVNldEF0dHIgKGVsLCBrZXksIHZhbHVlKSB7XG4gIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICB9IGVsc2Uge1xuICAgIC8vICM3MTM4OiBJRTEwICYgMTEgZmlyZXMgaW5wdXQgZXZlbnQgd2hlbiBzZXR0aW5nIHBsYWNlaG9sZGVyIG9uXG4gICAgLy8gPHRleHRhcmVhPi4uLiBibG9jayB0aGUgZmlyc3QgaW5wdXQgZXZlbnQgYW5kIHJlbW92ZSB0aGUgYmxvY2tlclxuICAgIC8vIGltbWVkaWF0ZWx5LlxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChcbiAgICAgIGlzSUUgJiYgIWlzSUU5ICYmXG4gICAgICBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmXG4gICAgICBrZXkgPT09ICdwbGFjZWhvbGRlcicgJiYgIWVsLl9faWVwaFxuICAgICkge1xuICAgICAgdmFyIGJsb2NrZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIGJsb2NrZXIpO1xuICAgICAgfTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYmxvY2tlcik7XG4gICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmVcbiAgICAgIGVsLl9faWVwaCA9IHRydWU7IC8qIElFIHBsYWNlaG9sZGVyIHBhdGNoZWQgKi9cbiAgICB9XG4gICAgZWwuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICB9XG59XG5cbnZhciBhdHRycyA9IHtcbiAgY3JlYXRlOiB1cGRhdGVBdHRycyxcbiAgdXBkYXRlOiB1cGRhdGVBdHRyc1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gdXBkYXRlQ2xhc3MgKG9sZFZub2RlLCB2bm9kZSkge1xuICB2YXIgZWwgPSB2bm9kZS5lbG07XG4gIHZhciBkYXRhID0gdm5vZGUuZGF0YTtcbiAgdmFyIG9sZERhdGEgPSBvbGRWbm9kZS5kYXRhO1xuICBpZiAoXG4gICAgaXNVbmRlZihkYXRhLnN0YXRpY0NsYXNzKSAmJlxuICAgIGlzVW5kZWYoZGF0YS5jbGFzcykgJiYgKFxuICAgICAgaXNVbmRlZihvbGREYXRhKSB8fCAoXG4gICAgICAgIGlzVW5kZWYob2xkRGF0YS5zdGF0aWNDbGFzcykgJiZcbiAgICAgICAgaXNVbmRlZihvbGREYXRhLmNsYXNzKVxuICAgICAgKVxuICAgIClcbiAgKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgY2xzID0gZ2VuQ2xhc3NGb3JWbm9kZSh2bm9kZSk7XG5cbiAgLy8gaGFuZGxlIHRyYW5zaXRpb24gY2xhc3Nlc1xuICB2YXIgdHJhbnNpdGlvbkNsYXNzID0gZWwuX3RyYW5zaXRpb25DbGFzc2VzO1xuICBpZiAoaXNEZWYodHJhbnNpdGlvbkNsYXNzKSkge1xuICAgIGNscyA9IGNvbmNhdChjbHMsIHN0cmluZ2lmeUNsYXNzKHRyYW5zaXRpb25DbGFzcykpO1xuICB9XG5cbiAgLy8gc2V0IHRoZSBjbGFzc1xuICBpZiAoY2xzICE9PSBlbC5fcHJldkNsYXNzKSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG4gICAgZWwuX3ByZXZDbGFzcyA9IGNscztcbiAgfVxufVxuXG52YXIga2xhc3MgPSB7XG4gIGNyZWF0ZTogdXBkYXRlQ2xhc3MsXG4gIHVwZGF0ZTogdXBkYXRlQ2xhc3Ncbn1cblxuLyogICovXG5cbnZhciB2YWxpZERpdmlzaW9uQ2hhclJFID0gL1tcXHcpLitcXC1fJFxcXV0vO1xuXG5mdW5jdGlvbiBwYXJzZUZpbHRlcnMgKGV4cCkge1xuICB2YXIgaW5TaW5nbGUgPSBmYWxzZTtcbiAgdmFyIGluRG91YmxlID0gZmFsc2U7XG4gIHZhciBpblRlbXBsYXRlU3RyaW5nID0gZmFsc2U7XG4gIHZhciBpblJlZ2V4ID0gZmFsc2U7XG4gIHZhciBjdXJseSA9IDA7XG4gIHZhciBzcXVhcmUgPSAwO1xuICB2YXIgcGFyZW4gPSAwO1xuICB2YXIgbGFzdEZpbHRlckluZGV4ID0gMDtcbiAgdmFyIGMsIHByZXYsIGksIGV4cHJlc3Npb24sIGZpbHRlcnM7XG5cbiAgZm9yIChpID0gMDsgaSA8IGV4cC5sZW5ndGg7IGkrKykge1xuICAgIHByZXYgPSBjO1xuICAgIGMgPSBleHAuY2hhckNvZGVBdChpKTtcbiAgICBpZiAoaW5TaW5nbGUpIHtcbiAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIHsgaW5TaW5nbGUgPSBmYWxzZTsgfVxuICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcbiAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIHsgaW5Eb3VibGUgPSBmYWxzZTsgfVxuICAgIH0gZWxzZSBpZiAoaW5UZW1wbGF0ZVN0cmluZykge1xuICAgICAgaWYgKGMgPT09IDB4NjAgJiYgcHJldiAhPT0gMHg1QykgeyBpblRlbXBsYXRlU3RyaW5nID0gZmFsc2U7IH1cbiAgICB9IGVsc2UgaWYgKGluUmVnZXgpIHtcbiAgICAgIGlmIChjID09PSAweDJmICYmIHByZXYgIT09IDB4NUMpIHsgaW5SZWdleCA9IGZhbHNlOyB9XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuICAgICAgZXhwLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmXG4gICAgICBleHAuY2hhckNvZGVBdChpIC0gMSkgIT09IDB4N0MgJiZcbiAgICAgICFjdXJseSAmJiAhc3F1YXJlICYmICFwYXJlblxuICAgICkge1xuICAgICAgaWYgKGV4cHJlc3Npb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXG4gICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuICAgICAgICBleHByZXNzaW9uID0gZXhwLnNsaWNlKDAsIGkpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHB1c2hGaWx0ZXIoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgIGNhc2UgMHgyMjogaW5Eb3VibGUgPSB0cnVlOyBicmVhayAgICAgICAgIC8vIFwiXG4gICAgICAgIGNhc2UgMHgyNzogaW5TaW5nbGUgPSB0cnVlOyBicmVhayAgICAgICAgIC8vICdcbiAgICAgICAgY2FzZSAweDYwOiBpblRlbXBsYXRlU3RyaW5nID0gdHJ1ZTsgYnJlYWsgLy8gYFxuICAgICAgICBjYXNlIDB4Mjg6IHBhcmVuKys7IGJyZWFrICAgICAgICAgICAgICAgICAvLyAoXG4gICAgICAgIGNhc2UgMHgyOTogcGFyZW4tLTsgYnJlYWsgICAgICAgICAgICAgICAgIC8vIClcbiAgICAgICAgY2FzZSAweDVCOiBzcXVhcmUrKzsgYnJlYWsgICAgICAgICAgICAgICAgLy8gW1xuICAgICAgICBjYXNlIDB4NUQ6IHNxdWFyZS0tOyBicmVhayAgICAgICAgICAgICAgICAvLyBdXG4gICAgICAgIGNhc2UgMHg3QjogY3VybHkrKzsgYnJlYWsgICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgY2FzZSAweDdEOiBjdXJseS0tOyBicmVhayAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgfVxuICAgICAgaWYgKGMgPT09IDB4MmYpIHsgLy8gL1xuICAgICAgICB2YXIgaiA9IGkgLSAxO1xuICAgICAgICB2YXIgcCA9ICh2b2lkIDApO1xuICAgICAgICAvLyBmaW5kIGZpcnN0IG5vbi13aGl0ZXNwYWNlIHByZXYgY2hhclxuICAgICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBwID0gZXhwLmNoYXJBdChqKTtcbiAgICAgICAgICBpZiAocCAhPT0gJyAnKSB7IGJyZWFrIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXAgfHwgIXZhbGlkRGl2aXNpb25DaGFyUkUudGVzdChwKSkge1xuICAgICAgICAgIGluUmVnZXggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGV4cHJlc3Npb24gPT09IHVuZGVmaW5lZCkge1xuICAgIGV4cHJlc3Npb24gPSBleHAuc2xpY2UoMCwgaSkudHJpbSgpO1xuICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuICAgIHB1c2hGaWx0ZXIoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHB1c2hGaWx0ZXIgKCkge1xuICAgIChmaWx0ZXJzIHx8IChmaWx0ZXJzID0gW10pKS5wdXNoKGV4cC5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKSk7XG4gICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG4gIH1cblxuICBpZiAoZmlsdGVycykge1xuICAgIGZvciAoaSA9IDA7IGkgPCBmaWx0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBleHByZXNzaW9uID0gd3JhcEZpbHRlcihleHByZXNzaW9uLCBmaWx0ZXJzW2ldKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZXhwcmVzc2lvblxufVxuXG5mdW5jdGlvbiB3cmFwRmlsdGVyIChleHAsIGZpbHRlcikge1xuICB2YXIgaSA9IGZpbHRlci5pbmRleE9mKCcoJyk7XG4gIGlmIChpIDwgMCkge1xuICAgIC8vIF9mOiByZXNvbHZlRmlsdGVyXG4gICAgcmV0dXJuIChcIl9mKFxcXCJcIiArIGZpbHRlciArIFwiXFxcIikoXCIgKyBleHAgKyBcIilcIilcbiAgfSBlbHNlIHtcbiAgICB2YXIgbmFtZSA9IGZpbHRlci5zbGljZSgwLCBpKTtcbiAgICB2YXIgYXJncyA9IGZpbHRlci5zbGljZShpICsgMSk7XG4gICAgcmV0dXJuIChcIl9mKFxcXCJcIiArIG5hbWUgKyBcIlxcXCIpKFwiICsgZXhwICsgKGFyZ3MgIT09ICcpJyA/ICcsJyArIGFyZ3MgOiBhcmdzKSlcbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gYmFzZVdhcm4gKG1zZykge1xuICBjb25zb2xlLmVycm9yKChcIltWdWUgY29tcGlsZXJdOiBcIiArIG1zZykpO1xufVxuXG5mdW5jdGlvbiBwbHVja01vZHVsZUZ1bmN0aW9uIChcbiAgbW9kdWxlcyxcbiAga2V5XG4pIHtcbiAgcmV0dXJuIG1vZHVsZXNcbiAgICA/IG1vZHVsZXMubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtW2tleV07IH0pLmZpbHRlcihmdW5jdGlvbiAoXykgeyByZXR1cm4gXzsgfSlcbiAgICA6IFtdXG59XG5cbmZ1bmN0aW9uIGFkZFByb3AgKGVsLCBuYW1lLCB2YWx1ZSkge1xuICAoZWwucHJvcHMgfHwgKGVsLnByb3BzID0gW10pKS5wdXNoKHsgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlIH0pO1xuICBlbC5wbGFpbiA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRyIChlbCwgbmFtZSwgdmFsdWUpIHtcbiAgKGVsLmF0dHJzIHx8IChlbC5hdHRycyA9IFtdKSkucHVzaCh7IG5hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgZWwucGxhaW4gPSBmYWxzZTtcbn1cblxuLy8gYWRkIGEgcmF3IGF0dHIgKHVzZSB0aGlzIGluIHByZVRyYW5zZm9ybXMpXG5mdW5jdGlvbiBhZGRSYXdBdHRyIChlbCwgbmFtZSwgdmFsdWUpIHtcbiAgZWwuYXR0cnNNYXBbbmFtZV0gPSB2YWx1ZTtcbiAgZWwuYXR0cnNMaXN0LnB1c2goeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZERpcmVjdGl2ZSAoXG4gIGVsLFxuICBuYW1lLFxuICByYXdOYW1lLFxuICB2YWx1ZSxcbiAgYXJnLFxuICBtb2RpZmllcnNcbikge1xuICAoZWwuZGlyZWN0aXZlcyB8fCAoZWwuZGlyZWN0aXZlcyA9IFtdKSkucHVzaCh7IG5hbWU6IG5hbWUsIHJhd05hbWU6IHJhd05hbWUsIHZhbHVlOiB2YWx1ZSwgYXJnOiBhcmcsIG1vZGlmaWVyczogbW9kaWZpZXJzIH0pO1xuICBlbC5wbGFpbiA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBhZGRIYW5kbGVyIChcbiAgZWwsXG4gIG5hbWUsXG4gIHZhbHVlLFxuICBtb2RpZmllcnMsXG4gIGltcG9ydGFudCxcbiAgd2FyblxuKSB7XG4gIG1vZGlmaWVycyA9IG1vZGlmaWVycyB8fCBlbXB0eU9iamVjdDtcbiAgLy8gd2FybiBwcmV2ZW50IGFuZCBwYXNzaXZlIG1vZGlmaWVyXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoXG4gICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybiAmJlxuICAgIG1vZGlmaWVycy5wcmV2ZW50ICYmIG1vZGlmaWVycy5wYXNzaXZlXG4gICkge1xuICAgIHdhcm4oXG4gICAgICAncGFzc2l2ZSBhbmQgcHJldmVudCBjYW5cXCd0IGJlIHVzZWQgdG9nZXRoZXIuICcgK1xuICAgICAgJ1Bhc3NpdmUgaGFuZGxlciBjYW5cXCd0IHByZXZlbnQgZGVmYXVsdCBldmVudC4nXG4gICAgKTtcbiAgfVxuXG4gIC8vIGNoZWNrIGNhcHR1cmUgbW9kaWZpZXJcbiAgaWYgKG1vZGlmaWVycy5jYXB0dXJlKSB7XG4gICAgZGVsZXRlIG1vZGlmaWVycy5jYXB0dXJlO1xuICAgIG5hbWUgPSAnIScgKyBuYW1lOyAvLyBtYXJrIHRoZSBldmVudCBhcyBjYXB0dXJlZFxuICB9XG4gIGlmIChtb2RpZmllcnMub25jZSkge1xuICAgIGRlbGV0ZSBtb2RpZmllcnMub25jZTtcbiAgICBuYW1lID0gJ34nICsgbmFtZTsgLy8gbWFyayB0aGUgZXZlbnQgYXMgb25jZVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAobW9kaWZpZXJzLnBhc3NpdmUpIHtcbiAgICBkZWxldGUgbW9kaWZpZXJzLnBhc3NpdmU7XG4gICAgbmFtZSA9ICcmJyArIG5hbWU7IC8vIG1hcmsgdGhlIGV2ZW50IGFzIHBhc3NpdmVcbiAgfVxuXG4gIC8vIG5vcm1hbGl6ZSBjbGljay5yaWdodCBhbmQgY2xpY2subWlkZGxlIHNpbmNlIHRoZXkgZG9uJ3QgYWN0dWFsbHkgZmlyZVxuICAvLyB0aGlzIGlzIHRlY2huaWNhbGx5IGJyb3dzZXItc3BlY2lmaWMsIGJ1dCBhdCBsZWFzdCBmb3Igbm93IGJyb3dzZXJzIGFyZVxuICAvLyB0aGUgb25seSB0YXJnZXQgZW52cyB0aGF0IGhhdmUgcmlnaHQvbWlkZGxlIGNsaWNrcy5cbiAgaWYgKG5hbWUgPT09ICdjbGljaycpIHtcbiAgICBpZiAobW9kaWZpZXJzLnJpZ2h0KSB7XG4gICAgICBuYW1lID0gJ2NvbnRleHRtZW51JztcbiAgICAgIGRlbGV0ZSBtb2RpZmllcnMucmlnaHQ7XG4gICAgfSBlbHNlIGlmIChtb2RpZmllcnMubWlkZGxlKSB7XG4gICAgICBuYW1lID0gJ21vdXNldXAnO1xuICAgIH1cbiAgfVxuXG4gIHZhciBldmVudHM7XG4gIGlmIChtb2RpZmllcnMubmF0aXZlKSB7XG4gICAgZGVsZXRlIG1vZGlmaWVycy5uYXRpdmU7XG4gICAgZXZlbnRzID0gZWwubmF0aXZlRXZlbnRzIHx8IChlbC5uYXRpdmVFdmVudHMgPSB7fSk7XG4gIH0gZWxzZSB7XG4gICAgZXZlbnRzID0gZWwuZXZlbnRzIHx8IChlbC5ldmVudHMgPSB7fSk7XG4gIH1cblxuICB2YXIgbmV3SGFuZGxlciA9IHtcbiAgICB2YWx1ZTogdmFsdWUudHJpbSgpXG4gIH07XG4gIGlmIChtb2RpZmllcnMgIT09IGVtcHR5T2JqZWN0KSB7XG4gICAgbmV3SGFuZGxlci5tb2RpZmllcnMgPSBtb2RpZmllcnM7XG4gIH1cblxuICB2YXIgaGFuZGxlcnMgPSBldmVudHNbbmFtZV07XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVycykpIHtcbiAgICBpbXBvcnRhbnQgPyBoYW5kbGVycy51bnNoaWZ0KG5ld0hhbmRsZXIpIDogaGFuZGxlcnMucHVzaChuZXdIYW5kbGVyKTtcbiAgfSBlbHNlIGlmIChoYW5kbGVycykge1xuICAgIGV2ZW50c1tuYW1lXSA9IGltcG9ydGFudCA/IFtuZXdIYW5kbGVyLCBoYW5kbGVyc10gOiBbaGFuZGxlcnMsIG5ld0hhbmRsZXJdO1xuICB9IGVsc2Uge1xuICAgIGV2ZW50c1tuYW1lXSA9IG5ld0hhbmRsZXI7XG4gIH1cblxuICBlbC5wbGFpbiA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBnZXRCaW5kaW5nQXR0ciAoXG4gIGVsLFxuICBuYW1lLFxuICBnZXRTdGF0aWNcbikge1xuICB2YXIgZHluYW1pY1ZhbHVlID1cbiAgICBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnOicgKyBuYW1lKSB8fFxuICAgIGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWJpbmQ6JyArIG5hbWUpO1xuICBpZiAoZHluYW1pY1ZhbHVlICE9IG51bGwpIHtcbiAgICByZXR1cm4gcGFyc2VGaWx0ZXJzKGR5bmFtaWNWYWx1ZSlcbiAgfSBlbHNlIGlmIChnZXRTdGF0aWMgIT09IGZhbHNlKSB7XG4gICAgdmFyIHN0YXRpY1ZhbHVlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgbmFtZSk7XG4gICAgaWYgKHN0YXRpY1ZhbHVlICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdGF0aWNWYWx1ZSlcbiAgICB9XG4gIH1cbn1cblxuLy8gbm90ZTogdGhpcyBvbmx5IHJlbW92ZXMgdGhlIGF0dHIgZnJvbSB0aGUgQXJyYXkgKGF0dHJzTGlzdCkgc28gdGhhdCBpdFxuLy8gZG9lc24ndCBnZXQgcHJvY2Vzc2VkIGJ5IHByb2Nlc3NBdHRycy5cbi8vIEJ5IGRlZmF1bHQgaXQgZG9lcyBOT1QgcmVtb3ZlIGl0IGZyb20gdGhlIG1hcCAoYXR0cnNNYXApIGJlY2F1c2UgdGhlIG1hcCBpc1xuLy8gbmVlZGVkIGR1cmluZyBjb2RlZ2VuLlxuZnVuY3Rpb24gZ2V0QW5kUmVtb3ZlQXR0ciAoXG4gIGVsLFxuICBuYW1lLFxuICByZW1vdmVGcm9tTWFwXG4pIHtcbiAgdmFyIHZhbDtcbiAgaWYgKCh2YWwgPSBlbC5hdHRyc01hcFtuYW1lXSkgIT0gbnVsbCkge1xuICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0O1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmIChsaXN0W2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChyZW1vdmVGcm9tTWFwKSB7XG4gICAgZGVsZXRlIGVsLmF0dHJzTWFwW25hbWVdO1xuICB9XG4gIHJldHVybiB2YWxcbn1cblxuLyogICovXG5cbi8qKlxuICogQ3Jvc3MtcGxhdGZvcm0gY29kZSBnZW5lcmF0aW9uIGZvciBjb21wb25lbnQgdi1tb2RlbFxuICovXG5mdW5jdGlvbiBnZW5Db21wb25lbnRNb2RlbCAoXG4gIGVsLFxuICB2YWx1ZSxcbiAgbW9kaWZpZXJzXG4pIHtcbiAgdmFyIHJlZiA9IG1vZGlmaWVycyB8fCB7fTtcbiAgdmFyIG51bWJlciA9IHJlZi5udW1iZXI7XG4gIHZhciB0cmltID0gcmVmLnRyaW07XG5cbiAgdmFyIGJhc2VWYWx1ZUV4cHJlc3Npb24gPSAnJCR2JztcbiAgdmFyIHZhbHVlRXhwcmVzc2lvbiA9IGJhc2VWYWx1ZUV4cHJlc3Npb247XG4gIGlmICh0cmltKSB7XG4gICAgdmFsdWVFeHByZXNzaW9uID1cbiAgICAgIFwiKHR5cGVvZiBcIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyBcIiA9PT0gJ3N0cmluZydcIiArXG4gICAgICBcIj8gXCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgXCIudHJpbSgpXCIgK1xuICAgICAgXCI6IFwiICsgYmFzZVZhbHVlRXhwcmVzc2lvbiArIFwiKVwiO1xuICB9XG4gIGlmIChudW1iZXIpIHtcbiAgICB2YWx1ZUV4cHJlc3Npb24gPSBcIl9uKFwiICsgdmFsdWVFeHByZXNzaW9uICsgXCIpXCI7XG4gIH1cbiAgdmFyIGFzc2lnbm1lbnQgPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVFeHByZXNzaW9uKTtcblxuICBlbC5tb2RlbCA9IHtcbiAgICB2YWx1ZTogKFwiKFwiICsgdmFsdWUgKyBcIilcIiksXG4gICAgZXhwcmVzc2lvbjogKFwiXFxcIlwiICsgdmFsdWUgKyBcIlxcXCJcIiksXG4gICAgY2FsbGJhY2s6IChcImZ1bmN0aW9uIChcIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyBcIikge1wiICsgYXNzaWdubWVudCArIFwifVwiKVxuICB9O1xufVxuXG4vKipcbiAqIENyb3NzLXBsYXRmb3JtIGNvZGVnZW4gaGVscGVyIGZvciBnZW5lcmF0aW5nIHYtbW9kZWwgdmFsdWUgYXNzaWdubWVudCBjb2RlLlxuICovXG5mdW5jdGlvbiBnZW5Bc3NpZ25tZW50Q29kZSAoXG4gIHZhbHVlLFxuICBhc3NpZ25tZW50XG4pIHtcbiAgdmFyIHJlcyA9IHBhcnNlTW9kZWwodmFsdWUpO1xuICBpZiAocmVzLmtleSA9PT0gbnVsbCkge1xuICAgIHJldHVybiAodmFsdWUgKyBcIj1cIiArIGFzc2lnbm1lbnQpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcIiRzZXQoXCIgKyAocmVzLmV4cCkgKyBcIiwgXCIgKyAocmVzLmtleSkgKyBcIiwgXCIgKyBhc3NpZ25tZW50ICsgXCIpXCIpXG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhIHYtbW9kZWwgZXhwcmVzc2lvbiBpbnRvIGEgYmFzZSBwYXRoIGFuZCBhIGZpbmFsIGtleSBzZWdtZW50LlxuICogSGFuZGxlcyBib3RoIGRvdC1wYXRoIGFuZCBwb3NzaWJsZSBzcXVhcmUgYnJhY2tldHMuXG4gKlxuICogUG9zc2libGUgY2FzZXM6XG4gKlxuICogLSB0ZXN0XG4gKiAtIHRlc3Rba2V5XVxuICogLSB0ZXN0W3Rlc3QxW2tleV1dXG4gKiAtIHRlc3RbXCJhXCJdW2tleV1cbiAqIC0geHh4LnRlc3RbYVthXS50ZXN0MVtrZXldXVxuICogLSB0ZXN0Lnh4eC5hW1wiYXNhXCJdW3Rlc3QxW2tleV1dXG4gKlxuICovXG5cbnZhciBsZW47XG52YXIgc3RyO1xudmFyIGNocjtcbnZhciBpbmRleCQxO1xudmFyIGV4cHJlc3Npb25Qb3M7XG52YXIgZXhwcmVzc2lvbkVuZFBvcztcblxuXG5cbmZ1bmN0aW9uIHBhcnNlTW9kZWwgKHZhbCkge1xuICAvLyBGaXggaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS9wdWxsLzc3MzBcbiAgLy8gYWxsb3cgdi1tb2RlbD1cIm9iai52YWwgXCIgKHRyYWlsaW5nIHdoaXRlc3BhY2UpXG4gIHZhbCA9IHZhbC50cmltKCk7XG4gIGxlbiA9IHZhbC5sZW5ndGg7XG5cbiAgaWYgKHZhbC5pbmRleE9mKCdbJykgPCAwIHx8IHZhbC5sYXN0SW5kZXhPZignXScpIDwgbGVuIC0gMSkge1xuICAgIGluZGV4JDEgPSB2YWwubGFzdEluZGV4T2YoJy4nKTtcbiAgICBpZiAoaW5kZXgkMSA+IC0xKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBleHA6IHZhbC5zbGljZSgwLCBpbmRleCQxKSxcbiAgICAgICAga2V5OiAnXCInICsgdmFsLnNsaWNlKGluZGV4JDEgKyAxKSArICdcIidcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXhwOiB2YWwsXG4gICAgICAgIGtleTogbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0ciA9IHZhbDtcbiAgaW5kZXgkMSA9IGV4cHJlc3Npb25Qb3MgPSBleHByZXNzaW9uRW5kUG9zID0gMDtcblxuICB3aGlsZSAoIWVvZigpKSB7XG4gICAgY2hyID0gbmV4dCgpO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChpc1N0cmluZ1N0YXJ0KGNocikpIHtcbiAgICAgIHBhcnNlU3RyaW5nKGNocik7XG4gICAgfSBlbHNlIGlmIChjaHIgPT09IDB4NUIpIHtcbiAgICAgIHBhcnNlQnJhY2tldChjaHIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZXhwOiB2YWwuc2xpY2UoMCwgZXhwcmVzc2lvblBvcyksXG4gICAga2V5OiB2YWwuc2xpY2UoZXhwcmVzc2lvblBvcyArIDEsIGV4cHJlc3Npb25FbmRQb3MpXG4gIH1cbn1cblxuZnVuY3Rpb24gbmV4dCAoKSB7XG4gIHJldHVybiBzdHIuY2hhckNvZGVBdCgrK2luZGV4JDEpXG59XG5cbmZ1bmN0aW9uIGVvZiAoKSB7XG4gIHJldHVybiBpbmRleCQxID49IGxlblxufVxuXG5mdW5jdGlvbiBpc1N0cmluZ1N0YXJ0IChjaHIpIHtcbiAgcmV0dXJuIGNociA9PT0gMHgyMiB8fCBjaHIgPT09IDB4Mjdcbn1cblxuZnVuY3Rpb24gcGFyc2VCcmFja2V0IChjaHIpIHtcbiAgdmFyIGluQnJhY2tldCA9IDE7XG4gIGV4cHJlc3Npb25Qb3MgPSBpbmRleCQxO1xuICB3aGlsZSAoIWVvZigpKSB7XG4gICAgY2hyID0gbmV4dCgpO1xuICAgIGlmIChpc1N0cmluZ1N0YXJ0KGNocikpIHtcbiAgICAgIHBhcnNlU3RyaW5nKGNocik7XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBpZiAoY2hyID09PSAweDVCKSB7IGluQnJhY2tldCsrOyB9XG4gICAgaWYgKGNociA9PT0gMHg1RCkgeyBpbkJyYWNrZXQtLTsgfVxuICAgIGlmIChpbkJyYWNrZXQgPT09IDApIHtcbiAgICAgIGV4cHJlc3Npb25FbmRQb3MgPSBpbmRleCQxO1xuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VTdHJpbmcgKGNocikge1xuICB2YXIgc3RyaW5nUXVvdGUgPSBjaHI7XG4gIHdoaWxlICghZW9mKCkpIHtcbiAgICBjaHIgPSBuZXh0KCk7XG4gICAgaWYgKGNociA9PT0gc3RyaW5nUXVvdGUpIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59XG5cbi8qICAqL1xuXG52YXIgd2FybiQxO1xuXG4vLyBpbiBzb21lIGNhc2VzLCB0aGUgZXZlbnQgdXNlZCBoYXMgdG8gYmUgZGV0ZXJtaW5lZCBhdCBydW50aW1lXG4vLyBzbyB3ZSB1c2VkIHNvbWUgcmVzZXJ2ZWQgdG9rZW5zIGR1cmluZyBjb21waWxlLlxudmFyIFJBTkdFX1RPS0VOID0gJ19fcic7XG52YXIgQ0hFQ0tCT1hfUkFESU9fVE9LRU4gPSAnX19jJztcblxuZnVuY3Rpb24gbW9kZWwgKFxuICBlbCxcbiAgZGlyLFxuICBfd2FyblxuKSB7XG4gIHdhcm4kMSA9IF93YXJuO1xuICB2YXIgdmFsdWUgPSBkaXIudmFsdWU7XG4gIHZhciBtb2RpZmllcnMgPSBkaXIubW9kaWZpZXJzO1xuICB2YXIgdGFnID0gZWwudGFnO1xuICB2YXIgdHlwZSA9IGVsLmF0dHJzTWFwLnR5cGU7XG5cbiAge1xuICAgIC8vIGlucHV0cyB3aXRoIHR5cGU9XCJmaWxlXCIgYXJlIHJlYWQgb25seSBhbmQgc2V0dGluZyB0aGUgaW5wdXQnc1xuICAgIC8vIHZhbHVlIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAgaWYgKHRhZyA9PT0gJ2lucHV0JyAmJiB0eXBlID09PSAnZmlsZScpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgXCI8XCIgKyAoZWwudGFnKSArIFwiIHYtbW9kZWw9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCIgdHlwZT1cXFwiZmlsZVxcXCI+OlxcblwiICtcbiAgICAgICAgXCJGaWxlIGlucHV0cyBhcmUgcmVhZCBvbmx5LiBVc2UgYSB2LW9uOmNoYW5nZSBsaXN0ZW5lciBpbnN0ZWFkLlwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlbC5jb21wb25lbnQpIHtcbiAgICBnZW5Db21wb25lbnRNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG4gICAgLy8gY29tcG9uZW50IHYtbW9kZWwgZG9lc24ndCBuZWVkIGV4dHJhIHJ1bnRpbWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIGlmICh0YWcgPT09ICdzZWxlY3QnKSB7XG4gICAgZ2VuU2VsZWN0KGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTtcbiAgfSBlbHNlIGlmICh0YWcgPT09ICdpbnB1dCcgJiYgdHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgIGdlbkNoZWNrYm94TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpO1xuICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2lucHV0JyAmJiB0eXBlID09PSAncmFkaW8nKSB7XG4gICAgZ2VuUmFkaW9Nb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG4gIH0gZWxzZSBpZiAodGFnID09PSAnaW5wdXQnIHx8IHRhZyA9PT0gJ3RleHRhcmVhJykge1xuICAgIGdlbkRlZmF1bHRNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG4gIH0gZWxzZSBpZiAoIWNvbmZpZy5pc1Jlc2VydmVkVGFnKHRhZykpIHtcbiAgICBnZW5Db21wb25lbnRNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7XG4gICAgLy8gY29tcG9uZW50IHYtbW9kZWwgZG9lc24ndCBuZWVkIGV4dHJhIHJ1bnRpbWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIHtcbiAgICB3YXJuJDEoXG4gICAgICBcIjxcIiArIChlbC50YWcpICsgXCIgdi1tb2RlbD1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIj46IFwiICtcbiAgICAgIFwidi1tb2RlbCBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgZWxlbWVudCB0eXBlLiBcIiArXG4gICAgICAnSWYgeW91IGFyZSB3b3JraW5nIHdpdGggY29udGVudGVkaXRhYmxlLCBpdFxcJ3MgcmVjb21tZW5kZWQgdG8gJyArXG4gICAgICAnd3JhcCBhIGxpYnJhcnkgZGVkaWNhdGVkIGZvciB0aGF0IHB1cnBvc2UgaW5zaWRlIGEgY3VzdG9tIGNvbXBvbmVudC4nXG4gICAgKTtcbiAgfVxuXG4gIC8vIGVuc3VyZSBydW50aW1lIGRpcmVjdGl2ZSBtZXRhZGF0YVxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBnZW5DaGVja2JveE1vZGVsIChcbiAgZWwsXG4gIHZhbHVlLFxuICBtb2RpZmllcnNcbikge1xuICB2YXIgbnVtYmVyID0gbW9kaWZpZXJzICYmIG1vZGlmaWVycy5udW1iZXI7XG4gIHZhciB2YWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3ZhbHVlJykgfHwgJ251bGwnO1xuICB2YXIgdHJ1ZVZhbHVlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAndHJ1ZS12YWx1ZScpIHx8ICd0cnVlJztcbiAgdmFyIGZhbHNlVmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdmYWxzZS12YWx1ZScpIHx8ICdmYWxzZSc7XG4gIGFkZFByb3AoZWwsICdjaGVja2VkJyxcbiAgICBcIkFycmF5LmlzQXJyYXkoXCIgKyB2YWx1ZSArIFwiKVwiICtcbiAgICBcIj9faShcIiArIHZhbHVlICsgXCIsXCIgKyB2YWx1ZUJpbmRpbmcgKyBcIik+LTFcIiArIChcbiAgICAgIHRydWVWYWx1ZUJpbmRpbmcgPT09ICd0cnVlJ1xuICAgICAgICA/IChcIjooXCIgKyB2YWx1ZSArIFwiKVwiKVxuICAgICAgICA6IChcIjpfcShcIiArIHZhbHVlICsgXCIsXCIgKyB0cnVlVmFsdWVCaW5kaW5nICsgXCIpXCIpXG4gICAgKVxuICApO1xuICBhZGRIYW5kbGVyKGVsLCAnY2hhbmdlJyxcbiAgICBcInZhciAkJGE9XCIgKyB2YWx1ZSArIFwiLFwiICtcbiAgICAgICAgJyQkZWw9JGV2ZW50LnRhcmdldCwnICtcbiAgICAgICAgXCIkJGM9JCRlbC5jaGVja2VkPyhcIiArIHRydWVWYWx1ZUJpbmRpbmcgKyBcIik6KFwiICsgZmFsc2VWYWx1ZUJpbmRpbmcgKyBcIik7XCIgK1xuICAgICdpZihBcnJheS5pc0FycmF5KCQkYSkpeycgK1xuICAgICAgXCJ2YXIgJCR2PVwiICsgKG51bWJlciA/ICdfbignICsgdmFsdWVCaW5kaW5nICsgJyknIDogdmFsdWVCaW5kaW5nKSArIFwiLFwiICtcbiAgICAgICAgICAnJCRpPV9pKCQkYSwkJHYpOycgK1xuICAgICAgXCJpZigkJGVsLmNoZWNrZWQpeyQkaTwwJiYoXCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGEuY29uY2F0KFskJHZdKScpKSArIFwiKX1cIiArXG4gICAgICBcImVsc2V7JCRpPi0xJiYoXCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGEuc2xpY2UoMCwkJGkpLmNvbmNhdCgkJGEuc2xpY2UoJCRpKzEpKScpKSArIFwiKX1cIiArXG4gICAgXCJ9ZWxzZXtcIiArIChnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgJyQkYycpKSArIFwifVwiLFxuICAgIG51bGwsIHRydWVcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2VuUmFkaW9Nb2RlbCAoXG4gIGVsLFxuICB2YWx1ZSxcbiAgbW9kaWZpZXJzXG4pIHtcbiAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyO1xuICB2YXIgdmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICd2YWx1ZScpIHx8ICdudWxsJztcbiAgdmFsdWVCaW5kaW5nID0gbnVtYmVyID8gKFwiX24oXCIgKyB2YWx1ZUJpbmRpbmcgKyBcIilcIikgOiB2YWx1ZUJpbmRpbmc7XG4gIGFkZFByb3AoZWwsICdjaGVja2VkJywgKFwiX3EoXCIgKyB2YWx1ZSArIFwiLFwiICsgdmFsdWVCaW5kaW5nICsgXCIpXCIpKTtcbiAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsIGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCB2YWx1ZUJpbmRpbmcpLCBudWxsLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gZ2VuU2VsZWN0IChcbiAgZWwsXG4gIHZhbHVlLFxuICBtb2RpZmllcnNcbikge1xuICB2YXIgbnVtYmVyID0gbW9kaWZpZXJzICYmIG1vZGlmaWVycy5udW1iZXI7XG4gIHZhciBzZWxlY3RlZFZhbCA9IFwiQXJyYXkucHJvdG90eXBlLmZpbHRlclwiICtcbiAgICBcIi5jYWxsKCRldmVudC50YXJnZXQub3B0aW9ucyxmdW5jdGlvbihvKXtyZXR1cm4gby5zZWxlY3RlZH0pXCIgK1xuICAgIFwiLm1hcChmdW5jdGlvbihvKXt2YXIgdmFsID0gXFxcIl92YWx1ZVxcXCIgaW4gbyA/IG8uX3ZhbHVlIDogby52YWx1ZTtcIiArXG4gICAgXCJyZXR1cm4gXCIgKyAobnVtYmVyID8gJ19uKHZhbCknIDogJ3ZhbCcpICsgXCJ9KVwiO1xuXG4gIHZhciBhc3NpZ25tZW50ID0gJyRldmVudC50YXJnZXQubXVsdGlwbGUgPyAkJHNlbGVjdGVkVmFsIDogJCRzZWxlY3RlZFZhbFswXSc7XG4gIHZhciBjb2RlID0gXCJ2YXIgJCRzZWxlY3RlZFZhbCA9IFwiICsgc2VsZWN0ZWRWYWwgKyBcIjtcIjtcbiAgY29kZSA9IGNvZGUgKyBcIiBcIiArIChnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgYXNzaWdubWVudCkpO1xuICBhZGRIYW5kbGVyKGVsLCAnY2hhbmdlJywgY29kZSwgbnVsbCwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGdlbkRlZmF1bHRNb2RlbCAoXG4gIGVsLFxuICB2YWx1ZSxcbiAgbW9kaWZpZXJzXG4pIHtcbiAgdmFyIHR5cGUgPSBlbC5hdHRyc01hcC50eXBlO1xuXG4gIC8vIHdhcm4gaWYgdi1iaW5kOnZhbHVlIGNvbmZsaWN0cyB3aXRoIHYtbW9kZWxcbiAgLy8gZXhjZXB0IGZvciBpbnB1dHMgd2l0aCB2LWJpbmQ6dHlwZVxuICB7XG4gICAgdmFyIHZhbHVlJDEgPSBlbC5hdHRyc01hcFsndi1iaW5kOnZhbHVlJ10gfHwgZWwuYXR0cnNNYXBbJzp2YWx1ZSddO1xuICAgIHZhciB0eXBlQmluZGluZyA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dHlwZSddIHx8IGVsLmF0dHJzTWFwWyc6dHlwZSddO1xuICAgIGlmICh2YWx1ZSQxICYmICF0eXBlQmluZGluZykge1xuICAgICAgdmFyIGJpbmRpbmcgPSBlbC5hdHRyc01hcFsndi1iaW5kOnZhbHVlJ10gPyAndi1iaW5kOnZhbHVlJyA6ICc6dmFsdWUnO1xuICAgICAgd2FybiQxKFxuICAgICAgICBiaW5kaW5nICsgXCI9XFxcIlwiICsgdmFsdWUkMSArIFwiXFxcIiBjb25mbGljdHMgd2l0aCB2LW1vZGVsIG9uIHRoZSBzYW1lIGVsZW1lbnQgXCIgK1xuICAgICAgICAnYmVjYXVzZSB0aGUgbGF0dGVyIGFscmVhZHkgZXhwYW5kcyB0byBhIHZhbHVlIGJpbmRpbmcgaW50ZXJuYWxseSdcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHJlZiA9IG1vZGlmaWVycyB8fCB7fTtcbiAgdmFyIGxhenkgPSByZWYubGF6eTtcbiAgdmFyIG51bWJlciA9IHJlZi5udW1iZXI7XG4gIHZhciB0cmltID0gcmVmLnRyaW07XG4gIHZhciBuZWVkQ29tcG9zaXRpb25HdWFyZCA9ICFsYXp5ICYmIHR5cGUgIT09ICdyYW5nZSc7XG4gIHZhciBldmVudCA9IGxhenlcbiAgICA/ICdjaGFuZ2UnXG4gICAgOiB0eXBlID09PSAncmFuZ2UnXG4gICAgICA/IFJBTkdFX1RPS0VOXG4gICAgICA6ICdpbnB1dCc7XG5cbiAgdmFyIHZhbHVlRXhwcmVzc2lvbiA9ICckZXZlbnQudGFyZ2V0LnZhbHVlJztcbiAgaWYgKHRyaW0pIHtcbiAgICB2YWx1ZUV4cHJlc3Npb24gPSBcIiRldmVudC50YXJnZXQudmFsdWUudHJpbSgpXCI7XG4gIH1cbiAgaWYgKG51bWJlcikge1xuICAgIHZhbHVlRXhwcmVzc2lvbiA9IFwiX24oXCIgKyB2YWx1ZUV4cHJlc3Npb24gKyBcIilcIjtcbiAgfVxuXG4gIHZhciBjb2RlID0gZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIHZhbHVlRXhwcmVzc2lvbik7XG4gIGlmIChuZWVkQ29tcG9zaXRpb25HdWFyZCkge1xuICAgIGNvZGUgPSBcImlmKCRldmVudC50YXJnZXQuY29tcG9zaW5nKXJldHVybjtcIiArIGNvZGU7XG4gIH1cblxuICBhZGRQcm9wKGVsLCAndmFsdWUnLCAoXCIoXCIgKyB2YWx1ZSArIFwiKVwiKSk7XG4gIGFkZEhhbmRsZXIoZWwsIGV2ZW50LCBjb2RlLCBudWxsLCB0cnVlKTtcbiAgaWYgKHRyaW0gfHwgbnVtYmVyKSB7XG4gICAgYWRkSGFuZGxlcihlbCwgJ2JsdXInLCAnJGZvcmNlVXBkYXRlKCknKTtcbiAgfVxufVxuXG4vKiAgKi9cblxuLy8gbm9ybWFsaXplIHYtbW9kZWwgZXZlbnQgdG9rZW5zIHRoYXQgY2FuIG9ubHkgYmUgZGV0ZXJtaW5lZCBhdCBydW50aW1lLlxuLy8gaXQncyBpbXBvcnRhbnQgdG8gcGxhY2UgdGhlIGV2ZW50IGFzIHRoZSBmaXJzdCBpbiB0aGUgYXJyYXkgYmVjYXVzZVxuLy8gdGhlIHdob2xlIHBvaW50IGlzIGVuc3VyaW5nIHRoZSB2LW1vZGVsIGNhbGxiYWNrIGdldHMgY2FsbGVkIGJlZm9yZVxuLy8gdXNlci1hdHRhY2hlZCBoYW5kbGVycy5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50cyAob24pIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc0RlZihvbltSQU5HRV9UT0tFTl0pKSB7XG4gICAgLy8gSUUgaW5wdXRbdHlwZT1yYW5nZV0gb25seSBzdXBwb3J0cyBgY2hhbmdlYCBldmVudFxuICAgIHZhciBldmVudCA9IGlzSUUgPyAnY2hhbmdlJyA6ICdpbnB1dCc7XG4gICAgb25bZXZlbnRdID0gW10uY29uY2F0KG9uW1JBTkdFX1RPS0VOXSwgb25bZXZlbnRdIHx8IFtdKTtcbiAgICBkZWxldGUgb25bUkFOR0VfVE9LRU5dO1xuICB9XG4gIC8vIFRoaXMgd2FzIG9yaWdpbmFsbHkgaW50ZW5kZWQgdG8gZml4ICM0NTIxIGJ1dCBubyBsb25nZXIgbmVjZXNzYXJ5XG4gIC8vIGFmdGVyIDIuNS4gS2VlcGluZyBpdCBmb3IgYmFja3dhcmRzIGNvbXBhdCB3aXRoIGdlbmVyYXRlZCBjb2RlIGZyb20gPCAyLjRcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc0RlZihvbltDSEVDS0JPWF9SQURJT19UT0tFTl0pKSB7XG4gICAgb24uY2hhbmdlID0gW10uY29uY2F0KG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXSwgb24uY2hhbmdlIHx8IFtdKTtcbiAgICBkZWxldGUgb25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dO1xuICB9XG59XG5cbnZhciB0YXJnZXQkMTtcblxuZnVuY3Rpb24gY3JlYXRlT25jZUhhbmRsZXIgKGhhbmRsZXIsIGV2ZW50LCBjYXB0dXJlKSB7XG4gIHZhciBfdGFyZ2V0ID0gdGFyZ2V0JDE7IC8vIHNhdmUgY3VycmVudCB0YXJnZXQgZWxlbWVudCBpbiBjbG9zdXJlXG4gIHJldHVybiBmdW5jdGlvbiBvbmNlSGFuZGxlciAoKSB7XG4gICAgdmFyIHJlcyA9IGhhbmRsZXIuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICBpZiAocmVzICE9PSBudWxsKSB7XG4gICAgICByZW1vdmUkMihldmVudCwgb25jZUhhbmRsZXIsIGNhcHR1cmUsIF90YXJnZXQpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZGQkMSAoXG4gIGV2ZW50LFxuICBoYW5kbGVyLFxuICBvbmNlJCQxLFxuICBjYXB0dXJlLFxuICBwYXNzaXZlXG4pIHtcbiAgaGFuZGxlciA9IHdpdGhNYWNyb1Rhc2soaGFuZGxlcik7XG4gIGlmIChvbmNlJCQxKSB7IGhhbmRsZXIgPSBjcmVhdGVPbmNlSGFuZGxlcihoYW5kbGVyLCBldmVudCwgY2FwdHVyZSk7IH1cbiAgdGFyZ2V0JDEuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICBldmVudCxcbiAgICBoYW5kbGVyLFxuICAgIHN1cHBvcnRzUGFzc2l2ZVxuICAgICAgPyB7IGNhcHR1cmU6IGNhcHR1cmUsIHBhc3NpdmU6IHBhc3NpdmUgfVxuICAgICAgOiBjYXB0dXJlXG4gICk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSQyIChcbiAgZXZlbnQsXG4gIGhhbmRsZXIsXG4gIGNhcHR1cmUsXG4gIF90YXJnZXRcbikge1xuICAoX3RhcmdldCB8fCB0YXJnZXQkMSkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICBldmVudCxcbiAgICBoYW5kbGVyLl93aXRoVGFzayB8fCBoYW5kbGVyLFxuICAgIGNhcHR1cmVcbiAgKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRE9NTGlzdGVuZXJzIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgaWYgKGlzVW5kZWYob2xkVm5vZGUuZGF0YS5vbikgJiYgaXNVbmRlZih2bm9kZS5kYXRhLm9uKSkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciBvbiA9IHZub2RlLmRhdGEub24gfHwge307XG4gIHZhciBvbGRPbiA9IG9sZFZub2RlLmRhdGEub24gfHwge307XG4gIHRhcmdldCQxID0gdm5vZGUuZWxtO1xuICBub3JtYWxpemVFdmVudHMob24pO1xuICB1cGRhdGVMaXN0ZW5lcnMob24sIG9sZE9uLCBhZGQkMSwgcmVtb3ZlJDIsIHZub2RlLmNvbnRleHQpO1xuICB0YXJnZXQkMSA9IHVuZGVmaW5lZDtcbn1cblxudmFyIGV2ZW50cyA9IHtcbiAgY3JlYXRlOiB1cGRhdGVET01MaXN0ZW5lcnMsXG4gIHVwZGF0ZTogdXBkYXRlRE9NTGlzdGVuZXJzXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiB1cGRhdGVET01Qcm9wcyAob2xkVm5vZGUsIHZub2RlKSB7XG4gIGlmIChpc1VuZGVmKG9sZFZub2RlLmRhdGEuZG9tUHJvcHMpICYmIGlzVW5kZWYodm5vZGUuZGF0YS5kb21Qcm9wcykpIHtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIga2V5LCBjdXI7XG4gIHZhciBlbG0gPSB2bm9kZS5lbG07XG4gIHZhciBvbGRQcm9wcyA9IG9sZFZub2RlLmRhdGEuZG9tUHJvcHMgfHwge307XG4gIHZhciBwcm9wcyA9IHZub2RlLmRhdGEuZG9tUHJvcHMgfHwge307XG4gIC8vIGNsb25lIG9ic2VydmVkIG9iamVjdHMsIGFzIHRoZSB1c2VyIHByb2JhYmx5IHdhbnRzIHRvIG11dGF0ZSBpdFxuICBpZiAoaXNEZWYocHJvcHMuX19vYl9fKSkge1xuICAgIHByb3BzID0gdm5vZGUuZGF0YS5kb21Qcm9wcyA9IGV4dGVuZCh7fSwgcHJvcHMpO1xuICB9XG5cbiAgZm9yIChrZXkgaW4gb2xkUHJvcHMpIHtcbiAgICBpZiAoaXNVbmRlZihwcm9wc1trZXldKSkge1xuICAgICAgZWxtW2tleV0gPSAnJztcbiAgICB9XG4gIH1cbiAgZm9yIChrZXkgaW4gcHJvcHMpIHtcbiAgICBjdXIgPSBwcm9wc1trZXldO1xuICAgIC8vIGlnbm9yZSBjaGlsZHJlbiBpZiB0aGUgbm9kZSBoYXMgdGV4dENvbnRlbnQgb3IgaW5uZXJIVE1MLFxuICAgIC8vIGFzIHRoZXNlIHdpbGwgdGhyb3cgYXdheSBleGlzdGluZyBET00gbm9kZXMgYW5kIGNhdXNlIHJlbW92YWwgZXJyb3JzXG4gICAgLy8gb24gc3Vic2VxdWVudCBwYXRjaGVzICgjMzM2MClcbiAgICBpZiAoa2V5ID09PSAndGV4dENvbnRlbnQnIHx8IGtleSA9PT0gJ2lubmVySFRNTCcpIHtcbiAgICAgIGlmICh2bm9kZS5jaGlsZHJlbikgeyB2bm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwOyB9XG4gICAgICBpZiAoY3VyID09PSBvbGRQcm9wc1trZXldKSB7IGNvbnRpbnVlIH1cbiAgICAgIC8vICM2NjAxIHdvcmsgYXJvdW5kIENocm9tZSB2ZXJzaW9uIDw9IDU1IGJ1ZyB3aGVyZSBzaW5nbGUgdGV4dE5vZGVcbiAgICAgIC8vIHJlcGxhY2VkIGJ5IGlubmVySFRNTC90ZXh0Q29udGVudCByZXRhaW5zIGl0cyBwYXJlbnROb2RlIHByb3BlcnR5XG4gICAgICBpZiAoZWxtLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGVsbS5yZW1vdmVDaGlsZChlbG0uY2hpbGROb2Rlc1swXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ3ZhbHVlJykge1xuICAgICAgLy8gc3RvcmUgdmFsdWUgYXMgX3ZhbHVlIGFzIHdlbGwgc2luY2VcbiAgICAgIC8vIG5vbi1zdHJpbmcgdmFsdWVzIHdpbGwgYmUgc3RyaW5naWZpZWRcbiAgICAgIGVsbS5fdmFsdWUgPSBjdXI7XG4gICAgICAvLyBhdm9pZCByZXNldHRpbmcgY3Vyc29yIHBvc2l0aW9uIHdoZW4gdmFsdWUgaXMgdGhlIHNhbWVcbiAgICAgIHZhciBzdHJDdXIgPSBpc1VuZGVmKGN1cikgPyAnJyA6IFN0cmluZyhjdXIpO1xuICAgICAgaWYgKHNob3VsZFVwZGF0ZVZhbHVlKGVsbSwgc3RyQ3VyKSkge1xuICAgICAgICBlbG0udmFsdWUgPSBzdHJDdXI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsbVtrZXldID0gY3VyO1xuICAgIH1cbiAgfVxufVxuXG4vLyBjaGVjayBwbGF0Zm9ybXMvd2ViL3V0aWwvYXR0cnMuanMgYWNjZXB0VmFsdWVcblxuXG5mdW5jdGlvbiBzaG91bGRVcGRhdGVWYWx1ZSAoZWxtLCBjaGVja1ZhbCkge1xuICByZXR1cm4gKCFlbG0uY29tcG9zaW5nICYmIChcbiAgICBlbG0udGFnTmFtZSA9PT0gJ09QVElPTicgfHxcbiAgICBpc05vdEluRm9jdXNBbmREaXJ0eShlbG0sIGNoZWNrVmFsKSB8fFxuICAgIGlzRGlydHlXaXRoTW9kaWZpZXJzKGVsbSwgY2hlY2tWYWwpXG4gICkpXG59XG5cbmZ1bmN0aW9uIGlzTm90SW5Gb2N1c0FuZERpcnR5IChlbG0sIGNoZWNrVmFsKSB7XG4gIC8vIHJldHVybiB0cnVlIHdoZW4gdGV4dGJveCAoLm51bWJlciBhbmQgLnRyaW0pIGxvc2VzIGZvY3VzIGFuZCBpdHMgdmFsdWUgaXNcbiAgLy8gbm90IGVxdWFsIHRvIHRoZSB1cGRhdGVkIHZhbHVlXG4gIHZhciBub3RJbkZvY3VzID0gdHJ1ZTtcbiAgLy8gIzYxNTdcbiAgLy8gd29yayBhcm91bmQgSUUgYnVnIHdoZW4gYWNjZXNzaW5nIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaW4gYW4gaWZyYW1lXG4gIHRyeSB7IG5vdEluRm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSBlbG07IH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiBub3RJbkZvY3VzICYmIGVsbS52YWx1ZSAhPT0gY2hlY2tWYWxcbn1cblxuZnVuY3Rpb24gaXNEaXJ0eVdpdGhNb2RpZmllcnMgKGVsbSwgbmV3VmFsKSB7XG4gIHZhciB2YWx1ZSA9IGVsbS52YWx1ZTtcbiAgdmFyIG1vZGlmaWVycyA9IGVsbS5fdk1vZGlmaWVyczsgLy8gaW5qZWN0ZWQgYnkgdi1tb2RlbCBydW50aW1lXG4gIGlmIChpc0RlZihtb2RpZmllcnMpKSB7XG4gICAgaWYgKG1vZGlmaWVycy5sYXp5KSB7XG4gICAgICAvLyBpbnB1dHMgd2l0aCBsYXp5IHNob3VsZCBvbmx5IGJlIHVwZGF0ZWQgd2hlbiBub3QgaW4gZm9jdXNcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAobW9kaWZpZXJzLm51bWJlcikge1xuICAgICAgcmV0dXJuIHRvTnVtYmVyKHZhbHVlKSAhPT0gdG9OdW1iZXIobmV3VmFsKVxuICAgIH1cbiAgICBpZiAobW9kaWZpZXJzLnRyaW0pIHtcbiAgICAgIHJldHVybiB2YWx1ZS50cmltKCkgIT09IG5ld1ZhbC50cmltKClcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlICE9PSBuZXdWYWxcbn1cblxudmFyIGRvbVByb3BzID0ge1xuICBjcmVhdGU6IHVwZGF0ZURPTVByb3BzLFxuICB1cGRhdGU6IHVwZGF0ZURPTVByb3BzXG59XG5cbi8qICAqL1xuXG52YXIgcGFyc2VTdHlsZVRleHQgPSBjYWNoZWQoZnVuY3Rpb24gKGNzc1RleHQpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICB2YXIgbGlzdERlbGltaXRlciA9IC87KD8hW14oXSpcXCkpL2c7XG4gIHZhciBwcm9wZXJ0eURlbGltaXRlciA9IC86KC4rKS87XG4gIGNzc1RleHQuc3BsaXQobGlzdERlbGltaXRlcikuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIGlmIChpdGVtKSB7XG4gICAgICB2YXIgdG1wID0gaXRlbS5zcGxpdChwcm9wZXJ0eURlbGltaXRlcik7XG4gICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmVzW3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc1xufSk7XG5cbi8vIG1lcmdlIHN0YXRpYyBhbmQgZHluYW1pYyBzdHlsZSBkYXRhIG9uIHRoZSBzYW1lIHZub2RlXG5mdW5jdGlvbiBub3JtYWxpemVTdHlsZURhdGEgKGRhdGEpIHtcbiAgdmFyIHN0eWxlID0gbm9ybWFsaXplU3R5bGVCaW5kaW5nKGRhdGEuc3R5bGUpO1xuICAvLyBzdGF0aWMgc3R5bGUgaXMgcHJlLXByb2Nlc3NlZCBpbnRvIGFuIG9iamVjdCBkdXJpbmcgY29tcGlsYXRpb25cbiAgLy8gYW5kIGlzIGFsd2F5cyBhIGZyZXNoIG9iamVjdCwgc28gaXQncyBzYWZlIHRvIG1lcmdlIGludG8gaXRcbiAgcmV0dXJuIGRhdGEuc3RhdGljU3R5bGVcbiAgICA/IGV4dGVuZChkYXRhLnN0YXRpY1N0eWxlLCBzdHlsZSlcbiAgICA6IHN0eWxlXG59XG5cbi8vIG5vcm1hbGl6ZSBwb3NzaWJsZSBhcnJheSAvIHN0cmluZyB2YWx1ZXMgaW50byBPYmplY3RcbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlQmluZGluZyAoYmluZGluZ1N0eWxlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGJpbmRpbmdTdHlsZSkpIHtcbiAgICByZXR1cm4gdG9PYmplY3QoYmluZGluZ1N0eWxlKVxuICB9XG4gIGlmICh0eXBlb2YgYmluZGluZ1N0eWxlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBwYXJzZVN0eWxlVGV4dChiaW5kaW5nU3R5bGUpXG4gIH1cbiAgcmV0dXJuIGJpbmRpbmdTdHlsZVxufVxuXG4vKipcbiAqIHBhcmVudCBjb21wb25lbnQgc3R5bGUgc2hvdWxkIGJlIGFmdGVyIGNoaWxkJ3NcbiAqIHNvIHRoYXQgcGFyZW50IGNvbXBvbmVudCdzIHN0eWxlIGNvdWxkIG92ZXJyaWRlIGl0XG4gKi9cbmZ1bmN0aW9uIGdldFN0eWxlICh2bm9kZSwgY2hlY2tDaGlsZCkge1xuICB2YXIgcmVzID0ge307XG4gIHZhciBzdHlsZURhdGE7XG5cbiAgaWYgKGNoZWNrQ2hpbGQpIHtcbiAgICB2YXIgY2hpbGROb2RlID0gdm5vZGU7XG4gICAgd2hpbGUgKGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtcbiAgICAgIGlmIChcbiAgICAgICAgY2hpbGROb2RlICYmIGNoaWxkTm9kZS5kYXRhICYmXG4gICAgICAgIChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEoY2hpbGROb2RlLmRhdGEpKVxuICAgICAgKSB7XG4gICAgICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEodm5vZGUuZGF0YSkpKSB7XG4gICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTtcbiAgfVxuXG4gIHZhciBwYXJlbnROb2RlID0gdm5vZGU7XG4gIHdoaWxlICgocGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50KSkge1xuICAgIGlmIChwYXJlbnROb2RlLmRhdGEgJiYgKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YShwYXJlbnROb2RlLmRhdGEpKSkge1xuICAgICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG4vKiAgKi9cblxudmFyIGNzc1ZhclJFID0gL14tLS87XG52YXIgaW1wb3J0YW50UkUgPSAvXFxzKiFpbXBvcnRhbnQkLztcbnZhciBzZXRQcm9wID0gZnVuY3Rpb24gKGVsLCBuYW1lLCB2YWwpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChjc3NWYXJSRS50ZXN0KG5hbWUpKSB7XG4gICAgZWwuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsKTtcbiAgfSBlbHNlIGlmIChpbXBvcnRhbnRSRS50ZXN0KHZhbCkpIHtcbiAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWwucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLCAnaW1wb3J0YW50Jyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplKG5hbWUpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgIC8vIFN1cHBvcnQgdmFsdWVzIGFycmF5IGNyZWF0ZWQgYnkgYXV0b3ByZWZpeGVyLCBlLmcuXG4gICAgICAvLyB7ZGlzcGxheTogW1wiLXdlYmtpdC1ib3hcIiwgXCItbXMtZmxleGJveFwiLCBcImZsZXhcIl19XG4gICAgICAvLyBTZXQgdGhlbSBvbmUgYnkgb25lLCBhbmQgdGhlIGJyb3dzZXIgd2lsbCBvbmx5IHNldCB0aG9zZSBpdCBjYW4gcmVjb2duaXplXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdmFsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsLnN0eWxlW25vcm1hbGl6ZWROYW1lXSA9IHZhbFtpXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwuc3R5bGVbbm9ybWFsaXplZE5hbWVdID0gdmFsO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHZlbmRvck5hbWVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG5cbnZhciBlbXB0eVN0eWxlO1xudmFyIG5vcm1hbGl6ZSA9IGNhY2hlZChmdW5jdGlvbiAocHJvcCkge1xuICBlbXB0eVN0eWxlID0gZW1wdHlTdHlsZSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcbiAgcHJvcCA9IGNhbWVsaXplKHByb3ApO1xuICBpZiAocHJvcCAhPT0gJ2ZpbHRlcicgJiYgKHByb3AgaW4gZW1wdHlTdHlsZSkpIHtcbiAgICByZXR1cm4gcHJvcFxuICB9XG4gIHZhciBjYXBOYW1lID0gcHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3Auc2xpY2UoMSk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmVuZG9yTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbmFtZSA9IHZlbmRvck5hbWVzW2ldICsgY2FwTmFtZTtcbiAgICBpZiAobmFtZSBpbiBlbXB0eVN0eWxlKSB7XG4gICAgICByZXR1cm4gbmFtZVxuICAgIH1cbiAgfVxufSk7XG5cbmZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChvbGRWbm9kZSwgdm5vZGUpIHtcbiAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhO1xuICB2YXIgb2xkRGF0YSA9IG9sZFZub2RlLmRhdGE7XG5cbiAgaWYgKGlzVW5kZWYoZGF0YS5zdGF0aWNTdHlsZSkgJiYgaXNVbmRlZihkYXRhLnN0eWxlKSAmJlxuICAgIGlzVW5kZWYob2xkRGF0YS5zdGF0aWNTdHlsZSkgJiYgaXNVbmRlZihvbGREYXRhLnN0eWxlKVxuICApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBjdXIsIG5hbWU7XG4gIHZhciBlbCA9IHZub2RlLmVsbTtcbiAgdmFyIG9sZFN0YXRpY1N0eWxlID0gb2xkRGF0YS5zdGF0aWNTdHlsZTtcbiAgdmFyIG9sZFN0eWxlQmluZGluZyA9IG9sZERhdGEubm9ybWFsaXplZFN0eWxlIHx8IG9sZERhdGEuc3R5bGUgfHwge307XG5cbiAgLy8gaWYgc3RhdGljIHN0eWxlIGV4aXN0cywgc3R5bGViaW5kaW5nIGFscmVhZHkgbWVyZ2VkIGludG8gaXQgd2hlbiBkb2luZyBub3JtYWxpemVTdHlsZURhdGFcbiAgdmFyIG9sZFN0eWxlID0gb2xkU3RhdGljU3R5bGUgfHwgb2xkU3R5bGVCaW5kaW5nO1xuXG4gIHZhciBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlQmluZGluZyh2bm9kZS5kYXRhLnN0eWxlKSB8fCB7fTtcblxuICAvLyBzdG9yZSBub3JtYWxpemVkIHN0eWxlIHVuZGVyIGEgZGlmZmVyZW50IGtleSBmb3IgbmV4dCBkaWZmXG4gIC8vIG1ha2Ugc3VyZSB0byBjbG9uZSBpdCBpZiBpdCdzIHJlYWN0aXZlLCBzaW5jZSB0aGUgdXNlciBsaWtlbHkgd2FudHNcbiAgLy8gdG8gbXV0YXRlIGl0LlxuICB2bm9kZS5kYXRhLm5vcm1hbGl6ZWRTdHlsZSA9IGlzRGVmKHN0eWxlLl9fb2JfXylcbiAgICA/IGV4dGVuZCh7fSwgc3R5bGUpXG4gICAgOiBzdHlsZTtcblxuICB2YXIgbmV3U3R5bGUgPSBnZXRTdHlsZSh2bm9kZSwgdHJ1ZSk7XG5cbiAgZm9yIChuYW1lIGluIG9sZFN0eWxlKSB7XG4gICAgaWYgKGlzVW5kZWYobmV3U3R5bGVbbmFtZV0pKSB7XG4gICAgICBzZXRQcm9wKGVsLCBuYW1lLCAnJyk7XG4gICAgfVxuICB9XG4gIGZvciAobmFtZSBpbiBuZXdTdHlsZSkge1xuICAgIGN1ciA9IG5ld1N0eWxlW25hbWVdO1xuICAgIGlmIChjdXIgIT09IG9sZFN0eWxlW25hbWVdKSB7XG4gICAgICAvLyBpZTkgc2V0dGluZyB0byBudWxsIGhhcyBubyBlZmZlY3QsIG11c3QgdXNlIGVtcHR5IHN0cmluZ1xuICAgICAgc2V0UHJvcChlbCwgbmFtZSwgY3VyID09IG51bGwgPyAnJyA6IGN1cik7XG4gICAgfVxuICB9XG59XG5cbnZhciBzdHlsZSA9IHtcbiAgY3JlYXRlOiB1cGRhdGVTdHlsZSxcbiAgdXBkYXRlOiB1cGRhdGVTdHlsZVxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBTVkcgc2luY2UgY2xhc3NMaXN0IGlzIG5vdCBzdXBwb3J0ZWQgb25cbiAqIFNWRyBlbGVtZW50cyBpbiBJRVxuICovXG5mdW5jdGlvbiBhZGRDbGFzcyAoZWwsIGNscykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFjbHMgfHwgIShjbHMgPSBjbHMudHJpbSgpKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGlmIChjbHMuaW5kZXhPZignICcpID4gLTEpIHtcbiAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5hZGQoYyk7IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBjdXIgPSBcIiBcIiArIChlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgXCIgXCI7XG4gICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgKGN1ciArIGNscykudHJpbSgpKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBTVkcgc2luY2UgY2xhc3NMaXN0IGlzIG5vdCBzdXBwb3J0ZWQgb25cbiAqIFNWRyBlbGVtZW50cyBpbiBJRVxuICovXG5mdW5jdGlvbiByZW1vdmVDbGFzcyAoZWwsIGNscykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFjbHMgfHwgIShjbHMgPSBjbHMudHJpbSgpKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGlmIChjbHMuaW5kZXhPZignICcpID4gLTEpIHtcbiAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5yZW1vdmUoYyk7IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7XG4gICAgfVxuICAgIGlmICghZWwuY2xhc3NMaXN0Lmxlbmd0aCkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gXCIgXCIgKyAoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiO1xuICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG4gICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuICAgIH1cbiAgICBjdXIgPSBjdXIudHJpbSgpO1xuICAgIGlmIChjdXIpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjdXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gICAgfVxuICB9XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvbiAoZGVmKSB7XG4gIGlmICghZGVmKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKHR5cGVvZiBkZWYgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIHJlcyA9IHt9O1xuICAgIGlmIChkZWYuY3NzICE9PSBmYWxzZSkge1xuICAgICAgZXh0ZW5kKHJlcywgYXV0b0Nzc1RyYW5zaXRpb24oZGVmLm5hbWUgfHwgJ3YnKSk7XG4gICAgfVxuICAgIGV4dGVuZChyZXMsIGRlZik7XG4gICAgcmV0dXJuIHJlc1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWYgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGF1dG9Dc3NUcmFuc2l0aW9uKGRlZilcbiAgfVxufVxuXG52YXIgYXV0b0Nzc1RyYW5zaXRpb24gPSBjYWNoZWQoZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIHtcbiAgICBlbnRlckNsYXNzOiAobmFtZSArIFwiLWVudGVyXCIpLFxuICAgIGVudGVyVG9DbGFzczogKG5hbWUgKyBcIi1lbnRlci10b1wiKSxcbiAgICBlbnRlckFjdGl2ZUNsYXNzOiAobmFtZSArIFwiLWVudGVyLWFjdGl2ZVwiKSxcbiAgICBsZWF2ZUNsYXNzOiAobmFtZSArIFwiLWxlYXZlXCIpLFxuICAgIGxlYXZlVG9DbGFzczogKG5hbWUgKyBcIi1sZWF2ZS10b1wiKSxcbiAgICBsZWF2ZUFjdGl2ZUNsYXNzOiAobmFtZSArIFwiLWxlYXZlLWFjdGl2ZVwiKVxuICB9XG59KTtcblxudmFyIGhhc1RyYW5zaXRpb24gPSBpbkJyb3dzZXIgJiYgIWlzSUU5O1xudmFyIFRSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG52YXIgQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG5cbi8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcbnZhciB0cmFuc2l0aW9uUHJvcCA9ICd0cmFuc2l0aW9uJztcbnZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSAndHJhbnNpdGlvbmVuZCc7XG52YXIgYW5pbWF0aW9uUHJvcCA9ICdhbmltYXRpb24nO1xudmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gJ2FuaW1hdGlvbmVuZCc7XG5pZiAoaGFzVHJhbnNpdGlvbikge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJlxuICAgIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZFxuICApIHtcbiAgICB0cmFuc2l0aW9uUHJvcCA9ICdXZWJraXRUcmFuc2l0aW9uJztcbiAgICB0cmFuc2l0aW9uRW5kRXZlbnQgPSAnd2Via2l0VHJhbnNpdGlvbkVuZCc7XG4gIH1cbiAgaWYgKHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmXG4gICAgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWRcbiAgKSB7XG4gICAgYW5pbWF0aW9uUHJvcCA9ICdXZWJraXRBbmltYXRpb24nO1xuICAgIGFuaW1hdGlvbkVuZEV2ZW50ID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCc7XG4gIH1cbn1cblxuLy8gYmluZGluZyB0byB3aW5kb3cgaXMgbmVjZXNzYXJ5IHRvIG1ha2UgaG90IHJlbG9hZCB3b3JrIGluIElFIGluIHN0cmljdCBtb2RlXG52YXIgcmFmID0gaW5Ccm93c2VyXG4gID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdylcbiAgICA6IHNldFRpbWVvdXRcbiAgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuKCk7IH07XG5cbmZ1bmN0aW9uIG5leHRGcmFtZSAoZm4pIHtcbiAgcmFmKGZ1bmN0aW9uICgpIHtcbiAgICByYWYoZm4pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkVHJhbnNpdGlvbkNsYXNzIChlbCwgY2xzKSB7XG4gIHZhciB0cmFuc2l0aW9uQ2xhc3NlcyA9IGVsLl90cmFuc2l0aW9uQ2xhc3NlcyB8fCAoZWwuX3RyYW5zaXRpb25DbGFzc2VzID0gW10pO1xuICBpZiAodHJhbnNpdGlvbkNsYXNzZXMuaW5kZXhPZihjbHMpIDwgMCkge1xuICAgIHRyYW5zaXRpb25DbGFzc2VzLnB1c2goY2xzKTtcbiAgICBhZGRDbGFzcyhlbCwgY2xzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uQ2xhc3MgKGVsLCBjbHMpIHtcbiAgaWYgKGVsLl90cmFuc2l0aW9uQ2xhc3Nlcykge1xuICAgIHJlbW92ZShlbC5fdHJhbnNpdGlvbkNsYXNzZXMsIGNscyk7XG4gIH1cbiAgcmVtb3ZlQ2xhc3MoZWwsIGNscyk7XG59XG5cbmZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyAoXG4gIGVsLFxuICBleHBlY3RlZFR5cGUsXG4gIGNiXG4pIHtcbiAgdmFyIHJlZiA9IGdldFRyYW5zaXRpb25JbmZvKGVsLCBleHBlY3RlZFR5cGUpO1xuICB2YXIgdHlwZSA9IHJlZi50eXBlO1xuICB2YXIgdGltZW91dCA9IHJlZi50aW1lb3V0O1xuICB2YXIgcHJvcENvdW50ID0gcmVmLnByb3BDb3VudDtcbiAgaWYgKCF0eXBlKSB7IHJldHVybiBjYigpIH1cbiAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFJBTlNJVElPTiA/IHRyYW5zaXRpb25FbmRFdmVudCA6IGFuaW1hdGlvbkVuZEV2ZW50O1xuICB2YXIgZW5kZWQgPSAwO1xuICB2YXIgZW5kID0gZnVuY3Rpb24gKCkge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIG9uRW5kKTtcbiAgICBjYigpO1xuICB9O1xuICB2YXIgb25FbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcbiAgICAgIGlmICgrK2VuZGVkID49IHByb3BDb3VudCkge1xuICAgICAgICBlbmQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkge1xuICAgICAgZW5kKCk7XG4gICAgfVxuICB9LCB0aW1lb3V0ICsgMSk7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIG9uRW5kKTtcbn1cblxudmFyIHRyYW5zZm9ybVJFID0gL1xcYih0cmFuc2Zvcm18YWxsKSgsfCQpLztcblxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkluZm8gKGVsLCBleHBlY3RlZFR5cGUpIHtcbiAgdmFyIHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKTtcbiAgdmFyIHRyYW5zaXRpb25EZWxheXMgPSBzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnRGVsYXknXS5zcGxpdCgnLCAnKTtcbiAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbnMgPSBzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nXS5zcGxpdCgnLCAnKTtcbiAgdmFyIHRyYW5zaXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dCh0cmFuc2l0aW9uRGVsYXlzLCB0cmFuc2l0aW9uRHVyYXRpb25zKTtcbiAgdmFyIGFuaW1hdGlvbkRlbGF5cyA9IHN0eWxlc1thbmltYXRpb25Qcm9wICsgJ0RlbGF5J10uc3BsaXQoJywgJyk7XG4gIHZhciBhbmltYXRpb25EdXJhdGlvbnMgPSBzdHlsZXNbYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbiddLnNwbGl0KCcsICcpO1xuICB2YXIgYW5pbWF0aW9uVGltZW91dCA9IGdldFRpbWVvdXQoYW5pbWF0aW9uRGVsYXlzLCBhbmltYXRpb25EdXJhdGlvbnMpO1xuXG4gIHZhciB0eXBlO1xuICB2YXIgdGltZW91dCA9IDA7XG4gIHZhciBwcm9wQ291bnQgPSAwO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGV4cGVjdGVkVHlwZSA9PT0gVFJBTlNJVElPTikge1xuICAgIGlmICh0cmFuc2l0aW9uVGltZW91dCA+IDApIHtcbiAgICAgIHR5cGUgPSBUUkFOU0lUSU9OO1xuICAgICAgdGltZW91dCA9IHRyYW5zaXRpb25UaW1lb3V0O1xuICAgICAgcHJvcENvdW50ID0gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg7XG4gICAgfVxuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gQU5JTUFUSU9OKSB7XG4gICAgaWYgKGFuaW1hdGlvblRpbWVvdXQgPiAwKSB7XG4gICAgICB0eXBlID0gQU5JTUFUSU9OO1xuICAgICAgdGltZW91dCA9IGFuaW1hdGlvblRpbWVvdXQ7XG4gICAgICBwcm9wQ291bnQgPSBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aW1lb3V0ID0gTWF0aC5tYXgodHJhbnNpdGlvblRpbWVvdXQsIGFuaW1hdGlvblRpbWVvdXQpO1xuICAgIHR5cGUgPSB0aW1lb3V0ID4gMFxuICAgICAgPyB0cmFuc2l0aW9uVGltZW91dCA+IGFuaW1hdGlvblRpbWVvdXRcbiAgICAgICAgPyBUUkFOU0lUSU9OXG4gICAgICAgIDogQU5JTUFUSU9OXG4gICAgICA6IG51bGw7XG4gICAgcHJvcENvdW50ID0gdHlwZVxuICAgICAgPyB0eXBlID09PSBUUkFOU0lUSU9OXG4gICAgICAgID8gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGhcbiAgICAgICAgOiBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoXG4gICAgICA6IDA7XG4gIH1cbiAgdmFyIGhhc1RyYW5zZm9ybSA9XG4gICAgdHlwZSA9PT0gVFJBTlNJVElPTiAmJlxuICAgIHRyYW5zZm9ybVJFLnRlc3Qoc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ1Byb3BlcnR5J10pO1xuICByZXR1cm4ge1xuICAgIHR5cGU6IHR5cGUsXG4gICAgdGltZW91dDogdGltZW91dCxcbiAgICBwcm9wQ291bnQ6IHByb3BDb3VudCxcbiAgICBoYXNUcmFuc2Zvcm06IGhhc1RyYW5zZm9ybVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFRpbWVvdXQgKGRlbGF5cywgZHVyYXRpb25zKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkge1xuICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTtcbiAgfVxuXG4gIHJldHVybiBNYXRoLm1heC5hcHBseShudWxsLCBkdXJhdGlvbnMubWFwKGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgcmV0dXJuIHRvTXMoZCkgKyB0b01zKGRlbGF5c1tpXSlcbiAgfSkpXG59XG5cbmZ1bmN0aW9uIHRvTXMgKHMpIHtcbiAgcmV0dXJuIE51bWJlcihzLnNsaWNlKDAsIC0xKSkgKiAxMDAwXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBlbnRlciAodm5vZGUsIHRvZ2dsZURpc3BsYXkpIHtcbiAgdmFyIGVsID0gdm5vZGUuZWxtO1xuXG4gIC8vIGNhbGwgbGVhdmUgY2FsbGJhY2sgbm93XG4gIGlmIChpc0RlZihlbC5fbGVhdmVDYikpIHtcbiAgICBlbC5fbGVhdmVDYi5jYW5jZWxsZWQgPSB0cnVlO1xuICAgIGVsLl9sZWF2ZUNiKCk7XG4gIH1cblxuICB2YXIgZGF0YSA9IHJlc29sdmVUcmFuc2l0aW9uKHZub2RlLmRhdGEudHJhbnNpdGlvbik7XG4gIGlmIChpc1VuZGVmKGRhdGEpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzRGVmKGVsLl9lbnRlckNiKSB8fCBlbC5ub2RlVHlwZSAhPT0gMSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIGNzcyA9IGRhdGEuY3NzO1xuICB2YXIgdHlwZSA9IGRhdGEudHlwZTtcbiAgdmFyIGVudGVyQ2xhc3MgPSBkYXRhLmVudGVyQ2xhc3M7XG4gIHZhciBlbnRlclRvQ2xhc3MgPSBkYXRhLmVudGVyVG9DbGFzcztcbiAgdmFyIGVudGVyQWN0aXZlQ2xhc3MgPSBkYXRhLmVudGVyQWN0aXZlQ2xhc3M7XG4gIHZhciBhcHBlYXJDbGFzcyA9IGRhdGEuYXBwZWFyQ2xhc3M7XG4gIHZhciBhcHBlYXJUb0NsYXNzID0gZGF0YS5hcHBlYXJUb0NsYXNzO1xuICB2YXIgYXBwZWFyQWN0aXZlQ2xhc3MgPSBkYXRhLmFwcGVhckFjdGl2ZUNsYXNzO1xuICB2YXIgYmVmb3JlRW50ZXIgPSBkYXRhLmJlZm9yZUVudGVyO1xuICB2YXIgZW50ZXIgPSBkYXRhLmVudGVyO1xuICB2YXIgYWZ0ZXJFbnRlciA9IGRhdGEuYWZ0ZXJFbnRlcjtcbiAgdmFyIGVudGVyQ2FuY2VsbGVkID0gZGF0YS5lbnRlckNhbmNlbGxlZDtcbiAgdmFyIGJlZm9yZUFwcGVhciA9IGRhdGEuYmVmb3JlQXBwZWFyO1xuICB2YXIgYXBwZWFyID0gZGF0YS5hcHBlYXI7XG4gIHZhciBhZnRlckFwcGVhciA9IGRhdGEuYWZ0ZXJBcHBlYXI7XG4gIHZhciBhcHBlYXJDYW5jZWxsZWQgPSBkYXRhLmFwcGVhckNhbmNlbGxlZDtcbiAgdmFyIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjtcblxuICAvLyBhY3RpdmVJbnN0YW5jZSB3aWxsIGFsd2F5cyBiZSB0aGUgPHRyYW5zaXRpb24+IGNvbXBvbmVudCBtYW5hZ2luZyB0aGlzXG4gIC8vIHRyYW5zaXRpb24uIE9uZSBlZGdlIGNhc2UgdG8gY2hlY2sgaXMgd2hlbiB0aGUgPHRyYW5zaXRpb24+IGlzIHBsYWNlZFxuICAvLyBhcyB0aGUgcm9vdCBub2RlIG9mIGEgY2hpbGQgY29tcG9uZW50LiBJbiB0aGF0IGNhc2Ugd2UgbmVlZCB0byBjaGVja1xuICAvLyA8dHJhbnNpdGlvbj4ncyBwYXJlbnQgZm9yIGFwcGVhciBjaGVjay5cbiAgdmFyIGNvbnRleHQgPSBhY3RpdmVJbnN0YW5jZTtcbiAgdmFyIHRyYW5zaXRpb25Ob2RlID0gYWN0aXZlSW5zdGFuY2UuJHZub2RlO1xuICB3aGlsZSAodHJhbnNpdGlvbk5vZGUgJiYgdHJhbnNpdGlvbk5vZGUucGFyZW50KSB7XG4gICAgdHJhbnNpdGlvbk5vZGUgPSB0cmFuc2l0aW9uTm9kZS5wYXJlbnQ7XG4gICAgY29udGV4dCA9IHRyYW5zaXRpb25Ob2RlLmNvbnRleHQ7XG4gIH1cblxuICB2YXIgaXNBcHBlYXIgPSAhY29udGV4dC5faXNNb3VudGVkIHx8ICF2bm9kZS5pc1Jvb3RJbnNlcnQ7XG5cbiAgaWYgKGlzQXBwZWFyICYmICFhcHBlYXIgJiYgYXBwZWFyICE9PSAnJykge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIHN0YXJ0Q2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJDbGFzc1xuICAgID8gYXBwZWFyQ2xhc3NcbiAgICA6IGVudGVyQ2xhc3M7XG4gIHZhciBhY3RpdmVDbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhckFjdGl2ZUNsYXNzXG4gICAgPyBhcHBlYXJBY3RpdmVDbGFzc1xuICAgIDogZW50ZXJBY3RpdmVDbGFzcztcbiAgdmFyIHRvQ2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJUb0NsYXNzXG4gICAgPyBhcHBlYXJUb0NsYXNzXG4gICAgOiBlbnRlclRvQ2xhc3M7XG5cbiAgdmFyIGJlZm9yZUVudGVySG9vayA9IGlzQXBwZWFyXG4gICAgPyAoYmVmb3JlQXBwZWFyIHx8IGJlZm9yZUVudGVyKVxuICAgIDogYmVmb3JlRW50ZXI7XG4gIHZhciBlbnRlckhvb2sgPSBpc0FwcGVhclxuICAgID8gKHR5cGVvZiBhcHBlYXIgPT09ICdmdW5jdGlvbicgPyBhcHBlYXIgOiBlbnRlcilcbiAgICA6IGVudGVyO1xuICB2YXIgYWZ0ZXJFbnRlckhvb2sgPSBpc0FwcGVhclxuICAgID8gKGFmdGVyQXBwZWFyIHx8IGFmdGVyRW50ZXIpXG4gICAgOiBhZnRlckVudGVyO1xuICB2YXIgZW50ZXJDYW5jZWxsZWRIb29rID0gaXNBcHBlYXJcbiAgICA/IChhcHBlYXJDYW5jZWxsZWQgfHwgZW50ZXJDYW5jZWxsZWQpXG4gICAgOiBlbnRlckNhbmNlbGxlZDtcblxuICB2YXIgZXhwbGljaXRFbnRlckR1cmF0aW9uID0gdG9OdW1iZXIoXG4gICAgaXNPYmplY3QoZHVyYXRpb24pXG4gICAgICA/IGR1cmF0aW9uLmVudGVyXG4gICAgICA6IGR1cmF0aW9uXG4gICk7XG5cbiAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGV4cGxpY2l0RW50ZXJEdXJhdGlvbiAhPSBudWxsKSB7XG4gICAgY2hlY2tEdXJhdGlvbihleHBsaWNpdEVudGVyRHVyYXRpb24sICdlbnRlcicsIHZub2RlKTtcbiAgfVxuXG4gIHZhciBleHBlY3RzQ1NTID0gY3NzICE9PSBmYWxzZSAmJiAhaXNJRTk7XG4gIHZhciB1c2VyV2FudHNDb250cm9sID0gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChlbnRlckhvb2spO1xuXG4gIHZhciBjYiA9IGVsLl9lbnRlckNiID0gb25jZShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGV4cGVjdHNDU1MpIHtcbiAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgdG9DbGFzcyk7XG4gICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTtcbiAgICB9XG4gICAgaWYgKGNiLmNhbmNlbGxlZCkge1xuICAgICAgaWYgKGV4cGVjdHNDU1MpIHtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTtcbiAgICAgIH1cbiAgICAgIGVudGVyQ2FuY2VsbGVkSG9vayAmJiBlbnRlckNhbmNlbGxlZEhvb2soZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZnRlckVudGVySG9vayAmJiBhZnRlckVudGVySG9vayhlbCk7XG4gICAgfVxuICAgIGVsLl9lbnRlckNiID0gbnVsbDtcbiAgfSk7XG5cbiAgaWYgKCF2bm9kZS5kYXRhLnNob3cpIHtcbiAgICAvLyByZW1vdmUgcGVuZGluZyBsZWF2ZSBlbGVtZW50IG9uIGVudGVyIGJ5IGluamVjdGluZyBhbiBpbnNlcnQgaG9va1xuICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAnaW5zZXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICB2YXIgcGVuZGluZ05vZGUgPSBwYXJlbnQgJiYgcGFyZW50Ll9wZW5kaW5nICYmIHBhcmVudC5fcGVuZGluZ1t2bm9kZS5rZXldO1xuICAgICAgaWYgKHBlbmRpbmdOb2RlICYmXG4gICAgICAgIHBlbmRpbmdOb2RlLnRhZyA9PT0gdm5vZGUudGFnICYmXG4gICAgICAgIHBlbmRpbmdOb2RlLmVsbS5fbGVhdmVDYlxuICAgICAgKSB7XG4gICAgICAgIHBlbmRpbmdOb2RlLmVsbS5fbGVhdmVDYigpO1xuICAgICAgfVxuICAgICAgZW50ZXJIb29rICYmIGVudGVySG9vayhlbCwgY2IpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gc3RhcnQgZW50ZXIgdHJhbnNpdGlvblxuICBiZWZvcmVFbnRlckhvb2sgJiYgYmVmb3JlRW50ZXJIb29rKGVsKTtcbiAgaWYgKGV4cGVjdHNDU1MpIHtcbiAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIHN0YXJ0Q2xhc3MpO1xuICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYWN0aXZlQ2xhc3MpO1xuICAgIG5leHRGcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIHN0YXJ0Q2xhc3MpO1xuICAgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCB0b0NsYXNzKTtcbiAgICAgICAgaWYgKCF1c2VyV2FudHNDb250cm9sKSB7XG4gICAgICAgICAgaWYgKGlzVmFsaWREdXJhdGlvbihleHBsaWNpdEVudGVyRHVyYXRpb24pKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCBleHBsaWNpdEVudGVyRHVyYXRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGNiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmICh2bm9kZS5kYXRhLnNob3cpIHtcbiAgICB0b2dnbGVEaXNwbGF5ICYmIHRvZ2dsZURpc3BsYXkoKTtcbiAgICBlbnRlckhvb2sgJiYgZW50ZXJIb29rKGVsLCBjYik7XG4gIH1cblxuICBpZiAoIWV4cGVjdHNDU1MgJiYgIXVzZXJXYW50c0NvbnRyb2wpIHtcbiAgICBjYigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGxlYXZlICh2bm9kZSwgcm0pIHtcbiAgdmFyIGVsID0gdm5vZGUuZWxtO1xuXG4gIC8vIGNhbGwgZW50ZXIgY2FsbGJhY2sgbm93XG4gIGlmIChpc0RlZihlbC5fZW50ZXJDYikpIHtcbiAgICBlbC5fZW50ZXJDYi5jYW5jZWxsZWQgPSB0cnVlO1xuICAgIGVsLl9lbnRlckNiKCk7XG4gIH1cblxuICB2YXIgZGF0YSA9IHJlc29sdmVUcmFuc2l0aW9uKHZub2RlLmRhdGEudHJhbnNpdGlvbik7XG4gIGlmIChpc1VuZGVmKGRhdGEpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7XG4gICAgcmV0dXJuIHJtKClcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNEZWYoZWwuX2xlYXZlQ2IpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgY3NzID0gZGF0YS5jc3M7XG4gIHZhciB0eXBlID0gZGF0YS50eXBlO1xuICB2YXIgbGVhdmVDbGFzcyA9IGRhdGEubGVhdmVDbGFzcztcbiAgdmFyIGxlYXZlVG9DbGFzcyA9IGRhdGEubGVhdmVUb0NsYXNzO1xuICB2YXIgbGVhdmVBY3RpdmVDbGFzcyA9IGRhdGEubGVhdmVBY3RpdmVDbGFzcztcbiAgdmFyIGJlZm9yZUxlYXZlID0gZGF0YS5iZWZvcmVMZWF2ZTtcbiAgdmFyIGxlYXZlID0gZGF0YS5sZWF2ZTtcbiAgdmFyIGFmdGVyTGVhdmUgPSBkYXRhLmFmdGVyTGVhdmU7XG4gIHZhciBsZWF2ZUNhbmNlbGxlZCA9IGRhdGEubGVhdmVDYW5jZWxsZWQ7XG4gIHZhciBkZWxheUxlYXZlID0gZGF0YS5kZWxheUxlYXZlO1xuICB2YXIgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uO1xuXG4gIHZhciBleHBlY3RzQ1NTID0gY3NzICE9PSBmYWxzZSAmJiAhaXNJRTk7XG4gIHZhciB1c2VyV2FudHNDb250cm9sID0gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChsZWF2ZSk7XG5cbiAgdmFyIGV4cGxpY2l0TGVhdmVEdXJhdGlvbiA9IHRvTnVtYmVyKFxuICAgIGlzT2JqZWN0KGR1cmF0aW9uKVxuICAgICAgPyBkdXJhdGlvbi5sZWF2ZVxuICAgICAgOiBkdXJhdGlvblxuICApO1xuXG4gIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBpc0RlZihleHBsaWNpdExlYXZlRHVyYXRpb24pKSB7XG4gICAgY2hlY2tEdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24sICdsZWF2ZScsIHZub2RlKTtcbiAgfVxuXG4gIHZhciBjYiA9IGVsLl9sZWF2ZUNiID0gb25jZShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5fcGVuZGluZykge1xuICAgICAgZWwucGFyZW50Tm9kZS5fcGVuZGluZ1t2bm9kZS5rZXldID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGV4cGVjdHNDU1MpIHtcbiAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcbiAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgfVxuICAgIGlmIChjYi5jYW5jZWxsZWQpIHtcbiAgICAgIGlmIChleHBlY3RzQ1NTKSB7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7XG4gICAgICB9XG4gICAgICBsZWF2ZUNhbmNlbGxlZCAmJiBsZWF2ZUNhbmNlbGxlZChlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJtKCk7XG4gICAgICBhZnRlckxlYXZlICYmIGFmdGVyTGVhdmUoZWwpO1xuICAgIH1cbiAgICBlbC5fbGVhdmVDYiA9IG51bGw7XG4gIH0pO1xuXG4gIGlmIChkZWxheUxlYXZlKSB7XG4gICAgZGVsYXlMZWF2ZShwZXJmb3JtTGVhdmUpO1xuICB9IGVsc2Uge1xuICAgIHBlcmZvcm1MZWF2ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGVyZm9ybUxlYXZlICgpIHtcbiAgICAvLyB0aGUgZGVsYXllZCBsZWF2ZSBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gY2FuY2VsbGVkXG4gICAgaWYgKGNiLmNhbmNlbGxlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIHJlY29yZCBsZWF2aW5nIGVsZW1lbnRcbiAgICBpZiAoIXZub2RlLmRhdGEuc2hvdykge1xuICAgICAgKGVsLnBhcmVudE5vZGUuX3BlbmRpbmcgfHwgKGVsLnBhcmVudE5vZGUuX3BlbmRpbmcgPSB7fSkpWyh2bm9kZS5rZXkpXSA9IHZub2RlO1xuICAgIH1cbiAgICBiZWZvcmVMZWF2ZSAmJiBiZWZvcmVMZWF2ZShlbCk7XG4gICAgaWYgKGV4cGVjdHNDU1MpIHtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgICAgbmV4dEZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTtcbiAgICAgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG4gICAgICAgICAgaWYgKCF1c2VyV2FudHNDb250cm9sKSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZER1cmF0aW9uKGV4cGxpY2l0TGVhdmVEdXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChjYiwgZXhwbGljaXRMZWF2ZUR1cmF0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgY2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGxlYXZlICYmIGxlYXZlKGVsLCBjYik7XG4gICAgaWYgKCFleHBlY3RzQ1NTICYmICF1c2VyV2FudHNDb250cm9sKSB7XG4gICAgICBjYigpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBvbmx5IHVzZWQgaW4gZGV2IG1vZGVcbmZ1bmN0aW9uIGNoZWNrRHVyYXRpb24gKHZhbCwgbmFtZSwgdm5vZGUpIHtcbiAgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7XG4gICAgd2FybihcbiAgICAgIFwiPHRyYW5zaXRpb24+IGV4cGxpY2l0IFwiICsgbmFtZSArIFwiIGR1cmF0aW9uIGlzIG5vdCBhIHZhbGlkIG51bWJlciAtIFwiICtcbiAgICAgIFwiZ290IFwiICsgKEpTT04uc3RyaW5naWZ5KHZhbCkpICsgXCIuXCIsXG4gICAgICB2bm9kZS5jb250ZXh0XG4gICAgKTtcbiAgfSBlbHNlIGlmIChpc05hTih2YWwpKSB7XG4gICAgd2FybihcbiAgICAgIFwiPHRyYW5zaXRpb24+IGV4cGxpY2l0IFwiICsgbmFtZSArIFwiIGR1cmF0aW9uIGlzIE5hTiAtIFwiICtcbiAgICAgICd0aGUgZHVyYXRpb24gZXhwcmVzc2lvbiBtaWdodCBiZSBpbmNvcnJlY3QuJyxcbiAgICAgIHZub2RlLmNvbnRleHRcbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWREdXJhdGlvbiAodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsKVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIHRyYW5zaXRpb24gaG9vaydzIGFyZ3VtZW50IGxlbmd0aC4gVGhlIGhvb2sgbWF5IGJlOlxuICogLSBhIG1lcmdlZCBob29rIChpbnZva2VyKSB3aXRoIHRoZSBvcmlnaW5hbCBpbiAuZm5zXG4gKiAtIGEgd3JhcHBlZCBjb21wb25lbnQgbWV0aG9kIChjaGVjayAuX2xlbmd0aClcbiAqIC0gYSBwbGFpbiBmdW5jdGlvbiAoLmxlbmd0aClcbiAqL1xuZnVuY3Rpb24gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aCAoZm4pIHtcbiAgaWYgKGlzVW5kZWYoZm4pKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgdmFyIGludm9rZXJGbnMgPSBmbi5mbnM7XG4gIGlmIChpc0RlZihpbnZva2VyRm5zKSkge1xuICAgIC8vIGludm9rZXJcbiAgICByZXR1cm4gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChcbiAgICAgIEFycmF5LmlzQXJyYXkoaW52b2tlckZucylcbiAgICAgICAgPyBpbnZva2VyRm5zWzBdXG4gICAgICAgIDogaW52b2tlckZuc1xuICAgIClcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gKGZuLl9sZW5ndGggfHwgZm4ubGVuZ3RoKSA+IDFcbiAgfVxufVxuXG5mdW5jdGlvbiBfZW50ZXIgKF8sIHZub2RlKSB7XG4gIGlmICh2bm9kZS5kYXRhLnNob3cgIT09IHRydWUpIHtcbiAgICBlbnRlcih2bm9kZSk7XG4gIH1cbn1cblxudmFyIHRyYW5zaXRpb24gPSBpbkJyb3dzZXIgPyB7XG4gIGNyZWF0ZTogX2VudGVyLFxuICBhY3RpdmF0ZTogX2VudGVyLFxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSQkMSAodm5vZGUsIHJtKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAodm5vZGUuZGF0YS5zaG93ICE9PSB0cnVlKSB7XG4gICAgICBsZWF2ZSh2bm9kZSwgcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBybSgpO1xuICAgIH1cbiAgfVxufSA6IHt9XG5cbnZhciBwbGF0Zm9ybU1vZHVsZXMgPSBbXG4gIGF0dHJzLFxuICBrbGFzcyxcbiAgZXZlbnRzLFxuICBkb21Qcm9wcyxcbiAgc3R5bGUsXG4gIHRyYW5zaXRpb25cbl1cblxuLyogICovXG5cbi8vIHRoZSBkaXJlY3RpdmUgbW9kdWxlIHNob3VsZCBiZSBhcHBsaWVkIGxhc3QsIGFmdGVyIGFsbFxuLy8gYnVpbHQtaW4gbW9kdWxlcyBoYXZlIGJlZW4gYXBwbGllZC5cbnZhciBtb2R1bGVzID0gcGxhdGZvcm1Nb2R1bGVzLmNvbmNhdChiYXNlTW9kdWxlcyk7XG5cbnZhciBwYXRjaCA9IGNyZWF0ZVBhdGNoRnVuY3Rpb24oeyBub2RlT3BzOiBub2RlT3BzLCBtb2R1bGVzOiBtb2R1bGVzIH0pO1xuXG4vKipcbiAqIE5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBsaWtlIGF0dGFjaGluZ1xuICogcHJvcGVydGllcyB0byBFbGVtZW50cy5cbiAqL1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbmlmIChpc0lFOSkge1xuICAvLyBodHRwOi8vd3d3Lm1hdHRzNDExLmNvbS9wb3N0L2ludGVybmV0LWV4cGxvcmVyLTktb25pbnB1dC9cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0aW9uY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgaWYgKGVsICYmIGVsLnZtb2RlbCkge1xuICAgICAgdHJpZ2dlcihlbCwgJ2lucHV0Jyk7XG4gICAgfVxuICB9KTtcbn1cblxudmFyIGRpcmVjdGl2ZSA9IHtcbiAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkIChlbCwgYmluZGluZywgdm5vZGUsIG9sZFZub2RlKSB7XG4gICAgaWYgKHZub2RlLnRhZyA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgIC8vICM2OTAzXG4gICAgICBpZiAob2xkVm5vZGUuZWxtICYmICFvbGRWbm9kZS5lbG0uX3ZPcHRpb25zKSB7XG4gICAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAncG9zdHBhdGNoJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRpcmVjdGl2ZS5jb21wb25lbnRVcGRhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLmNvbnRleHQpO1xuICAgICAgfVxuICAgICAgZWwuX3ZPcHRpb25zID0gW10ubWFwLmNhbGwoZWwub3B0aW9ucywgZ2V0VmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodm5vZGUudGFnID09PSAndGV4dGFyZWEnIHx8IGlzVGV4dElucHV0VHlwZShlbC50eXBlKSkge1xuICAgICAgZWwuX3ZNb2RpZmllcnMgPSBiaW5kaW5nLm1vZGlmaWVycztcbiAgICAgIGlmICghYmluZGluZy5tb2RpZmllcnMubGF6eSkge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbnN0YXJ0Jywgb25Db21wb3NpdGlvblN0YXJ0KTtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25lbmQnLCBvbkNvbXBvc2l0aW9uRW5kKTtcbiAgICAgICAgLy8gU2FmYXJpIDwgMTAuMiAmIFVJV2ViVmlldyBkb2Vzbid0IGZpcmUgY29tcG9zaXRpb25lbmQgd2hlblxuICAgICAgICAvLyBzd2l0Y2hpbmcgZm9jdXMgYmVmb3JlIGNvbmZpcm1pbmcgY29tcG9zaXRpb24gY2hvaWNlXG4gICAgICAgIC8vIHRoaXMgYWxzbyBmaXhlcyB0aGUgaXNzdWUgd2hlcmUgc29tZSBicm93c2VycyBlLmcuIGlPUyBDaHJvbWVcbiAgICAgICAgLy8gZmlyZXMgXCJjaGFuZ2VcIiBpbnN0ZWFkIG9mIFwiaW5wdXRcIiBvbiBhdXRvY29tcGxldGUuXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGlzSUU5KSB7XG4gICAgICAgICAgZWwudm1vZGVsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnRVcGRhdGVkOiBmdW5jdGlvbiBjb21wb25lbnRVcGRhdGVkIChlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICBpZiAodm5vZGUudGFnID09PSAnc2VsZWN0Jykge1xuICAgICAgc2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLmNvbnRleHQpO1xuICAgICAgLy8gaW4gY2FzZSB0aGUgb3B0aW9ucyByZW5kZXJlZCBieSB2LWZvciBoYXZlIGNoYW5nZWQsXG4gICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHZhbHVlIGlzIG91dC1vZi1zeW5jIHdpdGggdGhlIHJlbmRlcmVkIG9wdGlvbnMuXG4gICAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZmlsdGVyIG91dCB2YWx1ZXMgdGhhdCBubyBsb25nZXIgaGFzIGEgbWF0Y2hpbmdcbiAgICAgIC8vIG9wdGlvbiBpbiB0aGUgRE9NLlxuICAgICAgdmFyIHByZXZPcHRpb25zID0gZWwuX3ZPcHRpb25zO1xuICAgICAgdmFyIGN1ck9wdGlvbnMgPSBlbC5fdk9wdGlvbnMgPSBbXS5tYXAuY2FsbChlbC5vcHRpb25zLCBnZXRWYWx1ZSk7XG4gICAgICBpZiAoY3VyT3B0aW9ucy5zb21lKGZ1bmN0aW9uIChvLCBpKSB7IHJldHVybiAhbG9vc2VFcXVhbChvLCBwcmV2T3B0aW9uc1tpXSk7IH0pKSB7XG4gICAgICAgIC8vIHRyaWdnZXIgY2hhbmdlIGV2ZW50IGlmXG4gICAgICAgIC8vIG5vIG1hdGNoaW5nIG9wdGlvbiBmb3VuZCBmb3IgYXQgbGVhc3Qgb25lIHZhbHVlXG4gICAgICAgIHZhciBuZWVkUmVzZXQgPSBlbC5tdWx0aXBsZVxuICAgICAgICAgID8gYmluZGluZy52YWx1ZS5zb21lKGZ1bmN0aW9uICh2KSB7IHJldHVybiBoYXNOb01hdGNoaW5nT3B0aW9uKHYsIGN1ck9wdGlvbnMpOyB9KVxuICAgICAgICAgIDogYmluZGluZy52YWx1ZSAhPT0gYmluZGluZy5vbGRWYWx1ZSAmJiBoYXNOb01hdGNoaW5nT3B0aW9uKGJpbmRpbmcudmFsdWUsIGN1ck9wdGlvbnMpO1xuICAgICAgICBpZiAobmVlZFJlc2V0KSB7XG4gICAgICAgICAgdHJpZ2dlcihlbCwgJ2NoYW5nZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTZWxlY3RlZCAoZWwsIGJpbmRpbmcsIHZtKSB7XG4gIGFjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZtKTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc0lFIHx8IGlzRWRnZSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgYWN0dWFsbHlTZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm0pO1xuICAgIH0sIDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFjdHVhbGx5U2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkge1xuICB2YXIgdmFsdWUgPSBiaW5kaW5nLnZhbHVlO1xuICB2YXIgaXNNdWx0aXBsZSA9IGVsLm11bHRpcGxlO1xuICBpZiAoaXNNdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKFxuICAgICAgXCI8c2VsZWN0IG11bHRpcGxlIHYtbW9kZWw9XFxcIlwiICsgKGJpbmRpbmcuZXhwcmVzc2lvbikgKyBcIlxcXCI+IFwiICtcbiAgICAgIFwiZXhwZWN0cyBhbiBBcnJheSB2YWx1ZSBmb3IgaXRzIGJpbmRpbmcsIGJ1dCBnb3QgXCIgKyAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSkpLFxuICAgICAgdm1cbiAgICApO1xuICAgIHJldHVyblxuICB9XG4gIHZhciBzZWxlY3RlZCwgb3B0aW9uO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgb3B0aW9uID0gZWwub3B0aW9uc1tpXTtcbiAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgc2VsZWN0ZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIGdldFZhbHVlKG9wdGlvbikpID4gLTE7XG4gICAgICBpZiAob3B0aW9uLnNlbGVjdGVkICE9PSBzZWxlY3RlZCkge1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSBzZWxlY3RlZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGxvb3NlRXF1YWwoZ2V0VmFsdWUob3B0aW9uKSwgdmFsdWUpKSB7XG4gICAgICAgIGlmIChlbC5zZWxlY3RlZEluZGV4ICE9PSBpKSB7XG4gICAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICghaXNNdWx0aXBsZSkge1xuICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYXNOb01hdGNoaW5nT3B0aW9uICh2YWx1ZSwgb3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucy5ldmVyeShmdW5jdGlvbiAobykgeyByZXR1cm4gIWxvb3NlRXF1YWwobywgdmFsdWUpOyB9KVxufVxuXG5mdW5jdGlvbiBnZXRWYWx1ZSAob3B0aW9uKSB7XG4gIHJldHVybiAnX3ZhbHVlJyBpbiBvcHRpb25cbiAgICA/IG9wdGlvbi5fdmFsdWVcbiAgICA6IG9wdGlvbi52YWx1ZVxufVxuXG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQgKGUpIHtcbiAgZS50YXJnZXQuY29tcG9zaW5nID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gb25Db21wb3NpdGlvbkVuZCAoZSkge1xuICAvLyBwcmV2ZW50IHRyaWdnZXJpbmcgYW4gaW5wdXQgZXZlbnQgZm9yIG5vIHJlYXNvblxuICBpZiAoIWUudGFyZ2V0LmNvbXBvc2luZykgeyByZXR1cm4gfVxuICBlLnRhcmdldC5jb21wb3NpbmcgPSBmYWxzZTtcbiAgdHJpZ2dlcihlLnRhcmdldCwgJ2lucHV0Jyk7XG59XG5cbmZ1bmN0aW9uIHRyaWdnZXIgKGVsLCB0eXBlKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcbiAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG59XG5cbi8qICAqL1xuXG4vLyByZWN1cnNpdmVseSBzZWFyY2ggZm9yIHBvc3NpYmxlIHRyYW5zaXRpb24gZGVmaW5lZCBpbnNpZGUgdGhlIGNvbXBvbmVudCByb290XG5mdW5jdGlvbiBsb2NhdGVOb2RlICh2bm9kZSkge1xuICByZXR1cm4gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgJiYgKCF2bm9kZS5kYXRhIHx8ICF2bm9kZS5kYXRhLnRyYW5zaXRpb24pXG4gICAgPyBsb2NhdGVOb2RlKHZub2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSlcbiAgICA6IHZub2RlXG59XG5cbnZhciBzaG93ID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kIChlbCwgcmVmLCB2bm9kZSkge1xuICAgIHZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcblxuICAgIHZub2RlID0gbG9jYXRlTm9kZSh2bm9kZSk7XG4gICAgdmFyIHRyYW5zaXRpb24kJDEgPSB2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEudHJhbnNpdGlvbjtcbiAgICB2YXIgb3JpZ2luYWxEaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5ID1cbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICcnIDogZWwuc3R5bGUuZGlzcGxheTtcbiAgICBpZiAodmFsdWUgJiYgdHJhbnNpdGlvbiQkMSkge1xuICAgICAgdm5vZGUuZGF0YS5zaG93ID0gdHJ1ZTtcbiAgICAgIGVudGVyKHZub2RlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBvcmlnaW5hbERpc3BsYXk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gb3JpZ2luYWxEaXNwbGF5IDogJ25vbmUnO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSAoZWwsIHJlZiwgdm5vZGUpIHtcbiAgICB2YXIgdmFsdWUgPSByZWYudmFsdWU7XG4gICAgdmFyIG9sZFZhbHVlID0gcmVmLm9sZFZhbHVlO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCF2YWx1ZSA9PT0gIW9sZFZhbHVlKSB7IHJldHVybiB9XG4gICAgdm5vZGUgPSBsb2NhdGVOb2RlKHZub2RlKTtcbiAgICB2YXIgdHJhbnNpdGlvbiQkMSA9IHZub2RlLmRhdGEgJiYgdm5vZGUuZGF0YS50cmFuc2l0aW9uO1xuICAgIGlmICh0cmFuc2l0aW9uJCQxKSB7XG4gICAgICB2bm9kZS5kYXRhLnNob3cgPSB0cnVlO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGVudGVyKHZub2RlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IGVsLl9fdk9yaWdpbmFsRGlzcGxheTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZWF2ZSh2bm9kZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBlbC5fX3ZPcmlnaW5hbERpc3BsYXkgOiAnbm9uZSc7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kIChcbiAgICBlbCxcbiAgICBiaW5kaW5nLFxuICAgIHZub2RlLFxuICAgIG9sZFZub2RlLFxuICAgIGlzRGVzdHJveVxuICApIHtcbiAgICBpZiAoIWlzRGVzdHJveSkge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IGVsLl9fdk9yaWdpbmFsRGlzcGxheTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHBsYXRmb3JtRGlyZWN0aXZlcyA9IHtcbiAgbW9kZWw6IGRpcmVjdGl2ZSxcbiAgc2hvdzogc2hvd1xufVxuXG4vKiAgKi9cblxuLy8gUHJvdmlkZXMgdHJhbnNpdGlvbiBzdXBwb3J0IGZvciBhIHNpbmdsZSBlbGVtZW50L2NvbXBvbmVudC5cbi8vIHN1cHBvcnRzIHRyYW5zaXRpb24gbW9kZSAob3V0LWluIC8gaW4tb3V0KVxuXG52YXIgdHJhbnNpdGlvblByb3BzID0ge1xuICBuYW1lOiBTdHJpbmcsXG4gIGFwcGVhcjogQm9vbGVhbixcbiAgY3NzOiBCb29sZWFuLFxuICBtb2RlOiBTdHJpbmcsXG4gIHR5cGU6IFN0cmluZyxcbiAgZW50ZXJDbGFzczogU3RyaW5nLFxuICBsZWF2ZUNsYXNzOiBTdHJpbmcsXG4gIGVudGVyVG9DbGFzczogU3RyaW5nLFxuICBsZWF2ZVRvQ2xhc3M6IFN0cmluZyxcbiAgZW50ZXJBY3RpdmVDbGFzczogU3RyaW5nLFxuICBsZWF2ZUFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gIGFwcGVhckNsYXNzOiBTdHJpbmcsXG4gIGFwcGVhckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gIGFwcGVhclRvQ2xhc3M6IFN0cmluZyxcbiAgZHVyYXRpb246IFtOdW1iZXIsIFN0cmluZywgT2JqZWN0XVxufTtcblxuLy8gaW4gY2FzZSB0aGUgY2hpbGQgaXMgYWxzbyBhbiBhYnN0cmFjdCBjb21wb25lbnQsIGUuZy4gPGtlZXAtYWxpdmU+XG4vLyB3ZSB3YW50IHRvIHJlY3Vyc2l2ZWx5IHJldHJpZXZlIHRoZSByZWFsIGNvbXBvbmVudCB0byBiZSByZW5kZXJlZFxuZnVuY3Rpb24gZ2V0UmVhbENoaWxkICh2bm9kZSkge1xuICB2YXIgY29tcE9wdGlvbnMgPSB2bm9kZSAmJiB2bm9kZS5jb21wb25lbnRPcHRpb25zO1xuICBpZiAoY29tcE9wdGlvbnMgJiYgY29tcE9wdGlvbnMuQ3Rvci5vcHRpb25zLmFic3RyYWN0KSB7XG4gICAgcmV0dXJuIGdldFJlYWxDaGlsZChnZXRGaXJzdENvbXBvbmVudENoaWxkKGNvbXBPcHRpb25zLmNoaWxkcmVuKSlcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdm5vZGVcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0VHJhbnNpdGlvbkRhdGEgKGNvbXApIHtcbiAgdmFyIGRhdGEgPSB7fTtcbiAgdmFyIG9wdGlvbnMgPSBjb21wLiRvcHRpb25zO1xuICAvLyBwcm9wc1xuICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5wcm9wc0RhdGEpIHtcbiAgICBkYXRhW2tleV0gPSBjb21wW2tleV07XG4gIH1cbiAgLy8gZXZlbnRzLlxuICAvLyBleHRyYWN0IGxpc3RlbmVycyBhbmQgcGFzcyB0aGVtIGRpcmVjdGx5IHRvIHRoZSB0cmFuc2l0aW9uIG1ldGhvZHNcbiAgdmFyIGxpc3RlbmVycyA9IG9wdGlvbnMuX3BhcmVudExpc3RlbmVycztcbiAgZm9yICh2YXIga2V5JDEgaW4gbGlzdGVuZXJzKSB7XG4gICAgZGF0YVtjYW1lbGl6ZShrZXkkMSldID0gbGlzdGVuZXJzW2tleSQxXTtcbiAgfVxuICByZXR1cm4gZGF0YVxufVxuXG5mdW5jdGlvbiBwbGFjZWhvbGRlciAoaCwgcmF3Q2hpbGQpIHtcbiAgaWYgKC9cXGQta2VlcC1hbGl2ZSQvLnRlc3QocmF3Q2hpbGQudGFnKSkge1xuICAgIHJldHVybiBoKCdrZWVwLWFsaXZlJywge1xuICAgICAgcHJvcHM6IHJhd0NoaWxkLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBoYXNQYXJlbnRUcmFuc2l0aW9uICh2bm9kZSkge1xuICB3aGlsZSAoKHZub2RlID0gdm5vZGUucGFyZW50KSkge1xuICAgIGlmICh2bm9kZS5kYXRhLnRyYW5zaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzU2FtZUNoaWxkIChjaGlsZCwgb2xkQ2hpbGQpIHtcbiAgcmV0dXJuIG9sZENoaWxkLmtleSA9PT0gY2hpbGQua2V5ICYmIG9sZENoaWxkLnRhZyA9PT0gY2hpbGQudGFnXG59XG5cbnZhciBUcmFuc2l0aW9uID0ge1xuICBuYW1lOiAndHJhbnNpdGlvbicsXG4gIHByb3BzOiB0cmFuc2l0aW9uUHJvcHMsXG4gIGFic3RyYWN0OiB0cnVlLFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0O1xuICAgIGlmICghY2hpbGRyZW4pIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGZpbHRlciBvdXQgdGV4dCBub2RlcyAocG9zc2libGUgd2hpdGVzcGFjZXMpXG4gICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMudGFnIHx8IGlzQXN5bmNQbGFjZWhvbGRlcihjKTsgfSk7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIHdhcm4gbXVsdGlwbGUgZWxlbWVudHNcbiAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgd2FybihcbiAgICAgICAgJzx0cmFuc2l0aW9uPiBjYW4gb25seSBiZSB1c2VkIG9uIGEgc2luZ2xlIGVsZW1lbnQuIFVzZSAnICtcbiAgICAgICAgJzx0cmFuc2l0aW9uLWdyb3VwPiBmb3IgbGlzdHMuJyxcbiAgICAgICAgdGhpcy4kcGFyZW50XG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciBtb2RlID0gdGhpcy5tb2RlO1xuXG4gICAgLy8gd2FybiBpbnZhbGlkIG1vZGVcbiAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgIG1vZGUgJiYgbW9kZSAhPT0gJ2luLW91dCcgJiYgbW9kZSAhPT0gJ291dC1pbidcbiAgICApIHtcbiAgICAgIHdhcm4oXG4gICAgICAgICdpbnZhbGlkIDx0cmFuc2l0aW9uPiBtb2RlOiAnICsgbW9kZSxcbiAgICAgICAgdGhpcy4kcGFyZW50XG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciByYXdDaGlsZCA9IGNoaWxkcmVuWzBdO1xuXG4gICAgLy8gaWYgdGhpcyBpcyBhIGNvbXBvbmVudCByb290IG5vZGUgYW5kIHRoZSBjb21wb25lbnQnc1xuICAgIC8vIHBhcmVudCBjb250YWluZXIgbm9kZSBhbHNvIGhhcyB0cmFuc2l0aW9uLCBza2lwLlxuICAgIGlmIChoYXNQYXJlbnRUcmFuc2l0aW9uKHRoaXMuJHZub2RlKSkge1xuICAgICAgcmV0dXJuIHJhd0NoaWxkXG4gICAgfVxuXG4gICAgLy8gYXBwbHkgdHJhbnNpdGlvbiBkYXRhIHRvIGNoaWxkXG4gICAgLy8gdXNlIGdldFJlYWxDaGlsZCgpIHRvIGlnbm9yZSBhYnN0cmFjdCBjb21wb25lbnRzIGUuZy4ga2VlcC1hbGl2ZVxuICAgIHZhciBjaGlsZCA9IGdldFJlYWxDaGlsZChyYXdDaGlsZCk7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFjaGlsZCkge1xuICAgICAgcmV0dXJuIHJhd0NoaWxkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xlYXZpbmcpIHtcbiAgICAgIHJldHVybiBwbGFjZWhvbGRlcihoLCByYXdDaGlsZClcbiAgICB9XG5cbiAgICAvLyBlbnN1cmUgYSBrZXkgdGhhdCBpcyB1bmlxdWUgdG8gdGhlIHZub2RlIHR5cGUgYW5kIHRvIHRoaXMgdHJhbnNpdGlvblxuICAgIC8vIGNvbXBvbmVudCBpbnN0YW5jZS4gVGhpcyBrZXkgd2lsbCBiZSB1c2VkIHRvIHJlbW92ZSBwZW5kaW5nIGxlYXZpbmcgbm9kZXNcbiAgICAvLyBkdXJpbmcgZW50ZXJpbmcuXG4gICAgdmFyIGlkID0gXCJfX3RyYW5zaXRpb24tXCIgKyAodGhpcy5fdWlkKSArIFwiLVwiO1xuICAgIGNoaWxkLmtleSA9IGNoaWxkLmtleSA9PSBudWxsXG4gICAgICA/IGNoaWxkLmlzQ29tbWVudFxuICAgICAgICA/IGlkICsgJ2NvbW1lbnQnXG4gICAgICAgIDogaWQgKyBjaGlsZC50YWdcbiAgICAgIDogaXNQcmltaXRpdmUoY2hpbGQua2V5KVxuICAgICAgICA/IChTdHJpbmcoY2hpbGQua2V5KS5pbmRleE9mKGlkKSA9PT0gMCA/IGNoaWxkLmtleSA6IGlkICsgY2hpbGQua2V5KVxuICAgICAgICA6IGNoaWxkLmtleTtcblxuICAgIHZhciBkYXRhID0gKGNoaWxkLmRhdGEgfHwgKGNoaWxkLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7XG4gICAgdmFyIG9sZFJhd0NoaWxkID0gdGhpcy5fdm5vZGU7XG4gICAgdmFyIG9sZENoaWxkID0gZ2V0UmVhbENoaWxkKG9sZFJhd0NoaWxkKTtcblxuICAgIC8vIG1hcmsgdi1zaG93XG4gICAgLy8gc28gdGhhdCB0aGUgdHJhbnNpdGlvbiBtb2R1bGUgY2FuIGhhbmQgb3ZlciB0aGUgY29udHJvbCB0byB0aGUgZGlyZWN0aXZlXG4gICAgaWYgKGNoaWxkLmRhdGEuZGlyZWN0aXZlcyAmJiBjaGlsZC5kYXRhLmRpcmVjdGl2ZXMuc29tZShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lID09PSAnc2hvdyc7IH0pKSB7XG4gICAgICBjaGlsZC5kYXRhLnNob3cgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIG9sZENoaWxkICYmXG4gICAgICBvbGRDaGlsZC5kYXRhICYmXG4gICAgICAhaXNTYW1lQ2hpbGQoY2hpbGQsIG9sZENoaWxkKSAmJlxuICAgICAgIWlzQXN5bmNQbGFjZWhvbGRlcihvbGRDaGlsZCkgJiZcbiAgICAgIC8vICM2Njg3IGNvbXBvbmVudCByb290IGlzIGEgY29tbWVudCBub2RlXG4gICAgICAhKG9sZENoaWxkLmNvbXBvbmVudEluc3RhbmNlICYmIG9sZENoaWxkLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpXG4gICAgKSB7XG4gICAgICAvLyByZXBsYWNlIG9sZCBjaGlsZCB0cmFuc2l0aW9uIGRhdGEgd2l0aCBmcmVzaCBvbmVcbiAgICAgIC8vIGltcG9ydGFudCBmb3IgZHluYW1pYyB0cmFuc2l0aW9ucyFcbiAgICAgIHZhciBvbGREYXRhID0gb2xkQ2hpbGQuZGF0YS50cmFuc2l0aW9uID0gZXh0ZW5kKHt9LCBkYXRhKTtcbiAgICAgIC8vIGhhbmRsZSB0cmFuc2l0aW9uIG1vZGVcbiAgICAgIGlmIChtb2RlID09PSAnb3V0LWluJykge1xuICAgICAgICAvLyByZXR1cm4gcGxhY2Vob2xkZXIgbm9kZSBhbmQgcXVldWUgdXBkYXRlIHdoZW4gbGVhdmUgZmluaXNoZXNcbiAgICAgICAgdGhpcy5fbGVhdmluZyA9IHRydWU7XG4gICAgICAgIG1lcmdlVk5vZGVIb29rKG9sZERhdGEsICdhZnRlckxlYXZlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMkMS5fbGVhdmluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMkMS4kZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwbGFjZWhvbGRlcihoLCByYXdDaGlsZClcbiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2luLW91dCcpIHtcbiAgICAgICAgaWYgKGlzQXN5bmNQbGFjZWhvbGRlcihjaGlsZCkpIHtcbiAgICAgICAgICByZXR1cm4gb2xkUmF3Q2hpbGRcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsYXllZExlYXZlO1xuICAgICAgICB2YXIgcGVyZm9ybUxlYXZlID0gZnVuY3Rpb24gKCkgeyBkZWxheWVkTGVhdmUoKTsgfTtcbiAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2FmdGVyRW50ZXInLCBwZXJmb3JtTGVhdmUpO1xuICAgICAgICBtZXJnZVZOb2RlSG9vayhkYXRhLCAnZW50ZXJDYW5jZWxsZWQnLCBwZXJmb3JtTGVhdmUpO1xuICAgICAgICBtZXJnZVZOb2RlSG9vayhvbGREYXRhLCAnZGVsYXlMZWF2ZScsIGZ1bmN0aW9uIChsZWF2ZSkgeyBkZWxheWVkTGVhdmUgPSBsZWF2ZTsgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhd0NoaWxkXG4gIH1cbn1cblxuLyogICovXG5cbi8vIFByb3ZpZGVzIHRyYW5zaXRpb24gc3VwcG9ydCBmb3IgbGlzdCBpdGVtcy5cbi8vIHN1cHBvcnRzIG1vdmUgdHJhbnNpdGlvbnMgdXNpbmcgdGhlIEZMSVAgdGVjaG5pcXVlLlxuXG4vLyBCZWNhdXNlIHRoZSB2ZG9tJ3MgY2hpbGRyZW4gdXBkYXRlIGFsZ29yaXRobSBpcyBcInVuc3RhYmxlXCIgLSBpLmUuXG4vLyBpdCBkb2Vzbid0IGd1YXJhbnRlZSB0aGUgcmVsYXRpdmUgcG9zaXRpb25pbmcgb2YgcmVtb3ZlZCBlbGVtZW50cyxcbi8vIHdlIGZvcmNlIHRyYW5zaXRpb24tZ3JvdXAgdG8gdXBkYXRlIGl0cyBjaGlsZHJlbiBpbnRvIHR3byBwYXNzZXM6XG4vLyBpbiB0aGUgZmlyc3QgcGFzcywgd2UgcmVtb3ZlIGFsbCBub2RlcyB0aGF0IG5lZWQgdG8gYmUgcmVtb3ZlZCxcbi8vIHRyaWdnZXJpbmcgdGhlaXIgbGVhdmluZyB0cmFuc2l0aW9uOyBpbiB0aGUgc2Vjb25kIHBhc3MsIHdlIGluc2VydC9tb3ZlXG4vLyBpbnRvIHRoZSBmaW5hbCBkZXNpcmVkIHN0YXRlLiBUaGlzIHdheSBpbiB0aGUgc2Vjb25kIHBhc3MgcmVtb3ZlZFxuLy8gbm9kZXMgd2lsbCByZW1haW4gd2hlcmUgdGhleSBzaG91bGQgYmUuXG5cbnZhciBwcm9wcyA9IGV4dGVuZCh7XG4gIHRhZzogU3RyaW5nLFxuICBtb3ZlQ2xhc3M6IFN0cmluZ1xufSwgdHJhbnNpdGlvblByb3BzKTtcblxuZGVsZXRlIHByb3BzLm1vZGU7XG5cbnZhciBUcmFuc2l0aW9uR3JvdXAgPSB7XG4gIHByb3BzOiBwcm9wcyxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoaCkge1xuICAgIHZhciB0YWcgPSB0aGlzLnRhZyB8fCB0aGlzLiR2bm9kZS5kYXRhLnRhZyB8fCAnc3Bhbic7XG4gICAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMucHJldkNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjtcbiAgICB2YXIgcmF3Q2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0IHx8IFtdO1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICB2YXIgdHJhbnNpdGlvbkRhdGEgPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYyA9IHJhd0NoaWxkcmVuW2ldO1xuICAgICAgaWYgKGMudGFnKSB7XG4gICAgICAgIGlmIChjLmtleSAhPSBudWxsICYmIFN0cmluZyhjLmtleSkuaW5kZXhPZignX192bGlzdCcpICE9PSAwKSB7XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaChjKTtcbiAgICAgICAgICBtYXBbYy5rZXldID0gY1xuICAgICAgICAgIDsoYy5kYXRhIHx8IChjLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgb3B0cyA9IGMuY29tcG9uZW50T3B0aW9ucztcbiAgICAgICAgICB2YXIgbmFtZSA9IG9wdHMgPyAob3B0cy5DdG9yLm9wdGlvbnMubmFtZSB8fCBvcHRzLnRhZyB8fCAnJykgOiBjLnRhZztcbiAgICAgICAgICB3YXJuKChcIjx0cmFuc2l0aW9uLWdyb3VwPiBjaGlsZHJlbiBtdXN0IGJlIGtleWVkOiA8XCIgKyBuYW1lICsgXCI+XCIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcmV2Q2hpbGRyZW4pIHtcbiAgICAgIHZhciBrZXB0ID0gW107XG4gICAgICB2YXIgcmVtb3ZlZCA9IFtdO1xuICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgcHJldkNoaWxkcmVuLmxlbmd0aDsgaSQxKyspIHtcbiAgICAgICAgdmFyIGMkMSA9IHByZXZDaGlsZHJlbltpJDFdO1xuICAgICAgICBjJDEuZGF0YS50cmFuc2l0aW9uID0gdHJhbnNpdGlvbkRhdGE7XG4gICAgICAgIGMkMS5kYXRhLnBvcyA9IGMkMS5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChtYXBbYyQxLmtleV0pIHtcbiAgICAgICAgICBrZXB0LnB1c2goYyQxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZW1vdmVkLnB1c2goYyQxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5rZXB0ID0gaCh0YWcsIG51bGwsIGtlcHQpO1xuICAgICAgdGhpcy5yZW1vdmVkID0gcmVtb3ZlZDtcbiAgICB9XG5cbiAgICByZXR1cm4gaCh0YWcsIG51bGwsIGNoaWxkcmVuKVxuICB9LFxuXG4gIGJlZm9yZVVwZGF0ZTogZnVuY3Rpb24gYmVmb3JlVXBkYXRlICgpIHtcbiAgICAvLyBmb3JjZSByZW1vdmluZyBwYXNzXG4gICAgdGhpcy5fX3BhdGNoX18oXG4gICAgICB0aGlzLl92bm9kZSxcbiAgICAgIHRoaXMua2VwdCxcbiAgICAgIGZhbHNlLCAvLyBoeWRyYXRpbmdcbiAgICAgIHRydWUgLy8gcmVtb3ZlT25seSAoIWltcG9ydGFudCwgYXZvaWRzIHVubmVjZXNzYXJ5IG1vdmVzKVxuICAgICk7XG4gICAgdGhpcy5fdm5vZGUgPSB0aGlzLmtlcHQ7XG4gIH0sXG5cbiAgdXBkYXRlZDogZnVuY3Rpb24gdXBkYXRlZCAoKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcmV2Q2hpbGRyZW47XG4gICAgdmFyIG1vdmVDbGFzcyA9IHRoaXMubW92ZUNsYXNzIHx8ICgodGhpcy5uYW1lIHx8ICd2JykgKyAnLW1vdmUnKTtcbiAgICBpZiAoIWNoaWxkcmVuLmxlbmd0aCB8fCAhdGhpcy5oYXNNb3ZlKGNoaWxkcmVuWzBdLmVsbSwgbW92ZUNsYXNzKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gd2UgZGl2aWRlIHRoZSB3b3JrIGludG8gdGhyZWUgbG9vcHMgdG8gYXZvaWQgbWl4aW5nIERPTSByZWFkcyBhbmQgd3JpdGVzXG4gICAgLy8gaW4gZWFjaCBpdGVyYXRpb24gLSB3aGljaCBoZWxwcyBwcmV2ZW50IGxheW91dCB0aHJhc2hpbmcuXG4gICAgY2hpbGRyZW4uZm9yRWFjaChjYWxsUGVuZGluZ0Nicyk7XG4gICAgY2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7XG4gICAgY2hpbGRyZW4uZm9yRWFjaChhcHBseVRyYW5zbGF0aW9uKTtcblxuICAgIC8vIGZvcmNlIHJlZmxvdyB0byBwdXQgZXZlcnl0aGluZyBpbiBwb3NpdGlvblxuICAgIC8vIGFzc2lnbiB0byB0aGlzIHRvIGF2b2lkIGJlaW5nIHJlbW92ZWQgaW4gdHJlZS1zaGFraW5nXG4gICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gICAgdGhpcy5fcmVmbG93ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7XG5cbiAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICBpZiAoYy5kYXRhLm1vdmVkKSB7XG4gICAgICAgIHZhciBlbCA9IGMuZWxtO1xuICAgICAgICB2YXIgcyA9IGVsLnN0eWxlO1xuICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7XG4gICAgICAgIHMudHJhbnNmb3JtID0gcy5XZWJraXRUcmFuc2Zvcm0gPSBzLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcnO1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmRFdmVudCwgZWwuX21vdmVDYiA9IGZ1bmN0aW9uIGNiIChlKSB7XG4gICAgICAgICAgaWYgKCFlIHx8IC90cmFuc2Zvcm0kLy50ZXN0KGUucHJvcGVydHlOYW1lKSkge1xuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsIGNiKTtcbiAgICAgICAgICAgIGVsLl9tb3ZlQ2IgPSBudWxsO1xuICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgbWV0aG9kczoge1xuICAgIGhhc01vdmU6IGZ1bmN0aW9uIGhhc01vdmUgKGVsLCBtb3ZlQ2xhc3MpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCFoYXNUcmFuc2l0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAodGhpcy5faGFzTW92ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFzTW92ZVxuICAgICAgfVxuICAgICAgLy8gRGV0ZWN0IHdoZXRoZXIgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3ZlIGNsYXNzIGFwcGxpZWQgaGFzXG4gICAgICAvLyBDU1MgdHJhbnNpdGlvbnMuIFNpbmNlIHRoZSBlbGVtZW50IG1heSBiZSBpbnNpZGUgYW4gZW50ZXJpbmdcbiAgICAgIC8vIHRyYW5zaXRpb24gYXQgdGhpcyB2ZXJ5IG1vbWVudCwgd2UgbWFrZSBhIGNsb25lIG9mIGl0IGFuZCByZW1vdmVcbiAgICAgIC8vIGFsbCBvdGhlciB0cmFuc2l0aW9uIGNsYXNzZXMgYXBwbGllZCB0byBlbnN1cmUgb25seSB0aGUgbW92ZSBjbGFzc1xuICAgICAgLy8gaXMgYXBwbGllZC5cbiAgICAgIHZhciBjbG9uZSA9IGVsLmNsb25lTm9kZSgpO1xuICAgICAgaWYgKGVsLl90cmFuc2l0aW9uQ2xhc3Nlcykge1xuICAgICAgICBlbC5fdHJhbnNpdGlvbkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7IHJlbW92ZUNsYXNzKGNsb25lLCBjbHMpOyB9KTtcbiAgICAgIH1cbiAgICAgIGFkZENsYXNzKGNsb25lLCBtb3ZlQ2xhc3MpO1xuICAgICAgY2xvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIHRoaXMuJGVsLmFwcGVuZENoaWxkKGNsb25lKTtcbiAgICAgIHZhciBpbmZvID0gZ2V0VHJhbnNpdGlvbkluZm8oY2xvbmUpO1xuICAgICAgdGhpcy4kZWwucmVtb3ZlQ2hpbGQoY2xvbmUpO1xuICAgICAgcmV0dXJuICh0aGlzLl9oYXNNb3ZlID0gaW5mby5oYXNUcmFuc2Zvcm0pXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNhbGxQZW5kaW5nQ2JzIChjKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoYy5lbG0uX21vdmVDYikge1xuICAgIGMuZWxtLl9tb3ZlQ2IoKTtcbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGMuZWxtLl9lbnRlckNiKSB7XG4gICAgYy5lbG0uX2VudGVyQ2IoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWNvcmRQb3NpdGlvbiAoYykge1xuICBjLmRhdGEubmV3UG9zID0gYy5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG59XG5cbmZ1bmN0aW9uIGFwcGx5VHJhbnNsYXRpb24gKGMpIHtcbiAgdmFyIG9sZFBvcyA9IGMuZGF0YS5wb3M7XG4gIHZhciBuZXdQb3MgPSBjLmRhdGEubmV3UG9zO1xuICB2YXIgZHggPSBvbGRQb3MubGVmdCAtIG5ld1Bvcy5sZWZ0O1xuICB2YXIgZHkgPSBvbGRQb3MudG9wIC0gbmV3UG9zLnRvcDtcbiAgaWYgKGR4IHx8IGR5KSB7XG4gICAgYy5kYXRhLm1vdmVkID0gdHJ1ZTtcbiAgICB2YXIgcyA9IGMuZWxtLnN0eWxlO1xuICAgIHMudHJhbnNmb3JtID0gcy5XZWJraXRUcmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIGR4ICsgXCJweCxcIiArIGR5ICsgXCJweClcIjtcbiAgICBzLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwcyc7XG4gIH1cbn1cblxudmFyIHBsYXRmb3JtQ29tcG9uZW50cyA9IHtcbiAgVHJhbnNpdGlvbjogVHJhbnNpdGlvbixcbiAgVHJhbnNpdGlvbkdyb3VwOiBUcmFuc2l0aW9uR3JvdXBcbn1cblxuLyogICovXG5cbi8vIGluc3RhbGwgcGxhdGZvcm0gc3BlY2lmaWMgdXRpbHNcblZ1ZS5jb25maWcubXVzdFVzZVByb3AgPSBtdXN0VXNlUHJvcDtcblZ1ZS5jb25maWcuaXNSZXNlcnZlZFRhZyA9IGlzUmVzZXJ2ZWRUYWc7XG5WdWUuY29uZmlnLmlzUmVzZXJ2ZWRBdHRyID0gaXNSZXNlcnZlZEF0dHI7XG5WdWUuY29uZmlnLmdldFRhZ05hbWVzcGFjZSA9IGdldFRhZ05hbWVzcGFjZTtcblZ1ZS5jb25maWcuaXNVbmtub3duRWxlbWVudCA9IGlzVW5rbm93bkVsZW1lbnQ7XG5cbi8vIGluc3RhbGwgcGxhdGZvcm0gcnVudGltZSBkaXJlY3RpdmVzICYgY29tcG9uZW50c1xuZXh0ZW5kKFZ1ZS5vcHRpb25zLmRpcmVjdGl2ZXMsIHBsYXRmb3JtRGlyZWN0aXZlcyk7XG5leHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgcGxhdGZvcm1Db21wb25lbnRzKTtcblxuLy8gaW5zdGFsbCBwbGF0Zm9ybSBwYXRjaCBmdW5jdGlvblxuVnVlLnByb3RvdHlwZS5fX3BhdGNoX18gPSBpbkJyb3dzZXIgPyBwYXRjaCA6IG5vb3A7XG5cbi8vIHB1YmxpYyBtb3VudCBtZXRob2RcblZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKFxuICBlbCxcbiAgaHlkcmF0aW5nXG4pIHtcbiAgZWwgPSBlbCAmJiBpbkJyb3dzZXIgPyBxdWVyeShlbCkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBtb3VudENvbXBvbmVudCh0aGlzLCBlbCwgaHlkcmF0aW5nKVxufTtcblxuLy8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5pZiAoaW5Ccm93c2VyKSB7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcbiAgICAgIGlmIChkZXZ0b29scykge1xuICAgICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Rlc3QnICYmXG4gICAgICAgIGlzQ2hyb21lXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZVtjb25zb2xlLmluZm8gPyAnaW5mbycgOiAnbG9nJ10oXG4gICAgICAgICAgJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZXh0ZW5zaW9uIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgK1xuICAgICAgICAgICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Rlc3QnICYmXG4gICAgICBjb25maWcucHJvZHVjdGlvblRpcCAhPT0gZmFsc2UgJiZcbiAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc29sZVtjb25zb2xlLmluZm8gPyAnaW5mbycgOiAnbG9nJ10oXG4gICAgICAgIFwiWW91IGFyZSBydW5uaW5nIFZ1ZSBpbiBkZXZlbG9wbWVudCBtb2RlLlxcblwiICtcbiAgICAgICAgXCJNYWtlIHN1cmUgdG8gdHVybiBvbiBwcm9kdWN0aW9uIG1vZGUgd2hlbiBkZXBsb3lpbmcgZm9yIHByb2R1Y3Rpb24uXFxuXCIgK1xuICAgICAgICBcIlNlZSBtb3JlIHRpcHMgYXQgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvZGVwbG95bWVudC5odG1sXCJcbiAgICAgICk7XG4gICAgfVxuICB9LCAwKTtcbn1cblxuLyogICovXG5cbnZhciBkZWZhdWx0VGFnUkUgPSAvXFx7XFx7KCg/Oi58XFxuKSs/KVxcfVxcfS9nO1xudmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXG52YXIgYnVpbGRSZWdleCA9IGNhY2hlZChmdW5jdGlvbiAoZGVsaW1pdGVycykge1xuICB2YXIgb3BlbiA9IGRlbGltaXRlcnNbMF0ucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG4gIHZhciBjbG9zZSA9IGRlbGltaXRlcnNbMV0ucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG4gIHJldHVybiBuZXcgUmVnRXhwKG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpXG59KTtcblxuXG5cbmZ1bmN0aW9uIHBhcnNlVGV4dCAoXG4gIHRleHQsXG4gIGRlbGltaXRlcnNcbikge1xuICB2YXIgdGFnUkUgPSBkZWxpbWl0ZXJzID8gYnVpbGRSZWdleChkZWxpbWl0ZXJzKSA6IGRlZmF1bHRUYWdSRTtcbiAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIHRva2VucyA9IFtdO1xuICB2YXIgcmF3VG9rZW5zID0gW107XG4gIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuICB2YXIgbWF0Y2gsIGluZGV4LCB0b2tlblZhbHVlO1xuICB3aGlsZSAoKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkpIHtcbiAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xuICAgICAgcmF3VG9rZW5zLnB1c2godG9rZW5WYWx1ZSA9IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleCkpO1xuICAgICAgdG9rZW5zLnB1c2goSlNPTi5zdHJpbmdpZnkodG9rZW5WYWx1ZSkpO1xuICAgIH1cbiAgICAvLyB0YWcgdG9rZW5cbiAgICB2YXIgZXhwID0gcGFyc2VGaWx0ZXJzKG1hdGNoWzFdLnRyaW0oKSk7XG4gICAgdG9rZW5zLnB1c2goKFwiX3MoXCIgKyBleHAgKyBcIilcIikpO1xuICAgIHJhd1Rva2Vucy5wdXNoKHsgJ0BiaW5kaW5nJzogZXhwIH0pO1xuICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICB9XG4gIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgIHJhd1Rva2Vucy5wdXNoKHRva2VuVmFsdWUgPSB0ZXh0LnNsaWNlKGxhc3RJbmRleCkpO1xuICAgIHRva2Vucy5wdXNoKEpTT04uc3RyaW5naWZ5KHRva2VuVmFsdWUpKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGV4cHJlc3Npb246IHRva2Vucy5qb2luKCcrJyksXG4gICAgdG9rZW5zOiByYXdUb2tlbnNcbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gdHJhbnNmb3JtTm9kZSAoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHdhcm4gPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47XG4gIHZhciBzdGF0aWNDbGFzcyA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICdjbGFzcycpO1xuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgc3RhdGljQ2xhc3MpIHtcbiAgICB2YXIgcmVzID0gcGFyc2VUZXh0KHN0YXRpY0NsYXNzLCBvcHRpb25zLmRlbGltaXRlcnMpO1xuICAgIGlmIChyZXMpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIFwiY2xhc3M9XFxcIlwiICsgc3RhdGljQ2xhc3MgKyBcIlxcXCI6IFwiICtcbiAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArXG4gICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgK1xuICAgICAgICAnaW5zdGVhZCBvZiA8ZGl2IGNsYXNzPVwie3sgdmFsIH19XCI+LCB1c2UgPGRpdiA6Y2xhc3M9XCJ2YWxcIj4uJ1xuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgaWYgKHN0YXRpY0NsYXNzKSB7XG4gICAgZWwuc3RhdGljQ2xhc3MgPSBKU09OLnN0cmluZ2lmeShzdGF0aWNDbGFzcyk7XG4gIH1cbiAgdmFyIGNsYXNzQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnY2xhc3MnLCBmYWxzZSAvKiBnZXRTdGF0aWMgKi8pO1xuICBpZiAoY2xhc3NCaW5kaW5nKSB7XG4gICAgZWwuY2xhc3NCaW5kaW5nID0gY2xhc3NCaW5kaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbkRhdGEgKGVsKSB7XG4gIHZhciBkYXRhID0gJyc7XG4gIGlmIChlbC5zdGF0aWNDbGFzcykge1xuICAgIGRhdGEgKz0gXCJzdGF0aWNDbGFzczpcIiArIChlbC5zdGF0aWNDbGFzcykgKyBcIixcIjtcbiAgfVxuICBpZiAoZWwuY2xhc3NCaW5kaW5nKSB7XG4gICAgZGF0YSArPSBcImNsYXNzOlwiICsgKGVsLmNsYXNzQmluZGluZykgKyBcIixcIjtcbiAgfVxuICByZXR1cm4gZGF0YVxufVxuXG52YXIga2xhc3MkMSA9IHtcbiAgc3RhdGljS2V5czogWydzdGF0aWNDbGFzcyddLFxuICB0cmFuc2Zvcm1Ob2RlOiB0cmFuc2Zvcm1Ob2RlLFxuICBnZW5EYXRhOiBnZW5EYXRhXG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Ob2RlJDEgKGVsLCBvcHRpb25zKSB7XG4gIHZhciB3YXJuID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuO1xuICB2YXIgc3RhdGljU3R5bGUgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc3R5bGUnKTtcbiAgaWYgKHN0YXRpY1N0eWxlKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAge1xuICAgICAgdmFyIHJlcyA9IHBhcnNlVGV4dChzdGF0aWNTdHlsZSwgb3B0aW9ucy5kZWxpbWl0ZXJzKTtcbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBcInN0eWxlPVxcXCJcIiArIHN0YXRpY1N0eWxlICsgXCJcXFwiOiBcIiArXG4gICAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArXG4gICAgICAgICAgJ1VzZSB2LWJpbmQgb3IgdGhlIGNvbG9uIHNob3J0aGFuZCBpbnN0ZWFkLiBGb3IgZXhhbXBsZSwgJyArXG4gICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBzdHlsZT1cInt7IHZhbCB9fVwiPiwgdXNlIDxkaXYgOnN0eWxlPVwidmFsXCI+LidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWwuc3RhdGljU3R5bGUgPSBKU09OLnN0cmluZ2lmeShwYXJzZVN0eWxlVGV4dChzdGF0aWNTdHlsZSkpO1xuICB9XG5cbiAgdmFyIHN0eWxlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnc3R5bGUnLCBmYWxzZSAvKiBnZXRTdGF0aWMgKi8pO1xuICBpZiAoc3R5bGVCaW5kaW5nKSB7XG4gICAgZWwuc3R5bGVCaW5kaW5nID0gc3R5bGVCaW5kaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbkRhdGEkMSAoZWwpIHtcbiAgdmFyIGRhdGEgPSAnJztcbiAgaWYgKGVsLnN0YXRpY1N0eWxlKSB7XG4gICAgZGF0YSArPSBcInN0YXRpY1N0eWxlOlwiICsgKGVsLnN0YXRpY1N0eWxlKSArIFwiLFwiO1xuICB9XG4gIGlmIChlbC5zdHlsZUJpbmRpbmcpIHtcbiAgICBkYXRhICs9IFwic3R5bGU6KFwiICsgKGVsLnN0eWxlQmluZGluZykgKyBcIiksXCI7XG4gIH1cbiAgcmV0dXJuIGRhdGFcbn1cblxudmFyIHN0eWxlJDEgPSB7XG4gIHN0YXRpY0tleXM6IFsnc3RhdGljU3R5bGUnXSxcbiAgdHJhbnNmb3JtTm9kZTogdHJhbnNmb3JtTm9kZSQxLFxuICBnZW5EYXRhOiBnZW5EYXRhJDFcbn1cblxuLyogICovXG5cbnZhciBkZWNvZGVyO1xuXG52YXIgaGUgPSB7XG4gIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlIChodG1sKSB7XG4gICAgZGVjb2RlciA9IGRlY29kZXIgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGVjb2Rlci5pbm5lckhUTUwgPSBodG1sO1xuICAgIHJldHVybiBkZWNvZGVyLnRleHRDb250ZW50XG4gIH1cbn1cblxuLyogICovXG5cbnZhciBpc1VuYXJ5VGFnID0gbWFrZU1hcChcbiAgJ2FyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLCcgK1xuICAnbGluayxtZXRhLHBhcmFtLHNvdXJjZSx0cmFjayx3YnInXG4pO1xuXG4vLyBFbGVtZW50cyB0aGF0IHlvdSBjYW4sIGludGVudGlvbmFsbHksIGxlYXZlIG9wZW5cbi8vIChhbmQgd2hpY2ggY2xvc2UgdGhlbXNlbHZlcylcbnZhciBjYW5CZUxlZnRPcGVuVGFnID0gbWFrZU1hcChcbiAgJ2NvbGdyb3VwLGRkLGR0LGxpLG9wdGlvbnMscCx0ZCx0Zm9vdCx0aCx0aGVhZCx0cixzb3VyY2UnXG4pO1xuXG4vLyBIVE1MNSB0YWdzIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbCNlbGVtZW50cy0zXG4vLyBQaHJhc2luZyBDb250ZW50IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2RvbS5odG1sI3BocmFzaW5nLWNvbnRlbnRcbnZhciBpc05vblBocmFzaW5nVGFnID0gbWFrZU1hcChcbiAgJ2FkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCwnICtcbiAgJ2RldGFpbHMsZGlhbG9nLGRpdixkbCxkdCxmaWVsZHNldCxmaWdjYXB0aW9uLGZpZ3VyZSxmb290ZXIsZm9ybSwnICtcbiAgJ2gxLGgyLGgzLGg0LGg1LGg2LGhlYWQsaGVhZGVyLGhncm91cCxocixodG1sLGxlZ2VuZCxsaSxtZW51aXRlbSxtZXRhLCcgK1xuICAnb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLCcgK1xuICAndGl0bGUsdHIsdHJhY2snXG4pO1xuXG4vKipcbiAqIE5vdCB0eXBlLWNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGl0J3MgbW9zdGx5IHZlbmRvciBjb2RlLlxuICovXG5cbi8qIVxuICogSFRNTCBQYXJzZXIgQnkgSm9obiBSZXNpZyAoZWpvaG4ub3JnKVxuICogTW9kaWZpZWQgYnkgSnVyaXkgXCJrYW5nYXhcIiBaYXl0c2V2XG4gKiBPcmlnaW5hbCBjb2RlIGJ5IEVyaWsgQXJ2aWRzc29uLCBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlXG4gKiBodHRwOi8vZXJpay5lYWUubmV0L3NpbXBsZWh0bWxwYXJzZXIvc2ltcGxlaHRtbHBhcnNlci5qc1xuICovXG5cbi8vIFJlZ3VsYXIgRXhwcmVzc2lvbnMgZm9yIHBhcnNpbmcgdGFncyBhbmQgYXR0cmlidXRlc1xudmFyIGF0dHJpYnV0ZSA9IC9eXFxzKihbXlxcc1wiJzw+XFwvPV0rKSg/OlxccyooPSlcXHMqKD86XCIoW15cIl0qKVwiK3wnKFteJ10qKScrfChbXlxcc1wiJz08PmBdKykpKT8vO1xuLy8gY291bGQgdXNlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8xOTk5L1JFQy14bWwtbmFtZXMtMTk5OTAxMTQvI05ULVFOYW1lXG4vLyBidXQgZm9yIFZ1ZSB0ZW1wbGF0ZXMgd2UgY2FuIGVuZm9yY2UgYSBzaW1wbGUgY2hhcnNldFxudmFyIG5jbmFtZSA9ICdbYS16QS1aX11bXFxcXHdcXFxcLVxcXFwuXSonO1xudmFyIHFuYW1lQ2FwdHVyZSA9IFwiKCg/OlwiICsgbmNuYW1lICsgXCJcXFxcOik/XCIgKyBuY25hbWUgKyBcIilcIjtcbnZhciBzdGFydFRhZ09wZW4gPSBuZXcgUmVnRXhwKChcIl48XCIgKyBxbmFtZUNhcHR1cmUpKTtcbnZhciBzdGFydFRhZ0Nsb3NlID0gL15cXHMqKFxcLz8pPi87XG52YXIgZW5kVGFnID0gbmV3IFJlZ0V4cCgoXCJePFxcXFwvXCIgKyBxbmFtZUNhcHR1cmUgKyBcIltePl0qPlwiKSk7XG52YXIgZG9jdHlwZSA9IC9ePCFET0NUWVBFIFtePl0rPi9pO1xuLy8gIzcyOTg6IGVzY2FwZSAtIHRvIGF2b2lkIGJlaW5nIHBhc2VkIGFzIEhUTUwgY29tbWVudCB3aGVuIGlubGluZWQgaW4gcGFnZVxudmFyIGNvbW1lbnQgPSAvXjwhXFwtLS87XG52YXIgY29uZGl0aW9uYWxDb21tZW50ID0gL148IVxcWy87XG5cbnZhciBJU19SRUdFWF9DQVBUVVJJTkdfQlJPS0VOID0gZmFsc2U7XG4neCcucmVwbGFjZSgveCguKT8vZywgZnVuY3Rpb24gKG0sIGcpIHtcbiAgSVNfUkVHRVhfQ0FQVFVSSU5HX0JST0tFTiA9IGcgPT09ICcnO1xufSk7XG5cbi8vIFNwZWNpYWwgRWxlbWVudHMgKGNhbiBjb250YWluIGFueXRoaW5nKVxudmFyIGlzUGxhaW5UZXh0RWxlbWVudCA9IG1ha2VNYXAoJ3NjcmlwdCxzdHlsZSx0ZXh0YXJlYScsIHRydWUpO1xudmFyIHJlQ2FjaGUgPSB7fTtcblxudmFyIGRlY29kaW5nTWFwID0ge1xuICAnJmx0Oyc6ICc8JyxcbiAgJyZndDsnOiAnPicsXG4gICcmcXVvdDsnOiAnXCInLFxuICAnJmFtcDsnOiAnJicsXG4gICcmIzEwOyc6ICdcXG4nLFxuICAnJiM5Oyc6ICdcXHQnXG59O1xudmFyIGVuY29kZWRBdHRyID0gLyYoPzpsdHxndHxxdW90fGFtcCk7L2c7XG52YXIgZW5jb2RlZEF0dHJXaXRoTmV3TGluZXMgPSAvJig/Omx0fGd0fHF1b3R8YW1wfCMxMHwjOSk7L2c7XG5cbi8vICM1OTkyXG52YXIgaXNJZ25vcmVOZXdsaW5lVGFnID0gbWFrZU1hcCgncHJlLHRleHRhcmVhJywgdHJ1ZSk7XG52YXIgc2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lID0gZnVuY3Rpb24gKHRhZywgaHRtbCkgeyByZXR1cm4gdGFnICYmIGlzSWdub3JlTmV3bGluZVRhZyh0YWcpICYmIGh0bWxbMF0gPT09ICdcXG4nOyB9O1xuXG5mdW5jdGlvbiBkZWNvZGVBdHRyICh2YWx1ZSwgc2hvdWxkRGVjb2RlTmV3bGluZXMpIHtcbiAgdmFyIHJlID0gc2hvdWxkRGVjb2RlTmV3bGluZXMgPyBlbmNvZGVkQXR0cldpdGhOZXdMaW5lcyA6IGVuY29kZWRBdHRyO1xuICByZXR1cm4gdmFsdWUucmVwbGFjZShyZSwgZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBkZWNvZGluZ01hcFttYXRjaF07IH0pXG59XG5cbmZ1bmN0aW9uIHBhcnNlSFRNTCAoaHRtbCwgb3B0aW9ucykge1xuICB2YXIgc3RhY2sgPSBbXTtcbiAgdmFyIGV4cGVjdEhUTUwgPSBvcHRpb25zLmV4cGVjdEhUTUw7XG4gIHZhciBpc1VuYXJ5VGFnJCQxID0gb3B0aW9ucy5pc1VuYXJ5VGFnIHx8IG5vO1xuICB2YXIgY2FuQmVMZWZ0T3BlblRhZyQkMSA9IG9wdGlvbnMuY2FuQmVMZWZ0T3BlblRhZyB8fCBubztcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGxhc3QsIGxhc3RUYWc7XG4gIHdoaWxlIChodG1sKSB7XG4gICAgbGFzdCA9IGh0bWw7XG4gICAgLy8gTWFrZSBzdXJlIHdlJ3JlIG5vdCBpbiBhIHBsYWludGV4dCBjb250ZW50IGVsZW1lbnQgbGlrZSBzY3JpcHQvc3R5bGVcbiAgICBpZiAoIWxhc3RUYWcgfHwgIWlzUGxhaW5UZXh0RWxlbWVudChsYXN0VGFnKSkge1xuICAgICAgdmFyIHRleHRFbmQgPSBodG1sLmluZGV4T2YoJzwnKTtcbiAgICAgIGlmICh0ZXh0RW5kID09PSAwKSB7XG4gICAgICAgIC8vIENvbW1lbnQ6XG4gICAgICAgIGlmIChjb21tZW50LnRlc3QoaHRtbCkpIHtcbiAgICAgICAgICB2YXIgY29tbWVudEVuZCA9IGh0bWwuaW5kZXhPZignLS0+Jyk7XG5cbiAgICAgICAgICBpZiAoY29tbWVudEVuZCA+PSAwKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zaG91bGRLZWVwQ29tbWVudCkge1xuICAgICAgICAgICAgICBvcHRpb25zLmNvbW1lbnQoaHRtbC5zdWJzdHJpbmcoNCwgY29tbWVudEVuZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWR2YW5jZShjb21tZW50RW5kICsgMyk7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29uZGl0aW9uYWxfY29tbWVudCNEb3dubGV2ZWwtcmV2ZWFsZWRfY29uZGl0aW9uYWxfY29tbWVudFxuICAgICAgICBpZiAoY29uZGl0aW9uYWxDb21tZW50LnRlc3QoaHRtbCkpIHtcbiAgICAgICAgICB2YXIgY29uZGl0aW9uYWxFbmQgPSBodG1sLmluZGV4T2YoJ10+Jyk7XG5cbiAgICAgICAgICBpZiAoY29uZGl0aW9uYWxFbmQgPj0gMCkge1xuICAgICAgICAgICAgYWR2YW5jZShjb25kaXRpb25hbEVuZCArIDIpO1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEb2N0eXBlOlxuICAgICAgICB2YXIgZG9jdHlwZU1hdGNoID0gaHRtbC5tYXRjaChkb2N0eXBlKTtcbiAgICAgICAgaWYgKGRvY3R5cGVNYXRjaCkge1xuICAgICAgICAgIGFkdmFuY2UoZG9jdHlwZU1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVuZCB0YWc6XG4gICAgICAgIHZhciBlbmRUYWdNYXRjaCA9IGh0bWwubWF0Y2goZW5kVGFnKTtcbiAgICAgICAgaWYgKGVuZFRhZ01hdGNoKSB7XG4gICAgICAgICAgdmFyIGN1ckluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgYWR2YW5jZShlbmRUYWdNYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgIHBhcnNlRW5kVGFnKGVuZFRhZ01hdGNoWzFdLCBjdXJJbmRleCwgaW5kZXgpO1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdGFydCB0YWc6XG4gICAgICAgIHZhciBzdGFydFRhZ01hdGNoID0gcGFyc2VTdGFydFRhZygpO1xuICAgICAgICBpZiAoc3RhcnRUYWdNYXRjaCkge1xuICAgICAgICAgIGhhbmRsZVN0YXJ0VGFnKHN0YXJ0VGFnTWF0Y2gpO1xuICAgICAgICAgIGlmIChzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUobGFzdFRhZywgaHRtbCkpIHtcbiAgICAgICAgICAgIGFkdmFuY2UoMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHRleHQgPSAodm9pZCAwKSwgcmVzdCA9ICh2b2lkIDApLCBuZXh0ID0gKHZvaWQgMCk7XG4gICAgICBpZiAodGV4dEVuZCA+PSAwKSB7XG4gICAgICAgIHJlc3QgPSBodG1sLnNsaWNlKHRleHRFbmQpO1xuICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgIWVuZFRhZy50ZXN0KHJlc3QpICYmXG4gICAgICAgICAgIXN0YXJ0VGFnT3Blbi50ZXN0KHJlc3QpICYmXG4gICAgICAgICAgIWNvbW1lbnQudGVzdChyZXN0KSAmJlxuICAgICAgICAgICFjb25kaXRpb25hbENvbW1lbnQudGVzdChyZXN0KVxuICAgICAgICApIHtcbiAgICAgICAgICAvLyA8IGluIHBsYWluIHRleHQsIGJlIGZvcmdpdmluZyBhbmQgdHJlYXQgaXQgYXMgdGV4dFxuICAgICAgICAgIG5leHQgPSByZXN0LmluZGV4T2YoJzwnLCAxKTtcbiAgICAgICAgICBpZiAobmV4dCA8IDApIHsgYnJlYWsgfVxuICAgICAgICAgIHRleHRFbmQgKz0gbmV4dDtcbiAgICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTtcbiAgICAgICAgfVxuICAgICAgICB0ZXh0ID0gaHRtbC5zdWJzdHJpbmcoMCwgdGV4dEVuZCk7XG4gICAgICAgIGFkdmFuY2UodGV4dEVuZCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0ZXh0RW5kIDwgMCkge1xuICAgICAgICB0ZXh0ID0gaHRtbDtcbiAgICAgICAgaHRtbCA9ICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5jaGFycyAmJiB0ZXh0KSB7XG4gICAgICAgIG9wdGlvbnMuY2hhcnModGV4dCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlbmRUYWdMZW5ndGggPSAwO1xuICAgICAgdmFyIHN0YWNrZWRUYWcgPSBsYXN0VGFnLnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YXIgcmVTdGFja2VkVGFnID0gcmVDYWNoZVtzdGFja2VkVGFnXSB8fCAocmVDYWNoZVtzdGFja2VkVGFnXSA9IG5ldyBSZWdFeHAoJyhbXFxcXHNcXFxcU10qPykoPC8nICsgc3RhY2tlZFRhZyArICdbXj5dKj4pJywgJ2knKSk7XG4gICAgICB2YXIgcmVzdCQxID0gaHRtbC5yZXBsYWNlKHJlU3RhY2tlZFRhZywgZnVuY3Rpb24gKGFsbCwgdGV4dCwgZW5kVGFnKSB7XG4gICAgICAgIGVuZFRhZ0xlbmd0aCA9IGVuZFRhZy5sZW5ndGg7XG4gICAgICAgIGlmICghaXNQbGFpblRleHRFbGVtZW50KHN0YWNrZWRUYWcpICYmIHN0YWNrZWRUYWcgIT09ICdub3NjcmlwdCcpIHtcbiAgICAgICAgICB0ZXh0ID0gdGV4dFxuICAgICAgICAgICAgLnJlcGxhY2UoLzwhXFwtLShbXFxzXFxTXSo/KS0tPi9nLCAnJDEnKSAvLyAjNzI5OFxuICAgICAgICAgICAgLnJlcGxhY2UoLzwhXFxbQ0RBVEFcXFsoW1xcc1xcU10qPyldXT4vZywgJyQxJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZElnbm9yZUZpcnN0TmV3bGluZShzdGFja2VkVGFnLCB0ZXh0KSkge1xuICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmNoYXJzKSB7XG4gICAgICAgICAgb3B0aW9ucy5jaGFycyh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJydcbiAgICAgIH0pO1xuICAgICAgaW5kZXggKz0gaHRtbC5sZW5ndGggLSByZXN0JDEubGVuZ3RoO1xuICAgICAgaHRtbCA9IHJlc3QkMTtcbiAgICAgIHBhcnNlRW5kVGFnKHN0YWNrZWRUYWcsIGluZGV4IC0gZW5kVGFnTGVuZ3RoLCBpbmRleCk7XG4gICAgfVxuXG4gICAgaWYgKGh0bWwgPT09IGxhc3QpIHtcbiAgICAgIG9wdGlvbnMuY2hhcnMgJiYgb3B0aW9ucy5jaGFycyhodG1sKTtcbiAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiAhc3RhY2subGVuZ3RoICYmIG9wdGlvbnMud2Fybikge1xuICAgICAgICBvcHRpb25zLndhcm4oKFwiTWFsLWZvcm1hdHRlZCB0YWcgYXQgZW5kIG9mIHRlbXBsYXRlOiBcXFwiXCIgKyBodG1sICsgXCJcXFwiXCIpKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgLy8gQ2xlYW4gdXAgYW55IHJlbWFpbmluZyB0YWdzXG4gIHBhcnNlRW5kVGFnKCk7XG5cbiAgZnVuY3Rpb24gYWR2YW5jZSAobikge1xuICAgIGluZGV4ICs9IG47XG4gICAgaHRtbCA9IGh0bWwuc3Vic3RyaW5nKG4pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VTdGFydFRhZyAoKSB7XG4gICAgdmFyIHN0YXJ0ID0gaHRtbC5tYXRjaChzdGFydFRhZ09wZW4pO1xuICAgIGlmIChzdGFydCkge1xuICAgICAgdmFyIG1hdGNoID0ge1xuICAgICAgICB0YWdOYW1lOiBzdGFydFsxXSxcbiAgICAgICAgYXR0cnM6IFtdLFxuICAgICAgICBzdGFydDogaW5kZXhcbiAgICAgIH07XG4gICAgICBhZHZhbmNlKHN0YXJ0WzBdLmxlbmd0aCk7XG4gICAgICB2YXIgZW5kLCBhdHRyO1xuICAgICAgd2hpbGUgKCEoZW5kID0gaHRtbC5tYXRjaChzdGFydFRhZ0Nsb3NlKSkgJiYgKGF0dHIgPSBodG1sLm1hdGNoKGF0dHJpYnV0ZSkpKSB7XG4gICAgICAgIGFkdmFuY2UoYXR0clswXS5sZW5ndGgpO1xuICAgICAgICBtYXRjaC5hdHRycy5wdXNoKGF0dHIpO1xuICAgICAgfVxuICAgICAgaWYgKGVuZCkge1xuICAgICAgICBtYXRjaC51bmFyeVNsYXNoID0gZW5kWzFdO1xuICAgICAgICBhZHZhbmNlKGVuZFswXS5sZW5ndGgpO1xuICAgICAgICBtYXRjaC5lbmQgPSBpbmRleDtcbiAgICAgICAgcmV0dXJuIG1hdGNoXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlU3RhcnRUYWcgKG1hdGNoKSB7XG4gICAgdmFyIHRhZ05hbWUgPSBtYXRjaC50YWdOYW1lO1xuICAgIHZhciB1bmFyeVNsYXNoID0gbWF0Y2gudW5hcnlTbGFzaDtcblxuICAgIGlmIChleHBlY3RIVE1MKSB7XG4gICAgICBpZiAobGFzdFRhZyA9PT0gJ3AnICYmIGlzTm9uUGhyYXNpbmdUYWcodGFnTmFtZSkpIHtcbiAgICAgICAgcGFyc2VFbmRUYWcobGFzdFRhZyk7XG4gICAgICB9XG4gICAgICBpZiAoY2FuQmVMZWZ0T3BlblRhZyQkMSh0YWdOYW1lKSAmJiBsYXN0VGFnID09PSB0YWdOYW1lKSB7XG4gICAgICAgIHBhcnNlRW5kVGFnKHRhZ05hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB1bmFyeSA9IGlzVW5hcnlUYWckJDEodGFnTmFtZSkgfHwgISF1bmFyeVNsYXNoO1xuXG4gICAgdmFyIGwgPSBtYXRjaC5hdHRycy5sZW5ndGg7XG4gICAgdmFyIGF0dHJzID0gbmV3IEFycmF5KGwpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgYXJncyA9IG1hdGNoLmF0dHJzW2ldO1xuICAgICAgLy8gaGFja2lzaCB3b3JrIGFyb3VuZCBGRiBidWcgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MzY5Nzc4XG4gICAgICBpZiAoSVNfUkVHRVhfQ0FQVFVSSU5HX0JST0tFTiAmJiBhcmdzWzBdLmluZGV4T2YoJ1wiXCInKSA9PT0gLTEpIHtcbiAgICAgICAgaWYgKGFyZ3NbM10gPT09ICcnKSB7IGRlbGV0ZSBhcmdzWzNdOyB9XG4gICAgICAgIGlmIChhcmdzWzRdID09PSAnJykgeyBkZWxldGUgYXJnc1s0XTsgfVxuICAgICAgICBpZiAoYXJnc1s1XSA9PT0gJycpIHsgZGVsZXRlIGFyZ3NbNV07IH1cbiAgICAgIH1cbiAgICAgIHZhciB2YWx1ZSA9IGFyZ3NbM10gfHwgYXJnc1s0XSB8fCBhcmdzWzVdIHx8ICcnO1xuICAgICAgdmFyIHNob3VsZERlY29kZU5ld2xpbmVzID0gdGFnTmFtZSA9PT0gJ2EnICYmIGFyZ3NbMV0gPT09ICdocmVmJ1xuICAgICAgICA/IG9wdGlvbnMuc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmXG4gICAgICAgIDogb3B0aW9ucy5zaG91bGREZWNvZGVOZXdsaW5lcztcbiAgICAgIGF0dHJzW2ldID0ge1xuICAgICAgICBuYW1lOiBhcmdzWzFdLFxuICAgICAgICB2YWx1ZTogZGVjb2RlQXR0cih2YWx1ZSwgc2hvdWxkRGVjb2RlTmV3bGluZXMpXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICghdW5hcnkpIHtcbiAgICAgIHN0YWNrLnB1c2goeyB0YWc6IHRhZ05hbWUsIGxvd2VyQ2FzZWRUYWc6IHRhZ05hbWUudG9Mb3dlckNhc2UoKSwgYXR0cnM6IGF0dHJzIH0pO1xuICAgICAgbGFzdFRhZyA9IHRhZ05hbWU7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc3RhcnQpIHtcbiAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgYXR0cnMsIHVuYXJ5LCBtYXRjaC5zdGFydCwgbWF0Y2guZW5kKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUVuZFRhZyAodGFnTmFtZSwgc3RhcnQsIGVuZCkge1xuICAgIHZhciBwb3MsIGxvd2VyQ2FzZWRUYWdOYW1lO1xuICAgIGlmIChzdGFydCA9PSBudWxsKSB7IHN0YXJ0ID0gaW5kZXg7IH1cbiAgICBpZiAoZW5kID09IG51bGwpIHsgZW5kID0gaW5kZXg7IH1cblxuICAgIGlmICh0YWdOYW1lKSB7XG4gICAgICBsb3dlckNhc2VkVGFnTmFtZSA9IHRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IG9wZW5lZCB0YWcgb2YgdGhlIHNhbWUgdHlwZVxuICAgIGlmICh0YWdOYW1lKSB7XG4gICAgICBmb3IgKHBvcyA9IHN0YWNrLmxlbmd0aCAtIDE7IHBvcyA+PSAwOyBwb3MtLSkge1xuICAgICAgICBpZiAoc3RhY2tbcG9zXS5sb3dlckNhc2VkVGFnID09PSBsb3dlckNhc2VkVGFnTmFtZSkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgbm8gdGFnIG5hbWUgaXMgcHJvdmlkZWQsIGNsZWFuIHNob3BcbiAgICAgIHBvcyA9IDA7XG4gICAgfVxuXG4gICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAvLyBDbG9zZSBhbGwgdGhlIG9wZW4gZWxlbWVudHMsIHVwIHRoZSBzdGFja1xuICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gcG9zOyBpLS0pIHtcbiAgICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgICAgKGkgPiBwb3MgfHwgIXRhZ05hbWUpICYmXG4gICAgICAgICAgb3B0aW9ucy53YXJuXG4gICAgICAgICkge1xuICAgICAgICAgIG9wdGlvbnMud2FybihcbiAgICAgICAgICAgIChcInRhZyA8XCIgKyAoc3RhY2tbaV0udGFnKSArIFwiPiBoYXMgbm8gbWF0Y2hpbmcgZW5kIHRhZy5cIilcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmVuZCkge1xuICAgICAgICAgIG9wdGlvbnMuZW5kKHN0YWNrW2ldLnRhZywgc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIHRoZSBvcGVuIGVsZW1lbnRzIGZyb20gdGhlIHN0YWNrXG4gICAgICBzdGFjay5sZW5ndGggPSBwb3M7XG4gICAgICBsYXN0VGFnID0gcG9zICYmIHN0YWNrW3BvcyAtIDFdLnRhZztcbiAgICB9IGVsc2UgaWYgKGxvd2VyQ2FzZWRUYWdOYW1lID09PSAnYnInKSB7XG4gICAgICBpZiAob3B0aW9ucy5zdGFydCkge1xuICAgICAgICBvcHRpb25zLnN0YXJ0KHRhZ05hbWUsIFtdLCB0cnVlLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxvd2VyQ2FzZWRUYWdOYW1lID09PSAncCcpIHtcbiAgICAgIGlmIChvcHRpb25zLnN0YXJ0KSB7XG4gICAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgW10sIGZhbHNlLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLmVuZCkge1xuICAgICAgICBvcHRpb25zLmVuZCh0YWdOYW1lLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyogICovXG5cbnZhciBvblJFID0gL15AfF52LW9uOi87XG52YXIgZGlyUkUgPSAvXnYtfF5AfF46LztcbnZhciBmb3JBbGlhc1JFID0gLyguKj8pXFxzKyg/OmlufG9mKVxccysoLiopLztcbnZhciBmb3JJdGVyYXRvclJFID0gLywoW14sXFx9XFxdXSopKD86LChbXixcXH1cXF1dKikpPyQvO1xudmFyIHN0cmlwUGFyZW5zUkUgPSAvXlxcKHxcXCkkL2c7XG5cbnZhciBhcmdSRSA9IC86KC4qKSQvO1xudmFyIGJpbmRSRSA9IC9eOnxedi1iaW5kOi87XG52YXIgbW9kaWZpZXJSRSA9IC9cXC5bXi5dKy9nO1xuXG52YXIgZGVjb2RlSFRNTENhY2hlZCA9IGNhY2hlZChoZS5kZWNvZGUpO1xuXG4vLyBjb25maWd1cmFibGUgc3RhdGVcbnZhciB3YXJuJDI7XG52YXIgZGVsaW1pdGVycztcbnZhciB0cmFuc2Zvcm1zO1xudmFyIHByZVRyYW5zZm9ybXM7XG52YXIgcG9zdFRyYW5zZm9ybXM7XG52YXIgcGxhdGZvcm1Jc1ByZVRhZztcbnZhciBwbGF0Zm9ybU11c3RVc2VQcm9wO1xudmFyIHBsYXRmb3JtR2V0VGFnTmFtZXNwYWNlO1xuXG5cblxuZnVuY3Rpb24gY3JlYXRlQVNURWxlbWVudCAoXG4gIHRhZyxcbiAgYXR0cnMsXG4gIHBhcmVudFxuKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogMSxcbiAgICB0YWc6IHRhZyxcbiAgICBhdHRyc0xpc3Q6IGF0dHJzLFxuICAgIGF0dHJzTWFwOiBtYWtlQXR0cnNNYXAoYXR0cnMpLFxuICAgIHBhcmVudDogcGFyZW50LFxuICAgIGNoaWxkcmVuOiBbXVxuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBIVE1MIHN0cmluZyB0byBBU1QuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlIChcbiAgdGVtcGxhdGUsXG4gIG9wdGlvbnNcbikge1xuICB3YXJuJDIgPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47XG5cbiAgcGxhdGZvcm1Jc1ByZVRhZyA9IG9wdGlvbnMuaXNQcmVUYWcgfHwgbm87XG4gIHBsYXRmb3JtTXVzdFVzZVByb3AgPSBvcHRpb25zLm11c3RVc2VQcm9wIHx8IG5vO1xuICBwbGF0Zm9ybUdldFRhZ05hbWVzcGFjZSA9IG9wdGlvbnMuZ2V0VGFnTmFtZXNwYWNlIHx8IG5vO1xuXG4gIHRyYW5zZm9ybXMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ3RyYW5zZm9ybU5vZGUnKTtcbiAgcHJlVHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAncHJlVHJhbnNmb3JtTm9kZScpO1xuICBwb3N0VHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAncG9zdFRyYW5zZm9ybU5vZGUnKTtcblxuICBkZWxpbWl0ZXJzID0gb3B0aW9ucy5kZWxpbWl0ZXJzO1xuXG4gIHZhciBzdGFjayA9IFtdO1xuICB2YXIgcHJlc2VydmVXaGl0ZXNwYWNlID0gb3B0aW9ucy5wcmVzZXJ2ZVdoaXRlc3BhY2UgIT09IGZhbHNlO1xuICB2YXIgcm9vdDtcbiAgdmFyIGN1cnJlbnRQYXJlbnQ7XG4gIHZhciBpblZQcmUgPSBmYWxzZTtcbiAgdmFyIGluUHJlID0gZmFsc2U7XG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiB3YXJuT25jZSAobXNnKSB7XG4gICAgaWYgKCF3YXJuZWQpIHtcbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgICB3YXJuJDIobXNnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZUVsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICAvLyBjaGVjayBwcmUgc3RhdGVcbiAgICBpZiAoZWxlbWVudC5wcmUpIHtcbiAgICAgIGluVlByZSA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAocGxhdGZvcm1Jc1ByZVRhZyhlbGVtZW50LnRhZykpIHtcbiAgICAgIGluUHJlID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIGFwcGx5IHBvc3QtdHJhbnNmb3Jtc1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdFRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBvc3RUcmFuc2Zvcm1zW2ldKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHBhcnNlSFRNTCh0ZW1wbGF0ZSwge1xuICAgIHdhcm46IHdhcm4kMixcbiAgICBleHBlY3RIVE1MOiBvcHRpb25zLmV4cGVjdEhUTUwsXG4gICAgaXNVbmFyeVRhZzogb3B0aW9ucy5pc1VuYXJ5VGFnLFxuICAgIGNhbkJlTGVmdE9wZW5UYWc6IG9wdGlvbnMuY2FuQmVMZWZ0T3BlblRhZyxcbiAgICBzaG91bGREZWNvZGVOZXdsaW5lczogb3B0aW9ucy5zaG91bGREZWNvZGVOZXdsaW5lcyxcbiAgICBzaG91bGREZWNvZGVOZXdsaW5lc0ZvckhyZWY6IG9wdGlvbnMuc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmLFxuICAgIHNob3VsZEtlZXBDb21tZW50OiBvcHRpb25zLmNvbW1lbnRzLFxuICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydCAodGFnLCBhdHRycywgdW5hcnkpIHtcbiAgICAgIC8vIGNoZWNrIG5hbWVzcGFjZS5cbiAgICAgIC8vIGluaGVyaXQgcGFyZW50IG5zIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgdmFyIG5zID0gKGN1cnJlbnRQYXJlbnQgJiYgY3VycmVudFBhcmVudC5ucykgfHwgcGxhdGZvcm1HZXRUYWdOYW1lc3BhY2UodGFnKTtcblxuICAgICAgLy8gaGFuZGxlIElFIHN2ZyBidWdcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGlzSUUgJiYgbnMgPT09ICdzdmcnKSB7XG4gICAgICAgIGF0dHJzID0gZ3VhcmRJRVNWR0J1ZyhhdHRycyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbGVtZW50ID0gY3JlYXRlQVNURWxlbWVudCh0YWcsIGF0dHJzLCBjdXJyZW50UGFyZW50KTtcbiAgICAgIGlmIChucykge1xuICAgICAgICBlbGVtZW50Lm5zID0gbnM7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0ZvcmJpZGRlblRhZyhlbGVtZW50KSAmJiAhaXNTZXJ2ZXJSZW5kZXJpbmcoKSkge1xuICAgICAgICBlbGVtZW50LmZvcmJpZGRlbiA9IHRydWU7XG4gICAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4kMihcbiAgICAgICAgICAnVGVtcGxhdGVzIHNob3VsZCBvbmx5IGJlIHJlc3BvbnNpYmxlIGZvciBtYXBwaW5nIHRoZSBzdGF0ZSB0byB0aGUgJyArXG4gICAgICAgICAgJ1VJLiBBdm9pZCBwbGFjaW5nIHRhZ3Mgd2l0aCBzaWRlLWVmZmVjdHMgaW4geW91ciB0ZW1wbGF0ZXMsIHN1Y2ggYXMgJyArXG4gICAgICAgICAgXCI8XCIgKyB0YWcgKyBcIj5cIiArICcsIGFzIHRoZXkgd2lsbCBub3QgYmUgcGFyc2VkLidcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gYXBwbHkgcHJlLXRyYW5zZm9ybXNcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJlVHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbGVtZW50ID0gcHJlVHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKSB8fCBlbGVtZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoIWluVlByZSkge1xuICAgICAgICBwcm9jZXNzUHJlKGVsZW1lbnQpO1xuICAgICAgICBpZiAoZWxlbWVudC5wcmUpIHtcbiAgICAgICAgICBpblZQcmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocGxhdGZvcm1Jc1ByZVRhZyhlbGVtZW50LnRhZykpIHtcbiAgICAgICAgaW5QcmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGluVlByZSkge1xuICAgICAgICBwcm9jZXNzUmF3QXR0cnMoZWxlbWVudCk7XG4gICAgICB9IGVsc2UgaWYgKCFlbGVtZW50LnByb2Nlc3NlZCkge1xuICAgICAgICAvLyBzdHJ1Y3R1cmFsIGRpcmVjdGl2ZXNcbiAgICAgICAgcHJvY2Vzc0ZvcihlbGVtZW50KTtcbiAgICAgICAgcHJvY2Vzc0lmKGVsZW1lbnQpO1xuICAgICAgICBwcm9jZXNzT25jZShlbGVtZW50KTtcbiAgICAgICAgLy8gZWxlbWVudC1zY29wZSBzdHVmZlxuICAgICAgICBwcm9jZXNzRWxlbWVudChlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2hlY2tSb290Q29uc3RyYWludHMgKGVsKSB7XG4gICAgICAgIHtcbiAgICAgICAgICBpZiAoZWwudGFnID09PSAnc2xvdCcgfHwgZWwudGFnID09PSAndGVtcGxhdGUnKSB7XG4gICAgICAgICAgICB3YXJuT25jZShcbiAgICAgICAgICAgICAgXCJDYW5ub3QgdXNlIDxcIiArIChlbC50YWcpICsgXCI+IGFzIGNvbXBvbmVudCByb290IGVsZW1lbnQgYmVjYXVzZSBpdCBtYXkgXCIgK1xuICAgICAgICAgICAgICAnY29udGFpbiBtdWx0aXBsZSBub2Rlcy4nXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZWwuYXR0cnNNYXAuaGFzT3duUHJvcGVydHkoJ3YtZm9yJykpIHtcbiAgICAgICAgICAgIHdhcm5PbmNlKFxuICAgICAgICAgICAgICAnQ2Fubm90IHVzZSB2LWZvciBvbiBzdGF0ZWZ1bCBjb21wb25lbnQgcm9vdCBlbGVtZW50IGJlY2F1c2UgJyArXG4gICAgICAgICAgICAgICdpdCByZW5kZXJzIG11bHRpcGxlIGVsZW1lbnRzLidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHRyZWUgbWFuYWdlbWVudFxuICAgICAgaWYgKCFyb290KSB7XG4gICAgICAgIHJvb3QgPSBlbGVtZW50O1xuICAgICAgICBjaGVja1Jvb3RDb25zdHJhaW50cyhyb290KTtcbiAgICAgIH0gZWxzZSBpZiAoIXN0YWNrLmxlbmd0aCkge1xuICAgICAgICAvLyBhbGxvdyByb290IGVsZW1lbnRzIHdpdGggdi1pZiwgdi1lbHNlLWlmIGFuZCB2LWVsc2VcbiAgICAgICAgaWYgKHJvb3QuaWYgJiYgKGVsZW1lbnQuZWxzZWlmIHx8IGVsZW1lbnQuZWxzZSkpIHtcbiAgICAgICAgICBjaGVja1Jvb3RDb25zdHJhaW50cyhlbGVtZW50KTtcbiAgICAgICAgICBhZGRJZkNvbmRpdGlvbihyb290LCB7XG4gICAgICAgICAgICBleHA6IGVsZW1lbnQuZWxzZWlmLFxuICAgICAgICAgICAgYmxvY2s6IGVsZW1lbnRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3YXJuT25jZShcbiAgICAgICAgICAgIFwiQ29tcG9uZW50IHRlbXBsYXRlIHNob3VsZCBjb250YWluIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gXCIgK1xuICAgICAgICAgICAgXCJJZiB5b3UgYXJlIHVzaW5nIHYtaWYgb24gbXVsdGlwbGUgZWxlbWVudHMsIFwiICtcbiAgICAgICAgICAgIFwidXNlIHYtZWxzZS1pZiB0byBjaGFpbiB0aGVtIGluc3RlYWQuXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFBhcmVudCAmJiAhZWxlbWVudC5mb3JiaWRkZW4pIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuZWxzZWlmIHx8IGVsZW1lbnQuZWxzZSkge1xuICAgICAgICAgIHByb2Nlc3NJZkNvbmRpdGlvbnMoZWxlbWVudCwgY3VycmVudFBhcmVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5zbG90U2NvcGUpIHsgLy8gc2NvcGVkIHNsb3RcbiAgICAgICAgICBjdXJyZW50UGFyZW50LnBsYWluID0gZmFsc2U7XG4gICAgICAgICAgdmFyIG5hbWUgPSBlbGVtZW50LnNsb3RUYXJnZXQgfHwgJ1wiZGVmYXVsdFwiJzsoY3VycmVudFBhcmVudC5zY29wZWRTbG90cyB8fCAoY3VycmVudFBhcmVudC5zY29wZWRTbG90cyA9IHt9KSlbbmFtZV0gPSBlbGVtZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRQYXJlbnQuY2hpbGRyZW4ucHVzaChlbGVtZW50KTtcbiAgICAgICAgICBlbGVtZW50LnBhcmVudCA9IGN1cnJlbnRQYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdW5hcnkpIHtcbiAgICAgICAgY3VycmVudFBhcmVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHN0YWNrLnB1c2goZWxlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9zZUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVuZDogZnVuY3Rpb24gZW5kICgpIHtcbiAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyB3aGl0ZXNwYWNlXG4gICAgICB2YXIgZWxlbWVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgdmFyIGxhc3ROb2RlID0gZWxlbWVudC5jaGlsZHJlbltlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGxhc3ROb2RlICYmIGxhc3ROb2RlLnR5cGUgPT09IDMgJiYgbGFzdE5vZGUudGV4dCA9PT0gJyAnICYmICFpblByZSkge1xuICAgICAgICBlbGVtZW50LmNoaWxkcmVuLnBvcCgpO1xuICAgICAgfVxuICAgICAgLy8gcG9wIHN0YWNrXG4gICAgICBzdGFjay5sZW5ndGggLT0gMTtcbiAgICAgIGN1cnJlbnRQYXJlbnQgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgIGNsb3NlRWxlbWVudChlbGVtZW50KTtcbiAgICB9LFxuXG4gICAgY2hhcnM6IGZ1bmN0aW9uIGNoYXJzICh0ZXh0KSB7XG4gICAgICBpZiAoIWN1cnJlbnRQYXJlbnQpIHtcbiAgICAgICAge1xuICAgICAgICAgIGlmICh0ZXh0ID09PSB0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgd2Fybk9uY2UoXG4gICAgICAgICAgICAgICdDb21wb25lbnQgdGVtcGxhdGUgcmVxdWlyZXMgYSByb290IGVsZW1lbnQsIHJhdGhlciB0aGFuIGp1c3QgdGV4dC4nXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoKHRleHQgPSB0ZXh0LnRyaW0oKSkpIHtcbiAgICAgICAgICAgIHdhcm5PbmNlKFxuICAgICAgICAgICAgICAoXCJ0ZXh0IFxcXCJcIiArIHRleHQgKyBcIlxcXCIgb3V0c2lkZSByb290IGVsZW1lbnQgd2lsbCBiZSBpZ25vcmVkLlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICAvLyBJRSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWdcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGlzSUUgJiZcbiAgICAgICAgY3VycmVudFBhcmVudC50YWcgPT09ICd0ZXh0YXJlYScgJiZcbiAgICAgICAgY3VycmVudFBhcmVudC5hdHRyc01hcC5wbGFjZWhvbGRlciA9PT0gdGV4dFxuICAgICAgKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgdmFyIGNoaWxkcmVuID0gY3VycmVudFBhcmVudC5jaGlsZHJlbjtcbiAgICAgIHRleHQgPSBpblByZSB8fCB0ZXh0LnRyaW0oKVxuICAgICAgICA/IGlzVGV4dFRhZyhjdXJyZW50UGFyZW50KSA/IHRleHQgOiBkZWNvZGVIVE1MQ2FjaGVkKHRleHQpXG4gICAgICAgIC8vIG9ubHkgcHJlc2VydmUgd2hpdGVzcGFjZSBpZiBpdHMgbm90IHJpZ2h0IGFmdGVyIGEgc3RhcnRpbmcgdGFnXG4gICAgICAgIDogcHJlc2VydmVXaGl0ZXNwYWNlICYmIGNoaWxkcmVuLmxlbmd0aCA/ICcgJyA6ICcnO1xuICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgdmFyIHJlcztcbiAgICAgICAgaWYgKCFpblZQcmUgJiYgdGV4dCAhPT0gJyAnICYmIChyZXMgPSBwYXJzZVRleHQodGV4dCwgZGVsaW1pdGVycykpKSB7XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAyLFxuICAgICAgICAgICAgZXhwcmVzc2lvbjogcmVzLmV4cHJlc3Npb24sXG4gICAgICAgICAgICB0b2tlbnM6IHJlcy50b2tlbnMsXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGV4dCAhPT0gJyAnIHx8ICFjaGlsZHJlbi5sZW5ndGggfHwgY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0udGV4dCAhPT0gJyAnKSB7XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAzLFxuICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBjb21tZW50OiBmdW5jdGlvbiBjb21tZW50ICh0ZXh0KSB7XG4gICAgICBjdXJyZW50UGFyZW50LmNoaWxkcmVuLnB1c2goe1xuICAgICAgICB0eXBlOiAzLFxuICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICBpc0NvbW1lbnQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByb290XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NQcmUgKGVsKSB7XG4gIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1wcmUnKSAhPSBudWxsKSB7XG4gICAgZWwucHJlID0gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzUmF3QXR0cnMgKGVsKSB7XG4gIHZhciBsID0gZWwuYXR0cnNMaXN0Lmxlbmd0aDtcbiAgaWYgKGwpIHtcbiAgICB2YXIgYXR0cnMgPSBlbC5hdHRycyA9IG5ldyBBcnJheShsKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgYXR0cnNbaV0gPSB7XG4gICAgICAgIG5hbWU6IGVsLmF0dHJzTGlzdFtpXS5uYW1lLFxuICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoZWwuYXR0cnNMaXN0W2ldLnZhbHVlKVxuICAgICAgfTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIWVsLnByZSkge1xuICAgIC8vIG5vbiByb290IG5vZGUgaW4gcHJlIGJsb2NrcyB3aXRoIG5vIGF0dHJpYnV0ZXNcbiAgICBlbC5wbGFpbiA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0VsZW1lbnQgKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgcHJvY2Vzc0tleShlbGVtZW50KTtcblxuICAvLyBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGEgcGxhaW4gZWxlbWVudCBhZnRlclxuICAvLyByZW1vdmluZyBzdHJ1Y3R1cmFsIGF0dHJpYnV0ZXNcbiAgZWxlbWVudC5wbGFpbiA9ICFlbGVtZW50LmtleSAmJiAhZWxlbWVudC5hdHRyc0xpc3QubGVuZ3RoO1xuXG4gIHByb2Nlc3NSZWYoZWxlbWVudCk7XG4gIHByb2Nlc3NTbG90KGVsZW1lbnQpO1xuICBwcm9jZXNzQ29tcG9uZW50KGVsZW1lbnQpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICBlbGVtZW50ID0gdHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKSB8fCBlbGVtZW50O1xuICB9XG4gIHByb2Nlc3NBdHRycyhlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0tleSAoZWwpIHtcbiAgdmFyIGV4cCA9IGdldEJpbmRpbmdBdHRyKGVsLCAna2V5Jyk7XG4gIGlmIChleHApIHtcbiAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgZWwudGFnID09PSAndGVtcGxhdGUnKSB7XG4gICAgICB3YXJuJDIoXCI8dGVtcGxhdGU+IGNhbm5vdCBiZSBrZXllZC4gUGxhY2UgdGhlIGtleSBvbiByZWFsIGVsZW1lbnRzIGluc3RlYWQuXCIpO1xuICAgIH1cbiAgICBlbC5rZXkgPSBleHA7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1JlZiAoZWwpIHtcbiAgdmFyIHJlZiA9IGdldEJpbmRpbmdBdHRyKGVsLCAncmVmJyk7XG4gIGlmIChyZWYpIHtcbiAgICBlbC5yZWYgPSByZWY7XG4gICAgZWwucmVmSW5Gb3IgPSBjaGVja0luRm9yKGVsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzRm9yIChlbCkge1xuICB2YXIgZXhwO1xuICBpZiAoKGV4cCA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWZvcicpKSkge1xuICAgIHZhciByZXMgPSBwYXJzZUZvcihleHApO1xuICAgIGlmIChyZXMpIHtcbiAgICAgIGV4dGVuZChlbCwgcmVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2FybiQyKFxuICAgICAgICAoXCJJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb246IFwiICsgZXhwKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbmZ1bmN0aW9uIHBhcnNlRm9yIChleHApIHtcbiAgdmFyIGluTWF0Y2ggPSBleHAubWF0Y2goZm9yQWxpYXNSRSk7XG4gIGlmICghaW5NYXRjaCkgeyByZXR1cm4gfVxuICB2YXIgcmVzID0ge307XG4gIHJlcy5mb3IgPSBpbk1hdGNoWzJdLnRyaW0oKTtcbiAgdmFyIGFsaWFzID0gaW5NYXRjaFsxXS50cmltKCkucmVwbGFjZShzdHJpcFBhcmVuc1JFLCAnJyk7XG4gIHZhciBpdGVyYXRvck1hdGNoID0gYWxpYXMubWF0Y2goZm9ySXRlcmF0b3JSRSk7XG4gIGlmIChpdGVyYXRvck1hdGNoKSB7XG4gICAgcmVzLmFsaWFzID0gYWxpYXMucmVwbGFjZShmb3JJdGVyYXRvclJFLCAnJyk7XG4gICAgcmVzLml0ZXJhdG9yMSA9IGl0ZXJhdG9yTWF0Y2hbMV0udHJpbSgpO1xuICAgIGlmIChpdGVyYXRvck1hdGNoWzJdKSB7XG4gICAgICByZXMuaXRlcmF0b3IyID0gaXRlcmF0b3JNYXRjaFsyXS50cmltKCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5hbGlhcyA9IGFsaWFzO1xuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0lmIChlbCkge1xuICB2YXIgZXhwID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtaWYnKTtcbiAgaWYgKGV4cCkge1xuICAgIGVsLmlmID0gZXhwO1xuICAgIGFkZElmQ29uZGl0aW9uKGVsLCB7XG4gICAgICBleHA6IGV4cCxcbiAgICAgIGJsb2NrOiBlbFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlJykgIT0gbnVsbCkge1xuICAgICAgZWwuZWxzZSA9IHRydWU7XG4gICAgfVxuICAgIHZhciBlbHNlaWYgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlLWlmJyk7XG4gICAgaWYgKGVsc2VpZikge1xuICAgICAgZWwuZWxzZWlmID0gZWxzZWlmO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzSWZDb25kaXRpb25zIChlbCwgcGFyZW50KSB7XG4gIHZhciBwcmV2ID0gZmluZFByZXZFbGVtZW50KHBhcmVudC5jaGlsZHJlbik7XG4gIGlmIChwcmV2ICYmIHByZXYuaWYpIHtcbiAgICBhZGRJZkNvbmRpdGlvbihwcmV2LCB7XG4gICAgICBleHA6IGVsLmVsc2VpZixcbiAgICAgIGJsb2NrOiBlbFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHdhcm4kMihcbiAgICAgIFwidi1cIiArIChlbC5lbHNlaWYgPyAoJ2Vsc2UtaWY9XCInICsgZWwuZWxzZWlmICsgJ1wiJykgOiAnZWxzZScpICsgXCIgXCIgK1xuICAgICAgXCJ1c2VkIG9uIGVsZW1lbnQgPFwiICsgKGVsLnRhZykgKyBcIj4gd2l0aG91dCBjb3JyZXNwb25kaW5nIHYtaWYuXCJcbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRQcmV2RWxlbWVudCAoY2hpbGRyZW4pIHtcbiAgdmFyIGkgPSBjaGlsZHJlbi5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoY2hpbGRyZW5baV0udHlwZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIGNoaWxkcmVuW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBjaGlsZHJlbltpXS50ZXh0ICE9PSAnICcpIHtcbiAgICAgICAgd2FybiQyKFxuICAgICAgICAgIFwidGV4dCBcXFwiXCIgKyAoY2hpbGRyZW5baV0udGV4dC50cmltKCkpICsgXCJcXFwiIGJldHdlZW4gdi1pZiBhbmQgdi1lbHNlKC1pZikgXCIgK1xuICAgICAgICAgIFwid2lsbCBiZSBpZ25vcmVkLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjaGlsZHJlbi5wb3AoKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkSWZDb25kaXRpb24gKGVsLCBjb25kaXRpb24pIHtcbiAgaWYgKCFlbC5pZkNvbmRpdGlvbnMpIHtcbiAgICBlbC5pZkNvbmRpdGlvbnMgPSBbXTtcbiAgfVxuICBlbC5pZkNvbmRpdGlvbnMucHVzaChjb25kaXRpb24pO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzT25jZSAoZWwpIHtcbiAgdmFyIG9uY2UkJDEgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1vbmNlJyk7XG4gIGlmIChvbmNlJCQxICE9IG51bGwpIHtcbiAgICBlbC5vbmNlID0gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzU2xvdCAoZWwpIHtcbiAgaWYgKGVsLnRhZyA9PT0gJ3Nsb3QnKSB7XG4gICAgZWwuc2xvdE5hbWUgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ25hbWUnKTtcbiAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgZWwua2V5KSB7XG4gICAgICB3YXJuJDIoXG4gICAgICAgIFwiYGtleWAgZG9lcyBub3Qgd29yayBvbiA8c2xvdD4gYmVjYXVzZSBzbG90cyBhcmUgYWJzdHJhY3Qgb3V0bGV0cyBcIiArXG4gICAgICAgIFwiYW5kIGNhbiBwb3NzaWJseSBleHBhbmQgaW50byBtdWx0aXBsZSBlbGVtZW50cy4gXCIgK1xuICAgICAgICBcIlVzZSB0aGUga2V5IG9uIGEgd3JhcHBpbmcgZWxlbWVudCBpbnN0ZWFkLlwiXG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xvdFNjb3BlO1xuICAgIGlmIChlbC50YWcgPT09ICd0ZW1wbGF0ZScpIHtcbiAgICAgIHNsb3RTY29wZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzY29wZScpO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgc2xvdFNjb3BlKSB7XG4gICAgICAgIHdhcm4kMihcbiAgICAgICAgICBcInRoZSBcXFwic2NvcGVcXFwiIGF0dHJpYnV0ZSBmb3Igc2NvcGVkIHNsb3RzIGhhdmUgYmVlbiBkZXByZWNhdGVkIGFuZCBcIiArXG4gICAgICAgICAgXCJyZXBsYWNlZCBieSBcXFwic2xvdC1zY29wZVxcXCIgc2luY2UgMi41LiBUaGUgbmV3IFxcXCJzbG90LXNjb3BlXFxcIiBhdHRyaWJ1dGUgXCIgK1xuICAgICAgICAgIFwiY2FuIGFsc28gYmUgdXNlZCBvbiBwbGFpbiBlbGVtZW50cyBpbiBhZGRpdGlvbiB0byA8dGVtcGxhdGU+IHRvIFwiICtcbiAgICAgICAgICBcImRlbm90ZSBzY29wZWQgc2xvdHMuXCIsXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgZWwuc2xvdFNjb3BlID0gc2xvdFNjb3BlIHx8IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzbG90LXNjb3BlJyk7XG4gICAgfSBlbHNlIGlmICgoc2xvdFNjb3BlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3Nsb3Qtc2NvcGUnKSkpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVsLmF0dHJzTWFwWyd2LWZvciddKSB7XG4gICAgICAgIHdhcm4kMihcbiAgICAgICAgICBcIkFtYmlndW91cyBjb21iaW5lZCB1c2FnZSBvZiBzbG90LXNjb3BlIGFuZCB2LWZvciBvbiA8XCIgKyAoZWwudGFnKSArIFwiPiBcIiArXG4gICAgICAgICAgXCIodi1mb3IgdGFrZXMgaGlnaGVyIHByaW9yaXR5KS4gVXNlIGEgd3JhcHBlciA8dGVtcGxhdGU+IGZvciB0aGUgXCIgK1xuICAgICAgICAgIFwic2NvcGVkIHNsb3QgdG8gbWFrZSBpdCBjbGVhcmVyLlwiLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGVsLnNsb3RTY29wZSA9IHNsb3RTY29wZTtcbiAgICB9XG4gICAgdmFyIHNsb3RUYXJnZXQgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3Nsb3QnKTtcbiAgICBpZiAoc2xvdFRhcmdldCkge1xuICAgICAgZWwuc2xvdFRhcmdldCA9IHNsb3RUYXJnZXQgPT09ICdcIlwiJyA/ICdcImRlZmF1bHRcIicgOiBzbG90VGFyZ2V0O1xuICAgICAgLy8gcHJlc2VydmUgc2xvdCBhcyBhbiBhdHRyaWJ1dGUgZm9yIG5hdGl2ZSBzaGFkb3cgRE9NIGNvbXBhdFxuICAgICAgLy8gb25seSBmb3Igbm9uLXNjb3BlZCBzbG90cy5cbiAgICAgIGlmIChlbC50YWcgIT09ICd0ZW1wbGF0ZScgJiYgIWVsLnNsb3RTY29wZSkge1xuICAgICAgICBhZGRBdHRyKGVsLCAnc2xvdCcsIHNsb3RUYXJnZXQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzQ29tcG9uZW50IChlbCkge1xuICB2YXIgYmluZGluZztcbiAgaWYgKChiaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdpcycpKSkge1xuICAgIGVsLmNvbXBvbmVudCA9IGJpbmRpbmc7XG4gIH1cbiAgaWYgKGdldEFuZFJlbW92ZUF0dHIoZWwsICdpbmxpbmUtdGVtcGxhdGUnKSAhPSBudWxsKSB7XG4gICAgZWwuaW5saW5lVGVtcGxhdGUgPSB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NBdHRycyAoZWwpIHtcbiAgdmFyIGxpc3QgPSBlbC5hdHRyc0xpc3Q7XG4gIHZhciBpLCBsLCBuYW1lLCByYXdOYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBpc1Byb3A7XG4gIGZvciAoaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG5hbWUgPSByYXdOYW1lID0gbGlzdFtpXS5uYW1lO1xuICAgIHZhbHVlID0gbGlzdFtpXS52YWx1ZTtcbiAgICBpZiAoZGlyUkUudGVzdChuYW1lKSkge1xuICAgICAgLy8gbWFyayBlbGVtZW50IGFzIGR5bmFtaWNcbiAgICAgIGVsLmhhc0JpbmRpbmdzID0gdHJ1ZTtcbiAgICAgIC8vIG1vZGlmaWVyc1xuICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSk7XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuICAgICAgfVxuICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7IC8vIHYtYmluZFxuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGJpbmRSRSwgJycpO1xuICAgICAgICB2YWx1ZSA9IHBhcnNlRmlsdGVycyh2YWx1ZSk7XG4gICAgICAgIGlzUHJvcCA9IGZhbHNlO1xuICAgICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgICAgaWYgKG1vZGlmaWVycy5wcm9wKSB7XG4gICAgICAgICAgICBpc1Byb3AgPSB0cnVlO1xuICAgICAgICAgICAgbmFtZSA9IGNhbWVsaXplKG5hbWUpO1xuICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdpbm5lckh0bWwnKSB7IG5hbWUgPSAnaW5uZXJIVE1MJzsgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobW9kaWZpZXJzLmNhbWVsKSB7XG4gICAgICAgICAgICBuYW1lID0gY2FtZWxpemUobmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtb2RpZmllcnMuc3luYykge1xuICAgICAgICAgICAgYWRkSGFuZGxlcihcbiAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgIChcInVwZGF0ZTpcIiArIChjYW1lbGl6ZShuYW1lKSkpLFxuICAgICAgICAgICAgICBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgXCIkZXZlbnRcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Byb3AgfHwgKFxuICAgICAgICAgICFlbC5jb21wb25lbnQgJiYgcGxhdGZvcm1NdXN0VXNlUHJvcChlbC50YWcsIGVsLmF0dHJzTWFwLnR5cGUsIG5hbWUpXG4gICAgICAgICkpIHtcbiAgICAgICAgICBhZGRQcm9wKGVsLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkQXR0cihlbCwgbmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9uUkUudGVzdChuYW1lKSkgeyAvLyB2LW9uXG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpO1xuICAgICAgICBhZGRIYW5kbGVyKGVsLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBmYWxzZSwgd2FybiQyKTtcbiAgICAgIH0gZWxzZSB7IC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZGlyUkUsICcnKTtcbiAgICAgICAgLy8gcGFyc2UgYXJnXG4gICAgICAgIHZhciBhcmdNYXRjaCA9IG5hbWUubWF0Y2goYXJnUkUpO1xuICAgICAgICB2YXIgYXJnID0gYXJnTWF0Y2ggJiYgYXJnTWF0Y2hbMV07XG4gICAgICAgIGlmIChhcmcpIHtcbiAgICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgwLCAtKGFyZy5sZW5ndGggKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkRGlyZWN0aXZlKGVsLCBuYW1lLCByYXdOYW1lLCB2YWx1ZSwgYXJnLCBtb2RpZmllcnMpO1xuICAgICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJ21vZGVsJykge1xuICAgICAgICAgIGNoZWNrRm9yQWxpYXNNb2RlbChlbCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGxpdGVyYWwgYXR0cmlidXRlXG4gICAgICB7XG4gICAgICAgIHZhciByZXMgPSBwYXJzZVRleHQodmFsdWUsIGRlbGltaXRlcnMpO1xuICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgd2FybiQyKFxuICAgICAgICAgICAgbmFtZSArIFwiPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiOiBcIiArXG4gICAgICAgICAgICAnSW50ZXJwb2xhdGlvbiBpbnNpZGUgYXR0cmlidXRlcyBoYXMgYmVlbiByZW1vdmVkLiAnICtcbiAgICAgICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgK1xuICAgICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBpZD1cInt7IHZhbCB9fVwiPiwgdXNlIDxkaXYgOmlkPVwidmFsXCI+LidcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhZGRBdHRyKGVsLCBuYW1lLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgICAgLy8gIzY4ODcgZmlyZWZveCBkb2Vzbid0IHVwZGF0ZSBtdXRlZCBzdGF0ZSBpZiBzZXQgdmlhIGF0dHJpYnV0ZVxuICAgICAgLy8gZXZlbiBpbW1lZGlhdGVseSBhZnRlciBlbGVtZW50IGNyZWF0aW9uXG4gICAgICBpZiAoIWVsLmNvbXBvbmVudCAmJlxuICAgICAgICAgIG5hbWUgPT09ICdtdXRlZCcgJiZcbiAgICAgICAgICBwbGF0Zm9ybU11c3RVc2VQcm9wKGVsLnRhZywgZWwuYXR0cnNNYXAudHlwZSwgbmFtZSkpIHtcbiAgICAgICAgYWRkUHJvcChlbCwgbmFtZSwgJ3RydWUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tJbkZvciAoZWwpIHtcbiAgdmFyIHBhcmVudCA9IGVsO1xuICB3aGlsZSAocGFyZW50KSB7XG4gICAgaWYgKHBhcmVudC5mb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMgKG5hbWUpIHtcbiAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgdmFyIHJldCA9IHt9O1xuICAgIG1hdGNoLmZvckVhY2goZnVuY3Rpb24gKG0pIHsgcmV0W20uc2xpY2UoMSldID0gdHJ1ZTsgfSk7XG4gICAgcmV0dXJuIHJldFxuICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VBdHRyc01hcCAoYXR0cnMpIHtcbiAgdmFyIG1hcCA9IHt9O1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChcbiAgICAgIFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICBtYXBbYXR0cnNbaV0ubmFtZV0gJiYgIWlzSUUgJiYgIWlzRWRnZVxuICAgICkge1xuICAgICAgd2FybiQyKCdkdXBsaWNhdGUgYXR0cmlidXRlOiAnICsgYXR0cnNbaV0ubmFtZSk7XG4gICAgfVxuICAgIG1hcFthdHRyc1tpXS5uYW1lXSA9IGF0dHJzW2ldLnZhbHVlO1xuICB9XG4gIHJldHVybiBtYXBcbn1cblxuLy8gZm9yIHNjcmlwdCAoZS5nLiB0eXBlPVwieC90ZW1wbGF0ZVwiKSBvciBzdHlsZSwgZG8gbm90IGRlY29kZSBjb250ZW50XG5mdW5jdGlvbiBpc1RleHRUYWcgKGVsKSB7XG4gIHJldHVybiBlbC50YWcgPT09ICdzY3JpcHQnIHx8IGVsLnRhZyA9PT0gJ3N0eWxlJ1xufVxuXG5mdW5jdGlvbiBpc0ZvcmJpZGRlblRhZyAoZWwpIHtcbiAgcmV0dXJuIChcbiAgICBlbC50YWcgPT09ICdzdHlsZScgfHxcbiAgICAoZWwudGFnID09PSAnc2NyaXB0JyAmJiAoXG4gICAgICAhZWwuYXR0cnNNYXAudHlwZSB8fFxuICAgICAgZWwuYXR0cnNNYXAudHlwZSA9PT0gJ3RleHQvamF2YXNjcmlwdCdcbiAgICApKVxuICApXG59XG5cbnZhciBpZU5TQnVnID0gL154bWxuczpOU1xcZCsvO1xudmFyIGllTlNQcmVmaXggPSAvXk5TXFxkKzovO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZ3VhcmRJRVNWR0J1ZyAoYXR0cnMpIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGF0dHIgPSBhdHRyc1tpXTtcbiAgICBpZiAoIWllTlNCdWcudGVzdChhdHRyLm5hbWUpKSB7XG4gICAgICBhdHRyLm5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShpZU5TUHJlZml4LCAnJyk7XG4gICAgICByZXMucHVzaChhdHRyKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBjaGVja0ZvckFsaWFzTW9kZWwgKGVsLCB2YWx1ZSkge1xuICB2YXIgX2VsID0gZWw7XG4gIHdoaWxlIChfZWwpIHtcbiAgICBpZiAoX2VsLmZvciAmJiBfZWwuYWxpYXMgPT09IHZhbHVlKSB7XG4gICAgICB3YXJuJDIoXG4gICAgICAgIFwiPFwiICsgKGVsLnRhZykgKyBcIiB2LW1vZGVsPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiPjogXCIgK1xuICAgICAgICBcIllvdSBhcmUgYmluZGluZyB2LW1vZGVsIGRpcmVjdGx5IHRvIGEgdi1mb3IgaXRlcmF0aW9uIGFsaWFzLiBcIiArXG4gICAgICAgIFwiVGhpcyB3aWxsIG5vdCBiZSBhYmxlIHRvIG1vZGlmeSB0aGUgdi1mb3Igc291cmNlIGFycmF5IGJlY2F1c2UgXCIgK1xuICAgICAgICBcIndyaXRpbmcgdG8gdGhlIGFsaWFzIGlzIGxpa2UgbW9kaWZ5aW5nIGEgZnVuY3Rpb24gbG9jYWwgdmFyaWFibGUuIFwiICtcbiAgICAgICAgXCJDb25zaWRlciB1c2luZyBhbiBhcnJheSBvZiBvYmplY3RzIGFuZCB1c2Ugdi1tb2RlbCBvbiBhbiBvYmplY3QgcHJvcGVydHkgaW5zdGVhZC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgX2VsID0gX2VsLnBhcmVudDtcbiAgfVxufVxuXG4vKiAgKi9cblxuLyoqXG4gKiBFeHBhbmQgaW5wdXRbdi1tb2RlbF0gd2l0aCBkeWFubWljIHR5cGUgYmluZGluZ3MgaW50byB2LWlmLWVsc2UgY2hhaW5zXG4gKiBUdXJuIHRoaXM6XG4gKiAgIDxpbnB1dCB2LW1vZGVsPVwiZGF0YVt0eXBlXVwiIDp0eXBlPVwidHlwZVwiPlxuICogaW50byB0aGlzOlxuICogICA8aW5wdXQgdi1pZj1cInR5cGUgPT09ICdjaGVja2JveCdcIiB0eXBlPVwiY2hlY2tib3hcIiB2LW1vZGVsPVwiZGF0YVt0eXBlXVwiPlxuICogICA8aW5wdXQgdi1lbHNlLWlmPVwidHlwZSA9PT0gJ3JhZGlvJ1wiIHR5cGU9XCJyYWRpb1wiIHYtbW9kZWw9XCJkYXRhW3R5cGVdXCI+XG4gKiAgIDxpbnB1dCB2LWVsc2UgOnR5cGU9XCJ0eXBlXCIgdi1tb2RlbD1cImRhdGFbdHlwZV1cIj5cbiAqL1xuXG5mdW5jdGlvbiBwcmVUcmFuc2Zvcm1Ob2RlIChlbCwgb3B0aW9ucykge1xuICBpZiAoZWwudGFnID09PSAnaW5wdXQnKSB7XG4gICAgdmFyIG1hcCA9IGVsLmF0dHJzTWFwO1xuICAgIGlmICghbWFwWyd2LW1vZGVsJ10pIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciB0eXBlQmluZGluZztcbiAgICBpZiAobWFwWyc6dHlwZSddIHx8IG1hcFsndi1iaW5kOnR5cGUnXSkge1xuICAgICAgdHlwZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3R5cGUnKTtcbiAgICB9XG4gICAgaWYgKCF0eXBlQmluZGluZyAmJiBtYXBbJ3YtYmluZCddKSB7XG4gICAgICB0eXBlQmluZGluZyA9IFwiKFwiICsgKG1hcFsndi1iaW5kJ10pICsgXCIpLnR5cGVcIjtcbiAgICB9XG5cbiAgICBpZiAodHlwZUJpbmRpbmcpIHtcbiAgICAgIHZhciBpZkNvbmRpdGlvbiA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWlmJywgdHJ1ZSk7XG4gICAgICB2YXIgaWZDb25kaXRpb25FeHRyYSA9IGlmQ29uZGl0aW9uID8gKFwiJiYoXCIgKyBpZkNvbmRpdGlvbiArIFwiKVwiKSA6IFwiXCI7XG4gICAgICB2YXIgaGFzRWxzZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWVsc2UnLCB0cnVlKSAhPSBudWxsO1xuICAgICAgdmFyIGVsc2VJZkNvbmRpdGlvbiA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWVsc2UtaWYnLCB0cnVlKTtcbiAgICAgIC8vIDEuIGNoZWNrYm94XG4gICAgICB2YXIgYnJhbmNoMCA9IGNsb25lQVNURWxlbWVudChlbCk7XG4gICAgICAvLyBwcm9jZXNzIGZvciBvbiB0aGUgbWFpbiBub2RlXG4gICAgICBwcm9jZXNzRm9yKGJyYW5jaDApO1xuICAgICAgYWRkUmF3QXR0cihicmFuY2gwLCAndHlwZScsICdjaGVja2JveCcpO1xuICAgICAgcHJvY2Vzc0VsZW1lbnQoYnJhbmNoMCwgb3B0aW9ucyk7XG4gICAgICBicmFuY2gwLnByb2Nlc3NlZCA9IHRydWU7IC8vIHByZXZlbnQgaXQgZnJvbSBkb3VibGUtcHJvY2Vzc2VkXG4gICAgICBicmFuY2gwLmlmID0gXCIoXCIgKyB0eXBlQmluZGluZyArIFwiKT09PSdjaGVja2JveCdcIiArIGlmQ29uZGl0aW9uRXh0cmE7XG4gICAgICBhZGRJZkNvbmRpdGlvbihicmFuY2gwLCB7XG4gICAgICAgIGV4cDogYnJhbmNoMC5pZixcbiAgICAgICAgYmxvY2s6IGJyYW5jaDBcbiAgICAgIH0pO1xuICAgICAgLy8gMi4gYWRkIHJhZGlvIGVsc2UtaWYgY29uZGl0aW9uXG4gICAgICB2YXIgYnJhbmNoMSA9IGNsb25lQVNURWxlbWVudChlbCk7XG4gICAgICBnZXRBbmRSZW1vdmVBdHRyKGJyYW5jaDEsICd2LWZvcicsIHRydWUpO1xuICAgICAgYWRkUmF3QXR0cihicmFuY2gxLCAndHlwZScsICdyYWRpbycpO1xuICAgICAgcHJvY2Vzc0VsZW1lbnQoYnJhbmNoMSwgb3B0aW9ucyk7XG4gICAgICBhZGRJZkNvbmRpdGlvbihicmFuY2gwLCB7XG4gICAgICAgIGV4cDogXCIoXCIgKyB0eXBlQmluZGluZyArIFwiKT09PSdyYWRpbydcIiArIGlmQ29uZGl0aW9uRXh0cmEsXG4gICAgICAgIGJsb2NrOiBicmFuY2gxXG4gICAgICB9KTtcbiAgICAgIC8vIDMuIG90aGVyXG4gICAgICB2YXIgYnJhbmNoMiA9IGNsb25lQVNURWxlbWVudChlbCk7XG4gICAgICBnZXRBbmRSZW1vdmVBdHRyKGJyYW5jaDIsICd2LWZvcicsIHRydWUpO1xuICAgICAgYWRkUmF3QXR0cihicmFuY2gyLCAnOnR5cGUnLCB0eXBlQmluZGluZyk7XG4gICAgICBwcm9jZXNzRWxlbWVudChicmFuY2gyLCBvcHRpb25zKTtcbiAgICAgIGFkZElmQ29uZGl0aW9uKGJyYW5jaDAsIHtcbiAgICAgICAgZXhwOiBpZkNvbmRpdGlvbixcbiAgICAgICAgYmxvY2s6IGJyYW5jaDJcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaGFzRWxzZSkge1xuICAgICAgICBicmFuY2gwLmVsc2UgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChlbHNlSWZDb25kaXRpb24pIHtcbiAgICAgICAgYnJhbmNoMC5lbHNlaWYgPSBlbHNlSWZDb25kaXRpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicmFuY2gwXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNsb25lQVNURWxlbWVudCAoZWwpIHtcbiAgcmV0dXJuIGNyZWF0ZUFTVEVsZW1lbnQoZWwudGFnLCBlbC5hdHRyc0xpc3Quc2xpY2UoKSwgZWwucGFyZW50KVxufVxuXG52YXIgbW9kZWwkMiA9IHtcbiAgcHJlVHJhbnNmb3JtTm9kZTogcHJlVHJhbnNmb3JtTm9kZVxufVxuXG52YXIgbW9kdWxlcyQxID0gW1xuICBrbGFzcyQxLFxuICBzdHlsZSQxLFxuICBtb2RlbCQyXG5dXG5cbi8qICAqL1xuXG5mdW5jdGlvbiB0ZXh0IChlbCwgZGlyKSB7XG4gIGlmIChkaXIudmFsdWUpIHtcbiAgICBhZGRQcm9wKGVsLCAndGV4dENvbnRlbnQnLCAoXCJfcyhcIiArIChkaXIudmFsdWUpICsgXCIpXCIpKTtcbiAgfVxufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gaHRtbCAoZWwsIGRpcikge1xuICBpZiAoZGlyLnZhbHVlKSB7XG4gICAgYWRkUHJvcChlbCwgJ2lubmVySFRNTCcsIChcIl9zKFwiICsgKGRpci52YWx1ZSkgKyBcIilcIikpO1xuICB9XG59XG5cbnZhciBkaXJlY3RpdmVzJDEgPSB7XG4gIG1vZGVsOiBtb2RlbCxcbiAgdGV4dDogdGV4dCxcbiAgaHRtbDogaHRtbFxufVxuXG4vKiAgKi9cblxudmFyIGJhc2VPcHRpb25zID0ge1xuICBleHBlY3RIVE1MOiB0cnVlLFxuICBtb2R1bGVzOiBtb2R1bGVzJDEsXG4gIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMkMSxcbiAgaXNQcmVUYWc6IGlzUHJlVGFnLFxuICBpc1VuYXJ5VGFnOiBpc1VuYXJ5VGFnLFxuICBtdXN0VXNlUHJvcDogbXVzdFVzZVByb3AsXG4gIGNhbkJlTGVmdE9wZW5UYWc6IGNhbkJlTGVmdE9wZW5UYWcsXG4gIGlzUmVzZXJ2ZWRUYWc6IGlzUmVzZXJ2ZWRUYWcsXG4gIGdldFRhZ05hbWVzcGFjZTogZ2V0VGFnTmFtZXNwYWNlLFxuICBzdGF0aWNLZXlzOiBnZW5TdGF0aWNLZXlzKG1vZHVsZXMkMSlcbn07XG5cbi8qICAqL1xuXG52YXIgaXNTdGF0aWNLZXk7XG52YXIgaXNQbGF0Zm9ybVJlc2VydmVkVGFnO1xuXG52YXIgZ2VuU3RhdGljS2V5c0NhY2hlZCA9IGNhY2hlZChnZW5TdGF0aWNLZXlzJDEpO1xuXG4vKipcbiAqIEdvYWwgb2YgdGhlIG9wdGltaXplcjogd2FsayB0aGUgZ2VuZXJhdGVkIHRlbXBsYXRlIEFTVCB0cmVlXG4gKiBhbmQgZGV0ZWN0IHN1Yi10cmVlcyB0aGF0IGFyZSBwdXJlbHkgc3RhdGljLCBpLmUuIHBhcnRzIG9mXG4gKiB0aGUgRE9NIHRoYXQgbmV2ZXIgbmVlZHMgdG8gY2hhbmdlLlxuICpcbiAqIE9uY2Ugd2UgZGV0ZWN0IHRoZXNlIHN1Yi10cmVlcywgd2UgY2FuOlxuICpcbiAqIDEuIEhvaXN0IHRoZW0gaW50byBjb25zdGFudHMsIHNvIHRoYXQgd2Ugbm8gbG9uZ2VyIG5lZWQgdG9cbiAqICAgIGNyZWF0ZSBmcmVzaCBub2RlcyBmb3IgdGhlbSBvbiBlYWNoIHJlLXJlbmRlcjtcbiAqIDIuIENvbXBsZXRlbHkgc2tpcCB0aGVtIGluIHRoZSBwYXRjaGluZyBwcm9jZXNzLlxuICovXG5mdW5jdGlvbiBvcHRpbWl6ZSAocm9vdCwgb3B0aW9ucykge1xuICBpZiAoIXJvb3QpIHsgcmV0dXJuIH1cbiAgaXNTdGF0aWNLZXkgPSBnZW5TdGF0aWNLZXlzQ2FjaGVkKG9wdGlvbnMuc3RhdGljS2V5cyB8fCAnJyk7XG4gIGlzUGxhdGZvcm1SZXNlcnZlZFRhZyA9IG9wdGlvbnMuaXNSZXNlcnZlZFRhZyB8fCBubztcbiAgLy8gZmlyc3QgcGFzczogbWFyayBhbGwgbm9uLXN0YXRpYyBub2Rlcy5cbiAgbWFya1N0YXRpYyQxKHJvb3QpO1xuICAvLyBzZWNvbmQgcGFzczogbWFyayBzdGF0aWMgcm9vdHMuXG4gIG1hcmtTdGF0aWNSb290cyhyb290LCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGdlblN0YXRpY0tleXMkMSAoa2V5cykge1xuICByZXR1cm4gbWFrZU1hcChcbiAgICAndHlwZSx0YWcsYXR0cnNMaXN0LGF0dHJzTWFwLHBsYWluLHBhcmVudCxjaGlsZHJlbixhdHRycycgK1xuICAgIChrZXlzID8gJywnICsga2V5cyA6ICcnKVxuICApXG59XG5cbmZ1bmN0aW9uIG1hcmtTdGF0aWMkMSAobm9kZSkge1xuICBub2RlLnN0YXRpYyA9IGlzU3RhdGljKG5vZGUpO1xuICBpZiAobm9kZS50eXBlID09PSAxKSB7XG4gICAgLy8gZG8gbm90IG1ha2UgY29tcG9uZW50IHNsb3QgY29udGVudCBzdGF0aWMuIHRoaXMgYXZvaWRzXG4gICAgLy8gMS4gY29tcG9uZW50cyBub3QgYWJsZSB0byBtdXRhdGUgc2xvdCBub2Rlc1xuICAgIC8vIDIuIHN0YXRpYyBzbG90IGNvbnRlbnQgZmFpbHMgZm9yIGhvdC1yZWxvYWRpbmdcbiAgICBpZiAoXG4gICAgICAhaXNQbGF0Zm9ybVJlc2VydmVkVGFnKG5vZGUudGFnKSAmJlxuICAgICAgbm9kZS50YWcgIT09ICdzbG90JyAmJlxuICAgICAgbm9kZS5hdHRyc01hcFsnaW5saW5lLXRlbXBsYXRlJ10gPT0gbnVsbFxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICBtYXJrU3RhdGljJDEoY2hpbGQpO1xuICAgICAgaWYgKCFjaGlsZC5zdGF0aWMpIHtcbiAgICAgICAgbm9kZS5zdGF0aWMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5vZGUuaWZDb25kaXRpb25zKSB7XG4gICAgICBmb3IgKHZhciBpJDEgPSAxLCBsJDEgPSBub2RlLmlmQ29uZGl0aW9ucy5sZW5ndGg7IGkkMSA8IGwkMTsgaSQxKyspIHtcbiAgICAgICAgdmFyIGJsb2NrID0gbm9kZS5pZkNvbmRpdGlvbnNbaSQxXS5ibG9jaztcbiAgICAgICAgbWFya1N0YXRpYyQxKGJsb2NrKTtcbiAgICAgICAgaWYgKCFibG9jay5zdGF0aWMpIHtcbiAgICAgICAgICBub2RlLnN0YXRpYyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG1hcmtTdGF0aWNSb290cyAobm9kZSwgaXNJbkZvcikge1xuICBpZiAobm9kZS50eXBlID09PSAxKSB7XG4gICAgaWYgKG5vZGUuc3RhdGljIHx8IG5vZGUub25jZSkge1xuICAgICAgbm9kZS5zdGF0aWNJbkZvciA9IGlzSW5Gb3I7XG4gICAgfVxuICAgIC8vIEZvciBhIG5vZGUgdG8gcXVhbGlmeSBhcyBhIHN0YXRpYyByb290LCBpdCBzaG91bGQgaGF2ZSBjaGlsZHJlbiB0aGF0XG4gICAgLy8gYXJlIG5vdCBqdXN0IHN0YXRpYyB0ZXh0LiBPdGhlcndpc2UgdGhlIGNvc3Qgb2YgaG9pc3Rpbmcgb3V0IHdpbGxcbiAgICAvLyBvdXR3ZWlnaCB0aGUgYmVuZWZpdHMgYW5kIGl0J3MgYmV0dGVyIG9mZiB0byBqdXN0IGFsd2F5cyByZW5kZXIgaXQgZnJlc2guXG4gICAgaWYgKG5vZGUuc3RhdGljICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoICYmICEoXG4gICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgbm9kZS5jaGlsZHJlblswXS50eXBlID09PSAzXG4gICAgKSkge1xuICAgICAgbm9kZS5zdGF0aWNSb290ID0gdHJ1ZTtcbiAgICAgIHJldHVyblxuICAgIH0gZWxzZSB7XG4gICAgICBub2RlLnN0YXRpY1Jvb3QgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbWFya1N0YXRpY1Jvb3RzKG5vZGUuY2hpbGRyZW5baV0sIGlzSW5Gb3IgfHwgISFub2RlLmZvcik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChub2RlLmlmQ29uZGl0aW9ucykge1xuICAgICAgZm9yICh2YXIgaSQxID0gMSwgbCQxID0gbm9kZS5pZkNvbmRpdGlvbnMubGVuZ3RoOyBpJDEgPCBsJDE7IGkkMSsrKSB7XG4gICAgICAgIG1hcmtTdGF0aWNSb290cyhub2RlLmlmQ29uZGl0aW9uc1tpJDFdLmJsb2NrLCBpc0luRm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTdGF0aWMgKG5vZGUpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gMikgeyAvLyBleHByZXNzaW9uXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gMykgeyAvLyB0ZXh0XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICByZXR1cm4gISEobm9kZS5wcmUgfHwgKFxuICAgICFub2RlLmhhc0JpbmRpbmdzICYmIC8vIG5vIGR5bmFtaWMgYmluZGluZ3NcbiAgICAhbm9kZS5pZiAmJiAhbm9kZS5mb3IgJiYgLy8gbm90IHYtaWYgb3Igdi1mb3Igb3Igdi1lbHNlXG4gICAgIWlzQnVpbHRJblRhZyhub2RlLnRhZykgJiYgLy8gbm90IGEgYnVpbHQtaW5cbiAgICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcobm9kZS50YWcpICYmIC8vIG5vdCBhIGNvbXBvbmVudFxuICAgICFpc0RpcmVjdENoaWxkT2ZUZW1wbGF0ZUZvcihub2RlKSAmJlxuICAgIE9iamVjdC5rZXlzKG5vZGUpLmV2ZXJ5KGlzU3RhdGljS2V5KVxuICApKVxufVxuXG5mdW5jdGlvbiBpc0RpcmVjdENoaWxkT2ZUZW1wbGF0ZUZvciAobm9kZSkge1xuICB3aGlsZSAobm9kZS5wYXJlbnQpIHtcbiAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgaWYgKG5vZGUudGFnICE9PSAndGVtcGxhdGUnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKG5vZGUuZm9yKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuLyogICovXG5cbnZhciBmbkV4cFJFID0gL14oW1xcdyRfXSt8XFwoW14pXSo/XFwpKVxccyo9PnxeZnVuY3Rpb25cXHMqXFwoLztcbnZhciBzaW1wbGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJ1teJ10qPyddfFxcW1wiW15cIl0qP1wiXXxcXFtcXGQrXXxcXFtbQS1aYS16XyRdW1xcdyRdKl0pKiQvO1xuXG4vLyBLZXlib2FyZEV2ZW50LmtleUNvZGUgYWxpYXNlc1xudmFyIGtleUNvZGVzID0ge1xuICBlc2M6IDI3LFxuICB0YWI6IDksXG4gIGVudGVyOiAxMyxcbiAgc3BhY2U6IDMyLFxuICB1cDogMzgsXG4gIGxlZnQ6IDM3LFxuICByaWdodDogMzksXG4gIGRvd246IDQwLFxuICAnZGVsZXRlJzogWzgsIDQ2XVxufTtcblxuLy8gS2V5Ym9hcmRFdmVudC5rZXkgYWxpYXNlc1xudmFyIGtleU5hbWVzID0ge1xuICBlc2M6ICdFc2NhcGUnLFxuICB0YWI6ICdUYWInLFxuICBlbnRlcjogJ0VudGVyJyxcbiAgc3BhY2U6ICcgJyxcbiAgdXA6ICdBcnJvd1VwJyxcbiAgbGVmdDogJ0Fycm93TGVmdCcsXG4gIHJpZ2h0OiAnQXJyb3dSaWdodCcsXG4gIGRvd246ICdBcnJvd0Rvd24nLFxuICAnZGVsZXRlJzogWydCYWNrc3BhY2UnLCAnRGVsZXRlJ11cbn07XG5cbi8vICM0ODY4OiBtb2RpZmllcnMgdGhhdCBwcmV2ZW50IHRoZSBleGVjdXRpb24gb2YgdGhlIGxpc3RlbmVyXG4vLyBuZWVkIHRvIGV4cGxpY2l0bHkgcmV0dXJuIG51bGwgc28gdGhhdCB3ZSBjYW4gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gcmVtb3ZlXG4vLyB0aGUgbGlzdGVuZXIgZm9yIC5vbmNlXG52YXIgZ2VuR3VhcmQgPSBmdW5jdGlvbiAoY29uZGl0aW9uKSB7IHJldHVybiAoXCJpZihcIiArIGNvbmRpdGlvbiArIFwiKXJldHVybiBudWxsO1wiKTsgfTtcblxudmFyIG1vZGlmaWVyQ29kZSA9IHtcbiAgc3RvcDogJyRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsnLFxuICBwcmV2ZW50OiAnJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7JyxcbiAgc2VsZjogZ2VuR3VhcmQoXCIkZXZlbnQudGFyZ2V0ICE9PSAkZXZlbnQuY3VycmVudFRhcmdldFwiKSxcbiAgY3RybDogZ2VuR3VhcmQoXCIhJGV2ZW50LmN0cmxLZXlcIiksXG4gIHNoaWZ0OiBnZW5HdWFyZChcIiEkZXZlbnQuc2hpZnRLZXlcIiksXG4gIGFsdDogZ2VuR3VhcmQoXCIhJGV2ZW50LmFsdEtleVwiKSxcbiAgbWV0YTogZ2VuR3VhcmQoXCIhJGV2ZW50Lm1ldGFLZXlcIiksXG4gIGxlZnQ6IGdlbkd1YXJkKFwiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDBcIiksXG4gIG1pZGRsZTogZ2VuR3VhcmQoXCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMVwiKSxcbiAgcmlnaHQ6IGdlbkd1YXJkKFwiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDJcIilcbn07XG5cbmZ1bmN0aW9uIGdlbkhhbmRsZXJzIChcbiAgZXZlbnRzLFxuICBpc05hdGl2ZSxcbiAgd2FyblxuKSB7XG4gIHZhciByZXMgPSBpc05hdGl2ZSA/ICduYXRpdmVPbjp7JyA6ICdvbjp7JztcbiAgZm9yICh2YXIgbmFtZSBpbiBldmVudHMpIHtcbiAgICByZXMgKz0gXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiOlwiICsgKGdlbkhhbmRsZXIobmFtZSwgZXZlbnRzW25hbWVdKSkgKyBcIixcIjtcbiAgfVxuICByZXR1cm4gcmVzLnNsaWNlKDAsIC0xKSArICd9J1xufVxuXG5mdW5jdGlvbiBnZW5IYW5kbGVyIChcbiAgbmFtZSxcbiAgaGFuZGxlclxuKSB7XG4gIGlmICghaGFuZGxlcikge1xuICAgIHJldHVybiAnZnVuY3Rpb24oKXt9J1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoaGFuZGxlcikpIHtcbiAgICByZXR1cm4gKFwiW1wiICsgKGhhbmRsZXIubWFwKGZ1bmN0aW9uIChoYW5kbGVyKSB7IHJldHVybiBnZW5IYW5kbGVyKG5hbWUsIGhhbmRsZXIpOyB9KS5qb2luKCcsJykpICsgXCJdXCIpXG4gIH1cblxuICB2YXIgaXNNZXRob2RQYXRoID0gc2ltcGxlUGF0aFJFLnRlc3QoaGFuZGxlci52YWx1ZSk7XG4gIHZhciBpc0Z1bmN0aW9uRXhwcmVzc2lvbiA9IGZuRXhwUkUudGVzdChoYW5kbGVyLnZhbHVlKTtcblxuICBpZiAoIWhhbmRsZXIubW9kaWZpZXJzKSB7XG4gICAgaWYgKGlzTWV0aG9kUGF0aCB8fCBpc0Z1bmN0aW9uRXhwcmVzc2lvbikge1xuICAgICAgcmV0dXJuIGhhbmRsZXIudmFsdWVcbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgcmV0dXJuIChcImZ1bmN0aW9uKCRldmVudCl7XCIgKyAoaGFuZGxlci52YWx1ZSkgKyBcIn1cIikgLy8gaW5saW5lIHN0YXRlbWVudFxuICB9IGVsc2Uge1xuICAgIHZhciBjb2RlID0gJyc7XG4gICAgdmFyIGdlbk1vZGlmaWVyQ29kZSA9ICcnO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIGhhbmRsZXIubW9kaWZpZXJzKSB7XG4gICAgICBpZiAobW9kaWZpZXJDb2RlW2tleV0pIHtcbiAgICAgICAgZ2VuTW9kaWZpZXJDb2RlICs9IG1vZGlmaWVyQ29kZVtrZXldO1xuICAgICAgICAvLyBsZWZ0L3JpZ2h0XG4gICAgICAgIGlmIChrZXlDb2Rlc1trZXldKSB7XG4gICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZXhhY3QnKSB7XG4gICAgICAgIHZhciBtb2RpZmllcnMgPSAoaGFuZGxlci5tb2RpZmllcnMpO1xuICAgICAgICBnZW5Nb2RpZmllckNvZGUgKz0gZ2VuR3VhcmQoXG4gICAgICAgICAgWydjdHJsJywgJ3NoaWZ0JywgJ2FsdCcsICdtZXRhJ11cbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleU1vZGlmaWVyKSB7IHJldHVybiAhbW9kaWZpZXJzW2tleU1vZGlmaWVyXTsgfSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleU1vZGlmaWVyKSB7IHJldHVybiAoXCIkZXZlbnQuXCIgKyBrZXlNb2RpZmllciArIFwiS2V5XCIpOyB9KVxuICAgICAgICAgICAgLmpvaW4oJ3x8JylcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgIGNvZGUgKz0gZ2VuS2V5RmlsdGVyKGtleXMpO1xuICAgIH1cbiAgICAvLyBNYWtlIHN1cmUgbW9kaWZpZXJzIGxpa2UgcHJldmVudCBhbmQgc3RvcCBnZXQgZXhlY3V0ZWQgYWZ0ZXIga2V5IGZpbHRlcmluZ1xuICAgIGlmIChnZW5Nb2RpZmllckNvZGUpIHtcbiAgICAgIGNvZGUgKz0gZ2VuTW9kaWZpZXJDb2RlO1xuICAgIH1cbiAgICB2YXIgaGFuZGxlckNvZGUgPSBpc01ldGhvZFBhdGhcbiAgICAgID8gKFwicmV0dXJuIFwiICsgKGhhbmRsZXIudmFsdWUpICsgXCIoJGV2ZW50KVwiKVxuICAgICAgOiBpc0Z1bmN0aW9uRXhwcmVzc2lvblxuICAgICAgICA/IChcInJldHVybiAoXCIgKyAoaGFuZGxlci52YWx1ZSkgKyBcIikoJGV2ZW50KVwiKVxuICAgICAgICA6IGhhbmRsZXIudmFsdWU7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgcmV0dXJuIChcImZ1bmN0aW9uKCRldmVudCl7XCIgKyBjb2RlICsgaGFuZGxlckNvZGUgKyBcIn1cIilcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5LZXlGaWx0ZXIgKGtleXMpIHtcbiAgcmV0dXJuIChcImlmKCEoJ2J1dHRvbicgaW4gJGV2ZW50KSYmXCIgKyAoa2V5cy5tYXAoZ2VuRmlsdGVyQ29kZSkuam9pbignJiYnKSkgKyBcIilyZXR1cm4gbnVsbDtcIilcbn1cblxuZnVuY3Rpb24gZ2VuRmlsdGVyQ29kZSAoa2V5KSB7XG4gIHZhciBrZXlWYWwgPSBwYXJzZUludChrZXksIDEwKTtcbiAgaWYgKGtleVZhbCkge1xuICAgIHJldHVybiAoXCIkZXZlbnQua2V5Q29kZSE9PVwiICsga2V5VmFsKVxuICB9XG4gIHZhciBrZXlDb2RlID0ga2V5Q29kZXNba2V5XTtcbiAgdmFyIGtleU5hbWUgPSBrZXlOYW1lc1trZXldO1xuICByZXR1cm4gKFxuICAgIFwiX2soJGV2ZW50LmtleUNvZGUsXCIgK1xuICAgIChKU09OLnN0cmluZ2lmeShrZXkpKSArIFwiLFwiICtcbiAgICAoSlNPTi5zdHJpbmdpZnkoa2V5Q29kZSkpICsgXCIsXCIgK1xuICAgIFwiJGV2ZW50LmtleSxcIiArXG4gICAgXCJcIiArIChKU09OLnN0cmluZ2lmeShrZXlOYW1lKSkgK1xuICAgIFwiKVwiXG4gIClcbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIG9uIChlbCwgZGlyKSB7XG4gIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBkaXIubW9kaWZpZXJzKSB7XG4gICAgd2FybihcInYtb24gd2l0aG91dCBhcmd1bWVudCBkb2VzIG5vdCBzdXBwb3J0IG1vZGlmaWVycy5cIik7XG4gIH1cbiAgZWwud3JhcExpc3RlbmVycyA9IGZ1bmN0aW9uIChjb2RlKSB7IHJldHVybiAoXCJfZyhcIiArIGNvZGUgKyBcIixcIiArIChkaXIudmFsdWUpICsgXCIpXCIpOyB9O1xufVxuXG4vKiAgKi9cblxuZnVuY3Rpb24gYmluZCQxIChlbCwgZGlyKSB7XG4gIGVsLndyYXBEYXRhID0gZnVuY3Rpb24gKGNvZGUpIHtcbiAgICByZXR1cm4gKFwiX2IoXCIgKyBjb2RlICsgXCIsJ1wiICsgKGVsLnRhZykgKyBcIicsXCIgKyAoZGlyLnZhbHVlKSArIFwiLFwiICsgKGRpci5tb2RpZmllcnMgJiYgZGlyLm1vZGlmaWVycy5wcm9wID8gJ3RydWUnIDogJ2ZhbHNlJykgKyAoZGlyLm1vZGlmaWVycyAmJiBkaXIubW9kaWZpZXJzLnN5bmMgPyAnLHRydWUnIDogJycpICsgXCIpXCIpXG4gIH07XG59XG5cbi8qICAqL1xuXG52YXIgYmFzZURpcmVjdGl2ZXMgPSB7XG4gIG9uOiBvbixcbiAgYmluZDogYmluZCQxLFxuICBjbG9hazogbm9vcFxufVxuXG4vKiAgKi9cblxudmFyIENvZGVnZW5TdGF0ZSA9IGZ1bmN0aW9uIENvZGVnZW5TdGF0ZSAob3B0aW9ucykge1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB0aGlzLndhcm4gPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47XG4gIHRoaXMudHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAndHJhbnNmb3JtQ29kZScpO1xuICB0aGlzLmRhdGFHZW5GbnMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ2dlbkRhdGEnKTtcbiAgdGhpcy5kaXJlY3RpdmVzID0gZXh0ZW5kKGV4dGVuZCh7fSwgYmFzZURpcmVjdGl2ZXMpLCBvcHRpb25zLmRpcmVjdGl2ZXMpO1xuICB2YXIgaXNSZXNlcnZlZFRhZyA9IG9wdGlvbnMuaXNSZXNlcnZlZFRhZyB8fCBubztcbiAgdGhpcy5tYXliZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gIWlzUmVzZXJ2ZWRUYWcoZWwudGFnKTsgfTtcbiAgdGhpcy5vbmNlSWQgPSAwO1xuICB0aGlzLnN0YXRpY1JlbmRlckZucyA9IFtdO1xufTtcblxuXG5cbmZ1bmN0aW9uIGdlbmVyYXRlIChcbiAgYXN0LFxuICBvcHRpb25zXG4pIHtcbiAgdmFyIHN0YXRlID0gbmV3IENvZGVnZW5TdGF0ZShvcHRpb25zKTtcbiAgdmFyIGNvZGUgPSBhc3QgPyBnZW5FbGVtZW50KGFzdCwgc3RhdGUpIDogJ19jKFwiZGl2XCIpJztcbiAgcmV0dXJuIHtcbiAgICByZW5kZXI6IChcIndpdGgodGhpcyl7cmV0dXJuIFwiICsgY29kZSArIFwifVwiKSxcbiAgICBzdGF0aWNSZW5kZXJGbnM6IHN0YXRlLnN0YXRpY1JlbmRlckZuc1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbkVsZW1lbnQgKGVsLCBzdGF0ZSkge1xuICBpZiAoZWwuc3RhdGljUm9vdCAmJiAhZWwuc3RhdGljUHJvY2Vzc2VkKSB7XG4gICAgcmV0dXJuIGdlblN0YXRpYyhlbCwgc3RhdGUpXG4gIH0gZWxzZSBpZiAoZWwub25jZSAmJiAhZWwub25jZVByb2Nlc3NlZCkge1xuICAgIHJldHVybiBnZW5PbmNlKGVsLCBzdGF0ZSlcbiAgfSBlbHNlIGlmIChlbC5mb3IgJiYgIWVsLmZvclByb2Nlc3NlZCkge1xuICAgIHJldHVybiBnZW5Gb3IoZWwsIHN0YXRlKVxuICB9IGVsc2UgaWYgKGVsLmlmICYmICFlbC5pZlByb2Nlc3NlZCkge1xuICAgIHJldHVybiBnZW5JZihlbCwgc3RhdGUpXG4gIH0gZWxzZSBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnICYmICFlbC5zbG90VGFyZ2V0KSB7XG4gICAgcmV0dXJuIGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSkgfHwgJ3ZvaWQgMCdcbiAgfSBlbHNlIGlmIChlbC50YWcgPT09ICdzbG90Jykge1xuICAgIHJldHVybiBnZW5TbG90KGVsLCBzdGF0ZSlcbiAgfSBlbHNlIHtcbiAgICAvLyBjb21wb25lbnQgb3IgZWxlbWVudFxuICAgIHZhciBjb2RlO1xuICAgIGlmIChlbC5jb21wb25lbnQpIHtcbiAgICAgIGNvZGUgPSBnZW5Db21wb25lbnQoZWwuY29tcG9uZW50LCBlbCwgc3RhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZGF0YSA9IGVsLnBsYWluID8gdW5kZWZpbmVkIDogZ2VuRGF0YSQyKGVsLCBzdGF0ZSk7XG5cbiAgICAgIHZhciBjaGlsZHJlbiA9IGVsLmlubGluZVRlbXBsYXRlID8gbnVsbCA6IGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSwgdHJ1ZSk7XG4gICAgICBjb2RlID0gXCJfYygnXCIgKyAoZWwudGFnKSArIFwiJ1wiICsgKGRhdGEgPyAoXCIsXCIgKyBkYXRhKSA6ICcnKSArIChjaGlsZHJlbiA/IChcIixcIiArIGNoaWxkcmVuKSA6ICcnKSArIFwiKVwiO1xuICAgIH1cbiAgICAvLyBtb2R1bGUgdHJhbnNmb3Jtc1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUudHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29kZSA9IHN0YXRlLnRyYW5zZm9ybXNbaV0oZWwsIGNvZGUpO1xuICAgIH1cbiAgICByZXR1cm4gY29kZVxuICB9XG59XG5cbi8vIGhvaXN0IHN0YXRpYyBzdWItdHJlZXMgb3V0XG5mdW5jdGlvbiBnZW5TdGF0aWMgKGVsLCBzdGF0ZSkge1xuICBlbC5zdGF0aWNQcm9jZXNzZWQgPSB0cnVlO1xuICBzdGF0ZS5zdGF0aWNSZW5kZXJGbnMucHVzaCgoXCJ3aXRoKHRoaXMpe3JldHVybiBcIiArIChnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgXCJ9XCIpKTtcbiAgcmV0dXJuIChcIl9tKFwiICsgKHN0YXRlLnN0YXRpY1JlbmRlckZucy5sZW5ndGggLSAxKSArIChlbC5zdGF0aWNJbkZvciA/ICcsdHJ1ZScgOiAnJykgKyBcIilcIilcbn1cblxuLy8gdi1vbmNlXG5mdW5jdGlvbiBnZW5PbmNlIChlbCwgc3RhdGUpIHtcbiAgZWwub25jZVByb2Nlc3NlZCA9IHRydWU7XG4gIGlmIChlbC5pZiAmJiAhZWwuaWZQcm9jZXNzZWQpIHtcbiAgICByZXR1cm4gZ2VuSWYoZWwsIHN0YXRlKVxuICB9IGVsc2UgaWYgKGVsLnN0YXRpY0luRm9yKSB7XG4gICAgdmFyIGtleSA9ICcnO1xuICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnQ7XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgaWYgKHBhcmVudC5mb3IpIHtcbiAgICAgICAga2V5ID0gcGFyZW50LmtleTtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgfVxuICAgIGlmICgha2V5KSB7XG4gICAgICBcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiBzdGF0ZS53YXJuKFxuICAgICAgICBcInYtb25jZSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB2LWZvciB0aGF0IGlzIGtleWVkLiBcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBnZW5FbGVtZW50KGVsLCBzdGF0ZSlcbiAgICB9XG4gICAgcmV0dXJuIChcIl9vKFwiICsgKGdlbkVsZW1lbnQoZWwsIHN0YXRlKSkgKyBcIixcIiArIChzdGF0ZS5vbmNlSWQrKykgKyBcIixcIiArIGtleSArIFwiKVwiKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZW5TdGF0aWMoZWwsIHN0YXRlKVxuICB9XG59XG5cbmZ1bmN0aW9uIGdlbklmIChcbiAgZWwsXG4gIHN0YXRlLFxuICBhbHRHZW4sXG4gIGFsdEVtcHR5XG4pIHtcbiAgZWwuaWZQcm9jZXNzZWQgPSB0cnVlOyAvLyBhdm9pZCByZWN1cnNpb25cbiAgcmV0dXJuIGdlbklmQ29uZGl0aW9ucyhlbC5pZkNvbmRpdGlvbnMuc2xpY2UoKSwgc3RhdGUsIGFsdEdlbiwgYWx0RW1wdHkpXG59XG5cbmZ1bmN0aW9uIGdlbklmQ29uZGl0aW9ucyAoXG4gIGNvbmRpdGlvbnMsXG4gIHN0YXRlLFxuICBhbHRHZW4sXG4gIGFsdEVtcHR5XG4pIHtcbiAgaWYgKCFjb25kaXRpb25zLmxlbmd0aCkge1xuICAgIHJldHVybiBhbHRFbXB0eSB8fCAnX2UoKSdcbiAgfVxuXG4gIHZhciBjb25kaXRpb24gPSBjb25kaXRpb25zLnNoaWZ0KCk7XG4gIGlmIChjb25kaXRpb24uZXhwKSB7XG4gICAgcmV0dXJuIChcIihcIiArIChjb25kaXRpb24uZXhwKSArIFwiKT9cIiArIChnZW5UZXJuYXJ5RXhwKGNvbmRpdGlvbi5ibG9jaykpICsgXCI6XCIgKyAoZ2VuSWZDb25kaXRpb25zKGNvbmRpdGlvbnMsIHN0YXRlLCBhbHRHZW4sIGFsdEVtcHR5KSkpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcIlwiICsgKGdlblRlcm5hcnlFeHAoY29uZGl0aW9uLmJsb2NrKSkpXG4gIH1cblxuICAvLyB2LWlmIHdpdGggdi1vbmNlIHNob3VsZCBnZW5lcmF0ZSBjb2RlIGxpa2UgKGEpP19tKDApOl9tKDEpXG4gIGZ1bmN0aW9uIGdlblRlcm5hcnlFeHAgKGVsKSB7XG4gICAgcmV0dXJuIGFsdEdlblxuICAgICAgPyBhbHRHZW4oZWwsIHN0YXRlKVxuICAgICAgOiBlbC5vbmNlXG4gICAgICAgID8gZ2VuT25jZShlbCwgc3RhdGUpXG4gICAgICAgIDogZ2VuRWxlbWVudChlbCwgc3RhdGUpXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuRm9yIChcbiAgZWwsXG4gIHN0YXRlLFxuICBhbHRHZW4sXG4gIGFsdEhlbHBlclxuKSB7XG4gIHZhciBleHAgPSBlbC5mb3I7XG4gIHZhciBhbGlhcyA9IGVsLmFsaWFzO1xuICB2YXIgaXRlcmF0b3IxID0gZWwuaXRlcmF0b3IxID8gKFwiLFwiICsgKGVsLml0ZXJhdG9yMSkpIDogJyc7XG4gIHZhciBpdGVyYXRvcjIgPSBlbC5pdGVyYXRvcjIgPyAoXCIsXCIgKyAoZWwuaXRlcmF0b3IyKSkgOiAnJztcblxuICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICBzdGF0ZS5tYXliZUNvbXBvbmVudChlbCkgJiZcbiAgICBlbC50YWcgIT09ICdzbG90JyAmJlxuICAgIGVsLnRhZyAhPT0gJ3RlbXBsYXRlJyAmJlxuICAgICFlbC5rZXlcbiAgKSB7XG4gICAgc3RhdGUud2FybihcbiAgICAgIFwiPFwiICsgKGVsLnRhZykgKyBcIiB2LWZvcj1cXFwiXCIgKyBhbGlhcyArIFwiIGluIFwiICsgZXhwICsgXCJcXFwiPjogY29tcG9uZW50IGxpc3RzIHJlbmRlcmVkIHdpdGggXCIgK1xuICAgICAgXCJ2LWZvciBzaG91bGQgaGF2ZSBleHBsaWNpdCBrZXlzLiBcIiArXG4gICAgICBcIlNlZSBodHRwczovL3Z1ZWpzLm9yZy9ndWlkZS9saXN0Lmh0bWwja2V5IGZvciBtb3JlIGluZm8uXCIsXG4gICAgICB0cnVlIC8qIHRpcCAqL1xuICAgICk7XG4gIH1cblxuICBlbC5mb3JQcm9jZXNzZWQgPSB0cnVlOyAvLyBhdm9pZCByZWN1cnNpb25cbiAgcmV0dXJuIChhbHRIZWxwZXIgfHwgJ19sJykgKyBcIigoXCIgKyBleHAgKyBcIiksXCIgK1xuICAgIFwiZnVuY3Rpb24oXCIgKyBhbGlhcyArIGl0ZXJhdG9yMSArIGl0ZXJhdG9yMiArIFwiKXtcIiArXG4gICAgICBcInJldHVybiBcIiArICgoYWx0R2VuIHx8IGdlbkVsZW1lbnQpKGVsLCBzdGF0ZSkpICtcbiAgICAnfSknXG59XG5cbmZ1bmN0aW9uIGdlbkRhdGEkMiAoZWwsIHN0YXRlKSB7XG4gIHZhciBkYXRhID0gJ3snO1xuXG4gIC8vIGRpcmVjdGl2ZXMgZmlyc3QuXG4gIC8vIGRpcmVjdGl2ZXMgbWF5IG11dGF0ZSB0aGUgZWwncyBvdGhlciBwcm9wZXJ0aWVzIGJlZm9yZSB0aGV5IGFyZSBnZW5lcmF0ZWQuXG4gIHZhciBkaXJzID0gZ2VuRGlyZWN0aXZlcyhlbCwgc3RhdGUpO1xuICBpZiAoZGlycykgeyBkYXRhICs9IGRpcnMgKyAnLCc7IH1cblxuICAvLyBrZXlcbiAgaWYgKGVsLmtleSkge1xuICAgIGRhdGEgKz0gXCJrZXk6XCIgKyAoZWwua2V5KSArIFwiLFwiO1xuICB9XG4gIC8vIHJlZlxuICBpZiAoZWwucmVmKSB7XG4gICAgZGF0YSArPSBcInJlZjpcIiArIChlbC5yZWYpICsgXCIsXCI7XG4gIH1cbiAgaWYgKGVsLnJlZkluRm9yKSB7XG4gICAgZGF0YSArPSBcInJlZkluRm9yOnRydWUsXCI7XG4gIH1cbiAgLy8gcHJlXG4gIGlmIChlbC5wcmUpIHtcbiAgICBkYXRhICs9IFwicHJlOnRydWUsXCI7XG4gIH1cbiAgLy8gcmVjb3JkIG9yaWdpbmFsIHRhZyBuYW1lIGZvciBjb21wb25lbnRzIHVzaW5nIFwiaXNcIiBhdHRyaWJ1dGVcbiAgaWYgKGVsLmNvbXBvbmVudCkge1xuICAgIGRhdGEgKz0gXCJ0YWc6XFxcIlwiICsgKGVsLnRhZykgKyBcIlxcXCIsXCI7XG4gIH1cbiAgLy8gbW9kdWxlIGRhdGEgZ2VuZXJhdGlvbiBmdW5jdGlvbnNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5kYXRhR2VuRm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgZGF0YSArPSBzdGF0ZS5kYXRhR2VuRm5zW2ldKGVsKTtcbiAgfVxuICAvLyBhdHRyaWJ1dGVzXG4gIGlmIChlbC5hdHRycykge1xuICAgIGRhdGEgKz0gXCJhdHRyczp7XCIgKyAoZ2VuUHJvcHMoZWwuYXR0cnMpKSArIFwifSxcIjtcbiAgfVxuICAvLyBET00gcHJvcHNcbiAgaWYgKGVsLnByb3BzKSB7XG4gICAgZGF0YSArPSBcImRvbVByb3BzOntcIiArIChnZW5Qcm9wcyhlbC5wcm9wcykpICsgXCJ9LFwiO1xuICB9XG4gIC8vIGV2ZW50IGhhbmRsZXJzXG4gIGlmIChlbC5ldmVudHMpIHtcbiAgICBkYXRhICs9IChnZW5IYW5kbGVycyhlbC5ldmVudHMsIGZhbHNlLCBzdGF0ZS53YXJuKSkgKyBcIixcIjtcbiAgfVxuICBpZiAoZWwubmF0aXZlRXZlbnRzKSB7XG4gICAgZGF0YSArPSAoZ2VuSGFuZGxlcnMoZWwubmF0aXZlRXZlbnRzLCB0cnVlLCBzdGF0ZS53YXJuKSkgKyBcIixcIjtcbiAgfVxuICAvLyBzbG90IHRhcmdldFxuICAvLyBvbmx5IGZvciBub24tc2NvcGVkIHNsb3RzXG4gIGlmIChlbC5zbG90VGFyZ2V0ICYmICFlbC5zbG90U2NvcGUpIHtcbiAgICBkYXRhICs9IFwic2xvdDpcIiArIChlbC5zbG90VGFyZ2V0KSArIFwiLFwiO1xuICB9XG4gIC8vIHNjb3BlZCBzbG90c1xuICBpZiAoZWwuc2NvcGVkU2xvdHMpIHtcbiAgICBkYXRhICs9IChnZW5TY29wZWRTbG90cyhlbC5zY29wZWRTbG90cywgc3RhdGUpKSArIFwiLFwiO1xuICB9XG4gIC8vIGNvbXBvbmVudCB2LW1vZGVsXG4gIGlmIChlbC5tb2RlbCkge1xuICAgIGRhdGEgKz0gXCJtb2RlbDp7dmFsdWU6XCIgKyAoZWwubW9kZWwudmFsdWUpICsgXCIsY2FsbGJhY2s6XCIgKyAoZWwubW9kZWwuY2FsbGJhY2spICsgXCIsZXhwcmVzc2lvbjpcIiArIChlbC5tb2RlbC5leHByZXNzaW9uKSArIFwifSxcIjtcbiAgfVxuICAvLyBpbmxpbmUtdGVtcGxhdGVcbiAgaWYgKGVsLmlubGluZVRlbXBsYXRlKSB7XG4gICAgdmFyIGlubGluZVRlbXBsYXRlID0gZ2VuSW5saW5lVGVtcGxhdGUoZWwsIHN0YXRlKTtcbiAgICBpZiAoaW5saW5lVGVtcGxhdGUpIHtcbiAgICAgIGRhdGEgKz0gaW5saW5lVGVtcGxhdGUgKyBcIixcIjtcbiAgICB9XG4gIH1cbiAgZGF0YSA9IGRhdGEucmVwbGFjZSgvLCQvLCAnJykgKyAnfSc7XG4gIC8vIHYtYmluZCBkYXRhIHdyYXBcbiAgaWYgKGVsLndyYXBEYXRhKSB7XG4gICAgZGF0YSA9IGVsLndyYXBEYXRhKGRhdGEpO1xuICB9XG4gIC8vIHYtb24gZGF0YSB3cmFwXG4gIGlmIChlbC53cmFwTGlzdGVuZXJzKSB7XG4gICAgZGF0YSA9IGVsLndyYXBMaXN0ZW5lcnMoZGF0YSk7XG4gIH1cbiAgcmV0dXJuIGRhdGFcbn1cblxuZnVuY3Rpb24gZ2VuRGlyZWN0aXZlcyAoZWwsIHN0YXRlKSB7XG4gIHZhciBkaXJzID0gZWwuZGlyZWN0aXZlcztcbiAgaWYgKCFkaXJzKSB7IHJldHVybiB9XG4gIHZhciByZXMgPSAnZGlyZWN0aXZlczpbJztcbiAgdmFyIGhhc1J1bnRpbWUgPSBmYWxzZTtcbiAgdmFyIGksIGwsIGRpciwgbmVlZFJ1bnRpbWU7XG4gIGZvciAoaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGRpciA9IGRpcnNbaV07XG4gICAgbmVlZFJ1bnRpbWUgPSB0cnVlO1xuICAgIHZhciBnZW4gPSBzdGF0ZS5kaXJlY3RpdmVzW2Rpci5uYW1lXTtcbiAgICBpZiAoZ2VuKSB7XG4gICAgICAvLyBjb21waWxlLXRpbWUgZGlyZWN0aXZlIHRoYXQgbWFuaXB1bGF0ZXMgQVNULlxuICAgICAgLy8gcmV0dXJucyB0cnVlIGlmIGl0IGFsc28gbmVlZHMgYSBydW50aW1lIGNvdW50ZXJwYXJ0LlxuICAgICAgbmVlZFJ1bnRpbWUgPSAhIWdlbihlbCwgZGlyLCBzdGF0ZS53YXJuKTtcbiAgICB9XG4gICAgaWYgKG5lZWRSdW50aW1lKSB7XG4gICAgICBoYXNSdW50aW1lID0gdHJ1ZTtcbiAgICAgIHJlcyArPSBcIntuYW1lOlxcXCJcIiArIChkaXIubmFtZSkgKyBcIlxcXCIscmF3TmFtZTpcXFwiXCIgKyAoZGlyLnJhd05hbWUpICsgXCJcXFwiXCIgKyAoZGlyLnZhbHVlID8gKFwiLHZhbHVlOihcIiArIChkaXIudmFsdWUpICsgXCIpLGV4cHJlc3Npb246XCIgKyAoSlNPTi5zdHJpbmdpZnkoZGlyLnZhbHVlKSkpIDogJycpICsgKGRpci5hcmcgPyAoXCIsYXJnOlxcXCJcIiArIChkaXIuYXJnKSArIFwiXFxcIlwiKSA6ICcnKSArIChkaXIubW9kaWZpZXJzID8gKFwiLG1vZGlmaWVyczpcIiArIChKU09OLnN0cmluZ2lmeShkaXIubW9kaWZpZXJzKSkpIDogJycpICsgXCJ9LFwiO1xuICAgIH1cbiAgfVxuICBpZiAoaGFzUnVudGltZSkge1xuICAgIHJldHVybiByZXMuc2xpY2UoMCwgLTEpICsgJ10nXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuSW5saW5lVGVtcGxhdGUgKGVsLCBzdGF0ZSkge1xuICB2YXIgYXN0ID0gZWwuY2hpbGRyZW5bMF07XG4gIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiAoXG4gICAgZWwuY2hpbGRyZW4ubGVuZ3RoICE9PSAxIHx8IGFzdC50eXBlICE9PSAxXG4gICkpIHtcbiAgICBzdGF0ZS53YXJuKCdJbmxpbmUtdGVtcGxhdGUgY29tcG9uZW50cyBtdXN0IGhhdmUgZXhhY3RseSBvbmUgY2hpbGQgZWxlbWVudC4nKTtcbiAgfVxuICBpZiAoYXN0LnR5cGUgPT09IDEpIHtcbiAgICB2YXIgaW5saW5lUmVuZGVyRm5zID0gZ2VuZXJhdGUoYXN0LCBzdGF0ZS5vcHRpb25zKTtcbiAgICByZXR1cm4gKFwiaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpe1wiICsgKGlubGluZVJlbmRlckZucy5yZW5kZXIpICsgXCJ9LHN0YXRpY1JlbmRlckZuczpbXCIgKyAoaW5saW5lUmVuZGVyRm5zLnN0YXRpY1JlbmRlckZucy5tYXAoZnVuY3Rpb24gKGNvZGUpIHsgcmV0dXJuIChcImZ1bmN0aW9uKCl7XCIgKyBjb2RlICsgXCJ9XCIpOyB9KS5qb2luKCcsJykpICsgXCJdfVwiKVxuICB9XG59XG5cbmZ1bmN0aW9uIGdlblNjb3BlZFNsb3RzIChcbiAgc2xvdHMsXG4gIHN0YXRlXG4pIHtcbiAgcmV0dXJuIChcInNjb3BlZFNsb3RzOl91KFtcIiArIChPYmplY3Qua2V5cyhzbG90cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBnZW5TY29wZWRTbG90KGtleSwgc2xvdHNba2V5XSwgc3RhdGUpXG4gICAgfSkuam9pbignLCcpKSArIFwiXSlcIilcbn1cblxuZnVuY3Rpb24gZ2VuU2NvcGVkU2xvdCAoXG4gIGtleSxcbiAgZWwsXG4gIHN0YXRlXG4pIHtcbiAgaWYgKGVsLmZvciAmJiAhZWwuZm9yUHJvY2Vzc2VkKSB7XG4gICAgcmV0dXJuIGdlbkZvclNjb3BlZFNsb3Qoa2V5LCBlbCwgc3RhdGUpXG4gIH1cbiAgdmFyIGZuID0gXCJmdW5jdGlvbihcIiArIChTdHJpbmcoZWwuc2xvdFNjb3BlKSkgKyBcIil7XCIgK1xuICAgIFwicmV0dXJuIFwiICsgKGVsLnRhZyA9PT0gJ3RlbXBsYXRlJ1xuICAgICAgPyBlbC5pZlxuICAgICAgICA/ICgoZWwuaWYpICsgXCI/XCIgKyAoZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlKSB8fCAndW5kZWZpbmVkJykgKyBcIjp1bmRlZmluZWRcIilcbiAgICAgICAgOiBnZW5DaGlsZHJlbihlbCwgc3RhdGUpIHx8ICd1bmRlZmluZWQnXG4gICAgICA6IGdlbkVsZW1lbnQoZWwsIHN0YXRlKSkgKyBcIn1cIjtcbiAgcmV0dXJuIChcIntrZXk6XCIgKyBrZXkgKyBcIixmbjpcIiArIGZuICsgXCJ9XCIpXG59XG5cbmZ1bmN0aW9uIGdlbkZvclNjb3BlZFNsb3QgKFxuICBrZXksXG4gIGVsLFxuICBzdGF0ZVxuKSB7XG4gIHZhciBleHAgPSBlbC5mb3I7XG4gIHZhciBhbGlhcyA9IGVsLmFsaWFzO1xuICB2YXIgaXRlcmF0b3IxID0gZWwuaXRlcmF0b3IxID8gKFwiLFwiICsgKGVsLml0ZXJhdG9yMSkpIDogJyc7XG4gIHZhciBpdGVyYXRvcjIgPSBlbC5pdGVyYXRvcjIgPyAoXCIsXCIgKyAoZWwuaXRlcmF0b3IyKSkgOiAnJztcbiAgZWwuZm9yUHJvY2Vzc2VkID0gdHJ1ZTsgLy8gYXZvaWQgcmVjdXJzaW9uXG4gIHJldHVybiBcIl9sKChcIiArIGV4cCArIFwiKSxcIiArXG4gICAgXCJmdW5jdGlvbihcIiArIGFsaWFzICsgaXRlcmF0b3IxICsgaXRlcmF0b3IyICsgXCIpe1wiICtcbiAgICAgIFwicmV0dXJuIFwiICsgKGdlblNjb3BlZFNsb3Qoa2V5LCBlbCwgc3RhdGUpKSArXG4gICAgJ30pJ1xufVxuXG5mdW5jdGlvbiBnZW5DaGlsZHJlbiAoXG4gIGVsLFxuICBzdGF0ZSxcbiAgY2hlY2tTa2lwLFxuICBhbHRHZW5FbGVtZW50LFxuICBhbHRHZW5Ob2RlXG4pIHtcbiAgdmFyIGNoaWxkcmVuID0gZWwuY2hpbGRyZW47XG4gIGlmIChjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICB2YXIgZWwkMSA9IGNoaWxkcmVuWzBdO1xuICAgIC8vIG9wdGltaXplIHNpbmdsZSB2LWZvclxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcbiAgICAgIGVsJDEuZm9yICYmXG4gICAgICBlbCQxLnRhZyAhPT0gJ3RlbXBsYXRlJyAmJlxuICAgICAgZWwkMS50YWcgIT09ICdzbG90J1xuICAgICkge1xuICAgICAgcmV0dXJuIChhbHRHZW5FbGVtZW50IHx8IGdlbkVsZW1lbnQpKGVsJDEsIHN0YXRlKVxuICAgIH1cbiAgICB2YXIgbm9ybWFsaXphdGlvblR5cGUgPSBjaGVja1NraXBcbiAgICAgID8gZ2V0Tm9ybWFsaXphdGlvblR5cGUoY2hpbGRyZW4sIHN0YXRlLm1heWJlQ29tcG9uZW50KVxuICAgICAgOiAwO1xuICAgIHZhciBnZW4gPSBhbHRHZW5Ob2RlIHx8IGdlbk5vZGU7XG4gICAgcmV0dXJuIChcIltcIiArIChjaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGdlbihjLCBzdGF0ZSk7IH0pLmpvaW4oJywnKSkgKyBcIl1cIiArIChub3JtYWxpemF0aW9uVHlwZSA/IChcIixcIiArIG5vcm1hbGl6YXRpb25UeXBlKSA6ICcnKSlcbiAgfVxufVxuXG4vLyBkZXRlcm1pbmUgdGhlIG5vcm1hbGl6YXRpb24gbmVlZGVkIGZvciB0aGUgY2hpbGRyZW4gYXJyYXkuXG4vLyAwOiBubyBub3JtYWxpemF0aW9uIG5lZWRlZFxuLy8gMTogc2ltcGxlIG5vcm1hbGl6YXRpb24gbmVlZGVkIChwb3NzaWJsZSAxLWxldmVsIGRlZXAgbmVzdGVkIGFycmF5KVxuLy8gMjogZnVsbCBub3JtYWxpemF0aW9uIG5lZWRlZFxuZnVuY3Rpb24gZ2V0Tm9ybWFsaXphdGlvblR5cGUgKFxuICBjaGlsZHJlbixcbiAgbWF5YmVDb21wb25lbnRcbikge1xuICB2YXIgcmVzID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbCA9IGNoaWxkcmVuW2ldO1xuICAgIGlmIChlbC50eXBlICE9PSAxKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBpZiAobmVlZHNOb3JtYWxpemF0aW9uKGVsKSB8fFxuICAgICAgICAoZWwuaWZDb25kaXRpb25zICYmIGVsLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uIChjKSB7IHJldHVybiBuZWVkc05vcm1hbGl6YXRpb24oYy5ibG9jayk7IH0pKSkge1xuICAgICAgcmVzID0gMjtcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGlmIChtYXliZUNvbXBvbmVudChlbCkgfHxcbiAgICAgICAgKGVsLmlmQ29uZGl0aW9ucyAmJiBlbC5pZkNvbmRpdGlvbnMuc29tZShmdW5jdGlvbiAoYykgeyByZXR1cm4gbWF5YmVDb21wb25lbnQoYy5ibG9jayk7IH0pKSkge1xuICAgICAgcmVzID0gMTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBuZWVkc05vcm1hbGl6YXRpb24gKGVsKSB7XG4gIHJldHVybiBlbC5mb3IgIT09IHVuZGVmaW5lZCB8fCBlbC50YWcgPT09ICd0ZW1wbGF0ZScgfHwgZWwudGFnID09PSAnc2xvdCdcbn1cblxuZnVuY3Rpb24gZ2VuTm9kZSAobm9kZSwgc3RhdGUpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gMSkge1xuICAgIHJldHVybiBnZW5FbGVtZW50KG5vZGUsIHN0YXRlKVxuICB9IGlmIChub2RlLnR5cGUgPT09IDMgJiYgbm9kZS5pc0NvbW1lbnQpIHtcbiAgICByZXR1cm4gZ2VuQ29tbWVudChub2RlKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZW5UZXh0KG5vZGUpXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuVGV4dCAodGV4dCkge1xuICByZXR1cm4gKFwiX3YoXCIgKyAodGV4dC50eXBlID09PSAyXG4gICAgPyB0ZXh0LmV4cHJlc3Npb24gLy8gbm8gbmVlZCBmb3IgKCkgYmVjYXVzZSBhbHJlYWR5IHdyYXBwZWQgaW4gX3MoKVxuICAgIDogdHJhbnNmb3JtU3BlY2lhbE5ld2xpbmVzKEpTT04uc3RyaW5naWZ5KHRleHQudGV4dCkpKSArIFwiKVwiKVxufVxuXG5mdW5jdGlvbiBnZW5Db21tZW50IChjb21tZW50KSB7XG4gIHJldHVybiAoXCJfZShcIiArIChKU09OLnN0cmluZ2lmeShjb21tZW50LnRleHQpKSArIFwiKVwiKVxufVxuXG5mdW5jdGlvbiBnZW5TbG90IChlbCwgc3RhdGUpIHtcbiAgdmFyIHNsb3ROYW1lID0gZWwuc2xvdE5hbWUgfHwgJ1wiZGVmYXVsdFwiJztcbiAgdmFyIGNoaWxkcmVuID0gZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlKTtcbiAgdmFyIHJlcyA9IFwiX3QoXCIgKyBzbG90TmFtZSArIChjaGlsZHJlbiA/IChcIixcIiArIGNoaWxkcmVuKSA6ICcnKTtcbiAgdmFyIGF0dHJzID0gZWwuYXR0cnMgJiYgKFwie1wiICsgKGVsLmF0dHJzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gKChjYW1lbGl6ZShhLm5hbWUpKSArIFwiOlwiICsgKGEudmFsdWUpKTsgfSkuam9pbignLCcpKSArIFwifVwiKTtcbiAgdmFyIGJpbmQkJDEgPSBlbC5hdHRyc01hcFsndi1iaW5kJ107XG4gIGlmICgoYXR0cnMgfHwgYmluZCQkMSkgJiYgIWNoaWxkcmVuKSB7XG4gICAgcmVzICs9IFwiLG51bGxcIjtcbiAgfVxuICBpZiAoYXR0cnMpIHtcbiAgICByZXMgKz0gXCIsXCIgKyBhdHRycztcbiAgfVxuICBpZiAoYmluZCQkMSkge1xuICAgIHJlcyArPSAoYXR0cnMgPyAnJyA6ICcsbnVsbCcpICsgXCIsXCIgKyBiaW5kJCQxO1xuICB9XG4gIHJldHVybiByZXMgKyAnKSdcbn1cblxuLy8gY29tcG9uZW50TmFtZSBpcyBlbC5jb21wb25lbnQsIHRha2UgaXQgYXMgYXJndW1lbnQgdG8gc2h1biBmbG93J3MgcGVzc2ltaXN0aWMgcmVmaW5lbWVudFxuZnVuY3Rpb24gZ2VuQ29tcG9uZW50IChcbiAgY29tcG9uZW50TmFtZSxcbiAgZWwsXG4gIHN0YXRlXG4pIHtcbiAgdmFyIGNoaWxkcmVuID0gZWwuaW5saW5lVGVtcGxhdGUgPyBudWxsIDogZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlLCB0cnVlKTtcbiAgcmV0dXJuIChcIl9jKFwiICsgY29tcG9uZW50TmFtZSArIFwiLFwiICsgKGdlbkRhdGEkMihlbCwgc3RhdGUpKSArIChjaGlsZHJlbiA/IChcIixcIiArIGNoaWxkcmVuKSA6ICcnKSArIFwiKVwiKVxufVxuXG5mdW5jdGlvbiBnZW5Qcm9wcyAocHJvcHMpIHtcbiAgdmFyIHJlcyA9ICcnO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHByb3AgPSBwcm9wc1tpXTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICB7XG4gICAgICByZXMgKz0gXCJcXFwiXCIgKyAocHJvcC5uYW1lKSArIFwiXFxcIjpcIiArICh0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMocHJvcC52YWx1ZSkpICsgXCIsXCI7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXMuc2xpY2UoMCwgLTEpXG59XG5cbi8vICMzODk1LCAjNDI2OFxuZnVuY3Rpb24gdHJhbnNmb3JtU3BlY2lhbE5ld2xpbmVzICh0ZXh0KSB7XG4gIHJldHVybiB0ZXh0XG4gICAgLnJlcGxhY2UoL1xcdTIwMjgvZywgJ1xcXFx1MjAyOCcpXG4gICAgLnJlcGxhY2UoL1xcdTIwMjkvZywgJ1xcXFx1MjAyOScpXG59XG5cbi8qICAqL1xuXG4vLyB0aGVzZSBrZXl3b3JkcyBzaG91bGQgbm90IGFwcGVhciBpbnNpZGUgZXhwcmVzc2lvbnMsIGJ1dCBvcGVyYXRvcnMgbGlrZVxuLy8gdHlwZW9mLCBpbnN0YW5jZW9mIGFuZCBpbiBhcmUgYWxsb3dlZFxudmFyIHByb2hpYml0ZWRLZXl3b3JkUkUgPSBuZXcgUmVnRXhwKCdcXFxcYicgKyAoXG4gICdkbyxpZixmb3IsbGV0LG5ldyx0cnksdmFyLGNhc2UsZWxzZSx3aXRoLGF3YWl0LGJyZWFrLGNhdGNoLGNsYXNzLGNvbnN0LCcgK1xuICAnc3VwZXIsdGhyb3csd2hpbGUseWllbGQsZGVsZXRlLGV4cG9ydCxpbXBvcnQscmV0dXJuLHN3aXRjaCxkZWZhdWx0LCcgK1xuICAnZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cydcbikuc3BsaXQoJywnKS5qb2luKCdcXFxcYnxcXFxcYicpICsgJ1xcXFxiJyk7XG5cbi8vIHRoZXNlIHVuYXJ5IG9wZXJhdG9ycyBzaG91bGQgbm90IGJlIHVzZWQgYXMgcHJvcGVydHkvbWV0aG9kIG5hbWVzXG52YXIgdW5hcnlPcGVyYXRvcnNSRSA9IG5ldyBSZWdFeHAoJ1xcXFxiJyArIChcbiAgJ2RlbGV0ZSx0eXBlb2Ysdm9pZCdcbikuc3BsaXQoJywnKS5qb2luKCdcXFxccypcXFxcKFteXFxcXCldKlxcXFwpfFxcXFxiJykgKyAnXFxcXHMqXFxcXChbXlxcXFwpXSpcXFxcKScpO1xuXG4vLyBzdHJpcCBzdHJpbmdzIGluIGV4cHJlc3Npb25zXG52YXIgc3RyaXBTdHJpbmdSRSA9IC8nKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYC9nO1xuXG4vLyBkZXRlY3QgcHJvYmxlbWF0aWMgZXhwcmVzc2lvbnMgaW4gYSB0ZW1wbGF0ZVxuZnVuY3Rpb24gZGV0ZWN0RXJyb3JzIChhc3QpIHtcbiAgdmFyIGVycm9ycyA9IFtdO1xuICBpZiAoYXN0KSB7XG4gICAgY2hlY2tOb2RlKGFzdCwgZXJyb3JzKTtcbiAgfVxuICByZXR1cm4gZXJyb3JzXG59XG5cbmZ1bmN0aW9uIGNoZWNrTm9kZSAobm9kZSwgZXJyb3JzKSB7XG4gIGlmIChub2RlLnR5cGUgPT09IDEpIHtcbiAgICBmb3IgKHZhciBuYW1lIGluIG5vZGUuYXR0cnNNYXApIHtcbiAgICAgIGlmIChkaXJSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG5vZGUuYXR0cnNNYXBbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIGlmIChuYW1lID09PSAndi1mb3InKSB7XG4gICAgICAgICAgICBjaGVja0Zvcihub2RlLCAoXCJ2LWZvcj1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIlwiKSwgZXJyb3JzKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG9uUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgICAgY2hlY2tFdmVudCh2YWx1ZSwgKG5hbWUgKyBcIj1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIlwiKSwgZXJyb3JzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tFeHByZXNzaW9uKHZhbHVlLCAobmFtZSArIFwiPVxcXCJcIiArIHZhbHVlICsgXCJcXFwiXCIpLCBlcnJvcnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoZWNrTm9kZShub2RlLmNoaWxkcmVuW2ldLCBlcnJvcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09IDIpIHtcbiAgICBjaGVja0V4cHJlc3Npb24obm9kZS5leHByZXNzaW9uLCBub2RlLnRleHQsIGVycm9ycyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tFdmVudCAoZXhwLCB0ZXh0LCBlcnJvcnMpIHtcbiAgdmFyIHN0aXBwZWQgPSBleHAucmVwbGFjZShzdHJpcFN0cmluZ1JFLCAnJyk7XG4gIHZhciBrZXl3b3JkTWF0Y2ggPSBzdGlwcGVkLm1hdGNoKHVuYXJ5T3BlcmF0b3JzUkUpO1xuICBpZiAoa2V5d29yZE1hdGNoICYmIHN0aXBwZWQuY2hhckF0KGtleXdvcmRNYXRjaC5pbmRleCAtIDEpICE9PSAnJCcpIHtcbiAgICBlcnJvcnMucHVzaChcbiAgICAgIFwiYXZvaWQgdXNpbmcgSmF2YVNjcmlwdCB1bmFyeSBvcGVyYXRvciBhcyBwcm9wZXJ0eSBuYW1lOiBcIiArXG4gICAgICBcIlxcXCJcIiArIChrZXl3b3JkTWF0Y2hbMF0pICsgXCJcXFwiIGluIGV4cHJlc3Npb24gXCIgKyAodGV4dC50cmltKCkpXG4gICAgKTtcbiAgfVxuICBjaGVja0V4cHJlc3Npb24oZXhwLCB0ZXh0LCBlcnJvcnMpO1xufVxuXG5mdW5jdGlvbiBjaGVja0ZvciAobm9kZSwgdGV4dCwgZXJyb3JzKSB7XG4gIGNoZWNrRXhwcmVzc2lvbihub2RlLmZvciB8fCAnJywgdGV4dCwgZXJyb3JzKTtcbiAgY2hlY2tJZGVudGlmaWVyKG5vZGUuYWxpYXMsICd2LWZvciBhbGlhcycsIHRleHQsIGVycm9ycyk7XG4gIGNoZWNrSWRlbnRpZmllcihub2RlLml0ZXJhdG9yMSwgJ3YtZm9yIGl0ZXJhdG9yJywgdGV4dCwgZXJyb3JzKTtcbiAgY2hlY2tJZGVudGlmaWVyKG5vZGUuaXRlcmF0b3IyLCAndi1mb3IgaXRlcmF0b3InLCB0ZXh0LCBlcnJvcnMpO1xufVxuXG5mdW5jdGlvbiBjaGVja0lkZW50aWZpZXIgKFxuICBpZGVudCxcbiAgdHlwZSxcbiAgdGV4dCxcbiAgZXJyb3JzXG4pIHtcbiAgaWYgKHR5cGVvZiBpZGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICB0cnkge1xuICAgICAgbmV3IEZ1bmN0aW9uKChcInZhciBcIiArIGlkZW50ICsgXCI9X1wiKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZXJyb3JzLnB1c2goKFwiaW52YWxpZCBcIiArIHR5cGUgKyBcIiBcXFwiXCIgKyBpZGVudCArIFwiXFxcIiBpbiBleHByZXNzaW9uOiBcIiArICh0ZXh0LnRyaW0oKSkpKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tFeHByZXNzaW9uIChleHAsIHRleHQsIGVycm9ycykge1xuICB0cnkge1xuICAgIG5ldyBGdW5jdGlvbigoXCJyZXR1cm4gXCIgKyBleHApKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHZhciBrZXl3b3JkTWF0Y2ggPSBleHAucmVwbGFjZShzdHJpcFN0cmluZ1JFLCAnJykubWF0Y2gocHJvaGliaXRlZEtleXdvcmRSRSk7XG4gICAgaWYgKGtleXdvcmRNYXRjaCkge1xuICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgIFwiYXZvaWQgdXNpbmcgSmF2YVNjcmlwdCBrZXl3b3JkIGFzIHByb3BlcnR5IG5hbWU6IFwiICtcbiAgICAgICAgXCJcXFwiXCIgKyAoa2V5d29yZE1hdGNoWzBdKSArIFwiXFxcIlxcbiAgUmF3IGV4cHJlc3Npb246IFwiICsgKHRleHQudHJpbSgpKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgIFwiaW52YWxpZCBleHByZXNzaW9uOiBcIiArIChlLm1lc3NhZ2UpICsgXCIgaW5cXG5cXG5cIiArXG4gICAgICAgIFwiICAgIFwiICsgZXhwICsgXCJcXG5cXG5cIiArXG4gICAgICAgIFwiICBSYXcgZXhwcmVzc2lvbjogXCIgKyAodGV4dC50cmltKCkpICsgXCJcXG5cIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uIChjb2RlLCBlcnJvcnMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGNvZGUpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGVycm9ycy5wdXNoKHsgZXJyOiBlcnIsIGNvZGU6IGNvZGUgfSk7XG4gICAgcmV0dXJuIG5vb3BcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21waWxlVG9GdW5jdGlvbkZuIChjb21waWxlKSB7XG4gIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBpbGVUb0Z1bmN0aW9ucyAoXG4gICAgdGVtcGxhdGUsXG4gICAgb3B0aW9ucyxcbiAgICB2bVxuICApIHtcbiAgICBvcHRpb25zID0gZXh0ZW5kKHt9LCBvcHRpb25zKTtcbiAgICB2YXIgd2FybiQkMSA9IG9wdGlvbnMud2FybiB8fCB3YXJuO1xuICAgIGRlbGV0ZSBvcHRpb25zLndhcm47XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICB7XG4gICAgICAvLyBkZXRlY3QgcG9zc2libGUgQ1NQIHJlc3RyaWN0aW9uXG4gICAgICB0cnkge1xuICAgICAgICBuZXcgRnVuY3Rpb24oJ3JldHVybiAxJyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG4gICAgICAgICAgd2FybiQkMShcbiAgICAgICAgICAgICdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBzdGFuZGFsb25lIGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiAnICtcbiAgICAgICAgICAgICdlbnZpcm9ubWVudCB3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICtcbiAgICAgICAgICAgICdUaGUgdGVtcGxhdGUgY29tcGlsZXIgY2Fubm90IHdvcmsgaW4gdGhpcyBlbnZpcm9ubWVudC4gQ29uc2lkZXIgJyArXG4gICAgICAgICAgICAncmVsYXhpbmcgdGhlIHBvbGljeSB0byBhbGxvdyB1bnNhZmUtZXZhbCBvciBwcmUtY29tcGlsaW5nIHlvdXIgJyArXG4gICAgICAgICAgICAndGVtcGxhdGVzIGludG8gcmVuZGVyIGZ1bmN0aW9ucy4nXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNoZWNrIGNhY2hlXG4gICAgdmFyIGtleSA9IG9wdGlvbnMuZGVsaW1pdGVyc1xuICAgICAgPyBTdHJpbmcob3B0aW9ucy5kZWxpbWl0ZXJzKSArIHRlbXBsYXRlXG4gICAgICA6IHRlbXBsYXRlO1xuICAgIGlmIChjYWNoZVtrZXldKSB7XG4gICAgICByZXR1cm4gY2FjaGVba2V5XVxuICAgIH1cblxuICAgIC8vIGNvbXBpbGVcbiAgICB2YXIgY29tcGlsZWQgPSBjb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTtcblxuICAgIC8vIGNoZWNrIGNvbXBpbGF0aW9uIGVycm9ycy90aXBzXG4gICAge1xuICAgICAgaWYgKGNvbXBpbGVkLmVycm9ycyAmJiBjb21waWxlZC5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHdhcm4kJDEoXG4gICAgICAgICAgXCJFcnJvciBjb21waWxpbmcgdGVtcGxhdGU6XFxuXFxuXCIgKyB0ZW1wbGF0ZSArIFwiXFxuXFxuXCIgK1xuICAgICAgICAgIGNvbXBpbGVkLmVycm9ycy5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIChcIi0gXCIgKyBlKTsgfSkuam9pbignXFxuJykgKyAnXFxuJyxcbiAgICAgICAgICB2bVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGNvbXBpbGVkLnRpcHMgJiYgY29tcGlsZWQudGlwcy5sZW5ndGgpIHtcbiAgICAgICAgY29tcGlsZWQudGlwcy5mb3JFYWNoKGZ1bmN0aW9uIChtc2cpIHsgcmV0dXJuIHRpcChtc2csIHZtKTsgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdHVybiBjb2RlIGludG8gZnVuY3Rpb25zXG4gICAgdmFyIHJlcyA9IHt9O1xuICAgIHZhciBmbkdlbkVycm9ycyA9IFtdO1xuICAgIHJlcy5yZW5kZXIgPSBjcmVhdGVGdW5jdGlvbihjb21waWxlZC5yZW5kZXIsIGZuR2VuRXJyb3JzKTtcbiAgICByZXMuc3RhdGljUmVuZGVyRm5zID0gY29tcGlsZWQuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbiAoY29kZSkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUZ1bmN0aW9uKGNvZGUsIGZuR2VuRXJyb3JzKVxuICAgIH0pO1xuXG4gICAgLy8gY2hlY2sgZnVuY3Rpb24gZ2VuZXJhdGlvbiBlcnJvcnMuXG4gICAgLy8gdGhpcyBzaG91bGQgb25seSBoYXBwZW4gaWYgdGhlcmUgaXMgYSBidWcgaW4gdGhlIGNvbXBpbGVyIGl0c2VsZi5cbiAgICAvLyBtb3N0bHkgZm9yIGNvZGVnZW4gZGV2ZWxvcG1lbnQgdXNlXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAge1xuICAgICAgaWYgKCghY29tcGlsZWQuZXJyb3JzIHx8ICFjb21waWxlZC5lcnJvcnMubGVuZ3RoKSAmJiBmbkdlbkVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgd2FybiQkMShcbiAgICAgICAgICBcIkZhaWxlZCB0byBnZW5lcmF0ZSByZW5kZXIgZnVuY3Rpb246XFxuXFxuXCIgK1xuICAgICAgICAgIGZuR2VuRXJyb3JzLm1hcChmdW5jdGlvbiAocmVmKSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gcmVmLmVycjtcbiAgICAgICAgICAgIHZhciBjb2RlID0gcmVmLmNvZGU7XG5cbiAgICAgICAgICAgIHJldHVybiAoKGVyci50b1N0cmluZygpKSArIFwiIGluXFxuXFxuXCIgKyBjb2RlICsgXCJcXG5cIik7XG4gICAgICAgIH0pLmpvaW4oJ1xcbicpLFxuICAgICAgICAgIHZtXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIChjYWNoZVtrZXldID0gcmVzKVxuICB9XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBjcmVhdGVDb21waWxlckNyZWF0b3IgKGJhc2VDb21waWxlKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjcmVhdGVDb21waWxlciAoYmFzZU9wdGlvbnMpIHtcbiAgICBmdW5jdGlvbiBjb21waWxlIChcbiAgICAgIHRlbXBsYXRlLFxuICAgICAgb3B0aW9uc1xuICAgICkge1xuICAgICAgdmFyIGZpbmFsT3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoYmFzZU9wdGlvbnMpO1xuICAgICAgdmFyIGVycm9ycyA9IFtdO1xuICAgICAgdmFyIHRpcHMgPSBbXTtcbiAgICAgIGZpbmFsT3B0aW9ucy53YXJuID0gZnVuY3Rpb24gKG1zZywgdGlwKSB7XG4gICAgICAgICh0aXAgPyB0aXBzIDogZXJyb3JzKS5wdXNoKG1zZyk7XG4gICAgICB9O1xuXG4gICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAvLyBtZXJnZSBjdXN0b20gbW9kdWxlc1xuICAgICAgICBpZiAob3B0aW9ucy5tb2R1bGVzKSB7XG4gICAgICAgICAgZmluYWxPcHRpb25zLm1vZHVsZXMgPVxuICAgICAgICAgICAgKGJhc2VPcHRpb25zLm1vZHVsZXMgfHwgW10pLmNvbmNhdChvcHRpb25zLm1vZHVsZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1lcmdlIGN1c3RvbSBkaXJlY3RpdmVzXG4gICAgICAgIGlmIChvcHRpb25zLmRpcmVjdGl2ZXMpIHtcbiAgICAgICAgICBmaW5hbE9wdGlvbnMuZGlyZWN0aXZlcyA9IGV4dGVuZChcbiAgICAgICAgICAgIE9iamVjdC5jcmVhdGUoYmFzZU9wdGlvbnMuZGlyZWN0aXZlcyB8fCBudWxsKSxcbiAgICAgICAgICAgIG9wdGlvbnMuZGlyZWN0aXZlc1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29weSBvdGhlciBvcHRpb25zXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgaWYgKGtleSAhPT0gJ21vZHVsZXMnICYmIGtleSAhPT0gJ2RpcmVjdGl2ZXMnKSB7XG4gICAgICAgICAgICBmaW5hbE9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGNvbXBpbGVkID0gYmFzZUNvbXBpbGUodGVtcGxhdGUsIGZpbmFsT3B0aW9ucyk7XG4gICAgICB7XG4gICAgICAgIGVycm9ycy5wdXNoLmFwcGx5KGVycm9ycywgZGV0ZWN0RXJyb3JzKGNvbXBpbGVkLmFzdCkpO1xuICAgICAgfVxuICAgICAgY29tcGlsZWQuZXJyb3JzID0gZXJyb3JzO1xuICAgICAgY29tcGlsZWQudGlwcyA9IHRpcHM7XG4gICAgICByZXR1cm4gY29tcGlsZWRcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgY29tcGlsZTogY29tcGlsZSxcbiAgICAgIGNvbXBpbGVUb0Z1bmN0aW9uczogY3JlYXRlQ29tcGlsZVRvRnVuY3Rpb25Gbihjb21waWxlKVxuICAgIH1cbiAgfVxufVxuXG4vKiAgKi9cblxuLy8gYGNyZWF0ZUNvbXBpbGVyQ3JlYXRvcmAgYWxsb3dzIGNyZWF0aW5nIGNvbXBpbGVycyB0aGF0IHVzZSBhbHRlcm5hdGl2ZVxuLy8gcGFyc2VyL29wdGltaXplci9jb2RlZ2VuLCBlLmcgdGhlIFNTUiBvcHRpbWl6aW5nIGNvbXBpbGVyLlxuLy8gSGVyZSB3ZSBqdXN0IGV4cG9ydCBhIGRlZmF1bHQgY29tcGlsZXIgdXNpbmcgdGhlIGRlZmF1bHQgcGFydHMuXG52YXIgY3JlYXRlQ29tcGlsZXIgPSBjcmVhdGVDb21waWxlckNyZWF0b3IoZnVuY3Rpb24gYmFzZUNvbXBpbGUgKFxuICB0ZW1wbGF0ZSxcbiAgb3B0aW9uc1xuKSB7XG4gIHZhciBhc3QgPSBwYXJzZSh0ZW1wbGF0ZS50cmltKCksIG9wdGlvbnMpO1xuICBpZiAob3B0aW9ucy5vcHRpbWl6ZSAhPT0gZmFsc2UpIHtcbiAgICBvcHRpbWl6ZShhc3QsIG9wdGlvbnMpO1xuICB9XG4gIHZhciBjb2RlID0gZ2VuZXJhdGUoYXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICBhc3Q6IGFzdCxcbiAgICByZW5kZXI6IGNvZGUucmVuZGVyLFxuICAgIHN0YXRpY1JlbmRlckZuczogY29kZS5zdGF0aWNSZW5kZXJGbnNcbiAgfVxufSk7XG5cbi8qICAqL1xuXG52YXIgcmVmJDEgPSBjcmVhdGVDb21waWxlcihiYXNlT3B0aW9ucyk7XG52YXIgY29tcGlsZVRvRnVuY3Rpb25zID0gcmVmJDEuY29tcGlsZVRvRnVuY3Rpb25zO1xuXG4vKiAgKi9cblxuLy8gY2hlY2sgd2hldGhlciBjdXJyZW50IGJyb3dzZXIgZW5jb2RlcyBhIGNoYXIgaW5zaWRlIGF0dHJpYnV0ZSB2YWx1ZXNcbnZhciBkaXY7XG5mdW5jdGlvbiBnZXRTaG91bGREZWNvZGUgKGhyZWYpIHtcbiAgZGl2ID0gZGl2IHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkaXYuaW5uZXJIVE1MID0gaHJlZiA/IFwiPGEgaHJlZj1cXFwiXFxuXFxcIi8+XCIgOiBcIjxkaXYgYT1cXFwiXFxuXFxcIi8+XCI7XG4gIHJldHVybiBkaXYuaW5uZXJIVE1MLmluZGV4T2YoJyYjMTA7JykgPiAwXG59XG5cbi8vICMzNjYzOiBJRSBlbmNvZGVzIG5ld2xpbmVzIGluc2lkZSBhdHRyaWJ1dGUgdmFsdWVzIHdoaWxlIG90aGVyIGJyb3dzZXJzIGRvbid0XG52YXIgc2hvdWxkRGVjb2RlTmV3bGluZXMgPSBpbkJyb3dzZXIgPyBnZXRTaG91bGREZWNvZGUoZmFsc2UpIDogZmFsc2U7XG4vLyAjNjgyODogY2hyb21lIGVuY29kZXMgY29udGVudCBpbiBhW2hyZWZdXG52YXIgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmID0gaW5Ccm93c2VyID8gZ2V0U2hvdWxkRGVjb2RlKHRydWUpIDogZmFsc2U7XG5cbi8qICAqL1xuXG52YXIgaWRUb1RlbXBsYXRlID0gY2FjaGVkKGZ1bmN0aW9uIChpZCkge1xuICB2YXIgZWwgPSBxdWVyeShpZCk7XG4gIHJldHVybiBlbCAmJiBlbC5pbm5lckhUTUxcbn0pO1xuXG52YXIgbW91bnQgPSBWdWUucHJvdG90eXBlLiRtb3VudDtcblZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKFxuICBlbCxcbiAgaHlkcmF0aW5nXG4pIHtcbiAgZWwgPSBlbCAmJiBxdWVyeShlbCk7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSB8fCBlbCA9PT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihcbiAgICAgIFwiRG8gbm90IG1vdW50IFZ1ZSB0byA8aHRtbD4gb3IgPGJvZHk+IC0gbW91bnQgdG8gbm9ybWFsIGVsZW1lbnRzIGluc3RlYWQuXCJcbiAgICApO1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gIC8vIHJlc29sdmUgdGVtcGxhdGUvZWwgYW5kIGNvbnZlcnQgdG8gcmVuZGVyIGZ1bmN0aW9uXG4gIGlmICghb3B0aW9ucy5yZW5kZXIpIHtcbiAgICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlO1xuICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSBpZFRvVGVtcGxhdGUodGVtcGxhdGUpO1xuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgIGlmIChcImRldmVsb3BtZW50XCIgIT09ICdwcm9kdWN0aW9uJyAmJiAhdGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICAgIChcIlRlbXBsYXRlIGVsZW1lbnQgbm90IGZvdW5kIG9yIGlzIGVtcHR5OiBcIiArIChvcHRpb25zLnRlbXBsYXRlKSksXG4gICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUuaW5uZXJIVE1MO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAge1xuICAgICAgICAgIHdhcm4oJ2ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOicgKyB0ZW1wbGF0ZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVsKSB7XG4gICAgICB0ZW1wbGF0ZSA9IGdldE91dGVySFRNTChlbCk7XG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoXCJkZXZlbG9wbWVudFwiICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHtcbiAgICAgICAgbWFyaygnY29tcGlsZScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVmID0gY29tcGlsZVRvRnVuY3Rpb25zKHRlbXBsYXRlLCB7XG4gICAgICAgIHNob3VsZERlY29kZU5ld2xpbmVzOiBzaG91bGREZWNvZGVOZXdsaW5lcyxcbiAgICAgICAgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOiBzaG91bGREZWNvZGVOZXdsaW5lc0ZvckhyZWYsXG4gICAgICAgIGRlbGltaXRlcnM6IG9wdGlvbnMuZGVsaW1pdGVycyxcbiAgICAgICAgY29tbWVudHM6IG9wdGlvbnMuY29tbWVudHNcbiAgICAgIH0sIHRoaXMpO1xuICAgICAgdmFyIHJlbmRlciA9IHJlZi5yZW5kZXI7XG4gICAgICB2YXIgc3RhdGljUmVuZGVyRm5zID0gcmVmLnN0YXRpY1JlbmRlckZucztcbiAgICAgIG9wdGlvbnMucmVuZGVyID0gcmVuZGVyO1xuICAgICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSBzdGF0aWNSZW5kZXJGbnM7XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKFwiZGV2ZWxvcG1lbnRcIiAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7XG4gICAgICAgIG1hcmsoJ2NvbXBpbGUgZW5kJyk7XG4gICAgICAgIG1lYXN1cmUoKFwidnVlIFwiICsgKHRoaXMuX25hbWUpICsgXCIgY29tcGlsZVwiKSwgJ2NvbXBpbGUnLCAnY29tcGlsZSBlbmQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1vdW50LmNhbGwodGhpcywgZWwsIGh5ZHJhdGluZylcbn07XG5cbi8qKlxuICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcbiAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuICovXG5mdW5jdGlvbiBnZXRPdXRlckhUTUwgKGVsKSB7XG4gIGlmIChlbC5vdXRlckhUTUwpIHtcbiAgICByZXR1cm4gZWwub3V0ZXJIVE1MXG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MXG4gIH1cbn1cblxuVnVlLmNvbXBpbGUgPSBjb21waWxlVG9GdW5jdGlvbnM7XG5cbnJldHVybiBWdWU7XG5cbn0pKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdnVlL2Rpc3QvdnVlLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbi8vIE9uIHNvbWUgZXhvdGljIGVudmlyb25tZW50cywgaXQncyBub3QgY2xlYXIgd2hpY2ggb2JqZWN0IGBzZXRpbW1laWRhdGVgIHdhc1xuLy8gYWJsZSB0byBpbnN0YWxsIG9udG8uICBTZWFyY2ggZWFjaCBwb3NzaWJpbGl0eSBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGVcbi8vIGBzZXRpbW1lZGlhdGVgIGxpYnJhcnkuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5zZXRJbW1lZGlhdGUpO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLmNsZWFySW1tZWRpYXRlKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICAqIHZ1ZS1yb3V0ZXIgdjMuMC4xXG4gICogKGMpIDIwMTcgRXZhbiBZb3VcbiAgKiBAbGljZW5zZSBNSVRcbiAgKi9cbid1c2Ugc3RyaWN0JztcblxuLyogICovXG5cbmZ1bmN0aW9uIGFzc2VydCAoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKChcIlt2dWUtcm91dGVyXSBcIiArIG1lc3NhZ2UpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHdhcm4gKGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhY29uZGl0aW9uKSB7XG4gICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUud2FybigoXCJbdnVlLXJvdXRlcl0gXCIgKyBtZXNzYWdlKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNFcnJvciAoZXJyKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZXJyKS5pbmRleE9mKCdFcnJvcicpID4gLTFcbn1cblxudmFyIFZpZXcgPSB7XG4gIG5hbWU6ICdyb3V0ZXItdmlldycsXG4gIGZ1bmN0aW9uYWw6IHRydWUsXG4gIHByb3BzOiB7XG4gICAgbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ2RlZmF1bHQnXG4gICAgfVxuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoXywgcmVmKSB7XG4gICAgdmFyIHByb3BzID0gcmVmLnByb3BzO1xuICAgIHZhciBjaGlsZHJlbiA9IHJlZi5jaGlsZHJlbjtcbiAgICB2YXIgcGFyZW50ID0gcmVmLnBhcmVudDtcbiAgICB2YXIgZGF0YSA9IHJlZi5kYXRhO1xuXG4gICAgZGF0YS5yb3V0ZXJWaWV3ID0gdHJ1ZTtcblxuICAgIC8vIGRpcmVjdGx5IHVzZSBwYXJlbnQgY29udGV4dCdzIGNyZWF0ZUVsZW1lbnQoKSBmdW5jdGlvblxuICAgIC8vIHNvIHRoYXQgY29tcG9uZW50cyByZW5kZXJlZCBieSByb3V0ZXItdmlldyBjYW4gcmVzb2x2ZSBuYW1lZCBzbG90c1xuICAgIHZhciBoID0gcGFyZW50LiRjcmVhdGVFbGVtZW50O1xuICAgIHZhciBuYW1lID0gcHJvcHMubmFtZTtcbiAgICB2YXIgcm91dGUgPSBwYXJlbnQuJHJvdXRlO1xuICAgIHZhciBjYWNoZSA9IHBhcmVudC5fcm91dGVyVmlld0NhY2hlIHx8IChwYXJlbnQuX3JvdXRlclZpZXdDYWNoZSA9IHt9KTtcblxuICAgIC8vIGRldGVybWluZSBjdXJyZW50IHZpZXcgZGVwdGgsIGFsc28gY2hlY2sgdG8gc2VlIGlmIHRoZSB0cmVlXG4gICAgLy8gaGFzIGJlZW4gdG9nZ2xlZCBpbmFjdGl2ZSBidXQga2VwdC1hbGl2ZS5cbiAgICB2YXIgZGVwdGggPSAwO1xuICAgIHZhciBpbmFjdGl2ZSA9IGZhbHNlO1xuICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50Ll9yb3V0ZXJSb290ICE9PSBwYXJlbnQpIHtcbiAgICAgIGlmIChwYXJlbnQuJHZub2RlICYmIHBhcmVudC4kdm5vZGUuZGF0YS5yb3V0ZXJWaWV3KSB7XG4gICAgICAgIGRlcHRoKys7XG4gICAgICB9XG4gICAgICBpZiAocGFyZW50Ll9pbmFjdGl2ZSkge1xuICAgICAgICBpbmFjdGl2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcbiAgICB9XG4gICAgZGF0YS5yb3V0ZXJWaWV3RGVwdGggPSBkZXB0aDtcblxuICAgIC8vIHJlbmRlciBwcmV2aW91cyB2aWV3IGlmIHRoZSB0cmVlIGlzIGluYWN0aXZlIGFuZCBrZXB0LWFsaXZlXG4gICAgaWYgKGluYWN0aXZlKSB7XG4gICAgICByZXR1cm4gaChjYWNoZVtuYW1lXSwgZGF0YSwgY2hpbGRyZW4pXG4gICAgfVxuXG4gICAgdmFyIG1hdGNoZWQgPSByb3V0ZS5tYXRjaGVkW2RlcHRoXTtcbiAgICAvLyByZW5kZXIgZW1wdHkgbm9kZSBpZiBubyBtYXRjaGVkIHJvdXRlXG4gICAgaWYgKCFtYXRjaGVkKSB7XG4gICAgICBjYWNoZVtuYW1lXSA9IG51bGw7XG4gICAgICByZXR1cm4gaCgpXG4gICAgfVxuXG4gICAgdmFyIGNvbXBvbmVudCA9IGNhY2hlW25hbWVdID0gbWF0Y2hlZC5jb21wb25lbnRzW25hbWVdO1xuXG4gICAgLy8gYXR0YWNoIGluc3RhbmNlIHJlZ2lzdHJhdGlvbiBob29rXG4gICAgLy8gdGhpcyB3aWxsIGJlIGNhbGxlZCBpbiB0aGUgaW5zdGFuY2UncyBpbmplY3RlZCBsaWZlY3ljbGUgaG9va3NcbiAgICBkYXRhLnJlZ2lzdGVyUm91dGVJbnN0YW5jZSA9IGZ1bmN0aW9uICh2bSwgdmFsKSB7XG4gICAgICAvLyB2YWwgY291bGQgYmUgdW5kZWZpbmVkIGZvciB1bnJlZ2lzdHJhdGlvblxuICAgICAgdmFyIGN1cnJlbnQgPSBtYXRjaGVkLmluc3RhbmNlc1tuYW1lXTtcbiAgICAgIGlmIChcbiAgICAgICAgKHZhbCAmJiBjdXJyZW50ICE9PSB2bSkgfHxcbiAgICAgICAgKCF2YWwgJiYgY3VycmVudCA9PT0gdm0pXG4gICAgICApIHtcbiAgICAgICAgbWF0Y2hlZC5pbnN0YW5jZXNbbmFtZV0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gYWxzbyByZWdpc3RlciBpbnN0YW5jZSBpbiBwcmVwYXRjaCBob29rXG4gICAgLy8gaW4gY2FzZSB0aGUgc2FtZSBjb21wb25lbnQgaW5zdGFuY2UgaXMgcmV1c2VkIGFjcm9zcyBkaWZmZXJlbnQgcm91dGVzXG4gICAgOyhkYXRhLmhvb2sgfHwgKGRhdGEuaG9vayA9IHt9KSkucHJlcGF0Y2ggPSBmdW5jdGlvbiAoXywgdm5vZGUpIHtcbiAgICAgIG1hdGNoZWQuaW5zdGFuY2VzW25hbWVdID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7XG4gICAgfTtcblxuICAgIC8vIHJlc29sdmUgcHJvcHNcbiAgICB2YXIgcHJvcHNUb1Bhc3MgPSBkYXRhLnByb3BzID0gcmVzb2x2ZVByb3BzKHJvdXRlLCBtYXRjaGVkLnByb3BzICYmIG1hdGNoZWQucHJvcHNbbmFtZV0pO1xuICAgIGlmIChwcm9wc1RvUGFzcykge1xuICAgICAgLy8gY2xvbmUgdG8gcHJldmVudCBtdXRhdGlvblxuICAgICAgcHJvcHNUb1Bhc3MgPSBkYXRhLnByb3BzID0gZXh0ZW5kKHt9LCBwcm9wc1RvUGFzcyk7XG4gICAgICAvLyBwYXNzIG5vbi1kZWNsYXJlZCBwcm9wcyBhcyBhdHRyc1xuICAgICAgdmFyIGF0dHJzID0gZGF0YS5hdHRycyA9IGRhdGEuYXR0cnMgfHwge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHNUb1Bhc3MpIHtcbiAgICAgICAgaWYgKCFjb21wb25lbnQucHJvcHMgfHwgIShrZXkgaW4gY29tcG9uZW50LnByb3BzKSkge1xuICAgICAgICAgIGF0dHJzW2tleV0gPSBwcm9wc1RvUGFzc1trZXldO1xuICAgICAgICAgIGRlbGV0ZSBwcm9wc1RvUGFzc1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGgoY29tcG9uZW50LCBkYXRhLCBjaGlsZHJlbilcbiAgfVxufTtcblxuZnVuY3Rpb24gcmVzb2x2ZVByb3BzIChyb3V0ZSwgY29uZmlnKSB7XG4gIHN3aXRjaCAodHlwZW9mIGNvbmZpZykge1xuICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICByZXR1cm5cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAgcmV0dXJuIGNvbmZpZ1xuICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgIHJldHVybiBjb25maWcocm91dGUpXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gY29uZmlnID8gcm91dGUucGFyYW1zIDogdW5kZWZpbmVkXG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgXCJwcm9wcyBpbiBcXFwiXCIgKyAocm91dGUucGF0aCkgKyBcIlxcXCIgaXMgYSBcIiArICh0eXBlb2YgY29uZmlnKSArIFwiLCBcIiArXG4gICAgICAgICAgXCJleHBlY3RpbmcgYW4gb2JqZWN0LCBmdW5jdGlvbiBvciBib29sZWFuLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZXh0ZW5kICh0bywgZnJvbSkge1xuICBmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuICAgIHRvW2tleV0gPSBmcm9tW2tleV07XG4gIH1cbiAgcmV0dXJuIHRvXG59XG5cbi8qICAqL1xuXG52YXIgZW5jb2RlUmVzZXJ2ZVJFID0gL1shJygpKl0vZztcbnZhciBlbmNvZGVSZXNlcnZlUmVwbGFjZXIgPSBmdW5jdGlvbiAoYykgeyByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KTsgfTtcbnZhciBjb21tYVJFID0gLyUyQy9nO1xuXG4vLyBmaXhlZCBlbmNvZGVVUklDb21wb25lbnQgd2hpY2ggaXMgbW9yZSBjb25mb3JtYW50IHRvIFJGQzM5ODY6XG4vLyAtIGVzY2FwZXMgWyEnKCkqXVxuLy8gLSBwcmVzZXJ2ZSBjb21tYXNcbnZhciBlbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKVxuICAucmVwbGFjZShlbmNvZGVSZXNlcnZlUkUsIGVuY29kZVJlc2VydmVSZXBsYWNlcilcbiAgLnJlcGxhY2UoY29tbWFSRSwgJywnKTsgfTtcblxudmFyIGRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDtcblxuZnVuY3Rpb24gcmVzb2x2ZVF1ZXJ5IChcbiAgcXVlcnksXG4gIGV4dHJhUXVlcnksXG4gIF9wYXJzZVF1ZXJ5XG4pIHtcbiAgaWYgKCBleHRyYVF1ZXJ5ID09PSB2b2lkIDAgKSBleHRyYVF1ZXJ5ID0ge307XG5cbiAgdmFyIHBhcnNlID0gX3BhcnNlUXVlcnkgfHwgcGFyc2VRdWVyeTtcbiAgdmFyIHBhcnNlZFF1ZXJ5O1xuICB0cnkge1xuICAgIHBhcnNlZFF1ZXJ5ID0gcGFyc2UocXVlcnkgfHwgJycpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGZhbHNlLCBlLm1lc3NhZ2UpO1xuICAgIHBhcnNlZFF1ZXJ5ID0ge307XG4gIH1cbiAgZm9yICh2YXIga2V5IGluIGV4dHJhUXVlcnkpIHtcbiAgICBwYXJzZWRRdWVyeVtrZXldID0gZXh0cmFRdWVyeVtrZXldO1xuICB9XG4gIHJldHVybiBwYXJzZWRRdWVyeVxufVxuXG5mdW5jdGlvbiBwYXJzZVF1ZXJ5IChxdWVyeSkge1xuICB2YXIgcmVzID0ge307XG5cbiAgcXVlcnkgPSBxdWVyeS50cmltKCkucmVwbGFjZSgvXihcXD98I3wmKS8sICcnKTtcblxuICBpZiAoIXF1ZXJ5KSB7XG4gICAgcmV0dXJuIHJlc1xuICB9XG5cbiAgcXVlcnkuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuICAgIHZhciBwYXJ0cyA9IHBhcmFtLnJlcGxhY2UoL1xcKy9nLCAnICcpLnNwbGl0KCc9Jyk7XG4gICAgdmFyIGtleSA9IGRlY29kZShwYXJ0cy5zaGlmdCgpKTtcbiAgICB2YXIgdmFsID0gcGFydHMubGVuZ3RoID4gMFxuICAgICAgPyBkZWNvZGUocGFydHMuam9pbignPScpKVxuICAgICAgOiBudWxsO1xuXG4gICAgaWYgKHJlc1trZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlc1trZXldID0gdmFsO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXNba2V5XSkpIHtcbiAgICAgIHJlc1trZXldLnB1c2godmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzW2tleV0gPSBbcmVzW2tleV0sIHZhbF07XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeVF1ZXJ5IChvYmopIHtcbiAgdmFyIHJlcyA9IG9iaiA/IE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgdmFsID0gb2JqW2tleV07XG5cbiAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cblxuICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBlbmNvZGUoa2V5KVxuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIHZhbC5mb3JFYWNoKGZ1bmN0aW9uICh2YWwyKSB7XG4gICAgICAgIGlmICh2YWwyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsMiA9PT0gbnVsbCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZShrZXkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2YWwyKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKCcmJylcbiAgICB9XG5cbiAgICByZXR1cm4gZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodmFsKVxuICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubGVuZ3RoID4gMDsgfSkuam9pbignJicpIDogbnVsbDtcbiAgcmV0dXJuIHJlcyA/IChcIj9cIiArIHJlcykgOiAnJ1xufVxuXG4vKiAgKi9cblxuXG52YXIgdHJhaWxpbmdTbGFzaFJFID0gL1xcLz8kLztcblxuZnVuY3Rpb24gY3JlYXRlUm91dGUgKFxuICByZWNvcmQsXG4gIGxvY2F0aW9uLFxuICByZWRpcmVjdGVkRnJvbSxcbiAgcm91dGVyXG4pIHtcbiAgdmFyIHN0cmluZ2lmeVF1ZXJ5JCQxID0gcm91dGVyICYmIHJvdXRlci5vcHRpb25zLnN0cmluZ2lmeVF1ZXJ5O1xuXG4gIHZhciBxdWVyeSA9IGxvY2F0aW9uLnF1ZXJ5IHx8IHt9O1xuICB0cnkge1xuICAgIHF1ZXJ5ID0gY2xvbmUocXVlcnkpO1xuICB9IGNhdGNoIChlKSB7fVxuXG4gIHZhciByb3V0ZSA9IHtcbiAgICBuYW1lOiBsb2NhdGlvbi5uYW1lIHx8IChyZWNvcmQgJiYgcmVjb3JkLm5hbWUpLFxuICAgIG1ldGE6IChyZWNvcmQgJiYgcmVjb3JkLm1ldGEpIHx8IHt9LFxuICAgIHBhdGg6IGxvY2F0aW9uLnBhdGggfHwgJy8nLFxuICAgIGhhc2g6IGxvY2F0aW9uLmhhc2ggfHwgJycsXG4gICAgcXVlcnk6IHF1ZXJ5LFxuICAgIHBhcmFtczogbG9jYXRpb24ucGFyYW1zIHx8IHt9LFxuICAgIGZ1bGxQYXRoOiBnZXRGdWxsUGF0aChsb2NhdGlvbiwgc3RyaW5naWZ5UXVlcnkkJDEpLFxuICAgIG1hdGNoZWQ6IHJlY29yZCA/IGZvcm1hdE1hdGNoKHJlY29yZCkgOiBbXVxuICB9O1xuICBpZiAocmVkaXJlY3RlZEZyb20pIHtcbiAgICByb3V0ZS5yZWRpcmVjdGVkRnJvbSA9IGdldEZ1bGxQYXRoKHJlZGlyZWN0ZWRGcm9tLCBzdHJpbmdpZnlRdWVyeSQkMSk7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5mcmVlemUocm91dGUpXG59XG5cbmZ1bmN0aW9uIGNsb25lICh2YWx1ZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUubWFwKGNsb25lKVxuICB9IGVsc2UgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICB2YXIgcmVzID0ge307XG4gICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgICByZXNba2V5XSA9IGNsb25lKHZhbHVlW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cbn1cblxuLy8gdGhlIHN0YXJ0aW5nIHJvdXRlIHRoYXQgcmVwcmVzZW50cyB0aGUgaW5pdGlhbCBzdGF0ZVxudmFyIFNUQVJUID0gY3JlYXRlUm91dGUobnVsbCwge1xuICBwYXRoOiAnLydcbn0pO1xuXG5mdW5jdGlvbiBmb3JtYXRNYXRjaCAocmVjb3JkKSB7XG4gIHZhciByZXMgPSBbXTtcbiAgd2hpbGUgKHJlY29yZCkge1xuICAgIHJlcy51bnNoaWZ0KHJlY29yZCk7XG4gICAgcmVjb3JkID0gcmVjb3JkLnBhcmVudDtcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGdldEZ1bGxQYXRoIChcbiAgcmVmLFxuICBfc3RyaW5naWZ5UXVlcnlcbikge1xuICB2YXIgcGF0aCA9IHJlZi5wYXRoO1xuICB2YXIgcXVlcnkgPSByZWYucXVlcnk7IGlmICggcXVlcnkgPT09IHZvaWQgMCApIHF1ZXJ5ID0ge307XG4gIHZhciBoYXNoID0gcmVmLmhhc2g7IGlmICggaGFzaCA9PT0gdm9pZCAwICkgaGFzaCA9ICcnO1xuXG4gIHZhciBzdHJpbmdpZnkgPSBfc3RyaW5naWZ5UXVlcnkgfHwgc3RyaW5naWZ5UXVlcnk7XG4gIHJldHVybiAocGF0aCB8fCAnLycpICsgc3RyaW5naWZ5KHF1ZXJ5KSArIGhhc2hcbn1cblxuZnVuY3Rpb24gaXNTYW1lUm91dGUgKGEsIGIpIHtcbiAgaWYgKGIgPT09IFNUQVJUKSB7XG4gICAgcmV0dXJuIGEgPT09IGJcbiAgfSBlbHNlIGlmICghYikge1xuICAgIHJldHVybiBmYWxzZVxuICB9IGVsc2UgaWYgKGEucGF0aCAmJiBiLnBhdGgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgYS5wYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnJykgPT09IGIucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJycpICYmXG4gICAgICBhLmhhc2ggPT09IGIuaGFzaCAmJlxuICAgICAgaXNPYmplY3RFcXVhbChhLnF1ZXJ5LCBiLnF1ZXJ5KVxuICAgIClcbiAgfSBlbHNlIGlmIChhLm5hbWUgJiYgYi5uYW1lKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGEubmFtZSA9PT0gYi5uYW1lICYmXG4gICAgICBhLmhhc2ggPT09IGIuaGFzaCAmJlxuICAgICAgaXNPYmplY3RFcXVhbChhLnF1ZXJ5LCBiLnF1ZXJ5KSAmJlxuICAgICAgaXNPYmplY3RFcXVhbChhLnBhcmFtcywgYi5wYXJhbXMpXG4gICAgKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0RXF1YWwgKGEsIGIpIHtcbiAgaWYgKCBhID09PSB2b2lkIDAgKSBhID0ge307XG4gIGlmICggYiA9PT0gdm9pZCAwICkgYiA9IHt9O1xuXG4gIC8vIGhhbmRsZSBudWxsIHZhbHVlICMxNTY2XG4gIGlmICghYSB8fCAhYikgeyByZXR1cm4gYSA9PT0gYiB9XG4gIHZhciBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICB2YXIgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcbiAgaWYgKGFLZXlzLmxlbmd0aCAhPT0gYktleXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgcmV0dXJuIGFLZXlzLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgYVZhbCA9IGFba2V5XTtcbiAgICB2YXIgYlZhbCA9IGJba2V5XTtcbiAgICAvLyBjaGVjayBuZXN0ZWQgZXF1YWxpdHlcbiAgICBpZiAodHlwZW9mIGFWYWwgPT09ICdvYmplY3QnICYmIHR5cGVvZiBiVmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0RXF1YWwoYVZhbCwgYlZhbClcbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyhhVmFsKSA9PT0gU3RyaW5nKGJWYWwpXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGlzSW5jbHVkZWRSb3V0ZSAoY3VycmVudCwgdGFyZ2V0KSB7XG4gIHJldHVybiAoXG4gICAgY3VycmVudC5wYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnLycpLmluZGV4T2YoXG4gICAgICB0YXJnZXQucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJy8nKVxuICAgICkgPT09IDAgJiZcbiAgICAoIXRhcmdldC5oYXNoIHx8IGN1cnJlbnQuaGFzaCA9PT0gdGFyZ2V0Lmhhc2gpICYmXG4gICAgcXVlcnlJbmNsdWRlcyhjdXJyZW50LnF1ZXJ5LCB0YXJnZXQucXVlcnkpXG4gIClcbn1cblxuZnVuY3Rpb24gcXVlcnlJbmNsdWRlcyAoY3VycmVudCwgdGFyZ2V0KSB7XG4gIGZvciAodmFyIGtleSBpbiB0YXJnZXQpIHtcbiAgICBpZiAoIShrZXkgaW4gY3VycmVudCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG4vKiAgKi9cblxuLy8gd29yayBhcm91bmQgd2VpcmQgZmxvdyBidWdcbnZhciB0b1R5cGVzID0gW1N0cmluZywgT2JqZWN0XTtcbnZhciBldmVudFR5cGVzID0gW1N0cmluZywgQXJyYXldO1xuXG52YXIgTGluayA9IHtcbiAgbmFtZTogJ3JvdXRlci1saW5rJyxcbiAgcHJvcHM6IHtcbiAgICB0bzoge1xuICAgICAgdHlwZTogdG9UeXBlcyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICB0YWc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdhJ1xuICAgIH0sXG4gICAgZXhhY3Q6IEJvb2xlYW4sXG4gICAgYXBwZW5kOiBCb29sZWFuLFxuICAgIHJlcGxhY2U6IEJvb2xlYW4sXG4gICAgYWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgICBleGFjdEFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgZXZlbnQ6IHtcbiAgICAgIHR5cGU6IGV2ZW50VHlwZXMsXG4gICAgICBkZWZhdWx0OiAnY2xpY2snXG4gICAgfVxuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoaCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIHJvdXRlciA9IHRoaXMuJHJvdXRlcjtcbiAgICB2YXIgY3VycmVudCA9IHRoaXMuJHJvdXRlO1xuICAgIHZhciByZWYgPSByb3V0ZXIucmVzb2x2ZSh0aGlzLnRvLCBjdXJyZW50LCB0aGlzLmFwcGVuZCk7XG4gICAgdmFyIGxvY2F0aW9uID0gcmVmLmxvY2F0aW9uO1xuICAgIHZhciByb3V0ZSA9IHJlZi5yb3V0ZTtcbiAgICB2YXIgaHJlZiA9IHJlZi5ocmVmO1xuXG4gICAgdmFyIGNsYXNzZXMgPSB7fTtcbiAgICB2YXIgZ2xvYmFsQWN0aXZlQ2xhc3MgPSByb3V0ZXIub3B0aW9ucy5saW5rQWN0aXZlQ2xhc3M7XG4gICAgdmFyIGdsb2JhbEV4YWN0QWN0aXZlQ2xhc3MgPSByb3V0ZXIub3B0aW9ucy5saW5rRXhhY3RBY3RpdmVDbGFzcztcbiAgICAvLyBTdXBwb3J0IGdsb2JhbCBlbXB0eSBhY3RpdmUgY2xhc3NcbiAgICB2YXIgYWN0aXZlQ2xhc3NGYWxsYmFjayA9IGdsb2JhbEFjdGl2ZUNsYXNzID09IG51bGxcbiAgICAgICAgICAgID8gJ3JvdXRlci1saW5rLWFjdGl2ZSdcbiAgICAgICAgICAgIDogZ2xvYmFsQWN0aXZlQ2xhc3M7XG4gICAgdmFyIGV4YWN0QWN0aXZlQ2xhc3NGYWxsYmFjayA9IGdsb2JhbEV4YWN0QWN0aXZlQ2xhc3MgPT0gbnVsbFxuICAgICAgICAgICAgPyAncm91dGVyLWxpbmstZXhhY3QtYWN0aXZlJ1xuICAgICAgICAgICAgOiBnbG9iYWxFeGFjdEFjdGl2ZUNsYXNzO1xuICAgIHZhciBhY3RpdmVDbGFzcyA9IHRoaXMuYWN0aXZlQ2xhc3MgPT0gbnVsbFxuICAgICAgICAgICAgPyBhY3RpdmVDbGFzc0ZhbGxiYWNrXG4gICAgICAgICAgICA6IHRoaXMuYWN0aXZlQ2xhc3M7XG4gICAgdmFyIGV4YWN0QWN0aXZlQ2xhc3MgPSB0aGlzLmV4YWN0QWN0aXZlQ2xhc3MgPT0gbnVsbFxuICAgICAgICAgICAgPyBleGFjdEFjdGl2ZUNsYXNzRmFsbGJhY2tcbiAgICAgICAgICAgIDogdGhpcy5leGFjdEFjdGl2ZUNsYXNzO1xuICAgIHZhciBjb21wYXJlVGFyZ2V0ID0gbG9jYXRpb24ucGF0aFxuICAgICAgPyBjcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbiwgbnVsbCwgcm91dGVyKVxuICAgICAgOiByb3V0ZTtcblxuICAgIGNsYXNzZXNbZXhhY3RBY3RpdmVDbGFzc10gPSBpc1NhbWVSb3V0ZShjdXJyZW50LCBjb21wYXJlVGFyZ2V0KTtcbiAgICBjbGFzc2VzW2FjdGl2ZUNsYXNzXSA9IHRoaXMuZXhhY3RcbiAgICAgID8gY2xhc3Nlc1tleGFjdEFjdGl2ZUNsYXNzXVxuICAgICAgOiBpc0luY2x1ZGVkUm91dGUoY3VycmVudCwgY29tcGFyZVRhcmdldCk7XG5cbiAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZ3VhcmRFdmVudChlKSkge1xuICAgICAgICBpZiAodGhpcyQxLnJlcGxhY2UpIHtcbiAgICAgICAgICByb3V0ZXIucmVwbGFjZShsb2NhdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm91dGVyLnB1c2gobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBvbiA9IHsgY2xpY2s6IGd1YXJkRXZlbnQgfTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmV2ZW50KSkge1xuICAgICAgdGhpcy5ldmVudC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IG9uW2VdID0gaGFuZGxlcjsgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uW3RoaXMuZXZlbnRdID0gaGFuZGxlcjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YSA9IHtcbiAgICAgIGNsYXNzOiBjbGFzc2VzXG4gICAgfTtcblxuICAgIGlmICh0aGlzLnRhZyA9PT0gJ2EnKSB7XG4gICAgICBkYXRhLm9uID0gb247XG4gICAgICBkYXRhLmF0dHJzID0geyBocmVmOiBocmVmIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGZpbmQgdGhlIGZpcnN0IDxhPiBjaGlsZCBhbmQgYXBwbHkgbGlzdGVuZXIgYW5kIGhyZWZcbiAgICAgIHZhciBhID0gZmluZEFuY2hvcih0aGlzLiRzbG90cy5kZWZhdWx0KTtcbiAgICAgIGlmIChhKSB7XG4gICAgICAgIC8vIGluIGNhc2UgdGhlIDxhPiBpcyBhIHN0YXRpYyBub2RlXG4gICAgICAgIGEuaXNTdGF0aWMgPSBmYWxzZTtcbiAgICAgICAgdmFyIGV4dGVuZCA9IF9WdWUudXRpbC5leHRlbmQ7XG4gICAgICAgIHZhciBhRGF0YSA9IGEuZGF0YSA9IGV4dGVuZCh7fSwgYS5kYXRhKTtcbiAgICAgICAgYURhdGEub24gPSBvbjtcbiAgICAgICAgdmFyIGFBdHRycyA9IGEuZGF0YS5hdHRycyA9IGV4dGVuZCh7fSwgYS5kYXRhLmF0dHJzKTtcbiAgICAgICAgYUF0dHJzLmhyZWYgPSBocmVmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZG9lc24ndCBoYXZlIDxhPiBjaGlsZCwgYXBwbHkgbGlzdGVuZXIgdG8gc2VsZlxuICAgICAgICBkYXRhLm9uID0gb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGgodGhpcy50YWcsIGRhdGEsIHRoaXMuJHNsb3RzLmRlZmF1bHQpXG4gIH1cbn07XG5cbmZ1bmN0aW9uIGd1YXJkRXZlbnQgKGUpIHtcbiAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcbiAgaWYgKGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSkgeyByZXR1cm4gfVxuICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7IHJldHVybiB9XG4gIC8vIGRvbid0IHJlZGlyZWN0IG9uIHJpZ2h0IGNsaWNrXG4gIGlmIChlLmJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIGUuYnV0dG9uICE9PSAwKSB7IHJldHVybiB9XG4gIC8vIGRvbid0IHJlZGlyZWN0IGlmIGB0YXJnZXQ9XCJfYmxhbmtcImBcbiAgaWYgKGUuY3VycmVudFRhcmdldCAmJiBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKSB7XG4gICAgdmFyIHRhcmdldCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpO1xuICAgIGlmICgvXFxiX2JsYW5rXFxiL2kudGVzdCh0YXJnZXQpKSB7IHJldHVybiB9XG4gIH1cbiAgLy8gdGhpcyBtYXkgYmUgYSBXZWV4IGV2ZW50IHdoaWNoIGRvZXNuJ3QgaGF2ZSB0aGlzIG1ldGhvZFxuICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBmaW5kQW5jaG9yIChjaGlsZHJlbikge1xuICBpZiAoY2hpbGRyZW4pIHtcbiAgICB2YXIgY2hpbGQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIGlmIChjaGlsZC50YWcgPT09ICdhJykge1xuICAgICAgICByZXR1cm4gY2hpbGRcbiAgICAgIH1cbiAgICAgIGlmIChjaGlsZC5jaGlsZHJlbiAmJiAoY2hpbGQgPSBmaW5kQW5jaG9yKGNoaWxkLmNoaWxkcmVuKSkpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnZhciBfVnVlO1xuXG5mdW5jdGlvbiBpbnN0YWxsIChWdWUpIHtcbiAgaWYgKGluc3RhbGwuaW5zdGFsbGVkICYmIF9WdWUgPT09IFZ1ZSkgeyByZXR1cm4gfVxuICBpbnN0YWxsLmluc3RhbGxlZCA9IHRydWU7XG5cbiAgX1Z1ZSA9IFZ1ZTtcblxuICB2YXIgaXNEZWYgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gdiAhPT0gdW5kZWZpbmVkOyB9O1xuXG4gIHZhciByZWdpc3Rlckluc3RhbmNlID0gZnVuY3Rpb24gKHZtLCBjYWxsVmFsKSB7XG4gICAgdmFyIGkgPSB2bS4kb3B0aW9ucy5fcGFyZW50Vm5vZGU7XG4gICAgaWYgKGlzRGVmKGkpICYmIGlzRGVmKGkgPSBpLmRhdGEpICYmIGlzRGVmKGkgPSBpLnJlZ2lzdGVyUm91dGVJbnN0YW5jZSkpIHtcbiAgICAgIGkodm0sIGNhbGxWYWwpO1xuICAgIH1cbiAgfTtcblxuICBWdWUubWl4aW4oe1xuICAgIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlICgpIHtcbiAgICAgIGlmIChpc0RlZih0aGlzLiRvcHRpb25zLnJvdXRlcikpIHtcbiAgICAgICAgdGhpcy5fcm91dGVyUm9vdCA9IHRoaXM7XG4gICAgICAgIHRoaXMuX3JvdXRlciA9IHRoaXMuJG9wdGlvbnMucm91dGVyO1xuICAgICAgICB0aGlzLl9yb3V0ZXIuaW5pdCh0aGlzKTtcbiAgICAgICAgVnVlLnV0aWwuZGVmaW5lUmVhY3RpdmUodGhpcywgJ19yb3V0ZScsIHRoaXMuX3JvdXRlci5oaXN0b3J5LmN1cnJlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcm91dGVyUm9vdCA9ICh0aGlzLiRwYXJlbnQgJiYgdGhpcy4kcGFyZW50Ll9yb3V0ZXJSb290KSB8fCB0aGlzO1xuICAgICAgfVxuICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCB0aGlzKTtcbiAgICB9LFxuICAgIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkICgpIHtcbiAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcyk7XG4gICAgfVxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRyb3V0ZXInLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkgeyByZXR1cm4gdGhpcy5fcm91dGVyUm9vdC5fcm91dGVyIH1cbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckcm91dGUnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkgeyByZXR1cm4gdGhpcy5fcm91dGVyUm9vdC5fcm91dGUgfVxuICB9KTtcblxuICBWdWUuY29tcG9uZW50KCdyb3V0ZXItdmlldycsIFZpZXcpO1xuICBWdWUuY29tcG9uZW50KCdyb3V0ZXItbGluaycsIExpbmspO1xuXG4gIHZhciBzdHJhdHMgPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztcbiAgLy8gdXNlIHRoZSBzYW1lIGhvb2sgbWVyZ2luZyBzdHJhdGVneSBmb3Igcm91dGUgaG9va3NcbiAgc3RyYXRzLmJlZm9yZVJvdXRlRW50ZXIgPSBzdHJhdHMuYmVmb3JlUm91dGVMZWF2ZSA9IHN0cmF0cy5iZWZvcmVSb3V0ZVVwZGF0ZSA9IHN0cmF0cy5jcmVhdGVkO1xufVxuXG4vKiAgKi9cblxudmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXG4vKiAgKi9cblxuZnVuY3Rpb24gcmVzb2x2ZVBhdGggKFxuICByZWxhdGl2ZSxcbiAgYmFzZSxcbiAgYXBwZW5kXG4pIHtcbiAgdmFyIGZpcnN0Q2hhciA9IHJlbGF0aXZlLmNoYXJBdCgwKTtcbiAgaWYgKGZpcnN0Q2hhciA9PT0gJy8nKSB7XG4gICAgcmV0dXJuIHJlbGF0aXZlXG4gIH1cblxuICBpZiAoZmlyc3RDaGFyID09PSAnPycgfHwgZmlyc3RDaGFyID09PSAnIycpIHtcbiAgICByZXR1cm4gYmFzZSArIHJlbGF0aXZlXG4gIH1cblxuICB2YXIgc3RhY2sgPSBiYXNlLnNwbGl0KCcvJyk7XG5cbiAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNlZ21lbnQgaWY6XG4gIC8vIC0gbm90IGFwcGVuZGluZ1xuICAvLyAtIGFwcGVuZGluZyB0byB0cmFpbGluZyBzbGFzaCAobGFzdCBzZWdtZW50IGlzIGVtcHR5KVxuICBpZiAoIWFwcGVuZCB8fCAhc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0pIHtcbiAgICBzdGFjay5wb3AoKTtcbiAgfVxuXG4gIC8vIHJlc29sdmUgcmVsYXRpdmUgcGF0aFxuICB2YXIgc2VnbWVudHMgPSByZWxhdGl2ZS5yZXBsYWNlKC9eXFwvLywgJycpLnNwbGl0KCcvJyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuICAgIGlmIChzZWdtZW50ID09PSAnLi4nKSB7XG4gICAgICBzdGFjay5wb3AoKTtcbiAgICB9IGVsc2UgaWYgKHNlZ21lbnQgIT09ICcuJykge1xuICAgICAgc3RhY2sucHVzaChzZWdtZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyBlbnN1cmUgbGVhZGluZyBzbGFzaFxuICBpZiAoc3RhY2tbMF0gIT09ICcnKSB7XG4gICAgc3RhY2sudW5zaGlmdCgnJyk7XG4gIH1cblxuICByZXR1cm4gc3RhY2suam9pbignLycpXG59XG5cbmZ1bmN0aW9uIHBhcnNlUGF0aCAocGF0aCkge1xuICB2YXIgaGFzaCA9ICcnO1xuICB2YXIgcXVlcnkgPSAnJztcblxuICB2YXIgaGFzaEluZGV4ID0gcGF0aC5pbmRleE9mKCcjJyk7XG4gIGlmIChoYXNoSW5kZXggPj0gMCkge1xuICAgIGhhc2ggPSBwYXRoLnNsaWNlKGhhc2hJbmRleCk7XG4gICAgcGF0aCA9IHBhdGguc2xpY2UoMCwgaGFzaEluZGV4KTtcbiAgfVxuXG4gIHZhciBxdWVyeUluZGV4ID0gcGF0aC5pbmRleE9mKCc/Jyk7XG4gIGlmIChxdWVyeUluZGV4ID49IDApIHtcbiAgICBxdWVyeSA9IHBhdGguc2xpY2UocXVlcnlJbmRleCArIDEpO1xuICAgIHBhdGggPSBwYXRoLnNsaWNlKDAsIHF1ZXJ5SW5kZXgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRoOiBwYXRoLFxuICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICBoYXNoOiBoYXNoXG4gIH1cbn1cblxuZnVuY3Rpb24gY2xlYW5QYXRoIChwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcL1xcLy9nLCAnLycpXG59XG5cbnZhciBpc2FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYHBhdGhUb1JlZ2V4cGAuXG4gKi9cbnZhciBwYXRoVG9SZWdleHBfMSA9IHBhdGhUb1JlZ2V4cDtcbnZhciBwYXJzZV8xID0gcGFyc2U7XG52YXIgY29tcGlsZV8xID0gY29tcGlsZTtcbnZhciB0b2tlbnNUb0Z1bmN0aW9uXzEgPSB0b2tlbnNUb0Z1bmN0aW9uO1xudmFyIHRva2Vuc1RvUmVnRXhwXzEgPSB0b2tlbnNUb1JlZ0V4cDtcblxuLyoqXG4gKiBUaGUgbWFpbiBwYXRoIG1hdGNoaW5nIHJlZ2V4cCB1dGlsaXR5LlxuICpcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbnZhciBQQVRIX1JFR0VYUCA9IG5ldyBSZWdFeHAoW1xuICAvLyBNYXRjaCBlc2NhcGVkIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBvdGhlcndpc2UgYXBwZWFyIGluIGZ1dHVyZSBtYXRjaGVzLlxuICAvLyBUaGlzIGFsbG93cyB0aGUgdXNlciB0byBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIHRoYXQgd29uJ3QgdHJhbnNmb3JtLlxuICAnKFxcXFxcXFxcLiknLFxuICAvLyBNYXRjaCBFeHByZXNzLXN0eWxlIHBhcmFtZXRlcnMgYW5kIHVuLW5hbWVkIHBhcmFtZXRlcnMgd2l0aCBhIHByZWZpeFxuICAvLyBhbmQgb3B0aW9uYWwgc3VmZml4ZXMuIE1hdGNoZXMgYXBwZWFyIGFzOlxuICAvL1xuICAvLyBcIi86dGVzdChcXFxcZCspP1wiID0+IFtcIi9cIiwgXCJ0ZXN0XCIsIFwiXFxkK1wiLCB1bmRlZmluZWQsIFwiP1wiLCB1bmRlZmluZWRdXG4gIC8vIFwiL3JvdXRlKFxcXFxkKylcIiAgPT4gW3VuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFwiXFxkK1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZF1cbiAgLy8gXCIvKlwiICAgICAgICAgICAgPT4gW1wiL1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFwiKlwiXVxuICAnKFtcXFxcLy5dKT8oPzooPzpcXFxcOihcXFxcdyspKD86XFxcXCgoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKV0pKylcXFxcKSk/fFxcXFwoKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKCldKSspXFxcXCkpKFsrKj9dKT98KFxcXFwqKSknXG5dLmpvaW4oJ3wnKSwgJ2cnKTtcblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBmb3IgdGhlIHJhdyB0b2tlbnMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgc3RyXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshQXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlIChzdHIsIG9wdGlvbnMpIHtcbiAgdmFyIHRva2VucyA9IFtdO1xuICB2YXIga2V5ID0gMDtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIHBhdGggPSAnJztcbiAgdmFyIGRlZmF1bHREZWxpbWl0ZXIgPSBvcHRpb25zICYmIG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcvJztcbiAgdmFyIHJlcztcblxuICB3aGlsZSAoKHJlcyA9IFBBVEhfUkVHRVhQLmV4ZWMoc3RyKSkgIT0gbnVsbCkge1xuICAgIHZhciBtID0gcmVzWzBdO1xuICAgIHZhciBlc2NhcGVkID0gcmVzWzFdO1xuICAgIHZhciBvZmZzZXQgPSByZXMuaW5kZXg7XG4gICAgcGF0aCArPSBzdHIuc2xpY2UoaW5kZXgsIG9mZnNldCk7XG4gICAgaW5kZXggPSBvZmZzZXQgKyBtLmxlbmd0aDtcblxuICAgIC8vIElnbm9yZSBhbHJlYWR5IGVzY2FwZWQgc2VxdWVuY2VzLlxuICAgIGlmIChlc2NhcGVkKSB7XG4gICAgICBwYXRoICs9IGVzY2FwZWRbMV07XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIHZhciBuZXh0ID0gc3RyW2luZGV4XTtcbiAgICB2YXIgcHJlZml4ID0gcmVzWzJdO1xuICAgIHZhciBuYW1lID0gcmVzWzNdO1xuICAgIHZhciBjYXB0dXJlID0gcmVzWzRdO1xuICAgIHZhciBncm91cCA9IHJlc1s1XTtcbiAgICB2YXIgbW9kaWZpZXIgPSByZXNbNl07XG4gICAgdmFyIGFzdGVyaXNrID0gcmVzWzddO1xuXG4gICAgLy8gUHVzaCB0aGUgY3VycmVudCBwYXRoIG9udG8gdGhlIHRva2Vucy5cbiAgICBpZiAocGF0aCkge1xuICAgICAgdG9rZW5zLnB1c2gocGF0aCk7XG4gICAgICBwYXRoID0gJyc7XG4gICAgfVxuXG4gICAgdmFyIHBhcnRpYWwgPSBwcmVmaXggIT0gbnVsbCAmJiBuZXh0ICE9IG51bGwgJiYgbmV4dCAhPT0gcHJlZml4O1xuICAgIHZhciByZXBlYXQgPSBtb2RpZmllciA9PT0gJysnIHx8IG1vZGlmaWVyID09PSAnKic7XG4gICAgdmFyIG9wdGlvbmFsID0gbW9kaWZpZXIgPT09ICc/JyB8fCBtb2RpZmllciA9PT0gJyonO1xuICAgIHZhciBkZWxpbWl0ZXIgPSByZXNbMl0gfHwgZGVmYXVsdERlbGltaXRlcjtcbiAgICB2YXIgcGF0dGVybiA9IGNhcHR1cmUgfHwgZ3JvdXA7XG5cbiAgICB0b2tlbnMucHVzaCh7XG4gICAgICBuYW1lOiBuYW1lIHx8IGtleSsrLFxuICAgICAgcHJlZml4OiBwcmVmaXggfHwgJycsXG4gICAgICBkZWxpbWl0ZXI6IGRlbGltaXRlcixcbiAgICAgIG9wdGlvbmFsOiBvcHRpb25hbCxcbiAgICAgIHJlcGVhdDogcmVwZWF0LFxuICAgICAgcGFydGlhbDogcGFydGlhbCxcbiAgICAgIGFzdGVyaXNrOiAhIWFzdGVyaXNrLFxuICAgICAgcGF0dGVybjogcGF0dGVybiA/IGVzY2FwZUdyb3VwKHBhdHRlcm4pIDogKGFzdGVyaXNrID8gJy4qJyA6ICdbXicgKyBlc2NhcGVTdHJpbmcoZGVsaW1pdGVyKSArICddKz8nKVxuICAgIH0pO1xuICB9XG5cbiAgLy8gTWF0Y2ggYW55IGNoYXJhY3RlcnMgc3RpbGwgcmVtYWluaW5nLlxuICBpZiAoaW5kZXggPCBzdHIubGVuZ3RoKSB7XG4gICAgcGF0aCArPSBzdHIuc3Vic3RyKGluZGV4KTtcbiAgfVxuXG4gIC8vIElmIHRoZSBwYXRoIGV4aXN0cywgcHVzaCBpdCBvbnRvIHRoZSBlbmQuXG4gIGlmIChwYXRoKSB7XG4gICAgdG9rZW5zLnB1c2gocGF0aCk7XG4gIH1cblxuICByZXR1cm4gdG9rZW5zXG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHN0cmluZyB0byBhIHRlbXBsYXRlIGZ1bmN0aW9uIGZvciB0aGUgcGF0aC5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgICAgIHN0clxuICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICAgICBvcHRpb25zXG4gKiBAcmV0dXJuIHshZnVuY3Rpb24oT2JqZWN0PSwgT2JqZWN0PSl9XG4gKi9cbmZ1bmN0aW9uIGNvbXBpbGUgKHN0ciwgb3B0aW9ucykge1xuICByZXR1cm4gdG9rZW5zVG9GdW5jdGlvbihwYXJzZShzdHIsIG9wdGlvbnMpKVxufVxuXG4vKipcbiAqIFByZXR0aWVyIGVuY29kaW5nIG9mIFVSSSBwYXRoIHNlZ21lbnRzLlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ31cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5IChzdHIpIHtcbiAgcmV0dXJuIGVuY29kZVVSSShzdHIpLnJlcGxhY2UoL1tcXC8/I10vZywgZnVuY3Rpb24gKGMpIHtcbiAgICByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG4gIH0pXG59XG5cbi8qKlxuICogRW5jb2RlIHRoZSBhc3RlcmlzayBwYXJhbWV0ZXIuIFNpbWlsYXIgdG8gYHByZXR0eWAsIGJ1dCBhbGxvd3Mgc2xhc2hlcy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZUFzdGVyaXNrIChzdHIpIHtcbiAgcmV0dXJuIGVuY29kZVVSSShzdHIpLnJlcGxhY2UoL1s/I10vZywgZnVuY3Rpb24gKGMpIHtcbiAgICByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG4gIH0pXG59XG5cbi8qKlxuICogRXhwb3NlIGEgbWV0aG9kIGZvciB0cmFuc2Zvcm1pbmcgdG9rZW5zIGludG8gdGhlIHBhdGggZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHRva2Vuc1RvRnVuY3Rpb24gKHRva2Vucykge1xuICAvLyBDb21waWxlIGFsbCB0aGUgdG9rZW5zIGludG8gcmVnZXhwcy5cbiAgdmFyIG1hdGNoZXMgPSBuZXcgQXJyYXkodG9rZW5zLmxlbmd0aCk7XG5cbiAgLy8gQ29tcGlsZSBhbGwgdGhlIHBhdHRlcm5zIGJlZm9yZSBjb21waWxhdGlvbi5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodHlwZW9mIHRva2Vuc1tpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG1hdGNoZXNbaV0gPSBuZXcgUmVnRXhwKCdeKD86JyArIHRva2Vuc1tpXS5wYXR0ZXJuICsgJykkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChvYmosIG9wdHMpIHtcbiAgICB2YXIgcGF0aCA9ICcnO1xuICAgIHZhciBkYXRhID0gb2JqIHx8IHt9O1xuICAgIHZhciBvcHRpb25zID0gb3B0cyB8fCB7fTtcbiAgICB2YXIgZW5jb2RlID0gb3B0aW9ucy5wcmV0dHkgPyBlbmNvZGVVUklDb21wb25lbnRQcmV0dHkgOiBlbmNvZGVVUklDb21wb25lbnQ7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xuXG4gICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXRoICs9IHRva2VuO1xuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIHZhciB2YWx1ZSA9IGRhdGFbdG9rZW4ubmFtZV07XG4gICAgICB2YXIgc2VnbWVudDtcblxuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7XG4gICAgICAgICAgLy8gUHJlcGVuZCBwYXJ0aWFsIHNlZ21lbnQgcHJlZml4ZXMuXG4gICAgICAgICAgaWYgKHRva2VuLnBhcnRpYWwpIHtcbiAgICAgICAgICAgIHBhdGggKz0gdG9rZW4ucHJlZml4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBiZSBkZWZpbmVkJylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNhcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKCF0b2tlbi5yZXBlYXQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG5vdCByZXBlYXQsIGJ1dCByZWNlaXZlZCBgJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICdgJylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbm90IGJlIGVtcHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbHVlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgc2VnbWVudCA9IGVuY29kZSh2YWx1ZVtqXSk7XG5cbiAgICAgICAgICBpZiAoIW1hdGNoZXNbaV0udGVzdChzZWdtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYWxsIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbWF0Y2ggXCInICsgdG9rZW4ucGF0dGVybiArICdcIiwgYnV0IHJlY2VpdmVkIGAnICsgSlNPTi5zdHJpbmdpZnkoc2VnbWVudCkgKyAnYCcpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcGF0aCArPSAoaiA9PT0gMCA/IHRva2VuLnByZWZpeCA6IHRva2VuLmRlbGltaXRlcikgKyBzZWdtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgc2VnbWVudCA9IHRva2VuLmFzdGVyaXNrID8gZW5jb2RlQXN0ZXJpc2sodmFsdWUpIDogZW5jb2RlKHZhbHVlKTtcblxuICAgICAgaWYgKCFtYXRjaGVzW2ldLnRlc3Qoc2VnbWVudCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBtYXRjaCBcIicgKyB0b2tlbi5wYXR0ZXJuICsgJ1wiLCBidXQgcmVjZWl2ZWQgXCInICsgc2VnbWVudCArICdcIicpXG4gICAgICB9XG5cbiAgICAgIHBhdGggKz0gdG9rZW4ucHJlZml4ICsgc2VnbWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aFxuICB9XG59XG5cbi8qKlxuICogRXNjYXBlIGEgcmVndWxhciBleHByZXNzaW9uIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmcgKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbLisqPz1eIToke30oKVtcXF18XFwvXFxcXF0pL2csICdcXFxcJDEnKVxufVxuXG4vKipcbiAqIEVzY2FwZSB0aGUgY2FwdHVyaW5nIGdyb3VwIGJ5IGVzY2FwaW5nIHNwZWNpYWwgY2hhcmFjdGVycyBhbmQgbWVhbmluZy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGdyb3VwXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVzY2FwZUdyb3VwIChncm91cCkge1xuICByZXR1cm4gZ3JvdXAucmVwbGFjZSgvKFs9ITokXFwvKCldKS9nLCAnXFxcXCQxJylcbn1cblxuLyoqXG4gKiBBdHRhY2ggdGhlIGtleXMgYXMgYSBwcm9wZXJ0eSBvZiB0aGUgcmVnZXhwLlxuICpcbiAqIEBwYXJhbSAgeyFSZWdFeHB9IHJlXG4gKiBAcGFyYW0gIHtBcnJheX0gICBrZXlzXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiBhdHRhY2hLZXlzIChyZSwga2V5cykge1xuICByZS5rZXlzID0ga2V5cztcbiAgcmV0dXJuIHJlXG59XG5cbi8qKlxuICogR2V0IHRoZSBmbGFncyBmb3IgYSByZWdleHAgZnJvbSB0aGUgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZmxhZ3MgKG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMuc2Vuc2l0aXZlID8gJycgOiAnaSdcbn1cblxuLyoqXG4gKiBQdWxsIG91dCBrZXlzIGZyb20gYSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IVJlZ0V4cH0gcGF0aFxuICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gcmVnZXhwVG9SZWdleHAgKHBhdGgsIGtleXMpIHtcbiAgLy8gVXNlIGEgbmVnYXRpdmUgbG9va2FoZWFkIHRvIG1hdGNoIG9ubHkgY2FwdHVyaW5nIGdyb3Vwcy5cbiAgdmFyIGdyb3VwcyA9IHBhdGguc291cmNlLm1hdGNoKC9cXCgoPyFcXD8pL2cpO1xuXG4gIGlmIChncm91cHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5cy5wdXNoKHtcbiAgICAgICAgbmFtZTogaSxcbiAgICAgICAgcHJlZml4OiBudWxsLFxuICAgICAgICBkZWxpbWl0ZXI6IG51bGwsXG4gICAgICAgIG9wdGlvbmFsOiBmYWxzZSxcbiAgICAgICAgcmVwZWF0OiBmYWxzZSxcbiAgICAgICAgcGFydGlhbDogZmFsc2UsXG4gICAgICAgIGFzdGVyaXNrOiBmYWxzZSxcbiAgICAgICAgcGF0dGVybjogbnVsbFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGF0dGFjaEtleXMocGF0aCwga2V5cylcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm0gYW4gYXJyYXkgaW50byBhIHJlZ2V4cC5cbiAqXG4gKiBAcGFyYW0gIHshQXJyYXl9ICBwYXRoXG4gKiBAcGFyYW0gIHtBcnJheX0gICBrZXlzXG4gKiBAcGFyYW0gIHshT2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiBhcnJheVRvUmVnZXhwIChwYXRoLCBrZXlzLCBvcHRpb25zKSB7XG4gIHZhciBwYXJ0cyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIHBhcnRzLnB1c2gocGF0aFRvUmVnZXhwKHBhdGhbaV0sIGtleXMsIG9wdGlvbnMpLnNvdXJjZSk7XG4gIH1cblxuICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgnKD86JyArIHBhcnRzLmpvaW4oJ3wnKSArICcpJywgZmxhZ3Mob3B0aW9ucykpO1xuXG4gIHJldHVybiBhdHRhY2hLZXlzKHJlZ2V4cCwga2V5cylcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBwYXRoIHJlZ2V4cCBmcm9tIHN0cmluZyBpbnB1dC5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICBwYXRoXG4gKiBAcGFyYW0gIHshQXJyYXl9ICBrZXlzXG4gKiBAcGFyYW0gIHshT2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiBzdHJpbmdUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICByZXR1cm4gdG9rZW5zVG9SZWdFeHAocGFyc2UocGF0aCwgb3B0aW9ucyksIGtleXMsIG9wdGlvbnMpXG59XG5cbi8qKlxuICogRXhwb3NlIGEgZnVuY3Rpb24gZm9yIHRha2luZyB0b2tlbnMgYW5kIHJldHVybmluZyBhIFJlZ0V4cC5cbiAqXG4gKiBAcGFyYW0gIHshQXJyYXl9ICAgICAgICAgIHRva2Vuc1xuICogQHBhcmFtICB7KEFycmF5fE9iamVjdCk9fSBrZXlzXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSAgICAgICAgIG9wdGlvbnNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9cbmZ1bmN0aW9uIHRva2Vuc1RvUmVnRXhwICh0b2tlbnMsIGtleXMsIG9wdGlvbnMpIHtcbiAgaWYgKCFpc2FycmF5KGtleXMpKSB7XG4gICAgb3B0aW9ucyA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGtleXMgfHwgb3B0aW9ucyk7XG4gICAga2V5cyA9IFtdO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgdmFyIHN0cmljdCA9IG9wdGlvbnMuc3RyaWN0O1xuICB2YXIgZW5kID0gb3B0aW9ucy5lbmQgIT09IGZhbHNlO1xuICB2YXIgcm91dGUgPSAnJztcblxuICAvLyBJdGVyYXRlIG92ZXIgdGhlIHRva2VucyBhbmQgY3JlYXRlIG91ciByZWdleHAgc3RyaW5nLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXTtcblxuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICByb3V0ZSArPSBlc2NhcGVTdHJpbmcodG9rZW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcHJlZml4ID0gZXNjYXBlU3RyaW5nKHRva2VuLnByZWZpeCk7XG4gICAgICB2YXIgY2FwdHVyZSA9ICcoPzonICsgdG9rZW4ucGF0dGVybiArICcpJztcblxuICAgICAga2V5cy5wdXNoKHRva2VuKTtcblxuICAgICAgaWYgKHRva2VuLnJlcGVhdCkge1xuICAgICAgICBjYXB0dXJlICs9ICcoPzonICsgcHJlZml4ICsgY2FwdHVyZSArICcpKic7XG4gICAgICB9XG5cbiAgICAgIGlmICh0b2tlbi5vcHRpb25hbCkge1xuICAgICAgICBpZiAoIXRva2VuLnBhcnRpYWwpIHtcbiAgICAgICAgICBjYXB0dXJlID0gJyg/OicgKyBwcmVmaXggKyAnKCcgKyBjYXB0dXJlICsgJykpPyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FwdHVyZSA9IHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKT8nO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYXB0dXJlID0gcHJlZml4ICsgJygnICsgY2FwdHVyZSArICcpJztcbiAgICAgIH1cblxuICAgICAgcm91dGUgKz0gY2FwdHVyZTtcbiAgICB9XG4gIH1cblxuICB2YXIgZGVsaW1pdGVyID0gZXNjYXBlU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcvJyk7XG4gIHZhciBlbmRzV2l0aERlbGltaXRlciA9IHJvdXRlLnNsaWNlKC1kZWxpbWl0ZXIubGVuZ3RoKSA9PT0gZGVsaW1pdGVyO1xuXG4gIC8vIEluIG5vbi1zdHJpY3QgbW9kZSB3ZSBhbGxvdyBhIHNsYXNoIGF0IHRoZSBlbmQgb2YgbWF0Y2guIElmIHRoZSBwYXRoIHRvXG4gIC8vIG1hdGNoIGFscmVhZHkgZW5kcyB3aXRoIGEgc2xhc2gsIHdlIHJlbW92ZSBpdCBmb3IgY29uc2lzdGVuY3kuIFRoZSBzbGFzaFxuICAvLyBpcyB2YWxpZCBhdCB0aGUgZW5kIG9mIGEgcGF0aCBtYXRjaCwgbm90IGluIHRoZSBtaWRkbGUuIFRoaXMgaXMgaW1wb3J0YW50XG4gIC8vIGluIG5vbi1lbmRpbmcgbW9kZSwgd2hlcmUgXCIvdGVzdC9cIiBzaG91bGRuJ3QgbWF0Y2ggXCIvdGVzdC8vcm91dGVcIi5cbiAgaWYgKCFzdHJpY3QpIHtcbiAgICByb3V0ZSA9IChlbmRzV2l0aERlbGltaXRlciA/IHJvdXRlLnNsaWNlKDAsIC1kZWxpbWl0ZXIubGVuZ3RoKSA6IHJvdXRlKSArICcoPzonICsgZGVsaW1pdGVyICsgJyg/PSQpKT8nO1xuICB9XG5cbiAgaWYgKGVuZCkge1xuICAgIHJvdXRlICs9ICckJztcbiAgfSBlbHNlIHtcbiAgICAvLyBJbiBub24tZW5kaW5nIG1vZGUsIHdlIG5lZWQgdGhlIGNhcHR1cmluZyBncm91cHMgdG8gbWF0Y2ggYXMgbXVjaCBhc1xuICAgIC8vIHBvc3NpYmxlIGJ5IHVzaW5nIGEgcG9zaXRpdmUgbG9va2FoZWFkIHRvIHRoZSBlbmQgb3IgbmV4dCBwYXRoIHNlZ21lbnQuXG4gICAgcm91dGUgKz0gc3RyaWN0ICYmIGVuZHNXaXRoRGVsaW1pdGVyID8gJycgOiAnKD89JyArIGRlbGltaXRlciArICd8JCknO1xuICB9XG5cbiAgcmV0dXJuIGF0dGFjaEtleXMobmV3IFJlZ0V4cCgnXicgKyByb3V0ZSwgZmxhZ3Mob3B0aW9ucykpLCBrZXlzKVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSB0aGUgZ2l2ZW4gcGF0aCBzdHJpbmcsIHJldHVybmluZyBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAqXG4gKiBBbiBlbXB0eSBhcnJheSBjYW4gYmUgcGFzc2VkIGluIGZvciB0aGUga2V5cywgd2hpY2ggd2lsbCBob2xkIHRoZVxuICogcGxhY2Vob2xkZXIga2V5IGRlc2NyaXB0aW9ucy4gRm9yIGV4YW1wbGUsIHVzaW5nIGAvdXNlci86aWRgLCBga2V5c2Agd2lsbFxuICogY29udGFpbiBgW3sgbmFtZTogJ2lkJywgZGVsaW1pdGVyOiAnLycsIG9wdGlvbmFsOiBmYWxzZSwgcmVwZWF0OiBmYWxzZSB9XWAuXG4gKlxuICogQHBhcmFtICB7KHN0cmluZ3xSZWdFeHB8QXJyYXkpfSBwYXRoXG4gKiBAcGFyYW0gIHsoQXJyYXl8T2JqZWN0KT19ICAgICAgIGtleXNcbiAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgICAgICAgb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gcGF0aFRvUmVnZXhwIChwYXRoLCBrZXlzLCBvcHRpb25zKSB7XG4gIGlmICghaXNhcnJheShrZXlzKSkge1xuICAgIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChrZXlzIHx8IG9wdGlvbnMpO1xuICAgIGtleXMgPSBbXTtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGlmIChwYXRoIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgcmV0dXJuIHJlZ2V4cFRvUmVnZXhwKHBhdGgsIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cykpXG4gIH1cblxuICBpZiAoaXNhcnJheShwYXRoKSkge1xuICAgIHJldHVybiBhcnJheVRvUmVnZXhwKC8qKiBAdHlwZSB7IUFycmF5fSAqLyAocGF0aCksIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cyksIG9wdGlvbnMpXG4gIH1cblxuICByZXR1cm4gc3RyaW5nVG9SZWdleHAoLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwYXRoKSwgLyoqIEB0eXBlIHshQXJyYXl9ICovIChrZXlzKSwgb3B0aW9ucylcbn1cblxucGF0aFRvUmVnZXhwXzEucGFyc2UgPSBwYXJzZV8xO1xucGF0aFRvUmVnZXhwXzEuY29tcGlsZSA9IGNvbXBpbGVfMTtcbnBhdGhUb1JlZ2V4cF8xLnRva2Vuc1RvRnVuY3Rpb24gPSB0b2tlbnNUb0Z1bmN0aW9uXzE7XG5wYXRoVG9SZWdleHBfMS50b2tlbnNUb1JlZ0V4cCA9IHRva2Vuc1RvUmVnRXhwXzE7XG5cbi8qICAqL1xuXG4vLyAkZmxvdy1kaXNhYmxlLWxpbmVcbnZhciByZWdleHBDb21waWxlQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5mdW5jdGlvbiBmaWxsUGFyYW1zIChcbiAgcGF0aCxcbiAgcGFyYW1zLFxuICByb3V0ZU1zZ1xuKSB7XG4gIHRyeSB7XG4gICAgdmFyIGZpbGxlciA9XG4gICAgICByZWdleHBDb21waWxlQ2FjaGVbcGF0aF0gfHxcbiAgICAgIChyZWdleHBDb21waWxlQ2FjaGVbcGF0aF0gPSBwYXRoVG9SZWdleHBfMS5jb21waWxlKHBhdGgpKTtcbiAgICByZXR1cm4gZmlsbGVyKHBhcmFtcyB8fCB7fSwgeyBwcmV0dHk6IHRydWUgfSlcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuKGZhbHNlLCAoXCJtaXNzaW5nIHBhcmFtIGZvciBcIiArIHJvdXRlTXNnICsgXCI6IFwiICsgKGUubWVzc2FnZSkpKTtcbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cbn1cblxuLyogICovXG5cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlTWFwIChcbiAgcm91dGVzLFxuICBvbGRQYXRoTGlzdCxcbiAgb2xkUGF0aE1hcCxcbiAgb2xkTmFtZU1hcFxuKSB7XG4gIC8vIHRoZSBwYXRoIGxpc3QgaXMgdXNlZCB0byBjb250cm9sIHBhdGggbWF0Y2hpbmcgcHJpb3JpdHlcbiAgdmFyIHBhdGhMaXN0ID0gb2xkUGF0aExpc3QgfHwgW107XG4gIC8vICRmbG93LWRpc2FibGUtbGluZVxuICB2YXIgcGF0aE1hcCA9IG9sZFBhdGhNYXAgfHwgT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgLy8gJGZsb3ctZGlzYWJsZS1saW5lXG4gIHZhciBuYW1lTWFwID0gb2xkTmFtZU1hcCB8fCBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgIGFkZFJvdXRlUmVjb3JkKHBhdGhMaXN0LCBwYXRoTWFwLCBuYW1lTWFwLCByb3V0ZSk7XG4gIH0pO1xuXG4gIC8vIGVuc3VyZSB3aWxkY2FyZCByb3V0ZXMgYXJlIGFsd2F5cyBhdCB0aGUgZW5kXG4gIGZvciAodmFyIGkgPSAwLCBsID0gcGF0aExpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHBhdGhMaXN0W2ldID09PSAnKicpIHtcbiAgICAgIHBhdGhMaXN0LnB1c2gocGF0aExpc3Quc3BsaWNlKGksIDEpWzBdKTtcbiAgICAgIGwtLTtcbiAgICAgIGktLTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBhdGhMaXN0OiBwYXRoTGlzdCxcbiAgICBwYXRoTWFwOiBwYXRoTWFwLFxuICAgIG5hbWVNYXA6IG5hbWVNYXBcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRSb3V0ZVJlY29yZCAoXG4gIHBhdGhMaXN0LFxuICBwYXRoTWFwLFxuICBuYW1lTWFwLFxuICByb3V0ZSxcbiAgcGFyZW50LFxuICBtYXRjaEFzXG4pIHtcbiAgdmFyIHBhdGggPSByb3V0ZS5wYXRoO1xuICB2YXIgbmFtZSA9IHJvdXRlLm5hbWU7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KHBhdGggIT0gbnVsbCwgXCJcXFwicGF0aFxcXCIgaXMgcmVxdWlyZWQgaW4gYSByb3V0ZSBjb25maWd1cmF0aW9uLlwiKTtcbiAgICBhc3NlcnQoXG4gICAgICB0eXBlb2Ygcm91dGUuY29tcG9uZW50ICE9PSAnc3RyaW5nJyxcbiAgICAgIFwicm91dGUgY29uZmlnIFxcXCJjb21wb25lbnRcXFwiIGZvciBwYXRoOiBcIiArIChTdHJpbmcocGF0aCB8fCBuYW1lKSkgKyBcIiBjYW5ub3QgYmUgYSBcIiArXG4gICAgICBcInN0cmluZyBpZC4gVXNlIGFuIGFjdHVhbCBjb21wb25lbnQgaW5zdGVhZC5cIlxuICAgICk7XG4gIH1cblxuICB2YXIgcGF0aFRvUmVnZXhwT3B0aW9ucyA9IHJvdXRlLnBhdGhUb1JlZ2V4cE9wdGlvbnMgfHwge307XG4gIHZhciBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgcGF0aCxcbiAgICBwYXJlbnQsXG4gICAgcGF0aFRvUmVnZXhwT3B0aW9ucy5zdHJpY3RcbiAgKTtcblxuICBpZiAodHlwZW9mIHJvdXRlLmNhc2VTZW5zaXRpdmUgPT09ICdib29sZWFuJykge1xuICAgIHBhdGhUb1JlZ2V4cE9wdGlvbnMuc2Vuc2l0aXZlID0gcm91dGUuY2FzZVNlbnNpdGl2ZTtcbiAgfVxuXG4gIHZhciByZWNvcmQgPSB7XG4gICAgcGF0aDogbm9ybWFsaXplZFBhdGgsXG4gICAgcmVnZXg6IGNvbXBpbGVSb3V0ZVJlZ2V4KG5vcm1hbGl6ZWRQYXRoLCBwYXRoVG9SZWdleHBPcHRpb25zKSxcbiAgICBjb21wb25lbnRzOiByb3V0ZS5jb21wb25lbnRzIHx8IHsgZGVmYXVsdDogcm91dGUuY29tcG9uZW50IH0sXG4gICAgaW5zdGFuY2VzOiB7fSxcbiAgICBuYW1lOiBuYW1lLFxuICAgIHBhcmVudDogcGFyZW50LFxuICAgIG1hdGNoQXM6IG1hdGNoQXMsXG4gICAgcmVkaXJlY3Q6IHJvdXRlLnJlZGlyZWN0LFxuICAgIGJlZm9yZUVudGVyOiByb3V0ZS5iZWZvcmVFbnRlcixcbiAgICBtZXRhOiByb3V0ZS5tZXRhIHx8IHt9LFxuICAgIHByb3BzOiByb3V0ZS5wcm9wcyA9PSBudWxsXG4gICAgICA/IHt9XG4gICAgICA6IHJvdXRlLmNvbXBvbmVudHNcbiAgICAgICAgPyByb3V0ZS5wcm9wc1xuICAgICAgICA6IHsgZGVmYXVsdDogcm91dGUucHJvcHMgfVxuICB9O1xuXG4gIGlmIChyb3V0ZS5jaGlsZHJlbikge1xuICAgIC8vIFdhcm4gaWYgcm91dGUgaXMgbmFtZWQsIGRvZXMgbm90IHJlZGlyZWN0IGFuZCBoYXMgYSBkZWZhdWx0IGNoaWxkIHJvdXRlLlxuICAgIC8vIElmIHVzZXJzIG5hdmlnYXRlIHRvIHRoaXMgcm91dGUgYnkgbmFtZSwgdGhlIGRlZmF1bHQgY2hpbGQgd2lsbFxuICAgIC8vIG5vdCBiZSByZW5kZXJlZCAoR0ggSXNzdWUgIzYyOSlcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHJvdXRlLm5hbWUgJiYgIXJvdXRlLnJlZGlyZWN0ICYmIHJvdXRlLmNoaWxkcmVuLnNvbWUoZnVuY3Rpb24gKGNoaWxkKSB7IHJldHVybiAvXlxcLz8kLy50ZXN0KGNoaWxkLnBhdGgpOyB9KSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIFwiTmFtZWQgUm91dGUgJ1wiICsgKHJvdXRlLm5hbWUpICsgXCInIGhhcyBhIGRlZmF1bHQgY2hpbGQgcm91dGUuIFwiICtcbiAgICAgICAgICBcIldoZW4gbmF2aWdhdGluZyB0byB0aGlzIG5hbWVkIHJvdXRlICg6dG89XFxcIntuYW1lOiAnXCIgKyAocm91dGUubmFtZSkgKyBcIidcXFwiKSwgXCIgK1xuICAgICAgICAgIFwidGhlIGRlZmF1bHQgY2hpbGQgcm91dGUgd2lsbCBub3QgYmUgcmVuZGVyZWQuIFJlbW92ZSB0aGUgbmFtZSBmcm9tIFwiICtcbiAgICAgICAgICBcInRoaXMgcm91dGUgYW5kIHVzZSB0aGUgbmFtZSBvZiB0aGUgZGVmYXVsdCBjaGlsZCByb3V0ZSBmb3IgbmFtZWQgXCIgK1xuICAgICAgICAgIFwibGlua3MgaW5zdGVhZC5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByb3V0ZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgdmFyIGNoaWxkTWF0Y2hBcyA9IG1hdGNoQXNcbiAgICAgICAgPyBjbGVhblBhdGgoKG1hdGNoQXMgKyBcIi9cIiArIChjaGlsZC5wYXRoKSkpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgYWRkUm91dGVSZWNvcmQocGF0aExpc3QsIHBhdGhNYXAsIG5hbWVNYXAsIGNoaWxkLCByZWNvcmQsIGNoaWxkTWF0Y2hBcyk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAocm91dGUuYWxpYXMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBhbGlhc2VzID0gQXJyYXkuaXNBcnJheShyb3V0ZS5hbGlhcylcbiAgICAgID8gcm91dGUuYWxpYXNcbiAgICAgIDogW3JvdXRlLmFsaWFzXTtcblxuICAgIGFsaWFzZXMuZm9yRWFjaChmdW5jdGlvbiAoYWxpYXMpIHtcbiAgICAgIHZhciBhbGlhc1JvdXRlID0ge1xuICAgICAgICBwYXRoOiBhbGlhcyxcbiAgICAgICAgY2hpbGRyZW46IHJvdXRlLmNoaWxkcmVuXG4gICAgICB9O1xuICAgICAgYWRkUm91dGVSZWNvcmQoXG4gICAgICAgIHBhdGhMaXN0LFxuICAgICAgICBwYXRoTWFwLFxuICAgICAgICBuYW1lTWFwLFxuICAgICAgICBhbGlhc1JvdXRlLFxuICAgICAgICBwYXJlbnQsXG4gICAgICAgIHJlY29yZC5wYXRoIHx8ICcvJyAvLyBtYXRjaEFzXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKCFwYXRoTWFwW3JlY29yZC5wYXRoXSkge1xuICAgIHBhdGhMaXN0LnB1c2gocmVjb3JkLnBhdGgpO1xuICAgIHBhdGhNYXBbcmVjb3JkLnBhdGhdID0gcmVjb3JkO1xuICB9XG5cbiAgaWYgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWVNYXBbbmFtZV0pIHtcbiAgICAgIG5hbWVNYXBbbmFtZV0gPSByZWNvcmQ7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFtYXRjaEFzKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgXCJEdXBsaWNhdGUgbmFtZWQgcm91dGVzIGRlZmluaXRpb246IFwiICtcbiAgICAgICAgXCJ7IG5hbWU6IFxcXCJcIiArIG5hbWUgKyBcIlxcXCIsIHBhdGg6IFxcXCJcIiArIChyZWNvcmQucGF0aCkgKyBcIlxcXCIgfVwiXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjb21waWxlUm91dGVSZWdleCAocGF0aCwgcGF0aFRvUmVnZXhwT3B0aW9ucykge1xuICB2YXIgcmVnZXggPSBwYXRoVG9SZWdleHBfMShwYXRoLCBbXSwgcGF0aFRvUmVnZXhwT3B0aW9ucyk7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHJlZ2V4LmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB3YXJuKCFrZXlzW2tleS5uYW1lXSwgKFwiRHVwbGljYXRlIHBhcmFtIGtleXMgaW4gcm91dGUgd2l0aCBwYXRoOiBcXFwiXCIgKyBwYXRoICsgXCJcXFwiXCIpKTtcbiAgICAgIGtleXNba2V5Lm5hbWVdID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcmVnZXhcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplUGF0aCAocGF0aCwgcGFyZW50LCBzdHJpY3QpIHtcbiAgaWYgKCFzdHJpY3QpIHsgcGF0aCA9IHBhdGgucmVwbGFjZSgvXFwvJC8sICcnKTsgfVxuICBpZiAocGF0aFswXSA9PT0gJy8nKSB7IHJldHVybiBwYXRoIH1cbiAgaWYgKHBhcmVudCA9PSBudWxsKSB7IHJldHVybiBwYXRoIH1cbiAgcmV0dXJuIGNsZWFuUGF0aCgoKHBhcmVudC5wYXRoKSArIFwiL1wiICsgcGF0aCkpXG59XG5cbi8qICAqL1xuXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUxvY2F0aW9uIChcbiAgcmF3LFxuICBjdXJyZW50LFxuICBhcHBlbmQsXG4gIHJvdXRlclxuKSB7XG4gIHZhciBuZXh0ID0gdHlwZW9mIHJhdyA9PT0gJ3N0cmluZycgPyB7IHBhdGg6IHJhdyB9IDogcmF3O1xuICAvLyBuYW1lZCB0YXJnZXRcbiAgaWYgKG5leHQubmFtZSB8fCBuZXh0Ll9ub3JtYWxpemVkKSB7XG4gICAgcmV0dXJuIG5leHRcbiAgfVxuXG4gIC8vIHJlbGF0aXZlIHBhcmFtc1xuICBpZiAoIW5leHQucGF0aCAmJiBuZXh0LnBhcmFtcyAmJiBjdXJyZW50KSB7XG4gICAgbmV4dCA9IGFzc2lnbih7fSwgbmV4dCk7XG4gICAgbmV4dC5fbm9ybWFsaXplZCA9IHRydWU7XG4gICAgdmFyIHBhcmFtcyA9IGFzc2lnbihhc3NpZ24oe30sIGN1cnJlbnQucGFyYW1zKSwgbmV4dC5wYXJhbXMpO1xuICAgIGlmIChjdXJyZW50Lm5hbWUpIHtcbiAgICAgIG5leHQubmFtZSA9IGN1cnJlbnQubmFtZTtcbiAgICAgIG5leHQucGFyYW1zID0gcGFyYW1zO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudC5tYXRjaGVkLmxlbmd0aCkge1xuICAgICAgdmFyIHJhd1BhdGggPSBjdXJyZW50Lm1hdGNoZWRbY3VycmVudC5tYXRjaGVkLmxlbmd0aCAtIDFdLnBhdGg7XG4gICAgICBuZXh0LnBhdGggPSBmaWxsUGFyYW1zKHJhd1BhdGgsIHBhcmFtcywgKFwicGF0aCBcIiArIChjdXJyZW50LnBhdGgpKSk7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuKGZhbHNlLCBcInJlbGF0aXZlIHBhcmFtcyBuYXZpZ2F0aW9uIHJlcXVpcmVzIGEgY3VycmVudCByb3V0ZS5cIik7XG4gICAgfVxuICAgIHJldHVybiBuZXh0XG4gIH1cblxuICB2YXIgcGFyc2VkUGF0aCA9IHBhcnNlUGF0aChuZXh0LnBhdGggfHwgJycpO1xuICB2YXIgYmFzZVBhdGggPSAoY3VycmVudCAmJiBjdXJyZW50LnBhdGgpIHx8ICcvJztcbiAgdmFyIHBhdGggPSBwYXJzZWRQYXRoLnBhdGhcbiAgICA/IHJlc29sdmVQYXRoKHBhcnNlZFBhdGgucGF0aCwgYmFzZVBhdGgsIGFwcGVuZCB8fCBuZXh0LmFwcGVuZClcbiAgICA6IGJhc2VQYXRoO1xuXG4gIHZhciBxdWVyeSA9IHJlc29sdmVRdWVyeShcbiAgICBwYXJzZWRQYXRoLnF1ZXJ5LFxuICAgIG5leHQucXVlcnksXG4gICAgcm91dGVyICYmIHJvdXRlci5vcHRpb25zLnBhcnNlUXVlcnlcbiAgKTtcblxuICB2YXIgaGFzaCA9IG5leHQuaGFzaCB8fCBwYXJzZWRQYXRoLmhhc2g7XG4gIGlmIChoYXNoICYmIGhhc2guY2hhckF0KDApICE9PSAnIycpIHtcbiAgICBoYXNoID0gXCIjXCIgKyBoYXNoO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBfbm9ybWFsaXplZDogdHJ1ZSxcbiAgICBwYXRoOiBwYXRoLFxuICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICBoYXNoOiBoYXNoXG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzaWduIChhLCBiKSB7XG4gIGZvciAodmFyIGtleSBpbiBiKSB7XG4gICAgYVtrZXldID0gYltrZXldO1xuICB9XG4gIHJldHVybiBhXG59XG5cbi8qICAqL1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZU1hdGNoZXIgKFxuICByb3V0ZXMsXG4gIHJvdXRlclxuKSB7XG4gIHZhciByZWYgPSBjcmVhdGVSb3V0ZU1hcChyb3V0ZXMpO1xuICB2YXIgcGF0aExpc3QgPSByZWYucGF0aExpc3Q7XG4gIHZhciBwYXRoTWFwID0gcmVmLnBhdGhNYXA7XG4gIHZhciBuYW1lTWFwID0gcmVmLm5hbWVNYXA7XG5cbiAgZnVuY3Rpb24gYWRkUm91dGVzIChyb3V0ZXMpIHtcbiAgICBjcmVhdGVSb3V0ZU1hcChyb3V0ZXMsIHBhdGhMaXN0LCBwYXRoTWFwLCBuYW1lTWFwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hdGNoIChcbiAgICByYXcsXG4gICAgY3VycmVudFJvdXRlLFxuICAgIHJlZGlyZWN0ZWRGcm9tXG4gICkge1xuICAgIHZhciBsb2NhdGlvbiA9IG5vcm1hbGl6ZUxvY2F0aW9uKHJhdywgY3VycmVudFJvdXRlLCBmYWxzZSwgcm91dGVyKTtcbiAgICB2YXIgbmFtZSA9IGxvY2F0aW9uLm5hbWU7XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgdmFyIHJlY29yZCA9IG5hbWVNYXBbbmFtZV07XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKHJlY29yZCwgKFwiUm91dGUgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgZG9lcyBub3QgZXhpc3RcIikpO1xuICAgICAgfVxuICAgICAgaWYgKCFyZWNvcmQpIHsgcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbikgfVxuICAgICAgdmFyIHBhcmFtTmFtZXMgPSByZWNvcmQucmVnZXgua2V5c1xuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuICFrZXkub3B0aW9uYWw7IH0pXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5Lm5hbWU7IH0pO1xuXG4gICAgICBpZiAodHlwZW9mIGxvY2F0aW9uLnBhcmFtcyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgbG9jYXRpb24ucGFyYW1zID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50Um91dGUgJiYgdHlwZW9mIGN1cnJlbnRSb3V0ZS5wYXJhbXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBjdXJyZW50Um91dGUucGFyYW1zKSB7XG4gICAgICAgICAgaWYgKCEoa2V5IGluIGxvY2F0aW9uLnBhcmFtcykgJiYgcGFyYW1OYW1lcy5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICAgICAgbG9jYXRpb24ucGFyYW1zW2tleV0gPSBjdXJyZW50Um91dGUucGFyYW1zW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQpIHtcbiAgICAgICAgbG9jYXRpb24ucGF0aCA9IGZpbGxQYXJhbXMocmVjb3JkLnBhdGgsIGxvY2F0aW9uLnBhcmFtcywgKFwibmFtZWQgcm91dGUgXFxcIlwiICsgbmFtZSArIFwiXFxcIlwiKSk7XG4gICAgICAgIHJldHVybiBfY3JlYXRlUm91dGUocmVjb3JkLCBsb2NhdGlvbiwgcmVkaXJlY3RlZEZyb20pXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsb2NhdGlvbi5wYXRoKSB7XG4gICAgICBsb2NhdGlvbi5wYXJhbXMgPSB7fTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBhdGggPSBwYXRoTGlzdFtpXTtcbiAgICAgICAgdmFyIHJlY29yZCQxID0gcGF0aE1hcFtwYXRoXTtcbiAgICAgICAgaWYgKG1hdGNoUm91dGUocmVjb3JkJDEucmVnZXgsIGxvY2F0aW9uLnBhdGgsIGxvY2F0aW9uLnBhcmFtcykpIHtcbiAgICAgICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKHJlY29yZCQxLCBsb2NhdGlvbiwgcmVkaXJlY3RlZEZyb20pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gbm8gbWF0Y2hcbiAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsIGxvY2F0aW9uKVxuICB9XG5cbiAgZnVuY3Rpb24gcmVkaXJlY3QgKFxuICAgIHJlY29yZCxcbiAgICBsb2NhdGlvblxuICApIHtcbiAgICB2YXIgb3JpZ2luYWxSZWRpcmVjdCA9IHJlY29yZC5yZWRpcmVjdDtcbiAgICB2YXIgcmVkaXJlY3QgPSB0eXBlb2Ygb3JpZ2luYWxSZWRpcmVjdCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9yaWdpbmFsUmVkaXJlY3QoY3JlYXRlUm91dGUocmVjb3JkLCBsb2NhdGlvbiwgbnVsbCwgcm91dGVyKSlcbiAgICAgICAgOiBvcmlnaW5hbFJlZGlyZWN0O1xuXG4gICAgaWYgKHR5cGVvZiByZWRpcmVjdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJlZGlyZWN0ID0geyBwYXRoOiByZWRpcmVjdCB9O1xuICAgIH1cblxuICAgIGlmICghcmVkaXJlY3QgfHwgdHlwZW9mIHJlZGlyZWN0ICE9PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBmYWxzZSwgKFwiaW52YWxpZCByZWRpcmVjdCBvcHRpb246IFwiICsgKEpTT04uc3RyaW5naWZ5KHJlZGlyZWN0KSkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsIGxvY2F0aW9uKVxuICAgIH1cblxuICAgIHZhciByZSA9IHJlZGlyZWN0O1xuICAgIHZhciBuYW1lID0gcmUubmFtZTtcbiAgICB2YXIgcGF0aCA9IHJlLnBhdGg7XG4gICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24ucXVlcnk7XG4gICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xuICAgIHZhciBwYXJhbXMgPSBsb2NhdGlvbi5wYXJhbXM7XG4gICAgcXVlcnkgPSByZS5oYXNPd25Qcm9wZXJ0eSgncXVlcnknKSA/IHJlLnF1ZXJ5IDogcXVlcnk7XG4gICAgaGFzaCA9IHJlLmhhc093blByb3BlcnR5KCdoYXNoJykgPyByZS5oYXNoIDogaGFzaDtcbiAgICBwYXJhbXMgPSByZS5oYXNPd25Qcm9wZXJ0eSgncGFyYW1zJykgPyByZS5wYXJhbXMgOiBwYXJhbXM7XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgLy8gcmVzb2x2ZWQgbmFtZWQgZGlyZWN0XG4gICAgICB2YXIgdGFyZ2V0UmVjb3JkID0gbmFtZU1hcFtuYW1lXTtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGFzc2VydCh0YXJnZXRSZWNvcmQsIChcInJlZGlyZWN0IGZhaWxlZDogbmFtZWQgcm91dGUgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBub3QgZm91bmQuXCIpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaCh7XG4gICAgICAgIF9ub3JtYWxpemVkOiB0cnVlLFxuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGhhc2g6IGhhc2gsXG4gICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICB9LCB1bmRlZmluZWQsIGxvY2F0aW9uKVxuICAgIH0gZWxzZSBpZiAocGF0aCkge1xuICAgICAgLy8gMS4gcmVzb2x2ZSByZWxhdGl2ZSByZWRpcmVjdFxuICAgICAgdmFyIHJhd1BhdGggPSByZXNvbHZlUmVjb3JkUGF0aChwYXRoLCByZWNvcmQpO1xuICAgICAgLy8gMi4gcmVzb2x2ZSBwYXJhbXNcbiAgICAgIHZhciByZXNvbHZlZFBhdGggPSBmaWxsUGFyYW1zKHJhd1BhdGgsIHBhcmFtcywgKFwicmVkaXJlY3Qgcm91dGUgd2l0aCBwYXRoIFxcXCJcIiArIHJhd1BhdGggKyBcIlxcXCJcIikpO1xuICAgICAgLy8gMy4gcmVtYXRjaCB3aXRoIGV4aXN0aW5nIHF1ZXJ5IGFuZCBoYXNoXG4gICAgICByZXR1cm4gbWF0Y2goe1xuICAgICAgICBfbm9ybWFsaXplZDogdHJ1ZSxcbiAgICAgICAgcGF0aDogcmVzb2x2ZWRQYXRoLFxuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGhhc2g6IGhhc2hcbiAgICAgIH0sIHVuZGVmaW5lZCwgbG9jYXRpb24pXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oZmFsc2UsIChcImludmFsaWQgcmVkaXJlY3Qgb3B0aW9uOiBcIiArIChKU09OLnN0cmluZ2lmeShyZWRpcmVjdCkpKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsIGxvY2F0aW9uKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFsaWFzIChcbiAgICByZWNvcmQsXG4gICAgbG9jYXRpb24sXG4gICAgbWF0Y2hBc1xuICApIHtcbiAgICB2YXIgYWxpYXNlZFBhdGggPSBmaWxsUGFyYW1zKG1hdGNoQXMsIGxvY2F0aW9uLnBhcmFtcywgKFwiYWxpYXNlZCByb3V0ZSB3aXRoIHBhdGggXFxcIlwiICsgbWF0Y2hBcyArIFwiXFxcIlwiKSk7XG4gICAgdmFyIGFsaWFzZWRNYXRjaCA9IG1hdGNoKHtcbiAgICAgIF9ub3JtYWxpemVkOiB0cnVlLFxuICAgICAgcGF0aDogYWxpYXNlZFBhdGhcbiAgICB9KTtcbiAgICBpZiAoYWxpYXNlZE1hdGNoKSB7XG4gICAgICB2YXIgbWF0Y2hlZCA9IGFsaWFzZWRNYXRjaC5tYXRjaGVkO1xuICAgICAgdmFyIGFsaWFzZWRSZWNvcmQgPSBtYXRjaGVkW21hdGNoZWQubGVuZ3RoIC0gMV07XG4gICAgICBsb2NhdGlvbi5wYXJhbXMgPSBhbGlhc2VkTWF0Y2gucGFyYW1zO1xuICAgICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShhbGlhc2VkUmVjb3JkLCBsb2NhdGlvbilcbiAgICB9XG4gICAgcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLCBsb2NhdGlvbilcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jcmVhdGVSb3V0ZSAoXG4gICAgcmVjb3JkLFxuICAgIGxvY2F0aW9uLFxuICAgIHJlZGlyZWN0ZWRGcm9tXG4gICkge1xuICAgIGlmIChyZWNvcmQgJiYgcmVjb3JkLnJlZGlyZWN0KSB7XG4gICAgICByZXR1cm4gcmVkaXJlY3QocmVjb3JkLCByZWRpcmVjdGVkRnJvbSB8fCBsb2NhdGlvbilcbiAgICB9XG4gICAgaWYgKHJlY29yZCAmJiByZWNvcmQubWF0Y2hBcykge1xuICAgICAgcmV0dXJuIGFsaWFzKHJlY29yZCwgbG9jYXRpb24sIHJlY29yZC5tYXRjaEFzKVxuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlUm91dGUocmVjb3JkLCBsb2NhdGlvbiwgcmVkaXJlY3RlZEZyb20sIHJvdXRlcilcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbWF0Y2g6IG1hdGNoLFxuICAgIGFkZFJvdXRlczogYWRkUm91dGVzXG4gIH1cbn1cblxuZnVuY3Rpb24gbWF0Y2hSb3V0ZSAoXG4gIHJlZ2V4LFxuICBwYXRoLFxuICBwYXJhbXNcbikge1xuICB2YXIgbSA9IHBhdGgubWF0Y2gocmVnZXgpO1xuXG4gIGlmICghbSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9IGVsc2UgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IG0ubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICB2YXIga2V5ID0gcmVnZXgua2V5c1tpIC0gMV07XG4gICAgdmFyIHZhbCA9IHR5cGVvZiBtW2ldID09PSAnc3RyaW5nJyA/IGRlY29kZVVSSUNvbXBvbmVudChtW2ldKSA6IG1baV07XG4gICAgaWYgKGtleSkge1xuICAgICAgcGFyYW1zW2tleS5uYW1lXSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiByZXNvbHZlUmVjb3JkUGF0aCAocGF0aCwgcmVjb3JkKSB7XG4gIHJldHVybiByZXNvbHZlUGF0aChwYXRoLCByZWNvcmQucGFyZW50ID8gcmVjb3JkLnBhcmVudC5wYXRoIDogJy8nLCB0cnVlKVxufVxuXG4vKiAgKi9cblxuXG52YXIgcG9zaXRpb25TdG9yZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmZ1bmN0aW9uIHNldHVwU2Nyb2xsICgpIHtcbiAgLy8gRml4IGZvciAjMTU4NSBmb3IgRmlyZWZveFxuICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBrZXk6IGdldFN0YXRlS2V5KCkgfSwgJycpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBmdW5jdGlvbiAoZSkge1xuICAgIHNhdmVTY3JvbGxQb3NpdGlvbigpO1xuICAgIGlmIChlLnN0YXRlICYmIGUuc3RhdGUua2V5KSB7XG4gICAgICBzZXRTdGF0ZUtleShlLnN0YXRlLmtleSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU2Nyb2xsIChcbiAgcm91dGVyLFxuICB0byxcbiAgZnJvbSxcbiAgaXNQb3Bcbikge1xuICBpZiAoIXJvdXRlci5hcHApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBiZWhhdmlvciA9IHJvdXRlci5vcHRpb25zLnNjcm9sbEJlaGF2aW9yO1xuICBpZiAoIWJlaGF2aW9yKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydCh0eXBlb2YgYmVoYXZpb3IgPT09ICdmdW5jdGlvbicsIFwic2Nyb2xsQmVoYXZpb3IgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICB9XG5cbiAgLy8gd2FpdCB1bnRpbCByZS1yZW5kZXIgZmluaXNoZXMgYmVmb3JlIHNjcm9sbGluZ1xuICByb3V0ZXIuYXBwLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTtcbiAgICB2YXIgc2hvdWxkU2Nyb2xsID0gYmVoYXZpb3IodG8sIGZyb20sIGlzUG9wID8gcG9zaXRpb24gOiBudWxsKTtcblxuICAgIGlmICghc2hvdWxkU2Nyb2xsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNob3VsZFNjcm9sbC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzaG91bGRTY3JvbGwudGhlbihmdW5jdGlvbiAoc2hvdWxkU2Nyb2xsKSB7XG4gICAgICAgIHNjcm9sbFRvUG9zaXRpb24oKHNob3VsZFNjcm9sbCksIHBvc2l0aW9uKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBhc3NlcnQoZmFsc2UsIGVyci50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjcm9sbFRvUG9zaXRpb24oc2hvdWxkU2Nyb2xsLCBwb3NpdGlvbik7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gc2F2ZVNjcm9sbFBvc2l0aW9uICgpIHtcbiAgdmFyIGtleSA9IGdldFN0YXRlS2V5KCk7XG4gIGlmIChrZXkpIHtcbiAgICBwb3NpdGlvblN0b3JlW2tleV0gPSB7XG4gICAgICB4OiB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXRcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbFBvc2l0aW9uICgpIHtcbiAgdmFyIGtleSA9IGdldFN0YXRlS2V5KCk7XG4gIGlmIChrZXkpIHtcbiAgICByZXR1cm4gcG9zaXRpb25TdG9yZVtrZXldXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudFBvc2l0aW9uIChlbCwgb2Zmc2V0KSB7XG4gIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgdmFyIGRvY1JlY3QgPSBkb2NFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIGVsUmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIHg6IGVsUmVjdC5sZWZ0IC0gZG9jUmVjdC5sZWZ0IC0gb2Zmc2V0LngsXG4gICAgeTogZWxSZWN0LnRvcCAtIGRvY1JlY3QudG9wIC0gb2Zmc2V0LnlcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1ZhbGlkUG9zaXRpb24gKG9iaikge1xuICByZXR1cm4gaXNOdW1iZXIob2JqLngpIHx8IGlzTnVtYmVyKG9iai55KVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVQb3NpdGlvbiAob2JqKSB7XG4gIHJldHVybiB7XG4gICAgeDogaXNOdW1iZXIob2JqLngpID8gb2JqLnggOiB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgeTogaXNOdW1iZXIob2JqLnkpID8gb2JqLnkgOiB3aW5kb3cucGFnZVlPZmZzZXRcbiAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVPZmZzZXQgKG9iaikge1xuICByZXR1cm4ge1xuICAgIHg6IGlzTnVtYmVyKG9iai54KSA/IG9iai54IDogMCxcbiAgICB5OiBpc051bWJlcihvYmoueSkgPyBvYmoueSA6IDBcbiAgfVxufVxuXG5mdW5jdGlvbiBpc051bWJlciAodikge1xuICByZXR1cm4gdHlwZW9mIHYgPT09ICdudW1iZXInXG59XG5cbmZ1bmN0aW9uIHNjcm9sbFRvUG9zaXRpb24gKHNob3VsZFNjcm9sbCwgcG9zaXRpb24pIHtcbiAgdmFyIGlzT2JqZWN0ID0gdHlwZW9mIHNob3VsZFNjcm9sbCA9PT0gJ29iamVjdCc7XG4gIGlmIChpc09iamVjdCAmJiB0eXBlb2Ygc2hvdWxkU2Nyb2xsLnNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2hvdWxkU2Nyb2xsLnNlbGVjdG9yKTtcbiAgICBpZiAoZWwpIHtcbiAgICAgIHZhciBvZmZzZXQgPSBzaG91bGRTY3JvbGwub2Zmc2V0ICYmIHR5cGVvZiBzaG91bGRTY3JvbGwub2Zmc2V0ID09PSAnb2JqZWN0JyA/IHNob3VsZFNjcm9sbC5vZmZzZXQgOiB7fTtcbiAgICAgIG9mZnNldCA9IG5vcm1hbGl6ZU9mZnNldChvZmZzZXQpO1xuICAgICAgcG9zaXRpb24gPSBnZXRFbGVtZW50UG9zaXRpb24oZWwsIG9mZnNldCk7XG4gICAgfSBlbHNlIGlmIChpc1ZhbGlkUG9zaXRpb24oc2hvdWxkU2Nyb2xsKSkge1xuICAgICAgcG9zaXRpb24gPSBub3JtYWxpemVQb3NpdGlvbihzaG91bGRTY3JvbGwpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdCAmJiBpc1ZhbGlkUG9zaXRpb24oc2hvdWxkU2Nyb2xsKSkge1xuICAgIHBvc2l0aW9uID0gbm9ybWFsaXplUG9zaXRpb24oc2hvdWxkU2Nyb2xsKTtcbiAgfVxuXG4gIGlmIChwb3NpdGlvbikge1xuICAgIHdpbmRvdy5zY3JvbGxUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcbiAgfVxufVxuXG4vKiAgKi9cblxudmFyIHN1cHBvcnRzUHVzaFN0YXRlID0gaW5Ccm93c2VyICYmIChmdW5jdGlvbiAoKSB7XG4gIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gIGlmIChcbiAgICAodWEuaW5kZXhPZignQW5kcm9pZCAyLicpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdBbmRyb2lkIDQuMCcpICE9PSAtMSkgJiZcbiAgICB1YS5pbmRleE9mKCdNb2JpbGUgU2FmYXJpJykgIT09IC0xICYmXG4gICAgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmXG4gICAgdWEuaW5kZXhPZignV2luZG93cyBQaG9uZScpID09PSAtMVxuICApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB3aW5kb3cuaGlzdG9yeSAmJiAncHVzaFN0YXRlJyBpbiB3aW5kb3cuaGlzdG9yeVxufSkoKTtcblxuLy8gdXNlIFVzZXIgVGltaW5nIGFwaSAoaWYgcHJlc2VudCkgZm9yIG1vcmUgYWNjdXJhdGUga2V5IHByZWNpc2lvblxudmFyIFRpbWUgPSBpbkJyb3dzZXIgJiYgd2luZG93LnBlcmZvcm1hbmNlICYmIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3dcbiAgPyB3aW5kb3cucGVyZm9ybWFuY2VcbiAgOiBEYXRlO1xuXG52YXIgX2tleSA9IGdlbktleSgpO1xuXG5mdW5jdGlvbiBnZW5LZXkgKCkge1xuICByZXR1cm4gVGltZS5ub3coKS50b0ZpeGVkKDMpXG59XG5cbmZ1bmN0aW9uIGdldFN0YXRlS2V5ICgpIHtcbiAgcmV0dXJuIF9rZXlcbn1cblxuZnVuY3Rpb24gc2V0U3RhdGVLZXkgKGtleSkge1xuICBfa2V5ID0ga2V5O1xufVxuXG5mdW5jdGlvbiBwdXNoU3RhdGUgKHVybCwgcmVwbGFjZSkge1xuICBzYXZlU2Nyb2xsUG9zaXRpb24oKTtcbiAgLy8gdHJ5Li4uY2F0Y2ggdGhlIHB1c2hTdGF0ZSBjYWxsIHRvIGdldCBhcm91bmQgU2FmYXJpXG4gIC8vIERPTSBFeGNlcHRpb24gMTggd2hlcmUgaXQgbGltaXRzIHRvIDEwMCBwdXNoU3RhdGUgY2FsbHNcbiAgdmFyIGhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgdHJ5IHtcbiAgICBpZiAocmVwbGFjZSkge1xuICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBrZXk6IF9rZXkgfSwgJycsIHVybCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9rZXkgPSBnZW5LZXkoKTtcbiAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHsga2V5OiBfa2V5IH0sICcnLCB1cmwpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHdpbmRvdy5sb2NhdGlvbltyZXBsYWNlID8gJ3JlcGxhY2UnIDogJ2Fzc2lnbiddKHVybCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVwbGFjZVN0YXRlICh1cmwpIHtcbiAgcHVzaFN0YXRlKHVybCwgdHJ1ZSk7XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiBydW5RdWV1ZSAocXVldWUsIGZuLCBjYikge1xuICB2YXIgc3RlcCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIGlmIChpbmRleCA+PSBxdWV1ZS5sZW5ndGgpIHtcbiAgICAgIGNiKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChxdWV1ZVtpbmRleF0pIHtcbiAgICAgICAgZm4ocXVldWVbaW5kZXhdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc3RlcChpbmRleCArIDEpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXAoaW5kZXggKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHN0ZXAoMCk7XG59XG5cbi8qICAqL1xuXG5mdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnRzIChtYXRjaGVkKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHtcbiAgICB2YXIgaGFzQXN5bmMgPSBmYWxzZTtcbiAgICB2YXIgcGVuZGluZyA9IDA7XG4gICAgdmFyIGVycm9yID0gbnVsbDtcblxuICAgIGZsYXRNYXBDb21wb25lbnRzKG1hdGNoZWQsIGZ1bmN0aW9uIChkZWYsIF8sIG1hdGNoLCBrZXkpIHtcbiAgICAgIC8vIGlmIGl0J3MgYSBmdW5jdGlvbiBhbmQgZG9lc24ndCBoYXZlIGNpZCBhdHRhY2hlZCxcbiAgICAgIC8vIGFzc3VtZSBpdCdzIGFuIGFzeW5jIGNvbXBvbmVudCByZXNvbHZlIGZ1bmN0aW9uLlxuICAgICAgLy8gd2UgYXJlIG5vdCB1c2luZyBWdWUncyBkZWZhdWx0IGFzeW5jIHJlc29sdmluZyBtZWNoYW5pc20gYmVjYXVzZVxuICAgICAgLy8gd2Ugd2FudCB0byBoYWx0IHRoZSBuYXZpZ2F0aW9uIHVudGlsIHRoZSBpbmNvbWluZyBjb21wb25lbnQgaGFzIGJlZW5cbiAgICAgIC8vIHJlc29sdmVkLlxuICAgICAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgZGVmLmNpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGhhc0FzeW5jID0gdHJ1ZTtcbiAgICAgICAgcGVuZGluZysrO1xuXG4gICAgICAgIHZhciByZXNvbHZlID0gb25jZShmdW5jdGlvbiAocmVzb2x2ZWREZWYpIHtcbiAgICAgICAgICBpZiAoaXNFU01vZHVsZShyZXNvbHZlZERlZikpIHtcbiAgICAgICAgICAgIHJlc29sdmVkRGVmID0gcmVzb2x2ZWREZWYuZGVmYXVsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc2F2ZSByZXNvbHZlZCBvbiBhc3luYyBmYWN0b3J5IGluIGNhc2UgaXQncyB1c2VkIGVsc2V3aGVyZVxuICAgICAgICAgIGRlZi5yZXNvbHZlZCA9IHR5cGVvZiByZXNvbHZlZERlZiA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgPyByZXNvbHZlZERlZlxuICAgICAgICAgICAgOiBfVnVlLmV4dGVuZChyZXNvbHZlZERlZik7XG4gICAgICAgICAgbWF0Y2guY29tcG9uZW50c1trZXldID0gcmVzb2x2ZWREZWY7XG4gICAgICAgICAgcGVuZGluZy0tO1xuICAgICAgICAgIGlmIChwZW5kaW5nIDw9IDApIHtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciByZWplY3QgPSBvbmNlKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICB2YXIgbXNnID0gXCJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQgXCIgKyBrZXkgKyBcIjogXCIgKyByZWFzb247XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGZhbHNlLCBtc2cpO1xuICAgICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yID0gaXNFcnJvcihyZWFzb24pXG4gICAgICAgICAgICAgID8gcmVhc29uXG4gICAgICAgICAgICAgIDogbmV3IEVycm9yKG1zZyk7XG4gICAgICAgICAgICBuZXh0KGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciByZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzID0gZGVmKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgIGlmICh0eXBlb2YgcmVzLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlcy50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG5ldyBzeW50YXggaW4gVnVlIDIuM1xuICAgICAgICAgICAgdmFyIGNvbXAgPSByZXMuY29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKGNvbXAgJiYgdHlwZW9mIGNvbXAudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBjb21wLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICghaGFzQXN5bmMpIHsgbmV4dCgpOyB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZmxhdE1hcENvbXBvbmVudHMgKFxuICBtYXRjaGVkLFxuICBmblxuKSB7XG4gIHJldHVybiBmbGF0dGVuKG1hdGNoZWQubWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG0uY29tcG9uZW50cykubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZuKFxuICAgICAgbS5jb21wb25lbnRzW2tleV0sXG4gICAgICBtLmluc3RhbmNlc1trZXldLFxuICAgICAgbSwga2V5XG4gICAgKTsgfSlcbiAgfSkpXG59XG5cbmZ1bmN0aW9uIGZsYXR0ZW4gKGFycikge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyKVxufVxuXG52YXIgaGFzU3ltYm9sID1cbiAgdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICB0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSAnc3ltYm9sJztcblxuZnVuY3Rpb24gaXNFU01vZHVsZSAob2JqKSB7XG4gIHJldHVybiBvYmouX19lc01vZHVsZSB8fCAoaGFzU3ltYm9sICYmIG9ialtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJylcbn1cblxuLy8gaW4gV2VicGFjayAyLCByZXF1aXJlLmVuc3VyZSBub3cgYWxzbyByZXR1cm5zIGEgUHJvbWlzZVxuLy8gc28gdGhlIHJlc29sdmUvcmVqZWN0IGZ1bmN0aW9ucyBtYXkgZ2V0IGNhbGxlZCBhbiBleHRyYSB0aW1lXG4vLyBpZiB0aGUgdXNlciB1c2VzIGFuIGFycm93IGZ1bmN0aW9uIHNob3J0aGFuZCB0aGF0IGhhcHBlbnMgdG9cbi8vIHJldHVybiB0aGF0IFByb21pc2UuXG5mdW5jdGlvbiBvbmNlIChmbikge1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXG4gICAgaWYgKGNhbGxlZCkgeyByZXR1cm4gfVxuICAgIGNhbGxlZCA9IHRydWU7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3MpXG4gIH1cbn1cblxuLyogICovXG5cbnZhciBIaXN0b3J5ID0gZnVuY3Rpb24gSGlzdG9yeSAocm91dGVyLCBiYXNlKSB7XG4gIHRoaXMucm91dGVyID0gcm91dGVyO1xuICB0aGlzLmJhc2UgPSBub3JtYWxpemVCYXNlKGJhc2UpO1xuICAvLyBzdGFydCB3aXRoIGEgcm91dGUgb2JqZWN0IHRoYXQgc3RhbmRzIGZvciBcIm5vd2hlcmVcIlxuICB0aGlzLmN1cnJlbnQgPSBTVEFSVDtcbiAgdGhpcy5wZW5kaW5nID0gbnVsbDtcbiAgdGhpcy5yZWFkeSA9IGZhbHNlO1xuICB0aGlzLnJlYWR5Q2JzID0gW107XG4gIHRoaXMucmVhZHlFcnJvckNicyA9IFtdO1xuICB0aGlzLmVycm9yQ2JzID0gW107XG59O1xuXG5IaXN0b3J5LnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiBsaXN0ZW4gKGNiKSB7XG4gIHRoaXMuY2IgPSBjYjtcbn07XG5cbkhpc3RvcnkucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbiBvblJlYWR5IChjYiwgZXJyb3JDYikge1xuICBpZiAodGhpcy5yZWFkeSkge1xuICAgIGNiKCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5yZWFkeUNicy5wdXNoKGNiKTtcbiAgICBpZiAoZXJyb3JDYikge1xuICAgICAgdGhpcy5yZWFkeUVycm9yQ2JzLnB1c2goZXJyb3JDYik7XG4gICAgfVxuICB9XG59O1xuXG5IaXN0b3J5LnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gb25FcnJvciAoZXJyb3JDYikge1xuICB0aGlzLmVycm9yQ2JzLnB1c2goZXJyb3JDYik7XG59O1xuXG5IaXN0b3J5LnByb3RvdHlwZS50cmFuc2l0aW9uVG8gPSBmdW5jdGlvbiB0cmFuc2l0aW9uVG8gKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgdmFyIHJvdXRlID0gdGhpcy5yb3V0ZXIubWF0Y2gobG9jYXRpb24sIHRoaXMuY3VycmVudCk7XG4gIHRoaXMuY29uZmlybVRyYW5zaXRpb24ocm91dGUsIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzJDEudXBkYXRlUm91dGUocm91dGUpO1xuICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG4gICAgdGhpcyQxLmVuc3VyZVVSTCgpO1xuXG4gICAgLy8gZmlyZSByZWFkeSBjYnMgb25jZVxuICAgIGlmICghdGhpcyQxLnJlYWR5KSB7XG4gICAgICB0aGlzJDEucmVhZHkgPSB0cnVlO1xuICAgICAgdGhpcyQxLnJlYWR5Q2JzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IGNiKHJvdXRlKTsgfSk7XG4gICAgfVxuICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKG9uQWJvcnQpIHtcbiAgICAgIG9uQWJvcnQoZXJyKTtcbiAgICB9XG4gICAgaWYgKGVyciAmJiAhdGhpcyQxLnJlYWR5KSB7XG4gICAgICB0aGlzJDEucmVhZHkgPSB0cnVlO1xuICAgICAgdGhpcyQxLnJlYWR5RXJyb3JDYnMuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsgY2IoZXJyKTsgfSk7XG4gICAgfVxuICB9KTtcbn07XG5cbkhpc3RvcnkucHJvdG90eXBlLmNvbmZpcm1UcmFuc2l0aW9uID0gZnVuY3Rpb24gY29uZmlybVRyYW5zaXRpb24gKHJvdXRlLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgdmFyIGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gIHZhciBhYm9ydCA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICBpZiAoaXNFcnJvcihlcnIpKSB7XG4gICAgICBpZiAodGhpcyQxLmVycm9yQ2JzLmxlbmd0aCkge1xuICAgICAgICB0aGlzJDEuZXJyb3JDYnMuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsgY2IoZXJyKTsgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKGZhbHNlLCAndW5jYXVnaHQgZXJyb3IgZHVyaW5nIHJvdXRlIG5hdmlnYXRpb246Jyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgb25BYm9ydCAmJiBvbkFib3J0KGVycik7XG4gIH07XG4gIGlmIChcbiAgICBpc1NhbWVSb3V0ZShyb3V0ZSwgY3VycmVudCkgJiZcbiAgICAvLyBpbiB0aGUgY2FzZSB0aGUgcm91dGUgbWFwIGhhcyBiZWVuIGR5bmFtaWNhbGx5IGFwcGVuZGVkIHRvXG4gICAgcm91dGUubWF0Y2hlZC5sZW5ndGggPT09IGN1cnJlbnQubWF0Y2hlZC5sZW5ndGhcbiAgKSB7XG4gICAgdGhpcy5lbnN1cmVVUkwoKTtcbiAgICByZXR1cm4gYWJvcnQoKVxuICB9XG5cbiAgdmFyIHJlZiA9IHJlc29sdmVRdWV1ZSh0aGlzLmN1cnJlbnQubWF0Y2hlZCwgcm91dGUubWF0Y2hlZCk7XG4gICAgdmFyIHVwZGF0ZWQgPSByZWYudXBkYXRlZDtcbiAgICB2YXIgZGVhY3RpdmF0ZWQgPSByZWYuZGVhY3RpdmF0ZWQ7XG4gICAgdmFyIGFjdGl2YXRlZCA9IHJlZi5hY3RpdmF0ZWQ7XG5cbiAgdmFyIHF1ZXVlID0gW10uY29uY2F0KFxuICAgIC8vIGluLWNvbXBvbmVudCBsZWF2ZSBndWFyZHNcbiAgICBleHRyYWN0TGVhdmVHdWFyZHMoZGVhY3RpdmF0ZWQpLFxuICAgIC8vIGdsb2JhbCBiZWZvcmUgaG9va3NcbiAgICB0aGlzLnJvdXRlci5iZWZvcmVIb29rcyxcbiAgICAvLyBpbi1jb21wb25lbnQgdXBkYXRlIGhvb2tzXG4gICAgZXh0cmFjdFVwZGF0ZUhvb2tzKHVwZGF0ZWQpLFxuICAgIC8vIGluLWNvbmZpZyBlbnRlciBndWFyZHNcbiAgICBhY3RpdmF0ZWQubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLmJlZm9yZUVudGVyOyB9KSxcbiAgICAvLyBhc3luYyBjb21wb25lbnRzXG4gICAgcmVzb2x2ZUFzeW5jQ29tcG9uZW50cyhhY3RpdmF0ZWQpXG4gICk7XG5cbiAgdGhpcy5wZW5kaW5nID0gcm91dGU7XG4gIHZhciBpdGVyYXRvciA9IGZ1bmN0aW9uIChob29rLCBuZXh0KSB7XG4gICAgaWYgKHRoaXMkMS5wZW5kaW5nICE9PSByb3V0ZSkge1xuICAgICAgcmV0dXJuIGFib3J0KClcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGhvb2socm91dGUsIGN1cnJlbnQsIGZ1bmN0aW9uICh0bykge1xuICAgICAgICBpZiAodG8gPT09IGZhbHNlIHx8IGlzRXJyb3IodG8pKSB7XG4gICAgICAgICAgLy8gbmV4dChmYWxzZSkgLT4gYWJvcnQgbmF2aWdhdGlvbiwgZW5zdXJlIGN1cnJlbnQgVVJMXG4gICAgICAgICAgdGhpcyQxLmVuc3VyZVVSTCh0cnVlKTtcbiAgICAgICAgICBhYm9ydCh0byk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgdHlwZW9mIHRvID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICh0eXBlb2YgdG8gPT09ICdvYmplY3QnICYmIChcbiAgICAgICAgICAgIHR5cGVvZiB0by5wYXRoID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgdHlwZW9mIHRvLm5hbWUgPT09ICdzdHJpbmcnXG4gICAgICAgICAgKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gbmV4dCgnLycpIG9yIG5leHQoeyBwYXRoOiAnLycgfSkgLT4gcmVkaXJlY3RcbiAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdG8gPT09ICdvYmplY3QnICYmIHRvLnJlcGxhY2UpIHtcbiAgICAgICAgICAgIHRoaXMkMS5yZXBsYWNlKHRvKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcyQxLnB1c2godG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBjb25maXJtIHRyYW5zaXRpb24gYW5kIHBhc3Mgb24gdGhlIHZhbHVlXG4gICAgICAgICAgbmV4dCh0byk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGFib3J0KGUpO1xuICAgIH1cbiAgfTtcblxuICBydW5RdWV1ZShxdWV1ZSwgaXRlcmF0b3IsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcG9zdEVudGVyQ2JzID0gW107XG4gICAgdmFyIGlzVmFsaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzJDEuY3VycmVudCA9PT0gcm91dGU7IH07XG4gICAgLy8gd2FpdCB1bnRpbCBhc3luYyBjb21wb25lbnRzIGFyZSByZXNvbHZlZCBiZWZvcmVcbiAgICAvLyBleHRyYWN0aW5nIGluLWNvbXBvbmVudCBlbnRlciBndWFyZHNcbiAgICB2YXIgZW50ZXJHdWFyZHMgPSBleHRyYWN0RW50ZXJHdWFyZHMoYWN0aXZhdGVkLCBwb3N0RW50ZXJDYnMsIGlzVmFsaWQpO1xuICAgIHZhciBxdWV1ZSA9IGVudGVyR3VhcmRzLmNvbmNhdCh0aGlzJDEucm91dGVyLnJlc29sdmVIb29rcyk7XG4gICAgcnVuUXVldWUocXVldWUsIGl0ZXJhdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcyQxLnBlbmRpbmcgIT09IHJvdXRlKSB7XG4gICAgICAgIHJldHVybiBhYm9ydCgpXG4gICAgICB9XG4gICAgICB0aGlzJDEucGVuZGluZyA9IG51bGw7XG4gICAgICBvbkNvbXBsZXRlKHJvdXRlKTtcbiAgICAgIGlmICh0aGlzJDEucm91dGVyLmFwcCkge1xuICAgICAgICB0aGlzJDEucm91dGVyLmFwcC4kbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHBvc3RFbnRlckNicy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyBjYigpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTtcblxuSGlzdG9yeS5wcm90b3R5cGUudXBkYXRlUm91dGUgPSBmdW5jdGlvbiB1cGRhdGVSb3V0ZSAocm91dGUpIHtcbiAgdmFyIHByZXYgPSB0aGlzLmN1cnJlbnQ7XG4gIHRoaXMuY3VycmVudCA9IHJvdXRlO1xuICB0aGlzLmNiICYmIHRoaXMuY2Iocm91dGUpO1xuICB0aGlzLnJvdXRlci5hZnRlckhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcbiAgICBob29rICYmIGhvb2socm91dGUsIHByZXYpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUJhc2UgKGJhc2UpIHtcbiAgaWYgKCFiYXNlKSB7XG4gICAgaWYgKGluQnJvd3Nlcikge1xuICAgICAgLy8gcmVzcGVjdCA8YmFzZT4gdGFnXG4gICAgICB2YXIgYmFzZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYmFzZScpO1xuICAgICAgYmFzZSA9IChiYXNlRWwgJiYgYmFzZUVsLmdldEF0dHJpYnV0ZSgnaHJlZicpKSB8fCAnLyc7XG4gICAgICAvLyBzdHJpcCBmdWxsIFVSTCBvcmlnaW5cbiAgICAgIGJhc2UgPSBiYXNlLnJlcGxhY2UoL15odHRwcz86XFwvXFwvW15cXC9dKy8sICcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYmFzZSA9ICcvJztcbiAgICB9XG4gIH1cbiAgLy8gbWFrZSBzdXJlIHRoZXJlJ3MgdGhlIHN0YXJ0aW5nIHNsYXNoXG4gIGlmIChiYXNlLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgYmFzZSA9ICcvJyArIGJhc2U7XG4gIH1cbiAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNsYXNoXG4gIHJldHVybiBiYXNlLnJlcGxhY2UoL1xcLyQvLCAnJylcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVF1ZXVlIChcbiAgY3VycmVudCxcbiAgbmV4dFxuKSB7XG4gIHZhciBpO1xuICB2YXIgbWF4ID0gTWF0aC5tYXgoY3VycmVudC5sZW5ndGgsIG5leHQubGVuZ3RoKTtcbiAgZm9yIChpID0gMDsgaSA8IG1heDsgaSsrKSB7XG4gICAgaWYgKGN1cnJlbnRbaV0gIT09IG5leHRbaV0pIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgdXBkYXRlZDogbmV4dC5zbGljZSgwLCBpKSxcbiAgICBhY3RpdmF0ZWQ6IG5leHQuc2xpY2UoaSksXG4gICAgZGVhY3RpdmF0ZWQ6IGN1cnJlbnQuc2xpY2UoaSlcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0R3VhcmRzIChcbiAgcmVjb3JkcyxcbiAgbmFtZSxcbiAgYmluZCxcbiAgcmV2ZXJzZVxuKSB7XG4gIHZhciBndWFyZHMgPSBmbGF0TWFwQ29tcG9uZW50cyhyZWNvcmRzLCBmdW5jdGlvbiAoZGVmLCBpbnN0YW5jZSwgbWF0Y2gsIGtleSkge1xuICAgIHZhciBndWFyZCA9IGV4dHJhY3RHdWFyZChkZWYsIG5hbWUpO1xuICAgIGlmIChndWFyZCkge1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZ3VhcmQpXG4gICAgICAgID8gZ3VhcmQubWFwKGZ1bmN0aW9uIChndWFyZCkgeyByZXR1cm4gYmluZChndWFyZCwgaW5zdGFuY2UsIG1hdGNoLCBrZXkpOyB9KVxuICAgICAgICA6IGJpbmQoZ3VhcmQsIGluc3RhbmNlLCBtYXRjaCwga2V5KVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBmbGF0dGVuKHJldmVyc2UgPyBndWFyZHMucmV2ZXJzZSgpIDogZ3VhcmRzKVxufVxuXG5mdW5jdGlvbiBleHRyYWN0R3VhcmQgKFxuICBkZWYsXG4gIGtleVxuKSB7XG4gIGlmICh0eXBlb2YgZGVmICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gZXh0ZW5kIG5vdyBzbyB0aGF0IGdsb2JhbCBtaXhpbnMgYXJlIGFwcGxpZWQuXG4gICAgZGVmID0gX1Z1ZS5leHRlbmQoZGVmKTtcbiAgfVxuICByZXR1cm4gZGVmLm9wdGlvbnNba2V5XVxufVxuXG5mdW5jdGlvbiBleHRyYWN0TGVhdmVHdWFyZHMgKGRlYWN0aXZhdGVkKSB7XG4gIHJldHVybiBleHRyYWN0R3VhcmRzKGRlYWN0aXZhdGVkLCAnYmVmb3JlUm91dGVMZWF2ZScsIGJpbmRHdWFyZCwgdHJ1ZSlcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFVwZGF0ZUhvb2tzICh1cGRhdGVkKSB7XG4gIHJldHVybiBleHRyYWN0R3VhcmRzKHVwZGF0ZWQsICdiZWZvcmVSb3V0ZVVwZGF0ZScsIGJpbmRHdWFyZClcbn1cblxuZnVuY3Rpb24gYmluZEd1YXJkIChndWFyZCwgaW5zdGFuY2UpIHtcbiAgaWYgKGluc3RhbmNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGJvdW5kUm91dGVHdWFyZCAoKSB7XG4gICAgICByZXR1cm4gZ3VhcmQuYXBwbHkoaW5zdGFuY2UsIGFyZ3VtZW50cylcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdEVudGVyR3VhcmRzIChcbiAgYWN0aXZhdGVkLFxuICBjYnMsXG4gIGlzVmFsaWRcbikge1xuICByZXR1cm4gZXh0cmFjdEd1YXJkcyhhY3RpdmF0ZWQsICdiZWZvcmVSb3V0ZUVudGVyJywgZnVuY3Rpb24gKGd1YXJkLCBfLCBtYXRjaCwga2V5KSB7XG4gICAgcmV0dXJuIGJpbmRFbnRlckd1YXJkKGd1YXJkLCBtYXRjaCwga2V5LCBjYnMsIGlzVmFsaWQpXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGJpbmRFbnRlckd1YXJkIChcbiAgZ3VhcmQsXG4gIG1hdGNoLFxuICBrZXksXG4gIGNicyxcbiAgaXNWYWxpZFxuKSB7XG4gIHJldHVybiBmdW5jdGlvbiByb3V0ZUVudGVyR3VhcmQgKHRvLCBmcm9tLCBuZXh0KSB7XG4gICAgcmV0dXJuIGd1YXJkKHRvLCBmcm9tLCBmdW5jdGlvbiAoY2IpIHtcbiAgICAgIG5leHQoY2IpO1xuICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYnMucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gIzc1MFxuICAgICAgICAgIC8vIGlmIGEgcm91dGVyLXZpZXcgaXMgd3JhcHBlZCB3aXRoIGFuIG91dC1pbiB0cmFuc2l0aW9uLFxuICAgICAgICAgIC8vIHRoZSBpbnN0YW5jZSBtYXkgbm90IGhhdmUgYmVlbiByZWdpc3RlcmVkIGF0IHRoaXMgdGltZS5cbiAgICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gcG9sbCBmb3IgcmVnaXN0cmF0aW9uIHVudGlsIGN1cnJlbnQgcm91dGVcbiAgICAgICAgICAvLyBpcyBubyBsb25nZXIgdmFsaWQuXG4gICAgICAgICAgcG9sbChjYiwgbWF0Y2guaW5zdGFuY2VzLCBrZXksIGlzVmFsaWQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIHBvbGwgKFxuICBjYiwgLy8gc29tZWhvdyBmbG93IGNhbm5vdCBpbmZlciB0aGlzIGlzIGEgZnVuY3Rpb25cbiAgaW5zdGFuY2VzLFxuICBrZXksXG4gIGlzVmFsaWRcbikge1xuICBpZiAoaW5zdGFuY2VzW2tleV0pIHtcbiAgICBjYihpbnN0YW5jZXNba2V5XSk7XG4gIH0gZWxzZSBpZiAoaXNWYWxpZCgpKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBwb2xsKGNiLCBpbnN0YW5jZXMsIGtleSwgaXNWYWxpZCk7XG4gICAgfSwgMTYpO1xuICB9XG59XG5cbi8qICAqL1xuXG5cbnZhciBIVE1MNUhpc3RvcnkgPSAoZnVuY3Rpb24gKEhpc3RvcnkkJDEpIHtcbiAgZnVuY3Rpb24gSFRNTDVIaXN0b3J5IChyb3V0ZXIsIGJhc2UpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIEhpc3RvcnkkJDEuY2FsbCh0aGlzLCByb3V0ZXIsIGJhc2UpO1xuXG4gICAgdmFyIGV4cGVjdFNjcm9sbCA9IHJvdXRlci5vcHRpb25zLnNjcm9sbEJlaGF2aW9yO1xuXG4gICAgaWYgKGV4cGVjdFNjcm9sbCkge1xuICAgICAgc2V0dXBTY3JvbGwoKTtcbiAgICB9XG5cbiAgICB2YXIgaW5pdExvY2F0aW9uID0gZ2V0TG9jYXRpb24odGhpcy5iYXNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzJDEuY3VycmVudDtcblxuICAgICAgLy8gQXZvaWRpbmcgZmlyc3QgYHBvcHN0YXRlYCBldmVudCBkaXNwYXRjaGVkIGluIHNvbWUgYnJvd3NlcnMgYnV0IGZpcnN0XG4gICAgICAvLyBoaXN0b3J5IHJvdXRlIG5vdCB1cGRhdGVkIHNpbmNlIGFzeW5jIGd1YXJkIGF0IHRoZSBzYW1lIHRpbWUuXG4gICAgICB2YXIgbG9jYXRpb24gPSBnZXRMb2NhdGlvbih0aGlzJDEuYmFzZSk7XG4gICAgICBpZiAodGhpcyQxLmN1cnJlbnQgPT09IFNUQVJUICYmIGxvY2F0aW9uID09PSBpbml0TG9jYXRpb24pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHRoaXMkMS50cmFuc2l0aW9uVG8obG9jYXRpb24sIGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgICAgICBpZiAoZXhwZWN0U2Nyb2xsKSB7XG4gICAgICAgICAgaGFuZGxlU2Nyb2xsKHJvdXRlciwgcm91dGUsIGN1cnJlbnQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICggSGlzdG9yeSQkMSApIEhUTUw1SGlzdG9yeS5fX3Byb3RvX18gPSBIaXN0b3J5JCQxO1xuICBIVE1MNUhpc3RvcnkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSGlzdG9yeSQkMSAmJiBIaXN0b3J5JCQxLnByb3RvdHlwZSApO1xuICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSFRNTDVIaXN0b3J5O1xuXG4gIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyAobikge1xuICAgIHdpbmRvdy5oaXN0b3J5LmdvKG4pO1xuICB9O1xuXG4gIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2ggKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgcmVmID0gdGhpcztcbiAgICB2YXIgZnJvbVJvdXRlID0gcmVmLmN1cnJlbnQ7XG4gICAgdGhpcy50cmFuc2l0aW9uVG8obG9jYXRpb24sIGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgICAgcHVzaFN0YXRlKGNsZWFuUGF0aCh0aGlzJDEuYmFzZSArIHJvdXRlLmZ1bGxQYXRoKSk7XG4gICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGZyb21Sb3V0ZSwgZmFsc2UpO1xuICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcbiAgICB9LCBvbkFib3J0KTtcbiAgfTtcblxuICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIHJlZiA9IHRoaXM7XG4gICAgdmFyIGZyb21Sb3V0ZSA9IHJlZi5jdXJyZW50O1xuICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgIHJlcGxhY2VTdGF0ZShjbGVhblBhdGgodGhpcyQxLmJhc2UgKyByb3V0ZS5mdWxsUGF0aCkpO1xuICAgICAgaGFuZGxlU2Nyb2xsKHRoaXMkMS5yb3V0ZXIsIHJvdXRlLCBmcm9tUm91dGUsIGZhbHNlKTtcbiAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShyb3V0ZSk7XG4gICAgfSwgb25BYm9ydCk7XG4gIH07XG5cbiAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5lbnN1cmVVUkwgPSBmdW5jdGlvbiBlbnN1cmVVUkwgKHB1c2gpIHtcbiAgICBpZiAoZ2V0TG9jYXRpb24odGhpcy5iYXNlKSAhPT0gdGhpcy5jdXJyZW50LmZ1bGxQYXRoKSB7XG4gICAgICB2YXIgY3VycmVudCA9IGNsZWFuUGF0aCh0aGlzLmJhc2UgKyB0aGlzLmN1cnJlbnQuZnVsbFBhdGgpO1xuICAgICAgcHVzaCA/IHB1c2hTdGF0ZShjdXJyZW50KSA6IHJlcGxhY2VTdGF0ZShjdXJyZW50KTtcbiAgICB9XG4gIH07XG5cbiAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nZXRDdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbiBnZXRDdXJyZW50TG9jYXRpb24gKCkge1xuICAgIHJldHVybiBnZXRMb2NhdGlvbih0aGlzLmJhc2UpXG4gIH07XG5cbiAgcmV0dXJuIEhUTUw1SGlzdG9yeTtcbn0oSGlzdG9yeSkpO1xuXG5mdW5jdGlvbiBnZXRMb2NhdGlvbiAoYmFzZSkge1xuICB2YXIgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgaWYgKGJhc2UgJiYgcGF0aC5pbmRleE9mKGJhc2UpID09PSAwKSB7XG4gICAgcGF0aCA9IHBhdGguc2xpY2UoYmFzZS5sZW5ndGgpO1xuICB9XG4gIHJldHVybiAocGF0aCB8fCAnLycpICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoXG59XG5cbi8qICAqL1xuXG5cbnZhciBIYXNoSGlzdG9yeSA9IChmdW5jdGlvbiAoSGlzdG9yeSQkMSkge1xuICBmdW5jdGlvbiBIYXNoSGlzdG9yeSAocm91dGVyLCBiYXNlLCBmYWxsYmFjaykge1xuICAgIEhpc3RvcnkkJDEuY2FsbCh0aGlzLCByb3V0ZXIsIGJhc2UpO1xuICAgIC8vIGNoZWNrIGhpc3RvcnkgZmFsbGJhY2sgZGVlcGxpbmtpbmdcbiAgICBpZiAoZmFsbGJhY2sgJiYgY2hlY2tGYWxsYmFjayh0aGlzLmJhc2UpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZW5zdXJlU2xhc2goKTtcbiAgfVxuXG4gIGlmICggSGlzdG9yeSQkMSApIEhhc2hIaXN0b3J5Ll9fcHJvdG9fXyA9IEhpc3RvcnkkJDE7XG4gIEhhc2hIaXN0b3J5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEhpc3RvcnkkJDEgJiYgSGlzdG9yeSQkMS5wcm90b3R5cGUgKTtcbiAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSGFzaEhpc3Rvcnk7XG5cbiAgLy8gdGhpcyBpcyBkZWxheWVkIHVudGlsIHRoZSBhcHAgbW91bnRzXG4gIC8vIHRvIGF2b2lkIHRoZSBoYXNoY2hhbmdlIGxpc3RlbmVyIGJlaW5nIGZpcmVkIHRvbyBlYXJseVxuICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc2V0dXBMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXR1cExpc3RlbmVycyAoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXI7XG4gICAgdmFyIGV4cGVjdFNjcm9sbCA9IHJvdXRlci5vcHRpb25zLnNjcm9sbEJlaGF2aW9yO1xuICAgIHZhciBzdXBwb3J0c1Njcm9sbCA9IHN1cHBvcnRzUHVzaFN0YXRlICYmIGV4cGVjdFNjcm9sbDtcblxuICAgIGlmIChzdXBwb3J0c1Njcm9sbCkge1xuICAgICAgc2V0dXBTY3JvbGwoKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihzdXBwb3J0c1B1c2hTdGF0ZSA/ICdwb3BzdGF0ZScgOiAnaGFzaGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjdXJyZW50ID0gdGhpcyQxLmN1cnJlbnQ7XG4gICAgICBpZiAoIWVuc3VyZVNsYXNoKCkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB0aGlzJDEudHJhbnNpdGlvblRvKGdldEhhc2goKSwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICAgIGlmIChzdXBwb3J0c1Njcm9sbCkge1xuICAgICAgICAgIGhhbmRsZVNjcm9sbCh0aGlzJDEucm91dGVyLCByb3V0ZSwgY3VycmVudCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdXBwb3J0c1B1c2hTdGF0ZSkge1xuICAgICAgICAgIHJlcGxhY2VIYXNoKHJvdXRlLmZ1bGxQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIHJlZiA9IHRoaXM7XG4gICAgdmFyIGZyb21Sb3V0ZSA9IHJlZi5jdXJyZW50O1xuICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgIHB1c2hIYXNoKHJvdXRlLmZ1bGxQYXRoKTtcbiAgICAgIGhhbmRsZVNjcm9sbCh0aGlzJDEucm91dGVyLCByb3V0ZSwgZnJvbVJvdXRlLCBmYWxzZSk7XG4gICAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuICAgIH0sIG9uQWJvcnQpO1xuICB9O1xuXG4gIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZSAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciByZWYgPSB0aGlzO1xuICAgIHZhciBmcm9tUm91dGUgPSByZWYuY3VycmVudDtcbiAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICByZXBsYWNlSGFzaChyb3V0ZS5mdWxsUGF0aCk7XG4gICAgICBoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlciwgcm91dGUsIGZyb21Sb3V0ZSwgZmFsc2UpO1xuICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcbiAgICB9LCBvbkFib3J0KTtcbiAgfTtcblxuICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyAobikge1xuICAgIHdpbmRvdy5oaXN0b3J5LmdvKG4pO1xuICB9O1xuXG4gIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5lbnN1cmVVUkwgPSBmdW5jdGlvbiBlbnN1cmVVUkwgKHB1c2gpIHtcbiAgICB2YXIgY3VycmVudCA9IHRoaXMuY3VycmVudC5mdWxsUGF0aDtcbiAgICBpZiAoZ2V0SGFzaCgpICE9PSBjdXJyZW50KSB7XG4gICAgICBwdXNoID8gcHVzaEhhc2goY3VycmVudCkgOiByZXBsYWNlSGFzaChjdXJyZW50KTtcbiAgICB9XG4gIH07XG5cbiAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdldEN1cnJlbnRMb2NhdGlvbiA9IGZ1bmN0aW9uIGdldEN1cnJlbnRMb2NhdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldEhhc2goKVxuICB9O1xuXG4gIHJldHVybiBIYXNoSGlzdG9yeTtcbn0oSGlzdG9yeSkpO1xuXG5mdW5jdGlvbiBjaGVja0ZhbGxiYWNrIChiYXNlKSB7XG4gIHZhciBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGJhc2UpO1xuICBpZiAoIS9eXFwvIy8udGVzdChsb2NhdGlvbikpIHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShcbiAgICAgIGNsZWFuUGF0aChiYXNlICsgJy8jJyArIGxvY2F0aW9uKVxuICAgICk7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5mdW5jdGlvbiBlbnN1cmVTbGFzaCAoKSB7XG4gIHZhciBwYXRoID0gZ2V0SGFzaCgpO1xuICBpZiAocGF0aC5jaGFyQXQoMCkgPT09ICcvJykge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgcmVwbGFjZUhhc2goJy8nICsgcGF0aCk7XG4gIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBnZXRIYXNoICgpIHtcbiAgLy8gV2UgY2FuJ3QgdXNlIHdpbmRvdy5sb2NhdGlvbi5oYXNoIGhlcmUgYmVjYXVzZSBpdCdzIG5vdFxuICAvLyBjb25zaXN0ZW50IGFjcm9zcyBicm93c2VycyAtIEZpcmVmb3ggd2lsbCBwcmUtZGVjb2RlIGl0IVxuICB2YXIgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICB2YXIgaW5kZXggPSBocmVmLmluZGV4T2YoJyMnKTtcbiAgcmV0dXJuIGluZGV4ID09PSAtMSA/ICcnIDogaHJlZi5zbGljZShpbmRleCArIDEpXG59XG5cbmZ1bmN0aW9uIGdldFVybCAocGF0aCkge1xuICB2YXIgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICB2YXIgaSA9IGhyZWYuaW5kZXhPZignIycpO1xuICB2YXIgYmFzZSA9IGkgPj0gMCA/IGhyZWYuc2xpY2UoMCwgaSkgOiBocmVmO1xuICByZXR1cm4gKGJhc2UgKyBcIiNcIiArIHBhdGgpXG59XG5cbmZ1bmN0aW9uIHB1c2hIYXNoIChwYXRoKSB7XG4gIGlmIChzdXBwb3J0c1B1c2hTdGF0ZSkge1xuICAgIHB1c2hTdGF0ZShnZXRVcmwocGF0aCkpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcGF0aDtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXBsYWNlSGFzaCAocGF0aCkge1xuICBpZiAoc3VwcG9ydHNQdXNoU3RhdGUpIHtcbiAgICByZXBsYWNlU3RhdGUoZ2V0VXJsKHBhdGgpKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShnZXRVcmwocGF0aCkpO1xuICB9XG59XG5cbi8qICAqL1xuXG5cbnZhciBBYnN0cmFjdEhpc3RvcnkgPSAoZnVuY3Rpb24gKEhpc3RvcnkkJDEpIHtcbiAgZnVuY3Rpb24gQWJzdHJhY3RIaXN0b3J5IChyb3V0ZXIsIGJhc2UpIHtcbiAgICBIaXN0b3J5JCQxLmNhbGwodGhpcywgcm91dGVyLCBiYXNlKTtcbiAgICB0aGlzLnN0YWNrID0gW107XG4gICAgdGhpcy5pbmRleCA9IC0xO1xuICB9XG5cbiAgaWYgKCBIaXN0b3J5JCQxICkgQWJzdHJhY3RIaXN0b3J5Ll9fcHJvdG9fXyA9IEhpc3RvcnkkJDE7XG4gIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBIaXN0b3J5JCQxICYmIEhpc3RvcnkkJDEucHJvdG90eXBlICk7XG4gIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBYnN0cmFjdEhpc3Rvcnk7XG5cbiAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCAobG9jYXRpb24sIG9uQ29tcGxldGUsIG9uQWJvcnQpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHRoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLCBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgIHRoaXMkMS5zdGFjayA9IHRoaXMkMS5zdGFjay5zbGljZSgwLCB0aGlzJDEuaW5kZXggKyAxKS5jb25jYXQocm91dGUpO1xuICAgICAgdGhpcyQxLmluZGV4Kys7XG4gICAgICBvbkNvbXBsZXRlICYmIG9uQ29tcGxldGUocm91dGUpO1xuICAgIH0sIG9uQWJvcnQpO1xuICB9O1xuXG4gIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UgKGxvY2F0aW9uLCBvbkNvbXBsZXRlLCBvbkFib3J0KSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICB0aGlzJDEuc3RhY2sgPSB0aGlzJDEuc3RhY2suc2xpY2UoMCwgdGhpcyQxLmluZGV4KS5jb25jYXQocm91dGUpO1xuICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKHJvdXRlKTtcbiAgICB9LCBvbkFib3J0KTtcbiAgfTtcblxuICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28gKG4pIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciB0YXJnZXRJbmRleCA9IHRoaXMuaW5kZXggKyBuO1xuICAgIGlmICh0YXJnZXRJbmRleCA8IDAgfHwgdGFyZ2V0SW5kZXggPj0gdGhpcy5zdGFjay5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB2YXIgcm91dGUgPSB0aGlzLnN0YWNrW3RhcmdldEluZGV4XTtcbiAgICB0aGlzLmNvbmZpcm1UcmFuc2l0aW9uKHJvdXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzJDEuaW5kZXggPSB0YXJnZXRJbmRleDtcbiAgICAgIHRoaXMkMS51cGRhdGVSb3V0ZShyb3V0ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5nZXRDdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbiBnZXRDdXJyZW50TG9jYXRpb24gKCkge1xuICAgIHZhciBjdXJyZW50ID0gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBjdXJyZW50ID8gY3VycmVudC5mdWxsUGF0aCA6ICcvJ1xuICB9O1xuXG4gIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZW5zdXJlVVJMID0gZnVuY3Rpb24gZW5zdXJlVVJMICgpIHtcbiAgICAvLyBub29wXG4gIH07XG5cbiAgcmV0dXJuIEFic3RyYWN0SGlzdG9yeTtcbn0oSGlzdG9yeSkpO1xuXG4vKiAgKi9cblxudmFyIFZ1ZVJvdXRlciA9IGZ1bmN0aW9uIFZ1ZVJvdXRlciAob3B0aW9ucykge1xuICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblxuICB0aGlzLmFwcCA9IG51bGw7XG4gIHRoaXMuYXBwcyA9IFtdO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB0aGlzLmJlZm9yZUhvb2tzID0gW107XG4gIHRoaXMucmVzb2x2ZUhvb2tzID0gW107XG4gIHRoaXMuYWZ0ZXJIb29rcyA9IFtdO1xuICB0aGlzLm1hdGNoZXIgPSBjcmVhdGVNYXRjaGVyKG9wdGlvbnMucm91dGVzIHx8IFtdLCB0aGlzKTtcblxuICB2YXIgbW9kZSA9IG9wdGlvbnMubW9kZSB8fCAnaGFzaCc7XG4gIHRoaXMuZmFsbGJhY2sgPSBtb2RlID09PSAnaGlzdG9yeScgJiYgIXN1cHBvcnRzUHVzaFN0YXRlICYmIG9wdGlvbnMuZmFsbGJhY2sgIT09IGZhbHNlO1xuICBpZiAodGhpcy5mYWxsYmFjaykge1xuICAgIG1vZGUgPSAnaGFzaCc7XG4gIH1cbiAgaWYgKCFpbkJyb3dzZXIpIHtcbiAgICBtb2RlID0gJ2Fic3RyYWN0JztcbiAgfVxuICB0aGlzLm1vZGUgPSBtb2RlO1xuXG4gIHN3aXRjaCAobW9kZSkge1xuICAgIGNhc2UgJ2hpc3RvcnknOlxuICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhUTUw1SGlzdG9yeSh0aGlzLCBvcHRpb25zLmJhc2UpO1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdoYXNoJzpcbiAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIYXNoSGlzdG9yeSh0aGlzLCBvcHRpb25zLmJhc2UsIHRoaXMuZmFsbGJhY2spO1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdhYnN0cmFjdCc6XG4gICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgQWJzdHJhY3RIaXN0b3J5KHRoaXMsIG9wdGlvbnMuYmFzZSk7XG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBhc3NlcnQoZmFsc2UsIChcImludmFsaWQgbW9kZTogXCIgKyBtb2RlKSk7XG4gICAgICB9XG4gIH1cbn07XG5cbnZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IGN1cnJlbnRSb3V0ZTogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gbWF0Y2ggKFxuICByYXcsXG4gIGN1cnJlbnQsXG4gIHJlZGlyZWN0ZWRGcm9tXG4pIHtcbiAgcmV0dXJuIHRoaXMubWF0Y2hlci5tYXRjaChyYXcsIGN1cnJlbnQsIHJlZGlyZWN0ZWRGcm9tKVxufTtcblxucHJvdG90eXBlQWNjZXNzb3JzLmN1cnJlbnRSb3V0ZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmhpc3RvcnkgJiYgdGhpcy5oaXN0b3J5LmN1cnJlbnRcbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIGluaXQgKGFwcCAvKiBWdWUgY29tcG9uZW50IGluc3RhbmNlICovKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBhc3NlcnQoXG4gICAgaW5zdGFsbC5pbnN0YWxsZWQsXG4gICAgXCJub3QgaW5zdGFsbGVkLiBNYWtlIHN1cmUgdG8gY2FsbCBgVnVlLnVzZShWdWVSb3V0ZXIpYCBcIiArXG4gICAgXCJiZWZvcmUgY3JlYXRpbmcgcm9vdCBpbnN0YW5jZS5cIlxuICApO1xuXG4gIHRoaXMuYXBwcy5wdXNoKGFwcCk7XG5cbiAgLy8gbWFpbiBhcHAgYWxyZWFkeSBpbml0aWFsaXplZC5cbiAgaWYgKHRoaXMuYXBwKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB0aGlzLmFwcCA9IGFwcDtcblxuICB2YXIgaGlzdG9yeSA9IHRoaXMuaGlzdG9yeTtcblxuICBpZiAoaGlzdG9yeSBpbnN0YW5jZW9mIEhUTUw1SGlzdG9yeSkge1xuICAgIGhpc3RvcnkudHJhbnNpdGlvblRvKGhpc3RvcnkuZ2V0Q3VycmVudExvY2F0aW9uKCkpO1xuICB9IGVsc2UgaWYgKGhpc3RvcnkgaW5zdGFuY2VvZiBIYXNoSGlzdG9yeSkge1xuICAgIHZhciBzZXR1cEhhc2hMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGhpc3Rvcnkuc2V0dXBMaXN0ZW5lcnMoKTtcbiAgICB9O1xuICAgIGhpc3RvcnkudHJhbnNpdGlvblRvKFxuICAgICAgaGlzdG9yeS5nZXRDdXJyZW50TG9jYXRpb24oKSxcbiAgICAgIHNldHVwSGFzaExpc3RlbmVyLFxuICAgICAgc2V0dXBIYXNoTGlzdGVuZXJcbiAgICApO1xuICB9XG5cbiAgaGlzdG9yeS5saXN0ZW4oZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgdGhpcyQxLmFwcHMuZm9yRWFjaChmdW5jdGlvbiAoYXBwKSB7XG4gICAgICBhcHAuX3JvdXRlID0gcm91dGU7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5iZWZvcmVFYWNoID0gZnVuY3Rpb24gYmVmb3JlRWFjaCAoZm4pIHtcbiAgcmV0dXJuIHJlZ2lzdGVySG9vayh0aGlzLmJlZm9yZUhvb2tzLCBmbilcbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUuYmVmb3JlUmVzb2x2ZSA9IGZ1bmN0aW9uIGJlZm9yZVJlc29sdmUgKGZuKSB7XG4gIHJldHVybiByZWdpc3Rlckhvb2sodGhpcy5yZXNvbHZlSG9va3MsIGZuKVxufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5hZnRlckVhY2ggPSBmdW5jdGlvbiBhZnRlckVhY2ggKGZuKSB7XG4gIHJldHVybiByZWdpc3Rlckhvb2sodGhpcy5hZnRlckhvb2tzLCBmbilcbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUub25SZWFkeSA9IGZ1bmN0aW9uIG9uUmVhZHkgKGNiLCBlcnJvckNiKSB7XG4gIHRoaXMuaGlzdG9yeS5vblJlYWR5KGNiLCBlcnJvckNiKTtcbn07XG5cblZ1ZVJvdXRlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IgKGVycm9yQ2IpIHtcbiAgdGhpcy5oaXN0b3J5Lm9uRXJyb3IoZXJyb3JDYik7XG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuICB0aGlzLmhpc3RvcnkucHVzaChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCk7XG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlIChsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCkge1xuICB0aGlzLmhpc3RvcnkucmVwbGFjZShsb2NhdGlvbiwgb25Db21wbGV0ZSwgb25BYm9ydCk7XG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28gKG4pIHtcbiAgdGhpcy5oaXN0b3J5LmdvKG4pO1xufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5iYWNrID0gZnVuY3Rpb24gYmFjayAoKSB7XG4gIHRoaXMuZ28oLTEpO1xufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5mb3J3YXJkID0gZnVuY3Rpb24gZm9yd2FyZCAoKSB7XG4gIHRoaXMuZ28oMSk7XG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLmdldE1hdGNoZWRDb21wb25lbnRzID0gZnVuY3Rpb24gZ2V0TWF0Y2hlZENvbXBvbmVudHMgKHRvKSB7XG4gIHZhciByb3V0ZSA9IHRvXG4gICAgPyB0by5tYXRjaGVkXG4gICAgICA/IHRvXG4gICAgICA6IHRoaXMucmVzb2x2ZSh0bykucm91dGVcbiAgICA6IHRoaXMuY3VycmVudFJvdXRlO1xuICBpZiAoIXJvdXRlKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgcmV0dXJuIFtdLmNvbmNhdC5hcHBseShbXSwgcm91dGUubWF0Y2hlZC5tYXAoZnVuY3Rpb24gKG0pIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMobS5jb21wb25lbnRzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIG0uY29tcG9uZW50c1trZXldXG4gICAgfSlcbiAgfSkpXG59O1xuXG5WdWVSb3V0ZXIucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbiByZXNvbHZlIChcbiAgdG8sXG4gIGN1cnJlbnQsXG4gIGFwcGVuZFxuKSB7XG4gIHZhciBsb2NhdGlvbiA9IG5vcm1hbGl6ZUxvY2F0aW9uKFxuICAgIHRvLFxuICAgIGN1cnJlbnQgfHwgdGhpcy5oaXN0b3J5LmN1cnJlbnQsXG4gICAgYXBwZW5kLFxuICAgIHRoaXNcbiAgKTtcbiAgdmFyIHJvdXRlID0gdGhpcy5tYXRjaChsb2NhdGlvbiwgY3VycmVudCk7XG4gIHZhciBmdWxsUGF0aCA9IHJvdXRlLnJlZGlyZWN0ZWRGcm9tIHx8IHJvdXRlLmZ1bGxQYXRoO1xuICB2YXIgYmFzZSA9IHRoaXMuaGlzdG9yeS5iYXNlO1xuICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYoYmFzZSwgZnVsbFBhdGgsIHRoaXMubW9kZSk7XG4gIHJldHVybiB7XG4gICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgIHJvdXRlOiByb3V0ZSxcbiAgICBocmVmOiBocmVmLFxuICAgIC8vIGZvciBiYWNrd2FyZHMgY29tcGF0XG4gICAgbm9ybWFsaXplZFRvOiBsb2NhdGlvbixcbiAgICByZXNvbHZlZDogcm91dGVcbiAgfVxufTtcblxuVnVlUm91dGVyLnByb3RvdHlwZS5hZGRSb3V0ZXMgPSBmdW5jdGlvbiBhZGRSb3V0ZXMgKHJvdXRlcykge1xuICB0aGlzLm1hdGNoZXIuYWRkUm91dGVzKHJvdXRlcyk7XG4gIGlmICh0aGlzLmhpc3RvcnkuY3VycmVudCAhPT0gU1RBUlQpIHtcbiAgICB0aGlzLmhpc3RvcnkudHJhbnNpdGlvblRvKHRoaXMuaGlzdG9yeS5nZXRDdXJyZW50TG9jYXRpb24oKSk7XG4gIH1cbn07XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBWdWVSb3V0ZXIucHJvdG90eXBlLCBwcm90b3R5cGVBY2Nlc3NvcnMgKTtcblxuZnVuY3Rpb24gcmVnaXN0ZXJIb29rIChsaXN0LCBmbikge1xuICBsaXN0LnB1c2goZm4pO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpID0gbGlzdC5pbmRleE9mKGZuKTtcbiAgICBpZiAoaSA+IC0xKSB7IGxpc3Quc3BsaWNlKGksIDEpOyB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlSHJlZiAoYmFzZSwgZnVsbFBhdGgsIG1vZGUpIHtcbiAgdmFyIHBhdGggPSBtb2RlID09PSAnaGFzaCcgPyAnIycgKyBmdWxsUGF0aCA6IGZ1bGxQYXRoO1xuICByZXR1cm4gYmFzZSA/IGNsZWFuUGF0aChiYXNlICsgJy8nICsgcGF0aCkgOiBwYXRoXG59XG5cblZ1ZVJvdXRlci5pbnN0YWxsID0gaW5zdGFsbDtcblZ1ZVJvdXRlci52ZXJzaW9uID0gJzMuMC4xJztcblxuaWYgKGluQnJvd3NlciAmJiB3aW5kb3cuVnVlKSB7XG4gIHdpbmRvdy5WdWUudXNlKFZ1ZVJvdXRlcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVnVlUm91dGVyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Z1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyLmNvbW1vbi5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2F4aW9zJyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIEF4aW9zID0gcmVxdWlyZSgnLi9jb3JlL0F4aW9zJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7XG4gIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICB2YXIgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCk7XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcbnZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtcblxuLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5heGlvcy5BeGlvcyA9IEF4aW9zO1xuXG4vLyBGYWN0b3J5IGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2VzXG5heGlvcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKHV0aWxzLm1lcmdlKGRlZmF1bHRzLCBpbnN0YW5jZUNvbmZpZykpO1xufTtcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWwnKTtcbmF4aW9zLkNhbmNlbFRva2VuID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsVG9rZW4nKTtcbmF4aW9zLmlzQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvaXNDYW5jZWwnKTtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcbmF4aW9zLnNwcmVhZCA9IHJlcXVpcmUoJy4vaGVscGVycy9zcHJlYWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBheGlvcztcblxuLy8gQWxsb3cgdXNlIG9mIGRlZmF1bHQgaW1wb3J0IHN5bnRheCBpbiBUeXBlU2NyaXB0XG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gYXhpb3M7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2F4aW9zLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIGlzQnVmZmVyID0gcmVxdWlyZSgnaXMtYnVmZmVyJyk7XG5cbi8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqL1xuXG4vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG4gIHJldHVybiAodHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJykgJiYgKHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAodmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQmxvYih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xufVxuXG4vKipcbiAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gKi9cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyovLCAnJykucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnXG4gICk7XG59XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW1cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XG4gIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAgIG9iaiA9IFtvYmpdO1xuICB9XG5cbiAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBhcnJheSB2YWx1ZXNcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWNjZXB0cyB2YXJhcmdzIGV4cGVjdGluZyBlYWNoIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCwgdGhlblxuICogaW1tdXRhYmx5IG1lcmdlcyB0aGUgcHJvcGVydGllcyBvZiBlYWNoIG9iamVjdCBhbmQgcmV0dXJucyByZXN1bHQuXG4gKlxuICogV2hlbiBtdWx0aXBsZSBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUga2V5IHRoZSBsYXRlciBvYmplY3QgaW5cbiAqIHRoZSBhcmd1bWVudHMgbGlzdCB3aWxsIHRha2UgcHJlY2VkZW5jZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgcmVzdWx0ID0gbWVyZ2Uoe2ZvbzogMTIzfSwge2ZvbzogNDU2fSk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQuZm9vKTsgLy8gb3V0cHV0cyA0NTZcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZVxuICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIG1lcmdlKC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLykge1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG4gICAgaWYgKHR5cGVvZiByZXN1bHRba2V5XSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7XG4gIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gYTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzQXJyYXk6IGlzQXJyYXksXG4gIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsXG4gIGlzQnVmZmVyOiBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YTogaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LFxuICBpc1N0cmluZzogaXNTdHJpbmcsXG4gIGlzTnVtYmVyOiBpc051bWJlcixcbiAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWQsXG4gIGlzRGF0ZTogaXNEYXRlLFxuICBpc0ZpbGU6IGlzRmlsZSxcbiAgaXNCbG9iOiBpc0Jsb2IsXG4gIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGlzU3RyZWFtOiBpc1N0cmVhbSxcbiAgaXNVUkxTZWFyY2hQYXJhbXM6IGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIGZvckVhY2g6IGZvckVhY2gsXG4gIG1lcmdlOiBtZXJnZSxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIHRyaW06IHRyaW1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL3V0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGlzIGEgQnVmZmVyXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuXG4vLyBUaGUgX2lzQnVmZmVyIGNoZWNrIGlzIGZvciBTYWZhcmkgNS03IHN1cHBvcnQsIGJlY2F1c2UgaXQncyBtaXNzaW5nXG4vLyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLiBSZW1vdmUgdGhpcyBldmVudHVhbGx5XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPSBudWxsICYmIChpc0J1ZmZlcihvYmopIHx8IGlzU2xvd0J1ZmZlcihvYmopIHx8ICEhb2JqLl9pc0J1ZmZlcilcbn1cblxuZnVuY3Rpb24gaXNCdWZmZXIgKG9iaikge1xuICByZXR1cm4gISFvYmouY29uc3RydWN0b3IgJiYgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKVxufVxuXG4vLyBGb3IgTm9kZSB2MC4xMCBzdXBwb3J0LiBSZW1vdmUgdGhpcyBldmVudHVhbGx5LlxuZnVuY3Rpb24gaXNTbG93QnVmZmVyIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmoucmVhZEZsb2F0TEUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5zbGljZSA9PT0gJ2Z1bmN0aW9uJyAmJiBpc0J1ZmZlcihvYmouc2xpY2UoMCwgMCkpXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaXMtYnVmZmVyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vLi4vZGVmYXVsdHMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcbiAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAqL1xuQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWcgPSB1dGlscy5tZXJnZSh7XG4gICAgICB1cmw6IGFyZ3VtZW50c1swXVxuICAgIH0sIGFyZ3VtZW50c1sxXSk7XG4gIH1cblxuICBjb25maWcgPSB1dGlscy5tZXJnZShkZWZhdWx0cywge21ldGhvZDogJ2dldCd9LCB0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICBjb25maWcubWV0aG9kID0gY29uZmlnLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuXG4gIC8vIEhvb2sgdXAgaW50ZXJjZXB0b3JzIG1pZGRsZXdhcmVcbiAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcbiAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcblxuICB0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24gdW5zaGlmdFJlcXVlc3RJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIHB1c2hSZXNwb25zZUludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIGNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHdoaWxlIChjaGFpbi5sZW5ndGgpIHtcbiAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmxcbiAgICB9KSk7XG4gIH07XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGRhdGEsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsLFxuICAgICAgZGF0YTogZGF0YVxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEF4aW9zO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUnKTtcblxudmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0ge1xuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbmZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG4gIHZhciBhZGFwdGVyO1xuICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy94aHInKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMvaHR0cCcpO1xuICB9XG4gIHJldHVybiBhZGFwdGVyO1xufVxuXG52YXIgZGVmYXVsdHMgPSB7XG4gIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cbiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykge1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9IGNhdGNoIChlKSB7IC8qIElnbm9yZSAqLyB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICAvKipcbiAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG4gICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcblxuICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7XG4gICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwO1xuICB9XG59O1xuXG5kZWZhdWx0cy5oZWFkZXJzID0ge1xuICBjb21tb246IHtcbiAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKidcbiAgfVxufTtcblxudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB1dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvZGVmYXVsdHMuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG4gIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG4gICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBzZXR0bGUgPSByZXF1aXJlKCcuLy4uL2NvcmUvc2V0dGxlJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBwYXJzZUhlYWRlcnMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzJyk7XG52YXIgaXNVUkxTYW1lT3JpZ2luID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbicpO1xudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi4vY29yZS9jcmVhdGVFcnJvcicpO1xudmFyIGJ0b2EgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmJ0b2EgJiYgd2luZG93LmJ0b2EuYmluZCh3aW5kb3cpKSB8fCByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnRvYScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG4gICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHZhciBsb2FkRXZlbnQgPSAnb25yZWFkeXN0YXRlY2hhbmdlJztcbiAgICB2YXIgeERvbWFpbiA9IGZhbHNlO1xuXG4gICAgLy8gRm9yIElFIDgvOSBDT1JTIHN1cHBvcnRcbiAgICAvLyBPbmx5IHN1cHBvcnRzIFBPU1QgYW5kIEdFVCBjYWxscyBhbmQgZG9lc24ndCByZXR1cm5zIHRoZSByZXNwb25zZSBoZWFkZXJzLlxuICAgIC8vIERPTidUIGRvIHRoaXMgZm9yIHRlc3RpbmcgYi9jIFhNTEh0dHBSZXF1ZXN0IGlzIG1vY2tlZCwgbm90IFhEb21haW5SZXF1ZXN0LlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHdpbmRvdy5YRG9tYWluUmVxdWVzdCAmJiAhKCd3aXRoQ3JlZGVudGlhbHMnIGluIHJlcXVlc3QpICYmXG4gICAgICAgICFpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpIHtcbiAgICAgIHJlcXVlc3QgPSBuZXcgd2luZG93LlhEb21haW5SZXF1ZXN0KCk7XG4gICAgICBsb2FkRXZlbnQgPSAnb25sb2FkJztcbiAgICAgIHhEb21haW4gPSB0cnVlO1xuICAgICAgcmVxdWVzdC5vbnByb2dyZXNzID0gZnVuY3Rpb24gaGFuZGxlUHJvZ3Jlc3MoKSB7fTtcbiAgICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHt9O1xuICAgIH1cblxuICAgIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cbiAgICBpZiAoY29uZmlnLmF1dGgpIHtcbiAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnO1xuICAgICAgdmFyIHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmQgfHwgJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuICAgIH1cblxuICAgIHJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIGJ1aWxkVVJMKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xuXG4gICAgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZVxuICAgIHJlcXVlc3RbbG9hZEV2ZW50XSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QgfHwgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCAmJiAheERvbWFpbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgIC8vIGhhbmRsZWQgYnkgb25lcnJvciBpbnN0ZWFkXG4gICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAwICYmICEocmVxdWVzdC5yZXNwb25zZVVSTCAmJiByZXF1ZXN0LnJlc3BvbnNlVVJMLmluZGV4T2YoJ2ZpbGU6JykgPT09IDApKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2VcbiAgICAgIHZhciByZXNwb25zZUhlYWRlcnMgPSAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ID8gcGFyc2VIZWFkZXJzKHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpIDogbnVsbDtcbiAgICAgIHZhciByZXNwb25zZURhdGEgPSAhY29uZmlnLnJlc3BvbnNlVHlwZSB8fCBjb25maWcucmVzcG9uc2VUeXBlID09PSAndGV4dCcgPyByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgLy8gSUUgc2VuZHMgMTIyMyBpbnN0ZWFkIG9mIDIwNCAoaHR0cHM6Ly9naXRodWIuY29tL2F4aW9zL2F4aW9zL2lzc3Vlcy8yMDEpXG4gICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMgPT09IDEyMjMgPyAyMDQgOiByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXMgPT09IDEyMjMgPyAnTm8gQ29udGVudCcgOiByZXF1ZXN0LnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgIHJlcXVlc3Q6IHJlcXVlc3RcbiAgICAgIH07XG5cbiAgICAgIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlclxuICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBjb25maWcsIG51bGwsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSB0aW1lb3V0XG4gICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge1xuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCcsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsXG4gICAgICAgIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgIC8vIFRoaXMgaXMgb25seSBkb25lIGlmIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50LlxuICAgIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG4gICAgaWYgKHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpIHtcbiAgICAgIHZhciBjb29raWVzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2Nvb2tpZXMnKTtcblxuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICB2YXIgeHNyZlZhbHVlID0gKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgfHwgaXNVUkxTYW1lT3JpZ2luKGNvbmZpZy51cmwpKSAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgP1xuICAgICAgICAgIGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDpcbiAgICAgICAgICB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3RcbiAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpIHtcbiAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gRXhwZWN0ZWQgRE9NRXhjZXB0aW9uIHRocm93biBieSBicm93c2VycyBub3QgY29tcGF0aWJsZSBYTUxIdHRwUmVxdWVzdCBMZXZlbCAyLlxuICAgICAgICAvLyBCdXQsIHRoaXMgY2FuIGJlIHN1cHByZXNzZWQgZm9yICdqc29uJyB0eXBlIGFzIGl0IGNhbiBiZSBwYXJzZWQgYnkgZGVmYXVsdCAndHJhbnNmb3JtUmVzcG9uc2UnIGZ1bmN0aW9uLlxuICAgICAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb25cbiAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbi5wcm9taXNlLnRoZW4oZnVuY3Rpb24gb25DYW5jZWxlZChjYW5jZWwpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZWplY3QoY2FuY2VsKTtcbiAgICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0RGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSk7XG4gIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4vY3JlYXRlRXJyb3InKTtcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7XG4gIC8vIE5vdGU6IHN0YXR1cyBpcyBub3QgZXhwb3NlZCBieSBYRG9tYWluUmVxdWVzdFxuICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChjcmVhdGVFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICBudWxsLFxuICAgICAgcmVzcG9uc2UucmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlXG4gICAgKSk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBlbmhhbmNlRXJyb3IgPSByZXF1aXJlKCcuL2VuaGFuY2VFcnJvcicpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL2NyZWF0ZUVycm9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuICBpZiAoY29kZSkge1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICB9XG4gIGVycm9yLnJlcXVlc3QgPSByZXF1ZXN0O1xuICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICByZXR1cm4gZXJyb3I7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL2VuaGFuY2VFcnJvci5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcbiAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbCA9IFt2YWxdO1xuICAgICAgfVxuXG4gICAgICB1dGlscy5mb3JFYWNoKHZhbCwgZnVuY3Rpb24gcGFyc2VWYWx1ZSh2KSB7XG4gICAgICAgIGlmICh1dGlscy5pc0RhdGUodikpIHtcbiAgICAgICAgICB2ID0gdi50b0lTT1N0cmluZygpO1xuICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KHYpKSB7XG4gICAgICAgICAgdiA9IEpTT04uc3RyaW5naWZ5KHYpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2goZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodikpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFydHMuam9pbignJicpO1xuICB9XG5cbiAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHtcbiAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8vIEhlYWRlcnMgd2hvc2UgZHVwbGljYXRlcyBhcmUgaWdub3JlZCBieSBub2RlXG4vLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzXG52YXIgaWdub3JlRHVwbGljYXRlT2YgPSBbXG4gICdhZ2UnLCAnYXV0aG9yaXphdGlvbicsICdjb250ZW50LWxlbmd0aCcsICdjb250ZW50LXR5cGUnLCAnZXRhZycsXG4gICdleHBpcmVzJywgJ2Zyb20nLCAnaG9zdCcsICdpZi1tb2RpZmllZC1zaW5jZScsICdpZi11bm1vZGlmaWVkLXNpbmNlJyxcbiAgJ2xhc3QtbW9kaWZpZWQnLCAnbG9jYXRpb24nLCAnbWF4LWZvcndhcmRzJywgJ3Byb3h5LWF1dGhvcml6YXRpb24nLFxuICAncmVmZXJlcicsICdyZXRyeS1hZnRlcicsICd1c2VyLWFnZW50J1xuXTtcblxuLyoqXG4gKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0XG4gKlxuICogYGBgXG4gKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVFxuICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXG4gKiBDb25uZWN0aW9uOiBrZWVwLWFsaXZlXG4gKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZFxuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZFxuICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3RcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuICB2YXIgcGFyc2VkID0ge307XG4gIHZhciBrZXk7XG4gIHZhciB2YWw7XG4gIHZhciBpO1xuXG4gIGlmICghaGVhZGVycykgeyByZXR1cm4gcGFyc2VkOyB9XG5cbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHtcbiAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAga2V5ID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cigwLCBpKSkudG9Mb3dlckNhc2UoKTtcbiAgICB2YWwgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKGkgKyAxKSk7XG5cbiAgICBpZiAoa2V5KSB7XG4gICAgICBpZiAocGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2YuaW5kZXhPZihrZXkpID49IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gJ3NldC1jb29raWUnKSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gKHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gOiBbXSkuY29uY2F0KFt2YWxdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGFyc2VkO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanNcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG4gIC8vIHdoZXRoZXIgdGhlIHJlcXVlc3QgVVJMIGlzIG9mIHRoZSBzYW1lIG9yaWdpbiBhcyBjdXJyZW50IGxvY2F0aW9uLlxuICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHZhciBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgdmFyIG9yaWdpblVSTDtcblxuICAgIC8qKlxuICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7XG4gICAgICB2YXIgaHJlZiA9IHVybDtcblxuICAgICAgaWYgKG1zaWUpIHtcbiAgICAgICAgLy8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllc1xuICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICAgICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7XG4gICAgICB9XG5cbiAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gICAgICAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXG4gICAgICByZXR1cm4ge1xuICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuICAgICAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG4gICAgICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXG4gICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcbiAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcbiAgICAgICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJykgP1xuICAgICAgICAgICAgICAgICAgdXJsUGFyc2luZ05vZGUucGF0aG5hbWUgOlxuICAgICAgICAgICAgICAgICAgJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgb3JpZ2luVVJMID0gcmVzb2x2ZVVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cbiAgICAvKipcbiAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0XG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHtcbiAgICAgIHZhciBwYXJzZWQgPSAodXRpbHMuaXNTdHJpbmcocmVxdWVzdFVSTCkpID8gcmVzb2x2ZVVSTChyZXF1ZXN0VVJMKSA6IHJlcXVlc3RVUkw7XG4gICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG4gICAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVVJMLmhvc3QpO1xuICAgIH07XG4gIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudnMgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gIH0pKClcbik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8vIGJ0b2EgcG9seWZpbGwgZm9yIElFPDEwIGNvdXJ0ZXN5IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXZpZGNoYW1iZXJzL0Jhc2U2NC5qc1xuXG52YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nO1xuXG5mdW5jdGlvbiBFKCkge1xuICB0aGlzLm1lc3NhZ2UgPSAnU3RyaW5nIGNvbnRhaW5zIGFuIGludmFsaWQgY2hhcmFjdGVyJztcbn1cbkUucHJvdG90eXBlID0gbmV3IEVycm9yO1xuRS5wcm90b3R5cGUuY29kZSA9IDU7XG5FLnByb3RvdHlwZS5uYW1lID0gJ0ludmFsaWRDaGFyYWN0ZXJFcnJvcic7XG5cbmZ1bmN0aW9uIGJ0b2EoaW5wdXQpIHtcbiAgdmFyIHN0ciA9IFN0cmluZyhpbnB1dCk7XG4gIHZhciBvdXRwdXQgPSAnJztcbiAgZm9yIChcbiAgICAvLyBpbml0aWFsaXplIHJlc3VsdCBhbmQgY291bnRlclxuICAgIHZhciBibG9jaywgY2hhckNvZGUsIGlkeCA9IDAsIG1hcCA9IGNoYXJzO1xuICAgIC8vIGlmIHRoZSBuZXh0IHN0ciBpbmRleCBkb2VzIG5vdCBleGlzdDpcbiAgICAvLyAgIGNoYW5nZSB0aGUgbWFwcGluZyB0YWJsZSB0byBcIj1cIlxuICAgIC8vICAgY2hlY2sgaWYgZCBoYXMgbm8gZnJhY3Rpb25hbCBkaWdpdHNcbiAgICBzdHIuY2hhckF0KGlkeCB8IDApIHx8IChtYXAgPSAnPScsIGlkeCAlIDEpO1xuICAgIC8vIFwiOCAtIGlkeCAlIDEgKiA4XCIgZ2VuZXJhdGVzIHRoZSBzZXF1ZW5jZSAyLCA0LCA2LCA4XG4gICAgb3V0cHV0ICs9IG1hcC5jaGFyQXQoNjMgJiBibG9jayA+PiA4IC0gaWR4ICUgMSAqIDgpXG4gICkge1xuICAgIGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaWR4ICs9IDMgLyA0KTtcbiAgICBpZiAoY2hhckNvZGUgPiAweEZGKSB7XG4gICAgICB0aHJvdyBuZXcgRSgpO1xuICAgIH1cbiAgICBibG9jayA9IGJsb2NrIDw8IDggfCBjaGFyQ29kZTtcbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJ0b2E7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvYnRvYS5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICB2YXIgY29va2llID0gW107XG4gICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcblxuICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICB9LFxuXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgfTtcbiAgfSkoKVxuKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgdHJhbnNmb3JtRGF0YSA9IHJlcXVpcmUoJy4vdHJhbnNmb3JtRGF0YScpO1xudmFyIGlzQ2FuY2VsID0gcmVxdWlyZSgnLi4vY2FuY2VsL2lzQ2FuY2VsJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cycpO1xudmFyIGlzQWJzb2x1dGVVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTCcpO1xudmFyIGNvbWJpbmVVUkxzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2NvbWJpbmVVUkxzJyk7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB1c2luZyB0aGUgY29uZmlndXJlZCBhZGFwdGVyLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0XG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgLy8gU3VwcG9ydCBiYXNlVVJMIGNvbmZpZ1xuICBpZiAoY29uZmlnLmJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwoY29uZmlnLnVybCkpIHtcbiAgICBjb25maWcudXJsID0gY29tYmluZVVSTHMoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuICB9XG5cbiAgLy8gRW5zdXJlIGhlYWRlcnMgZXhpc3RcbiAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcblxuICAvLyBUcmFuc2Zvcm0gcmVxdWVzdCBkYXRhXG4gIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICBjb25maWcuZGF0YSxcbiAgICBjb25maWcuaGVhZGVycyxcbiAgICBjb25maWcudHJhbnNmb3JtUmVxdWVzdFxuICApO1xuXG4gIC8vIEZsYXR0ZW4gaGVhZGVyc1xuICBjb25maWcuaGVhZGVycyA9IHV0aWxzLm1lcmdlKFxuICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vbiB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVycyB8fCB7fVxuICApO1xuXG4gIHV0aWxzLmZvckVhY2goXG4gICAgWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAncG9zdCcsICdwdXQnLCAncGF0Y2gnLCAnY29tbW9uJ10sXG4gICAgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7XG4gICAgICBkZWxldGUgY29uZmlnLmhlYWRlcnNbbWV0aG9kXTtcbiAgICB9XG4gICk7XG5cbiAgdmFyIGFkYXB0ZXIgPSBjb25maWcuYWRhcHRlciB8fCBkZWZhdWx0cy5hZGFwdGVyO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgIHJlc3BvbnNlLmRhdGEsXG4gICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcbiAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWRcbiAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG4gIHJldHVybiAvXihbYS16XVthLXpcXGRcXCtcXC1cXC5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcbiAgcmV0dXJuIHJlbGF0aXZlVVJMXG4gICAgPyBiYXNlVVJMLnJlcGxhY2UoL1xcLyskLywgJycpICsgJy8nICsgcmVsYXRpdmVVUkwucmVwbGFjZSgvXlxcLysvLCAnJylcbiAgICA6IGJhc2VVUkw7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG59XG5cbkNhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7XG59O1xuXG5DYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2FuY2VsID0gcmVxdWlyZSgnLi9DYW5jZWwnKTtcblxuLyoqXG4gKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZXhlY3V0b3IgVGhlIGV4ZWN1dG9yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBDYW5jZWxUb2tlbihleGVjdXRvcikge1xuICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICB9XG5cbiAgdmFyIHJlc29sdmVQcm9taXNlO1xuICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNlRXhlY3V0b3IocmVzb2x2ZSkge1xuICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgfSk7XG5cbiAgdmFyIHRva2VuID0gdGhpcztcbiAgZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2UpIHtcbiAgICBpZiAodG9rZW4ucmVhc29uKSB7XG4gICAgICAvLyBDYW5jZWxsYXRpb24gaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0b2tlbi5yZWFzb24gPSBuZXcgQ2FuY2VsKG1lc3NhZ2UpO1xuICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbkNhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgdGhyb3cgdGhpcy5yZWFzb247XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC5cbiAqL1xuQ2FuY2VsVG9rZW4uc291cmNlID0gZnVuY3Rpb24gc291cmNlKCkge1xuICB2YXIgY2FuY2VsO1xuICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgIGNhbmNlbCA9IGM7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHRva2VuOiB0b2tlbixcbiAgICBjYW5jZWw6IGNhbmNlbFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWxUb2tlbjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY2FuY2VsL0NhbmNlbFRva2VuLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cbiAqXG4gKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuICpcbiAqICBgYGBqc1xuICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cbiAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcbiAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICogIGBgYFxuICpcbiAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuICpcbiAqICBgYGBqc1xuICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwcmVhZChjYWxsYmFjaykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHtcbiAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTtcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgVnVlIGZyb20gJ3Z1ZSdcbmltcG9ydCBWdWV4IGZyb20gJ3Z1ZXgnXG5cblZ1ZS51c2UoVnVleClcblxuY29uc3Qgc3RhdGUgPSB7XG4gICAgbG9hZFN0YXR1czogZmFsc2Vcbn1cblxuY29uc3QgbXV0YXRpb25zID0ge1xuICAgIC8vbG9hZGluZ+W8gOWFs1xuICAgIExPQURfU1RBVFVTOiBmdW5jdGlvbihzdGF0ZSxkYXRhKXtcbiAgICAgICAgc3RhdGUubG9hZFN0YXR1cyA9IGRhdGE7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHtcbiAgICBzdGF0ZSxcbiAgICBtdXRhdGlvbnNcbn0pXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3Z1ZXgvc3RvcmUuanMiLCIvKipcbiAqIHZ1ZXggdjMuMC4xXG4gKiAoYykgMjAxNyBFdmFuIFlvdVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGFwcGx5TWl4aW4gPSBmdW5jdGlvbiAoVnVlKSB7XG4gIHZhciB2ZXJzaW9uID0gTnVtYmVyKFZ1ZS52ZXJzaW9uLnNwbGl0KCcuJylbMF0pO1xuXG4gIGlmICh2ZXJzaW9uID49IDIpIHtcbiAgICBWdWUubWl4aW4oeyBiZWZvcmVDcmVhdGU6IHZ1ZXhJbml0IH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIG92ZXJyaWRlIGluaXQgYW5kIGluamVjdCB2dWV4IGluaXQgcHJvY2VkdXJlXG4gICAgLy8gZm9yIDEueCBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICB2YXIgX2luaXQgPSBWdWUucHJvdG90eXBlLl9pbml0O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgaWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cbiAgICAgIG9wdGlvbnMuaW5pdCA9IG9wdGlvbnMuaW5pdFxuICAgICAgICA/IFt2dWV4SW5pdF0uY29uY2F0KG9wdGlvbnMuaW5pdClcbiAgICAgICAgOiB2dWV4SW5pdDtcbiAgICAgIF9pbml0LmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWdWV4IGluaXQgaG9vaywgaW5qZWN0ZWQgaW50byBlYWNoIGluc3RhbmNlcyBpbml0IGhvb2tzIGxpc3QuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHZ1ZXhJbml0ICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgLy8gc3RvcmUgaW5qZWN0aW9uXG4gICAgaWYgKG9wdGlvbnMuc3RvcmUpIHtcbiAgICAgIHRoaXMuJHN0b3JlID0gdHlwZW9mIG9wdGlvbnMuc3RvcmUgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBvcHRpb25zLnN0b3JlKClcbiAgICAgICAgOiBvcHRpb25zLnN0b3JlO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQuJHN0b3JlKSB7XG4gICAgICB0aGlzLiRzdG9yZSA9IG9wdGlvbnMucGFyZW50LiRzdG9yZTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBkZXZ0b29sSG9vayA9XG4gIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXG5mdW5jdGlvbiBkZXZ0b29sUGx1Z2luIChzdG9yZSkge1xuICBpZiAoIWRldnRvb2xIb29rKSB7IHJldHVybiB9XG5cbiAgc3RvcmUuX2RldnRvb2xIb29rID0gZGV2dG9vbEhvb2s7XG5cbiAgZGV2dG9vbEhvb2suZW1pdCgndnVleDppbml0Jywgc3RvcmUpO1xuXG4gIGRldnRvb2xIb29rLm9uKCd2dWV4OnRyYXZlbC10by1zdGF0ZScsIGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkge1xuICAgIHN0b3JlLnJlcGxhY2VTdGF0ZSh0YXJnZXRTdGF0ZSk7XG4gIH0pO1xuXG4gIHN0b3JlLnN1YnNjcmliZShmdW5jdGlvbiAobXV0YXRpb24sIHN0YXRlKSB7XG4gICAgZGV2dG9vbEhvb2suZW1pdCgndnVleDptdXRhdGlvbicsIG11dGF0aW9uLCBzdGF0ZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZmlyc3QgaXRlbSB0aGF0IHBhc3MgdGhlIHRlc3RcbiAqIGJ5IHNlY29uZCBhcmd1bWVudCBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGxpc3RcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAqIEByZXR1cm4geyp9XG4gKi9cbi8qKlxuICogRGVlcCBjb3B5IHRoZSBnaXZlbiBvYmplY3QgY29uc2lkZXJpbmcgY2lyY3VsYXIgc3RydWN0dXJlLlxuICogVGhpcyBmdW5jdGlvbiBjYWNoZXMgYWxsIG5lc3RlZCBvYmplY3RzIGFuZCBpdHMgY29waWVzLlxuICogSWYgaXQgZGV0ZWN0cyBjaXJjdWxhciBzdHJ1Y3R1cmUsIHVzZSBjYWNoZWQgY29weSB0byBhdm9pZCBpbmZpbml0ZSBsb29wLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IGNhY2hlXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cblxuLyoqXG4gKiBmb3JFYWNoIGZvciBvYmplY3RcbiAqL1xuZnVuY3Rpb24gZm9yRWFjaFZhbHVlIChvYmosIGZuKSB7XG4gIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBmbihvYmpba2V5XSwga2V5KTsgfSk7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0IChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0J1xufVxuXG5mdW5jdGlvbiBpc1Byb21pc2UgKHZhbCkge1xuICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwudGhlbiA9PT0gJ2Z1bmN0aW9uJ1xufVxuXG5mdW5jdGlvbiBhc3NlcnQgKGNvbmRpdGlvbiwgbXNnKSB7XG4gIGlmICghY29uZGl0aW9uKSB7IHRocm93IG5ldyBFcnJvcigoXCJbdnVleF0gXCIgKyBtc2cpKSB9XG59XG5cbnZhciBNb2R1bGUgPSBmdW5jdGlvbiBNb2R1bGUgKHJhd01vZHVsZSwgcnVudGltZSkge1xuICB0aGlzLnJ1bnRpbWUgPSBydW50aW1lO1xuICB0aGlzLl9jaGlsZHJlbiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuX3Jhd01vZHVsZSA9IHJhd01vZHVsZTtcbiAgdmFyIHJhd1N0YXRlID0gcmF3TW9kdWxlLnN0YXRlO1xuICB0aGlzLnN0YXRlID0gKHR5cGVvZiByYXdTdGF0ZSA9PT0gJ2Z1bmN0aW9uJyA/IHJhd1N0YXRlKCkgOiByYXdTdGF0ZSkgfHwge307XG59O1xuXG52YXIgcHJvdG90eXBlQWNjZXNzb3JzJDEgPSB7IG5hbWVzcGFjZWQ6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTtcblxucHJvdG90eXBlQWNjZXNzb3JzJDEubmFtZXNwYWNlZC5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAhIXRoaXMuX3Jhd01vZHVsZS5uYW1lc3BhY2VkXG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmFkZENoaWxkID0gZnVuY3Rpb24gYWRkQ2hpbGQgKGtleSwgbW9kdWxlKSB7XG4gIHRoaXMuX2NoaWxkcmVuW2tleV0gPSBtb2R1bGU7XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24gcmVtb3ZlQ2hpbGQgKGtleSkge1xuICBkZWxldGUgdGhpcy5fY2hpbGRyZW5ba2V5XTtcbn07XG5cbk1vZHVsZS5wcm90b3R5cGUuZ2V0Q2hpbGQgPSBmdW5jdGlvbiBnZXRDaGlsZCAoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9jaGlsZHJlbltrZXldXG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAocmF3TW9kdWxlKSB7XG4gIHRoaXMuX3Jhd01vZHVsZS5uYW1lc3BhY2VkID0gcmF3TW9kdWxlLm5hbWVzcGFjZWQ7XG4gIGlmIChyYXdNb2R1bGUuYWN0aW9ucykge1xuICAgIHRoaXMuX3Jhd01vZHVsZS5hY3Rpb25zID0gcmF3TW9kdWxlLmFjdGlvbnM7XG4gIH1cbiAgaWYgKHJhd01vZHVsZS5tdXRhdGlvbnMpIHtcbiAgICB0aGlzLl9yYXdNb2R1bGUubXV0YXRpb25zID0gcmF3TW9kdWxlLm11dGF0aW9ucztcbiAgfVxuICBpZiAocmF3TW9kdWxlLmdldHRlcnMpIHtcbiAgICB0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycyA9IHJhd01vZHVsZS5nZXR0ZXJzO1xuICB9XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmZvckVhY2hDaGlsZCA9IGZ1bmN0aW9uIGZvckVhY2hDaGlsZCAoZm4pIHtcbiAgZm9yRWFjaFZhbHVlKHRoaXMuX2NoaWxkcmVuLCBmbik7XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmZvckVhY2hHZXR0ZXIgPSBmdW5jdGlvbiBmb3JFYWNoR2V0dGVyIChmbikge1xuICBpZiAodGhpcy5fcmF3TW9kdWxlLmdldHRlcnMpIHtcbiAgICBmb3JFYWNoVmFsdWUodGhpcy5fcmF3TW9kdWxlLmdldHRlcnMsIGZuKTtcbiAgfVxufTtcblxuTW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoQWN0aW9uID0gZnVuY3Rpb24gZm9yRWFjaEFjdGlvbiAoZm4pIHtcbiAgaWYgKHRoaXMuX3Jhd01vZHVsZS5hY3Rpb25zKSB7XG4gICAgZm9yRWFjaFZhbHVlKHRoaXMuX3Jhd01vZHVsZS5hY3Rpb25zLCBmbik7XG4gIH1cbn07XG5cbk1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaE11dGF0aW9uID0gZnVuY3Rpb24gZm9yRWFjaE11dGF0aW9uIChmbikge1xuICBpZiAodGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucykge1xuICAgIGZvckVhY2hWYWx1ZSh0aGlzLl9yYXdNb2R1bGUubXV0YXRpb25zLCBmbik7XG4gIH1cbn07XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBNb2R1bGUucHJvdG90eXBlLCBwcm90b3R5cGVBY2Nlc3NvcnMkMSApO1xuXG52YXIgTW9kdWxlQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIE1vZHVsZUNvbGxlY3Rpb24gKHJhd1Jvb3RNb2R1bGUpIHtcbiAgLy8gcmVnaXN0ZXIgcm9vdCBtb2R1bGUgKFZ1ZXguU3RvcmUgb3B0aW9ucylcbiAgdGhpcy5yZWdpc3RlcihbXSwgcmF3Um9vdE1vZHVsZSwgZmFsc2UpO1xufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0IChwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlZHVjZShmdW5jdGlvbiAobW9kdWxlLCBrZXkpIHtcbiAgICByZXR1cm4gbW9kdWxlLmdldENoaWxkKGtleSlcbiAgfSwgdGhpcy5yb290KVxufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TmFtZXNwYWNlID0gZnVuY3Rpb24gZ2V0TmFtZXNwYWNlIChwYXRoKSB7XG4gIHZhciBtb2R1bGUgPSB0aGlzLnJvb3Q7XG4gIHJldHVybiBwYXRoLnJlZHVjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBrZXkpIHtcbiAgICBtb2R1bGUgPSBtb2R1bGUuZ2V0Q2hpbGQoa2V5KTtcbiAgICByZXR1cm4gbmFtZXNwYWNlICsgKG1vZHVsZS5uYW1lc3BhY2VkID8ga2V5ICsgJy8nIDogJycpXG4gIH0sICcnKVxufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlJDEgKHJhd1Jvb3RNb2R1bGUpIHtcbiAgdXBkYXRlKFtdLCB0aGlzLnJvb3QsIHJhd1Jvb3RNb2R1bGUpO1xufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3RlciAocGF0aCwgcmF3TW9kdWxlLCBydW50aW1lKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG4gICAgaWYgKCBydW50aW1lID09PSB2b2lkIDAgKSBydW50aW1lID0gdHJ1ZTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydFJhd01vZHVsZShwYXRoLCByYXdNb2R1bGUpO1xuICB9XG5cbiAgdmFyIG5ld01vZHVsZSA9IG5ldyBNb2R1bGUocmF3TW9kdWxlLCBydW50aW1lKTtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgdGhpcy5yb290ID0gbmV3TW9kdWxlO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldChwYXRoLnNsaWNlKDAsIC0xKSk7XG4gICAgcGFyZW50LmFkZENoaWxkKHBhdGhbcGF0aC5sZW5ndGggLSAxXSwgbmV3TW9kdWxlKTtcbiAgfVxuXG4gIC8vIHJlZ2lzdGVyIG5lc3RlZCBtb2R1bGVzXG4gIGlmIChyYXdNb2R1bGUubW9kdWxlcykge1xuICAgIGZvckVhY2hWYWx1ZShyYXdNb2R1bGUubW9kdWxlcywgZnVuY3Rpb24gKHJhd0NoaWxkTW9kdWxlLCBrZXkpIHtcbiAgICAgIHRoaXMkMS5yZWdpc3RlcihwYXRoLmNvbmNhdChrZXkpLCByYXdDaGlsZE1vZHVsZSwgcnVudGltZSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbk1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLnVucmVnaXN0ZXIgPSBmdW5jdGlvbiB1bnJlZ2lzdGVyIChwYXRoKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzLmdldChwYXRoLnNsaWNlKDAsIC0xKSk7XG4gIHZhciBrZXkgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gIGlmICghcGFyZW50LmdldENoaWxkKGtleSkucnVudGltZSkgeyByZXR1cm4gfVxuXG4gIHBhcmVudC5yZW1vdmVDaGlsZChrZXkpO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlIChwYXRoLCB0YXJnZXRNb2R1bGUsIG5ld01vZHVsZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydFJhd01vZHVsZShwYXRoLCBuZXdNb2R1bGUpO1xuICB9XG5cbiAgLy8gdXBkYXRlIHRhcmdldCBtb2R1bGVcbiAgdGFyZ2V0TW9kdWxlLnVwZGF0ZShuZXdNb2R1bGUpO1xuXG4gIC8vIHVwZGF0ZSBuZXN0ZWQgbW9kdWxlc1xuICBpZiAobmV3TW9kdWxlLm1vZHVsZXMpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gbmV3TW9kdWxlLm1vZHVsZXMpIHtcbiAgICAgIGlmICghdGFyZ2V0TW9kdWxlLmdldENoaWxkKGtleSkpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBcIlt2dWV4XSB0cnlpbmcgdG8gYWRkIGEgbmV3IG1vZHVsZSAnXCIgKyBrZXkgKyBcIicgb24gaG90IHJlbG9hZGluZywgXCIgK1xuICAgICAgICAgICAgJ21hbnVhbCByZWxvYWQgaXMgbmVlZGVkJ1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB1cGRhdGUoXG4gICAgICAgIHBhdGguY29uY2F0KGtleSksXG4gICAgICAgIHRhcmdldE1vZHVsZS5nZXRDaGlsZChrZXkpLFxuICAgICAgICBuZXdNb2R1bGUubW9kdWxlc1trZXldXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG52YXIgZnVuY3Rpb25Bc3NlcnQgPSB7XG4gIGFzc2VydDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7IH0sXG4gIGV4cGVjdGVkOiAnZnVuY3Rpb24nXG59O1xuXG52YXIgb2JqZWN0QXNzZXJ0ID0ge1xuICBhc3NlcnQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nIHx8XG4gICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmhhbmRsZXIgPT09ICdmdW5jdGlvbicpOyB9LFxuICBleHBlY3RlZDogJ2Z1bmN0aW9uIG9yIG9iamVjdCB3aXRoIFwiaGFuZGxlclwiIGZ1bmN0aW9uJ1xufTtcblxudmFyIGFzc2VydFR5cGVzID0ge1xuICBnZXR0ZXJzOiBmdW5jdGlvbkFzc2VydCxcbiAgbXV0YXRpb25zOiBmdW5jdGlvbkFzc2VydCxcbiAgYWN0aW9uczogb2JqZWN0QXNzZXJ0XG59O1xuXG5mdW5jdGlvbiBhc3NlcnRSYXdNb2R1bGUgKHBhdGgsIHJhd01vZHVsZSkge1xuICBPYmplY3Qua2V5cyhhc3NlcnRUeXBlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFyYXdNb2R1bGVba2V5XSkgeyByZXR1cm4gfVxuXG4gICAgdmFyIGFzc2VydE9wdGlvbnMgPSBhc3NlcnRUeXBlc1trZXldO1xuXG4gICAgZm9yRWFjaFZhbHVlKHJhd01vZHVsZVtrZXldLCBmdW5jdGlvbiAodmFsdWUsIHR5cGUpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgYXNzZXJ0T3B0aW9ucy5hc3NlcnQodmFsdWUpLFxuICAgICAgICBtYWtlQXNzZXJ0aW9uTWVzc2FnZShwYXRoLCBrZXksIHR5cGUsIHZhbHVlLCBhc3NlcnRPcHRpb25zLmV4cGVjdGVkKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VBc3NlcnRpb25NZXNzYWdlIChwYXRoLCBrZXksIHR5cGUsIHZhbHVlLCBleHBlY3RlZCkge1xuICB2YXIgYnVmID0ga2V5ICsgXCIgc2hvdWxkIGJlIFwiICsgZXhwZWN0ZWQgKyBcIiBidXQgXFxcIlwiICsga2V5ICsgXCIuXCIgKyB0eXBlICsgXCJcXFwiXCI7XG4gIGlmIChwYXRoLmxlbmd0aCA+IDApIHtcbiAgICBidWYgKz0gXCIgaW4gbW9kdWxlIFxcXCJcIiArIChwYXRoLmpvaW4oJy4nKSkgKyBcIlxcXCJcIjtcbiAgfVxuICBidWYgKz0gXCIgaXMgXCIgKyAoSlNPTi5zdHJpbmdpZnkodmFsdWUpKSArIFwiLlwiO1xuICByZXR1cm4gYnVmXG59XG5cbnZhciBWdWU7IC8vIGJpbmQgb24gaW5zdGFsbFxuXG52YXIgU3RvcmUgPSBmdW5jdGlvbiBTdG9yZSAob3B0aW9ucykge1xuICB2YXIgdGhpcyQxID0gdGhpcztcbiAgaWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cbiAgLy8gQXV0byBpbnN0YWxsIGlmIGl0IGlzIG5vdCBkb25lIHlldCBhbmQgYHdpbmRvd2AgaGFzIGBWdWVgLlxuICAvLyBUbyBhbGxvdyB1c2VycyB0byBhdm9pZCBhdXRvLWluc3RhbGxhdGlvbiBpbiBzb21lIGNhc2VzLFxuICAvLyB0aGlzIGNvZGUgc2hvdWxkIGJlIHBsYWNlZCBoZXJlLiBTZWUgIzczMVxuICBpZiAoIVZ1ZSAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7XG4gICAgaW5zdGFsbCh3aW5kb3cuVnVlKTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KFZ1ZSwgXCJtdXN0IGNhbGwgVnVlLnVzZShWdWV4KSBiZWZvcmUgY3JlYXRpbmcgYSBzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgYXNzZXJ0KHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJywgXCJ2dWV4IHJlcXVpcmVzIGEgUHJvbWlzZSBwb2x5ZmlsbCBpbiB0aGlzIGJyb3dzZXIuXCIpO1xuICAgIGFzc2VydCh0aGlzIGluc3RhbmNlb2YgU3RvcmUsIFwiU3RvcmUgbXVzdCBiZSBjYWxsZWQgd2l0aCB0aGUgbmV3IG9wZXJhdG9yLlwiKTtcbiAgfVxuXG4gIHZhciBwbHVnaW5zID0gb3B0aW9ucy5wbHVnaW5zOyBpZiAoIHBsdWdpbnMgPT09IHZvaWQgMCApIHBsdWdpbnMgPSBbXTtcbiAgdmFyIHN0cmljdCA9IG9wdGlvbnMuc3RyaWN0OyBpZiAoIHN0cmljdCA9PT0gdm9pZCAwICkgc3RyaWN0ID0gZmFsc2U7XG5cbiAgdmFyIHN0YXRlID0gb3B0aW9ucy5zdGF0ZTsgaWYgKCBzdGF0ZSA9PT0gdm9pZCAwICkgc3RhdGUgPSB7fTtcbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHN0YXRlID0gc3RhdGUoKSB8fCB7fTtcbiAgfVxuXG4gIC8vIHN0b3JlIGludGVybmFsIHN0YXRlXG4gIHRoaXMuX2NvbW1pdHRpbmcgPSBmYWxzZTtcbiAgdGhpcy5fYWN0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuX2FjdGlvblN1YnNjcmliZXJzID0gW107XG4gIHRoaXMuX211dGF0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuX3dyYXBwZWRHZXR0ZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5fbW9kdWxlcyA9IG5ldyBNb2R1bGVDb2xsZWN0aW9uKG9wdGlvbnMpO1xuICB0aGlzLl9tb2R1bGVzTmFtZXNwYWNlTWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcbiAgdGhpcy5fd2F0Y2hlclZNID0gbmV3IFZ1ZSgpO1xuXG4gIC8vIGJpbmQgY29tbWl0IGFuZCBkaXNwYXRjaCB0byBzZWxmXG4gIHZhciBzdG9yZSA9IHRoaXM7XG4gIHZhciByZWYgPSB0aGlzO1xuICB2YXIgZGlzcGF0Y2ggPSByZWYuZGlzcGF0Y2g7XG4gIHZhciBjb21taXQgPSByZWYuY29tbWl0O1xuICB0aGlzLmRpc3BhdGNoID0gZnVuY3Rpb24gYm91bmREaXNwYXRjaCAodHlwZSwgcGF5bG9hZCkge1xuICAgIHJldHVybiBkaXNwYXRjaC5jYWxsKHN0b3JlLCB0eXBlLCBwYXlsb2FkKVxuICB9O1xuICB0aGlzLmNvbW1pdCA9IGZ1bmN0aW9uIGJvdW5kQ29tbWl0ICh0eXBlLCBwYXlsb2FkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGNvbW1pdC5jYWxsKHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBvcHRpb25zKVxuICB9O1xuXG4gIC8vIHN0cmljdCBtb2RlXG4gIHRoaXMuc3RyaWN0ID0gc3RyaWN0O1xuXG4gIC8vIGluaXQgcm9vdCBtb2R1bGUuXG4gIC8vIHRoaXMgYWxzbyByZWN1cnNpdmVseSByZWdpc3RlcnMgYWxsIHN1Yi1tb2R1bGVzXG4gIC8vIGFuZCBjb2xsZWN0cyBhbGwgbW9kdWxlIGdldHRlcnMgaW5zaWRlIHRoaXMuX3dyYXBwZWRHZXR0ZXJzXG4gIGluc3RhbGxNb2R1bGUodGhpcywgc3RhdGUsIFtdLCB0aGlzLl9tb2R1bGVzLnJvb3QpO1xuXG4gIC8vIGluaXRpYWxpemUgdGhlIHN0b3JlIHZtLCB3aGljaCBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHJlYWN0aXZpdHlcbiAgLy8gKGFsc28gcmVnaXN0ZXJzIF93cmFwcGVkR2V0dGVycyBhcyBjb21wdXRlZCBwcm9wZXJ0aWVzKVxuICByZXNldFN0b3JlVk0odGhpcywgc3RhdGUpO1xuXG4gIC8vIGFwcGx5IHBsdWdpbnNcbiAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHsgcmV0dXJuIHBsdWdpbih0aGlzJDEpOyB9KTtcblxuICBpZiAoVnVlLmNvbmZpZy5kZXZ0b29scykge1xuICAgIGRldnRvb2xQbHVnaW4odGhpcyk7XG4gIH1cbn07XG5cbnZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IHN0YXRlOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cbnByb3RvdHlwZUFjY2Vzc29ycy5zdGF0ZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl92bS5fZGF0YS4kJHN0YXRlXG59O1xuXG5wcm90b3R5cGVBY2Nlc3NvcnMuc3RhdGUuc2V0ID0gZnVuY3Rpb24gKHYpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQoZmFsc2UsIFwiVXNlIHN0b3JlLnJlcGxhY2VTdGF0ZSgpIHRvIGV4cGxpY2l0IHJlcGxhY2Ugc3RvcmUgc3RhdGUuXCIpO1xuICB9XG59O1xuXG5TdG9yZS5wcm90b3R5cGUuY29tbWl0ID0gZnVuY3Rpb24gY29tbWl0IChfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgLy8gY2hlY2sgb2JqZWN0LXN0eWxlIGNvbW1pdFxuICB2YXIgcmVmID0gdW5pZnlPYmplY3RTdHlsZShfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKTtcbiAgICB2YXIgdHlwZSA9IHJlZi50eXBlO1xuICAgIHZhciBwYXlsb2FkID0gcmVmLnBheWxvYWQ7XG4gICAgdmFyIG9wdGlvbnMgPSByZWYub3B0aW9ucztcblxuICB2YXIgbXV0YXRpb24gPSB7IHR5cGU6IHR5cGUsIHBheWxvYWQ6IHBheWxvYWQgfTtcbiAgdmFyIGVudHJ5ID0gdGhpcy5fbXV0YXRpb25zW3R5cGVdO1xuICBpZiAoIWVudHJ5KSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gbXV0YXRpb24gdHlwZTogXCIgKyB0eXBlKSk7XG4gICAgfVxuICAgIHJldHVyblxuICB9XG4gIHRoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuICAgIGVudHJ5LmZvckVhY2goZnVuY3Rpb24gY29tbWl0SXRlcmF0b3IgKGhhbmRsZXIpIHtcbiAgICAgIGhhbmRsZXIocGF5bG9hZCk7XG4gICAgfSk7XG4gIH0pO1xuICB0aGlzLl9zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHsgcmV0dXJuIHN1YihtdXRhdGlvbiwgdGhpcyQxLnN0YXRlKTsgfSk7XG5cbiAgaWYgKFxuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICBvcHRpb25zICYmIG9wdGlvbnMuc2lsZW50XG4gICkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiW3Z1ZXhdIG11dGF0aW9uIHR5cGU6IFwiICsgdHlwZSArIFwiLiBTaWxlbnQgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWQuIFwiICtcbiAgICAgICdVc2UgdGhlIGZpbHRlciBmdW5jdGlvbmFsaXR5IGluIHRoZSB2dWUtZGV2dG9vbHMnXG4gICAgKTtcbiAgfVxufTtcblxuU3RvcmUucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gZGlzcGF0Y2ggKF90eXBlLCBfcGF5bG9hZCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIC8vIGNoZWNrIG9iamVjdC1zdHlsZSBkaXNwYXRjaFxuICB2YXIgcmVmID0gdW5pZnlPYmplY3RTdHlsZShfdHlwZSwgX3BheWxvYWQpO1xuICAgIHZhciB0eXBlID0gcmVmLnR5cGU7XG4gICAgdmFyIHBheWxvYWQgPSByZWYucGF5bG9hZDtcblxuICB2YXIgYWN0aW9uID0geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBwYXlsb2FkIH07XG4gIHZhciBlbnRyeSA9IHRoaXMuX2FjdGlvbnNbdHlwZV07XG4gIGlmICghZW50cnkpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gdW5rbm93biBhY3Rpb24gdHlwZTogXCIgKyB0eXBlKSk7XG4gICAgfVxuICAgIHJldHVyblxuICB9XG5cbiAgdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIoYWN0aW9uLCB0aGlzJDEuc3RhdGUpOyB9KTtcblxuICByZXR1cm4gZW50cnkubGVuZ3RoID4gMVxuICAgID8gUHJvbWlzZS5hbGwoZW50cnkubWFwKGZ1bmN0aW9uIChoYW5kbGVyKSB7IHJldHVybiBoYW5kbGVyKHBheWxvYWQpOyB9KSlcbiAgICA6IGVudHJ5WzBdKHBheWxvYWQpXG59O1xuXG5TdG9yZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gc3Vic2NyaWJlIChmbikge1xuICByZXR1cm4gZ2VuZXJpY1N1YnNjcmliZShmbiwgdGhpcy5fc3Vic2NyaWJlcnMpXG59O1xuXG5TdG9yZS5wcm90b3R5cGUuc3Vic2NyaWJlQWN0aW9uID0gZnVuY3Rpb24gc3Vic2NyaWJlQWN0aW9uIChmbikge1xuICByZXR1cm4gZ2VuZXJpY1N1YnNjcmliZShmbiwgdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMpXG59O1xuXG5TdG9yZS5wcm90b3R5cGUud2F0Y2ggPSBmdW5jdGlvbiB3YXRjaCAoZ2V0dGVyLCBjYiwgb3B0aW9ucykge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KHR5cGVvZiBnZXR0ZXIgPT09ICdmdW5jdGlvbicsIFwic3RvcmUud2F0Y2ggb25seSBhY2NlcHRzIGEgZnVuY3Rpb24uXCIpO1xuICB9XG4gIHJldHVybiB0aGlzLl93YXRjaGVyVk0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldHRlcih0aGlzJDEuc3RhdGUsIHRoaXMkMS5nZXR0ZXJzKTsgfSwgY2IsIG9wdGlvbnMpXG59O1xuXG5TdG9yZS5wcm90b3R5cGUucmVwbGFjZVN0YXRlID0gZnVuY3Rpb24gcmVwbGFjZVN0YXRlIChzdGF0ZSkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIHRoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuICAgIHRoaXMkMS5fdm0uX2RhdGEuJCRzdGF0ZSA9IHN0YXRlO1xuICB9KTtcbn07XG5cblN0b3JlLnByb3RvdHlwZS5yZWdpc3Rlck1vZHVsZSA9IGZ1bmN0aW9uIHJlZ2lzdGVyTW9kdWxlIChwYXRoLCByYXdNb2R1bGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblxuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7IHBhdGggPSBbcGF0aF07IH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydChBcnJheS5pc0FycmF5KHBhdGgpLCBcIm1vZHVsZSBwYXRoIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gQXJyYXkuXCIpO1xuICAgIGFzc2VydChwYXRoLmxlbmd0aCA+IDAsICdjYW5ub3QgcmVnaXN0ZXIgdGhlIHJvb3QgbW9kdWxlIGJ5IHVzaW5nIHJlZ2lzdGVyTW9kdWxlLicpO1xuICB9XG5cbiAgdGhpcy5fbW9kdWxlcy5yZWdpc3RlcihwYXRoLCByYXdNb2R1bGUpO1xuICBpbnN0YWxsTW9kdWxlKHRoaXMsIHRoaXMuc3RhdGUsIHBhdGgsIHRoaXMuX21vZHVsZXMuZ2V0KHBhdGgpLCBvcHRpb25zLnByZXNlcnZlU3RhdGUpO1xuICAvLyByZXNldCBzdG9yZSB0byB1cGRhdGUgZ2V0dGVycy4uLlxuICByZXNldFN0b3JlVk0odGhpcywgdGhpcy5zdGF0ZSk7XG59O1xuXG5TdG9yZS5wcm90b3R5cGUudW5yZWdpc3Rlck1vZHVsZSA9IGZ1bmN0aW9uIHVucmVnaXN0ZXJNb2R1bGUgKHBhdGgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7IHBhdGggPSBbcGF0aF07IH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydChBcnJheS5pc0FycmF5KHBhdGgpLCBcIm1vZHVsZSBwYXRoIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gQXJyYXkuXCIpO1xuICB9XG5cbiAgdGhpcy5fbW9kdWxlcy51bnJlZ2lzdGVyKHBhdGgpO1xuICB0aGlzLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGFyZW50U3RhdGUgPSBnZXROZXN0ZWRTdGF0ZSh0aGlzJDEuc3RhdGUsIHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICBWdWUuZGVsZXRlKHBhcmVudFN0YXRlLCBwYXRoW3BhdGgubGVuZ3RoIC0gMV0pO1xuICB9KTtcbiAgcmVzZXRTdG9yZSh0aGlzKTtcbn07XG5cblN0b3JlLnByb3RvdHlwZS5ob3RVcGRhdGUgPSBmdW5jdGlvbiBob3RVcGRhdGUgKG5ld09wdGlvbnMpIHtcbiAgdGhpcy5fbW9kdWxlcy51cGRhdGUobmV3T3B0aW9ucyk7XG4gIHJlc2V0U3RvcmUodGhpcywgdHJ1ZSk7XG59O1xuXG5TdG9yZS5wcm90b3R5cGUuX3dpdGhDb21taXQgPSBmdW5jdGlvbiBfd2l0aENvbW1pdCAoZm4pIHtcbiAgdmFyIGNvbW1pdHRpbmcgPSB0aGlzLl9jb21taXR0aW5nO1xuICB0aGlzLl9jb21taXR0aW5nID0gdHJ1ZTtcbiAgZm4oKTtcbiAgdGhpcy5fY29tbWl0dGluZyA9IGNvbW1pdHRpbmc7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyggU3RvcmUucHJvdG90eXBlLCBwcm90b3R5cGVBY2Nlc3NvcnMgKTtcblxuZnVuY3Rpb24gZ2VuZXJpY1N1YnNjcmliZSAoZm4sIHN1YnMpIHtcbiAgaWYgKHN1YnMuaW5kZXhPZihmbikgPCAwKSB7XG4gICAgc3Vicy5wdXNoKGZuKTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpID0gc3Vicy5pbmRleE9mKGZuKTtcbiAgICBpZiAoaSA+IC0xKSB7XG4gICAgICBzdWJzLnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzZXRTdG9yZSAoc3RvcmUsIGhvdCkge1xuICBzdG9yZS5fYWN0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHN0b3JlLl9tdXRhdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBzdG9yZS5fd3JhcHBlZEdldHRlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBzdG9yZS5fbW9kdWxlc05hbWVzcGFjZU1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBzdGF0ZSA9IHN0b3JlLnN0YXRlO1xuICAvLyBpbml0IGFsbCBtb2R1bGVzXG4gIGluc3RhbGxNb2R1bGUoc3RvcmUsIHN0YXRlLCBbXSwgc3RvcmUuX21vZHVsZXMucm9vdCwgdHJ1ZSk7XG4gIC8vIHJlc2V0IHZtXG4gIHJlc2V0U3RvcmVWTShzdG9yZSwgc3RhdGUsIGhvdCk7XG59XG5cbmZ1bmN0aW9uIHJlc2V0U3RvcmVWTSAoc3RvcmUsIHN0YXRlLCBob3QpIHtcbiAgdmFyIG9sZFZtID0gc3RvcmUuX3ZtO1xuXG4gIC8vIGJpbmQgc3RvcmUgcHVibGljIGdldHRlcnNcbiAgc3RvcmUuZ2V0dGVycyA9IHt9O1xuICB2YXIgd3JhcHBlZEdldHRlcnMgPSBzdG9yZS5fd3JhcHBlZEdldHRlcnM7XG4gIHZhciBjb21wdXRlZCA9IHt9O1xuICBmb3JFYWNoVmFsdWUod3JhcHBlZEdldHRlcnMsIGZ1bmN0aW9uIChmbiwga2V5KSB7XG4gICAgLy8gdXNlIGNvbXB1dGVkIHRvIGxldmVyYWdlIGl0cyBsYXp5LWNhY2hpbmcgbWVjaGFuaXNtXG4gICAgY29tcHV0ZWRba2V5XSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuKHN0b3JlKTsgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3RvcmUuZ2V0dGVycywga2V5LCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLl92bVtrZXldOyB9LFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSAvLyBmb3IgbG9jYWwgZ2V0dGVyc1xuICAgIH0pO1xuICB9KTtcblxuICAvLyB1c2UgYSBWdWUgaW5zdGFuY2UgdG8gc3RvcmUgdGhlIHN0YXRlIHRyZWVcbiAgLy8gc3VwcHJlc3Mgd2FybmluZ3MganVzdCBpbiBjYXNlIHRoZSB1c2VyIGhhcyBhZGRlZFxuICAvLyBzb21lIGZ1bmt5IGdsb2JhbCBtaXhpbnNcbiAgdmFyIHNpbGVudCA9IFZ1ZS5jb25maWcuc2lsZW50O1xuICBWdWUuY29uZmlnLnNpbGVudCA9IHRydWU7XG4gIHN0b3JlLl92bSA9IG5ldyBWdWUoe1xuICAgIGRhdGE6IHtcbiAgICAgICQkc3RhdGU6IHN0YXRlXG4gICAgfSxcbiAgICBjb21wdXRlZDogY29tcHV0ZWRcbiAgfSk7XG4gIFZ1ZS5jb25maWcuc2lsZW50ID0gc2lsZW50O1xuXG4gIC8vIGVuYWJsZSBzdHJpY3QgbW9kZSBmb3IgbmV3IHZtXG4gIGlmIChzdG9yZS5zdHJpY3QpIHtcbiAgICBlbmFibGVTdHJpY3RNb2RlKHN0b3JlKTtcbiAgfVxuXG4gIGlmIChvbGRWbSkge1xuICAgIGlmIChob3QpIHtcbiAgICAgIC8vIGRpc3BhdGNoIGNoYW5nZXMgaW4gYWxsIHN1YnNjcmliZWQgd2F0Y2hlcnNcbiAgICAgIC8vIHRvIGZvcmNlIGdldHRlciByZS1ldmFsdWF0aW9uIGZvciBob3QgcmVsb2FkaW5nLlxuICAgICAgc3RvcmUuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBvbGRWbS5fZGF0YS4kJHN0YXRlID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgeyByZXR1cm4gb2xkVm0uJGRlc3Ryb3koKTsgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5zdGFsbE1vZHVsZSAoc3RvcmUsIHJvb3RTdGF0ZSwgcGF0aCwgbW9kdWxlLCBob3QpIHtcbiAgdmFyIGlzUm9vdCA9ICFwYXRoLmxlbmd0aDtcbiAgdmFyIG5hbWVzcGFjZSA9IHN0b3JlLl9tb2R1bGVzLmdldE5hbWVzcGFjZShwYXRoKTtcblxuICAvLyByZWdpc3RlciBpbiBuYW1lc3BhY2UgbWFwXG4gIGlmIChtb2R1bGUubmFtZXNwYWNlZCkge1xuICAgIHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwW25hbWVzcGFjZV0gPSBtb2R1bGU7XG4gIH1cblxuICAvLyBzZXQgc3RhdGVcbiAgaWYgKCFpc1Jvb3QgJiYgIWhvdCkge1xuICAgIHZhciBwYXJlbnRTdGF0ZSA9IGdldE5lc3RlZFN0YXRlKHJvb3RTdGF0ZSwgcGF0aC5zbGljZSgwLCAtMSkpO1xuICAgIHZhciBtb2R1bGVOYW1lID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgIHN0b3JlLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcbiAgICAgIFZ1ZS5zZXQocGFyZW50U3RhdGUsIG1vZHVsZU5hbWUsIG1vZHVsZS5zdGF0ZSk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgbG9jYWwgPSBtb2R1bGUuY29udGV4dCA9IG1ha2VMb2NhbENvbnRleHQoc3RvcmUsIG5hbWVzcGFjZSwgcGF0aCk7XG5cbiAgbW9kdWxlLmZvckVhY2hNdXRhdGlvbihmdW5jdGlvbiAobXV0YXRpb24sIGtleSkge1xuICAgIHZhciBuYW1lc3BhY2VkVHlwZSA9IG5hbWVzcGFjZSArIGtleTtcbiAgICByZWdpc3Rlck11dGF0aW9uKHN0b3JlLCBuYW1lc3BhY2VkVHlwZSwgbXV0YXRpb24sIGxvY2FsKTtcbiAgfSk7XG5cbiAgbW9kdWxlLmZvckVhY2hBY3Rpb24oZnVuY3Rpb24gKGFjdGlvbiwga2V5KSB7XG4gICAgdmFyIHR5cGUgPSBhY3Rpb24ucm9vdCA/IGtleSA6IG5hbWVzcGFjZSArIGtleTtcbiAgICB2YXIgaGFuZGxlciA9IGFjdGlvbi5oYW5kbGVyIHx8IGFjdGlvbjtcbiAgICByZWdpc3RlckFjdGlvbihzdG9yZSwgdHlwZSwgaGFuZGxlciwgbG9jYWwpO1xuICB9KTtcblxuICBtb2R1bGUuZm9yRWFjaEdldHRlcihmdW5jdGlvbiAoZ2V0dGVyLCBrZXkpIHtcbiAgICB2YXIgbmFtZXNwYWNlZFR5cGUgPSBuYW1lc3BhY2UgKyBrZXk7XG4gICAgcmVnaXN0ZXJHZXR0ZXIoc3RvcmUsIG5hbWVzcGFjZWRUeXBlLCBnZXR0ZXIsIGxvY2FsKTtcbiAgfSk7XG5cbiAgbW9kdWxlLmZvckVhY2hDaGlsZChmdW5jdGlvbiAoY2hpbGQsIGtleSkge1xuICAgIGluc3RhbGxNb2R1bGUoc3RvcmUsIHJvb3RTdGF0ZSwgcGF0aC5jb25jYXQoa2V5KSwgY2hpbGQsIGhvdCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIG1ha2UgbG9jYWxpemVkIGRpc3BhdGNoLCBjb21taXQsIGdldHRlcnMgYW5kIHN0YXRlXG4gKiBpZiB0aGVyZSBpcyBubyBuYW1lc3BhY2UsIGp1c3QgdXNlIHJvb3Qgb25lc1xuICovXG5mdW5jdGlvbiBtYWtlTG9jYWxDb250ZXh0IChzdG9yZSwgbmFtZXNwYWNlLCBwYXRoKSB7XG4gIHZhciBub05hbWVzcGFjZSA9IG5hbWVzcGFjZSA9PT0gJyc7XG5cbiAgdmFyIGxvY2FsID0ge1xuICAgIGRpc3BhdGNoOiBub05hbWVzcGFjZSA/IHN0b3JlLmRpc3BhdGNoIDogZnVuY3Rpb24gKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpIHtcbiAgICAgIHZhciBhcmdzID0gdW5pZnlPYmplY3RTdHlsZShfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKTtcbiAgICAgIHZhciBwYXlsb2FkID0gYXJncy5wYXlsb2FkO1xuICAgICAgdmFyIG9wdGlvbnMgPSBhcmdzLm9wdGlvbnM7XG4gICAgICB2YXIgdHlwZSA9IGFyZ3MudHlwZTtcblxuICAgICAgaWYgKCFvcHRpb25zIHx8ICFvcHRpb25zLnJvb3QpIHtcbiAgICAgICAgdHlwZSA9IG5hbWVzcGFjZSArIHR5cGU7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFzdG9yZS5fYWN0aW9uc1t0eXBlXSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gbG9jYWwgYWN0aW9uIHR5cGU6IFwiICsgKGFyZ3MudHlwZSkgKyBcIiwgZ2xvYmFsIHR5cGU6IFwiICsgdHlwZSkpO1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCh0eXBlLCBwYXlsb2FkKVxuICAgIH0sXG5cbiAgICBjb21taXQ6IG5vTmFtZXNwYWNlID8gc3RvcmUuY29tbWl0IDogZnVuY3Rpb24gKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpIHtcbiAgICAgIHZhciBhcmdzID0gdW5pZnlPYmplY3RTdHlsZShfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKTtcbiAgICAgIHZhciBwYXlsb2FkID0gYXJncy5wYXlsb2FkO1xuICAgICAgdmFyIG9wdGlvbnMgPSBhcmdzLm9wdGlvbnM7XG4gICAgICB2YXIgdHlwZSA9IGFyZ3MudHlwZTtcblxuICAgICAgaWYgKCFvcHRpb25zIHx8ICFvcHRpb25zLnJvb3QpIHtcbiAgICAgICAgdHlwZSA9IG5hbWVzcGFjZSArIHR5cGU7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFzdG9yZS5fbXV0YXRpb25zW3R5cGVdKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gdW5rbm93biBsb2NhbCBtdXRhdGlvbiB0eXBlOiBcIiArIChhcmdzLnR5cGUpICsgXCIsIGdsb2JhbCB0eXBlOiBcIiArIHR5cGUpKTtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzdG9yZS5jb21taXQodHlwZSwgcGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGdldHRlcnMgYW5kIHN0YXRlIG9iamVjdCBtdXN0IGJlIGdvdHRlbiBsYXppbHlcbiAgLy8gYmVjYXVzZSB0aGV5IHdpbGwgYmUgY2hhbmdlZCBieSB2bSB1cGRhdGVcbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobG9jYWwsIHtcbiAgICBnZXR0ZXJzOiB7XG4gICAgICBnZXQ6IG5vTmFtZXNwYWNlXG4gICAgICAgID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RvcmUuZ2V0dGVyczsgfVxuICAgICAgICA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1ha2VMb2NhbEdldHRlcnMoc3RvcmUsIG5hbWVzcGFjZSk7IH1cbiAgICB9LFxuICAgIHN0YXRlOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE5lc3RlZFN0YXRlKHN0b3JlLnN0YXRlLCBwYXRoKTsgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGxvY2FsXG59XG5cbmZ1bmN0aW9uIG1ha2VMb2NhbEdldHRlcnMgKHN0b3JlLCBuYW1lc3BhY2UpIHtcbiAgdmFyIGdldHRlcnNQcm94eSA9IHt9O1xuXG4gIHZhciBzcGxpdFBvcyA9IG5hbWVzcGFjZS5sZW5ndGg7XG4gIE9iamVjdC5rZXlzKHN0b3JlLmdldHRlcnMpLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAvLyBza2lwIGlmIHRoZSB0YXJnZXQgZ2V0dGVyIGlzIG5vdCBtYXRjaCB0aGlzIG5hbWVzcGFjZVxuICAgIGlmICh0eXBlLnNsaWNlKDAsIHNwbGl0UG9zKSAhPT0gbmFtZXNwYWNlKSB7IHJldHVybiB9XG5cbiAgICAvLyBleHRyYWN0IGxvY2FsIGdldHRlciB0eXBlXG4gICAgdmFyIGxvY2FsVHlwZSA9IHR5cGUuc2xpY2Uoc3BsaXRQb3MpO1xuXG4gICAgLy8gQWRkIGEgcG9ydCB0byB0aGUgZ2V0dGVycyBwcm94eS5cbiAgICAvLyBEZWZpbmUgYXMgZ2V0dGVyIHByb3BlcnR5IGJlY2F1c2VcbiAgICAvLyB3ZSBkbyBub3Qgd2FudCB0byBldmFsdWF0ZSB0aGUgZ2V0dGVycyBpbiB0aGlzIHRpbWUuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdldHRlcnNQcm94eSwgbG9jYWxUeXBlLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLmdldHRlcnNbdHlwZV07IH0sXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBnZXR0ZXJzUHJveHlcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJNdXRhdGlvbiAoc3RvcmUsIHR5cGUsIGhhbmRsZXIsIGxvY2FsKSB7XG4gIHZhciBlbnRyeSA9IHN0b3JlLl9tdXRhdGlvbnNbdHlwZV0gfHwgKHN0b3JlLl9tdXRhdGlvbnNbdHlwZV0gPSBbXSk7XG4gIGVudHJ5LnB1c2goZnVuY3Rpb24gd3JhcHBlZE11dGF0aW9uSGFuZGxlciAocGF5bG9hZCkge1xuICAgIGhhbmRsZXIuY2FsbChzdG9yZSwgbG9jYWwuc3RhdGUsIHBheWxvYWQpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJBY3Rpb24gKHN0b3JlLCB0eXBlLCBoYW5kbGVyLCBsb2NhbCkge1xuICB2YXIgZW50cnkgPSBzdG9yZS5fYWN0aW9uc1t0eXBlXSB8fCAoc3RvcmUuX2FjdGlvbnNbdHlwZV0gPSBbXSk7XG4gIGVudHJ5LnB1c2goZnVuY3Rpb24gd3JhcHBlZEFjdGlvbkhhbmRsZXIgKHBheWxvYWQsIGNiKSB7XG4gICAgdmFyIHJlcyA9IGhhbmRsZXIuY2FsbChzdG9yZSwge1xuICAgICAgZGlzcGF0Y2g6IGxvY2FsLmRpc3BhdGNoLFxuICAgICAgY29tbWl0OiBsb2NhbC5jb21taXQsXG4gICAgICBnZXR0ZXJzOiBsb2NhbC5nZXR0ZXJzLFxuICAgICAgc3RhdGU6IGxvY2FsLnN0YXRlLFxuICAgICAgcm9vdEdldHRlcnM6IHN0b3JlLmdldHRlcnMsXG4gICAgICByb290U3RhdGU6IHN0b3JlLnN0YXRlXG4gICAgfSwgcGF5bG9hZCwgY2IpO1xuICAgIGlmICghaXNQcm9taXNlKHJlcykpIHtcbiAgICAgIHJlcyA9IFByb21pc2UucmVzb2x2ZShyZXMpO1xuICAgIH1cbiAgICBpZiAoc3RvcmUuX2RldnRvb2xIb29rKSB7XG4gICAgICByZXR1cm4gcmVzLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgc3RvcmUuX2RldnRvb2xIb29rLmVtaXQoJ3Z1ZXg6ZXJyb3InLCBlcnIpO1xuICAgICAgICB0aHJvdyBlcnJcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXNcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlckdldHRlciAoc3RvcmUsIHR5cGUsIHJhd0dldHRlciwgbG9jYWwpIHtcbiAgaWYgKHN0b3JlLl93cmFwcGVkR2V0dGVyc1t0eXBlXSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSBkdXBsaWNhdGUgZ2V0dGVyIGtleTogXCIgKyB0eXBlKSk7XG4gICAgfVxuICAgIHJldHVyblxuICB9XG4gIHN0b3JlLl93cmFwcGVkR2V0dGVyc1t0eXBlXSA9IGZ1bmN0aW9uIHdyYXBwZWRHZXR0ZXIgKHN0b3JlKSB7XG4gICAgcmV0dXJuIHJhd0dldHRlcihcbiAgICAgIGxvY2FsLnN0YXRlLCAvLyBsb2NhbCBzdGF0ZVxuICAgICAgbG9jYWwuZ2V0dGVycywgLy8gbG9jYWwgZ2V0dGVyc1xuICAgICAgc3RvcmUuc3RhdGUsIC8vIHJvb3Qgc3RhdGVcbiAgICAgIHN0b3JlLmdldHRlcnMgLy8gcm9vdCBnZXR0ZXJzXG4gICAgKVxuICB9O1xufVxuXG5mdW5jdGlvbiBlbmFibGVTdHJpY3RNb2RlIChzdG9yZSkge1xuICBzdG9yZS5fdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2RhdGEuJCRzdGF0ZSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGFzc2VydChzdG9yZS5fY29tbWl0dGluZywgXCJEbyBub3QgbXV0YXRlIHZ1ZXggc3RvcmUgc3RhdGUgb3V0c2lkZSBtdXRhdGlvbiBoYW5kbGVycy5cIik7XG4gICAgfVxuICB9LCB7IGRlZXA6IHRydWUsIHN5bmM6IHRydWUgfSk7XG59XG5cbmZ1bmN0aW9uIGdldE5lc3RlZFN0YXRlIChzdGF0ZSwgcGF0aCkge1xuICByZXR1cm4gcGF0aC5sZW5ndGhcbiAgICA/IHBhdGgucmVkdWNlKGZ1bmN0aW9uIChzdGF0ZSwga2V5KSB7IHJldHVybiBzdGF0ZVtrZXldOyB9LCBzdGF0ZSlcbiAgICA6IHN0YXRlXG59XG5cbmZ1bmN0aW9uIHVuaWZ5T2JqZWN0U3R5bGUgKHR5cGUsIHBheWxvYWQsIG9wdGlvbnMpIHtcbiAgaWYgKGlzT2JqZWN0KHR5cGUpICYmIHR5cGUudHlwZSkge1xuICAgIG9wdGlvbnMgPSBwYXlsb2FkO1xuICAgIHBheWxvYWQgPSB0eXBlO1xuICAgIHR5cGUgPSB0eXBlLnR5cGU7XG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydCh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycsIChcIkV4cGVjdHMgc3RyaW5nIGFzIHRoZSB0eXBlLCBidXQgZm91bmQgXCIgKyAodHlwZW9mIHR5cGUpICsgXCIuXCIpKTtcbiAgfVxuXG4gIHJldHVybiB7IHR5cGU6IHR5cGUsIHBheWxvYWQ6IHBheWxvYWQsIG9wdGlvbnM6IG9wdGlvbnMgfVxufVxuXG5mdW5jdGlvbiBpbnN0YWxsIChfVnVlKSB7XG4gIGlmIChWdWUgJiYgX1Z1ZSA9PT0gVnVlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICdbdnVleF0gYWxyZWFkeSBpbnN0YWxsZWQuIFZ1ZS51c2UoVnVleCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cbiAgVnVlID0gX1Z1ZTtcbiAgYXBwbHlNaXhpbihWdWUpO1xufVxuXG52YXIgbWFwU3RhdGUgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgc3RhdGVzKSB7XG4gIHZhciByZXMgPSB7fTtcbiAgbm9ybWFsaXplTWFwKHN0YXRlcykuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7XG4gICAgdmFyIGtleSA9IHJlZi5rZXk7XG4gICAgdmFyIHZhbCA9IHJlZi52YWw7XG5cbiAgICByZXNba2V5XSA9IGZ1bmN0aW9uIG1hcHBlZFN0YXRlICgpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuJHN0b3JlLnN0YXRlO1xuICAgICAgdmFyIGdldHRlcnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzO1xuICAgICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgICB2YXIgbW9kdWxlID0gZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBTdGF0ZScsIG5hbWVzcGFjZSk7XG4gICAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUgPSBtb2R1bGUuY29udGV4dC5zdGF0ZTtcbiAgICAgICAgZ2V0dGVycyA9IG1vZHVsZS5jb250ZXh0LmdldHRlcnM7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IHZhbC5jYWxsKHRoaXMsIHN0YXRlLCBnZXR0ZXJzKVxuICAgICAgICA6IHN0YXRlW3ZhbF1cbiAgICB9O1xuICAgIC8vIG1hcmsgdnVleCBnZXR0ZXIgZm9yIGRldnRvb2xzXG4gICAgcmVzW2tleV0udnVleCA9IHRydWU7XG4gIH0pO1xuICByZXR1cm4gcmVzXG59KTtcblxudmFyIG1hcE11dGF0aW9ucyA9IG5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBtdXRhdGlvbnMpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICBub3JtYWxpemVNYXAobXV0YXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICB2YXIga2V5ID0gcmVmLmtleTtcbiAgICB2YXIgdmFsID0gcmVmLnZhbDtcblxuICAgIHJlc1trZXldID0gZnVuY3Rpb24gbWFwcGVkTXV0YXRpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07XG5cbiAgICAgIHZhciBjb21taXQgPSB0aGlzLiRzdG9yZS5jb21taXQ7XG4gICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgIHZhciBtb2R1bGUgPSBnZXRNb2R1bGVCeU5hbWVzcGFjZSh0aGlzLiRzdG9yZSwgJ21hcE11dGF0aW9ucycsIG5hbWVzcGFjZSk7XG4gICAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgY29tbWl0ID0gbW9kdWxlLmNvbnRleHQuY29tbWl0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB2YWwuYXBwbHkodGhpcywgW2NvbW1pdF0uY29uY2F0KGFyZ3MpKVxuICAgICAgICA6IGNvbW1pdC5hcHBseSh0aGlzLiRzdG9yZSwgW3ZhbF0uY29uY2F0KGFyZ3MpKVxuICAgIH07XG4gIH0pO1xuICByZXR1cm4gcmVzXG59KTtcblxudmFyIG1hcEdldHRlcnMgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgZ2V0dGVycykge1xuICB2YXIgcmVzID0ge307XG4gIG5vcm1hbGl6ZU1hcChnZXR0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICB2YXIga2V5ID0gcmVmLmtleTtcbiAgICB2YXIgdmFsID0gcmVmLnZhbDtcblxuICAgIHZhbCA9IG5hbWVzcGFjZSArIHZhbDtcbiAgICByZXNba2V5XSA9IGZ1bmN0aW9uIG1hcHBlZEdldHRlciAoKSB7XG4gICAgICBpZiAobmFtZXNwYWNlICYmICFnZXRNb2R1bGVCeU5hbWVzcGFjZSh0aGlzLiRzdG9yZSwgJ21hcEdldHRlcnMnLCBuYW1lc3BhY2UpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgISh2YWwgaW4gdGhpcy4kc3RvcmUuZ2V0dGVycykpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gdW5rbm93biBnZXR0ZXI6IFwiICsgdmFsKSk7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbdmFsXVxuICAgIH07XG4gICAgLy8gbWFyayB2dWV4IGdldHRlciBmb3IgZGV2dG9vbHNcbiAgICByZXNba2V5XS52dWV4ID0gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiByZXNcbn0pO1xuXG52YXIgbWFwQWN0aW9ucyA9IG5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBhY3Rpb25zKSB7XG4gIHZhciByZXMgPSB7fTtcbiAgbm9ybWFsaXplTWFwKGFjdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKHJlZikge1xuICAgIHZhciBrZXkgPSByZWYua2V5O1xuICAgIHZhciB2YWwgPSByZWYudmFsO1xuXG4gICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRBY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07XG5cbiAgICAgIHZhciBkaXNwYXRjaCA9IHRoaXMuJHN0b3JlLmRpc3BhdGNoO1xuICAgICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgICB2YXIgbW9kdWxlID0gZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBBY3Rpb25zJywgbmFtZXNwYWNlKTtcbiAgICAgICAgaWYgKCFtb2R1bGUpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBkaXNwYXRjaCA9IG1vZHVsZS5jb250ZXh0LmRpc3BhdGNoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB2YWwuYXBwbHkodGhpcywgW2Rpc3BhdGNoXS5jb25jYXQoYXJncykpXG4gICAgICAgIDogZGlzcGF0Y2guYXBwbHkodGhpcy4kc3RvcmUsIFt2YWxdLmNvbmNhdChhcmdzKSlcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIHJlc1xufSk7XG5cbnZhciBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyA9IGZ1bmN0aW9uIChuYW1lc3BhY2UpIHsgcmV0dXJuICh7XG4gIG1hcFN0YXRlOiBtYXBTdGF0ZS5iaW5kKG51bGwsIG5hbWVzcGFjZSksXG4gIG1hcEdldHRlcnM6IG1hcEdldHRlcnMuYmluZChudWxsLCBuYW1lc3BhY2UpLFxuICBtYXBNdXRhdGlvbnM6IG1hcE11dGF0aW9ucy5iaW5kKG51bGwsIG5hbWVzcGFjZSksXG4gIG1hcEFjdGlvbnM6IG1hcEFjdGlvbnMuYmluZChudWxsLCBuYW1lc3BhY2UpXG59KTsgfTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTWFwIChtYXApIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkobWFwKVxuICAgID8gbWFwLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoeyBrZXk6IGtleSwgdmFsOiBrZXkgfSk7IH0pXG4gICAgOiBPYmplY3Qua2V5cyhtYXApLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoeyBrZXk6IGtleSwgdmFsOiBtYXBba2V5XSB9KTsgfSlcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZXNwYWNlIChmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKG5hbWVzcGFjZSwgbWFwKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XG4gICAgICBtYXAgPSBuYW1lc3BhY2U7XG4gICAgICBuYW1lc3BhY2UgPSAnJztcbiAgICB9IGVsc2UgaWYgKG5hbWVzcGFjZS5jaGFyQXQobmFtZXNwYWNlLmxlbmd0aCAtIDEpICE9PSAnLycpIHtcbiAgICAgIG5hbWVzcGFjZSArPSAnLyc7XG4gICAgfVxuICAgIHJldHVybiBmbihuYW1lc3BhY2UsIG1hcClcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRNb2R1bGVCeU5hbWVzcGFjZSAoc3RvcmUsIGhlbHBlciwgbmFtZXNwYWNlKSB7XG4gIHZhciBtb2R1bGUgPSBzdG9yZS5fbW9kdWxlc05hbWVzcGFjZU1hcFtuYW1lc3BhY2VdO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhbW9kdWxlKSB7XG4gICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gbW9kdWxlIG5hbWVzcGFjZSBub3QgZm91bmQgaW4gXCIgKyBoZWxwZXIgKyBcIigpOiBcIiArIG5hbWVzcGFjZSkpO1xuICB9XG4gIHJldHVybiBtb2R1bGVcbn1cblxudmFyIGluZGV4ID0ge1xuICBTdG9yZTogU3RvcmUsXG4gIGluc3RhbGw6IGluc3RhbGwsXG4gIHZlcnNpb246ICczLjAuMScsXG4gIG1hcFN0YXRlOiBtYXBTdGF0ZSxcbiAgbWFwTXV0YXRpb25zOiBtYXBNdXRhdGlvbnMsXG4gIG1hcEdldHRlcnM6IG1hcEdldHRlcnMsXG4gIG1hcEFjdGlvbnM6IG1hcEFjdGlvbnMsXG4gIGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzOiBjcmVhdGVOYW1lc3BhY2VkSGVscGVyc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbmRleDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92dWV4L2Rpc3QvdnVleC5jb21tb24uanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX3Z1ZV9leHBvcnRzX18sIF9fdnVlX29wdGlvbnNfX1xudmFyIF9fdnVlX3N0eWxlc19fID0ge31cblxuLyogc2NyaXB0ICovXG5fX3Z1ZV9leHBvcnRzX18gPSByZXF1aXJlKFwiISFiYWJlbC1sb2FkZXIhdnVlLWxvYWRlci9saWIvc2VsZWN0b3I/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2FwcC52dWVcIilcblxuLyogdGVtcGxhdGUgKi9cbnZhciBfX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LWQ2NjFhZDk4IXZ1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2FwcC52dWVcIilcbl9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXyB8fCB7fVxuaWYgKFxuICB0eXBlb2YgX192dWVfZXhwb3J0c19fLmRlZmF1bHQgPT09IFwib2JqZWN0XCIgfHxcbiAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCJcbikge1xuX192dWVfb3B0aW9uc19fID0gX192dWVfZXhwb3J0c19fID0gX192dWVfZXhwb3J0c19fLmRlZmF1bHRcbn1cbmlmICh0eXBlb2YgX192dWVfb3B0aW9uc19fID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgX192dWVfb3B0aW9uc19fID0gX192dWVfb3B0aW9uc19fLm9wdGlvbnNcbn1cblxuX192dWVfb3B0aW9uc19fLnJlbmRlciA9IF9fdnVlX3RlbXBsYXRlX18ucmVuZGVyXG5fX3Z1ZV9vcHRpb25zX18uc3RhdGljUmVuZGVyRm5zID0gX192dWVfdGVtcGxhdGVfXy5zdGF0aWNSZW5kZXJGbnNcblxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9leHBvcnRzX19cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FwcC52dWVcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIjx0ZW1wbGF0ZT5cbiAgPGRpdiBpZD1cImFwcFwiPlxuICAgIDxoMT57e3RpdGxlfX08L2gxPlxuXG4gICAgPHJvdXRlci12aWV3IGtlZXAtYWxpdmU+PC9yb3V0ZXItdmlldz5cblxuICAgIDxsb2FkaW5nPjwvbG9hZGluZz5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuICBpbXBvcnQgJy4vcmVzb3VyY2VzL2xlc3MvcmVzZXQubGVzcydcblxuICBpbXBvcnQgVnVlIGZyb20gJ3Z1ZSdcblxuICBpbXBvcnQgbG9hZGluZyBmcm9tICcuL2NvbXBvbmVudHMvbG9hZGluZydcbiAgVnVlLmNvbXBvbmVudCgnbG9hZGluZycsIGxvYWRpbmcpXG5cbiAgZXhwb3J0IGRlZmF1bHQge1xuICAgIGRhdGEoKXtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiAnSGVsbG8gV29ybGQnXG4gICAgICB9XG4gICAgfVxuICB9XG48L3NjcmlwdD5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAudnVlP2M5ZjUwY2UyIiwidmFyIF9fdnVlX2V4cG9ydHNfXywgX192dWVfb3B0aW9uc19fXG52YXIgX192dWVfc3R5bGVzX18gPSB7fVxuXG4vKiBzY3JpcHQgKi9cbl9fdnVlX2V4cG9ydHNfXyA9IHJlcXVpcmUoXCIhIWJhYmVsLWxvYWRlciF2dWUtbG9hZGVyL2xpYi9zZWxlY3Rvcj90eXBlPXNjcmlwdCZpbmRleD0wIS4vbG9hZGluZy52dWVcIilcblxuLyogdGVtcGxhdGUgKi9cbnZhciBfX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LTljYTBjYzAwIXZ1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2xvYWRpbmcudnVlXCIpXG5fX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9leHBvcnRzX18gPSBfX3Z1ZV9leHBvcnRzX18gfHwge31cbmlmIChcbiAgdHlwZW9mIF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0ID09PSBcIm9iamVjdFwiIHx8XG4gIHR5cGVvZiBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiXG4pIHtcbl9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX2V4cG9ydHNfXyA9IF9fdnVlX2V4cG9ydHNfXy5kZWZhdWx0XG59XG5pZiAodHlwZW9mIF9fdnVlX29wdGlvbnNfXyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIF9fdnVlX29wdGlvbnNfXyA9IF9fdnVlX29wdGlvbnNfXy5vcHRpb25zXG59XG5cbl9fdnVlX29wdGlvbnNfXy5yZW5kZXIgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnJlbmRlclxuX192dWVfb3B0aW9uc19fLnN0YXRpY1JlbmRlckZucyA9IF9fdnVlX3RlbXBsYXRlX18uc3RhdGljUmVuZGVyRm5zXG5cbm1vZHVsZS5leHBvcnRzID0gX192dWVfZXhwb3J0c19fXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL2xvYWRpbmcudnVlXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCI8dGVtcGxhdGU+XG4gIDxkaXYgY2xhc3M9XCJsb2FkaW5nXCIgdi1pZj1cImxvYWRTdGF0dXNcIj48L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4gIGltcG9ydCAnLi9sZXNzL2xvYWRpbmcubGVzcydcbiAgaW1wb3J0IHN0b3JlIGZyb20gJy4uL3Z1ZXgvc3RvcmUnXG5cbiAgZXhwb3J0IGRlZmF1bHQge1xuICAgIGNvbXB1dGVkOntcbiAgICAgIGxvYWRTdGF0dXMoKXtcbiAgICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLmxvYWRTdGF0dXM7XG4gICAgICB9XG4gICAgfVxuICB9XG48L3NjcmlwdD5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsb2FkaW5nLnZ1ZT85ZDg3MzJiNiIsIm1vZHVsZS5leHBvcnRzPXtyZW5kZXI6ZnVuY3Rpb24gKCl7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7XG4gIHJldHVybiAoX3ZtLmxvYWRTdGF0dXMpID8gX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJsb2FkaW5nXCJcbiAgfSkgOiBfdm0uX2UoKVxufSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlci5qcz9pZD1kYXRhLXYtOWNhMGNjMDAhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2xvYWRpbmcudnVlXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIHtcbiAgICBhdHRyczoge1xuICAgICAgXCJpZFwiOiBcImFwcFwiXG4gICAgfVxuICB9LCBbX2MoJ2gxJywgW192bS5fdihfdm0uX3MoX3ZtLnRpdGxlKSldKSwgX3ZtLl92KFwiIFwiKSwgX2MoJ3JvdXRlci12aWV3Jywge1xuICAgIGF0dHJzOiB7XG4gICAgICBcImtlZXAtYWxpdmVcIjogXCJcIlxuICAgIH1cbiAgfSksIF92bS5fdihcIiBcIiksIF9jKCdsb2FkaW5nJyldLCAxKVxufSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlci5qcz9pZD1kYXRhLXYtZDY2MWFkOTghLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL3NyYy9hcHAudnVlXG4vLyBtb2R1bGUgaWQgPSA0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX192dWVfZXhwb3J0c19fLCBfX3Z1ZV9vcHRpb25zX19cbnZhciBfX3Z1ZV9zdHlsZXNfXyA9IHt9XG5cbi8qIHNjcmlwdCAqL1xuX192dWVfZXhwb3J0c19fID0gcmVxdWlyZShcIiEhYmFiZWwtbG9hZGVyIXZ1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcblxuLyogdGVtcGxhdGUgKi9cbnZhciBfX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWxvYWRlci9saWIvdGVtcGxhdGUtY29tcGlsZXI/aWQ9ZGF0YS12LTFjODFmOGU4IXZ1ZS1sb2FkZXIvbGliL3NlbGVjdG9yP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfb3B0aW9uc19fID0gX192dWVfZXhwb3J0c19fID0gX192dWVfZXhwb3J0c19fIHx8IHt9XG5pZiAoXG4gIHR5cGVvZiBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdCA9PT0gXCJvYmplY3RcIiB8fFxuICB0eXBlb2YgX192dWVfZXhwb3J0c19fLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIlxuKSB7XG5fX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9leHBvcnRzX18gPSBfX3Z1ZV9leHBvcnRzX18uZGVmYXVsdFxufVxuaWYgKHR5cGVvZiBfX3Z1ZV9vcHRpb25zX18gPT09IFwiZnVuY3Rpb25cIikge1xuICBfX3Z1ZV9vcHRpb25zX18gPSBfX3Z1ZV9vcHRpb25zX18ub3B0aW9uc1xufVxuXG5fX3Z1ZV9vcHRpb25zX18ucmVuZGVyID0gX192dWVfdGVtcGxhdGVfXy5yZW5kZXJcbl9fdnVlX29wdGlvbnNfXy5zdGF0aWNSZW5kZXJGbnMgPSBfX3Z1ZV90ZW1wbGF0ZV9fLnN0YXRpY1JlbmRlckZuc1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX2V4cG9ydHNfX1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdmlldy9pbmRleC9pbmRleC52dWVcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIjx0ZW1wbGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwiYm94XCI+XG4gICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBAY2xpY2s9XCJzaG93TG9hZGluZygpXCI+5pi+56S6bG9hZGluZzwvYT5cbiAgICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4gIGltcG9ydCAnLi9sZXNzL2luZGV4Lmxlc3MnXG4gIGltcG9ydCBzdG9yZSBmcm9tICcuLi8uLi92dWV4L3N0b3JlJ1xuXG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBjcmVhdGVkKCl7XG4gICAgICAgIHN0b3JlLmNvbW1pdCgnTE9BRF9TVEFUVVMnLGZhbHNlKTtcbiAgICB9LFxuICAgICAgXG4gICAgbW91bnRlZCgpe1xuICAgICAgICB0aGlzLnNob3dMb2FkaW5nKCk7XG4gICAgfSxcblxuICAgIG1ldGhvZHM6e1xuICAgICAgICBzaG93TG9hZGluZzogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnTE9BRF9TVEFUVVMnLHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICB9XG48L3NjcmlwdD5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleC52dWU/ZjA5MjYyMWUiLCJtb2R1bGUuZXhwb3J0cz17cmVuZGVyOmZ1bmN0aW9uICgpe3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO1xuICByZXR1cm4gX2MoJ2RpdicsIHtcbiAgICBzdGF0aWNDbGFzczogXCJib3hcIlxuICB9LCBbX2MoJ2EnLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIFwiaHJlZlwiOiBcImphdmFzY3JpcHQ6dm9pZCgwKVwiXG4gICAgfSxcbiAgICBvbjoge1xuICAgICAgXCJjbGlja1wiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgX3ZtLnNob3dMb2FkaW5nKClcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtfdm0uX3YoXCLmmL7npLpsb2FkaW5nXCIpXSldKVxufSxzdGF0aWNSZW5kZXJGbnM6IFtdfVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92dWUtbG9hZGVyL2xpYi90ZW1wbGF0ZS1jb21waWxlci5qcz9pZD1kYXRhLXYtMWM4MWY4ZTghLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL3NyYy92aWV3L2luZGV4L2luZGV4LnZ1ZVxuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==